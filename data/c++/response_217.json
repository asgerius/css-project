[{"tags": ["c++", "tensorflow", "client", "grpc", "tensorflow-serving"], "answers": [{"tags": [], "owner": {"reputation": 1269, "user_id": 2962917, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e32619641709b586f036f5606eb1496c?s=128&d=identicon&r=PG", "display_name": "Bobby", "link": "https://stackoverflow.com/users/2962917/bobby"}, "is_accepted": true, "score": 3, "last_activity_date": 1552596032, "creation_date": 1552596032, "answer_id": 55171599, "question_id": 55033952, "link": "https://stackoverflow.com/questions/55033952/grpc-only-tensorflow-serving-client-in-c/55171599#55171599", "title": "gRPC-only Tensorflow Serving client in C++", "body": "<p>Turns out, this isn't anything new if you have already done it in Python.  Assuming the model has been named \"predict\" and the input to the model is called \"inputs,\" the following is the Python code:</p>\n\n<pre><code>import logging\nimport grpc\nfrom grpc import RpcError\n\nfrom types_pb2 import DT_FLOAT\nfrom tensor_pb2 import TensorProto\nfrom tensor_shape_pb2 import TensorShapeProto\nfrom predict_pb2 import PredictRequest\nfrom prediction_service_pb2_grpc import PredictionServiceStub\n\n\nclass ModelClient:\n    \"\"\"Client Facade to work with a Tensorflow Serving gRPC API\"\"\"\n    host = None\n    port = None\n    chan = None\n    stub = None\n\n    logger = logging.getLogger(__name__)\n\n    def __init__(self, name, dims, dtype=DT_FLOAT, version=1):\n        self.model = name\n        self.dims = [TensorShapeProto.Dim(size=dim) for dim in dims]\n        self.dtype = dtype\n        self.version = version\n\n    @property\n    def hostport(self):\n        \"\"\"A host:port string representation\"\"\"\n        return f\"{self.host}:{self.port}\"\n\n    def connect(self, host='localhost', port=8500):\n        \"\"\"Connect to the gRPC server and initialize prediction stub\"\"\"\n        self.host = host\n        self.port = int(port)\n\n        self.logger.info(f\"Connecting to {self.hostport}...\")\n        self.chan = grpc.insecure_channel(self.hostport)\n\n        self.logger.info(\"Initializing prediction gRPC stub.\")\n        self.stub = PredictionServiceStub(self.chan)\n\n    def tensor_proto_from_measurement(self, measurement):\n        \"\"\"Pass in a measurement and return a tensor_proto protobuf object\"\"\"\n        self.logger.info(\"Assembling measurement tensor.\")\n        return TensorProto(\n            dtype=self.dtype,\n            tensor_shape=TensorShapeProto(dim=self.dims),\n            string_val=[bytes(measurement)]\n        )\n\n    def predict(self, measurement, timeout=10):\n        \"\"\"Execute prediction against TF Serving service\"\"\"\n        if self.host is None or self.port is None \\\n                or self.chan is None or self.stub is None:\n            self.connect()\n\n        self.logger.info(\"Creating request.\")\n        request = PredictRequest()\n        request.model_spec.name = self.model\n\n        if self.version &gt; 0:\n            request.model_spec.version.value = self.version\n\n        request.inputs['inputs'].CopyFrom(\n            self.tensor_proto_from_measurement(measurement))\n\n        self.logger.info(\"Attempting to predict against TF Serving API.\")\n        try:\n            return self.stub.Predict(request, timeout=timeout)\n        except RpcError as err:\n            self.logger.error(err)\n            self.logger.error('Predict failed.')\n            return None\n</code></pre>\n\n<p>The following is a working (rough) C++ translation:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n\n#include &lt;grpcpp/grpcpp.h&gt;\n\n#include \"grpcpp/create_channel.h\"\n#include \"grpcpp/security/credentials.h\"\n#include \"google/protobuf/map.h\"\n\n#include \"types.grpc.pb.h\"\n#include \"tensor.grpc.pb.h\"\n#include \"tensor_shape.grpc.pb.h\"\n#include \"predict.grpc.pb.h\"\n#include \"prediction_service.grpc.pb.h\"\n\nusing grpc::Channel;\nusing grpc::ClientContext;\nusing grpc::Status;\n\nusing tensorflow::TensorProto;\nusing tensorflow::TensorShapeProto;\nusing tensorflow::serving::PredictRequest;\nusing tensorflow::serving::PredictResponse;\nusing tensorflow::serving::PredictionService;\n\ntypedef google::protobuf::Map&lt;std::string, tensorflow::TensorProto&gt; OutMap;\n\nclass ServingClient {\n public:\n  ServingClient(std::shared_ptr&lt;Channel&gt; channel)\n      : stub_(PredictionService::NewStub(channel)) {}\n\n  // Assembles the client's payload, sends it and presents the response back\n  // from the server.\n  std::string callPredict(const std::string&amp; model_name,\n                          const float&amp; measurement) {\n\n    // Data we are sending to the server.\n    PredictRequest request;\n    request.mutable_model_spec()-&gt;set_name(model_name);\n\n    // Container for the data we expect from the server.\n    PredictResponse response;\n\n    // Context for the client. It could be used to convey extra information to\n    // the server and/or tweak certain RPC behaviors.\n    ClientContext context;\n\n    google::protobuf::Map&lt;std::string, tensorflow::TensorProto&gt;&amp; inputs =\n      *request.mutable_inputs();\n\n    tensorflow::TensorProto proto;\n    proto.set_dtype(tensorflow::DataType::DT_FLOAT);\n    proto.add_float_val(measurement);\n\n    proto.mutable_tensor_shape()-&gt;add_dim()-&gt;set_size(5);\n    proto.mutable_tensor_shape()-&gt;add_dim()-&gt;set_size(8);\n    proto.mutable_tensor_shape()-&gt;add_dim()-&gt;set_size(105);\n\n    inputs[\"inputs\"] = proto;\n\n    // The actual RPC.\n    Status status = stub_-&gt;Predict(&amp;context, request, &amp;response);\n\n    // Act upon its status.\n    if (status.ok()) {\n      std::cout &lt;&lt; \"call predict ok\" &lt;&lt; std::endl;\n      std::cout &lt;&lt; \"outputs size is \" &lt;&lt; response.outputs_size() &lt;&lt; std::endl;\n\n      OutMap&amp; map_outputs = *response.mutable_outputs();\n      OutMap::iterator iter;\n      int output_index = 0;\n\n      for (iter = map_outputs.begin(); iter != map_outputs.end(); ++iter) {\n        tensorflow::TensorProto&amp; result_tensor_proto = iter-&gt;second;\n        std::string section = iter-&gt;first;\n        std::cout &lt;&lt; std::endl &lt;&lt; section &lt;&lt; \":\" &lt;&lt; std::endl;\n\n        if (\"classes\" == section) {\n          int titer;\n          for (titer = 0; titer != result_tensor_proto.int64_val_size(); ++titer) {\n            std::cout &lt;&lt; result_tensor_proto.int64_val(titer) &lt;&lt; \", \";\n          }\n        } else if (\"scores\" == section) {\n          int titer;\n          for (titer = 0; titer != result_tensor_proto.float_val_size(); ++titer) {\n            std::cout &lt;&lt; result_tensor_proto.float_val(titer) &lt;&lt; \", \";\n          }\n        }\n        std::cout &lt;&lt; std::endl;\n        ++output_index;\n      }\n      return \"Done.\";\n    } else {\n      std::cout &lt;&lt; \"gRPC call return code: \" &lt;&lt; status.error_code() &lt;&lt; \": \"\n                &lt;&lt; status.error_message() &lt;&lt; std::endl;\n      return \"RPC failed\";\n    }\n  }\n\n private:\n  std::unique_ptr&lt;PredictionService::Stub&gt; stub_;\n};\n</code></pre>\n\n<p>Note that the dimensions here have been specified within the code instead of passed in.</p>\n\n<p>Given the above class, execution can then be as follows:</p>\n\n<pre><code>int main(int argc, char** argv) {\n  float measurement[5*8*105] = { ... data ... };\n\n  ServingClient sclient(grpc::CreateChannel(\n      \"localhost:8500\", grpc::InsecureChannelCredentials()));\n  std::string model(\"predict\");\n  std::string reply = sclient.callPredict(model, *measurement);\n  std::cout &lt;&lt; \"Predict received: \" &lt;&lt; reply &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>The <code>Makefile</code> used was borrowed from the <code>gRPC</code> C++ examples, with the <code>PROTOS_PATH</code> variable set relative to the Makefile and the following build target (assuming the C++ application is named <code>predict.cc</code>):</p>\n\n<pre><code>predict: types.pb.o types.grpc.pb.o tensor_shape.pb.o tensor_shape.grpc.pb.o resource_handle.pb.o resource_handle.grpc.pb.o model.pb.o model.grpc.pb.o tensor.pb.o tensor.grpc.pb.o predict.pb.o predict.grpc.pb.o prediction_service.pb.o prediction_service.grpc.pb.o predict.o\n    $(CXX) $^ $(LDFLAGS) -o $@\n</code></pre>\n"}], "owner": {"reputation": 1269, "user_id": 2962917, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e32619641709b586f036f5606eb1496c?s=128&d=identicon&r=PG", "display_name": "Bobby", "link": "https://stackoverflow.com/users/2962917/bobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1823, "favorite_count": 0, "accepted_answer_id": 55171599, "answer_count": 1, "score": 1, "last_activity_date": 1559898397, "creation_date": 1551916003, "question_id": 55033952, "link": "https://stackoverflow.com/questions/55033952/grpc-only-tensorflow-serving-client-in-c", "title": "gRPC-only Tensorflow Serving client in C++", "body": "<p>There seems to be a bit of information out there for creating a <code>gRPC</code>-only client in Python (and even a few other languages) and I was able to successfully get a working client that uses only <code>gRPC</code> in Python that works for our implementation.</p>\n\n<p>What I can't seem to find is a case where someone has successfully written the client in C++.</p>\n\n<p>The constraints of the task are as follows:</p>\n\n<ol>\n<li>The build system cannot be <code>bazel</code>, because the final application already has its own build system.</li>\n<li>The client cannot include <code>Tensorflow</code> (which requires <code>bazel</code> to build against in C++).</li>\n<li>The application should use gRPC and not HTTP calls for speed.</li>\n<li>The application ideally won't call Python or otherwise execute shell commands.</li>\n</ol>\n\n<p>Given the above constraints, and assuming that I extracted and generated the <code>gRPC</code> stubs, is this even possible?  If so, can an example be provided?</p>\n"}, {"tags": ["c++", "stl", "qt5"], "answers": [{"comments": [{"owner": {"reputation": 3504, "user_id": 224982, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e7b4b96492f8648f4e9372a9f3db752f?s=128&d=identicon&r=PG", "display_name": "ilya1725", "link": "https://stackoverflow.com/users/224982/ilya1725"}, "edited": false, "score": 0, "creation_date": 1551916402, "post_id": 55033990, "comment_id": 96820479, "body": "Any idea why QT implemented it this way?"}, {"owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "reply_to_user": {"reputation": 3504, "user_id": 224982, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e7b4b96492f8648f4e9372a9f3db752f?s=128&d=identicon&r=PG", "display_name": "ilya1725", "link": "https://stackoverflow.com/users/224982/ilya1725"}, "edited": false, "score": 2, "creation_date": 1551916624, "post_id": 55033990, "comment_id": 96820539, "body": "you can read more about it here : <a href=\"https://doc.qt.io/qt-5/containers.html#assignable-data-type\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/containers.html#assignable-data-type</a>"}, {"owner": {"reputation": 3504, "user_id": 224982, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e7b4b96492f8648f4e9372a9f3db752f?s=128&d=identicon&r=PG", "display_name": "ilya1725", "link": "https://stackoverflow.com/users/224982/ilya1725"}, "edited": false, "score": 0, "creation_date": 1551987691, "post_id": 55033990, "comment_id": 96853097, "body": "Thanks for the pointer @Spinkoo, but I still couldn&#39;t locate the reasoning. Having said that, I also don&#39;t see a reason to use QT containers instead of STL ones."}, {"owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "reply_to_user": {"reputation": 3504, "user_id": 224982, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e7b4b96492f8648f4e9372a9f3db752f?s=128&d=identicon&r=PG", "display_name": "ilya1725", "link": "https://stackoverflow.com/users/224982/ilya1725"}, "edited": false, "score": 0, "creation_date": 1551990389, "post_id": 55033990, "comment_id": 96854406, "body": "From my point of view i think using qt containers is so the whole qt project will be built under one platform &amp; of course less casting go &amp; back from other c++ types"}], "tags": [], "owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "is_accepted": true, "score": 1, "last_activity_date": 1551916597, "last_edit_date": 1551916597, "creation_date": 1551916310, "answer_id": 55033990, "question_id": 55033913, "link": "https://stackoverflow.com/questions/55033913/qvector-vs-stdvector-for-complex-types/55033990#55033990", "title": "QVector vs std::vector for complex types", "body": "<p>The reason why std::vector works differently lies in the fact that in vector, raw uninitialized memory is allocated and then calls copy constructor to do the copy whenever required. This process doesn't require calling default constructor for resize(). That's why there is no dependency as such on default constructor.</p>\n\n<p>On the other hand,QVector requires type to be default constructible because of the way the internal function realloc() is implemented.</p>\n\n<p>according to the QT docs : </p>\n\n<blockquote>\n  <p>The values stored in the various containers can be of any assignable\n  data type. To qualify, a type must provide a default constructor, a\n  copy constructor, and an assignment operator. This covers most data\n  types you are likely to want to store in a container, including basic\n  types such as int and double, pointer types</p>\n</blockquote>\n"}], "owner": {"reputation": 3504, "user_id": 224982, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e7b4b96492f8648f4e9372a9f3db752f?s=128&d=identicon&r=PG", "display_name": "ilya1725", "link": "https://stackoverflow.com/users/224982/ilya1725"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 55033990, "answer_count": 1, "score": 2, "last_activity_date": 1551916597, "creation_date": 1551915654, "question_id": 55033913, "link": "https://stackoverflow.com/questions/55033913/qvector-vs-stdvector-for-complex-types", "title": "QVector vs std::vector for complex types", "body": "<p>So I have a structure:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Alarm{\n    Alarm(QString operation, double comparison, QString text, quint8 color):\n        operation(operation), comparison(comparison), text(text), color(color){}\n\n    int             element;\n    QString         operation;\n    double          comparison;\n\n    QString         text;\n    quint8          color;\n\n    QDateTime       riseTime;\n};\n</code></pre>\n\n<p>Note that it doesn't have a default constructor <code>Alarm()</code>.\nI would like to have a vector container of objects of this structure. If I try to use <code>QVector</code> the code fails to compile in the code where I attempt to append new object with this error:</p>\n\n<pre><code>/usr/include/x86_64-linux-gnu/qt5/QtCore/qvector.h: In instantiation of \u2018void QVector&lt;T&gt;::defaultConstruct(T*, T*) [with T = Alarm]\u2019:\n/usr/include/x86_64-linux-gnu/qt5/QtCore/qvector.h:580:41:   required from \u2018void QVector&lt;T&gt;::reallocData(int, int, QArrayData::AllocationOptions) [with T = Alarm; QArrayData::AllocationOptions = QFlags&lt;QArrayData::AllocationOption&gt;]\u2019\n/usr/include/x86_64-linux-gnu/qt5/QtCore/qvector.h:654:20:   required from \u2018void QVector&lt;T&gt;::append(const T&amp;) [with T = Alarm]\u2019\n/usr/include/x86_64-linux-gnu/qt5/QtCore/qvector.h:280:13:   required from \u2018QVector&lt;T&gt;&amp; QVector&lt;T&gt;::operator&lt;&lt;(const T&amp;) [with T = Alarm]\u2019\n/opt/buildagent/work/1a89dfc8903ef3d7/ground/gcs/src/plugins/qmlview/Alarms.cpp:56:243:   required from here\n/usr/include/x86_64-linux-gnu/qt5/QtCore/qvector.h:322:13: error: no matching function for call to \u2018Alarm::Alarm()\u2019\n          new (from++) T();\n</code></pre>\n\n<p>It appears that <code>QVector</code> requires the class it holds to have a default constructor. However, using <code>std::vector&lt;T&gt;</code> compiles just fine.</p>\n\n<p>My question is why? \nIs this a requirement for using <a href=\"https://doc.qt.io/qt-5/qvector.html\" rel=\"nofollow noreferrer\">QVector</a> to have a class with default constructor? Or I'm not using the container correctly?</p>\n"}, {"tags": ["c++", "qt", "boost", "boost-geometry", "qtlocation"], "comments": [{"owner": {"reputation": 662, "user_id": 962856, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c74bde5974bd62447d68cb3b924ec17e?s=128&d=identicon&r=PG", "display_name": "Pa_", "link": "https://stackoverflow.com/users/962856/pa"}, "edited": false, "score": 0, "creation_date": 1552320049, "post_id": 55033877, "comment_id": 96954597, "body": "what do you mean by &quot;adapt&quot;?"}, {"owner": {"reputation": 191, "user_id": 440562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fd2f175c8a7ab8919c0098b50e27c6?s=128&d=identicon&r=PG", "display_name": "Denys Rogovchenko", "link": "https://stackoverflow.com/users/440562/denys-rogovchenko"}, "reply_to_user": {"reputation": 662, "user_id": 962856, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c74bde5974bd62447d68cb3b924ec17e?s=128&d=identicon&r=PG", "display_name": "Pa_", "link": "https://stackoverflow.com/users/962856/pa"}, "edited": false, "score": 0, "creation_date": 1552619429, "post_id": 55033877, "comment_id": 97088756, "body": "Something like that: <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/geometry/doc/html/geometry/examples/example__adapting_a_legacy_geometry_object_model.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_69_0/libs/geometry/doc/html/geometry/&hellip;</a>"}], "owner": {"reputation": 191, "user_id": 440562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63fd2f175c8a7ab8919c0098b50e27c6?s=128&d=identicon&r=PG", "display_name": "Denys Rogovchenko", "link": "https://stackoverflow.com/users/440562/denys-rogovchenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551915390, "creation_date": 1551915390, "question_id": 55033877, "link": "https://stackoverflow.com/questions/55033877/qt-qgeocoordinate-adapt-as-boostgeometry-point", "title": "Qt QGeoCoordinate adapt as boost::geometry point", "body": "<p>Is it possible to adapt <code>QGeoCoordinate</code> as <code>boost::geometry</code> point type? <code>QGeoCoordinate</code> only has getter and setter methods for lat/lon - no public access to fields.</p>\n"}, {"tags": ["c++", "c++11", "templates", "perfect-forwarding", "template-argument-deduction"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1551918762, "post_id": 55033845, "comment_id": 96821036, "body": "Chance are that function are inlined completely, removing extra functions."}, {"owner": {"reputation": 529, "user_id": 208837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/827337a092a69aa20984f90a344cff0d?s=128&d=identicon&r=PG", "display_name": "Paul Merrill", "link": "https://stackoverflow.com/users/208837/paul-merrill"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1551928320, "post_id": 55033845, "comment_id": 96823163, "body": "@Jarod42 Agreed for the size of the functions in the example here. Although depending on the size of <code>f</code> and <code>g</code> and the further functions they themselves call, it starts to get more ambiguous. Have seen instances of this not being inlined before."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 1, "creation_date": 1551969973, "post_id": 55033845, "comment_id": 96843339, "body": "If you worry about identical functions, linkers usually have an option to merge them. (like gold/lld&#39;s <code>--icf</code>)"}, {"owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "edited": false, "score": 1, "creation_date": 1551973818, "post_id": 55033845, "comment_id": 96845813, "body": "Acctually there are 8 possible instantiations per value type: cv-qualifiers make it 2(for constness)x 2(for volatileness) and r/l-valueness mutiplies it by another 2."}], "answers": [{"comments": [{"owner": {"reputation": 6524, "user_id": 396551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcfa45e0170031552a9328c7b4dbe7e?s=128&d=identicon&r=PG", "display_name": "Sjoerd", "link": "https://stackoverflow.com/users/396551/sjoerd"}, "edited": false, "score": 1, "creation_date": 1551976819, "post_id": 55047720, "comment_id": 96847640, "body": "Another option is two overloads that call a private template. Then you have full control over which template instantiations are generated, but still profit from having a template."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "reply_to_user": {"reputation": 6524, "user_id": 396551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcfa45e0170031552a9328c7b4dbe7e?s=128&d=identicon&r=PG", "display_name": "Sjoerd", "link": "https://stackoverflow.com/users/396551/sjoerd"}, "edited": false, "score": 0, "creation_date": 1551979930, "post_id": 55047720, "comment_id": 96849385, "body": "@Sjoerd That was max66&#39;s answer but for some reason they deleted it."}, {"owner": {"reputation": 529, "user_id": 208837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/827337a092a69aa20984f90a344cff0d?s=128&d=identicon&r=PG", "display_name": "Paul Merrill", "link": "https://stackoverflow.com/users/208837/paul-merrill"}, "reply_to_user": {"reputation": 6524, "user_id": 396551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcfa45e0170031552a9328c7b4dbe7e?s=128&d=identicon&r=PG", "display_name": "Sjoerd", "link": "https://stackoverflow.com/users/396551/sjoerd"}, "edited": false, "score": 0, "creation_date": 1551998318, "post_id": 55047720, "comment_id": 96857416, "body": "@Sjoerd What might that look like?"}, {"owner": {"reputation": 449, "user_id": 11023821, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HrnttopymvQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOB1QpahG9yHX8Gry2E7eOa2kyR7A/mo/photo.jpg?sz=128", "display_name": "Ralf Ulrich", "link": "https://stackoverflow.com/users/11023821/ralf-ulrich"}, "edited": false, "score": 0, "creation_date": 1552024070, "post_id": 55047720, "comment_id": 96863471, "body": "I&#39;ll add an example oft this suggestion to my answer."}], "tags": [], "owner": {"reputation": 449, "user_id": 11023821, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HrnttopymvQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOB1QpahG9yHX8Gry2E7eOa2kyR7A/mo/photo.jpg?sz=128", "display_name": "Ralf Ulrich", "link": "https://stackoverflow.com/users/11023821/ralf-ulrich"}, "is_accepted": true, "score": 3, "last_activity_date": 1552119357, "last_edit_date": 1552119357, "creation_date": 1551973492, "answer_id": 55047720, "question_id": 55033845, "link": "https://stackoverflow.com/questions/55033845/deducing-a-const-l-value-reference-from-a-non-const-l-value-reference-in-c-tem/55047720#55047720", "title": "Deducing a const l-value reference from a non-const l-value reference in C++ template", "body": "<p>It is a subjective point-of-view to say \"forward references\" (\"universal references\") are better than dedicated overloads. There are certainly many cases where this is true, but if you want to have full control they won't do all the jobs. </p>\n\n<p>You could explicitly make sure users do not pass non-const lvalue references, by adding</p>\n\n<pre><code>    static_assert(!std::is_lvalue_reference&lt;T&gt;::value || std::is_const&lt;typename std::remove_reference&lt;T&gt;::type&gt;::value, \"only call g with const argument\");\n</code></pre>\n\n<p>inside g, but this is not in all cases a very good solution. </p>\n\n<p>Or you do what is done for vector::push_back(...) and provide explicit overloads -- but this was your starting point, see <a href=\"https://en.cppreference.com/w/cpp/container/vector/push_back\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/container/vector/push_back</a>. </p>\n\n<p>The 'correct' answer just depends on your requirements. </p>\n\n<p><strong>Edit</strong>:\nthe suggestion of @Sjoerd would look something like:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass aBitComplicated {\npublic:\n void func(T&amp;&amp; v) { internal_func(std::forward&lt;T&gt;(v)); }\n void func(const T&amp; v) { internal_func(v); }\nprivate:\n template &lt;typename U&gt;\n void internal_func(U&amp;&amp; v) { /* your universal code*/ }\n};\n\n</code></pre>\n\n<p>There also a bit more sophisticated/complicated version of this, but this here should be the most simple version to achieve what you asked for.  </p>\n"}], "owner": {"reputation": 529, "user_id": 208837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/827337a092a69aa20984f90a344cff0d?s=128&d=identicon&r=PG", "display_name": "Paul Merrill", "link": "https://stackoverflow.com/users/208837/paul-merrill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 2, "accepted_answer_id": 55047720, "answer_count": 1, "score": 5, "last_activity_date": 1552119357, "creation_date": 1551915174, "last_edit_date": 1551954918, "question_id": 55033845, "link": "https://stackoverflow.com/questions/55033845/deducing-a-const-l-value-reference-from-a-non-const-l-value-reference-in-c-tem", "title": "Deducing a const l-value reference from a non-const l-value reference in C++ template", "body": "<p>Suppose you have the following pair of functions:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void f(const int&amp;) { \n    // Do something, making a copy of the argument.\n}\n\nvoid f(int&amp;&amp;) { \n    // Do the same thing, but moving the argument.\n}\n</code></pre>\n\n<p>They are fairly redundant\u2014the only difference between the functions being whether they copy or move their argument. Of course, we can do better by re-writing this as a single template function:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T&gt; \nvoid g(T&amp;&amp;) { \n    // Do something, possibly using std::forward to copy or move the argument.\n}\n</code></pre>\n\n<p>This works, and is a commonly used idiom in practice. But the template might be instantiated into three functions, up from our two above. We can verify this occurs with the following piece of code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt; constexpr char *type = nullptr;\ntemplate&lt;&gt; constexpr const char *type&lt;int&amp;&gt; = \"int&amp;\";\ntemplate&lt;&gt; constexpr const char *type&lt;const int&amp;&gt; = \"const int&amp;\";\ntemplate&lt;&gt; constexpr const char *type&lt;int&gt; = \"int\";\n\ntemplate&lt;typename T&gt; \nvoid g(T&amp;&amp;) { \n    std::cout &lt;&lt; reinterpret_cast&lt;void*&gt;(&amp;g&lt;T&gt;)\n              &lt;&lt; \" = &amp;g&lt;\" &lt;&lt; type&lt;T&gt; &lt;&lt; \"&gt;\" &lt;&lt; std::endl;\n}\n\nint main() {\n    int i = 0;\n    const int&amp; cr = 0;\n\n    g(i);\n    g(cr);\n    g(0);\n\n    return 0;\n}\n\n/*\nPrints:\n\n0x100f45080 = &amp;g&lt;int&amp;&gt;\n0x100f45100 = &amp;g&lt;const int&amp;&gt;\n0x100f45180 = &amp;g&lt;int&gt;\n*/\n</code></pre>\n\n<p>This has added a third function for the case when <code>T = int&amp;</code>, which we didn't have when we were using our non-templated function <code>f</code> above. In this case, we don't actually need this non-const l-value reference version of the function\u2014given <code>f</code> was sufficient for our original needs\u2014and this increases the size of our code, especially if we have many template functions written this way that call each other.</p>\n\n<p>Is there a way to write our function <code>g</code> above so that the compiler will automatically deduce <code>T = const int&amp;</code> when <code>g(i)</code> is called in our example code? I.e., a way where we don't have to manually write <code>g&lt;const int&amp;&gt;(i)</code> yet still get the desired behavior.</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "udp", "firewall"], "comments": [{"owner": {"reputation": 1577, "user_id": 949365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22478a03cc8808d7979cbbf8e93ad57?s=128&d=identicon&r=PG", "display_name": "Andy Sterland", "link": "https://stackoverflow.com/users/949365/andy-sterland"}, "edited": false, "score": 0, "creation_date": 1551920255, "post_id": 55033843, "comment_id": 96821364, "body": "What sort of application is this? If it&#39;s a UWP app there is a limitation where apps have to have a manifest capability to access localhost (or indeed other network locations - but local is special). The VS debugger, in some cases, grants this by default because it&#39;s really, really, usefull in many scenarios.  There&#39;s docs on this over at: <a href=\"https://docs.microsoft.com/en-us/previous-versions/windows/apps/hh780593(v=win.10)\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/previous-versions/windows/apps/&hellip;</a>"}, {"owner": {"reputation": 932, "user_id": 1721186, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/191bbec6bbd670cff4888c4f9d8e7ca6?s=128&d=identicon&r=PG", "display_name": "Steve Valliere", "link": "https://stackoverflow.com/users/1721186/steve-valliere"}, "edited": false, "score": 0, "creation_date": 1564424807, "post_id": 55033843, "comment_id": 101018242, "body": "I&#39;m experiencing the EXACT opposite with VS2019 16.2.0 (my app&#39;s UDP only works OUTSIDE the debugger.)  Did you ever find a cause/solution?  It might be applicable to my case as well."}], "owner": {"reputation": 21, "user_id": 11162529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd85aaf70b0140b13b88d87a5070ccec?s=128&d=identicon&r=PG&f=1", "display_name": "m.s.", "link": "https://stackoverflow.com/users/11162529/m-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551915172, "creation_date": 1551915172, "question_id": 55033843, "link": "https://stackoverflow.com/questions/55033843/udp-communication-not-working-outside-of-visual-studio-debugger", "title": "UDP Communication not working outside of Visual Studio Debugger", "body": "<p>I have two separate c++ applications (running on Windows 10) that need to communicate with each other on multiple UDP ports.  Both applications are running on one machine so I am just using the localhost IP on both ends.  The first application is a robust control program that generates a lot of data that is sent out on these ports.  The second application is a basic server that is designed to receive and process all this message traffic and occasionally send commands back to the first application.  </p>\n\n<p>When running in Visual Studio everything works as expected however running from the command line or a bash script my server app receives all the data as expected, but I cannot sending data to the control app.  </p>\n\n<p>I have tried tweaking the Windows Defender and symantic settings with no luck.  Is it possible something else is blocking communication only in one direction?  And why does it work in the Visual Studio debugger but not when running the executables from the command line?</p>\n"}, {"tags": ["c++", "string", "parsing", "c++17"], "comments": [{"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 1, "creation_date": 1551982716, "post_id": 55033842, "comment_id": 96850703, "body": "This seems to focus on the trivial.  I&#39;d expect you to be interested in how do the parsing itself.   See my SO answer on how to write a parser.  With that in hand, you can decide which of these makes sense to you.   See <a href=\"https://stackoverflow.com/a/2336769/120163\">stackoverflow.com/a/2336769/120163</a>"}], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551981489, "creation_date": 1551915168, "last_edit_date": 1551981489, "question_id": 55033842, "link": "https://stackoverflow.com/questions/55033842/parsing-an-algebraic-function-or-expression-from-a-string", "title": "Parsing an algebraic function or expression from a string", "body": "<p>Let's say that I will have an algebraic function or expression that is in the form of a <code>std::string</code>. Either a function or a class constructor would accept this string as a parameter.</p>\n\n<pre><code>void function( const std::string&amp; function ) { /* ... */ }\n\nclass Foo {\n    explicit Foo( const std::string&amp; function ) { /* ... */ }\n};\n</code></pre>\n\n<p>Then let's say I have a function that will parse this string and then convert it into a <code>std::function</code> where my current function signature looks like this:</p>\n\n<pre><code>template&lt;typename Ret, typename... Args&gt;\nvoid parseStringFunc( const std::string&amp; funcStr, std::function&lt;Ret(Args...)&gt;&amp; func ) {\n     /*....*/\n }\n</code></pre>\n\n<p>Now comes the question in mind as it has to do with parsing the string. I have two choices to work from and I wanted to know which one would be the preferred choice as a lookup table.</p>\n\n<ul>\n<li>I could have a <code>std::vector&lt;char&gt; operators { '+', '-', '*', '/', '=' }</code>\n\n<ul>\n<li>The same above but for numbers or digits [0-9]</li>\n<li>and for letters [a-z] and [A-Z] where this would be tedious.</li>\n</ul></li>\n<li>Or I could make it simpler and have just a <code>std::string</code>:\n\n<ul>\n<li><code>std::string operators { \"+-*/=\" };</code></li>\n<li><code>std::string numbers{ \"0123456789\" };</code></li>\n<li><code>std::string letters{ \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\" };</code></li>\n</ul></li>\n</ul>\n\n<p>I'm wondering which would be the preferred choice above to use for a look up table to compare the individual characters within the <code>funcStr</code> that will be parsed to be converted into a <code>std::function</code>.</p>\n"}, {"tags": ["c++", "pointers", "arduino", "destruction"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1551914209, "post_id": 55033682, "comment_id": 96819909, "body": "In modern C++ you should prefer <code>std::vector</code> and smart pointers over manually managing memory"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1551914732, "post_id": 55033682, "comment_id": 96820064, "body": "The best advice is a slight extension to @UnholySheep &#39;s comment: Don&#39;t <code>new</code> stuff unless you really really have to. Recommended reading: <a href=\"https://stackoverflow.com/questions/6500313/why-should-c-programmers-minimize-use-of-new\">Why should C++ programmers minimize use of &#39;new&#39;?</a>"}, {"owner": {"reputation": 283, "user_id": 3866107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000166929231/picture?type=large", "display_name": "Phillip McMullen", "link": "https://stackoverflow.com/users/3866107/phillip-mcmullen"}, "edited": false, "score": 0, "creation_date": 1551914795, "post_id": 55033682, "comment_id": 96820087, "body": "Sorry, I forgot to include - this is on a microcontroller which, to my knowledge, doesn&#39;t support smart pointers. I&#39;ll update the tags/question. Thanks for your responses, however"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551914960, "post_id": 55033682, "comment_id": 96820136, "body": "On a microcontroller you are even less likely to want to be allocating and de-allocating objects frequently (if at all). It runs the risk of fragmenting the memory."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1551915954, "post_id": 55033682, "comment_id": 96820362, "body": "Does your Arduino compiler support <code>C++11</code>? If it does, writing a <code>std::unique_ptr</code> type smart pointer isn&#39;t too hard."}, {"owner": {"reputation": 283, "user_id": 3866107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000166929231/picture?type=large", "display_name": "Phillip McMullen", "link": "https://stackoverflow.com/users/3866107/phillip-mcmullen"}, "edited": false, "score": 0, "creation_date": 1551976921, "post_id": 55033682, "comment_id": 96847695, "body": "It looks like it does support <code>C++11</code> but i don&#39;t have <code>std::unique_ptr</code>, do you mean to create my own? If so, can you point me in the right direction for this?"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551914630, "post_id": 55033764, "comment_id": 96820039, "body": "This I can get behind."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551914770, "post_id": 55033764, "comment_id": 96820079, "body": "That said, it does beg the question, Does the asker need dynamic allocation at all?"}], "tags": [], "owner": {"reputation": 1327, "user_id": 2990896, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/hSkaq.jpg?s=128&g=1", "display_name": "cplusplusrat", "link": "https://stackoverflow.com/users/2990896/cplusplusrat"}, "is_accepted": false, "score": 5, "last_activity_date": 1551914572, "creation_date": 1551914572, "answer_id": 55033764, "question_id": 55033682, "link": "https://stackoverflow.com/questions/55033682/how-can-i-delete-an-object-from-a-pointer-to-a-pointer-array/55033764#55033764", "title": "How can I delete an object from a pointer to a pointer array?", "body": "<p>Its best not to use the raw pointers at all and go for stl containers. One possible way could be as below.</p>\n\n<pre><code>using InputPtr = std::unique_ptr&lt;Input&gt;;\nstd::vector&lt;InputPtr&gt; Inputs;\nInputs.emplace_back(std::make_unique&lt;DigitalInput&gt;());\n</code></pre>\n\n<p>No need to worry about memory leaks any more. The other option you have is to use <code>std::shared_ptr</code> depending upon how you intend to use your InputList;</p>\n"}, {"comments": [{"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 1, "creation_date": 1551915194, "post_id": 55033767, "comment_id": 96820202, "body": "This has no context within the code, please provide some explanation on what you are trying to achieve."}, {"owner": {"reputation": 63, "user_id": 7306693, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271384256255717/picture?type=large", "display_name": "Alzer Casi&#241;o", "link": "https://stackoverflow.com/users/7306693/alzer-casi%c3%b1o"}, "reply_to_user": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1551918232, "post_id": 55033767, "comment_id": 96820934, "body": "I thought he was asking how to delete old objects?"}, {"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1551918646, "post_id": 55033767, "comment_id": 96821005, "body": "That is not what I was getting at. You have code, it does a thing, what does it do? Why is it correct? What is the context or subject? Basically, you need to explain yourself. Look at Andy&#39;s and cplusplusrat&#39;s answers. They have code, but they give explanations on why their answers are correct, and explain what they are doing."}], "tags": [], "owner": {"reputation": 63, "user_id": 7306693, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271384256255717/picture?type=large", "display_name": "Alzer Casi&#241;o", "link": "https://stackoverflow.com/users/7306693/alzer-casi%c3%b1o"}, "is_accepted": false, "score": -1, "last_activity_date": 1551918661, "last_edit_date": 1551918661, "creation_date": 1551914578, "answer_id": 55033767, "question_id": 55033682, "link": "https://stackoverflow.com/questions/55033682/how-can-i-delete-an-object-from-a-pointer-to-a-pointer-array/55033767#55033767", "title": "How can I delete an object from a pointer to a pointer array?", "body": "<p>If you want to delete objects in the heap:</p>\n\n<p><code>for(int i = 0; i &lt; totalInputs; ++i) \n   delete Inputs[i]; \ndelete[] Inputs</code>;</p>\n\n<p>Edit:\nIf you're using a microcontroller it would be best to allocate at the stack instead.</p>\n\n<p>Define a maximum size on your array. Like:</p>\n\n<pre><code>const int MAX = 5;\nInputs inputs[MAX][MAX];\n</code></pre>\n\n<p>then just asign objects to it.</p>\n"}, {"tags": [], "owner": {"reputation": 78442, "user_id": 202009, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/31dcfef154edd75223ae28f2cfd77f71?s=128&d=identicon&r=PG", "display_name": "Andy Thomas", "link": "https://stackoverflow.com/users/202009/andy-thomas"}, "is_accepted": true, "score": 1, "last_activity_date": 1551915090, "last_edit_date": 1551915090, "creation_date": 1551914582, "answer_id": 55033769, "question_id": 55033682, "link": "https://stackoverflow.com/questions/55033682/how-can-i-delete-an-object-from-a-pointer-to-a-pointer-array/55033769#55033769", "title": "How can I delete an object from a pointer to a pointer array?", "body": "<p>If you're reassigning a member of the array to point to a new object, you can first deallocate the old object, if any.</p>\n\n<pre><code>Input* oldInput = this-&gt;Inputs[inputNumber];\ndelete oldInput;\n\nthis-&gt;Inputs[inputNumber] = new DigitalInput(params...)\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 3866107, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000166929231/picture?type=large", "display_name": "Phillip McMullen", "link": "https://stackoverflow.com/users/3866107/phillip-mcmullen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 55033769, "answer_count": 3, "score": 0, "last_activity_date": 1551977051, "creation_date": 1551914052, "last_edit_date": 1551977051, "question_id": 55033682, "link": "https://stackoverflow.com/questions/55033682/how-can-i-delete-an-object-from-a-pointer-to-a-pointer-array", "title": "How can I delete an object from a pointer to a pointer array?", "body": "<p>I'm still new to manual destruction in C++ (came from languages with garbage collection). I have the following in one of my classes:</p>\n\n<p><code>Input** Inputs;</code></p>\n\n<p>Which gets initialized as follows:</p>\n\n<p><code>this-&gt;Inputs = new Input* [totalInputs];</code></p>\n\n<p>And can get reassigned to later on in my code depending on user input, similar to this:</p>\n\n<p><code>this-&gt;Inputs[inputNumber] = new DigitalInput(params...)</code></p>\n\n<p>The problem with this is that it's open to memory leaks when reassigning the object at that location due to releasing the old object.</p>\n\n<p>What is the best way to delete the old object once it's been reassigned? </p>\n\n<p>Edit: I forgot to include that this is on an AVR microcontroller which is running on the Arduino codebase.</p>\n\n<p>Edit 2: The reason that I'm doing this this way is because the user is allowed to send commands to the unit which will change the input type (ie: send a command and <code>this-&gt;Inputs[inputNumber] = new AnalogInput(params...)</code>. Also the reason it's a pointer to an array of pointers is because the constructor for this object will generate that array based on the <code>totalInputs</code> argument passed in. This is in a shared library which is used on a few different units. </p>\n"}, {"tags": ["c++", "templates", "c++14", "c++17", "template-templates"], "answers": [{"comments": [{"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1551915846, "post_id": 55033894, "comment_id": 96820336, "body": "Oh so <code>T</code> is deduced from <code>T Value</code> and not <code>template &lt;T&gt; class</code>. This makes it sound like there is no way to do this at all in C++14."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1551916003, "post_id": 55033894, "comment_id": 96820375, "body": "Probably not. Unless maybe you only need to support a finite list of types like the arithmetic types, in which case you could write a specialization for each one."}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 1, "last_activity_date": 1551915511, "last_edit_date": 1592644375, "creation_date": 1551915511, "answer_id": 55033894, "question_id": 55033649, "link": "https://stackoverflow.com/questions/55033649/type-of-non-type-parameter-in-template-template-class-is-non-deducible-in-c14/55033894#55033894", "title": "Type of non-type parameter in template template class is non deducible in C++14 but deducible in C++17", "body": "<p>The Standard wording in [temp.deduct.type] paragraphs 13 and 14 changed.  So yes, your example is invalid in C++14, but is allowed in C++17 thanks to a new language feature.</p>\n<p>C++14:</p>\n<blockquote>\n<p>A template type argument cannot be deduced from the type of a non-type <em>template-argument</em>.</p>\n<p>[<em>Example:</em></p>\n<pre><code>template&lt;class T, T i&gt; void f(double a[10][i]);\nint v[10][20];\nf(v);           // error: argument for template-parameter T cannot be deduced\n</code></pre>\n<p>-- <em>end example</em>]</p>\n</blockquote>\n<p>C++17:</p>\n<blockquote>\n<p>When the value of the argument corresponding to a non-type template parameter <code>P</code> that is declared with a dependent type is deduced from an expression, the template parameters in the type of <code>P</code> are deduced from the type of the value. [<em>Example:</em></p>\n<pre><code>template&lt;long n&gt; struct A { };\n\ntemplate&lt;typename T&gt; struct C;\ntemplate&lt;typename T, T n&gt; struct C&lt;A&lt;n&gt;&gt; {\n  using Q = T;\n};\n\nusing R = long;\nusing R = C&lt;A&lt;2&gt;&gt;::Q;    // OK; T was deduced to long from the\n                         // template argument value in the type A&lt;2&gt;\n</code></pre>\n<p>-- <em>end example</em>] The type of <code>N</code> in the type <code>T[N]</code> is <code>std::size_t</code>. [<em>Example:</em></p>\n<pre><code>template&lt;typename T&gt; struct S;\ntemplate&lt;typename T, T n&gt; struct S&lt;int[n]&gt; {\n  using Q = T;\n};\n\nusing V = decltype(sizeof 0);\nusing V = S&lt;int[42]&gt;::Q;  // OK; T was deduced to std::size_t from the type int[42]\n</code></pre>\n<p>-- <em>end example</em>]</p>\n<p>[<em>Example:</em></p>\n<pre><code>template&lt;class T, T i&gt; void f(int (&amp;a)[i]);\nint v[10];\nvoid g() {\n  f(v);         // OK: T is std::size_t\n}\n</code></pre>\n<p>-- <em>end example</em>]</p>\n</blockquote>\n<p>This seems a bit related to another C++17 template change: C++17 is the first version to allow placeholder types in non-type template parameters, as in <code>template &lt;auto Value&gt;</code> or <code>template &lt;auto* Ptr&gt;</code>.  I'd expect compiler implementations would need some similar logic for supporting both of the two language features.</p>\n"}], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 1, "accepted_answer_id": 55033894, "answer_count": 1, "score": 2, "last_activity_date": 1551915511, "creation_date": 1551913866, "question_id": 55033649, "link": "https://stackoverflow.com/questions/55033649/type-of-non-type-parameter-in-template-template-class-is-non-deducible-in-c14", "title": "Type of non-type parameter in template template class is non deducible in C++14 but deducible in C++17", "body": "<p>The title is a bit confusing but what I mean is this specific case:</p>\n\n<pre><code>template&lt;class&gt;\nstruct get_type_of_nontype;\n\ntemplate&lt;class T, T Value, template&lt;T&gt; class Template&gt;\nstruct get_type_of_nontype&lt;Template&lt;Value&gt;&gt; {\n    using type = T;\n};\n</code></pre>\n\n<p>So I can use it like this:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate&lt;int I&gt;\nclass int_non_type {};\n\nstatic_assert(\n    std::is_same&lt;typename get_type_of_nontype&lt;int_non_type&lt;0&gt;&gt;::type, int&gt;::value,\n    \"T is deduced to be `int` as `template&lt;T&gt; class Template` is `template&lt;int&gt; class int_non_type`\"\n);\n</code></pre>\n\n<p>This works fine in C++17. In C++14 I get the following errors:</p>\n\n<p>gcc 8:</p>\n\n<pre><code>&lt;source&gt;:5:8: error: template parameters not deducible in partial specialization:\nstruct get_type_of_nontype&lt;Template&lt;Value&gt;&gt; {\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n&lt;source&gt;:5:8: note:         'T'\n</code></pre>\n\n<p>clang 7:</p>\n\n<pre><code>&lt;source&gt;:5:8: error: class template partial specialization contains a template parameter that cannot be deduced; this partial specialization will never be used [-Wunusable-partial-specialization]\nstruct get_type_of_nontype&lt;Template&lt;Value&gt;&gt; {\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n&lt;source&gt;:4:16: note: non-deducible template parameter 'T'\ntemplate&lt;class T, T Value, template&lt;T&gt; class Template&gt;\n               ^\n</code></pre>\n\n<p>And then they both complain that <code>struct get_type_of_nontype&lt;int_non_type&lt;0&gt;&gt;</code> is incomplete, so <code>typename get_type_of_non_type&lt;int_non_type&lt;0&gt;&gt;::type</code> can't compile.</p>\n\n<p>Why is this different between C++14 and C++17? Is this just a compiler bug? If not, is there a way to do this in C++14?</p>\n"}, {"tags": ["c++", "winapi", "sapi"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551922147, "post_id": 55033630, "comment_id": 96821771, "body": "Have you tried calling <code>ISpVoice::Pause()</code> before speaking new text?"}, {"owner": {"reputation": 63, "user_id": 7306693, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271384256255717/picture?type=large", "display_name": "Alzer Casi&#241;o", "link": "https://stackoverflow.com/users/7306693/alzer-casi%c3%b1o"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551928088, "post_id": 55033630, "comment_id": 96823104, "body": "I tried calling the functions but it resumes only when <code>ISpVoice::Resume()</code> is called. It goes silent if ISpVoice::Pause() is only called."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551928485, "post_id": 55033630, "comment_id": 96823191, "body": "So, <code>Pause()</code>&#39;ing the current voice, <code>Speak()</code>&#39;ing the new text with purge, and then <code>Resume()</code>&#39;ing doesn&#39;t work?"}, {"owner": {"reputation": 63, "user_id": 7306693, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271384256255717/picture?type=large", "display_name": "Alzer Casi&#241;o", "link": "https://stackoverflow.com/users/7306693/alzer-casi%c3%b1o"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551928959, "post_id": 55033630, "comment_id": 96823310, "body": "I tried it. Performance is better but it still lags when the tts almost finishes the sentence."}, {"owner": {"reputation": 63, "user_id": 7306693, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271384256255717/picture?type=large", "display_name": "Alzer Casi&#241;o", "link": "https://stackoverflow.com/users/7306693/alzer-casi%c3%b1o"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551929326, "post_id": 55033630, "comment_id": 96823412, "body": "I think it lags when the thread finishes."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1551943182, "post_id": 55033630, "comment_id": 96827425, "body": "@AlzerCasi&#241;o Have you tried debugging to check the lag happens before or after the call of tts-&gt;Speak()?"}, {"owner": {"reputation": 63, "user_id": 7306693, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271384256255717/picture?type=large", "display_name": "Alzer Casi&#241;o", "link": "https://stackoverflow.com/users/7306693/alzer-casi%c3%b1o"}, "edited": false, "score": 0, "creation_date": 1551945996, "post_id": 55033630, "comment_id": 96828784, "body": "I cannot tell because it runs asynchronously but I noticed that it only lags when the thread of tts-&gt;Speak finishes."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1552290353, "post_id": 55033630, "comment_id": 96937691, "body": "@AlzerCasi&#241;o You can <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getsystemtime\" rel=\"nofollow noreferrer\">check the time</a> to show the actual time and your expect time and show how much the lag is."}], "owner": {"reputation": 63, "user_id": 7306693, "user_type": "registered", "profile_image": "https://graph.facebook.com/1271384256255717/picture?type=large", "display_name": "Alzer Casi&#241;o", "link": "https://stackoverflow.com/users/7306693/alzer-casi%c3%b1o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551913715, "creation_date": 1551913715, "question_id": 55033630, "link": "https://stackoverflow.com/questions/55033630/how-to-speed-up-performance-of-ispvoice", "title": "How to Speed Up Performance of ISpVoice?", "body": "<p>I am trying to build a game menu that reads the highlighted text using ISpVoice and keyboard.</p>\n\n<p>My problem is that there is a delay whenever I change the highlighted text using the keyboard. This only happens when I use ISpVoice.</p>\n\n<pre><code>tts-&gt;Speak(myWstring.c_str(), SPF_PURGEBEFORESPEAK | SPF_ASYNC, 0);\n</code></pre>\n\n<p>I tried the above code but still there is a lag.</p>\n\n<pre><code>tts-&gt;Speak(myWstring.c_str(), SPF_ASYNC, 0);\n</code></pre>\n\n<p>the above code works but I want it to immediate stop whenever I want to change the highlighted text.</p>\n"}, {"tags": ["c++", "windows", "winapi", "bitmap", "window"], "comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1551914462, "post_id": 55033573, "comment_id": 96819990, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1748470/how-to-draw-image-on-a-window\">How to draw image on a window?</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551922578, "post_id": 55033573, "comment_id": 96821873, "body": "You can use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-updatelayeredwindow\" rel=\"nofollow noreferrer\"><code>UpdateLayeredWindow()</code></a> to assign the <code>HBITMAP</code> image to the window.  The window will maintain the image and paint it onscreen for you when needed."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551922654, "post_id": 55033573, "comment_id": 96821890, "body": "Otherwise, you can subclass the window and manually handle the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/gdi/wm-paint\" rel=\"nofollow noreferrer\"><code>WM_PAINT</code></a> message, by drawing the <code>HBITMAP</code>, via <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-bitblt\" rel=\"nofollow noreferrer\"><code>BitBlt()</code></a> or <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/wingdi/nf-wingdi-stretchblt\" rel=\"nofollow noreferrer\"><code>StretchBlt()</code></a>, onto the <code>HDC</code> returned by <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-beginpaint\" rel=\"nofollow noreferrer\"><code>BeginPaint()</code></a>."}, {"owner": {"reputation": 1, "user_id": 11161046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58ae07ab72a63160bf3abdd99af1cb0?s=128&d=identicon&r=PG&f=1", "display_name": "john l", "link": "https://stackoverflow.com/users/11161046/john-l"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551948320, "post_id": 55033573, "comment_id": 96829914, "body": "@RemyLebeau I tried too many times (to display printwindow over window), no success, you can give me a example code by chance? thank u."}, {"owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "edited": false, "score": 0, "creation_date": 1551952173, "post_id": 55033573, "comment_id": 96832352, "body": "Have you try like <code>PrintWindow(FindWindow(NULL, &quot;notepad&quot;), GetDC(hWnd), 0);</code> ?"}, {"owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "edited": false, "score": 0, "creation_date": 1551953792, "post_id": 55033573, "comment_id": 96833402, "body": "Is it necessary for you to use <code>UpdateLayeredWindow</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11161046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58ae07ab72a63160bf3abdd99af1cb0?s=128&d=identicon&r=PG&f=1", "display_name": "john l", "link": "https://stackoverflow.com/users/11161046/john-l"}, "edited": false, "score": 0, "creation_date": 1551955473, "post_id": 55041569, "comment_id": 96834523, "body": "Thank You Drake! , WindowsProject9.h is missing : error C2065: &#39;IDI_WINDOWSPROJECT9&#39; : undeclared identifie"}, {"owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "reply_to_user": {"reputation": 1, "user_id": 11161046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58ae07ab72a63160bf3abdd99af1cb0?s=128&d=identicon&r=PG&f=1", "display_name": "john l", "link": "https://stackoverflow.com/users/11161046/john-l"}, "edited": false, "score": 0, "creation_date": 1552009992, "post_id": 55041569, "comment_id": 96860425, "body": "I have uploaded the project to my onedrive, see edit in my answer."}, {"owner": {"reputation": 1, "user_id": 11161046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58ae07ab72a63160bf3abdd99af1cb0?s=128&d=identicon&r=PG&f=1", "display_name": "john l", "link": "https://stackoverflow.com/users/11161046/john-l"}, "edited": false, "score": 0, "creation_date": 1552028756, "post_id": 55041569, "comment_id": 96865042, "body": "it works, thanks !,  There is something else I want to ask: i want to set grayscale effect to the HBITMAP, how can i do this? How can i SetPixel? PrintWindow(hWnd,GetDC(hWnd),0); works great , but i want to change the bitmap data LockBitmap LockBits, thanks =]."}, {"owner": {"reputation": 1, "user_id": 11161046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58ae07ab72a63160bf3abdd99af1cb0?s=128&d=identicon&r=PG&f=1", "display_name": "john l", "link": "https://stackoverflow.com/users/11161046/john-l"}, "edited": false, "score": 0, "creation_date": 1552030026, "post_id": 55041569, "comment_id": 96865531, "body": "HWND hWnd = FindWindow(TEXT(&quot;Notepad&quot;), NULL); HBITMAP NotepadGray = grayscale(PrintWindow(hWnd,GetDC(hWnd),0)); Display(NotepadGray);"}, {"owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "reply_to_user": {"reputation": 1, "user_id": 11161046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58ae07ab72a63160bf3abdd99af1cb0?s=128&d=identicon&r=PG&f=1", "display_name": "john l", "link": "https://stackoverflow.com/users/11161046/john-l"}, "edited": false, "score": 0, "creation_date": 1552039541, "post_id": 55041569, "comment_id": 96869862, "body": "You may need to take a look at <code>CImage</code> <a href=\"https://docs.microsoft.com/en-us/cpp/atl-mfc-shared/reference/cimage-class?view=vs-2017\" rel=\"nofollow noreferrer\">class</a>"}, {"owner": {"reputation": 1, "user_id": 11161046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58ae07ab72a63160bf3abdd99af1cb0?s=128&d=identicon&r=PG&f=1", "display_name": "john l", "link": "https://stackoverflow.com/users/11161046/john-l"}, "edited": false, "score": 0, "creation_date": 1552041030, "post_id": 55041569, "comment_id": 96870640, "body": "I do not understand how to use CImage class, i&#39;m newbi, An example would be very helpful..."}], "tags": [], "owner": {"reputation": 6168, "user_id": 10611792, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r727s.jpg?s=128&g=1", "display_name": "Drake Wu", "link": "https://stackoverflow.com/users/10611792/drake-wu"}, "is_accepted": false, "score": 0, "last_activity_date": 1552009900, "last_edit_date": 1552009900, "creation_date": 1551954599, "answer_id": 55041569, "question_id": 55033573, "link": "https://stackoverflow.com/questions/55033573/winapi-how-to-display-screenshot-on-window-using-updatelayeredwindow/55041569#55041569", "title": "Winapi: How to display screenshot on window using UpdateLayeredWindow", "body": "<p>You'd better create a Windows Desktop Application.\nI have add a \"Print\" Menu, Then Add\n<code>PrintWindow(FindWindow(L\"Notepad\", L\"xxx.txt - Notepad\"), GetDC(hWnd), 0);</code></p>\n\n<p>.cpp:</p>\n\n<pre><code>// WindowsProject9.cpp : Defines the entry point for the application.\n//\n\n#include \"stdafx.h\"\n#include \"WindowsProject9.h\"\n\n#define MAX_LOADSTRING 100\n\n// Global Variables:\nHINSTANCE hInst;                                // current instance\nWCHAR szTitle[MAX_LOADSTRING];                  // The title bar text\nWCHAR szWindowClass[MAX_LOADSTRING];            // the main window class name\n\n// Forward declarations of functions included in this code module:\nATOM                MyRegisterClass(HINSTANCE hInstance);\nBOOL                InitInstance(HINSTANCE, int);\nLRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);\nINT_PTR CALLBACK    About(HWND, UINT, WPARAM, LPARAM);\n\nint APIENTRY wWinMain(_In_ HINSTANCE hInstance,\n                     _In_opt_ HINSTANCE hPrevInstance,\n                     _In_ LPWSTR    lpCmdLine,\n                     _In_ int       nCmdShow)\n{\n    UNREFERENCED_PARAMETER(hPrevInstance);\n    UNREFERENCED_PARAMETER(lpCmdLine);\n\n    // TODO: Place code here.\n\n    // Initialize global strings\n    LoadStringW(hInstance, IDS_APP_TITLE, szTitle, MAX_LOADSTRING);\n    LoadStringW(hInstance, IDC_WINDOWSPROJECT9, szWindowClass, MAX_LOADSTRING);\n    MyRegisterClass(hInstance);\n\n    // Perform application initialization:\n    if (!InitInstance (hInstance, nCmdShow))\n    {\n        return FALSE;\n    }\n\n    HACCEL hAccelTable = LoadAccelerators(hInstance, MAKEINTRESOURCE(IDC_WINDOWSPROJECT9));\n\n    MSG msg;\n\n    // Main message loop:\n    while (GetMessage(&amp;msg, nullptr, 0, 0))\n    {\n        if (!TranslateAccelerator(msg.hwnd, hAccelTable, &amp;msg))\n        {\n            TranslateMessage(&amp;msg);\n            DispatchMessage(&amp;msg);\n        }\n    }\n\n    return (int) msg.wParam;\n}\n\n\n\n//\n//  FUNCTION: MyRegisterClass()\n//\n//  PURPOSE: Registers the window class.\n//\nATOM MyRegisterClass(HINSTANCE hInstance)\n{\n    WNDCLASSEXW wcex;\n\n    wcex.cbSize = sizeof(WNDCLASSEX);\n\n    wcex.style          = CS_HREDRAW | CS_VREDRAW;\n    wcex.lpfnWndProc    = WndProc;\n    wcex.cbClsExtra     = 0;\n    wcex.cbWndExtra     = 0;\n    wcex.hInstance      = hInstance;\n    wcex.hIcon          = LoadIcon(hInstance, MAKEINTRESOURCE(IDI_WINDOWSPROJECT9));\n    wcex.hCursor        = LoadCursor(nullptr, IDC_ARROW);\n    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);\n    wcex.lpszMenuName   = MAKEINTRESOURCEW(IDC_WINDOWSPROJECT9);\n    wcex.lpszClassName  = szWindowClass;\n    wcex.hIconSm        = LoadIcon(wcex.hInstance, MAKEINTRESOURCE(IDI_SMALL));\n\n    return RegisterClassExW(&amp;wcex);\n}\n\n//\n//   FUNCTION: InitInstance(HINSTANCE, int)\n//\n//   PURPOSE: Saves instance handle and creates main window\n//\n//   COMMENTS:\n//\n//        In this function, we save the instance handle in a global variable and\n//        create and display the main program window.\n//\nBOOL InitInstance(HINSTANCE hInstance, int nCmdShow)\n{\n   hInst = hInstance; // Store instance handle in our global variable\n\n   HWND hWnd = CreateWindowW(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,\n      CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, nullptr, nullptr, hInstance, nullptr);\n   if (!hWnd)\n   {\n      return FALSE;\n   }\n\n   ShowWindow(hWnd, nCmdShow);\n   UpdateWindow(hWnd);\n\n   return TRUE;\n}\n\n//\n//  FUNCTION: WndProc(HWND, UINT, WPARAM, LPARAM)\n//\n//  PURPOSE:  Processes messages for the main window.\n//\n//  WM_COMMAND  - process the application menu\n//  WM_PAINT    - Paint the main window\n//  WM_DESTROY  - post a quit message and return\n//\n//\nLRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    switch (message)\n    {\n    case WM_COMMAND:\n        {\n            int wmId = LOWORD(wParam);\n            // Parse the menu selections:\n            switch (wmId)\n            {\n            case IDM_ABOUT:\n                DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);\n                break;\n            case IDM_EXIT:\n                DestroyWindow(hWnd);\n                break;\n            case ID_HELP_PRINT:\n                PrintWindow(FindWindow(L\"Notepad\", L\"xxx.txt - Notepad\"), GetDC(hWnd), 0);\n            default:\n                return DefWindowProc(hWnd, message, wParam, lParam);\n            }\n        }\n        break;\n    case WM_PAINT:\n        {\n            PAINTSTRUCT ps;\n            HDC hdc = BeginPaint(hWnd, &amp;ps);\n            // TODO: Add any drawing code that uses hdc here...\n            EndPaint(hWnd, &amp;ps);\n        }\n        break;\n    case WM_DESTROY:\n        PostQuitMessage(0);\n        break;\n    default:\n        return DefWindowProc(hWnd, message, wParam, lParam);\n    }\n    return 0;\n}\n\n// Message handler for about box.\nINT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)\n{\n    UNREFERENCED_PARAMETER(lParam);\n    switch (message)\n    {\n    case WM_INITDIALOG:\n        return (INT_PTR)TRUE;\n\n    case WM_COMMAND:\n        if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDCANCEL)\n        {\n            EndDialog(hDlg, LOWORD(wParam));\n            return (INT_PTR)TRUE;\n        }\n        break;\n    }\n    return (INT_PTR)FALSE;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/uC0QU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uC0QU.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/L6cqP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L6cqP.png\" alt=\"enter image description here\"></a></p>\n\n<p>EDIT:</p>\n\n<p>I have uploaded the project on my onedrive, <a href=\"https://1drv.ms/f/s!AuuE71XVcHDogTwjTpK7n772BjZD\" rel=\"nofollow noreferrer\">this</a> is the link.</p>\n"}], "owner": {"reputation": 1, "user_id": 11161046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a58ae07ab72a63160bf3abdd99af1cb0?s=128&d=identicon&r=PG&f=1", "display_name": "john l", "link": "https://stackoverflow.com/users/11161046/john-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1552009900, "creation_date": 1551913286, "last_edit_date": 1551915679, "question_id": 55033573, "link": "https://stackoverflow.com/questions/55033573/winapi-how-to-display-screenshot-on-window-using-updatelayeredwindow", "title": "Winapi: How to display screenshot on window using UpdateLayeredWindow", "body": "<p>I have been driving myself trying to do something that to me seems like it should be relatively straight forward,\nI am trying to take a screenshot of specific window (With PrintWindow)\nAnd Display the screenshot over new window (using CreateWindowEx and UpdateLayeredWindow) </p>\n\n<p>The Logic :</p>\n\n<p>TakeNotepadScreenShot->DrawOverWindow->DisplayWindow </p>\n\n<p>something like :</p>\n\n<pre><code>1. Take Notepad Screenshot: \nHBITMAP hBmp = PrintWindow(FindWindow(\"notepad\")); //Not Entire Screen, Only notepad\n\n2. Create Window (As Canvas):\nHWND hWnd = CreateWindowEx(WS_EX_LAYERED, \"WindowClassName\", 0, WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL);\n\n3. Draw Notepad Image:\nDraw_HBitmap_OverWindow(hBmp,hWnd);\n//Using UpdateLayeredWindow\n\n4. Show Window / Display Notepad Screenshot\nShowWindow(hWnd, SW_SHOW);\n</code></pre>\n\n<p>See: <a href=\"https://stackoverflow.com/questions/7292757/how-to-get-screenshot-of-a-window-as-bitmap-object-in-c\">How to get screenshot of a window as bitmap object in C++?</a> &lt;&lt; Thats How To Take Notepad ScreenShot</p>\n\n<p>But how to display the image? (C++/Console Application/Empty Project)</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 1, "creation_date": 1551913025, "post_id": 55033461, "comment_id": 96819506, "body": "Looks like gcc&#39;s bug, clang issues an error: <a href=\"https://godbolt.org/z/ECiUdI\" rel=\"nofollow noreferrer\">godbolt.org/z/ECiUdI</a>"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1551913086, "post_id": 55033461, "comment_id": 96819533, "body": "MSVC also rejects it."}, {"owner": {"reputation": 923, "user_id": 6232717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a71e841a05cc4408b404170fc4b50e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Cash", "link": "https://stackoverflow.com/users/6232717/jeffrey-cash"}, "edited": false, "score": 0, "creation_date": 1551913331, "post_id": 55033461, "comment_id": 96819612, "body": "Interesting! Thanks for testing it out on other compilers for me, I should have tried that too. I guess I trust gcc more than I should"}, {"owner": {"reputation": 1261, "user_id": 1846228, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9a17eedf0472db2700ce6f3d8848265d?s=128&d=identicon&r=PG", "display_name": "XapaJIaMnu", "link": "https://stackoverflow.com/users/1846228/xapajiamnu"}, "edited": false, "score": 1, "creation_date": 1551914159, "post_id": 55033461, "comment_id": 96819894, "body": "You should report this, looks definitely like a bug"}, {"owner": {"reputation": 923, "user_id": 6232717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a71e841a05cc4408b404170fc4b50e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Cash", "link": "https://stackoverflow.com/users/6232717/jeffrey-cash"}, "reply_to_user": {"reputation": 1261, "user_id": 1846228, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9a17eedf0472db2700ce6f3d8848265d?s=128&d=identicon&r=PG", "display_name": "XapaJIaMnu", "link": "https://stackoverflow.com/users/1846228/xapajiamnu"}, "edited": false, "score": 0, "creation_date": 1551914380, "post_id": 55033461, "comment_id": 96819958, "body": "@XapaJIaMnu I&#39;ll do that as soon as soon as GCC Bugzilla gets back to me about creating an account. Also, can I mark a post as solved without having received an answer?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1551917976, "post_id": 55033461, "comment_id": 96820879, "body": "Please don&#39;t edit answers into the question,  if you&#39;ve concluded it&#39;s a bug and nobody wrote an answer yet then you can post that in the answer box"}, {"owner": {"reputation": 923, "user_id": 6232717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a71e841a05cc4408b404170fc4b50e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Cash", "link": "https://stackoverflow.com/users/6232717/jeffrey-cash"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1551918939, "post_id": 55033461, "comment_id": 96821080, "body": "@M.M gotcha. So should I just answer my own question and mark it as solved? That just seems like an odd thing to do"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1551919191, "post_id": 55033461, "comment_id": 96821135, "body": "That&#39;s a fairly normal thing to do if the people who answered answered in comments instead of posting an answer :)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1551919429, "post_id": 55033461, "comment_id": 96821195, "body": "Although I am not convinced about the supposed rule that a variable declared in the function body cannot have the same name as a function parameter  , the standard does not seem to say that (perhaps a separate question would be in order there)"}, {"owner": {"reputation": 923, "user_id": 6232717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a71e841a05cc4408b404170fc4b50e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Cash", "link": "https://stackoverflow.com/users/6232717/jeffrey-cash"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1551920918, "post_id": 55033461, "comment_id": 96821504, "body": "@M.M I&#39;ll look into it more, but I checked an old working draft of the C++ standard, and found the following: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2691.pdf\" rel=\"nofollow noreferrer\">&quot;A parameter name shall not be redeclared in the outermost block of the function definition nor in the outermost block of any handler associated with a function-try-block&quot; (3.3.2)</a>. This makes me pretty certain it is a GCC bug, unless there have been changes to the standard in this area since this draft"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1551921276, "post_id": 55033461, "comment_id": 96821591, "body": "@JeffreyCash Ah that looks correct"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1551921418, "post_id": 55033461, "comment_id": 96821616, "body": "OK, I posted an answer based on the comments and marked it as &#39;community&#39; accordingly"}], "answers": [{"comments": [{"owner": {"reputation": 923, "user_id": 6232717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a71e841a05cc4408b404170fc4b50e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Cash", "link": "https://stackoverflow.com/users/6232717/jeffrey-cash"}, "edited": false, "score": 0, "creation_date": 1551921936, "post_id": 55034604, "comment_id": 96821722, "body": "Awesome job distilling it down to its simplest form! I&#39;ll file a bug report as soon as I can. I&#39;m amazed this has been in GCC for so long, it&#39;s been in every version I&#39;ve checked between 4.4.7 and 8.3"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1551921379, "creation_date": 1551921379, "answer_id": 55034604, "question_id": 55033461, "link": "https://stackoverflow.com/questions/55033461/why-can-function-call-operator-on-temporary-objects-sometimes-be-interpreted-as/55034604#55034604", "title": "Why can function call operator on temporary objects sometimes be interpreted as a declaration that does not shadow a parameter?", "body": "<p>A simpler program to produce the same issue (the extra parentheses are a red herring):</p>\n\n<pre><code>void f(int x)\n{\n    void x();\n}\n</code></pre>\n\n<p>This is incorrect because of C++17 [basic.scope.block]/2:</p>\n\n<blockquote>\n  <p>[...] A parameter name shall not be redeclared in the outermost block of the function\n  definition nor in the outermost block of any handler associated with a <em>function-try-block.</em></p>\n</blockquote>\n\n<p>If a compiler accepts this code then it is a compiler bug.</p>\n"}], "owner": {"reputation": 923, "user_id": 6232717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a71e841a05cc4408b404170fc4b50e4?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Cash", "link": "https://stackoverflow.com/users/6232717/jeffrey-cash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 55034604, "answer_count": 1, "score": 3, "last_activity_date": 1551921379, "creation_date": 1551912642, "last_edit_date": 1551917946, "question_id": 55033461, "link": "https://stackoverflow.com/questions/55033461/why-can-function-call-operator-on-temporary-objects-sometimes-be-interpreted-as", "title": "Why can function call operator on temporary objects sometimes be interpreted as a declaration that does not shadow a parameter?", "body": "<p>My question is similar to <a href=\"https://stackoverflow.com/questions/28034742/construction-of-temporary-in-function-call-is-interpreted-as-declaration\">this answered question</a>, but with one big difference.</p>\n\n<p>If I try to compile the following,</p>\n\n<pre><code>void test(string x){\n  int x = 5;\n  cout &lt;&lt; x &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I get the expected warning:</p>\n\n<pre><code>In function \u2018void test(std::__cxx11::string)\u2019:\nerror: declaration of \u2018int x\u2019 shadows a parameter\n    int x = 5;\n        ^\n</code></pre>\n\n<hr>\n\n<p>Now to get to the meat of my question; if I have a type with a function call operator like the following:</p>\n\n<pre><code>struct foo{\n  string bar;\n  foo(const string&amp; bar) : bar(bar) { }\n  void operator()(){\n    cout &lt;&lt; \"my bar is \\\"\" &lt;&lt; bar &lt;&lt; '\"' &lt;&lt; endl;\n  }\n};\n</code></pre>\n\n<p>I can create a temporary object and call its <code>()</code> operator with <code>foo(\"this will print\")();</code> or with <code>foo{\"this will also print\"}();</code></p>\n\n<p>If I try to do the following, I will get a compiler error which is expected and can be explained with the post I linked above.</p>\n\n<pre><code>void redeclaration_error(){\n  string x(\"lol\");\n  foo(x)();\n}\n</code></pre>\n\n<p>However, things get weird here:</p>\n\n<pre><code>void hmm1(string str){\n  foo(str)();\n}\nvoid hmm2(string str){\n  foo{str}();\n}\n</code></pre>\n\n<p>While <code>hmm2</code> will print out its argument when called, <code>hmm1</code> will do absolutely nothing. This is expected, as <code>hmm1</code>'s body does nothing more than declare <code>str</code> to be of type <code>foo</code>. However, in the scope of <code>hmm1</code>, <code>str</code> is already declared as type <code>string</code> from the function's parameter, so why does this not result in a compiler error like <code>error: declaration of \u2018foo str\u2018 shadows a parameter</code>?</p>\n\n<p>I understand that the compiler is interpreting <code>foo(str)();</code> as a declaration, and that lines like <code>foo(str).operator()();</code> and <code>(foo(str))();</code> will be interpreted as creating a temporary foo object and calling their function call operator, but why it it okay to declare a variable with the same name as a parameter in this circumstance? </p>\n\n<hr>\n\n<p><a href=\"https://ideone.com/dnm556\" rel=\"nofollow noreferrer\">Here's and Ideone link where I was playing around with this.</a></p>\n"}, {"tags": ["python", "c++", "sockets", "zeromq", "pyzmq"], "comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1551913571, "post_id": 55033082, "comment_id": 96819694, "body": "I don&#39;t know if this can help you, but often very long delays in network-related stuff come from some non-essential network service down in the bowels of the library/network stack failing for timeout (and being retried multiple times) for some reason - say, some internal DNS query that should be instantaneous but hangs. Not saying that this is exactly the case, but that&#39;s the general direction where I&#39;d investigate. If you are on Linux, try to run it under <code>strace</code>; on any platform, run your program under a native code debugger, stop it during the wait and see what it&#39;s doing."}, {"owner": {"reputation": 1384, "user_id": 22252, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d80b19716a60a24832605302b76c8028?s=128&d=identicon&r=PG", "display_name": "e-holder", "link": "https://stackoverflow.com/users/22252/e-holder"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1551977027, "post_id": 55033082, "comment_id": 96847756, "body": "Thanks for the suggestion Matteo. PyCharm and pdb only let me debug to a certain depth in zmq/sugar/context. I&#39;m looking into methods to let me debug deeper."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1551978533, "post_id": 55033082, "comment_id": 96848608, "body": "Indeed you should use gdb and see what&#39;s going on a lower level if you are on Linux, or some other native debugger (lldb on macOS IIRC and windbg/visual studio/cdb on Windows)."}, {"owner": {"reputation": 1384, "user_id": 22252, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d80b19716a60a24832605302b76c8028?s=128&d=identicon&r=PG", "display_name": "e-holder", "link": "https://stackoverflow.com/users/22252/e-holder"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1551999056, "post_id": 55033082, "comment_id": 96857649, "body": "This is a windows box. I tried creating a C++ project in Visual Studio that uses a ZMQ library pulled from NuGet. It also exhibits the same delay. I don&#39;t have the ZMQ source files readily available for this particular library, but I can see the disassembly. Most of the times when I pause execution the call stack is: create_socket -&gt; reaper_t -&gt; mailbox_t -&gt; signaler_t -&gt; signaler_t.make_fdpair(uint64 *, uint64 *)."}, {"owner": {"reputation": 1384, "user_id": 22252, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d80b19716a60a24832605302b76c8028?s=128&d=identicon&r=PG", "display_name": "e-holder", "link": "https://stackoverflow.com/users/22252/e-holder"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1552054618, "post_id": 55033082, "comment_id": 96877893, "body": "It is now working for both C++ and Python. I will try to find out from the IT folks if they pushed any changes to my machine and I&#39;ll post the solution."}], "answers": [{"tags": [], "owner": {"reputation": 1384, "user_id": 22252, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d80b19716a60a24832605302b76c8028?s=128&d=identicon&r=PG", "display_name": "e-holder", "link": "https://stackoverflow.com/users/22252/e-holder"}, "is_accepted": false, "score": 0, "last_activity_date": 1552056930, "creation_date": 1552056930, "answer_id": 55065746, "question_id": 55033082, "link": "https://stackoverflow.com/questions/55033082/zmq-context-socket-creation-is-much-slower-on-new-computer/55065746#55065746", "title": "ZMQ Context socket creation is MUCH slower on new computer", "body": "<p>This was apparently a Windows 10 or Laptop firmware issue. Some updates got pushed by the IT department and things worked normally the next day. Here are the items that were installed per the Event Viewer:</p>\n\n<ul>\n<li>Installed KB4456655:  Servicing stack update for Windows 10, version 1803: September 11, 2018 (stability improvements)</li>\n<li>Installed KB4462930: Update for Adobe Flash Player</li>\n<li>Installed KB4100347: Intel microcode updates</li>\n<li>Installed KB4485449: Servicing stack update for Windows 10 v1803 - Feb. 12</li>\n<li>Installed KB4487017: (Same description as KB4485449)</li>\n<li>Installed KB4487038: Security update for Adobe Flash Player</li>\n</ul>\n"}], "owner": {"reputation": 1384, "user_id": 22252, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d80b19716a60a24832605302b76c8028?s=128&d=identicon&r=PG", "display_name": "e-holder", "link": "https://stackoverflow.com/users/22252/e-holder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 355, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1552056930, "creation_date": 1551910754, "last_edit_date": 1551999977, "question_id": 55033082, "link": "https://stackoverflow.com/questions/55033082/zmq-context-socket-creation-is-much-slower-on-new-computer", "title": "ZMQ Context socket creation is MUCH slower on new computer", "body": "<p>This was originally seen in Python, but has since been replicated in C++. Here is the unit test that distills down and replicates the behavior on my new laptop. These are just local socket connections.</p>\n\n<pre><code>def test_zmq_publisher_duration(self):\n    max_duration = 1.0\n    t0 = time.time()\n    socket = zmq.Context.instance().socket(zmq.PUB)\n    duration = time.time() - t0\n    print(socket)\n    self.assertLess(duration, max_duration, msg=\"socket() took too long.\")\n</code></pre>\n\n<p>On other computers, and on my old laptop, this runs in a <em>fraction</em> of a second. However, on my new laptop (beefy Dell Precision 7730) this takes about <strong>44 seconds</strong>. I get similar results when creating a zmq.SUB (subscriber) socket.</p>\n\n<p>If I step down into the socket() call, the two statements which consume all the time are as follows:</p>\n\n<pre><code>zmq/sugar/context.py\n   class Context\n      def instance(cls, io_threads=1):\n         ...\n         cls._instance = cls(io_threads=io_threads)\n         ...\n\n      def socket(self, socket_type, **kwargs)\n         ...\n         s = self._socket_class(self, socket_type, **kwargs)\n         ...\n</code></pre>\n\n<p>I am perplexed and baffled. Everything else on the laptop seems to be fine. Perhaps I have <em>pip installed</em> my dependent modules in some slightly different way? Could a previously installed zmq module versus pyzmq be causing problems? Perhaps it is something in the laptop setup from our IT department? I have tried running as administrator, running from within PyCharm, running from the command-line, and unplugging the network cable while running.</p>\n\n<p>I am relatively new to Python and ZMQ, but we have been developing on this project for months with no performance issues. In production code, we have a MessageBroker class that contains most of the pub/sub architecture. The unit test above was created by simply pulling the first significant line of code out of our MessageBroker.Publisher constructor (which creates the socket). Even though the socket creation is SLOW on this computer, our application does still come up and run properly after the sockets get created. It just takes 7 minutes to start the application.</p>\n\n<p>I suspect Ed's Law of Debugging: \"The more bizarre the behavior, the more stupid the mistake.\"</p>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1551917066, "post_id": 55033043, "comment_id": 96820648, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/189560/discussion-on-question-by-nathan-reverse-array-using-recursion-in-c\">moved to chat</a>."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1551940243, "post_id": 55033043, "comment_id": 96826297, "body": "There are two things that come to mind: Firstly, you could output the current state of the string at various points. Secondly, you could step through the code with a debugger. Both are skills worth learning, as they can be applied to other situations as well. Since you seem to be using an IDE (VS?), you should already have a debugger. Set a breakpoint anywhere in <code>main()</code>, switch your compile settings to &quot;debug build&quot; and hit the &quot;start debugging&quot; button."}], "answers": [{"tags": [], "owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "is_accepted": false, "score": 0, "last_activity_date": 1551912311, "creation_date": 1551912311, "answer_id": 55033385, "question_id": 55033043, "link": "https://stackoverflow.com/questions/55033043/reverse-array-using-recursion-in-c/55033385#55033385", "title": "reverse array using recursion in c++", "body": "<p>You are overwriting your terminating <code>'\\0'</code> and therefore corrupting your string. When your while loop exists, <code>reverseMe[position]</code> is at <code>'\\0'</code> and then you overwrite it with the value <code>holder</code>.  Your string is no longer null-terminated and you are getting undefined behavior on your next while loop as it accesses outside the bounds of your array.</p>\n"}, {"tags": [], "owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "is_accepted": true, "score": 2, "last_activity_date": 1551946580, "last_edit_date": 1551946580, "creation_date": 1551945620, "answer_id": 55038763, "question_id": 55033043, "link": "https://stackoverflow.com/questions/55033043/reverse-array-using-recursion-in-c/55038763#55038763", "title": "reverse array using recursion in c++", "body": "<p>Tough problem.  You have to shorten the inner string on each recursion by placing a '\\0' on the last character before calling the recursive function and then performing the swap after the recursive call.</p>\n\n<p>algorithm:</p>\n\n<pre><code>0. save the index of the last character in the string\n1. Save the last character of the current string\n2. Set the last character of the current string to null (use the saved index)\n3. Call the recursive function starting one character in which will recurse the algorithm for the next inner string (we have already shortened the end of the recursed string)\n4. Once the recursion has finished, set the last character to the first char of the current string; then\n5. set the first character of the current string to the saved character (which was at the end)\n</code></pre>\n\n<p>This will work for odd-length strings as well.</p>\n\n<p>The following code should work on a windows system.  To make it work on Linux, simply comment out the conio.h include line, comment the __getch() line and uncomment the cin.getch() line.</p>\n\n<pre><code>// INCLUES AND NAMESPACES\n#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\n\nusing namespace std;\n\n// CONSTANTS\nconst int STRING_SIZE = 100;\n\n// PROTOTYPES\nint ReverseStringRecursive(char *);\n\nchar *orig;\n\n// MAIN\nint main()\n{\n  // create a string\n  char someString[STRING_SIZE] = \"abcdefghijklmnopqrstuvwxyz\";\n\n  orig = someString;\n\n  // display the string before being reversed\n  cout &lt;&lt; \"The string contains: \" &lt;&lt; endl;\n  cout &lt;&lt; someString &lt;&lt; endl &lt;&lt; endl;\n\n  // make the call to the recursive function\n  cout &lt;&lt; \"CALL THE REVERSING FUNCTION\" &lt;&lt; endl &lt;&lt; endl;\n  ReverseStringRecursive(someString);\n\n  // display the string after being reversed\n  cout &lt;&lt; \"The string contains: \" &lt;&lt; endl;\n  cout &lt;&lt; someString &lt;&lt; endl;\n\n  // exit program\n  _getch();        // uncoment conio.h on a windows system\n  //  std::cin.get();  // use this if on a linux system\n\n  return 0;\n}\n\nint ReverseStringRecursive(char *reverseMe)\n{\n  int last_index = 0;\n  while (reverseMe[last_index + 1] != '\\0')\n    last_index++;\n\n  char save_char = reverseMe[last_index];\n\n  if (*reverseMe != '\\0') {\n    reverseMe[last_index] = '\\0';  // shorten the inner string by one\n\n    // recurse on the shorter string\n    ReverseStringRecursive(reverseMe + 1);\n\n    // save the outer two characters\n    reverseMe[last_index] = *reverseMe;\n    *reverseMe = save_char;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 48, "user_id": 9746556, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Y87Zk2Gm3-Y/AAAAAAAAAAI/AAAAAAAAB2Q/RuVbLjIbh-o/photo.jpg?sz=128", "display_name": "Nathan", "link": "https://stackoverflow.com/users/9746556/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 0, "accepted_answer_id": 55038763, "answer_count": 2, "score": 0, "last_activity_date": 1551946580, "creation_date": 1551910530, "last_edit_date": 1551917053, "question_id": 55033043, "link": "https://stackoverflow.com/questions/55033043/reverse-array-using-recursion-in-c", "title": "reverse array using recursion in c++", "body": "<p>The assignment is relatively simple reverse the array in <code>main</code> using the <code>ReverseStringRecursive</code> function. However the limitation is I can only use a single <code>int</code> and a <code>char</code> nothing else that declares a variable (this includes the banning of <code>for</code> loops and so on). Additionally no extra libraries may be used I am limited to <code>iostream</code> and <code>conio.h</code>. The problem I'm having is that the <code>string</code> will be printed forward and then backwards when I just need it to be printed backwards. the <code>reverseMe</code> variable is pointing to a <code>string</code> in <code>main</code> that contains <code>\"abcdefghijklmnopqrstuvwxyz\"</code>. This function is not suppose to print the <code>string</code> just reverse is then <code>main</code> will print the string.</p>\n\n<pre><code>// INCLUES AND NAMESPACES\n#include &lt;iostream&gt;\n#include&lt;conio.h&gt;\nusing namespace std;\n\n// CONSTANTS\nconst int STRING_SIZE = 100;\n\n// PROTOTYPES\nint ReverseStringRecursive(char*);\n\n// MAIN\nint main() {\n    // create a string\n    char someString[STRING_SIZE] = \"abcdefghijklmnopqrstuvwxyz\";\n\n    // display the string before being reversed\n    cout &lt;&lt; \"The string contains: \" &lt;&lt; endl;\n    cout &lt;&lt; someString &lt;&lt; endl &lt;&lt; endl;\n\n    // make the call to the recursive function\n    cout &lt;&lt; \"CALL THE REVERSING FUNCTION\" &lt;&lt; endl &lt;&lt; endl;\n    ReverseStringRecursive(someString);\n\n    // display the string after being reversed\n    cout &lt;&lt; \"The string contains: \" &lt;&lt; endl;\n    cout &lt;&lt; someString &lt;&lt; endl;\n\n    // exit program\n    _getch();\n    return 0;\n}\n    int ReverseStringRecursive(char* reverseMe) {\n// YOUR IMPLEMENTATION GOES HERE...\nint position = 0;\nchar holder = ' ';\n\nif (reverseMe[0] == '\\0') {\n    return 1;\n}\nelse {\n    holder = reverseMe[position];\n}\n\nReverseStringRecursive(reverseMe + 1);\n\nwhile (reverseMe[position] != '\\0') {\n    position++;\n}\nreverseMe[position] = holder;\n\nreturn position;\n}\n</code></pre>\n\n<p>Example output that I am getting:</p>\n\n<pre><code>\"abcdefghijklmnopqrstuvwxyz zyxwvutsrqponmlkjihgfedcba\"\n</code></pre>\n\n<p>what I'm suppose to get:</p>\n\n<pre><code>\"zyxwvutsrqponmlkjihgfedcba\"\n</code></pre>\n"}, {"tags": ["c++", "constexpr"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551910649, "post_id": 55033038, "comment_id": 96818610, "body": "Well, it indicates as a non changable constant and the compiler will complain if you try, much like <code>const</code> does. Plain usage of <code>const</code> doesn&#39;t guarantee evaluation at compile time though."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551910692, "post_id": 55033038, "comment_id": 96818621, "body": "I call it future proofing.  You might not intend to use it at compile time now, but who knows what you&#39;ll need 10 years from know.  If it can be a <code>constexpr</code>, might as well make it one."}, {"owner": {"reputation": 143, "user_id": 9334475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adeb0619b88baa54b67efc8796f5a78?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Sperry", "link": "https://stackoverflow.com/users/9334475/adam-sperry"}, "edited": false, "score": 0, "creation_date": 1551910970, "post_id": 55033038, "comment_id": 96818709, "body": "Is future proofing the only benefit? On all other metrics, are <code>const</code> and <code>constexpr</code> considered the same?"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1551912264, "post_id": 55033038, "comment_id": 96819170, "body": "@AdamSperry AFAIK; no, <code>const</code> is declared at compile and it prevents the changing of runtime evaluation. <code>constexpr</code> is declared and evaluated both at compile time. In the sense that the values of a named variable or function can not be modified then yes they are equivalent."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 9334475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adeb0619b88baa54b67efc8796f5a78?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Sperry", "link": "https://stackoverflow.com/users/9334475/adam-sperry"}, "edited": false, "score": 0, "creation_date": 1551914044, "post_id": 55033253, "comment_id": 96819855, "body": "I see your point, but what about cases like in the answer by Filip Ros&#233;en - refp to the question I linked? The function <code>f()</code> certainly could have been a <code>constexper</code> before the optimization, but afterward it cannot. This would break any code that uses <code>f()</code> in a <code>constexper</code>. I understand that there is some opinion to whether <code>constexper</code> should be used. My question is whether there are other benefits besides the ones already discussed. You mention performance benefits. Are these for sure or are you just postulating?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 143, "user_id": 9334475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adeb0619b88baa54b67efc8796f5a78?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Sperry", "link": "https://stackoverflow.com/users/9334475/adam-sperry"}, "edited": false, "score": 0, "creation_date": 1551914523, "post_id": 55033253, "comment_id": 96820009, "body": "@AdamSperry, I am speculating about performance. Coincidentally, both of us express the same idea. What I call <i>the characteristic of the variable/data</i> he calls <i>intent</i>."}, {"owner": {"reputation": 143, "user_id": 9334475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adeb0619b88baa54b67efc8796f5a78?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Sperry", "link": "https://stackoverflow.com/users/9334475/adam-sperry"}, "edited": false, "score": 0, "creation_date": 1551914763, "post_id": 55033253, "comment_id": 96820075, "body": "@R Sahu, Thank you"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1551911550, "creation_date": 1551911550, "answer_id": 55033253, "question_id": 55033038, "link": "https://stackoverflow.com/questions/55033038/are-there-benefits-to-using-a-constexpr-variable-that-is-never-intended-to-be-us/55033253#55033253", "title": "Are there benefits to using a constexpr variable that is never intended to be used in a constant expression?", "body": "<blockquote>\n  <p>but rather to convey to other programmers the intent that the variable can be used in a constant expression.</p>\n</blockquote>\n\n<p>This is a matter of opinion but I beg to differ.</p>\n\n<p>In principle, I think it is better to make everything that can be known and computed at compile time a <code>constexpr</code>. The fact that it can also be used in constant expressions is a side benefit. Use of <code>constexpr</code> may have performance related benefits too.</p>\n\n<p>The key point I want to make is that \"the value is known at compile time\" is a characteristic of the variable/data. It is better to capture that characteristic by using a language provided feature. The only time one could justify not using it will be if there are any adverse side effects.</p>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 9334475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adeb0619b88baa54b67efc8796f5a78?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Sperry", "link": "https://stackoverflow.com/users/9334475/adam-sperry"}, "edited": false, "score": 0, "creation_date": 1551914583, "post_id": 55033638, "comment_id": 96820025, "body": "So if I understand, you are saying that the difference between <code>constexpr int a = 1*2*5;</code> and <code>const int a = 1*2*5;</code> is that the value of <code>a</code> will be evaluated at compile time rather than run-time for the <code>constexpr</code> version? This seems to be a small benefit to me, but nonetheless answers the question"}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1551915037, "post_id": 55033638, "comment_id": 96820157, "body": "bad1 could still result in a runtime cost depending on your compiler"}, {"owner": {"reputation": 20379, "user_id": 497934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba65fe61781731f1b551098a887b4212?s=128&d=identicon&r=PG", "display_name": "Maxpm", "link": "https://stackoverflow.com/users/497934/maxpm"}, "reply_to_user": {"reputation": 143, "user_id": 9334475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adeb0619b88baa54b67efc8796f5a78?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Sperry", "link": "https://stackoverflow.com/users/9334475/adam-sperry"}, "edited": false, "score": 0, "creation_date": 1551915201, "post_id": 55033638, "comment_id": 96820207, "body": "@AdamSperry In that case, I believe <code>a</code> is a constant expression whether or not it&#39;s marked <code>constexpr</code>.  (Note that even before we had <code>constexpr</code>, we could do things like <code>const int a=1; t&lt;a&gt;();</code>.)  What&#39;s more important, in my opinion, is that if it ever <i>stops</i> being evaluable at compile time, the compiler will complain.  Imagine if it were <code>const int a = x*5+y*z</code>, where those variables are their own non-trivial expressions."}, {"owner": {"reputation": 20379, "user_id": 497934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba65fe61781731f1b551098a887b4212?s=128&d=identicon&r=PG", "display_name": "Maxpm", "link": "https://stackoverflow.com/users/497934/maxpm"}, "reply_to_user": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1551915485, "post_id": 55033638, "comment_id": 96820269, "body": "@JVApen Correct.  Unfortunately, even <code>good1</code> could have a runtime cost.  The standard only notes that &quot;constant expressions may be evaluated during translation&quot; - not that they <i>must</i> be."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1551915745, "post_id": 55033638, "comment_id": 96820316, "body": "@Maxpm: If I remember well, if the variable is constexpr it should evaluate it at compile time"}], "tags": [], "owner": {"reputation": 20379, "user_id": 497934, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba65fe61781731f1b551098a887b4212?s=128&d=identicon&r=PG", "display_name": "Maxpm", "link": "https://stackoverflow.com/users/497934/maxpm"}, "is_accepted": false, "score": 0, "last_activity_date": 1551913825, "creation_date": 1551913825, "answer_id": 55033638, "question_id": 55033038, "link": "https://stackoverflow.com/questions/55033038/are-there-benefits-to-using-a-constexpr-variable-that-is-never-intended-to-be-us/55033638#55033638", "title": "Are there benefits to using a constexpr variable that is never intended to be used in a constant expression?", "body": "<p>Yes, <code>constexpr</code> variables are useful for more than just conveying intent and using in other constant expressions.</p>\n\n<p>If you mark a variable <code>constexpr</code>, the compiler will enforce that it itself is initialized with a constant expression.  You can use this to make sure that the things you expect to be evaluated at compile time actually are.  For example:</p>\n\n<pre><code>constexpr int constexpr_function() { return 123; }\nint expensive_runtime_function() { return 123; }\n\nvoid f()\n{\n    constexpr int good1 = constexpr_function(); // OK.\n    // constexpr int good2 = expensive_runtime_function(); // Good: error.\n\n    const int bad1 = constexpr_function(); // OK.\n    const int bad2 = expensive_runtime_function(); // Bad: unexpected runtime cost.\n}\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 9334475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adeb0619b88baa54b67efc8796f5a78?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Sperry", "link": "https://stackoverflow.com/users/9334475/adam-sperry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1551913825, "creation_date": 1551910508, "question_id": 55033038, "link": "https://stackoverflow.com/questions/55033038/are-there-benefits-to-using-a-constexpr-variable-that-is-never-intended-to-be-us", "title": "Are there benefits to using a constexpr variable that is never intended to be used in a constant expression?", "body": "<p>This is a follow up question to <a href=\"https://stackoverflow.com/questions/4748083/when-should-you-use-constexpr-capability-in-c11\">this one.</a></p>\n\n<p>From one of the answers in the question linked, it makes sense that the purpose of declaring a variable as <code>constexpr</code> is not truly to inform the compiler of the possibility of using that variable as a constant expression (although this <em>is</em> the end behavior of the compiler) but rather to convey to other programmers the <strong>intent</strong> that the variable can be used in a constant expression. My question is whether there is any benefit, performance or otherwise, to declaring a variable as <code>constexpr</code> if the variable is <strong>not</strong> intended to be used in a constant expression (e.g. a constant member variable of a class which only appears in non-constant expressions with other non-const member variables). Also assume that this is not for an embedded system.</p>\n\n<p>I work with code where the previous developers seem to use <code>constexpr</code> like it's candy even when it's not clear that the intent is for the variable to be used in a constant expression (like in the example from the previous paragraph). I want to know if they knew something that I don't.</p>\n"}, {"tags": ["c++", "audio", "ubuntu-18.04", "alsa", "pulseaudio"], "comments": [{"owner": {"reputation": 9, "user_id": 1424890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443cd770dbf3438f2dff526e9ab18f99?s=128&d=identicon&r=PG", "display_name": "user1424890", "link": "https://stackoverflow.com/users/1424890/user1424890"}, "edited": false, "score": 0, "creation_date": 1551913683, "post_id": 55033016, "comment_id": 96819734, "body": "Forgot to mention, <code>snd_pcm_query_chmaps</code> also returns NULL."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 1424890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443cd770dbf3438f2dff526e9ab18f99?s=128&d=identicon&r=PG", "display_name": "user1424890", "link": "https://stackoverflow.com/users/1424890/user1424890"}, "is_accepted": false, "score": 0, "last_activity_date": 1552044521, "creation_date": 1552044521, "answer_id": 55062313, "question_id": 55033016, "link": "https://stackoverflow.com/questions/55033016/alsas-snd-pcm-get-chmap-always-returns-null-on-my-default-device-pulse-on-ubu/55062313#55062313", "title": "ALSA&#39;s snd_pcm_get_chmap always returns NULL on my default device (pulse) on Ubuntu 18.04", "body": "<p>Pulse audio's list of ALSA issues states that it isn't currently possible to obtain the channel map. <a href=\"https://www.freedesktop.org/wiki/Software/PulseAudio/Backends/ALSA/Issues/\" rel=\"nofollow noreferrer\">https://www.freedesktop.org/wiki/Software/PulseAudio/Backends/ALSA/Issues/</a></p>\n\n<blockquote>\n  <p>There's no way to query the active channel map for a device</p>\n</blockquote>\n"}], "owner": {"reputation": 9, "user_id": 1424890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443cd770dbf3438f2dff526e9ab18f99?s=128&d=identicon&r=PG", "display_name": "user1424890", "link": "https://stackoverflow.com/users/1424890/user1424890"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1552044521, "creation_date": 1551910408, "question_id": 55033016, "link": "https://stackoverflow.com/questions/55033016/alsas-snd-pcm-get-chmap-always-returns-null-on-my-default-device-pulse-on-ubu", "title": "ALSA&#39;s snd_pcm_get_chmap always returns NULL on my default device (pulse) on Ubuntu 18.04", "body": "<p>I'm successfully rendering audio with alsa, however I'm completely incapable of determining the channel mapping. As various sources have stated, I'm calling <code>snd_pcm_get_chmap</code> after the hw &amp; sw params are set and the device is prepared.</p>\n\n<p><code>snd_config_get_string</code> returns 'pulse' for this device which I'm presuming means it's an alsa/pulseaudio bridge for want of a better term.</p>\n\n<p>Calling <code>snd_strerror(errno)</code> after <code>snd_pcm_get_chmap</code> fails is returning 'Socket operation on non-socket'. I should probably add that I'm debugging remotely from Visual Studio 2017 as that may be related.</p>\n\n<p>I'd really like to be able to get the channel mapping. Any suggestions appreciated.</p>\n"}, {"tags": ["c++", "metaprogramming", "c++17"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1551910441, "post_id": 55033007, "comment_id": 96818549, "body": "This seems like an XY problem. What&#39;s the actual problem you&#39;re trying to solve?"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1551912700, "post_id": 55033007, "comment_id": 96819365, "body": "If you want to call a member function you need an instance to call it on. I don&#39;t see one anywhere in your example. Other then that I think you are looking for partial template specialization. You can pass on <code>MemberFunction</code> and <code>decltype(MemberFunction)</code> and use partial specialization to pick up return value and the argument list."}, {"owner": {"reputation": 415, "user_id": 4889185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba4de1c73670c85dc8e301011668f009?s=128&d=identicon&r=PG&f=1", "display_name": "Always Confused", "link": "https://stackoverflow.com/users/4889185/always-confused"}, "edited": false, "score": 0, "creation_date": 1551912838, "post_id": 55033007, "comment_id": 96819426, "body": "Might be able to help if you can post the rough syntax for how you would like to <i>use</i> your class. Mainly show how you instantiate enable_member_isr_handler and how you intend to call isr_handler."}, {"owner": {"reputation": 476, "user_id": 5542689, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3debd7e91e7b5137c920dedd308b3447?s=128&d=identicon&r=PG&f=1", "display_name": "K. Koovalsky", "link": "https://stackoverflow.com/users/5542689/k-koovalsky"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1551938720, "post_id": 55033007, "comment_id": 96825796, "body": "@Barry of course not, this is a bigger problem, but I always split it into smaller problems and almost every problem I try to solve is an XY problem. I&#39;m just experimenting and I try to see whether it can work or not."}, {"owner": {"reputation": 476, "user_id": 5542689, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3debd7e91e7b5137c920dedd308b3447?s=128&d=identicon&r=PG&f=1", "display_name": "K. Koovalsky", "link": "https://stackoverflow.com/users/5542689/k-koovalsky"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1551938723, "post_id": 55033007, "comment_id": 96825797, "body": "@super the question is really about, how to define a function with the same signature as other function. The main problem I have is how to pick the argument list."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1551971828, "post_id": 55033007, "comment_id": 96844550, "body": "@K.Koovalsky Seems like you&#39;re unfamiliar with the term? See <a href=\"https://meta.stackexchange.com/q/66377/297908\">what is the XY problem</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": true, "score": 1, "last_activity_date": 1551957612, "creation_date": 1551957612, "answer_id": 55042579, "question_id": 55033007, "link": "https://stackoverflow.com/questions/55033007/generate-function-with-signature-of-pointers-type-passed-to-template/55042579#55042579", "title": "Generate function with signature of pointer&#39;s type passed to template", "body": "<p>As mentioned in my comment, one approach to get the argument list is to use partial specialization and forward the type of the passed in member function. The same approach can be used on free functions as well.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;auto MemberFunction, class MemberFunctionType&gt;\nstruct handler_impl;\n\ntemplate &lt;auto MemberFunction, class ReturnType, class ClassType, class... Args&gt;\nstruct handler_impl&lt;MemberFunction, ReturnType(ClassType::*)(Args...)&gt; {\n    // here you have access to return-type, class-type and args\n\n    static ReturnType call_on_instance(ClassType&amp; obj, Args... args) {\n        return (obj.*MemberFunction)(args...);\n    }\n};\n\ntemplate &lt;auto MemberFunction&gt;\nusing handler = handler_impl&lt;MemberFunction, decltype(MemberFunction)&gt;;\n\nstruct Foo {\n    int print(int x) {\n        std::cout &lt;&lt; x*x &lt;&lt; std::endl;\n        return x;\n    }\n};\n\nint main() {\n    Foo f;\n    handler&lt;&amp;Foo::print&gt;::call_on_instance(f, 7);\n}\n</code></pre>\n\n<p>One thing to keep in mind here is that we are not using perfect forwarding. The easiest approach is to simply make <code>call_on_instance</code> a template function, then we don't really need to care about the arguments and return value, we can let the compiler deduce it.</p>\n\n<p>Another option is to use the approach I showed above and use a <code>static_assert</code> to make sure the argument list passed in is valid, and thus give a better error message when used in the wrong way.</p>\n"}], "owner": {"reputation": 476, "user_id": 5542689, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3debd7e91e7b5137c920dedd308b3447?s=128&d=identicon&r=PG&f=1", "display_name": "K. Koovalsky", "link": "https://stackoverflow.com/users/5542689/k-koovalsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 55042579, "answer_count": 1, "score": 0, "last_activity_date": 1551957612, "creation_date": 1551910349, "question_id": 55033007, "link": "https://stackoverflow.com/questions/55033007/generate-function-with-signature-of-pointers-type-passed-to-template", "title": "Generate function with signature of pointer&#39;s type passed to template", "body": "<p>I want to create a generator which for each pointer to function will create a <code>static</code> function to which the pointer can point to:</p>\n\n<pre><code>template &lt;auto &amp;PtrToIsrHandler, auto MemberFunction&gt; struct enable_member_isr_handler\n{\n    using TypeOfCFunPtr = std::remove_reference_t&lt;decltype(PtrToIsrHandler)&gt;;\n    using TypeOfCFunPointed = std::remove_pointer_t&lt;TypeOfCFunPtr&gt;;\n    using RetType = std::invoke_result_t&lt;TypeOfCFunPointed&gt;;\n    static RetType isr_handler(/* dunno what to put here */)\n    {\n        return /* call MemberFunction here somehow */;\n    }\n\n    enable_member_isr_handler()\n    {\n        PtrToIsrHandler = isr_handler;\n    }\n\n};\n</code></pre>\n\n<p>In the parameter list of the <code>isr_handler</code> method I tried to put a tuple by using:</p>\n\n<pre><code>template &lt;typename T&gt; struct get_parameters;\ntemplate &lt;typename Ret, typename... Args&gt; struct get_parameters&lt;Ret(Args...)&gt;\n{\n    using args_t = std::tuple&lt;Args...&gt;;\n};\n</code></pre>\n\n<p>But I get then:</p>\n\n<pre><code>error: invalid conversion from void (*)(get_parameters&lt;void()&gt;)}\u2019 to \u2018void (*)()\u2019\n</code></pre>\n\n<p>How can I make it in such a way that <code>PtrToIsrHandler</code> could be a valid pointer to <code>isr_handler</code>?</p>\n"}, {"tags": ["c++", "visual-c++", "mfc"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1551943275, "post_id": 55032676, "comment_id": 96827469, "body": "Your question is somewhat unclear and somewhat broad. The controls should not overlap in first place. Or if they overlap for whatever reason, you should disable the &quot;non foreground&quot; controls by calling the <code>EnableWindow</code> method."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1552072461, "post_id": 55032676, "comment_id": 96886710, "body": "To correctly display overlapping child controls, you need to set the <code>WS_CLIPSIBLINGS</code> style on each of the child controls. This ensures correct drawing in respect to the Z-order by applying clipping to the child controls. To bring a child window to the foreground, pass <code>HWND_TOP</code> for the <code>hWndInsertAfter</code> parameter of <code>SetWindowPos()</code>."}], "owner": {"reputation": 145, "user_id": 8390201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af51319263ed43525aac990b55e309a1?s=128&d=identicon&r=PG&f=1", "display_name": "Evan.zz", "link": "https://stackoverflow.com/users/8390201/evan-zz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551908766, "creation_date": 1551908766, "question_id": 55032676, "link": "https://stackoverflow.com/questions/55032676/does-mfc-cricheditctrl-has-a-display-level", "title": "Does MFC CRichEditCtrl has a display level?", "body": "<p>i'm currently working on a legacy project in MFC.</p>\n\n<p>I encounter an issue where i create a bunch of CRichEditCtrl objs in the view, many of them are overlapping each other. When i select them, the visual is totally messed up. </p>\n\n<p>Is it possible to click on a particular control and bring it to the \"foreground\". so i can edit on that particular control?</p>\n\n<p>Other question is that is there a way to distinguish those controls dynamically?</p>\n\n<p>I know when i create them, the last parementer is their ID. But when i click on those, i want command handler in parent dialog or view knows which one i'm about to edit.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "qt", "qwidget", "qdockwidget"], "answers": [{"comments": [{"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1551983790, "post_id": 55034266, "comment_id": 96851226, "body": "Thank you for your response, I have no idea why I was not notified by this. This solves one of my issues, but the other issue I have still remains where I do not know how to replicated the Output Adjustment bar within the creator itself. Is there not other way to do that other than to hard code it?"}, {"owner": {"reputation": 26, "user_id": 11159908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8715368f37f5003474bd98eec5cae92?s=128&d=identicon&r=PG&f=1", "display_name": "Saulo A. Pessoa", "link": "https://stackoverflow.com/users/11159908/saulo-a-pessoa"}, "reply_to_user": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1552005777, "post_id": 55034266, "comment_id": 96859537, "body": "@Sailanarmo, I am afraid I did not understand what you mean by &quot;to replicate the Output Adjustment bar.&quot; Would it be &quot;adding <a href=\"https://en.wikipedia.org/wiki/Slider_(computing)\" rel=\"nofollow noreferrer\">sliders</a> into the Output Adjustment dock widget&quot;?"}, {"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1552006019, "post_id": 55034266, "comment_id": 96859588, "body": "No, apologies for the confusion. Rather, by default, how to I replicate the position of the Output Adjustment dock widget? I can replicate the left 3 docket widget&#39;s in the designer, but I do not know how, in the designer, to replicate the position of the Output Adjustment dock widget."}, {"owner": {"reputation": 26, "user_id": 11159908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8715368f37f5003474bd98eec5cae92?s=128&d=identicon&r=PG&f=1", "display_name": "Saulo A. Pessoa", "link": "https://stackoverflow.com/users/11159908/saulo-a-pessoa"}, "reply_to_user": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1552011660, "post_id": 55034266, "comment_id": 96860755, "body": "I am not aware of any way to replicate this positioning in the Qt Designer. To the best of my knowledge, it is only achievable by calling the method <code>QMainWindow::splitDockWidget</code> in your code."}, {"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1552011927, "post_id": 55034266, "comment_id": 96860815, "body": "Would I call it on the top left dock widget?"}, {"owner": {"reputation": 26, "user_id": 11159908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8715368f37f5003474bd98eec5cae92?s=128&d=identicon&r=PG&f=1", "display_name": "Saulo A. Pessoa", "link": "https://stackoverflow.com/users/11159908/saulo-a-pessoa"}, "reply_to_user": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1552046611, "post_id": 55034266, "comment_id": 96873640, "body": "I have just updated the answer with a minimalist example of the <code>QMainWindow::splitDockWidget</code> usage."}, {"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1552057590, "post_id": 55034266, "comment_id": 96879543, "body": "Thank you for being so helpful."}], "tags": [], "owner": {"reputation": 26, "user_id": 11159908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8715368f37f5003474bd98eec5cae92?s=128&d=identicon&r=PG&f=1", "display_name": "Saulo A. Pessoa", "link": "https://stackoverflow.com/users/11159908/saulo-a-pessoa"}, "is_accepted": true, "score": 1, "last_activity_date": 1552046484, "last_edit_date": 1552046484, "creation_date": 1551918471, "answer_id": 55034266, "question_id": 55032196, "link": "https://stackoverflow.com/questions/55032196/modifying-the-qdockwidget-default-snap-locations/55034266#55034266", "title": "Modifying the QDockWidget default snap locations?", "body": "<p>By enabling dock nesting in your main window you can achieve a more flexible placement of the dock widgets, including positioning the dock widgets side-by-side. In Qt Designer, select the main window and in the <code>Property Editor</code> panel mark the <code>dockNestingEnabled</code> check box (present in the <code>QMainWindow</code> section). Alternatively, you can achieve the same result by calling the method <code>QMainWindow::setDockNestingEnabled</code> in your code.</p>\n\n<p>If you want your application to start with dock widgets arranged side-by-side as in your reference application, you have to resort on the method <code>QMainWindow::splitDockWidget</code>. For example, you can create an initial arrangement in Qt Designer such as the one depicted below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2CIoz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2CIoz.png\" alt=\"enter image description here\"></a></p>\n\n<p>Next, you can rearrange the dock widgets in the main window constructor code,</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent), ui(new Ui::MainWindow) {\n  ui-&gt;setupUi(this);\n\n  // Changes the dock widgets arrangement.\n  splitDockWidget(ui-&gt;dock1, ui-&gt;dock3, Qt::Orientation::Horizontal);\n  splitDockWidget(ui-&gt;dock1, ui-&gt;dock2, Qt::Orientation::Vertical);\n}\n</code></pre>\n\n<p>which would produce the result below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/3ig0T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3ig0T.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 988, "favorite_count": 0, "accepted_answer_id": 55034266, "answer_count": 1, "score": 0, "last_activity_date": 1552046484, "creation_date": 1551906632, "question_id": 55032196, "link": "https://stackoverflow.com/questions/55032196/modifying-the-qdockwidget-default-snap-locations", "title": "Modifying the QDockWidget default snap locations?", "body": "<p>I am trying to model a UI from a wxWidgets application to QT. However, in the original application they have Dock Widgets that can snap in place and move around except for occupying the main window. </p>\n\n<p><a href=\"https://i.stack.imgur.com/ZU8H2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZU8H2.png\" alt=\"Example UI\"></a></p>\n\n<p>Every box appears to be a dock widget except for the main window. And if I want to move the Datasets window (top left) to the right of the Output Adjustment window I can:</p>\n\n<p><a href=\"https://i.stack.imgur.com/AJH3C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AJH3C.png\" alt=\"Example UI II\"></a></p>\n\n<p>So now my goal was to try and get the UI in QT to at least accomplish the dock widgets on the left side of the main widget. Which in my case, I was able to at least get the width and the height with some trouble to show up the same. However, I cannot create a QDockWidget like the Output Adjustment and have it snap next to the others. And the other problem comes when I try to move a dock widget it will not snap to the right or the left of the other widgets. </p>\n\n<p><a href=\"https://i.stack.imgur.com/oGmv3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oGmv3.png\" alt=\"My UI\"></a></p>\n\n<p>This is where I have my problems. I cannot snap it to either side of the dock widgets. Is this something that will need to be hard coded? I know I have seen other examples online that look awfully similar to this layout. However they are all hard coded. And it would be a lot more simple if I could just use the creator to add the sliders and toolbars as time goes on. And if it is not something I have to hard code, how do I modify the locations on where my widgets can snap? I tried to make a grid layout, however the widgets do not go into the grid.</p>\n"}, {"tags": ["c++", "eclipse", "macos", "debugging", "gdb"], "owner": {"reputation": 98, "user_id": 10291736, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-l4mX7Bx9AWg/AAAAAAAAAAI/AAAAAAAAAZQ/AbwRY4ZcsXk/photo.jpg?sz=128", "display_name": "Tim Johnsen", "link": "https://stackoverflow.com/users/10291736/tim-johnsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 239, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556431886, "creation_date": 1551906329, "question_id": 55032120, "link": "https://stackoverflow.com/questions/55032120/eclipse-c-mac-gdb-debugger", "title": "eclipse c++ Mac gdb debugger", "body": "<p>macOS Mojave version 10.14, 64-bit\nEclipse version 4.10.0 for C++\nGDB version 8.2.1</p>\n\n<pre><code>&gt; Installed GDB with Homebrew.\n&gt; created gdb-cert with self signed root, type code signing, override defaults, always trust code signing.\n&gt; signed cert with: $ codesign -fs gdb-cert gdbPath\n&gt; created .gdbinit file with: $ echo \"set startup-with-shell off\" &gt;&gt; ~/.gdbinit\n&gt; eclipse &gt; run &gt; debug configurations &gt; debugger &gt; GDB Debugger &gt; gdbPath\n&gt; eclipse &gt; run &gt; debug configurations &gt; debugger &gt; GDB Command File &gt; .gbdinit path\n</code></pre>\n\n<p>I can build and run my C++ program from eclipse fine.\nHowever, when debugging I get the problem below, (please check gdb is code signed - see tasked(8)). I checked the other thread that ran into the same error, and it appears I did everything how I was supposed to.</p>\n\n<p><a href=\"https://i.stack.imgur.com/98UX1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/98UX1.png\" alt=\"enter image description here\"></a></p>\n\n<p>P.S. I have been coding in both Mac and Windows side by side for the past 3 years and my experience time and again has been that setting up any environment for Windows takes only a couple steps and is much simpler than setting one up for Mac. Why do people prefer Mac for developing?</p>\n"}, {"tags": ["c++", "templates", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "edited": false, "score": 0, "creation_date": 1551909451, "post_id": 55032633, "comment_id": 96818162, "body": "I actually am using <code>std::vector</code> currently.  The reason I didn&#39;t put that in the question is because I&#39;m guessing if I did, the first answer I got back would have assumed the first argument to <code>myFunc</code> could always be <code>Class*</code>.  I wanted higher quality answers, so I chose a type that requires <code>myFunc</code> to accept both pointers and iterators."}, {"owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "edited": false, "score": 0, "creation_date": 1551911030, "post_id": 55032633, "comment_id": 96818728, "body": "Yes, but an iterator isn&#39;t a pointer.  I didn&#39;t want answers that <i>only</i> worked for pointers."}, {"owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "edited": false, "score": 0, "creation_date": 1551919944, "post_id": 55032633, "comment_id": 96821305, "body": "Unfortunately, I am stuck on VS2017u2, which doesn&#39;t have auto template parameter support.  However, I was able to use the declaration <code>template&lt;typename I, typename T, typename F&gt; void myFunc(I begin, size_t length, F T::*field);</code>."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 2, "last_activity_date": 1551948070, "last_edit_date": 1551948070, "creation_date": 1551908545, "answer_id": 55032633, "question_id": 55032061, "link": "https://stackoverflow.com/questions/55032061/c-template-function-to-iterate-over-any-collection-member-field/55032633#55032633", "title": "C++ Template Function to Iterate Over any Collection Member Field", "body": "<p>It's simple if you know the pointer to member syntax and the likes. Unfortunately is so rarely used, is kind of an esoteric feature of the language:</p>\n\n<pre><code>template &lt;class T&gt; void foo(T);\n\ntemplate &lt;auto Field, class It&gt;\nauto myFunc(It begin, It end)\n{\n    for (; begin != end; ++begin)\n    {\n        foo((*begin).*Field);\n    }\n}\n\nint main()\n{\n    std::vector&lt;Example&gt; v{{5, true}, {8, false}};\n\n    myFunc&lt;&amp;Example::a&gt;(v.begin(), v.end()); // will call foo&lt;int&gt;(5) , foo&lt;int&gt;(8)\n    myFunc&lt;&amp;Example::b&gt;(v.begin(), v.end()); // will call foo&lt;bool&gt;(true) , foo&lt;bool&gt;(false)\n}\n</code></pre>\n\n<p>For the <code>template &lt;auto Field</code> you need C++17.</p>\n\n<p>For C++11 the syntax is more verbose:</p>\n\n<pre><code>template &lt;class T, class F, F T::* Field, class It&gt;\nvoid myFunc(It begin, It end)\n{ /* same */ }\n\nint main()\n{\n    std::vector&lt;Example&gt; v{{5, true}, {8, false}};\n\n    myFunc&lt;Example, int, &amp;Example::a&gt;(v.begin(), v.end()); // will call foo&lt;int&gt;(5) , foo&lt;int&gt;(8)\n    myFunc&lt;Example, bool, &amp;Example::b&gt;(v.begin(), v.end()); // will call foo&lt;bool&gt;(true) , foo&lt;bool&gt;(false)\n}\n</code></pre>\n\n<hr>\n\n<p>A little bit OT to your question, but I don't understand why you complicate yourself with that initialization of <code>std::list</code>. In C++ your first container of choice should be <code>std::vector</code>.</p>\n\n<p>Also there is no <code>std::iterator</code></p>\n"}, {"comments": [{"owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "edited": false, "score": 0, "creation_date": 1551916866, "post_id": 55032713, "comment_id": 96820600, "body": "This answer along with pointer to member parameters has it.  You don&#39;t need lambda functions, and can simply pass &amp;Example::a directly as the second parameter."}], "tags": [], "owner": {"reputation": 388, "user_id": 9170571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9681b567ae09cf43a1e33b0c36478748?s=128&d=identicon&r=PG&f=1", "display_name": "Jan15", "link": "https://stackoverflow.com/users/9170571/jan15"}, "is_accepted": false, "score": 3, "last_activity_date": 1551910641, "last_edit_date": 1551910641, "creation_date": 1551908948, "answer_id": 55032713, "question_id": 55032061, "link": "https://stackoverflow.com/questions/55032061/c-template-function-to-iterate-over-any-collection-member-field/55032713#55032713", "title": "C++ Template Function to Iterate Over any Collection Member Field", "body": "<p>What I usually use is something like:</p>\n\n<pre><code>void main() {\n  std::array&lt;Example, 2&gt; exArray{ {5, true}, {8, false} };\n  std::list&lt;Example&gt; exList{ exArray.begin(), exArray.end() };\n\n  auto access_a = [](Example&amp; e)-&gt;int&amp;{ return e.a;};\n  auto access_b = [](Example&amp; e)-&gt;bool&amp;{ return e.b;};\n  myFunc(exArray.begin(), exArray.end(), access_a);\n  myFunc(exList.begin(), exList.end(), access_b);\n}\n\ntemplate&lt;class ForwardIt, class Accessor&gt;\nvoid myFunc(ForwardIt begin,ForwardIt end, Accessor accessor) {\n    cout &lt;&lt; end - begin &lt;&lt; endl;\n    for (auto it = begin; it != end; it++) {\n      // Forward field to some other template function\n      anotherTemplateFunction(accessor(*it));\n    }\n}\n</code></pre>\n\n<p>Please notice how I used <code>std::array</code> instead of a raw c style array.\nIf you have access to a c++11 compiler, <code>std::array</code> (or <code>std::vector</code>) should always be preferred over raw c arrays. <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#example-bad-82\" rel=\"nofollow noreferrer\">ES.27</a></p>\n\n<p>In order to need less boilerplate code, consider using some serialization libraries which solve this \"iterating over class fields\" problem, for example <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/serialization/doc/index.html\" rel=\"nofollow noreferrer\">boost serialization</a> or <a href=\"https://github.com/apolukhin/magic_get\" rel=\"nofollow noreferrer\">magic get</a>.</p>\n"}], "owner": {"reputation": 3828, "user_id": 960115, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/oZ1UM.gif?s=128&g=1", "display_name": "Jeff G", "link": "https://stackoverflow.com/users/960115/jeff-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 55032633, "answer_count": 2, "score": 2, "last_activity_date": 1551948070, "creation_date": 1551906079, "last_edit_date": 1551906442, "question_id": 55032061, "link": "https://stackoverflow.com/questions/55032061/c-template-function-to-iterate-over-any-collection-member-field", "title": "C++ Template Function to Iterate Over any Collection Member Field", "body": "<p>I am attempting to write a template function that iterates over a user-specified field within some collection of structs.  For example, I want to write the following C++:</p>\n\n<pre><code>struct Example {\n    int a;\n    bool b;\n};\n\ntemplate&lt;std::function&lt;Field&amp; (Class)&gt; GetField, typename Field, typename Class&gt;\nvoid myFunc(std::iterator&lt;Class&gt; begin, size_t const length) {\n    cout &lt;&lt; length &lt;&lt; endl;\n    for (size_t i{ 0 }; i &lt; length; ++begin, ++i) {\n        Field const &amp;field{ GetField(*begin) };\n        // Forward field to some other template function\n        anotherTemplateFunction&lt;Field&gt;(field);\n    }\n}\n\nvoid main() {\n    Example exArray[]{ {5, true}, {8, false} };\n    std::list&lt;Example&gt; exList{ exArray, exArray + _countof(exArray) }\n\n    // Examples of how I would like to call myFunc...\n    myFunc&lt;Example::a&gt;(exArray, _countof(exArray));\n    myFunc&lt;Example::b&gt;(exList.begin(), exList.size());\n}\n</code></pre>\n\n<p>The above doesn't work, but hopefully the intent is clear.  How can I write the myFunc template method to accomplish generic iteration over some field of each iterated item?  Alternatively, if there is some way (in Boost or the Standard Library) to directly create an iterator over <code>exArray[i].a</code>, that would also be acceptable.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1551906608, "post_id": 55032025, "comment_id": 96816943, "body": "I can&#39;t reproduce. What is your platform/compiler? BTW, for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> you are missing <code>#include &lt;vector&gt;</code> and <code>#include &lt;string&gt;</code>."}, {"owner": {"reputation": 1005, "user_id": 6947687, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d0d3a100995c266cd398b0f85d26a946?s=128&d=identicon&r=PG&f=1", "display_name": "bielu000", "link": "https://stackoverflow.com/users/6947687/bielu000"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1551907069, "post_id": 55032025, "comment_id": 96817143, "body": "You&#39;re right I missed the headers. The platform is Linux Debian x64, and to compile I&#39;m using g++ (Debian 6.3.0-18+deb9u1) 6.3.0 20170516. The C++ standard version is 14."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1551907914, "post_id": 55032025, "comment_id": 96817484, "body": "Are you debugging an optimized build?"}, {"owner": {"reputation": 1393, "user_id": 3648103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9badfef4d6302fd25825df1ea5ffaf06?s=128&d=identicon&r=PG&f=1", "display_name": "aep", "link": "https://stackoverflow.com/users/3648103/aep"}, "edited": false, "score": 0, "creation_date": 1551909788, "post_id": 55032025, "comment_id": 96818307, "body": "@bielu000 I too reckon that this is some kind of an optimized build. Tried this and couldn&#39;t reproduce. <a href=\"https://onlinegdb.com/S18rQTaUE\" rel=\"nofollow noreferrer\">onlinegdb.com/S18rQTaUE</a>. It&#39;s not the same architecture though..."}, {"owner": {"reputation": 1005, "user_id": 6947687, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d0d3a100995c266cd398b0f85d26a946?s=128&d=identicon&r=PG&f=1", "display_name": "bielu000", "link": "https://stackoverflow.com/users/6947687/bielu000"}, "edited": false, "score": 0, "creation_date": 1551934289, "post_id": 55032025, "comment_id": 96824524, "body": "I think that you&#39;re rightit could be because optimized builds, but I don&#39;t have any optimiziation flags set. It is really confusing me - I copied all files and directories of above app into another, new directory, and it works correctly... But the original source still works as I said above. I compared all files, from CmakeLists even to  IDE configuration settings, but there are any differents."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1551942562, "post_id": 55032025, "comment_id": 96827159, "body": "Your program runs to the end and returns with 0? So the messages are just info messages and no exception or error? Did you try to step into the <code>push_back</code>?"}, {"owner": {"reputation": 479, "user_id": 3280644, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/fk5YU.jpg?s=128&g=1", "display_name": "syntheticgio", "link": "https://stackoverflow.com/users/3280644/syntheticgio"}, "edited": false, "score": 0, "creation_date": 1585957712, "post_id": 55032025, "comment_id": 107957736, "body": "For what its worth I&#39;m also seeing this.  I create an array of strings as a class member (i.e. std::string text[4] = {&quot;blue&quot;, &quot;green&quot;, &quot;brown&quot;, &quot;black&quot;}; and index 0 is this error when I examine the memory.  Index 1 is green, 2 is brown, etc., oddly."}], "answers": [{"tags": [], "owner": {"reputation": 406, "user_id": 1397307, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/9585055fa3e7817c9f46b29382e876c2?s=128&d=identicon&r=PG", "display_name": "Deulis", "link": "https://stackoverflow.com/users/1397307/deulis"}, "is_accepted": false, "score": 1, "last_activity_date": 1604023597, "creation_date": 1604023597, "answer_id": 64601789, "question_id": 55032025, "link": "https://stackoverflow.com/questions/55032025/error-reading-variable-cannot-create-a-lazy-string-with-address/64601789#64601789", "title": "Error reading variable. Cannot create a lazy string with address", "body": "<p>Well, your problem is one and half year old, but today I did have the same problem. The same code work fine when compile in a project and do not work when compile in other project. Like you, I was declaring and initializing a string variable in the class declaration. My solution was add a constructor and initialize the variable in the constructor and not in the class declaration. I know its sounds weird, many many years using c++, but from now on I will always initialize the string variables in the constructor.</p>\n"}], "owner": {"reputation": 1005, "user_id": 6947687, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/d0d3a100995c266cd398b0f85d26a946?s=128&d=identicon&r=PG&f=1", "display_name": "bielu000", "link": "https://stackoverflow.com/users/6947687/bielu000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1980, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1604023597, "creation_date": 1551905888, "last_edit_date": 1592644375, "question_id": 55032025, "link": "https://stackoverflow.com/questions/55032025/error-reading-variable-cannot-create-a-lazy-string-with-address", "title": "Error reading variable. Cannot create a lazy string with address", "body": "<p>I have following code:</p>\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nclass A {\npublic:\n    std::string s = &quot;test&quot;;\n};\n\nclass B {\npublic:\n    std::vector&lt;A&gt; vec;\n};\n\nint main()\n{\n    std::vector&lt;B&gt; vec;\n\n    A a1 = A();\n    A a2 = A();\n\n    B b1 = B();\n    b1.vec.push_back(a1);\n    b1.vec.push_back(a2);\n\n    vec.push_back(b1); // push_1 \n    vec.push_back(b1);\n}\n</code></pre>\n<p>Whenever I execute this app under debugger, and execution procecss reachs instruction with comment push_1, the execution process is stopped, and I have two followings informations in my debugger output:</p>\n<blockquote>\n<p>__lhs { s = &quot;test&quot; }</p>\n<p>__rhs { s = &quot;error reading variable: Cannot create a lazy string with address 0x0, and a non zero length.}</p>\n</blockquote>\n<p>The application exit code is 0.</p>\n<p>But when I remove property s of class A, or repleace with for instance int property, this strange behaviour does not occure. Why it is happening? Why the string occurrance in the class A, causes this error?</p>\n"}, {"tags": ["c++", "llvm", "llvm-clang"], "comments": [{"owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 0, "creation_date": 1551955405, "post_id": 55031909, "comment_id": 96834479, "body": "Why do you need variable names? Compare <code>Instruction*</code> pointers instead."}], "answers": [{"tags": [], "owner": {"reputation": 573, "user_id": 2745347, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a5d33a3bfbff0873c608f7ae270e96b3?s=128&d=identicon&r=PG&f=1", "display_name": "DTharun", "link": "https://stackoverflow.com/users/2745347/dtharun"}, "is_accepted": true, "score": 1, "last_activity_date": 1551957614, "creation_date": 1551957614, "answer_id": 55042581, "question_id": 55031909, "link": "https://stackoverflow.com/questions/55031909/value-getname-returns-empty-string-llvm/55042581#55042581", "title": "Value * -&gt; getName returns empty string LLVM", "body": "<p>The variable names you see in the LLVM IR are for reader convenience. Those names won't exist. Every instruction is an object with other instructions as its operands. You can use instruction addresses to differentiate from other instructions.</p>\n"}], "owner": {"reputation": 143, "user_id": 4268324, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1777f59325d41215213b8a2a90a893ff?s=128&d=identicon&r=PG&f=1", "display_name": "Conanap", "link": "https://stackoverflow.com/users/4268324/conanap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 55042581, "answer_count": 1, "score": -1, "last_activity_date": 1551957614, "creation_date": 1551905401, "question_id": 55031909, "link": "https://stackoverflow.com/questions/55031909/value-getname-returns-empty-string-llvm", "title": "Value * -&gt; getName returns empty string LLVM", "body": "<p>I am looping over the instructions in a basic block, and the instructions as well as the operands gives an empty name when doing val->getName().</p>\n\n<p>I'm trying to implement available expressions analysis, so I need to figure out how to compare the two labels; but of course, SSA obscures that. Currently, compiler is on -o0 and disabled other optimizations. What are possible ways I can compare var names?</p>\n\n<p>IE:</p>\n\n<pre><code>a = b + c\nb = d + e\n</code></pre>\n\n<p>b = d + e should kill a = b + c, but because of SSA, comparing value obj of b in a = b + c and b in b = d + e is not equal. How can I successfully compare those?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "gdb", "ros"], "comments": [{"owner": {"reputation": 8645, "user_id": 5235574, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wEodm.jpg?s=128&g=1", "display_name": "Fruchtzwerg", "link": "https://stackoverflow.com/users/5235574/fruchtzwerg"}, "edited": false, "score": 0, "creation_date": 1551947479, "post_id": 55031778, "comment_id": 96829469, "body": "Check out the documentation: <a href=\"http://wiki.ros.org/roscpp/Overview/Callbacks%20and%20Spinning\" rel=\"nofollow noreferrer\">wiki.ros.org/roscpp/Overview/Callbacks%20and%20Spinning</a> - your code is already single-threaded."}, {"owner": {"reputation": 59, "user_id": 6271711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e77a05bfaaa9dbc53d04981ce9e3a59f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeoker", "link": "https://stackoverflow.com/users/6271711/jeoker"}, "reply_to_user": {"reputation": 8645, "user_id": 5235574, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/wEodm.jpg?s=128&g=1", "display_name": "Fruchtzwerg", "link": "https://stackoverflow.com/users/5235574/fruchtzwerg"}, "edited": false, "score": 0, "creation_date": 1554341239, "post_id": 55031778, "comment_id": 97718833, "body": "The interesting issue is that it somehow still goes into a multithreads mode in gdb"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6271711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e77a05bfaaa9dbc53d04981ce9e3a59f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeoker", "link": "https://stackoverflow.com/users/6271711/jeoker"}, "edited": false, "score": 0, "creation_date": 1554341481, "post_id": 55061338, "comment_id": 97718867, "body": "Thanks for your answer, but I don&#39;t feel you are answering my question."}], "tags": [], "owner": {"reputation": 21, "user_id": 11169656, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XbRR02JfTeE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rclU4xHb6UR3qyL8f-bbjcIYgelQQ/mo/photo.jpg?sz=128", "display_name": "Marc Jonot", "link": "https://stackoverflow.com/users/11169656/marc-jonot"}, "is_accepted": false, "score": 0, "last_activity_date": 1552041212, "creation_date": 1552041212, "answer_id": 55061338, "question_id": 55031778, "link": "https://stackoverflow.com/questions/55031778/how-to-force-ros-running-in-single-thread-mode/55061338#55061338", "title": "How to force ROS running in single thread mode", "body": "<p>There are two ways to talk about multithreading in ROS.</p>\n\n<ol>\n<li>The whole node</li>\n<li>The callbackQueue.</li>\n</ol>\n\n<p>In the first case, when you use:</p>\n\n<pre><code>ros::NodeHandle nodeHandle(\"~\");\nros::ok()\n...\n</code></pre>\n\n<p>It does some requests to the ROS Master. And with roscpp the network communication is handled with multithreading. There is no way to change that. If single threading is very important for you, you should try <em>rospy</em>, <em>rosnodejs</em> or others.</p>\n\n<blockquote>\n  <p>\"<em>roscpp does not try to specify a threading model for your application. This means that while roscpp may use threads behind the scenes to do network management, scheduling etc., it will never expose its threads to your application.</em>\"</p>\n</blockquote>\n\n<p>In the second case, we talk about handling topics, services and actions with multithreading. By default, a topic is handled with one thread. But if you send more data that your node can handle it, you can use multithreading. </p>\n\n<blockquote>\n  <p>\"<em>roscpp does, however, allow your callbacks to be called from any number of threads if that's what you want.</em>\"</p>\n</blockquote>\n\n<p>For mode details, see:\n<a href=\"http://wiki.ros.org/roscpp/Overview/Callbacks%20and%20Spinning\" rel=\"nofollow noreferrer\">http://wiki.ros.org/roscpp/Overview/Callbacks%20and%20Spinning</a></p>\n"}], "owner": {"reputation": 59, "user_id": 6271711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e77a05bfaaa9dbc53d04981ce9e3a59f?s=128&d=identicon&r=PG&f=1", "display_name": "Jeoker", "link": "https://stackoverflow.com/users/6271711/jeoker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552041212, "creation_date": 1551904719, "question_id": 55031778, "link": "https://stackoverflow.com/questions/55031778/how-to-force-ros-running-in-single-thread-mode", "title": "How to force ROS running in single thread mode", "body": "<p>I am trying to debug my ros code in gdb, how ever, when I start the node in gdb, it always gives me:</p>\n\n<pre><code>Starting program: /home/uav/catkin_ws/devel/lib/my_package/my_node \n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux- \ngnu/libthread_db.so.1\".\n[New Thread 0x7ffff13b9700 (LWP 28089)]\n[New Thread 0x7ffff0bb8700 (LWP 28090)]\n[New Thread 0x7fffebfff700 (LWP 28091)]\n[New Thread 0x7fffeb7fe700 (LWP 28096)]\n[New Thread 0x7fffeaffd700 (LWP 28098)]\n[New Thread 0x7fffea7fc700 (LWP 28121)]\n</code></pre>\n\n<p>and hangs forever. I don't see this issue before and have no clue why it always start in multi-threads mode. My main function looks like this:</p>\n\n<pre><code>int main(int argc, char** argv)\n{\n    ros::init(argc, argv, \"my_node\");\n    ros::NodeHandle nodeHandle(\"~\");\n    ros::Rate rate(10);\n    while (ros::ok()) {\n        // Do Something\n        ros::spinOnce();\n        rate.sleep();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>How can I fix this problem? I am thinking I should make my node to a single thread version and debug it, how am I supposed to do that?</p>\n"}, {"tags": ["c++", "function", "scope", "declare"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1551904902, "post_id": 55031773, "comment_id": 96816234, "body": "<code>convert</code> belongs to an <code>A</code>. You are asking for a free <code>convert</code> function."}], "answers": [{"tags": [], "owner": {"reputation": 7117, "user_id": 1245420, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c5a428623702851ce5f462822483fc6c?s=128&d=identicon&r=PG", "display_name": "phonetagger", "link": "https://stackoverflow.com/users/1245420/phonetagger"}, "is_accepted": false, "score": 2, "last_activity_date": 1551974330, "last_edit_date": 1551974330, "creation_date": 1551905309, "answer_id": 55031894, "question_id": 55031773, "link": "https://stackoverflow.com/questions/55031773/not-declared-in-this-scope-error-for-function/55031894#55031894", "title": "Not declared in this scope error for function", "body": "<p>The error itself is because you don't have any \"free function\" defined by the name <code>convert()</code> that's in any scope directly accessible from the scope in which you try to call it. You have one that's a member method (\"function\") of <code>class A</code>, but none defined outside of that class. So yes you have a \"function\" named <code>convert()</code> defined, but it's not accessible in the scope in which you're trying to call it. You'll have to add something to tell the compiler where to find this \"<code>convert()</code>\" function you're trying to call. There are a few ways to do that:</p>\n\n<ol>\n<li>For a nonstatic class member function (normally called a \"method\" when it's part of a class), you'll first need an object of that class's type in order to call the method.</li>\n<li>For class static member functions (normally called \"static methods\"), you can call it using a object of that type in order to resolve the scope, or since it's a static method, you can use the class's name (along with the <code>::</code> scope resolution operator) to resolve the scope.</li>\n<li>If you have a \"free function\" that's defined in a separate namespace that doesn't encompass the scope in which you're trying to call the function, you'll need to use either the <code>::</code> scope resolution operator (e.g. \"<code>namespaceName::functionName()</code>\"), or else use the \"<code>using</code>\" keyword to bring that function's name into the current scope.</li>\n</ol>\n\n<p>Since you're asking about a class member method, I'll ignore #3 above in the following discussion....</p>\n\n<p>Will you have an instance of <code>class A</code>? If so, say you call it \"fred\", then you could call <code>fred.convert(myword);</code>. But <code>A::convert()</code> doesn't use any member data of <code>class A</code>, so perhaps you want it to be a static member method (i.e. it can be called even without an object of the class's type), in which you'd need to declare the method as <code>static</code>, and when you call it, use \"<code>A::convert(myword);</code>\".</p>\n\n<p>Here's an example of creating an instance of <code>class A</code> and invoking method <code>A::convert()</code> on it:</p>\n\n<pre><code>===== file 'A.h' =====\nclass A\n{\n    public:\n        int convert(char bcd);\n};\n\n===== file 'program.cpp' =====\n#include \"A.h\"\n#include &lt;iostream&gt;\n#include&lt;stdio.h&gt;\n\nusing namespace std;\n\nint A::convert(char b)\n{\n    return b*5;\n}\n\nint main()\n{\n    char myword = '27';\n    A fred; // create an instance of class A named \"fred\"\n    char cc = fred.convert(myword);\n    cout &lt;&lt; \"Number is: \" &lt;&lt; cc &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Here's an example where <code>A::convert()</code> is a static member method, and an instance of the class is not required in order to call the method:</p>\n\n<pre><code>===== file 'A.h' =====\nclass A\n{\n    public:\n        static int convert(char bcd); // &lt;--- note 'static' keyword\n};\n\n===== file 'program.cpp' =====\n#include \"A.h\"\n#include &lt;iostream&gt;\n#include&lt;stdio.h&gt;\n\nusing namespace std;\n\nint A::convert(char b)\n{\n    return b*5;\n}\n\nint main()\n{\n    char myword = '27';\n    A fred; // create an instance of class A named \"fred\"\n    char cc = fred.convert(myword); // you can call convert() on an A object\n    char dd = A::convert(myword); // or you can call it without an A object\n    cout &lt;&lt; \"Number cc is: \" &lt;&lt; cc &lt;&lt; endl;\n    cout &lt;&lt; \"Number dd is: \" &lt;&lt; dd &lt;&lt; endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 9653186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc4f43cab47acfac5ac55c1b0adedda2?s=128&d=identicon&r=PG&f=1", "display_name": "Martaer", "link": "https://stackoverflow.com/users/9653186/martaer"}, "edited": false, "score": 0, "creation_date": 1551906754, "post_id": 55032111, "comment_id": 96817009, "body": "Yeah it makes sense now. Thanks for your really informative answer. Helped me a lot."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 1, "last_activity_date": 1551906303, "creation_date": 1551906303, "answer_id": 55032111, "question_id": 55031773, "link": "https://stackoverflow.com/questions/55031773/not-declared-in-this-scope-error-for-function/55032111#55032111", "title": "Not declared in this scope error for function", "body": "<p>You are confusing 3 things:</p>\n\n<ol>\n<li>Functions</li>\n<li>Class Member Methods</li>\n<li>Static Class Methods</li>\n</ol>\n\n<p>A function is a set of commands to be executed in a row. You declare them like so:</p>\n\n<pre><code>type function(type parameter1, type parameter2 /*etc */);\n</code></pre>\n\n<p>You define them like this:</p>\n\n<pre><code>type function(type parameter1, type parameter2 /*etc */) {\n  // implementation...\n}\n</code></pre>\n\n<p>And call them like this:</p>\n\n<pre><code>type myvar = function(parameter1,parameter2 /*etc */);\n</code></pre>\n\n<p>A Class method is a function that is also a member of a class. It generally uses instance data to perform some operation. You declare them like this:</p>\n\n<pre><code>class A\n{\n    public:\n\n        type method(type parameter1, type parameter2);\n\n};\n</code></pre>\n\n<p>define them like this:</p>\n\n<pre><code>type A::method(type parameter1, type parameter2)\n{\n    return b*5;\n}\n</code></pre>\n\n<p>and call them like this:</p>\n\n<pre><code>A myVar;\nmyVar.method(parameter1,parameter2);\n</code></pre>\n\n<p>Finally, there is what @phonetagger suggested, which is is Static Class Methods. These are like regular methods, but generally don't touch instance data. Yet, they are usually related to the class in some way. You declare them like this:</p>\n\n<pre><code>class A\n{\n    public:\n\n        static type method(type parameter1, type parameter2);\n\n};\n</code></pre>\n\n<p>define them like this:</p>\n\n<pre><code>type A::method(type parameter1, type parameter2)\n{\n    return b*5;\n}\n</code></pre>\n\n<p>and call them like this:</p>\n\n<pre><code>A::method(parameter1,parameter2);\n</code></pre>\n\n<p>You need to decide which one you really need and implement it properly.</p>\n"}], "owner": {"reputation": 19, "user_id": 9653186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc4f43cab47acfac5ac55c1b0adedda2?s=128&d=identicon&r=PG&f=1", "display_name": "Martaer", "link": "https://stackoverflow.com/users/9653186/martaer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3203, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1551974330, "creation_date": 1551904704, "question_id": 55031773, "link": "https://stackoverflow.com/questions/55031773/not-declared-in-this-scope-error-for-function", "title": "Not declared in this scope error for function", "body": "<p>I'm trying to define a function in a class and then use it in a .cpp program. I have declared the function above main and can't figure out why I'm getting a not declared in scope error.</p>\n\n<p>Error from g++: \"error: \u2018convert\u2019 was not declared in this scope\"</p>\n\n<p>Thanks in advance.</p>\n\n<p>A.h:</p>\n\n<pre><code>class A\n{\n    public:\n\n        int convert(char bcd);\n\n};\n</code></pre>\n\n<p>program.cpp:</p>\n\n<pre><code>#include \"A.h\"\n#include &lt;iostream&gt;\n#include&lt;stdio.h&gt;\n\nusing namespace std;\n\n\nint A::convert(char b)\n{\n    return b*5;\n}\n\nint main(){\n\n    char myword = '27'; \n    char cc = convert(myword); //scope error here\n    cout &lt;&lt; \"Number is: \" &lt;&lt; cc &lt;&lt; endl;\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++17", "variadic-templates", "template-meta-programming", "constexpr"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551904975, "post_id": 55031712, "comment_id": 96816267, "body": "Is <code>1 3 5 7 2 4 6 8</code> an acceptable result?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551905114, "post_id": 55031712, "comment_id": 96816324, "body": "@NathanOliver not really, sorry. That would be trivial."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551905141, "post_id": 55031712, "comment_id": 96816341, "body": "OK.  Just want to make sure."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1551910010, "post_id": 55031712, "comment_id": 96818393, "body": "Do you want the two sequences sorted or interleaved?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1551910785, "post_id": 55031712, "comment_id": 96818646, "body": "@rubenvb in the example above they are interleaved"}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1551955175, "post_id": 55031712, "comment_id": 96834321, "body": "I&#39;m just asking because the solution will be different if sorting also needs to happen."}], "answers": [{"comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1551905451, "post_id": 55031742, "comment_id": 96816449, "body": "Very cool. I just tested this and noticed that <code>k</code> is actually a <code>std::array&lt;Int, 8&gt;</code> where <code>Int</code> is a <code>struct { size_t i; };</code>. Do you think you could add a reduction from <code>std::array&lt;Int, N&gt;</code> to <code>std::array&lt;size_t, N&gt;</code>?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1551905538, "post_id": 55031742, "comment_id": 96816487, "body": "@alterigel my bad, I didn&#39;t copy the code properly. Fixed. This was the whole purpose of <code>convert</code> there."}, {"owner": {"reputation": 766, "user_id": 10532253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7970ca81beac26fc5094dbbcd1d618b?s=128&d=identicon&r=PG&f=1", "display_name": "Handy999", "link": "https://stackoverflow.com/users/10532253/handy999"}, "edited": false, "score": 0, "creation_date": 1551982912, "post_id": 55031742, "comment_id": 96850806, "body": "The first solution does not give a std::array&lt;int,8&gt;."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 766, "user_id": 10532253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7970ca81beac26fc5094dbbcd1d618b?s=128&d=identicon&r=PG&f=1", "display_name": "Handy999", "link": "https://stackoverflow.com/users/10532253/handy999"}, "edited": false, "score": 0, "creation_date": 1551983512, "post_id": 55031742, "comment_id": 96851107, "body": "@Handy999 it does in my tests. Can you provide yours?"}, {"owner": {"reputation": 766, "user_id": 10532253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7970ca81beac26fc5094dbbcd1d618b?s=128&d=identicon&r=PG&f=1", "display_name": "Handy999", "link": "https://stackoverflow.com/users/10532253/handy999"}, "edited": false, "score": 0, "creation_date": 1551983851, "post_id": 55031742, "comment_id": 96851259, "body": "Sorry my fault; you construct indeed a std::array&lt;size_t,8&gt; which happens not to be std::array&lt;int,8&gt;"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1551910882, "last_edit_date": 1551910882, "creation_date": 1551904499, "answer_id": 55031742, "question_id": 55031712, "link": "https://stackoverflow.com/questions/55031712/how-to-create-an-array-from-two-index-sequence-at-compile-time/55031742#55031742", "title": "How to create an array from two index sequence at compile time", "body": "<p>So far I know of two solutions.</p>\n\n<p>In the first one, I managed to do it using C++ fold expressions and operator overloading. This code is terrible, and I am not proud of it - but it is there. Everyone is welcome to comment and contribute:</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;array&gt;\n\nstruct Int {\n    size_t i;\n};\n\nconstexpr std::array&lt;Int, 2&gt; operator+(Int i1, Int i2) {\n    return {i1, i2};\n}\n\ntemplate&lt;size_t SZ, size_t... Ix&gt;\nconstexpr auto concat(std::array&lt;Int, 2&gt; arr1, std::array&lt;Int, SZ&gt; arr2, std::index_sequence&lt;Ix...&gt;)\n{\n    return std::array&lt;Int, SZ+2&gt;{arr1[0], arr1[1], arr2[Ix]...};\n}\n\ntemplate&lt;size_t SZ&gt;\nconstexpr auto operator+ (std::array&lt;Int, 2&gt; arr1, std::array&lt;Int, SZ&gt; arr2) {\n    return concat(arr1, arr2, std::make_index_sequence&lt;SZ&gt;{});\n}\n\n\ntemplate&lt;size_t SZ, size_t... Ix&gt;\nconstexpr auto convert_impl(std::array&lt;Int, SZ&gt; arr, std::index_sequence&lt;Ix...&gt;) {\n    return std::array{arr[Ix].i...};\n}\n\ntemplate&lt;size_t SZ&gt;\nconstexpr auto convert(std::array&lt;Int, SZ&gt; arr) {\n    return convert_impl(arr, std::make_index_sequence&lt;SZ&gt;{});\n}\n\ntemplate&lt;size_t... IX1, size_t... IX2&gt;\nconstexpr auto make_arr(std::index_sequence&lt;IX1...&gt;, std::index_sequence&lt;IX2...&gt;) {\n\n    return convert(((Int{IX1} + Int{IX2})+ ...));\n}\n\nusing i1 = std::index_sequence&lt;1, 3, 5, 7&gt;;\nusing i2 = std::index_sequence&lt;2, 4, 6, 8&gt;;\nauto k = make_arr(i1{}, i2{});\n</code></pre>\n\n<p>Second solution is a way better:</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;array&gt;\n\ntemplate&lt;size_t... Ix, class T, size_t SZ&gt;\nauto concat(T t1, T t2, std::array&lt;T, SZ&gt; arr, std::index_sequence&lt;Ix...&gt;) {\n    return std::array{t1, t2, arr[Ix]...};\n}\n\ntemplate&lt;size_t i0, size_t... Ix0, size_t i1, size_t... Ix1&gt;\nauto make_array(std::index_sequence&lt;i0, Ix0...&gt;, std::index_sequence&lt;i1, Ix1...&gt;) {\n\n    if constexpr (sizeof...(Ix0) &gt; 0) {\n        return concat(i0, \n                      i1,\n                      make_array(std::index_sequence&lt;Ix0...&gt;{}, std::index_sequence&lt;Ix1...&gt;{}),\n                      std::make_index_sequence&lt;sizeof...(Ix0) + sizeof...(Ix1)&gt;{}\n                     );\n    } else {\n        return std::array{i0, i1};\n    }\n}\n\nusing i1 = std::index_sequence&lt;1, 3, 5, 7&gt;;\nusing i2 = std::index_sequence&lt;2, 4, 6, 8&gt;;\nstd::array&lt;size_t, 8&gt; k = make_array(i1{}, i2{});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551909781, "post_id": 55032683, "comment_id": 96818305, "body": "Creative. Upvoted. But what if you want to merge 3 of them? 4? Would shifts/modules work?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551911226, "post_id": 55032683, "comment_id": 96818784, "body": "@SergeyA - shift, in this case, is only a substitute for &quot;multiplication for 2&quot; and &quot;division for 2&quot;; so... substituting shift with multiplication and division... why not? Give me some minutes and I try to prepare the 3 case."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551911507, "post_id": 55032683, "comment_id": 96818892, "body": "Only if it fancies you :)"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1551912191, "post_id": 55032683, "comment_id": 96819132, "body": "@SergeyA - case 3 added; as you can see, the <code>make_arr_helper()</code> can be easily generalized (and, maybe, parametrized with the number of sequences). The problem can be in <code>make_arr()</code> if you want generalize the number of sequences: I don&#39;t know how to concatenate the indexes of a variadic sequence of <code>std::index_sequence</code>."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1551912022, "last_edit_date": 1551912022, "creation_date": 1551908811, "answer_id": 55032683, "question_id": 55031712, "link": "https://stackoverflow.com/questions/55031712/how-to-create-an-array-from-two-index-sequence-at-compile-time/55032683#55032683", "title": "How to create an array from two index sequence at compile time", "body": "<p>What about a little play with indexes (shift, modulus... this sort of things) ?</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T, std::size_t ... Is&gt;\nconstexpr auto make_arr_helper (T const &amp; arr0,\n                                std::index_sequence&lt;Is...&gt;)\n { \n   constexpr auto  DD2 = sizeof...(Is) &gt;&gt; 1;\n\n   return std::array{arr0[(Is&gt;&gt;1)+(Is%2 ? DD2 : 0u)]...};\n }\n\ntemplate &lt;std::size_t ... IX1, std::size_t ... IX2&gt;\nconstexpr auto make_arr (std::index_sequence&lt;IX1...&gt;,\n                         std::index_sequence&lt;IX2...&gt;)\n {\n   static_assert( sizeof...(IX1) == sizeof...(IX2) );\n\n   return make_arr_helper(std::array{IX1..., IX2...},\n                          std::make_index_sequence&lt;(sizeof...(IX1)&lt;&lt;1)&gt;{});\n }\n\nint main ()\n {\n   using i1 = std::index_sequence&lt;1, 3, 5, 7&gt;;\n   using i2 = std::index_sequence&lt;2, 4, 6, 8&gt;;\n\n   constexpr auto k = make_arr(i1{}, i2{});\n\n   for ( auto const &amp; i : k )\n      std::cout &lt;&lt; i &lt;&lt; ' ';\n\n   std::cout &lt;&lt; std::endl;\n }\n</code></pre>\n\n<p><strong>-- EDIT --</strong></p>\n\n<p>The OP asks</p>\n\n<blockquote>\n  <p>But what if you want to merge 3 of them? 4? Would shifts/modules work?</p>\n</blockquote>\n\n<p>Not shift (that in the 2 case is a simplification for multiplication and division by 2) but, using multiplication and division, works.</p>\n\n<p>The <code>make_arr_helper()</code>, for case 3, is simple</p>\n\n<pre><code>template &lt;typename T, std::size_t ... Is&gt;\nconstexpr auto make_arr_helper (T const &amp; arr0,\n                                std::index_sequence&lt;Is...&gt;)\n { \n   constexpr auto  DD3 = sizeof...(Is) / 3u;\n\n   return std::array{arr0[(Is/3u)+((Is%3) * DD3)]...};\n }\n</code></pre>\n\n<p>and passing the number of sequences as argument, can be easily generalized.</p>\n\n<p>The following is the full case 3 example</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T, std::size_t ... Is&gt;\nconstexpr auto make_arr_helper (T const &amp; arr0,\n                                std::index_sequence&lt;Is...&gt;)\n { \n   constexpr auto  DD3 = sizeof...(Is) / 3u;\n\n   return std::array{arr0[(Is/3u)+((Is%3) * DD3)]...};\n }\n\ntemplate &lt;std::size_t ... IX1, std::size_t ... IX2,\n          std::size_t ... IX3&gt;\nconstexpr auto make_arr (std::index_sequence&lt;IX1...&gt;,\n                         std::index_sequence&lt;IX2...&gt;,\n                         std::index_sequence&lt;IX3...&gt;)\n {\n   static_assert( sizeof...(IX1) == sizeof...(IX2) );\n   static_assert( sizeof...(IX1) == sizeof...(IX3) );\n\n   return make_arr_helper(std::array{IX1..., IX2..., IX3...},\n                          std::make_index_sequence&lt;(sizeof...(IX1)*3u)&gt;{});\n }\n\nint main ()\n {\n   using i1 = std::index_sequence&lt;1, 4, 7, 10&gt;;\n   using i2 = std::index_sequence&lt;2, 5, 8, 11&gt;;\n   using i3 = std::index_sequence&lt;3, 6, 9, 12&gt;;\n\n\n   constexpr auto k = make_arr(i1{}, i2{}, i3{});\n\n   for ( auto const &amp; i : k )\n      std::cout &lt;&lt; i &lt;&lt; ' ';\n\n   std::cout &lt;&lt; std::endl;\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "is_accepted": false, "score": 0, "last_activity_date": 1551916492, "creation_date": 1551916492, "answer_id": 55034017, "question_id": 55031712, "link": "https://stackoverflow.com/questions/55031712/how-to-create-an-array-from-two-index-sequence-at-compile-time/55034017#55034017", "title": "How to create an array from two index sequence at compile time", "body": "<p>This seems like an interesting challenge, but the purpose is not entirely clear to me. In particular, I do not understand what you mean by \"something else\" in your explanations:</p>\n\n<blockquote>\n  <p>Another potential solution [...] wouldn't work with some more\n  elaborate types, which are not default-constructible (obviously, they\n  wouldn't be part of index sequences, <strong>but they could be something\n  else</strong>).</p>\n</blockquote>\n\n<p>Can you give an example that demonstrates the requirements on the desired technique? If the requirement is \"no loops, no default construction\" then a solution may be <code>std::forward_as_tuple</code> followed by <code>std::tuple_cat</code> followed by \"detie into array\":</p>\n\n<pre><code>#include &lt;cstddef&gt;\n\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n\ntemplate&lt;std::size_t... gs, class T0, class... Ts&gt;\nconstexpr std::array&lt;std::decay_t&lt;T0&gt;, 1+sizeof...(Ts)&gt; detie_into_array(\n  std::index_sequence&lt;gs...&gt;,\n  const std::tuple&lt;T0&amp;&amp;, Ts&amp;&amp;...&gt;&amp; tuple// TODO: think about the type deduction\n) {\n  static_assert(\n    std::is_same&lt;\n      std::index_sequence&lt;gs...&gt;,\n      std::make_index_sequence&lt;1+sizeof...(Ts)&gt;\n    &gt;{}\n  );\n\n  static_assert(\n    std::conjunction&lt;\n      std::is_same&lt;std::decay_t&lt;T0&gt;, T0&gt;,\n      std::is_same&lt;std::decay_t&lt;T0&gt;, Ts&gt;...\n    &gt;{}\n  );\n\n  return {std::get&lt;gs&gt;(tuple)...};\n}\n\n\n\ntemplate&lt;int... is, int... js&gt;\nconstexpr auto make_array(\n  std::integer_sequence&lt;int, is...&gt;,\n  std::integer_sequence&lt;int, js...&gt;\n) {\n  static_assert(sizeof...(is) == sizeof...(js), \"How to interleave otherwise?\");\n\n  using GlobalSeq = std::make_index_sequence&lt;sizeof...(is) + sizeof...(js)&gt;;\n\n  return detie_into_array(\n    GlobalSeq{},\n    std::tuple_cat(\n      std::forward_as_tuple(is, js)...// TODO: think about the type deduction\n    )// NOTE: first idea was `std::tie`, but that is based on lvalue refs\n  );\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\ntemplate&lt;class T&gt;\nvoid inspect(const T&amp;) {\n  std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n}\n\nint main() {\n  using i1 = std::integer_sequence&lt;int, 1, 3, 5, 7&gt;;\n  using i2 = std::integer_sequence&lt;int, 2, 4, 6, 8&gt;;\n\n  auto arr = make_array(i1{}, i2{});\n\n  inspect(arr);\n  for(auto&amp;&amp; i : arr) {\n    std::cout &lt;&lt; i &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551983637, "post_id": 55035615, "comment_id": 96851162, "body": "Yeah, this is good as well. Head-tail solution not unlike the second one in my answer."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 3, "last_activity_date": 1551929488, "creation_date": 1551929488, "answer_id": 55035615, "question_id": 55031712, "link": "https://stackoverflow.com/questions/55031712/how-to-create-an-array-from-two-index-sequence-at-compile-time/55035615#55035615", "title": "How to create an array from two index sequence at compile time", "body": "<p>With some utilities to extract first number from <code>std::index_sequence</code>, you might do:</p>\n\n<pre><code>template &lt;typename Seq&gt; struct pop_front;\ntemplate &lt;typename Seq&gt; using pop_front_t = typename pop_front&lt;Seq&gt;::type;\ntemplate &lt;std::size_t I, std::size_t ... Is&gt; struct pop_front&lt;std::index_sequence&lt;I, Is...&gt;&gt;\n{\n    using type = std::index_sequence&lt;Is...&gt;;\n};\n\ntemplate &lt;std::size_t I, std::size_t ... Is&gt;\nconstexpr std::size_t get_front(std::index_sequence&lt;I, Is...&gt;) { return I; }\n\ntemplate &lt;std::size_t ... Res, typename ... Seqs&gt;\nauto make_interleaved_seq(std::index_sequence&lt;Res...&gt;, Seqs...)\n{\n    if constexpr (((Seqs::size() == 0) &amp;&amp; ...)) {\n        return std::index_sequence&lt;Res...&gt;{};\n    } else {\n        static_assert(((Seqs::size() != 0) &amp;&amp; ...), \"Sequences don't have the same size\");\n        return make_interleaved_seq(std::index_sequence&lt;Res..., get_front(Seqs{})...&gt;{},\n                                    pop_front_t&lt;Seqs&gt;{}...);\n    }\n}\n\ntemplate &lt;std::size_t ... Is&gt;\nconstexpr std::array&lt;std::size_t, sizeof...(Is)&gt; make_array(std::index_sequence&lt;Is...&gt;)\n{\n    return {{Is...}};\n}\n\ntemplate &lt;typename ... Seqs&gt;\nauto make_interleaved_array(Seqs... seqs)\n{\n    return make_array(make_interleaved_seq(std::index_sequence&lt;&gt;{}, seqs...));\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/eb077c935ee03906\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1551959111, "post_id": 55040981, "comment_id": 96836737, "body": "the question was just to interleave the sequences, not merge them, but I agree that constexpr is much more manageable than template metaprograming"}, {"owner": {"reputation": 766, "user_id": 10532253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7970ca81beac26fc5094dbbcd1d618b?s=128&d=identicon&r=PG&f=1", "display_name": "Handy999", "link": "https://stackoverflow.com/users/10532253/handy999"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1551959313, "post_id": 55040981, "comment_id": 96836854, "body": "Okey, this is possible the same way. The question was rather unclear on that."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551963985, "post_id": 55040981, "comment_id": 96839622, "body": "This answer fails to take into account the limitations mentioned in the question - type might not be default constructible."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551968027, "post_id": 55040981, "comment_id": 96842082, "body": "@Handy999 also requires assignable."}, {"owner": {"reputation": 766, "user_id": 10532253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7970ca81beac26fc5094dbbcd1d618b?s=128&d=identicon&r=PG&f=1", "display_name": "Handy999", "link": "https://stackoverflow.com/users/10532253/handy999"}, "edited": false, "score": 0, "creation_date": 1551975880, "post_id": 55040981, "comment_id": 96847114, "body": "You have not asked for types that are not copy-assignable."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551983568, "post_id": 55040981, "comment_id": 96851134, "body": "@Handy999 I did not, but I see this as a drawback of your solution. Other solutions presented here do not require this."}], "tags": [], "owner": {"reputation": 766, "user_id": 10532253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7970ca81beac26fc5094dbbcd1d618b?s=128&d=identicon&r=PG&f=1", "display_name": "Handy999", "link": "https://stackoverflow.com/users/10532253/handy999"}, "is_accepted": false, "score": 0, "last_activity_date": 1551959644, "last_edit_date": 1551959644, "creation_date": 1551953010, "answer_id": 55040981, "question_id": 55031712, "link": "https://stackoverflow.com/questions/55031712/how-to-create-an-array-from-two-index-sequence-at-compile-time/55040981#55040981", "title": "How to create an array from two index sequence at compile time", "body": "<p>In modern C++, I would always prefer constexpr normal-programming instead of template meta-programming.</p>\n\n<p>Unfortunately, the C++ algorithms are not yet <code>constexpr</code>. So, we have to reimplement them:</p>\n\n<pre><code>#include&lt;array&gt;\n#include&lt;utility&gt;\n#include&lt;algorithm&gt;\n\ntemplate&lt;std::size_t... Ix1, std::size_t... Ix2&gt;\nconstexpr auto make_array(std::index_sequence&lt;Ix1...&gt;,std::index_sequence&lt;Ix2...&gt;)\n{\n    const auto a1 = std::array{Ix1...};\n    const auto a2 = std::array{Ix2...};\n    constexpr std::size_t N1 = a1.size();\n    constexpr std::size_t N2 = a2.size();\n\n    std::array&lt;std::size_t,N1+N2&gt; result{};   // (a)\n    // std::merge(a1.begin(), a1.end(), a2.begin(), a2.end(), result.begin());\n    // (b)\n    std::size_t i=0, j=0, k=0;\n    while (k&lt;N1+N2)\n    {\n        if(i&lt;N1 &amp;&amp; (j==N2||a1[i] &lt; a2[j]))\n            { result[k] = a1[i]; ++k; ++i; }\n        else\n            { result[k] = a2[j]; ++k; ++j; }\n    }\n    // end of (b)\n    return result;\n}\n\nusing i1 = std::index_sequence&lt;1, 3, 5, 7&gt;; \nusing i2 = std::index_sequence&lt;2, 4, 6, 8&gt;;\n\n\nint main() {\n    constexpr auto a = make_array(i1{},i2{});\n    // ...\n}\n</code></pre>\n\n<p>If <code>std::merge</code> was <code>constexpr</code>, the function <code>join_arr</code> was a 5-liner.</p>\n\n<p>If you do not know that <code>i1</code> and <code>i2</code> are sorted, you need to implement your own <code>constexpr</code> version of <code>std::sort</code>.</p>\n\n<p>If you want to combine the index sequences just alternating, you can do it analogously using</p>\n\n<pre><code>    if (N1!=N2) throw std::logic_error(\"The index sequences need to have the same length.\");\n    for (std::size_t i=0; i&lt;N1; ++i)\n    {\n        result[2*i  ] = a1[i];\n        result[2*i+1] = a2[i];\n    }\n</code></pre>\n\n<p>instead of (b). The <code>throw</code> statement is no problem as long as you do not actually throw. (So, the exception is translated to a compile-time error. This is exactly what you want.)</p>\n\n<p>Finally, if the type is not default constructibe, you can write</p>\n\n<pre><code>std::array&lt;T,N1+N2&gt; result{a1[0]};\n</code></pre>\n\n<p>instead of (a), i.e., you fill your results with some random instance. This only requires copy constructible (which all the presented solutions require).</p>\n"}], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 1, "answer_count": 5, "score": 6, "last_activity_date": 1551959644, "creation_date": 1551904344, "last_edit_date": 1551908898, "question_id": 55031712, "link": "https://stackoverflow.com/questions/55031712/how-to-create-an-array-from-two-index-sequence-at-compile-time", "title": "How to create an array from two index sequence at compile time", "body": "<p>(<strong>Spoiler</strong> - this is a self-answered question)\nLet's pretend I have two index sequences, for example <code>using i1 = std::index_sequence&lt;1, 3, 5, 7&gt;;</code> and <code>using i2 = std::index_sequence&lt;2, 4, 6, 8&gt;;</code></p>\n\n<p>I want to make an array (at <strong>compile</strong> time) which would have 8 elements in it in sequence: <code>1, 2, 3, 4, 5, 6, 7, 8</code>, so that following code would work (say, at global scope):</p>\n\n<pre><code>std::array&lt;int, 8&gt; arr = make_array(i1{}, i2{});\n</code></pre>\n\n<p>Note: if I just want one sequence, the solution is straightforward:</p>\n\n<pre><code>template&lt;size_t... Ix&gt;\nconstexpr auto make_arr(std::index_sequence&lt;Ix...&gt; )\n    return std::array{Ix...};\n}\n</code></pre>\n\n<p>But it is not that trivial if I need to join two sequences, for example, this doesn't work:</p>\n\n<pre><code>template&lt;size_t... Ix1, size_t... Ix2&gt;\nconstexpr auto make_arr(std::index_sequence&lt;Ix1...&gt;, std::index_sequence&lt;Ix2...&gt;)\n    return std::array{(Ix1, Ix2)...};\n}\n</code></pre>\n\n<p>(Above code will just populate array with values from second sequence). </p>\n\n<p>Another potential solution would be to use <code>constexpr</code> function which would first define an array with default values, and than copy values from index sequences into it, but while that work with ints, that wouldn't work with some more elaborate types, which are not default-constructible (obviously, they wouldn't be part of index sequences, but they could be something else).</p>\n\n<p>Is there any solution which would not require looping and default-constructing values? Any available C++ standard is fair game.</p>\n"}, {"tags": ["c++", "windows", "multithreading", "visual-studio"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551904232, "post_id": 55031669, "comment_id": 96815944, "body": "If your thread is frequently preempted to the point that it interferes with it&#39;s functionality, preventing the start of new tasks may be desirable."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1551904324, "post_id": 55031669, "comment_id": 96815987, "body": "<a href=\"https://en.cppreference.com/w/cpp/thread\" rel=\"nofollow noreferrer\">These</a> are all of the standard threading functionalities. There doesn&#39;t seem to be a way of adjusting priority. You&#39;ll have to rely on your platform&#39;s API."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1551904451, "post_id": 55031669, "comment_id": 96816043, "body": "For setting thread priority, on Windows, this might be related: <a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/bf325bd2-f52b-484f-ba40-75d50e26bfc2/how-to-set-thread-priorty-using-new-stdthread?forum=vcgeneral\" rel=\"nofollow noreferrer\">social.msdn.microsoft.com/Forums/vstudio/en-US/&hellip;</a>"}, {"owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551904948, "post_id": 55031669, "comment_id": 96816253, "body": "@Fran&#231;oisAndrieux - Ah, I put <code>yield()</code> in some key spots and it had a very positive effect, there&#39;s now nearly no preemption to speak of."}, {"owner": {"reputation": 1069, "user_id": 6002613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zXlVLOKMF2E/AAAAAAAAAAI/AAAAAAAAAAA/IsGXYuxy-VE/photo.jpg?sz=128", "display_name": "Soulimane Mammar", "link": "https://stackoverflow.com/users/6002613/soulimane-mammar"}, "edited": false, "score": 0, "creation_date": 1551906728, "post_id": 55031669, "comment_id": 96816994, "body": "How do you know that your main thread is preempted frequently ?"}, {"owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "reply_to_user": {"reputation": 1069, "user_id": 6002613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zXlVLOKMF2E/AAAAAAAAAAI/AAAAAAAAAAA/IsGXYuxy-VE/photo.jpg?sz=128", "display_name": "Soulimane Mammar", "link": "https://stackoverflow.com/users/6002613/soulimane-mammar"}, "edited": false, "score": 0, "creation_date": 1551907625, "post_id": 55031669, "comment_id": 96817355, "body": "@SoulimaneMammar - visual studio has a thread visualization that measures preemption and synchronization"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1551906479, "creation_date": 1551906479, "answer_id": 55032155, "question_id": 55031669, "link": "https://stackoverflow.com/questions/55031669/windows-c-prioritizing-threads-to-prevent-main-thread-being-preempted/55032155#55032155", "title": "Windows C++: Prioritizing threads to prevent main thread being preempted", "body": "<p>Have a look at the <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/nf-processthreadsapi-setthreadpriority\" rel=\"nofollow noreferrer\"><code>SetThreadPriority()</code></a> function in the Win32 API.</p>\n"}], "owner": {"reputation": 10784, "user_id": 620863, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-Mqgo9PO_taA/AAAAAAAAAAI/AAAAAAAAABM/8h3wY8pcFbg/photo.jpg?sz=128", "display_name": "Anne Quinn", "link": "https://stackoverflow.com/users/620863/anne-quinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 55032155, "answer_count": 1, "score": 0, "last_activity_date": 1551906479, "creation_date": 1551904150, "question_id": 55031669, "link": "https://stackoverflow.com/questions/55031669/windows-c-prioritizing-threads-to-prevent-main-thread-being-preempted", "title": "Windows C++: Prioritizing threads to prevent main thread being preempted", "body": "<p>Is there a way to communicate to Window's task scheduler that my worker threads are less urgent than my main thread, so that it might choose to interrupt them first?  I am running into some trouble with my main thread getting preempted frequently, which slows it's ability to delegate tasks out to other threads.</p>\n"}, {"tags": ["c++", "linked-list", "quicksort"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 0, "creation_date": 1551903573, "post_id": 55031483, "comment_id": 96815661, "body": "<code>*temps= *templ = NULL;</code>  --&gt; I&#39;m confused.  What is this line supposed to do?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1551903627, "post_id": 55031483, "comment_id": 96815689, "body": "What is <code>ListP</code>? Also I don&#39;t see a way that <code>templ</code> will ever be anything other than <code>NULL</code>. It starts as <code>NULL</code> and the only time you assign to it is when you give it the value of <code>Larger</code>, but that only happens if <code>Larger</code> is <code>NULL</code>!"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1551903747, "post_id": 55031483, "comment_id": 96815739, "body": "<i>&quot;the item after the last item&quot;</i> there can be, by definition, no such item. Otherwise what you considered to be the last item would not have been the last item."}, {"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1551904065, "post_id": 55031483, "comment_id": 96815876, "body": "@scohe001 -- <code>*templ</code> is assigned to <code>NULL</code> which is likely already a bug. <code>templ</code> is uninitialized (until later).  We don&#39;t know the value of <code>Larger</code> as passed by the caller."}, {"owner": {"reputation": 1619, "user_id": 7864413, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208517922736756/picture?type=large", "display_name": "Phil M", "link": "https://stackoverflow.com/users/7864413/phil-m"}, "edited": false, "score": 0, "creation_date": 1551904381, "post_id": 55031483, "comment_id": 96816012, "body": "This isn&#39;t a standard C++ <code>list</code> class, so your best bet would to be ask the author, although I suspect that any sensible linked list would set <code>last-&gt;next</code> as <code>nullptr</code>."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1551904498, "post_id": 55031483, "comment_id": 96816065, "body": "Why do you need 8 pointers to do this function?"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 1, "last_activity_date": 1551904672, "creation_date": 1551904672, "answer_id": 55031768, "question_id": 55031483, "link": "https://stackoverflow.com/questions/55031483/does-the-item-after-the-last-item-in-a-linked-list-have-the-value-of-0/55031768#55031768", "title": "Does the item after the last item in a linked list have the value of 0?", "body": "<blockquote>\n  <p>Does the item after the last item in a linked list have the value of 0?</p>\n</blockquote>\n\n<p>By definition, there is no item after the last item. If there was an item after the last item, then the one before would not be the last.</p>\n\n<blockquote>\n  <p>I was wondering if my loop will stop too early.\n   Will the while loop go past the last element</p>\n</blockquote>\n\n<p>At a quick glance, all branches of the loop do <code>curr=curr-&gt;next</code>, and the loop end condition is <code>curr!=NULL</code>, so the loop will end after a node whose <code>next</code> is null. If <code>next</code> of the last node of your list points to null, then the loop shouln't go past it. <code>next</code> of a node before the last item cannot point to null, so the loop shouldn't end too early either.</p>\n\n<p>However, if <code>next</code> of the last item of the list doesn't point to null, then the loop won't end on that node.</p>\n\n<p>You should verify that the program behaves the way you expect it to behave by using a debugger.</p>\n"}], "owner": {"reputation": 81, "user_id": 5026291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252e8107ffc72917036fb04137881530?s=128&d=identicon&r=PG&f=1", "display_name": "ccramer", "link": "https://stackoverflow.com/users/5026291/ccramer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 55031768, "answer_count": 1, "score": -1, "last_activity_date": 1551904672, "creation_date": 1551903279, "last_edit_date": 1551903673, "question_id": 55031483, "link": "https://stackoverflow.com/questions/55031483/does-the-item-after-the-last-item-in-a-linked-list-have-the-value-of-0", "title": "Does the item after the last item in a linked list have the value of 0?", "body": "<p>I am writing a quick sort algorithm for homework but I was wondering if my loop will stop too early. Will the while loop go past the last element and stop or will it keep reading random numbers that were left over in the memory? Does that make sense?</p>\n\n<pre><code>void ListP::partition(ListNode * &amp;Larger, ListNode * &amp;Smaller, ListNode * &amp;pivot ){\n    ListNode *curr, *temps, *templ; *temps= *templ = NULL;\n    curr=pivot-&gt;next;\n    pivot-&gt;next=NUll;\n    while(curr!=NULL){\n        if (curr-&gt;item&lt;=pivot-&gt;item){\n            if(Smaller==NULL){\n                Smaller=curr;\n                curr=curr-&gt;next;\n                Smaller-&gt;next=NULL;\n                temps=Smaller;\n            }\n            else{\n                temps-&gt;next=curr;\n                curr=curr-&gt;next;\n                temps=temps-&gt;next;\n                temps-&gt;next=NUll;\n            }\n        }\n        else{\n            if(Larger==NULL){\n                Larger=curr;\n                curr=curr-&gt;next;\n                Larger-&gt;next=NULL;\n                templ=Larger;\n            }\n            else{\n                templ-&gt;next=curr;\n                curr=curr-&gt;next;\n                templ=templ-&gt;next;\n                templ-&gt;next=NUll;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "declaration", "definition", "virtual-functions", "pure-virtual"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1551903064, "post_id": 55031385, "comment_id": 96815442, "body": "@Yunnosch A &quot;pure virtual function&quot; is definitely a thing in C++ - there is no such thing as an &quot;abstract function&quot;. There is such a thing as an &quot;abstract class&quot;."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1551903202, "post_id": 55031385, "comment_id": 96815504, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2089083/pure-virtual-function-with-implementation\">pure virtual function with implementation</a>"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1551903223, "post_id": 55031385, "comment_id": 96815517, "body": "@Neil I researched a little. You seem to be right about &quot;pure virtual functions&quot; being a clearly understood term. Thanks. However, my &quot;abstract functions&quot; can also be found - admittedly less often. Still, thanks for correcting me."}, {"owner": {"reputation": 917, "user_id": 3882565, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/60a6de623a7590ebbc824e228562b045?s=128&d=identicon&r=PG&f=1", "display_name": "stonar96", "link": "https://stackoverflow.com/users/3882565/stonar96"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1551903265, "post_id": 55031385, "comment_id": 96815529, "body": "@UnholySheep did you even read the question?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551903304, "post_id": 55031385, "comment_id": 96815549, "body": "@stonar96 The duplicate indicates that you can provide a definition for an pure virtual function, which implies that it would otherwise not have one. It&#39;s not a duplicate but it is related."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1551903381, "post_id": 55031385, "comment_id": 96815580, "body": "&quot;A pure virtual function doesn&#39;t have a function body&quot; but it can."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1551904886, "post_id": 55031385, "comment_id": 96816227, "body": "@Yunnosch -- the C++ standard defines and uses the terms &quot;pure virtual function&quot; and &quot;abstract class&quot;. It does not use the term &quot;abstract function&quot;."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1552214395, "post_id": 55031385, "comment_id": 96918599, "body": "Do you need an answer with just an explanation, or an answer with a definitive quote from the std?"}, {"owner": {"reputation": 917, "user_id": 3882565, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/60a6de623a7590ebbc824e228562b045?s=128&d=identicon&r=PG&f=1", "display_name": "stonar96", "link": "https://stackoverflow.com/users/3882565/stonar96"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1552303293, "post_id": 55031385, "comment_id": 96944320, "body": "@curiousguy I don&#39;t need a quote but if it&#39;s possible it would be nice of course."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1551903515, "post_id": 55031517, "comment_id": 96815638, "body": "Maybe I missed it, but I don&#39;t see where this answers whether or not a pure virtual function declaration is also a definition for that function or not."}, {"owner": {"reputation": 461, "user_id": 2760267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be631e7cf9b1178d71e69ba0ebef82c8?s=128&d=identicon&r=PG&f=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/2760267/destructor"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551903599, "post_id": 55031517, "comment_id": 96815676, "body": "Let me add that as well :) THanks"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 5, "creation_date": 1551903987, "post_id": 55031517, "comment_id": 96815841, "body": "&quot;<i>And does not need a definition</i>&quot; - it does not NEED a definition in the declaring class, but it CAN HAVE a definition, if the class wants to provide a default implementation. A derived class MUST override a pure virtual function, but it can call the base&#39;s implementation if one is provided."}, {"owner": {"reputation": 2063, "user_id": 1754322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0a8d179064829f570635b9fd4712a812?s=128&d=identicon&r=PG", "display_name": "tuket", "link": "https://stackoverflow.com/users/1754322/tuket"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551904254, "post_id": 55031517, "comment_id": 96815954, "body": "@RemyLebeau What is the syntax for implementing a pure virtual function then?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2063, "user_id": 1754322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0a8d179064829f570635b9fd4712a812?s=128&d=identicon&r=PG", "display_name": "tuket", "link": "https://stackoverflow.com/users/1754322/tuket"}, "edited": false, "score": 1, "creation_date": 1551904331, "post_id": 55031517, "comment_id": 96815990, "body": "@tuket The same as with any other class method, the ONLY difference is the added <code>= 0</code> on the declaration."}, {"owner": {"reputation": 2063, "user_id": 1754322, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0a8d179064829f570635b9fd4712a812?s=128&d=identicon&r=PG", "display_name": "tuket", "link": "https://stackoverflow.com/users/1754322/tuket"}, "edited": false, "score": 0, "creation_date": 1551905528, "post_id": 55031517, "comment_id": 96816483, "body": "Indeed, it seems to work. You need to define the function out of the class declaration though. <code>virtual f() = 0 {&#47;*stuff*&#47;}</code> or <code>virtual f() {&#47;*stuff*&#47;} = 0</code> are invalid."}], "tags": [], "owner": {"reputation": 461, "user_id": 2760267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be631e7cf9b1178d71e69ba0ebef82c8?s=128&d=identicon&r=PG&f=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/2760267/destructor"}, "is_accepted": false, "score": -1, "last_activity_date": 1551904226, "last_edit_date": 1551904226, "creation_date": 1551903458, "answer_id": 55031517, "question_id": 55031385, "link": "https://stackoverflow.com/questions/55031385/c-is-a-pure-virtual-function-also-a-definition-or-only-a-declaration/55031517#55031517", "title": "C++ Is a pure virtual function also a definition or only a declaration?", "body": "<blockquote>\n  <p>A vitual function is function which is an inheritable and overridable\n  function which will support dynamic dispatch. Ideally this is what we\n  call runtime polymorphism. In a nutshell, the virtual function\n  provides a target function to be executed, which we have no idea at\n  the compile time. Suppose you extend a class having a virtual\n  function, you get the ability to use polymorphism to execute the\n  function in the derrived class, using a base class pointer.</p>\n</blockquote>\n\n<p>More read on <a href=\"https://www.geeksforgeeks.org/virtual-functions-and-runtime-polymorphism-in-c-set-1-introduction/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/virtual-functions-and-runtime-polymorphism-in-c-set-1-introduction/</a></p>\n\n<blockquote>\n  <p>A pure virtual function or pure virtual method is a virtual function\n  that is required to be implemented by a derived class if the derived\n  class is not abstract.</p>\n</blockquote>\n\n<p>A point to note is, if you have a pure virtual function in a class, you cannot instantiate it as an object.</p>\n\n<p>look at the following example </p>\n\n<pre><code>class Base {\npublic:\n    virtual string getType() = 0;\n}\n\nclass Derived : public base {\npublic:\n    string getType();\n}\n\nstring\nderived::getType() {\n    //do necessary stuff &lt;------------------ (1)\n}\n\nBase* myBase = new Derived(); // OK\nmyBase-&gt;getType() //this will call the logic at (1).That's in the derived class but not base\n\nBase* myBase2 = new Base();//Error\n</code></pre>\n\n<p>And for your question, <strong>pure virtual function is a declaration.</strong> And does not need a definition. </p>\n\n<p>*EDIT You can provide a default implementation but you have to override in the derived classes of this base class with pure virtual function *</p>\n"}], "owner": {"reputation": 917, "user_id": 3882565, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/60a6de623a7590ebbc824e228562b045?s=128&d=identicon&r=PG&f=1", "display_name": "stonar96", "link": "https://stackoverflow.com/users/3882565/stonar96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1551904226, "creation_date": 1551902923, "last_edit_date": 1551903919, "question_id": 55031385, "link": "https://stackoverflow.com/questions/55031385/c-is-a-pure-virtual-function-also-a-definition-or-only-a-declaration", "title": "C++ Is a pure virtual function also a definition or only a declaration?", "body": "<p>In a C++ programming course I have learned about the difference between definition and declaration. A function without a function body is a declaration and a function with a function body is a definition. Later I have learned about pure virtual functions. A pure virtual function doesn't have a function body but it is \"initialized\" with <code>= 0;</code>. Does that mean that a pure virtual function is a definition or is it considered as declaration only?</p>\n\n<p>Edit: I don't think this is a duplicate of <a href=\"https://stackoverflow.com/questions/2089083\">pure virtual function with implementation</a> because the question \"Does that mean that a pure virtual function is a definition or is it considered as declaration only?\" is not answered.</p>\n"}, {"tags": ["c++", "member-access"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1551902659, "post_id": 55031297, "comment_id": 96815218, "body": "This has nothing to do with <code>operator-&gt;</code>. Its just that you are assigning to the result of a <code>void</code> function and to a <code>const int</code>. You would get the same thing if you changed <code>pf-&gt;</code> for <code>f.</code> everywhere."}, {"owner": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "edited": false, "score": 0, "creation_date": 1551902699, "post_id": 55031297, "comment_id": 96815236, "body": "Thats happens because your <code>bar()</code> is a function and your <code>y_</code> is a const, you cannot change that values."}, {"owner": {"reputation": 381, "user_id": 11002652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc31019365b191e1865f1fad08db53d?s=128&d=identicon&r=PG&f=1", "display_name": "AdamMenz", "link": "https://stackoverflow.com/users/11002652/adammenz"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551902746, "post_id": 55031297, "comment_id": 96815267, "body": "@Fran&#231;oisAndrieux: What does it mean &quot;arrow operator always returns an lvalue&quot; ? or this is a mistake in the book?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551902811, "post_id": 55031297, "comment_id": 96815303, "body": "@AdamMenz It means just what it says. That <code>operator-&gt;</code> always returns an <a href=\"https://en.cppreference.com/w/cpp/language/value_category#lvalue\" rel=\"nofollow noreferrer\">lvalue</a>. Edit : Though how old is that quote? I&#39;m not sure if that&#39;s true."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1551903126, "post_id": 55031297, "comment_id": 96815472, "body": "<code>pf-&gt;bar</code> evaluates to the address of the function <code>bar</code>. <code>pf-&gt;bar()</code> evaluates to the return type of the function <code>bar</code>, which is this case is <code>void</code>. You can&#39;t assign a value of 75 to that, sorry. But if the function had returned a reference to a modifiable integer, for example, then <code>(pf-&gt;bar()) = 75;</code> would have compiled (with or without the additional parentheses)."}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1551903442, "post_id": 55031297, "comment_id": 96815600, "body": "What&#39;s with all those parentheses? <code>(pf-&gt;bar()) = 75</code>, <code>(f.bar()) = 12</code>, <code>(f.x_) = 23</code> etc. They are completely unnecessary, and will drive your colleagues mad. And if your intention is to drive your colleagues mad, why not go the whole hog? <code>(pf-&gt;bar()) = (75)</code>, <code>(f.bar()) = (12)</code>, <code>(f.x_) = (23)</code>..."}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 11002652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc31019365b191e1865f1fad08db53d?s=128&d=identicon&r=PG&f=1", "display_name": "AdamMenz", "link": "https://stackoverflow.com/users/11002652/adammenz"}, "edited": false, "score": 0, "creation_date": 1551904381, "post_id": 55031455, "comment_id": 96816013, "body": "Thank you very much. That is really so clear and instructive. In fact I know I can&#39;t assign to an rvalue fro example from a function returns by value. But now you made things so clear and I understood the paragraph in the book. Thank you again."}, {"owner": {"reputation": 381, "user_id": 11002652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc31019365b191e1865f1fad08db53d?s=128&d=identicon&r=PG&f=1", "display_name": "AdamMenz", "link": "https://stackoverflow.com/users/11002652/adammenz"}, "edited": false, "score": 1, "creation_date": 1551906155, "post_id": 55031455, "comment_id": 96816749, "body": "So as in your example <code>foo{}.x_ = 10;</code> is incorrect because the dot operator here returns rvalue because the object on which it is called is an rvalue not lvalue. But <code>f.x_ = 2;</code> is correct becuase <code>f</code> is an lvalue and <code>x_</code> . is also a modifiable lvalue thus the assignment succeeds."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 381, "user_id": 11002652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc31019365b191e1865f1fad08db53d?s=128&d=identicon&r=PG&f=1", "display_name": "AdamMenz", "link": "https://stackoverflow.com/users/11002652/adammenz"}, "edited": false, "score": 1, "creation_date": 1551906542, "post_id": 55031455, "comment_id": 96816911, "body": "@AdamMenz Correct."}, {"owner": {"reputation": 381, "user_id": 11002652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc31019365b191e1865f1fad08db53d?s=128&d=identicon&r=PG&f=1", "display_name": "AdamMenz", "link": "https://stackoverflow.com/users/11002652/adammenz"}, "edited": false, "score": 0, "creation_date": 1551906835, "post_id": 55031455, "comment_id": 96817047, "body": "Thanks for your time and elaboration and being such constructive person."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1551903191, "creation_date": 1551903191, "answer_id": 55031455, "question_id": 55031297, "link": "https://stackoverflow.com/questions/55031297/can-i-assign-to-the-return-value-of-member-access-operator/55031455#55031455", "title": "Can I assign to the return value of member access operator?", "body": "<blockquote>\n  <p>Above it is said that -> always returns an lvalue but it fails if I try to assign to that value.</p>\n</blockquote>\n\n<p>This is about member variables, not functions.  <code>bar</code> returns <code>void</code> so you can never assign to it.  <code>x_</code> works since it gives you an integer lvalue expression.  <code>y_</code> fails because it is <code>const</code>, and you can't assign to a <code>const</code> variable.</p>\n\n<p>So, in</p>\n\n<pre><code>foo bar;\nfoo* f = &amp;bar;\nf-&gt;x_;\nf-&gt;y_;\n</code></pre>\n\n<p>both member accesses yield an lvalue expression.  In</p>\n\n<pre><code>foo f;\nf.x_;\nf.y_;\n</code></pre>\n\n<p>you again have lvalues since <code>f</code> is an lvalue.  However, in</p>\n\n<pre><code>foo{}.x_;\nfoo{}.y_;\n</code></pre>\n\n<p>both member accesses are rvalues since <code>foo{}</code> is an rvalue.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1551903193, "creation_date": 1551903193, "answer_id": 55031456, "question_id": 55031297, "link": "https://stackoverflow.com/questions/55031297/can-i-assign-to-the-return-value-of-member-access-operator/55031456#55031456", "title": "Can I assign to the return value of member access operator?", "body": "<blockquote>\n  <p>Can I assign to the return value of member access operator?</p>\n</blockquote>\n\n<p>If the left hand operand of the operator is an lvalue, and if the member is assignable and non-const, then yes. In other cases, no.</p>\n\n<blockquote>\n<pre><code>(pf-&gt;bar()) = 75; // error\n</code></pre>\n</blockquote>\n\n<p>You are not assigning to the result of the member access operator. You are invoking a member function. The result is whatever the function returns. The function returns <code>void</code>, which is not assignable.</p>\n\n<blockquote>\n<pre><code> (pf-&gt;y_) = 34;// error\n</code></pre>\n</blockquote>\n\n<p>You're attempting to assign a const object. That is ill-formed even if the expression is an lvalue.</p>\n"}], "owner": {"reputation": 381, "user_id": 11002652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddc31019365b191e1865f1fad08db53d?s=128&d=identicon&r=PG&f=1", "display_name": "AdamMenz", "link": "https://stackoverflow.com/users/11002652/adammenz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 4, "accepted_answer_id": 55031455, "answer_count": 2, "score": -2, "last_activity_date": 1551903193, "creation_date": 1551902496, "last_edit_date": 1551902589, "question_id": 55031297, "link": "https://stackoverflow.com/questions/55031297/can-i-assign-to-the-return-value-of-member-access-operator", "title": "Can I assign to the return value of member access operator?", "body": "<p>I've read that the Member Access Operators dot operator <code>.</code> and arrow operator <code>-&gt;</code> return values:</p>\n\n<blockquote>\n  <p>The arrow operator requires a pointer operand and yields an lvalue. The dot operator yields an lvalue if the object from which the member is fetched is an lvalue; otherwise the result is an rvalue.</p>\n</blockquote>\n\n<p>This is from C++ Primer 5 edition.</p>\n\n<p>So I imagine I can assign a value whenever a non-const lvalue is the return of their expression e.g:</p>\n\n<pre><code>struct foo {\n    int x_;\n    const int y_ = 17; ;\n    void bar() { cout &lt;&lt; \"bar()\" &lt;&lt; endl;}\n}f, *pf;\n\npf = &amp;f;\n\n(pf-&gt;bar()) = 75; // error\ncout &lt;&lt; f.x_ &lt;&lt; endl;\n(f.bar()) = 12;// error\n(f.x_) = 23;\ncout &lt;&lt; \"f_x: \" &lt;&lt; f.x_ &lt;&lt; endl;\n(pf-&gt;y_) = 34;// error\n</code></pre>\n\n<p>I am confused about assigning to the return value of arrow operator. Above it is said that <code>-&gt;</code> always returns an lvalue but it fails if I try to assign to that value.</p>\n\n<ul>\n<li>Can anyone explain to me the paragraph above from the C++ book. Thank you.</li>\n</ul>\n"}, {"tags": ["c++", "input"], "comments": [{"owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "edited": false, "score": 2, "creation_date": 1551902337, "post_id": 55031228, "comment_id": 96815051, "body": "The trick is to avoid emitting the linefeed when printing the prompt. It has nothing to do with the getline call. Please show your code that makes the prompt."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1551902353, "post_id": 55031228, "comment_id": 96815065, "body": "Can you show the code that causes that effect? I am not sure what you are saying."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1551902365, "post_id": 55031228, "comment_id": 96815070, "body": "&quot;<i>However, when doing this, it starts reading text on the next line.</i>&quot; Makes little sense. Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, that illustrates the problem."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1551902636, "post_id": 55031228, "comment_id": 96815207, "body": "Unless you press return before typing in a name I don&#39;t see anything in that code that will move what you type onto the next line. I am still not sure what is supposed to be happening here tbh."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1551902844, "post_id": 55031228, "comment_id": 96815325, "body": "Given the code sample, I fail to reproduce the output you claim to be receiving. Are you certain, that this is the code, that you are trying to reproduce the issue with?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1551914433, "post_id": 55031228, "comment_id": 96819976, "body": "Unable to reproduce on Linux."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551917986, "post_id": 55031228, "comment_id": 96820882, "body": "&quot;<i>since <code>cin</code> by default breaks at whitespace</i>&quot; - it is not <code>cin</code> itself that does that, it is <code>operator&gt;&gt;</code> instead that does."}], "answers": [{"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1551902447, "creation_date": 1551902447, "answer_id": 55031287, "question_id": 55031228, "link": "https://stackoverflow.com/questions/55031228/how-to-read-all-of-the-text-on-a-line-starting-on-that-line/55031287#55031287", "title": "How to read all of the text on a line starting on that line?", "body": "<p>Without a Minimal, Complete, Verifiable Example, it is difficult to diagnose the issue you're having. However, I am able to produce code that reads a line of input from the user without breaking the previous \"Enter your name>\" line:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string str;\n    std::cout &lt;&lt; \"Please enter your full name &gt; \";\n    std::getline(std::cin, str);\n    std::cout &lt;&lt; \"Hello \" &lt;&lt; str &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>If you've gotten into the habit of appending all <code>std::cout</code> lines with <code>std::endl</code>, you may have neglected to omit it that time.</p>\n"}], "owner": {"reputation": 1, "user_id": 11161867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b7c0a5155a821efafd120d98976e442?s=128&d=identicon&r=PG&f=1", "display_name": "Luther", "link": "https://stackoverflow.com/users/11161867/luther"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1551902447, "creation_date": 1551902137, "last_edit_date": 1551902440, "question_id": 55031228, "link": "https://stackoverflow.com/questions/55031228/how-to-read-all-of-the-text-on-a-line-starting-on-that-line", "title": "How to read all of the text on a line starting on that line?", "body": "<p>I am trying to read someone's full name in C++, and obviously that would have spaces (like \"John Doe\"). The easiest way I can do this (since <code>cin</code> by default breaks at whitespace) is with <code>getline(cin, str)</code> where \"str\" is the variable.</p>\n\n<p>However, when doing this, it starts reading text on the next line. Instead of this:</p>\n\n<blockquote>\n  <p>Please enter your full name > John Doe</p>\n</blockquote>\n\n<p>You get</p>\n\n<blockquote>\n  <p>Please enter your full name ></p>\n  \n  <p>John Doe</p>\n</blockquote>\n\n<p>Here's the code that produces the result:</p>\n\n<pre><code>string fullName;\ncout &lt;&lt; \"Please enter your full name &gt;\";\ngetline(cin, fullName);\n</code></pre>\n\n<p>Is there any way I can read the full line and still keep it on the same line?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1551902154, "post_id": 55031203, "comment_id": 96814922, "body": "<code>getInput</code> has 1 argument (<code>username</code>) but you gave 0 arguments when calling it (<code>getInput();</code>)."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1551902161, "post_id": 55031203, "comment_id": 96814927, "body": "What&#39;s unclear about the error message? You declared the function as <code>void getInput(string username)</code> (i.e. taking a <code>string</code> as an argument), but are trying to call it as <code>getInput();</code> (i.e. taking no arguments)."}, {"owner": {"reputation": 461, "user_id": 2760267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be631e7cf9b1178d71e69ba0ebef82c8?s=128&d=identicon&r=PG&f=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/2760267/destructor"}, "edited": false, "score": 0, "creation_date": 1551902550, "post_id": 55031203, "comment_id": 96815159, "body": "Please read the error message properly and try to understand it. It is a very straightforward error message you have got"}], "answers": [{"tags": [], "owner": {"reputation": 461, "user_id": 2760267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be631e7cf9b1178d71e69ba0ebef82c8?s=128&d=identicon&r=PG&f=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/2760267/destructor"}, "is_accepted": false, "score": 6, "last_activity_date": 1551902947, "last_edit_date": 1551902947, "creation_date": 1551902503, "answer_id": 55031298, "question_id": 55031203, "link": "https://stackoverflow.com/questions/55031203/too-few-arguments-in-function-call/55031298#55031298", "title": "Too few arguments in function call", "body": "<p>As the error suggests, </p>\n\n<pre><code>int main()\n{\n    string user_info;\n    getInput(user_info);\n\n    Exercices();\n\n    cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>You have to pass a <code>string</code> to the function <code>getInput(string username)</code> since the function definition says <strong>it needs one</strong>. I hope you will read and try to understand the error message before everything else in the future</p>\n"}], "owner": {"reputation": 1, "user_id": 9665321, "user_type": "registered", "profile_image": "https://graph.facebook.com/1939213833055773/picture?type=large", "display_name": "Yassine Ezzaim", "link": "https://stackoverflow.com/users/9665321/yassine-ezzaim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5339, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1608208654, "creation_date": 1551902054, "last_edit_date": 1551917101, "question_id": 55031203, "link": "https://stackoverflow.com/questions/55031203/too-few-arguments-in-function-call", "title": "Too few arguments in function call", "body": "<p>I want to call the <code>void getInput</code> function in the main scope. But when I do this, it tells me:</p>\n\n<blockquote>\n  <p>too few argument in function call. </p>\n</blockquote>\n\n<p>How do I fix this?</p>\n\n<p>The first void function prints the exercises. Then I call it in the next void function called <code>getInput</code>. After that I just want to call it in the <code>main()</code> function.</p>\n\n<pre><code>#include &lt;iostream&gt;;\n#include &lt;string&gt;;\n\nusing namespace std;\n\nvoid Exercices()\n{\n    double speed;\n    int minutes;\n\n    cout &lt;&lt; \"walking: \";\n    cin &gt;&gt; speed &gt;&gt; minutes;\n    cout &lt;&lt; \"running: \";\n    cin &gt;&gt; speed &gt;&gt; minutes;\n    cout &lt;&lt; \"cycling: \";\n    cin &gt;&gt; speed &gt;&gt; minutes;\n}\n\nvoid getInput(string username)\n{\n    double weight, goal;\n    string walking, running, cycling;\n\n    cout &lt;&lt; \"Please enter your name: \";\n    cin &gt;&gt; username;\n    cout &lt;&lt; \"Welcome \" &lt;&lt; username &lt;&lt; \", please enter your weight(kg): \";\n    cin &gt;&gt; weight;\n    cout &lt;&lt; username &lt;&lt; \", please enter speed(km/h) and minutes spent in a week for the activities below.\" &lt;&lt; endl;\n    Exercices();\n    cout &lt;&lt; username &lt;&lt; \", please enter your weekly calorie burn goal: \";\n    cin &gt;&gt; goal;\n\n}\nint main()\n{\n//string user_info;\n    getInput();\n\n    Exercices();\n\n    cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino", "raspbian"], "answers": [{"tags": [], "owner": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "is_accepted": true, "score": 1, "last_activity_date": 1551903202, "creation_date": 1551903202, "answer_id": 55031458, "question_id": 55031186, "link": "https://stackoverflow.com/questions/55031186/is-it-possible-to-use-an-arduino-sketch-as-a-c-program/55031458#55031458", "title": "Is it possible to use an Arduino Sketch as a C++ program?", "body": "<p>Yes you kind of can use your arduino sketch into <strong>Raspbian</strong> but you must use some libs. I recommend you look at this <a href=\"http://wiringpi.com/\" rel=\"nofollow noreferrer\">site</a>, the only change is the pinout. WiringPi lib is a PIN based GPIO access library written in C for the BCM2835, BCM2836 and BCM2837, so you can use almost every function like arduino but in Raspberry. Also the way it will be compiled and executed will change. I recommend you learn a little bit of linux and how to compile C++/C code by command line.</p>\n\n<p>There is some example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;wiringPi.h&gt;\n\nusing namespace std;\n\n\n/* Defines */\n#define LED  2\n\nint main (int argc, char *argv[]) {\n  if (wiringPiSetup() == -1) {\n    cout &lt;&lt; \"Unable configure wiringPi! Exiting...\" &lt;&lt; endl;\n    return 1;\n  }\n\n  pinMode(LED, OUTPUT);\n\n  while (1 &lt; 2) {\n    digitalWrite(LED, HIGH);\n    delay(500);\n    digitalWrite(LED, LOW);\n    delay(500);\n  }\n\n  return 0;\n}\n\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 9706128, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nVEq1.jpg?s=128&g=1", "display_name": "Michael H.", "link": "https://stackoverflow.com/users/9706128/michael-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 55031458, "answer_count": 1, "score": 0, "last_activity_date": 1551903202, "creation_date": 1551901974, "question_id": 55031186, "link": "https://stackoverflow.com/questions/55031186/is-it-possible-to-use-an-arduino-sketch-as-a-c-program", "title": "Is it possible to use an Arduino Sketch as a C++ program?", "body": "<p>I know some modifications will need to be made but can I convert an Arduino Sketch and compile it to run on a Raspbian System as a C++ program? I am looking to use a <a href=\"https://github.com/andresarmento/modbus-arduino\" rel=\"nofollow noreferrer\">modbus library</a> from Arduino to output data.</p>\n"}, {"tags": ["c++", "undefined-behavior", "static-assert"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1551902234, "post_id": 55031184, "comment_id": 96814984, "body": "You can use <code>auto mask = 1u; static_assert(...); mask &lt;&lt;= HAR_BIT*sizeof x-1;</code> to avoid the issue altogether."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551902403, "post_id": 55031184, "comment_id": 96815093, "body": "UB is tricky.  Just move the assert above the calculation to make sure it has correct values like <code>SomeType x=getX(); static_assert(sizeof(x) &lt; whatever_value_you_need, &quot;Type of numeric parameter is too long&quot;); ...</code>"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1551902403, "post_id": 55031184, "comment_id": 96815094, "body": "@RSahu I&#39;ve edited the example code to be less simplified and closer to my actual use case."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1551902515, "post_id": 55031184, "comment_id": 96815141, "body": "@Ruslan, the updated code makes a stronger case for moving the <code>static_assert</code> right after <code>SomeType x = ...;</code>. What&#39;s the point of doing that in a loop?"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1551902702, "post_id": 55031184, "comment_id": 96815238, "body": "@RSahu to avoid repeating the type of mask. I.e. if I need to e.g. extend the mask type, I&#39;d just replace <code>1u</code> with <code>1ull</code> in one place. But if I explicitly declare <code>unsigned mask</code> beforehand to do the <code>static_assert</code> before, I get two issues: 1) mask survives after the loop (needs additional scope to avoid this), 2) changing type in the expression also needs an additional change of type of <code>mask</code>."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1551904923, "post_id": 55031184, "comment_id": 96816244, "body": "Could we see this with more parentheses? I&#39;m a little unhappy seeing the left shift and multiply and sizeof and subtraction without any of them."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1551907208, "post_id": 55031184, "comment_id": 96817195, "body": "@Tim: I think it&#39;s <code>(1u &lt;&lt; (CHAR_BIT*(sizeof x))) - 1</code>"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1551907892, "post_id": 55031184, "comment_id": 96817473, "body": "@BenVoigt you&#39;ve mistaken: addition/subtraction has higher precedence than shifts. But OK, this simply proves Tim&#39;s point. I&#39;ll add some parentheses."}, {"owner": {"reputation": 8582, "user_id": 439751, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4b40ae065359026d01fa30223812d83?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/439751/james"}, "edited": false, "score": 0, "creation_date": 1580726012, "post_id": 55031184, "comment_id": 106178773, "body": "Unfortunately, nothing here actually answers the question"}], "answers": [{"comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1551905093, "post_id": 55031325, "comment_id": 96816316, "body": "The downside of this approach is that you&#39;ve repeated <code>1u</code> and added to the maintenance cost (alluded to by Ruslan in comments, but not in the question)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1551905781, "post_id": 55031325, "comment_id": 96816581, "body": "@TimRandall, fair point. I updated the answer to address that."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1551905752, "last_edit_date": 1551905752, "creation_date": 1551902639, "answer_id": 55031325, "question_id": 55031184, "link": "https://stackoverflow.com/questions/55031184/does-undefined-behavior-affect-static-assert/55031325#55031325", "title": "Does undefined behavior affect static_assert?", "body": "<p>Since you know you are going to use <code>unsigned</code> as the type for <code>mask</code>, there is no need to rely on <code>mask</code> to do the <code>static_assert</code>. Do it right after before the loop begins.</p>\n\n<pre><code>SomeType x = getX();\nstatic_assert(sizeof 1u &gt;= sizeof x, \"Type of numeric parameter is too long\");\n\nfor(auto mask = 1u &lt;&lt; CHAR_BIT*sizeof x-1; /*...*/; /*...*/)\n{\n    /*...*/\n}\n</code></pre>\n\n<p>A cleaner option would be to use a helper function.</p>\n\n<pre><code>template &lt;typename RetType, typename SomeType&gt;\nRetType make_mask(RetType in, SomeType const&amp; x)\n{\n   static_assert(sizeof in &gt;= sizeof SomeType, \"Type of numeric parameter is too long\");\n   return (in &lt;&lt; (CHAR_BIT*sizeof SomeType)-1);\n}\n</code></pre>\n\n<p>and use</p>\n\n<pre><code>for(auto mask = make_mask(1u, x); /*...*/; /*...*/)\n{\n    /*...*/\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2376, "user_id": 5343439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c855ea8e4c6ce40243ca96f30e893d18?s=128&d=identicon&r=PG&f=1", "display_name": "Kit.", "link": "https://stackoverflow.com/users/5343439/kit"}, "is_accepted": false, "score": 1, "last_activity_date": 1551904321, "last_edit_date": 1551904321, "creation_date": 1551903847, "answer_id": 55031599, "question_id": 55031184, "link": "https://stackoverflow.com/questions/55031184/does-undefined-behavior-affect-static-assert/55031599#55031599", "title": "Does undefined behavior affect static_assert?", "body": "<p>If <code>SomeType</code> is an integral type and you are using C++11 or newer, you might be able to eliminate the assert altogether by using:</p>\n\n<pre><code>auto one = std::make_unsigned&lt;SomeType&gt;::type(1);\nfor(auto mask = one &lt;&lt; CHAR_BIT*sizeof x-1; /*...*/; /*...*/)\n{\n    /*...*/\n}\n</code></pre>\n"}], "owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 1, "answer_count": 2, "score": 11, "last_activity_date": 1551908134, "creation_date": 1551901969, "last_edit_date": 1551908134, "question_id": 55031184, "link": "https://stackoverflow.com/questions/55031184/does-undefined-behavior-affect-static-assert", "title": "Does undefined behavior affect static_assert?", "body": "<p>Consider the following code:</p>\n\n<pre><code>SomeType x=getX();\nfor(auto mask = 1u&lt;&lt;(CHAR_BIT*sizeof x - 1);/*...*/;/*...*/)\n{\n    static_assert(sizeof mask&gt;=sizeof x, \"Type of numeric parameter is too long\");\n    /*...*/\n}\n</code></pre>\n\n<p>Here, <code>mask</code> will have type <code>unsigned</code>. Suppose <code>SomeType</code> is <code>long long</code>. Then the initialization of <code>mask</code> will have undefined behavior due to shifting by too much. But OTOH, there's a <code>static_assert</code>, which checks that undefined behavior can't happen at runtime (because the code would fail to compile).</p>\n\n<p>But since UB can lead to time paradoxes and other surprises, I'm not so sure that <code>static_assert</code> is guaranteed to actually work in this case. Is there any reason to be sure of this? Or should this code be redone to make <code>static_assert</code> appear before initialization of <code>mask</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 6, "creation_date": 1551901025, "post_id": 55030898, "comment_id": 96814299, "body": "<i>&quot;And I can&#39;t change to std::array for that specific usage since it need to be use afterward in a c routine that use <code>T*</code> only.&quot;</i> Are you not able to use <code>std::array&lt;T, N&gt;::data()</code>?"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 4, "creation_date": 1551901031, "post_id": 55030898, "comment_id": 96814307, "body": "Why do you attempt to init integers with float literals?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1551901074, "post_id": 55030898, "comment_id": 96814331, "body": "You can&#39;t directly return C-style arrays from a function. Either use <code>std::array</code> or wrap the C-style array in a struct."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1551901210, "post_id": 55030898, "comment_id": 96814401, "body": "You can pass <code>std::array</code> to a C routine. Use <code>std::array::data()</code> or even <code>&amp;arr[0]</code> would do (but the <code>.data</code> version is better)"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1551901336, "post_id": 55031004, "comment_id": 96814471, "body": "<code>sizeof(arr)</code> isn&#39;t correct. the class could have padding.  <code>arr.size()</code> or C++20&#39;s <code>std::size(arr)</code> would be better."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1551901376, "post_id": 55031004, "comment_id": 96814492, "body": "You are right. I already thought about that. But i will have to do the arr.data() everywhere afterward. But I would like to avoid that if possible. But I agreed with that solution."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551901394, "post_id": 55031004, "comment_id": 96814499, "body": "@NathanOliver: As you&#39;re a big fish do feel empowered to change something that&#39;s so obviously wrong."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551901414, "post_id": 55031004, "comment_id": 96814511, "body": "@NathanOliver: Except the OP has changed it back. Back in my box ;-) and an upvote for good feelings."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551901433, "post_id": 55031004, "comment_id": 96814524, "body": "@NathanOliver C-style arrays often require you provide specific byte sizes, not the &quot;element count&quot; provided by <code>std::array::size()</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551901584, "post_id": 55031004, "comment_id": 96814623, "body": "Right.  Byte size, use <code>sizeof</code>.  Element size(count), use <code>size()</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1551901693, "post_id": 55031004, "comment_id": 96814681, "body": "@Vuwox That is easily solved by wrapping the C functions.  Add a overload that takes a <code>std::array</code> and calls the C function using <code>data</code> and the size it needs.  Most likely it will be optimized away so it won&#39;t cost you anything at runtime."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1551901866, "post_id": 55031004, "comment_id": 96814766, "body": "@Xirema That is way too much code for me. The problem is that Im using Intel IPP library in C (old one). And their functions take IppT* array, the std::array::data() could do it, the only issue, is that I have a lot of functions to add the .data() to it."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1551902152, "post_id": 55031004, "comment_id": 96814919, "body": "@Vuwox Write a wrapper for the IPP Library functions, and do a workspace-wide swap of all references to the IPP Library with your wrapper. There are tools that can make that process easier to do."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1551902439, "post_id": 55031004, "comment_id": 96815103, "body": "@Xirema I could, but that is a so huge job, there is too much function in that library. At first, I was searching for a simple template to do this, but it seems not straight forward. Thanks anyway."}, {"owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "edited": false, "score": 0, "creation_date": 1551902531, "post_id": 55031004, "comment_id": 96815153, "body": "@Xirema It need some refactoring, but I think I prefer to add the .data() to each call."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 3, "last_activity_date": 1551901752, "last_edit_date": 1551901752, "creation_date": 1551901282, "answer_id": 55031004, "question_id": 55030898, "link": "https://stackoverflow.com/questions/55030898/avoid-narrowing-warning-on-c-style-array-creation/55031004#55031004", "title": "Avoid narrowing warning on c-style array creation", "body": "<p>Just use <code>std::array</code>. You assert that you're unable to do so as a result of needing to interface with C-style APIs, but that doesn't mean you need to use C-style arrays in your code.</p>\n\n<pre><code>//C Header\nvoid do_something(void * arr, size_t size);\n\n//C++ Code\nauto arr = make_non_narrowed_array&lt;int&gt;(0.f, 1.f, 2.f);\n//If size is meant to be the memory footprint\ndo_something(arr.data(), sizeof(arr));\n//If size is meant to be the number of elements\ndo_something(arr.data(), arr.size());\n</code></pre>\n\n<p>No need to use a C-style array for this code.</p>\n\n<p>If you're worried about excess boilerplate code, just write a wrapper.</p>\n\n<pre><code>template&lt;typename T, size_t N&gt; \nvoid cpp::do_something(std::array&lt;T, N&gt; const&amp; arr) {\n    do_something(arr.data(), arr.size() * sizeof(T));\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "is_accepted": false, "score": 0, "last_activity_date": 1551908336, "creation_date": 1551908336, "answer_id": 55032573, "question_id": 55030898, "link": "https://stackoverflow.com/questions/55030898/avoid-narrowing-warning-on-c-style-array-creation/55032573#55032573", "title": "Avoid narrowing warning on c-style array creation", "body": "<p>Finally, after all this discussion, I revisited my problem and tries to make something simple that fill my need, despite is not a super general function.</p>\n\n<pre><code>template&lt;typename T, std::size_t N&gt;\nvoid no_narrow(float * const in, T(&amp;out)[N])\n{\n    for ( int i = 0; i &lt; N; i++ )\n        out[i] = static_cast&lt;T&gt;( in[i] );\n}\n</code></pre>\n\n<p>So that I call it:</p>\n\n<pre><code>Ipp8u arr[3];\nno_narrow(th, arr);\n</code></pre>\n"}], "owner": {"reputation": 2281, "user_id": 1524511, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iyH0t.jpg?s=128&g=1", "display_name": "Vuwox", "link": "https://stackoverflow.com/users/1524511/vuwox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 55031004, "answer_count": 2, "score": 0, "last_activity_date": 1553817367, "creation_date": 1551900771, "last_edit_date": 1553817367, "question_id": 55030898, "link": "https://stackoverflow.com/questions/55030898/avoid-narrowing-warning-on-c-style-array-creation", "title": "Avoid narrowing warning on c-style array creation", "body": "<p>In c++11, the current behavior returns a warning:</p>\n\n<pre><code>int arr[3] = { 0.0f, 1.0f, 2.0f};\n</code></pre>\n\n<p>Based on the following <a href=\"https://stackoverflow.com/a/46546220\">post</a>, I was able to create </p>\n\n<pre><code>template &lt;class T, class ... Ts&gt;\nstd::array&lt;T, sizeof...( Ts )&gt; make_non_narrowed_arr(Ts&amp;&amp; ... ts)\n{\n    return{ { static_cast&lt;T&gt;( ts )... } };\n}\n\nauto arr = make_not_narrowed_arr&lt;int&gt;(0.0f, 1.0f, 2.0f );\n</code></pre>\n\n<p>But I would like the return to be a classic c-array, but I was not able to achieve it. So far I tried those, but none are compiling.</p>\n\n<pre><code>template&lt;class T, class ... Ts&gt;\nT[sizeof...( Ts )] make_non_narrowed_arr(Ts&amp;&amp; ... ts) {...};\n\ntemplate&lt;class T, std::size_t N, class ... Ts&gt;\nT[N] make_non_narrowed_arr(Ts&amp;&amp; ... ts) {...};\n\ntemplate&lt;class T, class ... Ts&gt;\nT* make_non_narrowed_arr(Ts&amp;&amp; ... ts) {...};\n</code></pre>\n\n<p>I want to do the following to have a warning free program, without suppressing them in compiler. So this <a href=\"https://stackoverflow.com/questions/28094263/create-array-of-chars-avoiding-narrowing\">post</a> is not a solution for me either.</p>\n\n<p>And I can't change to <code>std::array</code> for that specific usage since it need to be use afterward in a c routine that use <code>T*</code> only.</p>\n\n<p><strong>EDIT:</strong> Here a sample (not the exact code 100%) of what I have as code, and what I want to change.</p>\n\n<p>The problem with the function is that based on image type and channel, I perform call to IPP routine, and I provide generic float* as input to the wrapper routine.</p>\n\n<pre><code>void threshold(Image img, Image dst, float* th)\n{\n    // Sanitty ckeck on image, and bla bla...\n\n    // Perform the call to ipp\n    IppStatus sts = (IppStatus)0;\n    switch(img.nbChan)\n    {\n        case 1:\n        {\n            switch(img.type)\n            {\n                case BYTE:\n                {\n                    Ipp8u arr[1] = {Th[0] };\n                    sts = ippiThreshold_GTVal_8u_C1R(img.data, img.pitch, dst.data, dst.pitch, arr);\n                    break;\n                }\n                case FLOAT:\n                {\n                    Ipp32f arr[1] = {Th[0] };\n                    sts = ippiThreshold_GTVal_32f_C1R(img.data, img.pitch, dst.data, dst.pitch, arr);\n                    break;\n                }\n            }        \n            break;\n        }\n        case 3:\n        {\n            switch(img.type)\n            {\n                case BYTE:\n                {\n                    Ipp8u arr[3] = {Th[0], Th[1], Th[2]};\n                    sts = ippiThreshold_GTVal_8u_C3R(img.data, img.pitch, dst.data, dst.pitch, arr);\n                    break;\n                }\n                case FLOAT:\n                {\n                    Ipp32f arr[3] = {Th[0], Th[1], Th[2]};\n                    sts = ippiThreshold_GTVal_32f_C3R(img.data, img.pitch, dst.data, dst.pitch, arr);\n                    break;\n                }\n            } \n            break;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551902609, "post_id": 55030816, "comment_id": 96815193, "body": "You have a typo.  <code>TypeInfo::TypeInfo&lt;double&gt;()</code> should be <code>TypeInfo&lt;double&gt;::TypeInfo()</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551902730, "post_id": 55030816, "comment_id": 96815258, "body": "Also, you can&#39;t put templates in a cpp file: <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\" title=\"why can templates only be implemented in the header file\">stackoverflow.com/questions/495021/&hellip;</a>"}, {"owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551903083, "post_id": 55030816, "comment_id": 96815451, "body": "Thanks - that typo was not a typo; it was lacking competence. I have the template <i>specializations</i> in the cpp file - that should work?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551903261, "post_id": 55030816, "comment_id": 96815527, "body": "The specialization being in a cpp won&#39;t work if another translation unit would use it.  All template code should be in a header file."}], "answers": [{"comments": [{"owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "edited": false, "score": 0, "creation_date": 1551903128, "post_id": 55030887, "comment_id": 96815476, "body": "Combined with a helpful comment on my compile error this seems to become the final solution; thank you!"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 0, "last_activity_date": 1551901892, "last_edit_date": 1551901892, "creation_date": 1551900736, "answer_id": 55030887, "question_id": 55030816, "link": "https://stackoverflow.com/questions/55030816/instantiate-non-template-class-with-templated-constructor/55030887#55030887", "title": "Instantiate non-template class with templated constructor", "body": "<p>You can't make the class constructor a template and be able to specify the template type since you can't call a constructor.</p>\n\n<p>You could make the class a template, and use the template type to get the size of the type instead of having it provided by the user.  That would give you</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct TypeInfo {\n    TypeInfo(const std::string&amp; type_name) : \n        type_name(type_name)\n    {}\n\n    std::size_t elm_size = sizeof(T);\n    std::string type_name;    \n};\n\nTypeInfo&lt;double&gt; double_info(\"double\");\nTypeInfo&lt;int&gt; int_info(\"int\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 0, "last_activity_date": 1551901891, "last_edit_date": 1551901891, "creation_date": 1551901542, "answer_id": 55031076, "question_id": 55030816, "link": "https://stackoverflow.com/questions/55030816/instantiate-non-template-class-with-templated-constructor/55031076#55031076", "title": "Instantiate non-template class with templated constructor", "body": "<p>You cannot specify template parameters for a constructor. They can only be deduced. You could send a type tag to your constructor:</p>\n\n<pre><code>template&lt;typename&gt; struct tag_t {};\ntemplate&lt;typename T&gt; inline constexpr auto tag = tag_t&lt;T&gt;{}; \n\nstruct TypeInfo {\n    template&lt;typename T&gt;\n    TypeInfo(tag_t&lt;T&gt;) :\n        elm_size{sizeof(T)},\n        type_name{/* find a way to get name */} {}\n\n    std::size_t elm_size;\n    std::string type_name;  \n};\n\nTypeInfo double_info{tag&lt;double&gt;};\nTypeInfo int_info{tag&lt;int&gt;};\n</code></pre>\n\n<p>You'll have to find a way to get the name of a type from a template argument. Some libraries exists for that like <a href=\"https://github.com/Manu343726/ctti\" rel=\"nofollow noreferrer\">ctti</a></p>\n"}, {"comments": [{"owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "edited": false, "score": 0, "creation_date": 1551902623, "post_id": 55031156, "comment_id": 96815200, "body": "Yes - I have considered that"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1551901890, "creation_date": 1551901890, "answer_id": 55031156, "question_id": 55030816, "link": "https://stackoverflow.com/questions/55030816/instantiate-non-template-class-with-templated-constructor/55031156#55031156", "title": "Instantiate non-template class with templated constructor", "body": "<p>Another solution is to use a helper function.</p>\n\n<pre><code>struct TypeInfo {\n    TypeInfo(std::size_t elm_size, const std::string&amp; type_name) : \n        elm_size(elm_size), \n        type_name(type_name)\n    {}\n\n    std::size_t elm_size;\n    std::string type_name;    \n};\n\ntemplate &lt;typename T&gt;\nTypeInfo make_TypeInfo(const std::string&amp; type_name)\n{\n   return TypeInfo(sizeof(T), type_name);\n}\n</code></pre>\n\n<p>and use    </p>\n\n<pre><code>TypeInfo double_info = make_TypeInfo&lt;double&gt;(\"double\");\nTypeInfo int_info = make_TypeInfo&lt;int&gt;(\"int\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": false, "score": 1, "last_activity_date": 1551903754, "creation_date": 1551903754, "answer_id": 55031580, "question_id": 55030816, "link": "https://stackoverflow.com/questions/55030816/instantiate-non-template-class-with-templated-constructor/55031580#55031580", "title": "Instantiate non-template class with templated constructor", "body": "<p>If you're indeed only interested in a handful of fundamental types, and can specialize them manually it seems like a good way to go.</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct TypeInfo; // default values could go here for un-specified types\n\ntemplate &lt;&gt;\nstruct TypeInfo&lt;int&gt; {\n    const std::size_t elm_size = sizeof(T);\n    const std::string type_name = \"int\";\n}\n\n// more specializations for double, char and float\n</code></pre>\n\n<p>Then you can go ahead and use it by just instantiating with a template parameter.</p>\n\n<p>If the fact that different instatiations of <code>TypeInfo</code>are different types is a problem, you could use a function that return a common <code>TypeInfo</code> object with the right values set based on the parameter passed to the function.</p>\n\n<pre><code>template &lt;typename T&gt;\nTypeInfo get_type_info() {\n    return TypeInfo{sizeof(T), \"unknown\"};\n}\n\ntemplate &lt;&gt;\nTypeInfo get_type_info&lt;int&gt;() {\n    return TypeInfo{sizeof(T), \"int\"};\n}\n\nauto type_info = get_type_info&lt;int&gt;();\n</code></pre>\n"}], "owner": {"reputation": 1786, "user_id": 422005, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/12c2e55edb5c5fa6905829dab6dca8fb?s=128&d=identicon&r=PG", "display_name": "user422005", "link": "https://stackoverflow.com/users/422005/user422005"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 55030887, "answer_count": 4, "score": 2, "last_activity_date": 1551903754, "creation_date": 1551900510, "last_edit_date": 1551902474, "question_id": 55030816, "link": "https://stackoverflow.com/questions/55030816/instantiate-non-template-class-with-templated-constructor", "title": "Instantiate non-template class with templated constructor", "body": "<p>I have a small C++ class which wraps type information for some basic types; a simplified version looks like this:</p>\n\n<pre><code>struct TypeInfo {\n    TypeInfo(std::size_t elm_size, const std::string&amp; type_name) : \n        elm_size(elm_size), \n        type_name(type_name)\n    {}\n\n    std::size_t elm_size;\n    std::string type_name;    \n}\n\n\nTypeInfo double_info(sizeof double, \"double\");\nTypeInfo int_info(sizeof int, \"int\");\n</code></pre>\n\n<p>This works - but I would love to be able to instantiate the <code>TypeInfo</code> object based on normal C++ templating; i.e. something like this:</p>\n\n<pre><code>TypeInfo&lt;double&gt; double_info; // &lt;- This does not work\n</code></pre>\n\n<p>Since the class as such does not contain any <code>T</code> - it is not really a templated class - but rather a convenient instantiation method. When this is contained in a function which is truly templated:</p>\n\n<pre><code>void vector_operation(const std::vector&lt;T&gt;&amp; data) {\n    TypeInfo&lt;T&gt; type_info;  // &lt;- This does not work!\n}\n</code></pre>\n\n<p>it would be <em>really</em> helpful if I could instantiate <code>TypeInfo</code> instance based on a template parameter. Since I only need to cover a handful of fundamental types - <code>float, double, int</code> and <code>char</code> I would be more than happy to specialize the handful of types explicitly. </p>\n\n<p><strong>Update</strong>: @nathan_oliver suggested to make the class as a whole a template, and then use <code>sizeof(T)</code> to determine the element size. The problem with that solution (as I see it) - is that the user still needs to supply the <code>type_name</code> string (and some more type specific information) - I would like specialize the few types I need - and then fully specify:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct TypeInfo {\n    TypeInfo();\n\n    std::size_t elm_size;\n    std::string type_name;\n}\n</code></pre>\n\n<p>And then in the .cpp file:</p>\n\n<pre><code>template&lt;&gt;\nTypeInfo::TypeInfo&lt;double&gt;() {\n     this-&gt;elm_size = sizeof(double);\n     this-&gt;type_name = \"double\";\n}\n\n\ntemplate&lt;&gt;\nTypeInfo::TypeInfo&lt;int&gt;() {\n    this-&gt;elm_size = sizeof(int);\n    this-&gt;type_name = \"int\";\n}\n</code></pre>\n\n<p>but this does not even compile: </p>\n\n<pre><code>type_info.cpp:46:5: error: \ninvalid use of template-name \u2018TypeInfo\u2019 without an argument list\n     TypeInfo::TypeInfo()\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++17", "compiler-options"], "answers": [{"comments": [{"owner": {"reputation": 3085, "user_id": 7309666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be91537cdd23587efcab0afbe2ed0023?s=128&d=identicon&r=PG&f=1", "display_name": "coder3101", "link": "https://stackoverflow.com/users/7309666/coder3101"}, "edited": false, "score": 0, "creation_date": 1552507769, "post_id": 55030916, "comment_id": 97041139, "body": "Thanks. I was looking for a tool like this. I know I will not be using STL and it has less usability. It was just meant for learning how the compiler does type deductions."}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 5, "last_activity_date": 1552481096, "last_edit_date": 1552481096, "creation_date": 1551900871, "answer_id": 55030916, "question_id": 55030740, "link": "https://stackoverflow.com/questions/55030740/is-there-a-c-tool-which-can-convert-template-classes-to-actual-classes-if-temp/55030916#55030916", "title": "Is there a C++ tool which can convert template classes to actual classes if template parameter is given?", "body": "<p>I mean, the compiler does this. The type you expanded to <code>Foo</code> should really be called <code>Foo&lt;int&gt;</code>, and you'll see that if you step through your compiled program in a debugger.</p>\n\n<p>I don't know of any tool that does a textual expansion though, and I'm pretty certain I wouldn't enjoy reading its output for any non-trivial program, especially one using standard library containers.</p>\n\n<hr>\n\n<p><strong>Edit</strong> - OK, this is still off-topic but, since I already answered, this seems relevant:</p>\n\n<p><a href=\"https://cppinsights.io\" rel=\"nofollow noreferrer\">https://cppinsights.io</a></p>\n\n<p>which expands your original code like so (<a href=\"https://cppinsights.io/lnk?code=dGVtcGxhdGU8Y2xhc3MgVD4gY2xhc3MgRm9vewogICAgVCBhOwogICAgYXV0byBiYXooKXsKICAgICAgICByZXR1cm4gNC4yZjsKICAgIH0KfTsKCmludCBtYWluKCl7CiAgICBGb288aW50PiBiYXI7CiAgICByZXR1cm4gMDsKfQo=&amp;std=cpp17&amp;rev=1.0\" rel=\"nofollow noreferrer\">link</a>)</p>\n\n<pre><code>template&lt;class T&gt; class Foo{\n    T a;\n    auto baz(){\n        return 4.2f;\n    }\n};\n\n/* First instantiated from: insights.cpp:9 */\n#ifdef INSIGHTS_USE_TEMPLATE\ntemplate&lt;&gt;\nclass Foo&lt;int&gt;\n{\n  int a;\n  inline auto baz();\n\n  // inline Foo() noexcept = default;\n  // inline constexpr Foo(const Foo&lt;int&gt; &amp;) = default;\n  // inline constexpr Foo(Foo&lt;int&gt; &amp;&amp;) = default;\n};\n\n#endif\n\n\nint main()\n{\n  Foo&lt;int&gt; bar = Foo&lt;int&gt;();\n  return 0;\n}\n</code></pre>\n\n<p>You'll notice it never emits the <code>Foo&lt;int&gt;::baz()</code> you wanted though, just because it was never actually used.</p>\n"}], "owner": {"reputation": 3085, "user_id": 7309666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be91537cdd23587efcab0afbe2ed0023?s=128&d=identicon&r=PG&f=1", "display_name": "coder3101", "link": "https://stackoverflow.com/users/7309666/coder3101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1551900877, "accepted_answer_id": 55030916, "answer_count": 1, "score": -1, "last_activity_date": 1552481096, "creation_date": 1551900248, "question_id": 55030740, "link": "https://stackoverflow.com/questions/55030740/is-there-a-c-tool-which-can-convert-template-classes-to-actual-classes-if-temp", "closed_reason": "Not suitable for this site", "title": "Is there a C++ tool which can convert template classes to actual classes if template parameter is given?", "body": "<p>Suppose I have a template class like </p>\n\n<pre><code>template&lt;class T&gt; class Foo{\n    T a;\n    auto baz(){\n        return 4.2f;\n    }\n};\n\nint main(){\n    Foo&lt;int&gt; bar;\n    return 0;\n}\n</code></pre>\n\n<p>Is there a tool which can convert this code to actual class and give output as :</p>\n\n<pre><code>class Foo{\n    int a;\n    float baz(){\n        return 4.2f;\n    }\n};\n// main goes below this line\n</code></pre>\n\n<p>A tool that replaces all <code>auto</code> and template arguments with deduced types.</p>\n\n<p>I was working with templates and was curious if there was any such tool as it could be a good for learning type deduction? </p>\n"}, {"tags": ["c++", "console-application"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 4, "creation_date": 1551899968, "post_id": 55030620, "comment_id": 96813745, "body": "<a href=\"https://en.wikipedia.org/wiki/GNU_Readline\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/GNU_Readline</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1551900315, "post_id": 55030620, "comment_id": 96813912, "body": "In Windows, if you get the input from <code>stdin</code> the previous inputs are available from the up/down arrow keys. It works the same way as the console command line, but it only presents the inputs that were taken by the program running."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 2, "creation_date": 1551901539, "post_id": 55030620, "comment_id": 96814595, "body": "<a href=\"https://github.com/troglobit/editline\" rel=\"nofollow noreferrer\">github.com/troglobit/editline</a> is a BSD-like licensed version."}, {"owner": {"reputation": 2446, "user_id": 234754, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/93728933cf8c8869b02d98c09d4096f0?s=128&d=identicon&r=PG", "display_name": "Joe Strout", "link": "https://stackoverflow.com/users/234754/joe-strout"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551914702, "post_id": 55030620, "comment_id": 96820057, "body": "@Weather Vane, that sounds like exactly the behavior I want \u2014 so I just need to pick or develop a solution to get the same behavior on the Unix/Linux."}, {"owner": {"reputation": 2446, "user_id": 234754, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/93728933cf8c8869b02d98c09d4096f0?s=128&d=identicon&r=PG", "display_name": "Joe Strout", "link": "https://stackoverflow.com/users/234754/joe-strout"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1551914765, "post_id": 55030620, "comment_id": 96820077, "body": "Sounds like GNU Readline/editline is ideal \u2014 with editline possibly being preferable due to the license.  @Botje, if you want to post that as an answer I&#39;ll be happy to accept it."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1551941096, "post_id": 55030620, "comment_id": 96826580, "body": "I just realized editline may not work on windows \ud83e\udd26\u200d\u2642\ufe0f"}, {"owner": {"reputation": 2446, "user_id": 234754, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/93728933cf8c8869b02d98c09d4096f0?s=128&d=identicon&r=PG", "display_name": "Joe Strout", "link": "https://stackoverflow.com/users/234754/joe-strout"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1551995562, "post_id": 55030620, "comment_id": 96856450, "body": "Yeah, but according to @WeatherVane, Windows has this functionality built in.  So that turns out to be not an issue."}], "owner": {"reputation": 2446, "user_id": 234754, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/93728933cf8c8869b02d98c09d4096f0?s=128&d=identicon&r=PG", "display_name": "Joe Strout", "link": "https://stackoverflow.com/users/234754/joe-strout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551901823, "creation_date": 1551899826, "last_edit_date": 1551901823, "question_id": 55030620, "link": "https://stackoverflow.com/questions/55030620/how-to-support-line-editing-history-in-c-console-program", "title": "how to support line editing/history in C++ console program?", "body": "<p>I'm writing an interactive command-driven console program... think of something like Python, Matlab, etc. if that helps.  User types a command, gets a result, and repeats until done.</p>\n\n<p>This works OK, but the only editing users can do is typing and Backspace.  I'd like to let them use standard line editing: arrow keys, ctrl-A/E, option-arrow to go by word, etc.  And (really asking a lot now), I'd also like them to be able to use up/down arrow to cycle through previous inputs, to edit/reenter those.</p>\n\n<p>I'm aware of ncurses, but that seems like overkill; it's designed for making GUI-like interfaces, while what I want is a simple command-based interface.</p>\n\n<p>I'm coding on a Mac, but I will soon want this to work on Linux and Windows too.  I'm willing to roll up my sleeves and do it myself if necessary, but surely there's something out there that either does this, or at least abstracts away the differences between Unix and Windows consoles, without dragging all of ncurses into the picture?</p>\n"}, {"tags": ["c++", "string", "loops", "for-loop"], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 19, "user_id": 8313661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e54662913f19af00794d7b1d4818a3c?s=128&d=identicon&r=PG&f=1", "display_name": "Aidan", "link": "https://stackoverflow.com/users/8313661/aidan"}, "edited": false, "score": 0, "creation_date": 1551900249, "post_id": 55030486, "comment_id": 96813880, "body": "@Aidan Alternative variant: <code>for(i = length - 1; i &lt; length; --i)</code> \u2013 either variant: don&#39;t forget to check initially if length is &gt; 0 at all."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551901508, "post_id": 55030486, "comment_id": 96814569, "body": "Reverse iterators would also be helpful here."}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 5, "last_activity_date": 1551899457, "last_edit_date": 1551899457, "creation_date": 1551899277, "answer_id": 55030486, "question_id": 55030454, "link": "https://stackoverflow.com/questions/55030454/cpp-for-loop-through-characters-of-a-string-starts-at-unexpected-index/55030486#55030486", "title": "CPP for loop through characters of a string starts at unexpected index?", "body": "<p>For an unsigned value <code>i&gt;=0</code> is always true. So your index gets to zero and then wraps around to the largest <code>unsigned long</code> value which, in your case, is 18446744073709551615.</p>\n\n<p>Write your loop like this (for instance)</p>\n\n<pre><code>for (unsigned long i = add1.length(); i-- &gt; 0; ) {\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 1, "last_activity_date": 1551941752, "last_edit_date": 1551941752, "creation_date": 1551940860, "answer_id": 55037552, "question_id": 55030454, "link": "https://stackoverflow.com/questions/55030454/cpp-for-loop-through-characters-of-a-string-starts-at-unexpected-index/55037552#55037552", "title": "CPP for loop through characters of a string starts at unexpected index?", "body": "<p>Collecting the comments to <a href=\"https://stackoverflow.com/users/882003/john\">john</a>'s <a href=\"https://stackoverflow.com/a/55030486/1312382\">answer</a>:</p>\n\n<p>As unsigned values are never less than 0, you end up in an endless loop, wrapping around and ending in a huge value after reaching 0.</p>\n\n<p>You have several options now:</p>\n\n<ol>\n<li><p>Check the index before decrementing (a humoristic view on this see <a href=\"https://stackoverflow.com/questions/1642028/what-is-the-operator-in-c\">here</a>):<pre>for (unsigned long i = add1.length(); i-- > 0; )</pre></p></li>\n<li><p>Profiting from wrapping around behaviour on underflow:<pre>for (unsigned long i = add1.length() - 1; i &lt; add1.length(); --i)</pre></p></li>\n<li><p>Reverse iterators \u2013 I'd consider this the most preferrable variant; but we need to initialise two variables and rely on the sequence (comma) operator, some might disapprove...:<pre>for(auto i1 = add1.rbegin(), i2 = add2.rbegin(); i1 != add1.rend(); ++i1, ++i2)\n//                                      ++, even if going reverse!   ^     ^\n{\n    // use *i1 and *i2 here\n}</pre></p></li>\n</ol>\n\n<p>You might prefer <code>size_t</code> type instead of <code>unsigned long</code>, it will always be of appropriate size and is the type that is returned by <code>std::string::length</code> or any STL container's <code>size</code> function, too.</p>\n\n<p>I do not see, though, where you handle the case of <code>add2</code> being the shorter string \u2013 <em>any</em> of above would end in undefined behaviour then! And if <code>add1</code> is the shorter one, you start somewhere in the middle of <code>add2</code>. Covering both:</p>\n\n<pre><code>decltype(add1.rend()) ir, er;\nfor(auto i1 = add1.rbegin(), i2 = add2.rbegin(); ; ++i1, ++i2)\n                                                ^ leaving out condition!\n{\n    if(i1 == add1.rend())\n    {\n        ir = i2;          // handle rest of add2 after loop\n        er = add2.rend(); // needed to be able to compare with appropriate end\n        break;\n    }\n    if(i2 == add2.rend())\n    {\n        ir = i1;          // handle rest of add1 after loop\n        er = add1.rend(); // needed to be able to compare with appropriate end\n        break;\n    }\n    // adding the values as you did before\n}\nfor(; ir != er; ++ir)\n{\n    // special handling: append whatever remained from add1 or add2\n}\n</code></pre>\n\n<p>Finally: <code>stoi(to_string(addN.at(i)))</code> \u2013 I can hardly imagine anything less efficient...</p>\n\n<ol>\n<li><code>at</code> does range checking, but via your loop, you assured range already (presuming you fixed it according to one of the variants above), so index operator (<code>addN[i]</code>), which doesn't, is better choice. Admitted, this time, as the loop was incorrect, <code>at</code> prevented you from undefined behaviour. So you might start with <code>at</code> first and replace with index operator as soon as you know the code runs correctly...</li>\n<li>(Much more heavy): The intermediate strings are a (really) long way round. As C++ standard guarantees for digits (only!!!) having subsequent code points, you can simply do <code>addN[i] - '0'</code> (or <code>*iX - '0'</code>, if using iterators) to get the value. If you want to stay portable, don't assume this for letters, too, like in <code>if('A' &lt;= c &amp;&amp; c &lt;= 'Z') c += 'a' - 'A'</code> (for this example there already exists a <a href=\"https://en.cppreference.com/w/cpp/string/byte/tolower\" rel=\"nofollow noreferrer\">function</a> doing the same, which you absolutely should prefer).</li>\n</ol>\n\n<p>If we are at effiency already: If you <em>prepend</em> the digits to the result string all the new ciphers (well, code is not shown, but I could imagine you doing so...), you'll keep moving all the already inserted values again and again. Rather <em>append</em> the new digits and on completion apply <a href=\"http://en.cppreference.com/w/cpp/algorithm/reverse\" rel=\"nofollow noreferrer\"><code>std::reverse</code></a> to the result.</p>\n"}], "owner": {"reputation": 19, "user_id": 8313661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e54662913f19af00794d7b1d4818a3c?s=128&d=identicon&r=PG&f=1", "display_name": "Aidan", "link": "https://stackoverflow.com/users/8313661/aidan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1551941752, "creation_date": 1551899126, "last_edit_date": 1551900157, "question_id": 55030454, "link": "https://stackoverflow.com/questions/55030454/cpp-for-loop-through-characters-of-a-string-starts-at-unexpected-index", "title": "CPP for loop through characters of a string starts at unexpected index?", "body": "<pre><code>for(unsigned long i=add1.length()-1;i&gt;=0;i--){\n        int presum = stoi(to_string(add1.at(i))) + stoi(to_string(add2.at(i))) + curcarry;\n</code></pre>\n\n<p>I have this code cycling through the characters of a string (add1), starting from its last and going to its first. It then gets the current character using the index and turns it to an integer, adding it to the current character of another string of guaranteed equal length (add2).</p>\n\n<p>I'm getting an string out_of_range error, and upon looking at the debugging menu, I'm seeing that although my strings are both as they should be, with lengths of only 3, the i value is somehow ending up as 18446744073709551615.</p>\n\n<p>Attached is an image of the value of i, alongside the strings whose lengths obviously do not correlate. What's going on?</p>\n\n<p>Debug Values:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ih9Lc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ih9Lc.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "templates", "wxwidgets"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551898980, "post_id": 55030366, "comment_id": 96813269, "body": "Voting to close as a typo.  <code>T</code> is a type, not an object.  You need <code>T{}</code> or <code>T()</code> to pass an object of type <code>T</code>."}, {"owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551899394, "post_id": 55030366, "comment_id": 96813470, "body": "Well then I need help with that.  I actually did try what you are suggesting and no better.  Why did it work in all other instances?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551899884, "post_id": 55030366, "comment_id": 96813701, "body": "What happens when you use <code>T{}</code> or <code>T()</code>?"}, {"owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551900691, "post_id": 55030366, "comment_id": 96814124, "body": "The error is no appropriate default constructor.  I would guess it&#39;s because of the dependence on (wxWindow *parent).  So if I get the correct format in the T(), perhaps with a second template type it should work."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551900815, "post_id": 55030366, "comment_id": 96814194, "body": "Yes, if <code>T</code> is not default constructable then you&#39;ll need to provide parameters in the <code>{}</code>/<code>()</code> part."}, {"owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551901254, "post_id": 55030366, "comment_id": 96814423, "body": "Thanks for the quick help."}, {"owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551904525, "post_id": 55030366, "comment_id": 96816078, "body": "@NathanOliver, an interesting aside, the interface for bind requires the use of &#39;this&#39;.  Not sure that works with templates."}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1551907484, "post_id": 55030366, "comment_id": 96817302, "body": "@ggcg, the interface to bind does <code>not</code> require this. Where does this coming from?"}, {"owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "edited": false, "score": 0, "creation_date": 1551910722, "post_id": 55030366, "comment_id": 96818629, "body": "I found it on a documentation site.  But I could have misinterpreted the statement, &quot;Note that this pointer must be specified here.&quot;"}, {"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1551921754, "post_id": 55030366, "comment_id": 96821683, "body": "@ggcg, this is completely wrong. Please read Vadim&#39; reply in the ML. The third parameter to Bind() is an <code>event sink</code> - the object that handles the event, or IOW the object which references the event handler. Usually it is <code>this</code> pointer. But it can be any object."}, {"owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1551924154, "post_id": 55030366, "comment_id": 96822233, "body": "@Igor, thanks.  That is how I interpreted it at first, but I misinterpreted the wording of that documentation"}, {"owner": {"reputation": 71, "user_id": 11146756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835530277a9db4ac77128d78b9377bea?s=128&d=identicon&r=PG&f=1", "display_name": "julians", "link": "https://stackoverflow.com/users/11146756/julians"}, "edited": false, "score": 0, "creation_date": 1551944528, "post_id": 55030366, "comment_id": 96828084, "body": "Too me it looks like you want to use the <b>panel</b> that you passed into your helper class/function as event handler. So perhaps something like ` pb[0]-&gt;Bind(wxEVT_BUTTON, f, p);` (if <code>p</code> is of type <code>MyPanel</code>)"}, {"owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "reply_to_user": {"reputation": 71, "user_id": 11146756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835530277a9db4ac77128d78b9377bea?s=128&d=identicon&r=PG&f=1", "display_name": "julians", "link": "https://stackoverflow.com/users/11146756/julians"}, "edited": false, "score": 0, "creation_date": 1551957883, "post_id": 55030366, "comment_id": 96836031, "body": "@julians, that is exactly the idea.  But I&#39;m having trouble getting the reference to MyPanel expressed using the template."}, {"owner": {"reputation": 71, "user_id": 11146756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835530277a9db4ac77128d78b9377bea?s=128&d=identicon&r=PG&f=1", "display_name": "julians", "link": "https://stackoverflow.com/users/11146756/julians"}, "edited": false, "score": 0, "creation_date": 1551958314, "post_id": 55030366, "comment_id": 96836292, "body": "I am not sure if this has anything to do with templates. Think about how you would write <code>makeSomeGUIpanels</code> if you were to use concrete types instead of templates. I think the function signature should look something like this: <code>MyHelperClass&lt;T&gt;::makeSomeGUIpanels(&lt;other_params&gt;*, T* panel)</code>"}], "owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551898737, "creation_date": 1551898737, "question_id": 55030366, "link": "https://stackoverflow.com/questions/55030366/using-a-template-class-as-input-to-bind-in-wxwidgets", "title": "Using a template class as input to bind() in wxWidgets", "body": "<p>I have a set of wxPanels, pages to a notebook, for a GUI in C++.  They all have different data but a common set of functions for setting up are reading data.  I designed a helper class (my wording) to house all the common functions so each panel or frame does not need a cut and paste of essentially identical code.  The helper class is templated and called from inside the GUI panel class so that class can use those functions.  Everything seems to work with the exception of one item, the bind(event, method, handler) function in wxWidgets.  This is needed to bind a method in MyPanel to a button in MyPanel using the build GUI functions in MyHelperClass.  I've never posted code before so pardon the formatting, but here's a stripped down version of the basic functions/classes.</p>\n\n<pre><code>template&lt;class T&gt;\nclass MyHelperClass {\n\npublic:\n\n    typedef void (T::*buttonPush)(wxCommandEvent &amp; event);  //  This typedef seems to work \n\n    void makeSomeGUIpanels(pl, &amp;pb, buttonPush f, &amp;pp, *p);\n\nprivate:\n\n};\n\n\ntemplate&lt;class T&gt;\nvoid MyHelperClass&lt;T&gt;::makeSomeGUIpanels(pl, &amp;pb, buttonPush f, &amp;pp, *p) {\n\n    //  Do some stuff to set up the panels, buttons and labels.\n    ...\n    ...\n\n\n    //  Bind each button to the input function.\n\n    //  **** HERE IS THE PROBLEM.  ****  \n    pb[0]-&gt;Bind(wxEVT_BUTTON, f, T);\n\n    //  Put each panel together.\n    enterBox-&gt;Add(pb[0]);\n    pp[0]-&gt;SetSizer(enterBox);\n\n}\n</code></pre>\n\n<p>I've cut out a lot of code that in my opinion is not relevant to the question, and removed the types in the function interface.  For example enterBox is defined in the function before use.  The use of the function occurs in each version of a Panel that is created.  An example is...</p>\n\n<pre><code>class MyPanel : public wxPanel\n{\npublic:\n    MyPanel(wxWindow *parent);\n\nprivate:\n\n    MyHelperClass&lt;MyPanel&gt; cpf;\n\n    //  More stuff ...\n}\n</code></pre>\n\n<p>The methods in cpf are invoked in this panel's methods to build the GUI.</p>\n\n<pre><code>void MyPanel::SomeFunction(){\n    cpf.makeSomeGUIpanel(...);\n}\n</code></pre>\n\n<p>Placing T in the bind function causes the compile error 'T': illegal use of this type as an expression.  I've tried using other approaches I've found on stack overflow for passing template into a function but none have worked.  Everything else does work so I think my template use is not horrible.  I've used templates before but never for anything like this.  I am not sure that the issue is a template syntax, it may be a wxWidgets issue with bind().  The method, f, needs to belong to the handler, in this case T, and I think that the compiler needs to be able to check this and maybe it cannot.  Note that the typedef I created in the class seems to work in the sense that it does not give an error when compiling or running with the bind command commented out.  </p>\n\n<p>I appreciate any help or insights.  Thanks in advance.</p>\n"}, {"tags": ["c++", "opencv", "remap"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1551944535, "post_id": 55030221, "comment_id": 96828089, "body": "read about homography transformations. After you have constructed your desited transformation, you can initialize the remap instead of using warping"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11161800, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--W0DpdliRsM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf8YIERX_alcfGoBJTljaL1Dtdipg/mo/photo.jpg?sz=128", "display_name": "roei shimron", "link": "https://stackoverflow.com/users/11161800/roei-shimron"}, "is_accepted": false, "score": 0, "last_activity_date": 1551901952, "creation_date": 1551901952, "answer_id": 55031175, "question_id": 55030221, "link": "https://stackoverflow.com/questions/55030221/how-to-rotate-an-image-by-remap/55031175#55031175", "title": "How to rotate an image by remap", "body": "<p>OpenCV already HAS this function:</p>\n\n<pre><code>Mat getRotationMatrix2D(Point2f center, double angle, double scale)\n</code></pre>\n\n<p>you can read more at:\n<a href=\"https://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html\" rel=\"nofollow noreferrer\">opencv docs</a></p>\n"}], "owner": {"reputation": 97, "user_id": 10955842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdf44848487b26d5584dd1b56c4d41b2?s=128&d=identicon&r=PG&f=1", "display_name": "A. Cimet", "link": "https://stackoverflow.com/users/10955842/a-cimet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551942688, "creation_date": 1551898214, "last_edit_date": 1551942596, "question_id": 55030221, "link": "https://stackoverflow.com/questions/55030221/how-to-rotate-an-image-by-remap", "title": "How to rotate an image by remap", "body": "<p>For a specific purpose I am trying to use Open CV's remap function to rotate an image by a specific angle (angle can be changed while using the function). </p>\n\n<p>I have checked the open cv's documentation and example page and have come so far as to being able to rotate the image by let's say 180 degrees. The problem I still have is the angles in between.</p>\n\n<pre><code>for (int x = 0; x &lt; src.cols; x++)\n{\n    for (int y = 0; x &lt; src.rows; y++)\n    {\n        map_x.at&lt;float&gt;(y, x) = (float)(src.cols - x);\n        map_y.at&lt;float&gt;(y, x) = (float)(src.rows - y);\n    }\n}\n</code></pre>\n\n<p>This sample code is for rotating 180 degrees.</p>\n\n<p>My question again is, how achieve the rotation for any wanted angle.</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1551898416, "post_id": 55030150, "comment_id": 96813029, "body": "You are creating a standard <a href=\"https://docs.microsoft.com/en-us/windows/desktop/controls/edit-controls\" rel=\"nofollow noreferrer\">Edit control</a>, not a popup window, so of course it is not going to have a Close button on it. Why would you expect an Edit control to have a close button? And why are you specifying <code>WS_EX_TOPMOST</code>, <code>WS_POPUP</code>, and <code>WS_CAPTION</code> for a <i>child</i> control? Those only apply to top-level popup windows. If you want a free-floating Edit control, you need to make it a child of a free-floating popup window that is its parent."}, {"owner": {"reputation": 163, "user_id": 1932846, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89fe79067e464865108ddc7e2a5b3a1b?s=128&d=identicon&r=PG", "display_name": "fireman", "link": "https://stackoverflow.com/users/1932846/fireman"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551931423, "post_id": 55030150, "comment_id": 96823861, "body": "I am new to win32 programming. I just want to free-floating windows with a paint area and the standward close, minimize button. Could you show me how to do it?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1551932579, "post_id": 55030150, "comment_id": 96824088, "body": "So, then why are you creating an Edit control? For what you are asking, you need to call <code>RegisterClass&#47;Ex()</code> to register a custom class name, and then you can call <code>CreateWindow&#47;Ex()</code> using that class name. See <a href=\"https://docs.microsoft.com/en-us/windows/desktop/learnwin32/learn-to-program-for-windows\" rel=\"nofollow noreferrer\">Get Started with Win32 and C++</a> on MSDN, particularly the section on <a href=\"https://docs.microsoft.com/en-us/windows/desktop/learnwin32/creating-a-window\" rel=\"nofollow noreferrer\">Creating a Window</a>."}], "answers": [{"tags": [], "owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "is_accepted": false, "score": 1, "last_activity_date": 1551946521, "creation_date": 1551946521, "answer_id": 55038986, "question_id": 55030150, "link": "https://stackoverflow.com/questions/55030150/win32-programming-child-window-does-not-have-exit-button/55038986#55038986", "title": "Win32 programming child window does not have exit button", "body": "<blockquote>\n  <ol>\n  <li>It does not have a \"close\" button on the top right.</li>\n  </ol>\n</blockquote>\n\n<p>You need set <a href=\"https://docs.microsoft.com/en-us/windows/desktop/winmsg/window-styles\" rel=\"nofollow noreferrer\">WS_SYSMENU</a> flag for dwStyle parameter to have a window menu on its title bar. </p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>It always stay on top of all windows on my desktop top.</li>\n  </ol>\n</blockquote>\n\n<p>Because you define <a href=\"https://docs.microsoft.com/en-us/windows/desktop/winmsg/extended-window-styles\" rel=\"nofollow noreferrer\">WS_EX_TOPMOST</a> style: \"The window should be placed above all non-topmost windows and should stay above them, even when the window is deactivated.\"</p>\n"}], "owner": {"reputation": 163, "user_id": 1932846, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/89fe79067e464865108ddc7e2a5b3a1b?s=128&d=identicon&r=PG", "display_name": "fireman", "link": "https://stackoverflow.com/users/1932846/fireman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551946521, "creation_date": 1551897937, "last_edit_date": 1551943785, "question_id": 55030150, "link": "https://stackoverflow.com/questions/55030150/win32-programming-child-window-does-not-have-exit-button", "title": "Win32 programming child window does not have exit button", "body": "<p>Hi I am writing a Win32 Windows program. I created a child window with the following command</p>\n\n<pre><code>case ID_VIEW_CARVIEW:\n\n            carViewHwnd = CreateWindowEx(WS_EX_TOPMOST, L\"Edit\", L\"Edit\",\n                WS_VISIBLE | WS_POPUP | WS_CAPTION | WS_BORDER,\n                000, 00, 656, 519, hWnd, (HMENU)NULL, GetModuleHandle(NULL), NULL);\n            SetWindowLongPtr(carViewHwnd, GWLP_WNDPROC, (LONG_PTR)CarViewWndProc);\n</code></pre>\n\n<p>However, this child windows has two problems:</p>\n\n<ol>\n<li>It does not have a \"close\" button on the top right. </li>\n<li>It always stay on top of all windows on my desktop top. </li>\n</ol>\n\n<p>How can I change it?</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "winapi", "com"], "comments": [{"owner": {"reputation": 10720, "user_id": 999082, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/374368c921c7546bb4f38e2ccd633ad6?s=128&d=identicon&r=PG", "display_name": "Jazimov", "link": "https://stackoverflow.com/users/999082/jazimov"}, "edited": false, "score": 0, "creation_date": 1551898283, "post_id": 55030073, "comment_id": 96812970, "body": "Could you please clarify exactly what you&#39;re doing in Step 2? Are you in the folder text box when you&#39;re setting the new name or are you in the multi-column grid above, with the cursor on the New Folder folder?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1551898286, "post_id": 55030073, "comment_id": 96812972, "body": "This makes sense. Clicking on the &quot;Select Folder&quot; button while the folder name is still being edited will not apply the new name in time for the dialog to grab it. So the folder really is still named &quot;New Folder&quot; when the dialog is closed. That is not something you can address in your code, nor should you try. That is something that needs to be addressed by Microsoft in the dialog itself. File a bug report with Microsoft and move on. How often do you expect your users to edit folders inside an Open dialog?"}, {"owner": {"reputation": 155, "user_id": 4012609, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a6a0e2f35efcb129b662bfab66f3fd46?s=128&d=identicon&r=PG&f=1", "display_name": "bob", "link": "https://stackoverflow.com/users/4012609/bob"}, "edited": false, "score": 0, "creation_date": 1551898562, "post_id": 55030073, "comment_id": 96813088, "body": "Testing the file dialog we went into it first try."}, {"owner": {"reputation": 155, "user_id": 4012609, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a6a0e2f35efcb129b662bfab66f3fd46?s=128&d=identicon&r=PG&f=1", "display_name": "bob", "link": "https://stackoverflow.com/users/4012609/bob"}, "edited": false, "score": 0, "creation_date": 1551902464, "post_id": 55030073, "comment_id": 96815116, "body": "..or more specifically I expect the users often to create new folder and name them then."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1551907864, "post_id": 55030073, "comment_id": 96817466, "body": "I second Remy&#39;s comment. When you try to fix this behaviour in <i>your</i> code, you risk running into problems when MS changes the behaviour, possibly making it worse than before."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1551911374, "post_id": 55030073, "comment_id": 96818838, "body": "It&#39;s a Windows issue. Workaround it at your peril."}], "owner": {"reputation": 155, "user_id": 4012609, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a6a0e2f35efcb129b662bfab66f3fd46?s=128&d=identicon&r=PG&f=1", "display_name": "bob", "link": "https://stackoverflow.com/users/4012609/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551897984, "creation_date": 1551897570, "last_edit_date": 1551897984, "question_id": 55030073, "link": "https://stackoverflow.com/questions/55030073/windows-fileopendialog-returning-wrong-path", "title": "Windows FileOpenDialog returning wrong path", "body": "<p>I want to have a simple file dialog in which the user can select a folder like the following.</p>\n\n<p><a href=\"https://i.stack.imgur.com/B4XQT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/B4XQT.png\" alt=\"image\"></a></p>\n\n<p>When executing the following code snippet on Windows 10 build with the current Visual Studio 2017, I run into a weird problem. What I do</p>\n\n<ol>\n<li>create a new folder within the opened filedialog</li>\n<li>type in a new name for the folder</li>\n<li>while the text cursor is still visible for the new folder, I click on \"Select Folder\".</li>\n<li>Instead of the name I typed in for the selected folder, pszFilePath is \"New folder\".</li>\n</ol>\n\n<p>Instead I would expect the Dialog to first remove the focus from the new folder when I click on \"Select Folder\" and then I need a second click, to actually select the folder.</p>\n\n<p>Strangely enough this doesn't happen on all Windows 10 systems I tested this code on. Sometimes I can't reproduce the issue.</p>\n\n<p>Anyone with the same problem and maybe a workaround?</p>\n\n<pre><code>#include &lt;shobjidl.h&gt;\n#include &lt;windows.h&gt;\n\nvoid winOpenFileDialog ()\n{\n    HRESULT hr = CoInitializeEx (NULL, COINIT_APARTMENTTHREADED | COINIT_DISABLE_OLE1DDE);\n    if (SUCCEEDED (hr))\n    {\n        IFileOpenDialog* pFileOpen;\n\n        // Create the FileOpenDialog object.\n        hr = CoCreateInstance (CLSID_FileOpenDialog, NULL, CLSCTX_ALL, IID_IFileOpenDialog,\n            reinterpret_cast&lt;void**&gt; (&amp;pFileOpen));\n\n        if (SUCCEEDED (hr))\n        {\n            pFileOpen-&gt;SetOptions (FOS_PICKFOLDERS);\n            // Show the Open dialog box.\n            hr = pFileOpen-&gt;Show (NULL);\n\n            FILEOPENDIALOGOPTIONS opt;\n            pFileOpen-&gt;GetOptions (&amp;opt);\n\n            // Get the file name from the dialog box.\n            if (SUCCEEDED (hr))\n            {\n                IShellItem* pItem;\n                hr = pFileOpen-&gt;GetResult (&amp;pItem);\n                if (SUCCEEDED (hr))\n                {\n                    PWSTR pszFilePath;\n                    hr = pItem-&gt;GetDisplayName (SIGDN_FILESYSPATH, &amp;pszFilePath);\n\n                    // Display the file name to the user.\n                    if (SUCCEEDED (hr))\n                    {\n                        MessageBox (NULL, pszFilePath, L\"File Path\", MB_OK);\n                        CoTaskMemFree (pszFilePath);\n                    }\n                    pItem-&gt;Release ();\n                }\n            }\n            pFileOpen-&gt;Release ();\n        }\n        CoUninitialize ();\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "oop", "pointers"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 4, "creation_date": 1551897163, "post_id": 55029901, "comment_id": 96812475, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and the error messages from the compiler."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1551897278, "post_id": 55029901, "comment_id": 96812538, "body": "You should probably be using <code>std::vector</code>"}, {"owner": {"reputation": 27, "user_id": 11064418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qDrLpUt9JYE/AAAAAAAAAAI/AAAAAAAAAG4/xdilvbRqNeA/photo.jpg?sz=128", "display_name": "Lipaaaaaa", "link": "https://stackoverflow.com/users/11064418/lipaaaaaa"}, "edited": false, "score": 0, "creation_date": 1551898102, "post_id": 55029901, "comment_id": 96812901, "body": "Cheers R Sahu, I will take a look at that link later and edit or repost after reading it. This is my first time posting on this site. eerorika, we are not using &lt;vector&gt; in this program."}, {"owner": {"reputation": 716, "user_id": 6507170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdjYE.png?s=128&g=1", "display_name": "priojeet priyom", "link": "https://stackoverflow.com/users/6507170/priojeet-priyom"}, "edited": false, "score": 0, "creation_date": 1551899179, "post_id": 55029901, "comment_id": 96813355, "body": "What is meant by the size variable? Number of elements or size in memory bytes?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1551899671, "post_id": 55029901, "comment_id": 96813598, "body": "A shot in the dark because if it isn&#39;t a problem now, it will be some time soon: <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1551900000, "post_id": 55029901, "comment_id": 96813757, "body": "Side note: <code>FracList::set_ptr</code> needs a lot more smarts. For example, what happens to the storage at which <code>fracPtr</code> could already be pointing? If you are not required to write setters and getters for this class, I would not. They will break encapsulation unless you write them very carefully. For example, consider this bit of idiot code: <code>delete[] myFracList.get_ptr();</code> <code>myFracList</code> has no idea that someone else just destroyed its data. Only badness can result."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1551900274, "post_id": 55029901, "comment_id": 96813891, "body": "Your <code>set_ptr()</code> needs to take a <code>Fraction*</code> as input, not an <code>int*</code>. It is also leaking memory by not freeing the <code>Fraction[]</code> array that <code>fracPtr</code> is currently pointing at, before then taking ownership of the caller&#39;s pointer (which, in of itself, is bad design). A safer design would be to have a setter that takes a new <code>size</code> value instead, and then resize the internal <code>Fraction[]</code> array as needed.  Don&#39;t let the caller provide a new <code>Fraction*</code> pointer at all."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11064418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qDrLpUt9JYE/AAAAAAAAAAI/AAAAAAAAAG4/xdilvbRqNeA/photo.jpg?sz=128", "display_name": "Lipaaaaaa", "link": "https://stackoverflow.com/users/11064418/lipaaaaaa"}, "edited": false, "score": 0, "creation_date": 1551908280, "post_id": 55030939, "comment_id": 96817661, "body": "Yes, this is what I meant. I thank you VERY much Valeri for showing me how to initialize a pointer, along with all of the other comments/links everyone else posted. Much appreciated &lt;3"}, {"owner": {"reputation": 72, "user_id": 11140902, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cMHUHeEM24E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJTA94POIxecQkXDKTBwSSlVmwlA/mo/photo.jpg?sz=128", "display_name": "Valeri Grishin", "link": "https://stackoverflow.com/users/11140902/valeri-grishin"}, "edited": false, "score": 0, "creation_date": 1551967154, "post_id": 55030939, "comment_id": 96841568, "body": "You are right I corrected it now to pointer points to the same address"}], "tags": [], "owner": {"reputation": 72, "user_id": 11140902, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cMHUHeEM24E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJTA94POIxecQkXDKTBwSSlVmwlA/mo/photo.jpg?sz=128", "display_name": "Valeri Grishin", "link": "https://stackoverflow.com/users/11140902/valeri-grishin"}, "is_accepted": true, "score": 1, "last_activity_date": 1551967087, "last_edit_date": 1551967087, "creation_date": 1551900972, "answer_id": 55030939, "question_id": 55029901, "link": "https://stackoverflow.com/questions/55029901/intializing-a-pointer-from-a-class-from-a-different-class-type-c/55030939#55030939", "title": "Intializing a pointer from a class, from a different class type, C++", "body": "<p>So what you probably meant is this:</p>\n\n<pre><code>class Fraction{\npublic:\n     Fraction(){}\n};\n\nclass FracList{\nprivate:\n    Fraction *fracPtr;\n    int size;\n public:\n     Fraction* get_ptr();\n    FracList(int s);\n    void set_ptr(Fraction* p);\n};\n\n\n\nvoid FracList::set_ptr(Fraction* p)\n{\n    fracPtr = p;\n    cout&lt;&lt;\"The address of p is:\"&lt;&lt; p &lt;&lt;endl;\n}\n\nFraction *FracList::get_ptr()\n{\n    return fracPtr;\n}\nint main ()\n{\n    FracList f1(3);\n    Fraction* p=new Fraction;\n    f1.set_ptr(p);\n    cout&lt;&lt;\"the address of p is still:\" &lt;&lt; p &lt;&lt; endl;\n}\n</code></pre>\n\n<p>All that you have to do is to understand how to initialize a pointer. <code>Fraction *fracPtr = p;</code> This is the right way to do it and the parameter that you have to pass at this function is not an int, it should be a pointer to Fraction because you want to give to your data member an address that it will point to. The concept is similar to pointers in c :<a href=\"https://stackoverflow.com/questions/53800196/pointer-initialization-concept-in-c\">Pointer initialization concept in c</a></p>\n"}], "owner": {"reputation": 27, "user_id": 11064418, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-qDrLpUt9JYE/AAAAAAAAAAI/AAAAAAAAAG4/xdilvbRqNeA/photo.jpg?sz=128", "display_name": "Lipaaaaaa", "link": "https://stackoverflow.com/users/11064418/lipaaaaaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 55030939, "answer_count": 1, "score": -5, "last_activity_date": 1551967087, "creation_date": 1551896849, "last_edit_date": 1551900082, "question_id": 55029901, "link": "https://stackoverflow.com/questions/55029901/intializing-a-pointer-from-a-class-from-a-different-class-type-c", "title": "Intializing a pointer from a class, from a different class type, C++", "body": "<p>I am doing an assignment for my OOP C++ class. I am currently struggling with initializing a pointer. The directions for my assignment from this part state:</p>\n\n<blockquote>\n  <p>Define a class called FracList with private members fracPtr, a Fraction pointer and size to hold the size of the array of Fraction objects.</p>\n</blockquote>\n\n<p>My current code, which brings errors, goes like this. Note <code>Fraction</code> is another class.</p>\n\n<p>in FracList.h</p>\n\n<pre><code>private:\n    Fraction *fracPtr;\n    int size;\n</code></pre>\n\n<p>in FracList.cpp</p>\n\n<pre><code>void FracList::set_ptr(int* p)\n{\n    fracPtr = p;\n}\n\nFraction *FracList::get_ptr()\n{\n    return fracPtr;\n}\n\n// Default Constructor\n\nFracList::FracList(int s) : size(s)\n{\n    if (size &gt; 0)\n        fracPtr = new Fraction[size];\n    else\n        fracPtr = NULL;\n}\n</code></pre>\n\n<p>How do I properly initialize the <code>Fraction* fracPtr</code> pointer variable?</p>\n"}, {"tags": ["c++", "linux", "ubuntu", "video", "gstreamer"], "comments": [{"owner": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1552322304, "post_id": 55029884, "comment_id": 96955978, "body": "ok nice, try adding <code>do-timestamp=true</code> for the alsasrc in first solution. also you can debug whats going on with running your binary with env varbiable <code>GST_DEBUG=5 .&#47;your_binary</code> . Another thing is to try qtmux which has some quick time extensions over mp4mux (iirc)"}, {"owner": {"reputation": 21, "user_id": 6377341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb85e2f0ad8d167304abdf222e4341d3?s=128&d=identicon&r=PG&f=1", "display_name": "Antmau", "link": "https://stackoverflow.com/users/6377341/antmau"}, "reply_to_user": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1552381560, "post_id": 55029884, "comment_id": 96976823, "body": "For what I understood is necessary to perform some kind of conversion for the video stream to reduce the elaboration and sync it with the audio stream. Im still facing this problem, cause I cant set a right pipeline with a caps filter for the source (i wanna reduce the resolution and the frame rate)"}, {"owner": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1552490293, "post_id": 55029884, "comment_id": 97031253, "body": "I found very interesting post which advices to use zerolatency, which could solve your problem that x264enc is not keeping up with lamemp3enc. <a href=\"http://gstreamer-devel.966125.n4.nabble.com/audio-video-out-of-sync-td4675526.html\" rel=\"nofollow noreferrer\">gstreamer-devel.966125.n4.nabble.com/&hellip;</a> You should add queue before encoders (in first solution). The second one is overcomplicated, and I dont understand it well. Again, try it first with gst-launch."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6377341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb85e2f0ad8d167304abdf222e4341d3?s=128&d=identicon&r=PG&f=1", "display_name": "Antmau", "link": "https://stackoverflow.com/users/6377341/antmau"}, "edited": false, "score": 0, "creation_date": 1551956055, "post_id": 55040418, "comment_id": 96834892, "body": "thank you so much about your answer, you gave me some more detail, but i need to do it in a c code program, that&#39;s why i wrote this. Any details to do it through c code? thank you!"}, {"owner": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "reply_to_user": {"reputation": 21, "user_id": 6377341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb85e2f0ad8d167304abdf222e4341d3?s=128&d=identicon&r=PG&f=1", "display_name": "Antmau", "link": "https://stackoverflow.com/users/6377341/antmau"}, "edited": false, "score": 0, "creation_date": 1551967216, "post_id": 55040418, "comment_id": 96841607, "body": "my advise is to go with gst-launch which can be done in minutes of trial and error. Then when you have it working try to rewrite it into C by enhancing for example this <a href=\"https://gist.github.com/crearo/8c71729ed58c4c134cac44db74ea1754\" rel=\"nofollow noreferrer\">gist.github.com/crearo/8c71729ed58c4c134cac44db74ea1754</a>"}, {"owner": {"reputation": 21, "user_id": 6377341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb85e2f0ad8d167304abdf222e4341d3?s=128&d=identicon&r=PG&f=1", "display_name": "Antmau", "link": "https://stackoverflow.com/users/6377341/antmau"}, "edited": false, "score": 0, "creation_date": 1551992786, "post_id": 55040418, "comment_id": 96855416, "body": "i did that way for the code upon (so set the right gst-launch-1.0 command line and test it) before writing it, but i still cant set anything for the filesink in C. I tried to find something over the web but there&#39;s nothing exactly as i&#39;m asking (also on the gstreamer API official tutorials). I will look at your link and let you know, thanks in advance!!"}, {"owner": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "reply_to_user": {"reputation": 21, "user_id": 6377341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb85e2f0ad8d167304abdf222e4341d3?s=128&d=identicon&r=PG&f=1", "display_name": "Antmau", "link": "https://stackoverflow.com/users/6377341/antmau"}, "edited": false, "score": 0, "creation_date": 1552054089, "post_id": 55040418, "comment_id": 96877617, "body": "you can make another question for the filesink and give link here.. or you can update this question with your C code as the original topic of your question isnt changed"}], "tags": [], "owner": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "is_accepted": false, "score": 1, "last_activity_date": 1551951296, "creation_date": 1551951296, "answer_id": 55040418, "question_id": 55029884, "link": "https://stackoverflow.com/questions/55029884/gstreamer-recording-video-with-audio/55040418#55040418", "title": "Gstreamer recording video with audio", "body": "<p>What you need is the multiplexer - such GStreamer element that can merge two streams into one. </p>\n\n<p>mp4, mkv, avi.. are just a container formats which contains multiple \"data streams\", which can be audio, video, subtitles (not all formats support this).</p>\n\n<p>I don't know about your use case, but you don't need C code for what you do. You can just use <code>gst-launch-1.0</code> tool which has its own GStreamer kind-of-scripting language.</p>\n\n<p>For simplicity I will use debugging elements <code>videotestsrc</code> and <code>audiotestsrc</code> for simulating input (instead of actual camera etc).</p>\n\n<pre><code>gst-launch-1.0 -e videotestsrc ! x264enc ! mp4mux name=mux ! filesink location=\"bla.mp4\"  audiotestsrc ! lamemp3enc ! mux.\n\nvideotestsrc --&gt; x264enc -----\\\n                               &gt;---&gt; mp4mux ---&gt; filesink\naudiotestsrc --&gt; lamemp3enc --/ \n</code></pre>\n\n<p>Explanation:</p>\n\n<p>Videotestsrc generates raw video which is in GStreamer terms called \"video/x-raw\". </p>\n\n<p>However mp4 cannot hold raw video, so we need to encode it with for example x264enc which makes our data \"video/x-h264\". </p>\n\n<p>Then we can finally mux this into our mp4 with <code>mp4mux</code> element. </p>\n\n<p>When we take a look into GStreamer docs using <code>gst-inspect-1.0 mp4mux</code> we see that this element supports various formats amongst which there is also <code>video/x-h264</code>.</p>\n\n<p>The same thing we do with audio with either faac for AAC format or <code>lamemp3enc</code> for mp3. </p>\n\n<p>With <code>gst-launch-1.0</code> I did two tricks and one bonus trick:</p>\n\n<ol>\n<li>ability to have separate branches in one line. This is achieved by just separating those branches with space instead of !</li>\n<li>ability to make alias with <code>name=mux</code> and later on using it with adding dot right at the end of name like <code>mux.</code> . You can make up any name for that element you like.</li>\n<li>Write EOS after hitting ctrl+c to stop the recording. This is achieved with parameter <code>-e</code></li>\n</ol>\n\n<p>Finally the output goes to filesink which just writes anything you give it to file.</p>\n\n<p>Now for a homework you:</p>\n\n<ol>\n<li><p>Use your elements for what you need - v4l2, alsasrc </p></li>\n<li><p>Add queue elements to add buffering and <a href=\"https://gstreamer.freedesktop.org/documentation/tutorials/basic/multithreading-and-pad-availability.html\" rel=\"nofollow noreferrer\">thread separation</a></p></li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 6377341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb85e2f0ad8d167304abdf222e4341d3?s=128&d=identicon&r=PG&f=1", "display_name": "Antmau", "link": "https://stackoverflow.com/users/6377341/antmau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2943, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1552059201, "creation_date": 1551896795, "last_edit_date": 1552059201, "question_id": 55029884, "link": "https://stackoverflow.com/questions/55029884/gstreamer-recording-video-with-audio", "title": "Gstreamer recording video with audio", "body": "<p><br>\nI'm trying to record on a file a video from my webcam along with audio using Gstreamer on my Ubuntu 16 machine through glib library.<br>\nI'm able to watch the video streaming from the webcam through these code lines</p>\n\n<pre><code>#include &lt;gst/gst.h&gt;\n\nint main(int argc, char *argv[]) {\n    GstElement *pipeline, *source, *sink, *convert;\n    GstBus *bus;\n    GstMessage *msg;\n    GstStateChangeReturn ret;\n\n    /* Initialize GStreamer */\n    gst_init (&amp;argc, &amp;argv);\n\n    /* Create the elements */\n    source = gst_element_factory_make (\"v4l2src\", \"source\");\n    sink = gst_element_factory_make (\"autovideosink\", \"sink\");\n    convert =gst_element_factory_make(\"videoconvert\",\"convert\");\n    //convert = gst_element_factory_make (\"audioconvert\", \"convert\");\n    //sink = gst_element_factory_make (\"autoaudiosink\", \"sink\");\n\n    /* Create the empty pipeline */\n    pipeline = gst_pipeline_new (\"test-pipeline\");\n\n    if (!pipeline || !source || !sink || !convert) {\n        g_printerr (\"Not all elements could be created.\\n\");\n        return -1;\n    }\n\n    /*set der source*/\n    g_object_set (source, \"device\", \"/dev/video0\", NULL);\n\n    /* Build the pipeline */\n    gst_bin_add_many (GST_BIN (pipeline), source, sink, convert, NULL);\n    if (gst_element_link (convert, sink) != TRUE) {\n        g_printerr (\"Elements could not be linked confert sink.\\n\");\n        gst_object_unref (pipeline);\n        return -1;\n    }\n\n\n    if (gst_element_link (source, convert) != TRUE) {\n        g_printerr (\"Elements could not be linked source -convert.\\n\");\n        gst_object_unref (pipeline);\n        return -1;\n    }\n\n    /* Start playing */\n    ret = gst_element_set_state (pipeline, GST_STATE_PLAYING);\n    if (ret == GST_STATE_CHANGE_FAILURE) {\n        g_printerr (\"Unable to set the pipeline to the playing state.\\n\");\n        gst_object_unref (pipeline);\n        return -1;\n    }\n\n    /* Wait until error or EOS */\n    bus = gst_element_get_bus (pipeline);\n    msg = gst_bus_timed_pop_filtered (bus, GST_CLOCK_TIME_NONE,(GstMessageType) (GST_MESSAGE_ERROR | GST_MESSAGE_EOS));\n\n    /* Parse message */\n    if (msg != NULL) {\n        GError *err;\n        gchar *debug_info;\n\n        switch (GST_MESSAGE_TYPE (msg)) {\n            case GST_MESSAGE_ERROR:\n                gst_message_parse_error (msg, &amp;err, &amp;debug_info);\n                g_printerr (\"Error received from element %s: %s\\n\", GST_OBJECT_NAME (msg-&gt;src), err-&gt;message);\n                g_printerr (\"Debugging information: %s\\n\", debug_info ? debug_info : \"none\");\n                g_clear_error (&amp;err);\n                g_free (debug_info);\n                break;\n            case GST_MESSAGE_EOS:\n                g_print (\"End-Of-Stream reached.\\n\");\n                break;\n            default:\n                /* We should not reach here because we only asked for ERRORs and EOS */\n                g_printerr (\"Unexpected message received.\\n\");\n                break;\n        }\n        gst_message_unref (msg);\n    }\n\n    /* Free resources */\n    gst_object_unref (bus);\n    gst_element_set_state (pipeline, GST_STATE_NULL);\n    gst_object_unref (pipeline);\n    return 0;\n}\n</code></pre>\n\n<p><br>and to capture audio from microphone and listen it through the speakers using these code lines<br></p>\n\n<pre><code>#include &lt;gst/gst.h&gt;\n#include &lt;glib.h&gt;\n\nstatic gboolean\nbus_call (GstBus     *bus,\n          GstMessage *msg,\n          gpointer    data){\n  GMainLoop *loop = (GMainLoop *) data;\n\n  switch (GST_MESSAGE_TYPE (msg)) {\n\n    case GST_MESSAGE_EOS:\n      g_print (\"End of stream\\n\");\n      g_main_loop_quit (loop);\n      break;\n\n    case GST_MESSAGE_ERROR: {\n      gchar  *debug;\n      GError *error;\n\n      gst_message_parse_error (msg, &amp;error, &amp;debug);\n      g_free (debug);\n\n      g_printerr (\"Error: %s\\n\", error-&gt;message);\n      g_error_free (error);\n\n      g_main_loop_quit (loop);\n      break;\n    }\n    default:\n      break;\n  }\n\n  return TRUE;\n}\n\n/* Main function for audio pipeline initialization and looping streaming process  */\ngint\nmain (gint argc, gchar **argv) {\n    GMainLoop *loop;\n    GstElement *pipeline, *audio_source, *sink; \n    GstBus *bus;\n    guint bus_watch_id;\n    GstCaps *caps;\n    gboolean ret;\n\n    /* Initialization of gstreamer */\n    gst_init (&amp;argc, &amp;argv);\n    loop = g_main_loop_new (NULL, FALSE);\n\n    /* Elements creation */\n    pipeline     = gst_pipeline_new (\"audio_stream\");\n    audio_source = gst_element_factory_make (\"alsasrc\", \"audio_source\");\n    sink   = gst_element_factory_make (\"alsasink\", \"audio_sink\");\n\n    // video_source = gst_element_factory_make (\"v4l2src\", \"source\");\n    // video_sink   = gst_element_factory_make (\"autovideosink\", \"sink\");\n    // video_convert= gst_element_factory_make(\"videoconvert\",\"convert\");\n\n    if (!pipeline) {\n        g_printerr (\"Audio: Pipeline couldn't be created\\n\");\n        return -1;\n    }\n    if (!audio_source) {\n        g_printerr (\"Audio: alsasrc couldn't be created\\n\");\n        return -1;\n    }\n    if (!sink) {\n        g_printerr (\"Audio: Output file couldn't be created\\n\");\n        return -1;\n    }\n\n    g_object_set (G_OBJECT (audio_source), \"device\", \"hw:1,0\", NULL);\n    g_object_set (G_OBJECT (sink), \"device\", \"hw:1,0\", NULL);\n\n    bus = gst_pipeline_get_bus (GST_PIPELINE (pipeline));\n    bus_watch_id = gst_bus_add_watch (bus, bus_call, loop);\n    gst_object_unref (bus);\n\n    gst_bin_add_many (GST_BIN(pipeline), audio_source, sink, NULL);\n\n    caps = gst_caps_new_simple (\"audio/x-raw\", \"format\", G_TYPE_STRING, \"S16LE\",  \"layout\", G_TYPE_STRING, \"interleaved\", \"rate\", G_TYPE_INT, (int)44100, \"channels\", G_TYPE_INT, (int)2, NULL);\n    ret = gst_element_link_filtered (audio_source, sink, caps);\n    if (!ret) {\n        g_print (\"audio_source and sink couldn't be linked\\n\");\n        gst_caps_unref (caps);\n        return FALSE;\n    }\n\n    gst_element_set_state (pipeline, GST_STATE_PLAYING);\n\n    g_print (\"streaming...\\n\");\n    g_main_loop_run (loop);\n\n    g_print (\"Returned, stopping stream\\n\");\n    gst_element_set_state (pipeline, GST_STATE_NULL);\n\n    g_print (\"Deleting pipeline\\n\");\n    gst_object_unref (GST_OBJECT (pipeline));\n    g_source_remove (bus_watch_id);\n    g_main_loop_unref (loop);\n\n    return 0;\n}\n</code></pre>\n\n<p><br> What i really don't understand is how to get video from the webcam and audio from my alsa hw at the same time and save them into a file (such as .mp4 for ex). Can anyone help me? I tried to find something useful, but there's nothing on the board. In addition, it would be really appreciate also how to save just the video stream or just the audio stream in separated files.<br></p>\n\n<p>UPDATE<br>\nI looked again to the tutorials and to the git link gave by @nayana, so i tried myself to code something. I have two results: <br></p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;gst/gst.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nstatic GMainLoop *loop;\nstatic GstElement *pipeline;\nstatic GstElement *muxer, *sink;\nstatic GstElement *src_video, *encoder_video, *queue_video; \nstatic GstElement *src_audio, *encoder_audio, *queue_audio;\nstatic GstBus *bus;\n\nstatic gboolean\nmessage_cb (GstBus * bus, GstMessage * message, gpointer user_data)\n{\n  switch (GST_MESSAGE_TYPE (message)) {\n    case GST_MESSAGE_ERROR:{\n      GError *err = NULL;\n      gchar *name, *debug = NULL;\n\n      name = gst_object_get_path_string (message-&gt;src);\n      gst_message_parse_error (message, &amp;err, &amp;debug);\n\n      g_printerr (\"ERROR: from element %s: %s\\n\", name, err-&gt;message);\n      if (debug != NULL)\n        g_printerr (\"Additional debug info:\\n%s\\n\", debug);\n\n      g_error_free (err);\n      g_free (debug);\n      g_free (name);\n\n      g_main_loop_quit (loop);\n      break;\n    }\n    case GST_MESSAGE_WARNING:{\n    GError *err = NULL;\n    gchar *name, *debug = NULL;\n\n    name = gst_object_get_path_string (message-&gt;src);\n    gst_message_parse_warning (message, &amp;err, &amp;debug);\n\n    g_printerr (\"ERROR: from element %s: %s\\n\", name, err-&gt;message);\n    if (debug != NULL)\n    g_printerr (\"Additional debug info:\\n%s\\n\", debug);\n\n    g_error_free (err);\n    g_free (debug);\n    g_free (name);\n    break;\n    }\n    case GST_MESSAGE_EOS:{\n    g_print (\"Got EOS\\n\");\n    g_main_loop_quit (loop);\n    gst_element_set_state (pipeline, GST_STATE_NULL);\n    g_main_loop_unref (loop);\n    gst_object_unref (pipeline);\n    exit(0);\n    break;\n  }\n    default:\n    break;\n  }\n\n  return TRUE;\n}\n\nvoid sigintHandler(int unused) {\n  g_print(\"You ctrl-c-ed! Sending EoS\");\n  gst_element_send_event(pipeline, gst_event_new_eos()); \n}\n\nint main(int argc, char *argv[])\n{\n  signal(SIGINT, sigintHandler);\n  gst_init (&amp;argc, &amp;argv);\n\n  pipeline = gst_pipeline_new(NULL);\n\n  src_video = gst_element_factory_make(\"v4l2src\", NULL);\n  encoder_video = gst_element_factory_make(\"x264enc\", NULL);\n  queue_video = gst_element_factory_make(\"queue\", NULL);\n\n  src_audio = gst_element_factory_make (\"alsasrc\", NULL);\n  encoder_audio = gst_element_factory_make(\"lamemp3enc\", NULL);\n  queue_audio = gst_element_factory_make(\"queue\", NULL);\n\n  muxer = gst_element_factory_make(\"mp4mux\", NULL);\n  sink = gst_element_factory_make(\"filesink\", NULL);\n\n  if (!pipeline || !src_video || !encoder_video || !src_audio || !encoder_audio\n        || !queue_video || !queue_audio || !muxer || !sink) {\n    g_error(\"Failed to create elements\");\n    return -1;\n  }\n\n  g_object_set(src_audio, \"device\", \"hw:1,0\", NULL);\n  g_object_set(sink, \"location\", \"video_audio_test.mp4\", NULL);\n\n\n  gst_bin_add_many(GST_BIN(pipeline), src_video, encoder_video, queue_video, \n    src_audio, encoder_audio, queue_audio, muxer, sink, NULL);\n\n  gst_element_link_many (src_video,encoder_video,queue_video, muxer,NULL);\n\n  gst_element_link_many (src_audio,encoder_audio,queue_audio, muxer,NULL);\n\n  if (!gst_element_link_many(muxer, sink, NULL)){\n    g_error(\"Failed to link elements\");\n    return -2;\n  }\n\n  loop = g_main_loop_new(NULL, FALSE);\n\n  bus = gst_pipeline_get_bus(GST_PIPELINE (pipeline));\n  gst_bus_add_signal_watch(bus);\n  g_signal_connect(G_OBJECT(bus), \"message\", G_CALLBACK(message_cb), NULL);\n  gst_object_unref(GST_OBJECT(bus));\n\n  gst_element_set_state(pipeline, GST_STATE_PLAYING);\n\n  g_print(\"Starting loop\");\n  g_main_loop_run(loop);\n\n  return 0;\n}\n</code></pre>\n\n<p>With this upon i am able to record the video from the cam, but the audio is recorded for just one second somewhere randomly during the recording and it gives me this error <br></p>\n\n<pre><code>ERROR: from element /GstPipeline:pipeline0/GstAlsaSrc:alsasrc0: Can't record audio fast enough\nAdditional debug info:\ngstaudiobasesrc.c(869): gst_audio_base_src_create (): /GstPipeline:pipeline0/GstAlsaSrc:alsasrc0:\nDropped 206388 samples. This is most likely because downstream can't keep up and is consuming samples too slowly.&lt;br&gt;\n</code></pre>\n\n<p>So i tried to add some setting and queues <br></p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;gst/gst.h&gt;\n#include &lt;signal.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\nstatic GMainLoop *loop;\nstatic GstElement *pipeline;\nstatic GstElement *muxer, *sink;\nstatic GstElement *src_video, *encoder_video, *queue_video, *rate_video, *scale_video, *capsfilter_video; \nstatic GstElement *src_audio, *encoder_audio, *queue_audio, *queue_audio2, *capsfilter_audio, *rate_audio;\nstatic GstBus *bus;\nstatic GstCaps *caps;\n\nstatic gboolean\nmessage_cb (GstBus * bus, GstMessage * message, gpointer user_data)\n{\n  switch (GST_MESSAGE_TYPE (message)) {\n    case GST_MESSAGE_ERROR:{\n      GError *err = NULL;\n      gchar *name, *debug = NULL;\n\n      name = gst_object_get_path_string (message-&gt;src);\n      gst_message_parse_error (message, &amp;err, &amp;debug);\n\n      g_printerr (\"ERROR: from element %s: %s\\n\", name, err-&gt;message);\n      if (debug != NULL)\n        g_printerr (\"Additional debug info:\\n%s\\n\", debug);\n\n      g_error_free (err);\n      g_free (debug);\n      g_free (name);\n\n      g_main_loop_quit (loop);\n      break;\n    }\n    case GST_MESSAGE_WARNING:{\n    GError *err = NULL;\n    gchar *name, *debug = NULL;\n\n    name = gst_object_get_path_string (message-&gt;src);\n    gst_message_parse_warning (message, &amp;err, &amp;debug);\n\n    g_printerr (\"ERROR: from element %s: %s\\n\", name, err-&gt;message);\n    if (debug != NULL)\n    g_printerr (\"Additional debug info:\\n%s\\n\", debug);\n\n    g_error_free (err);\n    g_free (debug);\n    g_free (name);\n    break;\n    }\n    case GST_MESSAGE_EOS:{\n    g_print (\"Got EOS\\n\");\n    g_main_loop_quit (loop);\n    gst_element_set_state (pipeline, GST_STATE_NULL);\n    g_main_loop_unref (loop);\n    gst_object_unref (pipeline);\n    exit(0);\n    break;\n  }\n    default:\n    break;\n  }\n\n  return TRUE;\n}\n\nvoid sigintHandler(int unused) {\n  g_print(\"You ctrl-c-ed! Sending EoS\");\n  gst_element_send_event(pipeline, gst_event_new_eos()); \n}\n\nint main(int argc, char *argv[])\n{\n  signal(SIGINT, sigintHandler);\n  gst_init (&amp;argc, &amp;argv);\n\n  pipeline = gst_pipeline_new(NULL);\n\n  src_video = gst_element_factory_make(\"v4l2src\", NULL);\n  rate_video = gst_element_factory_make (\"videorate\", NULL);\n  scale_video = gst_element_factory_make (\"videoscale\", NULL);\n  capsfilter_video = gst_element_factory_make (\"capsfilter\", NULL);\n  queue_video = gst_element_factory_make(\"queue\", NULL);\n  encoder_video = gst_element_factory_make(\"x264enc\", NULL);\n\n  src_audio = gst_element_factory_make (\"alsasrc\", NULL);\n  capsfilter_audio = gst_element_factory_make (\"capsfilter\", NULL);\n  queue_audio = gst_element_factory_make(\"queue\", NULL);\n  rate_audio = gst_element_factory_make (\"audiorate\", NULL);\n  queue_audio2 = gst_element_factory_make(\"queue\", NULL);\n  encoder_audio = gst_element_factory_make(\"lamemp3enc\", NULL);\n\n  muxer = gst_element_factory_make(\"mp4mux\", NULL);\n  sink = gst_element_factory_make(\"filesink\", NULL);\n\n  if (!pipeline || !src_video || !rate_video || !scale_video || !capsfilter_video \n     || !queue_video || !encoder_video || !src_audio || !capsfilter_audio \n     || !queue_audio || !rate_audio || !queue_audio2 || !encoder_audio \n     || !muxer || !sink) {\n    g_error(\"Failed to create elements\");\n    return -1;\n  }\n\n  // Set up the pipeline\n  g_object_set(src_video, \"device\", \"/dev/video0\", NULL); \n  g_object_set(src_audio, \"device\", \"hw:1,0\", NULL);\n  g_object_set(sink, \"location\", \"video_audio_test.mp4\", NULL);\n\n  // video settings\n  caps = gst_caps_from_string(\"video/x-raw,format=(string)I420,width=480,height=384,framerate=(fraction)25/1\");\n  g_object_set (G_OBJECT (capsfilter_video), \"caps\", caps, NULL);\n  gst_caps_unref (caps); \n\n  // audio settings\n  caps = gst_caps_from_string(\"audio/x-raw,rate=44100,channels=1\");\n  g_object_set (G_OBJECT (capsfilter_audio), \"caps\", caps, NULL);\n  gst_caps_unref (caps);\n\n  // add all elements into the pipeline \n  gst_bin_add_many(GST_BIN(pipeline), src_video, rate_video, scale_video, capsfilter_video, \n    queue_video, encoder_video, src_audio, capsfilter_audio, queue_audio, rate_audio, \n    queue_audio2, encoder_audio, muxer, sink, NULL);\n\n  if (!gst_element_link_many (src_video,rate_video,scale_video, capsfilter_video,\n    queue_video, encoder_video, muxer,NULL))\n  {\n    g_error(\"Failed to link video elements\");\n    return -2;\n  }\n\n  if (!gst_element_link_many (src_audio, capsfilter_audio, queue_audio, rate_audio, \n    queue_audio2, encoder_audio, muxer,NULL))\n  {\n    g_error(\"Failed to link audio elements\");\n    return -2;\n  }\n\n  if (!gst_element_link_many(muxer, sink, NULL))\n  {\n    g_error(\"Failed to link elements\");\n    return -2;\n  }\n\n  loop = g_main_loop_new(NULL, FALSE);\n\n  bus = gst_pipeline_get_bus(GST_PIPELINE (pipeline));\n  gst_bus_add_signal_watch(bus);\n  g_signal_connect(G_OBJECT(bus), \"message\", G_CALLBACK(message_cb), NULL);\n  gst_object_unref(GST_OBJECT(bus));\n\n  gst_element_set_state(pipeline, GST_STATE_PLAYING);\n\n  g_print(\"Starting loop\");\n  g_main_loop_run(loop);\n\n  return 0;\n}\n</code></pre>\n\n<p>This time the code doesnt record anything and give me the following error<br></p>\n\n<pre><code>   ERROR: from element /GstPipeline:pipeline0/GstAlsaSrc:alsasrc0: Internal data flow error.\nAdditional debug info:\ngstbasesrc.c(2948): gst_base_src_loop (): /GstPipeline:pipeline0/GstAlsaSrc:alsasrc0:\nstreaming task paused, reason not-negotiated (-4)\n</code></pre>\n\n<p>Can you address me to fix the error?<br>\nThanks in advance</p>\n"}, {"tags": ["c++", "c++11", "floating-point-conversion"], "comments": [{"owner": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "edited": false, "score": 4, "creation_date": 1551896005, "post_id": 55029643, "comment_id": 96811970, "body": "If you can use C++17, you can round-trip using hexadecimal floating point literals. I do this all the time for (say) digital filter coefficients, quadrature nodes, so on. Controversy avoided."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "edited": false, "score": 0, "creation_date": 1551896183, "post_id": 55029643, "comment_id": 96812054, "body": "That&#39;s a great answer - except I happen to be limited to C++11 currently.  So I&#39;m also interested in &quot;downlevel&quot; C++!"}, {"owner": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "edited": false, "score": 1, "creation_date": 1551896378, "post_id": 55029643, "comment_id": 96812126, "body": "I think you will suffer then. If there was a good answer to your question which didn&#39;t resort to hexadecimal floating point literals, then why did it need to be added to C++17?"}, {"owner": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "edited": false, "score": 0, "creation_date": 1551896507, "post_id": 55029643, "comment_id": 96812182, "body": "Note: I&#39;m not an expert on this, but check out the &quot;table maker&#39;s dilemma&quot; in Higham&#39;s accuracy and stabilty of numerical algorithms. I <i>think</i> this shows what you want is impossible."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "edited": false, "score": 0, "creation_date": 1551896554, "post_id": 55029643, "comment_id": 96812209, "body": "@user14717 - Well, maybe there are ways to do it which are inconvenient and/or non-obvious.  I mean, why add binary integer literals when we already had hex and octal literals?"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 3792, "user_id": 904050, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7e5ae1599008ffc96ccd44ad601a43dc?s=128&d=identicon&r=PG", "display_name": "user14717", "link": "https://stackoverflow.com/users/904050/user14717"}, "edited": false, "score": 0, "creation_date": 1551896712, "post_id": 55029643, "comment_id": 96812273, "body": "@user14717 - w.r.t. table maker&#39;s dilemma - I don&#39;t think so, this is more related to, e.g., <a href=\"https://dl.acm.org/citation.cfm?id=93557\" rel=\"nofollow noreferrer\">this paper &quot;How to read floating point numbers accurately&quot;</a> - a 1990 paper but progress (in terms of runtime libraries) in this particular area has been slow."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1551899320, "post_id": 55029643, "comment_id": 96813426, "body": "Without hexadecimal FP literals: What about storing the exact bit pattern in a char array and <code>memcpy</code> it into the double variable?"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1551900504, "post_id": 55029643, "comment_id": 96814014, "body": "@Aconcagua - thanks - I know how to &quot;work around&quot; the issue but what I&#39;m looking for is a rule on how to use C++ floating-point literals so that workarounds aren&#39;t necessary."}], "answers": [{"comments": [{"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1551908141, "post_id": 55032406, "comment_id": 96817586, "body": "This is doable - esp. (for <code>float</code>) with the aid of the <a href=\"https://www.h-schmidt.net/FloatConverter/IEEE754.html\" rel=\"nofollow noreferrer\">online converter here</a>.  And maybe it&#39;s the best rule overall.  Let&#39;s wait just a bit and see."}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 2, "last_activity_date": 1551907613, "creation_date": 1551907613, "answer_id": 55032406, "question_id": 55029643, "link": "https://stackoverflow.com/questions/55029643/floating-point-literal-to-ieee-754-binary-pattern-consistency-across-compilers/55032406#55032406", "title": "Floating-point literal to IEEE-754 binary pattern consistency across compilers", "body": "<p>You can take advantage of the fact that, while every decimal floating point number does not have an exact representation in the IEEE-754 floating point representation (which uses binary), <em>every IEEE floating point number has an exact representation as a decimal floating point number</em>.</p>\n\n<p>The C++ language specification, in the <code>[lex.fcon]</code> (\"floating literals\"), discusses floating point literals.  After a description of all the parts of a floating point literal, it says</p>\n\n<blockquote>\n  <p>If the scaled value is in the range of representable values for its type, the result is the scaled value if representable, else the larger or smaller representable value nearest the scaled value, chosen in an implementation-defined manner.</p>\n</blockquote>\n\n<p>(This working is the same in both N3242, a C++11 late working paper, and N4741 from 2018.  I was unable to find this description on <a href=\"https://en.cppreference.com/w/\" rel=\"nofollow noreferrer\">CPPReference</a>.)</p>\n\n<p>This means that numbers like <code>0.1</code> can be either slightly less or slightly more than the desired value, others like <code>0.5</code> or <code>0.000000000931322574615478515625</code> (2<sup>-30</sup>) will have that value with all conforming compilers.</p>\n\n<p>You'll need to take your decimal number, get an IEEE-754 representation for the number either just before or just after it, then convert that representation to an equivalent decimal number.  Once you have that, all standards conformant compilers that support the IEEE-754 floating point format should give you the exact same constant.</p>\n"}], "owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 55032406, "answer_count": 1, "score": 2, "last_activity_date": 1551907613, "creation_date": 1551895844, "last_edit_date": 1551897412, "question_id": 55029643, "link": "https://stackoverflow.com/questions/55029643/floating-point-literal-to-ieee-754-binary-pattern-consistency-across-compilers", "title": "Floating-point literal to IEEE-754 binary pattern consistency across compilers", "body": "<p>Here's a <a href=\"https://stackoverflow.com/questions/20963419/cross-platform-floating-point-consistency\">question with answers on \"Cross Platform Floating Point Consistency\"</a> but it talks exclusively about <em>runtime</em> consistency (of IEEE floating point).</p>\n\n<p>I'm interested in <em>compile-time</em> consistency, specifically:</p>\n\n<blockquote>\n  <p>If I have a specific floating-point number and want to put a\n  floating-point literal in my source code and have every compiler\n  targeting an IEEE-754 architecture compile that to the same bit\n  pattern that is in fact that float (or double): what do I need to do?</p>\n</blockquote>\n\n<ul>\n<li>A certain number of digits?</li>\n<li>The exact decimal number for that bit pattern (rather than any decimal number that maps to that binary pattern)?</li>\n<li>Or?</li>\n</ul>\n\n<p>(I know there has been controversy for years over what you need to do to round-trip floating point values from IEEE format to decimal representations and back and I don't know if this is or is not an issue with floating point literals and the compilers (and the C++ standard).)</p>\n"}, {"tags": ["c++", "vector", "graphics", "directx", "directx-12"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1551895456, "post_id": 55029515, "comment_id": 96811683, "body": "You should use <code>XMVectorSetInt</code> if you want to store integer data."}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 0, "creation_date": 1551895597, "post_id": 55029515, "comment_id": 96811749, "body": "<code>1065353216</code> is <code>0x3F800000</code> in hex, what is IEEE754 representation of 1.0f."}, {"owner": {"reputation": 145, "user_id": 9442094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fdea5580aba4a8a620d6d5a8c341a?s=128&d=identicon&r=PG&f=1", "display_name": "Natalo77", "link": "https://stackoverflow.com/users/9442094/natalo77"}, "edited": false, "score": 0, "creation_date": 1551895716, "post_id": 55029515, "comment_id": 96811802, "body": "Ah I see! So what&#39;s the intended use of XMVectorSet then?"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1551896423, "post_id": 55029515, "comment_id": 96812146, "body": "Everything not suffixed with *Int is for floating point data."}], "answers": [{"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 0, "last_activity_date": 1551919759, "last_edit_date": 1551919759, "creation_date": 1551919439, "answer_id": 55034386, "question_id": 55029515, "link": "https://stackoverflow.com/questions/55029515/xmvector-weird-values/55034386#55034386", "title": "XMVECTOR weird values", "body": "<p>The underlying SIMD instructions are typeless. You can treat the same data as 4 floats or as 4 integers (or 8 shorts or 16 bytes). DirectXMath usually works with 4 floats, which is what your <code>XMVECTOR</code> is getting from <code>XMVectorSet</code>.</p>\n\n<p>If you used <code>float x = XMVectorGetX(vector);</code> you'd get \"1.0\" back.</p>\n\n<p>Alternatively, you could have used <code>XMVECTOR vector = XMVectorSetInt(1, 2, 3, 1);</code></p>\n\n<p>See <a href=\"https://docs.microsoft.com/en-us/windows/desktop/dxmath/ovw-xnamath-progguide\" rel=\"nofollow noreferrer\">DirectXMath Programmer's Guide</a> as well as the <a href=\"https://github.com/Microsoft/DirectXMath/\" rel=\"nofollow noreferrer\">GitHub project</a>.</p>\n"}], "owner": {"reputation": 145, "user_id": 9442094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61fdea5580aba4a8a620d6d5a8c341a?s=128&d=identicon&r=PG&f=1", "display_name": "Natalo77", "link": "https://stackoverflow.com/users/9442094/natalo77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 55034386, "answer_count": 1, "score": 0, "last_activity_date": 1551919759, "creation_date": 1551895283, "question_id": 55029515, "link": "https://stackoverflow.com/questions/55029515/xmvector-weird-values", "title": "XMVECTOR weird values", "body": "<p>Starting out with DirectX and messing around with XMVECTORs</p>\n\n<p>(I know I don't use them in context, I'm just curious)</p>\n\n<pre><code>// Vectors.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\n#include &lt;DirectXMath.h&gt;\n#include &lt;DirectXPackedVector.h&gt;\n\n\nint main()\n{\n    using namespace DirectX;\n\n    XMVECTOR vector = XMVectorSet(1, 2, 3, 1);\n\n    int x = XMVectorGetIntX(vector);\n\n    std::cout &lt;&lt; \"vector.x: \" &lt;&lt; x &lt;&lt; std::endl;\n\n    system(\"pause\");\n\n    return 0;\n}\n</code></pre>\n\n<p>This prints a value of <strong>1065353216</strong></p>\n\n<p>Whilst interesting, I'm wondering what I'm doing wrong, or if this is indeed the intended functionality.</p>\n"}, {"tags": ["c++", "templates", "iostream", "iomanip"], "comments": [{"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1551895036, "post_id": 55029240, "comment_id": 96811507, "body": "1/ see <a href=\"https://stackoverflow.com/q/1134388/136208\">stackoverflow.com/q/1134388/136208</a> 2/ writing a custom streambuf is the way the IO subsystem is designed for such kind of extension"}], "answers": [{"tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 1, "last_activity_date": 1551895142, "last_edit_date": 1551895142, "creation_date": 1551894573, "answer_id": 55029312, "question_id": 55029240, "link": "https://stackoverflow.com/questions/55029240/why-doesnt-template-operator-deduce-stdendl/55029312#55029312", "title": "Why doesn&#39;t template operator&lt;&lt; deduce std::endl?", "body": "<p>Because, as a function template, <a href=\"https://en.cppreference.com/w/cpp/io/manip/endl\" rel=\"nofollow noreferrer\"><code>std::endl</code></a> is an overload set with regard to template argument deduction; and template argument deduction can't work on overload sets (unless it only contains one function of course).</p>\n\n<p>To illustrate, consider:</p>\n\n<pre><code>template&lt;class Function&gt;\nvoid functor(Function f)\n{ f(0); }\n\nvoid g(float) {}\nvoid g(double) {}\n\nfunctor(g);\n</code></pre>\n\n<p>There is no reason to favor one version of <code>g</code> over the other, and unless you explicitly specialize <code>functor</code> (<code>functor&lt;void(float)&gt;(f)</code> is fine), template argument deduction must fail.</p>\n\n<p>This is also true if <code>g</code> is a template: <a href=\"http://coliru.stacked-crooked.com/a/8e27a45bbeedd979\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/8e27a45bbeedd979</a></p>\n"}, {"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1551894693, "creation_date": 1551894693, "answer_id": 55029349, "question_id": 55029240, "link": "https://stackoverflow.com/questions/55029240/why-doesnt-template-operator-deduce-stdendl/55029349#55029349", "title": "Why doesn&#39;t template operator&lt;&lt; deduce std::endl?", "body": "<p><code>std::endl</code> is itself a template. When you have the first overload, its arguments can be deduced by matching to the function pointer. For that is one instance where TAD happens.</p>\n\n<p>With <em>just</em> the <code>operator&lt;&lt;</code> template, what is there to deduce from? Both templates need their arguments deduced.</p>\n"}], "owner": {"reputation": 29435, "user_id": 458742, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ee0a7599f30c29076a3c9a2c022e473b?s=128&d=identicon&r=PG", "display_name": "spraff", "link": "https://stackoverflow.com/users/458742/spraff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1551895125, "answer_count": 2, "score": 0, "last_activity_date": 1551895142, "creation_date": 1551894273, "question_id": 55029240, "link": "https://stackoverflow.com/questions/55029240/why-doesnt-template-operator-deduce-stdendl", "closed_reason": "Duplicate", "title": "Why doesn&#39;t template operator&lt;&lt; deduce std::endl?", "body": "<p>This will compile and run if you uncomment the first operator definition:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct logger\n{\n    std::ostream &amp;loggingStream;\n    logger(std::ostream &amp;ls) : loggingStream(ls) {}\n\n};\n\n/*\nlogger &amp;operator&lt;&lt;(logger &amp;l, std::ostream &amp; (*manip)(std::ostream &amp;)) {\n    manip(l.loggingStream);\n    return l;\n}\n*/\n\ntemplate&lt;typename T&gt;\nlogger &amp;operator&lt;&lt;(logger &amp;l, const T &amp;t) {\n    l.loggingStream &lt;&lt; t;\n    return l;\n}\n\nint main() {\n    logger l(std::cout);\n\n    l &lt;&lt; \"Hello\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>With the comment in place:</p>\n\n<pre><code>error: no match for \u2018operator&lt;&lt;\u2019 (operand types are \u2018logger\u2019 and \u2018&lt;unresolved overloaded function type&gt;\u2019)\n</code></pre>\n\n<p>Why do I need to provide a non-template overload to handle <code>endl</code>?</p>\n"}, {"tags": ["c++", "c-strings"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1551894410, "post_id": 55029196, "comment_id": 96811195, "body": "<i><a href=\"https://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\">&quot;Returns a pointer to a null-terminated character array with data equivalent to those stored in the string.&quot;</a></i> It does, but using it in the <code>std::string operator+(const char*, const std::string&amp;)</code> ignores the terminating <code>&#39;\\0&#39;</code> character to produce the result."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1551894424, "post_id": 55029196, "comment_id": 96811206, "body": "it&#39;s not  actually <code>.c_str()</code>, it&#39;s actually the constructor that&#39;s confusing you."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551895240, "post_id": 55029196, "comment_id": 96811600, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/164168/how-do-you-construct-a-stdstring-with-an-embedded-null\">How do you construct a std::string with an embedded null?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551894755, "post_id": 55029314, "comment_id": 96811367, "body": "The really interesting part is what would be the workaround to store the <code>\\0</code> character explicitely in a <code>std::string</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1551895054, "post_id": 55029314, "comment_id": 96811514, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, I am sure people with a more computer science/programming language theory bent of mind have thought about it. Not me."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1551895197, "post_id": 55029314, "comment_id": 96811580, "body": "<a href=\"https://stackoverflow.com/questions/164168/how-do-you-construct-a-stdstring-with-an-embedded-null\">Yes they did</a>"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1551895143, "last_edit_date": 1551895143, "creation_date": 1551894582, "answer_id": 55029314, "question_id": 55029196, "link": "https://stackoverflow.com/questions/55029196/why-is-c-str-not-adding-0-at-the-end-of-a-string/55029314#55029314", "title": "Why is .c_str() not adding &#39;\\0&#39; at the end of a string?", "body": "<p>That would be unintuitive. Remember that the terminating null character wasn't explicitly used by the user. Syntax of the language added it.</p>\n\n<p>It will create a lot of confusion if the result of <code>\"abcd\" + \"xyz\"</code> ends up being <code>\"abcd\\0xyz\"</code> instead of the intuitive result - <code>\"abcdxyz\"</code>.</p>\n\n<p>In C and C++, concatenating two strings implies ignoring the terminating null character of the first string in the resultant string. Take a look at the documentation of <a href=\"https://en.cppreference.com/w/cpp/string/byte/strcat\" rel=\"nofollow noreferrer\"><code>strcat</code></a>. It is explicit about the null character while the documentation of <code>std::string::operator+</code> isn't.</p>\n"}, {"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 0, "last_activity_date": 1551894834, "last_edit_date": 1551894834, "creation_date": 1551894627, "answer_id": 55029331, "question_id": 55029196, "link": "https://stackoverflow.com/questions/55029196/why-is-c-str-not-adding-0-at-the-end-of-a-string/55029331#55029331", "title": "Why is .c_str() not adding &#39;\\0&#39; at the end of a string?", "body": "<p>Not quite...</p>\n\n<p>Let's take a look at this line:</p>\n\n<pre><code>a = a.c_str();\n</code></pre>\n\n<p>You have an <code>std::string</code> that you're trying to assign a <code>const char*</code> to. So you'll be using overload (3) of <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator%3D\" rel=\"nofollow noreferrer\">the <code>std::string</code> assignment operator</a>. But this doesn't magically change the type of <code>a</code>. In other words, we still have an <code>std::string</code>!</p>\n\n<p>So that line doesn't actually modify the value of <code>a</code> at all.</p>\n\n<p>Then you use the <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator%2B\" rel=\"nofollow noreferrer\"><code>operator+</code></a> to add two <code>std::string</code>'s together. This will result in another <code>std::string</code> that is the first with the second appended, which is exactly what you have!</p>\n\n<p>It's not clear to me what you're trying to accomplish here, but if you created a c-string with those values:</p>\n\n<pre><code>const char cstr[] = \"Hello World\\0aaa\";\n</code></pre>\n\n<p>And tried to print it, you'd see exactly what you're expecting.</p>\n"}, {"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1551896675, "post_id": 55029433, "comment_id": 96812256, "body": "Really, the point needs to be made that in a &quot;NUL-terminated string&quot;, the NUL terminator is not considered part of the <i>string&#39;s data</i>. It is merely an end-of-string indicator. That is, <code>&quot;Hello World&quot;</code> is a different string from <code>&quot;Hello World\\0&quot;</code>; the latter has an embedded NUL character which is part of the actual string."}], "tags": [], "owner": {"reputation": 8510, "user_id": 6040181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-dQXdInUPrE0/AAAAAAAAAAI/AAAAAAAAAdg/_OLdfGWclsw/photo.jpg?sz=128", "display_name": "Biagio Festa", "link": "https://stackoverflow.com/users/6040181/biagio-festa"}, "is_accepted": true, "score": 4, "last_activity_date": 1551894993, "creation_date": 1551894993, "answer_id": 55029433, "question_id": 55029196, "link": "https://stackoverflow.com/questions/55029196/why-is-c-str-not-adding-0-at-the-end-of-a-string/55029433#55029433", "title": "Why is .c_str() not adding &#39;\\0&#39; at the end of a string?", "body": "<p>Yes, you are right regarding\n<a href=\"https://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\">std::string::c_str</a>.</p>\n\n<p>Indeed,</p>\n\n<blockquote>\n  <p>Returns a pointer to a null-terminated character array with data equivalent to those stored in the string.</p>\n</blockquote>\n\n<p>However, there are a few considerations which probably misleading you.</p>\n\n<hr>\n\n<p>First of all, the statement: </p>\n\n<pre><code>a = a.c_str();\n</code></pre>\n\n<p>is <em>semantically</em> a <em>no-operation</em>.\nYou get the <code>const char*</code> (i.e. <code>\"Hello World\\0\"</code>) and assign it to <code>a</code>.\nHowever <code>a</code> is a <code>std::string</code>, it is a class designed to abstract a \"string type\" in C++. It handles automatically the <code>'\\0'</code>, transparently. The user is not supposed to care about the managing of it<sup>1</sup>.</p>\n\n<p>The trick is inside <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator%3D\" rel=\"nofollow noreferrer\"><code>std::string::operator=(const char*)</code></a>.</p>\n\n<blockquote>\n  <p>Replaces the contents with those of <strong>null-terminated</strong> character string pointed to by s <strong>as if by assign(s, Traits::length(s))</strong>.</p>\n</blockquote>\n\n<hr>\n\n<p>The last point, about <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator%2B\" rel=\"nofollow noreferrer\">string concatenation</a>.</p>\n\n<pre><code>a + string(\"aaa\");\n</code></pre>\n\n<p>As previously, in this case, the operator <code>std::string::operator+</code> will handle the <code>'\\0'</code>.</p>\n\n<p>Shortly, it behaves like:</p>\n\n<pre><code>\"Hello World\\0\" + \"aaa\\0\"  ===&gt; \"Hello Worldaaa\\0\"\n</code></pre>\n\n<p>It will care about the \"inner <code>'\\0'</code>\" returning a conforming null-terminated string.</p>\n\n<hr>\n\n<p><sup>1</sup> Unless he/she is playing with the internal memory.</p>\n"}], "owner": {"reputation": 59, "user_id": 10697168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2d9ae8051960f8ca80d86d987c167e8?s=128&d=identicon&r=PG&f=1", "display_name": "Mayar Karout", "link": "https://stackoverflow.com/users/10697168/mayar-karout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "accepted_answer_id": 55029433, "answer_count": 3, "score": 3, "last_activity_date": 1551906080, "creation_date": 1551894142, "question_id": 55029196, "link": "https://stackoverflow.com/questions/55029196/why-is-c-str-not-adding-0-at-the-end-of-a-string", "title": "Why is .c_str() not adding &#39;\\0&#39; at the end of a string?", "body": "<p>When running this code I get <code>\"Hello Worldaaa\"</code>, but according to the job of the <code>.c_str()</code> function, the <code>string a</code> should be <code>\"Hello World\\0\"</code> and <code>string b</code> should be <code>\"Hello World\\0aaa\"</code> so <code>\"aaa\"</code> should not show up in the output.</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n\nusing namespace std; \n\nint main()\n{\n    string a = \"Hello World\";\n    a = a.c_str();\n    string b = a + string(\"aaa\");\n\n    cout &lt;&lt; b;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "lambda", "unique-ptr", "capture"], "comments": [{"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1551894984, "post_id": 55029034, "comment_id": 96811483, "body": "Note that you cannot use the unique_ptr after it&#39;s been moved. It doesn&#39;t actually matter whether or not the lambda is destructed. After the <code>move(foo)</code>, <code>foo</code> is in the &quot;moved from&quot; state already and you cannot dereference it anymore. The only thing you are allowed to do with it is assign something new to it."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 11155051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4eb349b4d22c5cb7e050f802f65fdb8?s=128&d=identicon&r=PG&f=1", "display_name": "vkn", "link": "https://stackoverflow.com/users/11155051/vkn"}, "edited": false, "score": 0, "creation_date": 1551903683, "post_id": 55029065, "comment_id": 96815719, "body": "This makes sense, I guess I&#39;d underestimated just how unique the unique_ptr is meant to be. Many thanks!"}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 3, "last_activity_date": 1551893697, "creation_date": 1551893697, "answer_id": 55029065, "question_id": 55029034, "link": "https://stackoverflow.com/questions/55029034/c-how-do-i-un-capture-non-copyables-eg-unique-ptr-from-a-lambda/55029065#55029065", "title": "C++: How do I &quot;un-capture&quot; non-copyables (eg. unique_ptr) from a lambda?", "body": "<blockquote>\n  <p>But what to do when I want to use that same smart pointer after the lambda is destructed? </p>\n</blockquote>\n\n<p>You use <code>std::shared_ptr</code> and don't move something you want to reuse.</p>\n\n<pre><code>auto foo = std::make_shared(42);\nauto lambda = [bar=foo]()\n{\n    /* Do something with bar */\n};\nlambda(); // No issues invoking this\ncout &lt;&lt; \"*foo = \" &lt;&lt; *foo; // also fine\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 3, "creation_date": 1551895485, "post_id": 55029077, "comment_id": 96811699, "body": "At that point you might as well just capture <code>[int_ptr = foo.get()]</code>. It&#39;s a non-owning pointer anyway. Holding references to <code>unique_ptr</code> seems a bit weird."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 6, "last_activity_date": 1551894156, "last_edit_date": 1551894156, "creation_date": 1551893727, "answer_id": 55029077, "question_id": 55029034, "link": "https://stackoverflow.com/questions/55029034/c-how-do-i-un-capture-non-copyables-eg-unique-ptr-from-a-lambda/55029077#55029077", "title": "C++: How do I &quot;un-capture&quot; non-copyables (eg. unique_ptr) from a lambda?", "body": "<p>This can be solved by capturing by reference.</p>\n\n<pre><code>auto lambda = [&amp;]()\n    {\n        /* Do something with foo */\n    };\n\n// or\n\nauto lambda = [&amp;foo]()\n    {\n        /* Do something with foo */\n    };\n</code></pre>\n\n<p>Allows you to use <code>foo</code>, without actually moving it.</p>\n\n<p>The only caveat with this is it is up to you to ensure the lifetime of the lambda does not exceed that of the pointer.  If it can/does, then you should consider a shared ownership method like using a <code>std::shared_ptr</code> instead.</p>\n"}], "owner": {"reputation": 143, "user_id": 11155051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4eb349b4d22c5cb7e050f802f65fdb8?s=128&d=identicon&r=PG&f=1", "display_name": "vkn", "link": "https://stackoverflow.com/users/11155051/vkn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 55029077, "answer_count": 2, "score": 0, "last_activity_date": 1551895826, "creation_date": 1551893598, "question_id": 55029034, "link": "https://stackoverflow.com/questions/55029034/c-how-do-i-un-capture-non-copyables-eg-unique-ptr-from-a-lambda", "title": "C++: How do I &quot;un-capture&quot; non-copyables (eg. unique_ptr) from a lambda?", "body": "<p>Consider the following:</p>\n\n<pre><code>unique_ptr&lt;int&gt; foo = make_unique&lt;int&gt;(42);\n\nauto lambda = [bar = move(foo)]()\n    {\n        /* Do something with bar */\n    };\n\nlambda(); // No issues invoking this\n\ncout &lt;&lt; \"*foo = \" &lt;&lt; *foo; //Attempts to dereference foo will segfault\n</code></pre>\n\n<p>Capturing things like a unique_ptr requires use of std::move, so as to maintain the uniqueness of unique_ptr. But what to do when I want to use that same smart pointer after the lambda is destructed? Using foo will give a segfault, and bar is out of scope by that point. </p>\n\n<p>Perhaps unorthodox use of lambda aside, how do I get my unique_ptr back? Is it trapped in the lambda forever?</p>\n"}, {"tags": ["c++", "constructor", "overloading"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551893568, "post_id": 55028927, "comment_id": 96810712, "body": "IMO, that many constructors is a sure sign of a flawed design."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1551893637, "post_id": 55028927, "comment_id": 96810740, "body": "You should probably use the Builder pattern instead of trying to use many constructors."}], "answers": [{"tags": [], "owner": {"reputation": 716, "user_id": 6507170, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EdjYE.png?s=128&g=1", "display_name": "priojeet priyom", "link": "https://stackoverflow.com/users/6507170/priojeet-priyom"}, "is_accepted": false, "score": 1, "last_activity_date": 1551898710, "creation_date": 1551898710, "answer_id": 55030360, "question_id": 55028927, "link": "https://stackoverflow.com/questions/55028927/unspecified-fields-in-overloading-constructor/55030360#55030360", "title": "Unspecified Fields in Overloading constructor", "body": "<p>To my knowledge there is not method for it. Luckily you don't need another method for it. Just pass the default values when some parameter don't have any spefic value to pass.</p>\n"}], "owner": {"reputation": 3, "user_id": 8477037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6dbb379d8aaaf49b1abfe660dd117f?s=128&d=identicon&r=PG&f=1", "display_name": "Saksham Dhull", "link": "https://stackoverflow.com/users/8477037/saksham-dhull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1551898710, "creation_date": 1551893219, "question_id": 55028927, "link": "https://stackoverflow.com/questions/55028927/unspecified-fields-in-overloading-constructor", "title": "Unspecified Fields in Overloading constructor", "body": "<p>I've to intiliaze a class with 7 parameters. Whereas i do have some default values in cases where some of the values are not specified. So, by the overloading constructor method, I'd have to make around 2^7 constructors. Is there any method where i can check which fields are specified in a constructor and set undefined directly to defaults?</p>\n"}, {"tags": ["c++", "function", "multidimensional-array", "stack"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 5, "creation_date": 1551892382, "post_id": 55028575, "comment_id": 96809971, "body": "Pass a multi dimensional <code>std::array</code> or <code>std::vector</code>. Forget about C-style arrays or passing arrays as pointers+size - in C++ we have better options. And <i>don&#39;t</i> use <code>malloc</code> in a C++ program, please."}, {"owner": {"reputation": 313, "user_id": 10608487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245c953415d2e39d1ff5a484e42ce38c?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/10608487/richard"}, "edited": false, "score": 1, "creation_date": 1551892526, "post_id": 55028575, "comment_id": 96810082, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/12990568/passing-2-d-array-as-argument\">Passing 2-D array as argument</a>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1551892539, "post_id": 55028575, "comment_id": 96810090, "body": "The restriction is also the same in C, how do you know the dimensions of the array? So in C++, you use a vector or a matrix class, in C, you would use a <code>int**</code> and pass the width and height."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 313, "user_id": 10608487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245c953415d2e39d1ff5a484e42ce38c?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/10608487/richard"}, "edited": false, "score": 0, "creation_date": 1551892605, "post_id": 55028575, "comment_id": 96810132, "body": "@Richard depends if the array size is static or not, which is not clear from OP&#39;s question."}, {"owner": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "edited": false, "score": 0, "creation_date": 1551892681, "post_id": 55028575, "comment_id": 96810177, "body": "Forgot to add, I was restricted from using anything but iostream, and that was the hassle. If I wasn&#39;t I wouldn&#39;t have been here"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1551892809, "post_id": 55028575, "comment_id": 96810258, "body": "I don&#39;t get why universities are still teaching severely obsolete C++98. Makes me sad \u2639\ufe0f"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551893134, "post_id": 55028575, "comment_id": 96810452, "body": "The proper duplicate then: <a href=\"https://stackoverflow.com/questions/936687/how-do-i-declare-a-2d-array-in-c-using-new\" title=\"how do i declare a 2d array in c using new\">stackoverflow.com/questions/936687/&hellip;</a> (if a C++ gold badge is around)"}, {"owner": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551893354, "post_id": 55028575, "comment_id": 96810570, "body": "@MatthieuBrucher, I was asking for a stack way of doing stuff, heapifying everything will just add some boilerplate and asterisks in my case."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1551893415, "post_id": 55028575, "comment_id": 96810616, "body": "As far as I am aware the reason is that <i>native array types</i> in <code>C++</code> are <i>very fast</i> because the dimensions (all but one) must be specified. So that&#39;s why <i>array types</i> are restricted like that. If you want a <i>fully dynamic</i> (native) multidimensional array you need to implement it as an array of arrays. The syntax for that is obviously different. And it&#39;s slower. But you can make a just as fast one using <i>user defined types</i> (not allowed in your question)."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551893537, "post_id": 55028575, "comment_id": 96810695, "body": "Well, a 2D array can be generated on the stack as well through the same mechanisms. But if the sizes are dynamic, the matrix should not be on the stack."}, {"owner": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551893918, "post_id": 55028575, "comment_id": 96810915, "body": "@MatthieuBrucher, I think you misunderstood, what I meant by saying it was dynamic. I was given a task at a uni, so they definitely intended it to be using stack (who in the right mind would write a test with over 99999 pre-checked tiles). The array doesn&#39;t change its size in any way at any point. The only thing is that noone knows the final size of the array (I know it sound like it should use heap, but just trust me)."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 313, "user_id": 10608487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245c953415d2e39d1ff5a484e42ce38c?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/10608487/richard"}, "edited": false, "score": 0, "creation_date": 1551893975, "post_id": 55028575, "comment_id": 96810946, "body": "In that case, see @Richard&#39;s duplicate."}, {"owner": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551894276, "post_id": 55028575, "comment_id": 96811112, "body": "@MatthieuBrucher, still, that thread doesn&#39;t cover my question. Maybe I wasn&#39;t clear enough about it being dynamic in BOTH dimensions, and I can&#39;t just use a const at the second dimensions, since there isn&#39;t any. That&#39;s the problem"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551894401, "post_id": 55028575, "comment_id": 96811188, "body": "In that case, it&#39;s a dynamic 2D array, and you need a 1D indirection array, as explained in my duplicate. But you need FAR more information in your question to be able to say if it&#39;s one or the other. So definitely unclear what you are asking."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1551895170, "post_id": 55028575, "comment_id": 96811566, "body": "@Galik <code>std::array</code> is just as fast as C-style arrays. And if you need dynamic arrays you have a <i>real</i> challenge if you want to beat <code>std::vector</code>. There really is <i>no</i> excuse to use C-Style arrays in C++, ever."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1551895614, "post_id": 55028575, "comment_id": 96811760, "body": "@JesperJuhl The excuse here is that the OP was restricted from using user defined types. Otherwise you said pretty much what I said :) (also <code>std::array</code> and <code>std::vector</code> are not multidimensional - for that you have to define your own type)"}], "answers": [{"comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551893079, "post_id": 55028807, "comment_id": 96810419, "body": "Doesn&#39;t answer OP&#39;s question, as he has dynamic size."}, {"owner": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "edited": false, "score": 0, "creation_date": 1551893132, "post_id": 55028807, "comment_id": 96810450, "body": "So, if I got you right, I have to use pointers to array of pointers as an argument (what I meant by saying double pointers, e.g. int** matrix)?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "edited": false, "score": 0, "creation_date": 1551893190, "post_id": 55028807, "comment_id": 96810488, "body": "@Anton yes, see the duplicate I mentioned in my last comment."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551893234, "post_id": 55028807, "comment_id": 96810504, "body": "@MatthieuBrucher This can take a pointer to an array of any size. But it can only take a pointer to an element of an array of 4 integers."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551893278, "post_id": 55028807, "comment_id": 96810524, "body": "Exactly, hence the proper duplicate. As you are a C++ gold badge, you can delete your wrong answer and close it as a proper duplicate."}, {"owner": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "edited": false, "score": 0, "creation_date": 1551893465, "post_id": 55028807, "comment_id": 96810645, "body": "So, last question is: do I use the argument int** matrix as matrix[i][j], or am I terribly mistaken?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "edited": false, "score": 0, "creation_date": 1551893524, "post_id": 55028807, "comment_id": 96810686, "body": "@Anton No. You cannot use <code>int**</code> to point to an element of <code>matrix[N][M]</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551893559, "post_id": 55028807, "comment_id": 96810704, "body": "@MatthieuBrucher why do you think the answer is wrong?"}, {"owner": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "edited": false, "score": 0, "creation_date": 1551893598, "post_id": 55028807, "comment_id": 96810722, "body": "So, how do I do it, if I want to pass a matrix[x][y] to a function?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551893617, "post_id": 55028807, "comment_id": 96810731, "body": "Because it doesn&#39;t provide an answer to OP&#39;s question, and if it was about passing [][4], there are thousands of duplicates on the subject. And as a gold badge, you are supposed to identify duplicates and close them."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "edited": false, "score": 0, "creation_date": 1551893627, "post_id": 55028807, "comment_id": 96810734, "body": "@Anton see my answer."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551893687, "post_id": 55028807, "comment_id": 96810772, "body": "@MatthieuBrucher Existing duplicates don&#39;t make an answer wrong. Feel free to vote close if you find a duplicate."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1551893738, "post_id": 55028807, "comment_id": 96810794, "body": "I have as unclear and then provided the duplicate. But I&#39;m not a gold badge because I prefer quality over quantity. And the answer is wrong because doesn&#39;t answer OP&#39;s question."}, {"owner": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "edited": false, "score": 0, "creation_date": 1551894016, "post_id": 55028807, "comment_id": 96810968, "body": "@eerorika, but what if the second dimension isn&#39;t const, but instead some random number x defined at the start of the program?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "edited": false, "score": 0, "creation_date": 1551894556, "post_id": 55028807, "comment_id": 96811271, "body": "@Anton see the edit."}, {"owner": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "edited": false, "score": 0, "creation_date": 1551894733, "post_id": 55028807, "comment_id": 96811356, "body": "@eerorika, I&#39;ve seen it referenced somewhere as &quot;<i>fake multidimensional array</i>&quot;. I think that&#39;s the way to go. Question answered."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": -1, "last_activity_date": 1551894830, "last_edit_date": 1551894830, "creation_date": 1551892843, "answer_id": 55028807, "question_id": 55028575, "link": "https://stackoverflow.com/questions/55028575/passing-a-dynamic-multidimensional-array-on-the-stack-to-a-function-c/55028807#55028807", "title": "Passing a dynamic multidimensional array on the stack to a function C++", "body": "<blockquote>\n  <p>pass a two-dimensional array to a function</p>\n</blockquote>\n\n<p>First thing to realise is that a function argument cannot be an array. A typical way to pass arrays into a function is to pass a pointer to an element of the array.</p>\n\n<p>In case of a 2D array, the elements of the array are 1D arrays. Here is an example:</p>\n\n<pre><code>int function(int matrix[][4]);\n\nint main() {\n    int m[4][4];\n    function(m);\n}\n</code></pre>\n\n<blockquote>\n  <p>without <code>malloc</code>?</p>\n</blockquote>\n\n<p>There's hardly ever a reason to use <code>malloc</code> in C++.</p>\n\n<blockquote>\n  <p>what if the second dimension isn't const</p>\n</blockquote>\n\n<p>Then it cannot be a multidimensional array. The type of an element of an array must be compile time constant. Since the size is part of the type of an array, this means that the inner dimension of a multidimensional array must be compile time constant. (Furthermore, the outermost dimension must also be compile time constant unless the array is allocated dynamically).</p>\n\n<p>The trick to implement structures that are mathematically multidimensional is to represent them as a single dimensional array where each row of the inner dimension is after the previous row (this is how mutildimensional array types are implemented too; memory is one-dimensional). If the rows have the same width, then the multidimensional index can be converted into the flattened index using the formula:</p>\n\n<pre><code>flat_index = dim1_index + dim2_index * row_size\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11161022, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tfihIKB28Xo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reyiMPv9H5MxNKggNdcrIUIihz8HQ/mo/photo.jpg?sz=128", "display_name": "Anton", "link": "https://stackoverflow.com/users/11161022/anton"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 1, "closed_date": 1551893310, "accepted_answer_id": 55028807, "answer_count": 1, "score": -2, "last_activity_date": 1551894830, "creation_date": 1551892012, "last_edit_date": 1551892791, "question_id": 55028575, "link": "https://stackoverflow.com/questions/55028575/passing-a-dynamic-multidimensional-array-on-the-stack-to-a-function-c", "closed_reason": "Needs details or clarity", "title": "Passing a dynamic multidimensional array on the stack to a function C++", "body": "<p>I've just been to an exam at local uni and they asked me to do basically a pathfinder. I got stuck, because I really wanted to pass a two-dimensional array to a function. I haven't come up with the idea of double pointer with heap allocation, but now that I think of it, it seems really ugly to not be able to pass it like\n<code>int function(int matrix[][]);</code> or maybe <code>int function(int&amp; matrix[][]);</code> something like that. What's the logic behind that restriction? Is there any way to do that on stack without <code>malloc</code>?<br>\n<em>EDIT</em> <br>\nThe array is dynamic, and I was restricted from using any wrappers, including those from standard library</p>\n"}, {"tags": ["c++", "function", "vector", "structure"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 10798572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221e214d1ab31f18d6734847113a591?s=128&d=identicon&r=PG&f=1", "display_name": "user10798572", "link": "https://stackoverflow.com/users/10798572/user10798572"}, "edited": false, "score": 0, "creation_date": 1551893678, "post_id": 55028636, "comment_id": 96810764, "body": "clarified a lot, so i can access them , this way: B1.ofcourses.name.push_back[TempName]; ,,,,,, but will have to just copy them into it memberwise right?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 81, "user_id": 10798572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221e214d1ab31f18d6734847113a591?s=128&d=identicon&r=PG&f=1", "display_name": "user10798572", "link": "https://stackoverflow.com/users/10798572/user10798572"}, "edited": false, "score": 0, "creation_date": 1551893784, "post_id": 55028636, "comment_id": 96810833, "body": "@user10798572, I didn&#39;t follow  Are you asking whether you can access objects in the <code>std::vector</code> by using <code>B1.ofcourses.name.push_back[TempName];</code>?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1551892224, "creation_date": 1551892224, "answer_id": 55028636, "question_id": 55028545, "link": "https://stackoverflow.com/questions/55028545/pushing-a-vector-of-structures-into-a-structure/55028636#55028636", "title": "pushing a vector of structures into a structure?", "body": "<pre><code>B1.ofcourses.ID.push_back[TempID];\nB1.ofcourses.name.push_back[TempName];\n</code></pre>\n\n<p>are not right.</p>\n\n<p><code>B1.ofcourses</code> is a <code>std::vector&lt;course&gt;</code>. It does not have a member named <code>ID</code> or <code>name</code>.</p>\n\n<p>You need to construct a <code>course</code> object and push it to <code>B1.ofourses</code>.</p>\n\n<pre><code>for(int i = 0; i&lt;coursecount;i++)\n{\n    course c;\n    cout &lt;&lt;\" Enter course ID: \" &lt;&lt;endl;\n    cin &gt;&gt; c.ID;\n    cout &lt;&lt;\" Enter course name: \" &lt;&lt;endl;\n    cin &gt;&gt; c.name;\n\n    B1.ofcourses.push_back(c);\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 10798572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221e214d1ab31f18d6734847113a591?s=128&d=identicon&r=PG&f=1", "display_name": "user10798572", "link": "https://stackoverflow.com/users/10798572/user10798572"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 55028636, "answer_count": 1, "score": -2, "last_activity_date": 1551892224, "creation_date": 1551891907, "question_id": 55028545, "link": "https://stackoverflow.com/questions/55028545/pushing-a-vector-of-structures-into-a-structure", "title": "pushing a vector of structures into a structure?", "body": "<p>i need to create a structure student that will nest another structure called course. and then fill the structure \"course\" with how many the student is enrolled in along with their id and name</p>\n\n<p>I am not sure how can i pushback the structure \"course\" attributes into the structure student which already have the structure course as a vector in it     </p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;string&gt;\n    #include&lt;vector&gt;\n    using namespace std;\n\n    struct course{\n\n        int ID;\n        string name;\n\n    };\n    struct student{\n        int ID;\n        string name;\n        vector &lt;course&gt; ofcourses;\n\n\n    };\n\n    void studentDeclare(student &amp;B1){\n\n        int coursecount;\n        cout &lt;&lt;\" Student ID: \" &lt;&lt;endl;\n        cin&gt;&gt;B1.ID;\n        cout &lt;&lt;\" Student name: \" &lt;&lt;endl;\n        cin&gt;&gt;B1.name;\n        cout &lt;&lt;\" How many courses?: \" &lt;&lt;endl;\n        cin &gt;&gt; coursecount;\n\n        int TempID;\n        string TempName;\n        for(int i = 0; i&lt;coursecount;i++)\n        {\n            cout &lt;&lt;\" Enter course ID: \" &lt;&lt;endl;\n            cin &gt;&gt; TempID;\n            B1.ofcourses.ID.push_back[TempID];\n            cout &lt;&lt;\" Enter course name: \" &lt;&lt;endl;\n            string TempName;\n            cin&gt;&gt;TempName;\n            B1.ofcourses.name.push_back[TempName];\n        }\n\n    };\n\n    int main()\n{\n    student boy;\n    studentDeclare(boy);\n    print(boy);\n\n    system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "shared-ptr", "unique-ptr", "weak-ptr"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551891934, "post_id": 55028529, "comment_id": 96809652, "body": "Yes, just use raw pointer, or, C++ Core Guidelines have some special type for non-owning pointer, which I can&#39;t remember from the top of my head."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1551892006, "post_id": 55028529, "comment_id": 96809710, "body": "It depends.  <code>weak_ptr</code> provides the semantics that it will extend the lifetime of the object while it is locked.  Do you want this in the <code>unique_ptr</code> case or are you okay with the object getting deleted while you are using it?"}, {"owner": {"reputation": 1632, "user_id": 3960195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e58e3d0cea2af746e1c9b61a5092c1?s=128&d=identicon&r=PG&f=1", "display_name": "Qeek", "link": "https://stackoverflow.com/users/3960195/qeek"}, "edited": false, "score": 0, "creation_date": 1551892051, "post_id": 55028529, "comment_id": 96809744, "body": "You can also use reference to <code>unique_ptr</code> but you have to be pretty sure that it will be alive the whole time when you want to use it."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 1632, "user_id": 3960195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e58e3d0cea2af746e1c9b61a5092c1?s=128&d=identicon&r=PG&f=1", "display_name": "Qeek", "link": "https://stackoverflow.com/users/3960195/qeek"}, "edited": false, "score": 0, "creation_date": 1551892216, "post_id": 55028529, "comment_id": 96809850, "body": "@Qeek, in the particular case I am trying to use this, I am using the pointer to traverse through a data structure of <code>std::unique_ptr</code> objects. In order to traverse the structure, the pointer I create needs to be able to move what it is pointing to to reference the next unique pointer in the data structure... The issue is references are not reassignable so if I use a reference I can&#39;t change it to point to the next item in the data structure."}, {"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551892588, "post_id": 55028529, "comment_id": 96810119, "body": "@SergeyA, what if it is a requirement for my application to be thread safe? Using a raw pointer could cause issues with multi threading."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1551892850, "post_id": 55028529, "comment_id": 96810280, "body": "@SergeyA it&#39;s <code>gsl::observer&lt;T&gt;</code>, and iirc it&#39;s an alias for <code>T*</code>"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 4, "creation_date": 1551892921, "post_id": 55028529, "comment_id": 96810322, "body": "&quot;Using a raw pointer could cause issues with multi threading&quot;. Using just about anything, smart pointers included, could cause issues with multi threading"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1551899957, "post_id": 55028529, "comment_id": 96813740, "body": "I would use a <i>raw pointer</i> for both <code>std::unique_ptr</code> and <code>std::shared_ptr</code> unless the application demanded a <code>std::weak_ptr</code>. No point in paying for things you don&#39;t use."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1551892694, "post_id": 55028735, "comment_id": 96810189, "body": "<code>&#47;&#47;int * ptr = a.get_ptr();&#47;&#47;Valid, but not advised         int &amp; ref = *a.get_ptr();&#47;&#47;Preferred</code> Why?  Both cases do the exact same thing.  If the pointer gets deleted out from under you then you are left with a dangling reference which is just as bad as a dangling pointer."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551892802, "post_id": 55028735, "comment_id": 96810255, "body": "@NathanOliver The point of that example is that <code>B</code> owns its own reference to <code>A</code>, and is thus able to manage the lifetime of the pointer. So there&#39;s no risk [in properly documented code that maintains its invariants] of the pointer going out of scope. So left with the choice of a reference or pointer with no concern for lifetime, prefer the reference."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 7, "last_activity_date": 1551892926, "last_edit_date": 1551892926, "creation_date": 1551892595, "answer_id": 55028735, "question_id": 55028529, "link": "https://stackoverflow.com/questions/55028529/referring-to-a-stdunique-ptr-that-you-dont-own-use-a-raw-pointer/55028735#55028735", "title": "Referring to a &quot;std::unique_ptr&quot; that you don&#39;t own (use a raw pointer?)", "body": "<p>Based on your last example, this is a scenario where <code>std::shared_ptr</code> and <code>std::weak_ptr</code> should be used.</p>\n\n<p><code>std::unique_ptr</code> and a non-owning Raw Pointer should be used in the scenario where you have a guarantee that the smart pointer will outlive the raw pointer.</p>\n\n<pre><code>class A {\n    std::unique_ptr&lt;int&gt; ptr = std::make_unique&lt;int&gt;(5);\npublic:\n    int* get_ptr() const{return ptr.get();}\n};\n\nclass B {\n    A a;\npublic:\n    void do_something() {\n        //int * ptr = a.get_ptr();//Valid, but not advised\n        int &amp; ref = *a.get_ptr();//Preferred\n        ref++;\n    }\n};\n</code></pre>\n\n<p>If you can make this guarantee, you should be using <code>std::unique_ptr</code> and a raw pointer to represent this object. This is ideomatically correct.</p>\n\n<p>If, however, you can't guarantee lifetime at the time you need to manipulate the object, then references should be provided by <code>std::weak_ptr</code>, which are used to acquire ownership (even if only temporarily!) to make changes.</p>\n\n<pre><code>class A {\n    std::shared_ptr&lt;int&gt; ptr = std::make_shared&lt;int&gt;(5);\npublic:\n    std::weak_ptr&lt;int&gt; get_ptr() const {\n        return ptr;//Implicitly converts\n    }\n    void destroy() {\n        ptr.reset();\n    }\n};\n\nclass B {\n    std::weak_ptr&lt;int&gt; ptr;\npublic:\n    B(std::weak_ptr&lt;int&gt; ptr) : ptr(ptr) {}\n    void do_something() {\n        if(auto owned_ptr = ptr.lock()) {//owned_ptr will be deduced to be of type std::shared_ptr&lt;int&gt;\n            *owned_ptr++; //Guaranteed to only execute if the pointer is still valid\n        }\n    }\n};\n\nint main() {\n    A a;\n    B b(a.get_ptr());\n    if(get_random_value() &gt; 10)\n        a.destroy();\n    b.do_something();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 7, "last_activity_date": 1552317350, "last_edit_date": 1552317350, "creation_date": 1551892929, "answer_id": 55028845, "question_id": 55028529, "link": "https://stackoverflow.com/questions/55028529/referring-to-a-stdunique-ptr-that-you-dont-own-use-a-raw-pointer/55028845#55028845", "title": "Referring to a &quot;std::unique_ptr&quot; that you don&#39;t own (use a raw pointer?)", "body": "<h3>It depends on whether the extra pointer may outlive the <code>unique_ptr</code>.</h3>\n\n<ul>\n<li>If the non-owning pointer <strong>absolutely cannot outlive</strong> the <code>unique_ptr</code>: Make it a plain pointer. Whoever gets this kind of pointer can assume it's valid, but cannot presume to own the memory it points to.</li>\n<li>If the non-owning pointer <strong>might outlive</strong> the <code>unique_ptr</code>: Your original pointer is not really \"unique\"; and you should replace the <code>unique_ptr</code> with a <code>shared_ptr</code> and pass a <code>weak_ptr</code> as the non-owning copy.</li>\n</ul>\n\n<p>I just noticed that this answer is basically a brief summary of <a href=\"https://stackoverflow.com/a/55028735/1593077\">Xirema's answer</a>. Please upvote/accept that answer!\n"}], "owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1110, "favorite_count": 2, "accepted_answer_id": 55028735, "answer_count": 2, "score": 5, "last_activity_date": 1552317350, "creation_date": 1551891856, "last_edit_date": 1551894347, "question_id": 55028529, "link": "https://stackoverflow.com/questions/55028529/referring-to-a-stdunique-ptr-that-you-dont-own-use-a-raw-pointer", "title": "Referring to a &quot;std::unique_ptr&quot; that you don&#39;t own (use a raw pointer?)", "body": "<p>Typically if you are using a <code>std::shared_ptr</code> to point to an object and you want to create another pointer to that object that does not share ownership you would create a <code>std::weak_ptr</code>.</p>\n\n<pre><code>// Create a shared pointer to own the object\nstd::shared_ptr&lt;int&gt; p = std::make_shared&lt;int&gt;(42);\n\n// Create a weak pointer (that does not own the object)\nstd::weak_ptr&lt;int&gt; q(p);\n\n// Use the weak pointer some time later\nif (std::shared_ptr ptr = q.lock()) {\n  // use *ptr\n}\n</code></pre>\n\n<p>My question is, how do you do this when it comes to <code>std::unique_ptr</code>?</p>\n\n<p>Using a unique pointer ensures that the current resource is owned exclusively by the <code>std::unique_ptr</code> itself. But what if I want to create a pointer to the same resource that does not own that resource? I can't use a <code>std::weak_ptr</code> because weak pointers are designed to work with the reference count from a <code>std::shared_ptr</code>. Would I just use a raw pointer here? Or is there a better alternative?</p>\n\n<pre><code>// Create a unique pointer to own the object\nstd::unique_ptr&lt;int&gt; p = std::make_unique&lt;int&gt;(42);\n\n// Create a non-owning pointer to the same object\n// Is this really the best way?\nint* q = p.get();\n\n// Use the pointer some time later\nif (q != nullptr) {\n\n  // Imagine this may be multithreaded...\n  // what happens if p.reset() is called by another thread while the current thread is RIGHT HERE.\n\n  // use *q\n}\n</code></pre>\n\n<p>The only way I can think of creating a non-owning pointer to an object owned by a <code>std::unique_ptr</code> would be to use a raw pointer, but as you can see from the code above this may cause issues in threaded applications. Is there a better way to achieve the same goal?</p>\n"}, {"tags": ["c++", "memory", "boost", "c++17"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1551891794, "post_id": 55028447, "comment_id": 96809560, "body": "How big of a string are you using?  I don&#39;t know about <code>pmr::string</code> but <code>std::string</code> is allowed to do short string optimization so it might not even allocate if the strings are small enough."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1551894320, "post_id": 55028447, "comment_id": 96811137, "body": "@NathanOliver looks like  35 and 37 (<code>std::string s1(35, &#39;c&#39;), s2(37, &#39;d&#39;);</code>) &gt; 23 so no SSO I guess."}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 1, "creation_date": 1551895121, "post_id": 55028447, "comment_id": 96811544, "body": "Can you compare default pmr (global as you call it) vs. local. If there is no difference then the local pmr is probably not local"}, {"owner": {"reputation": 103, "user_id": 8239925, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9533b3f0a56a8087f4658de50550ec00?s=128&d=identicon&r=PG&f=1", "display_name": "Quoc-Minh", "link": "https://stackoverflow.com/users/8239925/quoc-minh"}, "reply_to_user": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1551896745, "post_id": 55028447, "comment_id": 96812297, "body": "@MichaelVeksler So I&#39;ve compared the default <code>pmr::string</code> and the <code>pmr::string</code> using the <code>pmr::monotonic_buffer_resource</code> (same as in example) and indeed, there are no significant differences. But the default pmr should use the default memory resource, which is the the <code>pmr::new_delete_resource</code>, and so performance should be somewhat similar to <code>std::string</code>, I would assume."}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1551898422, "post_id": 55028447, "comment_id": 96813032, "body": "There could be other costs as well (the pmr machinery could be costly). What is the string is nonconforming, and reserve does not reserve enough? Try to reserve more space."}, {"owner": {"reputation": 103, "user_id": 8239925, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9533b3f0a56a8087f4658de50550ec00?s=128&d=identicon&r=PG&f=1", "display_name": "Quoc-Minh", "link": "https://stackoverflow.com/users/8239925/quoc-minh"}, "reply_to_user": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1551899166, "post_id": 55028447, "comment_id": 96813350, "body": "@MichaelVeksler Do you mean reserving more space in the buffer? Or do you mean to give a larger value in the call to pmr::string::reserve(size) ? In the first case, I have already tried a larger buffer incrementally up to 200 bytes and performance was similar. And in the other case, well performance is also similar."}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 0, "creation_date": 1551899351, "post_id": 55028447, "comment_id": 96813446, "body": "None of this makes sense. I&#39;ll debug this when I get to a computer, unless someone beats me to it"}], "answers": [{"tags": [], "owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "is_accepted": true, "score": 9, "last_activity_date": 1551945240, "creation_date": 1551945240, "answer_id": 55038661, "question_id": 55028447, "link": "https://stackoverflow.com/questions/55028447/why-is-pmrstring-so-slow-in-these-benchmarks/55038661#55038661", "title": "Why is pmr::string so slow in these benchmarks?", "body": "<p>There is a combination of things that makes boost <code>pmr::basic_string</code> slower:</p>\n\n<ol>\n<li>Construction of the <code>pmr::monotonic_buffer_resource</code> has some cost (17 nano-seconds here).</li>\n<li><code>pmr::basic_string::reserve</code> reserves more than one requires. It reserves 96 bytes in this case, which is more than the 80 bytes you have.</li>\n<li>Reserving in <code>pmr::basic_string</code> is not free, even when the buffer is big enough (extra 8 nano-seconds here).</li>\n<li>The concatenation of strings is costly (extra 64 ns here).</li>\n<li><code>pmr::basic_string::find</code> has a suboptimal implementation. This is the real cost for the poor speed. In GCC's <code>std::basic_string::find</code> uses <code>__builtin_memchr</code> to find the first character that might match, which boost is doing it all in one big loop. Apparently this is the main cost, and what makes boost run slower than std.</li>\n</ol>\n\n<p>So, after increasing the buffer, and comparing <code>boost::container::string</code> with <code>boost::container::pmr::string</code>, the pmr version comes slightly slower (293 ns vs. \n276 ns). This is because <code>new</code> and <code>delete</code> are actually quite fast for such micro-benchmarks, and are faster than the complicated machinery of the pmr (just 17 ns for construction). In fact, the default Linux/gcc new/delete reuse the same pointer again and again. This optimization has a very simple and fast implementation, that also works great with the CPU cache. </p>\n\n<p>As a proof, try this out (without optimization):</p>\n\n<pre><code>for (int i=0 ; i &lt; 10 ; ++i)\n{\n  char * ptr = new char[96];\n  std::cout &lt;&lt; (void*) ptr &lt;&lt; '\\n';\n  delete[] ptr;\n}\n</code></pre>\n\n<p>This prints the same pointer again and again.</p>\n\n<p>The theory is that in a real program, where new/delete don't behave that nicely, and can't reuse the same block again and again, then new/delete slow down the execution much more and cache locality becomes quite poor. In such case the pmr+buffer are worth it.</p>\n\n<p>Conclusion: the implementation of boost pmr string is slower than gcc's string. The pmr machinery is slightly more costly than the default and simple scenario of the new/delete.</p>\n"}], "owner": {"reputation": 103, "user_id": 8239925, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9533b3f0a56a8087f4658de50550ec00?s=128&d=identicon&r=PG&f=1", "display_name": "Quoc-Minh", "link": "https://stackoverflow.com/users/8239925/quoc-minh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1639, "favorite_count": 1, "accepted_answer_id": 55038661, "answer_count": 1, "score": 3, "last_activity_date": 1591120084, "creation_date": 1551891593, "last_edit_date": 1591120084, "question_id": 55028447, "link": "https://stackoverflow.com/questions/55028447/why-is-pmrstring-so-slow-in-these-benchmarks", "title": "Why is pmr::string so slow in these benchmarks?", "body": "<p>Trying out the example in <a href=\"http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.401.350&amp;rep=rep1&amp;type=pdf\" rel=\"nofollow noreferrer\">Section 5.9.2 Class monotonic_buffer_resource</a> of the following article on Polymorphic Memory Resources by Pablo Halpern :</p>\n\n<p>Doc No: N3816<br>\nDate: 2013-10-13<br>\nAuthor: Pablo Halpern<br>\nphalpern@halpernwightsoftware.com<br>\nPolymorphic Memory Resources - r1<br>\n(Originally N3525 \u2013 Polymorphic Allocators)  </p>\n\n<p>The article claims that :</p>\n\n<blockquote>\n  <p>The monotonic_buffer_resource class is designed for very fast memory allocations\n  in situations where memory is used to build up a few objects and then is released all\n  at once when those objects go out of scope. </p>\n</blockquote>\n\n<p>and that :</p>\n\n<blockquote>\n  <p>A particularly good use for a monotonic_buffer_resource is to provide memory for\n  a local variable of container or string type. For example, the following code\n  concatenates two strings, looks for the word \u201chello\u201d in the concatenated string, and\n  then discards the concatenated string after the word is found or not found. The\n  concatenated string is expected to be no more than 80 bytes long, so the code is\n  optimized for these short strings using a small monotonic_buffer_resource [...]</p>\n</blockquote>\n\n<p>I've benchmarked the example using the <a href=\"https://github.com/google/benchmark\" rel=\"nofollow noreferrer\">google benchmark library</a> and <a href=\"https://www.boost.org/doc/libs/1_69_0/doc/html/container/cpp_conformance.html#container.cpp_conformance.polymorphic_memory_resources\" rel=\"nofollow noreferrer\">boost.container 1.69's polymorphic resources</a>, compiled and linked to release binaries with g++-8 on an Ubuntu 18.04 LTS hyper-v virtual machine with the following code :</p>\n\n<pre><code>// overload using pmr::string\nstatic bool find_hello(const boost::container::pmr::string&amp; s1, const boost::container::pmr::string&amp; s2)\n{\n    using namespace boost::container;\n\n    char buffer[80];\n    pmr::monotonic_buffer_resource m(buffer, 80);\n    pmr::string s(&amp;m);\n    s.reserve(s1.length() + s2.length());\n    s += s1;\n    s += s2;\n    return s.find(\"hello\") != pmr::string::npos;\n}\n\n// overload using std::string\nstatic bool find_hello(const std::string&amp; s1, const std::string&amp; s2)\n{\n    std::string s{};\n    s.reserve(s1.length() + s2.length());\n    s += s1;\n    s += s2;\n    return s.find(\"hello\") != std::string::npos;\n}\n\nstatic void allocator_local_string(::benchmark::State&amp; state)\n{\n    CLEAR_CACHE(2 &lt;&lt; 12);\n\n    using namespace boost::container;\n    pmr::string s1(35, 'c'), s2(37, 'd');\n\n    for (auto _ : state)\n    {\n        ::benchmark::DoNotOptimize(find_hello(s1, s2));\n    }\n}\n\n// pmr::string with monotonic buffer resource benchmark registration\nBENCHMARK(allocator_local_string)-&gt;Repetitions(5);\n\nstatic void allocator_global_string(::benchmark::State&amp; state)\n{\n    CLEAR_CACHE(2 &lt;&lt; 12);\n\n    std::string s1(35, 'c'), s2(37, 'd');\n\n    for (auto _ : state) \n    {\n        ::benchmark::DoNotOptimize(find_hello(s1, s2));\n    }\n}\n\n// std::string using std::allocator and global allocator benchmark registration\nBENCHMARK(allocator_global_string)-&gt;Repetitions(5);\n</code></pre>\n\n<p>Here are the results :<br>\n<a href=\"https://i.stack.imgur.com/UVN6H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UVN6H.png\" alt=\"Benchmark Results\"></a></p>\n\n<p>How is the pmr::string benchmark so slow compared to std::string? </p>\n\n<p>I assume std::string's std::allocator should use \"new\" on the reserve call, and construct each character afterwards when calling :  </p>\n\n<pre><code>s += s1; \ns += s2\n</code></pre>\n\n<p>Comparing that to a pmr::string using a polymorphic allocator that holds the monotonic_buffer_resource, reserving memory should boil down to simply pointer arithmetic, necessitating no \"new\" as the char buffer should be sufficient. Subsequently, it would construct each character as std::string does. </p>\n\n<p>So, considering that the only differing operations between the pmr::string version of find_hello and the std::string version of find_hello is the call to reserve memory, with pmr::string using stack allocation and std::string using heap allocation :  </p>\n\n<ul>\n<li>Is my benchmark wrong?</li>\n<li>Is my interpretation of how allocation should occur wrong?</li>\n<li>Why is the pmr::string benchmark approximately 5 times slower than the std::string benchmark?</li>\n</ul>\n"}, {"tags": ["c++", "printf", "declaration", "implicit"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1551891673, "post_id": 55028413, "comment_id": 96809481, "body": "When you ask a question involving a compiler error, <i>always</i> put the text of the error message <i>in</i> the question (<i>verbatim</i>)."}, {"owner": {"reputation": 313, "user_id": 10608487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245c953415d2e39d1ff5a484e42ce38c?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/10608487/richard"}, "edited": false, "score": 1, "creation_date": 1551892148, "post_id": 55028413, "comment_id": 96809808, "body": "Please provide a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> in addition to the compiler and error message you&#39;re receiving. On <code>gcc-7.1.0</code> using c++11, there are no implicit declaration errors (which, by the way, are usually caused if you&#39;ve forgotten to <code>include</code> some headers, but you already have <code>stdio.h</code> which declares <code>printf</code>). There are, however, a few other errors."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1551892152, "post_id": 55028413, "comment_id": 96809812, "body": "I don&#39;t understand why this is tagged &quot;C++&quot;. It looks more like &quot;C&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1551892281, "creation_date": 1551892281, "answer_id": 55028647, "question_id": 55028413, "link": "https://stackoverflow.com/questions/55028413/implicit-declaration-of-printf/55028647#55028647", "title": "Implicit declaration of printf", "body": "<p>You've correctly included the header which declares <code>printf</code> in the example that you show.</p>\n\n<hr>\n\n<p>There are other bugs however:</p>\n\n<blockquote>\n<pre><code>char string[**size_of_char];\n</code></pre>\n</blockquote>\n\n<p>This is ill-formed. The size of an array must be a compile time constant. That expression isn't.</p>\n\n<blockquote>\n<pre><code>int printmenu(int *size_of_char)\n</code></pre>\n</blockquote>\n\n<p><code>printmenu</code> is declared to return <code>int</code>, but there is no return statement. The behaviour of the program is undefined.</p>\n\n<blockquote>\n<pre><code>// int **size_of_char\nprintf(\"Your grade in subject %d is %c.\\n\", i+1, size_of_char[i]);\n</code></pre>\n</blockquote>\n\n<p>You're trying to print a <code>int*</code> with a wrong format specifier. The behaviour of the program is undefined.</p>\n"}], "owner": {"reputation": 3, "user_id": 4081431, "user_type": "registered", "profile_image": "https://graph.facebook.com/1496862792/picture?type=large", "display_name": "Reggie Geografo", "link": "https://stackoverflow.com/users/4081431/reggie-geografo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 55028647, "answer_count": 1, "score": -3, "last_activity_date": 1551892281, "creation_date": 1551891496, "question_id": 55028413, "link": "https://stackoverflow.com/questions/55028413/implicit-declaration-of-printf", "title": "Implicit declaration of printf", "body": "<p>I'm getting implicit declaration error. Please help. I don't know how to explain it in terms of words, I'd appreciate it very much if you could help me with error. It's my assignment at school and I want to resolve the issue. Please help.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\nint printmenu(int *size_of_char);\nint get_char(int **size_of_char);\n\nint main() { \n\nint choice = 0, size_of_char;\n\nwhile (choice == 0) {\n  printf(\"Enter the size of the array: \"); \n  scanf(\"%d\", &amp;size_of_char);\n  if (size_of_char &lt;= 0) {\n    printf(\"Invalid input\\n\");\n  }\n  else {choice = printmenu(&amp;size_of_char);\n  }\n}\nreturn 0;\n\n}\n\nint printmenu(int *size_of_char) {\nint x;\nprintf(\"Menu\\n\\n\");\nprintf(\"0. Input characters\\n\");\nprintf(\"1. Shift Elements to Right\\n\");\nprintf(\"2. Combinations of 2 digits\\n\");\nprintf(\"3. Exit\\n\");\nprintf(\"Enter choice: \"); \nscanf(\"%d\", &amp;x);\n\nif (x == 0) { \n      get_char(&amp;size_of_char);\n    }\n  }\n\nint get_char(int **size_of_char) {\n    char string[**size_of_char];\n      for(int i = 0; i &lt; **size_of_char; i++){\n      printf(\"Enter value: %c \", i+1);\n      scanf(\"%c\", &amp;string[i]);\n      for(int i = 0; i &lt; **size_of_char; i++){\nprintf(\"Your grade in subject %d is %c.\\n\", i+1, size_of_char[i]);\n//printf(\"Your grade in subject %d is %f.\\n\", i+1, *(grades + i));\n\n\n}\n}\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "unit-testing", "googletest"], "comments": [{"owner": {"reputation": 2333, "user_id": 6783775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d399a7e1545b42ae65bca9b4568099a?s=128&d=identicon&r=PG", "display_name": "rveerd", "link": "https://stackoverflow.com/users/6783775/rveerd"}, "edited": false, "score": 0, "creation_date": 1552062761, "post_id": 55028375, "comment_id": 96882137, "body": "Either configure your app to work in both environments or change both environments to suit your app. As your app cannot be configured (you say the file path is hard coded), maybe you can change your environment? For example can you use a symlink with with the path the app expects that points to the actual file in your test environment?"}, {"owner": {"reputation": 1, "user_id": 11160941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f5b9ef9b33719798260a664e591f5e?s=128&d=identicon&r=PG&f=1", "display_name": "FatCobra", "link": "https://stackoverflow.com/users/11160941/fatcobra"}, "reply_to_user": {"reputation": 2333, "user_id": 6783775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d399a7e1545b42ae65bca9b4568099a?s=128&d=identicon&r=PG", "display_name": "rveerd", "link": "https://stackoverflow.com/users/6783775/rveerd"}, "edited": false, "score": 0, "creation_date": 1552168723, "post_id": 55028375, "comment_id": 96910464, "body": "I found an elegant solution, involving google gtest and gmock. This way I do not make changes to the release code.   The solution is to actually create a getPath function that returns in the real app, the hard coded path, i.e, /AppInstallationFolder/Configuration/dataFile.txt  I learned about gmock delegate to fake. This way I call a fake getPath function which returns the test path (or path of my configuration file in clearcase) using gmock <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#delegating-calls-to-a-fake\" rel=\"nofollow noreferrer\">github.com/google/googletest/blob/master/googlemock/docs/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11160941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f5b9ef9b33719798260a664e591f5e?s=128&d=identicon&r=PG&f=1", "display_name": "FatCobra", "link": "https://stackoverflow.com/users/11160941/fatcobra"}, "is_accepted": true, "score": 0, "last_activity_date": 1552204809, "creation_date": 1552204809, "answer_id": 55085659, "question_id": 55028375, "link": "https://stackoverflow.com/questions/55028375/gtest-unit-tests-target-configuration-file-path/55085659#55085659", "title": "gtest unit tests target configuration file path", "body": "<p>The solution to my problem was to combine gmock with gtest as described by the link</p>\n\n<p><a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#delegating-calls-to-a-fake\" rel=\"nofollow noreferrer\">https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#delegating-calls-to-a-fake</a></p>\n\n<p>The only modification I made to my code is that instead of defining the path to the configuration data using #define, I created a function getConfigFilePath() that returns the hardcoded path of the configuration file in the installed application. From here, I mocked the class and in my mock, I call a fake getConfigFilePath() that returns, when the real code is executing, the hardcoded path of the config file in the project tree in ClearCase. This is precisely what I was looking for.</p>\n"}], "owner": {"reputation": 1, "user_id": 11160941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78f5b9ef9b33719798260a664e591f5e?s=128&d=identicon&r=PG&f=1", "display_name": "FatCobra", "link": "https://stackoverflow.com/users/11160941/fatcobra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 55085659, "answer_count": 1, "score": 0, "last_activity_date": 1552204809, "creation_date": 1551891393, "question_id": 55028375, "link": "https://stackoverflow.com/questions/55028375/gtest-unit-tests-target-configuration-file-path", "title": "gtest unit tests target configuration file path", "body": "<p>In my C++ application, I have a text file (dataFile.txt) that is installed on the Linux target machine in the following path:</p>\n\n<pre><code>/SoftwareHomeDir/Configuration/Application/dataFile.txt\n</code></pre>\n\n<p>This file exists on my Rational ClearCase source code environment under the path:</p>\n\n<pre><code>/ProjectName/config/Application/dataFile.txt\n</code></pre>\n\n<p>I am developping a unitTest in gtest that does following:</p>\n\n<p>Read a specific data from <code>dataFile.txt</code> , if the data does not exist than write it into the file.</p>\n\n<p>1) I am avoiding to create an environment variable to check whether I am in the compilation environment or the target machine. Then add additional test code in the final release. I really want to separate test code from final code.</p>\n\n<p>2) I am not using any IDE (no visual studio, no qt, etc.), just notepad++</p>\n\n<p>3) The compilatio. server is shared (access with a username, however the root folder \"/\" is shared. Which means that if I create the path <code>\"/SoftwareHomeDir/Confiugration/Application/dataFile.txt\"</code>, it will be visible by all users, and if another user is running his gtest unitTest, he may overwrite my file. </p>\n\n<p>4) In the final code, the path to the dataFile is hard coded, and it is very costly (will take few seconds to run) to implement a filesearch(filename) method to look for the file in the entire hard drive before reading the file.</p>\n\n<p>Question:</p>\n\n<p>I am looking for a solution to unit-test my code in the compilation environment that is using  <code>/ProjectName/config/Application/dataFile.txt</code></p>\n"}, {"tags": ["c++", "multidimensional-array", "element"], "comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 2, "creation_date": 1551891584, "post_id": 55028366, "comment_id": 96809424, "body": "<code>1234</code> is an <code>int</code>, not an array. So why do you believe that you can access an <code>int</code> like an array? Would you really expect <code>int x = 3456; int y = x[2];</code> to work and return 3?"}, {"owner": {"reputation": 7050, "user_id": 8033585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbcd92ce2da15d74815d79b2908132d3?s=128&d=identicon&r=PG&f=1", "display_name": "AGN Gazer", "link": "https://stackoverflow.com/users/8033585/agn-gazer"}, "edited": false, "score": 0, "creation_date": 1551892085, "post_id": 55028366, "comment_id": 96809768, "body": "There are numerous posts that explain how to get individual digits in an integer, see e.g., <a href=\"https://stackoverflow.com/a/3118505/8033585\">stackoverflow.com/a/3118505/8033585</a>, <a href=\"https://stackoverflow.com/q/4615046/8033585\">stackoverflow.com/q/4615046/8033585</a>, or <a href=\"https://stackoverflow.com/q/4207696/8033585\">stackoverflow.com/q/4207696/8033585</a>, to name a few."}], "answers": [{"tags": [], "owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "is_accepted": true, "score": 2, "last_activity_date": 1551891580, "creation_date": 1551891580, "answer_id": 55028440, "question_id": 55028366, "link": "https://stackoverflow.com/questions/55028366/c-unable-to-index-an-element-of-an-array-using-a-nested-loop/55028440#55028440", "title": "C++ unable to index an element of an array using a nested loop", "body": "<p>Ypu are using one dimensional array, What you are wishing for is a 2dimensional array and that's how you declare it    </p>\n\n<pre><code> int array1[][]= {{1,2,3,4},{4,3,2,1}};\n int array2[][]= {{2,3,4,5},{3,2,1,4}}; \n</code></pre>\n"}], "owner": {"reputation": 819, "user_id": 10543735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3882cc7ae4cd015cc3a2a93c84e98233?s=128&d=identicon&r=PG&f=1", "display_name": "VickTree", "link": "https://stackoverflow.com/users/10543735/vicktree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1551892486, "accepted_answer_id": 55028440, "answer_count": 1, "score": -1, "last_activity_date": 1551891580, "creation_date": 1551891356, "last_edit_date": 1551891455, "question_id": 55028366, "link": "https://stackoverflow.com/questions/55028366/c-unable-to-index-an-element-of-an-array-using-a-nested-loop", "closed_reason": "Duplicate", "title": "C++ unable to index an element of an array using a nested loop", "body": "<p>I am having difficulty understanding how i can fix this this error \"array1[i][j] = expression must be a pointer-to-object type.  I have searched the error but i am unable to apply the solutions to my code snippet.  </p>\n\n<pre><code>int main(){\n\n    int array1[]= {1234,4321}; //{1234,4321};\n    int array2[]= {2345,3214}; //{2345,3214};\n    int counter = 0;\n    int arr_element = sizeof(array1);\n    int arr_index =  sizeof(array1)/sizeof(*array1); \n\n    for(int i = 0, count1 = arr_index; i &lt; count1; i++ ){\n        for(int j = 0, count2 = 4; j &lt; count2; j++){\n            cout &lt;&lt; array1[i][j] &lt;&lt; endl;\n\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>What i would like to do is be able to print out the elements in array1; for example, i would like this output: 1,2,3,4,4,3,2,1. From my understanding, the int a needs to be a pointer.  I i added * in front of the array (*array1) and in front of the int (int**), but with no luck.  Thank you for your time.</p>\n"}, {"tags": ["c++", "templates", "language-lawyer", "c++17"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1551891510, "post_id": 55028330, "comment_id": 96809375, "body": "Didn&#39;t you <i>already</i> ask this: <a href=\"https://stackoverflow.com/questions/55026916/ctad-in-member-variables\" title=\"ctad in member variables\">stackoverflow.com/questions/55026916/ctad-in-member-variable&zwnj;&#8203;s</a> ?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1551891535, "post_id": 55028330, "comment_id": 96809392, "body": "@JesperJuhl: No, that&#39;s a question about CTAD in member variables. This is something else."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1551891618, "post_id": 55028330, "comment_id": 96809451, "body": "&quot;But it complicates implementation code and is not elegant at all.&quot; You think adding an alias in one spot in code is complex, but adding language rules all over the place is not?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1551891680, "post_id": 55028330, "comment_id": 96809487, "body": "@Barry Yes, I think language should help the programmer, not programmer suffering the language."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1551891749, "post_id": 55028330, "comment_id": 96809537, "body": "@Lyberta: &quot;Help the programmer&quot; depends on perspective. A template is not the same thing as what it generates, so is it &quot;helping the programmer&quot; to lie to them?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551891757, "post_id": 55028330, "comment_id": 96809540, "body": "Answering the question on it&#39;s face value: &quot;Is this considered a bug in the standard? Is there a proposal to fix it?&quot; No, it is not considered a bug, and there is currently no proposal I know of which would change those rules."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551891853, "post_id": 55028330, "comment_id": 96809599, "body": "As for helping the programmer, sometime C++ has to deviate from this idea quite significantly. The whole <code>typename</code> (when required to indicate an identifier as a type in template contexts) and <code>foo-&gt;template func&lt;int&gt;()</code> doesn&#39;t seem very helpful, but unfortunately, are required."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1551891964, "post_id": 55028330, "comment_id": 96809676, "body": "@SergeyA And people like me recognized it as a bug and fixed some cases in C++20: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0634r3.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0634r3.html</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551892126, "post_id": 55028330, "comment_id": 96809795, "body": "That relates to what I have said in my comments in other question of yours - if you feel that you have a solution, by all means, submit a proposal."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551892205, "post_id": 55028330, "comment_id": 96809838, "body": "@SergeyA I&#39;m asking the opinion of other language experts before I go forward."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 3, "creation_date": 1551892240, "post_id": 55028330, "comment_id": 96809869, "body": "@Lyberta: &quot;<i>And people like me recognized it as a bug</i>&quot; No, they didn&#39;t. They recognized a part of the language that could be improved. A &quot;bug&quot; is a part of the language that is <i>broken</i>. There&#39;s a difference."}], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 3, "last_activity_date": 1551892171, "creation_date": 1551892171, "answer_id": 55028613, "question_id": 55028330, "link": "https://stackoverflow.com/questions/55028330/omit-angle-brackets-when-template-has-default-parameters/55028613#55028613", "title": "Omit angle brackets when template has default parameters", "body": "<blockquote>\n  <p>Is this considered a bug in the standard?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>Templates are a named construct which generates another construct (classes/functions/variables) based on a set of parameters. The name of a template is <em>not</em> the name of the construct which it generates. The name of a template is just the name of the template; to name the thing the template generates, you must provide the template parameters.</p>\n\n<p><code>Foo</code> is the name of a template; <code>Foo&lt;&gt;</code> is the name of a class generated by that template and its associated template parameters.</p>\n\n<p>There are a couple of places where C++ allows a template to be used in such a way that its parameters are deduced from a sequence of expressions. But these are very specific places, created for convenience purposes. They do not exist for the purpose of <em>hiding</em> the fact that a name represents a template rather than the generated construct.</p>\n\n<blockquote>\n  <p>Is there a proposal to fix it?</p>\n</blockquote>\n\n<p>There is nothing broken to fix. And there are at present no proposals adding changes in this way.</p>\n\n<blockquote>\n  <p>Are there any actual problems with omitting angle brackets?</p>\n</blockquote>\n\n<p>Define \"actual problem\". Is it theoretically possible to have the language altered so that, if all of a template's parameters are defaulted, the name of the template can be used without template parameters to simultaneously mean the template <em>and</em> the thing the template generates?</p>\n\n<p>It is <em>probably</em> possible. But it would be <em>complicated</em> to specify. You would need a serious spec-doctor, one who understands the C++ grammar at a deep level, to know for sure whether it is possible, and what exactly would need to be changed to do it.</p>\n\n<p>But at the end of the day, it would only ever be useful for a small, select set of templates: templates that have default values for all of its parameters. The real question is whether that is a common enough case to be worth the effort.</p>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 2, "last_activity_date": 1551968722, "creation_date": 1551968722, "answer_id": 55046118, "question_id": 55028330, "link": "https://stackoverflow.com/questions/55028330/omit-angle-brackets-when-template-has-default-parameters/55046118#55046118", "title": "Omit angle brackets when template has default parameters", "body": "<p>I don't consider myself a language expert, but my stance would be that the problem your proposal tries to tackle is solved much simpler in the same way <code>std::(basic_)string</code> does it.</p>\n\n<p>We have</p>\n\n<pre><code>template&lt;\n    class CharT,\n    class Traits = std::char_traits&lt;CharT&gt;,\n    class Allocator = std::allocator&lt;CharT&gt;\n&gt; class basic_string;\n</code></pre>\n\n<p>and then a set of <code>typedef</code>s for \"non-expert\" users, such as <code>std::string</code> for <code>std::basic_string&lt;char&gt;</code>.</p>\n\n<p>If an expert user wants to make use of the other template parameters, they can themselves define a type alias, which is nice and coherent with the above. Moreover, this cleanly separates the <em>template</em> from the <em>types</em> that are created from it.</p>\n\n<p>Your suggestion of allowing templates with defaults for all parameters to be named by <code>MyTemplate</code> alone, instead of requiring <code>MyTemplate&lt;&gt;</code>, or making use of <code>using MyTemplate = MyBasicTemplate&lt;&gt;;</code>, has the following issues:</p>\n\n<ul>\n<li><p>It complicates the grammar and specification of the language. You need to touch the allowed syntax of <em>all</em> the contexts mentioned in your question, adding the ability to use a template name where a type name would be expected, but <em>only</em> if the relevant template has default values for all template parameters. And if you don't change all of them, you introduce weirdly inconsistent behavior.</p></li>\n<li><p>There is some overlap between your suggestion and CTAD, but CTAD is decidedly about reducing type verbosity <em>for initialization</em>. CTAD offers significant comfort within its scope and is extensible through deduction guides, whereas your proposal's syntactic sugar is only relevant in a tiny usage niche, with much smaller benefits.</p></li>\n<li><p>There is the danger of accidentally using the wrong template parameters (did you mean the default template parameters or did you just forget to specify the ones you wanted?). Even if that is not a concern in <em>your</em> use case, the standard would have to concern itself with that potential issue.</p></li>\n<li><p>There is also the danger of your suggestion conflicting with deduction guides. <a href=\"https://godbolt.org/z/SpHxY0\" rel=\"nofollow noreferrer\">Who should win?</a></p></li>\n<li><p>Your problem is easily and conveniently solved with existing language tools (see above). I disagree that this \"complicates\" implementation code (complexity is literally only increased by a single <code>typedef</code>/<code>using</code>, (re)naming your template is absolutely trivial work) or that it is inelegant.</p></li>\n<li><p>Overall, the problem you intend to solve (saving library implementers a <code>using</code>, or users a <code>&lt;&gt;</code> (or <code>using</code>), exclusively for all-defaulted templates) is fringe at best and will not be a sufficient motivation for significantly altering several core aspects the language. That's my prediction at least.</p></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1551968722, "creation_date": 1551891240, "last_edit_date": 1551891871, "question_id": 55028330, "link": "https://stackoverflow.com/questions/55028330/omit-angle-brackets-when-template-has-default-parameters", "title": "Omit angle brackets when template has default parameters", "body": "<p>Suppose we have a class template with default template parameter:</p>\n\n<pre><code>template &lt;typename T = int&gt;\nclass Foo {};\n</code></pre>\n\n<p>We can omit angle brackets when creating a variable inside a function:</p>\n\n<pre><code>int main()\n{\n    Foo a; // gets properly deduced as Foo&lt;int&gt;\n}\n</code></pre>\n\n<p>But we can't do that for member variables:</p>\n\n<pre><code>struct S\n{\n    Foo a; // Deduce Foo&lt;int&gt;\n};\n</code></pre>\n\n<p>We can't have derivative types such as this:</p>\n\n<pre><code>Foo* ptr; // Foo&lt;int&gt;*\nFoo&amp; ref; // Foo&lt;int&gt;&amp;\nint Foo::* mem_ptr; // int Foo&lt;int&gt;::*\nstd::function&lt;Foo(const Foo&amp;)&gt; fn; // std::function&lt;Foo&lt;int&gt;(const Foo&lt;int&gt;&amp;)&gt;\n</code></pre>\n\n<p>We can't accept parameters and return them:</p>\n\n<pre><code>Foo Bar(const Foo&amp;); // Foo&lt;int&gt; (*)(const Foo&lt;int&gt;&amp;)\n</code></pre>\n\n<p>Why? Is this considered a bug in the standard? Is there a proposal to fix it? Are there any actual problems with omitting angle brackets?</p>\n\n<p>My use case:</p>\n\n<p>I have a class template which provides default argument. The template parameter is an expert-only feature that I myself never use but it is there for those 1% of experts who want that total flexibility. Now for other 99% I want to hide the fact that <code>Foo</code> is actually a class template but it doesn't work because users have to type <code>Foo&lt;&gt;</code> when declaring it as a member variable, current solution is this:</p>\n\n<pre><code>template &lt;typename T = int&gt;\nclass BasicFoo {};\n\nusing Foo = BasicFoo&lt;&gt;;\n</code></pre>\n\n<p>But it complicates implementation code and is not elegant at all.</p>\n"}, {"tags": ["python", "c++", "opencv", "translate"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1551891101, "post_id": 55028198, "comment_id": 96809122, "body": "10000 byte buffer is probably not enough to fit the whole image. You don&#39;t decode the image data. And for some odd reason you create the image as containing 64bit floating point values."}, {"owner": {"reputation": 47, "user_id": 11107152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd3e60aa81bf96e7cb02618a82c186c?s=128&d=identicon&r=PG&f=1", "display_name": "BotMan", "link": "https://stackoverflow.com/users/11107152/botman"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1551891350, "post_id": 55028198, "comment_id": 96809285, "body": "@DanMa\u0161ek, thanks for comment. My image size is 50x50, i think, 10000 bytes is enough"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1551891362, "post_id": 55028198, "comment_id": 96809295, "body": "@BotMan <code>CV_64F</code> is for <i>double</i>, see <a href=\"https://stackoverflow.com/questions/15130162/how-to-access-pixel-values-of-cv-32f-cv-64f-mat\">How to access pixel values of CV_32F/CV_64F Mat?</a>"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1551891397, "post_id": 55028198, "comment_id": 96809318, "body": "@BotMan why <code>1280, 720</code> then if 50x50 ?"}, {"owner": {"reputation": 47, "user_id": 11107152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd3e60aa81bf96e7cb02618a82c186c?s=128&d=identicon&r=PG&f=1", "display_name": "BotMan", "link": "https://stackoverflow.com/users/11107152/botman"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1551891790, "post_id": 55028198, "comment_id": 96809557, "body": "@bruno, because 1280x720 looks better on the screen, then 50x50 :D. 50x50 - only for speed optimization"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1551892074, "post_id": 55028198, "comment_id": 96809757, "body": "@BotMan sure ^^ but I was speaking about the memory size, 1280*720 is 921600 while 10000 byte is 80000 bits and less than one bit for a pixel is ... (but may be the error is in <code>read_some</code> so before)"}, {"owner": {"reputation": 47, "user_id": 11107152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd3e60aa81bf96e7cb02618a82c186c?s=128&d=identicon&r=PG&f=1", "display_name": "BotMan", "link": "https://stackoverflow.com/users/11107152/botman"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 1, "creation_date": 1551892342, "post_id": 55028198, "comment_id": 96809939, "body": "@bruno, hmm.. In python all works perfectly, with the same size of receive array. Anyway, im found the solution."}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 11107152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd3e60aa81bf96e7cb02618a82c186c?s=128&d=identicon&r=PG&f=1", "display_name": "BotMan", "link": "https://stackoverflow.com/users/11107152/botman"}, "is_accepted": false, "score": 1, "last_activity_date": 1551892382, "creation_date": 1551892382, "answer_id": 55028681, "question_id": 55028198, "link": "https://stackoverflow.com/questions/55028198/implementing-python-np-fromstring-in-c/55028681#55028681", "title": "Implementing python np.fromstring() in C++", "body": "<p>Thanks for all comments. I found the solution:</p>\n\n<pre><code>    while (ignored_error != boost::asio::error::eof) {\n\n        boost::array&lt;uchar, 10000&gt; RECV_DATA;\n\n        size_t ImageSize = image_recver.read_some(\n            boost::asio::buffer(RECV_DATA), ignored_error);\n\n        vector&lt;uchar&gt; Img (ImageSize);\n\n        for (int i = 0; i &lt; ImageSize; i++) {\n            Img[i] = RECV_DATA[i];\n        }\n\n        Mat img_img = imdecode(Img, 1);\n\n        imshow(\"1\", img_img);\n        waitKey(1);\n\n    }\n</code></pre>\n\n<p>P.S Of course, still need to come up with for loop.</p>\n"}], "owner": {"reputation": 47, "user_id": 11107152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd3e60aa81bf96e7cb02618a82c186c?s=128&d=identicon&r=PG&f=1", "display_name": "BotMan", "link": "https://stackoverflow.com/users/11107152/botman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551892382, "creation_date": 1551890758, "last_edit_date": 1551891661, "question_id": 55028198, "link": "https://stackoverflow.com/questions/55028198/implementing-python-np-fromstring-in-c", "title": "Implementing python np.fromstring() in C++", "body": "<p>Im trying to translate my Python code to C++ (for speed up).</p>\n\n<p>My code receive the image by socket and just show it.</p>\n\n<p>Python code:</p>\n\n<pre><code>            self._img = cv2.imdecode(np.fromstring(self._SocketData, np.uint8), 1)\n            if not self._img is None:\n                self._img = cv2.resize(self._img, (1280, 720))\n                cv2.imshow(\"1\", self._img)\n                cv2.waitKey(1)\n</code></pre>\n\n<p>Unfortunately, i get problem with \"np.fromstring\" in C++.</p>\n\n<p>How to implement that?</p>\n\n<p>Im trying this:</p>\n\n<pre><code>while (ignored_error != boost::asio::error::eof) {\n\n    boost::array&lt;uchar, 10000&gt; RECV_DATA;\n\n    size_t ImageSize = image_recver.read_some(\n        boost::asio::buffer(RECV_DATA), ignored_error);\n\n    vector&lt;uchar&gt; Img (ImageSize);\n\n    for (int i = 0; i &lt; ImageSize; i++) {\n        Img[i] = RECV_DATA[i];\n    }\n\n    Mat img(1280, 720, CV_64F, Img.data());\n\n    imshow(\"1\", img);\n    waitKey(1);\n\n}\n</code></pre>\n\n<p>But this is not working (I think this is due with \"cv2.imdecode\" and \"np.fromstring\").</p>\n\n<p>Please, help me</p>\n\n<p>P.S Generally, my main problem exactly in np.fromstring, because from socket im get a string, not a some bytes or integers and i should transform a string to array of pixels from (0-255 each)</p>\n"}, {"tags": ["c++", "segmentation-fault", "virtual-machine"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1551888251, "post_id": 55027310, "comment_id": 96807403, "body": "Start by catching the crash in a debugger to learn when and where in your code the crash happens. Also examine the values of all involved variables at that point. If you still can&#39;t figure it out yourself, then please update your question to include all those details."}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 3, "creation_date": 1551888278, "post_id": 55027310, "comment_id": 96807423, "body": "<code>memory</code> is empty when <code>loadProgram</code> is called, so you are accessing elements out of bounds. <code>reserve</code> doesn&#39;t add any items, You probably confused it with <code>resize</code>."}, {"owner": {"reputation": 19, "user_id": 11160704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ukglErAiodI/AAAAAAAAAAI/AAAAAAAAAGY/43KYkM6h9cg/photo.jpg?sz=128", "display_name": "PrograMed IP", "link": "https://stackoverflow.com/users/11160704/programed-ip"}, "reply_to_user": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 0, "creation_date": 1551899395, "post_id": 55027310, "comment_id": 96813472, "body": "@rafix07 No it&#39;s actually <code>reserve</code> which is used"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11160704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ukglErAiodI/AAAAAAAAAAI/AAAAAAAAAGY/43KYkM6h9cg/photo.jpg?sz=128", "display_name": "PrograMed IP", "link": "https://stackoverflow.com/users/11160704/programed-ip"}, "edited": false, "score": 0, "creation_date": 1551901049, "post_id": 55027636, "comment_id": 96814323, "body": "Either it&#39;s <code>resize</code> or <code>reserve</code>, still there&#39;s not output."}, {"owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "reply_to_user": {"reputation": 19, "user_id": 11160704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ukglErAiodI/AAAAAAAAAAI/AAAAAAAAAGY/43KYkM6h9cg/photo.jpg?sz=128", "display_name": "PrograMed IP", "link": "https://stackoverflow.com/users/11160704/programed-ip"}, "edited": false, "score": 0, "creation_date": 1551901325, "post_id": 55027636, "comment_id": 96814463, "body": "you should use resize"}, {"owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "reply_to_user": {"reputation": 19, "user_id": 11160704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ukglErAiodI/AAAAAAAAAAI/AAAAAAAAAGY/43KYkM6h9cg/photo.jpg?sz=128", "display_name": "PrograMed IP", "link": "https://stackoverflow.com/users/11160704/programed-ip"}, "edited": false, "score": 0, "creation_date": 1551901381, "post_id": 55027636, "comment_id": 96814496, "body": "no output as in no printout ? That&#39;s because you load, but don&#39;t call run"}], "tags": [], "owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "is_accepted": true, "score": 1, "last_activity_date": 1551889002, "creation_date": 1551889002, "answer_id": 55027636, "question_id": 55027310, "link": "https://stackoverflow.com/questions/55027310/segmentation-fault-while-creating-a-stack-vm/55027636#55027636", "title": "Segmentation fault while creating a Stack VM", "body": "<p>the line: </p>\n\n<pre><code>for (i32 i = 0; 1 &lt; prog.size(); i++)\n</code></pre>\n\n<p>is incorrect, and should be i, not 1. </p>\n\n<p>In addition reserve sets the capacity, not the size of the vector. You should use resize. </p>\n"}], "owner": {"reputation": 19, "user_id": 11160704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ukglErAiodI/AAAAAAAAAAI/AAAAAAAAAGY/43KYkM6h9cg/photo.jpg?sz=128", "display_name": "PrograMed IP", "link": "https://stackoverflow.com/users/11160704/programed-ip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 55027636, "answer_count": 1, "score": 0, "last_activity_date": 1551889002, "creation_date": 1551887955, "question_id": 55027310, "link": "https://stackoverflow.com/questions/55027310/segmentation-fault-while-creating-a-stack-vm", "title": "Segmentation fault while creating a Stack VM", "body": "<p>I'm trying to create a VM which will run simple stuff for now. However, after compilation, I tried running it but got a segmentation fault. There are 4 files : <code>stack-vm.h</code>, <code>stack-vm.cpp</code>, <code>main.cpp</code>, <code>makefile</code>.</p>\n\n<p>stack-vm.h :</p>\n\n<pre><code>#ifndef STACK_VM_H\n  #define STACK_VM_H\n\n  #include &lt;iostream&gt;\n  #include &lt;vector&gt;\n\n  //type definitions\n  typedef int32_t i32;\n\n  class StackVM {\n\n  private:\n    i32 pc = 100; // program counter\n    i32 sp = 0; // stack pointer\n    std::vector&lt;i32&gt; memory;\n    i32 typ = 0;\n    i32 dat = 0;\n    i32 running = 1;\n\n    i32 getType(i32 instruction);\n    i32 getData(i32 instruction);\n    void fetch();\n    void decode();\n    void execute();\n    void doPrimitive();\n\n  public:\n    StackVM();\n    void run();\n    void loadProgram(std::vector&lt;i32&gt; prog);\n\n  };\n\n#endif\n</code></pre>\n\n<p>stack-vm.cpp :</p>\n\n<pre><code>    #include \"stack-vm.h\"\n\nStackVM::StackVM() {\n  memory.reserve(1000000);\n}\n\ni32 StackVM::getType(i32 instruction) {\n  i32 type = 0xc0000000;\n  type = (type &amp; instruction) &gt;&gt; 30;\n  return type;\n}\n\ni32 StackVM::getData(i32 instruction) {\n  i32 data = 0x3fffffff;\n  data = data &amp; instruction;\n  return data;\n}\nvoid StackVM::fetch() {\n  pc++;\n}\n\nvoid StackVM::decode() {\n  typ = getType(memory[pc]);\n  dat = getData(memory[pc]);\n}\n\nvoid StackVM::execute() {\n  if (typ == 0 || typ == 2) {\n    sp++;\n    memory[sp] = dat;\n  } else {\n    doPrimitive();\n  }\n}\n\nvoid StackVM::doPrimitive() {\n  switch (dat) {\n    case 0: // halt\n      std::cout &lt;&lt; \"halt\" &lt;&lt; std::endl;\n      running = 0;\n      break;\n\n    case 1: // add\n      std::cout &lt;&lt; \"add \" &lt;&lt; memory[sp - 1] &lt;&lt; \" \" &lt;&lt; memory[sp] &lt;&lt; std::endl;\n      memory[sp - 1] = memory[sp - 1] + memory[sp];\n      break;\n  }\n}\n\nvoid StackVM::run() {\n  pc -= 1;\n  while (running) {\n    fetch();\n    decode();\n    execute();\n    std::cout &lt;&lt; \"tos: \" &lt;&lt; memory[sp] &lt;&lt; std::endl;\n  }\n}\n\nvoid StackVM::loadProgram(std::vector&lt;i32&gt; prog) {\n  for (i32 i = 0; 1 &lt; prog.size(); i++) {\n    memory[pc + i] = prog[i];\n  }\n}\n</code></pre>\n\n<p>main.cpp :</p>\n\n<pre><code>    #include \"stack-vm.h\"\n\nint main(int argc, char* argv[]) {\n  StackVM vm;\n  std::vector&lt;i32&gt; prog{3, 4, 0x40000001, 0x40000000};\n  vm.loadProgram(prog);\n\n  return 0;\n}\n</code></pre>\n\n<p>makefile : </p>\n\n<pre><code>        CFLAGS=-std=c++11\n\n    all: stack-vm\n\n    stack-vm: stack-vm.o main.o\n        $(CXX) $(CFLAGS) stack-vm.o main.o -o stack-vm\n\n    main.o: main.cpp\n        $(CXX) $(CFLAGS) -c main.cpp\n\n    stack-vm.o: stack-vm.h stack-vm.cpp\n        $(CXX) $(CFLAGS) -c stack-vm.cpp\n\n    clean:\n        rm -f *.o stack-vm\n</code></pre>\n\n<p>Thank you for your answers.</p>\n"}, {"tags": ["c++", "templates", "c++17"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1551887110, "post_id": 55026916, "comment_id": 96806670, "body": "No moreso than the fact that you can&#39;t use <code>auto</code> in a member variable."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551887192, "post_id": 55026916, "comment_id": 96806716, "body": "Just that the syntax is the same does not mean it&#39;s the same thing. The first is a variable declaration, the other is a field declaration."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1551887517, "post_id": 55026916, "comment_id": 96806925, "body": "For those wondering what CTAD means : <a href=\"https://en.cppreference.com/w/cpp/language/class_template_argument_deduction\" rel=\"nofollow noreferrer\">Class template argument deduction</a>."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1551889490, "post_id": 55026916, "comment_id": 96808147, "body": "@Lyberta: &quot;<i>Now for other 99% I want to hide the fact that Foo is actually a class template</i>&quot; Well, you can&#39;t; C++ does not let you. Even if CTAD worked here, it wouldn&#39;t work in general. You couldn&#39;t have a function that took <code>Foo</code> as a parameter. You can&#39;t talk to static members of <code>Foo</code> or get member pointers from it. CTAD is not there to <i>hide</i> the fact that something is a template. It&#39;s a convenience feature to allow the compiler to figure out what it already knows."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1551889833, "post_id": 55026916, "comment_id": 96808379, "body": "@NicolBolas Can you expand it into the answer with proper code samples? I wanna see where exactly the syntax roadblock lies."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1551890071, "post_id": 55026916, "comment_id": 96808530, "body": "@Lyberta: Your question is about CTAD in member variables. I was responding to a side issue: the fact that the reason you <i>want</i> CTAD in member variables is never going to work out, even if you could get CTAD in member variables. So such an &quot;answer&quot; would not answer the question you have asked. And since everyone else already answered based on the issue of CTAD in member variables, it&#39;s not fair for you to change the question."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551890988, "post_id": 55026916, "comment_id": 96809060, "body": "How does adding the single line <code>using Foo = BasicFoo&lt;&gt;;</code> complicate implementation code? Anyway, if you want to describe your <i>real</i> problem in greater detail, please do so in a new question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551891136, "post_id": 55026916, "comment_id": 96809145, "body": "@MaxLanghof Because now I have to write <code>BasicFoo</code> in all the implementation code."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1551891182, "post_id": 55026916, "comment_id": 96809174, "body": "@Lyberta: You don&#39;t get to radically alter your question after people have answered it."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "edited": false, "score": 0, "creation_date": 1551887291, "post_id": 55026999, "comment_id": 96806787, "body": "There is no in-place initializer so in my mind the type is fixed even before calling the constructor."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1551887347, "post_id": 55026999, "comment_id": 96806821, "body": "@Lyberta: That&#39;s fine... in your mind. But that kind of thinking is not something the standard wants to promote."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551887356, "post_id": 55026999, "comment_id": 96806829, "body": "@Lyberta CTAD relies on the constructor call signature, so it makes perfect sense if it doesn&#39;t work without a constructor call."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551887392, "post_id": 55026999, "comment_id": 96806848, "body": "@MaxLanghof: It also works in aggregate initialization, if you have an appropriate deduction guide."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1551887432, "post_id": 55026999, "comment_id": 96806879, "body": "@Lyberta how do you mean? As I tried to explain, there could be different constructor calls for the same member variable. How do you want CTAD rules to work?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "edited": false, "score": 0, "creation_date": 1551887508, "post_id": 55026999, "comment_id": 96806920, "body": "@SergeyA I guess I don&#39;t want CTAD there, updated the question."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1551887715, "post_id": 55026999, "comment_id": 96807054, "body": "I do not understand what you are asking now. Without CTAD, <code>std::less</code> is a template, so it has to be used as such. <code>std::less&lt;&gt; a;</code> will work fantastically well."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "edited": false, "score": 0, "creation_date": 1551888259, "post_id": 55026999, "comment_id": 96807411, "body": "@SergeyA But it exposes its templateness which is not always desirable."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551889045, "post_id": 55026999, "comment_id": 96807885, "body": "@Lyberta <code>using default_less = std::less&lt;&gt;</code> will hide it&#39;s blatant templateness from all but the most skilled private detectives :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "edited": false, "score": 0, "creation_date": 1551889532, "post_id": 55026999, "comment_id": 96808173, "body": "@SergeyA But why do we have to have this workaround? I don&#39;t see any counterarguments why my proposal shouldn&#39;t work."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 3, "creation_date": 1551889799, "post_id": 55026999, "comment_id": 96808356, "body": "@Lyberta: &quot;<i>But it exposes its templateness which is not always desirable.</i>&quot; It is a template; it is a fact that <i>will be exposed</i> to the user. CTAD is not about hiding the fact that something is a template; it&#39;s a convenience feature to keep people from having to retype the same information."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1551890100, "post_id": 55026999, "comment_id": 96808545, "body": "@Lyberta because it is not a workaround. <code>std::less</code> will always be a template. CTAD is (essentially) a typing aid, which allows people to not repeat the same information twice - for the constructor call and template argument. I also do not like how your questions evolves over time, and now it became quite a different question,"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551890876, "post_id": 55026999, "comment_id": 96808989, "body": "@Lyberta There is nothing preventing you from designing a language where your proposal would &quot;work&quot;. But to make it work <i>in C++</i>, you would have to change the language and grammar significantly. And doing all that in order to <i>obfuscate</i> code is not going to happen. FWIW, <code>std::string</code> (which <a href=\"https://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\">is actually</a> a <code>std::basic_string&lt;char&gt;</code>) has and solves exactly your problem."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1551891031, "post_id": 55026999, "comment_id": 96809081, "body": "@MaxLanghof There was a problem with terse concept syntax because it obfuscated function templates. But omitting angle bracket in my proposed cased doesn&#39;t change the semantics i.e. no angle brackets mean a type and not a template in cases where type is expected."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551891174, "post_id": 55026999, "comment_id": 96809169, "body": "@Lyberta this now becomes a rather moot discussion. If you think you know how to significantly improve C++ usability as a language, while preventing backward compatibility and not placing unreasonable burden on compiler writers (and are also ready to submit some prototype compiler code which would support it!) by all means, submit a proposal and we will all (as a community) benefit from it!"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 6, "last_activity_date": 1551887119, "creation_date": 1551887119, "answer_id": 55026999, "question_id": 55026916, "link": "https://stackoverflow.com/questions/55026916/class-template-argument-deduction-in-member-variables/55026999#55026999", "title": "Class Template Argument Deduction in member variables", "body": "<p>No, it is not a bug. It is because there could be different constructors called for the same member variable (called through class' constructor init list), potentially yielding different deduction result.</p>\n\n<p>To prevent the potential for such conflict, you have to provide template arguments to non-static members. (Static members are not a problem, because there will a be a single constructor call for them)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3624760"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1551893544, "creation_date": 1551886859, "last_edit_date": 1551893544, "question_id": 55026916, "link": "https://stackoverflow.com/questions/55026916/class-template-argument-deduction-in-member-variables", "title": "Class Template Argument Deduction in member variables", "body": "<p>Expanded version <a href=\"https://stackoverflow.com/questions/55028330/omit-angle-brackets-when-template-has-default-parameters\">here</a>.</p>\n\n<p>We can create objects of class templates that have default template parameters without typing angle brackets:</p>\n\n<pre><code>int main()\n{\n    std::less a;\n}\n</code></pre>\n\n<p>But we can't do that for member variables:</p>\n\n<pre><code>struct S\n{\n    std::less a; // I want only type std::less&lt;void&gt; here\n};\n</code></pre>\n\n<p>It looks like the first case works due to <a href=\"https://en.cppreference.com/w/cpp/language/class_template_argument_deduction\" rel=\"nofollow noreferrer\">CTAD</a> but why can't compiler deduce <code>std::less&lt;void&gt;</code> in the second case? Maybe we shouldn't apply CTAD there but provide different mechanism.</p>\n\n<p>Is this considered a bug in the standard? Is there a proposal to fix it?</p>\n\n<p>My use case:</p>\n\n<p>I have a class template which provides default argument, like this:</p>\n\n<pre><code>template &lt;typename T = int&gt;\nclass Foo {};\n</code></pre>\n\n<p>The template parameter is an expert-only feature that I myself never use but it is there for those 1% of experts who want that total flexibility. Now for other 99% I want to hide the fact that <code>Foo</code> is actually a class template but it doesn't work because users have to type <code>Foo&lt;&gt;</code> when declaring it as a member variable, current solution is this:</p>\n\n<pre><code>template &lt;typename T = int&gt;\nclass BasicFoo {};\n\nusing Foo = BasicFoo&lt;&gt;;\n</code></pre>\n\n<p>But it complicates implementation code and is not elegant at all.</p>\n"}, {"tags": ["c++", "variables"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 9, "creation_date": 1551885756, "post_id": 55026499, "comment_id": 96805835, "body": "<code>int numbersarray[] = {};</code> arrays are not dynamic in C++. Use a <code>std::vector</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551885850, "post_id": 55026499, "comment_id": 96805883, "body": "What compiler are you using, as it should not compile per the standard?  If you are using GCC use <code>-pedantic-errors</code> in your compiler options to have it reject this code."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1551885895, "post_id": 55026499, "comment_id": 96805909, "body": "<code>int numbersarray[] = {}</code> is not allowed in c++ (though some compilers allow it by default as an extension of the language). In any case, it contains no elements and trying to access one is undefined behavior, meaning pretty much anything is possible. This includes seemingly impossible things like unrelated variables spontaneously changing values."}, {"owner": {"reputation": 59, "user_id": 10935288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4z9dcMqm61M/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbbaCRyFPXdkAeg0JOyqwN67jx7Jw/mo/photo.jpg?sz=128", "display_name": "BChiu", "link": "https://stackoverflow.com/users/10935288/bchiu"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551885905, "post_id": 55026499, "comment_id": 96805915, "body": "@NathanOliver I&#39;m using a c++ shell online. <code>cpp.sh</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 3, "creation_date": 1551885969, "post_id": 55026499, "comment_id": 96805958, "body": "@tkausl Beware that just using <code>std::vector</code> is not enough. If it&#39;s used as a drop-in replacement (just changing to <code>std::vector&lt;int&gt; numbersarray;</code>) it will compile and still exhibit the same behavior. You need to also use <code>emplace_back</code> or other insertion member functions to properly introduce new elements."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1551886048, "post_id": 55026499, "comment_id": 96806009, "body": "@b Turn on the pedantic check box in the warnings section of the option tab.  That will stop it from compiling."}], "answers": [{"tags": [], "owner": {"reputation": 1026, "user_id": 8469676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d870a9cbdcef704cebecb991662019?s=128&d=identicon&r=PG&f=1", "display_name": "AlbertM", "link": "https://stackoverflow.com/users/8469676/albertm"}, "is_accepted": false, "score": 1, "last_activity_date": 1551886930, "last_edit_date": 1551886930, "creation_date": 1551886305, "answer_id": 55026726, "question_id": 55026499, "link": "https://stackoverflow.com/questions/55026499/local-variable-being-changed-without-manipulation/55026726#55026726", "title": "Local Variable being changed without manipulation", "body": "<p><code>numbersarray</code> is a C-style array with a size of zero and doesn't adjust its size dynamically (most compilers might even fail to compile <code>int numbersarray[] = {};</code> since an empty initializer isn't allowed for an array with unspecified size).</p>\n\n<p>Writing or reading its elements causes undefined behaviour (which can be access violations, changing unrelated variables, and much more). This is the reason why you might see the values of local variables changing. Someone else that uses the same code could get completely different behaviour, since it is undefined.</p>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 5, "last_activity_date": 1551886314, "creation_date": 1551886314, "answer_id": 55026728, "question_id": 55026499, "link": "https://stackoverflow.com/questions/55026499/local-variable-being-changed-without-manipulation/55026728#55026728", "title": "Local Variable being changed without manipulation", "body": "<p>You have undefined behavior. Anything can happen. Local variable can change without reason, the program can crash and your computer can format itself with linux 6.9</p>\n\n<p>There are many problem. The first is that your program is invalid according to the standard:</p>\n\n<pre><code>int numbersarray[] = {};\n</code></pre>\n\n<p>This is not valid. Array need a size:</p>\n\n<pre><code>constexpr int max_amount = 32;\nint numbersarray[max_amount] = {};\n</code></pre>\n\n<p>If you need it to be dynamic, use vector:</p>\n\n<pre><code>std::vector&lt;int&gt; numbersarray;\nnumbersarray.resize(amount);\n</code></pre>\n\n<p>Second, you have another source of undefined behavior:</p>\n\n<pre><code>//     Iterates too much, numbersarray[amount] is past the end\n//             ~~~v~~~~~~~\nfor(int i = 0; i &lt;= amount; i++){\n    std::cout &lt;&lt; \"Enter number to be sorted: \" &lt;&lt; std::endl;\n    std::cin &gt;&gt; numbersarray[i]; \n}\n</code></pre>\n\n<p>It should be:</p>\n\n<pre><code>for(int i = 0; i &lt; amount; i++){\n    std::cout &lt;&lt; \"Enter number to be sorted: \" &lt;&lt; std::endl;\n    std::cin &gt;&gt; numbersarray[i]; \n}\n</code></pre>\n\n<hr>\n\n<p>To avoid invalid code and undefined behavior, you should enable warnings.</p>\n"}], "owner": {"reputation": 59, "user_id": 10935288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4z9dcMqm61M/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbbaCRyFPXdkAeg0JOyqwN67jx7Jw/mo/photo.jpg?sz=128", "display_name": "BChiu", "link": "https://stackoverflow.com/users/10935288/bchiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 55026728, "answer_count": 2, "score": 0, "last_activity_date": 1551886930, "creation_date": 1551885672, "last_edit_date": 1551885873, "question_id": 55026499, "link": "https://stackoverflow.com/questions/55026499/local-variable-being-changed-without-manipulation", "title": "Local Variable being changed without manipulation", "body": "<p>I'm creating a simple quick sort program that initializes an empty array and asks the users for inputs to determine how many elements are going to be sorted and what elements are going to be sorted.</p>\n\n<p>The problem I am encountering is a local variable is being changed despite being only being referenced to once assigned. Attached below is the code.</p>\n\n<pre><code>int main()\n{\n    int amount;\n    int numbersarray[] = {};\n    std::cout &lt;&lt; \"How many numbers do you want to sort? \" &lt;&lt; std::endl;\n    std::cin &gt;&gt; amount; \n    for(int i = 0; i &lt;= amount; i++){\n        std::cout &lt;&lt; \"Enter number to be sorted: \" &lt;&lt; std::endl;\n        std::cin &gt;&gt; numbersarray[i]; \n    }\n    std::cout &lt;&lt;\"Amount to be sorted: \" &lt;&lt; amount &lt;&lt; std::endl;\n\n    for(int i = 0; i &lt;= amount; i++){\n        std::cout &lt;&lt; numbersarray[i] &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>What I expect to be occurring, when I input the amount as 5, I should be able to input 5 elements into the array, instead however the Amount printed is 2 and the maximum elements I can put into the array is 3.</p>\n\n<p>Below is the execution output.</p>\n\n<pre><code>How many numbers do you want to sort? \n5\nEnter number to be sorted: \n5\nEnter number to be sorted: \n2\nEnter number to be sorted: \n5\nAmount to be sorted: 2\n5\n2\n5\n</code></pre>\n\n<p>I've tried messing around with the for statement but I don't think I'm doing it right as it hasn't fixed the problem, The manipulation of the for statement I'm doing is changing the condition (i.e !=, &lt;, &lt;=)</p>\n"}, {"tags": ["c++", "variadic-templates", "typetraits"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1551885732, "post_id": 55026478, "comment_id": 96805818, "body": "Does C++14 tag mean you don&#39;t want to hear about C++17 fold expressions?"}, {"owner": {"reputation": 520, "user_id": 2851232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7767e5dadb31a9da170a4504af5b92a7?s=128&d=identicon&r=PG&f=1", "display_name": "Nujufas", "link": "https://stackoverflow.com/users/2851232/nujufas"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1551885825, "post_id": 55026478, "comment_id": 96805866, "body": "No - I am ok with C++17"}], "answers": [{"comments": [{"owner": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 3, "creation_date": 1551888929, "post_id": 55026558, "comment_id": 96807821, "body": "How does the solution with <code>return {};</code> work? I cannot make it work: <a href=\"https://ideone.com/vrCXSb\" rel=\"nofollow noreferrer\">ideone.com/vrCXSb</a>"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 7825, "user_id": 3684343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bee557e309dc42d91a706c70c8c0c9f?s=128&d=identicon&r=PG&f=1", "display_name": "mch", "link": "https://stackoverflow.com/users/3684343/mch"}, "edited": false, "score": 0, "creation_date": 1551944009, "post_id": 55026558, "comment_id": 96827816, "body": "@mch Of course, that was an error on my part. Fixed."}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 1, "last_activity_date": 1551943996, "last_edit_date": 1551943996, "creation_date": 1551885843, "answer_id": 55026558, "question_id": 55026478, "link": "https://stackoverflow.com/questions/55026478/variadic-templates-recursive-function-last-variadic-member/55026558#55026558", "title": "Variadic Templates - Recursive function - Last variadic member", "body": "<blockquote>\n  <ol>\n  <li>The <code>sum()</code> function is required here so that I can have a return value for a <code>void</code> passed in when processing the last variadic member - Is it possible to avoid writing this <code>sum()</code> function and have the same functionality?</li>\n  </ol>\n</blockquote>\n\n<p>Every recursion needs a stop condition. In the typical use of recursion with variadic templates (such as in this code), the stop condition is a different overload of the primary template. So you cannot get rid of this entirely.</p>\n\n<p>You can of course replace the stop condition with a different one. Perhaps this one, which will also work for summing things which are not default-constructible:</p>\n\n<pre><code>template &lt;class T&gt;\nauto sum(T last) { return last; }\n</code></pre>\n\n<p>Of course, there are other approaches to this than recursive variadic templates; such approaches may not need a stop condition.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Returning a integer '0' from the <code>sum()</code> function restricts the entire template to be used by integers - Can I extend the same template to concatenate strings? </li>\n  </ol>\n</blockquote>\n\n<p>No, because the non-template function has no knowledge of which type the previous recursive invocations were dealing with. This can be solved by using the \"last item\" stop condition I suggested above.</p>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 3, "last_activity_date": 1551885887, "creation_date": 1551885887, "answer_id": 55026575, "question_id": 55026478, "link": "https://stackoverflow.com/questions/55026478/variadic-templates-recursive-function-last-variadic-member/55026575#55026575", "title": "Variadic Templates - Recursive function - Last variadic member", "body": "<p>The trick is to never allow empty <code>sum()</code> calls, and treat the <code>sum(last)</code> as the last recursion:</p>\n\n<pre><code>template&lt;typename Last&gt;\nauto sum(Last last) {\n    return last;\n}\n\ntemplate&lt;typename Head, typename Second, typename... Tail&gt;\nauto sum(Head head, Second second, Tail... tail)\n{\n    return head + sum(second, tail...);\n}\n\nint main() {\n    cout&lt;&lt; sum(1,2.4) &lt;&lt; endl;\n    cout&lt;&lt; sum(\"hello \", \"world\") &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/BV18tP\" rel=\"nofollow noreferrer\">Live example</a></p>\n"}, {"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1551887628, "post_id": 55027105, "comment_id": 96806992, "body": "If you&#39;re in C++17 you might as well use a <a href=\"https://godbolt.org/z/GLJwEn\" rel=\"nofollow noreferrer\">fold expression</a>..."}], "tags": [], "owner": {"reputation": 2023, "user_id": 2309279, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b6f77ad82a31d963002374d9287f1397?s=128&d=identicon&r=PG", "display_name": "KostasRim", "link": "https://stackoverflow.com/users/2309279/kostasrim"}, "is_accepted": false, "score": 6, "last_activity_date": 1551888438, "last_edit_date": 1551888438, "creation_date": 1551887436, "answer_id": 55027105, "question_id": 55026478, "link": "https://stackoverflow.com/questions/55026478/variadic-templates-recursive-function-last-variadic-member/55027105#55027105", "title": "Variadic Templates - Recursive function - Last variadic member", "body": "<p>To complement @GuillaumeRacicot answer I prefer to end a recursion with <code>if constexpr</code> which is a <code>c++17</code> feature.</p>\n\n<pre><code>template&lt;typename Head, typename Second, typename... Tail&gt;\nauto sum(Head head, Second second, Tail... tail)\n{ \n    if constexpr(sizeof...(tail) &gt; 0)\n      return head + sum(second, tail...);\n    return head + second;\n}\n</code></pre>\n\n<p>You can also consider fold expressions:</p>\n\n<pre><code>template&lt;typename ...Pack&gt;\nauto sum(Pack... args) {\n    return (args + ...);\n}\n</code></pre>\n"}], "owner": {"reputation": 520, "user_id": 2851232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7767e5dadb31a9da170a4504af5b92a7?s=128&d=identicon&r=PG&f=1", "display_name": "Nujufas", "link": "https://stackoverflow.com/users/2851232/nujufas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 55026575, "answer_count": 3, "score": 4, "last_activity_date": 1551943996, "creation_date": 1551885616, "last_edit_date": 1551885838, "question_id": 55026478, "link": "https://stackoverflow.com/questions/55026478/variadic-templates-recursive-function-last-variadic-member", "title": "Variadic Templates - Recursive function - Last variadic member", "body": "<p>I have the following code with a variadic template copied from: \n<a href=\"https://www.youtube.com/watch?v=iWvcoIKSaoc\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=iWvcoIKSaoc</a> @41:30 </p>\n\n<pre><code>auto sum() { return 0; }\n\ntemplate&lt;typename Head, typename... Tail&gt;\nauto sum(Head head, Tail... tail)\n{\n    return head+sum(tail...);\n}\n\nint main() {\n    cout&lt;&lt; sum(1,2.4) &lt;&lt; endl;\n    //cout&lt;&lt; sum(\"hello \", \"world\") &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>I have two questions: \n1. The sum() function is required here so that I can have a return value for a void passed in when processing the last variadic member - Is it possible to avoid writing this sum() function and have the same functionality?</p>\n\n<ol start=\"2\">\n<li>Returning a integer '0' from the sum() function restricts the entire template to be used by integers - Can I extend the same template to concatenate strings? </li>\n</ol>\n\n<p>Thank You</p>\n"}, {"tags": ["c++", "julia"], "answers": [{"tags": [], "owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "is_accepted": true, "score": 0, "last_activity_date": 1552070668, "creation_date": 1552070668, "answer_id": 55069213, "question_id": 55026459, "link": "https://stackoverflow.com/questions/55026459/writing-an-iterator-for-a-cxxwrap-vector/55069213#55069213", "title": "Writing an iterator for a CxxWrap vector", "body": "<p>With a lot of help from Jan Strube on the Julia Discourse site, I came up with an approach that works:</p>\n\n<pre><code>module BoostWrapper\nusing CxxWrap\n@wrapmodule(\"libboost_wrap\")\nfunction __init__()\n    @initcxx\nend\nexport Point2D, PointVec, getx, gety,\n    Polygon2D, PolygonVec, add_vertex, scale_polygon, get_vertices,\n    poly_intersection, intersection_point\nend\nusing Main.BoostWrapper\n\nimport Base: getindex, length, convert, iterate, size\n\niterate(it::PointVec) = length(it) &gt; 0 ? (it[1], 2) : nothing\niterate(it::PointVec, i) = i &lt;= length(it) ? (it[i], i+1) : nothing\nlength(it::PointVec) = Main.BoostWrapper.size(it)\ngetindex(it::PointVec, i) = Main.BoostWrapper.at(it, convert(UInt64, i - 1))\n\neltype(::Type{PointVec}) = Point2D\n\np1 = Point2D(-10.0, 10.0)\np2 = Point2D(10.0, 10.0)\np3 = Point2D(10.0, -10.0)\np4 = Point2D(-10.0, -10.0)\nobstacle = Polygon2D()\nadd_vertex(obstacle, p1)\nadd_vertex(obstacle, p2)\nadd_vertex(obstacle, p3)\nadd_vertex(obstacle, p4)\n\npts = get_vertices(obstacle)\n\nfor pt in pts\n    println(\"current pt: \", getx(pt), \", \", gety(pt))\nend\n</code></pre>\n\n<p>I'm including a lot of detail, because it turned out there were subtleties involved in name resolution, etc.</p>\n"}], "owner": {"reputation": 959, "user_id": 888379, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/14e6b3a51d70f73bfb9ff0c91046aa20?s=128&d=identicon&r=PG", "display_name": "user888379", "link": "https://stackoverflow.com/users/888379/user888379"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 55069213, "answer_count": 1, "score": 0, "last_activity_date": 1552070668, "creation_date": 1551885556, "question_id": 55026459, "link": "https://stackoverflow.com/questions/55026459/writing-an-iterator-for-a-cxxwrap-vector", "title": "Writing an iterator for a CxxWrap vector", "body": "<p>I'm evaluating CxxWrap for a Julia (1.x) project I'm working on. I'm interested in having my CxxWrap code return a std::vector of a type, and iterating over the vector in my Julia code. The c++ part looks something like this:</p>\n\n<pre><code>using PointVec = std::vector&lt;Point2D&gt;;\n.\n.\n.\nJLCXX_MODULE define_julia_module(jlcxx::Module&amp; types) {\n.\n.\n.\n    types.add_type&lt;PointVec&gt;(\"PointVec\")\n      .method(\"length\", &amp;PointVec::size)\n      .method(\"getindex\", [](const PointVec&amp; vec, size_t index) {\n                        return vec.at(index);\n                    });\n.\n.\n.\n}\n</code></pre>\n\n<p>This is based on some searching I've already done. The example that I cribbed from alluded to creating an iterator on the Julia side, but didn't elaborate. The descriptions I've seen of creating Julia iterators are pretty daunting, and it's not at all obvious how to plumb in the CxxWrap type that I'm importing. Any tips would be appreciated.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1551884503, "post_id": 55026110, "comment_id": 96804999, "body": "Is <code>fileData</code> null-terminated? Is the last character a <code>\\0</code>? Constructing a string with it otherwise is going to cause UB"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1551886629, "post_id": 55026110, "comment_id": 96806378, "body": "Side-note: This is a case where a <code>std::vector</code>+<code>std::find</code> is probably the wrong way to go. Membership testing against a large set of values with exact equality semantics is best done with <code>std::unordered_set</code> (pre-C++11, <code>std::set</code>) and its <code>find</code> method, which makes the membership test roughly <code>O(1)</code>, rather than <code>O(n)</code>."}, {"owner": {"reputation": 421, "user_id": 6945542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae7260fb1617d777f4535bf4736e6599?s=128&d=identicon&r=PG", "display_name": "Ali Somay", "link": "https://stackoverflow.com/users/6945542/ali-somay"}, "edited": false, "score": 0, "creation_date": 1551886840, "post_id": 55026110, "comment_id": 96806516, "body": "Thank you, i will look in to it."}], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 6945542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae7260fb1617d777f4535bf4736e6599?s=128&d=identicon&r=PG", "display_name": "Ali Somay", "link": "https://stackoverflow.com/users/6945542/ali-somay"}, "edited": false, "score": 0, "creation_date": 1551885546, "post_id": 55026210, "comment_id": 96805703, "body": "Thank you very much for the detailed explanation and working solution. I would also probably add more logic to check if the right <code>gcount</code> has read also, and if not seek back and try to read again."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1551885558, "post_id": 55026210, "comment_id": 96805707, "body": "It&#39;s important to note that if <code>fileData</code> can contain shorter strings you may not get exactly the behavior you expect. But since <code>chunk_types</code> only contains 4 character strings this doesn&#39;t seem to be the case. This gives you a string of exactly 4 characters, even if <code>fileData</code> would contain a null terminator. This null terminator will be part of the string&#39;s value."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1551886257, "post_id": 55026210, "comment_id": 96806136, "body": "Arguably, <code>query.resize(file.gcount());</code> should really just be <code>if (file.gcount() != LENGTH) break;</code>, since the code logic only applies when the full four character chunk was read."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1551886372, "post_id": 55026210, "comment_id": 96806199, "body": "@ShadowRanger It is also a good stop condition on EOF and read error."}, {"owner": {"reputation": 421, "user_id": 6945542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae7260fb1617d777f4535bf4736e6599?s=128&d=identicon&r=PG", "display_name": "Ali Somay", "link": "https://stackoverflow.com/users/6945542/ali-somay"}, "edited": false, "score": 0, "creation_date": 1551887102, "post_id": 55026210, "comment_id": 96806667, "body": "You give me a lot to check and study genuinely thank you. Just from curiosity, do you have an idea why it worked most of the time when i used std::cout to print the contents of query to stdo ? I understand that this is undefined behaviour but it worked much more often when i included that line."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 421, "user_id": 6945542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae7260fb1617d777f4535bf4736e6599?s=128&d=identicon&r=PG", "display_name": "Ali Somay", "link": "https://stackoverflow.com/users/6945542/ali-somay"}, "edited": false, "score": 1, "creation_date": 1551887420, "post_id": 55026210, "comment_id": 96806867, "body": "@AliSomay <code>strlen</code> can find a 0 nearby up in the stack. 0 bytes are quite frequent in the stack, e.g. any 64-byte pointer has two 0 bytes, any integer at least 256 times smaller than its max value."}, {"owner": {"reputation": 421, "user_id": 6945542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae7260fb1617d777f4535bf4736e6599?s=128&d=identicon&r=PG", "display_name": "Ali Somay", "link": "https://stackoverflow.com/users/6945542/ali-somay"}, "edited": false, "score": 0, "creation_date": 1551889938, "post_id": 55026210, "comment_id": 96808451, "body": "@MaximEgorushkin giving <code>query.data()</code> as first argument to <code>file.read()</code> creates this compiler error. <code>error: cannot initialize a parameter of type &#39;char_type *&#39; (aka &#39;char *&#39;) with an rvalue       of type &#39;const value_type *&#39; (aka &#39;const char *&#39;)</code> do we need a type conversion there ?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 421, "user_id": 6945542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae7260fb1617d777f4535bf4736e6599?s=128&d=identicon&r=PG", "display_name": "Ali Somay", "link": "https://stackoverflow.com/users/6945542/ali-somay"}, "edited": false, "score": 1, "creation_date": 1551891302, "post_id": 55026210, "comment_id": 96809246, "body": "@AliSomay Oops, that requires C++17. Use <code>&amp;query[0]</code> instead of <code>query.data()</code>."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1551891321, "last_edit_date": 1551891321, "creation_date": 1551884710, "answer_id": 55026210, "question_id": 55026110, "link": "https://stackoverflow.com/questions/55026110/using-stdfind-to-find-chars-read-from-binary-file-and-cast-to-a-stdstring-in/55026210#55026210", "title": "Using std::find to find chars read from binary file and cast to a std::string in a std::vector&lt;string&gt; creates this inpredictible behaviour?", "body": "<p><code>std::string query(fileData)</code> uses <code>strlen</code> on <code>fileData</code> to find its terminating 0, but doesn't find one because <code>fileData</code> is not zero-terminated and continues searching for 0 up the stack until it finds it or hits inaccessible memory past the end of the stack and causes <code>SIGSEGV</code>.</p>\n\n<p>Also <code>file.read</code> can read fewer symbols than expected, <code>gcount</code> must be used to extract the actual number of characters last read:</p>\n\n<p>A fix:</p>\n\n<pre><code>file.read(fileData, sizeof fileData);\nauto len = file.gcount();\nstd::string query(fileData, len);\n</code></pre>\n\n<p>A slightly more efficient solution is to read directly into <code>std::string</code> and keep reusing it to avoid a memory allocation (if no short string optimisation) and copying:</p>\n\n<pre><code>std::string query;\n// ...\n    constexpr int LENGTH = 4;\n    query.resize(LENGTH);\n    file.read(&amp;query[0], LENGTH);\n    query.resize(file.gcount());\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 6945542, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae7260fb1617d777f4535bf4736e6599?s=128&d=identicon&r=PG", "display_name": "Ali Somay", "link": "https://stackoverflow.com/users/6945542/ali-somay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 55026210, "answer_count": 1, "score": 0, "last_activity_date": 1551891321, "creation_date": 1551884423, "question_id": 55026110, "link": "https://stackoverflow.com/questions/55026110/using-stdfind-to-find-chars-read-from-binary-file-and-cast-to-a-stdstring-in", "title": "Using std::find to find chars read from binary file and cast to a std::string in a std::vector&lt;string&gt; creates this inpredictible behaviour?", "body": "<p>Sorry for the long headline. I couldn't know how to describe it in short words.</p>\n\n<p>Would you care to recreate the problem i am going through?</p>\n\n<p>You can use any wav file to read. </p>\n\n<p>I am trying to query the chunks in a wav file here, this is the simplified version of the code, but i think it might be enough to recreate if there is a problem.</p>\n\n<p>I use a mac, and compile with <code>g++ -std=c++11</code>.</p>\n\n<p>When i run this code and don't include the line <code>std::cout &lt;&lt; query &lt;&lt; std::endl;</code> then <code>std::find(chunk_types.begin(), chunk_types.end(), query) != chunk_types.end()</code> returns 0 in all iterations. But i know the binary file contains some of these chunks. If i include the line then it works properly, but that is also not predictable lets say it works properly sometimes. </p>\n\n<p>I am a bit perplexed am i doing anything wrong here?</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt; \n\nint main(){    \n\n    std::vector&lt;std::string&gt; chunk_types{\n    \"RIFF\",\"WAVE\",\"JUNK\",\"fmt \",\"data\",\"bext\",\n    \"cue \",\"LIST\",\"minf\",\"elm1\",\n    \"slnt\",\"fact\",\"plst\",\"labl\",\"note\",\n    \"adtl\",\"ltxt\",\"file\"};\n\n    std::streampos fileSize;\n    std::ifstream file(/* file path here */, std::ios::binary);\n    file.seekg(0, std::ios::beg);\n\n    char fileData[4];\n\n    for(int i{0};i&lt;100;i+=4){ //100 is an arbitrary number\n\n        file.seekg(i);\n        file.read((char*) &amp;fileData[0], 4);\n        std::string query(fileData);\n\n        std::cout &lt;&lt; query &lt;&lt; std::endl;\n\n        /* if i put this std::cout here, it works or else std::find always returns 0 */\n\n\n        if( std::find(chunk_types.begin(), chunk_types.end(), query) != chunk_types.end() ){ \n           std::cout &lt;&lt; \"found \" + query &lt;&lt; std::endl; \n        } \n\n    }\n\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "cereal"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1551884736, "post_id": 55026089, "comment_id": 96805153, "body": "You say that the code doesn&#39;t write to a file, but it doesn&#39;t actually <i>write to a file</i>. All it does is the serialization to a string stream, nowhere do you write the serialized data to a file."}, {"owner": {"reputation": 598, "user_id": 1734357, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gaD24.jpg?s=128&g=1", "display_name": "WurmD", "link": "https://stackoverflow.com/users/1734357/wurmd"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551885982, "post_id": 55026089, "comment_id": 96805967, "body": "That is a fair point. However, this is pretty much copy paste from cereal&#39;s documentation <a href=\"https://uscilab.github.io/cereal/quickstart.html\" rel=\"nofollow noreferrer\">uscilab.github.io/cereal/quickstart.html</a> ; when we produce a working code I&#39;ll pull request that change to their documentation"}], "answers": [{"tags": [], "owner": {"reputation": 598, "user_id": 1734357, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gaD24.jpg?s=128&g=1", "display_name": "WurmD", "link": "https://stackoverflow.com/users/1734357/wurmd"}, "is_accepted": true, "score": 0, "last_activity_date": 1551886971, "last_edit_date": 1551886971, "creation_date": 1551886350, "answer_id": 55026742, "question_id": 55026089, "link": "https://stackoverflow.com/questions/55026089/cereal-compiles-and-runs-but-does-not-write-to-file/55026742#55026742", "title": "cereal compiles and runs, but does not write to file", "body": "<p>A mistaken copy-paste from cereal's tuturial:</p>\n\n<p>It should be <code>ofstream</code> instead of <code>stringstream</code></p>\n\n<pre><code>{\n    vector&lt;int&gt; v = { 1,2,3 };\n\n    std::ofstream outFile(\"cereal_test.xml\");\n    {\n        cereal::XMLOutputArchive  oarchive(outFile);\n        oarchive(v);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 598, "user_id": 1734357, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/gaD24.jpg?s=128&g=1", "display_name": "WurmD", "link": "https://stackoverflow.com/users/1734357/wurmd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 55026742, "answer_count": 1, "score": 0, "last_activity_date": 1551886971, "creation_date": 1551884373, "last_edit_date": 1551884418, "question_id": 55026089, "link": "https://stackoverflow.com/questions/55026089/cereal-compiles-and-runs-but-does-not-write-to-file", "title": "cereal compiles and runs, but does not write to file", "body": "<p>The following code does not write to file. </p>\n\n<pre><code>#include &lt;cereal/types/vector.hpp&gt;\n#include &lt;cereal/archives/xml.hpp&gt;\n{\n    vector&lt;int&gt; v = { 1,2,3 };\n    stringstream s;\n    s &lt;&lt; \"cereal_test.xml\";\n    cereal::XMLOutputArchive  oarchive(s);\n    oarchive(v); \n}\n</code></pre>\n\n<p>It compiles and runs apparently correctly.</p>\n\n<p>If we <code>cout &lt;&lt; s &lt;&lt; endl;</code> out of scope we see in the console:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>cereal_test.xml\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;cereal&gt;\n        &lt;value0 size=\"dynamic\"&gt;\n                &lt;value0&gt;1&lt;/value0&gt;\n                &lt;value1&gt;2&lt;/value1&gt;\n                &lt;value2&gt;3&lt;/value2&gt;\n        &lt;/value0&gt;\n&lt;/cereal&gt;\n</code></pre>\n\n<p>What's missing?</p>\n"}, {"tags": ["c++", "cmake", "conan"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1551885283, "post_id": 55026033, "comment_id": 96805523, "body": "Preferred method is:  3. Modify <b>toolchain file</b>, used for cross-compiling. Probably, this is the only reliable method, because aside from some hardcoded things, toolchain is the only script which is parsed during <code>try_compile</code>."}, {"owner": {"reputation": 315, "user_id": 4832300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-hf2LS5QrqrA/AAAAAAAAAAI/AAAAAAAABgo/lXR_7ONX5T4/photo.jpg?sz=128", "display_name": "Peter Moran", "link": "https://stackoverflow.com/users/4832300/peter-moran"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1552313842, "post_id": 55026033, "comment_id": 96950538, "body": "While the other answers have been helpful, the solution that works best with CMake and Conan together would involve updating Conan to add CONAN_CMAKE_TRY_COMPILE_TARGET_TYPE to env_vars: <a href=\"https://github.com/conan-io/conan/issues/4706\" rel=\"nofollow noreferrer\">github.com/conan-io/conan/issues/4706</a>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1552314329, "post_id": 55026033, "comment_id": 96950832, "body": "It seems you confuse <b>answers</b> and <b>comments</b>. Currently, there is the only <i>answer</i> provided by @BrandonDyer. My post and yours are <i>comments</i>, not answers. If you find a resolution for your problem, you may add your own answer (<a href=\"https://stackoverflow.com/help/self-answer\">self-answer</a>), and even accept it (green mark) as working for you."}], "answers": [{"tags": [], "owner": {"reputation": 1106, "user_id": 4208022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8PLXt.jpg?s=128&g=1", "display_name": "Brandon Dyer", "link": "https://stackoverflow.com/users/4208022/brandon-dyer"}, "is_accepted": true, "score": 2, "last_activity_date": 1551885655, "creation_date": 1551885655, "answer_id": 55026491, "question_id": 55026033, "link": "https://stackoverflow.com/questions/55026033/how-to-set-cmake-try-compile-target-type-from-outside-cmake/55026491#55026491", "title": "How to set CMAKE_TRY_COMPILE_TARGET_TYPE from outside CMake", "body": "<p>You may be able to get the functionality you're looking for with the <code>-D</code> flag.</p>\n\n<p>I would try something like this: <code>cmake -D CMAKE_TRY_COMPILE_TARGET_TYPE=STATIC_LIBRARY</code></p>\n"}], "owner": {"reputation": 315, "user_id": 4832300, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-hf2LS5QrqrA/AAAAAAAAAAI/AAAAAAAABgo/lXR_7ONX5T4/photo.jpg?sz=128", "display_name": "Peter Moran", "link": "https://stackoverflow.com/users/4832300/peter-moran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "accepted_answer_id": 55026491, "answer_count": 1, "score": 2, "last_activity_date": 1551885655, "creation_date": 1551884228, "question_id": 55026033, "link": "https://stackoverflow.com/questions/55026033/how-to-set-cmake-try-compile-target-type-from-outside-cmake", "title": "How to set CMAKE_TRY_COMPILE_TARGET_TYPE from outside CMake", "body": "<h1>tl;dr</h1>\n\n<p>Given a <code>CMakeList.txt</code> which I cannot edit, can I set <a href=\"https://cmake.org/cmake/help/v3.6/variable/CMAKE_TRY_COMPILE_TARGET_TYPE.html\" rel=\"nofollow noreferrer\"><code>CMAKE_TRY_COMPILE_TARGET_TYPE</code></a> to be <code>STATIC_LIBRARY</code> while configuring that file?</p>\n\n<p>Ideally I could do this via an environmental variable, but if that is not possible, passing in my value as a command line argument would be ok too.</p>\n\n<h1>Details</h1>\n\n<p>I am trying to build a <a href=\"https://docs.conan.io/en/latest/systems_cross_building/cross_building.html\" rel=\"nofollow noreferrer\">Conan profile that will allow me to cross build</a> using the <a href=\"https://developer.arm.com/open-source/gnu-toolchain/gnu-rm\" rel=\"nofollow noreferrer\">GNU Arm Embedded Toolchain</a>. </p>\n\n<p>Conan provides a mechanism for specifying the compiler binary and compiler + linker flags I would like CMake to use, but I need to specify <code>set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY)</code> in order for GNU Arm Embedded to pass CMake's compiler check. </p>\n\n<p>In order to get my cross build toolchain to work, then, I am left with 2 options:</p>\n\n<ol>\n<li>Every single CMake file that I want to support cross build must check if we are building for an embedded device, and if so, run<code>set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY)</code>. This is annoying because it forces all projects to have to think about being embedded.</li>\n<li>OR, Somehow pass <code>CMAKE_TRY_COMPILE_TARGET_TYPE</code> to CMake without editing the <code>CMakeList.txt</code>.</li>\n</ol>\n\n<p>I would like to do 2.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1551883797, "post_id": 55025810, "comment_id": 96804546, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/115703/storing-c-template-function-definitions-in-a-cpp-file\">Storing C++ template function definitions in a .CPP file</a>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1551883847, "post_id": 55025810, "comment_id": 96804580, "body": "<code>Now first Question: is this template implementation correct?</code> Does it compile? Did you tried calling it?"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1551883943, "post_id": 55025810, "comment_id": 96804641, "body": "Your comment say &quot;calling func_T(data, args)&quot; but in your template, <code>func_T</code> is a typename, not a functor."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9014085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad9e3c48f79290a7c844013d4c7f19?s=128&d=identicon&r=PG&f=1", "display_name": "JHeni", "link": "https://stackoverflow.com/users/9014085/jheni"}, "edited": false, "score": 0, "creation_date": 1551946618, "post_id": 55026122, "comment_id": 96829064, "body": "Could you help me out: What does this: <code>glob.Replace([](A&amp;, int){ &#47;* code *&#47; }, 1);</code> mean? What are the []?  The stuff in () is probably the types of both Arguments Right?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 23, "user_id": 9014085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad9e3c48f79290a7c844013d4c7f19?s=128&d=identicon&r=PG&f=1", "display_name": "JHeni", "link": "https://stackoverflow.com/users/9014085/jheni"}, "edited": false, "score": 0, "creation_date": 1551965747, "post_id": 55026122, "comment_id": 96840726, "body": "@JHeni Search for lambda functions"}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 0, "last_activity_date": 1551884820, "last_edit_date": 1551884820, "creation_date": 1551884474, "answer_id": 55026122, "question_id": 55025810, "link": "https://stackoverflow.com/questions/55025810/c-pass-function-with-arguments-as-template/55026122#55026122", "title": "C++ pass function with arguments as template", "body": "<blockquote>\n  <p>Now first Question: is this template implementation correct?</p>\n</blockquote>\n\n<p>Does it compile when you try calling it?</p>\n\n<blockquote>\n  <p>Second: How would i call this replacement function from outside this class?</p>\n</blockquote>\n\n<p>The template arguments are deduced from a function pointer. Where <code>func_T</code> is the return type. I would advice against it and recommend a simpler template parameter:</p>\n\n<pre><code>template&lt;typename Struct_Type_T&gt;\nstruct CGlobal_Struct\n{\n    template&lt;typename func_T, typename func_arg_t&gt;\n    bool Replace(func_T function, const func_arg_t func_args,const uint32_t mutex_timeout = 100) {\n        // function(struct_type_value, func_args);\n    }\n};\n</code></pre>\n\n<p>Both version are valid and are called like this:</p>\n\n<pre><code>struct A {};\n\nvoid func(A&amp;, int) {}\n\nint main() {\n    CGlobal_Struct&lt;A&gt; glob;\n    glob.Replace(func, 1);\n}\n</code></pre>\n\n<p>The version I recommend can also support lambdas:</p>\n\n<pre><code>glob.Replace([](A&amp;, int){ /* code */ }, 1);\n</code></pre>\n\n<hr>\n\n<p>Reading your implementation, it won't work with your current version:</p>\n\n<pre><code>//Replace Data\nfunc_T(data, func_args);\n</code></pre>\n\n<p>The problem it that <code>func_T</code> is the type of the return type of the function sent as parameter. It is the same as this:</p>\n\n<pre><code>void(data, func_args);\n</code></pre>\n\n<p>Or more evil:</p>\n\n<pre><code>struct evil { evil(A&amp;, int){} };\n\n// ...\n\nevil(data, func_args);\n</code></pre>\n\n<p>This will call the constructor of <code>evil</code> and never call a function.</p>\n\n<p>It you look closely, your parameter has no name:</p>\n\n<pre><code> bool Replace(\n     func_T(Struct_Type_T&amp;, const func_arg_t), \n /* other params */ );\n</code></pre>\n\n<p>To give it a name, the sytax would be: </p>\n\n<pre><code> bool Replace(\n     func_T(*function)(Struct_Type_T&amp;, const func_arg_t), \n /* other params */ );\n</code></pre>\n\n<p>Then call <code>function(...)</code></p>\n"}], "owner": {"reputation": 23, "user_id": 9014085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbad9e3c48f79290a7c844013d4c7f19?s=128&d=identicon&r=PG&f=1", "display_name": "JHeni", "link": "https://stackoverflow.com/users/9014085/jheni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 55026122, "answer_count": 1, "score": 0, "last_activity_date": 1551884820, "creation_date": 1551883612, "question_id": 55025810, "link": "https://stackoverflow.com/questions/55025810/c-pass-function-with-arguments-as-template", "title": "C++ pass function with arguments as template", "body": "<p>i got a Problem with a template\nI created a generic class whcih stores global available Information.\nThis class holds a private mutex to manage the access to the global info.</p>\n\n<pre><code>template&lt;typename Mutex_Type_T, typename Struct_Type_T&gt;\nclass CGlobal_Struct\n{\npublic:\n/**\n         * Exports data from this class to target\n         * @param target the actual target\n         * @param mutex_timeout Mutex wait time\n         * @return true in case of success\n         */\n        bool Export(Struct_Type_T&amp; target, const uint32_t mutex_timeout = 100);\n        /**\n         * Imports data to this class\n         * @param source The data to store in this class\n         * @param mutex_timeout Wait Time for Mutex\n         * @return true in case of success\n         */\n        bool Import(const Struct_Type_T&amp; source, const uint32_t mutex_timeout = 100);\n             /**\n     * 1) Loads Data to Buffer\n             * 2) performs user defined Operation by calling func_T(data, args)\n             * 3) stores back the data\n     * @param User defined function\n     * @param values class data to modify\n             *  @param mutex_timeout Mutex wait time\n     * @return true in case of success\n     */\n            template&lt;typename func_T, typename func_arg_t&gt;\n        bool Replace(func_T(Struct_Type_T&amp; values, const func_arg_t args), const func_arg_t func_args,const uint32_t mutex_timeout = 100);\n\nprivate:\nmutex _mutex;\n}\n</code></pre>\n\n<p>This implementation Looks like this</p>\n\n<pre><code>template&lt;typename Mutex_Type_T, typename Struct_Type_T&gt;\ntemplate&lt;typename func_T, typename func_arg_t&gt;\nbool CGlobal_Struct&lt;Mutex_Type_T, Struct_Type_T&gt;::Replace(func_T(Struct_Type_T&amp; values, const func_arg_t args),const func_arg_t func_args, const uint32_t mutex_timeout)\n    {\n        CLock_Guard lock(mutex);\n\n        //Lock access\n        if(false == lock.Lock(mutex_timeout))\n        {\n                //Locking failed\n            return false;\n        }\n        //Replace Data\n        func_T(data, func_args);\n\n        //Mutex is released automatically when we leave this function\n        return true;\n    }\n</code></pre>\n\n<p>Now first Question: is this template implementation correct?</p>\n\n<p>Second: How would i call this replacement function from outside this class?\nCould you give me some help please?</p>\n"}, {"tags": ["c++", "memory-management", "allocator", "cortex-m"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1551883642, "post_id": 55025634, "comment_id": 96804442, "body": "You&#39;ll need to write a custom allocator, rather than using the default <code>std::allocator</code>. <code>how i should replace it</code> See the second template argument of <code>std::vector</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1551884352, "post_id": 55025634, "comment_id": 96804897, "body": "You&#39;d have to use allocator for this. Unfortunately, I am not familiar with STM32F7 architecture, so I would not be able to tell you how to allocate memory in external ram."}, {"owner": {"reputation": 7262, "user_id": 4955498, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DQswbNCOBTs/AAAAAAAAAAI/AAAAAAAAADE/avTd-sX467I/photo.jpg?sz=128", "display_name": "Michael Veksler", "link": "https://stackoverflow.com/users/4955498/michael-veksler"}, "edited": false, "score": 1, "creation_date": 1551884827, "post_id": 55025634, "comment_id": 96805218, "body": "How would you allocate a block of memory (alternative to malloc()) for such an external memory?"}, {"owner": {"reputation": 41, "user_id": 11160039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39417b2a79aefd50fcea3050c4615281?s=128&d=identicon&r=PG&f=1", "display_name": "zelo zelatus", "link": "https://stackoverflow.com/users/11160039/zelo-zelatus"}, "edited": false, "score": 0, "creation_date": 1551893103, "post_id": 55025634, "comment_id": 96810430, "body": "Maybe it&#39;s a little bit naive but i thought about reuse malloc but pointing to other memory part. My external ram is virtually part of my MCU."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 9086323, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6mrCB4nY7Qc/AAAAAAAAAAI/AAAAAAAAAZw/IaOH5pyQ91I/photo.jpg?sz=128", "display_name": "Dan Green", "link": "https://stackoverflow.com/users/9086323/dan-green"}, "is_accepted": false, "score": 0, "last_activity_date": 1602219167, "creation_date": 1602219167, "answer_id": 64274103, "question_id": 55025634, "link": "https://stackoverflow.com/questions/55025634/dynamic-vector-allocation-in-external-ram/64274103#64274103", "title": "Dynamic vector allocation in external RAM", "body": "<p>I was facing the same issue and got a working solution by redefining <code>operator new</code>. The benefit of this over using a custom allocator is that <strong>all</strong> dynamic allocations will automatically be in SDRAM, so you're free to use std::function or any STL container that requires the heap, without having to pass a custom allocator argument every time.</p>\n<p>I did the following:</p>\n<ol>\n<li><p>Remove the standard library by adding <code>-nostdlib</code> to the compilation flags. I also added this to the linker flags. Also remove and <code>--specs=...</code> from your compiler and linker flags. Bonus: you'll save ~60-80k of code space!</p>\n</li>\n<li><p>Write your own replacement for <code>operator new</code>, <code>operator delete</code>. I created a new file called <code>new.cpp</code> added the following: (taken from <a href=\"https://arobenko.gitbooks.io/bare_metal_cpp/content/compiler_output/dyn_mem.html\" rel=\"nofollow noreferrer\">https://arobenko.gitbooks.io/bare_metal_cpp/content/compiler_output/dyn_mem.html</a>)</p>\n</li>\n</ol>\n<pre><code>//new.cpp\n#include &lt;cstdlib&gt;\n#include &lt;new&gt;\n\nvoid *operator new(size_t size) noexcept { return malloc(size); }\nvoid operator delete(void *p) noexcept { free(p); }\nvoid *operator new[](size_t size) noexcept { return operator new(size); }\nvoid operator delete[](void *p) noexcept { operator delete(p); }\nvoid *operator new(size_t size, std::nothrow_t) noexcept { return operator new(size); }\nvoid operator delete(void *p, std::nothrow_t) noexcept { operator delete(p); }\nvoid *operator new[](size_t size, std::nothrow_t) noexcept { return operator new(size); }\nvoid operator delete[](void *p, std::nothrow_t) noexcept { operator delete(p); }\n</code></pre>\n<ol start=\"3\">\n<li>Define a variable in the linker script that corresponds to the lowest SDRAM address (start of the heap). This isn't strictly necessary, as you could use a constant (0xC0000000) in your code in step 4, but it makes things easier to keep the SDRAM address in just one place. Just add one line: <code>PROVIDE( _fmc_start = . );</code></li>\n</ol>\n<pre><code>//linker script\n\n [snip]\n\n  /* Section cr\u00e9\u00e9e pour l'allocation dans la SDRAM externe*/\n  .fmc :\n  {\n    . = ALIGN(8);\n    PROVIDE( _fmc_start = . );\n    *(.fmc)     \n    *(.fmc*)\n    . = ALIGN(8);\n  } &gt;SDRAM\n\n</code></pre>\n<ol start=\"4\">\n<li>The new implementation of <code>new</code> will directly call <code>malloc()</code>, which will call <code>_sbrk()</code> when it needs a block of memory in the heap.\nSo you have to define <code>_sbrk()</code> to keep track of the heap pointer, and simply start the pointer at the lowest SDRAM address that you just defined in the linker script.\nHere's what I did:</li>\n</ol>\n<pre><code>//sbrk.cpp, or append this to new.cpp\n#include &lt;cstdlib&gt;\n\nextern &quot;C&quot; size_t _sbrk(int incr)\n{\n    extern char _fmc_start; // Defined by the linker\n    static char *heap_end;\n    char *prev_heap_end;\n\n    if (heap_end == 0)\n        heap_end = &amp;_fmc_start;\n    prev_heap_end = heap_end;\n    //Optionally can check for out-of-memory error here\n    heap_end += incr;\n    return (size_t)prev_heap_end;\n}\n</code></pre>\n<ol start=\"5\">\n<li>At this point, if you try to compile you will probably get many linker errors. The exact errors will depend on what parts of the standard library your project uses besides just new and delete. In my case, I was using <code>std::function</code> and the compiler complained that it didn't have <code>__throw_bad_function_call()</code>. You probably will also see an error for things like <code>_init()</code> and <code>_fini()</code> and <code>__errno</code>. The basic strategy is to create your own empty function stub or variable declaration for each of these. It's worth doing a quick search for each of these to see what purpose they serve, you might find out your project or a library you're including is using some features you weren't aware of! When you create a stub, you'll need to match the function signature correctly, so that will require searching the internet as well. Many of the stubs are for handling errors/exceptions, so you can decide how to handle it in the function body (or ignore errors).</li>\n</ol>\n<p>For example, here's some info on the (obsolete, but required) <code>_init()</code> and <code>_fini()</code> functions: <a href=\"https://tldp.org/HOWTO/Program-Library-HOWTO/miscellaneous.html\" rel=\"nofollow noreferrer\">https://tldp.org/HOWTO/Program-Library-HOWTO/miscellaneous.html</a></p>\n<p>Here's some info on <code>__dso_handle</code>: <a href=\"https://lists.debian.org/debian-gcc/2003/07/msg00057.html\" rel=\"nofollow noreferrer\">https://lists.debian.org/debian-gcc/2003/07/msg00057.html</a></p>\n<p>__cxa_pure_virtual(): <a href=\"https://stackoverflow.com/questions/920500/what-is-the-purpose-of-cxa-pure-virtual\">What is the purpose of __cxa_pure_virtual?</a></p>\n<p>Here's what my project required to work:</p>\n<pre><code>//syscalls.cpp\nextern &quot;C&quot; {\nvoid _init(void) {}\nvoid _fini(void) {}\nint __errno;\nvoid *__dso_handle = (void *)&amp;__dso_handle;\n}\nnamespace std\n{\n//These are error handlers. They could alternatively restart, or log an error\nvoid __throw_bad_function_call() { while (1); }\nvoid __cxa_pure_virtual() { while (1); }\n} // namespace std\n</code></pre>\n<p>After all that, it will finally compile and if you use a debugger you'll see that the address of your vectors start at <code>0xC0000000</code>!</p>\n"}], "owner": {"reputation": 41, "user_id": 11160039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39417b2a79aefd50fcea3050c4615281?s=128&d=identicon&r=PG&f=1", "display_name": "zelo zelatus", "link": "https://stackoverflow.com/users/11160039/zelo-zelatus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1602219167, "creation_date": 1551883087, "last_edit_date": 1551883658, "question_id": 55025634, "link": "https://stackoverflow.com/questions/55025634/dynamic-vector-allocation-in-external-ram", "title": "Dynamic vector allocation in external RAM", "body": "<p>I am currently working on a large project of my own on an STM32F7 cortex-m7 microcontroller in C++ using GCC. I need to store a wide array in an external SDRAM (16 MB) containing vectors of notes structures (12 bytes each). I have already a working FMC and a custom ram region created</p>\n\n<pre><code>/* Specify the memory areas */\nMEMORY\n{\nRAM (xrw)       : ORIGIN = 0x20000000, LENGTH = 512K\nFLASH (rx)      : ORIGIN = 0x08000000, LENGTH = 1024K\nSDRAM (xrw)     : ORIGIN = 0xC0000000, LENGTH = 16M\n}\n\n/* Define output sections */\nSECTIONS\n{\n  /* Section cr\u00e9\u00e9e pour l'allocation dans la SDRAM externe*/\n  .fmc :\n  {\n    . = ALIGN(8);\n    *(.fmc)        \n    *(.fmc*)\n    . = ALIGN(8);\n  } &gt;SDRAM\n</code></pre>\n\n<p>my array is declared like this :</p>\n\n<pre><code>std::vector&lt;SequencerNoteEvent&gt; NotesVectorArray[kMaxPpqn] __attribute__((section(\".fmc\")));\n</code></pre>\n\n<p>So far it's OK. I created an array of vectors in my external RAM. How can i proceed in order to make my vectors element creation </p>\n\n<pre><code>NotesVectorArray[position].push_back(note);\n</code></pre>\n\n<p>happening in the same external RAM dynamically ? I am currently only able to declare static data using the <code>__attribute__(section)</code></p>\n\n<p>I read lot of things about C++ allocators, memory pools, but i don't get where the allocation take place in the vector code and how i should replace it... I \"just\" need to have the same allocation system than the usual but in another part of my memory for this precise type.</p>\n\n<p>It seems possible to have multiple heaps. Where is located the connection between scatter file and the effective memory allocation ? </p>\n\n<p>Thanks in advance,</p>\n\n<p>Ben</p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 2, "creation_date": 1551883266, "post_id": 55025630, "comment_id": 96804181, "body": "In the second, you&#39;ve changed <code>c-&gt;next</code> to <code>c-&gt;next-&gt;next</code>, and have lost what <code>c-&gt;next</code> previously pointed to."}, {"owner": {"reputation": 29, "user_id": 11160245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5cb47b2cd35b64e8ff779e4e547c833?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/11160245/dennis"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1551883767, "post_id": 55025630, "comment_id": 96804524, "body": "Can you specifically explain what moment does c-&gt;next lost"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1551883810, "post_id": 55025630, "comment_id": 96804559, "body": "Take out some paper and a pencil and draw what happens in each case."}, {"owner": {"reputation": 29, "user_id": 11160245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5cb47b2cd35b64e8ff779e4e547c833?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/11160245/dennis"}, "edited": false, "score": 0, "creation_date": 1551884340, "post_id": 55025630, "comment_id": 96804886, "body": "i got it, i should take a break after coding all day..."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1551884390, "last_edit_date": 1551884390, "creation_date": 1551884116, "answer_id": 55026000, "question_id": 55025630, "link": "https://stackoverflow.com/questions/55025630/whats-difference-between-two-deletion-of-linked-list/55026000#55026000", "title": "What&#39;s difference between two deletion of linked-list?", "body": "<p>A significant difference is that after the first, <code>c-&gt;next</code> will be pointing to what used to be (before the algorithm) <code>c-&gt;next-&gt;next</code>. After the second, <code>c-&gt;next</code> will be pointing to a deleted node.</p>\n\n<p>Another difference is that the first deletes what used to be <code>c-&gt;next</code> before the algorithm, while the second deletes the node that used to be <code>c-&gt;next-&gt;next</code> before the algorithm.</p>\n"}], "owner": {"reputation": 29, "user_id": 11160245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5cb47b2cd35b64e8ff779e4e547c833?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/11160245/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551884390, "creation_date": 1551883058, "question_id": 55025630, "link": "https://stackoverflow.com/questions/55025630/whats-difference-between-two-deletion-of-linked-list", "title": "What&#39;s difference between two deletion of linked-list?", "body": "<p>I wrote two method two delete the given node, and i though they are the same. However, they give different result.</p>\n\n<p>First,                                 </p>\n\n<pre><code>    node *q = c-&gt;next;\n    c-&gt;data = q-&gt;data;              second:  c-&gt;data = c-&gt;next-&gt;data;\n    c-&gt;next = q-&gt;next;                       c-&gt;next = c-&gt;next-&gt;next;\n    delete q;                                delete c-&gt;next;\n</code></pre>\n\n<p>I try the example(linked list:1,2,3,4,5,6,7,8,9,10 and c==3)\nthe first method give the result: 1,2,4,5,6,7,8,9,10, which is what i want</p>\n\n<p>but the second give:1,2,4,-572662307\nI cannot understand what make difference. </p>\n"}, {"tags": ["c++", "linux", "backtrace", "aslr", "position-independent-code"], "comments": [{"owner": {"reputation": 546, "user_id": 706749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad79288563ad0d55baba41432adc6d2?s=128&d=identicon&r=PG", "display_name": "Aliaksei Kandratsenka", "link": "https://stackoverflow.com/users/706749/aliaksei-kandratsenka"}, "edited": false, "score": 0, "creation_date": 1576281802, "post_id": 55025500, "comment_id": 104861660, "body": "it looks like passing file offsets instead of addresses works."}, {"owner": {"reputation": 2192, "user_id": 1966790, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c63f6c93d67e8cbe0bc2498c225d2d88?s=128&d=identicon&r=PG", "display_name": "MateuszL", "link": "https://stackoverflow.com/users/1966790/mateuszl"}, "reply_to_user": {"reputation": 546, "user_id": 706749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad79288563ad0d55baba41432adc6d2?s=128&d=identicon&r=PG", "display_name": "Aliaksei Kandratsenka", "link": "https://stackoverflow.com/users/706749/aliaksei-kandratsenka"}, "edited": false, "score": 1, "creation_date": 1576488167, "post_id": 55025500, "comment_id": 104902244, "body": "@AliakseiKandratsenka Yes, it works. But how do I get the offsets inside program?"}], "owner": {"reputation": 2192, "user_id": 1966790, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c63f6c93d67e8cbe0bc2498c225d2d88?s=128&d=identicon&r=PG", "display_name": "MateuszL", "link": "https://stackoverflow.com/users/1966790/mateuszl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1551882698, "creation_date": 1551882698, "question_id": 55025500, "link": "https://stackoverflow.com/questions/55025500/get-address-for-addr2line-in-pie-binary-inside-program", "title": "get address for addr2line in -pie binary inside program", "body": "<p>I want my program to print backtraces that will be usable by addr2line after program finishes. On ubuntu 14.04 this was achieved by following code:</p>\n\n<pre><code>void bt() {\n    constexpr int MAX_STACK = 30;\n    void *array[MAX_STACK];\n    auto size = backtrace(array, MAX_STACK);\n    std::ostringstream msg;\n        for (int i = 0; i &lt; size; ++i) {\n            msg &lt;&lt; array[i] &lt;&lt; \" \";\n        }\n    std::cout &lt;&lt; msg.str() &lt;&lt; std::endl;\n}\n// sample output: 0x55db7a9fdea3 0x55db7a9fdfd5 0x55db7a9fdfe1 0x55db7a9fe01f\n</code></pre>\n\n<p>When used now on ubuntu 18.04, addr2line gives a lot of <code>??:0</code>. \nI am not interested in human-readable format given by <code>backtrace_symbols(3)</code> linux function, I want concise format that can be decoded when necessary with separately distributed debug symbols (stripped to separate .dbg file).</p>\n\n<p>I could compile with <code>-no-pie</code>, but I don't want to. It seems that this is something that we don't want in production. </p>\n\n<p>I learned that if for each pointer (<code>array[i]</code> above) I remove value from <code>/proc/&lt;pid&gt;/maps</code> and convert back to hex, I get address that is understandable for addr2line. So question is: </p>\n\n<p>How do I get the offset in code, without looking at text file in /proc? Or is there a better method for achieving concise backtrace?</p>\n"}, {"tags": ["python", "c++", "numpy", "c-api"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1551882745, "post_id": 55025458, "comment_id": 96803825, "body": "That&#39;s C++ code, not C."}], "answers": [{"tags": [], "owner": {"reputation": 860, "user_id": 1488274, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RgOQ2.jpg?s=128&g=1", "display_name": "MJay", "link": "https://stackoverflow.com/users/1488274/mjay"}, "is_accepted": true, "score": 0, "last_activity_date": 1551952255, "creation_date": 1551952255, "answer_id": 55040727, "question_id": 55025458, "link": "https://stackoverflow.com/questions/55025458/how-to-get-python-return-values-in-c/55040727#55040727", "title": "How to get python return values in C?", "body": "<p>I solved my problem by using Lists as return argument to C. If you <code>list()</code> your return value, it would work fine:</p>\n\n<pre><code>a = np.array([[1.1,1.2],[2.1,2.2],[3.1,3.2],[4.1,4.2]]).reshape(8,1);\nreturn list(a);\n</code></pre>\n\n<p>Then in C, I do as:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    PyObject *pName, *pModule, *pFunc;\n    PyObject *pArgs, *pArg, *pResult;\n    int i = 0, j = 0;\n\n    cv::Mat img;\n    img = cv::imread(\"..\\\\..\\\\x64\\\\Release\\\\1.jpg\",1);\n\n    Py_Initialize();\n    pName = PyUnicode_DecodeFSDefault(\"showImage\");\n    pModule = PyImport_Import(pName);\n    Py_DECREF(pName);\n    pFunc = PyObject_GetAttrString(pModule, \"detect\");\n\n    pArgs = PyTuple_New(4);\n    pArg = PyByteArray_FromStringAndSize((char*)img.data, img.total() * img.elemSize());\n    PyTuple_SetItem(pArgs, 0, pArg);\n    PyTuple_SetItem(pArgs, 1, PyLong_FromLong(img.cols));\n    PyTuple_SetItem(pArgs, 2, PyLong_FromLong(img.rows));\n    PyTuple_SetItem(pArgs, 3, PyLong_FromLong(img.channels()));\n\n    pResult = PyObject_CallObject(pFunc, pArgs);\n    Py_DECREF(pArgs);\n\n    if (PyList_Check(pResult)) {\n        int SIZE = PyList_Size(pResult);\n        float *arr = new float(SIZE);\n        for (i = 0; i &lt; SIZE; i++) arr[i] = PyFloat_AsDouble(PyList_GetItem(pResult, i));\n\n        for (i = 0; i &lt; SIZE / 2; i++) {\n            for (j = 0; j &lt; 2; j++) {\n                printf(\"%f, \", arr[i * 2 + j]);\n            }\n            printf(\"\\n\");\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>in which the last 14 lines gets the returned list and extracts its items.</p>\n"}], "owner": {"reputation": 860, "user_id": 1488274, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/RgOQ2.jpg?s=128&g=1", "display_name": "MJay", "link": "https://stackoverflow.com/users/1488274/mjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "accepted_answer_id": 55040727, "answer_count": 1, "score": -1, "last_activity_date": 1551952255, "creation_date": 1551882559, "last_edit_date": 1551882770, "question_id": 55025458, "link": "https://stackoverflow.com/questions/55025458/how-to-get-python-return-values-in-c", "title": "How to get python return values in C?", "body": "<p>I'm trying to pass an image from C to python and pass an array back from python to C and get length and data inside it.\nHere is my Python code:</p>\n\n<pre><code>def detect(pI,col,row,channels):\n    I_reshape = np.asarray(list(pI), dtype=np.ubyte)\n    I_reshape = np.reshape(I_reshape,(row,col,channels))\n    cv2.imshow(\"testWin\",I_reshape)\n    cv2.waitKey(0)\n\n    a = np.arange(4).reshape((2, 2))\n    return a;\n</code></pre>\n\n<p>and this is my C code:</p>\n\n<pre><code>#include &lt;python.h&gt;\n#include &lt;direct.h&gt;\n#include &lt;opencv2\\opencv.hpp&gt;\n#include &lt;opencv2\\core\\core.hpp&gt;\n#include &lt;opencv2\\highgui\\highgui.hpp&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\n    PyObject *pName, *pModule, *pFunc;\n    PyObject *pArgs, *pArg, *pResult;\n\n    Py_Initialize();\n    pName = PyUnicode_DecodeFSDefault(\"getArray\");\n    pModule = PyImport_Import(pName);\n    Py_DECREF(pName);\n    pFunc = PyObject_GetAttrString(pModule, \"returnArray\");\n    pArgs = PyTuple_New(4);\n    pArg = PyByteArray_FromStringAndSize((char*)img.data, img.total() * img.elemSize());\n    PyTuple_SetItem(pArgs, 0, pArg);\n    PyTuple_SetItem(pArgs, 1, PyLong_FromLong(img.cols));\n    PyTuple_SetItem(pArgs, 2, PyLong_FromLong(img.rows));\n    PyTuple_SetItem(pArgs, 3, PyLong_FromLong(img.channels()));\n    pResult = PyObject_CallObject(pFunc, pArgs);\n\n    int SIZE = PyByteArray_Size(pResult);\n    Py_XDECREF(pResult);\n    uint *data = (uint *)PyByteArray_AsString(pResult);\n    Py_XDECREF(pResult);\n\n    printf(\"Return of call (size): %d\\n\", SIZE/sizeof(uint)); \n    printf(\"Return of call (data): %d\\n\", data[0]);\n\n    Py_DECREF(pResult);\n    return 0;\n}\n</code></pre>\n\n<p>The problem is that I get correct size, but I data get nothing but zeros. Where am I wrong?</p>\n"}, {"tags": ["c++", "bit-manipulation", "fstream"], "comments": [{"owner": {"reputation": 1310, "user_id": 4445625, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-tOVn9tyUb9E/AAAAAAAAAAI/AAAAAAAAAUo/2EwtWUwSQjA/photo.jpg?sz=128", "display_name": "Marc Stroebel", "link": "https://stackoverflow.com/users/4445625/marc-stroebel"}, "edited": false, "score": 3, "creation_date": 1551882519, "post_id": 55025401, "comment_id": 96803681, "body": "you could try <code>std::bitset</code> - <a href=\"https://en.cppreference.com/w/cpp/utility/bitset\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/bitset</a>"}, {"owner": {"reputation": 7961, "user_id": 482601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/52578189717d3748d30828c5fff42ba9?s=128&d=identicon&r=PG", "display_name": "fabian789", "link": "https://stackoverflow.com/users/482601/fabian789"}, "reply_to_user": {"reputation": 1310, "user_id": 4445625, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-tOVn9tyUb9E/AAAAAAAAAAI/AAAAAAAAAUo/2EwtWUwSQjA/photo.jpg?sz=128", "display_name": "Marc Stroebel", "link": "https://stackoverflow.com/users/4445625/marc-stroebel"}, "edited": false, "score": 0, "creation_date": 1551884411, "post_id": 55025401, "comment_id": 96804936, "body": "@MarcStr&#246;bel Thanks for the pointer, however, how would bitset&lt;8&gt; be different from using a uint8?"}, {"owner": {"reputation": 1310, "user_id": 4445625, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-tOVn9tyUb9E/AAAAAAAAAAI/AAAAAAAAAUo/2EwtWUwSQjA/photo.jpg?sz=128", "display_name": "Marc Stroebel", "link": "https://stackoverflow.com/users/4445625/marc-stroebel"}, "edited": false, "score": 0, "creation_date": 1551885638, "post_id": 55025401, "comment_id": 96805767, "body": "just a cleaner api"}, {"owner": {"reputation": 32686, "user_id": 10396, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ddbfebb47432f6599da361df6a135c7c?s=128&d=identicon&r=PG", "display_name": "AShelly", "link": "https://stackoverflow.com/users/10396/ashelly"}, "edited": false, "score": 3, "creation_date": 1551899257, "post_id": 55025401, "comment_id": 96813392, "body": "Your code looks good.  Perhaps a uint32_t or uint64_t would lead to more efficient disk writes.  Also, you need to implement a flush of the last bits if the total is not a multiple of your cache size.  Be sure to left justify them before writing or you will get stale data in the high bits."}], "owner": {"reputation": 7961, "user_id": 482601, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/52578189717d3748d30828c5fff42ba9?s=128&d=identicon&r=PG", "display_name": "fabian789", "link": "https://stackoverflow.com/users/482601/fabian789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551906996, "creation_date": 1551882366, "last_edit_date": 1551906996, "question_id": 55025401, "link": "https://stackoverflow.com/questions/55025401/write-to-file-bit-by-bit", "title": "Write to file bit by bit", "body": "<p>I'm implementing an entropy coding module in C++. </p>\n\n<p>The code produces a stream of 0s and 1s that I would like to output to a file.</p>\n\n<p>Since only whole bytes can be written (?), some caching is needed. I was thinking of something like this:</p>\n\n<pre><code>struct out_cache_t {\n    uint8_t cache = 0;\n    uint8_t count = 0;\n};\n\ninline void cached_output(const int bit, out_cache_t &amp;out_cache, std::ofstream &amp;out) {\n    out_cache.cache &lt;&lt;= 1;\n    out_cache.cache |= bit;\n    out_cache.count += 1;\n    if (out_cache.count == 8) {\n        out.write((char*)&amp;out_cache.cache, 1);\n        out_cache.count = 0;\n    }\n}\n\nvoid encode(...) {\n  out_cache_t out_cache;\n  std::ofstream out(\"output.txt\");\n  // ... do encoding ...\n  if ( ... need to write 1 ... ) {\n    cached_output(1, out_cache, out);\n  } else if ( ... need to write 0 ... ) {\n    cached_output(0, out_cache, out);\n  }\n  // ... more stuff ...\n}\n</code></pre>\n\n<p>But I was wondering, is there some easier or potentially more efficient way built into the std lib? What do people usually do in this scenario?</p>\n\n<p>(Note that I'm usually programming in Python so I'm not very familiar with the ways of C++)</p>\n"}, {"tags": ["c++", "gdb"], "comments": [{"owner": {"reputation": 7668, "user_id": 2554472, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119155584/picture?type=large", "display_name": "Mark Plotnick", "link": "https://stackoverflow.com/users/2554472/mark-plotnick"}, "edited": false, "score": 0, "creation_date": 1551919431, "post_id": 55025398, "comment_id": 96821196, "body": "As an alternative, you can use the <a href=\"https://sourceware.org/gdb/onlinedocs/gdb/Convenience-Funs.html\" rel=\"nofollow noreferrer\">convenience function</a> <code>$_streq(x, &quot;hello&quot;)</code> which will return 1 if they&#39;re equal."}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 0, "last_activity_date": 1551891129, "creation_date": 1551891129, "answer_id": 55028296, "question_id": 55025398, "link": "https://stackoverflow.com/questions/55025398/gdb-conditional-breakpoint-weird-behaviour/55028296#55028296", "title": "GDB Conditional breakpoint, Weird Behaviour", "body": "<blockquote>\n  <p>why?</p>\n</blockquote>\n\n<p>Assuming you are on a Linux system, this is most likely caused by the fact that <code>strcmp</code> is a <a href=\"https://sourceware.org/glibc/wiki/GNU_IFUNC\" rel=\"nofollow noreferrer\">GNU indirect function</a>.</p>\n\n<p>Installing debug info for GLIBC (<code>libc-dbg</code>, or some such package) may help.</p>\n\n<p>This could be a considered a bug in GDB, feel free to create a new <a href=\"https://sourceware.org/bugzilla/enter_bug.cgi?product=gdb\" rel=\"nofollow noreferrer\">bugzilla</a> issue for it.</p>\n"}], "owner": {"reputation": 143, "user_id": 4160007, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f2a65f6107f9689e0140606f6c344c2e?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/4160007/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551891129, "creation_date": 1551882362, "question_id": 55025398, "link": "https://stackoverflow.com/questions/55025398/gdb-conditional-breakpoint-weird-behaviour", "title": "GDB Conditional breakpoint, Weird Behaviour", "body": "<p>GDB Version: 8.1</p>\n\n<p>The following, does not work:</p>\n\n<pre><code>condition 2 strcmp(x,\"hello\") == 0\n</code></pre>\n\n<p>The following, works</p>\n\n<pre><code>condition 2 strcmp()(x,\"hello\") == 0\n</code></pre>\n\n<p>why?</p>\n"}, {"tags": ["c++", "assembly", "x86", "g++", "mingw"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1551882585, "post_id": 55025376, "comment_id": 96803721, "body": "I&#39;m pretty sure you can only use general purpose registers with this feature.  What are you trying to do?"}, {"owner": {"reputation": 1, "user_id": 11160218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4304190e39ff80689a7f99f3248a88a?s=128&d=identicon&r=PG&f=1", "display_name": "win32api", "link": "https://stackoverflow.com/users/11160218/win32api"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1551882665, "post_id": 55025376, "comment_id": 96803771, "body": "Whats weird is that it does succeed on a x64 toolchain compilation. im trying to save the value in this register to be referenced later by a different func, by accessing the register"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1551882842, "post_id": 55025376, "comment_id": 96803892, "body": "That is not a valid use case of register variables.  Remember, <code>xmm</code> registers are caller saved, so before your other code is reached, it might already be overwritten by some other function."}, {"owner": {"reputation": 1, "user_id": 11160218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4304190e39ff80689a7f99f3248a88a?s=128&d=identicon&r=PG&f=1", "display_name": "win32api", "link": "https://stackoverflow.com/users/11160218/win32api"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1551882946, "post_id": 55025376, "comment_id": 96803952, "body": "I know that but im willing to take the risk, those functions are sequential"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 2, "creation_date": 1551889064, "post_id": 55025376, "comment_id": 96807901, "body": "Try specifying <code>-march=native</code> or <code>-mmmx</code>."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1551896663, "post_id": 55025376, "comment_id": 96812249, "body": "@fuz, they are using MMX - not XMM."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1551897295, "post_id": 55025376, "comment_id": 96812544, "body": "I&#39;d also question how this is being used.It should be noted that using <code>register DWORD index __asm (&quot;%mm7&quot;);</code> doesn&#39;t guarantee the variable <code>index</code> would be in <i>mm7</i>. The only guarantee is that if <code>index</code> was used as an operand to inline assembly using a <code>&quot;y&quot;</code> constraint, <i>mm7</i> would be the register used. As @MaximEgorushkin points out to even get this going you&#39;d have to tell the compiler to use MMX via the <code>-mmmx</code> option. x86-64 should compile without error b/c all x86-64 processors can use MMX registers,but not all x86 targets support MMX so the compiler has to be told to use them or not."}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "edited": false, "score": 1, "creation_date": 1551897323, "post_id": 55025376, "comment_id": 96812567, "body": "Compiling without error and generating the code you expect are two different issues."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1551915782, "post_id": 55025376, "comment_id": 96820325, "body": "@fuz: I thought you could use call-clobbered registers; the compiler saves/restores them for you by copying somewhere else across function calls.  But it seems you&#39;re right; gcc doesn&#39;t save/restore mm7 across a call to <code>bar()</code> in its code-gen here: <a href=\"https://godbolt.org/z/kt-brt\" rel=\"nofollow noreferrer\">godbolt.org/z/kt-brt</a>.  It only spills mm7 <i>after</i>, to get it into integer regs in 32-bit mode.  And yes, Maxim is correct: <code>-m32</code> baseline doesn&#39;t include <code>-mmmx</code>, so mm7 isn&#39;t a valid register name.  But x86-64 does."}], "owner": {"reputation": 1, "user_id": 11160218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4304190e39ff80689a7f99f3248a88a?s=128&d=identicon&r=PG&f=1", "display_name": "win32api", "link": "https://stackoverflow.com/users/11160218/win32api"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551914559, "creation_date": 1551882296, "last_edit_date": 1551914559, "question_id": 55025376, "link": "https://stackoverflow.com/questions/55025376/gcc-specifying-mmx-register-for-a-local-variable-fails", "title": "GCC: Specifying mmx register for a local variable fails", "body": "<p>Im trying to achieve the following on a Windows environment c++, MINGW GCC:</p>\n\n<p>Im trying to define a local variable as such:</p>\n\n<p><code>register DWORD index __asm  (\"%mm7\");</code></p>\n\n<p>this definition compiles with MINGW GCC x64 , but fails on x86 compilation with the error \n<code>error: invalid register name for 'index'\n     register DWORD index __asm  (\"%mm7\");</code></p>\n\n<p>I have already tried to reference the register as <code>__asm  (\"mm7\");</code> but to no avail. any help on the matter would be very appreciated </p>\n"}, {"tags": ["java", "android", "c++", "opencv", "java-native-interface"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1551882830, "post_id": 55025236, "comment_id": 96803883, "body": "You need a couple of <code>jobject</code>s that refer to instances of the <i>Java</i> classes <code>org.opencv.core.Mat</code> and <code>org.opencv.core.Rect</code>. What you have now looks like instances of the <i>C++</i> <code>cv::Mat</code> and <code>cv::Rect</code> classes."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8331340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15073085ee6d000bbdd3846b43552e84?s=128&d=identicon&r=PG&f=1", "display_name": "J_Ghodasara", "link": "https://stackoverflow.com/users/8331340/j-ghodasara"}, "edited": false, "score": 0, "creation_date": 1551935046, "post_id": 55025758, "comment_id": 96824738, "body": "Thanks for your answer. I&#39;ll be able to create new object for Mat and Rect but what about data which i already have ls and lsRect. How would i be able to copy that data from ls and lsRect to equivalent NewObject created by jObject in JNI.? Could please let me know if you know the answer?"}, {"owner": {"reputation": 1336, "user_id": 623048, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/21e986a6c54514b362062a0a6b6e90e1?s=128&d=identicon&r=PG", "display_name": "Graham Asher", "link": "https://stackoverflow.com/users/623048/graham-asher"}, "reply_to_user": {"reputation": 1, "user_id": 8331340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15073085ee6d000bbdd3846b43552e84?s=128&d=identicon&r=PG&f=1", "display_name": "J_Ghodasara", "link": "https://stackoverflow.com/users/8331340/j-ghodasara"}, "edited": false, "score": 0, "creation_date": 1552322334, "post_id": 55025758, "comment_id": 96955998, "body": "I have added some brief notes on that. I wish I had time to add more detail, but I have also recommended a book which it explains it all."}], "tags": [], "owner": {"reputation": 1336, "user_id": 623048, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/21e986a6c54514b362062a0a6b6e90e1?s=128&d=identicon&r=PG", "display_name": "Graham Asher", "link": "https://stackoverflow.com/users/623048/graham-asher"}, "is_accepted": false, "score": 1, "last_activity_date": 1552322283, "last_edit_date": 1552322283, "creation_date": 1551883452, "answer_id": 55025758, "question_id": 55025236, "link": "https://stackoverflow.com/questions/55025236/getting-error-when-trying-to-give-parameters-to-constructor-of-jni-object-while/55025758#55025758", "title": "Getting error when trying to give parameters to constructor of JNI object while creating new object", "body": "<p>Your attempt to create the Mat object passes pointers to two C++ objects, where it should pass Java objects. The statement in question is:</p>\n\n<pre><code>jobject matObject = (jobject)env-&gt;NewObject(matclass, constructor, ls, lsRect);\n</code></pre>\n\n<p>Instead of passing the pointers ls and lsRect you need to use env->NewObject to create another Mat jobject and a Rect jobject; then pass those jobjects to your original call to NewObject.</p>\n\n<p>You also need to set the fields of your Mat and Rect object. To do that, you'll have to get field IDs for them (see <a href=\"https://stackoverflow.com/questions/39823375/clarification-about-getfieldid\">this</a> StackOverflow answer) and use JNI functions like SetIntField, SetDoubleField, etc.</p>\n\n<p>It's quite complicated, and I'd recommend getting a copy of The Java Native Interface by Sheng Liang, which has been very helpful to me.</p>\n"}], "owner": {"reputation": 1, "user_id": 8331340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15073085ee6d000bbdd3846b43552e84?s=128&d=identicon&r=PG&f=1", "display_name": "J_Ghodasara", "link": "https://stackoverflow.com/users/8331340/j-ghodasara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552322283, "creation_date": 1551881877, "question_id": 55025236, "link": "https://stackoverflow.com/questions/55025236/getting-error-when-trying-to-give-parameters-to-constructor-of-jni-object-while", "title": "Getting error when trying to give parameters to constructor of JNI object while creating new object", "body": "<p>I am working on an Android App in which i am using NDK, CPP, Opencv, and java. So, here i am getting error. In which i need to pass ArrayOf Mat objects from CPP to java using JNI method. My code is as follows.</p>\n\n<pre><code>jclass thisclass = env-&gt;GetObjectClass(instance);\njclass matclass = env-&gt;FindClass(\"org/opencv/core/Mat\");\nif (env-&gt;ExceptionOccurred())\n    return NULL;\n\nconst char* constructorSignature = \"(Lorg/opencv/core/Mat;Lorg/opencv/core/Rect;)V\";\njmethodID constructor = env-&gt;GetMethodID(matclass, \"&lt;init&gt;\", constructorSignature);\nif (env-&gt;ExceptionOccurred())\n        return NULL;\n</code></pre>\n\n<p>As Shown above i have got Mat class and then created constructor signature for Mat class by Providing Mat and Rect as an argument as there is a constructor in Mat class which accepts Mat and Rect as an input and create Mat in return. </p>\n\n<p>But after creating constructor when i try to create an object using that constructor i am getting error.</p>\n\n<pre><code>std::vector&lt;Mat&gt; selectedMats;\nstd::vector&lt;Rect&gt; selectedRects;\nfor(int h = 0; h &lt; selectedRects.size(); h++){\n\n\n        ls = &amp;(selectedMats[h]);\n        lsRect = &amp;multiRectToCropOriginal;\n        __android_log_print(ANDROID_LOG_ERROR, \"TRACKERS\", \"%ld\", (long)ls);\n        // create new object\n        jobject matObject = (jobject)env-&gt;NewObject(matclass, constructor, ls, lsRect);\n\n        // put object into array\n        env-&gt;SetObjectArrayElement(matArray , h, matObject);\n\n\n    }\n</code></pre>\n\n<p>selectedMats is an vector of Mat which i have created and assigned data to.</p>\n\n<p>Getting Error Like JNI DETECTED ERROR IN APPLICATION: use of invalid jobject 0xa32788f8</p>\n\n<p>when passing ls and lsRect.</p>\n\n<p>now, when i pass Mat and Rect as object it doesnt even compile and gives error as stated below.</p>\n\n<p>code -> </p>\n\n<p>Just changed from </p>\n\n<pre><code>jobject matObject = (jobject)env-&gt;NewObject(matclass, constructor, *ls, *lsRect);\n\nBuild command failed.\nError while executing process /home/karshsoni/Android/Sdk/cmake/3.6.4111459/bin/cmake with arguments {--build /home/karshsoni/Documents/CVTextDetection/app/.externalNativeBuild/cmake/debug/armeabi-v7a --target native-lib}\n[1/2] Building CXX object CMakeFiles/native-lib.dir/native-lib.cpp.o\nFAILED: /home/karshsoni/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64/bin/clang++  --target=armv7-none-linux-androideabi21 --gcc-toolchain=/home/karshsoni/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64 --sysroot=/home/karshsoni/Android/Sdk/ndk-bundle/toolchains/llvm/prebuilt/linux-x86_64/sysroot  -Dnative_lib_EXPORTS -I/home/karshsoni/Downloads/OpenCV/opencv-4.0.1-android-sdk/OpenCV-android-sdk/sdk/native/jni/include -g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -mfpu=vfpv3-d16 -fno-addrsig -march=armv7-a -mthumb -Wa,--noexecstack -Wformat -Werror=format-security -stdlib=libc++  -std=gnu++11 -O0 -fno-limit-debug-info  -fPIC   -std=gnu++11 -MD -MT CMakeFiles/native-lib.dir/native-lib.cpp.o -MF CMakeFiles/native-lib.dir/native-lib.cpp.o.d -o CMakeFiles/native-lib.dir/native-lib.cpp.o -c /home/karshsoni/Documents/CVTextDetection/app/src/main/cpp/native-lib.cpp\n/home/karshsoni/Documents/CVTextDetection/app/src/main/cpp/native-lib.cpp:268:76: error: cannot pass object of non-trivial type 'cv::Mat' through variadic method; call will abort at runtime [-Wnon-pod-varargs]\n        jobject matObject = (jobject)env-&gt;NewObject(matclass, constructor, ls, lsRect);\n                                                                           ^\n/home/karshsoni/Documents/CVTextDetection/app/src/main/cpp/native-lib.cpp:268:81: error: cannot pass object of non-trivial type 'cv::Rect' (aka 'Rect_&lt;int&gt;') through variadic method; call will abort at runtime [-Wnon-pod-varargs]\n        jobject matObject = (jobject)env-&gt;NewObject(matclass, constructor, ls, lsRect);\n                                                                                ^\n2 errors generated.\nninja: build stopped: subcommand failed.\n</code></pre>\n\n<p>Please do let me know if you have any idea about this or if found any error about this <strong>Thanks</strong>.</p>\n"}, {"tags": ["c++", "c", "mpi"], "comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 2, "creation_date": 1551881459, "post_id": 55024792, "comment_id": 96803040, "body": "Welcome to stack overflow - please see &quot;How to ask questions&quot; <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 5353, "user_id": 1128551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b2e64745ac36bf554b976e3625a4ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Shibli", "link": "https://stackoverflow.com/users/1128551/shibli"}, "edited": false, "score": 0, "creation_date": 1551884187, "post_id": 55024792, "comment_id": 96804790, "body": "You should not put &#39;MPI_Barrier` inside if-block if not all processes can enter because that function needs to be called by all processes. Instead of multiple <code>MPI_Barrier</code> in each if-block, just put one where ever you want all processes to stop by and wait for others."}, {"owner": {"reputation": 1, "user_id": 11160113, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-evrXWw14vKY/AAAAAAAAAAI/AAAAAAAAAd4/a04WDsUaMY4/photo.jpg?sz=128", "display_name": "Evohunter", "link": "https://stackoverflow.com/users/11160113/evohunter"}, "edited": false, "score": 0, "creation_date": 1551889739, "post_id": 55024792, "comment_id": 96808312, "body": "So in my case where would be best to place MPI_Barrier to make them wait for each other ? I need to do the reading part and then the search part done by each of the remaining processes."}], "owner": {"reputation": 1, "user_id": 11160113, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-evrXWw14vKY/AAAAAAAAAAI/AAAAAAAAAd4/a04WDsUaMY4/photo.jpg?sz=128", "display_name": "Evohunter", "link": "https://stackoverflow.com/users/11160113/evohunter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551905701, "creation_date": 1551880520, "last_edit_date": 1551905701, "question_id": 55024792, "link": "https://stackoverflow.com/questions/55024792/mpi-c-how-do-i-make-the-processes-wait-for-the-master", "title": "MPI C++ | How do I make the processes wait for the master?", "body": "<p>I have a program to make that should do the following: Read the size of an array, read each element of the array, and then a number that I want to find in that array. The program must split the search for each process. The problem I have is that I do not know how to make all the slave processes wait for the master to finish the reading process. Here is what I've got so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;cstdlib&gt;\n#include \"mpi.h\"\n\nusing namespace std;\n\nvoid searchForElementInArray(int left, int right, int myArray[], int number);\nvoid readArrayAndNumber(int myArray[], int &amp;arraySize, int &amp;number);\n\nint main(int argc, char *argv[])\n{\n    int LIMIT = 100;\n    int numberOfProcesses;\n    int processRank;\n    int error;\n    int length;\n\n    int myArray[1010];\n    int arraySize;\n    int number;\n\n    error = MPI_Init(&amp;argc, &amp;argv);\n    if (error != MPI_SUCCESS) {\n        cout &lt;&lt; \"Error starting MPI program. Terminating.\\n\";\n        MPI_Abort(MPI_COMM_WORLD, error);\n    }\n\n    // get the number of processes\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;numberOfProcesses);\n    MPI_Bcast(&amp;arraySize, 1, MPI_INT, 0, MPI_COMM_WORLD);\n\n    // Length of each interval\n    length = arraySize / numberOfProcesses;\n\n    //get the process rank\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;processRank);\n\n    if (!processRank) { // Master\n\n        readArrayAndNumber(myArray, arraySize, number);\n\n        MPI_Send(&amp;myArray, 1, MPI_INT, 1, 0, MPI_COMM_WORLD);\n        MPI_Send(&amp;arraySize, 1, MPI_INT, 1, 0, MPI_COMM_WORLD);\n        MPI_Send(&amp;number, 1, MPI_INT, 1, 0, MPI_COMM_WORLD);\n\n        MPI_Barrier(MPI_COMM_WORLD);\n\n    }\n    else { // Slave\n\n        if (processRank != numberOfProcesses - 1) {\n\n            MPI_Recv(&amp;myArray, 1, MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n            MPI_Recv(&amp;arraySize, 1, MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n            MPI_Recv(&amp;number, 1, MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n\n\n            searchForElementInArray(length * processRank, length * processRank + length, myArray, 66);\n\n            MPI_Barrier(MPI_COMM_WORLD);\n\n        }\n        else {\n\n\n            MPI_Recv(&amp;myArray, 1, MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n            MPI_Recv(&amp;arraySize, 1, MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n            MPI_Recv(&amp;number, 1, MPI_INT, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n\n\n            searchForElementInArray(length * processRank, arraySize, myArray, 66);\n\n            MPI_Barrier(MPI_COMM_WORLD);\n\n        }\n\n    }\n\n    MPI_Finalize();\n    _getch();\n    return 0;\n}\n\nvoid searchForElementInArray(int left, int right, int myArray[], int number) {\n\n    int flag = 0;\n\n    cout &lt;&lt; \"Searched positions: \";\n\n    for (int i = left; i &lt; right; i++) {\n\n        cout &lt;&lt; i &lt;&lt; \" \";\n        if (myArray[i] == number) {\n\n            cout &lt;&lt; endl &lt;&lt; \"Found on position \" &lt;&lt; i;\n            flag = 1;\n            break;\n\n        }\n\n\n    }\n\n    if (flag == 0) {\n\n        cout &lt;&lt; endl &lt;&lt; \"Not found\";\n\n    }\n\n    int processRank;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;processRank);\n    cout &lt;&lt; \" by Process: \" &lt;&lt; processRank &lt;&lt; endl &lt;&lt; endl;\n\n}\n\nvoid readArrayAndNumber(int myArray[], int &amp;arraySize, int &amp;number) {\n\n    cin &gt;&gt; arraySize;\n    for (int i = 0; i &lt; arraySize; i++) {\n\n        cin &gt;&gt; myArray[i];\n\n    }\n    cin &gt;&gt; number;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "design-patterns"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1551880567, "post_id": 55024771, "comment_id": 96802512, "body": "At this rate polling and a queue is probably better. But you could give that an observer like interface."}, {"owner": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1551880688, "post_id": 55024771, "comment_id": 96802583, "body": "Thanks @GuillaumeRacicot any references which I could take a look at."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1551946883, "post_id": 55024771, "comment_id": 96829172, "body": "@VinayShukla I also have feeling that Observer pattern will be more verbose than need be. How do you intent to store / retrieve the &#39;output&#39; / &#39;response&#39; ? it might shed some light on which design is fitting ?"}], "owner": {"reputation": 1751, "user_id": 2959769, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/9WfJf.jpg?s=128&g=1", "display_name": "Vinay Shukla", "link": "https://stackoverflow.com/users/2959769/vinay-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551880568, "creation_date": 1551880460, "last_edit_date": 1551880568, "question_id": 55024771, "link": "https://stackoverflow.com/questions/55024771/is-observer-pattern-the-best-design-for-below-scenario", "title": "Is Observer pattern the best design for below scenario?", "body": "<p><a href=\"https://i.stack.imgur.com/bBpjQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bBpjQ.png\" alt=\"Synchronization with scalable design\"></a></p>\n\n<p>We receive a request to configure App1 App2 and App3 using an AppHandler. </p>\n\n<p>The output from App1 is needed to configure App2 and response of App2 is needed by App3 for configuration</p>\n\n<p>The design should be scalable and should meet high number of configuration request like 50,000 msg/sec. </p>\n\n<p>We gave a thought to Observer pattern but looks like it is not scalable and has issues with handling messages at such high intensity. </p>\n\n<p>Excerpts and Source of above information </p>\n\n<blockquote>\n  <p>Typically the observer pattern is implemented with the \"subject\"\n  (which is being \"observed\") being part of the object, whose state\n  change is being observed, to be communicated to the observers upon\n  occurrence. This type of implementation is considered \"tightly\n  coupled\", forcing both the observers and the subject to be aware of\n  each other and have access to their internal parts, creating possible\n  issues of\u00a0scalability, speed, message recovery and maintenance (also\n  called event or notification loss), the lack of flexibility in\n  conditional dispersion and possible hindrance to desired security\n  measures.</p>\n</blockquote>\n\n<p>Source: <a href=\"https://en.wikipedia.org/wiki/Observer_pattern\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Observer_pattern</a> </p>\n"}, {"tags": ["c++", "json"], "comments": [{"owner": {"reputation": 22777, "user_id": 133203, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Fp3hB.jpg?s=128&g=1", "display_name": "Federico klez Culloca", "link": "https://stackoverflow.com/users/133203/federico-klez-culloca"}, "edited": false, "score": 0, "creation_date": 1551879794, "post_id": 55024512, "comment_id": 96802044, "body": "Please, don&#39;t add random tags in your question"}, {"owner": {"reputation": 2157, "user_id": 2122457, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hGUcg.png?s=128&g=1", "display_name": "Ugnius Mal\u016bkas", "link": "https://stackoverflow.com/users/2122457/ugnius-mal%c5%abkas"}, "edited": false, "score": 0, "creation_date": 1551880117, "post_id": 55024512, "comment_id": 96802218, "body": "Not related to the question, but <code>return</code> isn&#39;t needed in this case."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1551881241, "post_id": 55024512, "comment_id": 96802925, "body": "from where is <code>RflJsonUtils</code>?"}], "owner": {"reputation": 9, "user_id": 5626001, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6yiJWXCDC6c/AAAAAAAAAAI/AAAAAAAADKc/c9PU6Kjcj04/photo.jpg?sz=128", "display_name": "Maari R", "link": "https://stackoverflow.com/users/5626001/maari-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551879770, "creation_date": 1551879686, "last_edit_date": 1551879770, "question_id": 55024512, "link": "https://stackoverflow.com/questions/55024512/what-is-the-use-of-this-json-utils", "title": "what is the Use of this Json utils?", "body": "<p>In my case,  After polling all the module this <code>setDocumentRoot</code> getting called what this exactly this function will do?</p>\n\n<pre><code>void RflJsonUtils::setDocumentRoot(Trace &amp; GTRACE,const char *Root) {\n\n    setHtmlRoot(Root);\n    setJsonRoot();\n    setRfljsRoot();\n    setPdaRoot();\n    return;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "flir"], "comments": [{"owner": {"reputation": 1574, "user_id": 10911905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464f9d95f48b6f1d2ab156181e59c05a?s=128&d=identicon&r=PG&f=1", "display_name": "Nuzhny", "link": "https://stackoverflow.com/users/10911905/nuzhny"}, "edited": false, "score": 0, "creation_date": 1551879439, "post_id": 55024360, "comment_id": 96801794, "body": "With internet cable? Do you know about cameras IP-address?"}, {"owner": {"reputation": 2275, "user_id": 9789737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56767e4cc025351ea72c056afcb757d1?s=128&d=identicon&r=PG&f=1", "display_name": "kavko", "link": "https://stackoverflow.com/users/9789737/kavko"}, "edited": false, "score": 0, "creation_date": 1551893686, "post_id": 55024360, "comment_id": 96810770, "body": "I have recently used one of the FLIRs grey point camera. You should deffinatly take a look on Spinnaker SDK - its the offical SDK from FLIR - after installing the SDK you will also see the examples and documentation on how to use it with OpenCV."}, {"owner": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "edited": false, "score": 0, "creation_date": 1551945861, "post_id": 55024360, "comment_id": 96828723, "body": "I have the documentation but i can&#39;t see anythingabout OpenCV. The documentation i have is from SpinView Help. And what do you mean by install, that&#39;s just an SDK. I don&#39;t install it just add it to the projects Directories."}, {"owner": {"reputation": 2275, "user_id": 9789737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56767e4cc025351ea72c056afcb757d1?s=128&d=identicon&r=PG&f=1", "display_name": "kavko", "link": "https://stackoverflow.com/users/9789737/kavko"}, "edited": false, "score": 0, "creation_date": 1552225206, "post_id": 55024360, "comment_id": 96921368, "body": "It is a standalone installer and it comes with spinview (API). In the install folder there are bunch of example code on how to use it including using it with opencv. Simply google &quot;spinaker download&quot; and you will find it"}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "edited": false, "score": 0, "creation_date": 1551881587, "post_id": 55025071, "comment_id": 96803124, "body": "I can open the camera with software provided by third party. I just wanted to see if i could avoid using the SDK with open cv"}, {"owner": {"reputation": 200, "user_id": 2320641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/445674c853bb2eeaf4351d8a2c91786a?s=128&d=identicon&r=PG", "display_name": "alon", "link": "https://stackoverflow.com/users/2320641/alon"}, "reply_to_user": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "edited": false, "score": 0, "creation_date": 1551950154, "post_id": 55025071, "comment_id": 96831040, "body": "if the camera broadcast with RTSP you can give opencv the RTSP connection and connect to the camera  VideoCapture stream1(&quot;rtsp://&lt;CAM_IP&gt;&quot;);"}], "tags": [], "owner": {"reputation": 200, "user_id": 2320641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/445674c853bb2eeaf4351d8a2c91786a?s=128&d=identicon&r=PG", "display_name": "alon", "link": "https://stackoverflow.com/users/2320641/alon"}, "is_accepted": false, "score": 0, "last_activity_date": 1551881396, "creation_date": 1551881396, "answer_id": 55025071, "question_id": 55024360, "link": "https://stackoverflow.com/questions/55024360/retrive-frames-from-flir-cameras-using-opencv/55025071#55025071", "title": "Retrive frames from FLIR cameras using OpenCV", "body": "<p>cv::VideoCapture cam(0); is for cameras that install on PC \nsee if you can open with VLC or any other application \nyou may need to open VideoCapture with RTSP connection to the camera</p>\n"}, {"comments": [{"owner": {"reputation": 18888, "user_id": 1880339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0PkGx.png?s=128&g=1", "display_name": "artless noise", "link": "https://stackoverflow.com/users/1880339/artless-noise"}, "edited": false, "score": 0, "creation_date": 1609956321, "post_id": 55039082, "comment_id": 115984982, "body": "&#39;The industrial cameras have their proprietary drivers&#39; is not entirely correct.  The computer vision cameras are USB3 vision (U3V) or GigE Vision and both are layers on GemICam standard.  OpenCV may not support this out of the box.  The U3V standards are probably better than USB video.  See: <a href=\"https://stackoverflow.com/questions/tagged/genicam\">genicam</a>.  They support better control for machine vision application, very high frame rate as well as a variety of dynamics ranges, and mapping/synchronization of multiple imaging devices."}], "tags": [], "owner": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "is_accepted": false, "score": 1, "last_activity_date": 1609956537, "last_edit_date": 1609956537, "creation_date": 1551946890, "answer_id": 55039082, "question_id": 55024360, "link": "https://stackoverflow.com/questions/55024360/retrive-frames-from-flir-cameras-using-opencv/55039082#55039082", "title": "Retrive frames from FLIR cameras using OpenCV", "body": "<p>Ok for anyone that would be interested in the future on how to work in OpenCv with imagies acquired from PointGray cameras:</p>\n<p>The industrial cameras have their proprietary drivers, they don't use the standard video interfaces of the OS. This is normal, as these cameras are quite complex and they are generally used in more complex situations, where you need a full control over the camera.</p>\n<p>You have to download the camera's SDK from the Point Grey site (<a href=\"https://www.ptgrey.com/support/downloads\" rel=\"nofollow noreferrer\">https://www.ptgrey.com/support/downloads</a>) and implement the capturing yourself.</p>\n<p>Then you can transform the captured buffer into an OpenCV Mat.</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>int ConvertToCVmat(ImagePtr pImage)\n{\n    int result = 0;\n    ImagePtr convertedImage = pImage-&gt;Convert(PixelFormat_BGR8, NEAREST_NEIGHBOR);\n\n    unsigned int XPadding = convertedImage-&gt;GetXPadding();\n    unsigned int YPadding = convertedImage-&gt;GetYPadding();\n    unsigned int rowsize = convertedImage-&gt;GetWidth();\n    unsigned int colsize = convertedImage-&gt;GetHeight();\n\n    //image data contains padding. When allocating Mat container size, you need to account for the X,Y image data padding. \n    Mat cvimg = cv::Mat(colsize + YPadding, rowsize + XPadding, CV_8UC3, convertedImage-&gt;GetData(), convertedImage-&gt;GetStride());\n    namedWindow(&quot;current Image&quot;, CV_WINDOW_AUTOSIZE);\n    imshow(&quot;current Image&quot;, cvimg);\n    resizeWindow(&quot;current Image&quot;, rowsize / 2, colsize / 2);\n    waitKey(1);//otherwise the image will not display...\n    \n    return result;\n}\n\n</code></pre>\n<p>Also this is helpful <a href=\"https://www.flir.ca/support-center/iis/machine-vision/application-note/getting-started-with-opencv/\" rel=\"nofollow noreferrer\">https://www.flir.ca/support-center/iis/machine-vision/application-note/getting-started-with-opencv/</a></p>\n"}], "owner": {"reputation": 88, "user_id": 11033538, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KjUkbwioGPM/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNOk9kfpQNDZsCApVDr3l4XC835OQ/mo/photo.jpg?sz=128", "display_name": "Aris", "link": "https://stackoverflow.com/users/11033538/aris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3034, "favorite_count": 2, "answer_count": 2, "score": 0, "last_activity_date": 1609956537, "creation_date": 1551879218, "last_edit_date": 1551879486, "question_id": 55024360, "link": "https://stackoverflow.com/questions/55024360/retrive-frames-from-flir-cameras-using-opencv", "title": "Retrive frames from FLIR cameras using OpenCV", "body": "<p>I am trying to connect a FLIR cammera and  process the frames using OpenCV. I connect the cammera with an internet cable but the VideoCapture object was not associated to cam successfully;</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>\ncv::VideoCapture cam(0);            \n\n    if (cam.isOpened() == false) {                               \n        std::cout &lt;&lt; \"error: capWebcam not accessed successfully\\n\\n\";      \n        _getch();                                                          \n        return(0);                                                          \n    }\n</code></pre>\n\n<p>It looks like OpenCv can\u00b4t find it. The internet cable serves and as a power supply for the cammera just mentioning if maybe that's relavant.\nI can use the Spinnaker SDK to retrive the frames but is there someway not to use the sdk and use direcly OpenCV</p>\n"}, {"tags": ["c++", "structure"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1551879303, "post_id": 55024321, "comment_id": 96801722, "body": "<code>ob</code> is an array, not a <code>report</code>; <code>ob[i]</code> is a <code>report</code>, not an array."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1551879337, "post_id": 55024321, "comment_id": 96801738, "body": "How did you declare <code>ob</code>? What was your goal when you wrote a loop? What did you intend  to use <code>i</code> for, besides printing it? These are the sort of questions your rubber duck could ask. That&#39;s one way to troubleshoot, read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> for that and more."}], "answers": [{"tags": [], "owner": {"reputation": 394, "user_id": 6213808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5616a9fc92e130d92d68304fdbf320?s=128&d=identicon&r=PG&f=1", "display_name": "Jonaswg", "link": "https://stackoverflow.com/users/6213808/jonaswg"}, "is_accepted": false, "score": 1, "last_activity_date": 1551879388, "creation_date": 1551879388, "answer_id": 55024420, "question_id": 55024321, "link": "https://stackoverflow.com/questions/55024321/my-compiler-is-giving-the-error-message-that-the-data-member-of-a-structure-cann/55024420#55024420", "title": "My Compiler is giving the error message that the data member of a structure cannot be accessed because the structure variable is non-class type", "body": "<pre><code>for(i=0;i&lt;5;i++)\n        {\n            cout&lt;&lt;\"Student num\"&lt;&lt;\" \"&lt;&lt;i&lt;&lt;endl;\n            cout&lt;&lt;\"Enter P , C , M Marks\"&lt;&lt;endl;\n            cin&gt;&gt;ob[i].p;\n            cin&gt;&gt;ob[i].c;\n            cin&gt;&gt;ob[i].m;\n        }\n</code></pre>\n\n<p>Try accessing the ith element like so.</p>\n"}, {"comments": [{"owner": {"reputation": 347, "user_id": 11152786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52b7bb7de9b651558d3e376d2d1a152?s=128&d=identicon&r=PG&f=1", "display_name": "Elia Geretto", "link": "https://stackoverflow.com/users/11152786/elia-geretto"}, "edited": false, "score": 2, "creation_date": 1551879539, "post_id": 55024424, "comment_id": 96801861, "body": "<code>struct</code> members are <code>public</code> by default, so the first part of the answer should not change anything."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1551880703, "post_id": 55024424, "comment_id": 96802597, "body": "You ARE wrong.   In C++, a struct definition can have <code>public</code>, <code>private</code>, and <code>protected</code> access modifiers.  A class and a struct are functionally identical, except that default access is <code>private</code> for a class, and <code>public</code> for a struct.       Of course, if the struct definition is to be used in both C and C++ code, the access specifiers cannot be present (since <code>public</code>, <code>private</code>, and <code>protected</code> are not part of standard C at all)"}], "tags": [], "owner": {"reputation": 23, "user_id": 9156325, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Le-0wwW93r0/AAAAAAAAAAI/AAAAAAAAACo/9cTo3J6tA_A/photo.jpg?sz=128", "display_name": "Sysmetryx", "link": "https://stackoverflow.com/users/9156325/sysmetryx"}, "is_accepted": false, "score": 0, "last_activity_date": 1551879569, "last_edit_date": 1551879569, "creation_date": 1551879415, "answer_id": 55024424, "question_id": 55024321, "link": "https://stackoverflow.com/questions/55024321/my-compiler-is-giving-the-error-message-that-the-data-member-of-a-structure-cann/55024424#55024424", "title": "My Compiler is giving the error message that the data member of a structure cannot be accessed because the structure variable is non-class type", "body": "<p>I might be wrong, but since this is a struct, and not a class declaration, I think :</p>\n\n<pre><code>struct report\n{\n    public:\n    int p,c,m;\n};\n</code></pre>\n\n<p>should be :</p>\n\n<pre><code>struct report\n{\n    int p,c,m;\n};\n</code></pre>\n\n<p>Then, ob being an array of struct, I think you need to specify an index, in order to access specific field :</p>\n\n<pre><code>cin&gt;&gt;ob.p;\ncin&gt;&gt;ob.c;\ncin&gt;&gt;ob.m;\n</code></pre>\n\n<p>Should probably be :</p>\n\n<pre><code>cin&gt;&gt;ob[i].p;\ncin&gt;&gt;ob[i].c;\ncin&gt;&gt;ob[i].m;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8730477, "user_type": "registered", "profile_image": "https://graph.facebook.com/1916486955344809/picture?type=large", "display_name": "Anik Mukherjee", "link": "https://stackoverflow.com/users/8730477/anik-mukherjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1551879569, "creation_date": 1551879101, "last_edit_date": 1551879188, "question_id": 55024321, "link": "https://stackoverflow.com/questions/55024321/my-compiler-is-giving-the-error-message-that-the-data-member-of-a-structure-cann", "title": "My Compiler is giving the error message that the data member of a structure cannot be accessed because the structure variable is non-class type", "body": "<p>This is a simple piece of code meant to use a separate structure to collect scores of P , C , M and use a function avg() to pass the structure variable to it and find the mean score of each student. I am using an array of 5 structure variables. Here is the code below </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nstruct report\n{\n    public:\n    int p,c,m;\n};\ndouble avg (report ob)\n{\n    double mean = ((ob.p) + (ob.c) + (ob.m))/3;\n    return mean;\n}\n    int main()\n    {\n        report ob[5];\n        int i;\n        double mean;\n        for(i=0;i&lt;5;i++)\n        {\n            cout&lt;&lt;\"Student num\"&lt;&lt;\" \"&lt;&lt;i&lt;&lt;endl;\n            cout&lt;&lt;\"Enter P , C , M Marks\"&lt;&lt;endl;\n            cin&gt;&gt;ob.p;\n            cin&gt;&gt;ob.c;\n            cin&gt;&gt;ob.m;\n        }\n        for(i=0;i&lt;5;i++)\n        {\n            cout&lt;&lt;\"Average marks of Student number\"&lt;&lt;\" \"&lt;&lt;i&lt;&lt;endl;\n            mean = avg(ob[i]);\n            cout&lt;&lt;mean&lt;&lt;endl;\n        }\n    }\n</code></pre>\n\n<p>And the compiler's output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Error : ||=== Build file: \"no target\" in \"no project\" (compiler: unknown) ===|\nC:\\Users\\us\\Documents\\Progs\\ReportStructure.cpp||In function 'int main()':|\nC:\\Users\\us\\Documents\\Progs\\ReportStructure.cpp|22|error: \n&gt; request for member 'p' in 'ob', which is of non-class type 'report\n&gt; [5]'|\n\nC:\\Users\\us\\Documents\\Progs\\ReportStructure.cpp|23|error: \n\n&gt; request for member 'c' in 'ob', which is of non-class type 'report\n&gt; [5]'|\n\nC:\\Users\\us\\Documents\\Progs\\ReportStructure.cpp|24|error: `\n\n&gt; request for member 'm' in 'ob', which is of non-class type 'report\n&gt; [5]'|\n\n`\n||=== Build failed: 3 error(s), 0 warning(s) (0 minute(s), 0 second(s)) ===|\n</code></pre>\n"}, {"tags": ["c++", "cmake", "ctest"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 2, "creation_date": 1551879249, "post_id": 55024003, "comment_id": 96801703, "body": "&quot;Why is this?&quot; - This is by design. If you want to run <code>ctest</code> from the the top-level directory, you need to call <code>enable_testing()</code> from the top-level directory."}, {"owner": {"reputation": 37736, "user_id": 2153571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d5573368e2aa8dd2039de1c545ce2b9c?s=128&d=identicon&r=PG", "display_name": "juzzlin", "link": "https://stackoverflow.com/users/2153571/juzzlin"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1551880967, "post_id": 55024003, "comment_id": 96802760, "body": "Could you turn that into an answer? :)"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1551881413, "post_id": 55024003, "comment_id": 96803021, "body": "I am not sure what should be answered. You have found by yourself, that moving <code>enable_testing()</code> to the top-level directory works. The same is stated in that SO question: <a href=\"https://stackoverflow.com/questions/13550153/no-tests-found-when-using-gtest-with-cmake-ctest/13551858\" title=\"no tests found when using gtest with cmake ctest\">stackoverflow.com/questions/13550153/&hellip;</a>. If question &quot;Why is this?&quot; means &quot;why is it implemented so one need to call <code>enable_testing()</code> from the top-level?&quot;, then one can only guess (unless he is a CMake developer). Dependent on the actual meaning, your question is either a  duplicate or &quot;primary opinion-based&quot;."}, {"owner": {"reputation": 37736, "user_id": 2153571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d5573368e2aa8dd2039de1c545ce2b9c?s=128&d=identicon&r=PG", "display_name": "juzzlin", "link": "https://stackoverflow.com/users/2153571/juzzlin"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1551881736, "post_id": 55024003, "comment_id": 96803210, "body": "I didn&#39;t understand the actual root cause of this behavior or whether it should work otherwise. Thus your first comment perfectly answers the question. You are taking this way too literally."}], "owner": {"reputation": 37736, "user_id": 2153571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d5573368e2aa8dd2039de1c545ce2b9c?s=128&d=identicon&r=PG", "display_name": "juzzlin", "link": "https://stackoverflow.com/users/2153571/juzzlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1551883377, "answer_count": 0, "score": 0, "last_activity_date": 1551878103, "creation_date": 1551878103, "question_id": 55024003, "link": "https://stackoverflow.com/questions/55024003/cmake-not-running-tests-if-tests-are-defined-in-subdirectory", "closed_reason": "Duplicate", "title": "CMake not running tests if tests are defined in subdirectory", "body": "<p>I have a project layout like this:</p>\n\n<pre><code>.\n|_ CMakeLists.txt\n|_ src\n| |_ CMakeLists.txt\n| |_ myLib\n| |_ tests\n|   |_ CMakeLists.txt\n|   |_ add_test(myLibTest my_lib_test)\n</code></pre>\n\n<p>The problem is that if I enable testing in <code>src/CMakelists.txt</code> like this:</p>\n\n<pre><code>enable_testing()\nadd_subdirectory(tests)\n</code></pre>\n\n<p>CMake compiles my tests, but won't run them:</p>\n\n<pre><code>$ ctest\n********************************* \nNo test configuration file found!\n********************************* \nUsage\n\n  ctest [options]\n</code></pre>\n\n<p>Why is this?</p>\n\n<p>If I change the layout like this:</p>\n\n<pre><code>.\n|_ CMakeLists.txt\n|_ src\n| |_ CMakeLists.txt\n| |_ myLib\n|_ tests\n| |_ CMakeLists.txt\n| |_ add_test(myLibTest my_lib_test)\n</code></pre>\n\n<p>..and enable testing in <code>./CMakeLists.txt</code> then I can run the tests, but of course cannot refer to variables defined in <code>src/CMakeLists.txt</code>.</p>\n"}, {"tags": ["c++", "vector", "heap-memory"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1551878417, "post_id": 55023996, "comment_id": 96801195, "body": "<i>&quot;The only advantage I have found so far...&quot;</i> Are you talking about <code>std::vector</code> or <code>new</code>/<code>delete</code>?"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1551878459, "post_id": 55023996, "comment_id": 96801228, "body": "std::vector does dynamic memory allocation.  The point is that you shouldn&#39;t do it directly (or at least do it in a wrapper) rather than not doing it at all"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1551880095, "post_id": 55023996, "comment_id": 96802206, "body": "You have to use dynamic memory allocation whenever your lecturer tells you to. Presumably, the goal is to learn how to manage dynamic memory allocation, or, perhaps, to learn why you shouldn&#39;t do it on your own."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1551880284, "post_id": 55023996, "comment_id": 96802330, "body": "<i>The only advantage I have found so far for new;delete[]; (or at least what I tell my self in order to feel that it is worth using dynamic memory) is using move copy and move assignment.</i> Hate to burst your bubble but with <code>new</code>/<code>delete</code> you have to write your own constructors, which is work.  With a <code>std::vector</code> you don&#39;t have to write anything.  You get a copy/move constructors, copy/move assignment operators, and a destructor provided for you by the compiler, which is much less work."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1551880554, "post_id": 55023996, "comment_id": 96802504, "body": "The very best code is the code you don&#39;t have to write"}, {"owner": {"reputation": 163, "user_id": 10662359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc33da4c6819cb83cb3292947b436da3?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/10662359/james"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1551881052, "post_id": 55023996, "comment_id": 96802819, "body": "@NathanOliver Rubbish.  Using std::vector or not won&#39;t change which functions the compiler will generate for you."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 163, "user_id": 10662359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc33da4c6819cb83cb3292947b436da3?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/10662359/james"}, "edited": false, "score": 2, "creation_date": 1551881157, "post_id": 55023996, "comment_id": 96802879, "body": "@James But it will change what correct constructors you get.  The defaults aren&#39;t acceptable if you&#39;re using <code>new</code>/<code>delete</code>"}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1551878688, "post_id": 55024122, "comment_id": 96801355, "body": "<i>&quot;lecturer most likely forces you so you get an idea of how things work under the hood&quot;</i> It&#39;s not a bad thing by itself, but most of the time they don&#39;t even bother to tell studends about the rule of three. D:"}, {"owner": {"reputation": 141, "user_id": 8877655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152fd8d8161ce882b5f05ab0a934faea?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Duque", "link": "https://stackoverflow.com/users/8877655/daniel-duque"}, "edited": false, "score": 0, "creation_date": 1551879430, "post_id": 55024122, "comment_id": 96801788, "body": "Could you provide a basic example for when a vector won&#39;t fit all my criteria and it would be better to directly dynamic allocate memory?"}, {"owner": {"reputation": 394, "user_id": 6213808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5616a9fc92e130d92d68304fdbf320?s=128&d=identicon&r=PG&f=1", "display_name": "Jonaswg", "link": "https://stackoverflow.com/users/6213808/jonaswg"}, "reply_to_user": {"reputation": 141, "user_id": 8877655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152fd8d8161ce882b5f05ab0a934faea?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Duque", "link": "https://stackoverflow.com/users/8877655/daniel-duque"}, "edited": false, "score": 1, "creation_date": 1551879495, "post_id": 55024122, "comment_id": 96801839, "body": "@DanielDuque I was here pointing towards using maps, trees or other structures that may be more efficient for certain operations.  For a dynamic array I would always use a vector over manual dynamic memory allocation"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 141, "user_id": 8877655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152fd8d8161ce882b5f05ab0a934faea?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Duque", "link": "https://stackoverflow.com/users/8877655/daniel-duque"}, "edited": false, "score": 0, "creation_date": 1551879516, "post_id": 55024122, "comment_id": 96801849, "body": "@DanielDuque cases requiring extremely strict allignment standards for extremely high performance code."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1551880256, "post_id": 55024122, "comment_id": 96802314, "body": "&quot;and in those cases it could be better to use a different data structure, in which case look at the other <code>std</code> containers, <code>boost</code> containers, and only if none of those fit your needs implement your own data structure&quot;"}], "tags": [], "owner": {"reputation": 394, "user_id": 6213808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5616a9fc92e130d92d68304fdbf320?s=128&d=identicon&r=PG&f=1", "display_name": "Jonaswg", "link": "https://stackoverflow.com/users/6213808/jonaswg"}, "is_accepted": false, "score": 1, "last_activity_date": 1551878461, "creation_date": 1551878461, "answer_id": 55024122, "question_id": 55023996, "link": "https://stackoverflow.com/questions/55023996/dynamic-memory-allocation-vs-stdvector-for-class-private-member-c/55024122#55024122", "title": "Dynamic memory allocation vs std::vector for class private member C++", "body": "<p>The lecturer most likely forces you so you get an idea of how things work under the hood. The std::vector class as you mentioned handles all the dynamic memory management for you, such that you do not need to write all the code to handle this yourself. It is easy, especially as a beginner to mess up while handling dynamic memory and create a leak/forget to deallocate something. </p>\n\n<p>A vector is however not the solution for every problem, and you may find cases where it does not fit all your critera - and in those cases it could be better to implement your own data structure.</p>\n"}, {"comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1551879176, "post_id": 55024134, "comment_id": 96801664, "body": "Not quite, my nitpick is that <code>std::vector</code> uses an <a href=\"https://en.cppreference.com/w/cpp/named_req/Allocator\" rel=\"nofollow noreferrer\">allocator</a> to allocate and initialize the memory. This is an important distinction because allocators can be customized per instance <code>operator new</code> in this case would be global."}, {"owner": {"reputation": 141, "user_id": 8877655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152fd8d8161ce882b5f05ab0a934faea?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Duque", "link": "https://stackoverflow.com/users/8877655/daniel-duque"}, "edited": false, "score": 0, "creation_date": 1551879645, "post_id": 55024134, "comment_id": 96801930, "body": "&quot;to never do memory management by hand&quot; - That is an even stronger statement than &quot;avoid it as much as you can&quot;. Are you suggesting that it is possible to <i>never need</i>  <code>new;delete[]</code>?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1551879652, "post_id": 55024134, "comment_id": 96801935, "body": "@Mgetz <code>std::vector&lt;T&gt;</code> uses <code>std::allocator&lt;T&gt;</code> which uses <code>operator new</code>, which is good default behaviour."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 141, "user_id": 8877655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152fd8d8161ce882b5f05ab0a934faea?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Duque", "link": "https://stackoverflow.com/users/8877655/daniel-duque"}, "edited": false, "score": 0, "creation_date": 1551879718, "post_id": 55024134, "comment_id": 96801988, "body": "@DanielDuque Yes. Not only possible but likely."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1551879741, "post_id": 55024134, "comment_id": 96802008, "body": "@Caleth by default yes, but that is implementation defined. It is not required to use <code>operator new</code>"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1551879966, "post_id": 55024134, "comment_id": 96802133, "body": "@Mgetz &quot;Remarks: the storage is obtained by calling \u200b<code>::\u200boperator new</code>, but it is unspecified when or how often this function is called.&quot; <a href=\"http://eel.is/c++draft/allocator.members#3\" rel=\"nofollow noreferrer\"><code>[allocator.members&#47;3]</code></a>"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1551880011, "post_id": 55024134, "comment_id": 96802162, "body": "@Caleth and your point is? <code>std::vector</code> still uses an allocator."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1551880114, "post_id": 55024134, "comment_id": 96802217, "body": "@Mgetz my point is that <code>std::vector&lt;T&gt;</code> uses <code>new</code>, <i>via</i> it&#39;s allocator, and only at the point where you do care do you <i>have to care</i> there is an allocator."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1551880241, "post_id": 55024134, "comment_id": 96802298, "body": "@Caleth I think you missed my point then. Which was that <code>std::vector</code> is in no way hard tied to <code>operator new</code> and to state that is incorrect."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1551880410, "post_id": 55024134, "comment_id": 96802399, "body": "<code>std::vector</code> only names a type post C++17, at which point the deduction guide infers <code>std::allocator</code>, so in a real sense, <i>it is</i>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1551880843, "post_id": 55024134, "comment_id": 96802693, "body": "@Mgetz For any default use it will call <code>new</code>: <a href=\"https://timsong-cpp.github.io/cppwp/default.allocator#allocator.members-3\" rel=\"nofollow noreferrer\">timsong-cpp.github.io/cppwp/&hellip;</a>  The Answer&#39;s comment might not be 100% accurate but it will cover the majority of cases."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1551880986, "post_id": 55024134, "comment_id": 96802772, "body": "@NathanOliver @caleth you both completely missed what I was getting at. The fact it will use <code>operator new</code> by default is irrelevant pedantry. The point is that <code>std::vector</code> is not hard tied to <code>operator new</code>. I&#39;m not sure what I&#39;m failing to communicate here. This will be my last post as I&#39;m getting quite frustrated at how irrelevant this has gotten. My post was a nitpick, I don&#39;t consider the respondent&#39;s post fundamentally flawed for the reasons you&#39;ve pointed out. I was just supplying supplemental information."}], "tags": [], "owner": {"reputation": 131, "user_id": 5606132, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CnBfjJZEMSo/AAAAAAAAAAI/AAAAAAAAADI/OqlYiylouRA/photo.jpg?sz=128", "display_name": "Eric Stavarache", "link": "https://stackoverflow.com/users/5606132/eric-stavarache"}, "is_accepted": false, "score": 5, "last_activity_date": 1551878505, "creation_date": 1551878505, "answer_id": 55024134, "question_id": 55023996, "link": "https://stackoverflow.com/questions/55023996/dynamic-memory-allocation-vs-stdvector-for-class-private-member-c/55024134#55024134", "title": "Dynamic memory allocation vs std::vector for class private member C++", "body": "<p><code>std::vector</code> also does dynamic memory allocation behind the scenes (by using the <code>new</code> operator).\nCopy and move assignment are also defined for <code>std::vector</code>, as you can see <a href=\"https://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"noreferrer\">here</a>, so there is no speed gained if you do it by hand.</p>\n\n<p>Probably your question refers to when should you <em>manually</em> allocate memory (by explicitly using <code>new</code> and <code>delete</code>), as opposed to relying on another class (such as vector) to do it for you.</p>\n\n<p>The \"Modern C++\" answer to this question is to <em>never</em> do memory management by hand.\nIf an <code>std::vector</code> does the job, then use that instead. If you need to allocate a single item, then use <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"noreferrer\"><code>std::unique_ptr</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 3, "last_activity_date": 1551882098, "creation_date": 1551882098, "answer_id": 55025305, "question_id": 55023996, "link": "https://stackoverflow.com/questions/55023996/dynamic-memory-allocation-vs-stdvector-for-class-private-member-c/55025305#55025305", "title": "Dynamic memory allocation vs std::vector for class private member C++", "body": "<p>There are situations where you <em>may</em> need to implement a custom container (because neither <code>std::vector</code> nor any of the other standard library containers fit your purpose), and in those cases it <em>may</em> make sense to do the memory management manually.</p>\n\n<p>However, unless you are providing the low-level core components in some industrial grade code base and have very specific goals, doing manual memory management is probably still not necessary here either.</p>\n\n<p>I agree with the strict rules of your lecturer insofar that it pays to understand what happens behind the scenes. You rarely, if ever, should <em>have to</em> use manual memory management, but it helps to understand how <code>std::unique_ptr</code>/<code>std::vector</code> (<em>have to</em>) do it for you in order to understand why C++ was built the way it is. Teaching C++ in a way that is useful in the real world would eventually allow/force you to use standard library containers though, because there is (as you correctly noticed) essentially no reason to ever write a <code>delete</code>.</p>\n"}], "owner": {"reputation": 141, "user_id": 8877655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/152fd8d8161ce882b5f05ab0a934faea?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Duque", "link": "https://stackoverflow.com/users/8877655/daniel-duque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 55025305, "answer_count": 3, "score": 0, "last_activity_date": 1551882098, "creation_date": 1551878090, "last_edit_date": 1551879036, "question_id": 55023996, "link": "https://stackoverflow.com/questions/55023996/dynamic-memory-allocation-vs-stdvector-for-class-private-member-c", "title": "Dynamic memory allocation vs std::vector for class private member C++", "body": "<p>While learning c++ I usually (very often) encounter the following advice: \"Avoid dynamic memory allocation as <strong>much as you can</strong>; use std::vectors instead as they handle this for you\".</p>\n\n<p>So my question is: When do I <strong>have to</strong> use dynamic memory allocation? All the exercises I have done (I am just a beginner) are much easier using <code>std::vector</code>; nevertheless my lecturer forces us to use dynamic memory for simple classes (like matrices, geometric vectors, etc.) and <code>delete[]</code> in the destructor.</p>\n\n<p>The only advantage I have found so far for <code>new;delete[];</code> (or at least what I tell my self in order to feel that it is worth using dynamic memory) is using move copy and move assignment.</p>\n"}, {"tags": ["c++", "unit-testing", "codelite", "unittest++"], "comments": [{"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 0, "creation_date": 1551878878, "post_id": 55023862, "comment_id": 96801478, "body": "Have you verified the files actually exist?  I don&#39;t use ubuntu (or any apt-based distro), but they&#39;re probably under <code>&#47;usr&#47;include</code>.  Also, please include the full compilation line (it&#39;s probably above the error you already provided)."}, {"owner": {"reputation": 4951, "user_id": 3759368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59gwP.png?s=128&g=1", "display_name": "callmebob", "link": "https://stackoverflow.com/users/3759368/callmebob"}, "reply_to_user": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 0, "creation_date": 1551879479, "post_id": 55023862, "comment_id": 96801821, "body": "Build log added. Also on top of my post there is output &quot;ls -la /usr/include&quot; where you can see UnitTest++. It&#39;s with capitals and doesn&#39;t have .h at the end. I tired including with no .h with the same results though."}, {"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 0, "creation_date": 1551879739, "post_id": 55023862, "comment_id": 96802004, "body": "Based on your <code>ls</code> output, my hunch is that the directory name in your code is incorrect.  Try changing the first line to <code>#include &lt;UnitTest++&#47;UnitTest.h&gt;</code> (you may want to verify the contents of <code>&#47;usr&#47;include&#47;UnitTest++</code> first)."}, {"owner": {"reputation": 4951, "user_id": 3759368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59gwP.png?s=128&g=1", "display_name": "callmebob", "link": "https://stackoverflow.com/users/3759368/callmebob"}, "reply_to_user": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 0, "creation_date": 1551880503, "post_id": 55023862, "comment_id": 96802474, "body": "@StephenNewell: you were correct. I had to change it to &lt;UnitTest++/UnitTest++.h&gt; at the end. From here, I was able to build, but now on CTRL+F5 I was getting nothing at all. Seems like I have to do CTRL+F9 (Build and run) to get results - not sure why, but it works. If you want add an answer and I will accept it as you pointed me to the correct direction."}, {"owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "edited": false, "score": 0, "creation_date": 1551882254, "post_id": 55023862, "comment_id": 96803533, "body": "Glad it worked!"}], "answers": [{"comments": [{"owner": {"reputation": 4951, "user_id": 3759368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59gwP.png?s=128&g=1", "display_name": "callmebob", "link": "https://stackoverflow.com/users/3759368/callmebob"}, "edited": false, "score": 0, "creation_date": 1551883347, "post_id": 55025361, "comment_id": 96804231, "body": "Yes, that&#39;s a bit weird with the lowercase. My initial code was also auto-generated with lowercase, like in my example. Probably best if I report a bug."}], "tags": [], "owner": {"reputation": 6021, "user_id": 206404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/497437666710e8b13ee168bd7b62fcba?s=128&d=identicon&r=PG", "display_name": "Stephen Newell", "link": "https://stackoverflow.com/users/206404/stephen-newell"}, "is_accepted": true, "score": 1, "last_activity_date": 1551882247, "creation_date": 1551882247, "answer_id": 55025361, "question_id": 55023862, "link": "https://stackoverflow.com/questions/55023862/codelite-unittest-unittest-h-no-such-file-or-directory/55025361#55025361", "title": "codelite unittest++/UnitTest++.h: no such file or directory", "body": "<p>Based on your <code>ls</code> output, it looks like you should change your first line to this:</p>\n\n<pre><code>#include &lt;UnitTest++/UnitTest++.h&gt;\n</code></pre>\n\n<p>I'm not sure why the answer you linked to worked with a lowercase directory name; the examples in the project documentation all use the mixed-case directory name.</p>\n"}], "owner": {"reputation": 4951, "user_id": 3759368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/59gwP.png?s=128&g=1", "display_name": "callmebob", "link": "https://stackoverflow.com/users/3759368/callmebob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "accepted_answer_id": 55025361, "answer_count": 1, "score": 0, "last_activity_date": 1551882247, "creation_date": 1551877672, "last_edit_date": 1551879338, "question_id": 55023862, "link": "https://stackoverflow.com/questions/55023862/codelite-unittest-unittest-h-no-such-file-or-directory", "title": "codelite unittest++/UnitTest++.h: no such file or directory", "body": "<p>I am trying to do unit testing with C++/Codelite. I have UnitTest++ plugin installed from codelite-plugins package (Ubuntu 18.04). I can also see this:</p>\n\n<pre><code>$ ls -la /usr/include | grep Unit\ndrwxr-xr-x  3 root root   4096 Mar  2 11:47 UnitTest++\n\n$ sudo dpkg -l | grep unittest++\nii  libunittest++-dev         2.0.0-2      amd64        unit testing framework for c++, static library and headers\nii  libunittest++2:amd64      2.0.0-2      amd64        unit testing framework for c++, runtime library\n</code></pre>\n\n<p>So I create a test project in Codelite and I add this: </p>\n\n<pre><code>#include &lt;unittest++/UnitTest++.h&gt; // This line and main are auto-created\n\nTEST(SanityTest) \n{\n    CHECK_EQUAL(1, 1);\n}\n\nint main(int argc, char **argv)\n{\n    return UnitTest::RunAllTests();\n}\n</code></pre>\n\n<p>Now I would expect test results after I press CTRL+F5. But when I do, I only get a popup window saying there are no tests: </p>\n\n<p><a href=\"https://i.stack.imgur.com/u7WU2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/u7WU2.png\" alt=\"enter image description here\"></a></p>\n\n<p>I also noticed that when I go to <strong>Build > Build Project</strong> I get an error message:</p>\n\n<blockquote>\n  <p>fatal error: unittest++/UnitTest++.h: No such file or directory</p>\n</blockquote>\n\n<p>I also found <a href=\"https://stackoverflow.com/questions/42657198/linker-errors-with-codelite-unittest-and-g-on-linux\">THIS ANSWER</a> and tried different variation of console commands as per answer/comments there, but I always get the same no such file or directory error. </p>\n\n<p>Any idea what I am missing? </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Build log as per Stephen's Newell request:</p>\n\n<pre><code>/bin/sh -c '/usr/bin/make -j8 -e -f  Makefile'\n----------Building project:[ Test - Debug ]----------\nmake[1]: Entering directory '/home/callmebob/Documents/workspace-codelite/cpp/Test'\n/usr/bin/g++  -c  \"/home/callmebob/Documents/workspace-codelite/cpp/Test/main.cpp\" -g  -o Debug/main.cpp.o -I. -I/usr/include/unittest++\n/home/callmebob/Documents/workspace-codelite/cpp/Test/main.cpp:1:10: fatal error: unittest++/UnitTest++.h: No such file or directory\n #include \"unittest++/UnitTest++.h\"\n          ^~~~~~~~~~~~~~~~~~~~~~~~~\ncompilation terminated.\nTest.mk:95: recipe for target 'Debug/main.cpp.o' failed\nmake[1]: *** [Debug/main.cpp.o] Error 1\nmake[1]: Leaving directory '/home/callmebob/Documents/workspace-codelite/cpp/Test'\nMakefile:4: recipe for target 'All' failed\nmake: *** [All] Error 2\n====2 errors, 0 warnings====\n</code></pre>\n\n<p>Also if I right-click the project, go to <strong>Settings > Compiler</strong>, I can see: </p>\n\n<blockquote>\n  <p>Included Paths = /usr/include/unittest++</p>\n</blockquote>\n"}, {"tags": ["c++", "encryption"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1551878138, "post_id": 55023731, "comment_id": 96801018, "body": "There is more than one problem.  First you&#39;ll have to fix the constructor, using strlen() on an uninitialized char[] is UB and causes wide-spread memory corruption.  Use sizeof.  Next you&#39;ll have to make letters_cipher one bigger so you can index % 26.  Next you&#39;ll need to google &quot;c++ rule of three&quot;."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1551880378, "post_id": 55023731, "comment_id": 96802378, "body": "Your added messages are all normal and expected. Unless you want to debug inside system dlls because you think you have found a bug in their implementation or you really want to debug an interaction between your application and the OS the PDB files for these are unnecessary. I have similar warnings for every program I debug."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 7190764, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211580721620741/picture?type=large", "display_name": "Saad Mehdaoui", "link": "https://stackoverflow.com/users/7190764/saad-mehdaoui"}, "edited": false, "score": 0, "creation_date": 1551878636, "post_id": 55023857, "comment_id": 96801320, "body": "Thank you for your intervention, I am still trying to understand it all around, so for the letters_cipher would sizing it up by one solve the issue of the max allowed index. But should I change the type of it?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 41, "user_id": 7190764, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211580721620741/picture?type=large", "display_name": "Saad Mehdaoui", "link": "https://stackoverflow.com/users/7190764/saad-mehdaoui"}, "edited": false, "score": 0, "creation_date": 1551878778, "post_id": 55023857, "comment_id": 96801410, "body": "@SaadMehdaoui all depends on how you want to encrypt, but it you just want to change the order of the characters a, b ... it needs to have the same size as letters"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 41, "user_id": 7190764, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211580721620741/picture?type=large", "display_name": "Saad Mehdaoui", "link": "https://stackoverflow.com/users/7190764/saad-mehdaoui"}, "edited": false, "score": 1, "creation_date": 1551879065, "post_id": 55023857, "comment_id": 96801595, "body": "@SaadMehdaoui do you understand or do you need the code to fix all ? ;-)"}, {"owner": {"reputation": 41, "user_id": 7190764, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211580721620741/picture?type=large", "display_name": "Saad Mehdaoui", "link": "https://stackoverflow.com/users/7190764/saad-mehdaoui"}, "edited": false, "score": 0, "creation_date": 1551879187, "post_id": 55023857, "comment_id": 96801674, "body": "I am struggling with it honestly, I just got back to C++ after 2 years break therefor would really appreciate a fixed code"}, {"owner": {"reputation": 41, "user_id": 7190764, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211580721620741/picture?type=large", "display_name": "Saad Mehdaoui", "link": "https://stackoverflow.com/users/7190764/saad-mehdaoui"}, "edited": false, "score": 0, "creation_date": 1551881106, "post_id": 55023857, "comment_id": 96802855, "body": "binary &#39;&gt;&gt;&#39;: no operator found which takes a right-hand operand of type &#39;std::string&#39; (or there is no acceptable conversion)\tThis is what I get from your code  on this line;  return (std::cin &gt;&gt; str); // to indicates EOF in case"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 41, "user_id": 7190764, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211580721620741/picture?type=large", "display_name": "Saad Mehdaoui", "link": "https://stackoverflow.com/users/7190764/saad-mehdaoui"}, "edited": false, "score": 0, "creation_date": 1551881560, "post_id": 55023857, "comment_id": 96803102, "body": "@SaadMehdaoui very strange, may be replace by <code>void Getstr() { std::cout &lt;&lt; &quot;Enter string : &quot;; std::getline(std::cin, str); }</code> to also be able to read a string containing spaces"}, {"owner": {"reputation": 41, "user_id": 7190764, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211580721620741/picture?type=large", "display_name": "Saad Mehdaoui", "link": "https://stackoverflow.com/users/7190764/saad-mehdaoui"}, "edited": false, "score": 0, "creation_date": 1551882040, "post_id": 55023857, "comment_id": 96803400, "body": "I fixed it, it was a matter of changing the lib to string instead of string.h, however my code is supposed to give you; input: abc , output: bcd not a bunch of random letter hah, Guess I failed at that one."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 41, "user_id": 7190764, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211580721620741/picture?type=large", "display_name": "Saad Mehdaoui", "link": "https://stackoverflow.com/users/7190764/saad-mehdaoui"}, "edited": false, "score": 0, "creation_date": 1551882216, "post_id": 55023857, "comment_id": 96803507, "body": "@SaadMehdaoui may be I also wronly transformed your code ? If you consider I anyway answer to your question don&#39;t forget to accept my answer to mark the question closed ;-)"}, {"owner": {"reputation": 41, "user_id": 7190764, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211580721620741/picture?type=large", "display_name": "Saad Mehdaoui", "link": "https://stackoverflow.com/users/7190764/saad-mehdaoui"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1551882304, "post_id": 55023857, "comment_id": 96803560, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/189527/discussion-between-saad-mehdaoui-and-bruno\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 4, "last_activity_date": 1551880345, "last_edit_date": 1551880345, "creation_date": 1551877637, "answer_id": 55023857, "question_id": 55023731, "link": "https://stackoverflow.com/questions/55023731/unhandled-exception-thrown-read-access-violation-this-string-was-0x1c6f112/55023857#55023857", "title": "Unhandled exception thrown: read access violation. this-&gt;String was 0x1C6F112", "body": "<p>in</p>\n\n<pre><code>    for (i = 1; i &lt;= 26; i++) { // Run 26 times (1 for each letter)\n        letters_cipher[i] = letters[(i + (i + 1)) % 26];\n</code></pre>\n\n<p>you write 2 indexes out of <code>letters_cipher</code> being <code>char letters_cipher[25];</code>, the behavior is undefined</p>\n\n<p>and in</p>\n\n<pre><code>       for (k = 0; k &lt;= 25; k++) {\n            if (String[i] == letters[k]) {\n                cout &lt;&lt; letters_cipher[k];\n            }\n</code></pre>\n\n<p>you read one index out of <code>letters_cipher</code>, the behavior is again undefined</p>\n\n<p>The max allowed index in <code>letters_cipher</code> is 24</p>\n\n<p>Note also that in</p>\n\n<pre><code>   for (unsigned int i = 0; i &lt; strlen(letters_cipher); i++) {\n        cout &lt;&lt; letters_cipher[i];\n    }\n</code></pre>\n\n<p><code>strlen(letters_cipher)</code> will not works too because nowhere in your code where you enter the null ending character in it, so <em>strlen</em> will also go out of the initialized part of <code>letters_cipher</code> and may be again out of it.</p>\n\n<p>You also have a problem in :</p>\n\n<pre><code>    for (unsigned int i = 0; i &lt; strlen(String); i++) {\n        String[i] = '\\0';\n    }\n</code></pre>\n\n<p>because you do <code>strlen(String)</code> the first loop without having initialized <em>String</em>, replace it by 500 (or better use a std::string)</p>\n\n<blockquote>\n  <p>Any idea how I can fix this?</p>\n</blockquote>\n\n<p>In a general way do not use number like 26 or 25 in your loops, use <code>sizeof</code>, and you can also use <em>std::vector</em> rather than (C) arrays. When the contents is constant do not size by yourself, so for <code>letters</code> just do :</p>\n\n<pre><code>static const char letters_cipher[] = {\n   'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l',\n   'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x',\n   'y', 'z'\n};\n</code></pre>\n\n<p>Probably <code>letters_cipher</code> must have the same size as <code>letters</code>, and correct the set because the for starts at 1 rather than 0</p>\n\n<p>Additional remarks</p>\n\n<ul>\n<li>the array <code>letters</code> is useless, it only contains the letters a..z, so <code>letters[i]</code> is just <code>'a' + i</code></li>\n<li>you do both <code>using namespace std;</code> and <code>std::xxx</code>, choose one of them (lot of people will say you to not do <code>using namespace std;</code>)</li>\n</ul>\n\n<hr>\n\n<p>A proposal if I well understand your enscript :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass Encrypt {\n  private:\n    std::string str;\n    char letters_cipher['z' - 'a' + 1];\n\n    inline char letter(size_t i) { return 'a' + i; } // to help\n  public:\n    Encrypt() {} // default definition is useless in fact\n    ~Encrypt() {} // default definition is useless in fact\n\n    bool Getstr() {\n      std::cout &lt;&lt; \"Enter str : \";\n     return (std::cin &gt;&gt; str); // to indicates EOF in case\n    }\n\n    void encrypt() {\n      for (size_t i = 1; i &lt;= sizeof(letters_cipher); i++) { // Run 26 times (1 for each letter)\n        letters_cipher[i - 1] = letter((i + (i + 1)) % 26);\n        std::cout &lt;&lt; letters_cipher[i - 1] &lt;&lt; std::endl;\n      }\n      for (size_t i = 0; i &lt; str.length(); i++) { // individual characters of string x can be referenced by x[0] etc\n        for (size_t k = 0; k &lt; sizeof(letters_cipher); k++) {\n          if (str[i] == letter(k)) {\n            std::cout &lt;&lt; letters_cipher[k];\n          }\n        }\n      }\n      std::cout &lt;&lt; std::endl;\n    }\n\n    void Print() {\n      for (size_t i = 0; i &lt; sizeof(letters_cipher); i++) {\n        std::cout &lt;&lt; letters_cipher[i];\n      }\n      std::cout &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n  Encrypt e;\n\n  e.Getstr();\n  e.encrypt();\n  e.Print();\n}\n</code></pre>\n\n<p>Compilation and execution :</p>\n\n<pre><code>/tmp % g++ -pedantic -Wextra e.cc\n/tmp % ./a.out\nEnter str : azerty\nd\nf\nh\nj\nl\nn\np\nr\nt\nv\nx\nz\nb\nd\nf\nh\nj\nl\nn\np\nr\nt\nv\nx\nz\nb\ndbllpz\ndfhjlnprtvxzbdfhjlnprtvxzb\n</code></pre>\n\n<p>Execution under <em>valgrind</em> :</p>\n\n<pre><code>/tmp % valgrind ./a.out\n==29157== Memcheck, a memory error detector\n==29157== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.\n==29157== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info\n==29157== Command: ./a.out\n==29157== \nEnter str : azerty\nd\nf\nh\nj\nl\nn\np\nr\nt\nv\nx\nz\nb\nd\nf\nh\nj\nl\nn\np\nr\nt\nv\nx\nz\nb\ndbllpz\ndfhjlnprtvxzbdfhjlnprtvxzb\n==29157== \n==29157== HEAP SUMMARY:\n==29157==     in use at exit: 0 bytes in 0 blocks\n==29157==   total heap usage: 4 allocs, 4 frees, 115 bytes allocated\n==29157== \n==29157== All heap blocks were freed -- no leaks are possible\n==29157== \n==29157== For counts of detected and suppressed errors, rerun with: -v\n==29157== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 6 from 6)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 7190764, "user_type": "registered", "profile_image": "https://graph.facebook.com/10211580721620741/picture?type=large", "display_name": "Saad Mehdaoui", "link": "https://stackoverflow.com/users/7190764/saad-mehdaoui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 55023857, "answer_count": 1, "score": 0, "last_activity_date": 1551880345, "creation_date": 1551877226, "last_edit_date": 1551879054, "question_id": 55023731, "link": "https://stackoverflow.com/questions/55023731/unhandled-exception-thrown-read-access-violation-this-string-was-0x1c6f112", "title": "Unhandled exception thrown: read access violation. this-&gt;String was 0x1C6F112", "body": "<p>So I am writing a code that encrypts and input by switching the letter to the one after it, using the formula ai = letter ( (position(ai )+ position(ai+1) ) mod k )\nwhere k is the number of letters in the alphabet.</p>\n\n<p>Now here is my code;</p>\n\n<pre><code>using namespace std;\n\nclass Encrypt {\nprivate:\n    char letters[27];\n    char *String = new char[500];\n    char letters_cipher[25];\n    unsigned int i, k;\npublic:\n    Encrypt() :letters{ 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z' } {\n\n        for (unsigned int i = 0; i &lt; strlen(String); i++) {\n            String[i] = '\\0';\n        }\n    }\n    ~Encrypt() {\n        delete[] String;\n    }\n    void GetString() {\n        cout &lt;&lt; \"Enter String : \";\n        std::cin &gt;&gt; String;\n    }\n\n    void encrypt() {\n        for (i = 1; i &lt;= 26; i++) { // Run 26 times (1 for each letter)\n            letters_cipher[i] = letters[(i + (i + 1)) % 26];\n            cout &lt;&lt; letters_cipher[i] &lt;&lt; endl;\n        }\n        for (i = 0; i &lt;= (strlen(String) - 1); i++) { // individual characters of string x can be referenced by x[0] etc\n            for (k = 0; k &lt;= 25; k++) {\n                if (String[i] == letters[k]) {\n                    cout &lt;&lt; letters_cipher[k];\n                }\n            }\n        }\n    }\n\n    void Print() {\n        for (unsigned int i = 0; i &lt; strlen(letters_cipher); i++) {\n            cout &lt;&lt; letters_cipher[i];\n        }\n    }\n\n};\n</code></pre>\n\n<p>I get the following error  </p>\n\n<blockquote>\n  <p>Exception thrown: read access violation.\n  this->String was 0x128F112.</p>\n</blockquote>\n\n<p>for the line:</p>\n\n<blockquote>\n  <p>if (String[i] == letters[k])</p>\n</blockquote>\n\n<p>Any idea how I can fix this?</p>\n\n<p>EDIT:</p>\n\n<p>I have now made some edits on the code and it looks like the following;</p>\n\n<pre><code>class Encrypt {\nprivate:\n    char letters[27];\n    char *String = new char[500];\n    char letters_cipher[27];\n    unsigned int i, k;\npublic:\n    Encrypt() :letters{ 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z' } {\n\n        for (unsigned int i = 0; i &lt; 500; i++) {\n            String[i] = '\\0';\n        }\n    }\n    ~Encrypt() {\n        delete[] String;\n    }\n    void GetString() {\n        cout &lt;&lt; \"Enter String : \";\n        std::cin &gt;&gt; String;\n    }\n\n    void encrypt() {\n        for (i = 1; i &lt;= 26; i++) { // Run 26 times (1 for each letter)\n            letters_cipher[i] = letters[(i + (i + 1)) % 26];\n            cout &lt;&lt; letters_cipher[i] &lt;&lt; endl;\n        }\n        for (i = 0; i &lt;= (sizeof(String) - 1); i++) { // individual characters of string x can be referenced by x[0] etc\n            for (k = 0; k &lt;= 25; k++) {\n                if (String[i] == letters[k]) {\n                    cout &lt;&lt; letters_cipher[k];\n                }\n            }\n        }\n    }\n\n    void Print() {\n        for (unsigned int i = 0; i &lt; sizeof(letters_cipher); i++) {\n            cout &lt;&lt; letters_cipher[i];\n        }\n    }\n\n};\n</code></pre>\n\n<p>The error is no longer there, the program runs but closes with an error;</p>\n\n<blockquote>\n  <p>'ConsoleApplication5.exe' (Win32): Loaded 'C:\\Windows\\SysWOW64\\kernel.appcore.dll'. Cannot find or open the PDB\n  file. 'ConsoleApplication5.exe' (Win32): Loaded\n  'C:\\Windows\\SysWOW64\\msvcrt.dll'. Cannot find or open the PDB file.\n  'ConsoleApplication5.exe' (Win32): Loaded\n  'C:\\Windows\\SysWOW64\\rpcrt4.dll'. Cannot find or open the PDB file.\n  'ConsoleApplication5.exe' (Win32): Loaded\n  'C:\\Windows\\SysWOW64\\sspicli.dll'. Cannot find or open the PDB file.\n  'ConsoleApplication5.exe' (Win32): Loaded\n  'C:\\Windows\\SysWOW64\\cryptbase.dll'. Cannot find or open the PDB file.\n  'ConsoleApplication5.exe' (Win32): Loaded\n  'C:\\Windows\\SysWOW64\\bcryptprimitives.dll'. Cannot find or open the\n  PDB file. 'ConsoleApplication5.exe' (Win32): Loaded\n  'C:\\Windows\\SysWOW64\\sechost.dll'. Cannot find or open the PDB file.\n  The program '[20764] ConsoleApplication5.exe' has exited with code 0\n  (0x0).</p>\n</blockquote>\n"}, {"tags": ["c++", "glfw", "mingw-w64"], "comments": [{"owner": {"reputation": 2357, "user_id": 4074081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emDh4.png?s=128&g=1", "display_name": "dewaffled", "link": "https://stackoverflow.com/users/4074081/dewaffled"}, "edited": false, "score": 0, "creation_date": 1551879936, "post_id": 55023589, "comment_id": 96802116, "body": "<a href=\"http://lampwww.epfl.ch/~fsalvi/docs/gcc/www.network-theory.co.uk/docs/gccintro/gccintro_14.html\" rel=\"nofollow noreferrer\">Wrong order</a> in command line? (also, long description with discussion in comments on SO - <a href=\"https://stackoverflow.com/a/409470/4074081\">stackoverflow.com/a/409470/4074081</a>)"}, {"owner": {"reputation": 785, "user_id": 7616532, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/478fe2e610e2e1dd9c9cec94d9ed3f60?s=128&d=identicon&r=PG", "display_name": "Kotauskas", "link": "https://stackoverflow.com/users/7616532/kotauskas"}, "reply_to_user": {"reputation": 2357, "user_id": 4074081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emDh4.png?s=128&g=1", "display_name": "dewaffled", "link": "https://stackoverflow.com/users/4074081/dewaffled"}, "edited": false, "score": 0, "creation_date": 1551880628, "post_id": 55023589, "comment_id": 96802548, "body": "@dewaffled So I should put the GLFW library at the end of the ordering? And why does <code>ld</code> report undefined references to GLFW if GLFW&#39;s references to its dependencies are undefined instead?"}, {"owner": {"reputation": 785, "user_id": 7616532, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/478fe2e610e2e1dd9c9cec94d9ed3f60?s=128&d=identicon&r=PG", "display_name": "Kotauskas", "link": "https://stackoverflow.com/users/7616532/kotauskas"}, "reply_to_user": {"reputation": 2357, "user_id": 4074081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emDh4.png?s=128&g=1", "display_name": "dewaffled", "link": "https://stackoverflow.com/users/4074081/dewaffled"}, "edited": false, "score": 0, "creation_date": 1551894453, "post_id": 55023589, "comment_id": 96811218, "body": "@dewaffled I&#39;ve edited the question, providing research and a log"}], "answers": [{"tags": [], "owner": {"reputation": 785, "user_id": 7616532, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/478fe2e610e2e1dd9c9cec94d9ed3f60?s=128&d=identicon&r=PG", "display_name": "Kotauskas", "link": "https://stackoverflow.com/users/7616532/kotauskas"}, "is_accepted": false, "score": 0, "last_activity_date": 1551894818, "creation_date": 1551894818, "answer_id": 55029380, "question_id": 55023589, "link": "https://stackoverflow.com/questions/55023589/cannot-link-against-glfw-3-with-mingw-w64/55029380#55029380", "title": "Cannot link against GLFW 3 with MinGW-w64", "body": "<p>I fixed the problem by putting <code>%SOURCES%</code> before <code>%LIBS%</code> in the <code>g++</code> invocation, thanks to <a href=\"https://stackoverflow.com/a/409470/4074081\">this answer</a>. That seems to make difference as well: not only the library order is important, but the order of inputs (sources before libraries) too.</p>\n"}], "owner": {"reputation": 785, "user_id": 7616532, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/478fe2e610e2e1dd9c9cec94d9ed3f60?s=128&d=identicon&r=PG", "display_name": "Kotauskas", "link": "https://stackoverflow.com/users/7616532/kotauskas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 492, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1551894818, "creation_date": 1551876777, "last_edit_date": 1551894416, "question_id": 55023589, "link": "https://stackoverflow.com/questions/55023589/cannot-link-against-glfw-3-with-mingw-w64", "title": "Cannot link against GLFW 3 with MinGW-w64", "body": "<p>Compiling code that uses GLFW in MinGW-w64, everything goes fine until the linking phase. At this point, <code>ld</code> starts to complain about undefined references to GLFW functions, even though I specified the additional library directories and used libraries. Here's my <code>g++</code> invocation (I, of course, use a lot of enviroment variables in my batch file to shorten the command, here it is unwrapped):</p>\n\n<pre><code>x86_64-w64-mingw32-g++.exe -I./deps/glfw-3.2.1/include -I./deps/gl3w/include -I./include -L./deps/glfw-3.2.1/lib-mingw-w64/x86_64 -lglfw3 -lopengl32 -lgdi32 -lkernel32 -luser32 -lcomdlg32 -std=c++14 -fpermissive -mwindows -o build\\out\\windows\\Release\\x86_64\\GemVerse.exe ./deps/gl3w/src/gl3w.c ./src/main.cpp\n</code></pre>\n\n<p>Here is the same command, broken down:</p>\n\n<pre><code>x86_64-w64-mingw32-g++.exe %INCLUDEDIRS% %LIBDIRS64% %CFLAGS% %LIBS% -o build\\out\\windows\\Release\\x86_64\\GemVerse.exe %SOURCES%\n</code></pre>\n\n<p>Where <code>%INCLUDEDIRS%=-I./deps/glfw-3.2.1/include -I./deps/gl3w/include -I./deps/glm-0.9.9.3/include -I./include</code>, <code>%LIBDIRS64%=-L./deps/glfw-3.2.1/lib-mingw-w64/x86_64</code>, <code>%LIBS%=-lglfw3 -lopengl32 -lgdi32 -lkernel32 -luser32 -lcomdlg32</code>, <code>%CFLAGS%=-std=c++14 -fpermissive -mwindows</code> and <code>%SOURCES%=./deps/gl3w/src/gl3w.c ./src/main.cpp</code></p>\n\n<p>As you can see, the library gets found and linked, but the symbols are still unresolved. How is this possible and how to link GLFW properly?</p>\n\n<hr>\n\n<p><h2>EDIT 1:</h2>I've changed the library order, now it's <code>-lopengl32 -lgdi32 -lkernel32 -luser32 -lcomdlg32 -glfw3</code>, so that GLFW is at the end. That didn't fix the problem, <code>ld</code> still doesn't find the definitions. Here is the <code>g++</code> log, since I don't seem to have attached one, my fault:</p>\n\n<pre><code>./deps/gl3w/src/gl3w.c: In function 'int open_libgl()':\n./deps/gl3w/src/gl3w.c:47:52: warning: invalid conversion from 'FARPROC' {aka 'long long int (*)()'} to 'void*' [-fpermissive]\n  *(void **)(&amp;wgl_get_proc_address) = GetProcAddress(libgl, \"wglGetProcAddress\");\n                                      ~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text$_ZN8gemverse6GVGame4initEv[_ZN8gemverse6GVGame4initEv]+0x65): undefined reference to `glfwInit'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text$_ZN8gemverse6GVGame4initEv[_ZN8gemverse6GVGame4initEv]+0x74): undefined reference to `glfwWindowHint'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text$_ZN8gemverse6GVGame4initEv[_ZN8gemverse6GVGame4initEv]+0x83): undefined reference to `glfwWindowHint'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text$_ZN8gemverse6GVGame4initEv[_ZN8gemverse6GVGame4initEv]+0x92): undefined reference to `glfwWindowHint'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text$_ZN8gemverse6GVGame4initEv[_ZN8gemverse6GVGame4initEv]+0x9e): undefined reference to `glfwWindowHint'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text$_ZN8gemverse6GVGame4initEv[_ZN8gemverse6GVGame4initEv]+0xc0): undefined reference to `glfwCreateWindow'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text$_ZN8gemverse6GVGame4initEv[_ZN8gemverse6GVGame4initEv]+0xd4): undefined reference to `glfwMakeContextCurrent'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text.startup+0x1b): undefined reference to `glfwTerminate'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text.startup+0x3b): undefined reference to `glfwGetKey'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text.startup+0x5c): undefined reference to `glfwSwapBuffers'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text.startup+0x61): undefined reference to `glfwPollEvents'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text.startup+0x66): undefined reference to `glfwTerminate'\nC:\\Users\\vtonc\\AppData\\Local\\Temp\\cc6GSYa1.o:main.cpp:(.text.startup+0x7d): undefined reference to `glfwSetWindowShouldClose'\ncollect2.exe: error: ld returned 1 exit status\nThe terminal process terminated with exit code: 1\n</code></pre>\n\n<p>Some names are mangled, since the initialization code in my project is incapsulated into a class.</p>\n"}, {"tags": ["c++", "opencv", "visual-studio-2017"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11159395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tNHu47kR_34/AAAAAAAAAAI/AAAAAAAAADE/gdfJmYmwjOk/photo.jpg?sz=128", "display_name": "Gunawan Tibi Santoso", "link": "https://stackoverflow.com/users/11159395/gunawan-tibi-santoso"}, "edited": false, "score": 0, "creation_date": 1551883067, "post_id": 55024552, "comment_id": 96804046, "body": "thanks for your answer, but i try the code and fps still drop"}], "tags": [], "owner": {"reputation": 1574, "user_id": 10911905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464f9d95f48b6f1d2ab156181e59c05a?s=128&d=identicon&r=PG&f=1", "display_name": "Nuzhny", "link": "https://stackoverflow.com/users/10911905/nuzhny"}, "is_accepted": false, "score": 1, "last_activity_date": 1551879810, "creation_date": 1551879810, "answer_id": 55024552, "question_id": 55023473, "link": "https://stackoverflow.com/questions/55023473/fix-video-fps-opencv/55024552#55024552", "title": "Fix video FPS opencv?", "body": "<p>Oh! All actions and memory allocation inside loop. Try this:</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[]){\n\n    VideoCapture cap(0);\n    cap.open(\"file.mp4\"); //read the video\n\n    if (!cap.isOpened())\n    {\n        cout &lt;&lt; \"Cannot open the video cam\" &lt;&lt; endl;\n        return -1;\n    }\n    double Width = cap.get(CV_CAP_PROP_FRAME_WIDTH);\n    double Height = cap.get(CV_CAP_PROP_FRAME_HEIGHT);\n\n    cvNamedWindow(\"MyVideo\", CV_WINDOW_AUTOSIZE);\n\n    Mat frame;\n    Mat blur, crop;\n    Mat mask(720, 1280, CV_8UC3, cv::Scalar(0, 0, 0));\n    Mat gray, changeToBlack;\n    Mat black_image(gray.size(), CV_8U, Scalar(255));\n    Mat thres, tes;\n    Mat erosi, dilasi, open, close, tophat;\n    Mat kernel = Mat(3, 3, CV_8UC1, Scalar(1));\n    Mat im_with_keypoints;\n\n    SimpleBlobDetector::Params params;\n    // Change thresholds\n    params.minThreshold = 0;\n    params.maxThreshold = 255;\n\n    params.filterByColor = true;\n    params.blobColor = 255;\n\n    // Filter by Area.\n    params.filterByArea = true;\n    params.minArea = 5 ;\n    // Filter by Circularity\n    params.filterByCircularity = true;\n    params.minCircularity = 0.1;\n\n    // Filter by Convexity\n    params.filterByConvexity = true;\n    params.minConvexity = 0.87;\n\n    // Filter by Inertia\n    params.filterByInertia = true;\n    params.minInertiaRatio = 0.01;\n\n    vector&lt;KeyPoint&gt; keypoints;\n    Ptr&lt;SimpleBlobDetector&gt; detector = SimpleBlobDetector::create(params);\n\n    while (cap.read(frame))\n    {\n    //crop the image with the pixel i want\n        GaussianBlur(frame, blur, Size(15, 15), 0); //blur the image\n        Point corners[1][4];\n        corners[0][0] = Point(550, 30); //top left\n        corners[0][1] = Point(250, 700); //bottom left\n        corners[0][2] = Point(1100, 700); //bottom right\n        corners[0][3] = Point(600, 30); //top right\n        const Point* corner_list[1] = { corners[0] };\n        int num_points = 4;\n        int num_polygons = 1;\n        int line_type = 8;\n        fillPoly(mask, corner_list, &amp;num_points, num_polygons, cv::Scalar(255, 255, 255), line_type);\n        bitwise_and(blur, mask, crop);//combine the image\n\n        cvtColor(crop, gray, COLOR_BGR2GRAY); //grayscale citra\n        inRange(gray, Scalar(0), Scalar(0), changeToBlack);\n        black_image.copyTo(gray, changeToBlack);\n\n        threshold(gray, tes, 51, 255, THRESH_BINARY_INV); //threshold citra and 51 set value\n\n        morphologyEx(tes, erosi, MORPH_ERODE, kernel, Point(-1, -1), 3);\n        morphologyEx(erosi, dilasi, MORPH_DILATE, kernel, Point(-1, -1), 20);\n\n        detector-&gt;detect(dilasi, keypoints);\n\n        drawKeypoints(dilasi, keypoints, im_with_keypoints, Scalar(205, 0, 0), DrawMatchesFlags::DRAW_RICH_KEYPOINTS);\n\n        imshow(\"gray\", frame);\n        imshow(\"MyVideo\", im_with_keypoints);\n\n        if (waitKey(1) == 27)\n        {\n            cout &lt;&lt; \"esc key is pressed by user\" &lt;&lt; endl;\n            break;\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11159395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tNHu47kR_34/AAAAAAAAAAI/AAAAAAAAADE/gdfJmYmwjOk/photo.jpg?sz=128", "display_name": "Gunawan Tibi Santoso", "link": "https://stackoverflow.com/users/11159395/gunawan-tibi-santoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1552644808, "creation_date": 1551876356, "last_edit_date": 1552644808, "question_id": 55023473, "link": "https://stackoverflow.com/questions/55023473/fix-video-fps-opencv", "title": "Fix video FPS opencv?", "body": "<p>How to make my video not delay, in the beginning of the code it's not delay, but if I use the <code>GaussianBlur</code>, morphology operation, and <code>SimpleBlobDetector</code>, the video gets delayed, please someone help me..</p>\n\n<p>Thanks in advance</p>\n\n<pre><code>using namespace cv;\nusing namespace std;\n\nint _tmain(int argc, _TCHAR* argv[]){\n\n    VideoCapture cap(0);\n    cap.open(\"file.mp4\"); //read the video\n\n    if (!cap.isOpened())\n    {\n        cout &lt;&lt; \"Cannot open the video cam\" &lt;&lt; endl;\n        return -1;\n    }  \n    double Width = cap.get(CV_CAP_PROP_FRAME_WIDTH);\n    double Height = cap.get(CV_CAP_PROP_FRAME_HEIGHT);\n\n    cvNamedWindow(\"MyVideo\", CV_WINDOW_AUTOSIZE);\n\n    while (1)\n    {\n        Mat frame;\n        bool bSuccess = cap.read(frame);\n        SimpleBlobDetector::Params params;\n        // Change thresholds\n        params.minThreshold = 0;\n        params.maxThreshold = 255;\n\n        params.filterByColor = true;\n        params.blobColor = 255;\n\n        // Filter by Area.\n        params.filterByArea = true;\n        params.minArea = 5 ;\n        // Filter by Circularity\n        params.filterByCircularity = true;\n        params.minCircularity = 0.1;\n\n        // Filter by Convexity\n        params.filterByConvexity = true;\n        params.minConvexity = 0.87;\n\n        // Filter by Inertia\n        params.filterByInertia = true;\n        params.minInertiaRatio = 0.01;\n\n\n    //crop the image with the pixel i want\n        Mat blur, crop;\n        GaussianBlur(frame, blur, Size(15, 15), 0); //blur the image\n        Point corners[1][4];\n        corners[0][0] = Point(550, 30); //top left\n        corners[0][1] = Point(250, 700); //bottom left\n        corners[0][2] = Point(1100, 700); //bottom right\n        corners[0][3] = Point(600, 30); //top right\n        const Point* corner_list[1] = { corners[0] };\n        int num_points = 4;\n        int num_polygons = 1;\n        int line_type = 8;\n        Mat mask(720, 1280, CV_8UC3, cv::Scalar(0, 0, 0));\n        fillPoly(mask, corner_list, &amp;num_points, num_polygons, cv::Scalar(255, 255, 255), line_type);\n        bitwise_and(blur, mask, crop);//combine the image\n\n\n        Mat gray, changeToBlack;\n        cvtColor(crop, gray, COLOR_BGR2GRAY); //grayscale citra\n        inRange(gray, Scalar(0), Scalar(0), changeToBlack);\n        Mat black_image(gray.size(), CV_8U, Scalar(255));  \n        black_image.copyTo(gray, changeToBlack);\n\n        Mat thres, tes;\n        threshold(gray, tes, 51, 255, THRESH_BINARY_INV); //threshold citra and 51 set value\n\n        Mat erosi, dilasi, open, close, tophat;\n        Mat kernel = Mat(3, 3, CV_8UC1, Scalar(1));\n        morphologyEx(tes, erosi, MORPH_ERODE, kernel, Point(-1, -1), 3);\n        morphologyEx(erosi, dilasi, MORPH_DILATE, kernel, Point(-1, -1), 20);\n\n        vector&lt;KeyPoint&gt; keypoints;\n        Ptr&lt;SimpleBlobDetector&gt; detector = SimpleBlobDetector::create(params);  \n        detector-&gt;detect(dilasi, keypoints);\n\n        Mat im_with_keypoints;\n        drawKeypoints(dilasi, keypoints, im_with_keypoints, Scalar(205, 0, 0), DrawMatchesFlags::DRAW_RICH_KEYPOINTS);\n\n        imshow(\"gray\", frame);\n        imshow(\"MyVideo\", im_with_keypoints);\n\n        if (waitKey(30) == 27)\n        {\n            cout &lt;&lt; \"esc key is pressed by user\" &lt;&lt; endl;\n            break;\n        }   \n    }\n    return 0;\n}\n</code></pre>\n\n<p>Anyone please help me </p>\n"}, {"tags": ["c++", "face-detection", "dlib"], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 9850195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dccbf6b2a134c4411e600bc3d4d06e31?s=128&d=identicon&r=PG&f=1", "display_name": "German", "link": "https://stackoverflow.com/users/9850195/german"}, "edited": false, "score": 0, "creation_date": 1551890414, "post_id": 55023489, "comment_id": 96808731, "body": "There is no such function."}, {"owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "reply_to_user": {"reputation": 323, "user_id": 9850195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dccbf6b2a134c4411e600bc3d4d06e31?s=128&d=identicon&r=PG&f=1", "display_name": "German", "link": "https://stackoverflow.com/users/9850195/german"}, "edited": false, "score": 0, "creation_date": 1551890681, "post_id": 55023489, "comment_id": 96808864, "body": "@\u0413\u0435\u0440\u043c\u0430\u043d Oh? <a href=\"http://dlib.net/imaging.html#pyramid_down\" rel=\"nofollow noreferrer\">dlib.net/imaging.html#pyramid_down</a> says: &quot;pyramid_down -- This is a simple function object to help create image pyramids. It downsamples an image by a ratio of N to N-1 where N is supplied by the user as a template argument. &quot;"}, {"owner": {"reputation": 323, "user_id": 9850195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dccbf6b2a134c4411e600bc3d4d06e31?s=128&d=identicon&r=PG&f=1", "display_name": "German", "link": "https://stackoverflow.com/users/9850195/german"}, "edited": false, "score": 0, "creation_date": 1551891171, "post_id": 55023489, "comment_id": 96809166, "body": "Okay, but it&#39;s still not a function, and I have no idea how to use it in my code."}], "tags": [], "owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "is_accepted": false, "score": 1, "last_activity_date": 1551892990, "last_edit_date": 1551892990, "creation_date": 1551876418, "answer_id": 55023489, "question_id": 55023374, "link": "https://stackoverflow.com/questions/55023374/how-to-get-the-width-and-height-of-a-photo-in-dlib-and-c/55023489#55023489", "title": "How to get the width and height of a photo in dlib and C++?", "body": "<p><a href=\"http://dlib.net/imaging.html#pyramid_up\" rel=\"nofollow noreferrer\"><code>pyramid_up()</code></a> has an opposite function, <a href=\"http://dlib.net/imaging.html#pyramid_down\" rel=\"nofollow noreferrer\"><code>pyramid_down()</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 469, "user_id": 10984529, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252d327a280e65cd24f88e1d46be31d7?s=128&d=identicon&r=PG&f=1", "display_name": "dasmy", "link": "https://stackoverflow.com/users/10984529/dasmy"}, "is_accepted": false, "score": 1, "last_activity_date": 1551876647, "creation_date": 1551876647, "answer_id": 55023560, "question_id": 55023374, "link": "https://stackoverflow.com/questions/55023374/how-to-get-the-width-and-height-of-a-photo-in-dlib-and-c/55023560#55023560", "title": "How to get the width and height of a photo in dlib and C++?", "body": "<p>The <code>array2d</code> class has member functions <code>nc()</code>and <code>nr()</code> to get the number of columns and rows, which should somehow (potentially divided by the color depth, i.e. number of bytes per pixel) correspond to the size of the image in pixels.</p>\n"}], "owner": {"reputation": 323, "user_id": 9850195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dccbf6b2a134c4411e600bc3d4d06e31?s=128&d=identicon&r=PG&f=1", "display_name": "German", "link": "https://stackoverflow.com/users/9850195/german"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1551892990, "creation_date": 1551876074, "question_id": 55023374, "link": "https://stackoverflow.com/questions/55023374/how-to-get-the-width-and-height-of-a-photo-in-dlib-and-c", "title": "How to get the width and height of a photo in dlib and C++?", "body": "<p>I'm writing an app that detects a face and frames it. For better recognition, I increase the photo 2 times and when I display it, it turns out 2 times more than initially, how to reduce it 2 times? The window has the resize () method, but to use it you need to know the initial size of the photo, but I do not know how.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;clocale&gt;\n#include &lt;dlib/image_processing/frontal_face_detector.h&gt;\n#include &lt;dlib/gui_widgets.h&gt;\n#include &lt;dlib/image_io.h&gt;\n\nusing namespace dlib;\nusing namespace std;\n\nint main(int argc, char* argv[])\n{\n    try\n    {\n        setlocale(LC_ALL, \"Rus\");\n        if (argc &lt; 2)\n        {\n            cout &lt;&lt; \"face_detector photo.jpg\";\n            cin.get();\n            return 0;\n        }\n        array2d&lt;unsigned char&gt; img;\n        frontal_face_detector detector = get_frontal_face_detector();\n        image_window win;\n        load_image(img, argv[1]);\n        pyramid_up(img); //upsize photo x2\n        std::vector&lt;rectangle&gt; dets = detector(img);\n        cout &lt;&lt; \"Faces count: \" &lt;&lt; dets.size() &lt;&lt; endl;\n        win.clear_overlay();\n        //win.set_size();\n        win.set_image(img);\n        win.add_overlay(dets, rgb_pixel(255, 0, 0));\n        cin.get();\n    }\n    catch (exception&amp; ex)\n    {\n        cout &lt;&lt; \"Exception: \" &lt;&lt; ex.what() &lt;&lt; endl;\n        cin.get();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>How do I know the size of a photo or reduce it 2 times before displaying?</p>\n"}, {"tags": ["c++", "unit-testing"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1551875918, "post_id": 55023264, "comment_id": 96799782, "body": "Here&#39;s a starting place. <a href=\"https://en.wikipedia.org/wiki/List_of_unit_testing_frameworks\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/List_of_unit_testing_frameworks</a> and it would be great if you would provide more details about your development environment."}, {"owner": {"reputation": 620, "user_id": 6520107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a47f891c7c0e86ff5a885881233feca1?s=128&d=identicon&r=PG&f=1", "display_name": "Siliace", "link": "https://stackoverflow.com/users/6520107/siliace"}, "edited": false, "score": 0, "creation_date": 1551875997, "post_id": 55023264, "comment_id": 96799824, "body": "I think Catch2 is what you&#39;re looking for : <a href=\"https://github.com/catchorg/Catch2/blob/master/docs/test-cases-and-sections.md#type-parametrised-test-cases\" rel=\"nofollow noreferrer\">github.com/catchorg/Catch2/blob/master/docs/&hellip;</a>"}, {"owner": {"reputation": 47, "user_id": 9546017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbb9cf6926710436c7a9ec23ff1d176?s=128&d=identicon&r=PG&f=1", "display_name": "xevepisis", "link": "https://stackoverflow.com/users/9546017/xevepisis"}, "edited": false, "score": 0, "creation_date": 1551876137, "post_id": 55023264, "comment_id": 96799892, "body": "It took me a lot of time to understand that Google test can&#39;t do what I need. One needs a good knowledge of a particular testing framework to answer my question and it is reason I ask it here"}, {"owner": {"reputation": 47, "user_id": 9546017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbb9cf6926710436c7a9ec23ff1d176?s=128&d=identicon&r=PG&f=1", "display_name": "xevepisis", "link": "https://stackoverflow.com/users/9546017/xevepisis"}, "edited": false, "score": 0, "creation_date": 1551876591, "post_id": 55023264, "comment_id": 96800141, "body": "From what I read Catch2 allows just type not type and value parametrization. Tough I can be wrong"}, {"owner": {"reputation": 47, "user_id": 9546017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbb9cf6926710436c7a9ec23ff1d176?s=128&d=identicon&r=PG&f=1", "display_name": "xevepisis", "link": "https://stackoverflow.com/users/9546017/xevepisis"}, "edited": false, "score": 0, "creation_date": 1551876832, "post_id": 55023264, "comment_id": 96800262, "body": "About development environment: I am willing to setup anything that is available for free for Linux and Windows. Currently I am using Qt creator on Windows."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9546017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbb9cf6926710436c7a9ec23ff1d176?s=128&d=identicon&r=PG&f=1", "display_name": "xevepisis", "link": "https://stackoverflow.com/users/9546017/xevepisis"}, "edited": false, "score": 0, "creation_date": 1551898800, "post_id": 55029580, "comment_id": 96813197, "body": "Wow! It is amazing how you managed to generate all type/value combinations using templates. I am learning template programming and your code looks very educative. Thanks a lot for showing this cool approach."}, {"owner": {"reputation": 2605, "user_id": 10420039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1YiNn.png?s=128&g=1", "display_name": "Hiroki", "link": "https://stackoverflow.com/users/10420039/hiroki"}, "reply_to_user": {"reputation": 47, "user_id": 9546017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbb9cf6926710436c7a9ec23ff1d176?s=128&d=identicon&r=PG&f=1", "display_name": "xevepisis", "link": "https://stackoverflow.com/users/9546017/xevepisis"}, "edited": false, "score": 0, "creation_date": 1551916316, "post_id": 55029580, "comment_id": 96820459, "body": "@xevepisis many thx :). And I have checked that this approach well works in my Windows environment."}], "tags": [], "owner": {"reputation": 2605, "user_id": 10420039, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1YiNn.png?s=128&g=1", "display_name": "Hiroki", "link": "https://stackoverflow.com/users/10420039/hiroki"}, "is_accepted": true, "score": 2, "last_activity_date": 1558139000, "last_edit_date": 1558139000, "creation_date": 1551895553, "answer_id": 55029580, "question_id": 55023264, "link": "https://stackoverflow.com/questions/55023264/c-unit-testing-framework-with-type-and-value-parametrisation/55029580#55029580", "title": "C++ unit testing framework with type and value parametrisation", "body": "<p>A possible way is the typed test of GoogleTest as follows.\nPlease note that this is the solution for C++14 and over, and integer parameters just like your example <code>{0, 1, 10}</code>.</p>\n\n<hr>\n\n<p><strong>Approach</strong></p>\n\n<p>Let us define the following struct <code>Case</code>:</p>\n\n<pre><code>template&lt;typename T, std::size_t I&gt;\nstruct Case\n{\n    using type = T;\n    static constexpr std::size_t size = I;\n};\n</code></pre>\n\n<p>The basic idea of testing all combinations of types and sizes are using this struct to specify test types like this:</p>\n\n<pre><code>#include &lt;gtest/gtest.h&gt;\n\ntemplate &lt;typename T&gt;\nclass TypedTest : public ::testing::Test {};\n\nusing TestTypes = ::testing::Types&lt;Case&lt;int, 0&gt;, Case&lt;int, 1&gt;, Case&lt;int, 10&gt;, Case&lt;MyCustomStruct, 0&gt;, ...&gt;;\n\nTYPED_TEST_CASE(TypedTest, TestTypes);\n\nTYPED_TEST(TypedTest, sort) \n{\n    auto vec = makeRandomVector&lt;TypeParam::type&gt;(TypeParam::size);\n    ...\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Combinatorics</strong></p>\n\n<p>Now our problem is how can we simply construct the all combinations of types and sizes.\nI just answered the <a href=\"https://stackoverflow.com/questions/55005063/create-a-type-list-combination-of-types-in-c/55008771#55008771\"><strong>almost same question</strong></a> with this problem yesterday.\nIn the current case, all possible pairs of <code>{int, MyCustomStruct}</code> and <code>{0, 1, 10}</code> are labeled by one dimensional integers 0,1,...,5 like this (and max66's approach would be also possible):</p>\n\n<pre><code>0 -&gt; (0/3, 0%3) = (0,0) -&gt; std::tuple&lt;int,  0&gt;\n1 -&gt; (1/3, 1%3) = (0,1) -&gt; std::tuple&lt;int,  1&gt;\n2 -&gt; (2/3, 2%3) = (0,2) -&gt; std::tuple&lt;int, 10&gt;\n3 -&gt; (3/3, 3%3) = (1,0) -&gt; std::tuple&lt;MyCustomStruct,  0&gt;\n4 -&gt; (4/3, 4%3) = (1,1) -&gt; std::tuple&lt;MyCustomStruct,  1&gt;\n5 -&gt; (5/3, 5%3) = (1,2) -&gt; std::tuple&lt;MyCustomStruct, 10&gt;\n</code></pre>\n\n<p>where <code>3</code> is the size of <code>{0, 1, 10}</code>.\nIt is simple and straightforward to write the function which makes all possible combinations with this algorithm as follows.\nFor instance, <code>Combinations&lt;std::tuple&lt;int, MyCustomStruct&gt;, 0, 1, 10&gt;</code> is equal to the type of <code>std::tuple&lt;Case&lt;int,0&gt;, Case&lt;int,1&gt;, Case&lt;int,10&gt;, Case&lt;MyCustomStruct,0&gt;, ...&gt;</code>:</p>\n\n<pre><code>template&lt;typename TupleType, typename TupleIdx, std::size_t I&gt;\nstruct make_case\n{\n    static constexpr std::size_t N = std::tuple_size&lt;TupleIdx&gt;::value;\n\n    using type = Case&lt;typename std::tuple_element&lt;I/N, TupleType&gt;::type,\n                               std::tuple_element&lt;I%N, TupleIdx &gt;::type::value&gt;;\n};\n\ntemplate &lt;typename T1, typename T2, typename Is&gt;\nstruct make_combinations;\n\ntemplate &lt;typename TupleType, typename TupleIdx, std::size_t... Is&gt;\nstruct make_combinations&lt;TupleType, TupleIdx, std::index_sequence&lt;Is...&gt;&gt;\n{\n    using tuples = std::tuple&lt;typename make_case&lt;TupleType, TupleIdx, Is&gt;::type...&gt;;\n};\n\ntemplate&lt;typename TupleTypes, std::size_t ...Is&gt;\nusing Combinations = typename make_combinations\n                       &lt;TupleTypes,\n                        std::tuple&lt;std::integral_constant&lt;std::size_t, Is&gt;...&gt;,\n                        std::make_index_sequence&lt;(std::tuple_size&lt;TupleTypes&gt;::value)*(sizeof...(Is))&gt;&gt;\n                     ::tuples;\n</code></pre>\n\n<hr>\n\n<p><strong>Testing</strong></p>\n\n<p>Applying answers of this <a href=\"https://stackoverflow.com/questions/15418841/how-do-i-strip-a-tuple-back-into-a-variadic-template-list-of-types\"><strong>post</strong></a>, we can stripe this tuple <code>Combinations&lt;...&gt;</code> into a list of types and here I apply Nawaz's simple one.\nThen all tests can be done as follows:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Test;\n\ntemplate&lt;typename ...T&gt;\nstruct Test&lt;std::tuple&lt;T...&gt;&gt;\n{\n    using Types = ::testing::Types&lt;T...&gt;;\n};\n\ntemplate &lt;typename T&gt;\nclass TypedTest : public ::testing::Test {};\n\nusing TestTypes = Test&lt;Combinations&lt;std::tuple&lt;int, MyCustomStruct&gt;, 0, 1, 10&gt;&gt;::Types;\n\nTYPED_TEST_CASE(TypedTest, TestTypes);\n\nTYPED_TEST(TypedTest, sort) \n{\n    auto vec = makeRandomVector&lt;TypeParam::type&gt;(TypeParam::size);\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 9546017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbb9cf6926710436c7a9ec23ff1d176?s=128&d=identicon&r=PG&f=1", "display_name": "xevepisis", "link": "https://stackoverflow.com/users/9546017/xevepisis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 55029580, "answer_count": 1, "score": 1, "last_activity_date": 1558139000, "creation_date": 1551875731, "last_edit_date": 1551898821, "question_id": 55023264, "link": "https://stackoverflow.com/questions/55023264/c-unit-testing-framework-with-type-and-value-parametrisation", "title": "C++ unit testing framework with type and value parametrisation", "body": "<p>I am looking for a unit testing framework that allows passing type and value parameters to test function at the same time. </p>\n\n<p>Example: let's say I have a few template sorting functions:</p>\n\n<pre><code>template&lt;class ITERATOR, class COMPARATOR = std::less&lt;typename std::iterator_traits&lt;ITERATOR&gt;::value_type&gt;&gt;\nvoid selectionSort(const ITERATOR first,const ITERATOR last, const COMPARATOR comparator = COMPARATOR ()){ ... };\n\ntemplate&lt;class ITERATOR, class COMPARATOR = std::less&lt;typename std::iterator_traits&lt;ITERATOR&gt;::value_type&gt;&gt;\nvoid insertionSort(const ITERATOR first,const ITERATOR last, const COMPARATOR comparator = COMPARATOR ()) { ... }\n</code></pre>\n\n<p>and I want to test these functions with different input types as:</p>\n\n<pre><code>template&lt;class T&gt;\nvector&lt;T&gt; makeRandomVector(int size){ ... }\n\nvector&lt;int&gt; intVec = makeRandomVector&lt;int&gt;(10);  //10 is vector size\nsomeSort(intVec.begin(),intVec.end())\nvector&lt;MyCustomStruct&gt; structVec = makeRandomVector&lt;MyCustomStruct&gt;(10);  \nsomeSort(structVec.begin(),structVec.end())\n</code></pre>\n\n<p>and with different size arguments for <code>makeRandomVector</code> to test these function if vector size is 0,1,10 etc.</p>\n\n<p>So I am looking for C++ unit testing framework that allows creating test that would accept type (int,MyCustomStruct) and value parameters (0,1,10) at the same time and perform the test for each element of the cartesian product of Types x Values. </p>\n"}, {"tags": ["c++", "qt", "qml", "qt-creator", "qt-designer"], "answers": [{"comments": [{"owner": {"reputation": 1088, "user_id": 4312944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f866fdc8218501fab2dee0d723c07c50?s=128&d=identicon&r=PG&f=1", "display_name": "karyon", "link": "https://stackoverflow.com/users/4312944/karyon"}, "edited": false, "score": 0, "creation_date": 1551883711, "post_id": 55025255, "comment_id": 96804477, "body": "As far as I can see, that is similar to what I have already. I can access the C++ enum from QML just like you do. But for me, the designer fails at the import statement. In your case, how does the designer know that your.namespace exists? It never runs the C++ code with the call to qmlRegisterUncreatableType."}, {"owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "reply_to_user": {"reputation": 1088, "user_id": 4312944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f866fdc8218501fab2dee0d723c07c50?s=128&d=identicon&r=PG&f=1", "display_name": "karyon", "link": "https://stackoverflow.com/users/4312944/karyon"}, "edited": false, "score": 0, "creation_date": 1551884694, "post_id": 55025255, "comment_id": 96805127, "body": "I had troubles with <code>QT_ENUM_NS</code> and this worked for me, so that&#39;s why I answered. As for the designer, I sometimes see it failing to grab new qmlRegister calls, but after building they work (if correct). I think Qt Creator has some internal parser that looks through all the project files finding the qmlRegister calls, or maybe the MOC makes a cache."}, {"owner": {"reputation": 1088, "user_id": 4312944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f866fdc8218501fab2dee0d723c07c50?s=128&d=identicon&r=PG&f=1", "display_name": "karyon", "link": "https://stackoverflow.com/users/4312944/karyon"}, "edited": false, "score": 1, "creation_date": 1551887877, "post_id": 55025255, "comment_id": 96807148, "body": "Indeed, It&#39;s a bug in the qt creator: <a href=\"https://bugreports.qt.io/browse/QTCREATORBUG-20569\" rel=\"nofollow noreferrer\">bugreports.qt.io/browse/QTCREATORBUG-20569</a>. <code>qmlRegisterUncreatableType</code> works, <code>qmlRegisterUncreatableMetaObject</code> does not. Thanks a lot for pointing me in the right direction!"}], "tags": [], "owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "is_accepted": true, "score": 1, "last_activity_date": 1551881950, "creation_date": 1551881950, "answer_id": 55025255, "question_id": 55023259, "link": "https://stackoverflow.com/questions/55023259/how-to-mock-a-c-enum-for-the-qt-quick-designer/55025255#55025255", "title": "How to mock a C++ enum for the Qt Quick Designer?", "body": "<p>I have it working both on runtime and designer with the enum encapsulated in a class:</p>\n\n<pre><code>class SectionIdWrapper : public QObject\n{\n    Q_OBJECT\n\n  public:\n    enum class SectionIdEnum {\n        SomeValue\n    };\n    Q_ENUM(SectionIdEnum);\n};\n</code></pre>\n\n<p>And register like:</p>\n\n<pre><code>qmlRegisterUncreatableType&lt;SectionIdWrapper&gt;(\"your.namespace\", 1, 0, \"SectionId\", \"Error: only enum\");\n</code></pre>\n\n<p>And usage in Qml like expected:</p>\n\n<pre><code>import your.namespace 1.0\n\nItem {\n    property int test: SectionId.SomeValue\n}\n</code></pre>\n\n<p>Note that the name of the enum is not used.</p>\n\n<p>You can add more enums in that same class, but then the names might collide (either domain-wise or text-wise)</p>\n"}], "owner": {"reputation": 1088, "user_id": 4312944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f866fdc8218501fab2dee0d723c07c50?s=128&d=identicon&r=PG&f=1", "display_name": "karyon", "link": "https://stackoverflow.com/users/4312944/karyon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 55025255, "answer_count": 1, "score": 1, "last_activity_date": 1551881950, "creation_date": 1551875717, "question_id": 55023259, "link": "https://stackoverflow.com/questions/55023259/how-to-mock-a-c-enum-for-the-qt-quick-designer", "title": "How to mock a C++ enum for the Qt Quick Designer?", "body": "<p>I have a C++ enum defined like this:</p>\n\n<pre><code>namespace SectionIdNamespace\n{\n    Q_NAMESPACE\n    enum SectionId {\n        SomeValue\n    };\n    Q_ENUM_NS(SectionId)\n};\n</code></pre>\n\n<p>I register that enum as follows:</p>\n\n<pre><code>qmlRegisterUncreatableMetaObject(\n    SectionIdNamespace::staticMetaObject,\n    \"SectionIdImportName\",\n    1, 0,\n    \"SectionId\",\n    \"Error: only enums\"\n);\n</code></pre>\n\n<p>And use it in QML:</p>\n\n<pre><code>import SectionIdImportName 1.0\n....\nSectionId.SomeValue\n</code></pre>\n\n<p>When opening that QML file in the Qt Quick Designer (the \"Design\" tab in the Qt Creator), it refuses to load the file and says <code>QML module not found (SectionIdImportName)</code>, since the Designer does not run any C++ code.</p>\n\n<p>How can I make the Designer work with that QML file that uses a C++ enum?</p>\n\n<p>I am aware of <code>QML_DESIGNER_IMPORT_PATH</code> and <a href=\"https://doc.qt.io/qt-5/qtqml-syntax-objectattributes.html#enumeration-attributes\" rel=\"nofollow noreferrer\">QML enumeration attributes</a>. I tried to \"mock\" the C++ enum by such an QML enum just for the Designer, however, those enum's values are used like this <code>QMLType.EnumType.EnumValue</code>, while the C++ enum values must be adressed just with <code>EnumType.EnumValue</code>. It seems like the code can be compatible to either a C++ enum or a QML enum, but not both at the same time.</p>\n\n<p>I'm using Qt 5.11, upgrading to 5.12 soon. </p>\n"}, {"tags": ["c++", "ssl", "https", "boost-asio"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5591375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d04a5722fe8f0db8ed47f059d2f3439?s=128&d=identicon&r=PG&f=1", "display_name": "VViCKiD", "link": "https://stackoverflow.com/users/5591375/vvickid"}, "edited": false, "score": 0, "creation_date": 1551907567, "post_id": 55029379, "comment_id": 96817329, "body": "+1 Thank you so much !!!! That did the trick.  I added ctx.use_certificate_chain_file and it worked instantly.:)"}], "tags": [], "owner": {"reputation": 12010, "user_id": 23235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6281820b28d03f98e85bb3d901ae3f39?s=128&d=identicon&r=PG", "display_name": "Shane Powell", "link": "https://stackoverflow.com/users/23235/shane-powell"}, "is_accepted": true, "score": 1, "last_activity_date": 1551894814, "creation_date": 1551894814, "answer_id": 55029379, "question_id": 55022973, "link": "https://stackoverflow.com/questions/55022973/betfair-apiing-certificate-login-using-c-boost-ssl-sockets/55029379#55029379", "title": "Betfair API&#39;ing Certificate login using C++ boost SSL Sockets", "body": "<p>I think you are confusing the client certificate and the CA List.  </p>\n\n<p>This:</p>\n\n<pre><code>ctx.load_verify_file(cert_filename.c_str());\n</code></pre>\n\n<p>Is loading a list of CA certificates to verify the server certificate against.</p>\n\n<p>You can find a example of this list here:\n<a href=\"http://curl.haxx.se/ca/cacert.pem\" rel=\"nofollow noreferrer\">http://curl.haxx.se/ca/cacert.pem</a></p>\n\n<p>You also need to setup the certificate to use for the SSL connection, you do this with the \"use_certificate_chain_file\" method.\ne.g.</p>\n\n<pre><code>ctx.use_certificate_chain_file(cert_filename.c_str());\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5591375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d04a5722fe8f0db8ed47f059d2f3439?s=128&d=identicon&r=PG&f=1", "display_name": "VViCKiD", "link": "https://stackoverflow.com/users/5591375/vvickid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 55029379, "answer_count": 1, "score": 0, "last_activity_date": 1551894814, "creation_date": 1551874741, "question_id": 55022973, "link": "https://stackoverflow.com/questions/55022973/betfair-apiing-certificate-login-using-c-boost-ssl-sockets", "title": "Betfair API&#39;ing Certificate login using C++ boost SSL Sockets", "body": "<p>Firstly, thanks for coming here. I'm trying to login with betfair using a certificate login using boost's ssl sockets however, once I send my http login POST, I receive the message <strong>CERT_AUTH_REQUIRED</strong>. On the betfair website it says this means \"Certificate required or certificate present but could not authenticate with it\". \nI am able to connect, handshake and send/receive data. However, I just can't seem to login with my code. I've tested the exact certificates using curl without any problems. </p>\n\n<pre><code>* ALPN, server accepted to use http/1.1\n* Server certificate:\n*        subject: C=IE; ST=Leinster; L=Dublin; O=Paddy Power Betfair Public Limi\nted Company; OU=IT Networks; CN=betfair.com\n*        start date: Sep 11 05:50:38 2018 GMT\n*        expire date: Sep 11 05:59:00 2020 GMT\n*        issuer: C=US; O=HydrantID (Avalanche Cloud Corporation); CN=HydrantID S\nSL ICA G2\n*        SSL certificate verify result: self signed certificate in certificate c\nhain (19), continuing anyway.\n&gt; POST /api/certlogin HTTP/1.1\n&gt; Host: identitysso-cert.betfair.com\n&gt; User-Agent: curl/7.46.0\n&gt; Accept: */*\n&gt; X-Application: AOxcQMZwVN3jOsLZ4\n&gt; Content-Length: 41\n&gt; Content-Type: application/x-www-form-urlencoded\n&gt;\n* upload completely sent off: 41 out of 41 bytes\n&lt; HTTP/1.1 200 OK\n&lt; Content-Type: text/plain;charset=ISO-8859-1\n&lt; Content-Length: 87\n&lt; Date: Wed, 06 Mar 2019 11:09:35 GMT\n&lt;\n{\"sessionToken\":\"ZFbyo3HeAh07UFTHzhhGjOyQFeX2MKdHHHHtAm2S7FXw=\",\"loginStatus\":\"SU\nCCESS\"}* Connection #0 to host identitysso-cert.betfair.com left intact\n</code></pre>\n\n<p>I have further tested these certificates with python code that also works.\nMy C++ code is below. I've tried sending incorrect passwords which result in the status from server INVALID_USERNAME_OR_PASSWORD instead. </p>\n\n<pre><code>boost::asio::ssl::context ctx(boost::asio::ssl::context::tlsv12);\n\n// load certificates\nctx.load_verify_file(cert_filename.c_str());\n// ctx.use_private_key_file(private_filename.c_str(), boost::asio::ssl::context::pem);\nctx.use_rsa_private_key_file(private_filename.c_str(), boost::asio::ssl::context::pem);\n\nmSocket.reset(new boost::asio::ssl::stream&lt;tcp::socket&gt;(mIoService, ctx));\nmSocket-&gt;set_verify_mode(boost::asio::ssl::verify_peer);\nmSocket-&gt;set_verify_callback(\n    boost::bind(&amp;BetfairSession::VerifyCertificate, this, _1, _2));\n\ntcp::resolver resolver(mIoService);\ntcp::resolver::query query(\"identitysso-cert.betfair.com\", port);\ntcp::resolver::iterator endpointIter = resolver.resolve(query);\n</code></pre>\n\n<p>Many thanks in advance :)</p>\n"}, {"tags": ["c++", "dll", "lib"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1551875941, "post_id": 55022919, "comment_id": 96799794, "body": "<a href=\"https://stackoverflow.com/questions/19487465/how-to-tell-if-a-lib-was-compiled-with-mt-or-md\" title=\"how to tell if a lib was compiled with mt or md\">stackoverflow.com/questions/19487465/&hellip;</a>"}], "owner": {"reputation": 157, "user_id": 947018, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6d83656d4f26e791a43d02af2c206b49?s=128&d=identicon&r=PG", "display_name": "Christian", "link": "https://stackoverflow.com/users/947018/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551874546, "creation_date": 1551874546, "question_id": 55022919, "link": "https://stackoverflow.com/questions/55022919/which-static-library-linked-by-my-compiled-exe-requires-msvcr100d-dll", "title": "Which static library linked by my compiled exe requires msvcr100d.dll?", "body": "<p>I have a project with over fifty dependencies, most are linked statically. The compiled release exe misses msvcr100d.dll, the debug version. Obviously, the application should not require msvcr100d, since it is a release version (it does require msvcr100).</p>\n\n<p>With dependecy walker I found out that it is the executable itself that requires msvcr100d, not another dll. I am guessing one of the dependency has the wrong configuration or uses some flag such as Multithreaded-Debug-DLL (/MDd) (although I have checked all dependencies for this one), which makes the link to msvcr100d.</p>\n\n<p>Is there a way to find out which static library is responsible for linking to msvcr100d without having to investigate the properties of each and every dependency? Maybe using the info in the pdb-file (which I created for release as well)?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 5, "creation_date": 1551873261, "post_id": 55022486, "comment_id": 96798243, "body": "Because <code>strcpy</code> is a C function, taking <code>char*</code> as parameters, no need for it when you have objects: <code>c_task = std::move(n_task);</code>."}], "answers": [{"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1551880217, "post_id": 55022588, "comment_id": 96802282, "body": "In the code in the question, <code>strcpy_s</code> should be replaced by the <b>assignment</b> operator, not the copy constructor. The target object has already been constructed."}], "tags": [], "owner": {"reputation": 36, "user_id": 8437305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fe0a503494b1b4e2d6f480514124b3c?s=128&d=identicon&r=PG&f=1", "display_name": "\u90ed\u4e00\u51e1", "link": "https://stackoverflow.com/users/8437305/%e9%83%ad%e4%b8%80%e5%87%a1"}, "is_accepted": false, "score": 0, "last_activity_date": 1551873403, "creation_date": 1551873403, "answer_id": 55022588, "question_id": 55022486, "link": "https://stackoverflow.com/questions/55022486/why-does-strcpy-not-work-accept-string-as-argument/55022588#55022588", "title": "Why does strcpy() not work accept string as argument?", "body": "<p>Strcpy is a standard library function for C language.You should use copy constructor of string.</p>\n"}, {"tags": [], "owner": {"reputation": 1393, "user_id": 3648103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9badfef4d6302fd25825df1ea5ffaf06?s=128&d=identicon&r=PG&f=1", "display_name": "aep", "link": "https://stackoverflow.com/users/3648103/aep"}, "is_accepted": true, "score": 1, "last_activity_date": 1551873687, "creation_date": 1551873687, "answer_id": 55022676, "question_id": 55022486, "link": "https://stackoverflow.com/questions/55022486/why-does-strcpy-not-work-accept-string-as-argument/55022676#55022676", "title": "Why does strcpy() not work accept string as argument?", "body": "<p>Use <code>std::string</code> related functions. <code>strcpy_s</code> acts upon <code>char *</code> not on <code>std::string</code>.</p>\n\n<pre><code>class Tasks {\npublic:\n    std::string c_task = \"\";\n    int date;\n    int category;\n    int priority;\n\n    void newTask(std::string n_task);\n};\n\nvoid Tasks::newTask(std::string n_task)\n{\n    c_task = std::move(n_task);\n}\n\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10826484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2337167419690150/picture?type=large", "display_name": "Pascal Wigger", "link": "https://stackoverflow.com/users/10826484/pascal-wigger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1551874183, "accepted_answer_id": 55022676, "answer_count": 2, "score": -5, "last_activity_date": 1551873687, "creation_date": 1551873156, "question_id": 55022486, "link": "https://stackoverflow.com/questions/55022486/why-does-strcpy-not-work-accept-string-as-argument", "closed_reason": "Needs details or clarity", "title": "Why does strcpy() not work accept string as argument?", "body": "<p>So I'm trying to write a little personal Planner App, and want store information in a class Tasks,</p>\n\n<p>nothing to fancy yet but strcpy does not recognize the string c_task; \ncompiler say c:tastk is std:string Tasks::c_task so I understand that it is not the right argument for strcpy. So the question is how to make strcpy accept that string ? </p>\n\n<pre><code>  class Tasks {\npublic:\n    string c_task = \"\";\n    int date;\n    int category;\n    int priority;\n\n    void newTask(string n_task);\n};\n\nvoid Tasks::newTask(string n_task)\n{\n    strcpy_s(c_task, n_task);\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++14"], "comments": [{"owner": {"reputation": 2606, "user_id": 2807083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5243f429132252828f081c61979aa614?s=128&d=identicon&r=PG&f=1", "display_name": "user2807083", "link": "https://stackoverflow.com/users/2807083/user2807083"}, "edited": false, "score": 2, "creation_date": 1551872097, "post_id": 55022057, "comment_id": 96797561, "body": "Use <a href=\"http://en.wikipedia.org/wiki/SFINAE\" rel=\"nofollow noreferrer\">SFINAE</a>"}], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1551878715, "post_id": 55022168, "comment_id": 96801367, "body": "Congrats on the 100k by the way"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1551878790, "post_id": 55022168, "comment_id": 96801422, "body": "@SombreroChicken - Thank you very much! Now I just need to decide if it was worth the price, chiefly my sanity"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1551878835, "post_id": 55022168, "comment_id": 96801447, "body": "@SombreroChicken - I only got deep into C++ because someone was wrong on SO once. Then just rolled with it."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1551880818, "post_id": 55022168, "comment_id": 96802673, "body": "Hmm, could&#39;ve been me"}, {"owner": {"reputation": 4768, "user_id": 787366, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a49b6d8775416297257c4c4d36e39967?s=128&d=identicon&r=PG", "display_name": "Shmoopy", "link": "https://stackoverflow.com/users/787366/shmoopy"}, "edited": false, "score": 0, "creation_date": 1552421657, "post_id": 55022168, "comment_id": 97001537, "body": "@StoryTeller a belated question, why do we need the <code>typename = void</code> as the third template argument in the first function?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 4768, "user_id": 787366, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a49b6d8775416297257c4c4d36e39967?s=128&d=identicon&r=PG", "display_name": "Shmoopy", "link": "https://stackoverflow.com/users/787366/shmoopy"}, "edited": false, "score": 0, "creation_date": 1552424097, "post_id": 55022168, "comment_id": 97002570, "body": "@Shmoopy - The third argument gives us a context for further substitution. First a compiler figures out the template arguments. Those are <code>foo</code>, <code>double</code> and <code>void</code>. Then it checks if there is a specialization it can substitute into that matches those arguments. During said substitution the existance of <code>type</code> is checked. And if it exists, <code>void_t</code> is a well formed alias to <code>void</code> and so our specialization matches the third argument."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 10, "last_activity_date": 1551891060, "last_edit_date": 1551891060, "creation_date": 1551872151, "answer_id": 55022168, "question_id": 55022057, "link": "https://stackoverflow.com/questions/55022057/how-to-define-a-typedef-which-is-dependent-on-a-template-arguments-typedef/55022168#55022168", "title": "How to define a typedef which is dependent on a template argument&#39;s typedef", "body": "<p>There is, with a bit of sfinae.</p>\n\n<pre><code>template&lt;class, typename Fallback, typename = void&gt;\nstruct type_or_default {\n    using type = Fallback;\n};\n\ntemplate&lt;class C, typename F&gt;\nstruct type_or_default&lt;C, F, std::void_t&lt;typename C::type&gt;&gt; {\n    using type = typename C::type;\n};\n</code></pre>\n\n<p>This uses the standard convention where template meta-functions expose a member name <code>type</code>, but you can adapt it for your own naming needs. The only non-C++14 bit here is <code>std::void_t</code>, but an equivalent thing can be implemented in C++14 (it just can't be put into namespace <code>std</code>). You use it in your class like this:</p>\n\n<pre><code>template &lt;typename T = foo&gt;\nstruct bar\n{\n    using type = typename type_or_default&lt;T, double&gt;::type;\n};\n</code></pre>\n\n<p>What happens here is that the compiler does its pattern matching when choosing a template specialization. If the class <code>C</code> has a member <code>type</code>, then the partial specialization we provided will be considered more specialized, and as such chosen. Otherwise (if substitution fails when checking the specialization), the primary template is always there to fall back to.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/badc3907f3d44114\" rel=\"nofollow noreferrer\">Live program</a> to tinker with.</p>\n"}, {"tags": [], "owner": {"reputation": 2606, "user_id": 2807083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5243f429132252828f081c61979aa614?s=128&d=identicon&r=PG&f=1", "display_name": "user2807083", "link": "https://stackoverflow.com/users/2807083/user2807083"}, "is_accepted": false, "score": 1, "last_activity_date": 1551878479, "creation_date": 1551878479, "answer_id": 55024126, "question_id": 55022057, "link": "https://stackoverflow.com/questions/55022057/how-to-define-a-typedef-which-is-dependent-on-a-template-arguments-typedef/55024126#55024126", "title": "How to define a typedef which is dependent on a template argument&#39;s typedef", "body": "<p>My five cents to this question.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename T, typename DefaultType&gt;\nstruct CalculateMyType {\n    template &lt;typename C&gt;\n    static typename C::MyType test(typename C::MyType*);\n\n    template &lt;typename&gt;\n    static DefaultType test(...);\n    typedef decltype(test&lt;T&gt;(nullptr)) MyType;\n};\n\n\nstruct foo\n{\n    using MyType = int;\n};\n\n\ntemplate &lt;typename T = foo&gt;\nstruct bar\n{\n    using MyType = typename CalculateMyType&lt;T, double&gt;::MyType;\n};\n\n\nstruct baz\n{\n};\n\nstruct quux\n{\n    using MyType = float;\n};\n\n\n#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\n\ntemplate &lt;typename&gt;\nstruct TypeToStr;\n\ntemplate&lt;&gt; struct TypeToStr&lt;double&gt; { const char * name = \"double\"; };\ntemplate&lt;&gt; struct TypeToStr&lt;float&gt; { const char * name = \"float\"; };\ntemplate&lt;&gt; struct TypeToStr&lt;int&gt; { const char * name = \"int\"; };\n\nint main() {\n\n    std::cout &lt;&lt; \"bar&lt;foo&gt;::MyType = \" &lt;&lt; TypeToStr&lt;bar&lt;foo&gt;::MyType&gt;().name &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"bar&lt;baz&gt;::MyType = \" &lt;&lt; TypeToStr&lt;bar&lt;baz&gt;::MyType&gt;().name &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"bar&lt;quux&gt;::MyType = \" &lt;&lt; TypeToStr&lt;bar&lt;quux&gt;::MyType&gt;().name &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/a84544d04e7614ef\" rel=\"nofollow noreferrer\">Live program</a></p>\n"}], "owner": {"reputation": 4768, "user_id": 787366, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a49b6d8775416297257c4c4d36e39967?s=128&d=identicon&r=PG", "display_name": "Shmoopy", "link": "https://stackoverflow.com/users/787366/shmoopy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 1, "accepted_answer_id": 55022168, "answer_count": 2, "score": 5, "last_activity_date": 1552070155, "creation_date": 1551871815, "last_edit_date": 1552070155, "question_id": 55022057, "link": "https://stackoverflow.com/questions/55022057/how-to-define-a-typedef-which-is-dependent-on-a-template-arguments-typedef", "title": "How to define a typedef which is dependent on a template argument&#39;s typedef", "body": "<p>I'd like to make a <code>typedef</code> which is dependent on the existence of a <code>typedef</code> in a template argument:</p>\n\n<pre><code>struct foo\n{\n    using MyType = int;\n};\n\ntemplate &lt;typename T = foo&gt;\nstruct bar\n{\n    // Pseudo code\n    #if T::MyType is defined\n        using MyType = T::MyType;\n    #else\n        using MyType = double;\n    #endif\n};\n</code></pre>\n\n<p>Is there a way to get it to work using <code>std::conditional</code> or something else in C++14?</p>\n"}, {"tags": ["c++", "performance", "data-structures", "performance-testing", "primes"], "comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1551998534, "post_id": 55022028, "comment_id": 96857486, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/189623/discussion-on-question-by-apoorva-raju-prime-number-below-2-billion-usage-of-s\">moved to chat</a>."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1552120571, "post_id": 55022028, "comment_id": 96897946, "body": "to whom it may concern: <b><a href=\"https://ideone.com/VPOnux\" rel=\"nofollow noreferrer\">a test at ideone</a> completely contradicts the claims made in this question.</b>"}, {"owner": {"reputation": 720, "user_id": 1608467, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/66ce946a7677bdbd5bca63d857511b85?s=128&d=identicon&r=PG", "display_name": "fbparis", "link": "https://stackoverflow.com/users/1608467/fbparis"}, "edited": false, "score": 0, "creation_date": 1552299076, "post_id": 55022028, "comment_id": 96941954, "body": "Approach 3: get the list online :) (for example here: <a href=\"http://www.primos.mat.br/2T_en.html\" rel=\"nofollow noreferrer\">primos.mat.br/2T_en.html</a>)"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 720, "user_id": 1608467, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/66ce946a7677bdbd5bca63d857511b85?s=128&d=identicon&r=PG", "display_name": "fbparis", "link": "https://stackoverflow.com/users/1608467/fbparis"}, "edited": false, "score": 0, "creation_date": 1552300335, "post_id": 55022028, "comment_id": 96942681, "body": "@fbparis they are not asking for advice on how to make it faster. they are asking why it is slower -- but it isn&#39;t, according to the test on ideone. quite the opposite, it is faster, just as expected."}], "answers": [{"comments": [{"owner": {"reputation": 280, "user_id": 9434763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44e4c8cf183157bf65159f3e0d532cc?s=128&d=identicon&r=PG&f=1", "display_name": "Apoorva Raju", "link": "https://stackoverflow.com/users/9434763/apoorva-raju"}, "edited": false, "score": 0, "creation_date": 1551874191, "post_id": 55022473, "comment_id": 96798808, "body": "@tkausi Thanks a ton for explanation...you solution helped me to reduce execution time from 180 sec to 22 sec .... will try to optimization more by exploring options given by Bathsheba and increase the performance"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "reply_to_user": {"reputation": 280, "user_id": 9434763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44e4c8cf183157bf65159f3e0d532cc?s=128&d=identicon&r=PG&f=1", "display_name": "Apoorva Raju", "link": "https://stackoverflow.com/users/9434763/apoorva-raju"}, "edited": false, "score": 0, "creation_date": 1551880411, "post_id": 55022473, "comment_id": 96802402, "body": "@ApoorvaRaju your timings are so astronomical that there must be something else going on with your <i>algorithm</i>. normally the time for this should be in milliseconds, or less."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "reply_to_user": {"reputation": 280, "user_id": 9434763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44e4c8cf183157bf65159f3e0d532cc?s=128&d=identicon&r=PG&f=1", "display_name": "Apoorva Raju", "link": "https://stackoverflow.com/users/9434763/apoorva-raju"}, "edited": false, "score": 0, "creation_date": 1551882892, "post_id": 55022473, "comment_id": 96803927, "body": "@ApoorvaRaju I&#39;ve added a sieve implementation which should be a good starting point for further improvements."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1551892771, "post_id": 55022473, "comment_id": 96810241, "body": "FYI the code from <a href=\"https://stackoverflow.com/a/9557173/849891\">this answer of mine</a> takes 0 seconds on ideone to calculate 10 primes above 2 billion. Should be straightforward to amend to finding the topmost of n primes <i>below</i> a given value (or just finding the 1st one below, but that would mean counting backwards and adjusting the logic for that, which could be a little bit trickier)."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1551893516, "post_id": 55022473, "comment_id": 96810682, "body": "@tkausl the reason it takes so much time is that you calculate approximately 100 million primes, below the 2 billion. you don&#39;t need that; about 4650 primes, below the <code>sqrt</code> of 2 billion,  is enough."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1551894089, "post_id": 55022473, "comment_id": 96811010, "body": "@WillNess You&#39;re right, not sure how I missed that. Also, thanks for linking your algorithm; I don&#39;t understand it yet but I&#39;ll certainly study it."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1551894139, "post_id": 55022473, "comment_id": 96811045, "body": "just a  sieve of Eratosthenes up to the <code>sqrt(top + delta)</code>, hopscotching to the separate <i>&quot;offset&quot;</i> segment  from <code>top</code> to <code>(top + delta)</code>."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1551899316, "post_id": 55022473, "comment_id": 96813425, "body": "FYI <a href=\"https://ideone.com/VPOnux\" rel=\"nofollow noreferrer\">a test at ideone</a> completely contradicts the claims made in this question."}], "tags": [], "owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "is_accepted": true, "score": 8, "last_activity_date": 1551893709, "last_edit_date": 1551893709, "creation_date": 1551873123, "answer_id": 55022473, "question_id": 55022028, "link": "https://stackoverflow.com/questions/55022028/prime-number-below-2-billion-usage-of-stdlist-hinders-performance/55022473#55022473", "title": "prime number below 2 billion - usage of std::list hinders performance", "body": "<p>The reason your second example takes longer is you're iterating a <code>std::list</code>.</p>\n\n<p>A <code>std::list</code> in C++ is a linked list, which means it doesn't use contiguous memory. This is bad because to iterate the list you must jump from node to node in a (to the CPU/prefetcher) unpredictable way. Also, You're most likely only \"using\" a few bytes of each cacheline. RAM is slow. Fetching a byte from RAM takes a <strong>lot</strong> longer than fetching it from L1. CPUs are fast these days, so your program is most of the time not doing anything and waiting for memory to arrive.</p>\n\n<p>Use a <code>std::vector</code> instead. It stores all values one after the other and iterating is very cheap. Since you're iterating forward in memory without jumping, you're using the <em>full</em> cacheline and your prefetcher will be able to fetch further pages before you need them because your access of memory is predictable.</p>\n\n<p>It has been proven by numerous people, including Bjarne Stroustrup, that <code>std::vector</code> is in a lot of cases faster than <code>std::list</code>, even in cases where the <code>std::list</code> has \"theoretically\" better complexity (random insert, delete, ...) just because caching helps a lot. So always use <code>std::vector</code> as your default. And if you <em>think</em> a linked list would be faster in your case, <strong>measure</strong> it and be surprised that - most of the time - <code>std::vector</code> dominates.</p>\n\n<p>Edit: as others have noted, your method of finding primes isn't very efficient. I just played around a bit and implemented a <a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow noreferrer\">Sieve of Eratosthenes</a> using a bitset.</p>\n\n<pre><code>constexpr int max_prime = 1000000000;\nstd::bitset&lt;max_prime&gt; *bitset = new std::bitset&lt;max_prime&gt;{};\n// Note: Bit SET means NO prime\nbitset-&gt;set(0);\nbitset-&gt;set(1);\n\nfor(int i = 4; i &lt; max_prime ; i += 2)\n    bitset-&gt;set(i); // set all even numbers\nint max = sqrt(max_prime);\nfor(int i = 3; i &lt; max; i += 2) { // No point testing even numbers as they can't be prime\n    if(!bitset-&gt;test(i)) { // If i is prime\n        for(int j = i * 2; j &lt; no_primes; j += i)\n            bitset-&gt;set(j); // set all multiples of i to non-prime\n    }\n}\n</code></pre>\n\n<p>This takes between <strike>4.2 and 4.5 seconds</strike> 30 seconds (not sure why it changed that much after slight modifications... must be an optimization I'm not hitting anymore) to find all primes below one Billion (1,000,000,000) on my machine. Your approach took way too long even for 100 million. I cancelled the 1 Billion search after about two minutes.</p>\n\n<p>Comparison for 100 million:</p>\n\n<pre><code>time taken:                63.515 seconds\ntime taken bitset:         1.874 seconds\nNo of divisions :          1975961174\nNo of primes found:        5761455\nNo of primes found bitset: 5761455\n</code></pre>\n\n<p>I'm not a mathematician so I'm pretty sure there are still ways to optimize it further, I only optimize for even numbers.</p>\n"}, {"comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1551873596, "post_id": 55022574, "comment_id": 96798458, "body": "<code>std::list is a linked list. Its is mostly useful where you want to insert or remove elements randomly (i.e. not from the end).</code> even in this case <i>one needs to measure performance</i>. <code>std::vector</code> is often even in these cases faster."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1551899499, "post_id": 55022574, "comment_id": 96813527, "body": "FYI <a href=\"https://ideone.com/VPOnux\" rel=\"nofollow noreferrer\">a test at ideone</a> completely contradicts the claims made in this question."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1551943749, "post_id": 55022574, "comment_id": 96827697, "body": "@WillNess that&#39;s why the first part of my answer was to enable optimisations as that seemed the most likely cause of slowness"}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1551952806, "post_id": 55022574, "comment_id": 96832752, "body": "if it&#39;s unrepeatable it didn&#39;t happen, is what scientific method tells us. the question is, could you repeat the observations in the question with whichever settings? my best guess still remains erroneous testing, because algorithms always win over optimizations, and there&#39;s a clear algorithmic advantage for &quot;list&quot; over &quot;numbers&quot; algorithm."}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 2, "last_activity_date": 1551873353, "creation_date": 1551873353, "answer_id": 55022574, "question_id": 55022028, "link": "https://stackoverflow.com/questions/55022028/prime-number-below-2-billion-usage-of-stdlist-hinders-performance/55022574#55022574", "title": "prime number below 2 billion - usage of std::list hinders performance", "body": "<p>The first thing to do is make sure you are compiling with optimisations enabled. The c++ standard library template classes tend to perform very poorly with unoptimised code as they generate lots of function calls. The optimiser inlines most of these function calls which makes them much cheaper.</p>\n\n<p><code>std::list</code> is a linked list. Its is mostly useful where you want to insert or remove elements randomly (i.e. not from the end).</p>\n\n<p>For the case where you are only appending to the end of a list <code>std::list</code> has the following issues:</p>\n\n<ul>\n<li>Iterating through the list is relatively expensive as the code has to follow node pointers and then retrieve the data</li>\n<li>The list uses quite a lot more memory, each element needs a pointer to the previous and next nodes in addition to the actual data. On a 64-bit system this equates to 20 bytes per element rather than 4 for a list of <code>int</code></li>\n<li>As the elements in the list are not contiguous in memory the compiler can't perform as many SIMD optimisations and you will suffer more from CPU cache misses</li>\n</ul>\n\n<p>A <code>std::vector</code> would solve all of the above as its memory is contiguous and iterating through it is basically just a case of incrementing an array index. You do need to make sure that you call <code>reserve</code> on your vector at the beginning with a sufficiently large value so that appending to the vector doesn't cause the whole array to be copied to a new larger array.</p>\n\n<p>A bigger optimisation than the above would be to use the <a href=\"https://en.wikipedia.org/wiki/Sieve_of_Eratosthenes\" rel=\"nofollow noreferrer\">Sieve of Eratosthenes</a> to calculate your primes. As generating this light require random deletions (depending on your exact implementation) <code>std::list</code> might perform better than <code>std::vector</code> though even in this case the overheads of <code>std::list</code> might not outweigh its costs.</p>\n"}, {"tags": [], "owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "is_accepted": false, "score": 1, "last_activity_date": 1552300223, "last_edit_date": 1552300223, "creation_date": 1551901380, "answer_id": 55031044, "question_id": 55022028, "link": "https://stackoverflow.com/questions/55022028/prime-number-below-2-billion-usage-of-stdlist-hinders-performance/55031044#55031044", "title": "prime number below 2 billion - usage of std::list hinders performance", "body": "<h2><a href=\"https://ideone.com/VPOnux\" rel=\"nofollow noreferrer\"><em>A test at Ideone</em></a> (the OP code with few superficial alterations) completely <strong><em>contradicts</em></strong> the claims made in this question:</h2>\n\n<pre><code>/* check_prime__list:\n\n              time taken       No of divisions         No of primes\n    10M:    0.873 seconds        286144936                664579\n    20M:    2.169 seconds        721544444               1270607   */\n\n    <b>2B:       projected time: at least 16 minutes but likely much more</b>   (*)\n\n/* check_prime__nums:\n\n              time taken       No of divisions         No of primes\n    10M:    4.650 seconds       1746210131                664579\n    20M:   12.585 seconds       4677014576               1270607   */\n\n    <b>2B:       projected time: at least 3 hours but likely much more</b>      (*)</code></pre>\n\n<p>I also changed the type of the number of divisions counter to <code>long int</code> because it was wrapping around the data type limit. So they <em>could</em> have been misinterpreting <em>that</em>.</p>\n\n<p>But <strong><em>the run time</em></strong> wasn't being affected by that. A wall clock is a wall clock.</p>\n\n<p>Most likely explanation seems to be a sloppy testing by the OP, with different values used in each test case, by mistake. </p>\n\n<hr>\n\n<p>(*) The time projection was made by the <a href=\"http://en.wikipedia.org/wiki/Analysis_of_algorithms#Empirical_orders_of_growth\" rel=\"nofollow noreferrer\">empirical orders of growth</a> analysis:</p>\n\n<pre><code>100**1.32 * 2.169 / 60 = 15.8\n\n100**1.45 * 12.585 / 3600 = 2.8\n</code></pre>\n\n<p>Empirical orders of growth, as measured on the given range of sizes, were noticeably better for the list algorithm, <i>n<sup>1.32</sup></i> vs. the <i>n<sup>1.45</sup></i> for the testing by all numbers. This is entirely expected from theoretical complexity, since there are fewer primes than all numbers up to <em>n</em>, by a factor of <em>log n</em>, for a total complexity of <i>O(n<sup>1.5</sup>/log n)</i> vs.  <i>O(n<sup>1.5</sup>)</i>. It is also highly unlikely for any implementational discrepancy to beat an actual algorithmic advantage.</p>\n"}], "owner": {"reputation": 280, "user_id": 9434763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c44e4c8cf183157bf65159f3e0d532cc?s=128&d=identicon&r=PG&f=1", "display_name": "Apoorva Raju", "link": "https://stackoverflow.com/users/9434763/apoorva-raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 55022473, "answer_count": 3, "score": 1, "last_activity_date": 1552300223, "creation_date": 1551871734, "last_edit_date": 1552298793, "question_id": 55022028, "link": "https://stackoverflow.com/questions/55022028/prime-number-below-2-billion-usage-of-stdlist-hinders-performance", "title": "prime number below 2 billion - usage of std::list hinders performance", "body": "<p>Problem Statement is to find prime number below 2 billion in timeframe &lt; 20 sec.\nI followed below approaches.</p>\n\n<ol>\n<li><p>Divide the number n with <strong>list of number k ( k &lt; sqrt(n))</strong> - took 20 sec</p></li>\n<li><p>Divide the number n  with <strong>list of prime number below sqrt(n)</strong>.In this scenario I stored prime numbers in std::list - took more than 180 sec</p></li>\n</ol>\n\n<p>Can someone help me understand why did 2nd approach take longtime even though we reduced no of divisions by 50%(approx)? or Did I choose wrong Data Structure?</p>\n\n<p><strong>Approach 1:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;list&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\nlist&lt;long long&gt; primeno;\nvoid ListPrimeNumber();\n\nint main()\n{\n    clock_t time_req = clock();\n    ListPrimeNumber();\n    time_req = clock() - time_req;\n    cout &lt;&lt; \"time taken \" &lt;&lt; static_cast&lt;float&gt;(time_req) / CLOCKS_PER_SEC &lt;&lt; \" seconds\" &lt;&lt; endl;\n    return 0;\n}\n\nvoid check_prime(int i);\n\nvoid ListPrimeNumber()\n{\n    primeno.push_back(2);\n    primeno.push_back(3);\n    primeno.push_back(5);\n    for (long long i = 6; i &lt;= 20000000; i++)\n    {\n        check_prime(i);\n    }\n\n}\n\nvoid check_prime(int i)\n{\n    try\n    {\n        int j = 0;\n        int limit = sqrt(i);\n        for (j = 2 ; j &lt;= limit;j++)\n        {\n            if(i % j == 0)\n            {\n                break;\n            }\n        }\n        if( j &gt; limit)\n        {\n            primeno.push_back(i);\n        }\n    }\n\n    catch (exception ex)\n    {\n        std::cout &lt;&lt; \"Message\";\n    }\n}\n</code></pre>\n\n<p><strong>Approach 2 :</strong> </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;list&gt;\n#include &lt;ctime&gt;\nusing namespace std;\n\nlist&lt;long long&gt; primeno;\nint noofdiv = 0;\nvoid ListPrimeNumber();\n\nint main()\n{\n    clock_t time_req = clock();\n    ListPrimeNumber();\n    time_req = clock() - time_req;\n    cout &lt;&lt; \"time taken \" &lt;&lt; static_cast&lt;float&gt;(time_req) / CLOCKS_PER_SEC &lt;&lt; \" seconds\" &lt;&lt; endl;\n    cout &lt;&lt; \"No of divisions : \" &lt;&lt; noofdiv;\n    return 0;\n}\n\nvoid check_prime(int i);\n\nvoid ListPrimeNumber()\n{\n    primeno.push_back(2);\n    primeno.push_back(3);\n    primeno.push_back(5);\n    for (long long i = 6; i &lt;= 10000; i++)\n    {\n        check_prime(i);\n    }\n\n}\n\nvoid check_prime(int i)\n{\n    try\n    {\n        int limit = sqrt(i);\n        for (int iter : primeno)\n        {\n            noofdiv++;\n            if (iter &lt;= limit &amp;&amp; (i%iter) == 0)\n            {\n                break;\n            }\n            else if (iter &gt; limit)\n            {\n                primeno.push_back(i);\n                break;\n            }\n        }\n    }\n\n    catch (exception ex)\n    {\n        std::cout &lt;&lt; \"Message\";\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "r", "optimization", "statistics"], "answers": [{"tags": [], "owner": {"reputation": 14779, "user_id": 8386140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pUC6i.png?s=128&g=1", "display_name": "duckmayr", "link": "https://stackoverflow.com/users/8386140/duckmayr"}, "is_accepted": true, "score": 2, "last_activity_date": 1551875815, "creation_date": 1551875815, "answer_id": 55023294, "question_id": 55021837, "link": "https://stackoverflow.com/questions/55021837/calling-bfgs-optimization-in-c-from-optim-c/55023294#55023294", "title": "Calling BFGS optimization in C++ from optim.c", "body": "<p>It sounds like you've already been using this advice, but you need to go a bit deeper: <a href=\"http://wiki.c2.com/?UseTheSourceLuke\" rel=\"nofollow noreferrer\">\"Use the source, Luke\"</a>.</p>\n\n<p>My starting point was to, from the R console, type simply</p>\n\n<pre><code>optim\n</code></pre>\n\n<p>This prints the R source code of that function. There I saw it calls</p>\n\n<pre><code>.External2(C_optim, par, fn1, gr1, method, con, lower, upper)\n</code></pre>\n\n<p>My favorite mirror for the R source code is <a href=\"https://github.com/wch/r-source\" rel=\"nofollow noreferrer\">this GitHub repo</a>. If you head there, search for \"optim\", and filter only the C results, we'll go to the top hit, <a href=\"https://github.com/wch/r-source/blob/5a156a0865362bb8381dcd69ac335f5174a4f60c/src/library/stats/src/optim.c\" rel=\"nofollow noreferrer\"><code>src/library/stats/src/optim.c</code></a>. Then we can see how the C-level <a href=\"https://github.com/wch/r-source/blob/5a156a0865362bb8381dcd69ac335f5174a4f60c/src/library/stats/src/optim.c#L177\" rel=\"nofollow noreferrer\"><code>optim()</code></a> (line 177) function <a href=\"https://github.com/wch/r-source/blob/5a156a0865362bb8381dcd69ac335f5174a4f60c/src/library/stats/src/optim.c#L295\" rel=\"nofollow noreferrer\">calls <code>vmmin()</code></a> (line 295).</p>\n\n<p>The way <code>optim()</code> initializes those arguments is as follows</p>\n\n<pre><code>int n           length(par)\ndouble *b       vect(npar); dpar[i] = REAL(par)[i] / (OS-&gt;parscale[i])\ndouble *Fmin    0.0\noptimfn fn      function defined in the C code\noptimgr gr      function defined in the C code\nint maxit       asInteger(getListElement(options, \"maxit\"))\nint trace       asInteger(getListElement(options, \"trace\"))\nint *mask       mask = (int *) R_alloc(npar, sizeof(int));\n                for (i = 0; i &lt; npar; i++) mask[i] = 1;\ndouble abstol   asInteger(getListElement(options, \"abstol\"))\ndouble reltol   asInteger(getListElement(options, \"reltol\"))\nint nREPORT     asInteger(getListElement(options, \"REPORT\"));\nvoid *ex        OptStruct OS; /* tons of stuff done to this */\nint *fncount    0\nint *grcount    0\nint *fail       0\n</code></pre>\n\n<p>I haven't put in all the details here, but I believe this should be enough to help you figure out how you need to use these things in your own function, once you find out about one other thing: the control list in <code>optim()</code>. If you notice in the <code>.External2()</code> call from above, there's an argument called <code>con</code>. This is defined in the R code as</p>\n\n<pre><code>con &lt;- list(trace = 0, fnscale = 1, parscale = rep.int(1, npar),\n        ndeps = rep.int(1e-3, npar),\n        maxit = 100L, abstol = -Inf, reltol = sqrt(.Machine$double.eps),\n        alpha = 1.0, beta = 0.5, gamma = 2.0,\n        REPORT = 10, warn.1d.NelderMead = TRUE,\n        type = 1,\n        lmm = 5, factr = 1e7, pgtol = 0,\n        tmax = 10, temp = 10.0)\n</code></pre>\n\n<p>though these elements can be overridden by user input in the <code>control</code> argument, and if you check out <code>help(\"optim\")</code>, you'll see</p>\n\n<blockquote>\n  <p>The \u2018control\u2019 argument is a list that can supply any of the following components:<br>\n  &nbsp;&nbsp;&nbsp;&nbsp;\u2018trace\u2019 ...</p>\n</blockquote>\n\n<p>The C function refers to this list by the name <code>options</code> that you see referenced several times in the table I constructed above.</p>\n"}], "owner": {"reputation": 867, "user_id": 2340598, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/abef243ec80de5b0757bf3ab016aa72f?s=128&d=identicon&r=PG", "display_name": "maciek", "link": "https://stackoverflow.com/users/2340598/maciek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 55023294, "answer_count": 1, "score": 0, "last_activity_date": 1551875815, "creation_date": 1551871174, "question_id": 55021837, "link": "https://stackoverflow.com/questions/55021837/calling-bfgs-optimization-in-c-from-optim-c", "title": "Calling BFGS optimization in C++ from optim.c", "body": "<p>So I have to rewrite my R code to C++. That is relatively easy, given the <code>Rcpp</code> package. I came across a problem while solving an optimization problem. In R I call:</p>\n\n<pre><code>optimum_optim = optim(par=A, fn=negative_LL, gr=negative_grad_LL, .c = c, .t = t, .i = i, .N = N, method = 'BFGS')\n</code></pre>\n\n<p>Given that I have rewritten the <code>negative_LL</code> and <code>negative_grad_LL</code> functions into my C++ file already I wanted to call the underlying routine for BFGS optimization from R: it is the <code>vmmin</code> function from optim.c<br>\nI have the problem that I cannot understand the signature of that function. It is:</p>\n\n<pre><code>vmmin(int n0, double *b, double *Fmin, optimfn fminfn, optimgr fmingr,\n      int maxit, int trace, int *mask,\n      double abstol, double reltol, int nREPORT, void *ex,\n      int *fncount, int *grcount, int *fail)\n</code></pre>\n\n<p>It's not that I did not put any effort into search - I just cannot find a description... Could someone please help call this function in my particular case (and tell me what the arguments are)?</p>\n"}, {"tags": ["c++", "opengl", "keyboard", "glfw", "glm-math"], "comments": [{"owner": {"reputation": 475, "user_id": 2899350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QIMka.jpg?s=128&g=1", "display_name": "VVV", "link": "https://stackoverflow.com/users/2899350/vvv"}, "edited": false, "score": 0, "creation_date": 1551872209, "post_id": 55021725, "comment_id": 96797618, "body": "In GLFW key event may have following actions: <code>GLFW_PRESS</code>, <code>GLFW_RELEASE</code> or <code>GLFW_REPEAT</code>. So by filtering on the <code>action != GLFW_RELEASE</code> condition you effectively getting <code>GLFW_PRESS</code> and <code>GLFW_REPEAT</code> events. Try changing the condition to <code>action == GLFW_PRESS</code> and you should get the event only once, when the key is pressed."}, {"owner": {"reputation": 85, "user_id": 9263502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300a47fffcc9b94dbbd79e48fb777f67?s=128&d=identicon&r=PG&f=1", "display_name": "Popescu Flaviu", "link": "https://stackoverflow.com/users/9263502/popescu-flaviu"}, "reply_to_user": {"reputation": 475, "user_id": 2899350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QIMka.jpg?s=128&g=1", "display_name": "VVV", "link": "https://stackoverflow.com/users/2899350/vvv"}, "edited": false, "score": 0, "creation_date": 1551872413, "post_id": 55021725, "comment_id": 96797736, "body": "@VVV, I don&#39;t intend to get this result. I want to get events like these from GLFW_REPEAT, from the time I get GLFW_PRESS, I want continuously events."}], "answers": [{"comments": [{"owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "edited": false, "score": 0, "creation_date": 1551873274, "post_id": 55022415, "comment_id": 96798252, "body": "What you get on windows is the exact behaviour you get if you open notepad and hold a key down :- the repeat behaviour is more tuned to provide a &quot;good&quot; experience to someone wanting to type lots of symbols in a document. Game engines usually need up/down notifications, or, for devices like joysticks and pressure sensitive buttons, they simply poll the device per frame."}], "tags": [], "owner": {"reputation": 85, "user_id": 9263502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300a47fffcc9b94dbbd79e48fb777f67?s=128&d=identicon&r=PG&f=1", "display_name": "Popescu Flaviu", "link": "https://stackoverflow.com/users/9263502/popescu-flaviu"}, "is_accepted": false, "score": 2, "last_activity_date": 1551872912, "creation_date": 1551872912, "answer_id": 55022415, "question_id": 55021725, "link": "https://stackoverflow.com/questions/55021725/glfwsetkeycallback-from-glfw-is-not-called-constantly-during-a-key-press/55022415#55022415", "title": "glfwSetKeyCallback() from GLFW is not called constantly during a key press", "body": "<p>Nvm. It seems like my expectations were wrong. I should just listen for GLFW_PRESS and GLFW_RELEASE, store the key status, and use if(status) in my main loop.</p>\n"}, {"tags": [], "owner": {"reputation": 593, "user_id": 5516907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566557951fcc6a16368cc900b1dfdb35?s=128&d=identicon&r=PG&f=1", "display_name": "PeaBrain", "link": "https://stackoverflow.com/users/5516907/peabrain"}, "is_accepted": false, "score": 1, "last_activity_date": 1551891410, "creation_date": 1551891410, "answer_id": 55028385, "question_id": 55021725, "link": "https://stackoverflow.com/questions/55021725/glfwsetkeycallback-from-glfw-is-not-called-constantly-during-a-key-press/55028385#55028385", "title": "glfwSetKeyCallback() from GLFW is not called constantly during a key press", "body": "<p>There's no need to use event callbacks at all if you just want to know wether a key is pressed or not. Just use <code>glfwGetKey(window,key)</code> to get the current key status (this returns <code>GLFW_PRESS</code> or <code>GLFW_RELEASE</code>). See <a href=\"https://www.glfw.org/docs/latest/input_guide.html#input_key\" rel=\"nofollow noreferrer\">here</a> for more details.</p>\n"}], "owner": {"reputation": 85, "user_id": 9263502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300a47fffcc9b94dbbd79e48fb777f67?s=128&d=identicon&r=PG&f=1", "display_name": "Popescu Flaviu", "link": "https://stackoverflow.com/users/9263502/popescu-flaviu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1177, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1551891410, "creation_date": 1551870777, "last_edit_date": 1551889488, "question_id": 55021725, "link": "https://stackoverflow.com/questions/55021725/glfwsetkeycallback-from-glfw-is-not-called-constantly-during-a-key-press", "title": "glfwSetKeyCallback() from GLFW is not called constantly during a key press", "body": "<p>I'm trying to make my game do something when I press a key. I'm using GLFW to handle Windows API for me. I got stuck and confused when I used the mention callback function in title.</p>\n\n<p>Referenced doc: <a href=\"https://www.glfw.org/docs/latest/input_guide.html#input_keyboard\" rel=\"nofollow noreferrer\">https://www.glfw.org/docs/latest/input_guide.html#input_keyboard</a></p>\n\n<p>I followed \"Key input\" resources (not \"Text input\"), but I get a kinda text input callback curve, like, when I keep pressed a key, I get pressed key event, then it stops for some time, and then I get repeated events. Shouldn't callbacks be constant in time (without that time gap)? This is my code:</p>\n\n<pre><code>void onKeyPress(GLFWwindow* window, int key, int scancode, int action, int mods)\n{\n    if (key == GLFW_KEY_W &amp;&amp; action != GLFW_RELEASE)\n    {\n        camera.pos += glm::vec3(0.0f, 0.0f, 1.0f);\n        updateCameraMatrices();\n    }\n}\n\n// ...\n\nglfwSetKeyCallback(window, onKeyPress);\n</code></pre>\n"}, {"tags": ["c++", "stream"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1551870820, "post_id": 55021697, "comment_id": 96796786, "body": "That&#39;s not possible, but you could overload the <code>operator&gt;&gt;</code> function to read a <code>Token</code> object."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1551873040, "post_id": 55021697, "comment_id": 96798108, "body": "Not sure, but maybe specializing <a href=\"https://en.cppreference.com/w/cpp/string/char_traits\" rel=\"nofollow noreferrer\"><code>std::char_traits</code></a> (or writing a custom replacement) for your type is what you want?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1551873197, "post_id": 55021697, "comment_id": 96798204, "body": "@HolyBlackCat That&#39;s probably not enough, as e.g. the <a href=\"https://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\"><code>get</code></a> function reads a &quot;character&quot; from the underlying buffer, and that needs to be specialized as well (or maybe even reimplemented)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551873386, "post_id": 55021697, "comment_id": 96798313, "body": "@reavenisadesk Can you please tell us what problem you&#39;re really trying to solve? Why do you need to get <code>Token</code> from the <code>get</code> or <code>peek</code> functions? Are you creating a tokenizer for a parser/compiler? Then you&#39;re better of doing it in layers: The parser extracts tokens from the tokenizer, the tokenizer extracts character from the stream, the stream extracts characters from the buffer, which in turn reads the characters from the file (or string, in the case of e.g. <code>std::istringstream</code>)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2269707"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551873710, "post_id": 55021697, "comment_id": 96798540, "body": "@Someprogrammerdude you are right, I&#39;m writing a tokenizer. I want use a stream is because the <code>peek()</code> function is really handy for looking ahead tokens. I can implement this with vector or something else, I just want to know if the stream can do this."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1551873919, "post_id": 55021697, "comment_id": 96798663, "body": "The problem is that you still need to read individual characters from the file you&#39;re parsing. It&#39;s much simpler to create a tokenizer class which implements a suitable interface (with <code>get</code> and <code>peek</code> etc.) and have this class use the stream to read the characters."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1551874089, "post_id": 55021697, "comment_id": 96798753, "body": "With that said (and thanks for the remainder of @HolyBlackCat about <code>std::char_traits</code>) you can make your own <code>istream</code> class, either by specializing <code>std::basic_istream</code> for your token type or by inheritance. Then the stream could return <code>Token</code> structures, and read characters directly from the buffer. But it would be more complex, and there would be a lot of functionality that you might need to implement even if it&#39;s not going to be used. Creating a simple tokenizer class is really what I recommend."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2269707"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551874127, "post_id": 55021697, "comment_id": 96798776, "body": "@Someprogrammerdude yes, my lex use istream to handle every characters, I just want my tokens be a stream as well, I totally understand your suggestion and I&#39;m gonna do so."}], "answers": [{"tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": false, "score": 0, "last_activity_date": 1551876383, "last_edit_date": 1551876383, "creation_date": 1551876070, "answer_id": 55023372, "question_id": 55021697, "link": "https://stackoverflow.com/questions/55021697/can-i-custom-a-stream-whose-element-is-a-struct/55023372#55023372", "title": "can I custom a stream whose element is a struct", "body": "<p>Here is a recipe for a way to create a custom stream object which can be done by inheriting <code>std::stringbuf</code></p>\n\n<pre><code>class MyStreamBuf : public std::stringbuf {\n//... override some functions from stringbuf (eg. sync) to change behavior\n};\n\nclass MyInputStream : public std::istream {\n  MyStreamBuf buf_;\npublic:\n  MyInputStream : std::istream(&amp;buf_){\n  }\n\n//... add more interface here, etc.\n\n}\n</code></pre>\n\n<p>Continueing from that you should be able to acomplish what you asking for.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2269707"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1551876383, "creation_date": 1551870707, "question_id": 55021697, "link": "https://stackoverflow.com/questions/55021697/can-i-custom-a-stream-whose-element-is-a-struct", "title": "can I custom a stream whose element is a struct", "body": "<p>I got a struct type, let's say it looks like this:</p>\n\n<pre><code>struct Token {\n  int type;\n  char value[64];\n};\n</code></pre>\n\n<p>and I want put objects of <code>Token</code> to a stream, and functions like <code>get()</code>, <code>peek()</code> all returns an object(or a reference/pointer)?</p>\n\n<p>something like this:\n<code>Token token = stream.get();</code> or\n<code>Token* token = stream.get();</code></p>\n"}, {"tags": ["c++", "oop", "memory-management", "dll"], "comments": [{"owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1551875289, "post_id": 55021420, "comment_id": 96799422, "body": "What is the question ?"}, {"owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "reply_to_user": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1551879782, "post_id": 55021420, "comment_id": 96802037, "body": "Does it protect against all the possible threats (that are introduced when exporting objects across dll boundaries) and encourages good design?"}, {"owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1551880009, "post_id": 55021420, "comment_id": 96802160, "body": "What threats ? This concept is not defined in your question and looks highly subjective."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1551880450, "post_id": 55021420, "comment_id": 96802429, "body": "I think you&#39;re trying to do this: <a href=\"https://www.slideshare.net/StefanusDuToit/cpp-con-2014-hourglass-interfaces-for-c-apis\" rel=\"nofollow noreferrer\">slideshare.net/StefanusDuToit/&hellip;</a>"}, {"owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "reply_to_user": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1551882114, "post_id": 55021420, "comment_id": 96803444, "body": "@fjardon EDITed. I hope that is more descriptive"}, {"owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "edited": false, "score": 0, "creation_date": 1551882127, "post_id": 55021420, "comment_id": 96803453, "body": "@Arkadiy Thanks. I will take a look into it"}], "owner": {"reputation": 386, "user_id": 2500149, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3c60ba925b7bb5ec4df65f0e57100c35?s=128&d=identicon&r=PG", "display_name": "Marcin K.", "link": "https://stackoverflow.com/users/2500149/marcin-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1551881952, "creation_date": 1551869864, "last_edit_date": 1551881952, "question_id": 55021420, "link": "https://stackoverflow.com/questions/55021420/problem-of-object-oriented-design-and-dll-interface-in-c-what-do-you-think-ab", "title": "Problem of Object Oriented design and dll interface in c++. What do you think about this solution?", "body": "<p>recently I've been thinking about the problem of passing object through dll boundaries in c++. I found many solutions with advantages and disadvantages. I wasn't satisfied with them so I spend a while thinking about how to solve this issue. Finally I came up with this solution. What do you think about it? Does it protect against all the possible threats and encourages good design?</p>\n\n<p>EDIT. By threats I mean issues listed in the Marked Answer to this question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/22797418/how-do-i-safely-pass-objects-especially-stl-objects-to-and-from-a-dll\">How do I safely pass objects, especially STL objects, to and from a DLL?</a></p>\n\n<p>In my understanding it should bypass all the problem with compiling dll and exe with different compilers, using static cruntime, passing objects through dll boundaries. The only thing that goes through dll boundary is object pointer and function addresses, which - to the best of my knowledge - is safe. The inlined creation of shared_ptr makes sure that the layout of shared_ptr is taken from client module. Yet the code of creation and destruction is in dll.cpp so it will happen in dll module. </p>\n\n<p>Of course naming functions \"doNotUse\" is not a perfect solution to make people... not use your functions, but I can't see how to avoid that if we insist on using C interface (c++ would enable us to use private / protected access keywords).</p>\n\n<p>dll.h</p>\n\n<pre><code>#ifdef DLL_EXPORTS\n#define EXPORT_OR_IMPORT __declspec(dllexport)\n#else\n#define EXPORT_OR_IMPORT __declspec(dllimport)\n#endif\n#include &lt;memory&gt;\n\nclass theInterface\n{\npublic:\n    virtual void print() = 0;\n    virtual ~theInterface();\n};\n\nextern \"C\" {\n    EXPORT_OR_IMPORT theInterface* doNotUseThisFunction_create(/* arguments*/);\n    EXPORT_OR_IMPORT void doNotUseThisFunction_destroy(void* object);\n}\n\ninline std::shared_ptr&lt;theInterface&gt; getObject(/*argument*/)\n{\n    return std::shared_ptr&lt;theInterface&gt;(doNotUseThisFunction_create(/*arguments*/), doNotUseThisFunction_destroy);\n}\n</code></pre>\n\n<p>dll.cpp</p>\n\n<pre><code>#include \"dll.h\"\n\n#include &lt;string&gt;\nclass theObject : public theInterface\n{\npublic:\n    theObject();\n    ~theObject() override;\n\n    void print() override;\nprivate:\n    std::string someMemberWithMemoryAllocationOnHeap;\n};\n\n// (function definitions to make it compile)\n\n\ntheInterface* doNotUseThisFunction_create(/* arguments*/)\n{\n    return new theObject();\n}\n\nvoid doNotUseThisFunction_destroy(void* object)\n{\n    delete reinterpret_cast&lt;theInterface*&gt;(object);\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino", "c-preprocessor", "undefined-reference", "esp32"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551870013, "post_id": 55021391, "comment_id": 96796290, "body": "You do build with <code>Sensors.cpp</code> (or the object file created from it)? And the macro <code>IR_SENSOR_USED</code> <i>is</i> defined for all source files?"}, {"owner": {"reputation": 3808, "user_id": 1597714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/mH9hv.png?s=128&g=1", "display_name": "AMA", "link": "https://stackoverflow.com/users/1597714/ama"}, "edited": false, "score": 0, "creation_date": 1551870177, "post_id": 55021391, "comment_id": 96796396, "body": "Where is <code>#define IR_SENSOR_USED</code> located?"}, {"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "edited": false, "score": 0, "creation_date": 1551870225, "post_id": 55021391, "comment_id": 96796421, "body": "In my <code>Sensors.ino</code>, I have <code>#define IR_SENSOR_USED</code> as the first line, before I have <code>#include &quot;Sensors.h&quot;</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1551870401, "post_id": 55021391, "comment_id": 96796527, "body": "So it&#39;s not defined when you build <code>Sensors.cpp</code>? Remember that your source files are built <i>separately</i> and that preprocessor directives (like macro definitions) are only for <i>single <a href=\"https://en.wikipedia.org/wiki/Translation_unit_(programming)\" rel=\"nofollow noreferrer\">translation units</a></i>."}, {"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "edited": false, "score": 0, "creation_date": 1551870518, "post_id": 55021391, "comment_id": 96796602, "body": "Is it not then? I assumed this would work. If it doesn&#39;t then, my entire approach is somewhat useless, isn&#39;t it? How else could I accomplish what I&#39;m trying to do?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1551870585, "post_id": 55021391, "comment_id": 96796639, "body": "I don&#39;t know the Arduino IDE system, but usually in an IDE one could set preprocessor macros in the project settings, and the macros will be defined for all source files in the project."}, {"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "edited": false, "score": 0, "creation_date": 1551870790, "post_id": 55021391, "comment_id": 96796769, "body": "I&#39;ll look into that. Meanwhile, is there another approach I could use?"}, {"owner": {"reputation": 3808, "user_id": 1597714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/mH9hv.png?s=128&g=1", "display_name": "AMA", "link": "https://stackoverflow.com/users/1597714/ama"}, "edited": false, "score": 0, "creation_date": 1551870944, "post_id": 55021391, "comment_id": 96796853, "body": "You could store your defines in a separate .h file and include it from <code>Sensors.h</code>. Another option is to have a define for the whole project via project settings. I don&#39;t know how exactly this is done for Arduino projects."}, {"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "edited": false, "score": 0, "creation_date": 1551871012, "post_id": 55021391, "comment_id": 96796889, "body": "Hmm, I&#39;d like to keep it as simple as possible (so also to only one file that the students would have to edit and deal with)"}, {"owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "edited": false, "score": 0, "creation_date": 1551871561, "post_id": 55021391, "comment_id": 96797198, "body": "I&#39;ve found this post, but I don&#39;t really understand what is done here.  <a href=\"https://stackoverflow.com/questions/45393975/how-to-globally-define-a-preprocessor-variable\" title=\"how to globally define a preprocessor variable\">stackoverflow.com/questions/45393975/&hellip;</a>"}, {"owner": {"reputation": 71, "user_id": 11146756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835530277a9db4ac77128d78b9377bea?s=128&d=identicon&r=PG&f=1", "display_name": "julians", "link": "https://stackoverflow.com/users/11146756/julians"}, "edited": false, "score": 0, "creation_date": 1551872990, "post_id": 55021391, "comment_id": 96798079, "body": "Perhaps you could put your defines into a Makefile, i.e. <a href=\"https://stackoverflow.com/questions/2136904/how-can-i-define-define-in-my-make-files\">here</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 3808, "user_id": 1597714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/mH9hv.png?s=128&g=1", "display_name": "AMA", "link": "https://stackoverflow.com/users/1597714/ama"}, "is_accepted": false, "score": 1, "last_activity_date": 1551876341, "creation_date": 1551876341, "answer_id": 55023467, "question_id": 55021391, "link": "https://stackoverflow.com/questions/55021391/undefined-reference-to-function-inside-ifdef-block/55023467#55023467", "title": "undefined reference to function inside ifdef block", "body": "<p>This question might be an instance of an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>.</p>\n\n<p>If you would like the users of library to pick the functionality they need it would make more sense to put declarations in separate headers. E.g., <code>IR_sensor.h</code> and then </p>\n\n<pre><code>#define IR_SENSOR_USED\n#include \"Sensors.h\"\n</code></pre>\n\n<p>becomes just <code>#include \"IR_sensor.h\"</code>.</p>\n\n<ul>\n<li><p>If the size of the library is or concern, splitting it into separate libraries is an option.</p></li>\n<li><p>The third option is to provide the functionality as a <a href=\"https://en.wikipedia.org/wiki/Header-only\" rel=\"nofollow noreferrer\">header-only</a> library.</p></li>\n</ul>\n\n<p><strong>Exact answer:</strong></p>\n\n<blockquote>\n  <p>What's the reason for this? (Why) does the preprocessor not execute\n  the directives in the .cpp file properly?</p>\n</blockquote>\n\n<p>The most likely reason is that <code>Sensors.cpp</code> is unaware of <code>#define IR_SENSOR_USED</code>. Define is in another file that is not included. </p>\n\n<p>However even if <code>IR_SENSOR_USED</code> would be defined in the <code>Sensors.cpp</code> another problem arises: re-compilation of <code>Sensors.cpp</code> for every possible combination of defines is necessary. Otherwise the ifdefed-code is excluded from compilation and can't be simply enabled on the client side by calling <code>#define</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3224, "user_id": 2670348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff4b635f01c3129b3b3222a2930783f3?s=128&d=identicon&r=PG", "display_name": "romkey", "link": "https://stackoverflow.com/users/2670348/romkey"}, "is_accepted": true, "score": 1, "last_activity_date": 1551899806, "creation_date": 1551899806, "answer_id": 55030615, "question_id": 55021391, "link": "https://stackoverflow.com/questions/55021391/undefined-reference-to-function-inside-ifdef-block/55030615#55030615", "title": "undefined reference to function inside ifdef block", "body": "<p>As the comments and other answer pointed out, any <code>#define</code> directives are only visible in the files that contain them. So having</p>\n\n<pre><code>#define IR_SENSOR_USED\n</code></pre>\n\n<p>in <code>Sensors.cpp</code> won't affect any code that's not compiled in <code>Sensors.cpp</code> (importantly, it will affect code that's contained in <code>.h</code> files that are included in <code>Sensors.cpp</code> after the <code>#define</code>. But it wouldn't affect anything contained in a different <code>.cpp</code> file.</p>\n\n<p>More sophisticated build environments than Arduino have better and more complicated ways to deal with this problem, but the Arduino world doesn't give you a lot of tools to handle this.</p>\n\n<p>What I do in the Arduino world is simply have a file called <code>config.h</code> which contains all the <code>#define</code> statements that I need project-wide. I <code>#include \"config.h\"</code> in each file that needs these values.</p>\n\n<p>So in your case, you'd put your all the defines that show which devices are used in <code>config.h</code> and then <code>#include \"config.h\"</code> at the start of every file that depends on it.</p>\n\n<p>You could even include it at the start of your <code>Sensors.h</code> file. I'd consider keeping the two files separate so that there would be a clear boundary between the stuff that needs to be configured and the stuff that's useful code.</p>\n\n<p>I also keep any sensitive values (wifi credentials, passwords, API keys) in this file, and exclude it from code I publish on Github. In its place I include a \"config-example.h\" file with all the directives in it but with dummy values, so that others using the code can edit and rename it.</p>\n"}], "owner": {"reputation": 379, "user_id": 6155242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wzqmM.png?s=128&g=1", "display_name": "Lithimlin", "link": "https://stackoverflow.com/users/6155242/lithimlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 55030615, "answer_count": 2, "score": 0, "last_activity_date": 1551899806, "creation_date": 1551869777, "last_edit_date": 1551870363, "question_id": 55021391, "link": "https://stackoverflow.com/questions/55021391/undefined-reference-to-function-inside-ifdef-block", "title": "undefined reference to function inside ifdef block", "body": "<p>I have the following problem:</p>\n\n<p>I'm writing a collection library for a bunch of sensors to be used with a microcontroller. Meaning I take a lot of libraries for sensors and abstract and simplify them a bit in a unified library for a student project.</p>\n\n<p>I use <code>#define</code> structures to figure out which sensors the students want to use and connected.</p>\n\n<p>Example:</p>\n\n<pre><code>#define IR_SENSOR_USED\n</code></pre>\n\n<p>In the .h and .cpp files of the library I then use <code>#ifdef</code>-<code>#endif</code> pairs to define and declare the functions for the given sensor as well as include the given libraries.</p>\n\n<p>Example from my <code>Sensors.h</code> file:</p>\n\n<pre><code>#ifdef IR_SENSOR_USED\n  #include \"SparkFun_GridEYE_AMG88/src/SparkFun_GridEYE_Arduino_Library.h\"\n  extern GridEYE grideye;\n  void setup_ir_sensor();\n  void read_ir_sensor();\n  void enable_ir_interrupt(float lower, float upper, float hysteresis);\n  void disable_ir_interrupt();\n#endif\n</code></pre>\n\n<p>and from my <code>Sensors.cpp</code> file:</p>\n\n<pre><code>#ifdef IR_SENSOR_USED\nvoid setup_ir_sensor() {\n  Wire.begin(16, 17, 0x69);\n  grideye.begin(0x69, Wire);\n}\n\nvoid read_ir_sensor() {\n  for (int i = 0; i &lt;= 64; i++) {\n    sensor_values.ir_pixel_temp[i] = grideye.getPixelTemperature(i);\n  }\n  sensor_values.ir_device_temp = grideye.getDeviceTemperature();\n}\n\nvoid enable_ir_interrupt(float lower, float upper, float hysteresis) {...}\n\nvoid disable_ir_interrupt() {...}\n#endif\n</code></pre>\n\n<p>However, so long as I have the <code>#ifdef</code> in the .cpp file, I get the following error if I try to call the function in the <code>setup()</code>:</p>\n\n<pre><code>sketch/Sensors.ino.cpp.o:(.literal._Z5setupv+0xc): undefined reference to `read_ir_sensor()'\nsketch/Sensors.ino.cpp.o: In function `setup()':\n.../Sensors/Sensors.ino:112: undefined reference to `read_ir_sensor()'\ncollect2: error: ld returned 1 exit status\nexit status 1\n</code></pre>\n\n<p>If I comment them out, the code executes fine. Another function (<code>setup_sensors()</code>), which is also in the <code>Sensors.h</code> and <code>.cpp</code> files and is not surrounded by an <code>#ifdef</code> works also fine.</p>\n\n<p>This is my <code>Sensors.ino</code> sketch:</p>\n\n<pre><code>#define IR_SENSOR_USED\n//#define COLOR_SENSOR_USED\n//#define ENV_SENSOR_USED\n//#define TEMP_SENSOR_USED\n\n#include \"Sensors.h\"\n\nvoid setup() {\n  sensor_setup();\n\n  read_ir_sensor();\n}\n\nvoid loop() {\n}\n</code></pre>\n\n<p>What's the reason for this? (Why) does the preprocessor not execute the directives in the .cpp file properly?</p>\n"}]