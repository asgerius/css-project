[{"tags": ["c++", "c++17", "range-v3"], "comments": [{"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1497484647, "post_id": 44556432, "comment_id": 76103364, "body": "I suspect it is going to be an issue with your c++ library provider;  LibC++ has some info here: <a href=\"http://libcxx.llvm.org/docs/UsingLibcxx.html#using-libc-experimental-and-experimental\" rel=\"nofollow noreferrer\">libcxx.llvm.org/docs/&hellip;</a>"}, {"owner": {"reputation": 3999, "user_id": 101954, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/37gU2.jpg?s=128&g=1", "display_name": "CW Holeman II", "link": "https://stackoverflow.com/users/101954/cw-holeman-ii"}, "reply_to_user": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1498247008, "post_id": 44556432, "comment_id": 76440430, "body": "Downvoter, this is bad how?"}], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 3, "last_activity_date": 1497487031, "creation_date": 1497487031, "answer_id": 44556761, "question_id": 44556432, "link": "https://stackoverflow.com/questions/44556432/c-ranges-ts-include-experimental-path/44556761#44556761", "title": "C++ Ranges TS include experimental path", "body": "<p>The Ranges TS is a C++ technical specification. By default, any headers for any library features from a TS are prefixed with \"experimental\", and anything those headers include go into the namespace <code>std::experimental</code>.</p>\n\n<p>Range-v3 is a C++ <em>library</em> that implements various functionality with regard to ranges. But what it <em>doesn't do</em> is implement the Ranges TS itself. That is, it isn't a <em>formal</em> implementation of the TS. As such, it can put its headers wherever it pleases; it isn't bound by the rules of the TS.</p>\n\n<p>If a compiler implements the Ranges TS, then you can look around in the documentation for what compiler switches are necessary to have access to it (if any). Since the Ranges TS is written against the Concepts TS, you'll probably at least need to activate that. If you download a standalone Ranges TS implementation, then the documentation will (hopefully) tell you what to do in order to use it.</p>\n"}, {"tags": [], "owner": {"reputation": 5285, "user_id": 195873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53912b2e0cc619ca6c81ab1406522c2a?s=128&d=identicon&r=PG", "display_name": "Eric Niebler", "link": "https://stackoverflow.com/users/195873/eric-niebler"}, "is_accepted": true, "score": 3, "last_activity_date": 1497489449, "creation_date": 1497489449, "answer_id": 44557036, "question_id": 44556432, "link": "https://stackoverflow.com/questions/44556432/c-ranges-ts-include-experimental-path/44557036#44557036", "title": "C++ Ranges TS include experimental path", "body": "<p>Range-v3 predates the Ranges TS, and the functionality in the TS is based upon (and is a subset of) the functionality of range-v3. The Ranges TS requires a compiler that supports the Concepts TS; range-v3 does not, so there is no way that range-v3 can be a TS implementation.</p>\n\n<p>If you are looking for a reference implementation of the Ranges TS, find the cmcstl2 project on GitHub.</p>\n"}], "owner": {"reputation": 3999, "user_id": 101954, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/37gU2.jpg?s=128&g=1", "display_name": "CW Holeman II", "link": "https://stackoverflow.com/users/101954/cw-holeman-ii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 44557036, "answer_count": 2, "score": 0, "last_activity_date": 1510835736, "creation_date": 1497484487, "last_edit_date": 1510835736, "question_id": 44556432, "link": "https://stackoverflow.com/questions/44556432/c-ranges-ts-include-experimental-path", "title": "C++ Ranges TS include experimental path", "body": "<p>I am looking to use C++ Ranges. <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4651.pdf\" rel=\"nofollow noreferrer\">Working Draft, C++ Extensions for Ranges</a> says:</p>\n\n<pre><code>The Ranges library provides the Ranges library headers, shown in Table 2.\n\nTable 2 \u2014 Ranges TS library headers\n\n&lt;experimental/ranges/algorithm&gt;   &lt;experimental/ranges/random&gt;\n&lt;experimental/ranges/concepts&gt;    &lt;experimental/ranges/tuple&gt;\n&lt;experimental/ranges/functional&gt;  &lt;experimental/ranges/utility&gt;\n&lt;experimental/ranges/iterator&gt;\n</code></pre>\n\n<p>The closest that I found is <a href=\"https://ericniebler.github.io/range-v3/index.html\" rel=\"nofollow noreferrer\">Range-v3 - Range algorithms, views, and actions for the Standard Library</a> which says:</p>\n\n<pre><code>Range library for C++11/14/17. This code is the basis of a formal proposal to add range support to the C++ standard library.\n\nThis library is header-only. You can get the source code from the range-v3 repository on github. To compile with Range-v3, you can either #include the entire library:\n#include &lt;range/v3/all.hpp&gt;\n\nOr you can #include only the core, and then the individual headers you want:\n#include &lt;range/v3/core.hpp&gt;\n#include &lt;range/v3/....\n</code></pre>\n\n<p>Explain the difference in the includes between Ranges TS with \"experimental\" &amp; Range V3 without it. Where does one find Ranges with the \"experimental/ranges\"? What is the significance, does it matter? Is this supposed to be a compiler option that controls this?</p>\n"}, {"tags": ["c++", "pointers", "heap", "allocation"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 7, "creation_date": 1497484104, "post_id": 44556350, "comment_id": 76103227, "body": "You might want to start by initialising <code>p</code>."}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 1, "creation_date": 1497484110, "post_id": 44556350, "comment_id": 76103231, "body": "C++? NULL? How about including the actual compiler error?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1497484143, "post_id": 44556350, "comment_id": 76103244, "body": "Yep. Deleting an uninitialized pointer is a bad, bad idea. Also a good idea to set it to NULL after the <code>delete[] p;</code> at the end of the loop to avoid a double delete when the loop loops back to the beginning."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1497484233, "post_id": 44556350, "comment_id": 76103261, "body": "Deleting an invalid pointer is also bad"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 3, "creation_date": 1497484267, "post_id": 44556350, "comment_id": 76103271, "body": "Why are you using dynamic allocation in the first place? Just declare a local array inside the loop."}, {"owner": {"reputation": 97, "user_id": 3968459, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/8b82e0339fd643a590428b7539fbb418?s=128&d=identicon&r=PG&f=1", "display_name": "CG Nguyen", "link": "https://stackoverflow.com/users/3968459/cg-nguyen"}, "edited": false, "score": 0, "creation_date": 1497484362, "post_id": 44556350, "comment_id": 76103296, "body": "because the size of p can change"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1497484580, "post_id": 44556350, "comment_id": 76103349, "body": "&quot;because the size of p can change&quot; - no, it can&#39;t."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1497484595, "post_id": 44556350, "comment_id": 76103354, "body": "<b><i>because the size of p can change</i></b> That is why in <code>c++</code> we use vectors and other containers. Although I assume the reason you are doing this is you are not permitted to use the standard library."}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1497487802, "post_id": 44556350, "comment_id": 76104025, "body": "Not sure why everyone is down-voting you to be honest. You&#39;re new at C++ and that&#39;s fine.. It&#39;s a legit question.. Bad code, but legit question. People can suggest a better way to write it and what is wrong with it.. but instead you are down-voted to oblivion :l"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1497490855, "post_id": 44556350, "comment_id": 76104594, "body": "Using <code>std::vector&lt;int&gt; p;</code> and just calling <code>p.resize()</code> within the loop would be more efficient than calling <code>new[]</code> and <code>delete[]</code> on every single iteration."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1497485077, "post_id": 44556450, "comment_id": 76103451, "body": "Why, after posting this comment: &quot; Just declare a local array inside the loop. &quot; are you posting this answer? One of them is redundant."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1497485268, "post_id": 44556450, "comment_id": 76103490, "body": "He said in a comment that the size of the array changes. I assume the hard-coded size in the question is for example purposes."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1497485476, "post_id": 44556450, "comment_id": 76103537, "body": "@NeilButterworth Are you the downvoter? For that reason?"}, {"owner": {"reputation": 20235, "user_id": 1462718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7d451483b64aa999fecf316e7132afc6?s=128&d=identicon&r=PG", "display_name": "Brandon", "link": "https://stackoverflow.com/users/1462718/brandon"}, "edited": false, "score": 0, "creation_date": 1497488056, "post_id": 44556450, "comment_id": 76104065, "body": "This is the best answer here.. It explains everything wrong with OP&#39;s code and shows how to fix it. However, I do have one comment: It is tagged C++ and not C++11 so <code>nullptr</code> &quot;MIGHT&quot; not be an option.. but that can be overlooked. +1 from me."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1497484586, "creation_date": 1497484586, "answer_id": 44556450, "question_id": 44556350, "link": "https://stackoverflow.com/questions/44556350/delete-pointer-memory-allocation-to-avoid-memory-leak/44556450#44556450", "title": "Delete pointer memory allocation to avoid memory leak", "body": "<p>Several problems.</p>\n\n<p>First, you need to initialize <code>p</code> to <code>nullptr</code> so that the first iteration doesn't try to access and free an uninitialized pointer.</p>\n\n<p>Second, after you delete the pointer at the end of the loop, you need to set it to <code>nullptr</code> so the next iteration won't try to free it again.</p>\n\n<p>Finally, you need to free it after the loop, in case the last iteration hit the <code>continue</code> statement so it skips over the <code>delete</code>.</p>\n\n<pre><code>int main() {\n\n    int maxHour = 8760;\n    int *p = nullptr;\n    for (int i = 0; i &lt; maxHour; i++) {\n\n        delete[] p;\n\n        p = new int[100];\n\n        //do some things 1\n\n        if (i &gt; maxHour / 2) continue;\n\n        //do some things 2\n\n        delete[] p;\n        p = nullptr;\n    }\n    delete[] p;\n\n    return 0;\n}\n</code></pre>\n\n<p>You don't need <code>if (NULL != p)</code> because <code>delete</code> automatically checks for a null pointer and does nothing.</p>\n\n<p>Another way to do it is to delete the pointer before continuing. However, if you have lots of different code branches that contain <code>continue</code>, this might be inconvenient to repeat.</p>\n\n<pre><code>int main() {\n\n    int maxHour = 8760;\n    int *p;\n    for (int i = 0; i &lt; maxHour; i++) {\n\n        p = new int[100];\n\n        //do some things 1\n\n        if (i &gt; maxHour / 2) {\n            delete[] p;\n            continue;\n        }\n\n        //do some things 2\n\n        delete[] p;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1497485964, "post_id": 44556546, "comment_id": 76103644, "body": "I think OP wants to preserve the previous allocation when <code>continue</code>ing."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1497486070, "post_id": 44556546, "comment_id": 76103673, "body": "@user4581301 I think he just declared the pointer in the outer scope though the pointer is used only in the inner scope because it is deleted in each iteration of the loop."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1497486917, "post_id": 44556546, "comment_id": 76103852, "body": "Yeah. You&#39;re right. I&#39;m on crack. OP nukes it either way."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1497485332, "creation_date": 1497485332, "answer_id": 44556546, "question_id": 44556350, "link": "https://stackoverflow.com/questions/44556350/delete-pointer-memory-allocation-to-avoid-memory-leak/44556546#44556546", "title": "Delete pointer memory allocation to avoid memory leak", "body": "<p>For such a task the smart pointer <code>std::unique_ptr</code> is suitable.</p>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nstruct A\n{\n    ~A() { std::cout &lt;&lt; \"A::~A()\" &lt;&lt; std::endl; }\n};\n\nint main() \n{\n    const size_t N = 10;\n\n    for ( size_t i = 0; i &lt; N; i++ )\n    {\n        std::unique_ptr&lt;A[]&gt; p( new A[2] );\n\n        if ( i % 2 )\n        {\n            std::cout &lt;&lt; \"\\nContinue\" &lt;&lt; std::endl;\n            continue;\n        }\n\n        std::cout &lt;&lt; \"\\nIteration\" &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>Iteration\nA::~A()\nA::~A()\n\nContinue\nA::~A()\nA::~A()\n\nIteration\nA::~A()\nA::~A()\n\nContinue\nA::~A()\nA::~A()\n\nIteration\nA::~A()\nA::~A()\n\nContinue\nA::~A()\nA::~A()\n\nIteration\nA::~A()\nA::~A()\n\nContinue\nA::~A()\nA::~A()\n\nIteration\nA::~A()\nA::~A()\n\nContinue\nA::~A()\nA::~A()\n</code></pre>\n\n<p>As it is seen the memory is deleted correctly independent on whether there was executed the continue statement.</p>\n\n<p>You can use the subscript operator with this smart pointer the same way as with arrays.</p>\n"}], "owner": {"reputation": 97, "user_id": 3968459, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/8b82e0339fd643a590428b7539fbb418?s=128&d=identicon&r=PG&f=1", "display_name": "CG Nguyen", "link": "https://stackoverflow.com/users/3968459/cg-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 963, "favorite_count": 1, "answer_count": 2, "score": -5, "last_activity_date": 1497485332, "creation_date": 1497483935, "question_id": 44556350, "link": "https://stackoverflow.com/questions/44556350/delete-pointer-memory-allocation-to-avoid-memory-leak", "title": "Delete pointer memory allocation to avoid memory leak", "body": "<p>I would like to delete a pointer at the end of the FOR loop to avoid memory leak. However in the middle of the FOR loop, it may hit a condition <code>if (i &gt; maxHour / 2) continue;</code> and continue back from beginning. To avoid memory leak, I was trying to do this check <code>if (NULL != p) delete[] p;</code> but the program could not compile. I am not sure what is wrong with this line <code>if (NULL != p) delete[] p;</code></p>\n\n<pre><code>   int main() {\n\n        int maxHour = 8760;\n        int *p;\n        for (int i = 0; i &lt; maxHour; i++) {\n\n            if (NULL != p) delete[] p;\n\n            p = new int[100];\n\n            //do some things 1\n\n            if (i &gt; maxHour / 2) continue;\n\n            //do some things 2\n\n            delete[] p;\n        }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1497487920, "post_id": 44556034, "comment_id": 76104043, "body": "It seems to be an answer: <a href=\"https://stackoverflow.com/questions/20089196/how-to-access-c-enum-from-qml\" title=\"how to access c enum from qml\">stackoverflow.com/questions/20089196/&hellip;</a>"}, {"owner": {"reputation": 716, "user_id": 2614418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0c513e578421946070ad7b3a75a9e9dc?s=128&d=identicon&r=PG", "display_name": "Rui Sebasti&#227;o", "link": "https://stackoverflow.com/users/2614418/rui-sebasti%c3%a3o"}, "reply_to_user": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1497563753, "post_id": 44556034, "comment_id": 76144051, "body": "if i put signal wifiStatusChanged(NetworkManager.WIFIStat wifiStatus); i get: error: Unexpected token &quot;.&quot;"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1497564176, "post_id": 44556034, "comment_id": 76144221, "body": "Ok. Now it is clear what was the problem with that. I read the answer."}], "answers": [{"tags": [], "owner": {"reputation": 716, "user_id": 2614418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0c513e578421946070ad7b3a75a9e9dc?s=128&d=identicon&r=PG", "display_name": "Rui Sebasti&#227;o", "link": "https://stackoverflow.com/users/2614418/rui-sebasti%c3%a3o"}, "is_accepted": false, "score": 1, "last_activity_date": 1497562958, "creation_date": 1497562958, "answer_id": 44577489, "question_id": 44556034, "link": "https://stackoverflow.com/questions/44556034/connect-c-object-signal-to-qml-signal-handler-with-enum-parameter/44577489#44577489", "title": "connect c++ object signal to QML signal handler with enum parameter", "body": "<p>I solved the problem using var in my handler function parameter:</p>\n\n<pre><code>signal wifiStatusChanged(var wifiStatus);\n</code></pre>\n\n<p>but i ended up using another approach as stated here:\n<a href=\"https://stackoverflow.com/a/29202462/2614418\">https://stackoverflow.com/a/29202462/2614418</a></p>\n\n<pre><code>Connections{\n    target: network_manager\n    onWifiStatusChanged: {\n        console.log(\"Status:\"+wifiStatus)\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 716, "user_id": 2614418, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0c513e578421946070ad7b3a75a9e9dc?s=128&d=identicon&r=PG", "display_name": "Rui Sebasti&#227;o", "link": "https://stackoverflow.com/users/2614418/rui-sebasti%c3%a3o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497562958, "creation_date": 1497481482, "question_id": 44556034, "link": "https://stackoverflow.com/questions/44556034/connect-c-object-signal-to-qml-signal-handler-with-enum-parameter", "title": "connect c++ object signal to QML signal handler with enum parameter", "body": "<p>I have the following c++ plugin code:</p>\n\n<pre><code>class NetworkManager : public QObject\n{\nQ_OBJECT\n\n...\nenum WIFIStat{\n    STAT_NOTINITED,\n    STAT_INITED\n};\nQ_ENUM(WIFIStat)\n\n Q_PROPERTY(WIFIStat wifiStatus READ wifiStatus NOTIFY wifiStatusChanged)\n</code></pre>\n\n<p>and i want  to connect to a signal handler in QML:</p>\n\n<pre><code>signal wifiStatusChanged(WIFIStat wifiStatus);\n\nonWifiStatusChanged: {\n    console.log(wifiStatus)\n}\n\nComponent.onCompleted: {\n   network_manager.wifiStatusChanged.connect(wifiStatusChanged);\n}\n</code></pre>\n\n<p>but i'm getting the follwing error:</p>\n\n<pre><code>Invalid signal parameter type: WIFIStat\n</code></pre>\n\n<p>How can i define the enum <code>NetworkManager::WIFIStat</code>  type parameter int the handler function?</p>\n"}, {"tags": ["c++", "performance", "memory-management"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1497485531, "post_id": 44555964, "comment_id": 76103556, "body": "If you are programming for Windows, see stringtables and other resource types: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa381050(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1497481377, "post_id": 44556001, "comment_id": 76102478, "body": "When this become standardized?"}, {"owner": {"reputation": 1068, "user_id": 5316882, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3334dfb5e2c251108a538f2f49215cc5?s=128&d=identicon&r=PG&f=1", "display_name": "anotherfred", "link": "https://stackoverflow.com/users/5316882/anotherfred"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1497481558, "post_id": 44556001, "comment_id": 76102540, "body": "For someone so pedantic, your comment is vague. But I altered &#39;standard&#39; to &#39;common&#39;."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1497482054, "post_id": 44556001, "comment_id": 76102682, "body": "When it comes to dealing with C++ being pedantic is a blessing."}, {"owner": {"reputation": 1068, "user_id": 5316882, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3334dfb5e2c251108a538f2f49215cc5?s=128&d=identicon&r=PG&f=1", "display_name": "anotherfred", "link": "https://stackoverflow.com/users/5316882/anotherfred"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1497482127, "post_id": 44556001, "comment_id": 76102707, "body": "That is certainly true."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1497487418, "post_id": 44556001, "comment_id": 76103963, "body": "I highly recommend using UTF (probably UTF-16) for handling multiple languages.  This will allow you to support a wider range of languages."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1497493903, "post_id": 44556001, "comment_id": 76105244, "body": "I highly recommend <b>not</b> using utf16, utf8 is simply better."}], "tags": [], "owner": {"reputation": 1068, "user_id": 5316882, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3334dfb5e2c251108a538f2f49215cc5?s=128&d=identicon&r=PG&f=1", "display_name": "anotherfred", "link": "https://stackoverflow.com/users/5316882/anotherfred"}, "is_accepted": true, "score": 2, "last_activity_date": 1497481595, "last_edit_date": 1497481595, "creation_date": 1497481230, "answer_id": 44556001, "question_id": 44555964, "link": "https://stackoverflow.com/questions/44555964/should-i-make-two-versions-of-one-program-each-with-different-language-or-add/44556001#44556001", "title": "Should I make two versions of one program, each with different language, or add an option to change language?", "body": "<p>It is common to have an array or other structure, called something like strings, containing all the display strings your program will need. Instead of hardcoding messages into your program, you reference the array. To change language, you just alter the array.</p>\n"}], "owner": {"reputation": 7, "user_id": 7976329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Pn3JI.png?s=128&g=1", "display_name": "Suiko", "link": "https://stackoverflow.com/users/7976329/suiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "closed_date": 1497486761, "accepted_answer_id": 44556001, "answer_count": 1, "score": -4, "last_activity_date": 1497481595, "creation_date": 1497480944, "question_id": 44555964, "link": "https://stackoverflow.com/questions/44555964/should-i-make-two-versions-of-one-program-each-with-different-language-or-add", "closed_reason": "Opinion-based", "title": "Should I make two versions of one program, each with different language, or add an option to change language?", "body": "<p>I have a program that I'm currently writing in English. In future, I would like to make the program multilingual, therefore I'm wondering what's the best option to do so. I thought about this two option for now:</p>\n\n<ol>\n<li>Enable users to change language in settings;</li>\n<li>Select the appropriate language while downloading;</li>\n</ol>\n\n<p>With each option comes a problem:</p>\n\n<ol>\n<li>A ton of code dedicated to displaying one message in different languages;</li>\n<li>I will have to make many versions just to change the language of the displayed text;</li>\n</ol>\n\n<p>Now my question is, which one of these options is more memory efficient and user friendly? Maybe neither of them are? Do you have any other option that is better than given two? </p>\n"}, {"tags": ["c++", "c", "visual-c++", "printf", "format-specifiers"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1497481060, "post_id": 44555955, "comment_id": 76102374, "body": "With strings, there&#39;s a difference between <code>%8s</code> and <code>%8.8s</code> \u2014 the latter truncates if the string is longer than 8.  There&#39;s another difference; <code>0</code> is not a valid modifier for <code>%s</code>.  The <code>%8.8lu</code> doesn&#39;t seem to buy you much compared with <code>%.8lu</code>; there&#39;s not much difference between <code>%.8lu</code> and <code>%08lu</code>, though <code>0</code> is older and the <code>.</code> was added to C90 (so that&#39;s pretty old these days)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1497481203, "post_id": 44555955, "comment_id": 76102416, "body": "They&#39;re just two different ways of achieving the same thing. The first tends to be preferred because the padding character is stated explicitly."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1497481249, "post_id": 44555955, "comment_id": 76102431, "body": "<code>printf</code> is a function of the C standard library. The question is not about C++."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1497481590, "post_id": 44555955, "comment_id": 76102553, "body": "Your code can&#39;t be standard C++; C++ requires that the return value of <code>main()</code> is an <code>int</code>.  C allows implementations to let you use alternative return types; the Microsoft C implementation allows you to use <code>void</code>.  Their C++ may also allow it, but it is in contravention of the standard which does not.  See <a href=\"http://stackoverflow.com/questions/204476/\">What should <code>main()</code> return in C and C++</a> for the details."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1497635475, "post_id": 44555955, "comment_id": 76178342, "body": "If you want to keep twice language tags, for me your question is too broad, you need to understand that <code>printf()</code> has different standard in C and C++ in 2017. Like <code>printf()</code> is idiomatic C, I will advise you to choice C. You could create two question if you want C++ too."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 4, "creation_date": 1497638581, "post_id": 44555955, "comment_id": 76180081, "body": "Note that this question is the subject of a MSO question \u2014 <a href=\"https://meta.stackoverflow.com/questions/350785/user-goes-into-edit-war-for-c-tag-removal/\">User goes into edit war for C tag removal</a>.  Please be cautious about editing the question or its tags."}], "answers": [{"tags": [], "owner": {"reputation": 738, "user_id": 7572026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/340e7b48d6bfe006ce1b6f7161911df2?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Dubey", "link": "https://stackoverflow.com/users/7572026/manav-dubey"}, "is_accepted": false, "score": 0, "last_activity_date": 1497481698, "creation_date": 1497481698, "answer_id": 44556059, "question_id": 44555955, "link": "https://stackoverflow.com/questions/44555955/why-would-one-use-8-8-over-08-in-a-printf-format-string/44556059#44556059", "title": "Why would one use %8.8 over %08 in a printf format string?", "body": "<p>Actually, it doesn't make any difference between <code>%08</code> and <code>%8.8</code> unless you get into decimal numbers, then there is a difference. It all depends on how the user likes it. It is just a preference.</p>\n"}, {"comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1497577359, "post_id": 44556072, "comment_id": 76147716, "body": "This code can definitely compile C and arguably as C++ as well. In C the standard gives explicit permission for <code>main</code> to be defined &quot;[...]in some other implementation-defined manner&quot; (&#167;5.1.2.2.1/1). In C++, the compiler is required to &quot;issue at least one diagnostic message&quot; (&#167;[intro.compliance/2]), but having done so, is free to continue to compile the program.  &quot;[...]this International Standard states only requirements on C++ implementations, those requirements are often easier to understand if they are phrased as requirements on programs, parts of programs, or execution of programs.&quot;(ibid)"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1497606685, "post_id": 44556072, "comment_id": 76160100, "body": "In addition, the code could in theory be for a freestanding systems, where all forms of main() are allowed (though the presence of VS gives away that this is a hosted Windows system)."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1497623286, "post_id": 44556072, "comment_id": 76171149, "body": "@JerryCoffin didn&#39;t know that, updated my answer! =)"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 5, "last_activity_date": 1497624743, "last_edit_date": 1497624743, "creation_date": 1497481880, "answer_id": 44556072, "question_id": 44555955, "link": "https://stackoverflow.com/questions/44555955/why-would-one-use-8-8-over-08-in-a-printf-format-string/44556072#44556072", "title": "Why would one use %8.8 over %08 in a printf format string?", "body": "<p>These two are equivalent when used with an <code>unsigned long</code> (/integers), as you read in the <a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow noreferrer\">ref</a>.</p>\n\n<pre><code>printf(\"V1: %08lu \\n\", val);\n</code></pre>\n\n<p><code>0</code> flag will left-pads the number with zeroes (0) instead of spaces when padding is specified (see width sub-specifier).</p>\n\n<p><code>8</code> will be the <code>number</code>, in \"Minimum number of characters to be printed. If the value to be printed is shorter than this number, the result is padded with blank spaces. The value is not truncated even if the result is larger.\"</p>\n\n<hr>\n\n<p>Now this:</p>\n\n<pre><code>printf(\"V2: %8.8lu \\n\", val);\n</code></pre>\n\n<p>will keep the effects of <code>8</code> as <code>number</code>, but will add <code>.8</code>, as <code>.number</code> in \"For integer specifiers (d, i, o, u, x, X): precision specifies the minimum number of digits to be written. If the value to be written is shorter than this number, the result is padded with leading zeros. The value is not truncated even if the result is longer. A precision of 0 means that no character is written for the value 0.\".</p>\n\n<hr>\n\n<p>PS: Standard C++ should issue a diagnostic error as such:</p>\n\n<pre><code>prog.cc:3:11: error: '::main' must return 'int'\n void main()\n           ^\n</code></pre>\n\n<p>however, even <a href=\"http://www.stroustrup.com/bs_faq2.html#void-main\" rel=\"nofollow noreferrer\">Stroustrup</a> himself says that this \"is not and never has been C++, nor has it even been C\".</p>\n"}, {"comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1497482182, "post_id": 44556095, "comment_id": 76102723, "body": "Hmm are you sure?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 2, "creation_date": 1497482376, "post_id": 44556095, "comment_id": 76102778, "body": "@gsamaras: Yes. <code>.8</code> part specifies <i>the minimum number of digits to appear</i>. Which means that you will always see 8 digits. The <code>-</code> does not count. This allows it to break out of 8 character field witdth. In the first version there&#39;s no &quot;minimum&quot; requirement, which is why <code>-</code> eats aways one space and results in less digits being output."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1497482489, "post_id": 44556095, "comment_id": 76102807, "body": "AnT great, just checked and you right. Yes I know about that ( see my answer =) ), I was just wasn&#39;t sure. +1."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1514728514, "post_id": 44556095, "comment_id": 83056767, "body": "&quot;For unsigned integer types there&#39;s no difference.&quot;  --&gt; <code>&quot;#&quot;</code> flag will impart a difference with unsigned values.  <code>&quot;%#08lx&quot;</code> vs <code>&quot;%#8.8lx&quot;</code>"}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 16, "last_activity_date": 1497486698, "last_edit_date": 1497486698, "creation_date": 1497482109, "answer_id": 44556095, "question_id": 44555955, "link": "https://stackoverflow.com/questions/44555955/why-would-one-use-8-8-over-08-in-a-printf-format-string/44556095#44556095", "title": "Why would one use %8.8 over %08 in a printf format string?", "body": "<p>For <em>unsigned</em> integer types there's no difference. For negative values of <em>signed</em> integer types you will see different output</p>\n\n<pre><code>long val = -2413;\nprintf(\"V1: %08ld\\n\", val);\nprintf(\"V2: %8.8ld\\n\", val);\n\nV1: -0002413\nV2: -00002413\n</code></pre>\n\n<p>The <code>.8</code> part of <code>%8.8ld</code> specifies <em>the minimum number of digits to appear</em>. And the <code>-</code> sign is not considered a digit. For this reason, the second version is required to always print 8 digits. If the value is negative, the <code>-</code> sign will have no choice but to become the 9th character printed, thus violating the requested field width of 8.</p>\n\n<p>The <code>%08ld</code> version has no requirement to print at least 8 digits, which is why the <code>-</code> sign occupies one character <em>inside</em> the field width of 8 and only 7 digits are printed.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/fc9022cc0ef3e097\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/fc9022cc0ef3e097</a></p>\n"}, {"tags": [], "owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "is_accepted": false, "score": 7, "last_activity_date": 1497482546, "creation_date": 1497482546, "answer_id": 44556163, "question_id": 44555955, "link": "https://stackoverflow.com/questions/44555955/why-would-one-use-8-8-over-08-in-a-printf-format-string/44556163#44556163", "title": "Why would one use %8.8 over %08 in a printf format string?", "body": "<p>As I noted in a comment, with strings, there's a difference between <code>%8s</code> and <code>%8.8s</code> \u2014 the latter truncates if the string is longer than <code>8</code>. There's another difference; <code>0</code> is not a valid modifier for <code>%s</code>. The <code>%8.8lu</code> isn't really different from <code>%.8lu</code>; there's not much difference between <code>%.8lu</code> and <code>%08lu</code>, though <code>0</code> is older and the <code>.</code> was added to C90 (so that's pretty old these days).  There's a difference between <code>%.8ld</code> and <code>%08ld</code>, though, when the values are negative.</p>\n\n<p>Here's some code that illustrates some of the vagaries of the integer formats for <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html\" rel=\"noreferrer\"><code>printf()</code></a> \u2014 for both signed and unsigned values.  Note that if you have <code>%8.6lu</code> rather than <code>%8.8lu</code> (similarly for signed), you get interesting differences.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstatic void test_ul(void)\n{\n    char *fmt[] =\n    {\n        \"%08lu\",\n        \"%8.8lu\",\n        \"%.8lu\",\n        \"%8.6lu\",\n        \"%6.8lu\",\n    };\n    enum { NUM_FMT = sizeof(fmt) / sizeof(fmt[0]) };\n    unsigned long val[] = { 2413LU, 234512349LU };\n    enum { NUM_VAL = sizeof(val) / sizeof(val[0]) };\n    for (int i = 0; i &lt; NUM_FMT; i++)\n    {\n        for (int j = 0; j &lt; NUM_VAL; j++)\n        {\n            printf(\"%8s: [\", fmt[i]);\n            printf(fmt[i], val[j]);\n            puts(\"]\");\n        }\n    }\n}\n\nstatic void test_sl(void)\n{\n    char *fmt[] =\n    {\n        \"%08ld\",\n        \"%8.8ld\",\n        \"%.8ld\",\n        \"%8.6ld\",\n        \"%6.8ld\",\n    };\n    enum { NUM_FMT = sizeof(fmt) / sizeof(fmt[0]) };\n    long val[] = { +2413L, -2413L, +234512349L, -234512349L };\n    enum { NUM_VAL = sizeof(val) / sizeof(val[0]) };\n    for (int i = 0; i &lt; NUM_FMT; i++)\n    {\n        for (int j = 0; j &lt; NUM_VAL; j++)\n        {\n            printf(\"%8s: [\", fmt[i]);\n            printf(fmt[i], val[j]);\n            puts(\"]\");\n        }\n    }\n}\n\nint main(void)\n{\n    test_ul();\n    test_sl();\n    return 0;\n}\n</code></pre>\n\n<p>Output (GCC 7.1.0 on macOS Sierra 10.12.5):</p>\n\n<pre><code>   %08lu: [00002413]\n   %08lu: [234512349]\n  %8.8lu: [00002413]\n  %8.8lu: [234512349]\n   %.8lu: [00002413]\n   %.8lu: [234512349]\n  %8.6lu: [  002413]\n  %8.6lu: [234512349]\n  %6.8lu: [00002413]\n  %6.8lu: [234512349]\n   %08ld: [00002413]\n   %08ld: [-0002413]\n   %08ld: [234512349]\n   %08ld: [-234512349]\n  %8.8ld: [00002413]\n  %8.8ld: [-00002413]\n  %8.8ld: [234512349]\n  %8.8ld: [-234512349]\n   %.8ld: [00002413]\n   %.8ld: [-00002413]\n   %.8ld: [234512349]\n   %.8ld: [-234512349]\n  %8.6ld: [  002413]\n  %8.6ld: [ -002413]\n  %8.6ld: [234512349]\n  %8.6ld: [-234512349]\n  %6.8ld: [00002413]\n  %6.8ld: [-00002413]\n  %6.8ld: [234512349]\n  %6.8ld: [-234512349]\n</code></pre>\n"}], "owner": {"reputation": 60937, "user_id": 30225, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7fdfe99c0e6c379a2fb843657e200669?s=128&d=identicon&r=PG", "display_name": "Preet Sangha", "link": "https://stackoverflow.com/users/30225/preet-sangha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2980, "favorite_count": 0, "answer_count": 4, "score": 6, "last_activity_date": 1497635015, "creation_date": 1497480905, "last_edit_date": 1497635015, "question_id": 44555955, "link": "https://stackoverflow.com/questions/44555955/why-would-one-use-8-8-over-08-in-a-printf-format-string", "title": "Why would one use %8.8 over %08 in a printf format string?", "body": "<p>Just came across some (very) legacy code (originally written as C but now compiled as C++ too)  and a use of the width specifier to zero pad a string</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>void main()\n{\n    unsigned long val = 2413;\n    printf(\"V1: %08lu \\n\", val);\n    printf(\"V2: %8.8lu \\n\", val);\n}\n</code></pre>\n\n<p>The results are identical</p>\n\n<pre><code>V1: 00002413\nV2: 00002413\n</code></pre>\n\n<p>So why would one use V2? Was it some legacy aspect of the std lib from the days of yore?</p>\n\n<p>Compiler details : Microsoft (R) C/C++ Optimizing Compiler Version 19.10.25019 for x86</p>\n"}, {"tags": ["c++", "arduino-uno", "touchscreen"], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 7408924, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe98fde710e19b62ab842d4a939ed30a?s=128&d=identicon&r=PG&f=1", "display_name": "user7408924", "link": "https://stackoverflow.com/users/7408924/user7408924"}, "is_accepted": false, "score": 0, "last_activity_date": 1497517880, "creation_date": 1497517880, "answer_id": 44563460, "question_id": 44555949, "link": "https://stackoverflow.com/questions/44555949/arduino-tft-touch-shield-draw-in-loop/44563460#44563460", "title": "Arduino TFT Touch shield: draw in loop", "body": "<p>I noticed that the TFT display and Touchscreen share some Analog pins. I think this is causing the problems.\nSo I sectioned my code in a part where the touchscreen is handled. Then I can reassign the pins to the TFT monitor and draw to it. I don't know whether this theory makes sence, but it is working:</p>\n\n<pre><code> void loop() {\n  //Touchposition bestimmen\n  if (ts.isTouching()) {\n    Point p = ts.getPoint();\n    p.x = map(p.x, TS_MINX, TS_MAXX, 0, 240);\n    p.y = map(p.x, TS_MINY, TS_MAXY, 0, 320);\n    if (released) {\n      released = false;\n    }\n  }\n  else {\n    //Serial.println(\"Touch me where I like it!\");\n    released = true;\n  }\n\n  if (ts.isTouching() &amp;&amp; !released) {\n    //re assing pins to tft because they are also used by the touchscreen\n    Adafruit_TFTLCD tft(LCD_CS, LCD_CD, LCD_WR, LCD_RD, LCD_RESET);\n    Serial.println(\"don't touch me!\");\n    drawButton(100, 100, \"Manuell\");\n    touched = false;\n  }\n}\n</code></pre>\n\n<p>The drawButton funton contains several draw functions</p>\n"}], "owner": {"reputation": 83, "user_id": 7408924, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe98fde710e19b62ab842d4a939ed30a?s=128&d=identicon&r=PG&f=1", "display_name": "user7408924", "link": "https://stackoverflow.com/users/7408924/user7408924"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 631, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1497517880, "creation_date": 1497480850, "last_edit_date": 1497513572, "question_id": 44555949, "link": "https://stackoverflow.com/questions/44555949/arduino-tft-touch-shield-draw-in-loop", "title": "Arduino TFT Touch shield: draw in loop", "body": "<p>I am trying to build a menue with a TFT touchpad. Now my problem is that I can't draw anything within the loop function.</p>\n\n<p>If I write any draw-function in the loop the screen turns white. I figured that this is because the screen needs some time to build up. So I added a delay(1000). But then the screen flashes every second wich is obviously also not what I want.</p>\n\n<p>The next weired thing is that the program stops working when I draw once the display is touched. In the code below I have three draw-functions. Two of them are working one is not. (see comments)</p>\n\n<pre><code>#include &lt;SeeedTouchScreen.h&gt;\n\n#include &lt;TFTConsole.h&gt;\n#include &lt;Adafruit_TFTLCD.h&gt;\n#include &lt;Adafruit_GFX.h&gt;\n\n\n#define LCD_CS A3\n#define LCD_CD A2\n#define LCD_WR A1\n#define LCD_RD A0\n#define LCD_RESET A4\n\n#define TS_MINX 169\n#define TS_MINY 208\n#define TS_MAXX 1781\n#define TS_MAXY 1820\n\n#define YP A2  // must be an analog pin, use \"An\" notation!\n#define XM A3  // must be an analog pin, use \"An\" notation!\n#define YM 8   // can be a digital pin\n#define XP 9   // can be a digital pin\n\n#define BLACK   0x0000\n#define BLUE    0x001F\n#define RED     0xF800\n#define GREEN   0x07E0\n#define CYAN    0x07FF\n#define MAGENTA 0xF81F\n#define YELLOW  0xFFE0\n#define WHITE   0xFFFF\n\nAdafruit_TFTLCD tft(LCD_CS, LCD_CD, LCD_WR, LCD_RD, LCD_RESET);\nTouchScreen ts = TouchScreen(XP, YP, XM, YM);\nboolean touched = false;\n\n\nvoid setup() {\n  Serial.begin(9600);\n  Serial.print(\"Starting...\");\n\n  tft.reset();\n\n  tft.begin(0x9325);\n\n  tft.setRotation(1);\n\n  tft.fillScreen(BLACK);\n\n  //Print \"PPM CO\" Text\n  tft.setCursor(50, 30);\n  tft.setTextColor(GREEN);\n  tft.setTextSize(3);\n  tft.print(\"Hello World\"); //&lt;- this is displayed fine\n  delay(1000);\n}\nboolean first = true;\nvoid loop() {\n  if (first) {\n    first = false;\n    tft.drawCircle(119, 160, 20, random(0xFFFF)); //&lt;- This is also displayed\n  }\n\n\n  Point p = ts.getPoint();\n\n\n  p.x = map(p.x, TS_MINX, TS_MAXX, 0, 240);\n  p.y = map(p.y, TS_MINY, TS_MAXY, 0, 320);\n  if (p.x &lt;= 240 &amp;&amp; p.y &lt;= 320 &amp;&amp; p.x &gt;= 0 &amp;&amp; p.y &gt;= 0) {\n    Serial.println(\"don't touch me!\");\n    touched = true;\n  }\n  else {\n    touched = false;\n  }\n  if (touched) {\n\n    tft.drawCircle(119, 180, 20, RED); //&lt;- This is not displayed and makes the screen flash\n    delay(1000);\n  }\n\n\n  //tft.fillScreen(BLUE);\n  //delay(500);\n\n}\n</code></pre>\n\n<p>Only if I have the last drawCircle inside the code the variable <em>touched</em> does not switch back to false if I stop touching the display.</p>\n\n<p>Does anybody has a clue what I am doing wrong?</p>\n\n<p><strong>Update:</strong> I stoped the display from flashing by letting the touched event only happen once when the display is touched. But I am still having the problem that nothing is drawn...</p>\n\n<pre><code>void loop() {\n  //Touchposition bestimmen\n  Point p = ts.getPoint();\n  p.x = map(p.x, TS_MINX, TS_MAXX, 0, 240);\n  p.y = map(p.y, TS_MINY, TS_MAXY, 0, 320);\n  if (p.x &lt;= 240 &amp;&amp; p.y &lt;= 320 &amp;&amp; p.x &gt;= 0 &amp;&amp; p.y &gt;= 0) {\n    if (released) {\n      touched = true;\n      released = false;\n    }\n  }\n  else {\n    //Serial.println(\"Touch me where I like it!\");\n    touched = false;\n    released = true;\n  }\n  if (touched &amp;&amp; !released) {\n    Serial.println(\"don't touch me!\");\n    drawButton(100, 100, \"Manuell\");\n    touched = false;\n    delay(500);\n  }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "math", "trigonometry"], "comments": [{"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1497479778, "post_id": 44555764, "comment_id": 76102003, "body": "Because n never gets to 5?"}, {"owner": {"reputation": 1, "user_id": 8163054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ca4267bb95b9c7bc6ae8ca683ed7a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jaqen", "link": "https://stackoverflow.com/users/8163054/jaqen"}, "edited": false, "score": 0, "creation_date": 1497480199, "post_id": 44555764, "comment_id": 76102127, "body": "So how shall I change it? I mean, we wherent told when the progression shall end, so I decided to finish it somehow... Shall I set n=5?"}, {"owner": {"reputation": 1, "user_id": 8163054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ca4267bb95b9c7bc6ae8ca683ed7a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jaqen", "link": "https://stackoverflow.com/users/8163054/jaqen"}, "edited": false, "score": 0, "creation_date": 1497480239, "post_id": 44555764, "comment_id": 76102141, "body": "And C is our uni subjaect, had c++ in colledge and now java and c in the uni xD"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1497480246, "post_id": 44555764, "comment_id": 76102142, "body": "In your loop you need to increment <code>n</code>. Perhaps you wanted a for loop."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1497480349, "post_id": 44555764, "comment_id": 76102170, "body": "Why is <code>n</code> a double? Why is it declared outside of <code>main()</code>?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1497481024, "post_id": 44555764, "comment_id": 76102359, "body": "<code>int fakultaet(double a = 2 * n + 1)</code> will not do what you think. Hint: <code>2 * n + 1</code> does not get executed since you pass a value. Even if you did not pass a value it would not work."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1497481036, "post_id": 44555764, "comment_id": 76102363, "body": "Lot of Non-C stuff in there. If you need to hand in C code, you may have problems with the marking."}, {"owner": {"reputation": 1, "user_id": 8163054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ca4267bb95b9c7bc6ae8ca683ed7a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jaqen", "link": "https://stackoverflow.com/users/8163054/jaqen"}, "edited": false, "score": 0, "creation_date": 1497481079, "post_id": 44555764, "comment_id": 76102382, "body": "Hmmm, I thougt as it was in the function and main function I shall declare n outside ...  And I did it with for loop, it worked but the sinus isn&#39;t right now..."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497481445, "post_id": 44555764, "comment_id": 76102497, "body": "@jesper-juhl The code is written in C++. And now an answer too."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1497482269, "post_id": 44555764, "comment_id": 76102749, "body": "<code>_tmain</code> is not a compliant entry into a C program on hosted environments. And this is C++, not C! (just bad coding style - why not use iostream methods?)"}], "answers": [{"comments": [{"owner": {"reputation": 1754, "user_id": 6087092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jjhgT.jpg?s=128&g=1", "display_name": "Isac", "link": "https://stackoverflow.com/users/6087092/isac"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1497481394, "post_id": 44555997, "comment_id": 76102485, "body": "@drescherjm indeed, thanks for noticing that"}, {"owner": {"reputation": 1, "user_id": 8163054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ca4267bb95b9c7bc6ae8ca683ed7a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jaqen", "link": "https://stackoverflow.com/users/8163054/jaqen"}, "edited": false, "score": 0, "creation_date": 1497481554, "post_id": 44555997, "comment_id": 76102539, "body": "so why did you set sin 0?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1497482093, "post_id": 44555997, "comment_id": 76102698, "body": "<b><i>why did you set sin 0</i></b> If you don&#39;t set it <code>sin</code> will be uninitialized (possibly containing a random garbage value from memory which will make your calculation garbage..)."}], "tags": [], "owner": {"reputation": 1754, "user_id": 6087092, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jjhgT.jpg?s=128&g=1", "display_name": "Isac", "link": "https://stackoverflow.com/users/6087092/isac"}, "is_accepted": false, "score": 1, "last_activity_date": 1497481663, "last_edit_date": 1497481663, "creation_date": 1497481212, "answer_id": 44555997, "question_id": 44555764, "link": "https://stackoverflow.com/questions/44555764/how-to-code-a-sin-progression-with-c/44555997#44555997", "title": "How to code a sin progression with c?", "body": "<p>You are not incrementing the sin, or the n. Also hardcoding the entry value for the factorial is not good. \nIt should look more like this:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n\nusing namespace std;\n\nint fakultaet(double a)\n{\n  if (a == 0)\n    return 1;\n  else\n    return (a * fakultaet(a - 1));\n}\n\nint main()\n{\n\n    double sin = 0, y, f; // sin = Sinus, y= angle, n=index\n    printf(\"please insert the angle \\n\");\n    scanf(\"%lf\", &amp;y);\n\n    double x = y * 3.14159265359 * 1 / 180; // x = radian measure\n\n    for (int n = 0; n &lt; 5; ++n)\n    {\n        sin += pow(-1, n) * pow(x, 2 * n + 1) / fakultaet(2 * n + 1);\n    }\n\n    printf(\"The sinus is %lf\\n\", sin);\n\n    system(\"Pause\");\n\n    return 0;\n}\n</code></pre>\n\n<p>I made several edits. I turned the factorial function:</p>\n\n<pre><code>int fakultaet(double a = 2 * n + 1)\n</code></pre>\n\n<p>into an non hardcoded version:</p>\n\n<pre><code>int fakultaet(double a)\n</code></pre>\n\n<p>Added the sin initialization:</p>\n\n<pre><code>double sin = 0\n</code></pre>\n\n<p>Changed your while loop:</p>\n\n<pre><code>while (n &lt; 5)\n</code></pre>\n\n<p>Into a for which includes the increment that was missing as well:</p>\n\n<pre><code>for (int n = 0; n &lt; 5; ++n)\n</code></pre>\n\n<p>Also turned the sin calculation:</p>\n\n<pre><code>sin = pow(-1, n) * pow(x, 2 * n + 1) / fakultaet(a);\n</code></pre>\n\n<p>Into one that sums:</p>\n\n<pre><code>sin += pow(-1, n) * pow(x, 2 * n + 1) / fakultaet(2 * n + 1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 60850, "user_id": 221955, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0bc09e1bd45610fc85274cd7bb002c56?s=128&d=identicon&r=PG", "display_name": "Michael Anderson", "link": "https://stackoverflow.com/users/221955/michael-anderson"}, "is_accepted": false, "score": 0, "last_activity_date": 1497495118, "creation_date": 1497495118, "answer_id": 44557737, "question_id": 44555764, "link": "https://stackoverflow.com/questions/44555764/how-to-code-a-sin-progression-with-c/44557737#44557737", "title": "How to code a sin progression with c?", "body": "<p>You can get a neater and more efficient result by observing that\nadjacent terms in the sum are related. We can express this as a recurrence:</p>\n\n<ul>\n<li><code>T_n = - T_{n-1} x^2 /((2n+1) (2n))</code></li>\n<li><code>T_0 = x</code></li>\n</ul>\n\n<p>This is better since it avoids calls to <code>pow</code> and the need to make any explicit factorial calculations (<code>fakultaet</code>). </p>\n\n<p>The code looks something like:</p>\n\n<pre><code>int main() {\n  ...\n  double T = x;\n  double sin = T;\n  for(int i=1 ; i&lt;5; ++i) {\n    T *= -(x*x) / ((2*i+1)*(2*i));\n    sin += T;\n  }\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8163054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80ca4267bb95b9c7bc6ae8ca683ed7a7?s=128&d=identicon&r=PG&f=1", "display_name": "Jaqen", "link": "https://stackoverflow.com/users/8163054/jaqen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "closed_date": 1497527280, "answer_count": 2, "score": -6, "last_activity_date": 1497495118, "creation_date": 1497479716, "last_edit_date": 1497482284, "question_id": 44555764, "link": "https://stackoverflow.com/questions/44555764/how-to-code-a-sin-progression-with-c", "closed_reason": "Not suitable for this site", "title": "How to code a sin progression with c?", "body": "<p>I'm pretty new in coding and trying to write a sin progression for the uni</p>\n\n<p>As a formula it looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GNOBm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GNOBm.png\" alt=\"the picture of the progression\"></a></p>\n\n<p>So I tried to code it... And somehow, it calculates the radian but not the sinus... What is wrong?</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n\nusing namespace std;\n\ndouble n, a;\n\nint fakultaet(double a = 2 * n + 1)\n{\n  if (a == 0)\n    return 1;\n  else\n    return (a * fakultaet(a - 1));\n}\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    double sin, y, f; // sin = Sinus, y= angle, n=index\n    printf(\"please insert the angle \\n\");\n    scanf(\"%lf\", &amp;y);\n\n    double x = y * 3.14159265359 * 1 / 180; // x = radian measure\n\n    while (n &lt; 5)\n    {\n        sin = pow(-1, n) * pow(x, 2 * n + 1) / fakultaet(a);\n    }\n\n    printf(\"The sinus is %lf\\n\", sin);\n\n    system(\"Pause\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance"], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1497479296, "creation_date": 1497479296, "answer_id": 44555699, "question_id": 44555653, "link": "https://stackoverflow.com/questions/44555653/override-virtual-function-with-existing-function/44555699#44555699", "title": "Override virtual function with existing function", "body": "<blockquote>\n<pre><code>// There a way to do this?\n// int myfunc() = myfunc2;\n// instead of this?\nint myfunc() { return myfunc2(); };\n</code></pre>\n</blockquote>\n\n<p>No, there isn't.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1497479577, "creation_date": 1497479577, "answer_id": 44555751, "question_id": 44555653, "link": "https://stackoverflow.com/questions/44555653/override-virtual-function-with-existing-function/44555751#44555751", "title": "Override virtual function with existing function", "body": "<p>There is a problem. </p>\n\n<p>A non-static member function accepts one more implicit parameter: pointer to the object itself. While a stand-alone function does not have such a parameter, For example you may not use the keyword <code>this</code> or member access syntax inside the definition of a stand alone function. </p>\n"}], "owner": {"reputation": 1255, "user_id": 866171, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e61ff212f7b0481a75c9a88e5d1b24c3?s=128&d=identicon&r=PG", "display_name": "cydonian", "link": "https://stackoverflow.com/users/866171/cydonian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1497479577, "creation_date": 1497479075, "question_id": 44555653, "link": "https://stackoverflow.com/questions/44555653/override-virtual-function-with-existing-function", "title": "Override virtual function with existing function", "body": "<p>Let me first say this is <strong>a purely academic question</strong>, since what I want to do can be better accomplished with multiple layers of inheritance.</p>\n\n<p>That said, I wonder if it's possible to override a virtual function with an existing function without writing a wrapper or adding any inheritance layers.  Code:</p>\n\n<pre><code>int myfunc2() { return 2; }\n\nclass Parent {\n public:\n  virtual int myfunc() { return 0; }\n};\n\nclass Child1 : public Parent {\n public:\n  int myfunc() override { return 1; }\n};\n\nclass Child2 : public Parent {\n public:\n  // There a way to do this?\n  // int myfunc() = myfunc2;\n  // instead of this?\n  int myfunc() { return myfunc2(); };\n};\n\nint main() {\n  Child2 baz;\n  return baz.myfunc();\n}\n</code></pre>\n\n<p>I'd like to override <code>myfunc</code> in the definition of <code>Child2</code> by simply \"forwarding\" the declaration to the existing declaration of <code>myfunc2</code>.</p>\n\n<p>Is this, or something akin to it, possible?</p>\n\n<p><strong>Context</strong>: I've got a bunch of child classes, some of which have identical definitions of <code>myfunc</code>, some of which do not.  A better solution is to create an intermediate child class that defines the common <code>myfunc</code> and have the pertinent children inherit from that instead.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "edited": false, "score": 0, "creation_date": 1497487404, "post_id": 44555582, "comment_id": 76103956, "body": "I would just see the stack on the deadlocked thread. BTW &quot;Dumping ...&quot; printout is always there and then it locks. Either that VLOG or obj-&gt;dumpObjectInfo/Tree?"}], "owner": {"reputation": 11, "user_id": 7460201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16f1cf86f226c6a356171fd0737eec59?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Merritt", "link": "https://stackoverflow.com/users/7460201/scott-merritt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1497478601, "creation_date": 1497478601, "question_id": 44555582, "link": "https://stackoverflow.com/questions/44555582/how-can-i-debug-a-mutex-deadlock-in-a-qt-event-handler-qdbusconnectionprivate", "title": "How Can I Debug a Mutex Deadlock in a Qt Event handler (QDBusConnectionPrivate)", "body": "<p>I am running across an intermittent deadlock in initialization of my Qt program, while it's relatively idle and in the event loop. </p>\n\n<p>I confirmed this was a futex_wait by using strace, and I always see an entry like this for the main thread:\n[pid  1768] futex(0x7f28f400aecc, FUTEX_WAIT_PRIVATE, 1, NULL </p>\n\n<p>I found out that I could add a Qt event filter, and therefore log events as they are processed from the main thread. Here's a snippet for that:</p>\n\n<pre><code>bool ActivityEventFilter::eventFilter(QObject *obj, QEvent *ev){\nVLOG(5) &lt;&lt; \"inspecting event \" &lt;&lt; obj &lt;&lt; \" name \" &lt;&lt; obj-&gt;objectName().toStdString() &lt;&lt; \" class \" &lt;&lt; obj-&gt;metaObject()-&gt;className() &lt;&lt; \" eventType \" &lt;&lt; ev-&gt;type();\n\n  if (VLOG_IS_ON(5))\n  {\n    if (ev-&gt;type() == QEvent::MetaCall)\n    {\n        if (QString(obj-&gt;metaObject()-&gt;className()).contains(\"QDBusConnectionPrivate\")\n        {\n            VLOG(5) &lt;&lt; \"Dumping object data\";\n            obj-&gt;dumpObjectInfo();\n            obj-&gt;dumpObjectTree();\n        }\n    }\n  }\n  ...\n}\n</code></pre>\n\n<p>And examining my logging, the freeze always is preceded by these lines:</p>\n\n<pre><code>I0614 17:18:27.928889  1812 ActivityEventFilter.cpp:19] inspecting event 0x7fde200144c0 name  class QDBusConnectionPrivate eventType 43\nI0614 17:18:27.928901 1812 ActivityEventFilter.cpp:28] Dumping object data\n</code></pre>\n\n<p>There is no output from the object info or from the object tree. </p>\n\n<p>I am not consciously using DBus anywhere in my application, so I'm looking to find a way to track down who is calling it to see if it can be prevented, but without the objectInfo, I don't know where to start. </p>\n\n<p>I found two Qt bug reports:\n<a href=\"https://bugreports.qt.io/browse/QTBUG-42189\" rel=\"nofollow noreferrer\">https://bugreports.qt.io/browse/QTBUG-42189</a></p>\n\n<p><a href=\"https://bugreports.qt.io/browse/QTBUG-51648\" rel=\"nofollow noreferrer\">https://bugreports.qt.io/browse/QTBUG-51648</a></p>\n\n<p>The first looks like the problem, but it appears all the resolutions went into Qt 5.4.0. (I'm using Qt 5.4.1)\nThe second looks a bit different. </p>\n"}, {"tags": ["c++", "oop", "design-patterns", "decorator"], "answers": [{"tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": true, "score": 0, "last_activity_date": 1497568246, "last_edit_date": 1497568246, "creation_date": 1497567826, "answer_id": 44578298, "question_id": 44555394, "link": "https://stackoverflow.com/questions/44555394/how-to-slim-down-a-fat-interface-without-breaking-the-decorator-pattern/44578298#44578298", "title": "How to slim down a Fat Interface without breaking the Decorator pattern?", "body": "<p>I don't know if this is the most clever/elegant way to address this problem, but after some more reflection, here's what I came up with:</p>\n\n<p>1) Use \"virtual inheritance\" for the two extended interfaces:</p>\n\n<pre><code>class ISeekableDataIO : public virtual IDataIO {...}\nclass IPacketDataIO   : public virtual IDataIO {...}\n</code></pre>\n\n<p>2) Create a <code>DecoratorDataIO</code> class that inherits from both of those interfaces, and passes all method calls through to the appropriate ones on the child <code>IDataIO</code> object, if possible:</p>\n\n<pre><code>class DecoratorDataIO : public IPacketDataIO, public ISeekableDataIO\n{\npublic:\n   DecoratorDataIO(const IDataIO * childIO)\n      : _childIO(childIO)\n      , _seekableChildIO(dynamic_cast&lt;ISeekableDataIO *&gt;(childIO))\n      , _packetChildIO(dynamic_cast&lt;IPacketDataIO *&gt;(childIO))\n   {\n      // empty\n   }\n\n   virtual ~DecoratorDataIO() {delete _childIO;}\n\n   // IDataIO interface implementation\n   virtual ssize_t Read(void * buffer, size_t size) {return _childIO() ? _childIO()-&gt;Read(buffer, size) : -1;}\n   virtual ssize_t Write(const void * buffer, size_t size) {return _childIO() ? _childIO()-&gt;Write(buffer, size) : -1;}\n\n   // ISeekableDataIO interface implementation\n   virtual result_t Seek(ssize_t offset, int whence) {return _seekableChildIO ? _seekableChildIO-&gt;Seek(offset, whence) : B_ERROR;}\n   virtual ssize_t GetCurrentSeekPosition() const {return _seekableChildIO ? _seekableChildIO-&gt;GetCurrentSeekPosition() : -1;}\n   virtual ssize_t GetStreamLength() const {return _seekableChildIO ? _seekableChildIO-&gt;GetStreamLength() : -1;}\n\n   // IPacketDataIO interface implementation\n   virtual const IPAddressAndPort &amp; GetSourceOfLastReadPacket() const {return _packetChildIO ? _packetChildIO-&gt;GetSourceOfLastReadPacket() : GetDefaultObjectForType&lt;IPAddressAndPort&gt;();}\n   virtual const IPAddressAndPort &amp; GetPacketSendDestination() const  {return _packetChildIO ? _packetChildIO-&gt;GetPacketSendDestination()  : GetDefaultObjectForType&lt;IPAddressAndPort&gt;();}\n\nprivate:\n   IDataIO * _childIO;\n   ISeekableDataIO * _seekableChildIO;\n   IPacketDataIO   * _packetChildIO;\n};\n</code></pre>\n\n<p>3) Now my decorator classes can just subclass DecoratorDataIO and override whichever methods they choose to (calling up to the superclass implementation of the method as necessary):</p>\n\n<pre><code>class XorDataIO : public DecoratorDataIO\n{  \npublic:\n   XorDataIO(IDataIO * child) : DecoratorDataIO(child) {/* empty */}\n\n   virtual ssize_t Read(void * buffer, size_t size)\n   {  \n      ssize_t ret = DecoratorDataIO::Read(buffer, size);\n      if (ret &gt; 0) XorData(buffer, ret);\n      return ret;\n   }\n\n   virtual ssize_t Write(const void * buffer, size_t size)\n   {  \n      XorData(buffer, size);   // const-violation here, but you get the idea\n      return DecoratorDataIO::Write(buffer, size);\n   }\n};\n</code></pre>\n\n<p>This approach accomplishes my goals, and if there is some ugliness (i.e. dynamic_cast&lt;>), at least it is contained within the <code>DecoratorDataIO</code> class and not exposed to all the decorator subclasses.</p>\n"}], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 4, "accepted_answer_id": 44578298, "answer_count": 1, "score": 4, "last_activity_date": 1497568246, "creation_date": 1497477568, "last_edit_date": 1497539073, "question_id": 44555394, "link": "https://stackoverflow.com/questions/44555394/how-to-slim-down-a-fat-interface-without-breaking-the-decorator-pattern", "title": "How to slim down a Fat Interface without breaking the Decorator pattern?", "body": "<p>In my C++ library code I'm using an abstract base class as an interface to all different kinds of I/O-capable objects.  It currently looks like this:</p>\n\n<pre><code>// All-purpose interface for any kind of object that can do I/O\nclass IDataIO\n{\npublic:\n   // basic I/O calls\n   virtual ssize_t Read(void * buffer, size_t size) = 0;\n   virtual ssize_t Write(const void * buffer, size_t size) = 0;\n\n   // Seeking calls (implemented to return error codes\n   // for I/O objects that can't actually seek)\n   virtual result_t Seek(ssize_t offset, int whence) = 0;\n   virtual ssize_t GetCurrentSeekPosition() const = 0;\n   virtual ssize_t GetStreamLength() const = 0;\n\n   // Packet-specific calls (implemented to do nothing\n   // for I/O objects that aren't packet-oriented)\n   virtual const IPAddressAndPort &amp; GetSourceOfLastReadPacket() const = 0;\n   virtual result_t SetPacketSendDestination(const IPAddressAndPort &amp; iap) = 0;\n};\n</code></pre>\n\n<p>This works pretty well -- I have various concrete subclasses for TCP, UDP, files, memory buffers, SSL, RS232, stdin/stdout, and so on, and I'm able to write I/O-agnostic routines that can be used in conjunction with any of them.</p>\n\n<p>I also have various <a href=\"https://en.wikipedia.org/wiki/Decorator_pattern\" rel=\"nofollow noreferrer\">decorator</a> classes that take ownership of an existing <code>IDataIO</code> object and serve as a behavior-modifying front-end to that object.  These decorator classes are useful because a single decorator class be used to can modify/enhance the behavior of any kind of <code>IDataIO</code> object.  Here's a simple (toy) example:</p>\n\n<pre><code>/** Example decorator class:  This object wraps any given\n  * child IDataIO object, such that all data going out is\n  * obfuscated by applying an XOR transformation to the bytes,\n  * and any data coming in is de-obfuscated the same way.\n  */\nclass XorDataIO : public IDataIO\n{\npublic:\n   XorDataIO(IDataIO * child) : _child(child) {/* empty */}\n   virtual ~XorDataIO() {delete _child;}\n\n   virtual ssize_t Read(void * buffer, size_t size)\n   {\n      ssize_t ret = _child-&gt;Read(buffer, size);\n      if (ret &gt; 0) XorData(buffer, ret);\n      return ret;\n   }\n\n   virtual ssize_t Write(const void * buffer, size_t size)\n   {\n      XorData(buffer, size);   // const-violation here, but you get the idea\n      return _child-&gt;Write(buffer, size);\n   }\n\n   virtual result_t Seek(ssize_t offset, int whence) {return _child-&gt;Seek(offset, whence);}\n   virtual ssize_t GetCurrentSeekPosition() const    {return _child-&gt;GetCurrentSeekPosition();}\n   virtual ssize_t GetStreamLength() const           {return _child-&gt;GetStreamLength();}\n\n   virtual const IPAddressAndPort &amp; GetSourceOfLastReadPacket() const      {return _child-&gt;GetSourceOfLastReadPacket();}\n   virtual result_t SetPacketSendDestination(const IPAddressAndPort &amp; iap) {return _child-&gt;SetPacketSendDestination(iap);}\n\nprivate:\n   IDataIO * _child;\n};\n</code></pre>\n\n<p>This is all well and good, but what's bothering me is that my <code>IDataIO</code> class looks like an example of a <a href=\"https://stackoverflow.com/questions/7084139/what-is-a-fat-interface\">fat interface</a> -- for example, a <code>UDPSocketDataIO</code> class will never be able to implement the <code>Seek()</code>, <code>GetCurrentSeekPosition()</code>, and <code>GetStreamLength()</code> methods, while a <code>FileDataIO</code> class will never be able to implement the <code>GetSourceOfLastReadPacket()</code> and <code>SetPacketSendDestination()</code> methods.  So both classes are forced to implement those methods as stubs that just do nothing and return an error code -- which works, but it's ugly.</p>\n\n<p>To solve the problem, I'd like to break out the <code>IDataIO</code> interface into separate chunks, like this:</p>\n\n<pre><code>// The bare-minimum interface for any object that we can\n// read bytes from, or write bytes to (e.g. TCP or RS232)\nclass IDataIO\n{\npublic:\n   virtual ssize_t Read(void * buffer, size_t size) = 0;\n   virtual ssize_t Write(const void * buffer, size_t size) = 0;\n};\n\n// A slightly extended interface for objects (e.g. files\n// or memory-buffers) that also allows us to seek to a\n// specified offset within the data-stream.\nclass ISeekableDataIO : public IDataIO\n{\npublic:\n   virtual result_t Seek(ssize_t offset, int whence) = 0;\n   virtual ssize_t GetCurrentSeekPosition() const = 0;\n   virtual ssize_t GetStreamLength() const = 0;\n};\n\n// A slightly extended interface for packet-oriented\n// objects (e.g. UDP sockets)\nclass IPacketDataIO : public IDataIO\n{\npublic:\n   virtual const IPAddressAndPort &amp; GetSourceOfLastReadPacket() const = 0;\n   virtual result_t SetPacketSendDestination(const IPAddressAndPort &amp; iap) = 0;\n};\n</code></pre>\n\n<p>.... so now I can subclass <code>UDPSocketDataIO</code> from the <code>IPacketDataIO</code> sub-interface, and subclass <code>FileDataIO</code> from the <code>ISeekableDataIO</code> interface, while <code>TCPSocketDataIO</code> can still subclass directly from <code>IDataIO</code>, and so on.  That way each type of I/O object presents the interface only to the functionality it can actually support, and nobody has to implement no-op/stub versions of methods that are irrelevant to what they do.</p>\n\n<p>So far, so good, but the problem that arises at this point is with the decorator classes -- what interface should my <code>XorDataIO</code> subclass inherit from in this scenario?  I suppose I could write a <code>XorDataIO</code>, a <code>XorSeekableDataIO</code>, and a <code>XorPacketDataIO</code>, so that all three types of interface can be fully decorated, but I'd really rather not -- that seems like a lot of redundancy/overhead, particularly if I have multiple different adapter classes already and I don't want to multiple their numbers further by a factor of three.</p>\n\n<p>Is there some well-known clever/elegant way to address this problem, such that I can have my cake and eat it too?</p>\n"}, {"tags": ["python", "c++", "multithreading", "locking", "mutex"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1497477056, "post_id": 44555289, "comment_id": 76101022, "body": "Having a lock in a destructor is a definite no-no."}, {"owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "edited": false, "score": 0, "creation_date": 1497477337, "post_id": 44555289, "comment_id": 76101162, "body": "@CaptainObvlious, so you&#39;re saying the mutex object is being destroyed as it&#39;s being locked? If I shouldn&#39;t use a lock in the destructor, then should I clean up the queue without a lock? Or is there a different approach to cleaning up the queue?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497477722, "post_id": 44555289, "comment_id": 76101331, "body": "You are creating a completely new lock in the destructor, then you lock it and unlock it. What on earth is this supposed to achieve (that is useful)?"}, {"owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497477842, "post_id": 44555289, "comment_id": 76101385, "body": "@JesperJuhl Nothing, I was just trying simplify the code as much as possible to focus on where the problem is. In reality, the mutex is a member of the class and there are actual operations between the lock and unlock."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1497477963, "post_id": 44555289, "comment_id": 76101433, "body": "@SFBA26 then perhaps you should post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that we have an actual chance of helping you with your problem. Just posting code snippets that don&#39;t do anything and that we can&#39;t compile/run/test is fairly useless."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497478288, "post_id": 44555289, "comment_id": 76101547, "body": "&quot;why would it be different when I exit()&quot; - <code>exit()</code> doesn&#39;t call destructors of local objects (amongst other things). It&#39;s a rather brutal way of terminating a program compared to returning from <code>main</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1497478451, "post_id": 44555289, "comment_id": 76101597, "body": "Why are you locking anything in the destructor?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1497478457, "post_id": 44555289, "comment_id": 76101602, "body": "Doing kernel calls during dll shutdown is not supported behaviour.  There was a series of post on &quot;The Old New Thing&quot; blog regarding this very issue.  Will try and find them ... Here&#39;s one. <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20100122-00/?p=15193\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/oldnewthing/20100122-00/?p=15193</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1497478553, "post_id": 44555289, "comment_id": 76101634, "body": "Are you locking the queue from within the object you are deleting from the queue?"}, {"owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1497479017, "post_id": 44555289, "comment_id": 76101780, "body": "@Galik, no, the the queue handler locks the queue, which contains &quot;job&quot; objects. Part of the question was whether I need to lock the queue in the destructor, and it appears the answer is no."}, {"owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1497479293, "post_id": 44555289, "comment_id": 76101850, "body": "@RichardCritten thanks for the info!"}, {"owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497554153, "post_id": 44555289, "comment_id": 76139327, "body": "@JesperJuhl, you&#39;re right. I added a MVCE. Sorry I didn&#39;t add it originally."}, {"owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "edited": false, "score": 1, "creation_date": 1518373643, "post_id": 44555289, "comment_id": 84469031, "body": "@NeilButterworth Nothing wrong with locking in destructors. This is something <code>operator delete</code> already does. Any third party allocator needs this too. The issue here is with broken <code>std::mutex</code> implementation which gets worse due to broken module deinitialization on Windows."}], "answers": [{"tags": [], "owner": {"reputation": 6746, "user_id": 1143634, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/e7lca.png?s=128&g=1", "display_name": "StaceyGirl", "link": "https://stackoverflow.com/users/1143634/staceygirl"}, "is_accepted": false, "score": 1, "last_activity_date": 1518375527, "last_edit_date": 1518375527, "creation_date": 1518373441, "answer_id": 48734890, "question_id": 44555289, "link": "https://stackoverflow.com/questions/44555289/mutex-lock-in-c-destructor-causes-exception-when-exit-called-in-python/48734890#48734890", "title": "Mutex lock in C++ destructor causes exception when exit() called in Python", "body": "<blockquote>\n  <p>Some people, when confronted with a problem, think, \"I know, I'll use\n  lazy initialization.\" Now they have two problems.</p>\n</blockquote>\n\n<p>This is a bug in MSVC implementation of <code>std::mutex</code>. Before MSVC14 <code>std::mutex</code> and <code>std::condition_variable</code> would perform some internal initializations lazily. This alone is <em>bad</em>, but becomes even worse due to <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20040127-00/?p=40873/\" rel=\"nofollow noreferrer\">how modules are deinitialized on Windows</a>.</p>\n\n<p>The bug was fixed in MSVC14 (Visual Studio 2015) - <code>std::mutex</code> was rewritten to use <code>SRWLock</code> internally. <code>SRWLock</code> is a simple primitive without additional dependencies. It relies only on atomic instructions and <a href=\"http://locklessinc.com/articles/keyed_events/\" rel=\"nofollow noreferrer\">Keyed Events</a> syscalls. As the kernel is isolated from the userspace, <code>SRWLock</code>'s should work seemlessly regardless of where they are used.</p>\n\n<p>Seems like you are using MSVC12 (Visual Studio 2013). You should switch to MSVC14 (Visual Studio 2015) or use Boost.Thread instead.</p>\n\n<p>There are actually many issues with <code>std::mutex</code> on MSVC12 and earlier. Some are related to the actual implementation used in CRT, others (as I heard) are caused by bugs in Windows 7 and were fixed in Windows 8.</p>\n"}], "owner": {"reputation": 754, "user_id": 3735384, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5f6cde1a585b7ebf5ad19b5e65ea54d9?s=128&d=identicon&r=PG&f=1", "display_name": "SFBA26", "link": "https://stackoverflow.com/users/3735384/sfba26"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1518375527, "creation_date": 1497476967, "last_edit_date": 1497554078, "question_id": 44555289, "link": "https://stackoverflow.com/questions/44555289/mutex-lock-in-c-destructor-causes-exception-when-exit-called-in-python", "title": "Mutex lock in C++ destructor causes exception when exit() called in Python", "body": "<p>I have an application that loads a DLL with a class that handles jobs in a queue. In order to keep it thread safe, a mutex is locked whenever the queue is modified. When the application exits and the destructor is called, the mutex is locked in order to clear the queue.</p>\n\n<p>However, when I load this DLL in Python, create an instance of the object, and call <code>exit()</code> (in Python) an exception is thrown when the mutex tries to lock:</p>\n\n<blockquote>\n  <p>Microsoft Visual Studio C Runtime Library has detected a fatal error in python.exe.</p>\n</blockquote>\n\n<p>I have simplified the destructor down to just creating a mutex locally and trying to lock it, and can still reproduce the issue:</p>\n\n<pre><code>QueueHandler::~QueueHandler(void)\n{\n    mutex mut; // in reality, this is a member of the class and there are actual operations between lock and unlock\n    mut.lock(); // exception here\n    mut.unlock();\n}\n</code></pre>\n\n<p>If I take my unmodified code and simply remove the lock around the queue operation, it works fine. </p>\n\n<p>Here is the seemingly relevant section of the call stack:</p>\n\n<pre><code>KernelBase.dll!RaiseException() Unknown\nmsvcr120.dll!_CxxThrowException(void * pExceptionObject, const _s__ThrowInfo * pThrowInfo) Line 154 C++\nmsvcr120.dll!Concurrency::details::SchedulerBase::SchedulerBase(const Concurrency::SchedulerPolicy &amp; policy) Line 149   C++\nmsvcr120.dll!Concurrency::details:: SchedulerBase::CreateWithoutInitializing(const Concurrency::SchedulerPolicy &amp; policy) Line 285  C++\nmsvcr120.dll!Concurrency::details:: SchedulerBase::CreateContextFromDefaultScheduler() Line 571 C++\nmsvcr120.dll!Concurrency::details::SchedulerBase::CurrentContext() Line 404 C++\n[Inline Frame] msvcr120.dll!Concurrency::details::LockQueueNode::{ctor (unsigned int) Line 619  C++\nmsvcr120.dll!Concurrency::critical_section::lock() Line 1031    C++\nmsvcp120.dll!mtx_do_lock(_Mtx_internal_imp_t * * mtx, const xtime * target) Line 67 C++\n--&gt; MyApplication.dll!QueueHandler::~QueueHandler() Line 106    C++\nMyApplication.dll!_CRT_INIT(void * hDllHandle, unsigned long dwReason, void * lpreserved) Line 416  C\nMyApplication.dll!__DllMainCRTStartup(void * hDllHandle, unsigned long dwReason, void * lpreserved) Line 522    C\nntdll.dll!LdrShutdownProcess()  Unknown\nntdll.dll!RtlExitUserProcess()  Unknown\nmsvcr100.dll!doexit(int code, int quick, int retcaller) Line 621    C\npython27.dll!000000001e13be65() Unknown\n...\npython27.dll!000000001e043494() Unknown\npython.exe!000000001d00119e()   Unknown\n</code></pre>\n\n<p>Questions:</p>\n\n<ol>\n<li>If this code works when I exit my app normally (close the GUI), why would it be different when I <code>exit()</code> from Pyton?</li>\n<li>Is there a \"more correct\" way to exit from Python?</li>\n<li>Could this be related to the type of mutex/lock being used?</li>\n<li>Do I even need to lock the section with the queue operations in my destructor? Or is it okay to delete the objects in the queue without a lock?</li>\n</ol>\n\n<p>Edit:\n<strong>MCVE:</strong> <a href=\"https://www.dropbox.com/s/ftyb3oyfw7zn2vw/QueueHandlerApp.zip?dl=0\" rel=\"nofollow noreferrer\">QueueHandlerApp</a> - Run the app or run script.py to demonstrate the issue.</p>\n"}, {"tags": ["javascript", "c++", "arrays", "node.js", "node.js-addon"], "comments": [{"owner": {"reputation": 92373, "user_id": 2050455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1255d2cb06adc4d0b48adf1d90e847?s=128&d=identicon&r=PG", "display_name": "mscdex", "link": "https://stackoverflow.com/users/2050455/mscdex"}, "edited": false, "score": 0, "creation_date": 1497476848, "post_id": 44555201, "comment_id": 76100925, "body": "How many elements are we talking about here?"}, {"owner": {"reputation": 76, "user_id": 8067292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d604ce1d0932e39aa6a4c58f8ee5523f?s=128&d=identicon&r=PG&f=1", "display_name": "S. Vaughn", "link": "https://stackoverflow.com/users/8067292/s-vaughn"}, "reply_to_user": {"reputation": 92373, "user_id": 2050455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b1255d2cb06adc4d0b48adf1d90e847?s=128&d=identicon&r=PG", "display_name": "mscdex", "link": "https://stackoverflow.com/users/2050455/mscdex"}, "edited": false, "score": 0, "creation_date": 1497477951, "post_id": 44555201, "comment_id": 76101426, "body": "@mscdex It could be many. I should clarify, the encoded array originates as a <code>JavaScript array</code>. So the user could have passed in an array of 3 elements to be encoded, or 10000. That is stored as an <code>ArrayBuffer</code> that is returned to the JS program. The <code>ArrayBuffer</code> can then be passed back into the addon for decoding, where conversions happen to break it into the elements (this is part of the C library, not my implementation directly). All I am responsible for is calling the C library to decode each element, and returning an equivalent JS array that represents the one originally encoded."}], "owner": {"reputation": 76, "user_id": 8067292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d604ce1d0932e39aa6a4c58f8ee5523f?s=128&d=identicon&r=PG&f=1", "display_name": "S. Vaughn", "link": "https://stackoverflow.com/users/8067292/s-vaughn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1497478908, "creation_date": 1497476563, "last_edit_date": 1497478908, "question_id": 44555201, "link": "https://stackoverflow.com/questions/44555201/faster-way-of-handling-v8-arrays-in-node-js-c-addon", "title": "Faster way of handling v8 Arrays in Node.js C++ Addon?", "body": "<p>I am working on a Node.js addon/JavaScript codec that utilizes a C based library to handle the encoding/decoding. The addon is quite fast, except in one facet. Currently, decoding arrays takes significantly longer than other implementations (e.g. <code>JSON.parse</code> and <code>MessagePack.decode</code> ). The method I'm currently using is as follows:</p>\n\n<pre><code>Create v8 Local&lt;Array&gt; result;\nfor (i = 0 to #elements in encoded array)\n    result-&gt;Set(i, decode(element));\n</code></pre>\n\n<p>The problem is <code>Set</code> takes quite a while, so if anyone knows a quicker way for me to do this, that would be much appreciated.</p>\n"}, {"tags": ["c++", "xml"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 3, "creation_date": 1497476148, "post_id": 44555108, "comment_id": 76100601, "body": "Sounds like you submitted the solution or project file which do not contain your code. The only way will be to retrieve it from the machine you wrote it on"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1497476182, "post_id": 44555108, "comment_id": 76100619, "body": "<b><i>Is there any way to retrieve my code from that xml file?</i></b> No."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1497476550, "post_id": 44555108, "comment_id": 76100789, "body": "Your C++ code is there in the filesystem of the machine you wrote it on. You just submitted the wrong file(s). Go get the right one."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1497476654, "post_id": 44555108, "comment_id": 76100834, "body": "I future I recommend getting a free account somewhere like GitHub <a href=\"https://github.com/\" rel=\"nofollow noreferrer\">github.com</a> Store your code there rather than somewhere it can get lost."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1497476813, "post_id": 44555108, "comment_id": 76100910, "body": "My guess is your OS has the extensions turned off (&quot;hide extensions for known types&quot; enabled). And you could not tell the difference between two files with the same name but different extensions.."}, {"owner": {"reputation": 87, "user_id": 6247390, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AM5jt.jpg?s=128&g=1", "display_name": "Play4u", "link": "https://stackoverflow.com/users/6247390/play4u"}, "edited": false, "score": 0, "creation_date": 1497476970, "post_id": 44555108, "comment_id": 76100980, "body": "Ahh I presumed the answers would be similar, but it is still painful to hear it from you guys. I guess if noone decided to delete the files from the computer, the code would still be there, but my teachers dont want to hear anything from it. Apparantly what I have learned is notas important as following the bureaucracy step by step. I guess if they want to listen, I can show that the files have not been modified since the day of the exam, but I highly doubt it Sucks to be me, thank you anyways guys"}, {"owner": {"reputation": 87, "user_id": 6247390, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AM5jt.jpg?s=128&g=1", "display_name": "Play4u", "link": "https://stackoverflow.com/users/6247390/play4u"}, "edited": false, "score": 0, "creation_date": 1497477287, "post_id": 44555108, "comment_id": 76101137, "body": "Yeah, that is exaclty what happened. It appeared as regular cpp file to me. In your honest opinion how much in the wrong am I? I will repeat that this was the first time I had used Visual Studio and I had no idea of the extensions of the files. I jsut presumed they worked like the files in Code Blocks do. They&#39;ve been teaching us, coding on Code Blocks as well How was I supposed to know what to send?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1497477412, "post_id": 44555108, "comment_id": 76101202, "body": "One of the first things I do when I setup a machine is to turn that setting off. Windows is not helping me by hiding the extension."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1497477448, "post_id": 44555108, "comment_id": 76101218, "body": "The extension for a cpp file should be the same as in Code::Blocks although in both cases the user can set this if they want when creating the file."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1497483184, "post_id": 44555108, "comment_id": 76102977, "body": "I have long considered Code::Blocks to be a punishment rather than an IDE, but even from my myopic and bigoted viewpoint this exceeds the crime. I feel for you, friend."}], "answers": [{"tags": [], "owner": {"reputation": 112, "user_id": 7927462, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-R-QmX07ea4o/AAAAAAAAAAI/AAAAAAAAAI0/e78TrakxGnw/photo.jpg?sz=128", "display_name": "Brxxn", "link": "https://stackoverflow.com/users/7927462/brxxn"}, "is_accepted": false, "score": 0, "last_activity_date": 1497480400, "last_edit_date": 1497480400, "creation_date": 1497480030, "answer_id": 44555814, "question_id": 44555108, "link": "https://stackoverflow.com/questions/44555108/is-it-possible-to-convert-information-from-xml-file-to-cpp/44555814#44555814", "title": "is it possible to convert information from xml file to cpp", "body": "<p>Short answer: <strong>No.</strong></p>\n\n<p>The .XML is the solution file that Visual Studio uses, which contains none of your code. If possible, I would speak with someone of importance at your testing location to gain access to that computer, and pull out the .cpp file in the folder where you saved it. If you didn\u2019t specify where to save it, it\u2019s most likely in documents/visual studio/.</p>\n\n<p><strong>But!</strong> You said you were in college, meaning these machines are most likely closely monitored along with the current Windows Install State being wiped clean and restored to the previous state it started on every time the computer is shut off, if that is the case, the you\u2019re unfortunately out of luck.</p>\n"}], "owner": {"reputation": 87, "user_id": 6247390, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AM5jt.jpg?s=128&g=1", "display_name": "Play4u", "link": "https://stackoverflow.com/users/6247390/play4u"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497480400, "creation_date": 1497476070, "question_id": 44555108, "link": "https://stackoverflow.com/questions/44555108/is-it-possible-to-convert-information-from-xml-file-to-cpp", "title": "is it possible to convert information from xml file to cpp", "body": "<p>I'm writing here because I'm desperate and I really don't know what to do.\nLong story short: In college, studying programming, been writing all my programs on C++ on Code Blocks. Final exam time: been studying for that shit for months. I go on our my designated computer and it turns out it doesnt have Code Blocks, only Visual studio. I write my code on visual studio, everything is working fine.\nI turn in, what I presume is the .cpp file of the program (which should include the code) just the same as I would normally do in Code Blocks.</p>\n\n<p>Turns out I've turned in an .xml file, which apparantly contains nothing of my code.</p>\n\n<p>My question is: Is there any way to retrieve my code from that xml file? I really dont know what .xml files are so I have no clue.\nAlso what would you advice me do in this situation? Literally months of work have gone to waste in a single mistake, which is not even entirely my fault.</p>\n\n<p>Sorry for the long rant, but had to vent out to someone.\nThanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1497475935, "post_id": 44555058, "comment_id": 76100511, "body": "I suggest you pick up a <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good book covering C++</a>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1497475938, "post_id": 44555058, "comment_id": 76100513, "body": "Change <code>if(grade1 &gt;= 0 &amp;&amp; &lt; 60)</code> to <code>if(grade1 &gt;= 0 &amp;&amp; grade1 &lt; 60)</code>"}, {"owner": {"reputation": 649, "user_id": 3207381, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8d1d7d1741b6d353fc66fa732b7af609?s=128&d=identicon&r=PG&f=1", "display_name": "Mukul215", "link": "https://stackoverflow.com/users/3207381/mukul215"}, "edited": false, "score": 0, "creation_date": 1497475949, "post_id": 44555058, "comment_id": 76100517, "body": "<code>if(grade1 &gt;= 0 &amp;&amp; grade1 &lt; 60)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1497476989, "post_id": 44555058, "comment_id": 76100990, "body": "&quot; My book looks just like my example&quot; - I&#39;m prepared to bet it does not - what book is it?"}, {"owner": {"reputation": 13, "user_id": 7242302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9837066dd11d07d8f9d660884d803d66?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Kallas", "link": "https://stackoverflow.com/users/7242302/ben-kallas"}, "edited": false, "score": 0, "creation_date": 1497498071, "post_id": 44555058, "comment_id": 76106148, "body": "@NeilButterworth After reading the examples the book was not what I had, I was just blinded by my firm knowledge that I was right and that the compiler was wrong."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 8067292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d604ce1d0932e39aa6a4c58f8ee5523f?s=128&d=identicon&r=PG&f=1", "display_name": "S. Vaughn", "link": "https://stackoverflow.com/users/8067292/s-vaughn"}, "is_accepted": true, "score": 1, "last_activity_date": 1497476004, "creation_date": 1497476004, "answer_id": 44555086, "question_id": 44555058, "link": "https://stackoverflow.com/questions/44555058/if-statement-syntax-error-for-beginner/44555086#44555086", "title": "If statement syntax error for beginner", "body": "<p>You need to include 'grade1' on both comparisons.</p>\n\n<pre><code>if (grade1 &gt;= 0 &amp;&amp; grade1 &lt; 60)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2567, "user_id": 2977137, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/H8qW4.png?s=128&g=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/2977137/tony"}, "is_accepted": false, "score": 1, "last_activity_date": 1497476008, "creation_date": 1497476008, "answer_id": 44555090, "question_id": 44555058, "link": "https://stackoverflow.com/questions/44555058/if-statement-syntax-error-for-beginner/44555090#44555090", "title": "If statement syntax error for beginner", "body": "<p>What you want is this:</p>\n\n<pre><code>if(grade1 &gt;= 0 &amp;&amp; grade1 &lt; 60)\n</code></pre>\n\n<p>You need to provide a variable for each condition in your <code>if</code> statement. The <code>grade1</code> variable will not carry over for other comparisons.</p>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 8163118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/042f3620e5f8fdd64303dedc9ab5c9ac?s=128&d=identicon&r=PG&f=1", "display_name": "Kattie.S", "link": "https://stackoverflow.com/users/8163118/kattie-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1497482689, "creation_date": 1497482689, "answer_id": 44556181, "question_id": 44555058, "link": "https://stackoverflow.com/questions/44555058/if-statement-syntax-error-for-beginner/44556181#44556181", "title": "If statement syntax error for beginner", "body": "<p>You must write like this </p>\n\n<pre><code>if (grade1 &gt;= 60 &amp;&amp; grade1 &lt; 60){ //code here   } \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7242302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9837066dd11d07d8f9d660884d803d66?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Kallas", "link": "https://stackoverflow.com/users/7242302/ben-kallas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 44555086, "answer_count": 3, "score": -2, "last_activity_date": 1497482689, "creation_date": 1497475890, "question_id": 44555058, "link": "https://stackoverflow.com/questions/44555058/if-statement-syntax-error-for-beginner", "title": "If statement syntax error for beginner", "body": "<p>I'm teaching myself C++ and was writing some code to calculate grade averages with arrays. Everything works except for when I try to display the results. I get the error \"expected primary-expression before '&lt;' token\" on this line of code. </p>\n\n<pre><code>    if(grade1 &gt;= 0 &amp;&amp; &lt; 60)\n</code></pre>\n\n<p>followed by a single cout statement and a semi-colon. I looked in the book I am using and on c++ forums. My book looks just like my example and online everyone was missing a semi-colon or something else. Is that my case too? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7972945"}, "edited": false, "score": 0, "creation_date": 1497476255, "post_id": 44555056, "comment_id": 76100645, "body": "but i reassign <code>tmp</code> with my delete_object or? so tmp should have a the value of the following object? No just the one with the same value of <code>Matrikelnummer</code>"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 0, "creation_date": 1497476571, "post_id": 44555056, "comment_id": 76100801, "body": "It&#39;s unfortunate that the German word for &quot;registration&quot; sounds like the English phrase &quot;animal dung&quot;..."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7972945"}, "edited": false, "score": 0, "creation_date": 1497476665, "post_id": 44555175, "comment_id": 76100840, "body": "Alright I understand! So in my <code>delete_object()</code> i should write <code>tmp = b</code> and <code>b = b-&gt;next</code>? But that still doesn&#39;t work.. I am losing the pointer somewhere. I got the exit code 11. I updated my code on top."}], "tags": [], "owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "is_accepted": false, "score": 0, "last_activity_date": 1497476408, "creation_date": 1497476408, "answer_id": 44555175, "question_id": 44555056, "link": "https://stackoverflow.com/questions/44555056/deleting-by-value-from-a-single-linked-list/44555175#44555175", "title": "Deleting by value from a single linked list", "body": "<p>When you call <code>delete_object()</code> you do not delete the object being passed, you delete the <em>next</em> entry in your linked list. So your <code>if()</code> statement is finding the correct node to delete, but then you proceed to delete the node <em>after</em> it instead. You should fix that (but do keep the general idea of returning the node after the one you deleted).</p>\n\n<p>Also your logic of the unconditional <code>tmp = tmp-&gt;next</code> would lead you to <em>skip</em> the node being returned by <code>delete_object()</code> if called. You should probably put that statement inside an <code>else</code> clause instead, because once you fix <code>delete_object()</code> it will return the next node you want to continue with for you as well.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7972945"}, "edited": false, "score": 0, "creation_date": 1497477069, "post_id": 44555277, "comment_id": 76101030, "body": "No its not? I am iterating with <code>tmp = tmp-&gt;next;</code> through my list right?"}, {"owner": {"reputation": 1, "user_id": 8162959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6c09bbf4b3dda2de55a126947e3192e?s=128&d=identicon&r=PG&f=1", "display_name": "YuZ", "link": "https://stackoverflow.com/users/8162959/yuz"}, "edited": false, "score": 0, "creation_date": 1497477455, "post_id": 44555277, "comment_id": 76101221, "body": "When your function being called, <code>if(tmp-&gt;Matrikelnummer == info){</code> would be processed before <code>tmp = tmp-&gt;next</code>, right? @HenningWilmer"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7972945"}, "edited": false, "score": 0, "creation_date": 1497477913, "post_id": 44555277, "comment_id": 76101407, "body": "Oh yes you are right. I didn&#39;t even realize that because I am always getting exit code 11.."}], "tags": [], "owner": {"reputation": 1, "user_id": 8162959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6c09bbf4b3dda2de55a126947e3192e?s=128&d=identicon&r=PG&f=1", "display_name": "YuZ", "link": "https://stackoverflow.com/users/8162959/yuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1497476922, "creation_date": 1497476922, "answer_id": 44555277, "question_id": 44555056, "link": "https://stackoverflow.com/questions/44555056/deleting-by-value-from-a-single-linked-list/44555277#44555277", "title": "Deleting by value from a single linked list", "body": "<p>Not yet looking into details but in <code>filter_list</code> you have <code>Anmeldung* tmp = b;</code>, meaning that <code>if(tmp-&gt;Matrikelnummer == info){</code> is always true.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7972945"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1497476922, "creation_date": 1497475882, "last_edit_date": 1497476746, "question_id": 44555056, "link": "https://stackoverflow.com/questions/44555056/deleting-by-value-from-a-single-linked-list", "title": "Deleting by value from a single linked list", "body": "<p>So I have been trying to filter my list. The list is correctly created and filled, but I got some entries twice from my document. It should be like that. Now I am trying to filter them out and I think I got a pretty good idea of it but its not working properly.</p>\n\n<pre><code>Anmeldung* delete_object(Anmeldung* b){\n\n    Anmeldung* tmp = b;\n    b = b-&gt;next;\n    delete(tmp);\n\n    return b;\n}\n\n\nvoid filter_list(Anmeldung* b){\n\n    Anmeldung* tmp = b;\n\n    while(b!=NULL){\n        std::string info = b-&gt;Matrikelnummer;\n\n        while(tmp!=NULL){\n\n            if(tmp-&gt;Matrikelnummer == info){\n                tmp = delete_object(tmp);\n            }else\n                tmp = tmp-&gt;next;\n        }\n        b = b-&gt;next;\n        tmp = b;\n    }\n}\n</code></pre>\n\n<p>So I am trying to iterate through my list and compare every value with the whole list. The value I am searching for is <code>Matrikelnummer</code> if two persons got the same Matrikelnummer one gets deleted. </p>\n\n<p>This is my struct Anmeldung. This is provide from my Professor:</p>\n\n<pre><code>struct Anmeldung {\n  Anmeldung* next;\n  std::string   Nachname;             // Name Teilnehmer\n  std::string   Vorname;              // Vorname Teilnehmer\n  std::string   Email;                // Email Adresse Teilnehmer\n  std::string   Matrikelnummer;       // Matrikelnr. Teilnehmer\n  std::string   Studienrichtung;      // Studienrichtung Teilnehmer\n  std::string   Semester;             // Studiensemester Teilnehmer\n  std::string   G1name;               // Name Wunschkandidat fuer Praktikumsgruppe\n  std::string   G1vorname;            // Vorname Wunschkandidat\n  std::string   Anmerkung;            // Freier Text\n};\n</code></pre>\n\n<p>I think the <code>while</code>loops are correct and the <code>delete_object</code> is wrong but i can't see where or how.\nI am not allowed to use the container list or anything like that. I only got the struct. So no double linked list nothing.</p>\n"}, {"tags": ["c++", "c++14", "evaluation", "short-circuiting"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1497484864, "post_id": 44554932, "comment_id": 76103416, "body": "The duplicate doesn&#39;t seem to cover short-circuiting a parameter pack"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1497538626, "post_id": 44554932, "comment_id": 76130286, "body": "Of course it is safe.  That&#39;s an integral part of the definition of the &amp;&amp; and || operator,in both C and C++. They are also guaranteed to be evaluated in order.  It is even considered good practice to rely on them."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 1, "creation_date": 1497539077, "post_id": 44554932, "comment_id": 76130620, "body": "When mixing several &amp;&amp; and || in a test condition, make sure you use parenthesis in the appropriate place, as &amp;&amp; has precedence over ||. which can make reading such test conditions a nightmare.  You can check the precedence of operators here <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/operator_precedence</a>, but nothing beats parenthesis for readability.."}], "owner": {"reputation": 4082, "user_id": 7893951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5eWm1.jpg?s=128&g=1", "display_name": "Akira", "link": "https://stackoverflow.com/users/7893951/akira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "closed_date": 1497475466, "answer_count": 0, "score": 1, "last_activity_date": 1497475319, "creation_date": 1497475319, "question_id": 44554932, "link": "https://stackoverflow.com/questions/44554932/is-it-safe-to-rely-on-short-circuit-evaluation", "closed_reason": "Duplicate", "title": "Is it safe to rely on short-circuit evaluation?", "body": "<p>I like the idea how the <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">short-circuit evaluation</a> works, it can save many unnecessary lines in a code. But I'm not sure how much faith can I place in that it will work with all compilers.</p>\n\n<p>Let consider the following code snippet:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cctype&gt;\n\nint main() {\n    std::string foo { \"this is a test\" };\n    auto pos = foo.find_first_not_of(\"abcdefghijklmnopqrstuvwxyz \");\n\n    if(pos != std::string::npos &amp;&amp; ispunct(foo.at(pos)))\n        std::cout &lt;&lt; \"The first non-alphabetic character is a punctuation.\";\n    else\n        std::cout &lt;&lt; \"The string contains only alphabetic characters.\";\n\n    return (std::cout &lt;&lt; std::endl, 0);\n}\n</code></pre>\n\n<p>By the terms of short-circuit evaluation the <code>ispunct(foo.at(pos))</code> won't be evaluated and the program won't try to access an element out of bounds. Is this approach perfectly safe beyond my GCC 5.4.0 compiler?</p>\n\n<p>Moreover, how about using the short-circuit evaluation outside an <code>if</code> or a <code>while</code> statement? Let say I would like to allow null pointers with appropriate safety in the following example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;typename... Strings&gt;\nstd::vector&lt;std::string&gt; pack(Strings... strs) {\n    using dummy = int[];\n    std::vector&lt;std::string&gt; out;\n\n    (void)dummy { 0, ((void)(strs &amp;&amp; (out.push_back({ strs }), false)), 0)... };\n    return out;\n}\n\nint main() {\n    const auto result = pack(\"foo\", nullptr, nullptr, \"bar\", nullptr, \"baz\");\n\n    for(const auto&amp; e : result)\n        std::cout &lt;&lt; e &lt;&lt; ' ';\n\n    return (std::cout &lt;&lt; std::endl, 0);\n}\n</code></pre>\n\n<p>The <code>(strs &amp;&amp; (out.push_back({ strs }), false))</code> will emplace the current <code>strs</code> into the <code>out</code> vector only if it isn't a <code>nullptr</code>. I inspected the <a href=\"https://godbolt.org/g/JKkuhr\" rel=\"nofollow noreferrer\">assembly output</a> of the code above using GCC 5.4.0 and with zero optimization level jump instructions prevent the construction of strings from null pointers. But the question remains the same: is it safe to rely on short-circuit evaluation?</p>\n"}, {"tags": ["c++", "qt", "functor", "qt-signals"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 5, "creation_date": 1497475435, "post_id": 44554905, "comment_id": 76100289, "body": "Not an answer to your problem, just a comment: why don&#39;t you use the new compile-time-checked <code>connect</code> syntax? You are using a new enough Qt that it&#39;s available. Would get rid of the ugly <code>SIGNAL</code> and <code>SLOT</code> macros and would give you compile time errors rather than run time errors when a connection cannot be made."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1497476548, "post_id": 44554905, "comment_id": 76100787, "body": "@JesperJuhl Actually I think that <i>is</i> the answer. Looking at the docs, the <code>connect()</code> static function that takes a functor doesn&#39;t have a version that supports the old signal/slot syntax."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 0, "creation_date": 1497476673, "post_id": 44554905, "comment_id": 76100844, "body": "@MrEricSir I&#39;ll submit it as the answer, then we&#39;ll see how it&#39;s judged ;)"}], "answers": [{"tags": [], "owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "is_accepted": true, "score": 2, "last_activity_date": 1497477055, "last_edit_date": 1497477055, "creation_date": 1497476753, "answer_id": 44555241, "question_id": 44554905, "link": "https://stackoverflow.com/questions/44554905/connectqobject-signalsignal-functor-not-connecting-in-qt5/44555241#44555241", "title": "connect(QObject*, SIGNAL(signal()), functor) not connecting in qt5", "body": "<p>That's correct, there is no way to connect to a function in a namespace or a lambda using the <code>moc</code>-based signals and slots. Have a look at <a href=\"http://doc.qt.io/qt-5/qobject.html#connect\" rel=\"nofollow noreferrer\">the list of overloads for QObject::connect()`</a> to see why the error is reported the way it is. The correct function to use here is <a href=\"http://doc.qt.io/qt-5/qobject.html#connect-4\" rel=\"nofollow noreferrer\">connect overload for a functor</a> and it uses a pointer to a member function as its first argument:</p>\n\n<pre><code>QMetaObject::Connection\nQObject::connect(const QObject *sender, PointerToMemberFunction signal, Functor functor)\n</code></pre>\n\n<p>Thus, use:</p>\n\n<pre><code>QObject::connect(worker, &amp;Worker::finished, processFinished);\n</code></pre>\n\n<p>Note the lack of round braces after function names - being careless with that caused me some headache back in the days.</p>\n\n<p>That also means you may want to switch to the new syntax for uniformity sake.</p>\n\n<p>Refer to <a href=\"https://woboq.com/blog/new-signals-slots-syntax-in-qt5.html\" rel=\"nofollow noreferrer\">part 1</a> and <a href=\"https://woboq.com/blog/how-qt-signals-slots-work-part2-qt5.html\" rel=\"nofollow noreferrer\">part 2</a> of the blog post series by Olivier Goffart, the author of the new signal and slot syntax, for more details. Also see a detailed side-by-side rundown of the two approaches <a href=\"https://wiki.qt.io/New_Signal_Slot_Syntax\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6603517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/521a7ea5a7d80c173362bc33b31bf50c?s=128&d=identicon&r=PG&f=1", "display_name": "Roy Bunting", "link": "https://stackoverflow.com/users/6603517/roy-bunting"}, "edited": false, "score": 0, "creation_date": 1497527720, "post_id": 44555244, "comment_id": 76122220, "body": "This answer is also correct, and basically the same as the answer I accepted. I will be switching to the new syntax from now on as it seems superior to the old one anyway. Thanks!"}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 2, "last_activity_date": 1497476767, "creation_date": 1497476767, "answer_id": 44555244, "question_id": 44554905, "link": "https://stackoverflow.com/questions/44554905/connectqobject-signalsignal-functor-not-connecting-in-qt5/44555244#44555244", "title": "connect(QObject*, SIGNAL(signal()), functor) not connecting in qt5", "body": "<p>Use the new compile-time-checked connect syntax. You are using a new enough Qt that it's available. Will get rid of the ugly <code>SIGNAL</code> and <code>SLOT</code> macros and will give you compile time errors rather than run time errors when a connection cannot be made and this will work with a lambda and member function and most other callables as well.</p>\n"}], "owner": {"reputation": 53, "user_id": 6603517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/521a7ea5a7d80c173362bc33b31bf50c?s=128&d=identicon&r=PG&f=1", "display_name": "Roy Bunting", "link": "https://stackoverflow.com/users/6603517/roy-bunting"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 733, "favorite_count": 0, "accepted_answer_id": 44555241, "answer_count": 2, "score": 1, "last_activity_date": 1498025520, "creation_date": 1497475232, "last_edit_date": 1498025520, "question_id": 44554905, "link": "https://stackoverflow.com/questions/44554905/connectqobject-signalsignal-functor-not-connecting-in-qt5", "title": "connect(QObject*, SIGNAL(signal()), functor) not connecting in qt5", "body": "<p>I am attempting to connect a signal from a QObject to a functor as defined in the QT5 documentation:</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qobject.html#connect-5\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qobject.html#connect-5</a></p>\n\n<p>Relevant code:</p>\n\n<pre><code>namespace someNamespace\n{\nvoid processFinished()\n{\n    qDebug() &lt;&lt; \"A Thread has finished processing!!!\";\n}\n\nvoid executeWorkerOnSeparateTread()\n{\n    QThread* thread = new QThread;\n    Worker* worker = new Worker();\n    worker-&gt;moveToThread(thread);\n    QObject::connect(worker, SIGNAL(finished()), thread, SLOT(quit()));\n    QObject::connect(worker, SIGNAL(finished()), worker, SLOT(deleteLater()));\n    QObject::connect(thread, SIGNAL(finished()), thread, SLOT(deleteLater()));\n    QObject::connect(thread, SIGNAL(started()), worker, SLOT(process()));\n    QObject::connect(worker, SIGNAL(finished()), processFinished); //DOES NOT COMPILE\n    thread-&gt;start();\n}\n}\n</code></pre>\n\n<p>If I were to comment out just the line that does not compile, this code compiles and executes with no problems. I just can't get that connection to compile.</p>\n\n<p>Compiler Error:</p>\n\n<pre><code>no matching function for call to 'QObject::connect(Worker*&amp;, const char*, void(&amp;)())'\n</code></pre>\n\n<p>of course Worker inherits QObject and has the Q_OBJECT keyword in it. the fact that this works without the problematic line also eliminates other lines being the problem.</p>\n\n<p>Any ideas as to what I'm doing wrong?? It seems to me like it should be this straightforward.</p>\n\n<p>If relevant, QT version is 5.8 and GCC version is 4.8.5.</p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["c++", "linux", "execl"], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 7184212, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BDzIyqX7Vfw/AAAAAAAAAAI/AAAAAAAAUpY/_IVLiiuckdw/photo.jpg?sz=128", "display_name": "Nathan Owen", "link": "https://stackoverflow.com/users/7184212/nathan-owen"}, "is_accepted": false, "score": 0, "last_activity_date": 1497592124, "creation_date": 1497592124, "answer_id": 44581678, "question_id": 44554794, "link": "https://stackoverflow.com/questions/44554794/iwlist-tries-to-scan-all-interfaces-when-called-using-execl/44581678#44581678", "title": "iwlist tries to scan all interfaces when called using execl", "body": "<p>Figured it out.</p>\n\n<p>In bash you always write something like</p>\n\n<blockquote>\n  <p>command arg1 arg2 ...</p>\n</blockquote>\n\n<p>When the program 'command' parses the its arguments, the first argument (argv[0]) is 'command'.</p>\n\n<p>However, when you call 'command' using using execl like this:</p>\n\n<pre><code>execl( \"/path/to/command\", \"arg1\", \"arg2\", (char*) NULL );\n</code></pre>\n\n<p>the first argument it gets is 'arg1'. This clearly does not work if the command is expecting this as argv[1] and is instead getting it as argv[0].</p>\n\n<p>This explains why the command was ignoring my \"wlp4s0\" ifname.  It was simply ignoring the first argument which it expected to be the command name/path.</p>\n\n<p>So the solution to my original problem is this:</p>\n\n<pre><code>execl( \"/sbin/iwlist\", \"iwlist\", \"wlp4s0\", \"scanning\", (char*) NULL );\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7184212, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BDzIyqX7Vfw/AAAAAAAAAAI/AAAAAAAAUpY/_IVLiiuckdw/photo.jpg?sz=128", "display_name": "Nathan Owen", "link": "https://stackoverflow.com/users/7184212/nathan-owen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1497592124, "creation_date": 1497474619, "last_edit_date": 1497486369, "question_id": 44554794, "link": "https://stackoverflow.com/questions/44554794/iwlist-tries-to-scan-all-interfaces-when-called-using-execl", "title": "iwlist tries to scan all interfaces when called using execl", "body": "<p>I am doing a standard fork/execl in C++ on my Ubuntu PC to scan for Wi-Fi SSIDs.  It looks like the interface name is not taking effect when called with excel.</p>\n\n<pre><code>execl( \"/sbin/iwlist\", \"wlp4s0\", \"scanning\", (char*) NULL );\n</code></pre>\n\n<p>This succeeds but I get this in stderr:</p>\n\n<blockquote>\n  <p>lo        Interface doesn't support scanning.</p>\n  \n  <p>enp0s25   Interface doesn't support scanning.</p>\n</blockquote>\n\n<p>It looks like iwlist is trying to scan all interfaces.</p>\n\n<p>If instead I do:</p>\n\n<pre><code>system( \"/sbin/iwlist wlp4s0 scanning\" );\n</code></pre>\n\n<p>I do not get these messages in stderr.</p>\n\n<p>Is there something I am doing wrong in my execl call?</p>\n"}, {"tags": ["c++", "linux", "makefile", "linker"], "comments": [{"owner": {"reputation": 348, "user_id": 2962344, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eace82204df7fec8a51dd354acdc20e2?s=128&d=identicon&r=PG", "display_name": "Kamil S Jaron", "link": "https://stackoverflow.com/users/2962344/kamil-s-jaron"}, "edited": false, "score": 0, "creation_date": 1497474653, "post_id": 44554754, "comment_id": 76099932, "body": "try running <code>make --dry-run</code>, this will show you exact commands make executes. Then you should be able to find in which step this error occurs and why..."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1497475542, "post_id": 44554754, "comment_id": 76100332, "body": "<code>g++     main.cpp   -o main</code> That is not the same as what is in the Makefile. Makfile has extra <code>-c</code>."}, {"owner": {"reputation": 11194, "user_id": 3003365, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dP9Od.jpg?s=128&g=1", "display_name": "kaylum", "link": "https://stackoverflow.com/users/3003365/kaylum"}, "edited": false, "score": 1, "creation_date": 1497475620, "post_id": 44554754, "comment_id": 76100368, "body": "Anyway, your makefile looks wrong. It does not produce the <code>main</code> executable. There are two targets which both produce <code>main.o</code>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 1952596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5163fe2856d730de2bdd325ec40d0ce?s=128&d=identicon&r=PG", "display_name": "ulascan", "link": "https://stackoverflow.com/users/1952596/ulascan"}, "edited": false, "score": 0, "creation_date": 1497505323, "post_id": 44555125, "comment_id": 76108293, "body": "g++ -o main main.o vector2.o fixed the problem."}], "tags": [], "owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "is_accepted": true, "score": 3, "last_activity_date": 1497476140, "creation_date": 1497476140, "answer_id": 44555125, "question_id": 44554754, "link": "https://stackoverflow.com/questions/44554754/makefile-linking/44555125#44555125", "title": "Makefile linking", "body": "<p>There's no way that the makefile you provide will give the output you show.</p>\n\n<p>In your comment you said <em>Here is my MakeFile</em>.  Note that make will not read a file named <code>MakeFile</code>.  It will read files named <code>Makefile</code> and <code>makefile</code>, but if you're using a case-sensitive filesystem then one explanation for the behavior you're seeing is that you've used <code>MakeFile</code> for your makefile name and <code>make</code> can't find it.</p>\n\n<p>Or, you could have simply been imprecise in your question, but then this can't be the makefile that make is using for some other reason.</p>\n\n<p>Also, there are numerous errors with your makefile:</p>\n\n<ol>\n<li>You have two different targets <code>main</code> and <code>main.o</code> where the command generates the same file, <code>-o main.o</code></li>\n<li>You are adding libraries <code>-lm</code> to your compile line for <code>vector2.o</code>; libraries should go on the link line.</li>\n</ol>\n\n<p>In general you should be using <a href=\"https://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html\" rel=\"nofollow noreferrer\">automatic variables</a> to make sure your makefile is agreeing with what you want it to do.</p>\n\n<p>Here's a reasonable makefile for your situation:</p>\n\n<pre><code>CXX = g++\n\nmain: vector2.o main.o\n        $(CXX) -o $@ $^ -lm\n\nmain.o: main.cpp\n        $(CXX) -c -o $@ $&lt;\n\nvector2.o: src/Math/Vector2.cpp src/Math/Vector2.hpp\n        $(CXX) -c -o $@ $&lt;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 1952596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5163fe2856d730de2bdd325ec40d0ce?s=128&d=identicon&r=PG", "display_name": "ulascan", "link": "https://stackoverflow.com/users/1952596/ulascan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 44555125, "answer_count": 1, "score": 0, "last_activity_date": 1497476140, "creation_date": 1497474455, "question_id": 44554754, "link": "https://stackoverflow.com/questions/44554754/makefile-linking", "title": "Makefile linking", "body": "<p>I ran into an issue with make. I have 3 files.</p>\n\n<p>main.cpp | src/Math/Vector2.cpp | src/Math/Vector2.hpp</p>\n\n<p>Here is my MakeFile: </p>\n\n<pre><code>main: vector2.o main.o\n    g++ -o main.o vector2.o\n\nmain.o: main.cpp\n    g++ -o main.o main.cpp -c\n\nvector2.o: src/Math/Vector2.cpp src/Math/Vector2.hpp\n    g++ -o vector2.o src/Math/Vector2.cpp -lm -c\n</code></pre>\n\n<p>When i copy these commands manually , it compiles perfectly fine.\nHowever <strong>$make main</strong> returns</p>\n\n<pre><code>g++     main.cpp   -o main\n/tmp/ccnRZ4UD.o: In function `main':\nmain.cpp:(.text+0x42): undefined reference to ` \nphy2d::Maths::Vector2f::Vector2f(double, double)'\nmain.cpp:(.text+0x66): undefined reference to ` \nphy2d::Maths::Vector2f::Vector2f(double, double)'\nmain.cpp:(.text+0x79): undefined reference to ` \nphy2d::Maths::Vector2f::distance(phy2d::Maths::Vector2f const&amp;) \nconst'\ncollect2: error: ld returned 1 exit status\n&lt;builtin&gt;: recipe for target 'main' failed\nmake: *** [main] Error 1\n</code></pre>\n\n<p>Any ideas??</p>\n"}, {"tags": ["c++", "multithreading", "boost"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1497475150, "post_id": 44554684, "comment_id": 76100164, "body": "<code>(void)lock;</code> what is that?"}, {"owner": {"reputation": 33, "user_id": 2133733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8887f1d406f379e4950e55410cf1b58f?s=128&d=identicon&r=PG", "display_name": "Laura Rozo", "link": "https://stackoverflow.com/users/2133733/laura-rozo"}, "edited": false, "score": 0, "creation_date": 1497480353, "post_id": 44554684, "comment_id": 76102171, "body": "From the examples I&#39;ve seen about how to use shared_mutex, they always invoke lock() and then upgrade to a unique lock to get exclusive access. Thus, &#39;(void) lock&#39; appears to call an overloaded operator that invokes the lock() function for the upgrade_lock? However, I&#39;m not a 100% sure of this since I haven&#39;t been able to confirm it with the research I&#39;ve done so far"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1497481003, "post_id": 44554684, "comment_id": 76102347, "body": "&quot;From the examples I&#39;ve seen &quot; - link?"}, {"owner": {"reputation": 33, "user_id": 2133733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8887f1d406f379e4950e55410cf1b58f?s=128&d=identicon&r=PG", "display_name": "Laura Rozo", "link": "https://stackoverflow.com/users/2133733/laura-rozo"}, "edited": false, "score": 0, "creation_date": 1497481446, "post_id": 44554684, "comment_id": 76102499, "body": "This is one of the examples I saw about how to use shared_mutex: <a href=\"https://stackoverflow.com/questions/989795/example-for-boost-shared-mutex-multiple-reads-one-write\">link</a>. When a thread is trying to write, they first create an upgrade_lock with the shared mutex as input and then use upgrade_to_unique_lock to get exclusive access. Here the upgrade_lock is passed as a reference, so I thought maybe <code>(void) lock</code> was doing the instantiation or some side effect that it&#39;s required to get upgradable access"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1497481563, "post_id": 44554684, "comment_id": 76102544, "body": "Then post a link to it!!!"}, {"owner": {"reputation": 33, "user_id": 2133733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8887f1d406f379e4950e55410cf1b58f?s=128&d=identicon&r=PG", "display_name": "Laura Rozo", "link": "https://stackoverflow.com/users/2133733/laura-rozo"}, "edited": false, "score": 0, "creation_date": 1497481706, "post_id": 44554684, "comment_id": 76102585, "body": "I posted the link on my second comment. Here it is again: <a href=\"https://stackoverflow.com/questions/989795/example-for-boost-shared-mutex-multiple-reads-one-write\">linktoexample</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1497481841, "post_id": 44554684, "comment_id": 76102618, "body": "There is no <code>(void)</code>  cast in that linked question."}, {"owner": {"reputation": 33, "user_id": 2133733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8887f1d406f379e4950e55410cf1b58f?s=128&d=identicon&r=PG", "display_name": "Laura Rozo", "link": "https://stackoverflow.com/users/2133733/laura-rozo"}, "edited": false, "score": 0, "creation_date": 1497482394, "post_id": 44554684, "comment_id": 76102783, "body": "That&#39;s why I said I was not 100% sure. I assumed that <code>(void) lock</code> was getting the upgradable access to the shared mutex, as in this line on the example: <code>boost::upgrade_lock&lt;boost::shared_mutex&gt; lock(_access);</code>. I didn&#39;t write this code, I&#39;m just trying to understand what is doing"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1497482596, "post_id": 44554684, "comment_id": 76102822, "body": "I really have no idea why you would assume that - the line you quote doesn&#39;t do a void cast.  A void cast is basically a no-op that keeps the compiler quiet about things like the return value of printf."}, {"owner": {"reputation": 33, "user_id": 2133733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8887f1d406f379e4950e55410cf1b58f?s=128&d=identicon&r=PG", "display_name": "Laura Rozo", "link": "https://stackoverflow.com/users/2133733/laura-rozo"}, "edited": false, "score": 0, "creation_date": 1497483164, "post_id": 44554684, "comment_id": 76102967, "body": "I&#39;m just trying to figure out what&#39;s happening in that code. I thought it was possible it was an overloaded operator that was doing something on the background that was doing something implicitly (aka, assignment?). I haven&#39;t been able to find an explanation, that was just a guess. If you have an explanation for why the line of code is there, it would be helpful"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1497483421, "post_id": 44554684, "comment_id": 76103031, "body": "For gods sake, the line of code i.e. <code>(void) lock;</code>is not there in the answer you linked to! And neither  is any other void cast."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 3335511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77625ab342e6569376c246e27f0cf28b?s=128&d=identicon&r=PG&f=1", "display_name": "snaphat", "link": "https://stackoverflow.com/users/3335511/snaphat"}, "is_accepted": true, "score": 0, "last_activity_date": 1497494419, "creation_date": 1497494419, "answer_id": 44557645, "question_id": 44554684, "link": "https://stackoverflow.com/questions/44554684/in-what-circumstances-should-i-use-owns-lock-function-when-working-with-boost/44557645#44557645", "title": "In what circumstances should I use owns_lock() function when working with boost shared mutexes", "body": "<p>The <code>(void) lock;</code> condition is present there to avoid compilation errors in the event that something like <code>g++ -DNDEBUG -Wall -Werror -pedantic</code> is used during compilation. This indicates to the compiler to stop on all warnings for unused variables (among other things). It's a technique sometimes used in code when the programmer doesn't know whether the variable will be used, but doesn't want to break the build.</p>\n\n<p>The <code>owns_lock()</code> method indicates that a particular object has acquired ownership of the lock. Or to say that differently, locked the object. If it's a shared lock, then multiple objects can 'own' it. 'owned' is synonymous 'with locked by this object'. If it's a unique lock then only a single object can own it.</p>\n\n<p>The <code>assert()</code> is probably just there for debug builds, without which the code would fall through attempting to silently upgrade the lock to a unique lock; even in the event that the lock is not owned by the thread (e.g. it is unlocked). If this were true, then the upgrade would fail silently.</p>\n\n<p>For example, if some ordering of operations as follows occurred with the <code>assert</code> disabled, the code would silently fail:</p>\n\n<pre><code>boost::upgrade_lock&lt;boost::shared_mutex&gt; lock(this-&gt;mainMutex);\nlock.unlock();\nthis-&gt;setAttribute(lock, false);\n</code></pre>\n\n<p>The <code>upgrade_lock</code> call acquires upgrade ownership of the lock. Meaning that there is a contract saying this object <em>can</em> upgrade the lock.</p>\n\n<p>The <code>upgrade_to_unique_lock</code> call does the actual upgrade of the shared lock to a unique lock by stalling until any other shared owners release the lock. If the lock isn't owned by the object when this is called, then it will silently fail to upgrade the lock to a unique lock.</p>\n\n<p>TLDR; I suspect that the authors intention was to keep the mutual exclusion code private to the class, but wanted to put an assert in case unlock() was accidentally called somewhere prior to <code>setattribute()</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 2133733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8887f1d406f379e4950e55410cf1b58f?s=128&d=identicon&r=PG", "display_name": "Laura Rozo", "link": "https://stackoverflow.com/users/2133733/laura-rozo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "accepted_answer_id": 44557645, "answer_count": 1, "score": 2, "last_activity_date": 1497494419, "creation_date": 1497474170, "last_edit_date": 1497491622, "question_id": 44554684, "link": "https://stackoverflow.com/questions/44554684/in-what-circumstances-should-i-use-owns-lock-function-when-working-with-boost", "title": "In what circumstances should I use owns_lock() function when working with boost shared mutexes", "body": "<p>I'm working with a C++ multithreaded program that has to read and write some attributes within a class using boost shared_mutex. The program creates multiple object instances of a class A while it is executing. This class A has an static shared_mutex that is shared by all class A objects. If one of the attributes of that class needs to be written in one of the object instances, the particular object instance needs to get exclusive access to the shared mutex by upgrading it to a unique lock. However, before doing that the set method checks if the class instance owns the lock, which looks a bit odd to me.</p>\n\n<p>This is more or less how class A hpp file looks like:</p>\n\n<pre><code>#include &lt;boost/thread.hpp&gt;\n\nclass A{\n    private:\n        //Private methods\n        void setAttribute(boost::upgrade_lock&lt;boost::shared_mutex&gt;&amp; lock, const bool value);\n        //Private variables\n        static boost::shared_mutex mainMutex;\n        mutable bool attribute;\n    public:\n        //... Some public methods using setAttribute\n}\n</code></pre>\n\n<p>And this is how class A cpp file looks like:</p>\n\n<pre><code>void A::setAttribute(boost::upgrade_lock&lt;boost::shared_mutex&gt;&amp; lock, const bool value)\n{\n    (void)lock;\n    assert(lock.owns_lock());\n\n    //get exclusive access to the lock\n    const boost::upgrade_to_unique_lock&lt;boost::shared_mutex&gt; ulock(lock);\n    attribute = value;\n}\n</code></pre>\n\n<p>So, my question is why would I need to check if the lock passed owns the lock given that the method setAttribute is private and it's only used by methods within the class. Are there any circumstances where I should consider doing this?</p>\n"}, {"tags": ["c++", "class", "oop", "constructor"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1497474255, "post_id": 44554659, "comment_id": 76099723, "body": "<b><i>it does not ask for user input, most likely because of the way I call the class function getHour (if I were to only print the input hour)</i></b> Are you sure you are running a build of the current code? The input is in <code>main()</code> and has nothing to do with <code>getHour()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1497474353, "post_id": 44554717, "comment_id": 76099769, "body": "I think it the question is this + running an old executable."}, {"owner": {"reputation": 69, "user_id": 4844543, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1Xrjg.jpg?s=128&g=1", "display_name": "Mariankka", "link": "https://stackoverflow.com/users/4844543/mariankka"}, "edited": false, "score": 0, "creation_date": 1497474555, "post_id": 44554717, "comment_id": 76099885, "body": "While this compiles, it still does not print anything."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 69, "user_id": 4844543, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1Xrjg.jpg?s=128&g=1", "display_name": "Mariankka", "link": "https://stackoverflow.com/users/4844543/mariankka"}, "edited": false, "score": 2, "creation_date": 1497474635, "post_id": 44554717, "comment_id": 76099921, "body": "@Mariankka, what&#39;s your programming environment? How are you running the program?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1497474304, "creation_date": 1497474304, "answer_id": 44554717, "question_id": 44554659, "link": "https://stackoverflow.com/questions/44554659/having-trouble-with-class-constructors-printing/44554717#44554717", "title": "Having trouble with class constructors printing", "body": "<blockquote>\n  <p>I am also unsure of how to print the time (0,0,0) through the default constructor.</p>\n</blockquote>\n\n<p>Unless I missing something subtle, </p>\n\n<pre><code>// Construct a Time object using the default constructor.\nTime time2;\n\n// Print it's hour\nstd::cout &lt;&lt; time2.getHour() &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 666, "user_id": 7144080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49830c5c842b4f51af8d4067ac5a37bd?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Martinez", "link": "https://stackoverflow.com/users/7144080/omar-martinez"}, "is_accepted": true, "score": 2, "last_activity_date": 1497474729, "creation_date": 1497474729, "answer_id": 44554813, "question_id": 44554659, "link": "https://stackoverflow.com/questions/44554659/having-trouble-with-class-constructors-printing/44554813#44554813", "title": "Having trouble with class constructors printing", "body": "<p>Works fine for me, this was my output:</p>\n\n<pre><code>Enter the hour, minute, and second:\n2\n45\n32\n2\nPress any key to continue . . .\n</code></pre>\n\n<p>Make sure you are rebuilding the code and running the new executable.</p>\n\n<p>In the constructor you can just do:</p>\n\n<pre><code>Time::Time() {\n    hour = 0;\n    minute = 0;\n    second = 0;\n\n    std::cout &lt;&lt; hour &lt;&lt; \" \" &lt;&lt; minute &lt;&lt; \" \" &lt;&lt; second &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>this will be called anytime you call Time with the default constructor:</p>\n\n<pre><code>    std::cout &lt;&lt; \"Enter the hour, minute, and second: \" &lt;&lt; std::endl;\n    int hour, minute, second;\n    std::cin &gt;&gt; hour &gt;&gt; minute &gt;&gt; second;\n\n    Time t; //&lt;--- this prints 0,0,0\n    Time time1(hour, minute, second);\n\n    std::cout &lt;&lt; time1.getHour() &lt;&lt; std::endl;\n    system(\"pause\");\n    return 0;\n</code></pre>\n\n<p>will result in:</p>\n\n<pre><code>Enter the hour, minute, and second:\n11\n19\n59\n0 0 0\n11\nPress any key to continue . . .\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 192, "user_id": 6416174, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1a7fde54d0dcc8996550ae912e2edafa?s=128&d=identicon&r=PG&f=1", "display_name": "AdaShoelace", "link": "https://stackoverflow.com/users/6416174/adashoelace"}, "is_accepted": false, "score": 0, "last_activity_date": 1497475076, "creation_date": 1497475076, "answer_id": 44554870, "question_id": 44554659, "link": "https://stackoverflow.com/questions/44554659/having-trouble-with-class-constructors-printing/44554870#44554870", "title": "Having trouble with class constructors printing", "body": "<p>The code you shared doesn't try to print an object constructed with the default constructor since <code>getHour()</code> is called by <code>time1</code>. The is doing what you tell it to do. If you want the full time from <code>time1</code>you'll have to call all of the getters eg: <code>std::cout &lt;&lt; time1.getHour() &lt;&lt; \" : \" &lt;&lt; time1.getMinute() &lt;&lt; \" : \" &lt;&lt; time1.getSecond() &lt;&lt; std::endl</code></p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 4040296, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/efab897160835e60990dcd98b0a0cef8?s=128&d=identicon&r=PG&f=1", "display_name": "dmaelect", "link": "https://stackoverflow.com/users/4040296/dmaelect"}, "is_accepted": false, "score": 0, "last_activity_date": 1497476675, "last_edit_date": 1497476675, "creation_date": 1497476548, "answer_id": 44555197, "question_id": 44554659, "link": "https://stackoverflow.com/questions/44554659/having-trouble-with-class-constructors-printing/44555197#44555197", "title": "Having trouble with class constructors printing", "body": "<p><strong><em>\"I am also unsure of how to print the time (0,0,0) through the default constructor.\"</em></strong></p>\n\n<p>consider a <code>displayTime()</code> method that can be called on to display the time of any instance </p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[]) \n{\n    std::cout &lt;&lt; \"Enter the hour, minute, and second: \" &lt;&lt; std::endl;\n    int hour, minute, second;\n    std::cin &gt;&gt; hour &gt;&gt; minute &gt;&gt; second;\n\n    Time time1(hour, minute, second);         // overloaded constructor\n    Time time2;                               // default constructor\n\n//  std::cout &lt;&lt; time1.getHour() &lt;&lt; std::endl;\n//  std::cout &lt;&lt; time2.getHour() &lt;&lt; std::endl;\n\n    time1.displayTime();\n    time2.displayTime();\n\n    getch();\n    return 0;\n}\n</code></pre>\n\n<p>add displayTime() method</p>\n\n<pre><code>void Time::displayTime() const{\nstd::cout &lt;&lt; this-&gt;hour &lt;&lt; \",\"\n          &lt;&lt; this-&gt;minute &lt;&lt; \",\"\n          &lt;&lt; this-&gt;second &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4844543, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/1Xrjg.jpg?s=128&g=1", "display_name": "Mariankka", "link": "https://stackoverflow.com/users/4844543/mariankka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 44554813, "answer_count": 4, "score": 0, "last_activity_date": 1497476675, "creation_date": 1497474053, "question_id": 44554659, "link": "https://stackoverflow.com/questions/44554659/having-trouble-with-class-constructors-printing", "title": "Having trouble with class constructors printing", "body": "<p>I'm trying to learn how classes and their constructors work by creating a Time class that includes an hour, minute, and second. I wanted to print one time by using the default constructor and one through user input. While my program compiles, it does not ask for user input, most likely because of the way I call the class function getHour (if I were to only print the input hour). I am also unsure of how to print the time (0,0,0) through the default constructor.</p>\n\n<p>Any help would be appreciated!</p>\n\n<p>Main:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Time.h\"\n\nint main(){\n\n    std::cout &lt;&lt; \"Enter the hour, minute, and second: \" &lt;&lt; std::endl;\n    int hour, minute, second;\n    std::cin &gt;&gt; hour &gt;&gt; minute &gt;&gt; second;\n\n    Time time1(hour, minute, second);\n\n    std::cout &lt;&lt; time1.getHour() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Class implementation:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Time.h\"\n\n//default constructor\nTime::Time() {\n    hour = 0;\n    minute = 0;\n    second = 0;\n}\n\n//construct from hour, minute, second\nTime::Time(int theHour, int theMinute, int theSecond) {\n    hour = theHour;\n    minute = theMinute;\n    second = theSecond;\n}\n\nint Time::getHour() const {\n    return hour;\n}\n\nint Time::getMinute() const {\n    return minute;\n}\n\nint Time::getSecond() const {\n    return second;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-interprocess"], "comments": [{"owner": {"reputation": 18617, "user_id": 862231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0982c0d92a302fa3cdd6abe8fe132ac?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/862231/dave-s"}, "edited": false, "score": 1, "creation_date": 1497484317, "post_id": 44554616, "comment_id": 76103283, "body": "Remove the const from <code>map &lt;const unit64_t</code>, but leave it in the allocator and ValueType definitions."}, {"owner": {"reputation": 310, "user_id": 2460370, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/def5a4044b8378258bd5cbf466cd3c39?s=128&d=identicon&r=PG", "display_name": "The Dude", "link": "https://stackoverflow.com/users/2460370/the-dude"}, "reply_to_user": {"reputation": 18617, "user_id": 862231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0982c0d92a302fa3cdd6abe8fe132ac?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/862231/dave-s"}, "edited": false, "score": 0, "creation_date": 1497541131, "post_id": 44554616, "comment_id": 76132104, "body": "This worked, thank you"}], "owner": {"reputation": 310, "user_id": 2460370, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/def5a4044b8378258bd5cbf466cd3c39?s=128&d=identicon&r=PG", "display_name": "The Dude", "link": "https://stackoverflow.com/users/2460370/the-dude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497473836, "creation_date": 1497473836, "question_id": 44554616, "link": "https://stackoverflow.com/questions/44554616/boostinterprocessmap-compiler-error-cannot-be-overloaded", "title": "boost::interprocess::map compiler error &quot;cannot be overloaded&quot;", "body": "<p>I am getting a compiler error trying to use boost::interprocess:map and I do not understand the error.</p>\n\n<p>Declaring the map and its allocator</p>\n\n<pre><code>using namespace boost::interprocess;\n\nstruct Order {\n    uint64_t id = 0;\n    uint64_t val = 0;\n};\n\ntypedef std::pair&lt;const uint64_t, Order&gt; ValueType;\ntypedef allocator&lt;ValueType, \n                  managed_shared_memory::segment_manager&gt; OrderMapAllocator;\ntypedef map&lt;const uint64_t, \n            Order, \n            std::less&lt;const uint64_t&gt;, \n            OrderMapAllocator&gt; OrderMap;\n</code></pre>\n\n<p>Example usage, the compiler error points out line 120 which is the first line of the function below:</p>\n\n<pre><code>OrderMap * _orders;\n\nvoid addOrder(Order order) {\n    if(_orders-&gt;find(order.id) != _orders-&gt;end()){\n        /* stuff */\n    } else {\n        (*_orders)[order.id] = order;\n    }\n}\n</code></pre>\n\n<p>Note, I previously ran the code using std::map successfully, with the key non const instead of const.  I switched the key to const uint64_t because a type assertion in boost was failing.</p>\n\n<p>Gets the compiler errors below which I cannot interpret</p>\n\n<p>For conciseness, the first one ends:</p>\n\n<pre><code>boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::nonconst_value_type = std::pair&lt;const long unsigned int, Order&gt;]\u2019 cannot be overloaded\nstd::pair&lt;iterator,bool&gt; insert(const nonconst_value_type&amp; x)\n</code></pre>\n\n<p>-</p>\n\n<pre><code>In file included from include/boost/interprocess/containers/map.hpp:23:0,\n                 from src/app/SharedOrderBook.h:7,\n                 from src/app/futures_feed.cpp:20:\ninclude/boost/container/map.hpp: In instantiation of \u2018class boost::container::map&lt;const long unsigned int, Order, std::less&lt;const long unsigned int&gt;, boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt;\u2019:\nsrc/app/SharedOrderBook.h:120:19:   required from here\ninclude/boost/container/map.hpp:541:29: error: \u2018std::pair&lt;typename boost::container::container_detail::tree&lt;Key, std::pair&lt;const Key, T&gt;, boost::container::container_detail::select1st&lt;std::pair&lt;const Key, T&gt; &gt;, Compare, Allocator, MapOptions&gt;::iterator, bool&gt; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::insert(const nonconst_value_type&amp;) [with Key = const long unsigned int; T = Order; Compare = std::less&lt;const long unsigned int&gt;; Allocator = boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt;; MapOptions = boost::container::tree_opt&lt;(boost::container::tree_type_enum)0u, true&gt;; typename boost::container::container_detail::tree&lt;Key, std::pair&lt;const Key, T&gt;, boost::container::container_detail::select1st&lt;std::pair&lt;const Key, T&gt; &gt;, Compare, Allocator, MapOptions&gt;::iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, false&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::nonconst_value_type = std::pair&lt;const long unsigned int, Order&gt;]\u2019 cannot be overloaded\n    std::pair&lt;iterator,bool&gt; insert(const nonconst_value_type&amp; x)\n                             ^~~~~~\ninclude/boost/container/map.hpp:530:29: error: with \u2018std::pair&lt;typename boost::container::container_detail::tree&lt;Key, std::pair&lt;const Key, T&gt;, boost::container::container_detail::select1st&lt;std::pair&lt;const Key, T&gt; &gt;, Compare, Allocator, MapOptions&gt;::iterator, bool&gt; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::insert(const value_type&amp;) [with Key = const long unsigned int; T = Order; Compare = std::less&lt;const long unsigned int&gt;; Allocator = boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt;; MapOptions = boost::container::tree_opt&lt;(boost::container::tree_type_enum)0u, true&gt;; typename boost::container::container_detail::tree&lt;Key, std::pair&lt;const Key, T&gt;, boost::container::container_detail::select1st&lt;std::pair&lt;const Key, T&gt; &gt;, Compare, Allocator, MapOptions&gt;::iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, false&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::value_type = std::pair&lt;const long unsigned int, Order&gt;]\u2019\n    std::pair&lt;iterator,bool&gt; insert(const value_type&amp; x)\n                             ^~~~~~\ninclude/boost/container/map.hpp:574:29: error: \u2018std::pair&lt;typename boost::container::container_detail::tree&lt;Key, std::pair&lt;const Key, T&gt;, boost::container::container_detail::select1st&lt;std::pair&lt;const Key, T&gt; &gt;, Compare, Allocator, MapOptions&gt;::iterator, bool&gt; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::insert(boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::value_type&amp;&amp;) [with Key = const long unsigned int; T = Order; Compare = std::less&lt;const long unsigned int&gt;; Allocator = boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt;; MapOptions = boost::container::tree_opt&lt;(boost::container::tree_type_enum)0u, true&gt;; typename boost::container::container_detail::tree&lt;Key, std::pair&lt;const Key, T&gt;, boost::container::container_detail::select1st&lt;std::pair&lt;const Key, T&gt; &gt;, Compare, Allocator, MapOptions&gt;::iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, false&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::value_type = std::pair&lt;const long unsigned int, Order&gt;]\u2019 cannot be overloaded\n    std::pair&lt;iterator,bool&gt; insert(BOOST_RV_REF(value_type) x)\n                             ^~~~~~\ninclude/boost/container/map.hpp:552:29: error: with \u2018std::pair&lt;typename boost::container::container_detail::tree&lt;Key, std::pair&lt;const Key, T&gt;, boost::container::container_detail::select1st&lt;std::pair&lt;const Key, T&gt; &gt;, Compare, Allocator, MapOptions&gt;::iterator, bool&gt; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::insert(boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::nonconst_value_type&amp;&amp;) [with Key = const long unsigned int; T = Order; Compare = std::less&lt;const long unsigned int&gt;; Allocator = boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt;; MapOptions = boost::container::tree_opt&lt;(boost::container::tree_type_enum)0u, true&gt;; typename boost::container::container_detail::tree&lt;Key, std::pair&lt;const Key, T&gt;, boost::container::container_detail::select1st&lt;std::pair&lt;const Key, T&gt; &gt;, Compare, Allocator, MapOptions&gt;::iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, false&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::nonconst_value_type = std::pair&lt;const long unsigned int, Order&gt;]\u2019\n    std::pair&lt;iterator,bool&gt; insert(BOOST_RV_REF(nonconst_value_type) x)\n                             ^~~~~~\ninclude/boost/container/map.hpp:619:13: error: \u2018boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::iterator boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::insert(boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::const_iterator, const nonconst_value_type&amp;) [with Key = const long unsigned int; T = Order; Compare = std::less&lt;const long unsigned int&gt;; Allocator = boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt;; MapOptions = boost::container::tree_opt&lt;(boost::container::tree_type_enum)0u, true&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, false&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::const_iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, true&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::nonconst_value_type = std::pair&lt;const long unsigned int, Order&gt;]\u2019 cannot be overloaded\n    iterator insert(const_iterator p, const nonconst_value_type&amp; x)\n             ^~~~~~\ninclude/boost/container/map.hpp:586:13: error: with \u2018boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::iterator boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::insert(boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::const_iterator, const value_type&amp;) [with Key = const long unsigned int; T = Order; Compare = std::less&lt;const long unsigned int&gt;; Allocator = boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt;; MapOptions = boost::container::tree_opt&lt;(boost::container::tree_type_enum)0u, true&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, false&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::const_iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, true&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::value_type = std::pair&lt;const long unsigned int, Order&gt;]\u2019\n    iterator insert(const_iterator p, const value_type&amp; x)\n             ^~~~~~\ninclude/boost/container/map.hpp:628:13: error: \u2018boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::iterator boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::insert(boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::const_iterator, boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::value_type&amp;&amp;) [with Key = const long unsigned int; T = Order; Compare = std::less&lt;const long unsigned int&gt;; Allocator = boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt;; MapOptions = boost::container::tree_opt&lt;(boost::container::tree_type_enum)0u, true&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, false&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::const_iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, true&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::value_type = std::pair&lt;const long unsigned int, Order&gt;]\u2019 cannot be overloaded\n    iterator insert(const_iterator p, BOOST_RV_REF(value_type) x)\n             ^~~~~~\ninclude/boost/container/map.hpp:598:13: error: with \u2018boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::iterator boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::insert(boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::const_iterator, boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::nonconst_value_type&amp;&amp;) [with Key = const long unsigned int; T = Order; Compare = std::less&lt;const long unsigned int&gt;; Allocator = boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt;; MapOptions = boost::container::tree_opt&lt;(boost::container::tree_type_enum)0u, true&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, false&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::const_iterator = boost::container::container_detail::iterator_from_iiterator&lt;boost::intrusive::tree_iterator&lt;boost::intrusive::bhtraits&lt;boost::container::container_detail::tree_node&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::offset_ptr&lt;void&gt;, (boost::container::tree_type_enum)0u, true&gt;, boost::intrusive::rbtree_node_traits&lt;boost::interprocess::offset_ptr&lt;void&gt;, true&gt;, (boost::intrusive::link_mode_type)0u, boost::intrusive::dft_tag, 3u&gt;, false&gt;, true&gt;; boost::container::map&lt;Key, T, Compare, Allocator, Options&gt;::nonconst_value_type = std::pair&lt;const long unsigned int, Order&gt;]\u2019\n    iterator insert(const_iterator p, BOOST_RV_REF(nonconst_value_type) x)\n             ^~~~~~\nIn file included from include/boost/interprocess/segment_manager.hpp:33:0,\n                 from include/boost/interprocess/detail/managed_memory_impl.hpp:30,\n                 from include/boost/interprocess/managed_shared_memory.hpp:25,\n                 from src/app/SharedOrderBook.h:6,\n                 from src/app/futures_feed.cpp:20:\ninclude/boost/interprocess/detail/named_proxy.hpp: In instantiation of \u2018void boost::interprocess::ipcdetail::CtorArgN&lt;T, is_iterator, Args&gt;::construct(void*, boost::interprocess::ipcdetail::false_, const boost::container::container_detail::index_tuple&lt;IdxPack ...&gt;&amp;) [with int ...IdxPack = {0, 1}; T = boost::container::map&lt;const long unsigned int, Order, std::less&lt;const long unsigned int&gt;, boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt;; bool is_iterator = false; Args = {std::less&lt;long unsigned int&gt;, boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family, boost::interprocess::offset_ptr&lt;void, long int, long unsigned int, 0ul&gt;, 0ul&gt;, boost::interprocess::iset_index&gt; &gt;&amp;}; boost::interprocess::ipcdetail::false_ = boost::interprocess::ipcdetail::bool_&lt;false&gt;]\u2019:\ninclude/boost/interprocess/detail/named_proxy.hpp:71:10:   required from \u2018void boost::interprocess::ipcdetail::CtorArgN&lt;T, is_iterator, Args&gt;::construct_n(void*, std::size_t, std::size_t&amp;) [with T = boost::container::map&lt;const long unsigned int, Order, std::less&lt;const long unsigned int&gt;, boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt;; bool is_iterator = false; Args = {std::less&lt;long unsigned int&gt;, boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family, boost::interprocess::offset_ptr&lt;void, long int, long unsigned int, 0ul&gt;, 0ul&gt;, boost::interprocess::iset_index&gt; &gt;&amp;}; std::size_t = long unsigned int]\u2019\nsrc/app/futures_feed.cpp:170:1:   required from here\ninclude/boost/interprocess/detail/named_proxy.hpp:83:7: error: no matching function for call to \u2018boost::container::map&lt;const long unsigned int, Order, std::less&lt;const long unsigned int&gt;, boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt;::map(std::less&lt;long unsigned int&gt;, boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Order&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt;&amp;)\u2019\n    {  ::new((void*)mem, boost_container_new_t())T(boost::forward&lt;Args&gt;(get&lt;IdxPack&gt;(args_))...); }\n</code></pre>\n\n<p>If I get rid of the const uint64_t and use uint64_t for the key, I get the error below:</p>\n\n<pre><code>include/boost/container/map.hpp:150:7: error: static assertion failed: (container_detail::is_same&lt;std::pair&lt;const Key, T&gt;, typename Allocator::value_type&gt;::value)\n       BOOST_STATIC_ASSERT((container_detail::is_same&lt;std::pair&lt;const Key, T&gt;, typename Allocator::value_type&gt;::value));\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 3, "creation_date": 1497473259, "post_id": 44554443, "comment_id": 76099218, "body": "It&#39;s a partial specialization for reference types."}], "answers": [{"tags": [], "owner": {"reputation": 116, "user_id": 5636804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KEANC.jpg?s=128&g=1", "display_name": "Artoo", "link": "https://stackoverflow.com/users/5636804/artoo"}, "is_accepted": true, "score": 1, "last_activity_date": 1497474585, "creation_date": 1497474585, "answer_id": 44554785, "question_id": 44554443, "link": "https://stackoverflow.com/questions/44554443/why-stdfuture-template-argument-type-is-reference-type/44554785#44554785", "title": "why std::future template argument type is reference type?", "body": "<p>This is the reference specialization for <code>std::future</code> which accounts for those cases in which the return values is a reference type.</p>\n\n<p>Check for instance the following example code:</p>\n\n<pre><code>// future example\n#include &lt;iostream&gt;       // std::cout\n#include &lt;future&gt;         // std::async, std::future\n\n\nint counter = 0;\n\nint&amp; increment_counter()\n{\n    return ++counter;\n}\n\nint main ()\n{\n    std::future&lt;int&amp;&gt; fut = std::async(increment_counter); \n\n    int &amp;counterRef = fut.get();\n\n    std::cout &lt;&lt; \"value:\" &lt;&lt; counterRef &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1927, "user_id": 2017412, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/c55a6dedf87df0058a6f2031079102f5?s=128&d=identicon&r=PG", "display_name": "Monku", "link": "https://stackoverflow.com/users/2017412/monku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 44554785, "answer_count": 1, "score": 0, "last_activity_date": 1497474585, "creation_date": 1497473099, "last_edit_date": 1497474217, "question_id": 44554443, "link": "https://stackoverflow.com/questions/44554443/why-stdfuture-template-argument-type-is-reference-type", "title": "why std::future template argument type is reference type?", "body": "<p>I am looking at the <code>std::future</code> documentation at <a href=\"http://en.cppreference.com/w/cpp/thread/future\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/thread/future</a></p>\n\n<p>What I don't understand is that why the template argument type(in <code>2</code>) is <code>reference</code>?</p>\n\n<blockquote>\n<pre><code>template&lt; class T &gt; class future&lt;T&amp;&gt;; (2) (since C++11)\n</code></pre>\n</blockquote>\n"}, {"tags": ["c++", "visual-studio-2015", "compiler-errors", "unreal-engine4"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497473357, "post_id": 44554434, "comment_id": 76099284, "body": "Sounds like you (among other things) have a problem with your build system not tracking dependencies correctly and thus not rebuilding all changed source files. I&#39;d suggest fixing that problem first."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1497474103, "post_id": 44554434, "comment_id": 76099645, "body": "Make sure all tools required to perform the build are executable from the path you are building from."}, {"owner": {"reputation": 59, "user_id": 8162756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OSsnnvvv7v0/AAAAAAAAAAI/AAAAAAAAABc/gsKwL5LNizk/photo.jpg?sz=128", "display_name": "Mister Dukk", "link": "https://stackoverflow.com/users/8162756/mister-dukk"}, "edited": false, "score": 0, "creation_date": 1497474446, "post_id": 44554434, "comment_id": 76099822, "body": "sounds fair enough... how do I do both these things? :D"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1497475607, "post_id": 44554434, "comment_id": 76100357, "body": "First thing you do is search on Google."}, {"owner": {"reputation": 59, "user_id": 8162756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OSsnnvvv7v0/AAAAAAAAAAI/AAAAAAAAABc/gsKwL5LNizk/photo.jpg?sz=128", "display_name": "Mister Dukk", "link": "https://stackoverflow.com/users/8162756/mister-dukk"}, "edited": false, "score": 0, "creation_date": 1497476394, "post_id": 44554434, "comment_id": 76100713, "body": "I&#39;ve been looking this error up on Google for the past week , tried every solution that I&#39;ve found , none worked..."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1497486059, "post_id": 44554434, "comment_id": 76103669, "body": "Overly aggressive antivirus programs can cause problems like this too. Try disabling it or whitelisting the directory you&#39;re building in."}, {"owner": {"reputation": 59, "user_id": 8162756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OSsnnvvv7v0/AAAAAAAAAAI/AAAAAAAAABc/gsKwL5LNizk/photo.jpg?sz=128", "display_name": "Mister Dukk", "link": "https://stackoverflow.com/users/8162756/mister-dukk"}, "edited": false, "score": 0, "creation_date": 1497549276, "post_id": 44554434, "comment_id": 76136606, "body": "I&#39;ve tried to disable it , still the same , I`m using the windows defender from windows 10.."}, {"owner": {"reputation": 59, "user_id": 8162756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OSsnnvvv7v0/AAAAAAAAAAI/AAAAAAAAABc/gsKwL5LNizk/photo.jpg?sz=128", "display_name": "Mister Dukk", "link": "https://stackoverflow.com/users/8162756/mister-dukk"}, "edited": false, "score": 0, "creation_date": 1497595830, "post_id": 44554434, "comment_id": 76153254, "body": "Any other suggestions , please?:("}], "answers": [{"tags": [], "owner": {"reputation": 1009, "user_id": 4040760, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-09OD9qJJPHA/AAAAAAAAAAI/AAAAAAAABE0/yKQM6mGMOIc/photo.jpg?sz=128", "display_name": "Kevin Mack", "link": "https://stackoverflow.com/users/4040760/kevin-mack"}, "is_accepted": false, "score": 1, "last_activity_date": 1499619618, "creation_date": 1499619618, "answer_id": 44998890, "question_id": 44554434, "link": "https://stackoverflow.com/questions/44554434/permission-error-every-time-i-build-in-visual-studio-2015/44998890#44998890", "title": "Permission error every time I build in visual studio 2015", "body": "<p>Before you go too far down the rabbit hole, check to be sure your operating system doesn't simply have a lock on one of your intermediate files. If you delete the entire contents of D:\\Unreal Projects\\03_BuildingEscape\\BuildingEscape\\Intermediate\\ before rebuilding, that will ensure that you're not simply looking at a locked or corrupt intermediate. This isn't guaranteed to be the issue, but bad intermediates can cause otherwise inexplicable build errors, so clearing them can at least narrow down the range of possible causes you'll need to investigate. Of course make sure your editor isn't running, or running as a stuck process, while you're trying to rebuild.</p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 8162756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OSsnnvvv7v0/AAAAAAAAAAI/AAAAAAAAABc/gsKwL5LNizk/photo.jpg?sz=128", "display_name": "Mister Dukk", "link": "https://stackoverflow.com/users/8162756/mister-dukk"}, "is_accepted": true, "score": -1, "last_activity_date": 1499905857, "creation_date": 1499905857, "answer_id": 45069622, "question_id": 44554434, "link": "https://stackoverflow.com/questions/44554434/permission-error-every-time-i-build-in-visual-studio-2015/45069622#45069622", "title": "Permission error every time I build in visual studio 2015", "body": "<p>I don't know what is causing the issue with compiling from visual studio , but if I compile using the Compile button in Unreal the code seems to be compiling just fine.</p>\n"}], "owner": {"reputation": 59, "user_id": 8162756, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OSsnnvvv7v0/AAAAAAAAAAI/AAAAAAAAABc/gsKwL5LNizk/photo.jpg?sz=128", "display_name": "Mister Dukk", "link": "https://stackoverflow.com/users/8162756/mister-dukk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 0, "accepted_answer_id": 45069622, "answer_count": 2, "score": 1, "last_activity_date": 1499905857, "creation_date": 1497473065, "question_id": 44554434, "link": "https://stackoverflow.com/questions/44554434/permission-error-every-time-i-build-in-visual-studio-2015", "title": "Permission error every time I build in visual studio 2015", "body": "<p>I have just started learning to program using Unreal and I am following a tutorial for Unreal Engine on Udemy and recently I've been running into a problem where every time I write code wrong and I build the project , even though there are no lines indicating errors , I get this message</p>\n\n<p>></p>\n\n<pre><code> 1&gt;------ Build started: Project: BuildingEscape, Configuration: Development_Editor x64 ------\n1&gt;  Compiling game modules for hot reload\n1&gt;  Performing 2 actions (2 in parallel)\n1&gt;  [2/2] Link UE4Editor-BuildingEscape-2523.lib\n1&gt;  [1/2] Link UE4Editor-BuildingEscape-7173.dll\n1&gt;     Creating library D:\\Unreal Projects\\03_BuildingEscape\\BuildingEscape\\Intermediate\\Build\\Win64\\UE4Editor\\Development\\UE4Editor-BuildingEscape-7173.lib and object D:\\Unreal Projects\\03_BuildingEscape\\BuildingEscape\\Intermediate\\Build\\Win64\\UE4Editor\\Development\\UE4Editor-BuildingEscape-7173.exp\n1&gt;     Creating library D:\\Unreal Projects\\03_BuildingEscape\\BuildingEscape\\Intermediate\\Build\\Win64\\UE4Editor\\Development\\UE4Editor-BuildingEscape-7173.suppressed.lib and object D:\\Unreal Projects\\03_BuildingEscape\\BuildingEscape\\Intermediate\\Build\\Win64\\UE4Editor\\Development\\UE4Editor-BuildingEscape-7173.suppressed.exp\n1&gt;ERROR : UBT error : Failed to produce item: D:\\Unreal Projects\\03_BuildingEscape\\BuildingEscape\\Intermediate\\Build\\Win64\\UE4Editor\\Development\\UE4Editor-BuildingEscape-2523.lib\n1&gt;  Total build time: 3.07 seconds (Local executor: 0.00 seconds)\n1&gt;C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Microsoft.MakeFile.Targets(41,5): error MSB3075: The command \"\"D:\\Unreal Engine\\Engine\\UE_4.15\\Engine\\Build\\BatchFiles\\Build.bat\" BuildingEscapeEditor Win64 Development \"D:\\Unreal Projects\\03_BuildingEscape\\BuildingEscape\\BuildingEscape.uproject\" -waitmutex\" exited with code 5. Please verify that you have sufficient rights to run this command.\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>and even though I delete the code that I wrote and hit build again I get the same error...\nI am using windows 10.</p>\n"}, {"tags": ["c++", "vector", "tokenize"], "comments": [{"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1497475613, "post_id": 44554423, "comment_id": 76100364, "body": "By definition a tokenize function discards the separators. What you are trying to do is something else. What&#39;s the purpose?"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 2163449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/305ce8e7e1ef4a9c3565f4678e023071?s=128&d=identicon&r=PG", "display_name": "user2163449", "link": "https://stackoverflow.com/users/2163449/user2163449"}, "edited": false, "score": 0, "creation_date": 1497543244, "post_id": 44570998, "comment_id": 76133317, "body": "Thank you! Yes, you&#39;re right, we should be using auto from now on."}], "tags": [], "owner": {"reputation": 5125, "user_id": 1450890, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3d05cb0ba97651de251b268cefe6141f?s=128&d=identicon&r=PG&f=1", "display_name": "Rook", "link": "https://stackoverflow.com/users/1450890/rook"}, "is_accepted": false, "score": 0, "last_activity_date": 1497539253, "creation_date": 1497539253, "answer_id": 44570998, "question_id": 44554423, "link": "https://stackoverflow.com/questions/44554423/tokenize-returns-a-vector-that-contains-the-delimiters-c/44570998#44570998", "title": "Tokenize returns a vector that contains the delimiters - C++", "body": "<p>I'm not quite sure <em>why</em> you'd want to do this, but you've got almost all the code to do it already. Here's a minor modification that alternates between stuffing individual delimiter characters into the token vector (simpler if you're happy to return delimiter chunks, eg. <code>\"&gt;&lt;&gt;\"</code> instead of <code>\"&lt;\", \"&gt;\", \"&lt;\"</code>) and adding whole non-delimiter chunks to it.</p>\n\n<pre><code>std::vector&lt;std::string&gt; tokenize2(const std::string&amp; s, const std::string&amp; delim)\n{\n  std::vector&lt;std::string&gt; tokens;\n\n  auto nextDelimiter = s.find_first_of(delim, 0);\n  auto nextNonDelimiter = s.find_first_not_of(delim, 0);\n\n  while (std::string::npos != nextDelimiter || std::string::npos != nextNonDelimiter)\n  {\n    if (nextNonDelimiter &gt; nextDelimiter)\n    {\n      for (auto d = nextDelimiter; d &lt; nextNonDelimiter &amp;&amp; d &lt; s.size(); d++)\n        tokens.push_back(s.substr(d, 1));\n\n      nextDelimiter = s.find_first_of(delim, nextNonDelimiter);\n    }\n    else\n    {\n      tokens.push_back(s.substr(nextNonDelimiter, nextDelimiter - nextNonDelimiter));\n      nextNonDelimiter = s.find_first_not_of(delim, nextDelimiter);\n    }\n  }\n\n  return tokens;\n}\n</code></pre>\n\n<p>Note the use of <code>auto</code> (because we're living in the future now) and <code>std::</code> (because <code>using namespace std;</code> is considered bad practise, for good reason).</p>\n"}], "owner": {"reputation": 17, "user_id": 2163449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/305ce8e7e1ef4a9c3565f4678e023071?s=128&d=identicon&r=PG", "display_name": "user2163449", "link": "https://stackoverflow.com/users/2163449/user2163449"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1497539253, "creation_date": 1497473020, "last_edit_date": 1497473074, "question_id": 44554423, "link": "https://stackoverflow.com/questions/44554423/tokenize-returns-a-vector-that-contains-the-delimiters-c", "title": "Tokenize returns a vector that contains the delimiters - C++", "body": "<p>I have the function that tokenizes a vector string and returns without the delimiters. But, I want to return with delimiters.</p>\n\n<p>Desired output:\n<code>tokenize(\"&lt;ab&gt;&lt;&gt;cd&lt;\", \"&lt;&gt;\")</code></p>\n\n<ul>\n<li>should display: \"&lt;\", \"ab\", \">\", \"&lt;\", \">\", \"cd\", \"&lt;\"</li>\n</ul>\n\n<p>Here's my function:</p>\n\n<pre><code>vector&lt;string&gt; tokenize1(const string&amp; s, const string&amp; delim) {\n\nvector&lt;string&gt; tokens;\n\nstring::size_type lastPos = s.find_first_not_of(delim, 0);\nstring::size_type pos = s.find_first_of(delim, lastPos);\n\nwhile (string::npos != pos || string::npos != lastPos) {\n    tokens.push_back(s.substr(lastPos, pos - lastPos));\n    lastPos = s.find_first_not_of(delim, pos);\n    pos = s.find_first_of(delim, lastPos);\n}\n\nreturn tokens;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "tensorflow", "gradient", "softmax"], "comments": [{"owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1497477023, "post_id": 44554282, "comment_id": 76101005, "body": "This sounds like a version skew issue. Is it possible that your C++ code was compiled against an older version of TensorFlow (e.g. 1.0 or earlier), and your Python code ran using a newer version of TensorFlow (e.g. 1.1 or later)? It looks like the <code>message</code> attr (mentioned in the error message) was added between TF 1.0 and TF 1.1."}, {"owner": {"reputation": 179, "user_id": 568986, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/ee553e02dcb9387236f368073258139e?s=128&d=identicon&r=PG", "display_name": "saman", "link": "https://stackoverflow.com/users/568986/saman"}, "reply_to_user": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1497655097, "post_id": 44554282, "comment_id": 76186568, "body": "Thanks for the response. I&#39;ll check this issue out. As far as I know, I only have version 1.0. But may possible to have the new version silently being installed."}, {"owner": {"reputation": 179, "user_id": 568986, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/ee553e02dcb9387236f368073258139e?s=128&d=identicon&r=PG", "display_name": "saman", "link": "https://stackoverflow.com/users/568986/saman"}, "reply_to_user": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1500569791, "post_id": 44554282, "comment_id": 77408039, "body": "I tried it out. It has nothing to do with the version. Seems like C++ is going to use the gradient implementation in the python which is so weird to me. I still don&#39;t know how to make this work."}], "owner": {"reputation": 179, "user_id": 568986, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/ee553e02dcb9387236f368073258139e?s=128&d=identicon&r=PG", "display_name": "saman", "link": "https://stackoverflow.com/users/568986/saman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497472553, "creation_date": 1497472553, "question_id": 44554282, "link": "https://stackoverflow.com/questions/44554282/tensorflow-cannot-calculate-gradient-of-operation", "title": "Tensorflow cannot calculate gradient of operation", "body": "<p>I have a simple Tensorflow model which is written in python and could be trained smoothly. Here is the model I'm using:</p>\n\n<pre><code>import tensorflow as tf from tensorflow.python.framework \nimport ops from tensorflow.python.framework \nimport dtypes\n\nimport random  import numpy as np\n\nNUM_CLASSES = 102  IMAGE_HEIGHT = 224  IMAGE_WIDTH = 224  BATCH_SIZE = 25  NUM_CHANNELS = 3  LEARNING_RATE = 0.0001\n\nwith tf.Session() as sess:\n\n\n\nimages_placeholder = tf.placeholder (tf.float32,\n                                         shape=(BATCH_SIZE, IMAGE_HEIGHT,\n                                                IMAGE_WIDTH, NUM_CHANNELS), name=\"input\")   labels_placeholder = tf.placeholder (tf.float32,\n                                         shape=(BATCH_SIZE), name=\"label\")\n\n    with tf.name_scope(\"conv1_1\") as scope:         kernel = tf.Variable (tf.truncated_normal([3, 3, 3, 64], dtype=tf.float32, stddev=1e-2),\n                                name=\"weights\")         conv = tf.nn.conv2d (images_placeholder, kernel, [1, 1, 1, 1], padding='SAME')      biases = tf.Variable (tf.constant(0.0, shape=[64], dtype=tf.float32),\n                                trainable=True, name='biases')      out = tf.nn.bias_add (conv, biases)         conv1_1 = tf.nn.relu (out, name=scope)\n\n    pool1 = tf.nn.max_pool (conv1_1,\n                            ksize=[1, 2, 2, 1],\n                            strides=[1, 2, 2, 1],\n                            padding='SAME',\n                            name='pool1')\n\n    with tf.name_scope('conv2_1') as scope:         kernel = tf.Variable (tf.truncated_normal([3, 3, 64, 128], dtype=tf.float32, \n                                stddev=1e-2), name='weights')       conv = tf.nn.conv2d (pool1, kernel, [1, 1, 1, 1], padding='SAME')       biases = tf.Variable (tf.constant(0.0, shape=[128], dtype=tf.float32),\n                                trainable=True, name='biases')      out = tf.nn.bias_add (conv, biases)         conv2_1 = tf.nn.relu (out, name=scope)\n\n    pool2 = tf.nn.max_pool (conv2_1,\n                            ksize=[1, 2, 2, 1],\n                            strides=[1, 2, 2, 1],\n                            padding='SAME',\n                            name='pool2')\n\n    with tf.name_scope('conv3_1') as scope:         kernel = tf.Variable(tf.truncated_normal([3, 3, 128, 256], dtype=tf.float32,\n                                    stddev=1e-2), name='weights')       conv = tf.nn.conv2d(pool2, kernel, [1, 1, 1, 1], padding='SAME')        biases = tf.Variable(tf.constant(0.0, shape=[256], dtype=tf.float32),\n                                    trainable=True, name='biases')      out = tf.nn.bias_add(conv, biases)      conv3_1 = tf.nn.relu(out, name=scope)\n\n    pool3 = tf.nn.max_pool (conv3_1,\n                            ksize=[1, 2, 2, 1],\n                            strides=[1, 2, 2, 1],\n                            padding='SAME',\n                            name='pool3')\n\n    with tf.name_scope('conv4_1') as scope:         kernel = tf.Variable(tf.truncated_normal([3, 3, 256, 512], dtype=tf.float32,\n                                stddev=1e-2), name='weights')       conv = tf.nn.conv2d(pool3, kernel, [1, 1, 1, 1], padding='SAME')        biases = tf.Variable(tf.constant(0.0, shape=[512], dtype=tf.float32),\n                                trainable=True, name='biases')      out = tf.nn.bias_add(conv, biases)      conv4_1 = tf.nn.relu(out, name=scope)\n\n    pool4 = tf.nn.max_pool (conv4_1,\n                            ksize=[1, 2, 2, 1],\n                            strides=[1, 2, 2, 1],\n                            padding='SAME',\n                            name='pool4')   \n\n    with tf.name_scope('mentee_conv5_1') as scope:      kernel = tf.Variable(tf.truncated_normal([3, 3, 512, 512], dtype=tf.float32,\n                                stddev=1e-2), name='weights')       conv = tf.nn.conv2d(pool4, kernel, [1, 1, 1, 1], padding='SAME')        biases = tf.Variable(tf.constant(0.0, shape=[512], dtype=tf.float32),\n                                 trainable=True, name='biases')         out = tf.nn.bias_add(conv, biases)      conv5_1 = tf.nn.relu(out, name=scope)\n\n    pool5 = tf.nn.max_pool (conv5_1,\n                            ksize=[1, 2, 2, 1],\n                            strides=[1, 2, 2, 1],\n                            padding='SAME',\n                            name='pool5')\n\n    with tf.name_scope('fc1') as scope:         shape = int(np.prod(pool5.get_shape()[1:]))         fc1w = tf.Variable(tf.truncated_normal([shape, 4096], dtype=tf.float32, \n                                stddev=1e-2), name='weights')       fc1b = tf.Variable(tf.constant(1.0, shape=[4096], dtype=tf.float32),\n                                trainable=True, name='biases')      pool5_flat = tf.reshape(pool5, [-1, shape])         fc1l = tf.nn.bias_add(tf.matmul(pool5_flat, fc1w), fc1b)        fc1 = tf.nn.relu(fc1l)\n        fc1 = tf.nn.dropout(fc1, 0.5)\n\n\n    labels = tf.to_int64(labels_placeholder)    cross_entropy = tf.nn.sparse_softmax_cross_entropy_with_logits (labels=labels,\n                        logits=fc1, name=\"xentropy\")    loss = tf.reduce_mean (cross_entropy, name='loss')\n\n    optimizer = tf.train.AdamOptimizer (LEARNING_RATE)  global_step = tf.Variable (0, name='global_step', trainable=False)  train_op = optimizer.minimize (loss, global_step=global_step, name=\"train\")\n\n    init = tf.initialize_variables (tf.all_variables(), name='init_all_vars_op')    tf.train.write_graph (sess.graph_def, \"models/\", \"graph.pb\", as_text=False)\n</code></pre>\n\n<p>I'm exporting the model into the protobuf version and then load it into my  C++ code, in order to train the model using C++ API instead of Python. Unfortunately I'll get an error regarding the SparseSoftmaxCrossEntropy operation as:</p>\n\n<pre><code>E tensorflow/core/common_runtime/executor.cc:594] Executor failed to create kernel. Invalid argument: NodeDef mentions attr 'message' not in Op&lt;name=PreventGradient; signature=input:T -&gt; output:T; attr=T:type&gt;; NodeDef: gradients/xentropy/xentropy_grad/PreventGradient = PreventGradient[T=DT_FLOAT, message=\"Currently there is no way to take the second derivative of sparse_softmax_cross_entropy_with_logits due to the fused implementation\\'s interaction with tf.gradients()\", _device=\"/job:localhost/replica:0/task:0/cpu:0\"](xentropy/xentropy:1)\n</code></pre>\n\n<p>I have checked tensorflow source code and realized the gradient caclulation for this operation has not been implemented. But I'm wondering how python version succeeds with no issue, but in C++ it tries to calculate the gradient? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1497472712, "post_id": 44554276, "comment_id": 76098895, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365530\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/aa365530</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1497472865, "post_id": 44554276, "comment_id": 76098973, "body": "<i>Please</i> don&#39;t use <code>system</code>. It has so, so, many issues..."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1497472970, "post_id": 44554276, "comment_id": 76099039, "body": "1. Didn&#39;t you get a warning about bad escape sequences? 2. each call to system opens a new command session.As a result the cd has no effect."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1497473318, "post_id": 44554276, "comment_id": 76099266, "body": "<b><i>What would be the workaround for this?</i></b> Do everything in one system() call."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1497473355, "post_id": 44554276, "comment_id": 76099283, "body": "Lookup &amp;&amp; in your cmd.exe reference."}, {"owner": {"reputation": 1365, "user_id": 7610883, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d5b2f292c46f7ef87ab8a0adb47154fa?s=128&d=identicon&r=PG&f=1", "display_name": "cmdLP", "link": "https://stackoverflow.com/users/7610883/cmdlp"}, "edited": false, "score": 0, "creation_date": 1497473473, "post_id": 44554276, "comment_id": 76099340, "body": "You could concat the commands by <code>&amp;</code> into one string or just put the code into a (temporary) batch file and run it with <code>system</code>."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1497475353, "post_id": 44554276, "comment_id": 76100256, "body": "Why would you need the <code>cd</code> call at all when you could just use <b>absolute</b> pathes for everything? Like <code>system(&quot;\\&quot;c:\\\\wamp64\\\\bin\\\\mysql\\\\mysql5.7.14\\\\bin\\\\mysql.ex&zwnj;&#8203;e\\&quot; -u root -p dataBase &lt; \\&quot;c:\\\\wamp64\\\\bin\\\\mysql\\\\mysql5.7.14\\\\bin\\\\table.sql\\&quot;&quot;)</code>"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497475434, "post_id": 44554276, "comment_id": 76100288, "body": "@JesperJuhl Please elaborate on the issues of <code>system</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1497475821, "post_id": 44554276, "comment_id": 76100458, "body": "@zett42 in a nutshell: the child process inherits the parents permissions which may be too broad for what it needs to do. You have no control over what shell will be used to run the command. You have no control over the environment used for the child. You have very limited ways of communicating with the child (basically you just get its exit code). There are more issues, but that should be enough to get you to shy away from it."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497476410, "post_id": 44554276, "comment_id": 76100724, "body": "@Jesper I don&#39;t think these are actual <i>issues</i>. An issue is something that may turn into a <i>problem</i>. This is more a matter of choosing the API that provides only those features that you really need. When you call <code>CreateProcess()</code> as in the accepted answer there isn&#39;t much difference to the <code>system()</code> call."}], "answers": [{"comments": [{"owner": {"reputation": 112, "user_id": 7927462, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-R-QmX07ea4o/AAAAAAAAAAI/AAAAAAAAAI0/e78TrakxGnw/photo.jpg?sz=128", "display_name": "Brxxn", "link": "https://stackoverflow.com/users/7927462/brxxn"}, "edited": false, "score": 0, "creation_date": 1497474371, "post_id": 44554583, "comment_id": 76099781, "body": "Excellent information! I read up on the CreateProcess, seems like a more viable option over calling the system to open, well, the system. Now wouldn&#39;t this cause problems as that command.cmd file will always remain? Or will every iteration simply overwrite the previous one?"}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "reply_to_user": {"reputation": 112, "user_id": 7927462, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-R-QmX07ea4o/AAAAAAAAAAI/AAAAAAAAAI0/e78TrakxGnw/photo.jpg?sz=128", "display_name": "Brxxn", "link": "https://stackoverflow.com/users/7927462/brxxn"}, "edited": false, "score": 0, "creation_date": 1497474418, "post_id": 44554583, "comment_id": 76099803, "body": "@Brian I amended my code to delete the file after the file is executed."}, {"owner": {"reputation": 112, "user_id": 7927462, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-R-QmX07ea4o/AAAAAAAAAAI/AAAAAAAAAI0/e78TrakxGnw/photo.jpg?sz=128", "display_name": "Brxxn", "link": "https://stackoverflow.com/users/7927462/brxxn"}, "edited": false, "score": 0, "creation_date": 1497475301, "post_id": 44554583, "comment_id": 76100228, "body": "Thank you so much man! You guys are amazing, 15 minutes in and I&#39;ve got more information than I literally asked for! I&#39;ll do my best to help others out where I can. Back on topic, I&#39;ve updated my original post, are there any upsides to using CreateProcess() over my single call to system?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1497477701, "post_id": 44554583, "comment_id": 76101326, "body": "2nd code sample doesn&#39;t work at all. See the description of <code>CreateProcess()</code> parameter <code>lpApplicationName</code>: <i>In the case of a partial name, the function uses the current drive and current directory to complete the specification. The function will not use the search path.</i>"}], "tags": [], "owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "is_accepted": false, "score": 3, "last_activity_date": 1497474394, "last_edit_date": 1497474394, "creation_date": 1497473715, "answer_id": 44554583, "question_id": 44554276, "link": "https://stackoverflow.com/questions/44554276/how-to-run-windows-commands-through-c-program/44554583#44554583", "title": "How to run Windows Commands through C++ Program?", "body": "<p>A better idea is to dynamically generate a batch file (<code>.cmd</code> or <code>.bat</code>, <a href=\"https://stackoverflow.com/questions/148968/windows-batch-files-bat-vs-cmd\">there are slight differences</a>) and then invoke that with <code>cmd.exe /c batchFile.cmd</code>:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;cstdio&gt;\n\nofstream batch_file;\nbatch_file.open( \"commands.cmd\", ios::trunc );\nbatch_file &lt;&lt;\n    \"cd c:\\\\wamp64\\\\bin\\\\mysql\\\\mysql5.7.14\\\\bin\" &lt;&lt; endl &lt;&lt;\n    \"PAUSE\" &lt;&lt; endl &lt;&lt;\n    \"dir\" &lt;&lt; endl &lt;&lt;\n    \"PAUSE\" &lt;&lt; endl &lt;&lt;\n    \"mysql.exe -u root -p dataBase &lt; tables.sql\" &lt;&lt; endl;\nbatch_file.close();\n\nint batch_exit_code = system( \"cmd.exe /c commands.cmd\" ); // blocks until the child process is terminated\nif( batch_exit_code != 0 ) {\n    cout &lt;&lt; \"Batch file exited with code \" &lt;&lt; batch_exit_code &lt;&lt; endl;\n}\n\nremove( \"commands.cmd\" ); // delete the batch file\n</code></pre>\n\n<p>This has the benefit of allowing you to customize the text and commands, such as performing your own detection of the location of the MySQL binaries and your temporary files.</p>\n\n<p>Note that if you're always running on Windows, you might want to use <code>CreateProcess</code> instead, as <code>system</code> has some overheads:</p>\n\n<blockquote>\n  <p><a href=\"https://stackoverflow.com/questions/9970730/system-and-createprocess-createprocessw\">system() and CreateProcess() / CreateProcessW()</a></p>\n  \n  <p>The system function passes command to the command interpreter, which executes the string as an operating-system command. system refers to the COMSPEC and PATH environment variables that locate the command-interpreter file (the file named CMD.EXE in Windows NT).</p>\n</blockquote>\n\n<p>As you want to run <code>cmd.exe</code> directly, this would result in it opening twice.</p>\n\n<p>You can use <code>CreateProcess</code> instead:</p>\n\n<pre><code>STARTUPINFO info={sizeof(info)};\nPROCESS_INFORMATION processInfo;\nif( CreateProcess( \"cmd.exe\", \"/c commands.cmd\", NULL, NULL, TRUE, 0, NULL, NULL, &amp;info, &amp;processInfo ) )\n{\n    WaitForSingleObject( processInfo.hProcess, INFINITE );\n    CloseHandle( processInfo.hProcess );\n    CloseHandle( processInfo.hThread );\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1365, "user_id": 7610883, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d5b2f292c46f7ef87ab8a0adb47154fa?s=128&d=identicon&r=PG&f=1", "display_name": "cmdLP", "link": "https://stackoverflow.com/users/7610883/cmdlp"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1497474547, "post_id": 44554609, "comment_id": 76099881, "body": "Or just to keep shure: <code>#define AND_CMD +string(&quot; &amp; &quot;)+</code>"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1497475889, "post_id": 44554609, "comment_id": 76100491, "body": "I don&#39;t really see the reason for that macro."}], "tags": [], "owner": {"reputation": 1365, "user_id": 7610883, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d5b2f292c46f7ef87ab8a0adb47154fa?s=128&d=identicon&r=PG&f=1", "display_name": "cmdLP", "link": "https://stackoverflow.com/users/7610883/cmdlp"}, "is_accepted": true, "score": 2, "last_activity_date": 1497474739, "last_edit_date": 1497474739, "creation_date": 1497473799, "answer_id": 44554609, "question_id": 44554276, "link": "https://stackoverflow.com/questions/44554276/how-to-run-windows-commands-through-c-program/44554609#44554609", "title": "How to run Windows Commands through C++ Program?", "body": "<p>Here is a way you can execute system with directory change:</p>\n\n<pre><code>// using AND_CMD like an operator to concat commands -- you can also just type it in one string: \"edit &amp; shutdown -h\"...\n// this works in c, too, but no dynamic variables are possible\n//#define AND_CMD \" &amp; \"\n\n// c++\n#define AND_CMD +\" &amp; \"+\n\nsystem(\n    \"cd c:\\wamp64\\bin\\mysql\\mysql5.7.14\\bin\" AND_CMD\n    \"PAUSE\" AND_CMD\n    \"dir\" AND_CMD\n    \"PAUSE\" AND_CMD\n    \"mysql.exe -u root -p dataBase &lt; tables.sql\"\n);\n</code></pre>\n\n<p>So you only need to join the commands with the string <code>\" &amp; \"</code>.\nIf you need to run the code on conditions to the program itsself/keep the directory by next time calling the <code>system</code>-function, you should look for alternatives or you pipe the commands into the commandprompt (eg. running your program by <code>myprogram.exe | %comspec%</code> and invoking the commands by outputting with eg. <code>printf</code>.</p>\n"}], "owner": {"reputation": 112, "user_id": 7927462, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh6.googleusercontent.com/-R-QmX07ea4o/AAAAAAAAAAI/AAAAAAAAAI0/e78TrakxGnw/photo.jpg?sz=128", "display_name": "Brxxn", "link": "https://stackoverflow.com/users/7927462/brxxn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4796, "favorite_count": 0, "accepted_answer_id": 44554609, "answer_count": 2, "score": 2, "last_activity_date": 1497475141, "creation_date": 1497472535, "last_edit_date": 1497475141, "question_id": 44554276, "link": "https://stackoverflow.com/questions/44554276/how-to-run-windows-commands-through-c-program", "title": "How to run Windows Commands through C++ Program?", "body": "<p>For some back info to help you guys out, I'm making a small program that will take an .SQL file and restore it to the users localhost phpMyAdmin using mysql.exe. Importing the file through the MyAdmin itself by hand takes forever as it has to unzip and parse the information, this method is quicker and it's for my coworkers as we're always pushing backups and restores to our WAMP to experiment with.</p>\n\n<p>My one issue I'm facing is that I can't seem to get it to change directories no matter what. I understand that wherever the executable was launched is the path that the system will inherit, so why can't I simply tell it to change directories?</p>\n\n<p>Here's my code so far:</p>\n\n<pre><code>system(\"cd c:\\wamp64\\bin\\mysql\\mysql5.7.14\\bin\");\nsystem(\"PAUSE\");\nsystem(\"dir\");\nsystem(\"PAUSE\");\nsystem(\"mysql.exe -u root -p dataBase &lt; tables.sql\");\n</code></pre>\n\n<p>Note: The pauses and system(\"dir\") are in there strictly for testing purposes, once the window spits back the correct contents of the directory, then I know that it works and I'll only have the first and last lines left in the program.</p>\n\n<p><strong>UPDATE</strong>: I've been notified that every call to system creates a new CMD process which makes perfect sense as to why the cd will not effect anything, as it's opening a new process, changing directories, then on the next line it's calling a new process and pausing that. What would be the workaround for this?</p>\n\n<p><strong>UPDATE 2</strong>: I decided to join multiple commands together using &amp;&amp; but that limits me on the usability and \"styling\" side of things, but that's not a problem, the program is needed as a run &amp; done type of deal.</p>\n\n<p>Here's what I've come up with:</p>\n\n<pre><code>system(\"cd c:\\\\wamp64\\\\bin\\\\mysql\\\\mysql5.7.14\\\\bin &amp;&amp; mysql.exe -u root -p dataBase &lt; table.sql\");\ncout &lt;&lt; \"\\n\" &lt;&lt; \"The database 'dataBase' has been restored using 'table.sql' successfully!\" &lt;&lt; \"\\n\\n\";\nreturn 0;\n</code></pre>\n\n<p>Are there any advantages to creating a .cmd file and running it using CreateProcess() or disadvantages to using the method that I've come up with?</p>\n\n<p>Note: The database name and .sql files aren't pulled from anything, the names will be static so I don't have to worry about updating that.</p>\n"}, {"tags": ["c++", "visual-studio", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5503667, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/84249ff7f8591933574d85d938b5be85?s=128&d=identicon&r=PG&f=1", "display_name": "patra", "link": "https://stackoverflow.com/users/5503667/patra"}, "edited": false, "score": 0, "creation_date": 1497615688, "post_id": 44560753, "comment_id": 76165861, "body": "But how can I resize it? by this for loop I have 1x6000000 argument. But how can I resize it to 200x300x100 ?"}, {"owner": {"reputation": 9, "user_id": 5503667, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/84249ff7f8591933574d85d938b5be85?s=128&d=identicon&r=PG&f=1", "display_name": "patra", "link": "https://stackoverflow.com/users/5503667/patra"}, "edited": false, "score": 0, "creation_date": 1497615832, "post_id": 44560753, "comment_id": 76165954, "body": "I access to each row more easily, cv:: Mat mi1 = EnergyImage.row(1); cv:: Mat mi0 = EnergyImage.row(0); this 2 vector has 1x6000000 dimension. I think I didn&#39;t write my question clearly, I just want to resize(or reshape) this vector to 3d mat."}], "tags": [], "owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "is_accepted": true, "score": 0, "last_activity_date": 1497510397, "last_edit_date": 1497510397, "creation_date": 1497510061, "answer_id": 44560753, "question_id": 44554259, "link": "https://stackoverflow.com/questions/44554259/resizing-mat-opencv-in-visual-studio/44560753#44560753", "title": "Resizing mat openCV in Visual Studio", "body": "<p>OpenCV provides the <code>cv::Mat</code> constructor API where you can create an n-dimensional Matrix with arbitrary bins in each dimension as:</p>\n\n<pre><code>cv::Mat m = cv::Mat(1, 6000000, CV_8UC1, cv::Scalar(100));\n\nint sizes[3] = {200, 300, 100};\ncv::Mat multiDimMat = cv::Mat(3, sizes, CV_8UC1, &amp;m.data[0]);\n</code></pre>\n\n<p>The above code would suffice if you had linear <code>cv::Mat</code> with only one row, but since your input <code>cv::Mat</code> has 2 rows and you want 2 separate <code>cv::Mat</code> objects for each row, you may try:</p>\n\n<pre><code>for(int i = 0; i &lt; m.rows; i++)\n{\n    const uchar* mi = m.ptr&lt;uchar&gt;(i);\n    // Perform the same routine as above code \n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 5503667, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/84249ff7f8591933574d85d938b5be85?s=128&d=identicon&r=PG&f=1", "display_name": "patra", "link": "https://stackoverflow.com/users/5503667/patra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 1, "accepted_answer_id": 44560753, "answer_count": 1, "score": -1, "last_activity_date": 1497609759, "creation_date": 1497472459, "last_edit_date": 1497609759, "question_id": 44554259, "link": "https://stackoverflow.com/questions/44554259/resizing-mat-opencv-in-visual-studio", "title": "Resizing mat openCV in Visual Studio", "body": "<p>In c++, Visual Studio, I have image </p>\n\n<pre><code>cv::Mat EnergyImage;\n</code></pre>\n\n<p>which is 2D with dimension of 2x6000000</p>\n\n<p>I want to convert it to 2 image with size of 200x300x100(=6000000), better to say two 3d images.</p>\n\n<p>how can I reshape it and access to 2 image seprately?</p>\n"}, {"tags": ["c++", "qt", "dbus"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1497471934, "post_id": 44554044, "comment_id": 76098516, "body": "&quot;... undefined reference to ... &quot; &quot;This doesn&#39;t make sense because motor.h includes ...&quot;  - undefined reference means you have a linker issue. It has nothing to do with what you include but everything to do with what object files/libraries you link to."}, {"owner": {"reputation": 410, "user_id": 5070367, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-U7adc5i5BNE/AAAAAAAAAAI/AAAAAAAAIHI/RF6QSN27qO4/photo.jpg?sz=128", "display_name": "Dan Christian", "link": "https://stackoverflow.com/users/5070367/dan-christian"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1497472880, "post_id": 44554044, "comment_id": 76098980, "body": "You nailed it.  I needed to add some stuff to the .pro file so qmake included the right libraries. QT += dbus"}], "owner": {"reputation": 410, "user_id": 5070367, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-U7adc5i5BNE/AAAAAAAAAAI/AAAAAAAAIHI/RF6QSN27qO4/photo.jpg?sz=128", "display_name": "Dan Christian", "link": "https://stackoverflow.com/users/5070367/dan-christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1497480126, "creation_date": 1497471606, "last_edit_date": 1497480126, "question_id": 44554044, "link": "https://stackoverflow.com/questions/44554044/qt-dbus-property-returning-a-list", "title": "Qt dbus property returning a list", "body": "<p>I'm trying to figure out how to handle a <code>dbus</code> property that is a list of <code>unsigned short</code>.  I'm new to <code>dbus</code> and <code>Qt</code>, and the examples don't cover lists at all.</p>\n\n<p>The XML source looks like this:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;node&gt;\n  &lt;interface name='com.Controller'&gt;\n    &lt;property name=\"ModeCycle\" type=\"aq\" access=\"readwrite\"&gt;\n      &lt;annotation name=\"org.freedesktop.DBus.Property.EmitsChangedSignal\"\n          value=\"true\"/&gt;\n      &lt;annotation name=\"org.qtproject.QtDBus.QtTypeName\"\n          value=\"ModeCycleList\"/&gt;\n    &lt;/property&gt;\n  &lt;/interface&gt;\n&lt;/node&gt;\n</code></pre>\n\n<p>I originally tried passing in a value of <code>Qlist&lt;unsigned short</code>, but qdbusxml2cpp can't handle angle brackets there (and silently drops the entry).  So, I created bits.h with:</p>\n\n<pre><code>#include &lt;QtCore/QList&gt;\ntypedef QList&lt;unsigned short&gt; ModeCycleList;\n</code></pre>\n\n<p>I added: </p>\n\n<pre><code>QT += dbus \nQDBUSXML2CPP_INTERFACE_HEADER_FLAGS = -i bits.h\n</code></pre>\n\n<p>to the .pro file to include the typedef and get things to link.</p>\n\n<p>I can't actually run the code yet (missing the other side of the dbus connection), but at least it compiles and links.</p>\n\n<p>Does anyone have a example for a <code>dbus</code> list property or know how I should be specifying a list here?</p>\n"}, {"tags": ["c++", "c++11", "c++14", "language-lawyer", "copy-constructor"], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 4, "last_activity_date": 1497471478, "creation_date": 1497471478, "answer_id": 44554007, "question_id": 44553920, "link": "https://stackoverflow.com/questions/44553920/implicit-copy-constructor-in-presence-of-user-defined-move-constructor-assignmen/44554007#44554007", "title": "Implicit copy constructor in presence of user-defined move constructor/assignment", "body": "<p>At least as of the draft I have handiest at the moment (N4618), it's at \u00a7[class.copy.ctor]/6:</p>\n\n<blockquote>\n  <p>If the class definition does not explicitly declare a copy constructor, a non-explicit one is declared implicitly. If the class definition declares a move constructor or move assignment operator, the implicitly declared copy constructor is defined as deleted; otherwise, it is defined as defaulted (8.4).</p>\n</blockquote>\n"}], "owner": {"reputation": 1070, "user_id": 4751585, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8133bc4362cccbabf6d28e25f1d4bf81?s=128&d=identicon&r=PG&f=1", "display_name": "ledonter", "link": "https://stackoverflow.com/users/4751585/ledonter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1497471516, "accepted_answer_id": 44554007, "answer_count": 1, "score": 2, "last_activity_date": 1497471478, "creation_date": 1497471156, "question_id": 44553920, "link": "https://stackoverflow.com/questions/44553920/implicit-copy-constructor-in-presence-of-user-defined-move-constructor-assignmen", "closed_reason": "Duplicate", "title": "Implicit copy constructor in presence of user-defined move constructor/assignment", "body": "<p>It's written on cppreference that for post C++11 versions of the standard one of the cases when copy constructor is implicitly defined as deleted is the following (constructor for class T):</p>\n\n<blockquote>\n  <p>T has a user-defined move constructor or move assignment operator;</p>\n</blockquote>\n\n<p>It seems to be true according to compilers, however I didn't manage to find it in the standard...</p>\n\n<p>The place seems to be 12.8/11 (at least for 14882:2011), all other cases seem to be there except the aforementioned one..</p>\n\n<p>Where should I look for this particular case?</p>\n"}, {"tags": ["c++", "c++11", "boost", "c++14"], "comments": [{"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1497470681, "post_id": 44553737, "comment_id": 76097896, "body": "What is boost ptr_map? Are you sure you still need that in C++14? I don&#39;t think you do, those old pointer containers were to address the fact that auto_ptr couldn&#39;t actually be generically handled by containers."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1497470752, "post_id": 44553737, "comment_id": 76097932, "body": "Why not just use a <code>std::map&lt;int, std::unique_ptr&lt;Foo&gt;&gt;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1497472680, "last_edit_date": 1497472680, "creation_date": 1497470687, "answer_id": 44553792, "question_id": 44553737, "link": "https://stackoverflow.com/questions/44553737/insert-stdunique-ptr-into-boostptr-map/44553792#44553792", "title": "Insert std::unique_ptr into boost:ptr_map", "body": "<blockquote>\n  <p>Is map_ptr API just not up to date yet?</p>\n</blockquote>\n\n<p>No, you're just using it the wrong way.</p>\n\n<p>As from the <a href=\"http://www.boost.org/doc/libs/1_64_0/libs/ptr_container/doc/ptr_map.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>A\u00a0ptr_map\u00a0is a pointer container that uses an underlying\u00a0std::map\u00a0to store the pointers.</p>\n</blockquote>\n\n<p>Note that this doesn't compile:</p>\n\n<pre><code>unique_ptr&lt;Foo&gt; foo(new Foo);\nvoid *ptr = foo;\n</code></pre>\n\n<p>Because you cannot convert a <code>std::unique_ptr</code> to <code>void *</code> with an assignment, it doesn't make much sense.<br>\nThat's more or less what happens internally when you try to do with this:</p>\n\n<pre><code>m.insert(5, move(foo));\n</code></pre>\n\n<p>On the other side this compiles instead:</p>\n\n<pre><code>unique_ptr&lt;Foo&gt; foo(new Foo);\nFoo *bar = foo.realease();\nvoid *ptr = bar;\n</code></pre>\n\n<p>That's something close to:</p>\n\n<pre><code>m.insert(5, move.release());\n</code></pre>\n\n<p>Therefore you cannot expect the first case to work and actually it doesn't.</p>\n\n<hr>\n\n<p>That being said, nowadays I'd rather use a map of int and <code>std::unique_ptr&lt;Foo&gt;</code> from the standard template library and get rid of <code>boost::ptr_map</code>, as suggested in the comments to the question.<br>\nSomething like the following should work:</p>\n\n<pre><code>std::map&lt;int, std::unique_ptr&lt;Foo&gt;&gt;\n</code></pre>\n\n<p>Note that a <code>std::map</code> is more appropriate than a <code>std::unordered_map</code> if you want something closer to how <code>boost::ptr_map</code> works for, as mentioned above, its underlying data structure is an <code>std::map</code> and not an <code>std::unordered_map</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": false, "score": 3, "last_activity_date": 1497471129, "last_edit_date": 1497471129, "creation_date": 1497470883, "answer_id": 44553846, "question_id": 44553737, "link": "https://stackoverflow.com/questions/44553737/insert-stdunique-ptr-into-boostptr-map/44553846#44553846", "title": "Insert std::unique_ptr into boost:ptr_map", "body": "<p>I think in C++14 what you want is this:</p>\n\n<pre><code>std::unordered_map&lt;int, std::unique_ptr&lt;Foo&gt;&gt; x;\nx.emplace(5, std::make_unique&lt;Foo&gt;());\n</code></pre>\n\n<p>You don't need those old boost _ptr containers any more, they were basically workarounds for the lack of an owning, zero overhead pointer that could safely be handled in containers (i.e. <code>unique_ptr</code>).</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 4581256, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FTX3cjiBzwE/AAAAAAAAAAI/AAAAAAAABQk/7Mbw4k3tVUA/photo.jpg?sz=128", "display_name": "rahenri", "link": "https://stackoverflow.com/users/4581256/rahenri"}, "edited": false, "score": 0, "creation_date": 1497483146, "post_id": 44553972, "comment_id": 76102963, "body": "Good point, I should have mentioned this wasn&#39;t an option for me since that is not a drop-in replacement for ptr_map like unique_ptr mostly was for auto_ptr for the particular code I have in had. And I have to say that ptr_map is a little bit nicer to use compared to a map of unique_ptr."}], "tags": [], "owner": {"reputation": 15, "user_id": 8162678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff83128e21618d3df57009a3c12fee9d?s=128&d=identicon&r=PG&f=1", "display_name": "Graham. B", "link": "https://stackoverflow.com/users/8162678/graham-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1497471341, "creation_date": 1497471341, "answer_id": 44553972, "question_id": 44553737, "link": "https://stackoverflow.com/questions/44553737/insert-stdunique-ptr-into-boostptr-map/44553972#44553972", "title": "Insert std::unique_ptr into boost:ptr_map", "body": "<p>You can use</p>\n\n<pre><code>std::unordered_map&lt;int, std::unique_ptr&lt;Foo&gt;&gt; x;\nx.emplace(5, std::make_unique&lt;Foo&gt;());\n</code></pre>\n\n<p>Its a C++14 feature. No need for the old boost containers!!! :)</p>\n"}], "owner": {"reputation": 113, "user_id": 4581256, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-FTX3cjiBzwE/AAAAAAAAAAI/AAAAAAAABQk/7Mbw4k3tVUA/photo.jpg?sz=128", "display_name": "rahenri", "link": "https://stackoverflow.com/users/4581256/rahenri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1497483286, "creation_date": 1497470489, "last_edit_date": 1497483286, "question_id": 44553737, "link": "https://stackoverflow.com/questions/44553737/insert-stdunique-ptr-into-boostptr-map", "title": "Insert std::unique_ptr into boost:ptr_map", "body": "<p>I'm moving some old code to c++14, it used the deprecated auto_ptr and that worked well with boost:ptr_map, you could do:</p>\n\n<pre><code>auto_ptr&lt;Foo&gt; foo(new Foo);\nboost:map_ptr&lt;int, Foo&gt; m;\nm.insert(5, foo);\n</code></pre>\n\n<p>Now, replacing that auto_ptr with unique_ptr, it doesn't compile:</p>\n\n<pre><code>unique_ptr&lt;Foo&gt; foo(new Foo);\nboost:map_ptr&lt;int, Foo&gt; m;\nm.insert(5, foo);            // Does not compile\nm.insert(5, move(foo));      // Does not compile either,\n                             // this should be the right thing to do\nm.insert(5, move.release()); // Does compile, but isn't exception safe\n</code></pre>\n\n<p>Is map_ptr API just not up to date yet?</p>\n\n<p>Edit based on responses, using map of unique_ptr is not a good option in my case because it requires rewrite of a fair amount of code. I really wanted to make it work with map_ptr, I'm dealing with some old code and I wish to make minimum changes.</p>\n"}, {"tags": ["c++", "operator-overloading", "literals", "operand"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1497470345, "post_id": 44553658, "comment_id": 76097725, "body": "Binary operators like <code>+</code> should generally be free functions, not members, in which case the problem goes away, as suitable conversions can be performed on both the left and right hand operands.."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497470544, "post_id": 44553705, "comment_id": 76097819, "body": "<code>CLS operator+(const CLS &amp;lhs, const CLS&amp; rhs)</code> is enough as there is not explicit constructor that accepts <code>const char *</code>"}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 2, "last_activity_date": 1497470374, "creation_date": 1497470374, "answer_id": 44553705, "question_id": 44553658, "link": "https://stackoverflow.com/questions/44553658/overloading-operators-operand-order-when-using-c-literals/44553705#44553705", "title": "Overloading operators: operand order when using C++ literals", "body": "<p>You can add a global function:</p>\n\n<pre><code>inline CLS operator+(const char *lhs, const CLS&amp; rhs)\n{\n    return CLS(lhs) + rhs;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 4, "last_activity_date": 1497470843, "creation_date": 1497470843, "answer_id": 44553835, "question_id": 44553658, "link": "https://stackoverflow.com/questions/44553658/overloading-operators-operand-order-when-using-c-literals/44553835#44553835", "title": "Overloading operators: operand order when using C++ literals", "body": "<p>This code:</p>\n\n<pre><code>cout &lt;&lt; \"\\n Good \" + b; /* this is not possible because of the operands order */\n</code></pre>\n\n<p>does not work because you made <code>operator+</code> member (and not const member). If you rewrite it as standalone function (probably friend) then this problem would go away:</p>\n\n<pre><code>friend \nCLS operator+(const CLS&amp; lhs, const CLS&amp; rhs)\n{\n    CLS r;\n    r.str = lhs.str + rhs.str;\n    return r; \n}\n</code></pre>\n\n<p>if you create additional ctor that accepts <code>const std::string &amp;</code> it would be even simpler:</p>\n\n<pre><code>friend \nCLS operator+(const CLS&amp; lhs, const CLS&amp; rhs)\n{\n    return CLS( lhs.str + rhs.str );\n}\n</code></pre>\n\n<p>note, you should rewrite existing constructor this way:</p>\n\n<pre><code>CLS(const char* param) : str( param )\n{}\n</code></pre>\n\n<p>it is cleaner and more efficient way</p>\n"}], "owner": {"reputation": 464, "user_id": 7972961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-2Y10ljcIeE0/AAAAAAAAAAI/AAAAAAAAAAs/JKiDGA2WOMs/photo.jpg?sz=128", "display_name": "Kamal Zidan", "link": "https://stackoverflow.com/users/7972961/kamal-zidan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 44553835, "answer_count": 2, "score": 3, "last_activity_date": 1497470843, "creation_date": 1497470204, "question_id": 44553658, "link": "https://stackoverflow.com/questions/44553658/overloading-operators-operand-order-when-using-c-literals", "title": "Overloading operators: operand order when using C++ literals", "body": "<p>I am writing a class and I got to the point where I can do operations that mix my class type objects and C++ literals, but in one direction only.</p>\n\n<p>here is a simplified code that shows the idea:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nclass CLS\n{\n    string str;\n\npublic:\n    CLS(const char* param)\n    {    str = param;   }\n\n    CLS operator+(const CLS&amp; rhs)\n    {\n        str = str + rhs.str;\n        return *this; }\n\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; out, const CLS&amp; rhs);\n};\n\nostream&amp; operator&lt;&lt;(ostream&amp; out, const CLS&amp; rhs)\n{\n    out &lt;&lt; rhs.str;\n    return out; }\n\nint main()\n{\n    CLS a(\"\\n Hello \");\n    CLS b(\"bye!\\n\\n\");\n\n    cout &lt;&lt; a + \"World!\\n\\n\";\n\n    //cout &lt;&lt; \"\\n Good \" + b; /* this is not possible because of the operands order */\n}\n</code></pre>\n\n<p>As you see, I can do something like:</p>\n\n<pre><code>a + \"W\";\n</code></pre>\n\n<p>but not,</p>\n\n<pre><code>\"W\" + a;\n</code></pre>\n\n<p>As indicated in the last line of the code.</p>\n\n<p>I understand the reason. </p>\n\n<p>The first is equivalent to:</p>\n\n<pre><code>a.operator+(\"W\");\n</code></pre>\n\n<p>which is covered by my class. However, the second is like,</p>\n\n<pre><code>\"W\".operator(a);\n</code></pre>\n\n<p>which is not covered and the literal itself is not an object of a class as I understand. And so, the expression as whole cannot be.</p>\n\n<p>I understand I can create a user defined literals, but this is not what I want to do here. (although I am not sure if they gonna work or not).</p>\n\n<p>I could not find any hint browsing questions I supposed to be related on this site, and I could not get something related to my issue on the net.</p>\n\n<p>My question:</p>\n\n<p><strong>Is there a way that can make either order works?</strong> </p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1497470300, "post_id": 44553616, "comment_id": 76097700, "body": "This looks like a real good use case for some OOP.  You create a <code>Player</code> object and then read the data into a vector of Players.  Then it becomes pretty simple to analyze the data from there."}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1497471848, "post_id": 44553616, "comment_id": 76098473, "body": "Just check for 2nd index in each row(use a loop). If positive, put the 0th index of that row inside a set(only if you know that kit numbers will be unique, if not push them into a vector and then sort the vector)."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1497472360, "post_id": 44554039, "comment_id": 76098708, "body": "You don&#39;t need the <code>cin.ignore</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1497472444, "post_id": 44554039, "comment_id": 76098752, "body": "Note:  your <code>player</code> vector is <i>recreated</i> in each <code>for</code> loop.  My understanding is that the OP wants results from analysis of all players."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1497472515, "post_id": 44554039, "comment_id": 76098790, "body": "If you are going to post a code answer, please indicate how it is different or how it solves the OP&#39;s question."}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1497473090, "post_id": 44554039, "comment_id": 76099110, "body": "Updated taking into consideration @ThomasMatthews 2nd comment"}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1497473847, "post_id": 44554039, "comment_id": 76099530, "body": "@ThomasMatthews if commented <code>cin.ignore</code> line, then don&#39;t work properly, see: <a href=\"http://ideone.com/DWZprx\" rel=\"nofollow noreferrer\">ideone.com/DWZprx</a>, can you explain why is not needed?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1497487217, "post_id": 44554039, "comment_id": 76103913, "body": "My bad.  I didn&#39;t see you were using <code>getline</code> to read the other numbers."}], "tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": false, "score": 0, "last_activity_date": 1497473012, "last_edit_date": 1497473012, "creation_date": 1497471584, "answer_id": 44554039, "question_id": 44553616, "link": "https://stackoverflow.com/questions/44553616/need-help-getting-specific-values-from-an-array-and-sorting-them-from-highest-to/44554039#44554039", "title": "need help getting specific values from an array and sorting them from highest to lowest", "body": "<p>Here is solved using <code>vector</code> as suggested in the comments.\nNote that I'm using <code>cin</code> for convenience, but the same can be done with your <code>ifstream fd</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n#include &lt;limits&gt;\nusing namespace std;\n\nint main() {\n    int n;\n    cin &gt;&gt; n;\n    cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n    vector &lt;vector &lt;int&gt; &gt; players;\n    for(int i=0; i&lt;n; i++ )\n    {\n      vector &lt;int&gt; player;\n      int val;\n      std::string line;\n      std::getline(cin, line);\n      std::istringstream iss(line);\n      while ( iss &gt;&gt; val) {    \n        player.push_back(val);\n      }\n      players.push_back(player);\n      if((player.size()&gt;3)&amp;&amp;(player[2]&gt;0))\n      cout &lt;&lt; player[0] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>So in <code>players</code> you have a <code>vector</code> containing all players (which are also <code>vector</code>s). Then you can sort it using <code>std::sort</code>.</p>\n\n<p><a href=\"http://ideone.com/JGK56W\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p>Output:</p>\n\n<blockquote>\n  <p>9 25 14 33 13</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 6411950, "user_type": "registered", "profile_image": "https://graph.facebook.com/1444860702251539/picture?type=large", "display_name": "dkisonas", "link": "https://stackoverflow.com/users/6411950/dkisonas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1497473012, "creation_date": 1497470073, "question_id": 44553616, "link": "https://stackoverflow.com/questions/44553616/need-help-getting-specific-values-from-an-array-and-sorting-them-from-highest-to", "title": "need help getting specific values from an array and sorting them from highest to lowest", "body": "<p>I'm using these values:</p>\n\n<pre><code>8\n9 5 7 -5 13 -4 11\n7 5 -3 12 -5 17 -3\n25 7 12 -3 5 -5 7 -5 3\n14 5 12 -3 10 -7 8\n5 1 -40\n33 5 15 -5 9 -3 8\n11 5 -12 8 -5 12 -3\n13 5 3 -4 25 -5 3\n</code></pre>\n\n<p>The first number is the ammount of basketball players there are in a team, the first number of every row is the player's kit number, the second number is how many times he sat on the bench or played on the court during the match, and the other numbers is the ammount of time he played (if the number is positive) and how long he sat on the bench (if the number is negative). What I need to do is to figure out which 5 players started the match (if the 3rd number of a row is positive, it means the player started the match). Then I need to take the kit numbers of the players who started the match and sort them from lowest to highest. Here's my progress:</p>\n\n<pre><code>void skaitymas()\n{\n    int minnum = starters[0];\n    ifstream fd (\"u1.txt\");\n    fd &gt;&gt; n;\n    for (int i = 0; i &lt; n; i++){\n        fd &gt;&gt; k[i] &gt;&gt; t;\n        for (int j = 0; j &lt; t; j++){\n            fd &gt;&gt; zaidnez[j];\n        }\n        if (zaidnez[0]&gt;0){\n            // if I write cout &lt;&lt; k[i]; here I get all the kit numbers but not in order\n            starters[i] = k[i]; // here I'm trying to set the values to another array but it doesn't really work, I'm not sure how to do it properly.\n        }\n    }\n    fd.close();\n}\n</code></pre>\n"}, {"tags": ["c++", "list", "pointers", "stl"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1497468143, "post_id": 44553045, "comment_id": 76096534, "body": "Why are you even using pointers here?  I see no reason to do so and if you remove them then you don&#39;t have to worry about leaking :)"}, {"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 4, "creation_date": 1497468182, "post_id": 44553045, "comment_id": 76096558, "body": "Why are you using malloc? Half of this code looks more like c than c++."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 3, "creation_date": 1497468338, "post_id": 44553045, "comment_id": 76096635, "body": "<code>std::list&lt;struct MyStruct *&gt;::iterator it;</code> I&#39;m sorry, are you from the past? Seriously though, if you&#39;re not working with some legacy system here, you really need to update your learning material."}, {"owner": {"reputation": 73, "user_id": 8116387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7cc00f88af13df5d8cb29692945a09?s=128&d=identicon&r=PG&f=1", "display_name": "M. Rock", "link": "https://stackoverflow.com/users/8116387/m-rock"}, "edited": false, "score": 0, "creation_date": 1497468437, "post_id": 44553045, "comment_id": 76096694, "body": "Sorry but this is sample program. I just started learning C++. I want to understand the pointers and STL containers. So I have written sample program."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1497469073, "post_id": 44553045, "comment_id": 76097035, "body": "<code>s[len] = &#39;\\0&#39;;</code> will not end well, instead of allocating and terminating the string yourself, consider using <code>std::string</code>."}, {"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 0, "creation_date": 1497470206, "post_id": 44553045, "comment_id": 76097642, "body": "@M.Rock : Your code represents how C++ probably (since I&#39;m not old enough to know for sure) looked like around the year 2003. Things have really changed since then : <i>please</i> look for an updated textbook."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 8116387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7cc00f88af13df5d8cb29692945a09?s=128&d=identicon&r=PG&f=1", "display_name": "M. Rock", "link": "https://stackoverflow.com/users/8116387/m-rock"}, "edited": false, "score": 0, "creation_date": 1497468552, "post_id": 44553146, "comment_id": 76096763, "body": "You are right. it might be used by some C code in future. That&#39;s why I used malloc."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 73, "user_id": 8116387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7cc00f88af13df5d8cb29692945a09?s=128&d=identicon&r=PG&f=1", "display_name": "M. Rock", "link": "https://stackoverflow.com/users/8116387/m-rock"}, "edited": false, "score": 1, "creation_date": 1497468688, "post_id": 44553146, "comment_id": 76096842, "body": "You can still deallocate memory from malloc using smart pointers and custom deleter. But bigger problem you are writing C code, not C++"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 73, "user_id": 8116387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7cc00f88af13df5d8cb29692945a09?s=128&d=identicon&r=PG&f=1", "display_name": "M. Rock", "link": "https://stackoverflow.com/users/8116387/m-rock"}, "edited": false, "score": 1, "creation_date": 1497468822, "post_id": 44553146, "comment_id": 76096898, "body": "@M.Rock If you are writing code so it may be used by C in the future, you are writing C code. If your code is <i>not</i> C, then using <code>malloc</code> is the least of your concern when time comes to porting it."}, {"owner": {"reputation": 73, "user_id": 8116387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7cc00f88af13df5d8cb29692945a09?s=128&d=identicon&r=PG&f=1", "display_name": "M. Rock", "link": "https://stackoverflow.com/users/8116387/m-rock"}, "edited": false, "score": 0, "creation_date": 1497477207, "post_id": 44553146, "comment_id": 76101097, "body": "I assigned to p. And then I assigned this p to struct data member. So i don&#39;t loose it but I have first list member which pointing to this. I can keep track of this. Also, it seems in my environment they haven&#39;t upgraded g++. It seems they still using older version. So smart pointers are not supported."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 73, "user_id": 8116387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7cc00f88af13df5d8cb29692945a09?s=128&d=identicon&r=PG&f=1", "display_name": "M. Rock", "link": "https://stackoverflow.com/users/8116387/m-rock"}, "edited": false, "score": 0, "creation_date": 1497478132, "post_id": 44553146, "comment_id": 76101486, "body": "@M.Rock you do loose it, I copied 2 lines of code from your question where you assign result of <code>malloc</code> to <code>p</code> and next line you assign <code>buf</code> to <code>p</code>, losing address of memory that <code>malloc</code> returned before. And assigning <code>buf</code> to <code>p</code> creates another problem - you call <code>std::free</code> with <code>buf</code> which is UB as well. Looks like you wanted <code>strcpy( p, buff );</code> instead of <code>p = buff;</code> Learn about pointers if you want to use them."}, {"owner": {"reputation": 73, "user_id": 8116387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7cc00f88af13df5d8cb29692945a09?s=128&d=identicon&r=PG&f=1", "display_name": "M. Rock", "link": "https://stackoverflow.com/users/8116387/m-rock"}, "edited": false, "score": 0, "creation_date": 1497488011, "post_id": 44553146, "comment_id": 76104056, "body": "Updated the code. Now do you think any memory leak? When I destroy this list, I don&#39;t know whether I have to destroy each of these pointers? I mean in destructor, do i need to delete (*it)-&gt;data before deleting (*it)?"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 3, "last_activity_date": 1497479113, "last_edit_date": 1497479113, "creation_date": 1497468443, "answer_id": 44553146, "question_id": 44553045, "link": "https://stackoverflow.com/questions/44553045/clear-out-the-stl-list-of-pointers-in-c/44553146#44553146", "title": "Clear out the STL list of pointers in C++", "body": "<blockquote>\n  <p>I want to understand is there any memory leak in below program?</p>\n</blockquote>\n\n<p>Yes you have it right here:</p>\n\n<pre><code>p = (char*)malloc(MAX_LEN);\np = (char *)buf;\n</code></pre>\n\n<p>you allocate memory and assign it to <code>p</code> and next line you loose it. So:</p>\n\n<ol>\n<li>You should not use <code>malloc()</code> in C++ programs unless you need to pass data that would be managed by C code</li>\n<li>You should use special data structure like <code>std::string</code> etc to manage your data.</li>\n<li>If you still need to allocate dynamic memory use smart pointers.</li>\n</ol>\n\n<blockquote>\n  <p>How should I debug if there is any memory leak? </p>\n</blockquote>\n\n<p>You would not create them in the first place. For example, how could you write <code>get_random_str</code> (assuming you really have to allocate it using <code>malloc</code>):</p>\n\n<pre><code>using spchar = std::unique_ptr&lt;char[], decltype(std::free) *&gt;;\n\nspchar get_random_str( int len )\n{\n    spchar s( static_cast&lt;char *&gt;( malloc( len + 1 ) ), std::free );\n    static const char alphanum[] =  \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n     for (int i = 0; i &lt; len; ++i) {\n         s[i] = alphanum[rand() % (sizeof(alphanum) - 1)];\n     }\n\n     s[len] = '\\0';\n     return s;\n }\n</code></pre>\n\n<p>Note, I did not compile this code, it's to show you the idea.</p>\n\n<p>Update: looks like you think that this code:</p>\n\n<pre><code>p = (char *)buf;\n</code></pre>\n\n<p>would copy string from <code>buf</code> to <code>p</code>, which is not the case. Instead you make <code>p</code> point to memory of <code>buf</code> loosing old value that <code>malloc()</code> returned before (hence creating memory leak) and you assign that adress of <code>buf</code> to <code>data</code> which leads to UB when you call <code>free()</code> on it, so what you  need instead:</p>\n\n<pre><code>strncpy( p, buf, MAX_LEN );\n</code></pre>\n\n<p>but even that is not necessary as you do not really need <code>buf</code> at all:</p>\n\n<pre><code>void myClass::fillData(void) \n{\n    s = (MyStruct *)malloc(sizeof(struct MyStruct));\n    s-&gt;data = (char*)malloc(MAX_LEN);\n    get_random_str(s-&gt;data,950);\n    s-&gt;len = strlen(s-&gt;data);\n    l_list.push_back(s);\n}\n</code></pre>\n\n<p>but this is more C code, using some C++ syntax. You should get newer compiler and textbook if you really want to learn C++.</p>\n"}, {"comments": [{"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 1, "creation_date": 1497468916, "post_id": 44553154, "comment_id": 76096946, "body": "A much better suggestion would be to have a <code>std::list</code> of <code>std::unique_ptr</code>s, which would guarantee destruction of the pointed-to structures at the time of the list&#39;s destruction. This is, of course, assuming that the OP really needs to store pointers to the structures in the first place..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1497469094, "post_id": 44553154, "comment_id": 76097043, "body": "imho the answer to &quot;Why do I have a memory leak?&quot; should be &quot;because you are using raw pointers&quot;. Freeing them fights the symptom not the cause ;)"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 4, "creation_date": 1497469340, "post_id": 44553154, "comment_id": 76097164, "body": "Not the dv, but <code>if(elem)</code> is superfluous, it&#39;s legal to call <code>free</code> on a null pointer. (Also, pretty much purely opinion based but <code>std::for_each</code> seems a little bloated compared to a range based for loop <code>for( const auto elem : l_list )</code>)."}, {"owner": {"reputation": 427, "user_id": 4901269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/10303396ec8bbab327d22b73a8e47cdd?s=128&d=identicon&r=PG&f=1", "display_name": "Geoff", "link": "https://stackoverflow.com/users/4901269/geoff"}, "edited": false, "score": 0, "creation_date": 1497469993, "post_id": 44553154, "comment_id": 76097521, "body": "Why is this being so harshly downvoted? It answers the ops question specifically for code they already have..."}], "tags": [], "owner": {"reputation": 1561, "user_id": 2567725, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/BndRm.jpg?s=128&g=1", "display_name": "Olha", "link": "https://stackoverflow.com/users/2567725/olha"}, "is_accepted": false, "score": -2, "last_activity_date": 1497468452, "creation_date": 1497468452, "answer_id": 44553154, "question_id": 44553045, "link": "https://stackoverflow.com/questions/44553045/clear-out-the-stl-list-of-pointers-in-c/44553154#44553154", "title": "Clear out the STL list of pointers in C++", "body": "<p>Delete elements using lambda function in <code>for_each</code>:    </p>\n\n<pre><code>std::for_each(l_list.begin(), l_list.end(), [](const MyStruct* elem){if(elem) free(elem)});\n</code></pre>\n\n<p>And clear pointers: </p>\n\n<pre><code>l_list.clear();\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 8116387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc7cc00f88af13df5d8cb29692945a09?s=128&d=identicon&r=PG&f=1", "display_name": "M. Rock", "link": "https://stackoverflow.com/users/8116387/m-rock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1497568244, "creation_date": 1497468065, "last_edit_date": 1497568244, "question_id": 44553045, "link": "https://stackoverflow.com/questions/44553045/clear-out-the-stl-list-of-pointers-in-c", "title": "Clear out the STL list of pointers in C++", "body": "<p>I have defined a list of pointers. How should I free all these pointers before clearing the list? What is the best approach to erase all list members? In below program, is it required to free memory allocated for struct?? See my inline comments.</p>\n\n<pre><code>struct MyStruct {\n    char *data;\n    int len;\n};\n\ntypedef std::list&lt;struct MyStruct *&gt; myStruct_list;\nmyStruct_list l_list;\n\n/* Prepare a list */\n\nfor( int i = 0; i &lt; 10; i++) {\n    struct MyStruct *s = (MyStruct *)malloc(sizeof(struct MyStruct));\n    s-&gt;data = (char*)malloc(MAX_LEN);\n    get_random_data(s-&gt;data,size);\n    s-&gt;len = strlen(s-&gt;data);\n    l_list.push_back(s);\n}\n\n\n/* Delete all members from a list */\n\nmyStruct_list::iterator it;\nfor (it = l_list.begin(); it != l_list.end(); ++it) {\n    if (*it) {\n        free(*it);       // ---&gt;&gt; do I need to free (*it)-&gt;data ?????\n    }\n}\nl_list.clear();\n</code></pre>\n"}, {"tags": ["c++", "dll", "visual-studio-2008", "windows-7", "dllimport"], "comments": [{"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1497469395, "post_id": 44553033, "comment_id": 76097201, "body": "Do you expect to be able to change the EXE and have the DLL use the new version of the superclass? I don&#39;t think that&#39;s possible. It also doesn&#39;t seem like the right place for the superclass ... the application uses the DLL, not really the other way around. Put the superclass in the DLL."}, {"owner": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "reply_to_user": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1497514643, "post_id": 44553033, "comment_id": 76113427, "body": "I hope to rebuild the app and use old DLLs, but NOT to change the class the DLL inherits from.  The API will be steady in that respect.  The symbols won&#39;t change (or reorder, or have new symbols added before them, if these are things MSFT can&#39;t cope with).  I agree the requirements might seem perplexing, but those are the requirements for this project.  Think in terms of the DLL allowing user customization of an app base class.  Now: I can certainly implement different TECHNICAL implementations the LOGICAL MODEL.  But the model isn&#39;t changing."}], "answers": [{"comments": [{"owner": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "edited": false, "score": 0, "creation_date": 1497518641, "post_id": 44553492, "comment_id": 76116173, "body": "Thx VTT, trying...   IT WORKS!  But Q1: &quot;first columns removed&quot;--the name column of dumpbin&#39;s output is of the format &quot;string = otherstring&quot;.  LIB seems happy with just &quot;otherstring&quot;, and with &quot;string = otherstring&quot;.  But the link stage of the DLL build only works with &quot;string = otherstring&quot; so I assume that&#39;s correct--but can you confirm?  Q2: by &quot;link generated export library prog.lib into your application&quot; do you mean DLL, right?  Not application?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "reply_to_user": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "edited": false, "score": 1, "creation_date": 1497519096, "post_id": 44553492, "comment_id": 76116474, "body": "Q1:  for me dumpbin output contains 4 colums: <code>ordinal</code>, <code>hint</code>, <code>RVA</code>, <code>name</code>. Only <code>name</code> is relevant. Q2: it does not matter, you can link into dll and into exe."}], "tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 1, "last_activity_date": 1497519152, "last_edit_date": 1497519152, "creation_date": 1497469647, "answer_id": 44553492, "question_id": 44553033, "link": "https://stackoverflow.com/questions/44553033/dll-needs-symbols-a-class-from-the-app-it-will-link-to/44553492#44553492", "title": "DLL needs symbols (a class) from the app it will link to", "body": "<p>Invoking <code>dumpbin /exports</code> gives you a list of mangled names of exe exports. You need to create a module definition file (.def) containing these names:</p>\n\n<pre><code>EXPORTS\n   @d3d_some_fancy_mangedled_method_1\n   @d3d_some_fancy_mangedled_method_2\n   ...\n</code></pre>\n\n<p>Notice that it is basically dumpbin output with first columns removed.\nThen you use <code>lib</code> tool to generate export library from module definition file:</p>\n\n<pre><code>LIB /DEF:prog.def /NAME:prog.exe /MACHINE:x86\n</code></pre>\n\n<p>Finally you link generated export library <code>prog.lib</code> into your application. <code>/MACHINE</code> option should match to your executable. Notice that you don't need to link or anyhow use program executable to link it, only export library is used.</p>\n"}], "owner": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 44553492, "answer_count": 1, "score": 0, "last_activity_date": 1497519152, "creation_date": 1497468017, "question_id": 44553033, "link": "https://stackoverflow.com/questions/44553033/dll-needs-symbols-a-class-from-the-app-it-will-link-to", "title": "DLL needs symbols (a class) from the app it will link to", "body": "<p>I cannot get a DLL to link, that needs a class exported from the app this DLL will be used with.  Visual Studio 2008, Windows 7.</p>\n\n<p>I had a small sample DLL compiling (the default MSFT DLL project actually), and the app can use <code>LoadLibrary()</code> and <code>GetProcAddress()</code> on it correctly.  I'm experienced with dllimport/dllexport. Using <code>dumpbin /exports</code> was critical to discover the mangled names to use with <code>GetProcAddress()</code> (MSFT's default empty DLL includes a sample function without <code>extern \"C\"</code>) but this is a solved problem.</p>\n\n<p>The next step was to have the app export a class that the DLL will need to subclass.  I do the dllimport/dllexport <code>#define</code>'s in the reverse sense from usual: a special symbol when the app is compiled tags the class with dllexport and non-app code (such as the DLL) using that header, without the special symbol, gets a dllimport spec.  <code>dumpbin /exports</code> on the .exe file shows exactly this class's (mangled) symbols being exported, and no others, as expected.</p>\n\n<p>The next step was to have the DLL include the header and create an object of the exported object's type (as a baby-step towards actually subclassing it).  Compiles fine, but linker shows error:</p>\n\n<pre><code>DynTest.obj : error LNK2019: unresolved external symbol \"public: __thiscall Test::Test(class Toast*,double)\" (??0Test@@QAE@PAVToast@@N@Z) referenced in function \"public: __thiscall CDynTest::CDynTest(void)\" (??0CDynTest@@QAE@XZ)\n</code></pre>\n\n<p>OK, that didn't surprise me, as I know on WIN32 I need to supply DLL's at link time to make a DLL, unlike my usual Unix.  Since Windows seems to treat DLLs and executables a bit similarly, I tried adding the .exe at Properties->Configuration Properties->Linker->Input->Additional Dependencies.  That gets an error that looks like <code>LINK.EXE</code> didn't auto-detect that it was being given an .exe:</p>\n\n<pre><code>T:\\mypath\\MyBinary.exe : fatal error LNK1107: invalid or corrupt file: cannot read at 0x348\n</code></pre>\n\n<p>I then tried adding instead the object file that defines this class... That seems to be understood by the linker, and is probably successfully satisfying the DLL's need to link, but now shows a myriad of other symbols this file depends upon.</p>\n\n<p>So I've considered refactoring the app such that most of it is in a DLL or LIB, just so I can supply that as an \"Additional Dependencies\" to the DLL I'm actually worried about.  But this seems to be draconian.  Is that my only option?</p>\n"}, {"tags": ["c++", "gnuradio"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8162416, "user_type": "registered", "profile_image": "https://graph.facebook.com/1595391130473289/picture?type=large", "display_name": "Corentin Bresteau", "link": "https://stackoverflow.com/users/8162416/corentin-bresteau"}, "edited": false, "score": 0, "creation_date": 1497535162, "post_id": 44556624, "comment_id": 76127631, "body": "Thanks for your answer ! These warnings were not displayed in my compiler..   I just fixed the two first errors.   However, how can i control the noutput_items?   If i add somethng like   if (noutput_items&lt;(162))         return 0;  (162 is the length of the message i wish to write)  at the begining of the code, will it allow the work function to process entirely?   Thx in advance"}, {"owner": {"reputation": 20339, "user_id": 99692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7aee58de3a50c13e688140bc06d60225?s=128&d=identicon&r=PG", "display_name": "Kevin Reid", "link": "https://stackoverflow.com/users/99692/kevin-reid"}, "reply_to_user": {"reputation": 21, "user_id": 8162416, "user_type": "registered", "profile_image": "https://graph.facebook.com/1595391130473289/picture?type=large", "display_name": "Corentin Bresteau", "link": "https://stackoverflow.com/users/8162416/corentin-bresteau"}, "edited": false, "score": 0, "creation_date": 1497535723, "post_id": 44556624, "comment_id": 76128095, "body": "@CorentinBresteau It <i>might</i> work by accident, but as I already said, your work function must be able to produce some items and save the rest for later. You would usually do this by not reading the entire file at once."}, {"owner": {"reputation": 21, "user_id": 8162416, "user_type": "registered", "profile_image": "https://graph.facebook.com/1595391130473289/picture?type=large", "display_name": "Corentin Bresteau", "link": "https://stackoverflow.com/users/8162416/corentin-bresteau"}, "edited": false, "score": 0, "creation_date": 1497536173, "post_id": 44556624, "comment_id": 76128438, "body": "The file i am trying to read will always be very small.  I could read the length of the &#39;noutput&#39;, then read the same number of characters in the file and finally send the result after conversion?"}, {"owner": {"reputation": 20339, "user_id": 99692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7aee58de3a50c13e688140bc06d60225?s=128&d=identicon&r=PG", "display_name": "Kevin Reid", "link": "https://stackoverflow.com/users/99692/kevin-reid"}, "reply_to_user": {"reputation": 21, "user_id": 8162416, "user_type": "registered", "profile_image": "https://graph.facebook.com/1595391130473289/picture?type=large", "display_name": "Corentin Bresteau", "link": "https://stackoverflow.com/users/8162416/corentin-bresteau"}, "edited": false, "score": 0, "creation_date": 1497538210, "post_id": 44556624, "comment_id": 76130015, "body": "@CorentinBresteau If you are only sending a short message, you don&#39;t need to make a custom block. Just read the file, convert it, and put the data into a <code>gr::blocks::vector_source_b</code>."}], "tags": [], "owner": {"reputation": 20339, "user_id": 99692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7aee58de3a50c13e688140bc06d60225?s=128&d=identicon&r=PG", "display_name": "Kevin Reid", "link": "https://stackoverflow.com/users/99692/kevin-reid"}, "is_accepted": false, "score": 2, "last_activity_date": 1497486004, "creation_date": 1497486004, "answer_id": 44556624, "question_id": 44552907, "link": "https://stackoverflow.com/questions/44552907/gnu-radio-work-looping-and-stopping/44556624#44556624", "title": "Gnu_radio, Work looping and stopping", "body": "<p>There are <em>many</em> things wrong with your code. It is very confused.</p>\n\n<ul>\n<li>You use <code>c</code> as a count of characters in the file. Then you interpret it as a character with <code>toupper[c]</code> and ignore the hex character you just read.</li>\n<li>Your hex conversion <code>switch</code> statement has no <code>break</code>s and will therefore always result in <code>conv = 15</code>.</li>\n<li>Your work function must write <em>no more than</em> <code>noutput_items</code>, and save the rest for later. Instead it is writing as many as it wants, possibly overflowing the provided buffer.</li>\n</ul>\n\n<p>Given the mess here, I strongly recommend that you <em>work on smaller problems first</em> and get a stronger grasp of the language. Get your converter from hex working with just printing the results. Make a source block that doesn't read a file.</p>\n\n<p>Also, turn on your C++ compiler's warnings <em>and listen to them.</em> It would likely have told you that your switch statement is broken.</p>\n"}], "owner": {"reputation": 21, "user_id": 8162416, "user_type": "registered", "profile_image": "https://graph.facebook.com/1595391130473289/picture?type=large", "display_name": "Corentin Bresteau", "link": "https://stackoverflow.com/users/8162416/corentin-bresteau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1497547765, "creation_date": 1497467586, "last_edit_date": 1497535229, "question_id": 44552907, "link": "https://stackoverflow.com/questions/44552907/gnu-radio-work-looping-and-stopping", "title": "Gnu_radio, Work looping and stopping", "body": "<p>I'm begining with gnuradio, </p>\n\n<p>I'm trying to create a custom block. My goal is to read hex data from a txt file and send them in binary with a preamble.</p>\n\n<p>I tried with the following code, but the work is sometimes exiting before the end, sometimes looping... \nIt never reaches the conversion part. I suspect there is something wrong with my noutput somewhere. </p>\n\n<p>Thanks in advance for all your help ! :) </p>\n\n<pre><code>#ifdef HAVE_CONFIG_H\n#include \"config.h\"\n#endif\n\n#include &lt;gnuradio/io_signature.h&gt;\n#include \"acars_gen_impl.h\"\n\nnamespace gr {\n  namespace Acars_send {\n\n    acars_gen::sptr\n    acars_gen::make(char* file)\n    {\n      return gnuradio::get_initial_sptr\n        (new acars_gen_impl(file));\n    }\n\n    /*\n     * The private constructor\n     */\n    acars_gen_impl::acars_gen_impl(char* file)\n      : gr::sync_block(\"acars_gen\",\n      gr::io_signature::make(0, 0, 0),\n        gr::io_signature::make(1, 1, sizeof(char))),\n        preamble_sync{0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x2B,0x2A,0x16,0x16}\n        /*preamble_sync_bit{11111111,11111111,11111111,11111111,11111111,11111111,11111111,11111111,11111111,11111111,11111111,\n      11111111,11111111,11111111,11111111,11111111,00101011,00101010,00010110,00010110}*/\n{\n\n\n  myfile.open(file);\n  int ret = myfile.is_open();\n  printf(\"Fichier ouvert %d\\n\",ret);\n}\n    /*\n     * Our virtual destructor.\n     */\n    acars_gen_impl::~acars_gen_impl()\n    {\n      myfile.close();\n      printf(\"Fichier ferm\u00e9\\n\");\n    }\n\n\n    /* -------------\n     *  W O R K\n     -------------*/\n\n    int\n    acars_gen_impl::work (int noutput_items,\n        gr_vector_const_void_star &amp;input_items,\n        gr_vector_void_star &amp;output_items)\n    {\n      printf(\"Debut WORK\\n\");\n\n      char *out = (char *) output_items[0];\n\n      for(int i =0; i &lt; noutput_items; i++){\n      out[i] = 0;\n      consume_each (noutput_items);\n      }\n\n    /*if (noutput_items&lt;(162))\n        return 0;*/\n //Compte du nombre de charact\u00e8res du fichier\n\n    char current_char;\n    int c = 0;\n    if (myfile.is_open()){\n\n      printf(\"Fichier BIEN ouvert\\n\");\n      while(myfile.get(current_char)){\n        printf(\"%c\\n\",current_char);\n        if(current_char == EOF)\n          {\n            break;\n          }\n          c++;\n          printf(\"Taille : %d\\n\",c);\n\n          }\n        }\n\n    myfile.clear();\n    myfile.seekg(0, std::ios::beg);\n\n    unsigned char message[c]={0};\n\n    std::string line;\n    getline (myfile,line);\n    std::cout&lt;&lt;line;\n    if (line.find(\"0x\")==0) {\n      printf(\"Trouv\u00e9!\\n\");\n\n    int i = 0;\n\n    for ( std::string::iterator it=(line.begin()+2); it!=line.end(); ++it){\n        unsigned char hex = *it;\n        unsigned char conv;\n  printf(\"Conversion en cours %c\\n\",c);\n        switch(toupper(c))\n    {\n\n        case '0': conv = 0;\n        case '1': conv = 1;\n        case '2': conv = 2;\n        case '3': conv = 3;\n        case '4': conv = 4;\n        case '5': conv = 5;\n        case '6': conv = 6;\n        case '7': conv = 7;\n        case '8': conv = 8;\n        case '9': conv = 9;\n        case 'A': conv = 10;\n        case 'B': conv = 11;\n        case 'C': conv = 12;\n        case 'D': conv = 13;\n        case 'E': conv = 14;\n        case 'F': conv = 15;\n    }\n\n\n    message[i/2]= message[i/2] | (conv&lt;&lt; (4*(1-i%2)));\n    ++i;\n\n    }\n  }\n\n  for(int i=0 ; i &lt; c ; i ++ ){\n        std::cout &lt;&lt; message[i];\n  }\n\n  memcpy(out,preamble_sync,20*sizeof(char));\n  memcpy(out+20,message,c*sizeof(char));\n  return noutput_items;\n  return -1;\n\n    }\n\n  } /* namespace Acars_send */\n} /* namespace gr */\n</code></pre>\n"}, {"tags": ["c++", "parallel-processing", "openmp"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1497467509, "post_id": 44552851, "comment_id": 76096222, "body": "Apart from anything else, the compiler may well have optimised that &quot;delay&quot; away. If you want a proper delay use something like <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/thread/sleep_for</a>"}, {"owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "edited": false, "score": 0, "creation_date": 1497470780, "post_id": 44552851, "comment_id": 76097945, "body": "Also the code seems to add the supposedly delay for i == 0 and not i == 1."}], "answers": [{"comments": [{"owner": {"reputation": 64, "user_id": 3518406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5921623bacc2982ded4ab467f986f89b?s=128&d=identicon&r=PG&f=1", "display_name": "Clark Lee", "link": "https://stackoverflow.com/users/3518406/clark-lee"}, "edited": false, "score": 0, "creation_date": 1497478456, "post_id": 44555363, "comment_id": 76101601, "body": "I&#39;ve been developing openmp application for over 5 years. but I&#39;m quite a new guy on answering question here. If I&#39;m not giving what you want explicitly, pls comment."}], "tags": [], "owner": {"reputation": 64, "user_id": 3518406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5921623bacc2982ded4ab467f986f89b?s=128&d=identicon&r=PG&f=1", "display_name": "Clark Lee", "link": "https://stackoverflow.com/users/3518406/clark-lee"}, "is_accepted": true, "score": 2, "last_activity_date": 1497477412, "creation_date": 1497477412, "answer_id": 44555363, "question_id": 44552851, "link": "https://stackoverflow.com/questions/44552851/openmp-parallel-for-cout-order/44555363#44555363", "title": "OpenMP parallel for cout order", "body": "<p>It's more likely you're misunderstood <code>parallel for</code>.</p>\n\n<p>In most case when you don't set <code>schedule</code> for <code>omp for</code>,\nevery thread will execute one of loops. </p>\n\n<p>so 1 is executed almost the same time with 0. </p>\n\n<p>if you want 1 be executed after 0. try add <code>schedule(static, 2)</code>.</p>\n"}], "owner": {"reputation": 2604, "user_id": 3748807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50a746fb61a10183369d6f2f5d896460?s=128&d=identicon&r=PG", "display_name": "YLJ", "link": "https://stackoverflow.com/users/3748807/ylj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 44555363, "answer_count": 1, "score": 0, "last_activity_date": 1497481131, "creation_date": 1497467398, "last_edit_date": 1497481131, "question_id": 44552851, "link": "https://stackoverflow.com/questions/44552851/openmp-parallel-for-cout-order", "title": "OpenMP parallel for cout order", "body": "<p>I'm quite new to openmp and encounter such question.</p>\n\n<pre><code>#pragma omp parallel for\nfor (int i = 0; i &lt; 10; ++i) {\n    if (i == 0)\n        for (int j = 0; j &lt; 100000000; ++j);   // Create a delay for i = 0.\n    cout &lt;&lt; i &lt;&lt; flush;\n}\n</code></pre>\n\n<p>I expected <code>0</code> should be the last integer printed out since there's a delay. However, the actual output is in total random order.</p>\n\n<p>Is this caused by some kind of compiler optimization? Or do I misunderstood <code>parallel for</code>? </p>\n\n<p>I have version</p>\n\n<pre><code>#define _OPENMP 201307\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1497467661, "post_id": 44552835, "comment_id": 76096298, "body": "Aren&#39;t you accumulating your results in <code>answer</code>? I don&#39;t understand why  you would need to call <code>splice</code> on <code>lsi</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1497467747, "post_id": 44552835, "comment_id": 76096328, "body": "Consider using <a href=\"http://en.cppreference.com/w/cpp/language/auto\" rel=\"nofollow noreferrer\"><code>auto</code></a> and <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">ranged based for loops</a> to greatly simplify your example. It will save you from having to write out iterator type names in the future."}, {"owner": {"reputation": 33, "user_id": 7166753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a326d59745b4ef13544b2f5677fff6?s=128&d=identicon&r=PG&f=1", "display_name": "\u0422\u0430\u043a\u0438\u0435 \u0434\u0435\u043b\u0430", "link": "https://stackoverflow.com/users/7166753/%d0%a2%d0%b0%d0%ba%d0%b8%d0%b5-%d0%b4%d0%b5%d0%bb%d0%b0"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1497470137, "post_id": 44552835, "comment_id": 76097607, "body": "&gt;  I don&#39;t understand why you would need to call splice on lsi   If the splice didn&#39;t transform <code>lsi</code>, I could do this:   \tnew_lsi.splice (new_lsi.begin(), lsi, it_lsi);  \t Unfortunately, it transform <code>lsi</code>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1497470311, "post_id": 44552835, "comment_id": 76097706, "body": "<a href=\"http://en.cppreference.com/w/cpp/container/set/insert\" rel=\"nofollow noreferrer\"><code>std::set::insert</code></a> can be used to insert a range of elements from another container. <code>std::set</code> also doesn&#39;t have a splice method. Perhaps you meant <a href=\"http://en.cppreference.com/w/cpp/container/set/merge\" rel=\"nofollow noreferrer\"><code>std::set::merge</code></a>?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1497470456, "post_id": 44552835, "comment_id": 76097772, "body": "<code>list&lt;set&lt;int&gt;&gt; new_lsi{lsi.begin(), it_lsi}; new_lsi.push_back(A); new_lsi.push_back(B); new_lsi.insert(new_lsi.end(), std::next(it_lsi), lsi.end());</code>"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7166753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a326d59745b4ef13544b2f5677fff6?s=128&d=identicon&r=PG&f=1", "display_name": "\u0422\u0430\u043a\u0438\u0435 \u0434\u0435\u043b\u0430", "link": "https://stackoverflow.com/users/7166753/%d0%a2%d0%b0%d0%ba%d0%b8%d0%b5-%d0%b4%d0%b5%d0%bb%d0%b0"}, "edited": false, "score": 0, "creation_date": 1497473071, "post_id": 44554016, "comment_id": 76099099, "body": "Thank you, great."}], "tags": [], "owner": {"reputation": 8279, "user_id": 4759200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XqFYM.jpg?s=128&g=1", "display_name": "DAle", "link": "https://stackoverflow.com/users/4759200/dale"}, "is_accepted": true, "score": 1, "last_activity_date": 1497472439, "last_edit_date": 1497472439, "creation_date": 1497471496, "answer_id": 44554016, "question_id": 44552835, "link": "https://stackoverflow.com/questions/44552835/stdlist-transform-and-copy/44554016#44554016", "title": "std::list transform and copy", "body": "<pre><code>list&lt;set&lt;int&gt;&gt; lsi {{1, 2}, {3}, {4, 5}}; \n\nvector&lt;list&lt;set&lt;int&gt;&gt;&gt; answer;\nfor (auto it_lsi = lsi.begin(); it_lsi != lsi.end(); ++it_lsi)\n{\n    if (it_lsi-&gt;size() &gt; 1)\n        for (int i : *it_lsi)\n        {\n            list&lt;set&lt;int&gt;&gt; res {lsi.begin(), it_lsi};\n            set&lt;int&gt; A = *it_lsi;\n            A.erase(i);\n            set&lt;int&gt; B {i};\n            res.push_back(A);\n            res.push_back(B);\n            res.insert(res.end(), next(it_lsi), lsi.end());\n            answer.push_back(res);\n        }\n}   \n</code></pre>\n\n<p>Runnable code with simple output: <a href=\"http://ideone.com/y2x35Q\" rel=\"nofollow noreferrer\">http://ideone.com/y2x35Q</a></p>\n"}], "owner": {"reputation": 33, "user_id": 7166753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13a326d59745b4ef13544b2f5677fff6?s=128&d=identicon&r=PG&f=1", "display_name": "\u0422\u0430\u043a\u0438\u0435 \u0434\u0435\u043b\u0430", "link": "https://stackoverflow.com/users/7166753/%d0%a2%d0%b0%d0%ba%d0%b8%d0%b5-%d0%b4%d0%b5%d0%bb%d0%b0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 44554016, "answer_count": 1, "score": 3, "last_activity_date": 1497473764, "creation_date": 1497467341, "last_edit_date": 1497473764, "question_id": 44552835, "link": "https://stackoverflow.com/questions/44552835/stdlist-transform-and-copy", "title": "std::list transform and copy", "body": "<p>I need make the following algorithm:</p>\n\n<pre><code>(Pseudocode)\nlsi = (set_1, set_2, ..., set_n) # list of sets.\nanswer = [] // vector of lists of sets\nFor all set_i in lsi:\n   if length(set_i) &gt; 1:\n        for all x in set_i:\n            A = set_i.discard(x)\n            B = {x}\n            answer.append( (set_1, ..., set_{i-1}, A, B, set_{i+1}, ..., set_n) )\n</code></pre>\n\n<p>For example, let lsi = ({1,2},{3}, {4,5}).</p>\n\n<p>Then ansver = [({1},{2},{3},{4,5}), ({2},{1},{3},{4,5}), ({1,2},{3},{4},{5}), ({1,2},{3},{5},{4})].</p>\n\n<p>I'm trying to do it (C++), but I can't.\nMy code:</p>\n\n<pre><code>list&lt;set&lt;int&gt;&gt; lsi {{1, 2}, {3}, {4, 5}}; \n\n// Algorithm\nvector&lt;list&lt;set&lt;int&gt;&gt;&gt; answer;\nfor (list&lt;set&lt;int&gt;&gt;::iterator it_lsi = lsi.begin(); it_lsi != lsi.end(); it_lsi++)\n{\n    for (set&lt;int&gt;::iterator it_si = (*it_lsi).begin(); it_si != (*it_lsi).end(); it_lsi++)\n    {\n        // set_i = *it_lsi, \n        // x = *it_si.\n        // Creating sets A and B.\n        set&lt;int&gt; A = *it_lsi;\n        A.erase(*it_si); // A = set_i.discard(x)\n        set&lt;int&gt; B;\n        B.insert(*it_si); // B = {x}\n        // Creating list which have these sets.\n        list&lt;set&lt;int&gt;&gt; new_lsi;\n        new_lsi.push_back(s1);\n        new_lsi.push_back(s2);\n        /*\n        And I don't know what should I do :-(\n        Object lsi must be immutable (because it connect with generator). \n        Splice transform it. Other ways I don't know.\n        */\n    }\n}\n</code></pre>\n\n<p>Could you help me?\nThank you.</p>\n"}, {"tags": ["c++", "templates", "inheritance", "gcc", "crtp"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1497467929, "post_id": 44552808, "comment_id": 76096425, "body": "Always helpful to include the actual error message in your post"}, {"owner": {"reputation": 2151, "user_id": 5902079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df4530b8e41c66ac12d17f96cd70c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Gordon", "link": "https://stackoverflow.com/users/5902079/dmitry-gordon"}, "edited": false, "score": 0, "creation_date": 1497470089, "post_id": 44552808, "comment_id": 76097576, "body": "I suppose that when compiler tries to instantiate Derived class it sees that it is derived from Base&lt;Derived&gt; and instatiates it. But at this moment Derived isn&#39;t fully instantiated so compiler doesn&#39;t know what the type Derived::Foo is (the std::set can&#39;t be instantiated with incomplete template parameter)."}, {"owner": {"reputation": 7515, "user_id": 970171, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/56d878eca2d65a35dc2b51434632541e?s=128&d=identicon&r=PG", "display_name": "Palace Chan", "link": "https://stackoverflow.com/users/970171/palace-chan"}, "reply_to_user": {"reputation": 2151, "user_id": 5902079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df4530b8e41c66ac12d17f96cd70c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Gordon", "link": "https://stackoverflow.com/users/5902079/dmitry-gordon"}, "edited": false, "score": 0, "creation_date": 1497470478, "post_id": 44552808, "comment_id": 76097784, "body": "@DmitryGordon is there a simple way around this? I fear I might have to make the set be of ints..."}, {"owner": {"reputation": 7515, "user_id": 970171, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/56d878eca2d65a35dc2b51434632541e?s=128&d=identicon&r=PG", "display_name": "Palace Chan", "link": "https://stackoverflow.com/users/970171/palace-chan"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1497470623, "post_id": 44552808, "comment_id": 76097860, "body": "@CaptainObvlious added it"}, {"owner": {"reputation": 7027, "user_id": 1735922, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a82aaa47327bba0f9657c32ce20c8914?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1735922/john"}, "edited": false, "score": 0, "creation_date": 1497472788, "post_id": 44552808, "comment_id": 76098932, "body": "Don&#39;t use the same name for a template parameter and an external type.  Are you sure you&#39;re showing us the whole code?"}, {"owner": {"reputation": 2151, "user_id": 5902079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df4530b8e41c66ac12d17f96cd70c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Gordon", "link": "https://stackoverflow.com/users/5902079/dmitry-gordon"}, "edited": false, "score": 0, "creation_date": 1497507193, "post_id": 44552808, "comment_id": 76109094, "body": "@Palace Chan I see only one solution - make the enum template parameter, same as Yatima suggests"}], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 7243597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i3Utc.jpg?s=128&g=1", "display_name": "Yatima", "link": "https://stackoverflow.com/users/7243597/yatima"}, "is_accepted": true, "score": 0, "last_activity_date": 1497479529, "creation_date": 1497479529, "answer_id": 44555741, "question_id": 44552808, "link": "https://stackoverflow.com/questions/44552808/how-can-i-manage-a-set-of-derived-class-enums-without-needing-to-instantiate-the/44555741#44555741", "title": "How can i manage a set of derived class enums without needing to instantiate the derived class?", "body": "<p>To compile this example compiler will need a forward declaration for nested type which does not seems to be possible (see <a href=\"https://stackoverflow.com/questions/1021793/how-do-i-forward-declare-an-inner-class\">How do I forward declare an inner class?</a>) so simplest workaround might be to make <code>Base</code> class to take two templates and move <code>Foo</code> out of your class definition:</p>\n\n<pre><code>#include &lt;set&gt;\n\ntemplate &lt;class T, typename F&gt; struct Base\n{\n    const std::set&lt;F&gt; types() const { return theSet; }\n    std::set&lt;F&gt; theSet;\n};\n\nenum class Foo { X,Y,Z };\n\nstruct Derived : Base&lt;Derived, Foo&gt;\n{\n};\n\nint main(int argc, char** argv)\n{\n    Derived x; return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 7515, "user_id": 970171, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/56d878eca2d65a35dc2b51434632541e?s=128&d=identicon&r=PG", "display_name": "Palace Chan", "link": "https://stackoverflow.com/users/970171/palace-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 44555741, "answer_count": 1, "score": 0, "last_activity_date": 1497479529, "creation_date": 1497467268, "last_edit_date": 1497470613, "question_id": 44552808, "link": "https://stackoverflow.com/questions/44552808/how-can-i-manage-a-set-of-derived-class-enums-without-needing-to-instantiate-the", "title": "How can i manage a set of derived class enums without needing to instantiate the derived class?", "body": "<p>I'm trying to understand why the following code snippet will not compile:</p>\n\n<pre><code>template &lt;class Derived&gt; struct Base {\n    const std::set&lt;typename Derived::Foo&gt; types() const { return theSet; }\n    std::set&lt;typename Derived::Foo&gt; theSet;\n};\n\nstruct Derived : Base&lt;Derived&gt; {\n    enum Foo { X,Y,Z };\n};\n\nint main(int argc, char** argv) { Derived x; return 0; }\n</code></pre>\n\n<p>I get an error saying that the the line with <code>types() const</code> is an invalid use of incomplete <code>struct Derived</code> - but all it needs to know is that the type of the set is a <code>Foo</code> enum so I'm not sure I understand the error or if there's a way around it that doesn't require me to make that set of type <code>int</code>..</p>\n\n<p>The full error from the compiler says:</p>\n\n<pre><code>error: invalid use of imcomplete type 'struct Derived'\n    const std::set&lt;typename Derived::Foo&gt; types() const {\nerror: forward declaration of 'struct Derived'\nstruct Derived : Base&lt;Derived&gt;\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "thread-safety", "smart-pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1497467149, "post_id": 44552738, "comment_id": 76096050, "body": "There is a data race in your code.  The compiler is not going to give you an error though, it simply produces undefined code."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1497499564, "post_id": 44552738, "comment_id": 76106476, "body": "You have data races <b>and</b> race conditions, they are different. However, <code>shared_ptr</code> in your example has none, it&#39;s all on <code>der</code>"}, {"owner": {"reputation": 153, "user_id": 6533105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/g2iyg.png?s=128&g=1", "display_name": "Yurii Komarnytskyi", "link": "https://stackoverflow.com/users/6533105/yurii-komarnytskyi"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1497511201, "post_id": 44552738, "comment_id": 76111241, "body": "@Passer By but what about <code>operator-&gt;</code> in <code>std::shared_ptr</code> over there can be race condition. As I understand to avoid it I should use <code>std::atomic_load</code> and get copy of the <code>std::shated_ptr</code> to use in another <code>std::thread</code>."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1497511324, "post_id": 44552738, "comment_id": 76111313, "body": "You copied your <code>shared_ptr</code>s into your lambdas, they can&#39;t be a data race/race condition."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1497515793, "post_id": 44552738, "comment_id": 76114196, "body": "To be clear, the control block of <code>shared_ptr</code> is designed to be functional in multithreaded environments, Herb Sutter even gave a talk including some of it once."}], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 3, "last_activity_date": 1497468919, "creation_date": 1497468919, "answer_id": 44553285, "question_id": 44552738, "link": "https://stackoverflow.com/questions/44552738/race-condition-in-shared-ptr-doesnt-happen/44553285#44553285", "title": "Race condition in shared_ptr doesn&#39;t happen", "body": "<p>Data races do not yield compilation failure; they yield undefined behavior. That behavior <em>could</em> be \"works fine\". Or \"appears to work fine but subtly breaks something 12 minutes later\". Or \"immediately fails.\"</p>\n\n<p>Just because code <em>appears</em> to work doesn't mean it actually does. This is more true for threading code than any other kind.</p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 5539398, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37076ca7b1a8a8a280b0e20268ecb02a?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa_G", "link": "https://stackoverflow.com/users/5539398/rafa-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1497977730, "creation_date": 1497977730, "answer_id": 44658983, "question_id": 44552738, "link": "https://stackoverflow.com/questions/44552738/race-condition-in-shared-ptr-doesnt-happen/44658983#44658983", "title": "Race condition in shared_ptr doesn&#39;t happen", "body": "<p>I would recommend you to use valgrind tool - helgrind.\nIt is very hard to find race conditions sometimes when debugging multi-threading programs.\nTo run this tool you need to have valgrind on your computer and run it using:</p>\n\n<pre><code>valgrind --tool=helgrind ./Your_Complied_File arg1 arg2 ...\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 6533105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/g2iyg.png?s=128&g=1", "display_name": "Yurii Komarnytskyi", "link": "https://stackoverflow.com/users/6533105/yurii-komarnytskyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "accepted_answer_id": 44553285, "answer_count": 2, "score": 0, "last_activity_date": 1497977730, "creation_date": 1497467026, "question_id": 44552738, "link": "https://stackoverflow.com/questions/44552738/race-condition-in-shared-ptr-doesnt-happen", "title": "Race condition in shared_ptr doesn&#39;t happen", "body": "<p>Why there is no any race condition in my code?\nDue to source here: <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/memory/shared_ptr</a> </p>\n\n<blockquote>\n  <p>If multiple threads of execution access the same shared_ptr without synchronization and any of those accesses uses a non-const member function of shared_ptr then a data race will occur;</p>\n</blockquote>\n\n<pre><code>class base\n{\npublic:\n    std::string val1;\n};\n\nclass der : public base\n{\npublic:\n    std::string val2;\n    int val3;\n    char val4;\n};\n\nint main()\n{\n    std::mutex mm;\n    std::shared_ptr&lt;der&gt; ms(new der());\n\n    std::thread t1 = std::thread([ms, &amp;mm]() {\n        while (1)\n        {\n        //std::lock_guard&lt;std::mutex&gt; lock(mm);\n\n            std::string some1 = ms-&gt;val2;\n            int some2 = ms-&gt;val3;\n            char some3 = ms-&gt;val4;\n            ms-&gt;val2 = \"1232324\";\n            ms-&gt;val3 = 1232324;\n            ms-&gt;val4 = '1';\n        }\n    });\n\n    std::thread t2 = std::thread([ms, &amp;mm]() {\n        while (1)\n        {\n            //std::lock_guard&lt;std::mutex&gt; lock(mm);\n\n            std::string some1 = ms-&gt;val2;\n            int some2 = ms-&gt;val3;\n            char some3 = ms-&gt;val4;\n            ms-&gt;val2 = \"123435\";\n            ms-&gt;val3 = 123435;\n            ms-&gt;val4 = '3';\n        }\n    });\n\n    std::shared_ptr&lt;base&gt; bms = ms;\n    std::thread t3 = std::thread([bms]() {\n        while (1)\n        {\n            bms-&gt;val1 = 434;\n        }\n    });\n\n    while (1)\n    {\n        std::this_thread::sleep_for(std::chrono::milliseconds(1));\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "command-line", "msbuild", "visual-studio-2017"], "comments": [{"owner": {"reputation": 32394, "user_id": 528724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b428b7a4d372791efff952dafecd5782?s=128&d=identicon&r=PG", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/528724/mahesh"}, "edited": false, "score": 0, "creation_date": 1497467190, "post_id": 44552647, "comment_id": 76096072, "body": "Are you sure you are buiding for <code>amd64</code> configuration when you are building from IDE ?"}, {"owner": {"reputation": 77196, "user_id": 784387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1acd8ef9d33b72c888c544378a59be2b?s=128&d=identicon&r=PG", "display_name": "Martin Ullrich", "link": "https://stackoverflow.com/users/784387/martin-ullrich"}, "edited": false, "score": 3, "creation_date": 1497467243, "post_id": 44552647, "comment_id": 76096098, "body": "&quot;Microsoft Visual Studio 14.0&quot; is vs 2015, are you sure you are using the correct version of the developer command prompt?"}], "answers": [{"comments": [{"owner": {"reputation": 1121, "user_id": 2150289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1256cfbd4bb053bad532320ad570f9a5?s=128&d=identicon&r=PG", "display_name": "maharvey67", "link": "https://stackoverflow.com/users/2150289/maharvey67"}, "edited": false, "score": 0, "creation_date": 1586380290, "post_id": 44553981, "comment_id": 108111452, "body": "Running vcvars64 did not solve it for me. I found that VCTargetsPath was set as a system variable. Removing that variable fixed the issue."}], "tags": [], "owner": {"reputation": 587, "user_id": 3882323, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/QOPcq.jpg?s=128&g=1", "display_name": "Jake Dluhy", "link": "https://stackoverflow.com/users/3882323/jake-dluhy"}, "is_accepted": true, "score": 3, "last_activity_date": 1497471379, "creation_date": 1497471379, "answer_id": 44553981, "question_id": 44552647, "link": "https://stackoverflow.com/questions/44552647/unable-to-run-msbuild-for-c-from-the-command-line-vs2017/44553981#44553981", "title": "Unable to run msbuild for C++ from the command line VS2017", "body": "<p>Thanks guys! I was following <a href=\"https://docs.microsoft.com/en-us/cpp/build/building-on-the-command-line\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/build/building-on-the-command-line</a> which says \"By default, these tools are installed in <em>drive</em>:\\Program Files (x86)\\Microsoft Visual Studio <em>version</em>\\VC\\bin.\". Obviously these docs are outdated... I was able to get it to work with the following commands</p>\n\n<pre><code>cd \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Auxiliary\\Build\"\nvcvars64\ncd \"C:\\Users\\me\\development\\MyProject\"\nmsbuild MyProject.sln\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8788635, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UilnJ.png?s=128&g=1", "display_name": "Sigurd", "link": "https://stackoverflow.com/users/8788635/sigurd"}, "is_accepted": false, "score": 0, "last_activity_date": 1528824659, "last_edit_date": 1528824659, "creation_date": 1519455881, "answer_id": 48960269, "question_id": 44552647, "link": "https://stackoverflow.com/questions/44552647/unable-to-run-msbuild-for-c-from-the-command-line-vs2017/48960269#48960269", "title": "Unable to run msbuild for C++ from the command line VS2017", "body": "<p>It says in the first part of the paragraph in the mentioned <a href=\"https://docs.microsoft.com/en-us/cpp/build/building-on-the-command-line\" rel=\"nofollow noreferrer\">article</a>:</p>\n\n<blockquote>\n  <p>In Visual Studio 2017, these are located in the VC\\Auxiliary\\Build subdirectory of the Visual Studio installation directory. In Visual Studio 2015, these are located in the VC, VC\\bin, or VC\\bin\\architectures subdirectories of the installation directory, where architectures is one of the native or cross compiler options. </p>\n</blockquote>\n\n<p>As you are using Visual Studio 2017, they should be in VC\\Auxiliary\\Build, like you found out.</p>\n\n<p>Another way to find the correct .bat files would be through the command prompt shortcuts mentioned in the same article. First locate them by expanding start->Visual Studio <em>Year</em>, right click and find their location. Then check the location they are pointing to.</p>\n"}], "owner": {"reputation": 587, "user_id": 3882323, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/QOPcq.jpg?s=128&g=1", "display_name": "Jake Dluhy", "link": "https://stackoverflow.com/users/3882323/jake-dluhy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2757, "favorite_count": 2, "accepted_answer_id": 44553981, "answer_count": 2, "score": 1, "last_activity_date": 1528824659, "creation_date": 1497466732, "question_id": 44552647, "link": "https://stackoverflow.com/questions/44552647/unable-to-run-msbuild-for-c-from-the-command-line-vs2017", "title": "Unable to run msbuild for C++ from the command line VS2017", "body": "<p>I have a project that has only ever lived in Visual Studio 2017. It's a C++ dll, and up until this point I've had no problem building it from within the Visual Studio GUI. However now I'm trying to set up automation that will build the project on the command line and upload the output files to a desired location. Here's what I've tried so far (in a brand new Command Prompt):</p>\n\n<pre><code>cd C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC&gt;\nvcvarsall amd64\ncd C:\\Users\\me\\development\\MyProject\nmsbuild MyProject.slnl (or msbuild MyProject\\MyProject.vcxproj)\n</code></pre>\n\n<p>And this gives me the error output</p>\n\n<pre><code>C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\v140\\Microsoft.Cpp.Platform.targets(57,5): \nerror MSB8020: The build tools for v141 (Platform Toolset = 'v141') cannot be found. To build\nusing the v141 build tools, please install v141 build tools.  Alternatively, you\nmay upgrade to the current Visual Studio tools by selecting the Project menu or right-cli\nck the solution, and then selecting \"Retarget solution\". \n[C:\\Users\\dev\\development\\MetaReme\\MetaReme\\MetaReme.vcxproj]\n</code></pre>\n\n<p>Let me reiterate that I've been successfully building within Visual Studio 2017 targeting the v141 toolset, it's just on the command line I'm having trouble. Within my Visual Studio Installer application I have the VC++ 2017 v141 toolset checked. I've looked on the filesystem and within <code>C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\</code> there is no <code>v141</code> folder.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 4, "creation_date": 1497466028, "post_id": 44552380, "comment_id": 76095398, "body": "It&#39;s not entirely clear what you&#39;re asking, are you able to produce a code <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to illustrate your question?"}, {"owner": {"reputation": 639, "user_id": 1671661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8db94e53e65d244d49d87e506907a6?s=128&d=identicon&r=PG", "display_name": "KonstantinL", "link": "https://stackoverflow.com/users/1671661/konstantinl"}, "edited": false, "score": 3, "creation_date": 1497467059, "post_id": 44552380, "comment_id": 76096003, "body": "&quot;Is it good practice to modify the private members by using the friend keyword?&quot; - No."}, {"owner": {"reputation": 639, "user_id": 1671661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc8db94e53e65d244d49d87e506907a6?s=128&d=identicon&r=PG", "display_name": "KonstantinL", "link": "https://stackoverflow.com/users/1671661/konstantinl"}, "edited": false, "score": 1, "creation_date": 1497467129, "post_id": 44552380, "comment_id": 76096039, "body": "&quot;I can remove the const on the returned pointer&quot; - this is even worse than &quot;friend&quot;."}, {"owner": {"reputation": 2946, "user_id": 1254880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88115806b7eaa034f2040704798fd481?s=128&d=identicon&r=PG", "display_name": "Tarc", "link": "https://stackoverflow.com/users/1254880/tarc"}, "edited": false, "score": 0, "creation_date": 1497467202, "post_id": 44552380, "comment_id": 76096078, "body": "It&#39;s almost impossible to give a general advice in this way. Such concerns you&#39;re having only make sense relative to concrete use cases."}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1497467289, "post_id": 44552380, "comment_id": 76096117, "body": "it is not clear from your class who owns the instances, u should use a vector of smart pointers."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1497467540, "post_id": 44552380, "comment_id": 76096238, "body": "&quot;Or, I can remove the const on the returned pointer.&quot; you cannot modify an object through a const pointer, so removing <code>const</code> is necessitated. &quot;Or, I can make class <code>A</code> be a friend of class <code>B</code>, then it can modify the private members of <code>B</code> to avoid duplication of code.&quot; yeah, if you only want to be able to modify members from <code>A</code> then that&#39;s fine, and not really concretely bad practice. Your real intention is still not clear, but honestly, I imagine you&#39;re overthinking and getting confused. I could be wrong but I reckon, <code>B</code> s members shouldn&#39;t be <code>private</code> at all, but <code>public</code>."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1497468937, "last_edit_date": 1497468937, "creation_date": 1497467103, "answer_id": 44552763, "question_id": 44552380, "link": "https://stackoverflow.com/questions/44552380/modifying-member-objects-inside-class-c/44552763#44552763", "title": "Modifying member objects inside class c++", "body": "<p>Constness and friendship are two completely different and unrelated things.</p>\n\n<p>It doesn't matter if <code>A</code> is a friend of <code>B</code> or not.  That is simply a design choice on your part whether you want to encapsulate access to the <code>B</code> members inside of <code>A</code>, or if you want to allow the caller to access <code>B</code> getters/setters directly.</p>\n\n<p>As far as modifying an object is concerned, any getters should be declared as <code>const</code> so they can be called on <code>const</code> and non-<code>const</code> objects alike (since they don't modify the object they are reading from), but if you want to be able to <em>modify</em> the members of an object then you must access the object via a non-<code>const</code> pointer (or non-<code>const</code> reference):</p>\n\n<pre><code>class B;\n\nclass A {\nprivate:\n    std::vector&lt;B*&gt; m_list;\n\npublic:\n    // this can be called on a non-const A, and\n    // the B members can be read and modified...\n    B* getB(int index) {\n        return m_list[index];\n    }\n\n    // this can be called only on a const A, and\n    // the B members can be read but not modified...\n    const B* getB(int index) const {\n        return m_list[index];\n    }\n\n    /* optional:\n\n    int getB_A(int index) const {\n        return getB(index)-&gt;getA();\n    }\n\n    float getB_B(int index) const {\n        return getB(index)-&gt;getB();\n    }\n\n    long getC(int index) const {\n        return getB(index)-&gt;getC();\n    }\n\n    void setB_A(int index, int value) {\n        getB(index)-&gt;setA(value);\n    }\n\n    void setB_B(int index, float value) {\n        getB(index)-&gt;setB(value);\n    }\n\n    void setB_C(int index, long value) {\n        getB(index)-&gt;setC(value);\n    }\n\n    */\n};\n\nclass B {\nprivate:\n    int a;\n    float b;\n    long c;\n\npublic:\n    int getA() const {\n        return a;\n    }\n\n    float getB() const {\n        return b;\n    }\n\n    long getC() const {\n        return c;\n    }\n\n    void setA(int value) {\n        a = value;\n    }\n\n    void setB(float value) {\n        b = value;\n    }\n\n    void setC(long val) {\n        c = val;\n    }\n};\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>class B;\n\nclass A {\nprivate:\n    std::vector&lt;B*&gt; m_list;\n\npublic:\n    // this can be called on a non-const A, and\n    // the B members can be read and modified...\n    B* getB(int index) {\n        return m_list[index];\n    }\n\n    // this can be called only on a const A, and\n    // the B members can be read but not modified...\n    const B* getB(int index) const {\n        return m_list[index];\n    }\n\n    int getB_A(int index) const {\n        return getB(index)-&gt;a;\n    }\n\n    float getB_B(int index) const {\n        return getB(index)-&gt;b;\n    }\n\n    long getC(int index) const {\n        return getB(index)-&gt;c;\n    }\n\n    void setB_A(int index, int value) {\n        getB(index)-&gt;a = value;\n    }\n\n    void setB_B(int index, float value) {\n        getB(index)-&gt;b = value;\n    }\n\n    void setB_C(int index, long value) {\n        getB(index)-&gt;c = value;\n    }\n};\n\nclass B {\nprivate:\n    int a;\n    float b;\n    long c;\n\n    friend class A;\n};\n</code></pre>\n"}], "owner": {"reputation": 2273, "user_id": 1737197, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8cf36a1db2987797cfe1be2cb75fa510?s=128&d=identicon&r=PG", "display_name": "debonair", "link": "https://stackoverflow.com/users/1737197/debonair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 44552763, "answer_count": 1, "score": 0, "last_activity_date": 1497468937, "creation_date": 1497465822, "last_edit_date": 1497466949, "question_id": 44552380, "link": "https://stackoverflow.com/questions/44552380/modifying-member-objects-inside-class-c", "title": "Modifying member objects inside class c++", "body": "<p>I have a class <code>A</code> with a member that is a <code>std::vector</code> of pointers to objects of another class <code>B</code>. My class returns a <code>const</code> pointer to an object at a particular index. Now, if I want to modify the object, what is the best way of doing that?</p>\n\n<p>I can write get/set methods in class <code>A</code>, which will eventually use get/set methods of class <code>B</code>, but it is a duplication of code. Is it good practice to modify the private members by using the <code>friend</code> keyword?</p>\n\n<p>Or, I can make class <code>A</code> be a <code>friend</code> of class <code>B</code>, then it can modify the private members of <code>B</code> to avoid duplication of code.</p>\n\n<p>Or, I can remove the <code>const</code> on the returned pointer.</p>\n\n<pre><code>class B;\n\nclass A {\n    std::vector&lt;B*&gt; m_list;\npublic:\n    const B* getB(int index) {\n        return m_list[index];\n    }\n};\n\nclass B {\nprivate:\n    int a;\n    float b;\n    long c;\n\n    long getC() {\n        return C;\n    }\n\n    int getA() {\n        return a;\n    }\n\n    float getB() {\n        return b;\n    }\n\n    /*\n    set_methods\n    */\n};\n</code></pre>\n"}, {"tags": ["c++", "com", "atl"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1497465300, "post_id": 44552201, "comment_id": 76095010, "body": "And what is your question?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1497466470, "post_id": 44552201, "comment_id": 76095703, "body": "The TypeLibrary for project B needs to have a reference (an <code>importlib</code> directive) to the TypeLibrary for project A in order to then use interfaces that are declared in project A."}, {"owner": {"reputation": 911, "user_id": 2835355, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/13bf44cae16a6b39d1668d3ed96d6d1b?s=128&d=identicon&r=PG&f=1", "display_name": "ActiveX", "link": "https://stackoverflow.com/users/2835355/activex"}, "edited": false, "score": 0, "creation_date": 1497467538, "post_id": 44552201, "comment_id": 76096237, "body": "The question is in the subject and discussed in first paragraph. OK, so importlib is all I need I guess, after I register the type library for project A ... I&#39;ll give it a try."}], "answers": [{"tags": [], "owner": {"reputation": 911, "user_id": 2835355, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/13bf44cae16a6b39d1668d3ed96d6d1b?s=128&d=identicon&r=PG&f=1", "display_name": "ActiveX", "link": "https://stackoverflow.com/users/2835355/activex"}, "is_accepted": true, "score": 0, "last_activity_date": 1497718624, "creation_date": 1497718624, "answer_id": 44607142, "question_id": 44552201, "link": "https://stackoverflow.com/questions/44552201/how-to-include-a-com-interface-that-is-defined-in-another-type-library-or-com-s/44607142#44607142", "title": "How to include a COM Interface that is defined in another type library (or COM server DLL)", "body": "<p>As suggested, use importlib, but in my case I needed to use import in my idl.\nAlso, the MIDL will generate #include in your header to the included header file from the other project for which you need to add include directory reference in your project properties since the header is in different folder.</p>\n"}], "owner": {"reputation": 911, "user_id": 2835355, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/13bf44cae16a6b39d1668d3ed96d6d1b?s=128&d=identicon&r=PG&f=1", "display_name": "ActiveX", "link": "https://stackoverflow.com/users/2835355/activex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 44607142, "answer_count": 1, "score": 0, "last_activity_date": 1497718624, "creation_date": 1497465217, "last_edit_date": 1497465323, "question_id": 44552201, "link": "https://stackoverflow.com/questions/44552201/how-to-include-a-com-interface-that-is-defined-in-another-type-library-or-com-s", "title": "How to include a COM Interface that is defined in another type library (or COM server DLL)", "body": "<p>All</p>\n\n<p>My Environment:\nUsing VS C++ 2005, with ATL</p>\n\n<p>I have project where I want create and build 2 separate COM server Dlls and I need to reference the interface of COM object defined in project A in project B.\nNote: I need to be able to do this at the IDL level, then the compiler will generate correct headers, etc. and my type library will be correct.</p>\n\n<p>Here's an Example:</p>\n\n<p>Project A:</p>\n\n<p>Server Object -> IServer</p>\n\n<p>Project B</p>\n\n<p>Client Object -> IClient which has a method GetServer() that returns IServer defined in Project A</p>\n\n<p>Project A is separate COM Dll and is build first.\nProject B is separate COM Dll and references Interface defined in project A.</p>\n\n<p>Yes, I know, I can have IClient.GetServer() return the reference to server object as IUnknown and then have the developer explicitly cast it to the server interface but that's annoying and error prone.</p>\n"}, {"tags": ["c++", "memory", "memory-management", "printf"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1497465123, "post_id": 44552124, "comment_id": 76094912, "body": "If you have to cast, you are likely doing it wrong. <code>CString</code> (assuming this is ATL/MFC code) stores either <code>char</code> or <code>wchar_t</code> code units. If it is the latter, you are in for a fun ride (for some definition of <i>&quot;fun&quot;</i>)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1497465146, "post_id": 44552124, "comment_id": 76094922, "body": "If <code>inputString</code> contains Unicode characters instead of Ansi characters, <code>inputString.GetLength()</code> may not be the same length as <code>strlen((char*)inputString)</code>.  Do the conversion first, then get the length of the converted data."}, {"owner": {"reputation": 11, "user_id": 2769790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/47767c8c80dcbe6499d13945edf69f47?s=128&d=identicon&r=PG&f=1", "display_name": "user2769790", "link": "https://stackoverflow.com/users/2769790/user2769790"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1497537006, "post_id": 44552124, "comment_id": 76129126, "body": "@IInspectable - I&#39;m sorry but I didn&#39;t get your point exactly. What change would you suggest code-wise?"}, {"owner": {"reputation": 11, "user_id": 2769790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/47767c8c80dcbe6499d13945edf69f47?s=128&d=identicon&r=PG&f=1", "display_name": "user2769790", "link": "https://stackoverflow.com/users/2769790/user2769790"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1497542674, "post_id": 44552124, "comment_id": 76133029, "body": "@RemyLebeau - If I make the change: dwBlockLen = strlen((char*)src); I get the error - &quot;No suitable function to convert from CString to char exist.&quot;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1497543827, "post_id": 44552124, "comment_id": 76133638, "body": "@user2769790: Your <code>sprintf_s</code> code uses <code>(LPCSTR)inputString</code>. <code>CString</code> does not have <code>char*</code> or <code>LPCSTR</code> (aka <code>const char*</code>) conversion operators, it only has an <code>LPCTSTR</code> (aka <code>const  TCHAR*</code>) conversion operator. So the only way your code compiles is if you are compiling for ANSI/MBCS where <code>TCHAR</code> is <code>char</code>, not for Unicode where <code>TCHAR</code> is <code>wchar_t</code>. So, use <code>LPCSTR</code> instead of <code>char*</code> when calling <code>strlen()</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1497548084, "post_id": 44552124, "comment_id": 76135951, "body": "Remove the <code>(LPCSTR)</code> cast, and call <a href=\"https://docs.microsoft.com/en-us/cpp/atl-mfc-shared/reference/csimplestringt-class#getstring\" rel=\"nofollow noreferrer\"><code>CString::GetString()</code></a> instead. Also, since you are using <code>sprintf_s</code>, you should be explicit about your <code>CString</code>&#39;s character encoding. <code>CStringA</code> is the matching string type. It&#39;s also not at all clear, why you are <code>new</code>-ing an <code>unsigned char</code> array, just to then cast it to <code>char*</code> (or why you aren&#39;t using a <code>std::vector&lt;char&gt;</code> to begin with)."}, {"owner": {"reputation": 11, "user_id": 2769790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/47767c8c80dcbe6499d13945edf69f47?s=128&d=identicon&r=PG&f=1", "display_name": "user2769790", "link": "https://stackoverflow.com/users/2769790/user2769790"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1497554140, "post_id": 44552124, "comment_id": 76139317, "body": "@RemyLebeau - strlen((LPCSTR*)inputString) did fix the problem."}, {"owner": {"reputation": 11, "user_id": 2769790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/47767c8c80dcbe6499d13945edf69f47?s=128&d=identicon&r=PG&f=1", "display_name": "user2769790", "link": "https://stackoverflow.com/users/2769790/user2769790"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1497554195, "post_id": 44552124, "comment_id": 76139345, "body": "@RemyLebeau - you mentioned that CString does not have char* or LPCSTR (aka const char*) conversion operators, it only has an LPCTSTR. So why did we not use LPCTSTR, and used LPCSTR?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1497554556, "post_id": 44552124, "comment_id": 76139539, "body": "@user2769790: because you clearly don&#39;t understand how <code>TCHAR</code> actually works, and you just picked whatever happened to work for you. <code>sprintf_s</code> expects only <code>const char*</code> input for the <code>%s</code> specifier.  <code>(LPCSTR)inputString</code> will compile only if the project is set to ANSI/MBCS (<code>TCHAR=char</code>), it will NOT compile if the project is set to Unicode (<code>TCHAR=wchar_t</code>). <code>LPCTSTR</code> and <code>LPCSTR</code> map to the same type in ANSI/MBCS, they do not map to the same type in Unicode."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1497555139, "post_id": 44552124, "comment_id": 76139837, "body": "@user2769790: <code>(LPCSTR*)</code> is not a valid type-cast for <code>inputString</code>. You need to use <code>(LPCSTR)</code> instead (no <code>*</code>) (you should be using <code>(LPCTSTR)</code> instead, since that is what <code>CString</code> actually expects). In C++ you really should be using <code>static_cast</code> instead of C-style casting: <code>static_cast&lt;LPCSTR&gt;(inputString)</code>. In any case, <code>LPCTSTR</code> will not work for <code>sprintf_s</code> if you compile for Unicode. Consider using <code>_stprintf_s</code> instead, which operates on <code>TCHAR</code> strings.  Or, with <code>sprintf_s</code>, you can use <code>%ls</code> or <code>%S</code>  for <code>wchar_t*</code> input, and <code>%s</code> for <code>char*</code> input."}, {"owner": {"reputation": 11, "user_id": 2769790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/47767c8c80dcbe6499d13945edf69f47?s=128&d=identicon&r=PG&f=1", "display_name": "user2769790", "link": "https://stackoverflow.com/users/2769790/user2769790"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1497556021, "post_id": 44552124, "comment_id": 76140321, "body": "I&#39;m sorry. I typed it wrong. I actually used strlen((LPCSTR)inputString) and that worked. bot the * Thanks a lot for the explanation @RemyLebeau"}, {"owner": {"reputation": 11, "user_id": 2769790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/47767c8c80dcbe6499d13945edf69f47?s=128&d=identicon&r=PG&f=1", "display_name": "user2769790", "link": "https://stackoverflow.com/users/2769790/user2769790"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1497622983, "post_id": 44552124, "comment_id": 76170940, "body": "Hey @RemyLebeau, you mentioned earlier &quot;If inputString contains Unicode characters instead of Ansi characters, inputString.GetLength() may not be the same length as strlen((char*)inputString)&quot;.. MSDN says GetLength gets the number of bytes, which should be what strlen returns. Can you please elaborate a little bit on why to use strlen instead of GetLength?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1497626280, "post_id": 44552124, "comment_id": 76173184, "body": "@user2769790 <code>GetLength()</code> and <code>strlen()</code> are the same thing when <code>CString</code> holds <code>char</code> elements. They are not the same thing when it holds <code>wchar_t</code> elements instead."}, {"owner": {"reputation": 11, "user_id": 2769790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/47767c8c80dcbe6499d13945edf69f47?s=128&d=identicon&r=PG&f=1", "display_name": "user2769790", "link": "https://stackoverflow.com/users/2769790/user2769790"}, "edited": false, "score": 0, "creation_date": 1497626883, "post_id": 44552124, "comment_id": 76173618, "body": "So this is basically to cover the case for Unicode where TCHAR is wchar_t. If in case we don&#39;t use Unicode, then we can keep &quot;blockLength = inputString.GetLength();&quot;? but since we need to do casting in this case, we used strlen((LPCSTR)inputString).  Am I getting that right?"}], "owner": {"reputation": 11, "user_id": 2769790, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/47767c8c80dcbe6499d13945edf69f47?s=128&d=identicon&r=PG&f=1", "display_name": "user2769790", "link": "https://stackoverflow.com/users/2769790/user2769790"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497471599, "creation_date": 1497464934, "last_edit_date": 1497471599, "question_id": 44552124, "link": "https://stackoverflow.com/questions/44552124/sprintf-s-throwing-buffer-overflow-error-in-c", "title": "sprintf_s throwing buffer-overflow error in C++", "body": "<p>I have a method that takes in the parameter as input <code>CString inputString</code>.</p>\n\n<pre><code>DWORD blockLength;\nblockLength = inputString.GetLength();\n\nPBYTE defaultBuffer = NULL; \ndefaultBuffer = new unsigned char[blockLength + 1];\n\nsprintf_s(reinterpret_cast&lt;char*&gt;(defaultBuffer), (blockLength + 1), \"%s\", (LPCSTR)inputString);\n</code></pre>\n\n<p>I get the error that the function might be able to write outside bounds of the allocated memory (on <code>sprintf_s</code> line) which could corrupt data.</p>\n"}, {"tags": ["c++", "vector", "null"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 10, "creation_date": 1497464598, "post_id": 44551996, "comment_id": 76094644, "body": "A vector cannot possibly be NULL, but it can be empty()."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1497464612, "post_id": 44551996, "comment_id": 76094654, "body": "Maybe see this question: <a href=\"https://stackoverflow.com/q/29460651/10077\">stackoverflow.com/q/29460651/10077</a>"}, {"owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "edited": false, "score": 1, "creation_date": 1497464643, "post_id": 44551996, "comment_id": 76094676, "body": "No. NULL is normally used with a pointer. You could however return an empty vector and verify on the other side if it&#39;s empty."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1497464666, "post_id": 44551996, "comment_id": 76094692, "body": "you could also return a (shared) pointer to a vector, but @NeilButterworth&#39;s comment is probably the preferred."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1497464963, "post_id": 44551996, "comment_id": 76094835, "body": "You have 2 options: <code>1</code> return an empty vector. <code>2</code> throw an exception, because the function cannot fulfill its promise. It depends on the precise circumstances, which of those is more appropriate."}, {"owner": {"reputation": 177, "user_id": 3735271, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bd42bc50fe01f448b4ed16b96e9df1f2?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/3735271/david"}, "edited": false, "score": 0, "creation_date": 1497465177, "post_id": 44551996, "comment_id": 76094935, "body": "@Neil Thanks for the suggestion! That did not cross my mind at the time."}], "answers": [{"comments": [{"owner": {"reputation": 1776, "user_id": 11320345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z4D76.jpg?s=128&g=1", "display_name": "lordvidex", "link": "https://stackoverflow.com/users/11320345/lordvidex"}, "edited": false, "score": 0, "creation_date": 1607817084, "post_id": 44552095, "comment_id": 115392960, "body": "But there are instances where an empty vector has a distinct difference from a null value in the code"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1497465459, "last_edit_date": 1497465459, "creation_date": 1497464831, "answer_id": 44552095, "question_id": 44551996, "link": "https://stackoverflow.com/questions/44551996/can-i-return-null-for-vectordouble-function/44552095#44552095", "title": "Can I return NULL for vector&lt;double&gt; function?", "body": "<p><code>NULL</code> really is only a concept of pointers.  Since we have a container we can check something else, namely, whether or not the container is <code>empty</code>.  If it is then we know we have no elements and if it is not then we know there is stuff to process.  That lets you write code like</p>\n\n<pre><code>vector&lt;double&gt; intersection(vector&lt;double&gt; startPos, vector&lt;double&gt; direction)\n{\n    if(there is intersection)\n        return (intersection coordinates);\n    else {\n        return {}; // this means return a default constructed instance\n    }\n} \n</code></pre>\n\n<p>and then you can use it like</p>\n\n<pre><code>vector&lt;double&gt; v = intersection(pos, dir);\nif(v.empty())\n    /* Do something */\nelse\n    /* Do something else */\n</code></pre>\n\n<hr>\n\n<p>Also note that if you want to get a set intersection you can use <a href=\"http://en.cppreference.com/w/cpp/algorithm/set_intersection\" rel=\"nofollow noreferrer\"><code>std::set_intersection</code></a> and use it like</p>\n\n<blockquote>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\nint main()\n{\n    std::vector&lt;int&gt; v1{1,2,3,4,5,6,7,8};\n    std::vector&lt;int&gt; v2{        5,  7,  9,10};\n    std::sort(v1.begin(), v1.end());\n    std::sort(v2.begin(), v2.end());     \n    std::vector&lt;int&gt; v_intersection;     \n    std::set_intersection(v1.begin(), v1.end(),\n                          v2.begin(), v2.end(),\n                          std::back_inserter(v_intersection));\n    for(int n : v_intersection)\n        std::cout &lt;&lt; n &lt;&lt; ' ';\n}\n</code></pre>\n  \n  <p>Output:</p>\n\n<pre><code>5 7\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 177, "user_id": 3735271, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/bd42bc50fe01f448b4ed16b96e9df1f2?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/3735271/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5841, "favorite_count": 1, "closed_date": 1497464908, "accepted_answer_id": 44552095, "answer_count": 1, "score": 2, "last_activity_date": 1497465459, "creation_date": 1497464484, "last_edit_date": 1497464874, "question_id": 44551996, "link": "https://stackoverflow.com/questions/44551996/can-i-return-null-for-vectordouble-function", "closed_reason": "Duplicate", "title": "Can I return NULL for vector&lt;double&gt; function?", "body": "<p>I have the following function:</p>\n\n<pre><code>/* Calculate if there is an intersection with given intial position and \n  direction */\nvector&lt;double&gt; intersection(vector&lt;double&gt; startPos, vector&lt;double&gt; direction)\n{\n   if(there is intersection)\n      return (intersection coordinates);\n   else {\n      return NULL;\n   }\n} \n</code></pre>\n\n<p>Could I do this and check against <code>NULL</code> if an intersection exists:</p>\n\n<pre><code>vector&lt;double&gt; v = intersection(pos, dir);\nif(v == NULL)\n   /* Do something */\nelse\n   /* Do something else */\n</code></pre>\n\n<p>If this is not allowed/bad coding practice, what is another way I may go about this?</p>\n"}, {"tags": ["c++", "c++11", "variadic-templates"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1497464211, "post_id": 44551908, "comment_id": 76094455, "body": "No.  Parameter packs are compile time constructs."}, {"owner": {"reputation": 5125, "user_id": 98693, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef5ae6548ea49522a5ad0e3c57f2bdc7?s=128&d=identicon&r=PG", "display_name": "ovanes", "link": "https://stackoverflow.com/users/98693/ovanes"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1497464470, "post_id": 44551908, "comment_id": 76094569, "body": "Can you be a bit more specific about the use case. You can&#39;t do it like that as @NathanOliver pointed out, but may be we miss some information what you need to achieve and can help doing that a bit differently."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1497464660, "post_id": 44551908, "comment_id": 76094686, "body": "Types don&#39;t exist at runtime."}, {"owner": {"reputation": 5125, "user_id": 98693, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef5ae6548ea49522a5ad0e3c57f2bdc7?s=128&d=identicon&r=PG", "display_name": "ovanes", "link": "https://stackoverflow.com/users/98693/ovanes"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1497464768, "post_id": 44551908, "comment_id": 76094740, "body": "@melpomene this is somewhat strange statement... What is RTTI than? Probably you mean that type checks do not exist at runtime?"}, {"owner": {"reputation": 1121, "user_id": 532573, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5c51a1a74394fbb33b802519f782e819?s=128&d=identicon&r=PG", "display_name": "narengi", "link": "https://stackoverflow.com/users/532573/narengi"}, "reply_to_user": {"reputation": 5125, "user_id": 98693, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef5ae6548ea49522a5ad0e3c57f2bdc7?s=128&d=identicon&r=PG", "display_name": "ovanes", "link": "https://stackoverflow.com/users/98693/ovanes"}, "edited": false, "score": 0, "creation_date": 1497464903, "post_id": 44551908, "comment_id": 76094805, "body": "@ovanes My program reads a text file, which is basically an array of numbers. Each number <i>i</i> refers to the <i>i</i>-th type of a template parameter pack that my class is templated based on. Based on that type, I want to declare a variable."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "edited": false, "score": 0, "creation_date": 1497464956, "post_id": 44551908, "comment_id": 76094830, "body": "<code>using</code> and <code>typedef</code> are also compile-time constructs."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1497464970, "post_id": 44551908, "comment_id": 76094843, "body": "@narengi This can&#39;t work without modification. Conceptually, all types need to be known at compile time, right? But if you index a tuple with a runtime index, how will it know what the type is of the returned reference? That&#39;s why you get runtime indexing only with homogeneous containers (like <code>std::array</code>) but not heterogeneous ones."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 5125, "user_id": 98693, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef5ae6548ea49522a5ad0e3c57f2bdc7?s=128&d=identicon&r=PG", "display_name": "ovanes", "link": "https://stackoverflow.com/users/98693/ovanes"}, "edited": false, "score": 0, "creation_date": 1497464976, "post_id": 44551908, "comment_id": 76094847, "body": "@ovanes RTTI is runtime type information, i.e. (some) information about types that is explicitly saved so it&#39;s available at runtime. But the types themselves are gone."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "edited": false, "score": 1, "creation_date": 1497465208, "post_id": 44551908, "comment_id": 76094951, "body": "@narengi: To achieve different behavior based on runtime input, the solution usually involves polymorphism (i.e. base classes and virtual functions), not template metaprogramming."}, {"owner": {"reputation": 5125, "user_id": 98693, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef5ae6548ea49522a5ad0e3c57f2bdc7?s=128&d=identicon&r=PG", "display_name": "ovanes", "link": "https://stackoverflow.com/users/98693/ovanes"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1497465390, "post_id": 44551908, "comment_id": 76095058, "body": "@melpomene now we get really philosophic. It depends how you define type and what does not exist at runtime? But in general what you mean is probably type checks which exist e.g. in .NET at runtime."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "edited": false, "score": 1, "creation_date": 1497465422, "post_id": 44551908, "comment_id": 76095075, "body": "@narengi, please edit your question to include what you said in your comment about reading a text file and doing something different based on a number. You should go into even more detail about what you&#39;re trying to accomplish. If it&#39;s confidential, then make something up that&#39;s similar to what you&#39;re trying to accomplish."}, {"owner": {"reputation": 1121, "user_id": 532573, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5c51a1a74394fbb33b802519f782e819?s=128&d=identicon&r=PG", "display_name": "narengi", "link": "https://stackoverflow.com/users/532573/narengi"}, "reply_to_user": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "edited": false, "score": 0, "creation_date": 1497465526, "post_id": 44551908, "comment_id": 76095132, "body": "@EmileCormier Your hint helped a lot. Thank you and others."}, {"owner": {"reputation": 1121, "user_id": 532573, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5c51a1a74394fbb33b802519f782e819?s=128&d=identicon&r=PG", "display_name": "narengi", "link": "https://stackoverflow.com/users/532573/narengi"}, "edited": false, "score": 0, "creation_date": 1497465537, "post_id": 44551908, "comment_id": 76095144, "body": "I&#39;ll edit my post, and since the comment section got a bit too long, somebody please provide an answer so I can accept and future readers do not have to go over the comments."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1497466079, "post_id": 44551908, "comment_id": 76095436, "body": "Dude, your edit did not help.... it&#39;s entirely abstract still. You cannot declare a variable of a static type that is determined at runtime. What will you do with the variable afterwards? Will you call a method that every type in your pack has? Or will you do different things with each variable? If you are going to do different things with each variable, why not just do switch-case and be done with it?"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1497467782, "post_id": 44551908, "comment_id": 76096348, "body": "I&#39;d go for something like a statically-initialized array of pointers to template-instantiations (objects, functions, whatever) with the various values or types you want. That would bridge compile-time and run-time."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 1, "creation_date": 1497477930, "post_id": 44551908, "comment_id": 76101415, "body": "Related to my own question <a href=\"https://stackoverflow.com/questions/30828683/c-stdget-equivalent-with-run-time-arguments\">here</a>. The answer there was Yakk&#39;s <a href=\"https://stackoverflow.com/questions/30640853/c-runtime-type-switching-avoiding-switch/30825798#30825798\">magic switch</a>."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1497913512, "post_id": 44551908, "comment_id": 76268402, "body": "You could build a <code>std::array&lt;const std::type_info*, sizeof...(Arguments)&gt;</code> if you really wanted.  But there&#39;s only so much you can do at runtime with something of unknown type."}], "answers": [{"comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1497513379, "post_id": 44553376, "comment_id": 76112605, "body": "I voted down because the first sentence of your answer is wrong: <i>strong typing</i> means that types dictate what one can do with values (like you cannot just call <code>foo(bar)</code> with a <code>baz</code>). You mean <i>static typing</i>. Great answer for the rest, though!"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1497525818, "post_id": 44553376, "comment_id": 76121000, "body": "Oh, and you&#39;re missing a virtual destructor (though not strictly necessary here I&#39;d say it&#39;s good practice to have one either way)"}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1497540144, "post_id": 44553376, "comment_id": 76131386, "body": "@DanielJour Thanks for explaining your down vote. I&#39;ll revise the &quot;strong typing&quot; part, and I guess I need to read up more on exactly what that means in a programming language."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1497553976, "post_id": 44553376, "comment_id": 76139236, "body": "For those like me who need a reminder on strongly/weekly vs statically/dynamically typed languages: <a href=\"https://stackoverflow.com/questions/2351190/static-dynamic-vs-strong-weak\" title=\"static dynamic vs strong weak\">stackoverflow.com/questions/2351190/&hellip;</a>"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1497896698, "post_id": 44553376, "comment_id": 76260809, "body": "In 2017 we really should not be recommending or linking the &quot;Command&quot; pattern or even mentioning it by that name. It was never anything but by a 90&#39;s design pattern workaround for huge flaws in 90&#39;s era OO languages. Old hands inevitably know it but there&#39;s no reason for people new to the language to be introduced to the baggage. We should just be talking in terms of passing around functions and <code>std::function</code>/lambdas/function pointers."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1497905247, "post_id": 44553376, "comment_id": 76265290, "body": "@NirFriedman The Command pattern is more than just a way to treat functions as objects. Command objects can be given a name label, a trigger (e.g. keyboard shortcut), help information, etc. Plus Commands can be used for undo/redo functionality. Command classes also have the advantage that you have a place to break down a long function into several private member functions. How do you propose that we do all that with a simple <code>std::function</code>?"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1497908421, "post_id": 44553376, "comment_id": 76266752, "body": "@EmileCormier I don&#39;t really understand your point, but any rate you are free to write a function object (class that defines <code>operator()</code>), with any state, private functions, anything else you want, and it can be assigned to <code>std::function</code>. If you have multiple pieces of functionality you want to be able to trigger (like undo/redo), then you are just talking about a polymorphic interface + implementation and again there is no reason for this name."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1497909504, "post_id": 44553376, "comment_id": 76267177, "body": "@NirFriedman, you cannot have a heterogenous container of functors (class that define <code>operator()</code>). Yes, you can make <code>operator()</code> virtual, but that&#39;s essentially the same as making <code>execute()</code> virtual. If you&#39;re defining a polymorphic interface for <i>commands</i> that support undo/redo, then I don&#39;t see why the name <code>Command</code> wouldn&#39;t make sense."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1497909826, "post_id": 44553376, "comment_id": 76267271, "body": "@EmileCormier As I said: &gt; and it can be assigned to <code>std::function</code>. You can have a container of <code>std::function</code>, and you can e.g. <code>push_back</code> any functor, whether or not it has virtual <code>operator()</code>. If you support &quot;undo/redo&quot; or any other two pieces of functionality, should not be germane. Nothing about the Command pattern helps with implementing those specifically. A command object that supports execute, undo, and redo, is just a polymorphic interface with 3 functions... nothing more, nothing less, and doesn&#39;t need any special name."}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "edited": false, "score": 0, "creation_date": 1497911410, "post_id": 44553376, "comment_id": 76267808, "body": "I presented both alternatives in my answer and readers can choose which one is best suited for the problem at hand. Perhaps I&#39;ll move the <code>std::function</code> solution up before the Command pattern one."}], "tags": [], "owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "is_accepted": false, "score": 3, "last_activity_date": 1497912810, "last_edit_date": 1497912810, "creation_date": 1497469214, "answer_id": 44553376, "question_id": 44551908, "link": "https://stackoverflow.com/questions/44551908/c11-indexing-template-parameter-packs-at-runtime-in-order-to-access-nth-type/44553376#44553376", "title": "C++11 indexing template parameter packs at runtime in order to access Nth type", "body": "<p>C++ is a statically-typed language, which means that the types of variables cannot be decided or changed at runtime.</p>\n\n<p>Because your array of numbers are input at runtime, it's impossible for you to use the <code>NthTypeOf</code> metafunction in the manner you describe, because <code>NthTypeOf</code> can only depend on a compile-time index.</p>\n\n<p>In your use case, not only are the variables of different type, but the <em>behavior</em> is also different based on user input.</p>\n\n<p>If you want different behavior based on a value determined at runtime, I suggest either a switch statement, a container of <code>std::function</code>, or a heterogeneous container of polymorphic \"command\" objects.</p>\n\n<p>A solution based on a switch statement is pretty trivial, so I won't bother showing an example.</p>\n\n<p>A <code>std::function</code> is a polymorphic wrapper around a function-like object. You can use a container of <code>std::function</code> to build a sort of dispatch table.</p>\n\n<pre><code>struct StringMatch\n{\n    void operator()() const\n    {\n        std::string s1, s2;\n        std::cin &gt;&gt; s1 &gt;&gt; s2;\n        if (s1 == s2)\n            std::cout &lt;&lt; \"Strings match\\n\";\n        else\n            std::cout &lt;&lt; \"Strings don't match\\n\";\n    }\n};\n\nstruct SquareRoot\n{\n    void operator()() const\n    {\n        float x = 0;\n        std::cin &gt;&gt; x;\n        std::cout &lt;&lt; \"Square root is \" &lt;&lt; std::sqrt(x) &lt;&lt;\"\\n\";\n    }\n\n};\n\nint main()\n{\n    const std::map&lt;int, std::function&gt; commands =\n    {\n        {1, StringMatch()},\n        {2, SquareRoot()},\n    };\n\n    int commandId = 0;\n    std::cin &gt;&gt; commandId;\n\n    auto found = command.find(commandId);\n    if (found != commands.end())\n        (*found-&gt;second)();\n    else\n        std::cout &lt;&lt; \"Unknown command\";\n\n    return 0;\n}\n</code></pre>\n\n<p>The <code>map</code> can of course be replaced by a flat array or vector, but then you need to worry about \"holes\" in the command ID range.</p>\n\n<hr>\n\n<p>If you need your command objects to be able to do more then execute themselves (like having properties, or support undo/redo), you can use a solution that uses polymorphism and is inspired by the traditional <a href=\"https://en.wikipedia.org/wiki/Command_pattern\" rel=\"nofollow noreferrer\">Command Pattern</a>.</p>\n\n<pre><code>class Command\n{\npublic:\n    virtual ~Command() {}\n    virtual void execute();\n    virtual std::string name() const;\n    virtual std::string description() const;\n};\n\nclass StringMatch : public Command\n{\npublic:\n    void execute() override\n    {\n        std::string s1, s2;\n        std::cin &gt;&gt; s1 &gt;&gt; s2;\n        if (s1 == s2)\n            std::cout &lt;&lt; \"Strings match\\n\";\n        else\n            std::cout &lt;&lt; \"Strings don't match\\n\";\n    }\n\n    std::string name() const override {return \"StringMatch\";}\n    std::string description() const override {return \"Matches strings\";}\n};\n\nclass SquareRoot : public Command\n{\npublic:\n    void execute() override\n    {\n        float x = 0;\n        std::cin &gt;&gt; x;\n        std::cout &lt;&lt; \"Square root is \" &lt;&lt; std::sqrt(x) &lt;&lt;\"\\n\";\n    }\n\n    std::string name() const override {return \"SquareRoot\";}\n    std::string description() const override {return \"Computes square root\";}\n};\n\nint main()\n{\n    constexpr int helpCommandId = 0;\n\n    const std::map&lt;int, std::shared_ptr&lt;Command&gt;&gt; commands =\n    {\n        {1, std::make_shared&lt;StringMatch&gt;()},\n        {2, std::make_shared&lt;SquareRoot&gt;()},\n    };\n\n    int commandId = 0;\n    std::cin &gt;&gt; commandId;\n\n    if (commandId == helpCommandId)\n    {\n        // Display command properties\n        for (const auto&amp; kv : commands)\n        {\n            int id = kv.first;\n            const Command&amp; cmd = *kv.second;\n            std::cout &lt;&lt; id &lt;&lt; \") \" &lt;&lt; cmd.name() &lt;&lt; \": \" &lt;&lt; cmd.description()\n                      &lt;&lt; \"\\n\";\n        }\n    }\n    else\n    {\n        auto found = command.find(commandId);\n        if (found != commands.end())\n            found-&gt;second-&gt;execute();\n        else\n            std::cout &lt;&lt; \"Unknown command\";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Despite C++ being a statically-typed language, there are ways to emulate Javascript-style dynamic variables, such as the <a href=\"https://github.com/nlohmann/json\" rel=\"nofollow noreferrer\">JSON for Modern C++ library</a> or <a href=\"http://www.boost.org/doc/libs/release/doc/html/variant.html\" rel=\"nofollow noreferrer\">Boost.Variant</a>.</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/release/doc/html/any.html\" rel=\"nofollow noreferrer\">Boost.Any</a> can also be used for type erasure of your command arguments, and your command objects/functions would know how to downcast them back to their static types.</p>\n\n<p>But such emulated dynamic variables will not address your need to have different behavior based on user/file input.</p>\n"}, {"tags": [], "owner": {"reputation": 11096, "user_id": 2749717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46af1ef54856d737d52b7667afd240ee?s=128&d=identicon&r=PG&f=1", "display_name": "bipll", "link": "https://stackoverflow.com/users/2749717/bipll"}, "is_accepted": false, "score": 2, "last_activity_date": 1497471024, "creation_date": 1497471024, "answer_id": 44553887, "question_id": 44551908, "link": "https://stackoverflow.com/questions/44551908/c11-indexing-template-parameter-packs-at-runtime-in-order-to-access-nth-type/44553887#44553887", "title": "C++11 indexing template parameter packs at runtime in order to access Nth type", "body": "<p>One possible approach when you want to do something with a run-time dependent type very locally, is to predict run-time values at the compile time.</p>\n\n<pre><code>using Tuple = std::tuple&lt;int, double, char&gt;;\n\nint type;\nstd::cin &gt;&gt; type;\nswitch(type) {\n    case 0: {\n                using ItsType = std::tuple_element&lt;0, Tuple&gt;;\n                break;\n            }\n    case 1: {\n                using ItsType = std::tuple_element&lt;1, Tuple&gt;;\n                break;\n            }\n    default: std::cerr &lt;&lt; \"char is not handled yet.\" &lt;&lt; std::endl;\n             break;\n}\n</code></pre>\n\n<p>Only works with small type packs, of course.</p>\n"}, {"tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": true, "score": 5, "last_activity_date": 1497545124, "last_edit_date": 1497545124, "creation_date": 1497512401, "answer_id": 44561518, "question_id": 44551908, "link": "https://stackoverflow.com/questions/44551908/c11-indexing-template-parameter-packs-at-runtime-in-order-to-access-nth-type/44561518#44561518", "title": "C++11 indexing template parameter packs at runtime in order to access Nth type", "body": "<p>C++ is a <strong>statically\u200b</strong> typed language. As such the type of all <strong>variables</strong> needs to be known at compile time (and cannot vary). You want a type that depends on a runtime value. Luckily C++ also features <strong>dynamic</strong> typing of <strong>objects</strong>.</p>\n\n<p><em>Warning: all code in this answer serves only for demonstration of the basic concept/idea. It's missing any kind of error handling, sane interfaces (constructors...), exception safety, ... . So don't use for production, consider using the implementations\u200b available from boost.</em></p>\n\n<p>To use this feature you need what's called a <em>polymorphic base class</em>: a class with (at least) one <code>virtual</code> member function from which you derive further classes.</p>\n\n<pre><code>struct value_base {\n  // you want to be able to make copies\n  virtual std::unique_ptr&lt;value_base&gt; copy_me() const = 0;\n  virtual ~value_base () {}\n};\n\ntemplate&lt;typename Value_Type&gt;\nstruct value_of : value_base {\n  Value_Type value;\n\n  std::unique_ptr&lt;value_base&gt; copy_me() const {\n    return new value_of {value};\n  }\n};\n</code></pre>\n\n<p>You can then have a variable with static type of pointer or reference to that base class, which can point to/reference objects from both the base class as well as from any of those derived classes. If you have a <em>clearly defined interface</em>, then encode that as virtual member functions (think of <code>Shape</code> and <code>area ()</code>, <code>name ()</code>, ... functions) and make calls through that base class pointer/reference (<a href=\"https://stackoverflow.com/a/44553376/1116364\">as shown in the other answer</a>). Otherwise use a (hidden) dynamic cast to obtain a pointer/reference with static type of the dynamic type:</p>\n\n<pre><code>struct any {\n  std:: unique_ptr&lt;value_base&gt; value_container;\n\n  // Add constructor\n\n  any(any const &amp; a)\n    : value_container (a.value_container-&gt;copy_me ())\n  {}\n  // Move constructor\n\n  template&lt;typename T&gt;\n  T &amp; get() {\n    value_of&lt;T&gt; * typed_container\n        = dynamic_cast&lt;value_of&lt;T&gt; *&gt;(value_container.get();)\n    if (typed_container == nullptr) {\n      // Stores another type, handle failure\n    }\n    return typed_container-&gt;value;\n  }\n\n  // T const &amp; get() const;\n  // with same content as above\n};\n\ntemplate&lt;typename T, typename... Args&gt;\nany make_any (Args... &amp;&amp; args) {\n  // Raw new, not good, add proper exception handling like make_unique (C++14?)\n  return {new T(std:: forward&lt;Args&gt;(args)...)};\n}\n</code></pre>\n\n<p>Since object construction is done at runtime the actual type of the pointed to/referenced object may depend on runtime values:</p>\n\n<pre><code>template&lt;typename T&gt;\nany read_and_construct (std:: istream &amp; in) {\n  T value;\n  // Add error handling please\n  in &gt;&gt; value;\n  return make_any&lt;T&gt;(std:: move (value));\n}\n\n// ...\n\n// missing: way of error handling\nstd::map&lt;int, std:: function&lt;any(std:: istream &amp;)&gt;&gt; construction_map;\nconstruction_map.insert(std::make_pair(1, read_and_construct&lt;double&gt;));\n// and more\nint integer_encoded_type;\n// error handling please\ncin &gt;&gt; integer_encoded_type;\n// error handling please\nany value = construction_map [integer_encoded_type] (cin);\n</code></pre>\n\n<p>As you may have noticed above code uses also a clearly defined interface for construction. <em>If you don't</em> intend to do lots of different things with the returned <code>any</code> objects, potentially storing them in various data structures over great parts of the time your program is running, <em>then</em> using an <code>any</code> type is most likely overkill and you should just put the type dependent code into those construction functions, too.</p>\n\n<p>A serious drawback of such an <code>any</code> class is its generality: it's possible to store just about any type within it. This means that the (maximum) size of the (actually) stored object is not known during compilation, making use of storage with automatic duration (the \"stack\") impossible (in standard C++). This may lead to expensive usage of dynamic memory (the \"heap\"), which is <em>considerably</em> slower than automatic memory. This issue will surface whenever many copies of <code>any</code> objects have to be made, but is probably irrelevant (except for cache locality) if you just keep a collection of them around.</p>\n\n<p>Thus, <em>if you know at compile time the set of types which you must be able to store</em>, then you can (at compile time) compute the maximum size needed, use a static array of that size and construct your objects inside that array (since C++11 you can achieve the same with a (recursive template) <code>union</code>, too):</p>\n\n<pre><code>constexpr size_t max_two (size_t a, size_t b) {\n  return (a &gt; b) ? a : b;\n}\n\ntemplate&lt;size_t size, size_t... sizes&gt;\nconstexpr size_t max_of() {\n  return max_two (size, max_of&lt;sizes&gt;());\n}\n\ntemplate&lt;typename... Types&gt;\nstruct variant {\n  alignas(value_of&lt;Types&gt;...) char buffer[max_of&lt;sizeof (value_of&lt;Types&gt;)...&gt;()];\n  value_base * active;\n\n  // Construct an empty variant\n  variant () : active (nullptr)\n  {}\n\n  // Copy and move constructor still missing!\n\n  ~variant() {\n    if (active) {\n      active-&gt;~value_base ();\n    }\n  }\n\n  template&lt;typename T, typename... Args&gt;\n  void emplace (Args... &amp;&amp; args) {\n    if (active) {\n      active-&gt;~value_base ();\n    }\n    active = new (buffer) T(std:: forward&lt;Args&gt;(args)...);\n  }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6721, "user_id": 834521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/FbswL.png?s=128&g=1", "display_name": "TooTone", "link": "https://stackoverflow.com/users/834521/tootone"}, "is_accepted": false, "score": 0, "last_activity_date": 1579892464, "creation_date": 1579892464, "answer_id": 59902238, "question_id": 44551908, "link": "https://stackoverflow.com/questions/44551908/c11-indexing-template-parameter-packs-at-runtime-in-order-to-access-nth-type/59902238#59902238", "title": "C++11 indexing template parameter packs at runtime in order to access Nth type", "body": "<blockquote>\n  <p>Is there a way to access Nth type at runtime?</p>\n</blockquote>\n\n<p>Yes, although per other answers, it may  not be appropriate in this context.</p>\n\n<p>Adapting this <a href=\"https://stackoverflow.com/a/6894436/834521\">answer</a>, you can iterate at compile time, and choose a type.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;type_traits&gt;\n#include &lt;tuple&gt;\n#include &lt;cmath&gt;\n\nstd::ifstream in(\"my.txt\");\n\nvoid do_something(const std::string&amp; x)\n{\n    std::cout &lt;&lt; \"Match \" &lt;&lt; x &lt;&lt; '\\n';\n}\n\nvoid do_something(int x)\n{\n    std::cout &lt;&lt; \"Sqrt of \" &lt;&lt; x &lt;&lt; \" = \" &lt;&lt; std::sqrt(x) &lt;&lt; '\\n';\n}\n\ntemplate&lt;std::size_t I, typename... Tp&gt;\ninline typename std::enable_if_t&lt;I == sizeof...(Tp)&gt; action_on_index_impl(size_t)\n{ // reached end with I==number of types: do nothing\n}\ntemplate&lt;std::size_t I, typename... Tp&gt;\ninline typename std::enable_if_t&lt;I &lt; sizeof...(Tp)&gt; action_on_index_impl(size_t i)\n{\n    if (i == I){\n        // thanks to https://stackoverflow.com/a/29729001/834521 for following\n        std::tuple_element_t&lt;I, std::tuple&lt;Tp...&gt;&gt; x{};\n        in &gt;&gt; x;\n        do_something(x);\n    }\n    else\n        action_on_index_impl&lt;I+1, Tp...&gt;(i);\n}\ntemplate&lt;typename... Tp&gt; void action_on_index(size_t i)\n{\n    // start at the beginning with I=0\n    action_on_index_impl&lt;0, Tp...&gt;(i);\n}\n\nint main()\n{\n    int i{};\n    while(in &gt;&gt; i, in)\n        action_on_index&lt;std::string, int&gt;(i);\n    return 0;\n}\n</code></pre>\n\n<p>with my.txt</p>\n\n<pre><code>0 hello\n1 9\n0 world\n1 4\n</code></pre>\n\n<p>output</p>\n\n<pre><code>Match hello\nSqrt of 9 = 3\nMatch world\nSqrt of 4 = 2\n</code></pre>\n\n<p>I needed to know how to access Nth type at runtime in a different context, hence my answer here (I wonder if there is a better way, particularly in C++14/17).</p>\n"}], "owner": {"reputation": 1121, "user_id": 532573, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5c51a1a74394fbb33b802519f782e819?s=128&d=identicon&r=PG", "display_name": "narengi", "link": "https://stackoverflow.com/users/532573/narengi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2045, "favorite_count": 0, "accepted_answer_id": 44561518, "answer_count": 4, "score": 10, "last_activity_date": 1579892464, "creation_date": 1497464148, "last_edit_date": 1497474531, "question_id": 44551908, "link": "https://stackoverflow.com/questions/44551908/c11-indexing-template-parameter-packs-at-runtime-in-order-to-access-nth-type", "title": "C++11 indexing template parameter packs at runtime in order to access Nth type", "body": "<p>From this <a href=\"https://stackoverflow.com/questions/20162903/template-parameter-packs-access-nth-type-and-nth-element/29753388?noredirect=1#comment76093541_29753388\">SO topic</a> (and this <a href=\"http://ldionne.com/2015/11/29/efficient-parameter-pack-indexing/\" rel=\"noreferrer\">blog post</a>), I know how to access Nth type in a template parameter pack. For instance, <a href=\"https://stackoverflow.com/a/29753388/532573\">one of the answers</a> to the abovementioned SO question suggests this:</p>\n\n<pre><code>template&lt;int N, typename... Ts&gt; using NthTypeOf = typename std::tuple_element&lt;N, std::tuple&lt;Ts...&gt;&gt;::type;\n\nusing ThirdType = NthTypeOf&lt;2, Ts...&gt;;\n</code></pre>\n\n<p>However, these methods work only in compile-time. Trying to do something such as:</p>\n\n<pre><code>int argumentNumber = 2;\nusing ItsType = NthTypeOf&lt;argumentNumber, Arguments...&gt;;\n</code></pre>\n\n<p>would result in compile error:</p>\n\n<blockquote>\n  <p>Error : non-type template argument is not a constant expression</p>\n</blockquote>\n\n<p>Is there a way to access Nth type at runtime?</p>\n\n<hr>\n\n<p><strong>Here's my use case:</strong></p>\n\n<p>My program reads a text file, which is basically an array of numbers. Each number <em>i</em> refers to the <em>i</em>-th type of a template parameter pack that my class is templated based on. Based on that type, I want to declare a variable of that type and do something differently with it. For example, if it's a string, I want to declare a string and do string matching, and if it's an integer, I would like to compute the square root of a number.  </p>\n"}, {"tags": ["c++", "arrays", "string", "char", "comparison"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1497464027, "post_id": 44551831, "comment_id": 76094348, "body": "Use <code>std::string</code> in place of <code>char[]</code> and your sanity will thank you."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 4453271, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007290420051/picture?type=large", "display_name": "Mahig Yahok", "link": "https://stackoverflow.com/users/4453271/mahig-yahok"}, "edited": false, "score": 0, "creation_date": 1497465257, "post_id": 44551887, "comment_id": 76094987, "body": "How do I read with string from file? I get <code>error: no matching function for call to &#39;std::basic_ifstream&lt;char&gt;::get(std::string&amp;, int)</code> at the line <code>read.get(name[i], 10);</code> if I change char to string."}, {"owner": {"reputation": 87, "user_id": 4453271, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007290420051/picture?type=large", "display_name": "Mahig Yahok", "link": "https://stackoverflow.com/users/4453271/mahig-yahok"}, "edited": false, "score": 0, "creation_date": 1497465752, "post_id": 44551887, "comment_id": 76095252, "body": "Problem is that right now I&#39;m preparing for my school exam and I don&#39;t know if we will be allowed to use additional libraries, so I&#39;d rather learn how to make this code work without them"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 87, "user_id": 4453271, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007290420051/picture?type=large", "display_name": "Mahig Yahok", "link": "https://stackoverflow.com/users/4453271/mahig-yahok"}, "edited": false, "score": 1, "creation_date": 1497465806, "post_id": 44551887, "comment_id": 76095274, "body": "OK then @MahigYahok, you can use <code>strcmp()</code>, as I am mentioning in my answer."}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 6, "last_activity_date": 1497465914, "last_edit_date": 1497465914, "creation_date": 1497464078, "answer_id": 44551887, "question_id": 44551831, "link": "https://stackoverflow.com/questions/44551831/comparing-char-in-c/44551887#44551887", "title": "Comparing char in c++", "body": "<p>In C++, we tend to use <a href=\"http://www.cplusplus.com/reference/string/string/\" rel=\"nofollow noreferrer\"><code>std::string</code></a> over <code>char[]</code>. The first has the equality operator overloaded, thus your code shall work. With the latter, you need <a href=\"http://www.cplusplus.com/reference/cstring/strcmp/\" rel=\"nofollow noreferrer\"><code>strcmp()</code></a> to achieve your goal.</p>\n\n<p>Now your code could like this (I used std::vector, but you can use an array of string, but I do not recommend it):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main()\n{\n    ifstream infile(\"data.txt\");\n    int n;\n    infile &gt;&gt; n;\n    vector&lt;string&gt; name(n);\n    int amount[n], i = 0;\n    while (infile &gt;&gt; name[i] &gt;&gt; amount[i])\n    {\n        cout &lt;&lt; name[i] &lt;&lt; \" \" &lt;&lt; amount[i] &lt;&lt; endl;\n        i++;\n    }\n    // do your logic\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>By the way, you could use <a href=\"http://www.cplusplus.com/reference/utility/pair/\" rel=\"nofollow noreferrer\"><code>std::pair</code></a>, to make your code more readable, where the first member would be the name and the second the amount.</p>\n\n<hr>\n\n<p>Unrelated to your problem, <code>main()</code> tends to <code>return 0;</code> when everything is fine, whereas you return 1.</p>\n\n<p>PS: Here is a working example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;utility&gt;\n\nusing namespace std;\n\nint main()\n{\n    ifstream infile(\"data.txt\");\n    int n;\n    infile &gt;&gt; n;\n    vector&lt;string&gt; name(n);\n    int amount[n], i = 0;\n    while (infile &gt;&gt; name[i] &gt;&gt; amount[i])\n    {\n//        cout &lt;&lt; name[i] &lt;&lt; \" \" &lt;&lt; amount[i] &lt;&lt; endl;\n        i++;\n    }\n\n\n    vector&lt; pair&lt;string, int&gt; &gt; result;\n    bool found;\n    for(int i = 0; i &lt; name.size(); ++i)\n    {\n        found = false;\n        for(int j = 0; j &lt; result.size(); ++j)\n        {\n            if(name[i] == result[j].first)\n            {\n                result[j].second += amount[i];\n                found = true;\n            }\n        }\n        if(!found)\n        {\n            result.push_back({name[i], amount[i]});\n        }\n    }\n\n    cout &lt;&lt; \"RESULTS:\\n\";\n    for(int i = 0; i &lt; result.size(); ++i)\n        cout &lt;&lt; result[i].first &lt;&lt; \" \" &lt;&lt; result[i].second &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Georgioss-MacBook-Pro:~ gsamaras$ g++ -Wall -std=c++0x main.cpp \nGeorgioss-MacBook-Pro:~ gsamaras$ ./a.out \nRESULTS:\nwood 19\ngold 21\nsilver 15\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1497464569, "creation_date": 1497464569, "answer_id": 44552016, "question_id": 44551831, "link": "https://stackoverflow.com/questions/44551831/comparing-char-in-c/44552016#44552016", "title": "Comparing char in c++", "body": "<p>The char[] == operator you're using is comparing pointer values, rather than string comparison values.  ie you're comparing the position of the first characters in memory.  </p>\n\n<p>As a side note,  char name[10][n]; is invalid; as that n would have to be a compile time constant.  I'd suggest std::vector as a replacement.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1497464717, "creation_date": 1497464717, "answer_id": 44552060, "question_id": 44551831, "link": "https://stackoverflow.com/questions/44551831/comparing-char-in-c/44552060#44552060", "title": "Comparing char in c++", "body": "<p>Ok, gcc is know to accept it but Variable Length Arrays are not supported in C++, so this line:</p>\n\n<pre><code>char name[10][n]; // 10 symbols are given for items name\n</code></pre>\n\n<p>is not conformant and should have given at least a warning.</p>\n\n<p>The C++ way to deal with array whose dimension is only known at run time is to use <code>std::vector</code>.</p>\n\n<p>But your real problem is that neither a raw char array nor a pointer to char have an overriden <code>==</code> operator (it is not possible for arrays or pointers), so in your <code>name[i]==name[d]</code> you are actually comparing the addresses because the arrays decay to pointers to their first element when used in expressions. So your test is the same as <code>if (&amp;name[i][0] == &amp;name[d][0)</code> and cannot give expected result.</p>\n\n<p>You can use <code>strcmp</code> to compare null terminated char arrays (also known as C strings) or better use <code>std::string</code> which has an overidden <code>==</code> operator.</p>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 2065917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed7c5d1b54f76ed10b386f8fe1c47643?s=128&d=identicon&r=PG", "display_name": "Vraj Pandya", "link": "https://stackoverflow.com/users/2065917/vraj-pandya"}, "is_accepted": false, "score": 0, "last_activity_date": 1497465987, "creation_date": 1497465987, "answer_id": 44552442, "question_id": 44551831, "link": "https://stackoverflow.com/questions/44551831/comparing-char-in-c/44552442#44552442", "title": "Comparing char in c++", "body": "<p>If you just wish to add the number then you can use an <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\">unordered_map</a>. It is similar to the hash table in java. </p>\n"}], "owner": {"reputation": 87, "user_id": 4453271, "user_type": "registered", "profile_image": "https://graph.facebook.com/100007290420051/picture?type=large", "display_name": "Mahig Yahok", "link": "https://stackoverflow.com/users/4453271/mahig-yahok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 17110, "favorite_count": 0, "accepted_answer_id": 44551887, "answer_count": 4, "score": 6, "last_activity_date": 1497466098, "creation_date": 1497463900, "last_edit_date": 1497466098, "question_id": 44551831, "link": "https://stackoverflow.com/questions/44551831/comparing-char-in-c", "title": "Comparing char in c++", "body": "<p>This is my text file that I'm taking data from</p>\n\n<pre><code>10\nwood      8\ngold      7\nsilver    5\ngold      9\nwood      1\nsilver    1\nsilver    9\nwood      3\ngold      5\nwood      7\n</code></pre>\n\n<p>I'm supposed to find goods with the same name and add all of their amounts, so final result should be wood=19; gold=21; silver=15. This is what I did so far</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main()\n{\n    ifstream read(\"data.txt\");\n    int n;\n    read &gt;&gt; n;\n    char name[10][n]; // 10 symbols are given for items name\n    int amount[n];\n    for(int i=0; i&lt;n; i++)\n    {\n    read.ignore(80, '\\n');\n    read.get(name[i], 10);\n    read &gt;&gt; amount[i];\n    }\n\nfor(int i=0; i&lt;n; i++)\n{\n    for(int d=1; d&lt;n; d++)\n    {\n    if(name[i]==name[d] &amp;&amp; i!=d)\n    {\n\n    }\n    }\n}\n    return 1;\n}\n</code></pre>\n\n<p>Problem so far is that <code>name[i]==name[d]</code> doesn't react even is for example <code>name[i]=\"wood\"</code> and <code>name[d]=\"wood\"</code></p>\n"}, {"tags": ["c++", "templates", "uml", "enterprise-architect"], "comments": [{"owner": {"reputation": 704, "user_id": 7752933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18bb616cc2b49c311f22620c92faa5a2?s=128&d=identicon&r=PG&f=1", "display_name": "Mart10", "link": "https://stackoverflow.com/users/7752933/mart10"}, "edited": false, "score": 0, "creation_date": 1497464530, "post_id": 44551805, "comment_id": 76094611, "body": "this is forward engineering right? What is the uml way to represent this?"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 5464236, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8bb839f7902af930ad79d4520592aa3f?s=128&d=identicon&r=PG&f=1", "display_name": "CodingHero", "link": "https://stackoverflow.com/users/5464236/codinghero"}, "edited": false, "score": 0, "creation_date": 1497466730, "post_id": 44552094, "comment_id": 76095852, "body": "Good information. In addition to being new to EA I&#39;m fairly new to modeling so keeping in mind that UML can&#39;t represent every detail of the implementation is definitely good advice. Thanks!"}], "tags": [], "owner": {"reputation": 704, "user_id": 7752933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18bb616cc2b49c311f22620c92faa5a2?s=128&d=identicon&r=PG&f=1", "display_name": "Mart10", "link": "https://stackoverflow.com/users/7752933/mart10"}, "is_accepted": true, "score": 2, "last_activity_date": 1497464828, "creation_date": 1497464828, "answer_id": 44552094, "question_id": 44551805, "link": "https://stackoverflow.com/questions/44551805/model-template-function-in-enterprise-architect/44552094#44552094", "title": "Model template function in Enterprise Architect", "body": "<p>Template Functions are not supported by UML, so I doubt that Enterprise Architect would.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/29491771/template-method-in-uml\">Here's a similar answer</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/16526051/how-to-represent-generic-parameter-in-uml-method\">Which itself is referring to this</a></p>\n\n<p>But in short, keep in mind that UML is a designing language, not a programming language, so you cannot expect it to have an answer to every semantics of every programming language</p>\n"}], "owner": {"reputation": 171, "user_id": 5464236, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8bb839f7902af930ad79d4520592aa3f?s=128&d=identicon&r=PG&f=1", "display_name": "CodingHero", "link": "https://stackoverflow.com/users/5464236/codinghero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 746, "favorite_count": 0, "accepted_answer_id": 44552094, "answer_count": 1, "score": 1, "last_activity_date": 1497464828, "creation_date": 1497463768, "question_id": 44551805, "link": "https://stackoverflow.com/questions/44551805/model-template-function-in-enterprise-architect", "title": "Model template function in Enterprise Architect", "body": "<p>I am admittedly an Enterprise Architect newbie. I'd like to model a template function but haven't found any resources that explain how to do so. The closest was another topic here on Stack Overflow that has no answers in over 2 years:\n<a href=\"https://stackoverflow.com/questions/29989894/uml-template-function-modelling-in-enterprise-architect\">UML template function modelling in enterprise architect</a></p>\n\n<p>My goal is to implement a class that can handle data of any type but does not itself need to know details of the type. The outline of such a class would look something like the following:</p>\n\n<pre><code>class Foo {\n    public:\n    Foo();\n    ~Foo();\n\n    template&lt;typename T&gt;\n    bool SendData(T const&amp; data);\n\n    private:\n    int attribute1;\n    char attribute2;\n}\n</code></pre>\n\n<p>I don't want to make this a template class as only one or two operations actually need (or should) to be generic. I know I could add a custom stereotype and modify the code generation templates, but I don't know how to do this \"the right way.\" The best I can envision is applying some custom stereotype to an operation that ALWAYS prepends <code>template &lt;typename T&gt;</code> verbatim to a method and has no room for flexibility.</p>\n\n<p>Does anyone know the \"correct\" way to achieve this in Enterprise Architect?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1497462963, "post_id": 44551548, "comment_id": 76093756, "body": "<code>fd &gt;&gt; k[i] &gt;&gt; t</code>... Don&#39;t you mean <code>t[i]</code>?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 3, "creation_date": 1497463143, "post_id": 44551548, "comment_id": 76093863, "body": "You may want to consider using one array of a structure that contains <code>k,t,</code> and <code>zaidnez</code>."}, {"owner": {"reputation": 11, "user_id": 6411950, "user_type": "registered", "profile_image": "https://graph.facebook.com/1444860702251539/picture?type=large", "display_name": "dkisonas", "link": "https://stackoverflow.com/users/6411950/dkisonas"}, "edited": false, "score": 0, "creation_date": 1497463180, "post_id": 44551548, "comment_id": 76093889, "body": "I feel so stupid... thanks"}], "owner": {"reputation": 11, "user_id": 6411950, "user_type": "registered", "profile_image": "https://graph.facebook.com/1444860702251539/picture?type=large", "display_name": "dkisonas", "link": "https://stackoverflow.com/users/6411950/dkisonas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497462860, "creation_date": 1497462860, "question_id": 44551548, "link": "https://stackoverflow.com/questions/44551548/getting-an-error-no-match-for-operator", "title": "getting an error &quot;no match for &#39;operator&gt;&gt;&#39;", "body": "<p>I'm working on a task and I made a function. I wanted to check if it does what I want it to but I'm getting an error in the 27th line which says:</p>\n\n<pre><code>|27|error: no match for 'operator&gt;&gt;' (operand types are 'std::basic_istream&lt;char&gt;::__istream_type {aka std::basic_istream&lt;char&gt;}' and 'int [40]')|\n</code></pre>\n\n<p>I don't know how to fix it and would appreciate any answers. Here's my work:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;cmath&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint k[96], t[40], zaidnez[40];\nint n, zaide = 0, nezaide = 0;\n\nvoid skaitymas();\n//void didziausias();\n//void spausdinimas();\n\nint main(){\n    skaitymas();\n    cout &lt;&lt; k[1] &lt;&lt; \" \" &lt;&lt; t &lt;&lt; \" \" &lt;&lt; zaidnez[1];\n\nreturn 0;\n}\n\nvoid skaitymas()\n{\n    ifstream fd (\"u1.txt\");\n    fd &gt;&gt; n;\n    for(int i = 0; i &lt; n; i++){\n        fd &gt;&gt; k[i] &gt;&gt; t;\n        for(int j = 0; j &lt; t; j++){\n            fd &gt;&gt; zaidnez[j];\n        }\n    }\n    fd.close;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "operator-overloading", "assignment-operator"], "answers": [{"comments": [{"owner": {"reputation": 269, "user_id": 6390409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/263f2f647a46c6b4d0ea43d387097b67?s=128&d=identicon&r=PG&f=1", "display_name": "Juddy", "link": "https://stackoverflow.com/users/6390409/juddy"}, "edited": false, "score": 0, "creation_date": 1497462978, "post_id": 44551490, "comment_id": 76093773, "body": "Wouldn&#39;t it lead to unnecessarily duplicated code when the only difference is the check for self-assignment? Or to over-complication if, alternatively, I follow your suggestion and in addition implement a private function that actually does the assignment and is called by both versions of the <code>operator=</code>?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1497463066, "post_id": 44551490, "comment_id": 76093823, "body": "<code>template&lt;&gt; class MyClass&lt;int&gt;:public MyClass&lt;long&gt;</code> ;)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 269, "user_id": 6390409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/263f2f647a46c6b4d0ea43d387097b67?s=128&d=identicon&r=PG&f=1", "display_name": "Juddy", "link": "https://stackoverflow.com/users/6390409/juddy"}, "edited": false, "score": 0, "creation_date": 1497463380, "post_id": 44551490, "comment_id": 76094008, "body": "@Juddy, If there are two or less members, I wouldn&#39;t worry about duplicated code. Otherwise, it makes sense to have <code>private</code> member function that contains the common code."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1497463406, "post_id": 44551490, "comment_id": 76094018, "body": "@Yakk, that was cryptic for me. Would you please elaborate?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1497463515, "post_id": 44551490, "comment_id": 76094084, "body": "@RSahu If <code>MyClass&lt;int&gt;</code> is also a <code>MyClass&lt;long&gt;</code> what happens to your code?  I honestly don&#39;t know, but it seems like something could break."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1497464578, "post_id": 44551490, "comment_id": 76094636, "body": "@Yakk, yes, it does break. See <a href=\"http://ideone.com/AqCsa3\" rel=\"nofollow noreferrer\">ideone.com/AqCsa3</a>. Would definitely like to see &quot;Came to MyClass&lt;T&gt;::operator=(const MyClass&amp; rhs)&quot; with that program."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1497465253, "last_edit_date": 1497465253, "creation_date": 1497462627, "answer_id": 44551490, "question_id": 44551353, "link": "https://stackoverflow.com/questions/44551353/checking-for-self-assignment-when-overloading-operator-for-template-class-of-ge/44551490#44551490", "title": "Checking for self-assignment when overloading operator= for template class of generic type", "body": "<p>I would recommend overloading <code>operator=</code>.</p>\n\n<pre><code>template&lt;class T&gt;\nclass MyClass\n{\n    template&lt;class U&gt;\n    friend class MyClass;\n    T value;\n\n    template&lt;class U&gt;\n    MyClass&amp; operator=(const MyClass&lt;U&gt;&amp; rhs) { ... }\n\n    // Overload for MyClass&lt;T&gt;\n    MyClass&amp; operator=(const MyClass&amp; rhs) { ... }\n};\n</code></pre>\n\n<p>and check for self-assignment only in the second overload.</p>\n\n<hr>\n\n<p>I want to point out that the above logic breaks if specializations of <code>MyClass</code> are not simple. For example, if you use:</p>\n\n<pre><code>template&lt;&gt; class MyClass&lt;int&gt;:public MyClass&lt;long&gt; { ... };\n</code></pre>\n\n<p>the code to check for self assignment doesn't get invoked. See <a href=\"http://ideone.com/AqCsa3\" rel=\"nofollow noreferrer\">http://ideone.com/AqCsa3</a>.</p>\n\n<p>I would definitely have liked to have seen </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Came to MyClass&lt;T&gt;::operator=(const MyClass&amp; rhs)\n</code></pre>\n\n<p>as output of that program.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1497464693, "last_edit_date": 1497464693, "creation_date": 1497463973, "answer_id": 44551850, "question_id": 44551353, "link": "https://stackoverflow.com/questions/44551353/checking-for-self-assignment-when-overloading-operator-for-template-class-of-ge/44551850#44551850", "title": "Checking for self-assignment when overloading operator= for template class of generic type", "body": "<p><code>same_object</code> is a function that takes two references, and returns true if they both refer to the same object; not the same <em>address</em>, but the same object.</p>\n\n<pre><code>template&lt;class T, class U, class=void&gt;\nstruct same_object_t {\n  constexpr bool operator()(T const volatile&amp;, U const volatile&amp;)const{return false;}\n};\ntemplate&lt;class T&gt;\nstruct same_object_t&lt;T,T,void&gt; {\n  bool operator()(T const volatile&amp; lhs, T const volatile&amp; rhs)const{\n    return std::addressof(lhs) == std::addressof(rhs);\n  }\n};\ntemplate&lt;class T, class U&gt;\nstruct same_object_t&lt;T,U,\n  typename std::enable_if&lt;\n    std::is_base_of&lt;T, U&gt;::value &amp;&amp; !std::is_same&lt;T,U&gt;::value\n  &gt;::type\n&gt;:\n  same_object_t&lt;T,T&gt;\n{};\ntemplate&lt;class T, class U&gt;\nstruct same_object_t&lt;T,U,\n  typename std::enable_if&lt;\n    std::is_base_of&lt;U, T&gt;::value &amp;&amp; !std::is_same&lt;T,U&gt;::value\n  &gt;::type\n&gt;:\n  same_object_t&lt;U,U&gt;\n{};\ntemplate&lt;class T, class U&gt;\nconstexpr bool same_object(T const volatile&amp; t, U const volatile&amp; u) {\n  return same_object_t&lt;T,U&gt;{}(t, u);\n}\n\ntemplate&lt;class T&gt;\ntemplate&lt;class U&gt;\nMyClass&lt;T&gt;&amp; MyClass&lt;T&gt;::operator=(const MyClass&lt;U&gt;&amp; rhs)\n{\n  if (!same_object(*this, rhs)) {\n    value = static_cast&lt;T&gt;(rhs.value);\n  }\n  return *this;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/83b9352e2a63e38c\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<p>Two distinct objects can share an address due to unions and standard layout \"first member\" address sharing, as well as an array and the first element of the array.  Those cases return <code>false</code> from <code>same_object</code>.</p>\n\n<p><code>private</code>/<code>protected</code> inheritance can break this, as can a type U that inherits from a type T through more than one path.</p>\n"}], "owner": {"reputation": 269, "user_id": 6390409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/263f2f647a46c6b4d0ea43d387097b67?s=128&d=identicon&r=PG&f=1", "display_name": "Juddy", "link": "https://stackoverflow.com/users/6390409/juddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 1, "accepted_answer_id": 44551850, "answer_count": 2, "score": 1, "last_activity_date": 1497465253, "creation_date": 1497462109, "last_edit_date": 1497463600, "question_id": 44551353, "link": "https://stackoverflow.com/questions/44551353/checking-for-self-assignment-when-overloading-operator-for-template-class-of-ge", "title": "Checking for self-assignment when overloading operator= for template class of generic type", "body": "<p>Usually, when overloading and assign operator, one should check for self-assignment. In a simple non-templated class it would like the following:</p>\n\n<pre><code>MyClass&amp; MyClass::operator=(const MyClass&amp; rhs) {\n    if (this != &amp;rhs) {\n        // do the assignment\n    }\n\n    return *this;\n}\n</code></pre>\n\n<p>However, suppose that <code>MyClass</code> is templated, and that we want to generalize the assignment operator overloading for generic types that that the class can have:</p>\n\n<pre><code>template&lt;class T&gt;\nclass MyClass\n{\n    template&lt;class U&gt;\n    friend class MyClass;\n    T value;\n\n    template&lt;class U&gt;\n    MyClass&lt;T&gt;&amp; operator=(const MyClass&lt;U&gt;&amp; rhs)\n\n    //... other stuff\n}\n\ntemplate&lt;class T&gt;\ntemplate&lt;class U&gt;\nMyClass&lt;T&gt;&amp; MyClass&lt;T&gt;::operator=(const MyClass&lt;U&gt;&amp; rhs)\n{\n    if (this != &amp;rhs) { //this line gives an error\n        value = (T)rhs.value;\n    }\n}\n</code></pre>\n\n<p>In the above case, the line <code>if (this != &amp;rhs)</code> would give a compiler error. In MS Visual Studio 2015, it is the error C2446:</p>\n\n<blockquote>\n  <p>'==': no conversion from 'const MyClas&lt; T > *' to 'MyClass&lt; U > *const '</p>\n</blockquote>\n\n<p>Therefore, how could I implement the checking for self-assignment when working with an assignment operator that can take at the right hand side an instance of <code>MyClass</code> of generic templated type?</p>\n"}, {"tags": ["c++", "r", "pointers", "rcpp"], "comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1497466517, "post_id": 44551327, "comment_id": 76095726, "body": "This is pretty long already yet I don&#39;t get the feeling I know what your real question is.  You&#39;d never do <code>XPtr&lt;double&gt;</code> as you have <code>NumericVector</code> for <code>double</code>.  So I am unsure what it is you need help with."}, {"owner": {"reputation": 1541, "user_id": 4032278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-vz6MgKOVDIU/AAAAAAAAAAI/AAAAAAAAADA/1UVma4OeTDE/photo.jpg?sz=128", "display_name": "Eric", "link": "https://stackoverflow.com/users/4032278/eric"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1497472678, "post_id": 44551327, "comment_id": 76098871, "body": "In the actual use case, I need to keep track of a CUdeviceptr which apparently is typdef&#39;d as unsigned int, which depending on architecture could be the dreaded unsigned long long int I take it. Since I already have the value on the C side it seemed simplest just to keep track of it via Xptr. The solution above works fine but I wondered if maybe I am approaching it All Wrong. Which remains a possibility."}, {"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1497473096, "post_id": 44551327, "comment_id": 76099119, "body": "Ok. That&#39;s better -- we do use XPtr for things R does not know about, and/or cannot map, ie database and other handles.  Do you need to bring it back to R?  Else you could just have a class in the C++ file ..."}, {"owner": {"reputation": 1541, "user_id": 4032278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-vz6MgKOVDIU/AAAAAAAAAAI/AAAAAAAAADA/1UVma4OeTDE/photo.jpg?sz=128", "display_name": "Eric", "link": "https://stackoverflow.com/users/4032278/eric"}, "reply_to_user": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "edited": false, "score": 0, "creation_date": 1497474688, "post_id": 44551327, "comment_id": 76099947, "body": "Yes, it needs to come back to R so the user can load up data on the GPU and then call one or more kernels one or more times passing in the pointers to the data in appropriate order to match the kernel signatures. (Yes, RCUDA might meet all our use cases but I try to keep the black boxes in my mind to a minimum.)"}], "owner": {"reputation": 1541, "user_id": 4032278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-vz6MgKOVDIU/AAAAAAAAAAI/AAAAAAAAADA/1UVma4OeTDE/photo.jpg?sz=128", "display_name": "Eric", "link": "https://stackoverflow.com/users/4032278/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1497462003, "creation_date": 1497462003, "question_id": 44551327, "link": "https://stackoverflow.com/questions/44551327/rcpp-is-a-wrapping-class-the-only-way-to-preserve-fundamental-types-pointed-to", "title": "Rcpp: Is a wrapping class the only way to preserve fundamental types pointed to by Xptr?", "body": "<p>I have a fair bit of experience with R, but am only now getting down to the business of learning C++, so I beg forgiveness for any ensuing stupidity....</p>\n\n<p>Given the following test.cpp file:</p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n#include &lt;string&gt;\nusing namespace Rcpp;\nusing namespace std;\n\nXPtr&lt; double &gt; getPtr(NumericVector x) {\n  double i;\n  i = REAL(x)[0];\n  XPtr&lt; double &gt; p(&amp;i, false);\n  XPtr&lt;double&gt; checkP(p);\n  double checkV = *checkP;\n  cout &lt;&lt; \"Values within getPtr scope:\" &lt;&lt; endl;\n  cout &lt;&lt; \"Pointer address \" &lt;&lt; hex &lt;&lt; checkP &lt;&lt; endl;\n  cout &lt;&lt; \"Pointer value \" &lt;&lt; checkV &lt;&lt; endl;\n  return p;\n}\n\n// [[Rcpp::export]]\nvoid testPtr(NumericVector x){ \n  XPtr&lt;double&gt; p(getPtr(x));\n  cout &lt;&lt; \"Values outside of getPtr scope:\" &lt;&lt; endl;\n  cout &lt;&lt; \"Pointer address \" &lt;&lt; hex &lt;&lt; p &lt;&lt; endl;\n  cout &lt;&lt; \"Pointer value \" &lt;&lt; *p &lt;&lt; endl;\n  return;\n}\n</code></pre>\n\n<p>The following R snippet demonstrates that the value pointed to by the Xptr \"disappears\" outside the getPtr function.  </p>\n\n<pre><code>&gt; library(Rcpp)\n&gt; Rcpp::sourceCpp(file=\"test.cpp\")\n&gt; \n&gt; test &lt;- c(35,28,16,52)\n&gt; testPtr(test)\nValues within getPtr scope:\nPointer address 0x7ffd3763d790\nPointer value 35\nValues outside of getPtr scope:\nPointer address 0x7ffd3763d790\nPointer value 6.95277e-310\n</code></pre>\n\n<p>But of course! Since that value is out of scope, this is expected behavior.  </p>\n\n<p>Alternatively, if I wrap the value in a class and use <code>new</code>, the object persists and I can retrieve my value outside the scope of the called function:</p>\n\n<pre><code>class Wrap {\npublic:\n  Wrap(double x) {\n    i = x;\n  }\n  double i;\n};\n\nXPtr&lt; Wrap &gt; getPtrW(NumericVector x) {\n  double i;\n  i = REAL(x)[0];\n  Wrap* w = new Wrap(i);\n  XPtr&lt; Wrap &gt; p(w, true);\n  return p;\n}\n\n// [[Rcpp::export]]\nvoid testWrappedPtr(NumericVector x){ \n  XPtr&lt;Wrap&gt; wp(getPtrW(x));\n  Wrap w = *(wp);\n  cout &lt;&lt; \"Wrapped value \" &lt;&lt; w.i &lt;&lt; endl;\n  return;\n}\n</code></pre>\n\n<p>Then this demonstrates that the value persists as desired:</p>\n\n<pre><code>&gt; testWrappedPtr(test)\nWrapped value 35\n</code></pre>\n\n<p>My questions (at last) are these: (1) Is this (i.e. wrapping in a class) the only way to hang on to values of variables that are fundamental types and not malloc'd or new'd and (2) if not, are any of the alternative ways \"better\" or \"preferred\"?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "c++14", "visual-studio-2017", "c++17", "auto"], "comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1497461786, "post_id": 44551202, "comment_id": 76093070, "body": "<code>auto&amp;&amp;</code> should be supported by MSVC."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1497462242, "post_id": 44551202, "comment_id": 76093355, "body": "<code>Finally&lt;F&gt; make_finally(F&amp;&amp; f)</code> should that not be <code>Finally&lt;std::decay_t&lt;F&gt;&gt; make_finally(F&amp;&amp; f)</code>?"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 3, "creation_date": 1497462431, "post_id": 44551202, "comment_id": 76093477, "body": "Why is this compiling with Clang?  The return from <code>make_finally</code> wants to call the (deleted) move constructor for <code>Finally</code>.  Event if it is optimized out, it should still need to be available."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1497462670, "post_id": 44551202, "comment_id": 76093605, "body": "@1201ProgramAlarm If <code>make_finally</code> is a candidate for RVO, since C++17 guarantees RVO, you don&#39;t need the move constructor IIRC"}, {"owner": {"reputation": 7838, "user_id": 383045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72da00bd74a5744f9cb89d1a52a6d447?s=128&d=identicon&r=PG", "display_name": "yzt", "link": "https://stackoverflow.com/users/383045/yzt"}, "edited": false, "score": 0, "creation_date": 1497462694, "post_id": 44551202, "comment_id": 76093618, "body": "Am I missing something or this should work with <code>auto const &amp; doFinally = ...</code> as well?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 3, "creation_date": 1497463959, "post_id": 44551202, "comment_id": 76094308, "body": "People! There is NO moving here. <code>make_finally()</code> creates a <code>Finally&lt;F&gt;</code> directly in the return object, which is then bound to the reference <code>doFinally</code>. No moving happens anywhere, even without the new value categories, even with <code>-fno-elide-constructors</code>."}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1497463997, "post_id": 44551202, "comment_id": 76094330, "body": "The code you&#39;ve posted <a href=\"https://godbolt.org/g/pnva2c\" rel=\"nofollow noreferrer\">compiles fine on MSVC 2017</a>..."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1497464026, "post_id": 44551202, "comment_id": 76094346, "body": "@Barry That&#39;s only true in C++17. Why does this work in C++11 as well?"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1497464048, "post_id": 44551202, "comment_id": 76094365, "body": "@cdhowie : That&#39;s true of all instances of list-initialization, from C++11 onwards."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1497464049, "post_id": 44551202, "comment_id": 76094364, "body": "@cdhowie That was true in C++11."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1497464101, "post_id": 44551202, "comment_id": 76094393, "body": "Derp, I forgot that we&#39;re binding the return value to a reference. Ignore me."}, {"owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "edited": false, "score": 0, "creation_date": 1497466053, "post_id": 44551202, "comment_id": 76095416, "body": "I&#39;ve found that whether it compiles or not depends on whether <code>return { std::forward&lt;F&gt;(f) };</code> or <code>return Finally&lt;F&gt;{ std::forward&lt;F&gt;(f) };</code> is used. I&#39;ve updated the question."}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1497467219, "post_id": 44551202, "comment_id": 76096087, "body": "@SergeRogatch : As was said, list-initialization constructs directly into the return value."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1497467651, "post_id": 44552799, "comment_id": 76096294, "body": "I wouldn&#39;t have said &quot;directly initializes&quot;, too easy to confuse."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1497469137, "post_id": 44552799, "comment_id": 76097059, "body": "@T.C. Removed the word direct everywhere. Hard to carefully pick words that don&#39;t mean different things in different contexts."}, {"owner": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1497534619, "post_id": 44552799, "comment_id": 76127274, "body": "&quot;There is no moving anywhere at all. Not a move that would be elided thanks to RVO, not a move that would be elided thanks to guaranteed elision in C++17 with the new value categories. &quot;. This is extreme confusing, because you make a difference between &quot;no moving at all&quot; and &quot;moving that is guaranteed to be elided in C++17&quot;. Therefore, minus 1"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 464288, "user_id": 34509, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/7FnYg.jpg?s=128&g=1", "display_name": "Johannes Schaub - litb", "link": "https://stackoverflow.com/users/34509/johannes-schaub-litb"}, "edited": false, "score": 0, "creation_date": 1497535679, "post_id": 44552799, "comment_id": 76128058, "body": "@JohannesSchaub-litb Can&#39;t please everyone I guess. I&#39;m trying to establish that the reason for the lack of move <i>isn&#39;t</i> due to C++17. It doesn&#39;t help that the actual paper is called &quot;guaranteed copy elision&quot;"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1497468911, "last_edit_date": 1497468911, "creation_date": 1497467240, "answer_id": 44552799, "question_id": 44551202, "link": "https://stackoverflow.com/questions/44551202/support-for-auto-for-msvc2017/44552799#44552799", "title": "Support for `auto&amp;&amp;` for MSVC++2017", "body": "<blockquote>\n  <p>So what is the difference between <code>return { std::forward&lt;F&gt;(f) };</code> and <code>return Finally&lt;F&gt;{ std::forward&lt;F&gt;(f) };</code></p>\n</blockquote>\n\n<p>The former initializes the return object in place. So when you have:</p>\n\n<pre><code>X foo() { return {a, b, c}; }\nauto&amp;&amp; res = foo();\n</code></pre>\n\n<p>This will construct an <code>X</code> in place and then bind <code>res</code> to it. There is no moving anywhere at all. Not a move that would be elided thanks to RVO, not a move that would be elided thanks to guaranteed elision in C++17 with the new value categories. At no point are we even considering moving anything. There is only ever one <code>X</code> (even in C++11, even with <code>-fno-elide-constructors</code>, because there is no constructor call to elide). </p>\n\n<p>By contrast, this:</p>\n\n<pre><code>X bar() { return X{a, b, c}; }\nauto&amp;&amp; res2 = bar();\n</code></pre>\n\n<p>Before C++17, would create a temporary <code>X</code> and then move it into the return of <code>bar()</code>. This would be a candidate for RVO and the move would surely be elided away, but in order to elide a move, a move has to actually be possible to begin with. And in our case, <code>X</code>'s move constructor is deleted so this code is ill-formed. This leads to a situation that is best described by Richard Smith's comment in <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0135r0.html\" rel=\"nofollow noreferrer\">P0135R0</a>:</p>\n\n<blockquote>\n<pre><code>// error, can't perform the move you didn't want,\n// even though compiler would not actually call it\n</code></pre>\n</blockquote>\n\n<p><em>After</em> C++17, there is no temporary. We have a prvalue of type <code>X</code> that we are using to initialize the return object of <code>bar()</code>, so we end up simply initializing the return object from the prvalue's initializer. The behavior is equivalent to the <code>foo()</code> example above. No move will be done. </p>\n"}], "owner": {"reputation": 10955, "user_id": 1915854, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/gIC27.jpg?s=128&g=1", "display_name": "Serge Rogatch", "link": "https://stackoverflow.com/users/1915854/serge-rogatch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 44552799, "answer_count": 1, "score": 0, "last_activity_date": 1497468911, "creation_date": 1497461520, "last_edit_date": 1497465986, "question_id": 44551202, "link": "https://stackoverflow.com/questions/44551202/support-for-auto-for-msvc2017", "title": "Support for `auto&amp;&amp;` for MSVC++2017", "body": "<p>In <a href=\"https://stackoverflow.com/a/44521132/1915854\">this answer</a> they suggest to use the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename F&gt;\nclass Finally {\n    F f;\npublic:\n    template &lt;typename Func&gt;\n    Finally(Func&amp;&amp; func) : f(std::forward&lt;Func&gt;(func)) {}\n    ~Finally() { f(); }\n\n    Finally(const Finally&amp;) = delete;\n    Finally(Finally&amp;&amp;) = delete;\n    Finally&amp; operator =(const Finally&amp;) = delete;\n    Finally&amp; operator =(Finally&amp;&amp;) = delete;\n};\n\ntemplate &lt;typename F&gt;\nFinally&lt;F&gt; make_finally(F&amp;&amp; f)\n{\n    return Finally&lt;F&gt;{ std::forward&lt;F&gt;(f) }; // This doesn't compile\n    //This compiles: return { std::forward&lt;F&gt;(f) };\n}\n\n\nint main()\n{\n    auto&amp;&amp; doFinally = make_finally([&amp;] { std::cout&lt;&lt;\", world!\\n\"; });\n    std::cout &lt;&lt; \"Hello\";\n}\n</code></pre>\n\n<p>The author linked to a demo that compiles with Clang++/G++ . However, this code does not compile for me in MSVC++2017 .</p>\n\n<p>The error message is:</p>\n\n<pre><code>source_file.cpp(20): error C2280: 'Finally&lt;main::&lt;lambda_9000fb389e10855198e7a01ce16ffa3d&gt;&gt;::Finally(Finally&lt;main::&lt;lambda_9000fb389e10855198e7a01ce16ffa3d&gt;&gt; &amp;&amp;)': attempting to reference a deleted function\nsource_file.cpp(12): note: see declaration of 'Finally&lt;main::&lt;lambda_9000fb389e10855198e7a01ce16ffa3d&gt;&gt;::Finally'\nsource_file.cpp(26): note: see reference to function template instantiation 'Finally&lt;main::&lt;lambda_9000fb389e10855198e7a01ce16ffa3d&gt;&gt; make_finally&lt;main::&lt;lambda_9000fb389e10855198e7a01ce16ffa3d&gt;&gt;(F &amp;&amp;)' being compiled\n        with\n        [\n            F=main::&lt;lambda_9000fb389e10855198e7a01ce16ffa3d&gt;\n        ]\n</code></pre>\n\n<p>So what is the difference between <code>return { std::forward&lt;F&gt;(f) };</code> and <code>return Finally&lt;F&gt;{ std::forward&lt;F&gt;(f) };</code> that one compiles, but the other doesn't?</p>\n\n<p><a href=\"http://rextester.com/QFU34551\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": ["c++", "oop", "methods"], "comments": [{"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 3, "creation_date": 1497461536, "post_id": 44551137, "comment_id": 76092910, "body": "change <code>choose==&#39;1&#39;</code> to <code>choose==1</code> and similarily others, this might be the problem."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1497461620, "post_id": 44551137, "comment_id": 76092965, "body": "You&#39;ve declared <code>int choose</code>, but you&#39;re trying to compare it to a character (<code>if choose == &#39;1&#39;</code>). Remove the quotes around the numbers you&#39;re comparing against."}, {"owner": {"reputation": 31, "user_id": 7716830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ee42f8806c5b639a18e2b790f5e0a5?s=128&d=identicon&r=PG&f=1", "display_name": "abs", "link": "https://stackoverflow.com/users/7716830/abs"}, "edited": false, "score": 0, "creation_date": 1497461693, "post_id": 44551137, "comment_id": 76093012, "body": "It works! Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 1624, "user_id": 7581022, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/exh3E.jpg?s=128&g=1", "display_name": "Oussama Ben Ghorbel", "link": "https://stackoverflow.com/users/7581022/oussama-ben-ghorbel"}, "is_accepted": true, "score": 5, "last_activity_date": 1501253688, "last_edit_date": 1501253688, "creation_date": 1497461689, "answer_id": 44551245, "question_id": 44551137, "link": "https://stackoverflow.com/questions/44551137/why-methods-dont-work/44551245#44551245", "title": "Why methods don&#39;t work?", "body": "<p>You are reading choose as an int: <code>int choose;</code> so you have to treat it as one: </p>\n\n<pre><code>if (choose == 1)\n    k1.add();\nelse if (choose == 2)\n    k1.sub();\nelse if (choose == 3)\n    k1.mul();\nelse if (choose == 4)\n    k1.div();\n</code></pre>\n\n<p>Explanation as requested: </p>\n\n<pre><code>if (choose == '1')\n</code></pre>\n\n<p>This is not wrong syntactically speaking because simply C++ is <a href=\"http://en.cppreference.com/w/cpp/language/implicit_conversion\" rel=\"nofollow noreferrer\">casting implicitly</a> the char '1' to its <a href=\"http://ascii.cl/\" rel=\"nofollow noreferrer\">ASCII code</a> which is an int of value 49. </p>\n\n<p>You were literally doing the following: <code>if (choose == 49)</code> instead of <code>if (choose == 1)</code></p>\n"}], "owner": {"reputation": 31, "user_id": 7716830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ee42f8806c5b639a18e2b790f5e0a5?s=128&d=identicon&r=PG&f=1", "display_name": "abs", "link": "https://stackoverflow.com/users/7716830/abs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 44551245, "answer_count": 1, "score": 0, "last_activity_date": 1501253688, "creation_date": 1497461286, "question_id": 44551137, "link": "https://stackoverflow.com/questions/44551137/why-methods-dont-work", "title": "Why methods don&#39;t work?", "body": "<p>I'm programming a calculator and when I  choose for example first option, program stops. I can't enter any numbers.\nWhat do I have to change in my code to make the methods work?\nI don't know what I have to do.</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include \"Calculator.h\"\n\nusing namespace std;\n\nfloat Calculator::add()\n{\n    cout &lt;&lt; \"Enter 1 number: \";\n    cin &gt;&gt; a;\n    cout &lt;&lt; \"Enter 2 number: \";\n    cin &gt;&gt; b;\n    system(\"cls\");\n\n    cout &lt;&lt; a + b &lt;&lt; endl;\n\n    return 0;\n}\n\nfloat Calculator::sub()\n{\n    cout &lt;&lt; \"Enter 1 number: \";\n    cin &gt;&gt; a;\n    cout &lt;&lt; \"Enter 2 number: \";\n    cin &gt;&gt; b;\n    system(\"cls\");\n\n    cout &lt;&lt; a - b &lt;&lt; endl;\n\n    return 0;\n}\n\nfloat Calculator::mul()\n{\n    cout &lt;&lt; \"Enter 1 number: \";\n    cin &gt;&gt; a;\n    cout &lt;&lt; \"Enter 2 number: \";\n    cin &gt;&gt; b;\n    system(\"cls\");\n\n    cout &lt;&lt; a*b &lt;&lt; endl;\n\n    return 0;\n}\n\nfloat Calculator::div()\n{\n    cout &lt;&lt; \"Enter 1 number: \";\n    cin &gt;&gt; a;\n    cout &lt;&lt; \"Enter 2 number: \";\n    cin &gt;&gt; b;\n    system(\"cls\");\n\n    cout &lt;&lt; a / b &lt;&lt; endl;\n\n    return 0;\n}\n\nint main()\n{\n    int choose;\n\n    Calculator k1;\n\n    cout &lt;&lt; \"1.Add\\n\";\n    cout &lt;&lt; \"2.Sub\\n\";\n    cout &lt;&lt; \"3.Mul\\n\";\n    cout &lt;&lt; \"4.Div\\n\";\n    cout &lt;&lt; \"Choose: \";\n    cin &gt;&gt; choose;\n\n    if (choose == '1')\n        k1.add();\n    else if (choose == '2')\n        k1.sub();\n    else if (choose == '3')\n        k1.mul();\n    else if (choose == '4')\n        k1.div();\n\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Calculator.h:</p>\n\n<pre><code>#pragma once\n#ifndef Calculator_h\n#define Calculator_h\n\nclass Calculator {\nprivate:\n    float a, b;\npublic:\n    float add();\n    float sub();\n    float mul();\n    float div();\n};\n\n#endif\n</code></pre>\n"}, {"tags": ["c++", "auto"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1497461293, "post_id": 44551105, "comment_id": 76092767, "body": "There is no overhead for using <code>auto</code>, and you should always define variables where they can be properly initialised."}, {"owner": {"reputation": 95, "user_id": 6861693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dc3124a407dbc9659806f88c750c1d6f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna K.", "link": "https://stackoverflow.com/users/6861693/anna-k"}, "edited": false, "score": 0, "creation_date": 1497461756, "post_id": 44551105, "comment_id": 76093049, "body": "@NeilButterworth I thought it was an important issue declaring variables only once needed and then using that instance, especially declarations are inside a loop that can run up to millions or even billions of times."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 6, "creation_date": 1497461947, "post_id": 44551105, "comment_id": 76093161, "body": "&quot;Using <code>auto</code>&quot; doesn&#39;t mean anything here.  <code>auto</code> is just a substitute for a type name.  What you really are asking about is the consequences of declaring a <i>local variable</i> inside a loop.   Your <code>search</code> is a local variable.  It&#39;s not because you used <code>auto</code> in its declaration; It&#39;s because of <i>where</i> you declared it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1497462496, "post_id": 44551105, "comment_id": 76093522, "body": "If you are concerned about performance you should pass mymap by reference."}, {"owner": {"reputation": 95, "user_id": 6861693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dc3124a407dbc9659806f88c750c1d6f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna K.", "link": "https://stackoverflow.com/users/6861693/anna-k"}, "edited": false, "score": 0, "creation_date": 1497462970, "post_id": 44551105, "comment_id": 76093764, "body": "@manni66 It was for example purposes, but yes I should be consistent, fixed."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1497463442, "post_id": 44551105, "comment_id": 76094037, "body": "Note <code>auto</code> will never be deduced as a reference, references needs to be explicitly written"}, {"owner": {"reputation": 95, "user_id": 6861693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dc3124a407dbc9659806f88c750c1d6f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna K.", "link": "https://stackoverflow.com/users/6861693/anna-k"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1497473261, "post_id": 44551105, "comment_id": 76099220, "body": "@PasserBy do you mean as other described like: <code>const auto &amp;</code> or something else? I thought by all the comments in this question that <code>auto</code> is like a pointer that will point to the item I&#39;m looking for (so no need for explicit reference <code>&amp;</code> )"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1497493269, "post_id": 44551105, "comment_id": 76105135, "body": "You need to read up on iterator/pointer semantics and what it&#39;s relation is to references"}], "answers": [{"comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1497461681, "post_id": 44551143, "comment_id": 76093004, "body": "<code>find</code> returns an iterator by value, so <code>auto&amp;</code> will just create a const reference bound to a temporary. There&#39;s no benefit of using <code>auto&amp;</code> here. edit: actually it doesn&#39;t even seem to compile (<code>invalid initialization of non-const reference ... from an rvalue ...</code>)"}, {"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1497461791, "post_id": 44551143, "comment_id": 76093072, "body": "@Kevin Yes, I updated to use <code>const auto&amp;</code>. My intention was to give a generic example , not the exact answer in this instance. I also explicitly explained that iterators are best passed <i>by value</i> in my answer."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1497461929, "post_id": 44551143, "comment_id": 76093150, "body": "Why not use <code>auto&amp;&amp;</code> instead? :)"}, {"owner": {"reputation": 95, "user_id": 6861693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dc3124a407dbc9659806f88c750c1d6f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna K.", "link": "https://stackoverflow.com/users/6861693/anna-k"}, "edited": false, "score": 0, "creation_date": 1497461998, "post_id": 44551143, "comment_id": 76093202, "body": "Note: I pass the map to the function just to make simple example that anyone could pass a map already filled with data. The true question is about declaring auto (or anything else that could take time) inside a loop that can run for a very long time (millions to billions of times)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497463160, "post_id": 44551143, "comment_id": 76093874, "body": "Actually in this case using <code>const auto &amp;</code> would not change &quot;overhead&quot; at all, so answer &quot;yes&quot; is incorrect. Again in this particular case."}, {"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497463319, "post_id": 44551143, "comment_id": 76093971, "body": "@Slava The question reads &quot;<i>I&#39;m wondering if using <code>auto</code> ... will create an instance of that item each time?</i>&quot;. Not if &quot;overhead&quot; is greater compared to <code>const auto&amp;</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497463921, "post_id": 44551143, "comment_id": 76094290, "body": "@Snps sorry I was not clear, I mean using <code>const auto &amp;</code> in this case does not change anything in efficiency and does not prevent of creating a variable."}, {"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497464233, "post_id": 44551143, "comment_id": 76094468, "body": "@Slava You&#39;re right. But it was never my intention to show that. I simply answered the question."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497464331, "post_id": 44551143, "comment_id": 76094505, "body": "@Snps problem is your answer in this simple form is misleading, OP may think that to change <code>search</code> type to <code>const auto &amp;</code> or <code>auto &amp;&amp;</code> would make it more efficient. And your explanation about iterators does not make it clear. In this particular case does not really matter what type <code>find()</code> returns iterator or big structure, <code>const autho &amp;</code> would just exrtend life of temporary. So your answer is incorrect in this particular case."}], "tags": [], "owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "is_accepted": false, "score": 2, "last_activity_date": 1497464544, "last_edit_date": 1497464544, "creation_date": 1497461300, "answer_id": 44551143, "question_id": 44551105, "link": "https://stackoverflow.com/questions/44551105/auto-making-a-new-variable-instance-each-time/44551143#44551143", "title": "`auto` making a new variable instance each time?", "body": "<p>Yes. E.g., use <code>const auto&amp;</code> or <code>auto&amp;&amp;</code> to declare a reference in case you want to avoid creating a copy of the object.</p>\n\n<p>However, iterators have little overhead and are usually passed by value.</p>\n\n<p>More importantly, you are passing the parameter <code>my_map</code> by value. Passing by value will prevent any changes to the container to be visible from outside the function (you're editing a copy). Pass by reference to avoid unnecessary copying.</p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 6861693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dc3124a407dbc9659806f88c750c1d6f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna K.", "link": "https://stackoverflow.com/users/6861693/anna-k"}, "edited": false, "score": 0, "creation_date": 1497465744, "post_id": 44551809, "comment_id": 76095242, "body": "If I want to make modifications to the element inside the map what should I use? (const would make it uneditable, right? )"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 95, "user_id": 6861693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dc3124a407dbc9659806f88c750c1d6f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna K.", "link": "https://stackoverflow.com/users/6861693/anna-k"}, "edited": false, "score": 1, "creation_date": 1497465963, "post_id": 44551809, "comment_id": 76095365, "body": "@AnnaK. you seem to  misunderstand what <code>std::unordered_map::find()</code> returns. It is not element itself but iterator. Look at it as a kind of pointer. So if you declare iterator const that would mean you cannot change iterator itself (for example to make to point to another element) but that would not prevent to change element to which it points to."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 95, "user_id": 6861693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dc3124a407dbc9659806f88c750c1d6f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna K.", "link": "https://stackoverflow.com/users/6861693/anna-k"}, "edited": false, "score": 1, "creation_date": 1497466419, "post_id": 44551809, "comment_id": 76095674, "body": "@AnnaK. to make it simple - iterators designed to be small and efficient, so declare iterator inside loop (either through <code>auto</code> or explicitly) is perfectly fine in this case and would not create additional overhead."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 3, "last_activity_date": 1497463787, "creation_date": 1497463787, "answer_id": 44551809, "question_id": 44551105, "link": "https://stackoverflow.com/questions/44551105/auto-making-a-new-variable-instance-each-time/44551809#44551809", "title": "`auto` making a new variable instance each time?", "body": "<p>Considering this particular code:</p>\n\n<pre><code>while (search_str != \"something\") {\n\n     //Does the next line create an extra overhead each time?\n     auto search = my_map.find(search_str);\n</code></pre>\n\n<p>if you mean if there is extra overhead vs:</p>\n\n<pre><code>  while (search_str != \"something\") {\n        //Does the next line create an extra overhead each time?\n        std::unordered_map&lt;std::string, std::string&gt;::iterator search = my_map.find(search_str);\n</code></pre>\n\n<p>no there is no difference at all, compiler just deduces type for you. If you asking if declaring iterator outside of loop: </p>\n\n<pre><code>  std::unordered_map&lt;std::string, std::string&gt;::iterator search;\n  while (search_str != \"something\") {\n        search = my_map.find(search_str);\n        ...\n</code></pre>\n\n<p>would make it more efficient, it is theoretically possible (on some broken compiler) but I hardly doubt there would be any. And code readability is more important here as variant with declaring variable inside loop would make it cleaner and more readable.</p>\n\n<p>Note change <code>search</code> type either to <code>const auto &amp;</code> or more explicit <code>const std::unordered_map&lt;std::string, std::string&gt;::iterator &amp;</code> also very unlikely to make it more efficient in this case.</p>\n"}], "owner": {"reputation": 95, "user_id": 6861693, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dc3124a407dbc9659806f88c750c1d6f?s=128&d=identicon&r=PG&f=1", "display_name": "Anna K.", "link": "https://stackoverflow.com/users/6861693/anna-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 44551809, "answer_count": 2, "score": -1, "last_activity_date": 1497465638, "creation_date": 1497461149, "last_edit_date": 1497465638, "question_id": 44551105, "link": "https://stackoverflow.com/questions/44551105/auto-making-a-new-variable-instance-each-time", "title": "`auto` making a new variable instance each time?", "body": "<p>I'm wondering if using <code>auto</code>, or anything other like declaring a variable/iterator/CallItWhatIsMoreAppropriate) will create an instance of that item each time? An example will make things clear:</p>\n\n<pre><code>void my_fun (std::unordered_map&lt;std::string, std::string&gt; &amp; my_map) {\n\n    std::string search_str;\n\n    cin &gt;&gt; search_str;\n\n    while (search_str != \"something\") {\n\n        //Does the next line create an extra overhead each time?\n        auto search = my_map.find(search_str);\n\n        if (search != my_map.end())\n        {\n            std::cout &lt;&lt; \"found \\n\";\n\n            //I should be able to modify the element inside the map here.\n\n        } else {\n            my_map.insert( {search_str, search_str});\n        }\n\n        cin &gt;&gt; search_str;\n\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "matlab", "eigen"], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 7, "last_activity_date": 1497461390, "creation_date": 1497461390, "answer_id": 44551169, "question_id": 44551051, "link": "https://stackoverflow.com/questions/44551051/eigen-losing-negative-sign-in-matrix-addition/44551169#44551169", "title": "Eigen losing negative sign in matrix addition", "body": "<p>This is a result of the precision in the floating point calculations.  The slightly different order between the two (the first does all the matrix multiplications first, then scales by <code>scale</code>, while the second scales before the last matrix multiply) result in the least significant bit or two of the floating point result being different during the various additions and subtractions of the last matrix multiply.</p>\n\n<p>The number you're seeing (5.55112e-17) is, for all practical purposes here, effectively 0 and the results are identical.</p>\n"}], "owner": {"reputation": 1, "user_id": 7900154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cdraC.gif?s=128&g=1", "display_name": "Jorge S&#225;nchez", "link": "https://stackoverflow.com/users/7900154/jorge-s%c3%a1nchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497461390, "creation_date": 1497460953, "question_id": 44551051, "link": "https://stackoverflow.com/questions/44551051/eigen-losing-negative-sign-in-matrix-addition", "title": "Eigen losing negative sign in matrix addition", "body": "<p>I am trying to add a matrix using Eigen library and my result is numerically ok but it is missing the negative sign. The result after the addition in correct it is the final addition that lose the negative sign. All matrices are declare as double.</p>\n\n<p>I have this code in both cases:</p>\n\n<pre><code>for(int i=0;i&lt;9;i++){\n mata&lt;&lt;MatrixXd::Zero(4,4);\n  for(int j=0;i&lt;4;j++){\n   mata += matb.transpose()*(matc*matb)*scalar;\n  }\n cout&lt;&lt;mata&lt;&lt;endl;\n}\n</code></pre>\n\n<p>I have also try:</p>\n\n<pre><code>for(int i=0;i&lt;9;i++){\n mata&lt;&lt;MatrixXd::Zero(4,4);\n  for(int j=0;i&lt;4;j++){\n   MatrixXd aux=matb.transpose();\n   MatrixXd aux2=(matc*matb)*scalar\n   mata += aux*aux2;\n  }\n cout&lt;&lt;mata&lt;&lt;endl;\n}\n</code></pre>\n\n<p>Matlab result:</p>\n\n<pre><code>    1.92186   -0.960928   -0.960928 -5.55112e-17\n  -0.960928     1.92186 -5.55112e-17   -0.960928\n  -0.960928 -5.55112e-17     1.92186   -0.960928\n-5.55112e-17   -0.960928   -0.960928     1.92186\n</code></pre>\n\n<p>Eigen result:</p>\n\n<pre><code>    1.92186   -0.960928   -0.960928 5.55112e-17\n  -0.960928     1.92186 5.55112e-17   -0.960928\n  -0.960928 5.55112e-17     1.92186   -0.960928\n5.55112e-17   -0.960928   -0.960928     1.92186\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1497461011, "post_id": 44550992, "comment_id": 76092571, "body": "You&#39;re clearly missing a <code>}</code>, as the error points out."}, {"owner": {"reputation": 43, "user_id": 6390006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b61c9d8607c12e9245fc825a7b9dd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayham Abou Al Fadl", "link": "https://stackoverflow.com/users/6390006/ayham-abou-al-fadl"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1497461013, "post_id": 44550992, "comment_id": 76092572, "body": "Were i am missing?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1497461013, "post_id": 44550992, "comment_id": 76092573, "body": "<a href=\"http://coliru.stacked-crooked.com/a/8952c6fa627014d1\" rel=\"nofollow noreferrer\">Compiles fine</a> if you add the missing <code>}</code> (which you already knew about)"}, {"owner": {"reputation": 43, "user_id": 6390006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b61c9d8607c12e9245fc825a7b9dd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayham Abou Al Fadl", "link": "https://stackoverflow.com/users/6390006/ayham-abou-al-fadl"}, "edited": false, "score": 0, "creation_date": 1497461079, "post_id": 44550992, "comment_id": 76092617, "body": "It worked for the second error not the first"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1497461722, "post_id": 44550992, "comment_id": 76093025, "body": "Can you provide code that actually reproduces this error?"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6390006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b61c9d8607c12e9245fc825a7b9dd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayham Abou Al Fadl", "link": "https://stackoverflow.com/users/6390006/ayham-abou-al-fadl"}, "edited": false, "score": 0, "creation_date": 1497516203, "post_id": 44551839, "comment_id": 76114458, "body": "It Worked, by changing the float to double, But can you link a page explaining why this deffer?"}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "reply_to_user": {"reputation": 43, "user_id": 6390006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b61c9d8607c12e9245fc825a7b9dd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayham Abou Al Fadl", "link": "https://stackoverflow.com/users/6390006/ayham-abou-al-fadl"}, "edited": false, "score": 0, "creation_date": 1497536031, "post_id": 44551839, "comment_id": 76128322, "body": "@AyhamAbouAlFadl it works for <code>float vertices[NumVertx][2]</code> too. Are you sure that the only change was this? I think that your ploblem was the type or value of <code>NumVertices</code> That is why I add <code>const unsigned NumVertx = 6;</code>"}], "tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": true, "score": 0, "last_activity_date": 1497463917, "creation_date": 1497463917, "answer_id": 44551839, "question_id": 44550992, "link": "https://stackoverflow.com/questions/44550992/error-too-many-initializer-values-in-jaggled-arrays/44551839#44551839", "title": "Error: Too Many initializer Values in Jaggled Arrays", "body": "<p>Seems that <code>NumVertices</code> is not that you think.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>const unsigned NumVertx = 6; \ndouble vertices[NumVertx][2] =\n{\n    { -0.90F, -0.90F }, // Triangle 1\n    {  0.85F, -0.90F }, \n    { -0.90F,  0.85F },\n    {  0.90F, -0.85F }, // Triangle 2\n    {  0.90F,  0.90F },\n    { -0.90F,  0.90F }\n};\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6390006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b61c9d8607c12e9245fc825a7b9dd4?s=128&d=identicon&r=PG&f=1", "display_name": "Ayham Abou Al Fadl", "link": "https://stackoverflow.com/users/6390006/ayham-abou-al-fadl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "closed_date": 1497465533, "accepted_answer_id": 44551839, "answer_count": 1, "score": -3, "last_activity_date": 1497465544, "creation_date": 1497460735, "last_edit_date": 1497465544, "question_id": 44550992, "link": "https://stackoverflow.com/questions/44550992/error-too-many-initializer-values-in-jaggled-arrays", "closed_reason": "Needs details or clarity", "title": "Error: Too Many initializer Values in Jaggled Arrays", "body": "<p>I have been Searching for solution for a long time, and didn't find how to solve it.</p>\n\n<p>The Problem is :\nEvery time i declare an array it gives an error on 2nd value\nCode:</p>\n\n<pre><code>// OpenGL Code\n\nvertices[NumVertices][2] =\n{\n    { -0.90F, -0.90F }, // Triangle 1\n    {  0.85F, -0.90F }, // Error: too many initlializer values\n    { -0.90F,  0.85F },\n    {  0.90F, -0.85F }, // Triangle 2\n    {  0.90F,  0.90F  ,\n    { -0.90F,  0.90F }\n}; // Error: Expected a '}'\n</code></pre>\n\n<p>Any help?\nThankes for your time</p>\n"}, {"tags": ["c++", "c++11", "templates", "template-meta-programming", "template-specialization"], "comments": [{"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1497463083, "post_id": 44550976, "comment_id": 76093828, "body": "The rule in place is partial template specialization."}], "answers": [{"comments": [{"owner": {"reputation": 432, "user_id": 2569921, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e46976123480cfcfca3388ce4123d60d?s=128&d=identicon&r=PG", "display_name": "alcoforado", "link": "https://stackoverflow.com/users/2569921/alcoforado"}, "edited": false, "score": 0, "creation_date": 1497466173, "post_id": 44551516, "comment_id": 76095498, "body": "Yeah, I didn&#39;t realize that the second declaration were actually seen as an specialization. The more specialized, the more precedence it has. Amazing stuff. Thanks"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 4, "last_activity_date": 1497463244, "last_edit_date": 1497463244, "creation_date": 1497462735, "answer_id": 44551516, "question_id": 44550976, "link": "https://stackoverflow.com/questions/44550976/how-stdconditional-works/44551516#44551516", "title": "How std::conditional works", "body": "<blockquote>\n  <p>Why does that work ? What compilation rule is in place here ?</p>\n</blockquote>\n\n<p>I'm not an expert but I'll try to explain from the pratical point of view.</p>\n\n<p>Hoping to use the rights terms...</p>\n\n<p>With</p>\n\n<pre><code>template &lt;bool B, class T, class F&gt;\nstruct conditional { typedef T type; };\n</code></pre>\n\n<p>(but, with C++11, I prefer</p>\n\n<pre><code>template &lt;bool B, typename T, typename&gt;\nstruct conditional { using type = T; };\n</code></pre>\n\n<p>) you declare the template </p>\n\n<pre><code>template &lt;bool, typename, typename&gt;\nstruct conditional;\n</code></pre>\n\n<p>and define the generic (not specialized) version.</p>\n\n<p>With </p>\n\n<pre><code>template&lt; class T, class F&gt;\nstruct conditional&lt;false, T, F&gt; { typedef F type; };\n</code></pre>\n\n<p>(or, in C++11,</p>\n\n<pre><code>template &lt;typename T, typename F&gt;\nstruct conditional&lt;false, T, F&gt; { using type = F; };\n</code></pre>\n\n<p>) you define a partial specialization of <code>conditional</code></p>\n\n<p>When the template arguments of a class (or struct) match two or more definitions, the compliler choose the more specialized one; so, for</p>\n\n<pre><code>typename std::conditional&lt;false,int,double&gt;::type\n</code></pre>\n\n<p>both definitions of the class match so the compiler choose the specialized one (the specialized with <code>false</code>) anche <code>type</code> is <code>double</code>.</p>\n\n<p>For</p>\n\n<pre><code>typename std::conditional&lt;true,int,double&gt;::type a;\n</code></pre>\n\n<p>only the generic version match, so <code>type</code> is <code>int</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 432, "user_id": 2569921, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e46976123480cfcfca3388ce4123d60d?s=128&d=identicon&r=PG", "display_name": "alcoforado", "link": "https://stackoverflow.com/users/2569921/alcoforado"}, "edited": false, "score": 3, "creation_date": 1497466107, "post_id": 44551636, "comment_id": 76095454, "body": "Oh, nice. Thank you very much. This meta-programming  tricks are so smart and at the  same time looks like hacking. I wonder if this type_traits one day will be first citizens in C++ and be implemented directly by the compiler in a kind of simpler template conditional  language.  Although it might be a real challenge for the compiler developers."}], "tags": [], "owner": {"reputation": 5125, "user_id": 98693, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/ef5ae6548ea49522a5ad0e3c57f2bdc7?s=128&d=identicon&r=PG", "display_name": "ovanes", "link": "https://stackoverflow.com/users/98693/ovanes"}, "is_accepted": false, "score": 12, "last_activity_date": 1497464289, "last_edit_date": 1592644375, "creation_date": 1497463153, "answer_id": 44551636, "question_id": 44550976, "link": "https://stackoverflow.com/questions/44550976/how-stdconditional-works/44551636#44551636", "title": "How std::conditional works", "body": "<p>In short it has to do with template specialization rules. These are like function overloads but for types.</p>\n<p>Here compiler prefers a more specialized type to the more general type.</p>\n<pre><code>template&lt;bool B, class T, class F&gt;\nstruct conditional { typedef T type; };\n\ntemplate&lt;class T, class F&gt;\nstruct conditional&lt;false, T, F&gt; { typedef F type; };\n</code></pre>\n<p>So if a template instantiation <code>coditional&lt;false, ...&gt;</code> is seen by compiler it finds:</p>\n<ul>\n<li>the general template <code>template&lt;bool B, class T, class F&gt; struct conditional</code></li>\n<li>all its specializations: <code>template&lt;class T, class F&gt; struct conditional&lt;false, T, F&gt;</code></li>\n</ul>\n<p>At that point it tries to match as many specialized arguments as possible and ends up selecting the specialization with <code>false</code>.</p>\n<p>For example introducing another version like:</p>\n<pre><code>template&lt;class F&gt;\nstruct conditional&lt;false, int, F&gt; { typedef int type; };\n</code></pre>\n<p>and instantiating a template type like <code>conditional&lt;false, int, double&gt;</code> will prefer specialization</p>\n<p><code>template&lt;class F&gt; struct conditional&lt;false, int, F&gt;</code></p>\n<p>to</p>\n<p><code>template&lt;class T, class F&gt; struct conditional&lt;false, T, F&gt;</code> which is more general compared to the version with 2 specialized paramaters.</p>\n<h3>Some tricks at this point:</h3>\n<p>It is even OK to just declare the most generic case (i.e. generic form of the template is just declared but not defined) and only have specializations for cases you really intend to have. All non-specialized cases will result in compile errors and asking the user to specialize the case for a particular type.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 6763713, "user_type": "registered", "profile_image": "https://graph.facebook.com/1076107545811623/picture?type=large", "display_name": "Nishant Kathiriya", "link": "https://stackoverflow.com/users/6763713/nishant-kathiriya"}, "is_accepted": false, "score": 1, "last_activity_date": 1585989214, "creation_date": 1585989214, "answer_id": 61025578, "question_id": 44550976, "link": "https://stackoverflow.com/questions/44550976/how-stdconditional-works/61025578#61025578", "title": "How std::conditional works", "body": "<p>In most of the template meta programming main rule at play here is SFINAE(Substitution failure is not an error). According to this rule if compiler not find the type then instead of throwing an error it moves forward and check if there is any future statement that can provide type information.</p>\n"}], "owner": {"reputation": 432, "user_id": 2569921, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e46976123480cfcfca3388ce4123d60d?s=128&d=identicon&r=PG", "display_name": "alcoforado", "link": "https://stackoverflow.com/users/2569921/alcoforado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6644, "favorite_count": 3, "answer_count": 3, "score": 14, "last_activity_date": 1585989214, "creation_date": 1497460684, "last_edit_date": 1541178510, "question_id": 44550976, "link": "https://stackoverflow.com/questions/44550976/how-stdconditional-works", "title": "How std::conditional works", "body": "<p>We have this little metaprogramming marvel called <code>std::conditional</code> described <a href=\"http://en.cppreference.com/w/cpp/types/conditional\" rel=\"noreferrer\">here</a>. In the same reference it says that a possible implementation is </p>\n\n<pre><code>template&lt;bool B, class T, class F&gt;\nstruct conditional { typedef T type; };\n\ntemplate&lt;class T, class F&gt;\nstruct conditional&lt;false, T, F&gt; { typedef F type; };\n</code></pre>\n\n<p>So if in code I do something like</p>\n\n<pre><code>typename std::conditional&lt;true,int,double&gt;::type a;\n</code></pre>\n\n<p>the compiler will follow the first definition and if I do something like</p>\n\n<pre><code>typename std::conditional&lt;false,int,double&gt;::type b\n</code></pre>\n\n<p>the compiler will take the second. Why does that work ? What compilation rule is in place here ? </p>\n"}, {"tags": ["c++", "ios", "object-detection", "dlib"], "answers": [{"comments": [{"owner": {"reputation": 1346, "user_id": 966540, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4dee133eed93656d95da8119ed92cd14?s=128&d=identicon&r=PG", "display_name": "The iCoder", "link": "https://stackoverflow.com/users/966540/the-icoder"}, "edited": false, "score": 0, "creation_date": 1510034564, "post_id": 44576566, "comment_id": 81251509, "body": "Hi, I am also trying to build object detector using dlib, do you have any guidance regarding this. As Its very new to me , just struggling how to train model with specific object image  and use it in to detect object in other images.  If you provide me some tutorial or blog for my better understanding that will be appreciated. Thanks!"}], "tags": [], "owner": {"reputation": 391, "user_id": 5004359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e853c37016c0ff8feed2a791188874?s=128&d=identicon&r=PG&f=1", "display_name": "dsbajna", "link": "https://stackoverflow.com/users/5004359/dsbajna"}, "is_accepted": false, "score": 0, "last_activity_date": 1497558818, "creation_date": 1497558818, "answer_id": 44576566, "question_id": 44550975, "link": "https://stackoverflow.com/questions/44550975/dlib-object-detection-always-return-zero-results-on-ios/44576566#44576566", "title": "dlib object detection always return zero results on iOS", "body": "<p>dlib is working fine on iOS too. Kicking myself for it, but I mixed up the detector instances. The detector on which I called below line was not used for object detection.</p>\n\n<pre><code>dlib::deserialize(detector, fin);\n</code></pre>\n\n<p>I was just using an empty detector instance, and it was returning 0 detections. By empty detector, I mean it was defined but deserialize method was not invoked. It would have been nice if dlib returned an error or warning, if a detector not loaded with object_detector.svm file is used for detection. </p>\n\n<p>I have observed the same behavior with shape detector too. If sp.dat is not loaded, it silently reports 0 parts detected. Posting this as answer, in case someone else also makes such a silly mistake.</p>\n"}], "owner": {"reputation": 391, "user_id": 5004359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e853c37016c0ff8feed2a791188874?s=128&d=identicon&r=PG&f=1", "display_name": "dsbajna", "link": "https://stackoverflow.com/users/5004359/dsbajna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499242443, "creation_date": 1497460683, "question_id": 44550975, "link": "https://stackoverflow.com/questions/44550975/dlib-object-detection-always-return-zero-results-on-ios", "title": "dlib object detection always return zero results on iOS", "body": "<p>I have been using dlib object detection successfully on mac. Now I want to use it in an iOS app. However, after spending countless hours, dlib object detector always returns zero rectangles. </p>\n\n<pre><code>        ifstream fin(dataDir + \"/object_detector.svm\", ios::binary);\n        typedef dlib::scan_fhog_pyramid&lt;dlib::pyramid_down&lt;6&gt; &gt; image_scanner_type;\n        dlib::object_detector&lt;image_scanner_type&gt; detector;\n        dlib::deserialize(detector, fin);\n\n        vector&lt;dlib::rectangle&gt; dets = detector(dlibImage);\n</code></pre>\n\n<p>To make sure it\u2019s not due to a different image, I am using exact same image for which detector returns 1 hit on mac. I have also printed uchar from part of the image in both mac and iOS, and it\u2019s returning same values. So image data is exactly the same. </p>\n\n<p>Probably dlib library is not built correctly for iOS. I have tried multiple approaches for this. From /example/build dir, below command was invoked.</p>\n\n<pre><code>    cmake -G Xcode ..\n    cmake --build . --config Release\n</code></pre>\n\n<p>It generated dlib.xcodeproj project in dlib_build dir. I opened the project in xcode, changed architecture to iOS (armv7, arm64) and rebuild the library. This library was linked to my project. I got zero results with this approach. dlib was built in debug mode; I did not get any assertion errors.</p>\n\n<p>Second approach tried was to use dlib/all/source.app in my project. I used all the proprocessing flags that are used by cmake or dlib.xcodeproj project. No errors, but still no matches.</p>\n\n<p>I have compared build settings of my xcode project with examples.xcodeproj generated by cmake and it\u2019s same. Also checked the xcode project from <a href=\"https://github.com/zweigraf/face-landmarking-ios\" rel=\"nofollow noreferrer\">https://github.com/zweigraf/face-landmarking-ios</a>, but no help.</p>\n\n<p>Strange thing is detector takes couple of seconds to process and comes back with zero matches. So it\u2019s doing something. I wish there was a debug logging that I can turn on for the detector.</p>\n\n<p>I am out of ideas. Will appreciate if anyone can help. dlib is a wonderful library, I just wish it would have been easier to work with on iOS.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1497460659, "post_id": 44550935, "comment_id": 76092393, "body": "Same code will have undefined behaviour in C++ also."}, {"owner": {"reputation": 523, "user_id": 6712710, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2888c63d9961b42d55b2d4698ac1257b?s=128&d=identicon&r=PG&f=1", "display_name": "as2d3", "link": "https://stackoverflow.com/users/6712710/as2d3"}, "reply_to_user": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1497460686, "post_id": 44550935, "comment_id": 76092408, "body": "@GAURANGVYAS Yes, I realised it as soon as I uploaded the question. I want to do this with string datatype."}, {"owner": {"reputation": 523, "user_id": 6712710, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2888c63d9961b42d55b2d4698ac1257b?s=128&d=identicon&r=PG&f=1", "display_name": "as2d3", "link": "https://stackoverflow.com/users/6712710/as2d3"}, "edited": false, "score": 0, "creation_date": 1497460736, "post_id": 44550935, "comment_id": 76092437, "body": "@NeilButterworth No, with string datatype. Sorry, I edited the question."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1497460800, "post_id": 44550935, "comment_id": 76092473, "body": "Pointers generally work the same in both C and C++."}, {"owner": {"reputation": 523, "user_id": 6712710, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2888c63d9961b42d55b2d4698ac1257b?s=128&d=identicon&r=PG&f=1", "display_name": "as2d3", "link": "https://stackoverflow.com/users/6712710/as2d3"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1497460828, "post_id": 44550935, "comment_id": 76092483, "body": "@Someprogrammerdude Yes, I know. Thank you but I just wanted to do the pointer shifting with string datatype."}, {"owner": {"reputation": 523, "user_id": 6712710, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2888c63d9961b42d55b2d4698ac1257b?s=128&d=identicon&r=PG&f=1", "display_name": "as2d3", "link": "https://stackoverflow.com/users/6712710/as2d3"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1497461268, "post_id": 44550935, "comment_id": 76092743, "body": "@drescherjm Please check the edits, thank you."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1497461283, "post_id": 44550935, "comment_id": 76092756, "body": "The last edit is helpful. You can&#39;t do it the way you want. @NeilButterworth has the solution."}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 2, "creation_date": 1497485720, "post_id": 44550935, "comment_id": 76103591, "body": "C++17 also has <code>string_view</code> which would allow for forming <code>std::string_view::substr()</code> or mutating with <code>std::string_view::remove_prefix()</code> in constant time."}], "answers": [{"comments": [{"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "edited": false, "score": 1, "creation_date": 1497461185, "post_id": 44551049, "comment_id": 76092686, "body": "One could also mention the <code>at(...)</code> feature that makes sure that the given index location is a valid position, even though this was not explicitly asked."}, {"owner": {"reputation": 523, "user_id": 6712710, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2888c63d9961b42d55b2d4698ac1257b?s=128&d=identicon&r=PG&f=1", "display_name": "as2d3", "link": "https://stackoverflow.com/users/6712710/as2d3"}, "edited": false, "score": 0, "creation_date": 1497461440, "post_id": 44551049, "comment_id": 76092852, "body": "Thank you man, so many people downvoted the question. Maybe because I did not explain the question correctly. I think the question was quiet clear to understand after my first edit, but at least I got the answer."}, {"owner": {"reputation": 523, "user_id": 6712710, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2888c63d9961b42d55b2d4698ac1257b?s=128&d=identicon&r=PG&f=1", "display_name": "as2d3", "link": "https://stackoverflow.com/users/6712710/as2d3"}, "reply_to_user": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "edited": false, "score": 0, "creation_date": 1497461638, "post_id": 44551049, "comment_id": 76092974, "body": "@MrZ Can you please explain more? Thank you."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 523, "user_id": 6712710, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2888c63d9961b42d55b2d4698ac1257b?s=128&d=identicon&r=PG&f=1", "display_name": "as2d3", "link": "https://stackoverflow.com/users/6712710/as2d3"}, "edited": false, "score": 1, "creation_date": 1497461665, "post_id": 44551049, "comment_id": 76092991, "body": "@AbhishekAgrawal to me your question is now clear after the last edit. You got an upvote from me as a result."}, {"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "edited": false, "score": 0, "creation_date": 1497461922, "post_id": 44551049, "comment_id": 76093142, "body": "If you access the string with <code>operator[]</code> at a position larger than the actual string you get undefined behaviour. If you use <code>my_string.at(too_large_int)</code> an exception is thrown because <code>at()</code> always checks if the position you try to access is valid. See <a href=\"http://www.cplusplus.com/reference/string/string/at/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/string/string/at</a> and <a href=\"http://www.cplusplus.com/reference/string/string/operator[]/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/string/string/operator[]</a>."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1497463433, "post_id": 44551049, "comment_id": 76094031, "body": "Come on, you know how to type. Type some explanation and get an extra +10 reputation."}, {"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "edited": false, "score": 1, "creation_date": 1497485492, "post_id": 44551049, "comment_id": 76103541, "body": "It should be noted that strings are only guaranteed to be contiguous in memory since c++11. But to my knowledge many implementations had this even before. The null-termination without using c_str() is also only guaranteed since c++11 as far as I know."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "edited": false, "score": 0, "creation_date": 1497530850, "post_id": 44551049, "comment_id": 76124365, "body": "@MrZ: The complexity of <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\"><code>c_str()</code></a> has always been constant (O(1)). That pretty much implies, that any compliant implementation must store the controlled sequence in contiguous memory, even if not explicitly required by the C++ Language Standard."}, {"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1497531239, "post_id": 44551049, "comment_id": 76124633, "body": "@IInspectable Didn&#39;t Know That. Great info. Though technically I guess string could internally always store a c-string copy to comply with that requirement :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": true, "score": 4, "last_activity_date": 1497460945, "creation_date": 1497460945, "answer_id": 44551049, "question_id": 44550935, "link": "https://stackoverflow.com/questions/44550935/shifting-the-pointer-of-the-string-in-c/44551049#44551049", "title": "Shifting the pointer of the string in C++", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main() {\n    string s = \"foobar\";\n    cout &lt;&lt; &amp;s[s.size() - 2] &lt;&lt; endl;\n    cout &lt;&lt; &amp;s[3] &lt;&lt; endl;\n\n}\n</code></pre>\n"}], "owner": {"reputation": 523, "user_id": 6712710, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2888c63d9961b42d55b2d4698ac1257b?s=128&d=identicon&r=PG&f=1", "display_name": "as2d3", "link": "https://stackoverflow.com/users/6712710/as2d3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "accepted_answer_id": 44551049, "answer_count": 1, "score": 3, "last_activity_date": 1497485315, "creation_date": 1497460553, "last_edit_date": 1497461244, "question_id": 44550935, "link": "https://stackoverflow.com/questions/44550935/shifting-the-pointer-of-the-string-in-c", "title": "Shifting the pointer of the string in C++", "body": "<p>In C we are able to do this : </p>\n\n<pre><code>char *str;\nscanf(\"%s\", str); // lets say that we enter \"Hello\"\nstr = str + 2;\nprintf(\"%s\", str); // and the answer would be \"llo\"\n</code></pre>\n\n<p>Is there something like this in C++ with string datatype in O(1) time?</p>\n\n<p><strong>Edit : It is giving me this error -></strong> </p>\n\n<pre><code>error: invalid operands to binary expression ('string' (aka 'basic_string&lt;char,\n  char_traits&lt;char&gt;, allocator&lt;char&gt; &gt;') and 'int')\nstr = str + 1;\n</code></pre>\n\n<p><strong>Edit2 : I ran this code and got the above error -></strong> </p>\n\n<pre><code>string str = \"Hello\";\nstr = str + 1;\ncout &lt;&lt; str &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "thread-safety", "smart-pointers"], "comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1497461318, "post_id": 44550929, "comment_id": 76092777, "body": "Why not create the thread after <code>m_bigClass</code> has been set?"}, {"owner": {"reputation": 153, "user_id": 6533105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/g2iyg.png?s=128&g=1", "display_name": "Yurii Komarnytskyi", "link": "https://stackoverflow.com/users/6533105/yurii-komarnytskyi"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1497461777, "post_id": 44550929, "comment_id": 76093064, "body": "If i do so what about comment &quot;access of m_bigClass is not so you could also have a data race there.&quot; As I understand it also doesn&#39;t fix the situation?"}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 6533105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/g2iyg.png?s=128&g=1", "display_name": "Yurii Komarnytskyi", "link": "https://stackoverflow.com/users/6533105/yurii-komarnytskyi"}, "edited": false, "score": 0, "creation_date": 1497461648, "post_id": 44551189, "comment_id": 76092983, "body": "How should it be used correctly? I&#39;ve never seen someone using atomic to unique_ptr and not sure how code in this situation. Should I simply use mutex or maybe exists some other way?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 153, "user_id": 6533105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/g2iyg.png?s=128&g=1", "display_name": "Yurii Komarnytskyi", "link": "https://stackoverflow.com/users/6533105/yurii-komarnytskyi"}, "edited": false, "score": 2, "creation_date": 1497461967, "post_id": 44551189, "comment_id": 76093177, "body": "@YuriiKomarnytskyi You can use a <code>mutex</code>, or you could change to a <code>std::shared_ptr</code> that does have overloads of the atomic free functions.  I believe the reasoning for them not existing for a <code>unique_ptr</code> is because it is supposed to be unique, and therefore not shared."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1497629938, "post_id": 44551189, "comment_id": 76175394, "body": "&quot;<i>supposed to be unique, and therefore not shared</i>&quot; does not compute ;)"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1497461458, "creation_date": 1497461458, "answer_id": 44551189, "question_id": 44550929, "link": "https://stackoverflow.com/questions/44550929/unique-ptr-with-multithreading/44551189#44551189", "title": "unique_ptr with multithreading", "body": "<blockquote>\n  <p>If I check <code>unique_ptr != nullptr</code>, is it thread safe</p>\n</blockquote>\n\n<p>No, it is not thread safe.  If you have more than one thread and at least of one of them writes to the shared data then you need synchronization.  If you do not then you have a data race and it is undefined behavior.  </p>\n\n<pre><code>m_bigClass.reset(new BigClassCreatedOnce()); // created only once\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if (!m_bigClass)\n</code></pre>\n\n<p>Can both happen at the same time, so it is a data race.</p>\n\n<p>I would also like to point out that</p>\n\n<pre><code>if (m_bigClass-&gt;var.load())\n</code></pre>\n\n<p>Is also not thread safe.  <code>var.load()</code> is, but the access of <code>m_bigClass</code> is not so you could also have a data race there.</p>\n"}], "owner": {"reputation": 153, "user_id": 6533105, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/g2iyg.png?s=128&g=1", "display_name": "Yurii Komarnytskyi", "link": "https://stackoverflow.com/users/6533105/yurii-komarnytskyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1924, "favorite_count": 1, "accepted_answer_id": 44551189, "answer_count": 1, "score": 4, "last_activity_date": 1497461531, "creation_date": 1497460524, "last_edit_date": 1497461531, "question_id": 44550929, "link": "https://stackoverflow.com/questions/44550929/unique-ptr-with-multithreading", "title": "unique_ptr with multithreading", "body": "<p>I have some fear about using <code>unique_ptr</code> with multithreading without <code>mutex</code>. I wrote simplified code below, please take a look.  If I check <code>unique_ptr != nullptr</code>, is it thread safe?</p>\n\n<pre><code>class BigClassCreatedOnce\n{\npublic:\n    std::atomic&lt;bool&gt; var;\n\n    // A lot of other stuff\n};\n</code></pre>\n\n<p><code>BigClassCreatedOnce</code> class instance will be created only once but I'm not sure is it safe to use it between threads. </p>\n\n<pre><code>class MainClass\n{\npublic:\n    // m_bigClass used all around the class from the Main Thread\n\n    MainClass()\n        : m_bigClass()\n        , m_thread()\n    {\n        m_thread = std::thread([this]() {\n            while (1)\n            {\n                methodToBeCalledFromThread();\n                std::this_thread::sleep_for(std::chrono::milliseconds(1));\n            }\n        });\n\n        // other stuff here\n\n        m_bigClass.reset(new BigClassCreatedOnce()); // created only once\n    }\n\n    void methodToBeCalledFromThread()\n    {\n        if (!m_bigClass) // As I understand this is not safe\n        {\n            return;\n        }\n\n        if (m_bigClass-&gt;var.load()) // As I understand this is safe\n        {\n            // does something\n        }\n    }\n\n    std::unique_ptr&lt;BigClassCreatedOnce&gt; m_bigClass;\n    std::thread m_thread;\n};\n</code></pre>\n\n<p>I just put it into infinity loop to simplify the sample.</p>\n\n<pre><code>int main()\n{\n    MainClass ms;\n    while (1)\n    {\n        std::this_thread::sleep_for(std::chrono::milliseconds(1));\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "object-files"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 3, "creation_date": 1497460099, "post_id": 44550813, "comment_id": 76092086, "body": "You should not try to program in C++ by trial and error. You should go get a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good book</a>"}, {"owner": {"reputation": 359, "user_id": 5306028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43d9a8c4abf19609209abbb94137c827?s=128&d=identicon&r=PG&f=1", "display_name": "asc11", "link": "https://stackoverflow.com/users/5306028/asc11"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1497461568, "post_id": 44550813, "comment_id": 76092937, "body": "thanks, but I&#39;ve already got one."}], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 5306028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43d9a8c4abf19609209abbb94137c827?s=128&d=identicon&r=PG&f=1", "display_name": "asc11", "link": "https://stackoverflow.com/users/5306028/asc11"}, "edited": false, "score": 0, "creation_date": 1497461153, "post_id": 44550850, "comment_id": 76092666, "body": "I already included the header file in the first line of <code>main.cpp</code> and didn&#39;t _re_define the class in the source file."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 359, "user_id": 5306028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43d9a8c4abf19609209abbb94137c827?s=128&d=identicon&r=PG&f=1", "display_name": "asc11", "link": "https://stackoverflow.com/users/5306028/asc11"}, "edited": false, "score": 0, "creation_date": 1497462251, "post_id": 44550850, "comment_id": 76093361, "body": "@asc11 The problematic source file is <code>helloclass.cpp</code>."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 1, "last_activity_date": 1497460248, "creation_date": 1497460248, "answer_id": 44550850, "question_id": 44550813, "link": "https://stackoverflow.com/questions/44550813/c-issue-with-class-declared-in-a-separate-object-file/44550850#44550850", "title": "C++ issue with class declared in a separate object file", "body": "<p>You should not redefine the <em>class</em> in the separate source file. Instead include the header-file and implement the <code>Hello::hello</code> function (and the <code>Hello::Hello</code> constructor).</p>\n"}], "owner": {"reputation": 359, "user_id": 5306028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43d9a8c4abf19609209abbb94137c827?s=128&d=identicon&r=PG&f=1", "display_name": "asc11", "link": "https://stackoverflow.com/users/5306028/asc11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 44550850, "answer_count": 1, "score": -1, "last_activity_date": 1497460248, "creation_date": 1497460047, "question_id": 44550813, "link": "https://stackoverflow.com/questions/44550813/c-issue-with-class-declared-in-a-separate-object-file", "title": "C++ issue with class declared in a separate object file", "body": "<p>I've got a problem when declaring a class in a separate object file and then using it in the main function of another file:</p>\n\n<p>main.cpp:</p>\n\n<pre><code>#include &lt;helloclass.hpp&gt;\n\n\nusing namespace std;\n\nint main() {\n    Hello hi;\n    hi.hello();\n\n    return 0;\n}\n</code></pre>\n\n<p>helloclass.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Hello {\n    public:\n\n    void hello() {\n        cout &lt;&lt; \"Hello world\\n\";\n    }\n\n    Hello() {}\n};\n</code></pre>\n\n<p>helloclass.hpp:</p>\n\n<pre><code>class Hello {\n    public:\n\n    void hello();\n\n\n    Hello();\n};\n</code></pre>\n\n<p>Then I ran the following commands:</p>\n\n<pre><code>g++ -I. -c main.cpp\ng++ -c helloclass.cpp\ng++ -o main main.o helloclass.o\n</code></pre>\n\n<p>However, the last command gives the following output:</p>\n\n<pre><code>main.o: In function `main':\nmain.cpp:(.text+0x1f): undefined reference to `Hello::Hello()'\nmain.cpp:(.text+0x2b): undefined reference to `Hello::hello()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>To me, it seems like I'm missing something pretty obvious. Does anyone know how to fix this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1497460004, "post_id": 44550782, "comment_id": 76092047, "body": "Why do you (try to) read an <code>int</code>? <code>Bob</code> is not an <code>int</code>."}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 1, "creation_date": 1497460056, "post_id": 44550782, "comment_id": 76092065, "body": "What do you expect to happen when you try to read <code>&quot;Bob&quot;</code> into an <code>int</code>?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1497460212, "post_id": 44550782, "comment_id": 76092149, "body": "This isn&#39;t the problem, but do you really need the extra stuff that <code>std::endl</code> does? <code>&#39;\\n&#39;</code> ends a line."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1497460444, "post_id": 44550782, "comment_id": 76092257, "body": "You assumed <code>infile &gt;&gt; x</code> <i>worked</i>; it <i>didn&#39;t</i>, but you don&#39;t know that because you never checked. Assumption is the mother of all... If you <i>check</i> your IO operations for success, <code>if (infile &gt;&gt; x)</code> you&#39;ll see that statement <i>failed</i>, and in so doing, left <code>x</code> with an indeterminate value you posthumously report to stdout."}], "answers": [{"tags": [], "owner": {"reputation": 56794, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 0, "last_activity_date": 1497460149, "creation_date": 1497460149, "answer_id": 44550834, "question_id": 44550782, "link": "https://stackoverflow.com/questions/44550782/when-trying-to-read-from-a-text-file-in-c-it-gives-me-a-large-random-number/44550834#44550834", "title": "When trying to read from a text file in c++ it gives me a large random number", "body": "<p>You need to read in the name as a string, not an int:</p>\n\n<pre><code>ifstream infile;\ninfile.open(\"Info.txt\");\n\nstring x;\n\ninfile &gt;&gt; x;\n\ncout &lt;&lt; \"Hello\" &lt;&lt; x &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 4356019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/314fa8774e7cd5be85371f4e2f6d9772?s=128&d=identicon&r=PG&f=1", "display_name": "Yini Guo", "link": "https://stackoverflow.com/users/4356019/yini-guo"}, "is_accepted": false, "score": 0, "last_activity_date": 1497460292, "creation_date": 1497460292, "answer_id": 44550862, "question_id": 44550782, "link": "https://stackoverflow.com/questions/44550782/when-trying-to-read-from-a-text-file-in-c-it-gives-me-a-large-random-number/44550862#44550862", "title": "When trying to read from a text file in c++ it gives me a large random number", "body": "<p>Bob is not an int,\nchange it to string.</p>\n"}], "owner": {"reputation": 1, "user_id": 8161843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5850ea66fffca467fd0ae0c7a707713?s=128&d=identicon&r=PG&f=1", "display_name": "user683422", "link": "https://stackoverflow.com/users/8161843/user683422"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 44550834, "answer_count": 2, "score": -3, "last_activity_date": 1497460292, "creation_date": 1497459945, "question_id": 44550782, "link": "https://stackoverflow.com/questions/44550782/when-trying-to-read-from-a-text-file-in-c-it-gives-me-a-large-random-number", "title": "When trying to read from a text file in c++ it gives me a large random number", "body": "<p>I'm trying to make a program that gets your name and greets you with it. Here is my code:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;fstream&gt;\n    #include &lt;string&gt;\n    #include &lt;cstdlib&gt;\n\nusing namespace std;\n\nint main()\n{\n\n\n       ifstream infile;\n       infile.open(\"Info.txt\");\n\nint x;\n\ninfile &gt;&gt; x;\n\ncout &lt;&lt; \"Hello \" &lt;&lt; x &lt;&lt; endl;\n\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>My Info.txt only contains 1 line that just says \"Bob\", but when I run the program all I get is \"Hello 1978627034\"</p>\n"}, {"tags": ["c++", "arrays"], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 0, "last_activity_date": 1497459786, "creation_date": 1497459786, "answer_id": 44550740, "question_id": 44550697, "link": "https://stackoverflow.com/questions/44550697/2d-array-make-me-stuck/44550740#44550740", "title": "2D array make me STUCK", "body": "<p>Because arrays when passed to functions are treated like <em>pointers</em> (to the arrays first element).</p>\n\n<p>So an argument declaration like</p>\n\n<pre><code>float month[][X]\n</code></pre>\n\n<p>is equal to</p>\n\n<pre><code>float (*month)[X]\n</code></pre>\n\n<p>So <code>month</code> is a pointer to an array of <code>X</code> elements of type <code>float</code>.</p>\n\n<p>This is because a \"2d\" array is really an array <em>of arrays</em>. C++ doesn't really have multi-dimensional arrays.</p>\n\n<p>Also note that an <a href=\"https://stackoverflow.com/questions/18440205/casting-void-to-2d-array-of-int-c/18440456#18440456\">array of arrays is <em>not</em> the same as a pointer to a pointer</a>. The decay to a pointer only happens for the outer array (\"first dimension\").</p>\n"}], "owner": {"reputation": 21, "user_id": 7982140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4dbe5f0de286f85e9fc2362e9170223?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay", "link": "https://stackoverflow.com/users/7982140/abhay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "accepted_answer_id": 44550740, "answer_count": 1, "score": -1, "last_activity_date": 1497459786, "creation_date": 1497459653, "last_edit_date": 1497459718, "question_id": 44550697, "link": "https://stackoverflow.com/questions/44550697/2d-array-make-me-stuck", "title": "2D array make me STUCK", "body": "<p>I am struck while reading 2D array in C++ that we can declare in<br>\nSuch a way:</p>\n\n<pre><code>month=4;.   // Initialize value of mont variable\nvoid display(float [ ] [month] );   //declare\n</code></pre>\n\n<p>I want to know why the function doesn't need the size of fist dimension  ?</p>\n\n<p>I ask this question on many forums but only get the way how to declare array like this . But never find the answer of why?</p>\n"}, {"tags": ["c++", "intel"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1497518376, "post_id": 44550483, "comment_id": 76115972, "body": "What is <code>N</code>? Is it a compile-time constant? Can you show us the definition and initialization?"}, {"owner": {"reputation": 801, "user_id": 646993, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba9f016c1608cbd1257e8c43860f1b?s=128&d=identicon&r=PG&f=1", "display_name": "boraas", "link": "https://stackoverflow.com/users/646993/boraas"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1497535634, "post_id": 44550483, "comment_id": 76128021, "body": "No, it is not known at compile time. I pass it via command line options."}], "owner": {"reputation": 801, "user_id": 646993, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e2ba9f016c1608cbd1257e8c43860f1b?s=128&d=identicon&r=PG&f=1", "display_name": "boraas", "link": "https://stackoverflow.com/users/646993/boraas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1497461599, "creation_date": 1497458931, "question_id": 44550483, "link": "https://stackoverflow.com/questions/44550483/loop-was-not-vectorized-loop-control-variable-was-not-identified", "title": "loop was not vectorized: loop control variable was not identified", "body": "<p>Unfortunately the Intel compiler was unable to vectorize the following i and j loops: </p>\n\n<pre><code>#pragma ivdep\n#pragma vector always\nfor (  i = 1 ; i &lt; N ; i++ ){ // &lt;- not vectorized\n    for (  j = 0 ; j &lt; i ; j++ ){ // &lt;- not vectorized\n        // Matrix multiplication on C = x(i) * x(j)\n        cblas_dgemm(...,&amp;x[i*BLOCKSIZE*D],... , &amp;x[j*BLOCKSIZE*D],..., c);\n        int accum=0;\n\n        // following loop gets vectorized well\n        #pragma omp parallel for reduction(+:accum) collapse(2)\n        for ( int k = 0 ; k &lt; BLOCKSIZE ; k++ ){\n            for ( int l =0 ; l &lt; BLOCKSIZE ; l++ ){                    \n                    accum +=  C[k * NRC + l] + p[j*BLOCKSIZE + l] + p[i*BLOCKSIZE+k];\n            }\n        }\n\n        total += accum;\n    }\n}\n</code></pre>\n\n<p>The vectorization report says:</p>\n\n<pre><code>LOOP BEGIN at i-th loop:\n   remark #15521: loop was not vectorized: loop control variable was not identified. Explicitly compute the iteration count before executing the loop or try using canonical loop form from OpenMP specification\n\n   LOOP BEGIN at j-th loop:\n      remark #15521: loop was not vectorized: loop control variable was not identified. Explicitly compute the iteration count before executing the loop or try using canonical loop form from OpenMP specification\n   LOOP END\nLOOP END\n</code></pre>\n\n<p>I am really confused, because I think the control variables <code>i</code> and <code>j</code> are obvious and I think I have the cannonical loop form from OpenMP specification. The <code>k</code>- and <code>l</code>-loops work fine by the way. Any guess?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1497458800, "post_id": 44550422, "comment_id": 76091334, "body": "Then don&#39;t use a <code>std::map</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1497458873, "post_id": 44550422, "comment_id": 76091373, "body": "<a href=\"http://en.cppreference.com/w/cpp/container/set\" rel=\"nofollow noreferrer\"><code>std::set</code></a> and <a href=\"http://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\"><code>std::map</code></a> are <i>ordered</i> on the key. If you want <i>unordered</i> then use <a href=\"http://en.cppreference.com/w/cpp/container/unordered_set\" rel=\"nofollow noreferrer\"><code>std::unordered_set</code></a> and <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\"><code>std::unordered_map</code></a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1497458907, "post_id": 44550422, "comment_id": 76091394, "body": "@Coldspeed No it doesn&#39;t - a  std::map is a tree, not a hashtable."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1497458972, "post_id": 44550422, "comment_id": 76091437, "body": "Also read <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a>. Using <code>read.good()</code> is just the same."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1497458975, "post_id": 44550422, "comment_id": 76091442, "body": "Sounds like you want something like Python&#39;s <code>OrderedDict</code>, which keeps the order in which things get added."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1497458977, "post_id": 44550422, "comment_id": 76091445, "body": "Is your question that you want to remove dupes but preserve insertion order?"}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1497459031, "post_id": 44550422, "comment_id": 76091490, "body": "Here is what I think the dupe is: <a href=\"https://stackoverflow.com/q/2551905/2988730\">stackoverflow.com/q/2551905/2988730</a>"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1497459159, "post_id": 44550422, "comment_id": 76091569, "body": "I would store the names in a <code>std::vector</code> (to preserve the order) and additionally registering their indices in a <code>std::set</code> whereby using a special comparator which accesses the vector and considers the names at the resp. indices."}, {"owner": {"reputation": 1889, "user_id": 1036501, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/z8PwP.png?s=128&g=1", "display_name": "zstewart", "link": "https://stackoverflow.com/users/1036501/zstewart"}, "edited": false, "score": 0, "creation_date": 1497459211, "post_id": 44550422, "comment_id": 76091606, "body": "You could use the set just to check if the value was seen before and use a vector for actual storage of the result."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1497459695, "post_id": 44550422, "comment_id": 76091889, "body": "@Someprogrammerdude Sorry, (in opposition to at least 4 other guys) I don&#39;t get it. AFAIK, neither <code>std::unordered_set</code> nor <code>std::unordered_map</code> preserve the insertion order. What am I missing?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1497459840, "post_id": 44550422, "comment_id": 76091967, "body": "@Scheff The OP doesn&#39;t actually say anything about preserving insertion order, just that the contents should not be sorted (ordered)."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1497460006, "post_id": 44550422, "comment_id": 76092048, "body": "@Someprogrammerdude So, you tried to teach something else (e.g. how important it is to clearly specify the intention). Somehow, I was expecting such an answer. But, you are right: &quot;Preserving order&quot; was my own interpretation..."}, {"owner": {"reputation": 1, "user_id": 8113995, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wTRtCdHp1MA/AAAAAAAAAAI/AAAAAAAAnQU/ufrfZBnGhm8/photo.jpg?sz=128", "display_name": "Dantes Dantonovich", "link": "https://stackoverflow.com/users/8113995/dantes-dantonovich"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1497460185, "post_id": 44550422, "comment_id": 76092133, "body": "@Someprogrammerdude I will try using unordered_set, but I am not sure whether task asking me this"}, {"owner": {"reputation": 1, "user_id": 8113995, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wTRtCdHp1MA/AAAAAAAAAAI/AAAAAAAAnQU/ufrfZBnGhm8/photo.jpg?sz=128", "display_name": "Dantes Dantonovich", "link": "https://stackoverflow.com/users/8113995/dantes-dantonovich"}, "edited": false, "score": 0, "creation_date": 1497460749, "post_id": 44550422, "comment_id": 76092442, "body": "How to read from text file into unordered_set?"}, {"owner": {"reputation": 1, "user_id": 8113995, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wTRtCdHp1MA/AAAAAAAAAAI/AAAAAAAAnQU/ufrfZBnGhm8/photo.jpg?sz=128", "display_name": "Dantes Dantonovich", "link": "https://stackoverflow.com/users/8113995/dantes-dantonovich"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1497460829, "post_id": 44550422, "comment_id": 76092486, "body": "@Scheff I don&#39;t wanna use vector dude"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1497461083, "post_id": 44550422, "comment_id": 76092620, "body": "Actually, it could be very simple: Use a <code>std::set&lt;std::string&gt;</code> for book-keeping (i.e. to detect whether a name is a duplicate). If a name is inserted the 1st time then output it otherwise discard it. Did your assignment require that it <i>must</i> be stored somewhere or that input and output may not happen &quot;interleaved&quot;?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1497461293, "post_id": 44550422, "comment_id": 76092766, "body": "And, now the highest-voted comment of Some programmer dude makes somehow sense to me. Iff the assignment says that it may not be sorted (whyever it shouldn&#39;t) then just use an <code>std::unorder_set</code> instead. The APIs of <code>std::set&lt;&gt;</code> and <code>std::unordered_set&lt;&gt;</code> are (as for every container template) quite similar."}, {"owner": {"reputation": 1, "user_id": 8113995, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wTRtCdHp1MA/AAAAAAAAAAI/AAAAAAAAnQU/ufrfZBnGhm8/photo.jpg?sz=128", "display_name": "Dantes Dantonovich", "link": "https://stackoverflow.com/users/8113995/dantes-dantonovich"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1497461847, "post_id": 44550422, "comment_id": 76093106, "body": "@Scheff Thanks man"}], "owner": {"reputation": 1, "user_id": 8113995, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wTRtCdHp1MA/AAAAAAAAAAI/AAAAAAAAnQU/ufrfZBnGhm8/photo.jpg?sz=128", "display_name": "Dantes Dantonovich", "link": "https://stackoverflow.com/users/8113995/dantes-dantonovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497458918, "creation_date": 1497458740, "last_edit_date": 1497458918, "question_id": 44550422, "link": "https://stackoverflow.com/questions/44550422/how-to-remove-duplicate-words-using-map-in-c-without-sorting", "title": "How to remove duplicate words using &lt;map&gt; in C++ without sorting?", "body": "<p>There is a textfile containing names:</p>\n\n<pre><code>Jack Sparrow\nDavid Linch\nJack Sparrow\nUmble Gamble\nLee Sion\nTruman Bruman\nLee Sion\n</code></pre>\n\n<p>I have tried to remove duplicates from it using <code>&lt;set&gt;</code>, but the problem is that it sorts automatically. I want to do it without being sorted.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>int main()\n{\n    string name;\n    set &lt;string&gt; nameList;\n\n    char fileName[50];\n\n    cout &lt;&lt; \"Please Enter file name: \";\n    cin &gt;&gt; fileName;\n\n    ifstream read(fileName);\n    if(!read){\n        cout &lt;&lt; \"File not found!\" &lt;&lt; endl;\n        return -1;\n    }\n\n\n    while(read.good()){\n\n         if(!read.eof()){\n\n              copy(istream_iterator&lt;string&gt;(read),istream_iterator&lt;string&gt;(),inserter(nameList,nameList.end()));\n    }\n    }\n    read.close();\n        cout&lt;&lt;endl;\n        copy(nameList.begin(),nameList.end(),ostream_iterator&lt;string&gt;(cout,\" \"));\n\n        cout&lt;&lt;endl;\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix", "matrix-multiplication"], "comments": [{"owner": {"reputation": 681, "user_id": 5994074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzK2Q.jpg?s=128&g=1", "display_name": "GAURANG VYAS", "link": "https://stackoverflow.com/users/5994074/gaurang-vyas"}, "edited": false, "score": 0, "creation_date": 1497458063, "post_id": 44550155, "comment_id": 76090941, "body": "What is your question ? Do you want to know how to multiply two matrices or something else?"}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "edited": false, "score": 0, "creation_date": 1497458115, "post_id": 44550155, "comment_id": 76090974, "body": "There are many ways to implement a Matrix class in C++.  Classically, lookup overloading the <code>::operator[]</code> and returning a reference to an inner class which also overloads <code>::operator[]</code> so you can have actual Matrix syntax."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1497458136, "post_id": 44550155, "comment_id": 76090991, "body": "Questions for you: Are the sizes of the matrices known at compile time?  Are the matrices expected to be square matrices only?"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1497467766, "post_id": 44550957, "comment_id": 76096337, "body": "Class is the right way to go, but there is room for a couple improvements. <code>InnerM</code> needs a destructor. Right now it leaks. Once that is fixed you may notice it does not comply with <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">the Rule of Three</a> and that can result in a comedy of errors later. The best solution to both problems so far is another <code>std::vector</code>. The last improvement is a performance tuning issue. By having a <code>vector</code> containing a dynamic allocation you lose contiguity of storage and take a hit to cache friendliness."}, {"owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1497470754, "post_id": 44550957, "comment_id": 76097933, "body": "Absolutely, like I said, I just spit something out."}], "tags": [], "owner": {"reputation": 2279, "user_id": 1370785, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/oASta.jpg?s=128&g=1", "display_name": "jiveturkey", "link": "https://stackoverflow.com/users/1370785/jiveturkey"}, "is_accepted": false, "score": 2, "last_activity_date": 1497460624, "creation_date": 1497460624, "answer_id": 44550957, "question_id": 44550155, "link": "https://stackoverflow.com/questions/44550155/matrix-return-and-pass-as-parameter-c/44550957#44550957", "title": "Matrix - return and pass as parameter c++", "body": "<p>Here's a nice, standard C++ Matrix template for you.</p>\n\n<p><code>Matrix.h</code></p>\n\n<pre><code>#include &lt;vector&gt;\n\nclass Matrix\n{\n    class InnerM\n    {\n        private:\n           int ydim;\n           double* values;\n\n        public:\n            InnerM(int y) : ydim(y)\n            {\n                values = new double[y];\n            }\n\n            double&amp; operator[](int y)\n            {\n                return values[y];\n            }\n    };\n\n    private:\n       int xdim;\n       int ydim;\n\n       std::vector&lt;InnerM&gt; inner;\n\n    public:\n\n       Matrix(int x, int y) : xdim(x), ydim(y), inner(xdim, InnerM(ydim))\n       {\n       }\n\n       InnerM&amp; operator[](int x)\n       { \n           return inner[x];\n       }\n};\n</code></pre>\n\n<p>All the memory leaks are there for you but you get the idea.  From here you can handle the multiplication by overiding <code>::operator*()</code> in the Matrix class.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1497467822, "post_id": 44551088, "comment_id": 76096370, "body": "Don&#39;t use array of array for a matrix. It is slow, annoying to pass around, and dumps all of the memory management on the programmer. At the very least wrap it in a class."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user8038009"}, "is_accepted": false, "score": 1, "last_activity_date": 1497463548, "last_edit_date": 1497463548, "creation_date": 1497461096, "answer_id": 44551088, "question_id": 44550155, "link": "https://stackoverflow.com/questions/44550155/matrix-return-and-pass-as-parameter-c/44551088#44551088", "title": "Matrix - return and pass as parameter c++", "body": "<p>I assume your problem is to define 2-D array and then pass it to mat_mul function to multiply the matrices. And the rest will be quite simple.</p>\n\n<p>Defining the 2-D array(considering memory needs are known at run time):</p>\n\n<pre><code>    int rows,cols;\n    cin &gt;&gt; rows;\n    cin &gt;&gt; cols;\n\n    int **arr = new int*[rows];          // rows X cols 2D-array \n    for(int i = 0; i &lt; rows; ++i) {\n        arr[i] = new int[cols];\n    }\n</code></pre>\n\n<p>You can define another 2-D array exactly the same way with required rows and column.</p>\n\n<p>now, Passing the 2-D array to function:</p>\n\n<pre><code>void mat_mul(int **arr1, int **arr2, int m, int n, int p, int q){\n    //define a 2-D array to store the result\n    //do the multiplication operation\n    //you could store the result in one of the two arrays\n    //so that you don't have to return it \n    //or else the return type should be modified to return the 2-D array\n}\n</code></pre>\n\n<p>example:</p>\n\n<pre><code>void display(int **arr, int row, int col){\n    for (int i=0; i&lt;row; i++){\n        for(int j=0;j&lt;col; j++){\n            cout &lt;&lt; arr[i][j] &lt;&lt; '\\t';\n        }\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Delete the memory if not required anymore with the following syntax:</p>\n\n<pre><code>for(int i=0; i&lt;rows; i++){\n  delete[] array[i];\n}\ndelete[] array;\n</code></pre>\n\n<p>hope this will be sufficient to get your work done!</p>\n\n<p>there is already an answer on how to return a 2-D array on SO. Check the link below.</p>\n\n<p><a href=\"https://stackoverflow.com/a/8618617/8038009\">https://stackoverflow.com/a/8618617/8038009</a></p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1497468841, "creation_date": 1497468841, "answer_id": 44553264, "question_id": 44550155, "link": "https://stackoverflow.com/questions/44550155/matrix-return-and-pass-as-parameter-c/44553264#44553264", "title": "Matrix - return and pass as parameter c++", "body": "<p>Returning the raw allocation is a sucker bet. You need to manage all of the memory allocated yourself and pass it around with the matrix size parameters. </p>\n\n<p>Why suffer? Use a matrix class</p>\n\n<pre><code>template&lt;class Type&gt;\nclass Matrix{\n    int rows;\n    int cols;\n    std::vector&lt;type&gt; data;\npublic:\n    Matrix(int row, int col):rows(row), cols(col), data(rows*cols)\n    {\n        // does nothing. All of the heavy lifting was in the initializer\n    }\n    // std::vector eliminates the need for destructor, assignment operators, and copy \n    //and move constructors.\n    //add a convenience method for easy access to the vector\n    type &amp; operator()(size_t row, size_t col)\n    {\n        return data[row*cols+col];\n    } \n    type operator()(size_t row, size_t col) const\n    {\n        return data[row*cols+col];\n    } \n};\n</code></pre>\n\n<p>Usage would be</p>\n\n<pre><code>Matrix&lt;double&gt; mat_mul(const Matrix&lt;double&gt; &amp;a, const Matrix&lt;double&gt; &amp;b) \n{\n    Matrix&lt;double&gt; result;\n    // do multiplication \n\n    return result;\n}\n\nint main()\n{\n    /* initialize random seed: */\n    srand (time(NULL));\n    Matrix&lt;double&gt; matA(10, 10); \n    matA(0,0) = 3.14; // sample assignment\n    matA(9,9) = 2.78;\n    double x = matA(0,0) * matA(9,9)\n    Matrix&lt;double&gt; matB(10, 10); \n\n    Matrix&lt;double&gt; matC = mat_mul(matA, matB) ;\n}\n</code></pre>\n\n<p>More functionality, such as construction from an <a href=\"http://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\">initializer list</a>, can be added to the class to make your life easier. You can also specify an <code>operator *</code> overload for <code>Matrix</code> and use that in place of <code>mat_mul</code> if you chose. Read <a href=\"https://stackoverflow.com/questions/4421706/operator-overloading\">Operator overloading</a> for more on that option.</p>\n"}], "owner": {"reputation": 67, "user_id": 6388903, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/9d605a7bccd7cfa7afa1125b7af72216?s=128&d=identicon&r=PG&f=1", "display_name": "Amy Cohen", "link": "https://stackoverflow.com/users/6388903/amy-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1381, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1497468841, "creation_date": 1497457865, "last_edit_date": 1497460735, "question_id": 44550155, "link": "https://stackoverflow.com/questions/44550155/matrix-return-and-pass-as-parameter-c", "title": "Matrix - return and pass as parameter c++", "body": "<p>I'm trying to use clear functions to do a matrix multiplication with random generated values. Therefore I'm hoping to use a function(<code>mat_def</code>) to generate the matrices and another function(<code>mat_mul</code>) to multiply them when the matrices are sent as parameters.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;time.h&gt;\n\nusing namespace std;\n\ndouble mat_def(int n) //how to return the matrix\n{\n    double a[n][n];\n\n    double f; \n\n    for(int i=0; i&lt;n;  i++)\n    {\n        for(int j=0; j&lt;n; j++)\n        {\n            f= rand();\n            cout&lt;&lt;f ;\n            a[i][j]=f;\n        }\n\n    }\n\n    return 0;\n}\n\n\ndouble mat_mul( int n, double a[n][n], double b[n][n]) //how to send matrix as parameter\n{\n    return 0;\n}\n\n\nint main()\n{\n    /* initialize random seed: */\n    srand (time(NULL));\n    mat_def(10); \n}\n</code></pre>\n"}, {"tags": ["c++", "priority-queue", "deleted-functions"], "comments": [{"owner": {"reputation": 518, "user_id": 8161208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XEwnK.png?s=128&g=1", "display_name": "Volodymyr Lashko", "link": "https://stackoverflow.com/users/8161208/volodymyr-lashko"}, "edited": false, "score": 0, "creation_date": 1497458449, "post_id": 44550093, "comment_id": 76091151, "body": "Seems to be a quirk in Visual Studio. This code compiles fine on my machine (clang-802.0.42)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 518, "user_id": 8161208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XEwnK.png?s=128&g=1", "display_name": "Volodymyr Lashko", "link": "https://stackoverflow.com/users/8161208/volodymyr-lashko"}, "edited": false, "score": 0, "creation_date": 1497458751, "post_id": 44550093, "comment_id": 76091306, "body": "@Vol If so, it&#39;s also a quirk of GCC 5.1.0."}, {"owner": {"reputation": 518, "user_id": 8161208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XEwnK.png?s=128&g=1", "display_name": "Volodymyr Lashko", "link": "https://stackoverflow.com/users/8161208/volodymyr-lashko"}, "edited": false, "score": 0, "creation_date": 1497459197, "post_id": 44550093, "comment_id": 76091597, "body": "@NeilButterworth standard library implementation plays a role here. Does not compile with libstdc++, but compiles with libc++."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 3, "last_activity_date": 1497458565, "creation_date": 1497458565, "answer_id": 44550375, "question_id": 44550093, "link": "https://stackoverflow.com/questions/44550093/attempting-to-reference-a-deleted-function-error-when-swapping-priority-queues/44550375#44550375", "title": "Attempting to reference a deleted function error when swapping priority queues", "body": "<p>Lambdas don't have assignment operators, and swap() uses assignment. It will be trying to use assignment on the greater lambda held inside the queue.</p>\n"}, {"tags": [], "owner": {"reputation": 518, "user_id": 8161208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XEwnK.png?s=128&g=1", "display_name": "Volodymyr Lashko", "link": "https://stackoverflow.com/users/8161208/volodymyr-lashko"}, "is_accepted": true, "score": 1, "last_activity_date": 1497465546, "creation_date": 1497465546, "answer_id": 44552287, "question_id": 44550093, "link": "https://stackoverflow.com/questions/44550093/attempting-to-reference-a-deleted-function-error-when-swapping-priority-queues/44552287#44552287", "title": "Attempting to reference a deleted function error when swapping priority queues", "body": "<p>The implementation of <code>std::swap</code> in stdlibc++ (and, most likely, standard library for Visual Studio) uses old-fashioned assignments:</p>\n\n<pre><code>swap(_Tp&amp; __a, _Tp&amp; __b)\n{\n    // concept requirements\n    __glibcxx_function_requires(_SGIAssignableConcept&lt;_Tp&gt;)\n\n    _Tp __tmp = __a;\n    __a = __b;\n    __b = __tmp;\n}\n</code></pre>\n\n<p>On the contrary, libcxx implements it using <code>std::move</code>:</p>\n\n<pre><code>swap(_Tp&amp; __x, _Tp&amp; __y) _NOEXCEPT_(is_nothrow_move_constructible&lt;_Tp&gt;::value &amp;&amp;\n                                    is_nothrow_move_assignable&lt;_Tp&gt;::value)\n{\n     _Tp __t(_VSTD::move(__x));\n     __x = _VSTD::move(__y);\n     __y = _VSTD::move(__t);\n}\n</code></pre>\n\n<p>In order to swap objects of type <code>std::priority_queue</code> you have to swap their comparators, which are represented as a lambda in your code. Swapping lambda in stdlibc++ is impossible due to deleted copy assignment operator.</p>\n\n<p>By the way, there is no need to use a lambda since your capture list is empty. A simple function will do the job.</p>\n\n<pre><code>bool greater(const Node&amp; a, const Node&amp;  b) {return a.idx &gt; b.idx;};\nusing QUEUE = std::priority_queue&lt;Node, std::vector&lt;Node&gt;, decltype(&amp;greater)&gt;;\n\nvoid foo(QUEUE&amp;&amp; a)\n{\n    QUEUE b(&amp;greater);\n    a.swap(b);\n}\n</code></pre>\n\n<p>Alternatively, you can replace a lambda with a callable object which has move assignment.</p>\n"}], "owner": {"reputation": 660, "user_id": 4567934, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/u9d5p.png?s=128&g=1", "display_name": "Stoatman", "link": "https://stackoverflow.com/users/4567934/stoatman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 44552287, "answer_count": 2, "score": 0, "last_activity_date": 1497465546, "creation_date": 1497457651, "question_id": 44550093, "link": "https://stackoverflow.com/questions/44550093/attempting-to-reference-a-deleted-function-error-when-swapping-priority-queues", "title": "Attempting to reference a deleted function error when swapping priority queues", "body": "<p>I was just trying to swap the data between the two priority queues and got this error. I also did some googling and still don't know what's wrong here.</p>\n\n<pre><code>#include &lt;queue&gt;\n\nclass Node\n{\npublic:\n    int idx;\n};\nauto greater = []( const Node&amp; a, const Node&amp;  b) {return a.idx &gt; b.idx; };\nusing QUEUE  = std::priority_queue&lt;Node, std::vector&lt;Node&gt;, decltype(greater)&gt;;\n\nvoid foo(QUEUE&amp; a)\n{\n    QUEUE b(greater);\n    a.swap(b);\n}\n\nint main()\n{\n\n}\n</code></pre>\n\n<p>Here's the full error message: </p>\n\n<blockquote>\n  <p>Error C2280   ' &lt; lambda_07efac20ebfa61cc8bb35aebd7d81f7c> &amp;&lt;&lt;\n  lambda_07efac20ebfa61cc8bb35aebd7d81f7c>>::operator =(const &lt;&lt;\n  lambda_07efac20ebfa61cc8bb35aebd7d81f7c>> &amp;)': attempting to reference\n  a deleted function</p>\n</blockquote>\n"}, {"tags": ["c++", "deque"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1497457347, "post_id": 44549996, "comment_id": 76090540, "body": "run under valgrind if you are on linux"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 9, "creation_date": 1497457534, "post_id": 44549996, "comment_id": 76090638, "body": "You initialize the deque with 4 elements and pop <code>n-2</code> elements off"}, {"owner": {"reputation": 19, "user_id": 6537541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ePQjZ.jpg?s=128&g=1", "display_name": "Assem Attia", "link": "https://stackoverflow.com/users/6537541/assem-attia"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1497457999, "post_id": 44549996, "comment_id": 76090906, "body": "@Kevin excuse me, when did I pop the second element? I pop <code>n-1</code> element per iteration. It works well from <code>0</code> to <code>127</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1497458083, "post_id": 44549996, "comment_id": 76090955, "body": "Every iteration <code>sum.pop_front();</code> removes the first element from the deque. After 4 iterations the deque is empty, but you&#39;ve wandered into undefined behaviors before that. Quick hack example: <a href=\"http://ideone.com/W6j3Pr\" rel=\"nofollow noreferrer\">ideone.com/W6j3Pr</a>"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1497458089, "post_id": 44549996, "comment_id": 76090959, "body": "The loop runs <code>n-2</code> times and you never push anything else onto the deque (see my answer). <code>sum[3]</code> modifies an existing element. It doesn&#39;t append a new one."}, {"owner": {"reputation": 19, "user_id": 6537541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ePQjZ.jpg?s=128&g=1", "display_name": "Assem Attia", "link": "https://stackoverflow.com/users/6537541/assem-attia"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1497459580, "post_id": 44549996, "comment_id": 76091811, "body": "@user4581301 I see. Thanks :)"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 6537541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ePQjZ.jpg?s=128&g=1", "display_name": "Assem Attia", "link": "https://stackoverflow.com/users/6537541/assem-attia"}, "edited": false, "score": 0, "creation_date": 1497459628, "post_id": 44550182, "comment_id": 76091839, "body": "Awesome! It worked, thanks :) However, it looks like the technique is so slow at <code>long long n</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 19, "user_id": 6537541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ePQjZ.jpg?s=128&g=1", "display_name": "Assem Attia", "link": "https://stackoverflow.com/users/6537541/assem-attia"}, "edited": false, "score": 0, "creation_date": 1497465676, "post_id": 44550182, "comment_id": 76095206, "body": "@AssemAttia You may find a fixed size array with an index that wraps around when it hits the end of the array to be a faster approach than the deque without changing the overall algorithm (but shouldn&#39;t be by much).  There are faster algorithms that you can use though. A warning: I&#39;m pretty sure you have some bad math in the algorithm at the moment. Check your numbers."}], "tags": [], "owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "is_accepted": false, "score": 3, "last_activity_date": 1497458961, "last_edit_date": 1497458961, "creation_date": 1497457950, "answer_id": 44550182, "question_id": 44549996, "link": "https://stackoverflow.com/questions/44549996/deque-throws-segfault-after-128-iterations/44550182#44550182", "title": "deque throws Segfault after 128 iterations", "body": "<p>You initialize <code>sum</code> with 4 elements and never add any more. But you do <code>sum.pop_front()</code> in a loop <code>n-2</code> times. You can either initialize <code>sum</code> with <code>n</code> elements or <code>push_back</code> a new element like this:</p>\n\n<pre><code>deque&lt;int&gt; sum(3);\nsum[0] = 0;\nsum[1] = 1;\nsum[2] = 2;\nfor (long long i = 3; i &lt;= n; ++i) {\n    sum.push_back((sum[2] + sum[1] + 1) % 10);\n    sum.pop_front();\n}\nreturn sum[2];\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 6537541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ePQjZ.jpg?s=128&g=1", "display_name": "Assem Attia", "link": "https://stackoverflow.com/users/6537541/assem-attia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1497458961, "creation_date": 1497457258, "question_id": 44549996, "link": "https://stackoverflow.com/questions/44549996/deque-throws-segfault-after-128-iterations", "title": "deque throws Segfault after 128 iterations", "body": "<p>I don't have a clue why this function outputs <code>Segmentation fault</code> when <code>n &gt;= 128</code></p>\n\n<p>Apparently, this was supposed to handle <code>long long n</code> to output the last digit of the sum of the first <code>n</code> Fibonacci numbers.</p>\n\n<p>I don't ask for a solution, I know there're alternatives!</p>\n\n<p>All I want to know is why the Segfault? Am I missing something? It's my first time to deal with <code>deque</code> btw.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;deque&gt;\n\nusing namespace std;\n\nint fibonacci_sum_deque(long long n) {\n  if (n &lt;= 2)\n    return n;\n\n  deque&lt;int&gt; sum(4);\n  sum[0] = 0;\n  sum[1] = 1;\n  sum[2] = 2;\n\n  for (long long i = 3; i &lt;= n; ++i) {\n    sum[3] = (sum[2] + sum[1] + 1) % 10;\n    sum.pop_front();\n  }\n\n  return sum[2];\n}\n\nint main() {\n    long long n = 0;\n    cin &gt;&gt; n;\n    cout &lt;&lt; fibonacci_sum_deque(n);\n}\n</code></pre>\n\n<p>gdb output:</p>\n\n<pre><code>Program received signal SIGSEGV, Segmentation fault.\n0x0000000000401861 in fibonacci_sum_deque(long long) ()\n(gdb) where\n#0  0x0000000000401861 in fibonacci_sum_deque(long long) ()\n#1  0x000000000040342d in main ()\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1497457004, "post_id": 44549684, "comment_id": 76090354, "body": "You know that tuple is also templated on its types, right? You probably wouldn&#39;t be able to circumvent the issue of code size with it."}, {"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1497457106, "post_id": 44549684, "comment_id": 76090409, "body": "Also, if you say input string, do you mean compile time or runtime input?"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 1, "creation_date": 1497463164, "post_id": 44549684, "comment_id": 76093877, "body": "What is LPVOID, can you explain? Edit: is it basically <code>void*</code>?"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1497463535, "post_id": 44549684, "comment_id": 76094092, "body": "At any rate I think your &quot;code bloat&quot; concern is unfounded. The typedef and the cast that you have in the function body don&#39;t generate any code. All that the function body really does is call the passed function pointer, which is the work you need to do anyhow. In practice what you will probably see is that <code>call</code> always gets inlined (because a particular template sequence only shows up once) and is just a handful of extra lines of assembly, which you needed anyhow!"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 8161501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/133a428d812485ca2c89f0a00f5c4918?s=128&d=identicon&r=PG&f=1", "display_name": "Markuse", "link": "https://stackoverflow.com/users/8161501/markuse"}, "edited": false, "score": 0, "creation_date": 1497794896, "post_id": 44551598, "comment_id": 76217746, "body": "This looks good, but unfortunately I am not able to change the called funtions as they are part of an existing library. I think it should be possible to do this via templates, but I have tried several ideas without success..."}], "tags": [], "owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "is_accepted": false, "score": 0, "last_activity_date": 1497463004, "creation_date": 1497463004, "answer_id": 44551598, "question_id": 44549684, "link": "https://stackoverflow.com/questions/44549684/calling-a-function-via-lpvoid-with-up-to-10-arguments-of-different-types/44551598#44551598", "title": "calling a function via LPVOID with up to 10 arguments of different types", "body": "<p>I have a proposal but you must set <code>double</code> variables through its address, like a pointer, because a double variable has 8 bytes meanwhile void pointer's size has 4 bytes for x86 and 8 bytes for x64. Also <code>string</code> variables must be setted as pointers:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;string&gt;\n\nusing namespace std;\n\nbool Func1(void* arg1, void* arg2, void* arg3, void* arg4, void* arg5, void* arg6)\n{\n    bool result = false;\n\n    int a1 = (int)arg1;\n    int a2 = *(int*)arg2;\n    double a3 = *(double*)arg3;\n    double* a4 = (double*)arg4;\n    string a5 = *(string*)arg5;\n    string* a6 = (string*)arg6;\n\n    //Do something...\n\n    return result;\n}\n\nint main()\n{\n    bool(*myFun)(void* arg1, void* arg2, void* arg3, void* arg4, void* arg5, void* arg6);\n    myFun = &amp;Func1;\n    int a1 = 2;\n    int a2 = 3;\n    double a3 = 4;\n    double* a4 = new double(5);\n    string a5= \"MyData 1\";\n    string* a6 = new string(\"MyData 2\");\n\n    bool r = (*myFun)((void*)a1, (void*)&amp;a2, (void*)&amp;a3, (void*)a4, (void*)&amp;a5, (void*)a6);\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9SIRZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9SIRZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>I hope this could help you.</p>\n"}, {"tags": [], "owner": {"reputation": 1381, "user_id": 1588303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02fa7266adc9004d79339808f4f13127?s=128&d=identicon&r=PG", "display_name": "Rodney P. Barbati", "link": "https://stackoverflow.com/users/1588303/rodney-p-barbati"}, "is_accepted": false, "score": 0, "last_activity_date": 1499381378, "creation_date": 1499381378, "answer_id": 44960022, "question_id": 44549684, "link": "https://stackoverflow.com/questions/44549684/calling-a-function-via-lpvoid-with-up-to-10-arguments-of-different-types/44960022#44960022", "title": "calling a function via LPVOID with up to 10 arguments of different types", "body": "<p>My suggestion, for anyone interested in alternatives...</p>\n\n<p>Bury the LPVOID function under a meaningful API and never use it directly again. </p>\n\n<p>Obviously, an LPVOID function taking a bunch of void *ters is not self-documenting, so provide something that is.  </p>\n\n<p>Provide various constructors or helper methods that accept the values required for making a specific low level call to the LPVOID and provide conversion methods for handing the values down to the LPVOID.</p>\n"}], "owner": {"reputation": 17, "user_id": 8161501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/133a428d812485ca2c89f0a00f5c4918?s=128&d=identicon&r=PG&f=1", "display_name": "Markuse", "link": "https://stackoverflow.com/users/8161501/markuse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 615, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1499381378, "creation_date": 1497456311, "question_id": 44549684, "link": "https://stackoverflow.com/questions/44549684/calling-a-function-via-lpvoid-with-up-to-10-arguments-of-different-types", "title": "calling a function via LPVOID with up to 10 arguments of different types", "body": "<p>I need to call a function where I have the LPVOID and the number of arguments. Furthermore I know the types and positions of the arguments. \nThe arguments can be of type int, int*, double, double*, string, string*.\nAs the arguments can be in any order the possible list of templates would be very large. The return value is always boolean.</p>\n\n<pre><code>bool Func1(int);\nbool Func1(int*);\nbool Func1(double);\n(...)\nbool Func2(int,int);\nbool Func2(int,int*);\n(...)\n</code></pre>\n\n<p>So this is not an option. I've tried to use std::tuple but with no success.\nThe following examples only works for a function with arguments (int, double).</p>\n\n<pre><code>    template &lt;typename R, typename... Args&gt;\n    R call(FARPROC fp, Args... args) throw(HRESULT)\n    {\n        typedef R(__stdcall * function_pointer)(Args...);\n        function_pointer P = (function_pointer)fp;\n        const auto return_value = (*P)(std::forward&lt;Args&gt;(args)...);\n        ().do_cast(fetch_back(args))...);\n        return return_value;\n     }\n\n(...)\nLPVOID function;\nint iVal1 = 2;\ndouble dbVal1 = 3.0;\nauto t = std::make_tuple(iVal1 , dbVal1);\nbool bRes = call&lt;bool&gt;((FARPROC)function, std::get&lt;0&gt;(t), std::get&lt;1&gt;(t));\n</code></pre>\n\n<p>What I am thinking about is a generic way of creating the std::tuple based on some input (string etc.), something like: auto t = create_tuple(\"int,int*,int\").</p>\n"}, {"tags": ["c++", "c++11", "stdlist", "deleted-functions"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1497456294, "post_id": 44549639, "comment_id": 76089968, "body": "Did you keep the move semantics?"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1497456715, "post_id": 44549639, "comment_id": 76090203, "body": "Which version of the standard? What line of your code causes the error?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1497457160, "post_id": 44549639, "comment_id": 76090437, "body": "Add a move constructor?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1497460444, "post_id": 44549639, "comment_id": 76092259, "body": "How are you adding objects to the <code>list</code>?"}, {"owner": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1497465302, "post_id": 44549639, "comment_id": 76095012, "body": "@MooingDuck: <code>list.emplace_back(params)</code>;"}, {"owner": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "edited": false, "score": 0, "creation_date": 1497465481, "post_id": 44549639, "comment_id": 76095108, "body": "@NeilButterworth: It shouldn&#39;t be needed, and it&#39;s risky in case the original is referred by some pointer."}, {"owner": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1497465585, "post_id": 44549639, "comment_id": 76095160, "body": "@MarkB: <code>list.emplace_back(params)</code> - the point of instantiation of an element."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1497465635, "post_id": 44549639, "comment_id": 76095184, "body": "@SF.: What are <code>params</code>?"}, {"owner": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1497465719, "post_id": 44549639, "comment_id": 76095230, "body": "@LogicStuff: I didn&#39;t touch move semantics, but actually I should have explicitly disabled it. The object, once explicitly instantiated should remain in the same place until end of life (again, caused by an explicit removal), never copied or moved anywhere - so that pointers to it never get invalidated."}, {"owner": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1497466016, "post_id": 44549639, "comment_id": 76095393, "body": "@Mooing Duck: In my case: <code>this</code> - instance of the &#39;manager&#39; class which holds the list, manages creation and deletion of its elements, hands out references or pointers to the elements, and above all monitors the pool (the set of instances) and performs a smart management of a (separate) resource depending on their demands. &#39;Reader&#39; is its member class and needs to access some members of it, thus <code>this</code> which allows Reader to read these."}], "answers": [{"comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 3, "creation_date": 1497458844, "post_id": 44549861, "comment_id": 76091360, "body": "I will say I&#39;m a bit baffled why <code>std::list</code> requires a copy or move ctor in the first place -- can&#39;t <code>emplace_back()</code> technically create the new object in its final place without any copying or moving? Is this an oversight in the standard or is there a situation in which <code>std::list</code> must be able to move an object stored in the list?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1497459044, "post_id": 44549861, "comment_id": 76091498, "body": "@cdhowie, The object in the list has to be constructed somehow. <code>emplace_back</code> makes it as efficient as possible but it still needs to construct an object. From <a href=\"http://en.cppreference.com/w/cpp/container/list/emplace_back\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/list/emplace_back</a>: <i>uses placement-new to construct the element in-place at the location provided by the container.</i>"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 1, "creation_date": 1497459473, "post_id": 44549861, "comment_id": 76091761, "body": "Right. And why would that require copying or moving the object? Unless OP is trying to move an object into the list. Perhaps the solution for the OP should be to emplace the object there to begin with? I guess the question is a bit unclear on how the object is being constructed."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 1, "creation_date": 1497459611, "post_id": 44549861, "comment_id": 76091830, "body": "@cdhowie, when the argument to <code>emplace_back</code> is another object, the placement new will end up calling either the copy constructor or the move constructor."}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 1, "creation_date": 1497460104, "post_id": 44549861, "comment_id": 76092090, "body": "@R Sahu Would you consider putting that comment on placement new calling copy/move constructor into the answer body? That was the missing link I needed to fully understand your answer."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1497460527, "post_id": 44549861, "comment_id": 76092313, "body": "@RSahu: While this answer is <i>technically</i> correct, it (accidentally?)  implies that <code>std::list</code> requires a move/copy to construct and cannot construct properly in place."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1497460793, "post_id": 44549861, "comment_id": 76092472, "body": "@MooingDuck, You&#39;re right. If the arguments to <code>emplace_back</code> is just the data to create object, then you won&#39;t need a copy constructor or a move constructor. However, that does not seem to be the case for the OP."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1497461760, "post_id": 44549861, "comment_id": 76093053, "body": "@RSahu Right, I know that providing an object causes that behavior. It looks like that&#39;s what&#39;s going on -- OP is trying to put an existing object in the list. I&#39;m saying that it shouldn&#39;t be necessary to do this. Basically I was getting at what Mooing Duck said."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1497462057, "post_id": 44549861, "comment_id": 76093245, "body": "@cdhowie, Yes, we are all on the same page now. I am glad we cleared  the confusion."}, {"owner": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "edited": false, "score": 0, "creation_date": 1497466305, "post_id": 44549861, "comment_id": 76095590, "body": "In my case the argument to emplace_back is just a pointer to a different object - of different type too. It&#39;s just to be stored in the new instance&#39;s variable for later use (just reading some of its properties, no copying or anything like that). That&#39;s the only constructor for &#39;Reader&#39; type too - taking pointer to that object type, explicitly (so you&#39;d need an extreme accident to call that constructor accidentally, even from Reader&#39;s inside)."}, {"owner": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "edited": false, "score": 0, "creation_date": 1497466501, "post_id": 44549861, "comment_id": 76095718, "body": "To me it seems, that while std::list doesn&#39;t <i>use</i> the move/copy constructor for creation, it still requires these at instantiation, just for formal reasons - creating proper variants of emplace_back, even if they are never to be used."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "edited": false, "score": 0, "creation_date": 1497466567, "post_id": 44549861, "comment_id": 76095761, "body": "@SF, that does not sound right. Adding a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to your post might bring more clarity to the problem."}, {"owner": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "edited": false, "score": 0, "creation_date": 1497466624, "post_id": 44549861, "comment_id": 76095793, "body": "@RSahu: Ok... but not before Monday. I don&#39;t have access to the code until then."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 7, "last_activity_date": 1497460718, "last_edit_date": 1592644375, "creation_date": 1497456865, "answer_id": 44549861, "question_id": 44549639, "link": "https://stackoverflow.com/questions/44549639/does-stdlist-template-require-a-copy-constructor-or-equivalent-in-its-instan/44549861#44549861", "title": "Does std::list template require a copy constructor (or equivalent) in its instance type?", "body": "<p>The answer to the question in the title is &quot;It depends&quot;.</p>\n<p>If your class does have a move constructor, you will be able to use the move constructor. If your class does not have a move constructor, then the copy constructor will be used.</p>\n<p>The object in the list has to be constructed somehow. <code>emplace_back</code> makes it as efficient as possible but it still needs to construct an object. From <a href=\"http://en.cppreference.com/w/cpp/container/list/emplace_back\" rel=\"noreferrer\">http://en.cppreference.com/w/cpp/container/list/emplace_back</a>: <em>uses placement-new to construct the element in-place at the location provided by the container.</em></p>\n<p>When the argument to <code>emplace_back</code> is another object, the placement new will end up calling either the copy constructor or the move constructor.</p>\n<p>If the argument(s) to <code>emplace_back</code> is just the data needed to construct an object, then you don't need a copy constructor or a move constructor.</p>\n<hr />\n<blockquote>\n<p>Is there a way to make this work?</p>\n</blockquote>\n<p>If your, or your team's, policy regarding copy constructor and move constructor is not open for discussion, you will have to use a work around.</p>\n<h3>Work around 1:</h3>\n<p>Store pointers to the objects in the list. This is the simplest work around as long as you can ensure that objects are not deleted behind the list's back and leave the list holding on to dangling pointers.</p>\n<h3>Work around 2:</h3>\n<p>Store a non-pointer handle to the objects in the list. This will require some book keeping code on your part. If you can add the ability to:</p>\n<ol>\n<li>Get an integral value given a pointer to an object. The integral value can be used as the non-pointer handle to the object.</li>\n<li>Get a pointer to the object given the previously returned handle.</li>\n</ol>\n<p>you can easily manage by using a list of handles.</p>\n<p>The above can be easily accomplished by keeping couple of maps that are updated with construction and deletion of objects. Every time you create an object, you add entries to the maps. Every time you delete an object, you remove entries from the maps.</p>\n"}], "owner": {"reputation": 12300, "user_id": 249618, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/81060fe344980bc9a3273a48b8f3e31c?s=128&d=identicon&r=PG", "display_name": "SF.", "link": "https://stackoverflow.com/users/249618/sf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1349, "favorite_count": 0, "accepted_answer_id": 44549861, "answer_count": 1, "score": 0, "last_activity_date": 1497460718, "creation_date": 1497456178, "question_id": 44549639, "link": "https://stackoverflow.com/questions/44549639/does-stdlist-template-require-a-copy-constructor-or-equivalent-in-its-instan", "title": "Does std::list template require a copy constructor (or equivalent) in its instance type?", "body": "<p>I have a class, for which every instance is to be accounted for, creation and destruction regulated tightly. No random moves, copies, temporaries allowed - once created through a dedicated function, the instance can be \"passed around\" only through references and pointers. </p>\n\n<p>To achieve that, I've deleted this class' copy constructor and assignment operator.</p>\n\n<p>The instances were meant to be kept in std::list, created by emplace_back(), removed on demand and never intended to move. But I'm getting errors about the deleted copy constructor.</p>\n\n<pre><code> In constructor 'std::_List_node&lt;_Tp&gt;::_List_node(_Args&amp;&amp; ...) \n error: deleted function 'Reader::Reader(const Reader&amp;) \n          stl_list.h:103: error: used here\n</code></pre>\n\n<p>Is there a way to make this work? Some alternative to std::list that I won't need to carve by hand?</p>\n"}, {"tags": ["c++", "memory-leaks"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1497455561, "post_id": 44549367, "comment_id": 76089462, "body": "You have an infinite loop that&#39;s pushing data into the queue as fast as possible - I can see why slowing it down substantially would make a difference to the memory usage."}, {"owner": {"reputation": 133, "user_id": 5673769, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75f7e9ea8fea3ee952b1aba4605b4e7c?s=128&d=identicon&r=PG&f=1", "display_name": "lens", "link": "https://stackoverflow.com/users/5673769/lens"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1497455757, "post_id": 44549367, "comment_id": 76089603, "body": "@Oliver Charlesworth I don&#39;t understand your answer. Could you give me more detail."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497455909, "post_id": 44549367, "comment_id": 76089716, "body": "This is not a memory leak, but memory consumption of a container when you push data faster than it is consumed. You slow thread that push data and memory consumption obviously decrease, what is the question?"}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 5673769, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75f7e9ea8fea3ee952b1aba4605b4e7c?s=128&d=identicon&r=PG&f=1", "display_name": "lens", "link": "https://stackoverflow.com/users/5673769/lens"}, "edited": false, "score": 0, "creation_date": 1497457141, "post_id": 44549575, "comment_id": 76090425, "body": "I understand your explanation. Is there a good solution to solve this question?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 133, "user_id": 5673769, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75f7e9ea8fea3ee952b1aba4605b4e7c?s=128&d=identicon&r=PG&f=1", "display_name": "lens", "link": "https://stackoverflow.com/users/5673769/lens"}, "edited": false, "score": 0, "creation_date": 1497457226, "post_id": 44549575, "comment_id": 76090473, "body": "Get rid of both sleeps, or make them the same duration, or make your popping code loop until the queue is empty."}, {"owner": {"reputation": 133, "user_id": 5673769, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75f7e9ea8fea3ee952b1aba4605b4e7c?s=128&d=identicon&r=PG&f=1", "display_name": "lens", "link": "https://stackoverflow.com/users/5673769/lens"}, "edited": false, "score": 0, "creation_date": 1497457384, "post_id": 44549575, "comment_id": 76090556, "body": "Actually I get rid of both sleeps, but the memory will increase."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 133, "user_id": 5673769, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75f7e9ea8fea3ee952b1aba4605b4e7c?s=128&d=identicon&r=PG&f=1", "display_name": "lens", "link": "https://stackoverflow.com/users/5673769/lens"}, "edited": false, "score": 0, "creation_date": 1497457519, "post_id": 44549575, "comment_id": 76090627, "body": "Yes, it probably will, as the popping code is more complex (and so probably slower) than the pushing code. In which case use the loop solution."}, {"owner": {"reputation": 133, "user_id": 5673769, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75f7e9ea8fea3ee952b1aba4605b4e7c?s=128&d=identicon&r=PG&f=1", "display_name": "lens", "link": "https://stackoverflow.com/users/5673769/lens"}, "edited": false, "score": 0, "creation_date": 1497457678, "post_id": 44549575, "comment_id": 76090717, "body": "loop is good solution. I will look a better solution. Thanks for help."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 133, "user_id": 5673769, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75f7e9ea8fea3ee952b1aba4605b4e7c?s=128&d=identicon&r=PG&f=1", "display_name": "lens", "link": "https://stackoverflow.com/users/5673769/lens"}, "edited": false, "score": 1, "creation_date": 1497460771, "post_id": 44549575, "comment_id": 76092457, "body": "@lens problem is that you use <code>sleep()</code> instead of proper synchronization, which should be done through <code>std::condition_variable</code>"}, {"owner": {"reputation": 133, "user_id": 5673769, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75f7e9ea8fea3ee952b1aba4605b4e7c?s=128&d=identicon&r=PG&f=1", "display_name": "lens", "link": "https://stackoverflow.com/users/5673769/lens"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497460988, "post_id": 44549575, "comment_id": 76092558, "body": "@Slava Actually I use <code>condition_variable</code>\uff0cbut this can well solve this problem."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 133, "user_id": 5673769, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75f7e9ea8fea3ee952b1aba4605b4e7c?s=128&d=identicon&r=PG&f=1", "display_name": "lens", "link": "https://stackoverflow.com/users/5673769/lens"}, "edited": false, "score": 1, "creation_date": 1497461235, "post_id": 44549575, "comment_id": 76092720, "body": "@lens you can use yet another conditional variable to control size of queue. Usually in real program it is not a problem as thread pool consumes data faster than it is pushed.But if that is the case additional var would solve this issue."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": true, "score": 1, "last_activity_date": 1497460567, "last_edit_date": 1497460567, "creation_date": 1497455970, "answer_id": 44549575, "question_id": 44549367, "link": "https://stackoverflow.com/questions/44549367/when-i-use-thread-and-mutex-c-occur-memory-leak/44549575#44549575", "title": "When I use thread and mutex, C++ occur Memory leak", "body": "<p>You are removing things from the queue with a delay of 500 milliseconds, and pushing them on to the queue with no delay - this means the queue will grow, as the frequency of your pops is not matching that of your  pushes. Adding a delay to the pushes will reduce the growth, so that it may not be obvious for short runs of the program.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1497462836, "last_edit_date": 1497462836, "creation_date": 1497462271, "answer_id": 44551383, "question_id": 44549367, "link": "https://stackoverflow.com/questions/44549367/when-i-use-thread-and-mutex-c-occur-memory-leak/44551383#44551383", "title": "When I use thread and mutex, C++ occur Memory leak", "body": "<p>This is solution to avoid <code>Sleep()</code> in both functions using condition variables:</p>\n\n<pre><code>queue&lt;int&gt; write_odd_queue;\n\nmutex write_odd_mutux;\ncondition_variable data_ready;\ncondition_variable queue_ready;\nbool stopped = false;\n\nconst size_t max_size = 1024;\nconst size_t min_size = 512;\n\nvoid handle_odd()\n{\n    unique_lock&lt;mutex&gt; lk(write_odd_mutux);\n    while (!stopped)\n    {\n        if( write_odd_queue.empty() ) {\n            data_ready.wait( lk );\n            continue;\n        }\n        int i = write_odd_queue.front();\n        write_odd_queue.pop();\n        if( write_odd_queue.size() == min_size )\n            queue_ready.notify_one();\n\n        cout &lt;&lt; \"test size \" &lt;&lt; write_odd_queue.empty() &lt;&lt; \" \";\n        lk.unlock();\n        cout &lt;&lt; \"odd \" &lt;&lt; i &lt;&lt; endl;\n        lk.lock();\n    }\n}\n\nvoid data_prepation_thread()\n{\n    int i = 0;\n    while (!stopped)\n    {\n        unique_lock&lt;mutex&gt; lk(write_odd_mutux);\n        if( write_odd_queue.size() &gt;= max_size ) {\n            queue_ready.wait( lk );\n            continue;\n        }\n        write_odd_queue.push(++i);\n        if( write_odd_queue.size() == 1 )\n            data_ready.notify_all();\n    }\n}\n\nvoid stop()\n{\n     unique_lock&lt;mutex&gt; lk(write_odd_mutux);\n     stopped = true;\n     data_ready.notify_all();\n     queue_ready.notify_all();\n}\n</code></pre>\n\n<p>This will prevent queue to grow bigger than <code>max_size</code> and reenable pushing when size drops to <code>min_size</code>. Also there is no unnecessary delay in processing would be involved, as you would have with <code>Sleep(500)</code>. </p>\n"}], "owner": {"reputation": 133, "user_id": 5673769, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75f7e9ea8fea3ee952b1aba4605b4e7c?s=128&d=identicon&r=PG&f=1", "display_name": "lens", "link": "https://stackoverflow.com/users/5673769/lens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "accepted_answer_id": 44549575, "answer_count": 2, "score": 3, "last_activity_date": 1497462836, "creation_date": 1497455432, "last_edit_date": 1497462631, "question_id": 44549367, "link": "https://stackoverflow.com/questions/44549367/when-i-use-thread-and-mutex-c-occur-memory-leak", "title": "When I use thread and mutex, C++ occur Memory leak", "body": "<p>I want store integer to write_odd_queue, then popping integer from another thread.</p>\n\n<p><code>data_prepation_thread</code> function will store integer to <code>write_odd_queue</code>.</p>\n\n<p><code>handle_odd</code> function will pop integer from <code>write_odd_queue</code>.</p>\n\n<p>When I write <code>Sleep(10)</code>, memory will not increase. </p>\n\n<p>When I comment this code, memory will increase.</p>\n\n<p>Please help me solve this problem.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;thread&gt;\n#include &lt;random&gt;\n#include &lt;windows.h&gt;\n#include &lt;time.h&gt;\n#include &lt;mutex&gt;\n#include &lt;queue&gt;\n#include &lt;condition_variable&gt;\n\nusing namespace std;\n\nqueue&lt;int&gt; write_odd_queue;\n\nmutex write_odd_mutux;\n\nvoid handle_odd()\n{\n    while (true)\n    {\n        int i;\n        {\n            lock_guard&lt;mutex&gt; lk(write_odd_mutux);\n            if (!write_odd_queue.empty())\n            {\n                i = write_odd_queue.front();\n                write_odd_queue.pop();\n                cout &lt;&lt; \"test size \" &lt;&lt; write_odd_queue.empty() &lt;&lt; \" \";\n            }\n            else\n            {\n                continue;\n            }\n        }\n        cout &lt;&lt; \"odd \" &lt;&lt; i &lt;&lt; endl;\n        Sleep(500);\n    }\n}\n\n\nvoid data_prepation_thread()\n{\n    int i = 0;\n    while (true)\n    {\n        i++;\n        unique_lock&lt;mutex&gt; lk(write_odd_mutux);\n        write_odd_queue.push(i);\n        lk.unlock();\n        // comment Sleep(10), memory will not increase.\n        //Sleep(10);\n    }\n}\n\nint main()\n{\n    vector&lt;thread&gt; vec;\n\n    thread t1(handle_odd);\n    vec.push_back(move(t1));\n\n    data_prepation_thread();\n\n    auto it = vec.begin();\n    for (; it != vec.end(); ++it)\n    {\n        it-&gt;join();\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "unicode", "windows-console"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1497456383, "post_id": 44549328, "comment_id": 76090029, "body": "What is your console&#39;s font set to? What is your system (ANSI) code page? Note that you aren&#39;t actually printing Unicode characters; Unicode in Windows is always the two-byte UTF-16 format (<code>wchar_t</code>). But since you&#39;re using the characters from the IBM PC character set, you may be able to get away with using narrow chars."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1497456871, "post_id": 44549328, "comment_id": 76090283, "body": "Problem is your output device, not the code so much."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1497457858, "post_id": 44549328, "comment_id": 76090832, "body": "Besides the codepage issues, you are missing the newlines at the end of each format string."}], "answers": [{"comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1497503849, "post_id": 44550218, "comment_id": 76107732, "body": "In the first example, the program could set the console input/output codepades via <code>conin_cp = GetConsoleCP();</code> <code>conout_cp = GetConsoleOutputCP();</code> <code>SetConsoleCP(437);</code> <code>SetConsoleOutputCP(437)</code>. Then restore the original codepages at exit; the downside being that the codepages won&#39;t be restored if the program crashes or gets terminated."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1497504027, "post_id": 44550218, "comment_id": 76107801, "body": "Note that the first example uses the default C locale. It wouldn&#39;t work if the program called <code>setlocale(LC_CTYPE, &quot;&quot;)</code>, in which case the CRT will transcode (i.e. bytes -&gt; unicode -&gt; bytes) from the system locale ANSI codepage to the console&#39;s input codepage. The ANSI codepage (e.g. 1252) likely doesn&#39;t map these box drawing characters."}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 3, "last_activity_date": 1497458089, "creation_date": 1497458089, "answer_id": 44550218, "question_id": 44549328, "link": "https://stackoverflow.com/questions/44549328/c-unicode-characters-in-console-using-printf/44550218#44550218", "title": "C++ unicode characters in console using printf?", "body": "<p>To use <code>printf</code>, and assuming you are using US-localized Windows with a console code page of 437 (run <code>chcp</code> to check), then the following corrected code will work if you save the source file in code page 437.  One way to do this is to use Notepad++ and set <code>Encoding-&gt;Character sets-&gt;Western European-&gt;OEM-US</code> on the menu.  The downside to this is your source code won't display nicely in most editors, unless they specifically support cp437, and even Notepad++ won't display it correctly on re-opening the file without setting the encoding again.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;io.h&gt;\n#include &lt;fcntl.h&gt;\n\nint main()\n{\n    char pos[9] = {'X','O','X','O','X','O','X','O','X'};\n    printf(\" %c \u2551 %c \u2551 %c \\n\", pos[0], pos[1], pos[2]);\n    printf(\"\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256c\u2550\u2550\u2550\\n\");\n    printf(\" %c \u2551 %c \u2551 %c \\n\", pos[3], pos[4], pos[5]);\n    printf(\"\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256c\u2550\u2550\u2550\\n\");\n    printf(\" %c \u2551 %c \u2551 %c \\n\", pos[6], pos[7], pos[8]);\n    system(\"pause\");    system(\"pause\");\n}\n</code></pre>\n\n<p>On Windows, since the API is natively UTF-16, a better way is to use the following code and save the file in UTF-8 w/ BOM:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;io.h&gt;\n#include &lt;fcntl.h&gt;\n\nint main()\n{\n    char pos[9] = {'X','O','X','O','X','O','X','O','X'};\n    _setmode(_fileno(stdout), _O_U16TEXT);\n    wprintf(L\" %C \u2551 %C \u2551 %C \\n\", pos[0], pos[1], pos[2]);\n    wprintf(L\"\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256c\u2550\u2550\u2550\\n\");\n    wprintf(L\" %C \u2551 %C \u2551 %C \\n\", pos[3], pos[4], pos[5]);\n    wprintf(L\"\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256c\u2550\u2550\u2550\\n\");\n    wprintf(L\" %C \u2551 %C \u2551 %C \\n\", pos[6], pos[7], pos[8]);\n    system(\"pause\");\n}\n</code></pre>\n\n<p>Output (both cases):</p>\n\n<pre><code> X \u2551 O \u2551 X\n\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256c\u2550\u2550\u2550\n O \u2551 X \u2551 O\n\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256c\u2550\u2550\u2550\n X \u2551 O \u2551 X\nPress any key to continue . . .\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8061858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4057f394b34a8ef729fcf05cd49b05ef?s=128&d=identicon&r=PG&f=1", "display_name": "Nattie RainbowFox", "link": "https://stackoverflow.com/users/8061858/nattie-rainbowfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1380, "favorite_count": 0, "accepted_answer_id": 44550218, "answer_count": 1, "score": 0, "last_activity_date": 1497466363, "creation_date": 1497455298, "last_edit_date": 1497466363, "question_id": 44549328, "link": "https://stackoverflow.com/questions/44549328/c-unicode-characters-in-console-using-printf", "title": "C++ unicode characters in console using printf?", "body": "<p>My code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n\nusing namespace std;\n\nint pos[9];\n\nint main() {\n    printf(\" %c \u2551 %c \u2551 %c \", pos[0], pos[1], pos[2]);\n    printf(\"\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256c\u2550\u2550\u2550\");\n    printf(\" %c \u2551 %c \u2551 %c \"), pos[3], pos[4], pos[5];\n    printf(\"\u2550\u2550\u2550\u256c\u2550\u2550\u2550\u256c\u2550\u2550\u2550\");\n    printf(\" %c \u2551 %c \u2551 %c \"), pos[6], pos[7], pos[8];\n    system(\"pause\");\n}\n</code></pre>\n\n<p>My console output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nIDIq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nIDIq.png\" alt=\"Console\"></a></p>\n\n<p>I know there are other ways of doing this, but the point was to achieve this with printf :| Any ideas?</p>\n"}, {"tags": ["c++", "utf-8", "io"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1497454736, "post_id": 44549101, "comment_id": 76088932, "body": "Short answer, hellishly. But please, don&#39;t paste pictures, paste the actual text."}, {"owner": {"reputation": 103, "user_id": 5163053, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/dfe9eab626718e7eaad3149e1e16ec47?s=128&d=identicon&r=PG&f=1", "display_name": "Znap", "link": "https://stackoverflow.com/users/5163053/znap"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1497455588, "post_id": 44549101, "comment_id": 76089483, "body": "Thanks, done that"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1497499455, "post_id": 44549101, "comment_id": 76106452, "body": "Did you trace through your code in a debugger?  I did, in Visual Studio 2017. Both of your input files have a BOM which causes the first read to fail, and even with the BOM removed only the first pair of items is read from the file. The second read grabs the first byte of the utf-8 character and then fails because the next byte isn&#39;t a number. 0x5453 is on the right track with using narrow strings, but that doesn&#39;t work with your last step since you need to isolate each utf-8 character. Short answer, use a utf-8 library for this.  <a href=\"https://github.com/nemtrif/utfcpp\" rel=\"nofollow noreferrer\">github.com/nemtrif/utfcpp</a> is simple."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 5163053, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/dfe9eab626718e7eaad3149e1e16ec47?s=128&d=identicon&r=PG&f=1", "display_name": "Znap", "link": "https://stackoverflow.com/users/5163053/znap"}, "edited": false, "score": 0, "creation_date": 1497459046, "post_id": 44549437, "comment_id": 76091500, "body": "I&#39;m kind of new to C++ , if you could elaborate further that would be extremely helpful, thank you"}, {"owner": {"reputation": 103, "user_id": 5163053, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/dfe9eab626718e7eaad3149e1e16ec47?s=128&d=identicon&r=PG&f=1", "display_name": "Znap", "link": "https://stackoverflow.com/users/5163053/znap"}, "edited": false, "score": 0, "creation_date": 1497481392, "post_id": 44549437, "comment_id": 76102482, "body": "Someone told me if I just added all the ipa symbols as variables it would be easier, is he right or is he just messing with me?"}, {"owner": {"reputation": 103, "user_id": 5163053, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/dfe9eab626718e7eaad3149e1e16ec47?s=128&d=identicon&r=PG&f=1", "display_name": "Znap", "link": "https://stackoverflow.com/users/5163053/znap"}, "edited": false, "score": 0, "creation_date": 1497947337, "post_id": 44549437, "comment_id": 76280535, "body": "utf8 doesnt fit in char or wchar_t, it does with char16_t but it doesnt support iostream"}], "tags": [], "owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "is_accepted": false, "score": 0, "last_activity_date": 1497460377, "last_edit_date": 1497460377, "creation_date": 1497455637, "answer_id": 44549437, "question_id": 44549101, "link": "https://stackoverflow.com/questions/44549101/how-to-read-utf-8-file-data-in-c/44549437#44549437", "title": "How to read UTF-8 file data in C++?", "body": "<p>First thought:</p>\n\n<pre><code>map &lt;- std::unordered_map&lt;char, int&gt;\nopen ipa.txt:\n    for each line in file:\n        map[line[0]] = line[1]\nopen source.txt:\n    for each line in file:\n        create and open line[0].txt:\n            for each char in line[1]:\n                write map[char] to line[0].txt\n</code></pre>\n\n<p>Regarding the actual C++ implementation, AFAIK utf-8 should fit inside <code>char</code> and <code>std::string</code> so you don't have to do anything special there.  If you need utf-8 string literals you must use the <code>u8</code> prefix: <code>u8\"literal\"</code>.  Everything else should be standard file IO.</p>\n\n<p>EDIT: Here are some links to the relevant documentation to help you get started:</p>\n\n<ul>\n<li><a href=\"http://en.cppreference.com/w/cpp/io/basic_ifstream\" rel=\"nofollow noreferrer\">ifstream</a> (for reading from files)</li>\n<li><a href=\"http://en.cppreference.com/w/cpp/io/basic_ofstream\" rel=\"nofollow noreferrer\">ofstream</a> (for writing to files)</li>\n<li><a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\">unordered_map</a> (for mapping 'keys' to 'values')</li>\n</ul>\n\n<p>Outside of that it will probably just take a little Googling.  File IO is very common so I'm sure you can find some good examples online.  As long as your file format is consistent you shouldn't have too much trouble with the file parsing.  Then the rest of it is just storing values in the map and then looking them up when you need them, which is pretty simple.</p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 5163053, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/dfe9eab626718e7eaad3149e1e16ec47?s=128&d=identicon&r=PG&f=1", "display_name": "Znap", "link": "https://stackoverflow.com/users/5163053/znap"}, "edited": false, "score": 0, "creation_date": 1497495918, "post_id": 44557798, "comment_id": 76105650, "body": "Hi, I&#39;ve tried that but it still returns 000000s in the resulting files generated"}], "tags": [], "owner": {"reputation": 1012, "user_id": 1140699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03e1201825435665b90495a653c4643?s=128&d=identicon&r=PG", "display_name": "Stefano Buora", "link": "https://stackoverflow.com/users/1140699/stefano-buora"}, "is_accepted": false, "score": 1, "last_activity_date": 1497495577, "creation_date": 1497495577, "answer_id": 44557798, "question_id": 44549101, "link": "https://stackoverflow.com/questions/44549101/how-to-read-utf-8-file-data-in-c/44557798#44557798", "title": "How to read UTF-8 file data in C++?", "body": "<p>I believe you are using the wrong type for <code>c</code> used in the iteration over <code>name</code>. As <code>c</code> is used as key for the map, and <code>name</code> is a <code>wstring</code>, you should use:</p>\n\n<pre><code>for (wchar_t c : name)  outputfile &lt;&lt; map[c]; \n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>for (char c : name)  outputfile &lt;&lt; map[c]; \n</code></pre>\n\n<p>Isn't it?</p>\n\n<p>Hope this may help, Stefano</p>\n"}], "owner": {"reputation": 103, "user_id": 5163053, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/dfe9eab626718e7eaad3149e1e16ec47?s=128&d=identicon&r=PG&f=1", "display_name": "Znap", "link": "https://stackoverflow.com/users/5163053/znap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2105, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1561870301, "creation_date": 1497454572, "last_edit_date": 1561870301, "question_id": 44549101, "link": "https://stackoverflow.com/questions/44549101/how-to-read-utf-8-file-data-in-c", "title": "How to read UTF-8 file data in C++?", "body": "<p>I have a list of <a href=\"https://en.wikipedia.org/wiki/International_Phonetic_Alphabet\" rel=\"nofollow noreferrer\">IPA</a> (UTF-8) symbols in a text file called ipa.txt with numbers assigned to them. How do I cross reference it with a source file which is also a text file that contains a bunch of words and their corresponding IPA, to return a text file for every names with their names as their filename and inside the text file should contain their corresponding numbers of IPA.</p>\n\n<p>Below is what I've tried but didn't work, only outputs were mostly 000000.</p>\n\n<pre><code>int main()\n{\n    std::unordered_map &lt;wchar_t, int&gt; map;\n    std::wifstream file;\n    file.open(\"ipa.txt\");\n    if (file.is_open()) {\n        std::cout &lt;&lt; \"opened ipa file\";\n    }\n\n    wchar_t from;\n    int to;\n    while (file &gt;&gt; from &gt;&gt; to) {\n        map.insert(std::make_pair(from, to));\n    }\n\n    std::wifstream outfile;\n    outfile.open(\"source.txt\");\n    if (outfile.is_open()) {\n        std::cout &lt;&lt; \"opened source file\";\n    }\n\n    std::wstring id;\n    std::wstring name;\n    while (outfile &gt;&gt; id &gt;&gt; name) {\n        std::ofstream outputfile;\n        outputfile.open(id + L\".txt\");\n        for (wchar_t c : name)  outputfile &lt;&lt; map[c]; \n    }\n\n    system(\"pause\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "image", "opencv", "add"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1497454594, "post_id": 44549037, "comment_id": 76088859, "body": "the error indicates that your <code>roi</code> dimensions are larger than the source <code>Mat</code> what is the size of the read in jpg?"}, {"owner": {"reputation": 1, "user_id": 4875074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42eed981aaf0c0bb4deae3222fa58d7?s=128&d=identicon&r=PG&f=1", "display_name": "Masa", "link": "https://stackoverflow.com/users/4875074/masa"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1497455386, "post_id": 44549037, "comment_id": 76089349, "body": "extra.copyTo(img(cv::Rect(5, 5, 11, 11))); i Try this but have this error penCV Error: Assertion failed (scn == 3 || scn == 4) in cv::cvtColor, file C:\\build\\master_winpack-build-win64-vc14\\opencv\\modules\\imgp&zwnj;&#8203;roc\\src\\color.cpp, line 9716"}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "edited": false, "score": 0, "creation_date": 1497455560, "post_id": 44549037, "comment_id": 76089460, "body": "What is <code>img</code>? The declaration is not in your code..."}], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 8155481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb54b1f2beff74493261980024fe87fd?s=128&d=identicon&r=PG&f=1", "display_name": "Apexdev", "link": "https://stackoverflow.com/users/8155481/apexdev"}, "is_accepted": false, "score": 2, "last_activity_date": 1497456287, "last_edit_date": 1497456287, "creation_date": 1497455513, "answer_id": 44549397, "question_id": 44549037, "link": "https://stackoverflow.com/questions/44549037/how-add-image-to-image-in-opencv-c/44549397#44549397", "title": "How add image to image in OpenCv c++", "body": "<pre><code>if(roi.x &gt;= 0 &amp;&amp; roi.y &gt;= 0 &amp;&amp; roi.width + roi.x &lt; input_frame.cols &amp;&amp; roi.height + roi.y &lt; input_frame.rows)\n{\n    // your code\n\n}\nelse\n    return -1;\n</code></pre>\n\n<p>Found similar issues and pulled code from <a href=\"http://answers.opencv.org/question/21374/possible-solutions-for-opencv-assertion-error-problem/\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://stackoverflow.com/a/29717783/8155481\">here</a></p>\n\n<p>Looking at your code, looks like you don't open your capture</p>\n\n<pre><code>VideoCapture cap(0); //for a webcam\nMat frame;\nif(cap.isOpened())\n   cap &gt;&gt; frame;\nelse\n   throw;\ncv::Rect roi(cv::Point(0, 0), cv::Size(110, 110));\ncv::Mat destinationROI = frame(roi);\nextra.copyTo(destinationROI(cv::Rect(0, 0, extra.cols, extra.rows)));\n</code></pre>\n\n<p>Check out OpenCV's <a href=\"http://docs.opencv.org/3.1.0/d8/dfe/classcv_1_1VideoCapture.html\" rel=\"nofollow noreferrer\">documentation</a> on VideoCapture to make sure you're getting that done correctly. </p>\n"}], "owner": {"reputation": 1, "user_id": 4875074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e42eed981aaf0c0bb4deae3222fa58d7?s=128&d=identicon&r=PG&f=1", "display_name": "Masa", "link": "https://stackoverflow.com/users/4875074/masa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2239, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1497456287, "creation_date": 1497454389, "last_edit_date": 1497455211, "question_id": 44549037, "link": "https://stackoverflow.com/questions/44549037/how-add-image-to-image-in-opencv-c", "title": "How add image to image in OpenCv c++", "body": "<p>I load small image.</p>\n\n<pre><code> Mat extra;\n extra = imread(\"Korona.jpg\");\n</code></pre>\n\n<p>I load image from camera and I try add my image.</p>\n\n<pre><code>VideoCapture cap;\nMat frame;\ncap &gt;&gt; frame;\ncv::Rect roi(cv::Point(0, 0), cv::Size(110, 110));\ncv::Mat destinationROI = img(roi);\nextra.copyTo(destinationROI(cv::Rect(0, 0, extra.cols, extra.rows)));\n</code></pre>\n\n<p>But not successful and have this error:</p>\n\n<blockquote>\n  <p>OpenCV Error: Assertion failed (0 &lt;= roi.x &amp;&amp; 0 &lt;= roi.width &amp;&amp; roi.x\n  + roi.width &lt;= m.cols &amp;&amp; 0 &lt;= roi.y &amp;&amp; 0 &lt;= roi.height &amp;&amp; roi.y + roi.height &lt;= m.rows) in cv::Mat::Mat, file\n  C:\\build\\master_winpack-build-win64-vc14\\opencv\\modules\\core\\src\\matrix.cpp,\n  line 522</p>\n</blockquote>\n\n<p>Any ideas? Thx.</p>\n"}, {"tags": ["c++", "vba", "excel", "dll"], "comments": [{"owner": {"reputation": 51, "user_id": 8121082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ko24j.jpg?s=128&g=1", "display_name": "Alex Wardlow", "link": "https://stackoverflow.com/users/8121082/alex-wardlow"}, "edited": false, "score": 0, "creation_date": 1497456498, "post_id": 44549023, "comment_id": 76090091, "body": "<a href=\"http://www.cpearson.com/excel/sizestring.htm\" rel=\"nofollow noreferrer\">cpearson.com/excel/sizestring.htm</a>"}, {"owner": {"reputation": 51, "user_id": 8121082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ko24j.jpg?s=128&g=1", "display_name": "Alex Wardlow", "link": "https://stackoverflow.com/users/8121082/alex-wardlow"}, "edited": false, "score": 0, "creation_date": 1497456558, "post_id": 44549023, "comment_id": 76090120, "body": "this link is where I found the *length notation for defining strings. I would like to be able to specify the length of each string in the array, this is why I did this, but you may be correct in that I have done this incorrectly with the array. I do know it works for a single string."}, {"owner": {"reputation": 51, "user_id": 8121082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ko24j.jpg?s=128&g=1", "display_name": "Alex Wardlow", "link": "https://stackoverflow.com/users/8121082/alex-wardlow"}, "edited": false, "score": 0, "creation_date": 1497456852, "post_id": 44549023, "comment_id": 76090271, "body": "I am unsure of how I would use the stringName = String(0,#) with an array or if that is what I should use."}, {"owner": {"reputation": 51, "user_id": 8121082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ko24j.jpg?s=128&g=1", "display_name": "Alex Wardlow", "link": "https://stackoverflow.com/users/8121082/alex-wardlow"}, "edited": false, "score": 0, "creation_date": 1497457545, "post_id": 44549023, "comment_id": 76090648, "body": "Also if I simply remove the *stringLength the Len(stringArray(0)) is 0, when watched in excel"}], "owner": {"reputation": 51, "user_id": 8121082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ko24j.jpg?s=128&g=1", "display_name": "Alex Wardlow", "link": "https://stackoverflow.com/users/8121082/alex-wardlow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1506255183, "creation_date": 1497454337, "last_edit_date": 1506255183, "question_id": 44549023, "link": "https://stackoverflow.com/questions/44549023/sending-an-array-of-strings-from-vba-to-a-c-dll-then-iterating-through-those", "title": "Sending an array of strings from VBA to a C++ DLL, then iterating through those strings", "body": "<p>I am making a C++ DLL to allow for serial communication in Excel. It is working for the most part, but I am hung up on string arrays in VBA. This specific function of my DLL should take in an (array of char*, integer representing their length, a pointer to the beginning of a double array where I will stored parsed data for each string, and an integer representing how many doubles are in each line (numRows))</p>\n\n<p>Here is the DLL code.</p>\n\n<pre><code>//first read a lines from the serial port and then parse it into dataArray, does this until there is no data in buffer or array is full\n//returns how many rows that it read\nDLL_EXPORT int WINAPI parseAllLinesFromSerialPort(char* lineBuff, int bufferLength, double* dataArray, int numRows) {\n    int currentRow = 0;\n    bufferAvailable = true; //it is first assumed that there is available data to be read, this is checked down the line, if false the functions return\n    while((bufferAvailable) &amp;&amp; (currentRow &lt; numRows)) {\n         parseLine((lineBuff + (currentRow*bufferLength)), bufferLength, (dataArray + (currentRow*numColumns)));\n         if (bufferAvailable) {\n               currentRow++;\n         }\n    }\n    return currentRow;\n}\n</code></pre>\n\n<p>So the double array part works just fine if I just pass the first string, however, if I try to send the next string each time, it simply crashes when I first call the DLL function (I believe this is where it crashes). Am I not iterating through the string array right, is it not the size I think it is, or in the following VBA have I initialized the array wrong or passed it into the DLL wrong?</p>\n\n<p>This is the VBA code.\nSee specifically the collectAllDataAvailable() function, as this is the one that calls that DLL function.</p>\n\n<pre class=\"lang-vb prettyprint-override\"><code>Option Explicit\n\n'reads all avialable lines from serial\nPublic Declare Function parseAllLinesFromSerialPort _\nLib \"C:\\Users\\alexw\\Desktop\\Parsing\\bin\\Debug\\ArduinoTesterDll.dll\" _\n(line As String, ByVal length As Integer, dataArray As Double, ByVal numRows As Long) As Long\n\n\n'Global Variables\nPublic currentDataRow As Long 'keeps track of the currentRow that data is being read into\nPublic Const numRows As Long = 100 'number of rows grabed at a time by collectAllDataAvailable\nPublic Const stringLength As Integer = numRows * 8\n\n'selects then clears the dataCollection\nPublic Sub clearDataCollectionAndBuffers()\n    'clears the whole right side under row 5 to column AZ\n    Main.Range(\"K6:AZ1048575\").Select\n    Selection.ClearContents\n    'Clears the Serial Window\n    Main.dataBox.Text = \"\"\n    'sets the next data read row to begin at 6\n    currentDataRow = 6\n    'clears the serial buffers\n    Call clearSerialPort 'See Module 1\nEnd Sub\n\n'collects all rows available, up to 46000, currently 1000 lines, set above as a global numRows\nPublic Sub collectAllDataAvailable()\n    Dim J As Integer ' increment variables for a for loop\n    Dim I As Integer\n\n    Dim startingCol As Integer 'for K this would be 11\n    startingCol = 11\n\n    Dim numCol As Long 'how many data point (3 for #,#,#)\n    Dim numRowsRead As Long 'how many rows are read (were available)\n    numCol = getNumColumns 'see module 2 for function getNumColumns\n\n    Dim arrayLength As Long\n    arrayLength = (numCol * numRows) 'grabs global numRows lines at a time if available, this is a maximum\n\n    Dim dataArray() As Double\n    ReDim dataArray(0 To (arrayLength - 1)) As Double\n\n    Dim lineArray() As String * stringLength 'global, needs to be big enough hold each row od data\n    ReDim lineArray(0 To (numRows - 1)) As String * stringLength\n\n    numRowsRead = parseAllLinesFromSerialPort(lineArray(0), Len(lineArray(0)), dataArray(0), numRows)\n\n    For J = 0 To (numRowsRead - 1)\n        Main.dataBox.Text = Main.dataBox.Text &amp; lineArray(J)\n        For I = 0 To (numCol - 1)\n            Main.Cells((J + currentDataRow), (I + startingCol)).Value = dataArray(I + (J * numCol))\n        Next I\n    Next J\n\n    currentDataRow = currentDataRow + numRowsRead\n    'only stoped in Main sheets code for stopDataButton\n    If Main.dataCollectionActive Then Application.OnTime Now + TimeValue(\"00:00:01\"), \"collectAllDataAvailable\"\nEnd Sub\n\nPublic Sub writeCommand()\n    Dim bytesWritten As Integer\n    bytesWritten = writeToSerialPort(Main.Range(\"Command\").Value, Len(Main.Range(\"Command\").Value))\nEnd Sub\n</code></pre>\n\n<p>When I pass just a string, and do not worry about an array and iterating through it. Then the VBA and excel works fine (other than the fact that I loose other strings I want to keep as they are written over each other each time I call parseLine in the DLL with the one string that I have). I want to be able to save each string that I am parsing into the Double array so that when I return from the DLL I have all the strings that I parsed so that I can display them. However when I tried to implement this array of strings, Excel now simply crashes upon the attempt to call the parseAllLinesFromSerialPort function. Any idea what I am doing wrong here? Also I will take any other suggestions to clean up my current code as I am doing this project for a job.</p>\n"}, {"tags": ["c++", "c++11", "binaryfiles"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3915074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa683e924ae8d2f7d772edb7e15a511b?s=128&d=identicon&r=PG&f=1", "display_name": "MalusPuer", "link": "https://stackoverflow.com/users/3915074/maluspuer"}, "edited": false, "score": 0, "creation_date": 1497455065, "post_id": 44549145, "comment_id": 76089134, "body": "Oh, of course! Swapping the endianness resulted in the output I needed. Thanks!"}], "tags": [], "owner": {"reputation": 2385, "user_id": 611142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0025019789cb7cfdf7061f7f1f8715c?s=128&d=identicon&r=PG", "display_name": "ymett", "link": "https://stackoverflow.com/users/611142/ymett"}, "is_accepted": true, "score": 4, "last_activity_date": 1497454690, "creation_date": 1497454690, "answer_id": 44549145, "question_id": 44549019, "link": "https://stackoverflow.com/questions/44549019/binary-file-read-different-results-for-amount-of-bytes-read-at-a-time/44549145#44549145", "title": "Binary file read different results for amount of bytes read at a time", "body": "<p>The file is being read correctly. On your system <code>uint16_t</code> is little-endian, i.e. the lower 8 bits are stored in the first byte and the upper 8 bits are stored in the second byte, so the first byte read from the file becomes the lower 8 bits of the bitset (bits 0-7) and the second byte becomes the upper 8 bits (bits 8-15). When the bitset is printed, the bits are printed in order, from bit 15 down to bit 0.</p>\n"}], "owner": {"reputation": 31, "user_id": 3915074, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aa683e924ae8d2f7d772edb7e15a511b?s=128&d=identicon&r=PG&f=1", "display_name": "MalusPuer", "link": "https://stackoverflow.com/users/3915074/maluspuer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 44549145, "answer_count": 1, "score": 1, "last_activity_date": 1497454846, "creation_date": 1497454326, "last_edit_date": 1497454846, "question_id": 44549019, "link": "https://stackoverflow.com/questions/44549019/binary-file-read-different-results-for-amount-of-bytes-read-at-a-time", "title": "Binary file read different results for amount of bytes read at a time", "body": "<p>I am reading binary data from a file, however reading one byte at a time gives expected results, while reading anymore than one byte at a time does not. Reading one at a time:</p>\n\n<pre><code>void readFile(){\n        std::ifstream in;\n        in.open(\"file.bin\", std::ios:binary);\n\n        uint8_t byte1;\n        uint8_t byte2;\n        in.read(reinterpret_cast&lt;char *&gt;(&amp;byte1), sizeof(byte1));\n        in.read(reinterpret_cast&lt;char *&gt;(&amp;byte2), sizeof(byte2));\n\n        std::cout &lt;&lt; std::bitset&lt;8&gt;(byte1) &lt;&lt; std::bitset&lt;8&gt;(byte2);\n}\n</code></pre>\n\n<p>This produces the expected output of</p>\n\n<pre><code>0000101000000110\n</code></pre>\n\n<p>Reading two at a time:</p>\n\n<pre><code>void readFile(){\n        std::ifstream in;\n        in.open(\"file.bin\", std::ios:binary);\n\n        uint16_t twobytes;\n        in.read(reinterpret_cast&lt;char *&gt;(&amp;twobytes), sizeof(twobytes));\n\n        std::cout &lt;&lt; std::bitset&lt;16&gt;(twobytes);\n}\n</code></pre>\n\n<p>Produces unexpected output of</p>\n\n<pre><code>0000011000001010\n</code></pre>\n"}, {"tags": ["c++", "windows", "gdi+"], "comments": [{"owner": {"reputation": 862, "user_id": 4780378, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/952ea857b33c627ee944e6e34871d211?s=128&d=identicon&r=PG&f=1", "display_name": "DevAndroid", "link": "https://stackoverflow.com/users/4780378/devandroid"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1497455817, "post_id": 44548912, "comment_id": 76089650, "body": "That&#39;s not what I&#39;m using ? Which one precisely ?"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1497456553, "post_id": 44548912, "comment_id": 76090117, "body": "Yes, I suppose it is the one you&#39;re using. What is the purpose of this <code>LockBits</code> and <code>memcpy</code> code then?"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1497460131, "post_id": 44548912, "comment_id": 76092104, "body": "The problem is likely where you capture the pixel data from the screen.  You&#39;re assuming that it&#39;s 32-bit RGBA.  I suspect it&#39;s 32-bit but without an alpha channel.  Show us the code that does the screen shot, or test the code above with known-good RGBA data."}, {"owner": {"reputation": 862, "user_id": 4780378, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/952ea857b33c627ee944e6e34871d211?s=128&d=identicon&r=PG&f=1", "display_name": "DevAndroid", "link": "https://stackoverflow.com/users/4780378/devandroid"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1497460461, "post_id": 44548912, "comment_id": 76092270, "body": "LockBits is to retrieve new scaled buffer ! @AdrianMcCarthy I&#39;m using AcquireNextFrame to get the desktop buffer pixels"}], "owner": {"reputation": 862, "user_id": 4780378, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/952ea857b33c627ee944e6e34871d211?s=128&d=identicon&r=PG&f=1", "display_name": "DevAndroid", "link": "https://stackoverflow.com/users/4780378/devandroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497454913, "creation_date": 1497454084, "last_edit_date": 1497454913, "question_id": 44548912, "link": "https://stackoverflow.com/questions/44548912/gdiplus-drawimage-white-color-is-getting-black", "title": "GDIPlus DrawImage white color is getting black", "body": "<p>I'm using GDIPlus to scale image from a buffer.\nI'm taking a screenshot of my desktop.\nHere is my code:</p>\n\n<pre><code>BYTE *Duplication::scaleBuffer(unsigned char *data, int width, int height)\n{\n    Gdiplus::Bitmap bitmap(width, height, 4 * width, PixelFormat32bppARGB, data);\n    INT n_width = mWidthResolution;\n    INT n_height = mHeightResolution;\n    double ratio = ((double)width) / ((double)height);\n    if (width &gt; height) {\n        n_height = (double)n_width / ratio;\n    }\n    else {\n        n_width = n_height * ratio;\n    }\n    Gdiplus::Bitmap newBitmap(n_width, n_height, bitmap.GetPixelFormat());\n    Gdiplus::Graphics graphics(&amp;newBitmap);\n    graphics.SetInterpolationMode(Gdiplus::InterpolationModeBilinear);\n    graphics.DrawImage(&amp;bitmap, 0, 0, n_width, n_height);\n\n    Gdiplus::Rect rect(0, 0, newBitmap.GetWidth(), newBitmap.GetHeight());\n    Gdiplus::BitmapData bitmapData;\n    BYTE *buffer = nullptr;\n    if (Gdiplus::Ok == newBitmap.LockBits(&amp;rect, Gdiplus::ImageLockModeRead, PixelFormat32bppARGB, &amp;bitmapData)) {\n        int len = bitmapData.Height * std::abs(bitmapData.Stride);\n        buffer = new BYTE[len];\n        RtlZeroMemory(buffer, len);\n        memcpy(buffer, bitmapData.Scan0, len);\n        newBitmap.UnlockBits(&amp;bitmapData);\n    }\n\n    return buffer;\n}\n</code></pre>\n\n<p>On windows with white background, I got a black background and color is corrupted.. It happens only on some program like \"File Browser\".. I don't understand why ...</p>\n"}, {"tags": ["c++", "linux", "opencv", "cmake", "linker"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1497456853, "post_id": 44548537, "comment_id": 76090272, "body": "You call <code>add_executable()</code> with &quot;render_object&quot;, but  <code>target_link_libraries()</code> is called with &quot;object&quot;. What is right? What is <i>PROJECT_NAME</i> in your case? For more information about the building, you may use <code>make V=1</code>, this shows <b>complete command lines</b> for building and linking."}, {"owner": {"reputation": 2847, "user_id": 6786718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/l8z29.png?s=128&g=1", "display_name": "Kev1n91", "link": "https://stackoverflow.com/users/6786718/kev1n91"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1497463365, "post_id": 44548537, "comment_id": 76093999, "body": "sry was a typo from writing &quot;object&quot; is correct. PROJECT_NAME is just a variable for the projects name. I will use the v=1 and come back here soon"}], "answers": [{"comments": [{"owner": {"reputation": 2847, "user_id": 6786718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/l8z29.png?s=128&g=1", "display_name": "Kev1n91", "link": "https://stackoverflow.com/users/6786718/kev1n91"}, "edited": false, "score": 0, "creation_date": 1497526904, "post_id": 44558559, "comment_id": 76121711, "body": "This solved my issues, the path with the &quot;append libs&quot; did the trick. However, now I am at the old problem with opencv that it cannot find the LIBTIFF and so on, but this is for another question. So thank you really much"}, {"owner": {"reputation": 755, "user_id": 3814202, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edeb300343f5daeeeb707041e7c6941d?s=128&d=identicon&r=PG&f=1", "display_name": "svenevs", "link": "https://stackoverflow.com/users/3814202/svenevs"}, "reply_to_user": {"reputation": 2847, "user_id": 6786718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/l8z29.png?s=128&g=1", "display_name": "Kev1n91", "link": "https://stackoverflow.com/users/6786718/kev1n91"}, "edited": false, "score": 0, "creation_date": 1497534013, "post_id": 44558559, "comment_id": 76126775, "body": "Nice!  Yeah as @Tsyvarev mentions, <code>make VERBOSE=1</code> can be very helpful in identifying what is wrong.  <code>cmake</code> only configures what you asked, you get the errors at build time.  As for LIBTIFF not being found, go find your <code>opencv_highgui</code> library (probably in <code>&#47;usr&#47;lib64</code> -- you can do <code>locate *libopencv*</code> assuming you have an up to date db [ <code>sudo updatedb</code> ]).  When I check <code>ldd &#47;usr&#47;lib64&#47;libopencv_highgui.so</code> mine reveals where it thinks <code>libtiff</code> is -- verify yours is there!  If you moved it, create a symlink.  If it doesn&#39;t show up, <code>opencv</code> did not compile with <code>libtiff</code> x0"}, {"owner": {"reputation": 2847, "user_id": 6786718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/l8z29.png?s=128&g=1", "display_name": "Kev1n91", "link": "https://stackoverflow.com/users/6786718/kev1n91"}, "edited": false, "score": 0, "creation_date": 1497536868, "post_id": 44558559, "comment_id": 76129013, "body": "Actually it was a little bit strange, Anaconda provided an other version of libtiff so I had to do conda remove libtiff and then it worked, when I installed libtiff with sudp apt-get install libtiff4-dev"}, {"owner": {"reputation": 755, "user_id": 3814202, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edeb300343f5daeeeb707041e7c6941d?s=128&d=identicon&r=PG&f=1", "display_name": "svenevs", "link": "https://stackoverflow.com/users/3814202/svenevs"}, "reply_to_user": {"reputation": 2847, "user_id": 6786718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/l8z29.png?s=128&g=1", "display_name": "Kev1n91", "link": "https://stackoverflow.com/users/6786718/kev1n91"}, "edited": false, "score": 0, "creation_date": 1497537587, "post_id": 44558559, "comment_id": 76129544, "body": "Ahh yeah so anaconda greedily puts itself in the <i>front</i> of your path, it <a href=\"https://docs.continuum.io/anaconda/install#removing-anaconda-path-from-bash-profile\" rel=\"nofollow noreferrer\">looks like this</a>. But you can&#39;t really flip it to put <code>$PATH:&#47;path&#47;to&#47;anaconda</code> because now system python will get found first.  Instead, if you really need the conda package, try forcing <code>LD_LIBRARY_PATH</code> to put the system libs (or specifically the imaging libs) first?  It&#39;ll be hard to get that configured correctly though...better to just leave the conda package out if you don&#39;t need it ;)"}], "tags": [], "owner": {"reputation": 755, "user_id": 3814202, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/edeb300343f5daeeeb707041e7c6941d?s=128&d=identicon&r=PG&f=1", "display_name": "svenevs", "link": "https://stackoverflow.com/users/3814202/svenevs"}, "is_accepted": true, "score": 1, "last_activity_date": 1497501450, "last_edit_date": 1497501450, "creation_date": 1497500904, "answer_id": 44558559, "question_id": 44548537, "link": "https://stackoverflow.com/questions/44548537/c-error-opencv-core-no-such-file-or-directory-even-if-the-needed-so-file-i/44558559#44558559", "title": "C++: error: opencv_core: No such file or directory even if the needed .so file is in /usr/lib/", "body": "<p>This very well may not be your problem, but I suspect the formatting of the <code>${LIBS}</code> variable is the issue:</p>\n\n<pre><code>lboost_system opencv_coreopencv_highgui\n             ^          XX\n</code></pre>\n\n<p>There is a space where <code>^</code> is, and no space between the opencv libs.  Minimal version on my system:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0.0)\nproject(hello)\n\nfind_package(OpenCV QUIET REQUIRED COMPONENTS core highgui)\nif(OpenCV_FOUND)\n  message(\"Found OpenCV\")\n  include_directories(${OpenCV_INCLUDE_DIRS})\n  set(LIBS ${LIBS} ${OpenCV_LIBS})\nendif(OpenCV_FOUND)\n\nmessage(STATUS \"The libraries: ${LIBS}\") # important line\n</code></pre>\n\n<p>The important line of output for me:</p>\n\n<pre><code>-- The libraries: opencv_core;opencv_highgui\n                             ^\n</code></pre>\n\n<p>Because for me <code>${LIBS}</code> had no value yet.  You might be mixing how you are representing things, lists or strings.  In my experience, prefer lists (relying on <code>;</code> as the delimiter).  So now (going in the reverse order and finding boost afterward), I can add beneath the above:</p>\n\n<pre><code>find_package(Boost QUIET REQUIRED COMPONENTS system)\nif(Boost_FOUND)\n    list(APPEND LIBS \"${Boost_LIBRARIES}\")\nendif()\n\nmessage(STATUS \"With boost: ${LIBS}\")\n</code></pre>\n\n<p>and I now have the following printed:</p>\n\n<pre><code>                          v              v\n-- With boost: opencv_core;opencv_highgui;/long/path/to/my/lib/libboost_system-mt.so\n</code></pre>\n\n<p>Your <code>find_package(Boost ...)</code> may be giving something different, I have a custom boost compiled so I'm not sure.  But with the complete example I'd say</p>\n\n<ol>\n<li>Make sure <code>boost</code> is being found correctly.</li>\n<li>You should be worried if these variables already have the <code>l</code> in them (<strong><code>l</code></strong><code>boost_system</code>).</li>\n<li><code>list(APPEND LIBS</code> is a safer alternative than <code>set</code>, it will work with <code>OpenCV_LIBS</code> as well!</li>\n</ol>\n\n<p>Hopefully one of those gets you in the right direction!</p>\n"}], "owner": {"reputation": 2847, "user_id": 6786718, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/l8z29.png?s=128&g=1", "display_name": "Kev1n91", "link": "https://stackoverflow.com/users/6786718/kev1n91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "accepted_answer_id": 44558559, "answer_count": 1, "score": 0, "last_activity_date": 1497501450, "creation_date": 1497453016, "last_edit_date": 1592644375, "question_id": 44548537, "link": "https://stackoverflow.com/questions/44548537/c-error-opencv-core-no-such-file-or-directory-even-if-the-needed-so-file-i", "title": "C++: error: opencv_core: No such file or directory even if the needed .so file is in /usr/lib/", "body": "<p>I am trying to compile a project from github that relies on Opencv.</p>\n<p>I know that the opencv_core file must be &quot;known&quot; by the compiler. In my case I installed opencv via apt-get and so the needed <code>.so</code> and <code>.a</code> files are all in</p>\n<pre><code>/usr/lib/x86_64-linux-gnu/\n</code></pre>\n<p>To check if the compiler really looked into it I checked the directory</p>\n<pre><code>/etc/ld.so.conf.d/ \n</code></pre>\n<p>Where  is a <code>x86_64-linux-gnu.conf</code> file, having the correct path like mentioned above. Furthermore, I created a opencv.conf file where I wrote the exact same path to the <code>.so</code> files.</p>\n<p>If I look at the CMakeFile, OpenCV is included like this:</p>\n<pre><code>find_package(OpenCV QUIET REQUIRED COMPONENTS core highgui)\nif(OpenCV_FOUND)\n  message(&quot;Found OpenCV&quot;)\n  include_directories(${OpenCV_INCLUDE_DIRS})\n  set(LIBS ${LIBS} ${OpenCV_LIBS})\nendif(OpenCV_FOUND)\n\n\n\nadd_library(${PROJECT_NAME} src/Simulator.cpp src/noiseutils.cpp)\ntarget_link_libraries(${PROJECT_NAME} assimp CGAL noise ${LIBS}) \n\nadd_executable(object src/main.cpp)\ntarget_link_libraries(object ${PROJECT_NAME})\n</code></pre>\n<p>When I message out the <code>${LIBS}</code> I get the following:</p>\n<pre><code>lboost_system opencv_coreopencv_highgui\n</code></pre>\n<p>Which seems correct to me.</p>\n<p>However after running cmake, and executing make I get presented with the following error:</p>\n<blockquote>\n<p>Linking CXX executable ../bin/object</p>\n<p>c++: error: opencv_core: No such file or directroy</p>\n</blockquote>\n<p>followed by the usuual make error output.</p>\n<p>Which seems odd to me, since the linker should know where the file is, due to the <code>.conf</code> files.</p>\n<p>I also tried to update the <code>LD_LIBRRAY_PATH</code> so it now includes the path the <code>.so</code> files and executed the <code>sudo ldconfig</code> command, but this did not help.</p>\n<p>After seeing, that error was caused from &quot;<code>object</code>&quot; - executable I changed the last line to:</p>\n<pre><code>target_link_libraries(object ${PROJECT_NAME} ${LIBS})\n</code></pre>\n<p>Thinking it may need the flags from LIBS, too - however this did not solve the case.</p>\n<p>I am out of ideas of what to do, thank you really much for any help.</p>\n<p>I also tried to change the <code>find_package</code> command to the following line:</p>\n<pre><code>find_package(OpenCV QUIET REQUIRED COMPONENTS core highgui PATHS /usr/lib/x86_64-linux_gnu NO_DEFAULT_PATH)\n</code></pre>\n<p>I tried to intall a new version of cmake, which did not help.</p>\n<p>I am in Docker-Image on a Server which runs Xubuntu.</p>\n<p>But that did not help either.</p>\n"}, {"tags": ["c++", "c++11", "pointers", "shared-ptr", "smart-pointers"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1497452624, "post_id": 44548373, "comment_id": 76087382, "body": "You could pass the smart pointer by reference instead of pointer."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1497452636, "post_id": 44548373, "comment_id": 76087393, "body": "Do you even need a pointer type here?  Can you pass <code>MyClass</code> by reference instead?"}, {"owner": {"reputation": 1211, "user_id": 2928970, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/65acc98fc43bf4eee13ae060a7e7b730?s=128&d=identicon&r=PG&f=1", "display_name": "hovnatan", "link": "https://stackoverflow.com/users/2928970/hovnatan"}, "edited": false, "score": 0, "creation_date": 1497452689, "post_id": 44548373, "comment_id": 76087434, "body": "well, I&#39;m trying to stick to a style where if a function argument is changed, then use pointers"}, {"owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "edited": false, "score": 4, "creation_date": 1497452801, "post_id": 44548373, "comment_id": 76087497, "body": "@hovo That&#39;s what reference are for. The only situation where a pointer makes sense is if the parameter value could be null. If it doesn&#39;t make sense, a reference should by pass. If it&#39;s not modified, a const reference."}, {"owner": {"reputation": 1211, "user_id": 2928970, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/65acc98fc43bf4eee13ae060a7e7b730?s=128&d=identicon&r=PG&f=1", "display_name": "hovnatan", "link": "https://stackoverflow.com/users/2928970/hovnatan"}, "reply_to_user": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "edited": false, "score": 0, "creation_date": 1497453065, "post_id": 44548373, "comment_id": 76087719, "body": "@Rosme Google&#39;s C++ style guide specifies that output arguments should be pointers <a href=\"https://google.github.io/styleguide/cppguide.html#Reference_Arguments\" rel=\"nofollow noreferrer\">google.github.io/styleguide/cppguide.html#Reference_Argument&zwnj;&#8203;s</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1497453794, "post_id": 44548373, "comment_id": 76088294, "body": "@hovo dont believe everything that google tells you"}, {"owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "edited": false, "score": 2, "creation_date": 1497453926, "post_id": 44548373, "comment_id": 76088388, "body": "@hovo This is really a question of taste. There are things in the Google C++ Style Guide that I really don&#39;t agree with, and this is one of them. Personnally, I prefer to see a reference in a signature, that way I automatically knows that I cannot pass a null object(nullptr). Where has if I see a pointer, while not being optional, I can pass it a null value without a risk of breaking everything. Their con reasoning on this is bogus to me."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "edited": false, "score": 0, "creation_date": 1497454401, "post_id": 44548373, "comment_id": 76088718, "body": "@Rosme Clearly, Google C++ Style Guide has yet to meet Java ;)"}, {"owner": {"reputation": 306, "user_id": 1898722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1c696bc9f4f0e4d79b419329e6a710bc?s=128&d=identicon&r=PG", "display_name": "Michel", "link": "https://stackoverflow.com/users/1898722/michel"}, "edited": false, "score": 0, "creation_date": 1497454463, "post_id": 44548373, "comment_id": 76088763, "body": "I&#39;m not sure the question is whether @hovo should follow the Google C++ Style Guide. But somehow, if you want to stick to the principle of having only pointer for output arguments, I see only two solutions: raw pointers (limited to the use of ouput parameters) or std::shared_ptr&lt;std::shared_ptr&lt;MyClass&gt;&gt;. I kinda doubt that the second approach is sensible or even practical."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1497454933, "post_id": 44548373, "comment_id": 76089044, "body": "We follow this guideline where I work. The benefit is that it&#39;s more clear to the caller that the variable is being modified since you need to take the address. e.g. <code>foo(a, b)</code> vs <code>foo(a, &amp;b)</code>. Obviously naming conventions are effective but they can only go so far if you have more than 1 or 2 parameters."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1497456767, "last_edit_date": 1497456767, "creation_date": 1497452688, "answer_id": 44548422, "question_id": 44548373, "link": "https://stackoverflow.com/questions/44548373/using-shared-pointers-for-loading-into-a-variable-c/44548422#44548422", "title": "using shared pointers for loading into a variable c++", "body": "<p>More proper way would be:</p>\n\n<pre><code>std::shared_ptr&lt;MyClass&gt; MyFunc()\n{\n  // calculate a, b, c\n  return std::make_shared&lt;MyClass&gt;(a, b, c);\n}\n</code></pre>\n\n<p>this is more readable and produce shorter and cleaner code:</p>\n\n<pre><code>int main() \n{\n  auto ptr = MyFunc();\n  // do some other work with ptr\n  return 0;\n}\n</code></pre>\n\n<p>It should be clear if possible for a reader what the function intention is just looking to it's name, parameters and return type. In your case there are way too many questions:</p>\n\n<pre><code>- why do I need to pass `std::shared_ptr` to the function?\n- what will happen when that ptr is equal to `nullptr`?\n- will this function use object passed in `std::shared_ptr` if it points to one?\n</code></pre>\n\n<p>None of that question exists when it returns <code>std::shared_ptr</code>. \"Function creates object inside and returns shared ownership\" - this is clear for every C++ programmer who would just look into function signature.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1497455750, "creation_date": 1497455750, "answer_id": 44549477, "question_id": 44548373, "link": "https://stackoverflow.com/questions/44548373/using-shared-pointers-for-loading-into-a-variable-c/44549477#44549477", "title": "using shared pointers for loading into a variable c++", "body": "<p>There is rarely ever a good reason to pass a smart pointer by pointer. Pass it by reference instead:</p>\n\n<pre><code>void MyFunc(std::shared_ptr&lt;MyClass&gt;&amp; p)\n{\n    // calculate a, b, c\n    p.reset(new MyClass(a, b, c));\n}\n\nint main()\n{\n    std::shared_ptr&lt;MyClass&gt; ptr;\n    MyFunc(ptr);\n    // do some other work with ptr\n    return 0;\n}\n</code></pre>\n\n<p>Or, in this example, just change the function to pass it in the return value instead of an output parameter:</p>\n\n<pre><code>std::shared_ptr&lt;MyClass&gt; MyFunc()\n{\n    // calculate a, b, c\n    return std::shared_ptr&lt;MyClass&gt;(new MyClass(a, b, c));\n    // or:\n    // return std::make_shared&lt;MyClass&gt;(a, b, c);\n}\n\nint main()\n{\n    std::shared_ptr&lt;MyClass&gt; ptr = MyFunc();\n    // do some other work with ptr\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 1898722, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1c696bc9f4f0e4d79b419329e6a710bc?s=128&d=identicon&r=PG", "display_name": "Michel", "link": "https://stackoverflow.com/users/1898722/michel"}, "is_accepted": false, "score": 0, "last_activity_date": 1497459794, "creation_date": 1497459794, "answer_id": 44550743, "question_id": 44548373, "link": "https://stackoverflow.com/questions/44548373/using-shared-pointers-for-loading-into-a-variable-c/44550743#44550743", "title": "using shared pointers for loading into a variable c++", "body": "<p>If we suppose two things:</p>\n\n<ol>\n<li>You want to follow the Google C++ Style Guide recommendation stating that output arguments should be pointers,</li>\n<li><em>p</em> is an output argument or an input/output argument and cannot be made the return of the function.</li>\n</ol>\n\n<p>I would say that it makes sense.</p>\n\n<p>It is recommanded to prefer smart pointer to raw pointers to make ownership clearer and less prone to errors. But here, you are using the raw pointer in place of references, and references are not a problem. Thus, it seems reasonable to me, especially as the use of raw pointers would be limited to the case of \"hand made\" references.</p>\n"}], "owner": {"reputation": 1211, "user_id": 2928970, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/65acc98fc43bf4eee13ae060a7e7b730?s=128&d=identicon&r=PG&f=1", "display_name": "hovnatan", "link": "https://stackoverflow.com/users/2928970/hovnatan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1497459794, "creation_date": 1497452529, "question_id": 44548373, "link": "https://stackoverflow.com/questions/44548373/using-shared-pointers-for-loading-into-a-variable-c", "title": "using shared pointers for loading into a variable c++", "body": "<p>Is this a reasonable thing to do?</p>\n\n<pre><code>void MyFunc(std::shared_ptr&lt;MyClass&gt;* p) {\n  // calculate a, b, c\n  p-&gt;reset(new MyClass(a, b, c));\n}\n\nint main() {\n  std::shared_ptr&lt;MyClass&gt; ptr;\n  MyFunc(&amp;ptr);\n  // do some other work with ptr\n  return 0;\n}\n</code></pre>\n\n<p>I read that it is not recommended to use raw pointers, only smart pointers, but in my function argument basically I'm using a raw pointer. Is this a bad practice</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1317, "user_id": 3849688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07WR3.jpg?s=128&g=1", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/3849688/khouri-giordano"}, "edited": false, "score": 0, "creation_date": 1497453728, "post_id": 44548242, "comment_id": 76088250, "body": "<code>foo()</code> needs to return a <code>foo_default_impl *</code>, not a <code>T *</code>."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 2, "creation_date": 1497454000, "post_id": 44548242, "comment_id": 76088448, "body": "did previous versions compile your code? I wonder if this is because <code>derived</code> is not yet a complete type when it is passed to foo_default_impl : <a href=\"http://eel.is/c++draft/class.derived#class.virtual-8\" rel=\"nofollow noreferrer\">eel.is/c++draft/class.derived#class.virtual-8</a>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 1317, "user_id": 3849688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07WR3.jpg?s=128&g=1", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/3849688/khouri-giordano"}, "edited": false, "score": 0, "creation_date": 1497454095, "post_id": 44548242, "comment_id": 76088519, "body": "@KhouriGiordano : Why?  In the particular case we are considering, <code>T</code> will be <code>derived</code>, and <code>derived</code> is publicly derived from <code>base</code>."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 1317, "user_id": 3849688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07WR3.jpg?s=128&g=1", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/3849688/khouri-giordano"}, "edited": false, "score": 0, "creation_date": 1497454231, "post_id": 44548242, "comment_id": 76088616, "body": "@KhouriGiordano: I&#39;ve just followed the link from marcinj, and see why you said that."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1497454258, "post_id": 44548242, "comment_id": 76088627, "body": "..... but I am not sure if in this case derived is actually in-complete at that point"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 1, "creation_date": 1497454373, "post_id": 44548242, "comment_id": 76088701, "body": "@marcinj : I think you should write that up as the answer.  The problem is <code>foo_default_impl::foo</code> is breaking the rules (return type is neither complete, nor <code>foo_default_impl</code>).  The error message could be better."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 1, "creation_date": 1497454503, "post_id": 44548242, "comment_id": 76088792, "body": "@marcin : It can&#39;t be complete.  One of the things about a complete type, is that you know it&#39;s size.  You can&#39;t know the size of a class until you know the size of its base classes.  We are currently trying to create one of those base classes!"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1497455689, "post_id": 44548242, "comment_id": 76089553, "body": "@MartinBonner that makes sense :-)"}, {"owner": {"reputation": 1317, "user_id": 3849688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07WR3.jpg?s=128&g=1", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/3849688/khouri-giordano"}, "edited": false, "score": 0, "creation_date": 1497455790, "post_id": 44548242, "comment_id": 76089627, "body": "Possibly you should apply the [Curiously Recurring Template Pattern][<a href=\"https://en.m.wikipedia.org/wiki/Curiously_recurring_template_pattern]\" rel=\"nofollow noreferrer\">en.m.wikipedia.org/wiki/Curiously_recurring_templat&zwnj;&#8203;e_pattern]</a>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 1317, "user_id": 3849688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07WR3.jpg?s=128&g=1", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/3849688/khouri-giordano"}, "edited": false, "score": 0, "creation_date": 1497458246, "post_id": 44548242, "comment_id": 76091053, "body": "@KhouriGiordano : This <i>is</i> the CRTP!"}, {"owner": {"reputation": 1317, "user_id": 3849688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07WR3.jpg?s=128&g=1", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/3849688/khouri-giordano"}, "edited": false, "score": 0, "creation_date": 1497458322, "post_id": 44548242, "comment_id": 76091091, "body": "I guess I meant apply it to <code>base</code>"}, {"owner": {"reputation": 518, "user_id": 8161208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XEwnK.png?s=128&g=1", "display_name": "Volodymyr Lashko", "link": "https://stackoverflow.com/users/8161208/volodymyr-lashko"}, "edited": false, "score": 0, "creation_date": 1497508867, "post_id": 44548242, "comment_id": 76109877, "body": "There may be no benefit in returning a covariant type <code>T *</code> in my case, so I will be sticking to just returning <code>base *</code>. The point of the question was mostly not &quot;how do I overcome the issue&quot; but &quot;what am I doing wrong&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 8161208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XEwnK.png?s=128&g=1", "display_name": "Volodymyr Lashko", "link": "https://stackoverflow.com/users/8161208/volodymyr-lashko"}, "edited": false, "score": 0, "creation_date": 1497455069, "post_id": 44549084, "comment_id": 76089137, "body": "I agree. Part of the error message <i>(&#39;derived *&#39; is not derived from &#39;base *&#39;)</i> made me think that compiler got confused with this code."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1497467141, "post_id": 44549084, "comment_id": 76096042, "body": "The point made in the comments above -- that <code>sizeof(complete_type)</code> must work -- also makes it clear why <code>derived</code> cannot be complete at that line.  We are defining a base of <code>derived</code>, how can we know how big <code>derived</code> is?"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 21, "last_activity_date": 1497454852, "last_edit_date": 1497454852, "creation_date": 1497454536, "answer_id": 44549084, "question_id": 44548242, "link": "https://stackoverflow.com/questions/44548242/covariant-return-type-is-not-recognized/44549084#44549084", "title": "Covariant return type is not recognized", "body": "<p>Here's the thing. While to us it may appear that the compiler knows everything it needs to know about the types in question, the standard says otherwise.</p>\n\n<p><a href=\"http://eel.is/c++draft/temp#arg.type-2\" rel=\"noreferrer\">[temp.arg.type/2]</a></p>\n\n<blockquote>\n  <p>... [\u2009Note: <strong>A template type argument may be an incomplete type</strong>. \u2014\u2009end note\u2009]</p>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/basic.types#5\" rel=\"noreferrer\">[basic.types/5]</a></p>\n\n<blockquote>\n  <p><strong>A class that has been declared but not defined</strong>, an enumeration type in\n  certain contexts ([dcl.enum]), or an array of unknown bound or of\n  incomplete element type, <strong>is an incompletely-defined object type</strong>.46\n  <strong>Incompletely-defined object types and cv void are incomplete types</strong>\n  ([basic.fundamental]). Objects shall not be defined to have an\n  incomplete type.</p>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/class#2\" rel=\"noreferrer\">[class/2]</a></p>\n\n<blockquote>\n  <p>A class-name is inserted into the scope in which it is declared\n  immediately after the class-name is seen. The class-name is also\n  inserted into the scope of the class itself; this is known as the\n  injected-class-name. For purposes of access checking, the\n  injected-class-name is treated as if it were a public member name. A\n  class-specifier is commonly referred to as a class definition. <strong>A class\n  is considered defined after the closing brace of its class-specifier\n  has been seen</strong> even though its member functions are in general not yet\n  defined. The optional attribute-specifier-seq appertains to the class;\n  the attributes in the attribute-specifier-seq are thereafter\n  considered attributes of the class whenever it is named.</p>\n</blockquote>\n\n<p>The text in bold paints the simple picture that the compilers in question treat the type parameter T as an incomplete object type. It's as though you only forward declared it, like so:</p>\n\n<pre><code>class derived;\n</code></pre>\n\n<p>They cannot deduce that this forward declaration is a class derived from <code>base</code>. So they cannot accept it as a co-variant return type in the context of <code>foo_default_impl</code>. Like was pointed out by <strong>@marcinj</strong> <a href=\"https://stackoverflow.com/questions/44548242/covariant-return-type-is-not-recognized#comment76088448_44548242\">in the comments</a>:</p>\n\n<p><a href=\"http://eel.is/c++draft/class.derived#class.virtual-8\" rel=\"noreferrer\">[class.virtual/8]</a></p>\n\n<blockquote>\n  <p>If the class type in the covariant return type of D\u200b::\u200bf differs from\n  that of B\u200b::\u200bf, the class type in the return type of D\u200b::\u200bf shall be\n  complete at the point of declaration of D\u200b::\u200bf or shall be the class\n  type D.</p>\n</blockquote>\n\n<p>Since <code>T</code> is neither complete, nor is it <code>foo_default_impl&lt;T&gt;</code> itself, it cannot be a co-variant return type.</p>\n"}], "owner": {"reputation": 518, "user_id": 8161208, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XEwnK.png?s=128&g=1", "display_name": "Volodymyr Lashko", "link": "https://stackoverflow.com/users/8161208/volodymyr-lashko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 2, "accepted_answer_id": 44549084, "answer_count": 1, "score": 23, "last_activity_date": 1497454852, "creation_date": 1497452170, "last_edit_date": 1497452462, "question_id": 44548242, "link": "https://stackoverflow.com/questions/44548242/covariant-return-type-is-not-recognized", "title": "Covariant return type is not recognized", "body": "<p>For some reason, up-to-date versions of both GCC and clang do not recognize return type covariance in this particular scenario. The error message is misleading: </p>\n\n<pre><code>error: return type of virtual function 'foo' is not covariant with the return\n     type of the function it overrides ('derived *' is not derived from 'base *')\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>class base\n{\nprivate:\n  virtual base * foo() = 0;\n};\n\ntemplate&lt; class T &gt;\nclass foo_default_impl : public virtual base\n{\nprivate:\n  T * foo() override { return nullptr; }\n};\n\nclass derived : public virtual base, private foo_default_impl&lt; derived &gt;\n{\n};\n\nint main() {\n  derived d{}; // error: return type of virtual function 'foo' is not covariant with the return type of the function it overrides ('derived *' is not derived from 'base *')\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "mask", "itk"], "answers": [{"tags": [], "owner": {"reputation": 2597, "user_id": 276168, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c3737e23c60ee88122120ea1eff8017?s=128&d=identicon&r=PG", "display_name": "D\u017eenan", "link": "https://stackoverflow.com/users/276168/d%c5%beenan"}, "is_accepted": false, "score": 1, "last_activity_date": 1497454202, "creation_date": 1497454202, "answer_id": 44548963, "question_id": 44548239, "link": "https://stackoverflow.com/questions/44548239/get-region-of-interest-using-binary-mask-c-itk/44548963#44548963", "title": "get region of interest using binary mask c++ itk", "body": "<p>That sounds like a job for <a href=\"https://itk.org/Doxygen/html/classitk_1_1RegionOfInterestImageFilter.html\" rel=\"nofollow noreferrer\">Region of interest filter</a>. First you need to determine the \"bounding region\" around your mask. You should use an <a href=\"https://itk.org/Wiki/ITK/Examples/Iterators/ImageRegionIterator\" rel=\"nofollow noreferrer\">iterator</a> for that. If you construct your pipeline (reader->regionOfInterest->writer) without intermediate <code>Update()</code> calls and with <a href=\"https://itk.org/ITKExamples/src/Core/Common/StreamAPipeline/Documentation.html\" rel=\"nofollow noreferrer\">streaming</a>, with some image formats (e.g. meta-image) your intensity image does not need to be even completely read from disk.</p>\n\n<p>You might also be interested in <a href=\"https://itk.org/Doxygen/html/classitk_1_1LabelGeometryImageFilter.html\" rel=\"nofollow noreferrer\">LabelGeometryImageFilter</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 7379226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa4472f54dc342856da3e52da08a6127?s=128&d=identicon&r=PG&f=1", "display_name": "elli", "link": "https://stackoverflow.com/users/7379226/elli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 359, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497454202, "creation_date": 1497452163, "last_edit_date": 1497453043, "question_id": 44548239, "link": "https://stackoverflow.com/questions/44548239/get-region-of-interest-using-binary-mask-c-itk", "title": "get region of interest using binary mask c++ itk", "body": "<p>I am pretty new to ITK and have therefore almost no experiences using it.\nMy problem is:</p>\n\n<p>I have two nifti images: one medical image and one binary image representing a Volume of interest. \nI would like to extract from the medical image only the region of the volume of interest. I would like to store the intensity value of this region in a multidimensional array.\nUntil now I read the image and the mask and stored their values in a multidimensional array. i could now compare the values pixel by pixel but I hope, there might be an easier way?</p>\n"}, {"tags": ["c++", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "reply_to_user": {"reputation": 29, "user_id": 8161203, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186488284781257/picture?type=large", "display_name": "Krishna Chouthankar", "link": "https://stackoverflow.com/users/8161203/krishna-chouthankar"}, "edited": false, "score": 0, "creation_date": 1497466354, "post_id": 44548398, "comment_id": 76095626, "body": "@KrishnaChouthankar You are welcome. Happy to help, and welcome to Stack Overflow. If this answer or any other one solved your issue, please mark it as accepted. (click on the check mark beside the answer to toggle it from hollow to green)"}, {"owner": {"reputation": 29, "user_id": 8161203, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186488284781257/picture?type=large", "display_name": "Krishna Chouthankar", "link": "https://stackoverflow.com/users/8161203/krishna-chouthankar"}, "edited": false, "score": 0, "creation_date": 1497480742, "post_id": 44548398, "comment_id": 76102280, "body": "There another issue that might need your help: adding the line ^dst.at&lt;uchar&gt;(j,i)=src.at&lt;uchar&gt;(j,i);^ gives me a segmentation fault."}, {"owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "reply_to_user": {"reputation": 29, "user_id": 8161203, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186488284781257/picture?type=large", "display_name": "Krishna Chouthankar", "link": "https://stackoverflow.com/users/8161203/krishna-chouthankar"}, "edited": false, "score": 0, "creation_date": 1497535612, "post_id": 44548398, "comment_id": 76128002, "body": "@KrishnaChouthankar You should check that <code>i</code> and <code>j</code> do not exceed the bounds of both, <code>src</code> and <code>dst</code> and both <code>Mat</code> are containig grayscale images"}], "tags": [], "owner": {"reputation": 3109, "user_id": 6178493, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9rTzh.jpg?s=128&g=1", "display_name": "Rama", "link": "https://stackoverflow.com/users/6178493/rama"}, "is_accepted": true, "score": 1, "last_activity_date": 1497452928, "last_edit_date": 1497452928, "creation_date": 1497452612, "answer_id": 44548398, "question_id": 44548167, "link": "https://stackoverflow.com/questions/44548167/cannot-print-a-pixel-value-when-using-waitkey/44548398#44548398", "title": "Cannot print a pixel value when using waitKey()", "body": "<p>Change this line:</p>\n\n<pre><code>cout&lt;&lt;(int)src.at&lt;uchar&gt;(155,155);\n</code></pre>\n\n<p>by:</p>\n\n<pre><code>cout&lt;&lt;(int)src.at&lt;uchar&gt;(155,155)&lt;&lt;endl;\n</code></pre>\n\n<p>This <code>std::endl</code> will inserts a new-line character and flushes the stream.</p>\n\n<p>Also you can just use <code>std::flush</code> to flush the output stream.</p>\n"}], "owner": {"reputation": 29, "user_id": 8161203, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186488284781257/picture?type=large", "display_name": "Krishna Chouthankar", "link": "https://stackoverflow.com/users/8161203/krishna-chouthankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 44548398, "answer_count": 1, "score": 0, "last_activity_date": 1497452928, "creation_date": 1497451983, "last_edit_date": 1497452659, "question_id": 44548167, "link": "https://stackoverflow.com/questions/44548167/cannot-print-a-pixel-value-when-using-waitkey", "title": "Cannot print a pixel value when using waitKey()", "body": "<p>I was writing a code to apply a mask to an image.\nHalfway through writing the code I realised that:</p>\n\n<pre><code>//applying a mask throughout the image using user defined function.\n#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;opencv2/core/core.hpp&gt;\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing namespace std;\n\nvoid sharpen(Mat&amp; src, Mat&amp; dst)\n\n{ cout&lt;&lt;\"\\n\\nFunction just called\\n\\n\";\n/*for (int i=1; i&lt;src.rows-1;i++)\n    {\n        for (int j=1; j&lt;src.cols-1;j++)\n        {\n            //dst(i,j)=(-1*(src(i-1,j-1)+src(i-1,j)+src(i-1,j+1)+src(i,j-1)+src(i,j+1)+src(i+1,j-1)+src(i+1,j)+src(i+1,j+1))+8*src(i,j))/9;\n\n        }\n\n    }*/\ndst=src;\nimshow(\"src\",src);\nimshow(\"dst\",dst);\n\n//cout&lt;&lt;src;\n\n}\n\nint main()\n{\nMat src,dst;\n\nsrc=imread(\"/home/krishna/Downloads/door1.jpg\", CV_LOAD_IMAGE_GRAYSCALE);\n\nnamedWindow(\"src\",WINDOW_NORMAL);\nnamedWindow(\"dst\",WINDOW_NORMAL);\ncout&lt;&lt;\"\\n\\nHi\\n\\n\";\ncout&lt;&lt;(int)src.at&lt;uchar&gt;(155,155);\n//sharpen(src,dst);\n//waitKey(-1);\nreturn 0;\n}\n</code></pre>\n\n<p>If I de-comment <code>waitKey</code> and/or <code>sharpen()</code>, the pixel at (155,155) does not get printed. I've tried changing the data type of <code>src.at&lt;&gt;()</code>, but in vain... </p>\n"}, {"tags": ["c++", "c", "input", "char"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1497452005, "post_id": 44548152, "comment_id": 76086963, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1497452330, "post_id": 44548152, "comment_id": 76087192, "body": "1. print operacao after reading it. 2. What type is operacao? printing the value will help you understand while loop."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1497453251, "post_id": 44548152, "comment_id": 76087861, "body": "Since you tagged as C++, you should consider <code>cin &gt;&gt; c</code> instead of <code>scanf</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1497453310, "post_id": 44548152, "comment_id": 76087908, "body": "You need to check the return value of <code>scanf</code>.  The <code>scanf</code> returns the number of parameters <i>satisfied</i> or -1 if there is an error.  Don&#39;t trust the Users to input correct data."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6373293, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cCHCdQY53gg/AAAAAAAAAAI/AAAAAAAAAFI/TIGxmoDbA5Q/photo.jpg?sz=128", "display_name": "Alex Sousa", "link": "https://stackoverflow.com/users/6373293/alex-sousa"}, "edited": false, "score": 0, "creation_date": 1497454674, "post_id": 44548231, "comment_id": 76088900, "body": "Thx for a tip - I have already solved the problem. Thx for your attention anyway."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 27, "user_id": 6373293, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cCHCdQY53gg/AAAAAAAAAAI/AAAAAAAAAFI/TIGxmoDbA5Q/photo.jpg?sz=128", "display_name": "Alex Sousa", "link": "https://stackoverflow.com/users/6373293/alex-sousa"}, "edited": false, "score": 0, "creation_date": 1497454956, "post_id": 44548231, "comment_id": 76089060, "body": "@AlexSousa No at all. You are welcome."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1497452449, "last_edit_date": 1497452449, "creation_date": 1497452139, "answer_id": 44548231, "question_id": 44548152, "link": "https://stackoverflow.com/questions/44548152/while-loop-is-repeating-once-more/44548231#44548231", "title": "While loop is repeating once more", "body": "<p>Use the following statement</p>\n\n<pre><code>scanf(\" %c\", &amp;operacao);\n      ^^^ \n</code></pre>\n\n<p>Otherwise white space characters (as for example the new line character <code>'\\n'</code> that corresponds to the pressed key Enter) are also read.</p>\n"}], "owner": {"reputation": 27, "user_id": 6373293, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cCHCdQY53gg/AAAAAAAAAAI/AAAAAAAAAFI/TIGxmoDbA5Q/photo.jpg?sz=128", "display_name": "Alex Sousa", "link": "https://stackoverflow.com/users/6373293/alex-sousa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "closed_date": 1497452209, "accepted_answer_id": 44548231, "answer_count": 1, "score": -4, "last_activity_date": 1497452651, "creation_date": 1497451950, "last_edit_date": 1497452651, "question_id": 44548152, "link": "https://stackoverflow.com/questions/44548152/while-loop-is-repeating-once-more", "closed_reason": "Not suitable for this site", "title": "While loop is repeating once more", "body": "<p>I don't know whats wrong in my code it is repeating once more.</p>\n\n<pre><code>do { \n         scanf(\"%c\", &amp;operacao);\n        //Tratamento de erro (Validando a informac\u00e3o vinda do usu\u00e1rio\n        if ((operacao != '*') &amp;&amp; (operacao != '+') &amp;&amp; (operacao != '-')) {\n            printf(\"---------------------------------------\\n\");\n            printf(\"*****       MENSAGEM DE ERRO      *****\\n\");\n            printf(\"---------------------------------------\\n\");\n            printf(\"Voc\u00ea digitou um valor inv\u00e1lido!\\n\");\n            printf(\"Por favor, digite + para soma, - para subtra\u00e7\u00e3o * para multiplicar ou / para dividir!\\n\");\n        }\n    } while ((operacao != '*') &amp;&amp; (operacao != '+') &amp;&amp; (operacao != '-'));\n</code></pre>\n"}, {"tags": ["c++", "json", "bitmap", "png"], "comments": [{"owner": {"reputation": 4791, "user_id": 1609614, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lvIBD.jpg?s=128&g=1", "display_name": "Ari0nhh", "link": "https://stackoverflow.com/users/1609614/ari0nhh"}, "edited": false, "score": 0, "creation_date": 1497451663, "post_id": 44547997, "comment_id": 76086702, "body": "Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1497451693, "post_id": 44547997, "comment_id": 76086726, "body": "So you want to <a href=\"https://en.wikipedia.org/wiki/Binary-to-text_encoding\" rel=\"nofollow noreferrer\">convert a chunk of binary data into a textual representation</a>?"}, {"owner": {"reputation": 1, "user_id": 8089167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8bd00269573e65e21ad33944c05ce78?s=128&d=identicon&r=PG", "display_name": "user8089167", "link": "https://stackoverflow.com/users/8089167/user8089167"}, "edited": false, "score": 0, "creation_date": 1497451746, "post_id": 44547997, "comment_id": 76086764, "body": "I don&#39;t even know the process so I haven&#39;t run into any problems yet, so I need to know where to start. That is why I asked, what are the steps to do this"}, {"owner": {"reputation": 1317, "user_id": 3849688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07WR3.jpg?s=128&g=1", "display_name": "Khouri Giordano", "link": "https://stackoverflow.com/users/3849688/khouri-giordano"}, "edited": false, "score": 0, "creation_date": 1497453840, "post_id": 44547997, "comment_id": 76088327, "body": "At least give a concrete example of your inputs and expected outputs."}], "owner": {"reputation": 1, "user_id": 8089167, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8bd00269573e65e21ad33944c05ce78?s=128&d=identicon&r=PG", "display_name": "user8089167", "link": "https://stackoverflow.com/users/8089167/user8089167"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497451475, "creation_date": 1497451475, "question_id": 44547997, "link": "https://stackoverflow.com/questions/44547997/convert-a-bitmap-to-a-json-file-in-a-png-format", "title": "Convert a bitmap to a json file in a png format?", "body": "<p>I have a json file that is holding some information, along with that, I would like an image(preferably as a string) to b a png representation of the bitmap object so it is easily recoverable. What are the steps to do this?</p>\n"}, {"tags": ["python", "c++", "swig"], "comments": [{"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 1, "creation_date": 1497460877, "post_id": 44547862, "comment_id": 76092504, "body": "Are you sure you want to copy it into a list and not just make the iteration work on the list proxy properly? The semantics of using a proxy to the C++ list object are probably more natural given that it&#39;s not const."}, {"owner": {"reputation": 154, "user_id": 4280680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25c5cf3c0d4afdfa4400f7ade1799a3d?s=128&d=identicon&r=PG", "display_name": "StephenSwat", "link": "https://stackoverflow.com/users/4280680/stephenswat"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1497461228, "post_id": 44547862, "comment_id": 76092713, "body": "@Flexo at this point I&#39;ll settle for whichever is easier. Do you have any idea how to fix the iteration issue?"}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1497461322, "post_id": 44547862, "comment_id": 76092781, "body": "Which version of Python are you using?"}, {"owner": {"reputation": 154, "user_id": 4280680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25c5cf3c0d4afdfa4400f7ade1799a3d?s=128&d=identicon&r=PG", "display_name": "StephenSwat", "link": "https://stackoverflow.com/users/4280680/stephenswat"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1497461514, "post_id": 44547862, "comment_id": 76092898, "body": "@Flexo I&#39;m using Python 3.5.3, I&#39;m letting CMake determine the SWIG 3.0.10 invocation but it&#39;s including the 3.5m headers."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 1, "creation_date": 1497468299, "post_id": 44547862, "comment_id": 76096609, "body": "I definitely see the issue here (although it&#39;d be helpful if you&#39;d include a minimal version of universe.hpp in the question so that others don&#39;t have to second guess what&#39;s needed to reproduce it). And it&#39;s not as simple as I imagined."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1497468890, "post_id": 44547862, "comment_id": 76096935, "body": "Good news: there&#39;s a quick workaround - <code>list(map(r.points.__getitem__, range(r.points.size())))</code>"}, {"owner": {"reputation": 154, "user_id": 4280680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25c5cf3c0d4afdfa4400f7ade1799a3d?s=128&d=identicon&r=PG", "display_name": "StephenSwat", "link": "https://stackoverflow.com/users/4280680/stephenswat"}, "reply_to_user": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1497469239, "post_id": 44547862, "comment_id": 76097108, "body": "@Flexo I have added the relevant parts of the <code>universe.hpp</code> file. As far as the problem is concerned I now fixed it in a similar manner by extending the Python class with an <code>__iter__</code> method but it&#39;s not a very neat solution I believe. Thank you for your help."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "edited": false, "score": 0, "creation_date": 1497470450, "post_id": 44547862, "comment_id": 76097770, "body": "Looks like a SWIG bug to me, but I&#39;ve not found the root cause yet."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "reply_to_user": {"reputation": 154, "user_id": 4280680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25c5cf3c0d4afdfa4400f7ade1799a3d?s=128&d=identicon&r=PG", "display_name": "StephenSwat", "link": "https://stackoverflow.com/users/4280680/stephenswat"}, "edited": false, "score": 0, "creation_date": 1497471350, "post_id": 44547862, "comment_id": 76098238, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/146700/discussion-between-flexo-and-stephenswat\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 4280680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25c5cf3c0d4afdfa4400f7ade1799a3d?s=128&d=identicon&r=PG", "display_name": "StephenSwat", "link": "https://stackoverflow.com/users/4280680/stephenswat"}, "edited": false, "score": 0, "creation_date": 1497473735, "post_id": 44554281, "comment_id": 76099469, "body": "This works absolutely wonderfully. Thank you very, very much."}, {"owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "reply_to_user": {"reputation": 154, "user_id": 4280680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25c5cf3c0d4afdfa4400f7ade1799a3d?s=128&d=identicon&r=PG", "display_name": "StephenSwat", "link": "https://stackoverflow.com/users/4280680/stephenswat"}, "edited": false, "score": 1, "creation_date": 1497473929, "post_id": 44554281, "comment_id": 76099567, "body": "@StephenSwat I did even more digging and I actually understand it right from first principles now. The solution is far simpler too, my initial conclusion that it was a bug is probably wrong (more like an enhancement request)"}], "tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": true, "score": 1, "last_activity_date": 1497473890, "last_edit_date": 1497473890, "creation_date": 1497472553, "answer_id": 44554281, "question_id": 44547862, "link": "https://stackoverflow.com/questions/44547862/converting-a-stdlist-of-structs-to-a-python-list/44554281#44554281", "title": "Converting a std::list of structs to a Python list", "body": "<p>This initially looked like a SWIG bug to me. It may well not be, and the simplest workaround is trivial change the line:</p>\n\n<pre><code>%template(Waypoints) std::list&lt;struct waypoint&gt;;\n</code></pre>\n\n<p>To simply be:</p>\n\n<pre><code>%template(Waypoints) std::list&lt;waypoint&gt;;\n</code></pre>\n\n<p>And all your troubles will be over. This is sufficient to allow the following code to run successfully:</p>\n\n<pre><code>import test\nr=test.Route()\nr.points[0]\n\nfor x in r.points:\n    print(x)\n</code></pre>\n\n<p>Which prints only:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>&lt;test.waypoint; proxy of &lt;Swig Object of type 'waypoint *' at 0x7fe439e22ed0&gt; &gt;\n&lt;test.waypoint; proxy of &lt;Swig Object of type 'waypoint *' at 0x7fe439ea5360&gt; &gt;\n</code></pre>\n\n<hr>\n\n<p>In the interest of completeness here is the journey I took to realise that:</p>\n\n<p>Essentially it seems that there's not a specialization of <code>swig_type_info *swig::type_info&lt;waypoint&gt;()</code> being generated, so the <code>SwigPyIterator::next()</code> call, via <code>SwigPyIterator::value()</code> ends up with a <code>null</code> pointer for <code>swig_type_info</code> for your <code>waypoint</code> type when it calls <code>SWIG_InternalNewPointerObj</code> to generate the Python proxy object. That's causing the unknown type information you see later.</p>\n\n<p>In the meantime though there are two ways to side step that. Firsly in Python you can still trivially get a Python list from a C++ <code>std::list</code> using something like:</p>\n\n<pre><code>list(map(r.points.__getitem__, range(r.points.size())))\n</code></pre>\n\n<p>Secondly, we can add our own specialization, it's fairly simple to do:</p>\n\n<pre><code>%{\n#include \"universe.hpp\"\n\n  // Workaround: add missing specialization\n  namespace swig {\n    // Forward declare first\n    template &lt;typename T&gt;\n    swig_type_info *type_info();\n\n    template &lt;&gt;\n    swig_type_info *type_info&lt;waypoint&gt;() {\n      return SWIGTYPE_p_waypoint;\n    };\n  }\n\n%}\n\n%include &lt;std_list.i&gt;\n%include \"universe.hpp\"\n\n%template(Waypoints) std::list&lt;struct waypoint&gt;;\n</code></pre>\n\n<p>If we dig around a little further in a debugger though we see that the default implementation of <code>type_info()</code> actually calls <code>traits_info&lt;Type&gt;::type_info()</code>. That in turn calls <code>type_query()</code>. And break pointing here we can see what the problem is more clearly - the query we've build has the word \"struct \" prepended to it. And the <code>swig_type_info</code> struct generated for <code>waypoint</code> doesn't have the word struct anywhere, so the type query system fails.</p>\n\n<p>I am somewhat surprised that the type query function does this with strings, even when the type is known at compile time - the specialisation I used above is far simpler and could seemingly be generated easily. But that's not actually why it didn't work here and the real solution is to drop the word <code>struct</code> from the <code>%template</code> invocation.</p>\n"}], "owner": {"reputation": 154, "user_id": 4280680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25c5cf3c0d4afdfa4400f7ade1799a3d?s=128&d=identicon&r=PG", "display_name": "StephenSwat", "link": "https://stackoverflow.com/users/4280680/stephenswat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 44554281, "answer_count": 1, "score": 3, "last_activity_date": 1497473890, "creation_date": 1497451138, "last_edit_date": 1497470321, "question_id": 44547862, "link": "https://stackoverflow.com/questions/44547862/converting-a-stdlist-of-structs-to-a-python-list", "title": "Converting a std::list of structs to a Python list", "body": "<p>I'm working on an accelerator module for Python written in C++. It's an implementation of Dijkstra's algorithm and eventually returns a pointer to a <code>Route</code> object which in turn contains a <code>std::list&lt;struct waypoint&gt;</code>. To interface with this object using Python I wrote the following interface file:</p>\n\n<pre><code>%{\n#include \"universe.hpp\"\n%}\n\n%include &lt;std_list.i&gt;\n%include \"universe.hpp\"\n\n%template(Waypoints) std::list&lt;struct waypoint&gt;;\n</code></pre>\n\n<p>This allowed me to access the list object and index it, but the iterator over it was not working properly:</p>\n\n<pre><code>&gt;&gt;&gt; r\n&lt;mod.Route; proxy of &lt;Swig Object of type 'Route *' at 0x7f6ab39ff4e0&gt; &gt;\n&gt;&gt;&gt; r.points\n&lt;mod.Waypoints; proxy of &lt;Swig Object of type 'std::list&lt; waypoint &gt; *' at 0x7f6ab502d630&gt; &gt;\n&gt;&gt;&gt; r.points[0]\n&lt;mod.waypoint; proxy of &lt;Swig Object of type 'waypoint *' at 0x7f6ab39ff540&gt; &gt;\n&gt;&gt;&gt; for x in r.points:\n...     print(x)\n... \n&lt;Swig Object of type 'unknown' at 0x7f6ab39ff5d0&gt;\nswig/python detected a memory leak of type 'unknown', no destructor found.\n&lt;Swig Object of type 'unknown' at 0x7f6ab39ff5a0&gt;\nswig/python detected a memory leak of type 'unknown', no destructor found.\n&lt;Swig Object of type 'unknown' at 0x7f6ab39ff5d0&gt;\nswig/python detected a memory leak of type 'unknown', no destructor found.\n...\n</code></pre>\n\n<p>In an attempt to remedy this (and to make the code bit nicer to read) I wanted to convert the <code>std::list&lt;struct waypoint&gt;</code> into a normal Python list so I wrote the following typemap:</p>\n\n<pre><code>%{\n#include \"universe.hpp\"\n%}\n\n%typemap(out) std::list&lt;struct waypoint&gt; {\n    $result = PyList_New($1-&gt;size());\n\n    printf(\"This never gets printed\\n\");\n\n    for(size_t i = 0; i &lt; $1-&gt;size(); ++i) {\n        PyList_SET_ITEM($result, i, $1[i]);\n    }\n}\n\n%include &lt;std_list.i&gt;\n\n%include \"universe.hpp\"\n</code></pre>\n\n<p>This typemap doesn't work, however. In fact, the list is now just a <code>SwigPyObject</code> and does not support subscription at all. The typemap is also never executed since the print statement inside it is never executed. I'm having a hard time finding people with the same problem on the web and I hope someone here can help me figure out what I'm doing wrong.</p>\n\n<p>These are the minimal contents of <code>universe.hpp</code>:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;list&gt;\n\nstruct Entity;\n\nstruct waypoint {\n    Entity *entity;\n    int type;\n};\n\nclass Route {\npublic:\n    int loops;\n    double cost;\n    std::list&lt;struct waypoint&gt; points;\n};\n\nclass Entity {\npublic:\n    float x, y, z;\n    int id, seq_id;\n    std::string name;\n};\n</code></pre>\n"}, {"tags": ["c++", "opencv3.2"], "comments": [{"owner": {"reputation": 11, "user_id": 7850759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LEfT2ypdimg/AAAAAAAAAAI/AAAAAAAABp8/SPnC-FfP8ys/photo.jpg?sz=128", "display_name": "rob", "link": "https://stackoverflow.com/users/7850759/rob"}, "edited": false, "score": 0, "creation_date": 1497450312, "post_id": 44547450, "comment_id": 76085693, "body": "I forgot to add there obviously needs to be a waitkey at the end duh!!"}, {"owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "edited": false, "score": 0, "creation_date": 1497450422, "post_id": 44547450, "comment_id": 76085772, "body": "you can edit the question to correct the code, but this is most likely your issue - use <code>waitKey(1)</code> instead of <code>waitKey(0)</code>"}, {"owner": {"reputation": 11, "user_id": 7850759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LEfT2ypdimg/AAAAAAAAAAI/AAAAAAAABp8/SPnC-FfP8ys/photo.jpg?sz=128", "display_name": "rob", "link": "https://stackoverflow.com/users/7850759/rob"}, "reply_to_user": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "edited": false, "score": 0, "creation_date": 1497451607, "post_id": 44547450, "comment_id": 76086660, "body": "Hey thanks that actually worked.....I didnt noticed that my keyboard was waiting for infinite keypresses...thought something was wrong with the logic..very silly,,thanks aton!!!"}], "answers": [{"comments": [{"owner": {"reputation": 5957, "user_id": 872363, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/45a31c259d94b9d114c3001f55d2dcbb?s=128&d=identicon&r=PG", "display_name": "slawekwin", "link": "https://stackoverflow.com/users/872363/slawekwin"}, "edited": false, "score": 0, "creation_date": 1497853038, "post_id": 44548150, "comment_id": 76232425, "body": "please highlight the change made so it&#39;s easier to notice when someone comes by with similar issue and accept your own answer"}], "tags": [], "owner": {"reputation": 11, "user_id": 7850759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LEfT2ypdimg/AAAAAAAAAAI/AAAAAAAABp8/SPnC-FfP8ys/photo.jpg?sz=128", "display_name": "rob", "link": "https://stackoverflow.com/users/7850759/rob"}, "is_accepted": false, "score": 1, "last_activity_date": 1499783744, "last_edit_date": 1499783744, "creation_date": 1497451933, "answer_id": 44548150, "question_id": 44547450, "link": "https://stackoverflow.com/questions/44547450/videoframes-are-only-coming-when-esc-spacebar-or-enter-keys-are-pressed-opencv-c/44548150#44548150", "title": "VideoFrames are only coming when esc,spacebar or enter keys are pressed OpenCV c++", "body": "<p>So the correct version of the corrected code will look somewhat like this.Thanks for the help.</p>\n\n<pre><code>#include \"opencv2/highgui.hpp\"\n#include \"opencv2/imgproc.hpp\"\n#include \"opencv2/objdetect/objdetect.hpp\"\n#include \"opencv2/tracking.hpp\"\n#include \"iostream\"\nusing namespace cv;\nusing namespace std;\nint main() {\n\nMat frame1;\nVideoCapture cap;\ncap.open(0);\ncap.read(frame1);\n Rect2d roi = selectROI(frame1, true);\n Mat Crop = frame1(roi);\n\n while (1) {\n\ncap.read(frame1);\nCrop = frame1(roi);\nif (Crop.empty()) {\n    cerr &lt;&lt; \"ERROR! blank frame grabbed\\n\";\n    break;\n\n}\nimshow(\"roi\", Crop);\n*int key=waitkey(1)*;\n</code></pre>\n\n<p>}\n}</p>\n"}], "owner": {"reputation": 11, "user_id": 7850759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LEfT2ypdimg/AAAAAAAAAAI/AAAAAAAABp8/SPnC-FfP8ys/photo.jpg?sz=128", "display_name": "rob", "link": "https://stackoverflow.com/users/7850759/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499783744, "creation_date": 1497450091, "last_edit_date": 1497451681, "question_id": 44547450, "link": "https://stackoverflow.com/questions/44547450/videoframes-are-only-coming-when-esc-spacebar-or-enter-keys-are-pressed-opencv-c", "title": "VideoFrames are only coming when esc,spacebar or enter keys are pressed OpenCV c++", "body": "<p>I am kind of an intermediate in Computer Vison and fairly proficient in opencv python however coming to c++ i am facing problems in just selecting ROI from Video feed and displaying the cropped feed .My code looks like this.</p>\n\n<pre><code>#include \"opencv2/highgui.hpp\"\n #include \"opencv2/imgproc.hpp\"\n #include \"opencv2/objdetect/objdetect.hpp\"\n  #include \"opencv2/tracking.hpp\"\n#include \"iostream\"\nusing namespace cv;\nusing namespace std;\n int main() {\n\nMat frame1;\nVideoCapture cap;\ncap.open(0);\ncap.read(frame1);\nRect2d roi = selectROI(frame1, true);\nMat Crop = frame1(roi);\n\nwhile (1) {\n\n    cap.read(frame1);\n    Crop = frame1(roi);\n    if (Crop.empty()) {\n        cerr &lt;&lt; \"ERROR! blank frame grabbed\\n\";\n        break;\n\n    }\n    imshow(\"roi\", Crop);\n    int key=waitkey(0);\n\n}\n}\n</code></pre>\n\n<p>The code is compiling ,and the cropped window is seen however I am always in need to click enter,spacebar or esc to get the video feed.Weird?</p>\n"}, {"tags": ["c++", "arrays", "input", "char"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1497450272, "post_id": 44547441, "comment_id": 76085658, "body": "Why are you reading integers into a char array?"}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 4, "last_activity_date": 1497451194, "last_edit_date": 1497451194, "creation_date": 1497450719, "answer_id": 44547690, "question_id": 44547441, "link": "https://stackoverflow.com/questions/44547441/strange-array-reading-from-file-in-c/44547690#44547690", "title": "strange array reading from file in C++", "body": "<p>In this statement</p>\n\n<pre><code>in &gt;&gt; array[i];\n</code></pre>\n\n<p>there is used the operator</p>\n\n<pre><code>template&lt;class charT, class traits&gt;\nbasic_istream&lt;charT, traits&gt;&amp; operator&gt;&gt;(basic_istream&lt;charT, traits&gt;&amp;, charT&amp;);\n</code></pre>\n\n<p>where the template parameter <code>charT</code> is substituted for template type argument <code>char</code>.</p>\n\n<p>The operator reads one character from the stream skipping white space characters.</p>\n\n<p>So as the stream contains the following sequence of characters</p>\n\n<pre><code>45 5 4 3 12\n</code></pre>\n\n<p>then for the five calls of the operator there will be read the following characters</p>\n\n<pre><code>4, 5, 5, 4, 3\n</code></pre>\n\n<p>white space characters will be skipped.</p>\n\n<p>You could read the stream as having integers for example like</p>\n\n<pre><code>for (i = 0; i &lt; n; i++)\n{\n    int value;\n    in &gt;&gt; value;\n    array[i] = value;\n}\n</code></pre>\n\n<p>As for the problem with the large integer array when you should declare it as having the static storage duration for example declare it outside any function. Or you could use standard class <code>std::vector</code> instead of the array.</p>\n"}], "owner": {"reputation": 713, "user_id": 7369189, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/zRaoJ.png?s=128&g=1", "display_name": "Tim\u0298tei", "link": "https://stackoverflow.com/users/7369189/tim%ca%98tei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 44547690, "answer_count": 1, "score": 1, "last_activity_date": 1497451194, "creation_date": 1497450055, "last_edit_date": 1497451041, "question_id": 44547441, "link": "https://stackoverflow.com/questions/44547441/strange-array-reading-from-file-in-c", "title": "strange array reading from file in C++", "body": "<p>I was trying to initialize an array of <code>1.000.001</code> element in <code>C++</code> like this: <code>int array[1000001]</code>. I have 4GB of RAM so I guessed the problem is that my laptop can't hold a so big array because of it's <code>4 * 1000001 bytes</code> size. So I decided to try to make it <code>char</code>(just because I wanted to know if my guess was right). I am reading the array from a file. This is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;climits&gt;\n\nusing namespace std;\n\n\nint main()\n{\n    fstream in(\"C:\\\\Users\\\\HP\\\\Documents\\\\Visual Studio 2017\\\\Projects\\\\inputFile.in\");\n    if (!in)\n    {\n        cerr &lt;&lt; \"Can't open input file\\n\";\n        return 1;\n    }\n    fstream out(\"outputFile.out\", fstream::out);\n    if (!out)\n    {\n        cerr &lt;&lt; \"Can't open output file\\n\";\n        return 1;\n    }\n\n    int n;\n    in &gt;&gt; n;\n    int i;\n    char array[100];\n    for (i = 0; i &lt; n; i++)\n        in &gt;&gt; array[i];\n\n    in.close();\n    out.close();\n}\n</code></pre>\n\n<p>For input:<br>\n<code>5\n45 5 4 3 12</code><br>\nmy array is <code>{4, 5, 5, 4, 3}</code>.  </p>\n\n<p>For input:\n<code>5\n12 3 4 5 45</code><br>\nmy array is <code>{1, 2, 3, 4, 5}</code>  </p>\n\n<p>Now I am really confused. Why is this happening?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1497449841, "post_id": 44547337, "comment_id": 76085312, "body": "In your code they are not initialized."}, {"owner": {"reputation": 7841, "user_id": 5250746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A19NH.jpg?s=128&g=1", "display_name": "Arpit Solanki", "link": "https://stackoverflow.com/users/5250746/arpit-solanki"}, "edited": false, "score": 3, "creation_date": 1497449842, "post_id": 44547337, "comment_id": 76085313, "body": "where are you taking input from user"}, {"owner": {"reputation": 1068, "user_id": 5854882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6fe1e093f1daa8277a4dd0b61eafd72b?s=128&d=identicon&r=PG&f=1", "display_name": "jhhoff02", "link": "https://stackoverflow.com/users/5854882/jhhoff02"}, "edited": false, "score": 0, "creation_date": 1497449864, "post_id": 44547337, "comment_id": 76085334, "body": "Declaring =/= initializing"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1497449916, "post_id": 44547337, "comment_id": 76085369, "body": "Reading the value of uninitialized variables is <a href=\"http://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">undefined behavior</a>. You cannot predict what will happen. Your variables may all be 0 this time, but next time they may have any other value. You can&#39;t even be sure it will run at all."}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 2, "creation_date": 1497449931, "post_id": 44547337, "comment_id": 76085383, "body": "no one here will teach you to code in C++, grab a tutorial for the first steps."}, {"owner": {"reputation": 1, "user_id": 8160979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d4c7ea580565c4876f5bc23f520afe?s=128&d=identicon&r=PG&f=1", "display_name": "Fanono", "link": "https://stackoverflow.com/users/8160979/fanono"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497449931, "post_id": 44547337, "comment_id": 76085384, "body": "@Slava correct, because all I had was 0 in the output for the distance"}, {"owner": {"reputation": 1, "user_id": 8160979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d4c7ea580565c4876f5bc23f520afe?s=128&d=identicon&r=PG&f=1", "display_name": "Fanono", "link": "https://stackoverflow.com/users/8160979/fanono"}, "reply_to_user": {"reputation": 7841, "user_id": 5250746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A19NH.jpg?s=128&g=1", "display_name": "Arpit Solanki", "link": "https://stackoverflow.com/users/5250746/arpit-solanki"}, "edited": false, "score": 0, "creation_date": 1497449977, "post_id": 44547337, "comment_id": 76085433, "body": "@ArpitSolanki It is further down, the issue is not in the input"}, {"owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "edited": false, "score": 1, "creation_date": 1497450222, "post_id": 44547337, "comment_id": 76085626, "body": "Further down? Like in after this code portion? Well of course it won&#39;t work because when you use them, they are not initialized."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1497450469, "post_id": 44547337, "comment_id": 76085810, "body": "C++ performs operations as soon as it reaches them. You cannot set up a formula (<code>pow((y1-y1),2)</code>) and expect <code>point1</code> to be updated as the Y values are filled in by the user. You can do exactly this in some other languages, and I wish I could remember the term for this sort of ordering because it would leave you with a keyword to research. Maybe someone else can remember it. Curse my failing, old mind."}, {"owner": {"reputation": 2013, "user_id": 963791, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/37fde4ad17afcefc285d350b7cb7e475?s=128&d=identicon&r=PG", "display_name": "Sinthia V", "link": "https://stackoverflow.com/users/963791/sinthia-v"}, "edited": false, "score": 0, "creation_date": 1497454219, "post_id": 44547337, "comment_id": 76088605, "body": "You must always initialize ALL your variables in C/C++. Initialization (setting an initial value) is a separate step from declaration (setting aside a block of memory for use and giving it a name). It does NOT manage ANY memory allocated. It is quite likely here is leftover data in the block you are allocating. if you do not overwrite this random garbage with known values, the results are unpredictable. Also be aware that C has no garbage collection, meaning your program&#39;s memory isn&#39;t automatically freed when the variable is no longer in scope. Don&#39;t forget to destroy what you construct."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8160979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d4c7ea580565c4876f5bc23f520afe?s=128&d=identicon&r=PG&f=1", "display_name": "Fanono", "link": "https://stackoverflow.com/users/8160979/fanono"}, "edited": false, "score": 0, "creation_date": 1497450110, "post_id": 44547397, "comment_id": 76085546, "body": "Thanks, but in the given it is mentioned that I have to prompt the user to input values. I did further down: cout&lt;&lt;&quot;Enter the x and y coordinates of the first point:&quot;&lt;&lt;endl;     cin&gt;&gt;x1&gt;&gt;y1;      cout&lt;&lt;&quot;Enter the x and y coordinates of the first point:&quot;&lt;&lt;endl;     cin&gt;&gt;x2&gt;&gt;y2;"}, {"owner": {"reputation": 479, "user_id": 3254810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b1a785e5b98cb2711b630e40e859436?s=128&d=identicon&r=PG&f=1", "display_name": "BareMetalCoder", "link": "https://stackoverflow.com/users/3254810/baremetalcoder"}, "reply_to_user": {"reputation": 1, "user_id": 8160979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d4c7ea580565c4876f5bc23f520afe?s=128&d=identicon&r=PG&f=1", "display_name": "Fanono", "link": "https://stackoverflow.com/users/8160979/fanono"}, "edited": false, "score": 0, "creation_date": 1497450313, "post_id": 44547397, "comment_id": 76085696, "body": "I suggest you look at std::cin or scanf. A bit of advice though: I am seeing your question get downvoted, mainly because this stuff can be found with some simple searching online. You should probably do more research on tutorial sites and maybe even retract the question."}], "tags": [], "owner": {"reputation": 479, "user_id": 3254810, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3b1a785e5b98cb2711b630e40e859436?s=128&d=identicon&r=PG&f=1", "display_name": "BareMetalCoder", "link": "https://stackoverflow.com/users/3254810/baremetalcoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1497449930, "creation_date": 1497449930, "answer_id": 44547397, "question_id": 44547337, "link": "https://stackoverflow.com/questions/44547337/program-telling-me-to-initialize-variable-that-does-not-need-to-be-initialized-w/44547397#44547397", "title": "Program telling me to initialize variable that does not need to be initialized when writing a simple c++ code", "body": "<p>Initializing is not the same thing as declaring.\nTo initialize a variable, you need to give it a value:</p>\n\n<pre><code>double x1 = 2.0;\ndouble x2 = 3.7;\n</code></pre>\n\n<p>Obviously, hard-coding a value is not very useful. You should get the input from the user or some other external source.</p>\n"}, {"tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1497450587, "last_edit_date": 1497450587, "creation_date": 1497449984, "answer_id": 44547414, "question_id": 44547337, "link": "https://stackoverflow.com/questions/44547337/program-telling-me-to-initialize-variable-that-does-not-need-to-be-initialized-w/44547414#44547414", "title": "Program telling me to initialize variable that does not need to be initialized when writing a simple c++ code", "body": "<p>This mean declaring only</p>\n\n<pre><code>double distance, point, point1, point2;\ndouble x1,y1;\ndouble x2, y2;\n</code></pre>\n\n<p>but you should:</p>\n\n<pre><code>double distance{ 0.0 };\ndouble point{ 0.0 };\ndouble point1{ 0.0 };\ndouble point2{ 0.0 };\ndouble x1{ 0.0 };\ndouble y1{ 0.0 };\ndouble x2{ 0.0 };\ndouble y2{ 0.0 };\n</code></pre>\n\n<p>on the other hand, your equation is wrong, you have to do:</p>\n\n<pre><code>point1 = pow((y2 - y1), 2);    // y2 - y1 \npoint2 = pow((x2 - x1), 2);    // x2 - x1 \n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>point1 = pow((y1-y1),2);  // y1 - y1 is 0\npoint2 = pow((x1-x2),2);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1497450087, "creation_date": 1497450087, "answer_id": 44547448, "question_id": 44547337, "link": "https://stackoverflow.com/questions/44547337/program-telling-me-to-initialize-variable-that-does-not-need-to-be-initialized-w/44547448#44547448", "title": "Program telling me to initialize variable that does not need to be initialized when writing a simple c++ code", "body": "<p>When you define local variables, they are not automatically initialized. They will haven an <em>indeterminate</em> value, and their use will lead to <em>undefined behavior</em>.</p>\n\n<p>If you want your local variables to actually have a value you need to <em>initialize</em> them.</p>\n\n<p>Also note that initialization does not work backwards. Without loops C++ executes the statements from top to bottom. If you initialize variables after you use them, that won't magically go back in time or otherwise redo the calculations using the uninitialized variables.</p>\n\n<hr>\n\n<p>As for the wrong answer, that's really a separate question but it all depends on what values you initialized the variables with. And if you get the input <em>after</em> you use the variables then as stated above the calculations won't be redone.</p>\n\n<p>The flow of control should be like this:</p>\n\n<pre><code>variable declarations and definitions (possible with initializations)\n\nget input from user\n\ndo calculations using the input from the user\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 3, "last_activity_date": 1497450248, "last_edit_date": 1592644375, "creation_date": 1497450248, "answer_id": 44547513, "question_id": 44547337, "link": "https://stackoverflow.com/questions/44547337/program-telling-me-to-initialize-variable-that-does-not-need-to-be-initialized-w/44547513#44547513", "title": "Program telling me to initialize variable that does not need to be initialized when writing a simple c++ code", "body": "<blockquote>\n<p>What is the problem and how is resolvable?</p>\n<p>It is further down, the issue is not in the input</p>\n</blockquote>\n<p>You need to read a textbook and understand basics of the language. Statements executed from left to right, from top to bottom. So if you have user input further down you get user input <strong>after</strong> you used unitiliazed variables for calculation. Code that you write are not mathematical equations, but instructions to virtual C++ machine what to do in each step.</p>\n"}], "owner": {"reputation": 1, "user_id": 8160979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6d4c7ea580565c4876f5bc23f520afe?s=128&d=identicon&r=PG&f=1", "display_name": "Fanono", "link": "https://stackoverflow.com/users/8160979/fanono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 4, "score": -6, "last_activity_date": 1497450587, "creation_date": 1497449772, "question_id": 44547337, "link": "https://stackoverflow.com/questions/44547337/program-telling-me-to-initialize-variable-that-does-not-need-to-be-initialized-w", "title": "Program telling me to initialize variable that does not need to be initialized when writing a simple c++ code", "body": "<pre><code>double distance, point, point1, point2;\ndouble x1,y1;\ndouble x2, y2;\n\npoint1 = pow((y1-y1),2);\npoint2 = pow((x1-x2),2);\n\npoint = point1+point2;\n\ndistance = sqrt(point) ;\n</code></pre>\n\n<p>I am writing a simple c++ program to prompt the user to enter 2 coordinates and calculate the distance between them. When adding the sqrt function, I am getting that I should initialize variables x1,x2,y1,y2. I did so but I got an answer of 0 for the distance. \nWhat is the problem and how is resolvable?</p>\n"}, {"tags": ["c++", "this", "this-pointer"], "comments": [{"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 4, "creation_date": 1497449919, "post_id": 44547329, "comment_id": 76085372, "body": "Because <code>this</code> is a pointer, but copy constructor accepts const reference to an INSTANCE (<code>*this</code>)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1497449975, "post_id": 44547329, "comment_id": 76085432, "body": "Totally unrelated to your query, but very related to the question, please take some time to <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1497450004, "post_id": 44547329, "comment_id": 76085459, "body": "<a href=\"https://stackoverflow.com/questions/645994/why-this-is-a-pointer-and-not-a-reference\" title=\"why this is a pointer and not a reference\">stackoverflow.com/questions/645994/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": true, "score": 4, "last_activity_date": 1497450612, "creation_date": 1497450612, "answer_id": 44547652, "question_id": 44547329, "link": "https://stackoverflow.com/questions/44547329/i-have-come-across-some-c-code-why-we-have-to-use-this-in-block-instead-of-th/44547652#44547652", "title": "I have come across some C++ code.Why we have to use *this in block instead of this?", "body": "<p><code>this</code> is a <em>pointer</em> to the object. The copy constructor requires a <em>reference</em> to the object. The way you convert a pointer to a reference is with the dereferencing <code>*</code> operator.</p>\n"}], "owner": {"reputation": 45, "user_id": 8160915, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8WpwArFyFmk/AAAAAAAAAAI/AAAAAAAARNM/m15-EaTq4V0/photo.jpg?sz=128", "display_name": "Ram Charan", "link": "https://stackoverflow.com/users/8160915/ram-charan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 44547652, "answer_count": 1, "score": 0, "last_activity_date": 1504627794, "creation_date": 1497449750, "last_edit_date": 1504627794, "question_id": 44547329, "link": "https://stackoverflow.com/questions/44547329/i-have-come-across-some-c-code-why-we-have-to-use-this-in-block-instead-of-th", "title": "I have come across some C++ code.Why we have to use *this in block instead of this?", "body": "<p>I have the following code, and I'm wondering why it uses <code>*this</code> instead of <code>this</code>.</p>\n\n<pre><code>class Quotation\n{\nprotected:\n    int value;\n    char* type;\npublic:\n    virtual Quotation* clone()=0;\n\n    char * getType()\n    {\n        return type;\n    }\n\n    int getValue()\n    {\n        return value;\n    }\n};\n\n\nclass bikeQuotation : public Quotation\n{\npublic:\n    bikeQuotation(int number)\n    {\n        value=number;\n        type=\"BIKE\";\n    }\n\n    Quotation * clone()\n    {\n        return new bikeQuotation(*this);  // &lt;-- Here!\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1497449690, "post_id": 44547204, "comment_id": 76085211, "body": "What did you find you with the debugger?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1497449808, "post_id": 44547204, "comment_id": 76085281, "body": "I have no idea what sort of data structure this is supposed to be."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1497449852, "post_id": 44547204, "comment_id": 76085326, "body": "Where do you initialize head[0] and head[first]?"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1497449855, "post_id": 44547204, "comment_id": 76085329, "body": "Why does the first node have index 15? This code doesn&#39;t even make any sense."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1497449929, "post_id": 44547204, "comment_id": 76085382, "body": "@Ziezi: But you don&#39;t have an array of <code>Link</code>. You have an array of <code>Link*</code>."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1497450148, "post_id": 44547204, "comment_id": 76085571, "body": "to see 15 you will need to work on pointers to pointers: <code>std::ptrdiff_t index_from_address(Link** l) { return l - head; } Link** front() const { return &amp;head[first]; }</code>, otherwise you work on uninitialized pointers"}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1497451582, "post_id": 44547204, "comment_id": 76086645, "body": "@MSalters Is it OK now?"}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1497451660, "post_id": 44547204, "comment_id": 76086698, "body": "@CodyGray I would have to admit that the &quot;M&quot; in MCVE was a bit abused."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1497452000, "post_id": 44547204, "comment_id": 76086954, "body": "@Ziezi: I&#39;m still struggling to understand what the datastructure should be. You really, really should learn the C++ standard containers first (in particular <code>std::vector&lt;&gt;</code> and <code>std::list&lt;&gt;</code>). The two main things you should be able to tell us about your container type are (1) what does it contain and (2) what operations does it support?"}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1497452236, "post_id": 44547204, "comment_id": 76087112, "body": "@MSalters The above code is written as a solution to the following requirement: <i>&quot; Change the representation of <code>Link</code> and <code>List</code> from &#167;27.9 without changing the user interface provided by the functions. Allocate <code>Link</code>s in an array of <code>Link</code>s and have the members: <code>first</code>, <code>last</code>, <code>prev</code>, and <code>next</code> be <code>int</code>s (indices into the array).  &quot;</i>. The interface is inherited from an ordinary implementation of a doubly linked list. I&#39;ve added the <code>bool</code> array (and the associated functions) to keep track of memory."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1497452396, "post_id": 44547204, "comment_id": 76087238, "body": "@Ziezi: If your book is having these exercises before introducing <code>std::vector</code>, ditch the book and check the <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">C++ book list</a>. It sounds horrible, both on the C++ side and the pedagogical side."}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1497452836, "post_id": 44547204, "comment_id": 76087515, "body": "@MSalters Exercise 6 Chapter 27 - Programming: Principles and Practice Using C++ B. Stroustrup. I&#39;m just writing it in C++ first, and then in C."}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1497475561, "post_id": 44547204, "comment_id": 76100342, "body": "@MSalters I don&#39;t know if I&#39;ve understood you well, when you were mentioning <code>std</code> containers...anyway,  the memory management part will be placed in an allocator and separated from the List. This is just a first attempt."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1497479732, "post_id": 44547204, "comment_id": 76101990, "body": "@Ziezi: Well, that&#39;s a reasonable book from what I hear, and I&#39;m pretty sure it covered <code>std::vector</code> before chapter 27."}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1497516734, "post_id": 44547204, "comment_id": 76114860, "body": "@MSalters the whole point of the exercise (IMO) is to compare implementations of Intrusive vs Non-instrusive containers, and to underline the additional memory management needs of the latter case (associated with container of pointers)."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 0, "creation_date": 1497517122, "post_id": 44547204, "comment_id": 76115171, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/146734/discussion-between-msalters-and-ziezi\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 0, "creation_date": 1497453475, "post_id": 44547518, "comment_id": 76088042, "body": "From what I can understand this is a perfect answer to a absolutely reasonable question. Still can&#39;t understand why the down and close votes? Anyway, thank you!"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 3, "last_activity_date": 1497450260, "creation_date": 1497450260, "answer_id": 44547518, "question_id": 44547204, "link": "https://stackoverflow.com/questions/44547204/index-from-address-in-array-of-pointers/44547518#44547518", "title": "Index from address in array of pointers?", "body": "<blockquote>\n<pre><code>l - head[0]\n</code></pre>\n</blockquote>\n\n<p>Here you compare the <em>values</em> of the two pointers. You let all pointers in the array be default initialized, so their values are indeterminate, and therefore the behaviour of accessing the values is undefined.</p>\n\n<p>You probably intended <code>index_from_address</code> to find the index where a  particular <em>pointer</em> object is stored - rather than the object that is pointed to, since the pointed to object is not in the array pointed by <code>head</code>. To do that, you must add a whole bunch of <code>&amp;</code>:</p>\n\n<pre><code> Link*&amp; front() const // return a reference to the pointer object, not a copy\n\n //  take a reference to the pointer as an argument, add const for good measure\n std::ptrdiff_t index_from_address(Link*&amp; l) const\n// compare the addresses of the pointers, rather than values\n { return &amp;l - &amp;head[0]; }\n</code></pre>\n"}], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 44547518, "answer_count": 1, "score": -3, "last_activity_date": 1497516545, "creation_date": 1497449390, "last_edit_date": 1497516545, "question_id": 44547204, "link": "https://stackoverflow.com/questions/44547204/index-from-address-in-array-of-pointers", "title": "Index from address in array of pointers?", "body": "<p>The code below a solution to the following requirement: </p>\n\n<blockquote>\n  <p>\"Change the representation of <code>Link</code> and <code>List</code> from \u00a727.9 without changing the user interface provided by the functions. Allocate <code>Link</code>s in an array of <code>Links</code> and have the members: <code>first</code>, <code>last</code>, <code>prev</code>, and <code>next</code> be <code>int</code>s (indices into the array). \"  <br>- Exercise 6 Chapter 27 - Programming: Principles and Practice Using C++ B. Stroustrup </p>\n</blockquote>\n\n<p>The interface is inherited from an ordinary implementation of an <strong>Intrusive</strong> doubly linked list. I've added the bool array (and the associated functions) to keep track of memory:</p>\n\n<pre><code> #include &lt;iostream&gt;\n\nstruct Link\n{\n    int next;\n    int prev;\n};\n\n//------------------------------------------------------------------------------------\n\nstruct List\n{\n    Link** head;\n    int first;      // points to the current first node\n    int last;\n\n    bool* available;\n    int list_size;\n\n    int get_index()\n    {\n        for (int i = 0; i &lt; list_size; ++i)\n        {\n            if (available[i] == true) \n            {\n                available[i] = false;\n                return i;\n            }\n        }\n        throw std::bad_alloc(\"bla bla!\\n\");\n    }\n\n    List()\n    {\n        list_size = 30;\n\n        head = new Link*[list_size];\n        available = new bool[list_size];\n\n        first = -1;\n        last = -1;\n\n        for (int i = 0; i &lt; list_size; ++i)\n        {\n            available[i] = true;\n        }\n    }\n\n    void List::push_back(Link* l)\n    {\n        if (l == nullptr)\n        {\n            throw std::invalid_argument(\"bla bla!\\n\");\n        }\n\n        int index = get_index();\n        head[index] = l;\n\n        if (last != -1)\n        {\n            head[last]-&gt;next = index;\n            head[index]-&gt;prev = last;\n        }\n        else\n        {\n           first = index;\n           head[index]-&gt;prev = -1;\n        }\n\n        last = index;\n        head[index]-&gt;next = -1;\n    }\n\n    void push_front(Link* l)\n    {\n        if (l == nullptr)\n        {\n            throw std::invalid_argument(\"bla bla\\n\");\n        }\n\n        int index = get_index();\n        head[index] = l;\n\n        if (first != -1)\n        {\n            head[first]-&gt;prev = index;\n            head[index]-&gt;next = first;\n        }\n        else\n        {\n            last = index;\n            head[index]-&gt;next = -1;\n        }\n\n        first = index;\n        head[index]-&gt;prev = -1;\n    }\n\n    // index = ptr - base\n    std::ptrdiff_t index_from_address(Link* l) { return l - head[0]; }\n\n    Link* front() const { return head[first]; }\n};\n\n//------------------------------------------------------------------------------------\n\nint main()\n{\n    List l;\n\n    for (int i = 0; i &lt; 10; ++i)\n    {\n        l.push_back(new Link());\n    }\n\n    for (int i = 0; i &lt; 10; ++i)\n    {\n        l.push_front(new Link());\n    }\n\n    std::cout &lt;&lt;\"first = \"&lt;&lt; l.first &lt;&lt;\", index = \" &lt;&lt; l.index_from_address(l.front());\n    getchar();\n}\n</code></pre>\n\n<p>Expected result:</p>\n\n<blockquote>\n  <p><code>first = 19, index = 19</code></p>\n</blockquote>\n\n<p>Actual result:</p>\n\n<blockquote>\n  <p><code>first = 19, index = 194</code></p>\n</blockquote>\n\n<p>Why? </p>\n"}, {"tags": ["c++", "memory-management", "boost-compute"], "answers": [{"comments": [{"owner": {"reputation": 865, "user_id": 372328, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c8047c82f17203f7f779585727cfaab9?s=128&d=identicon&r=PG", "display_name": "Brett Ryland", "link": "https://stackoverflow.com/users/372328/brett-ryland"}, "edited": false, "score": 0, "creation_date": 1497530119, "post_id": 44555794, "comment_id": 76123839, "body": "OK, thanks. I wasn&#39;t aware that the buffer allocation was done lazily (I&#39;m still new at this).  In regards to 4., the only way I&#39;ve found to get boost::compute to free up memory is to force the compute::vector to go out of scope, e.g. with enclosing braces. <code>shrink_to_fit()</code> doesn&#39;t seem to affect the capacity. Is there a better way?"}, {"owner": {"reputation": 321, "user_id": 1015320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4aca5081702d525d01a971937000cdb?s=128&d=identicon&r=PG", "display_name": "haahh", "link": "https://stackoverflow.com/users/1015320/haahh"}, "reply_to_user": {"reputation": 865, "user_id": 372328, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c8047c82f17203f7f779585727cfaab9?s=128&d=identicon&r=PG", "display_name": "Brett Ryland", "link": "https://stackoverflow.com/users/372328/brett-ryland"}, "edited": false, "score": 0, "creation_date": 1497543680, "post_id": 44555794, "comment_id": 76133557, "body": "Yes, shrink_to_fit() in boost::compute::vector indeed does nothing. The only way is to get vector out of scope, so the destructor is called. I think it&#39;s a good way of managing device memory in terms of maintenance and performance."}], "tags": [], "owner": {"reputation": 321, "user_id": 1015320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4aca5081702d525d01a971937000cdb?s=128&d=identicon&r=PG", "display_name": "haahh", "link": "https://stackoverflow.com/users/1015320/haahh"}, "is_accepted": true, "score": 1, "last_activity_date": 1497479931, "creation_date": 1497479931, "answer_id": 44555794, "question_id": 44547038, "link": "https://stackoverflow.com/questions/44547038/allocating-large-vectors-in-boostcompute/44555794#44555794", "title": "Allocating large vectors in boost::compute", "body": "<blockquote>\n  <ol>\n  <li>What is the correct/usual way to deal with (and avoid) memory allocation failures when using boost::compute?</li>\n  </ol>\n</blockquote>\n\n<p>You just need to follow the same rules as for OpenCL. Boost.Compute does not add any new restrictions. You have to remember that on many OpenCL platforms allocation memory for buffer is done in a lazy way, so even if creating buffer of size greater than <code>CL_DEVICE_MAX_MEM_ALLOC_SIZE</code> is successful it can fail later (implementation defined behaviour).</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>How can I determine the largest size of a vector that I can allocate at any given moment (i.e. the device may already contain allocated data)?</li>\n  </ol>\n</blockquote>\n\n<p>I don't think that possible. You can always create your allocator class (and use it with <code>boost::compute::vector</code>), that would globally track this per device (using <code>CL_DEVICE_GLOBAL_MEM_SIZE</code>) and do whatever you want it to do when there's not enough memory. However, you have to remember that OpenCL memory is bound to a context and not to a device. </p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li>If I have too much data, can I get boost::compute to automatically process it in chunks or do I have to break it up myself?</li>\n  </ol>\n</blockquote>\n\n<p>No, you have to implement something that takes care of that. It can be done in multiple ways depending on your OpenCL platform and supported OpenCL version.</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>How do I free up memory on the device once I'm done with it?</li>\n  </ol>\n</blockquote>\n\n<p><code>boost::compute::vector</code>'s destructor release device memory. Each OpenCL memory object (like buffer) has its reference counter that is properly increased and decreased by Boost.Compute's classes. Note: Iterators do not own buffers, so after underlying buffer is released (for example, after <code>boost::compute::vector</code> that allocated that buffer is destructed), iterators stop working.</p>\n"}], "owner": {"reputation": 865, "user_id": 372328, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c8047c82f17203f7f779585727cfaab9?s=128&d=identicon&r=PG", "display_name": "Brett Ryland", "link": "https://stackoverflow.com/users/372328/brett-ryland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 44555794, "answer_count": 1, "score": 0, "last_activity_date": 1497479931, "creation_date": 1497448935, "question_id": 44547038, "link": "https://stackoverflow.com/questions/44547038/allocating-large-vectors-in-boostcompute", "title": "Allocating large vectors in boost::compute", "body": "<p>While experimenting with boost::compute I've run into an issue with determining the largest vector I can allocate on a device (I'm still fairly new to boost::compute). The following snippet of code</p>\n\n<pre><code>std::vector&lt;cl_double&gt; host_tmp;\nstd::cout &lt;&lt; \"CL_DEVICE_GLOBAL_MEM_SIZE / sizeof(cl_double) = \" &lt;&lt; device.get_info&lt;cl_ulong&gt;(CL_DEVICE_GLOBAL_MEM_SIZE) / sizeof(cl_double) &lt;&lt; \"\\n\";\nstd::cout &lt;&lt; \"CL_DEVICE_MAX_MEM_ALLOC_SIZE / sizeof(cl_double) = \" &lt;&lt; device.get_info&lt;cl_ulong&gt;(CL_DEVICE_MAX_MEM_ALLOC_SIZE) / sizeof(cl_double) &lt;&lt; \"\\n\";\nsize_t num_elements = device.get_info&lt;cl_ulong&gt;(CL_DEVICE_MAX_MEM_ALLOC_SIZE) / sizeof(cl_double);\ncompute::vector&lt;cl_double&gt; dev_tmp(context);\nstd::cout &lt;&lt; \"Maximum size of vector reported by .max_size() = \" &lt;&lt; dev_tmp.max_size() &lt;&lt; \"\\n\";\nfor (auto i = 0; i &lt; 64; ++i) {\n    std::cout &lt;&lt; \"Resizing device vector to \" &lt;&lt; num_elements &lt;&lt; \"...\";\n    dev_tmp.resize(num_elements, queue);\n    std::cout &lt;&lt; \" done.\";\n    std::cout &lt;&lt; \" Assigning host data...\";\n    host_tmp.resize(num_elements);\n    std::iota(host_tmp.begin(), host_tmp.end(), 0);\n    std::cout &lt;&lt; \" done.\";\n    std::cout &lt;&lt; \" Copying data from host to device...\";\n    compute::copy(host_tmp.begin(), host_tmp.end(), dev_tmp.begin(), queue);\n    std::cout &lt;&lt; \" done.\\n\";\n    num_elements += 1024 * 1024;\n}\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>CL_DEVICE_GLOBAL_MEM_SIZE / sizeof(cl_double) = 268435456\nCL_DEVICE_MAX_MEM_ALLOC_SIZE / sizeof(cl_double) = 67108864\nMaximum size of vector reported by .max_size() = 67108864\nResizing device vector to 67108864... done. Assigning host data... done. Copying data from host to device... done.\nResizing device vector to 68157440... done. Assigning host data... done. Copying data from host to device... done.\n...\nResizing device vector to 101711872...Memory Object Allocation Failure\n</code></pre>\n\n<p>so clearly the reported max_size() is neither a hard limit nor enforced.\nI assume that to be safe I should stick to the reported max_size(), however, if I allocate multiple vectors on the device of size max_size(), then I also receive the <code>Memory Object Allocation Failure</code> message.</p>\n\n<ol>\n<li>What is the correct/usual way to deal with (and avoid) memory allocation failures when using boost::compute?  </li>\n<li>How can I determine the largest size of a vector that I can allocate at any given moment (i.e. the device may already contain allocated data)?  </li>\n<li>If I have too much data, can I get boost::compute to automatically process it in chunks or do I have to break it up myself?  </li>\n<li>How do I free up memory on the device once I'm done with it?</li>\n</ol>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1497448561, "post_id": 44546847, "comment_id": 76084335, "body": "You should be aware of <a href=\"http://en.cppreference.com/w/cpp/container/vector/back\" rel=\"nofollow noreferrer\"><code>std::vector::back()</code></a>. It returns a reference to the last element of the vector. You should also be made aware of <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared\" rel=\"nofollow noreferrer\"><code>std::make_shared&lt;T&gt;</code></a> which is the preferred way of creating an instance owned by a <code>shared_ptr</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1497448711, "post_id": 44546847, "comment_id": 76084458, "body": "Why do you have the <code>bodies</code> vector be a vector of non-shared pointers? That just begs for stray pointers."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1497448820, "post_id": 44546847, "comment_id": 76084557, "body": "@Someprogrammerdude If the vectors of <code>shared_ptr</code> have the same life time as <code>bodies</code>, it&#39;s fine. Nothing wrong with non-owning pointers. Smart pointers and raw pointers are both tools with their pros and cons. Use whichever is appropriate for the job."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1497449012, "post_id": 44546847, "comment_id": 76084711, "body": "@Fran&#231;oisAndrieux Yes but that&#39;s a big &quot;if&quot;. I&#39;m more worried about the other case where the &quot;if&quot; is not true, and the shared pointer releases its data before it is removed from the <code>bodies</code> vector. While it might not be the case currently, just having the risk being there is enough for me to question that choice."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1497449122, "post_id": 44546847, "comment_id": 76084793, "body": "Incidentally, having <code>bodies</code> be a vector of shared pointers to the base class will solve the current problem with the comparison."}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1497449377, "post_id": 44546847, "comment_id": 76084968, "body": "I assume you&#39;re after some polymorphic behavior, so why <code>vector&lt; shared_ptr&lt;Body&gt; &gt; bodies;</code> is not enough?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1497450750, "post_id": 44546847, "comment_id": 76086027, "body": "This sounds like a case for <code>std::weak_ptr</code>.  <code>bodies</code> can be a <code>std::vector&lt;std::weak_ptr&lt;Body&gt;&gt;</code> and then it is trivial to <code>erase</code> and <code>remove</code> all <code>expired</code> pointers."}, {"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 0, "creation_date": 1497451009, "post_id": 44546847, "comment_id": 76086215, "body": "there is an option to add field ID to base Body, and instead of using vectors use maps with ID as a key, so you will have no problems finding something."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1497451101, "post_id": 44546847, "comment_id": 76086271, "body": "&quot;object sliced version of it&quot; huh? Anyway, try <code>std::find_if</code>."}], "owner": {"reputation": 61, "user_id": 4704297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe5035829886e1c74176a779a43c1cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Trotom", "link": "https://stackoverflow.com/users/4704297/trotom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497452870, "creation_date": 1497448470, "last_edit_date": 1497452034, "question_id": 44546847, "link": "https://stackoverflow.com/questions/44546847/searching-the-derived-object-by-pointer-of-base-type", "title": "Searching the derived object by pointer of base type", "body": "<p>So I have 4 classes defined like that:</p>\n\n<pre><code>class Body\n{//not important};\n\nclass CelestialBody: public Body\n{//not important}\n\nclass Star: public CelestialBody\n{//not important}\n\nclass Starship: public Body\n{//not important}\n</code></pre>\n\n<p>And then I define vectors of shared_ptrs of those objects:</p>\n\n<pre><code>vector&lt;shared_ptr&lt;Starship&gt; &gt; starships;\nvector&lt;shared_ptr&lt;CelestialBody&gt; &gt; planetoids;\nvector&lt;shared_ptr&lt;Star&gt; &gt; stars;\nvector&lt;Body*&gt; bodies;\n</code></pre>\n\n<p>Which then I fill with objects:</p>\n\n<pre><code>for(int i=0; i&lt;1; ++i)\n{\n    starships.push_back(shared_ptr&lt;Starship&gt;(new Starship));\n    bodies.push_back(starships[starships.size()-1].get());\n}\nfor(int i=0; i&lt;totalOfBodies; ++i)\n{\n    planetoids.push_back(shared_ptr&lt;CelestialBody&gt;(new CelestialBody));\n    bodies.push_back(planetoids[planetoids.size()-1].get());\n}\nfor(int i=0; i&lt;0; ++i)\n{\n    stars.push_back(shared_ptr&lt;Star&gt;(new Star));\n    bodies.push_back(stars[stars.size()-1].get());\n}\n</code></pre>\n\n<p>It all works as I want: I have a vector to reach all bodies, I have a vector to reach specifically  all planetoids, all stars and all starships. But now I want to delete a starship from both <code>bodies</code> vector and <code>starships</code> vector, but I only know its index in the <code>bodies</code> vector:</p>\n\n<pre><code>if(bodies[j]-&gt;Type() == starshipType) \n{\n    starships.erase(find(starships.begin(), starships.end(), bodies[j]));\n    //error:  no match for \u2018operator==\u2019 (operand types are \u2018std::shared_ptr&lt;Starship&gt;\u2019 and \u2018Body* const\u2019)\n\n}\nbodies.erase(bodies.begin() + j);\n</code></pre>\n\n<p>I understand the error it produces, but I don't know how to do that instead.</p>\n\n<p>Bo basically I want a big vector holding all the objects that are Bodies (so children too) and few smaller ones that hold objects of separate types, but I still want to retain the possibility to delete objects from both big vector and the specific vector.</p>\n\n<p>EDIT:</p>\n\n<p>Ok, so basically I've missed defining <code>bodies</code> as <code>vector&lt;shared_ptr&lt;Body&gt; &gt;</code>.\nBut the section with finding doesn't work: </p>\n\n<pre><code>starships.erase(find(starships.begin(), starships.end(), bodies[j]));\n</code></pre>\n\n<p>I'm searching for <code>shared_ptr&lt;Body&gt;</code> in a vector of <code>shared_ptr&lt;Starship&gt;</code> which always returns end of vector. How can I search for object of derived class while having a object sliced version of it?</p>\n\n<p>ANOTHER EDIT:</p>\n\n<p>Thanks for quick response. I think <code>std::find_if()</code> along with id system will suit me.</p>\n"}, {"tags": ["c++", "nvidia", "mesh", "assimp", "optix"], "answers": [{"tags": [], "owner": {"reputation": 77, "user_id": 1162637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9df7dbf7afabc7188830891f707de76b?s=128&d=identicon&r=PG", "display_name": "Al5678", "link": "https://stackoverflow.com/users/1162637/al5678"}, "is_accepted": true, "score": 3, "last_activity_date": 1498158128, "creation_date": 1498158128, "answer_id": 44707442, "question_id": 44546797, "link": "https://stackoverflow.com/questions/44546797/ray-tracing-using-nvidia-optix-with-open-asset-import-library-assimp-renderi/44707442#44707442", "title": "Ray Tracing using Nvidia Optix with Open Asset Import Library (assimp) - rendering multiple meshes", "body": "<p>I found a solution, although not sure how optimal.</p>\n\n<p>Each mesh still gets its own geometry, however instead of creating single vertex, index and normal buffers which are shared among all geometries, I create separate buffers for each geometry.  </p>\n\n<p>Then, instead of </p>\n\n<pre><code>context[\"vertex_buffer\"]-&gt;setBuffer(vertices);\ncontext[\"normal_buffer\"]-&gt;setBuffer(normals);\ncontext[\"index_buffer\"]-&gt;setBuffer(faces);\ncontext[\"texcoord_buffer\"]-&gt;setBuffer(tbuffer);\ncontext[\"material_buffer\"]-&gt;setBuffer(materials);\n</code></pre>\n\n<p>I use </p>\n\n<pre><code>geometry[\"vertex_buffer\"]-&gt;setBuffer(vertices);\ngeometry[\"normal_buffer\"]-&gt;setBuffer(normals);\ngeometry[\"index_buffer\"]-&gt;setBuffer(faces);\ngeometry[\"texcoord_buffer\"]-&gt;setBuffer(tbuffer);\ngeometry[\"material_buffer\"]-&gt;setBuffer(materials);\n</code></pre>\n\n<p>The result:\n<a href=\"https://i.stack.imgur.com/zEEx5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zEEx5.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 77, "user_id": 1162637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9df7dbf7afabc7188830891f707de76b?s=128&d=identicon&r=PG", "display_name": "Al5678", "link": "https://stackoverflow.com/users/1162637/al5678"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 1, "accepted_answer_id": 44707442, "answer_count": 1, "score": 1, "last_activity_date": 1498158128, "creation_date": 1497448343, "question_id": 44546797, "link": "https://stackoverflow.com/questions/44546797/ray-tracing-using-nvidia-optix-with-open-asset-import-library-assimp-renderi", "title": "Ray Tracing using Nvidia Optix with Open Asset Import Library (assimp) - rendering multiple meshes", "body": "<p>I'm trying to combine the versatility of Open Asset Import Library (reading in a variety of 3D model filetypes) with NVidia Optix ray tracing to render the models. </p>\n\n<p>So far, it is working whenever the model I'm rendering is made up of a single mesh.  When I try to render a file with more than one mesh, I get only partial results.  I can't narrow down where the issue is, looking for some insight.  Relevant code here:</p>\n\n<p>Loading a file using assimp importer and creating the optix buffers:</p>\n\n<pre><code>int loadAsset(const char* path)\n{\nAssimp::Importer importer;\n\nscene = importer.ReadFile(\n    path,\n    aiProcess_Triangulate\n    //| aiProcess_JoinIdenticalVertices\n    | aiProcess_SortByPType\n    | aiProcess_ValidateDataStructure\n    | aiProcess_SplitLargeMeshes\n    | aiProcess_FixInfacingNormals\n    );\n\nif (scene) {\n    getBoundingBox(&amp;scene_min, &amp;scene_max);\n    scene_center.x = (scene_min.x + scene_max.x) / 2.0f;\n    scene_center.y = (scene_min.y + scene_max.y) / 2.0f;\n    scene_center.z = (scene_min.z + scene_max.z) / 2.0f;\n\n    float3 optixMin = { scene_min.x, scene_min.y, scene_min.z };\n    float3 optixMax = { scene_max.x, scene_max.y, scene_max.z };\n    aabb.set(optixMin, optixMax);\n\n    unsigned int numVerts = 0;\n    unsigned int numFaces = 0;\n\n    if (scene-&gt;mNumMeshes &gt; 0) {    \n        printf(\"Number of meshes: %d\\n\", scene-&gt;mNumMeshes);\n\n        // get the running total number of vertices &amp; faces for all meshes\n        for (unsigned int i = 0; i &lt; scene-&gt;mNumMeshes; i++) {\n            numVerts += scene-&gt;mMeshes[i]-&gt;mNumVertices;\n            numFaces += scene-&gt;mMeshes[i]-&gt;mNumFaces;\n        }\n        printf(\"Found %d Vertices and %d Faces\\n\", numVerts, numFaces);\n\n        // set up buffers\n        optix::Buffer vertices = context-&gt;createBuffer(RT_BUFFER_INPUT, RT_FORMAT_FLOAT3, numVerts);\n        optix::Buffer normals = context-&gt;createBuffer(RT_BUFFER_INPUT, RT_FORMAT_FLOAT3, numVerts);\n        optix::Buffer faces = context-&gt;createBuffer(RT_BUFFER_INPUT, RT_FORMAT_UNSIGNED_INT3, numFaces);\n        optix::Buffer materials = context-&gt;createBuffer(RT_BUFFER_INPUT, RT_FORMAT_UNSIGNED_INT, numVerts);\n\n        // unused buffer\n        Buffer tbuffer = context-&gt;createBuffer(RT_BUFFER_INPUT, RT_FORMAT_FLOAT2, 0);\n\n        // create material\n        std::string defaultPtxPath = \"C:\\\\ProgramData\\\\NVIDIA Corporation\\\\OptiX SDK 4.1.0\\\\SDK\\\\build\\\\lib\\\\ptx\\\\\";\n        Program phong_ch = context-&gt;createProgramFromPTXFile(defaultPtxPath + \"optixPrimitiveIndexOffsets_generated_phong.cu.ptx\", \"closest_hit_radiance\");\n        Program phong_ah = context-&gt;createProgramFromPTXFile(defaultPtxPath + \"optixPrimitiveIndexOffsets_generated_phong.cu.ptx\", \"any_hit_shadow\");\n\n        Material matl = context-&gt;createMaterial();\n        matl-&gt;setClosestHitProgram(0, phong_ch);\n        matl-&gt;setAnyHitProgram(1, phong_ah);\n        matl[\"Kd\"]-&gt;setFloat(0.7f, 0.7f, 0.7f);\n        matl[\"Ka\"]-&gt;setFloat(1.0f, 1.0f, 1.0f);\n        matl[\"Kr\"]-&gt;setFloat(0.0f, 0.0f, 0.0f);\n        matl[\"phong_exp\"]-&gt;setFloat(1.0f);\n\n        std::string triangle_mesh_ptx_path(ptxPath(\"triangle_mesh.cu\"));\n        Program meshIntersectProgram = context-&gt;createProgramFromPTXFile(triangle_mesh_ptx_path, \"mesh_intersect\");\n        Program meshBboxProgram = context-&gt;createProgramFromPTXFile(triangle_mesh_ptx_path, \"mesh_bounds\");\n\n        optix::float3 *vertexMap = reinterpret_cast&lt;optix::float3*&gt;(vertices-&gt;map());\n        optix::float3 *normalMap = reinterpret_cast&lt;optix::float3*&gt;(normals-&gt;map());\n        optix::uint3 *faceMap = reinterpret_cast&lt;optix::uint3*&gt;(faces-&gt;map());\n        unsigned int *materialsMap = static_cast&lt;unsigned int*&gt;(materials-&gt;map());\n\n        context[\"vertex_buffer\"]-&gt;setBuffer(vertices);\n        context[\"normal_buffer\"]-&gt;setBuffer(normals);\n        context[\"index_buffer\"]-&gt;setBuffer(faces);\n        context[\"texcoord_buffer\"]-&gt;setBuffer(tbuffer);\n        context[\"material_buffer\"]-&gt;setBuffer(materials);\n\n\n        Group group = createSingleGeometryGroup(meshIntersectProgram, meshBboxProgram, vertexMap,\n            normalMap, faceMap, materialsMap, matl);\n\n        context[\"top_object\"]-&gt;set(group);\n        context[\"top_shadower\"]-&gt;set(group);\n\n        vertices-&gt;unmap();\n        normals-&gt;unmap();\n        faces-&gt;unmap();\n        materials-&gt;unmap();\n    }\n\n    return 0;\n}\nreturn 1;\n}\n</code></pre>\n\n<p>And the relevant function for creating the geometries and filling the buffers:</p>\n\n<pre><code>Group createSingleGeometryGroup(Program meshIntersectProgram, Program meshBboxProgram, optix::float3 *vertexMap,\noptix::float3 *normalMap, optix::uint3 *faceMap, unsigned int *materialsMap, Material matl) {\n\nGroup group = context-&gt;createGroup();\noptix::Acceleration accel = context-&gt;createAcceleration(\"Trbvh\");\ngroup-&gt;setAcceleration(accel);\nstd::vector&lt;GeometryInstance&gt; gis;\nunsigned int vertexOffset = 0u;\nunsigned int faceOffset = 0u;\n\nfor (unsigned int m = 0; m &lt; scene-&gt;mNumMeshes; m++) {\n    aiMesh *mesh = scene-&gt;mMeshes[m];\n    if (!mesh-&gt;HasPositions()) {\n        throw std::runtime_error(\"Mesh contains zero vertex positions\");\n    }\n    if (!mesh-&gt;HasNormals()) {\n        throw std::runtime_error(\"Mesh contains zero vertex normals\");\n    }\n\n    printf(\"Mesh #%d\\n\\tNumVertices: %d\\n\\tNumFaces: %d\\n\", m, mesh-&gt;mNumVertices, mesh-&gt;mNumFaces);\n\n    // add points           \n    for (unsigned int i = 0u; i &lt; mesh-&gt;mNumVertices; i++) {\n        aiVector3D pos = mesh-&gt;mVertices[i];\n        aiVector3D norm = mesh-&gt;mNormals[i];\n\n        vertexMap[i + vertexOffset] = optix::make_float3(pos.x, pos.y, pos.z) + aabb.center();\n        normalMap[i + vertexOffset] = optix::normalize(optix::make_float3(norm.x, norm.y, norm.z));\n        materialsMap[i + vertexOffset] = 0u;\n\n    }\n\n    // add faces\n    for (unsigned int i = 0u; i &lt; mesh-&gt;mNumFaces; i++) {\n        aiFace face = mesh-&gt;mFaces[i];\n\n        // add triangles\n        if (face.mNumIndices == 3) {\n            faceMap[i + faceOffset] = optix::make_uint3(face.mIndices[0], face.mIndices[1], face.mIndices[2]);\n        }\n        else {\n            printf(\"face indices != 3\\n\");\n            faceMap[i + faceOffset] = optix::make_uint3(-1);\n        }\n    }\n\n    // create geometry\n    optix::Geometry geometry = context-&gt;createGeometry();\n    geometry-&gt;setPrimitiveCount(mesh-&gt;mNumFaces);\n    geometry-&gt;setIntersectionProgram(meshIntersectProgram);\n    geometry-&gt;setBoundingBoxProgram(meshBboxProgram);\n    geometry-&gt;setPrimitiveIndexOffset(faceOffset);\n\n    optix::GeometryInstance gi = context-&gt;createGeometryInstance(geometry, &amp;matl, &amp;matl + 1);\n    gis.push_back(gi);\n\n    vertexOffset += mesh-&gt;mNumVertices;\n    faceOffset += mesh-&gt;mNumFaces;\n\n}\n\nprintf(\"VertexOffset: %d\\nFaceOffset: %d\\n\", vertexOffset, faceOffset);\n\n// add all geometry instances to a geometry group\nGeometryGroup gg = context-&gt;createGeometryGroup();\ngg-&gt;setChildCount(static_cast&lt;unsigned int&gt;(gis.size()));\nfor (unsigned i = 0u; i &lt; gis.size(); i++) {\n    gg-&gt;setChild(i, gis[i]);\n}\nAcceleration a = context-&gt;createAcceleration(\"Trbvh\");\ngg-&gt;setAcceleration(a);\n\ngroup-&gt;setChildCount(1);\ngroup-&gt;setChild(0, gg);\n\nreturn group;\n}\n</code></pre>\n\n<p>Running the above code on a sample file from assimp (using the dwarf.x, file contains 2 meshes) yields this result:<a href=\"https://i.stack.imgur.com/KP15S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KP15S.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can see only part of the second mesh (the dwarf's body) is rendered.  I tried rendering each mesh separately, one at a time, and they render in full.  But when putting them together I get this.</p>\n\n<p>I'm thinking the issue is either with creating the geometry, perhaps I have these lines wrong:</p>\n\n<pre><code>geometry-&gt;setPrimitiveCount(mesh-&gt;mNumFaces);\ngeometry-&gt;setPrimitiveIndexOffset(faceOffset);\n</code></pre>\n\n<p>or the assimp postprocessing flags </p>\n\n<pre><code>    scene = importer.ReadFile(\n    path,\n    aiProcess_Triangulate\n    //| aiProcess_JoinIdenticalVertices\n    | aiProcess_SortByPType\n    | aiProcess_ValidateDataStructure\n    | aiProcess_SplitLargeMeshes\n    | aiProcess_FixInfacingNormals\n    );\n</code></pre>\n\n<p>(note above, I had to comment out JoinIdenticalVertices because it gave me a horribly wrong result shown below):\n<a href=\"https://i.stack.imgur.com/AGHdu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AGHdu.png\" alt=\"enter image description here\"></a></p>\n\n<p>Has anyone been able to successfully combine nvidia optix with open asset import library for rendering files with multiple meshes?</p>\n"}, {"tags": ["c++", "opengl"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8160731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed6eff4a547c34ad4a57d381e822d948?s=128&d=identicon&r=PG&f=1", "display_name": "Francis King", "link": "https://stackoverflow.com/users/8160731/francis-king"}, "edited": false, "score": 0, "creation_date": 1497627624, "post_id": 44547573, "comment_id": 76174067, "body": "Thank you. I now have the following linker data in Visual Studio 2015: glfw3.lib;glfw3dll.lib;opengl32.lib;%(AdditionalDependencies&zwnj;&#8203;). The above example compiles and links OK (so do I need to bring in FreeGLUT at all)?"}, {"owner": {"reputation": 3, "user_id": 8160731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed6eff4a547c34ad4a57d381e822d948?s=128&d=identicon&r=PG&f=1", "display_name": "Francis King", "link": "https://stackoverflow.com/users/8160731/francis-king"}, "edited": false, "score": 0, "creation_date": 1497627841, "post_id": 44547573, "comment_id": 76174233, "body": "If I add new lines of code, such as glClearColor, that works OK as well. If I add glShaderSource, it compiles but does not link that function, or others like it. I&#39;ve used the same link libraries. Have I missed a library?"}, {"owner": {"reputation": 7060, "user_id": 105466, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jMWs6.png?s=128&g=1", "display_name": "SurvivalMachine", "link": "https://stackoverflow.com/users/105466/survivalmachine"}, "reply_to_user": {"reputation": 3, "user_id": 8160731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed6eff4a547c34ad4a57d381e822d948?s=128&d=identicon&r=PG&f=1", "display_name": "Francis King", "link": "https://stackoverflow.com/users/8160731/francis-king"}, "edited": false, "score": 0, "creation_date": 1497630692, "post_id": 44547573, "comment_id": 76175761, "body": "@FrancisKing You&#39;ll need to use an OpenGL function loader for most functions. There are many loaders to choose from, like glew, glxw, gl3w or glLoadGen."}], "tags": [], "owner": {"reputation": 7060, "user_id": 105466, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jMWs6.png?s=128&g=1", "display_name": "SurvivalMachine", "link": "https://stackoverflow.com/users/105466/survivalmachine"}, "is_accepted": true, "score": 1, "last_activity_date": 1497450402, "creation_date": 1497450402, "answer_id": 44547573, "question_id": 44546703, "link": "https://stackoverflow.com/questions/44546703/why-do-i-need-freeglut-to-compile-and-link-a-glfw-program/44547573#44547573", "title": "Why do I need FreeGLUT to compile and link a GLFW program", "body": "<p><code>glGetString</code> is an OpenGL function, not a GLU function. To link with it, you must link with <code>OpenGL32.lib</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 8160731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed6eff4a547c34ad4a57d381e822d948?s=128&d=identicon&r=PG&f=1", "display_name": "Francis King", "link": "https://stackoverflow.com/users/8160731/francis-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 44547573, "answer_count": 1, "score": 0, "last_activity_date": 1497450402, "creation_date": 1497448118, "question_id": 44546703, "link": "https://stackoverflow.com/questions/44546703/why-do-i-need-freeglut-to-compile-and-link-a-glfw-program", "title": "Why do I need FreeGLUT to compile and link a GLFW program", "body": "<p>I have compiled and linked a simple OpenGL program. It is a C++ console program, which prints the version number. It works, but I don't understand why it works. Please can you help me to understand it.</p>\n\n<p>I have linked in both the GLFW and FreeGLUT libraries. I thought that these were alternative toolkits. However, if I take out the FreeGLUT library, glGetString doesn't link anymore.</p>\n\n<p>Are they alternative toolkits? Why do I need to link in FreeGLUT? Am I missing a library which I should link instead?</p>\n\n<pre><code>// GLVersion.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n#include \"glfw3.h\"\n#include \"glfw3native.h\"\n#include \"freeglut.h\"\n#include \"glut.h\"\n\n\nint main(int argc, char**argv)\n{\n    const GLubyte *Vstr;\n    glfwInit();\n    GLFWwindow* mywindow = glfwCreateWindow(800,600,\"GLFW\",NULL,NULL);\n    glfwMakeContextCurrent(mywindow);\n\n    Vstr = glGetString(GL_VERSION);\n    fprintf(stderr, \"Your OpenGL version is %s\\n\", Vstr);\n\n    getchar();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "get", "set", "singleton"], "answers": [{"comments": [{"owner": {"reputation": 2717, "user_id": 4118839, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/39c45fd39e412f1a0636033f4878c472?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Developer", "link": "https://stackoverflow.com/users/4118839/mr-developer"}, "edited": false, "score": 0, "creation_date": 1497448229, "post_id": 44546737, "comment_id": 76084051, "body": "error: undefined reference to &#39;Singleton::singletonInstance&#39;, maybe I should rewrite singleton class ?"}, {"owner": {"reputation": 2717, "user_id": 4118839, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/39c45fd39e412f1a0636033f4878c472?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Developer", "link": "https://stackoverflow.com/users/4118839/mr-developer"}, "edited": false, "score": 0, "creation_date": 1497448295, "post_id": 44546737, "comment_id": 76084114, "body": "getSingletonInstance @Some programmer dude"}, {"owner": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "reply_to_user": {"reputation": 2717, "user_id": 4118839, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/39c45fd39e412f1a0636033f4878c472?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Developer", "link": "https://stackoverflow.com/users/4118839/mr-developer"}, "edited": false, "score": 0, "creation_date": 1497448336, "post_id": 44546737, "comment_id": 76084147, "body": "@Mr.Developer You will have to define <code>Singleton Singleton::*singletonInstance = nullptr</code> in your source somewhere , I guess"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 2717, "user_id": 4118839, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/39c45fd39e412f1a0636033f4878c472?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Developer", "link": "https://stackoverflow.com/users/4118839/mr-developer"}, "edited": false, "score": 0, "creation_date": 1497448356, "post_id": 44546737, "comment_id": 76084162, "body": "@Mr.Developer That&#39;s a problem for another question actually. And that question have been answered <i>many</i> times . <a href=\"https://stackoverflow.com/questions/272900/undefined-reference-to-static-class-member\">For example here</a>."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1497448437, "post_id": 44546737, "comment_id": 76084234, "body": "@P0W: It should be: <code>Singleton Singleton::singletonInstance = nullptr;</code> without the <code>*</code>. You have to define that after your class in your <code>class.cpp</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1497448518, "post_id": 44546737, "comment_id": 76084301, "body": "@AndreKampling No the instance variable is declared as a pointer so the definition needs to be one too. But the asterisk should be moved."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 1, "creation_date": 1497448676, "post_id": 44546737, "comment_id": 76084432, "body": "@Someprogrammerdude: Yeah you&#39;re right. Where was my head...? It has to be: <code>Singleton* Singleton::singletonInstance = nullptr;</code>"}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "reply_to_user": {"reputation": 2717, "user_id": 4118839, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/39c45fd39e412f1a0636033f4878c472?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Developer", "link": "https://stackoverflow.com/users/4118839/mr-developer"}, "edited": false, "score": 0, "creation_date": 1497448931, "post_id": 44546737, "comment_id": 76084652, "body": "@Mr.Developer: You have to define your static variable additionally after the class like this: <code>class Singleton { ... }; Singleton* Singleton::singletonInstance = nullptr;</code>"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1497448232, "last_edit_date": 1497448232, "creation_date": 1497448191, "answer_id": 44546737, "question_id": 44546672, "link": "https://stackoverflow.com/questions/44546672/set-and-get-singleton-variables-from-and-in-another-class-with-c-qt-creator/44546737#44546737", "title": "Set and get Singleton variables from and in another class with c++ / QT creator", "body": "<p>The symbol <code>Singleton</code> is not an object, it's a class. For that you have to use the <em>scoping operator</em> <code>::</code>:</p>\n\n<pre><code>Singleton::getSingletonInstance()-&gt;numero = 10;\n</code></pre>\n"}], "owner": {"reputation": 2717, "user_id": 4118839, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/39c45fd39e412f1a0636033f4878c472?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Developer", "link": "https://stackoverflow.com/users/4118839/mr-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497448232, "creation_date": 1497448051, "last_edit_date": 1592644375, "question_id": 44546672, "link": "https://stackoverflow.com/questions/44546672/set-and-get-singleton-variables-from-and-in-another-class-with-c-qt-creator", "title": "Set and get Singleton variables from and in another class with c++ / QT creator", "body": "<p>im new in c++</p>\n<p>my problem: this is my singleton:</p>\n<pre><code>class Singleton\n{\n    static Singleton *singletonInstance;\n    Singleton() {}\n\n    public:\n    int numero = 0;\n\n    static Singleton* getSingletonInstance()\n    {\n        //std::lock_guard&lt;std::mutex&gt; lock(m_);\n        if(singletonInstance == nullptr)\n        {\n            singletonInstance = new Singleton();\n        }\n        return singletonInstance;\n    }\n};\n</code></pre>\n<p>this is another file .cpp where i set or get the &quot;numero&quot; variable:</p>\n<pre><code>Singleton.getSingletonInstance()-&gt;numero = 10;\n</code></pre>\n<p>I get this error:</p>\n<blockquote>\n<p>error: expected unqualified-id before '.' token</p>\n<p>Singleton.getSingletonInstance()-&gt;numero = 10;</p>\n</blockquote>\n<p>How do to set &quot;numero&quot; variable and get/set the numero from sigleton in/from other class .cpp ?\nMy target is use this singleton. I'm new in c++.\nWhere I wrong ?\nThanks</p>\n"}, {"tags": ["c++", "c++11", "templates", "tuples", "variadic-templates"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1497448359, "post_id": 44546653, "comment_id": 76084165, "body": "<a href=\"https://wandbox.org/permlink/5OQxzfsaPQB7yiIJ\" rel=\"nofollow noreferrer\">Cannot reproduce</a>. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 99, "user_id": 6850713, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a7d09c6d517a37853faa0200f8617bf1?s=128&d=identicon&r=PG&f=1", "display_name": "MrBZapp", "link": "https://stackoverflow.com/users/6850713/mrbzapp"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1497449654, "post_id": 44546653, "comment_id": 76085172, "body": "You&#39;ll get the referred to errors by switching the compiler to <a href=\"https://wandbox.org/permlink/LMYiXKv8nYhoYZsi\" rel=\"nofollow noreferrer\">use C++11</a> I take it getting by type isn&#39;t implemented till 14..."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1497451207, "creation_date": 1497451207, "answer_id": 44547888, "question_id": 44546653, "link": "https://stackoverflow.com/questions/44546653/compile-error-tuple-of-maps-getting-elements-by-map-type/44547888#44547888", "title": "compile error tuple of maps getting elements by map type", "body": "<p><code>std::get&lt;type&gt;</code> was added to C++ in C++14.  In C++11 you could only use <code>std::get&lt;index&gt;</code>.</p>\n\n<p>You will either have to compile with C++14 enabled or write your own version of <code>get</code> if you have to use C++11</p>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 2, "last_activity_date": 1497452432, "creation_date": 1497452432, "answer_id": 44548342, "question_id": 44546653, "link": "https://stackoverflow.com/questions/44546653/compile-error-tuple-of-maps-getting-elements-by-map-type/44548342#44548342", "title": "compile error tuple of maps getting elements by map type", "body": "<p>As explained by NathanOlivier, <code>get&lt;type&gt;(tupleValue)</code> is a C++14 feature.</p>\n\n<p>If you use a C++11 compiler, a solution can be to write a type traits to select the index of a type in a list.</p>\n\n<p>By example</p>\n\n<pre><code>template &lt;typename T, typename T0, typename ... Ts&gt;\nstruct getI \n { static constexpr std::size_t value { 1U + getI&lt;T, Ts...&gt;::value }; };\n\ntemplate &lt;typename T, typename ... Ts&gt;\nstruct getI&lt;T, T, Ts...&gt;\n { static constexpr std::size_t value { 0U }; };\n</code></pre>\n\n<p>So you can write your <code>getMap&lt;type&gt;()</code> methods as follows</p>\n\n<pre><code>   template &lt;typename T&gt;\n   MapType&lt;T&gt; &amp; getMap ()\n    { return std::get&lt;getI&lt;T, ValueTypes...&gt;::value&gt;(member_tuple); }\n\n   template &lt;typename T&gt;\n   MapType&lt;T&gt; const &amp; getMap () const\n    { return std::get&lt;getI&lt;T, ValueTypes...&gt;::value&gt;(member_tuple); }\n</code></pre>\n\n<p>The following is a full working example</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename T, typename T0, typename ... Ts&gt;\nstruct getI \n { static constexpr std::size_t value { 1U + getI&lt;T, Ts...&gt;::value }; };\n\ntemplate &lt;typename T, typename ... Ts&gt;\nstruct getI&lt;T, T, Ts...&gt;\n { static constexpr std::size_t value { 0U }; };\n\ntemplate &lt;typename KeyType, typename ... ValueTypes&gt;\nstruct TupleMaps\n {\n   template&lt;typename T&gt;\n   using MapType = std::map&lt;KeyType, T&gt;;\n\n   std::tuple&lt;MapType&lt;ValueTypes&gt;...&gt; member_tuple;\n\n   template &lt;typename T&gt;\n   MapType&lt;T&gt; &amp; getMap ()\n    { return std::get&lt;getI&lt;T, ValueTypes...&gt;::value&gt;(member_tuple); }\n\n   template &lt;typename T&gt;\n   MapType&lt;T&gt; const &amp; getMap () const\n    { return std::get&lt;getI&lt;T, ValueTypes...&gt;::value&gt;(member_tuple); }\n };\n\nint main ()\n {\n   TupleMaps&lt;int, float, std::string&gt; maps;\n\n   std::cout &lt;&lt; maps.getMap&lt;float&gt;().size() &lt;&lt; std::endl; // print 0\n\n   maps.getMap&lt;float&gt;()[3] = 7.5;\n\n   std::cout &lt;&lt; maps.getMap&lt;float&gt;().size() &lt;&lt; std::endl; // print 1\n }\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 6850713, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a7d09c6d517a37853faa0200f8617bf1?s=128&d=identicon&r=PG&f=1", "display_name": "MrBZapp", "link": "https://stackoverflow.com/users/6850713/mrbzapp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 44548342, "answer_count": 2, "score": 2, "last_activity_date": 1497452510, "creation_date": 1497447995, "last_edit_date": 1497452510, "question_id": 44546653, "link": "https://stackoverflow.com/questions/44546653/compile-error-tuple-of-maps-getting-elements-by-map-type", "title": "compile error tuple of maps getting elements by map type", "body": "<p>I have a <code>std::tuple</code> of <code>std::map</code> containers that is defined by a variadic template like so:</p>\n\n<pre><code>template &lt;typename KeyType, typename... ValueTypes&gt;\nclass TupleMaps\n{\npublic:\n    template&lt;typename T&gt;\n    using MapType = std::map&lt;KeyType, T&gt;;\n\n    std::tuple&lt;MapType&lt;ValueTypes&gt;...&gt; member_tuple;\n}\n</code></pre>\n\n<p>I want to get the appropriate map from the tuple by its value type and I thought I could implement a member function such as: </p>\n\n<pre><code>MapType&lt;ValueType&gt;&amp; getMap() { std::get&lt;MapType&lt;ValueType&gt;&gt;(member_tuple); }\n</code></pre>\n\n<p>but was stopped when attempting to put together something like</p>\n\n<pre><code>TupleMaps&lt;int, float, std::string&gt; maps;\nif (maps.getMap&lt;float&gt;().size() !=0) { ... };\n</code></pre>\n\n<p>by the compiler error <code>\"no matching function for call to get()\"</code>.</p>\n\n<p>What is the appropriate way to extract the correct element from a tuple by type in this case?</p>\n"}, {"tags": ["c++", "atomic"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497447815, "post_id": 44546545, "comment_id": 76083697, "body": "Who told you that <code>std::atomic</code> is specialized for <code>double</code>?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1497448040, "post_id": 44546545, "comment_id": 76083897, "body": "It is, but <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic_fetch_add\" rel=\"nofollow noreferrer\">none of the overloads take a double</a>"}, {"owner": {"reputation": 15, "user_id": 3506925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ce4dab2316576e902d49ecc26cb2d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jaber", "link": "https://stackoverflow.com/users/3506925/jaber"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497448076, "post_id": 44546545, "comment_id": 76083920, "body": "@Slava I didn&#39;t see anywhere that I can&#39;t use it for <code>double</code>!"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1497448490, "post_id": 44546545, "comment_id": 76084279, "body": "@Jaber <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/atomic/atomic</a> - types explicitly listed for which <code>std::atomic</code> is fully or partially specialized, <code>double</code> is not in the list."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 3506925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ce4dab2316576e902d49ecc26cb2d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jaber", "link": "https://stackoverflow.com/users/3506925/jaber"}, "edited": false, "score": 0, "creation_date": 1497449367, "post_id": 44546989, "comment_id": 76084962, "body": "Do you know any library which implemented atomic arithmetic for non-integral types?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 15, "user_id": 3506925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ce4dab2316576e902d49ecc26cb2d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jaber", "link": "https://stackoverflow.com/users/3506925/jaber"}, "edited": false, "score": 1, "creation_date": 1497449693, "post_id": 44546989, "comment_id": 76085214, "body": "@Jaber, no never needed such beast, I use mutex - premature optimization is root of all evil."}, {"owner": {"reputation": 15, "user_id": 3506925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ce4dab2316576e902d49ecc26cb2d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jaber", "link": "https://stackoverflow.com/users/3506925/jaber"}, "edited": false, "score": 2, "creation_date": 1497450462, "post_id": 44546989, "comment_id": 76085802, "body": "to clarify your answer: <code>double</code> is supported for basic atomic operations like (<code>load</code>, <code>store</code>, etc); but isn&#39;t supported for specialized operations (like arithmetic <code>+</code>, <code>-</code>, ...) as stated <a href=\"https://stackoverflow.com/questions/30048533/why-isnt-atomic-double-fully-implemented/30050429#30050429\">here</a>."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 1, "last_activity_date": 1497448818, "creation_date": 1497448818, "answer_id": 44546989, "question_id": 44546545, "link": "https://stackoverflow.com/questions/44546545/unresolved-external-symbol-stdatomic-fetch-add/44546989#44546989", "title": "unresolved external symbol &quot;std::atomic_fetch_add&quot;", "body": "<p>As stated in <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>The standard library provides specializations of the std::atomic template for the following types:</p>\n</blockquote>\n\n<p>and <code>double</code> is not in the list. There is also note for non member functions:</p>\n\n<blockquote>\n  <p>There are non-member function template equivalents for all member\n  functions of std::atomic. Those non-member functions may be\n  additionally overloaded for types that are not specializations of\n  std::atomic, but are able to guarantee atomicity. <strong>The only such type\n  in the standard library is std::shared_ptr</strong>.</p>\n</blockquote>\n\n<p>So <code>double</code> is not supported.</p>\n"}], "owner": {"reputation": 15, "user_id": 3506925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ce4dab2316576e902d49ecc26cb2d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jaber", "link": "https://stackoverflow.com/users/3506925/jaber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "accepted_answer_id": 44546989, "answer_count": 1, "score": 0, "last_activity_date": 1497448818, "creation_date": 1497447692, "last_edit_date": 1497447953, "question_id": 44546545, "link": "https://stackoverflow.com/questions/44546545/unresolved-external-symbol-stdatomic-fetch-add", "title": "unresolved external symbol &quot;std::atomic_fetch_add&quot;", "body": "<p>Consider this simple code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;atomic&gt;\n\nvoid add(std::atomic&lt;double&gt; &amp; a, double c)\n{\n    std::atomic_fetch_add(&amp;a, c);\n}\n\nint main()\n{\n    std::atomic&lt;double&gt; a;\n\n    a.store(0);\n    std::cout &lt;&lt; a.load() &lt;&lt; std::endl;\n\n    add(a, 5.0);\n    std::cout &lt;&lt; a.load() &lt;&lt; std::endl;\n\n    std::cin.get();\n}\n</code></pre>\n\n<p>Compiling it will result in:</p>\n\n<blockquote>\n  <p>error LNK2019: unresolved external symbol \"double __cdecl std::atomic_fetch_add(struct std::atomic *,double)\" (??$atomic_fetch_add@N@std@@YANPAU?$atomic@N@0@N@Z) referenced in function \"void __cdecl add(struct std::atomic &amp;,double)\" (?add@@YAXAAU?$atomic@N@std@@N@Z)</p>\n</blockquote>\n\n<p>According to <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic_fetch_add\" rel=\"nofollow noreferrer\">this</a>, <code>atomic_fetch_add</code> is defined in <code>&lt;atomic&gt;</code>, so what is happening?</p>\n"}, {"tags": ["c++", "visual-studio-2015", "mfc"], "comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1497448720, "post_id": 44546434, "comment_id": 76084469, "body": "The problem is that the edit controls will loose focus when the buttons are pressed. Commenters of your previous question already gave some suggestion how to solve this. Another idea: replace the buttons by static controls that have the <code>SS_NOTIFY</code> style. Statics don&#39;t receive focus by default."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1497448742, "post_id": 44546434, "comment_id": 76084488, "body": "Simulating keyboard events is the probably the wrong way to go here. Which problem are you <i>actually</i> trying to resolve? This looks like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>"}], "answers": [{"comments": [{"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1497450363, "post_id": 44547267, "comment_id": 76085733, "body": "I forgot to say that the windows headers will select the right version of WM_CHAR, either WM_CHARA, or WM_CHARW depending on your app&#39;s UNICODE setting."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6167676"}, "edited": false, "score": 0, "creation_date": 1497451170, "post_id": 44547267, "comment_id": 76086324, "body": "Thank you for your detailed response! Is there a way to implement your <code>PostMessage</code> approach but to not necessarily tie it to a specific edit control? In other words, I want to send the <code>X</code> when I press the X key only to that edit control which happens to be in focus."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1497451898, "post_id": 44547267, "comment_id": 76086870, "body": "Sure, but it gets a bit more complicated, as your button will gain focus, as soon as you click on it.  You&#39;d have to create handlers for EN_SETFOCUS for eeach of your edit boxes, and add a CWnd* data member to keep track of the last edit box that had focus."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1497452113, "post_id": 44547267, "comment_id": 76087021, "body": "See answer for details."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6167676"}, "edited": false, "score": 0, "creation_date": 1497452463, "post_id": 44547267, "comment_id": 76087285, "body": "So, if I understand correctly, I will store the last focused dialog in <code>m_pWndLastFocus</code> and when the key X is pressed then I will have it fetch that <code>m_pWndLastFocus</code> so that it can write to it, correct?"}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1497452701, "post_id": 44547267, "comment_id": 76087440, "body": "Not write to it, but post it a message.  But that&#39;s the idea, yes.  Do not call delete on the pointer, since it holds an address to a member of your class, and not to a dynamic block of memory.  Correction. Not the last dialog, but the last focused edit control."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1497453072, "post_id": 44547267, "comment_id": 76087726, "body": "@nk-fford Here&#39;s a neat idea:  you could try to set the focus back to your edit box after the click."}], "tags": [], "owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "is_accepted": true, "score": 1, "last_activity_date": 1497452092, "last_edit_date": 1497452092, "creation_date": 1497449558, "answer_id": 44547267, "question_id": 44546434, "link": "https://stackoverflow.com/questions/44546434/simulate-keyboard-input-inside-app-in-c-mfc-app/44547267#44547267", "title": "Simulate keyboard input inside app in C++ MFC app", "body": "<p>The characters are sent from the OS to the edit controls using the WM_CHAR message.  </p>\n\n<p>In reality it is a bit more complex than that, but you do not need to emulate the entire WM_KEYUP WM_KEYDOWN message sequence, since its end result is to generate a WM_CHAR message.</p>\n\n<p>You can use CWnd::PostMessage to send characters directly to your edit controls, even when they do not have the focus.</p>\n\n<p>You have probably already found the documentation for WM_CHAR here: <a href=\"https://msdn.microsoft.com/fr-fr/library/windows/desktop/ms646276(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/fr-fr/library/windows/desktop/ms646276(v=vs.85).aspx</a></p>\n\n<p>oops.. excuse my french, ths english doc is here\n<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646276(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms646276(v=vs.85).aspx</a></p>\n\n<p>(just changing the fr-fr to en-us does the trick, it probably works for all other languages, neat!</p>\n\n<ul>\n<li><p><em>wParam</em> holds the character you want to send.  Either an plain ASCII character, or one of the VK_ constants... I suggest you use the unicode version WM_CHARW, as most windows software uses unicode nowadays.  The notation for wide chars is either L'X' or _T('X'), the unicode (UTF-16) character type is wchar_t. </p></li>\n<li><p><em>lParam</em> contains other keystroke details, 0 should be fine for what you want to do.</p></li>\n</ul>\n\n<p>to send X, simply call</p>\n\n<pre><code> m_editControlA.PostMessage(WM_CHAR, _T('X'));  \n</code></pre>\n\n<p>When using the _T() notation, the character (or string) literal between the parenthesis will be automatically converted to the right character width for your app's unicode setting (you should set that to UNICODE, since that's what the OS is using, and is also the only valid encoding for Windows CE, for example, and you should get used to manipulating this type.</p>\n\n<p>the _T() macros and _t* overrides for almost all C library functions operating on strings are defined in tchar.h, which is included by Visual Studio in stdafx.h.  Under MFC, you'll mostly use CString, but it's good to know where these things are.</p>\n\n<p>[EDIT] When you get that running, you should start playing with WM_KEYDOWN.  You will discover that PostMessage(WM_CHAR, VK_ESCAPE) directly to your dialog does not close it, while a PostMessage(WM_KEYDOWN, VK_ESCAPE) does. And that m_editBox.PostMessage(WM_KEYDOWN, _T('X')) will send a lower key 'x' to your edit box. But that's another topic to ivestigate.</p>\n\n<p>Have fun with MFC!</p>\n\n<p>For your last question:</p>\n\n<p>Sure, but it gets a bit more complicated, as your button will gain focus, as soon as you click on it.  You'd have to create handlers for EN_SETFOCUS for eeach of your edit boxes, and add a CWnd* data member to keep track of the last edit box that had focus.</p>\n\n<p>Your EN_SETFOCUS handlers should look something like this</p>\n\n<pre><code>void CdlgDlg::OnEnSetfocusEdit1()\n{ \n    m_pWndLastFocus = &amp;m_edit1;\n}\n</code></pre>\n\n<p>Don't forget to set the pointer to NULL in your constructor and to chjeck it's valid before calling <code>m_pWndLastFocus-&gt;PostMessage()</code> though.</p>\n"}, {"tags": [], "owner": {"reputation": 1970, "user_id": 5646176, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lmKVM.jpg?s=128&g=1", "display_name": "RonTLV", "link": "https://stackoverflow.com/users/5646176/rontlv"}, "is_accepted": false, "score": 0, "last_activity_date": 1497853713, "creation_date": 1497853713, "answer_id": 44623562, "question_id": 44546434, "link": "https://stackoverflow.com/questions/44546434/simulate-keyboard-input-inside-app-in-c-mfc-app/44623562#44623562", "title": "Simulate keyboard input inside app in C++ MFC app", "body": "<p>The way to synthesize input in MFC is by using the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms646310(v=vs.85).aspx\" rel=\"nofollow noreferrer\">SendInput</a> method.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6167676"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "accepted_answer_id": 44547267, "answer_count": 2, "score": 1, "last_activity_date": 1497853713, "creation_date": 1497447426, "question_id": 44546434, "link": "https://stackoverflow.com/questions/44546434/simulate-keyboard-input-inside-app-in-c-mfc-app", "title": "Simulate keyboard input inside app in C++ MFC app", "body": "<p>I created a dialog <code>MainDialog.cpp</code> with <strong>2 edit controls</strong> whose IDs are <code>IDC_EDITCONTROL_A</code> and <code>IDC_EDITCONTROL_B</code>, and have variables defined as <code>m_editControlA</code> and <code>m_editControlB</code>, respectively. </p>\n\n<p>Also, I have <strong>2 buttons</strong> whose IDs are <code>IDC_MFCBUTTON_KEY_X</code> and <code>IDC_MFCBUTTON_KEY_Y</code>, and variables are <code>m_buttonKeyX</code> and <code>m_buttonKeyY</code>, respectively.</p>\n\n<p>Below is the code in the source file</p>\n\n<pre><code>#include \"afxdialogex.h\" \n\nIMPLEMENT_DYNAMIC(CMainDialog, CDialogEx)\n\nCMainDialog::CMainDialog(CWnd* pParent): CDialogEx(IDD_MAIN_DIALOG, pParent)\n{\n}\n\nCMainDialog::~CMainDialog()\n{\n}\n\nvoid CMainDialog::DoDataExchange(CDataExchange* pDX)\n{\n    CDialogEx::DoDataExchange(pDX);\n\n    DDX_Control(pDX, IDC_EDITCONTROL_A, m_editControlA);\n    DDX_Control(pDX, IDC_EDITCONTROL_B, m_editControlB);\n    DDX(Control(pDX, IDC_MFCBUTTON_KEY_X, m_buttonKeyX);\n    DDX(Control(pDX, IDC_MFCBUTTON_KEY_Y, m_buttonKeyY);\n}\n\nBEGIN_MESSAGE_MAP(CMainDialog, CDialogEx)\n    ON_EN_CHANGE(IDC_EDITCONTROL, &amp;CMainDialog::OnEnChangeEditA)\n    ON_BN_CLICKED(IDC_MFCBUTTON_KEY_X, &amp;CMainDialog::OnBnClickedButtonX)\n    ON_BN_CLICKED(IDC_MFCBUTTON_KEY_Y, &amp;CMainDialog::OnBnClickedButtonY)\nEND_MESSAGE_MAP()\n\nvoid CMainDialog::OnBnClickedButtonX()\n{\n    m_editControlA.SetWindowTextW(_T(\"X\"));  // test\n}\n\nvoid CMainDialog::OnBnClickedButtonX()\n{\n    m_editControlA.SetWindowTextW(_T(\"Y\"));  // test\n}\n</code></pre>\n\n<p>I am trying to understand how I can have each button <strong>send</strong> their respective character (i.e. <code>X</code> or <code>Y</code> in this example) to the selected edit control <em>if one is selected</em>. Essentially, I would like to <strong>simulate keyboard input</strong>.</p>\n\n<p>I have read the docs about <a href=\"https://docs.microsoft.com/en-us/dotnet/framework/winforms/how-to-simulate-mouse-and-keyboard-events-in-code\" rel=\"nofollow noreferrer\">how to simulate keyboard events</a> and also the <a href=\"https://msdn.microsoft.com/en-us/library/t64sseb3.aspx\" rel=\"nofollow noreferrer\">sendMessage</a> but I could not understand how to implement it since my C++ knowledge is very basic. Also, following my <a href=\"https://stackoverflow.com/questions/44440361/create-your-own-keyboard-in-c-mfc-app\">previous question</a> I have found that the <code>GetFocus</code> would be useful but still my main issue currently is sending the input.</p>\n\n<p>Any example code or useful link could be very useful for me to learn how I can simulate a keyboard input inside an app.</p>\n"}, {"tags": ["c++", "openssl", "digital-signature"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1497475649, "post_id": 44546272, "comment_id": 76100379, "body": "Also see <a href=\"https://wiki.openssl.org/index.php/EVP_Signing_and_Verifying\" rel=\"nofollow noreferrer\">EVP Signing and Verifying</a> on the OpenSSL wiki."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1497693511, "post_id": 44546272, "comment_id": 76193668, "body": "A signature doesn&#39;t require salt as input. PSS is not deterministic so it requires random values to operate, is that what you mean? Padding is performed before modular exponentiation for RSA, it&#39;s not something that you need to encode. Both the randomization and padding are performed <i>internally</i> by the signature algorithm. To me it is totally unclear what you are trying to achieve, but maybe that&#39;s because of <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">the XY problem</a>."}, {"owner": {"reputation": 63, "user_id": 2427860, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bb3976f9e39a6b8899f3de765f7627b?s=128&d=identicon&r=PG", "display_name": "user2427860", "link": "https://stackoverflow.com/users/2427860/user2427860"}, "edited": false, "score": 0, "creation_date": 1497958760, "post_id": 44546272, "comment_id": 76289081, "body": "Hi Maarten, Thanks for yout answer. I wasn&#39;t aware of <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">the XY problem</a>. My problem X is I want to implement RSA signature with padding and salt. my solution Y is the code I posted, which implement only RSA (whitout padding and salt). As you said &quot;padding are performed internally by the signature algorithm&quot; so I was looking for the options to pass so the RSA is caculated with the padding and salt. I just found the solution and will post it."}], "answers": [{"comments": [{"owner": {"reputation": 498, "user_id": 162711, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-E_2x6o2w59c/AAAAAAAAAAI/AAAAAAAAAWg/_KwSrOfRScA/photo.jpg?sz=128", "display_name": "Janos", "link": "https://stackoverflow.com/users/162711/janos"}, "edited": false, "score": 0, "creation_date": 1614969689, "post_id": 44652152, "comment_id": 117557060, "body": "It doesn&#39;t make sense to me to verify using the same private key <code>pkey</code> as for signing."}], "tags": [], "owner": {"reputation": 63, "user_id": 2427860, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bb3976f9e39a6b8899f3de765f7627b?s=128&d=identicon&r=PG", "display_name": "user2427860", "link": "https://stackoverflow.com/users/2427860/user2427860"}, "is_accepted": false, "score": 2, "last_activity_date": 1497959059, "creation_date": 1497959059, "answer_id": 44652152, "question_id": 44546272, "link": "https://stackoverflow.com/questions/44546272/activate-padding-and-salt/44652152#44652152", "title": "Activate padding and salt", "body": "<p>I just found the solution in the OpenSSL forum :</p>\n\n<pre><code>unsigned char * signData( EVP_PKEY * pkey, const EVP_MD * htype, char * data, int data_len, int * sig_len, int padding, int salt ) \n{\n    unsigned int signature_l;\n    unsigned char signature[512]; \n    int res;\n    EVP_MD_CTX* verif_ctx = EVP_MD_CTX_create(); \n    EVP_MD_CTX* md_ctx = EVP_MD_CTX_create(); \n    EVP_PKEY_CTX* keygen_ctx = EVP_PKEY_CTX_new(pkey, NULL); \n    /* signing */ \n    if (EVP_DigestSignInit(md_ctx, &amp;keygen_ctx, EVP_sha512(), NULL, pkey)&lt;1) \n        return 0;\n    if (EVP_PKEY_CTX_set_rsa_padding(keygen_ctx, padding)&lt;1) \n        return 0; \n    if (EVP_PKEY_CTX_set_rsa_pss_saltlen(keygen_ctx, salt)&lt;1) \n        return 0; \n    signature_l = EVP_PKEY_size(pkey); \n\n    if (EVP_DigestSignUpdate(md_ctx, data, data_len)&lt;1) return 0;\n    if (EVP_DigestSignFinal(md_ctx, signature, &amp;signature_l)&lt;1) return 0; \n    /* verifying */     \n    if (EVP_DigestVerifyInit(verif_ctx, &amp;keygen_ctx, EVP_sha512(), NULL, pkey)&lt;1) \n        return 0;\n    if (EVP_PKEY_CTX_set_rsa_padding(verif_ctx-&gt;pctx, padding)&lt;1) \n        return 0;\n    if (EVP_PKEY_CTX_set_rsa_pss_saltlen(verif_ctx-&gt;pctx, salt)&lt;1) \n        return 0;\n    if (EVP_DigestVerifyUpdate(verif_ctx, data, data_len)&lt;1) \n        return 0;\n    res = EVP_DigestVerifyFinal(verif_ctx, signature, signature_l); \n    switch(res) \n    { \n    case 1:printf(\"sig checks out!\\n\"); \n        break; \n    case 0:printf(\"nope nope nope.\\n\"); break; \n    default: return 0;\n    }\n    return signature; \n}\n</code></pre>\n\n<p>hope this might help someone in the future !</p>\n"}], "owner": {"reputation": 63, "user_id": 2427860, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6bb3976f9e39a6b8899f3de765f7627b?s=128&d=identicon&r=PG", "display_name": "user2427860", "link": "https://stackoverflow.com/users/2427860/user2427860"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497959059, "creation_date": 1497446987, "last_edit_date": 1497475605, "question_id": 44546272, "link": "https://stackoverflow.com/questions/44546272/activate-padding-and-salt", "title": "Activate padding and salt", "body": "<p>I am attempting to implement function to sign files using <strong>OpenSSL</strong>, and I need to activate <strong>padding</strong> and <strong>salt</strong>. My signature function is as follow: </p>\n\n<pre><code>unsigned char * sign( EVP_PKEY * pkey, const EVP_MD * htype, char * data, int data_len, int * sig_len ) \n{ \n   EVP_MD_CTX     md_ctx; \n   unsigned char *sig = malloc( EVP_PKEY_size(pkey) ); \n\n\n   *sig_len = EVP_PKEY_size(pkey); \n\n   EVP_SignInit   (&amp;md_ctx, htype); \n   EVP_SignUpdate (&amp;md_ctx, data, data_len); \n\n   if (EVP_SignFinal (&amp;md_ctx, sig, sig_len, pkey) != 1) \n   { \n      free(sig); \n      sig = 0; \n      *sig_len = 0; \n\n      ERR_print_errors_fp(stderr); \n   } \n\n   return sig; \n} \n</code></pre>\n\n<p>Is there any example of how to add padding and salt? \nDoes anyone have any idea that can help resolve this issue? </p>\n"}, {"tags": ["android", "c++", "ios"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8160762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83962ba65166050f586f235b814ecf61?s=128&d=identicon&r=PG", "display_name": "monkeydesign", "link": "https://stackoverflow.com/users/8160762/monkeydesign"}, "edited": false, "score": 1, "creation_date": 1497451377, "post_id": 44546609, "comment_id": 76086479, "body": "Thanks so much on that - this is the way I&#39;ve been leaning, but the person who coded the engine seems very adamant that doing as much in possible in C++ would save us maintenance time in the future.  Someone else told me that this is a well-known &quot;myth&quot; in the programming community, and that in practice it is actually harder.  Appreciate your feedback!"}], "tags": [], "owner": {"reputation": 46, "user_id": 8160570, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1d8b7f91b42c10c52cccd188bb5c42c?s=128&d=identicon&r=PG&f=1", "display_name": "S-L-R", "link": "https://stackoverflow.com/users/8160570/s-l-r"}, "is_accepted": false, "score": 3, "last_activity_date": 1497448387, "last_edit_date": 1497448387, "creation_date": 1497447889, "answer_id": 44546609, "question_id": 44546205, "link": "https://stackoverflow.com/questions/44546205/c-vs-native-implementation-of-ios-android/44546609#44546609", "title": "C++ vs native implementation of iOS/android", "body": "<p>In my opinion, the way to go is to write the GUI the way it was meant to be. Native iOS/Android will yield a much better user experience and will allow you to use the platform latest and greatest way of implementing a UI.</p>\n\n<p>Also, I am assuming that the engine will probably not be developped by the same people that develop the GUI itself, so the argument that it would be simpler to have a single code base doesn't really make sense.</p>\n\n<p>Another solution could be to use Xamarin, so that you can consolidate iOS and Android development, while still having a common C++ engine.</p>\n\n<p>Edit: Typo</p>\n"}], "owner": {"reputation": 11, "user_id": 8160762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83962ba65166050f586f235b814ecf61?s=128&d=identicon&r=PG", "display_name": "monkeydesign", "link": "https://stackoverflow.com/users/8160762/monkeydesign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1497448387, "creation_date": 1497446848, "question_id": 44546205, "link": "https://stackoverflow.com/questions/44546205/c-vs-native-implementation-of-ios-android", "title": "C++ vs native implementation of iOS/android", "body": "<p>I'm developing an app for iOS and android that identifies songs.  We have a matching engine in c++ that works well, but my question is about the rest of the app.  We have a user interface design that allows the user to record, match and save, as well as share, edit, and see their recordings.<br>\nI'm not a coder - just a designer- and I'm getting conflicting advice about how to implement.  One person wants to do the majority of the interface in c++ with just a thin native GUI skin, while the other says we should write in native IOS (swift) and Android and only have the engine in c++.  The argument for c++ is it will be a single code base to maintain - it would include doing the sharing, storing history, displaying sonograms, etc.  The argument against is that in fact it will not be easier to maintain, and will also create a lot of problems making calls, for example, between the interface and the sharing module.<br>\nHope this is clear - it's a very hard thing for me to assess as ignorant as I am!  Any advice would be greatly appreciated.  </p>\n"}]