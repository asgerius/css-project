[{"tags": ["c++", "linux", "serial-port"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1433982575, "post_id": 30769338, "comment_id": 49591052, "body": "How close to the hardware do you want or need?  Do you want to use an existing driver or write one?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1433982598, "post_id": 30769338, "comment_id": 49591059, "body": "Are you supporting USB or RS232?"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1433982605, "post_id": 30769338, "comment_id": 49591061, "body": "It&#39;s difficult to decide if this question is too broad, or off-topic because you&#39;re asking for library recommendations. I recommend you take a look at <a href=\"http://stackoverflow.com/help/dont-ask\">this help page</a>. Although, I personally am interested in the answers."}, {"owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "edited": false, "score": 0, "creation_date": 1433987395, "post_id": 30769338, "comment_id": 49592187, "body": "You couldn&#39;t find any good documentation on termios? Where did you look?! That interface has been around for over 25 years; there&#39;s <i>tons</i> of documentation all over the Internet. (Heck, even Wikipedia has a decent overview\u2026)"}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "edited": false, "score": 0, "creation_date": 1434013443, "post_id": 30769338, "comment_id": 49602944, "body": "Thomas, serial is serial, I don&#180;t think USB or RS232 makes a difference except for UART deep control..."}], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1433980807, "creation_date": 1433980682, "last_edit_date": 1433980807, "question_id": 30769338, "link": "https://stackoverflow.com/questions/30769338/c-serial-communications-the-way-to-go-on-linux", "title": "C++ Serial Communications - The way to go on Linux", "body": "<p>After spending some hours on Internet I got frustrated about serial communications way to go using C++ running on Linux environments. </p>\n\n<p>It seens there is a lot of options and even some confusion on how to go for it, with a lot of pasted code everywhere with very few explanations about those flags controlling communications behaviour. Things I\u00b4ve found includes:</p>\n\n<p><code>termios.h</code>: A library that may be obsolete and seens to have com \"C\" old style coding principle. I could not find a good documentation on that.</p>\n\n<p><code>boost::serial_port</code>: The common boost library - a good way to go for those who love it, and a discarded path for those who wants to be \"close\" to the language and OS as possible (as myself).</p>\n\n<p><code>Github libraries</code>: There are some good libraries....</p>\n\n<p>As a serial port works in fact with a stream of bytes I can assume I can built it  much like <code>std::cout</code> and <code>std::cin</code>, a <code>file</code> or a <code>stringstream</code>.</p>\n\n<p>If that is the fact, it should be reasonably straightfoward to build serial communications code: a simple <code>open/close/read/write</code> would do the job, but  then comes port setting (baud rate, parity, etc...), cannonical vs non-cannonical implementation, timeouts, etc... </p>\n\n<p>No that I don\u00b4t understand how serial communication works, but I need some advice on where to start from on Linux... I really don\u00b4t want to use <code>boost</code> neither \"C\" style coding inside C++.</p>\n\n<p>So I ask for suggestions for up-to-dated path to construct my serial communications classes, where I can build a clear C++ code without loosing the communication handling mechanisms needed on a robust implementation.</p>\n\n<p>Modern and up-to-dated docs, examples and opinions are very welcomed... </p>\n\n<p>BTW: I\u00b4m using Ubuntu as the OS.</p>\n"}, {"tags": ["c++", "arrays", "vector"], "comments": [{"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 2, "creation_date": 1433979928, "post_id": 30769186, "comment_id": 49590384, "body": "No data structure can&#39;t beat array, it is simple as it is?"}, {"owner": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 6, "creation_date": 1433979995, "post_id": 30769186, "comment_id": 49590406, "body": "What compiler options did you compile with? Optimization settings are quite important for these kinds of questions. Also I&#39;d argue the minor (it really isn&#39;t much) performance drop you experience is pretty small for the additional safety and ease of use you get."}, {"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "reply_to_user": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 1, "creation_date": 1433980028, "post_id": 30769186, "comment_id": 49590413, "body": "@Steephen but <code>std::vector</code> <b>is</b> a dynamic array."}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "reply_to_user": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 0, "creation_date": 1433980156, "post_id": 30769186, "comment_id": 49590453, "body": "@RaphaelMiedl, compiled with default using g++:  <code>g++ test.cpp</code>, g++ version is 4.6.1."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1433980181, "post_id": 30769186, "comment_id": 49590461, "body": "use <code>-O2</code>... and observe the result :)"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 8, "creation_date": 1433980249, "post_id": 30769186, "comment_id": 49590480, "body": "The codes are not equivalent. In one case you use the value 49 to denote logical True, and 48 to denote false. In the other case you use 1 and compare it to 0. Why on Earth do you do this."}, {"owner": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1433980328, "post_id": 30769186, "comment_id": 49590499, "body": "@Cheersandhth.-Alf comparison with zero will be faster than 1, am I right?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 11342, "user_id": 1144157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d05077a347e63679d43bfbdaf5e7b9ab?s=128&d=identicon&r=PG", "display_name": "Steephen", "link": "https://stackoverflow.com/users/1144157/steephen"}, "edited": false, "score": 0, "creation_date": 1433980425, "post_id": 30769186, "comment_id": 49590524, "body": "@Steephen: I gather a smart compiler can optimize that away if one but <i>asks</i> it to do so."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1433980446, "post_id": 30769186, "comment_id": 49590529, "body": "Just a quick check: if you do <code>char *bmp=&amp;bitmap[0];</code> before the loop and inside use <code>bmp</code> instead of <code>bitmap</code> does it get as fast? Because I saw many times g++ (even recent-ish versions) failing to realize that the array cannot be reallocated inside the loop, and thus reloading the data pointer from the stack at each iteration. Also, there are many cases where the compiler simply cannot prove it (typically if you get the vector as a reference parameter and call other stuff), so often you have to resort to this trick."}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1433980520, "post_id": 30769186, "comment_id": 49590556, "body": "@Cheersandhth.-Alf, because <code>vector&lt;bool&gt;</code> is not a standard container, and in <code>vector&lt;int&gt;</code>, the <code>sizeof(int)</code> is 4."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 5, "creation_date": 1433980534, "post_id": 30769186, "comment_id": 49590557, "body": "Doing performance testing without optimizations enabled is largely pointless, since you are testing an executable that was generated to be easy to debug, rather than one that was intended to run at maximum efficiency."}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1433980598, "post_id": 30769186, "comment_id": 49590571, "body": "@JeremyFriesner, compile with <code>g++ -O2 test.cpp</code>,  the result is <code>time for vector = 28360000 time for array = 27720000</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1433980607, "post_id": 30769186, "comment_id": 49590576, "body": "A significant difference I see is the value-initialization of <b>every</b> element in the vector, <i>then</i> the worthless <code>memset</code>. The former of those is not an overhead your dynamic array of <code>bool</code> undergoes."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1433980610, "post_id": 30769186, "comment_id": 49590577, "body": "@Allanqunzi: I think you mean that <code>vector&lt;bool&gt;</code>&#39;s buffer is not guaranteed to be a raw array of <code>bool</code>. If so then that&#39;s correct so far. But I didn&#39;t ask about that, I asked about why on Earth you&#39;re using values 48 and 49."}, {"owner": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 0, "creation_date": 1433980750, "post_id": 30769186, "comment_id": 49590609, "body": "@Allanqunzi surprisingly without any commandline flags I get <code>time for vector = 7225481 time for array = 6330749</code> and compiled with <code>-O2</code> I get <b><code>time for vector = 1860333 time for array = 1947682</code></b> so vector is faster than array which seems very unlikely, so I guess they are about the same and the difference is from whatever else is running on my system. Ofc that depends on my system though. <b>Edit: that&#39;s on gcc 5.1</b>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1433980750, "post_id": 30769186, "comment_id": 49590610, "body": "Try swapping the order of your two tests. Often in &quot;benchmarks&quot; like this, the second one runs faster because of cacheing or something."}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1433980759, "post_id": 30769186, "comment_id": 49590613, "body": "@Cheersandhth.-Alf, like I commented, <code>vector&lt;bool&gt;</code> is even slower. For your question, I didn&#39;t have a better solution. What do you suggest I should compare?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1433980942, "post_id": 30769186, "comment_id": 49590660, "body": "@Allanqunzi: Use <code>vector&lt;char&gt;</code> as you&#39;re doing, but (1) declare it as <code>vector&lt;char&gt;bitmap(n, true);</code>, and (2) remove the <code>memset</code>, and (3) remove the <code>==&#39;1&#39;</code> and (4) replace <code>0</code> with <code>false</code>. I think that covers it. Essentially, compare equivalent codes."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1433980954, "post_id": 30769186, "comment_id": 49590663, "body": "You should really use the same values in both cases... currently one case uses <code>1</code> and <code>0</code> and the other uses <code>&#39;1&#39;</code> and <code>&#39;0&#39;</code>. In fact it would be preferable to start off with zero-initialized, and set <code>1</code> for composite numbers"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1433981001, "post_id": 30769186, "comment_id": 49590676, "body": "@Cheersandhth.-Alf:  BTW, the values 48 and 49 are the <i>ASCII</i> codes for <code>&#39;0&#39;</code> and <code>&#39;1&#39;</code>.  The OP may not know the difference between textual representation and internal representation. :-)"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1433981126, "post_id": 30769186, "comment_id": 49590710, "body": "@ThomasMatthews: Thank you. I know what the values are. I referred to the numerical values for the benefit of the OP."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 1, "creation_date": 1433981209, "post_id": 30769186, "comment_id": 49590728, "body": "This debate convinces me they no longer teach programming in college, or that everyone is now a self-taught programmer with no understanding of fundamentals."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1433981239, "post_id": 30769186, "comment_id": 49590733, "body": "@CareyGregory or that college programming courses are mostly dreadful"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1433981299, "post_id": 30769186, "comment_id": 49590744, "body": "@MattMcNabb Mine weren&#39;t dreadful, just difficult and full of information that has remained useful throughout my entire career. Like why I wouldn&#39;t even bother asking this question, for example."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1433981411, "post_id": 30769186, "comment_id": 49590763, "body": "My results after making the changes I suggested, and using <code>-O3</code>: <code>time for array = 7551</code> <code>time for vector = 7445</code>.  Each number varies by 2%-ish per run though, so this is within the margin of error."}, {"owner": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 0, "creation_date": 1433981488, "post_id": 30769186, "comment_id": 49590771, "body": "Just for the sake of having some actual verifiable numbers here, <a href=\"http://coliru.stacked-crooked.com/a/19efa76252416f09\" rel=\"nofollow noreferrer\">compiled using g++ 5.1</a> the vector is about the same/slightly faster (probably random). <a href=\"http://coliru.stacked-crooked.com/a/52314d265977f21d\" rel=\"nofollow noreferrer\">Compiled using clang++ 3.6</a> clang is seemingly able to fully optimize out your little benchmark in the array case."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 2, "creation_date": 1433981525, "post_id": 30769186, "comment_id": 49590780, "body": "<a href=\"http://ideone.com/wtswU4\" rel=\"nofollow noreferrer\">Get ready to have your mind blown</a>"}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1433981581, "post_id": 30769186, "comment_id": 49590794, "body": "@CareyGregory, what fundamentals I failed to understand here?  Why one can not be a self-taught programmer?"}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "reply_to_user": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 0, "creation_date": 1433981882, "post_id": 30769186, "comment_id": 49590872, "body": "@RaphaelMiedl, thanks for your testing, after using optimization <code>-O2</code>, I also get vector is faster than array in some occasions. If possible, can you explain to me why optimization can make a difference? And why when comparing one should turn on the optimization?"}, {"owner": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 2, "creation_date": 1433982055, "post_id": 30769186, "comment_id": 49590929, "body": "@Allanqunzi mainly array indexing being builtin versus array being a templated class with overloaded index operator. Function calls (especially on templates) like the index operator often don&#39;t get inlined without sufficient optimization. Also I think the random difference is pretty much random system load from other programs running."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 3, "creation_date": 1433982331, "post_id": 30769186, "comment_id": 49590992, "body": "@Allanqunzi Another difference is that on some implementations <code>vector::operator[]</code> will perform range checking on builds that are not optimized, and you would pay a huge penalty for that on performance tests."}, {"owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "reply_to_user": {"reputation": 6874, "user_id": 1942027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc12ed2dd9e8cf4e2fe7c33e65c75210?s=128&d=identicon&r=PG&f=1", "display_name": "user1942027", "link": "https://stackoverflow.com/users/1942027/user1942027"}, "edited": false, "score": 0, "creation_date": 1433982775, "post_id": 30769186, "comment_id": 49591093, "body": "@RaphaelMiedl, thanks!!"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1433982957, "post_id": 30769186, "comment_id": 49591141, "body": "I view unoptimized code as deliberately crippled code to facilitate debugging. In my tests with optimization and after fixing the vector code ala @kfsone&#39;s answer vector is identical to dynamic array. I expect the compiler to optimize away everything vector adds by way of function calls."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1433983242, "post_id": 30769186, "comment_id": 49591202, "body": "Also using <code>std::vector&lt;bool&gt;bitmap(n, true);</code> like @AndyG did makes the vector more than 3 times faster in my tests."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1433988126, "post_id": 30769186, "comment_id": 49592352, "body": "there is the little problem that the posted algorithm returns a count that 1 too large."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1433988371, "post_id": 30769186, "comment_id": 49592417, "body": "regarding to optimize or not to optimize...  in large/complex projects, especially projects that heavily access the hardware, as do many real-time embedded projects, optimization will result in a executable that fails, where the un-optimized code worked &#39;perfectly&#39;."}], "answers": [{"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1433982224, "post_id": 30769515, "comment_id": 49590966, "body": "Just to add a datapoint: with g++4.9 and 10 successive tests, I get that the difference between the mean times is within 0.01 standard deviations, so we are definitely talking about random fluctuations."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 4, "creation_date": 1433983154, "post_id": 30769515, "comment_id": 49591180, "body": "<code>vector&lt;bool&gt;</code> is even more different than your explanation indicates.  It doesn&#39;t even have a <code>data()</code> member function.  In particular, the paragraph where you say &quot;When you write  <code>x = vector_bools[1];</code>  you are actually saying:  <code>bools* bools_ptr = vector_bools.data(); x = bools_ptr[1];</code>&quot; is totally bogus"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1433983364, "post_id": 30769515, "comment_id": 49591221, "body": "Fair point, Ben, I&#39;ll try to rectify and/or indicate I&#39;m being approximate."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1433983828, "post_id": 30769515, "comment_id": 49591350, "body": "@BenVoigt Adapted to <code>int</code> and clearer indication that I&#39;m aproximating."}], "tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 7, "last_activity_date": 1433983801, "last_edit_date": 1433983801, "creation_date": 1433981792, "answer_id": 30769515, "question_id": 30769186, "link": "https://stackoverflow.com/questions/30769186/why-vector-is-always-slower-than-c-array-at-least-in-this-case/30769515#30769515", "title": "why vector is always slower than C array, at least in this case?", "body": "<p>Your comparisons contain inconsistencies which would explain the differences, and another factor could be the result of compiling without sufficient optimization. Some implementations have a lot of additional code in the debug builds of STL, for instance MSVC does bounds checking on vector element accesses that produce a significant reduction in speed in debug builds.</p>\n\n<p>The following code shows a MUCH closer performance between the two, and the difference is probably just a lack of samples (ideone has a timeout limit of 5s).</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;cstring&gt;\n\nint countPrimes_vector(int n) {  \n    int res = 0; \n    std::vector&lt;bool&gt; bitmap(n, true);\n    for (int i = 2; i&lt;n; ++i){\n        if(bitmap[i])\n          ++res;\n        if(sqrt(n)&gt;i)\n        {\n             for(int j = i*i; j &lt; n; j += i) bitmap[j] = false;\n        }\n    }\n    return res;\n}\n\nint countPrimes_carray(int n) {  \n    int res = 0; \n    bool* bitmap = new bool[n];\n    memset(bitmap, true, sizeof(bool) * n);\n    for (int i = 2; i&lt;n; ++i){\n\n        if(bitmap[i])++res;\n        if(sqrt(n)&gt;i)\n        {\n             for(int j = i*i; j &lt; n; j += i) bitmap[j] = false;\n        }\n    }\n    delete []bitmap;\n    return res;\n}\n\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid test(const char* description, int (*fn)(int))\n{\n    using clock = std::chrono::steady_clock;\n    using ms = std::chrono::milliseconds;\n\n    auto start = clock::now();\n\n    int a;\n    for(int i=0; i&lt;9; ++i)\n        a = countPrimes_vector(8000000); \n\n    auto end = clock::now();\n    auto diff = std::chrono::duration_cast&lt;ms&gt;(end - start);\n\n    std::cout &lt;&lt; \"time for \" &lt;&lt; description &lt;&lt; \" = \" &lt;&lt; diff.count() &lt;&lt; \"ms\\n\";\n}\n\nint main()\n{\n    test(\"carray\", countPrimes_carray);\n    test(\"vector\", countPrimes_vector);\n}\n</code></pre>\n\n<p>Live demo: <a href=\"http://ideone.com/0Y9gQx\" rel=\"nofollow\">http://ideone.com/0Y9gQx</a></p>\n\n<pre><code>time for carray = 2251ms\ntime for vector = 2254ms\n</code></pre>\n\n<p>Although on some runs the carray was 1-2 ms slower. Again, that's insufficient samples on a shared resource.</p>\n\n<p>--- EDIT ---</p>\n\n<p>In your main comments you ask \"why optimization can make a difference\".</p>\n\n<pre><code>std::vector&lt;bool&gt; v = { 1, 2, 3 };\nbool b[] = { 1, 2, 3 };\n</code></pre>\n\n<p>We have two \"array\"s of 3 elements, so consider the following:</p>\n\n<pre><code>v[10]; // illegal!\nb[10]; // illegal!\n</code></pre>\n\n<p>Debug versions of STL can often catch this during run time (and with some scenarios, compile time). The array access may just result in bad data or a crash.</p>\n\n<p>Additionally, the STL is implemented using many small member-function calls to things like <code>size()</code>, and because <code>vector</code> is a class, <code>[]</code> is actually facaded through a function call (<code>operator[]</code>).</p>\n\n<p>The compiler can eliminate many of these, but that's optimization. If you don't optimize, then something like</p>\n\n<pre><code>std::vector&lt;int&gt; v;\nv[10];\n</code></pre>\n\n<p>does something roughly like:</p>\n\n<pre><code>int* data() { return M_.data_; }\n\nv.operator[](size_t idx = 10) {\n    if (idx &gt;= this-&gt;size()) {\n        raise exception(\"invalid [] access\");\n    }\n    return *(data() + idx);\n}\n</code></pre>\n\n<p>and even though data is an \"inlinable\" function, to make debugging easier, the unoptimized code leaves it as this. When you build with optimization, the compiler recognizes that the implementation of these functions are so trivial it can just substitute their implementations into the call sites, and it quickly winds up simplifying all of the above to a more array-access like operation.</p>\n\n<p>For example, in the above case, it may first reduce <code>operator[]</code> to</p>\n\n<pre><code>v.operator[](size_t idx = 10) {\n    if (idx &gt;= this-&gt;size()) {\n        raise exception(\"invalid [] access\");\n    }\n    return *(M_.data_ + idx);\n}\n</code></pre>\n\n<p>And since compiling without debugging probably removes the bounds check, it becomes</p>\n\n<pre><code>v.operator[](size_t idx = 10) {\n    return *(M_.data_ + idx);\n}\n</code></pre>\n\n<p>so now the inliner can reduce</p>\n\n<pre><code>x = v[1];\n</code></pre>\n\n<p>to</p>\n\n<pre><code>x = *(v.M_.data_ + 1); // comparable to v.M_.data_[1];\n</code></pre>\n\n<p>There <em>is</em> a tiny penalty. The c-array involves the data block in memory and a single local variable that fits into a register that points to the block, your references are directly relative to that:</p>\n\n<p>With a vector, though, you have the vector object which is a pointer to the data, a size and a capacity variable:</p>\n\n<pre><code>vector&lt;T&gt;  // pseudo code\n{\n    T* ptr;\n    size_t size;\n    size_t capacity;\n}\n</code></pre>\n\n<p>If you were counting machine instructions, the vector will have 3 variables to initialize, and manage.</p>\n\n<p>When you write</p>\n\n<pre><code>x = v[1];\n</code></pre>\n\n<p>given the above approximation of vector, you are saying something along the lines of:</p>\n\n<pre><code>T* ptr = v.data();\nx = ptr[1];\n</code></pre>\n\n<p>but the compiler is usually smart enough when building with optimization to recognize that it can do the first line before the loop, but this tends to cost a register.</p>\n\n<pre><code>T* ptr = v.data(); // in debug, function call, otherwise inlined.\nfor ... {\n    x = ptr[1];\n}\n</code></pre>\n\n<p>So you're probably looking at a handful more machine instructions per iteration of your test function, or on a modern processor, maybe a nanosecond or two of extra wall time.</p>\n"}], "owner": {"reputation": 3018, "user_id": 2345484, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1899ae171c0663708dde115790f44918?s=128&d=identicon&r=PG", "display_name": "Allanqunzi", "link": "https://stackoverflow.com/users/2345484/allanqunzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 30769515, "answer_count": 1, "score": 1, "last_activity_date": 1433983801, "creation_date": 1433979799, "last_edit_date": 1433982668, "question_id": 30769186, "link": "https://stackoverflow.com/questions/30769186/why-vector-is-always-slower-than-c-array-at-least-in-this-case", "title": "why vector is always slower than C array, at least in this case?", "body": "<p>I am trying to find all the primes not greater than <code>n</code> using the Eratosthenes'Sieve algorithm, and I have the following codes, with the sieve implemented in vector and C array, I have found that almost during all the time, C array is always faster.</p>\n\n<p>Using vector:</p>\n\n<pre><code>int countPrimes_vector(int n) {                  \n    int res = 0; \n    vector&lt;char&gt;bitmap(n);\n    memset(&amp;bitmap[0], '1', bitmap.size() * sizeof( bitmap[0]));\n    //vector&lt;bool&gt;bitmap(n, true); Using this one is even slower!!\n\n    for (int i = 2; i&lt;n; ++i){\n\n        if(bitmap[i]=='1')++res;\n        if(sqrt(n)&gt;i)\n        {\n             for(int j = i*i; j &lt; n; j += i) bitmap[j] = '0';\n        }\n    }\n\n    return res;\n} \n</code></pre>\n\n<p>Using C array:</p>\n\n<pre><code>int countPrimes_array(int n) {  \n\n    int res = 0; \n    bool * bitmap = new bool[n];\n    memset(bitmap, true, sizeof(bool) * n);\n    for (int i = 2; i&lt;n; ++i){\n\n        if(bitmap[i])++res;\n        if(sqrt(n)&gt;i)\n        {\n             for(int j = i*i; j &lt; n; j += i) bitmap[j] = false;\n        }\n    }\n    delete []bitmap;\n    return res;\n}\n</code></pre>\n\n<p>The test code:</p>\n\n<pre><code>clock_t t;\nt = clock();\nint a;\nfor(int i=0; i&lt;10; ++i)a = countPrimes_vector(8000000); \nt = clock() - t;\ncout&lt;&lt;\"time for vector = \"&lt;&lt;t&lt;&lt;endl;\n\nt = clock();\nint b;\nfor(int i=0; i&lt;10; ++i)b = countPrimes_array(8000000); \nt = clock() - t;\ncout&lt;&lt;\"time for array = \"&lt;&lt;t&lt;&lt;endl;\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code> time for vector = 32460000\n time for array = 29840000\n</code></pre>\n\n<p>I have tested many times, and C array is always faster. What's the reason behind it? </p>\n\n<p>I often heard that the performance for <code>vector</code> and C array is the same, <code>vector</code> should be always used for being a standard container. Is this statement true, or at least generally speaking ? In what cases C array should be preferred?  </p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>As the following comments suggest, after turning on optimization <code>-O2</code> or <code>-O3</code> (originally it was compiled with <code>g++ test.cpp</code>), the time difference between <code>vector</code> and C array is no longer valid, in some occasions <code>vector</code> is faster than C array. </p>\n"}, {"tags": ["c++", "static", "macros", "singleton"], "comments": [{"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1433981670, "post_id": 30769100, "comment_id": 49590814, "body": "&quot;error: expected primary-expression before &#39;.&#39; token TheUniverse. <b>Initizlize()</b>&quot; - is this a typo?"}, {"owner": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 1, "creation_date": 1433981800, "post_id": 30769100, "comment_id": 49590849, "body": "Also, there is a semicolon in macro that should not be there."}, {"owner": {"reputation": 78, "user_id": 4126186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/880a8d49ad79bf82d9a351b84da7338b?s=128&d=identicon&r=PG", "display_name": "Thomas Steinholz", "link": "https://stackoverflow.com/users/4126186/thomas-steinholz"}, "edited": false, "score": 0, "creation_date": 1433981891, "post_id": 30769100, "comment_id": 49590876, "body": "Well regarding the my singleton pattern, I got it from refrencing <a href=\"https://github.com/angel2d/angel2d/blob/master/Code/Angel/Infrastructure/World.h\" rel=\"nofollow noreferrer\">github.com/angel2d/angel2d/blob/master/Code/Angel/&hellip;</a> and <a href=\"https://github.com/angel2d/angel2d/blob/master/Code/Angel/Infrastructure/World.cpp\" rel=\"nofollow noreferrer\">github.com/angel2d/angel2d/blob/master/Code/Angel/&hellip;</a> . Im rather new to C++ (comming from java) and I&#39;ll admit there are some things I just don&#39;t know well at all. But I need to know if you saying that project was not done well, because I look into this source code alot for when I want to learn something new."}, {"owner": {"reputation": 78, "user_id": 4126186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/880a8d49ad79bf82d9a351b84da7338b?s=128&d=identicon&r=PG", "display_name": "Thomas Steinholz", "link": "https://stackoverflow.com/users/4126186/thomas-steinholz"}, "reply_to_user": {"reputation": 9554, "user_id": 31782, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8ea4581df89970a5ba17daf4ad93041c?s=128&d=identicon&r=PG", "display_name": "n0rd", "link": "https://stackoverflow.com/users/31782/n0rd"}, "edited": false, "score": 0, "creation_date": 1433981919, "post_id": 30769100, "comment_id": 49590888, "body": "I think that atcually solved the problem @n0rd good catch. It was the semicolon not the typo."}], "answers": [{"comments": [{"owner": {"reputation": 78, "user_id": 4126186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/880a8d49ad79bf82d9a351b84da7338b?s=128&d=identicon&r=PG", "display_name": "Thomas Steinholz", "link": "https://stackoverflow.com/users/4126186/thomas-steinholz"}, "edited": false, "score": 0, "creation_date": 1433982128, "post_id": 30769538, "comment_id": 49590943, "body": "Thank you! This was the problem. Also shout-out to @n0rd for the same answer in the comments."}, {"owner": {"reputation": 940, "user_id": 3402566, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd3c4c987c67bdcdd9a20e4727b552f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Mertin", "link": "https://stackoverflow.com/users/3402566/nick-mertin"}, "reply_to_user": {"reputation": 78, "user_id": 4126186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/880a8d49ad79bf82d9a351b84da7338b?s=128&d=identicon&r=PG", "display_name": "Thomas Steinholz", "link": "https://stackoverflow.com/users/4126186/thomas-steinholz"}, "edited": false, "score": 0, "creation_date": 1433982406, "post_id": 30769538, "comment_id": 49591007, "body": "@ThomasSteinholz no problem. Remember, macros don&#39;t work like constants; they represent code, not values."}], "tags": [], "owner": {"reputation": 940, "user_id": 3402566, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd3c4c987c67bdcdd9a20e4727b552f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Mertin", "link": "https://stackoverflow.com/users/3402566/nick-mertin"}, "is_accepted": true, "score": 3, "last_activity_date": 1433981991, "creation_date": 1433981991, "answer_id": 30769538, "question_id": 30769100, "link": "https://stackoverflow.com/questions/30769100/defining-macros-that-are-equal-to-functions-that-return-objects-in-c/30769538#30769538", "title": "Defining Macros that are equal to functions that return objects in C++", "body": "<p>The problem is that you defined <code>TheUniverse</code> as <code>Universe::GetInstance();</code>, with a semicolon. Therefore, after macros are processed, you get <code>Universe::GetInstance();.Initialize();</code> which is obviously not what you want. To fix the problem simply remove the semicolon in the macro definition.</p>\n"}], "owner": {"reputation": 78, "user_id": 4126186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/880a8d49ad79bf82d9a351b84da7338b?s=128&d=identicon&r=PG", "display_name": "Thomas Steinholz", "link": "https://stackoverflow.com/users/4126186/thomas-steinholz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 30769538, "answer_count": 1, "score": -1, "last_activity_date": 1433981991, "creation_date": 1433979228, "last_edit_date": 1433980713, "question_id": 30769100, "link": "https://stackoverflow.com/questions/30769100/defining-macros-that-are-equal-to-functions-that-return-objects-in-c", "title": "Defining Macros that are equal to functions that return objects in C++", "body": "<p>So I have the singleton pattern working the way I want to, I think the main problem is something with pointers and refrences. (\"...\" represents irrelevent code).</p>\n\n<p>Universe.h</p>\n\n<pre><code>...    \n#define TheUniverse Universe::GetInstance ();\n...\npublic:\nstatic Universe&amp; GetInstance ();\n...\nprivate:\nstatic Universe* x_instance;\n...\n</code></pre>\n\n<p>Universe.cpp</p>\n\n<pre><code>...\nUniverse* Universe::x_instance = NULL;\n...\n    Universe&amp; Universe::GetInstance ()\n{\n    if ( x_instance == NULL )\n    {\n        x_instance = new Universe ();\n    }\n    return *x_instance;\n}\n...\n</code></pre>\n\n<p>Main.cpp</p>\n\n<pre><code>...\n//This Works\nUniverse&amp; universe = TheUniverse;\n\nuniverse.Initialize();\n\n//This also Works\nUniverse::GetInstance().Initialize();\n//This Does Not (and I do not know why)\nTheUniverse.Initialize();\n//CMake says \"error: expected primary-expression before '.' token TheUniverse.Initizlize();\"\n</code></pre>\n\n<p>So, why do I have to set TheUniverse macro to a variable before I can use it? And is there a way for me to bypass this and not have to use a variable?</p>\n"}, {"tags": ["c++", "c", "pointers", "segmentation-fault", "binary-search-tree"], "answers": [{"comments": [{"owner": {"reputation": 97126, "user_id": 4593267, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EEyLy.jpg?s=128&g=1", "display_name": "chqrlie", "link": "https://stackoverflow.com/users/4593267/chqrlie"}, "edited": false, "score": 0, "creation_date": 1433980984, "post_id": 30769111, "comment_id": 49590672, "body": "Not sufficient:  the crash moves down but bites again: <code>do { temp = x;  x = x-&gt;prev; ...</code>.  Another illustration of how <code>do &#47; while</code> loops are mostly broken."}, {"owner": {"reputation": 13, "user_id": 4996949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6f9bcf936d2f89160e8bf92416a965?s=128&d=identicon&r=PG&f=1", "display_name": "Arattor", "link": "https://stackoverflow.com/users/4996949/arattor"}, "edited": false, "score": 0, "creation_date": 1434064425, "post_id": 30769111, "comment_id": 49635203, "body": "Thanks for the help. In the end I&#39;ve added the &#39;x != NULL&#39; into the first &#39;if()&#39; and put the &#39;do...while&#39; loop into an &#39;if(x)&#39; statement and it fixed all the issued."}], "tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": true, "score": 0, "last_activity_date": 1433979308, "creation_date": 1433979308, "answer_id": 30769111, "question_id": 30769086, "link": "https://stackoverflow.com/questions/30769086/segmentation-fault-when-using-if-statement-with-pointers-bst-tree/30769111#30769111", "title": "Segmentation fault when using if statement with pointers (BST tree)", "body": "<p>Since <code>searchSpecific</code> may return <code>NULL</code>, you need to protect your code from it, and check <code>x</code> before accessing one of its members:</p>\n\n<pre><code>tree *x=searchSpecific(root,f);\nif (x != NULL &amp;&amp; x-&gt;left)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 4996949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6f9bcf936d2f89160e8bf92416a965?s=128&d=identicon&r=PG&f=1", "display_name": "Arattor", "link": "https://stackoverflow.com/users/4996949/arattor"}, "edited": false, "score": 0, "creation_date": 1434066558, "post_id": 30772039, "comment_id": 49635804, "body": "Thank you for your hints. Like I said in the other comment I&#39;ve added an &#39;if(x)&#39; statement around the &#39;do...while&#39; loop and the &#39;x != NULL&#39; into the already existing &#39;if(()&#39;. I&#39;ll make sure to remember about the dynamic allocation :)."}], "tags": [], "owner": {"reputation": 3696, "user_id": 3475279, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/8SY68.jpg?s=128&g=1", "display_name": "Arial", "link": "https://stackoverflow.com/users/3475279/arial"}, "is_accepted": false, "score": 0, "last_activity_date": 1433999359, "creation_date": 1433999359, "answer_id": 30772039, "question_id": 30769086, "link": "https://stackoverflow.com/questions/30769086/segmentation-fault-when-using-if-statement-with-pointers-bst-tree/30772039#30772039", "title": "Segmentation fault when using if statement with pointers (BST tree)", "body": "<p>The segmentation fault can appear due to several reasons, such as:</p>\n\n<ul>\n<li>x is undefined, which may be caused by your *searchSpecific function</li>\n<li>x is NULL, because your function returns a NULL pointer </li>\n<li>x->left is NULL, which means trying to access it causes something bad to happen</li>\n</ul>\n\n<p>So, how I'll go about doing this would be trying to check if the returned tree is null using a simple if statement as follows:</p>\n\n<pre><code>if (x == NULL) {\n    /* throw error or not found message */\n}\n</code></pre>\n\n<p>I would also suggest you dynamically allocate memory for your tree before doing anything with it, by creating a reusable func like create_tree() with the following code: </p>\n\n<pre><code>tree create_tree(int data) {\n    tree *x;\n    x = malloc(sizeof(tree));\n    x-&gt;a = data;\n    x-&gt;left = x-&gt;right = x-&gt;prev = NULL;\n    return x;\n}\n</code></pre>\n\n<p>Why? Note that in your code snippets, you just declare </p>\n\n<pre><code> tree *some_tree_name;\n</code></pre>\n\n<p>which is very dangerous every time you try to do something with it, and might lead to your code crashing on you on the do/while loop later.</p>\n"}], "owner": {"reputation": 13, "user_id": 4996949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a6f9bcf936d2f89160e8bf92416a965?s=128&d=identicon&r=PG&f=1", "display_name": "Arattor", "link": "https://stackoverflow.com/users/4996949/arattor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 30769111, "answer_count": 2, "score": 1, "last_activity_date": 1433999359, "creation_date": 1433979156, "last_edit_date": 1433984897, "question_id": 30769086, "link": "https://stackoverflow.com/questions/30769086/segmentation-fault-when-using-if-statement-with-pointers-bst-tree", "title": "Segmentation fault when using if statement with pointers (BST tree)", "body": "<p>I'm trying to implement a binary search tree in C, more specifically looking for the predecessor. However, whenever I try to run the program I get the segmentation vault. Here's the code in question:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#include &lt;stdio.h&gt;\r\n#include &lt;stdlib.h&gt;\r\n\r\nstruct tree\r\n{\r\n    int a;\r\n    tree *left;\r\n    tree *right;\r\n    tree *prev;\r\n}*root=NULL;\r\n\r\ntree *searchSpecific (tree *root, int val)\r\n{\r\n    tree *x=root;\r\n    if (!x)\r\n    {\r\n        return NULL;\r\n    }\r\n    else\r\n    {\r\n        while(x &amp;&amp; val!=x-&gt;a)\r\n        {\r\n            if (val&gt;x-&gt;a)\r\n                x=x-&gt;left;\r\n            else x=x-&gt;right;\r\n        }\r\n    }\r\n    return x;\r\n}\r\n\r\nint previous(tree *root, int f)\r\n{\r\n tree *x=searchSpecific(root,f);\r\n    if(x-&gt;left)\r\n    {\r\n        x=x-&gt;left;\r\n        while(x-&gt;right) x = x-&gt;right;\r\n        return x-&gt;a;\r\n    }\r\n\r\n    tree *temp;\r\n    do\r\n    {\r\n        temp = x;\r\n        x = x-&gt;prev;\r\n    } while(x &amp;&amp; (x-&gt;right != temp));\r\n    return x-&gt;a;\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The segfault appears at the if statement if(x->left) in the previous() function. I want to check if the node in question exists, but the program crashes every time and I have no idea what is wrong with it..</p>\n"}, {"tags": ["c++", "linux", "gps", "raspberry-pi", "gpsd"], "comments": [{"owner": {"reputation": 2963, "user_id": 1855442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b99c64abe73180373944232b0c734f?s=128&d=identicon&r=PG", "display_name": "Pradheep", "link": "https://stackoverflow.com/users/1855442/pradheep"}, "edited": false, "score": 0, "creation_date": 1433979260, "post_id": 30769072, "comment_id": 49590193, "body": "you are probably not linking the .so or .a libs with your source. Can you show us your build command or make file"}], "answers": [{"tags": [], "owner": {"reputation": 2963, "user_id": 1855442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61b99c64abe73180373944232b0c734f?s=128&d=identicon&r=PG", "display_name": "Pradheep", "link": "https://stackoverflow.com/users/1855442/pradheep"}, "is_accepted": true, "score": 1, "last_activity_date": 1433979702, "creation_date": 1433979702, "answer_id": 30769163, "question_id": 30769072, "link": "https://stackoverflow.com/questions/30769072/gps-app-compile-errors/30769163#30769163", "title": "GPS App compile errors", "body": "<p>The problem is that you are most likely not linking your source code with the library.</p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 14133973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/073c861f52d778b816e7865001ba73e8?s=128&d=identicon&r=PG&f=1", "display_name": "Kit", "link": "https://stackoverflow.com/users/14133973/kit"}, "is_accepted": false, "score": 1, "last_activity_date": 1597875104, "creation_date": 1597875104, "answer_id": 63495633, "question_id": 30769072, "link": "https://stackoverflow.com/questions/30769072/gps-app-compile-errors/63495633#63495633", "title": "GPS App compile errors", "body": "<p>You should pass it to your g++ with</p>\n<pre><code>g++ -o output sourceFileThatImplementsLibGPS.cpp -lgps\n</code></pre>\n"}], "owner": {"reputation": 916, "user_id": 2002076, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/5d1ab415d38d53a75b3d1e9a442a0ac3?s=128&d=identicon&r=PG", "display_name": "Travis Pettry", "link": "https://stackoverflow.com/users/2002076/travis-pettry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 936, "favorite_count": 0, "accepted_answer_id": 30769163, "answer_count": 2, "score": 1, "last_activity_date": 1597875104, "creation_date": 1433979069, "question_id": 30769072, "link": "https://stackoverflow.com/questions/30769072/gps-app-compile-errors", "title": "GPS App compile errors", "body": "<p>I am working on a GPS application on the Raspberry pi. I have just installed GPSD by running <code>sudo apt-get install gpsd gpsd-clients</code>. I do get data from my GPS module when I run <code>sudo gpsd /dev/ttyAMA0 -F /var/run/gpsd.sock</code>. My issue resides when I try to make my own GPS app. I have installed <code>libgps-dev</code></p>\n\n<p>When I try to compile my app I get two errors : <code>undefined reference to gpsmm::~gpsmm()</code> and <code>undefined reference to gpsmm::gps_inner_open(char const*, char const*)</code></p>\n\n<p>My Main Method:</p>\n\n<pre><code>#include &lt;libgpsmm.h&gt;\nint main(int argc, char *argv[])\n{         \n    gpsmm gps_rec(\"localhost\", DEFAULT_GPSD_PORT);\n    return 0;    \n}\n</code></pre>\n\n<p>libgpsmm.h:</p>\n\n<pre><code>#ifndef _GPSD_GPSMM_H_\n#define _GPSD_GPSMM_H_\n\n/*\n * Copyright (C) 2005 Alfredo Pironti\n *\n * This software is distributed under a BSD-style license. See the\n * file \"COPYING\" in the toop-level directory of the distribution for details.\n *\n */\n#include &lt;sys/types.h&gt;\n#include \"gps.h\" //the C library we are going to wrap\n\n#ifndef USE_QT\nclass gpsmm {\n#else\n\n#include &lt;QtCore/qglobal.h&gt;\n\n#if defined(LIBQGPSMM_LIBRARY)\n#  define LIBQGPSMMSHARED_EXPORT Q_DECL_EXPORT\n#else\n#  define LIBQGPSMMSHARED_EXPORT Q_DECL_IMPORT\n#endif\n\nclass LIBQGPSMMSHARED_EXPORT gpsmm {\n#endif\n    public:\n        // cppcheck-suppress uninitVar\n        gpsmm(const char *host, const char *port) : to_user(0) {\n            gps_inner_open(host, port);\n        }\n#ifdef __UNUSED__\n        // cppcheck-suppress uninitVar\n        gpsmm(void) : to_user(0) \n        {\n                gps_inner_open(\"localhost\", DEFAULT_GPSD_PORT);\n        }\n#endif\n        virtual ~gpsmm();\n        struct gps_data_t* send(const char *request); //put a command to gpsd and return the updated struct\n        struct gps_data_t* stream(int); //set watcher and policy flags\n        struct gps_data_t* read(void); //block until gpsd returns new data, then return the updated struct\n        const char *data(void); // return the client data buffer\n        bool waiting(int);  // blocking check for data waiting\n        void clear_fix(void);\n        void enable_debug(int, FILE*);  \nprivate:\n    struct gps_data_t *to_user; //we return the user a copy of the internal structure. This way she can modify it without\n    //integrity loss for the entire class\n    struct gps_data_t* gps_inner_open(const char *host, const char *port);\n    struct gps_data_t _gps_state;\n    struct gps_data_t * gps_state() { return &amp;_gps_state; }\n    struct gps_data_t* backup(void) { *to_user = *gps_state(); return to_user; }; //return the backup copy\n};\n#endif // _GPSD_GPSMM_H_\n</code></pre>\n\n<p>If anyone can help me figure out my problem, I would be grateful. </p>\n"}, {"tags": ["java", "android", "c++"], "owner": {"reputation": 6398, "user_id": 2127950, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/27eef5e6b57a1d7a7eaaf107a14fffb3?s=128&d=identicon&r=PG", "display_name": "portfoliobuilder", "link": "https://stackoverflow.com/users/2127950/portfoliobuilder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1433979278, "creation_date": 1433978825, "last_edit_date": 1433979278, "question_id": 30769033, "link": "https://stackoverflow.com/questions/30769033/mpeg4writer-cpp-how-is-this-related-to-mediarecorder-setorientationhint", "title": "MPEG4Writer.cpp, how is this related to MediaRecorder.setOrientationHint()?", "body": "<p>I am trying to connect the MPEG4Writer.cpp class with MediaRecorder's setOrientationHint(). It was mentioned that the two were related. From what I have seen of the MPEG4Writer.cpp,</p>\n\n<p><a href=\"https://android.googlesource.com/platform/frameworks/av/+/master/media/libstagefright/MPEG4Writer.cpp\" rel=\"nofollow\">https://android.googlesource.com/platform/frameworks/av/+/master/media/libstagefright/MPEG4Writer.cpp</a></p>\n\n<p>This handles things like duration, encoding, decoding primarily. Can someone help me understand the connection to orientation? I found one method of interest that might be it because of the latitudex and logitudex values, I was curious if that would be the orientation equivalent.</p>\n\n<pre><code>MPEG4Writer::MPEG4Writer(int fd)\n    : mFd(dup(fd)),\n      mInitCheck(mFd &lt; 0? NO_INIT: OK),\n      mIsRealTimeRecording(true),\n      mUse4ByteNalLength(true),\n      mUse32BitOffset(true),\n      mIsFileSizeLimitExplicitlyRequested(false),\n      mPaused(false),\n      mStarted(false),\n      mWriterThreadStarted(false),\n      mOffset(0),\n      mMdatOffset(0),\n      mEstimatedMoovBoxSize(0),\n      mInterleaveDurationUs(1000000),\n      mLatitudex10000(0),\n      mLongitudex10000(0),\n      mAreGeoTagsAvailable(false),\n      mStartTimeOffsetMs(-1) {\n}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "visual-studio", "sdl"], "comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1433979322, "post_id": 30768985, "comment_id": 49590216, "body": "At least show your whole loop."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4996974, "user_type": "registered", "profile_image": "https://graph.facebook.com/928117250578737/picture?type=large", "display_name": "Danaa Mograine", "link": "https://stackoverflow.com/users/4996974/danaa-mograine"}, "edited": false, "score": 0, "creation_date": 1433979917, "post_id": 30769132, "comment_id": 49590381, "body": "I see your point but its strange that it stops working after a fixed time."}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "reply_to_user": {"reputation": 3, "user_id": 4996974, "user_type": "registered", "profile_image": "https://graph.facebook.com/928117250578737/picture?type=large", "display_name": "Danaa Mograine", "link": "https://stackoverflow.com/users/4996974/danaa-mograine"}, "edited": false, "score": 0, "creation_date": 1433979993, "post_id": 30769132, "comment_id": 49590405, "body": "Look into Benjamin&#39;s answer, it may be a memory problem then."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1433981016, "post_id": 30769132, "comment_id": 49590680, "body": "<i>&quot;This will be a random value between 0 and 11, depending on the frame rate.&quot;</i> -- No, it will give a value that depends on the amount of time that has passed. The value will increment every 100 milliseconds, and reset to 0 every 1.2 seconds. The line seems correct to me."}], "tags": [], "owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "is_accepted": false, "score": 0, "last_activity_date": 1433981869, "last_edit_date": 1433981869, "creation_date": 1433979424, "answer_id": 30769132, "question_id": 30768985, "link": "https://stackoverflow.com/questions/30768985/sdl-image-disappears-after-15-seconds/30769132#30769132", "title": "SDL image disappears after 15 seconds", "body": "<p>This line int ( (SDL_GetTicks() / 100) % 12);</p>\n\n<p>SDL_GetTicks() returns the number of miliseconds that have elapsed since the lib initialized (<a href=\"https://wiki.libsdl.org/SDL_GetTicks\" rel=\"nofollow\">https://wiki.libsdl.org/SDL_GetTicks</a>). So you're updating with the TOTAL AMOUNT OF TIME since your application started, not the time since last frame.</p>\n\n<p>You're supposed to keep count of the last time and update the application with how much time has passed since the last update.</p>\n\n<pre><code>Uint32 currentTime=SDL_GetTicks();\nint deltaTime = (int)( currentTime-lastTime );\nlastTime=currentTime; //declared previously\n\nupdate( deltaTime );\nshark();\nrender();\n</code></pre>\n\n<p>Edit: Benjamin is right, the update line works fine.\nStill using the deltaTime is a good advice. In a game, for instance, you won't use the total time since the beginning of the application, you'll probably need to keep your own counter of how much time has passed (since you start an animation).</p>\n\n<p>But there's nothing wrong with that line for your program anyhow.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4996974, "user_type": "registered", "profile_image": "https://graph.facebook.com/928117250578737/picture?type=large", "display_name": "Danaa Mograine", "link": "https://stackoverflow.com/users/4996974/danaa-mograine"}, "edited": false, "score": 0, "creation_date": 1433980301, "post_id": 30769162, "comment_id": 49590493, "body": "Thanks, adding a destroy function solved it !! I cant see why it doesnt just overwrite the variable though.."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 3, "user_id": 4996974, "user_type": "registered", "profile_image": "https://graph.facebook.com/928117250578737/picture?type=large", "display_name": "Danaa Mograine", "link": "https://stackoverflow.com/users/4996974/danaa-mograine"}, "edited": false, "score": 0, "creation_date": 1433980425, "post_id": 30769162, "comment_id": 49590525, "body": "@DanaaMograine: It does overwrite the variable. But the variable, in this case, is just a pointer. Overwriting a pointer has no effect on the thing it points to (a texture, in this case), because there may be other pointers holding that same address."}, {"owner": {"reputation": 3, "user_id": 4996974, "user_type": "registered", "profile_image": "https://graph.facebook.com/928117250578737/picture?type=large", "display_name": "Danaa Mograine", "link": "https://stackoverflow.com/users/4996974/danaa-mograine"}, "edited": false, "score": 0, "creation_date": 1433981331, "post_id": 30769162, "comment_id": 49590748, "body": "So the function CreateTextureFromSurface returns a SDL_Texture on the heap and each time the parent function runs, it has a different adress?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 3, "user_id": 4996974, "user_type": "registered", "profile_image": "https://graph.facebook.com/928117250578737/picture?type=large", "display_name": "Danaa Mograine", "link": "https://stackoverflow.com/users/4996974/danaa-mograine"}, "edited": false, "score": 0, "creation_date": 1433982023, "post_id": 30769162, "comment_id": 49590921, "body": "@DanaaMograine: Something like that, although it doesn&#39;t return the <code>SDL_Texture</code>, just a pointer to it. And yes, this pointer will store a different address each time, because it is pointing to a different, newly allocated  <code>SDL_Texture</code>."}], "tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": true, "score": 3, "last_activity_date": 1433979695, "creation_date": 1433979695, "answer_id": 30769162, "question_id": 30768985, "link": "https://stackoverflow.com/questions/30768985/sdl-image-disappears-after-15-seconds/30769162#30769162", "title": "SDL image disappears after 15 seconds", "body": "<p>Every time you call the <code>shark</code> function, it loads another copy of the texture. With that in a loop like you have it, you will run out of video memory quickly (unless you are calling <code>SDL_DestroyTexture</code> after every frame, which you have not indicated). At which point, you will no longer be able to load textures. Apparently this takes about fifteen seconds for you.</p>\n\n<p>If you're going to use the same image over and over, then just load it once, before your main loop.</p>\n"}], "owner": {"reputation": 3, "user_id": 4996974, "user_type": "registered", "profile_image": "https://graph.facebook.com/928117250578737/picture?type=large", "display_name": "Danaa Mograine", "link": "https://stackoverflow.com/users/4996974/danaa-mograine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "accepted_answer_id": 30769162, "answer_count": 2, "score": 0, "last_activity_date": 1433981869, "creation_date": 1433978502, "question_id": 30768985, "link": "https://stackoverflow.com/questions/30768985/sdl-image-disappears-after-15-seconds", "title": "SDL image disappears after 15 seconds", "body": "<p>I'm learning SDL and I have a frustrating problem. Code is below. </p>\n\n<p>Even though there is a loop that keeps the program alive, when I load an image and change the x value of the source rect to animate, the image that was loaded disappears after exactly 15 seconds. This does not happen with static images. Only with animations. I'm sure there is a simple thing I'm missing but I cant see it.</p>\n\n<pre><code>void update(){\n    rect1.x = 62 * int ( (SDL_GetTicks() / 100) % 12); \n    /* 62 is the width of a frame, 12 is the number of frames */\n}\n\nvoid shark(){\n\n    surface = IMG_Load(\"s1.png\");\n    if (surface != 0){\n        texture = SDL_CreateTextureFromSurface(renderer,surface);\n            SDL_FreeSurface(surface);\n    }\n\n    rect1.y = 0;\n\n    rect1.h = 90;\n    rect1.w = 60;\n\n    rect2.x = 0;\n    rect2.y = 0;\n\n    rect2.h = rect1.h+30; // enlarging the image\n    rect2.w = rect1.w+30;\n\n    SDL_RenderCopy(renderer,texture,&amp;rect1,&amp;rect2);\n}\n\nvoid render(){\n    SDL_SetRenderDrawColor(renderer, 0, 0, 100, 150);\n    SDL_RenderPresent(renderer);\n    SDL_RenderClear(renderer);\n}\n</code></pre>\n\n<p>and in main </p>\n\n<pre><code>   update();\n   shark();\n   render();\n</code></pre>\n\n<p>SDL_image header is included, linked, dll exists. Could be the dll is broken?</p>\n\n<p>I left out rest of the program to keep it simple. If this is not enough, I can post the whole thing.</p>\n"}, {"tags": ["c++", "pointers", "inheritance", "derived-class", "base-class"], "comments": [{"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 0, "creation_date": 1433977721, "post_id": 30768818, "comment_id": 49589724, "body": "That here, <code>D* dp; dp-&gt;print();</code> is undefined behaviour. It can print anything or nothing."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "edited": false, "score": 1, "creation_date": 1433977787, "post_id": 30768818, "comment_id": 49589744, "body": "When you &quot;create a pointer to derived class&quot; it does not create <i>any object</i> whatsoever (excluding the pointer itself)."}, {"owner": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "edited": false, "score": 0, "creation_date": 1433977894, "post_id": 30768818, "comment_id": 49589776, "body": "Then how come the size of the memory which dp is pointing to is 8. Thats what i am wondering."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 0, "creation_date": 1433977923, "post_id": 30768818, "comment_id": 49589787, "body": "Related question: how comes it doesn&#39;t format your hard drive?"}, {"owner": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "reply_to_user": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 0, "creation_date": 1433977996, "post_id": 30768818, "comment_id": 49589809, "body": "@davidhigh lol i know the power of pointers though.. They are weirdly awesome."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 0, "creation_date": 1433978064, "post_id": 30768818, "comment_id": 49589830, "body": "Seriously; it is possible that the uninitialized <code>dp</code> points to your formerly created object. Check it via printing <code>dp</code> vs <code>&amp;d</code>."}], "answers": [{"tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": false, "score": 5, "last_activity_date": 1433977769, "creation_date": 1433977769, "answer_id": 30768856, "question_id": 30768818, "link": "https://stackoverflow.com/questions/30768818/does-pointer-to-derived-class-create-the-base-class-first-or-not/30768856#30768856", "title": "Does pointer to derived class create the Base class first or not?", "body": "<p>Pointers do not create anything. Pointers are just pointers - scalar objects that contain addresses. It is your responsibility to make your pointers to point to proper locations in memory.</p>\n\n<p>In your example pointer <code>dp</code> is not initialized. You never made it to point anywhere, so it points nowhere. Your attempt to call <code>dp-&gt;print()</code> produces undefined behavior. End of story.</p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 3, "last_activity_date": 1433982334, "last_edit_date": 1433982334, "creation_date": 1433977951, "answer_id": 30768887, "question_id": 30768818, "link": "https://stackoverflow.com/questions/30768818/does-pointer-to-derived-class-create-the-base-class-first-or-not/30768887#30768887", "title": "Does pointer to derived class create the Base class first or not?", "body": "<p>Right now your pointer isn't be initialized at all, so trying to use it gives undefined behavior. Try something like: </p>\n\n<pre><code>D *dp = new D; \ndp-&gt;print();\ndelete dp;\n</code></pre>\n\n<p>Or to do it better, something like:</p>\n\n<pre><code>std::unique_ptr&lt;D&gt; dp = std::make_unique&lt;D&gt;();\ndp-&gt;print();\n</code></pre>\n\n<p>...and the <code>unique_ptr</code> will automatically delete the <code>D</code> when it goes out of scope.</p>\n\n<p>Note, however, that you've define <code>print</code> as a non-virtual function, so the function that's invoked will depend on the type of pointer (or reference) used, <em>not</em> the type of the object it refers to. In addition, you haven't defined a virtual dtor.</p>\n\n<p>Therefore, if you were to do something like:</p>\n\n<pre><code>B *p = std::make_unique&lt;D&gt;();\np-&gt;print(); // would invoke B::print, even though the object is a D\n</code></pre>\n\n<p>...and when it went out of scope, it would be destroyed incorrectly so you'd get undefined behavior. To correct this, you want to change B to something like this:</p>\n\n<pre><code>class B{\n    int i;\n    public:\n    B(){\n        cout &lt;&lt; \"Constructing B\\n\";\n    }\n    virtual void print(){\n        cout &lt;&lt; \"Printing from B with size : \"&lt;&lt;sizeof(*this)&lt;&lt;endl;\n    }\n    virtual ~B() = default;\n};\n</code></pre>\n\n<p>When you do this, the answer is \"yes\"--when you create the derived object, it'll first invoke the ctor for the base class, then the ctor for the derived class. When the derived object is destroyed, that is reversed: first the dtor for the derived class will be invoked, then when it finishes the dtor for the base class will execute.</p>\n"}, {"tags": [], "owner": {"reputation": 1498, "user_id": 2797746, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/TaPVN.jpg?s=128&g=1", "display_name": "Alexandre Severino", "link": "https://stackoverflow.com/users/2797746/alexandre-severino"}, "is_accepted": false, "score": 2, "last_activity_date": 1433978018, "creation_date": 1433978018, "answer_id": 30768899, "question_id": 30768818, "link": "https://stackoverflow.com/questions/30768818/does-pointer-to-derived-class-create-the-base-class-first-or-not/30768899#30768899", "title": "Does pointer to derived class create the Base class first or not?", "body": "<p>You can assign a pointer of <code>Base</code> with a <code>Derived</code> object by using the powerful <strong>polymorphism</strong>. That is possible because <code>Derived</code> implements everything that <code>Base</code> contains. Thus, it is implicit that <code>Derived</code> underlying instantiates the <code>Base</code> during its own instantiation.</p>\n\n<pre><code>class Base\n{\npublic:\n    Base()\n    {}\n}\n\nclass Derived : public Base\n{\npublic:\n    Derived()\n    {}\n}\n\nDerived *derived = new Derived();\nBase *base = derived;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2942, "user_id": 4821282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66fcf596fdff8b28c477a9105501c8a2?s=128&d=identicon&r=PG&f=1", "display_name": "phantom", "link": "https://stackoverflow.com/users/4821282/phantom"}, "is_accepted": false, "score": 3, "last_activity_date": 1433978441, "creation_date": 1433978441, "answer_id": 30768973, "question_id": 30768818, "link": "https://stackoverflow.com/questions/30768818/does-pointer-to-derived-class-create-the-base-class-first-or-not/30768973#30768973", "title": "Does pointer to derived class create the Base class first or not?", "body": "<p>It is constructing the base class before the derived class. Your output reflects this. Look at this</p>\n\n<pre><code>//Constructs Base class\nConstructing B\n//Constructs Derived class\nConstructing D\n//Prints from derived\nPrinting from D with size : 8\n</code></pre>\n\n<p>The reason that your code prints <code>Printing from D with size : 8</code> twice without calling the constructor is that your code never creates a second instance of <code>D</code>.</p>\n\n<pre><code>D* d;\n^^^^ Declares a pointer to a D, Does not create a D!\n</code></pre>\n\n<p>When you call <code>d-&gt;print();</code> it is undefined behavior as <code>d</code> does not point to an instance of <code>D</code>. Finally, your code prints a value determined at compile time (<code>sizeof(D)</code> is a compile time value) and does not touch the <code>this</code> pointer your code runs. </p>\n\n<p>See the documentation for <code>sizeof</code> <a href=\"http://en.cppreference.com/w/cpp/language/sizeof\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 30768887, "answer_count": 4, "score": 2, "last_activity_date": 1433982334, "creation_date": 1433977546, "question_id": 30768818, "link": "https://stackoverflow.com/questions/30768818/does-pointer-to-derived-class-create-the-base-class-first-or-not", "title": "Does pointer to derived class create the Base class first or not?", "body": "<p>I have the following code</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass B{\n    int i;\n    public:\n    B(){\n        cout &lt;&lt; \"Constructing B\\n\";\n    }\n    void print(){\n        cout &lt;&lt; \"Printing from B with size : \"&lt;&lt;sizeof(*this)&lt;&lt;endl;\n    }\n};\n\n\n\nclass D:public B{\n    int i;\n    public:\n    D(){\n        cout &lt;&lt; \"Constructing D\\n\";\n    }\n    void print(){\n        cout &lt;&lt; \"Printing from D with size : \"&lt;&lt;sizeof(*this)&lt;&lt;endl;\n    }\n};\n\n\nint main(){\n\n    B b;\n    b.print();\n    D d;\n    d.print();\n\n    D* dp;\n    dp-&gt;print();\n}\n</code></pre>\n\n<p>Which gives me following output:</p>\n\n<pre><code>Constructing B\nPrinting from B with size : 4\nConstructing B\nConstructing D\nPrinting from D with size : 8\nPrinting from D with size : 8\n</code></pre>\n\n<p>So is it true that while you create a pointer to derived class it doesn't create the instance of a base class first? I don't think its true though because the size of D class is the proof. But its not even calling the base class constructor. Can anyone explain this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1433977498, "post_id": 30768735, "comment_id": 49589647, "body": "Please realize that <code>SomeType&lt;T&gt;</code> and a <code>SomeType&lt;U&gt;</code> are two completely different types.  Therefore you can&#39;t access the private member variable since the types are unrelated.  So your issue isn&#39;t a template issue"}, {"owner": {"reputation": 23, "user_id": 4996215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f1fd61cb2ca84df906b569f6e28b473?s=128&d=identicon&r=PG&f=1", "display_name": "Taki", "link": "https://stackoverflow.com/users/4996215/taki"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1433980671, "post_id": 30768735, "comment_id": 49590593, "body": "I always knew that those are different types, but I thought that something with the templates was cause of  the problem. I&#39;ll keep that in mind next time, thanks."}], "answers": [{"tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": true, "score": 3, "last_activity_date": 1433977424, "creation_date": 1433977424, "answer_id": 30768795, "question_id": 30768735, "link": "https://stackoverflow.com/questions/30768735/constructor-with-another-template-class-as-a-parameter-in-c/30768795#30768795", "title": "Constructor with another template class as a parameter in C++", "body": "<p>Just declare the class as friend:</p>\n\n<pre><code>template &lt;typename Type&gt;\nclass SomeClass {\n    Type p;\npublic:\n   template &lt;typename Type2&gt; friend class SomeClass;\n    SomeClass(Type x) { p = x; }\n    template &lt;typename Type2&gt;\n        SomeClass(SomeClass&lt;Type2&gt; k) { p = k.p; }\n    Type GetP() { return p; }\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/1864f4b651c7104d\" rel=\"nofollow\"><em>LIVE DEMO</em></a></p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 4996215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f1fd61cb2ca84df906b569f6e28b473?s=128&d=identicon&r=PG&f=1", "display_name": "Taki", "link": "https://stackoverflow.com/users/4996215/taki"}, "edited": false, "score": 0, "creation_date": 1433979842, "post_id": 30768846, "comment_id": 49590352, "body": "The getter will solve this problem, but it seems that declaring the class as a friend will solve my problems with more complex types. I appreciate your effort."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1433977726, "creation_date": 1433977726, "answer_id": 30768846, "question_id": 30768735, "link": "https://stackoverflow.com/questions/30768735/constructor-with-another-template-class-as-a-parameter-in-c/30768846#30768846", "title": "Constructor with another template class as a parameter in C++", "body": "<p><code>SomeType&lt;T&gt;</code> and <code>SomeType&lt;U&gt;</code> are different type and so cannot access private (nor protected) member the other class.</p>\n\n<p>In your case, you may use your getter:</p>\n\n<pre><code>template &lt;typename Type2&gt;\nSomeClass(const SomeClass&lt;Type2&gt;&amp; k) { p = k.GetP(); }\n</code></pre>\n\n<p><a href=\"http://ideone.com/qhcSig\" rel=\"nofollow\">Live Demo</a></p>\n"}], "owner": {"reputation": 23, "user_id": 4996215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f1fd61cb2ca84df906b569f6e28b473?s=128&d=identicon&r=PG&f=1", "display_name": "Taki", "link": "https://stackoverflow.com/users/4996215/taki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 30768795, "answer_count": 2, "score": 2, "last_activity_date": 1433978427, "creation_date": 1433977011, "question_id": 30768735, "link": "https://stackoverflow.com/questions/30768735/constructor-with-another-template-class-as-a-parameter-in-c", "title": "Constructor with another template class as a parameter in C++", "body": "<p>I have this problem with template class. I want to make a constructor with another class as a parameter with a different type, but every time I try to initialize the attribute of the class I get error that it's private and I can't access it.\nI would appreciate any help.</p>\n\n<p>Here is the simple code:</p>\n\n<pre><code>template &lt;typename Type&gt;\nclass SomeClass {\n    Type p;\npublic:\n    SomeClass(Type x) { p = x; }\n    template &lt;typename Type2&gt;\n        SomeClass(SomeClass&lt;Type2&gt; k) { p = k.p; }\n    Type GetP() { return p; }\n};\n\nint main()\n{\n    SomeClass&lt;double&gt; c(2.4);\n    SomeClass&lt;int&gt; c1(c);\n    std::cout &lt;&lt; c1.GetP() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "casting"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1433977151, "post_id": 30768714, "comment_id": 49589517, "body": "Use a <code>unsigned long long int</code> or <code>uint64_t</code>, to make it fitting for 64 bit length pointers."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1433977277, "post_id": 30768714, "comment_id": 49589564, "body": "So, you are round-tripping an <code>int</code> through a <code>void*</code>, never vice versa, right?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1433977394, "post_id": 30768714, "comment_id": 49589607, "body": "And did using <code>intptr_t</code> actually solve the problem regarding the cast error? It&#39;s in fact the right type to use."}, {"owner": {"reputation": 4535, "user_id": 268006, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbd9d461a54696a1e51d697e38b3b96e?s=128&d=identicon&r=PG", "display_name": "Fake Name", "link": "https://stackoverflow.com/users/268006/fake-name"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1433977406, "post_id": 30768714, "comment_id": 49589610, "body": "@Deduplicator - Yep. Starts as an <code>int</code>, ends as an <code>int</code>. It has to pass through a library that only accepts <code>void*</code>, though it doesn&#39;t alter them (it&#39;s a C library with a C++ wrapper, which is why it likes <code>void*</code>)."}, {"owner": {"reputation": 4535, "user_id": 268006, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbd9d461a54696a1e51d697e38b3b96e?s=128&d=identicon&r=PG", "display_name": "Fake Name", "link": "https://stackoverflow.com/users/268006/fake-name"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1433977479, "post_id": 30768714, "comment_id": 49589640, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 - Yeah, it works with <code>intptr_t</code>, it&#39;s just I&#39;m not totally sure I&#39;m approaching the issue from the correct angle. <a href=\"http://stackoverflow.com/questions/9492798/using-intptr-t-instead-of-void\">this question</a> doesn&#39;t seem to imply that <code>intptr_t</code> is a great approach here (what is it for, otherwise?), but most of the other solutions I&#39;ve found involve a lot of rework which I&#39;m really uncomfortable doing considering the size of the existing codebase."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1433979341, "last_edit_date": 1433979341, "creation_date": 1433977945, "answer_id": 30768885, "question_id": 30768714, "link": "https://stackoverflow.com/questions/30768714/properly-casting-a-void-to-an-integer-in-c/30768885#30768885", "title": "Properly casting a `void*` to an integer in C++", "body": "<blockquote>\n  <p><em>\"Is this the correct, or even a sane approach given I'm stuck having to push data through a void pointer?\"</em></p>\n</blockquote>\n\n<p>Well, regarding <em>correct</em> and <em>sane</em> its seriously debatable, especially if you are the author of the code taking the <code>void*</code> in the interface.</p>\n\n<blockquote>\n  <p>I think using <code>intptr_t</code> is the correct intermediate here, since it's guaranteed to be large enough to contain the integral value of the void*, and once I have an integer value I can then truncate it without causing the compiler to complain.</p>\n</blockquote>\n\n<p>Yes, that's the right type to use with a <code>reinterpret_cast&lt;intptr_t&gt;</code>, but you'll need to be sure, that a <code>intptr_t</code> pointer type has been passed in, and the address is valid and doesn't go out of scope.</p>\n\n<hr>\n\n<p>It's not so unusual to stumble over this problem, when interacting with <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> API's, and these are offering <em>callbacks</em>, that allow you to pass in <em>user-data</em>, that will be handled transparently by them, and never are touched, besides of your entry points<sup>1</sup>.</p>\n\n<p>So it's left up to the client code being sure about how that <code>void*</code> should be <strong><em>re-interpreted</em></strong> safely.</p>\n\n<hr>\n\n<p><sup>1)</sup> <sub>A classical example for this kind of situation, is the <a href=\"http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_create.html\" rel=\"nofollow\"><code>pthread_create()</code></a> function</sub></p>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 4974284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5246b12aec75ff47efc93cddbd298f58?s=128&d=identicon&r=PG&f=1", "display_name": "BenV136", "link": "https://stackoverflow.com/users/4974284/benv136"}, "is_accepted": false, "score": 0, "last_activity_date": 1433978328, "creation_date": 1433978328, "answer_id": 30768956, "question_id": 30768714, "link": "https://stackoverflow.com/questions/30768714/properly-casting-a-void-to-an-integer-in-c/30768956#30768956", "title": "Properly casting a `void*` to an integer in C++", "body": "<p>You have little choice but to use static and reinterpret cast here. Casting to an int will result in loss of precision, which is never ideal. Explicitly casting is always best avoided, because sooner or later what is being casted can change and there will be no compiler warnings then. But in this case you understandably have no choice. Or do you?</p>\n\n<p>You can change the callback definitions on your side to be intptr_t or long int rather than void*, and it should then work and you will not have to do any type casts... </p>\n"}, {"comments": [{"owner": {"reputation": 4535, "user_id": 268006, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbd9d461a54696a1e51d697e38b3b96e?s=128&d=identicon&r=PG", "display_name": "Fake Name", "link": "https://stackoverflow.com/users/268006/fake-name"}, "edited": false, "score": 0, "creation_date": 1433980454, "post_id": 30768982, "comment_id": 49590533, "body": "The values are basically integer constants in the code which are used to select the a further function-call  in the callback. They&#39;re compile-time defined, and don&#39;t even exceed 10 in any case. As to why the (apparently slightly nuts) original author didn&#39;t just register a different callback for each option (the functions are even defined!) I don&#39;t know."}], "tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 5, "last_activity_date": 1433978488, "creation_date": 1433978488, "answer_id": 30768982, "question_id": 30768714, "link": "https://stackoverflow.com/questions/30768714/properly-casting-a-void-to-an-integer-in-c/30768982#30768982", "title": "Properly casting a `void*` to an integer in C++", "body": "<blockquote>\n  <p>I think using <code>intptr_t</code> is the correct intermediate here, since it's guaranteed to be large enough to contain the integral value of the <code>void*</code>, and once I have an integer value I can then truncate it without causing the compiler to complain.</p>\n</blockquote>\n\n<p>Yes, for the reason you mentioned that's the proper intermediate type. By now, if your implementation doesn't offer it, you probably have more problems than just a missing typedef.</p>\n\n<blockquote>\n  <p>Is this the correct, or even a sane approach given I'm stuck having to push data through a void pointer?</p>\n</blockquote>\n\n<p>Yes, given the constraints, it's quite sane.<br>\nYou might consider checking the value fits instead of simply truncating it upon unpacking it from the <code>void*</code> in debug-mode, or even making all further processing of that integer use <code>intptr</code> instead of <code>int</code> to avoid truncation.</p>\n\n<p>You could also consider pushing a pointer to an actual <code>int</code> instead of the <code>int</code> itself though that parameter. Be aware that's less efficient though, and opens you to lifetime issues.</p>\n"}, {"tags": [], "owner": {"reputation": 940, "user_id": 3402566, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bd3c4c987c67bdcdd9a20e4727b552f8?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Mertin", "link": "https://stackoverflow.com/users/3402566/nick-mertin"}, "is_accepted": false, "score": 4, "last_activity_date": 1434022963, "last_edit_date": 1434022963, "creation_date": 1433979770, "answer_id": 30769182, "question_id": 30768714, "link": "https://stackoverflow.com/questions/30768714/properly-casting-a-void-to-an-integer-in-c/30769182#30769182", "title": "Properly casting a `void*` to an integer in C++", "body": "<p>Based on your question, I am assuming that you call a function in some library, passing it a <code>void*</code>, and at some point later in time, it calls one of your functions, passing it that same <code>void*</code>.</p>\n\n<p>There are basically two possible ways to do this; the first is through explicit casting, as you showed in your current code.</p>\n\n<p>The other, which Deduplicator alluded to, is a little less efficient, but allows you to maintain control of the data, and possibly modify it between when you call the library function, and when it calls your callback function. This could be achieved with code similar to this:</p>\n\n<pre><code>void callbackFunction(void* dataPtr){\n    int data = *(int*)dataPtr;\n    /* DO SOMETHING WITH data */\n    delete dataPtr;\n}\nvoid callLibraryFunction(int dataToPass){\n    int* ptrToPass = new int(dataToPass);\n    libraryFunction(ptrToPass,callbackFunction);\n}\n</code></pre>\n\n<p>Which one you should use depends on what you need to do with the data, and whether the ability to modify the data could be useful in the future.</p>\n"}], "owner": {"reputation": 4535, "user_id": 268006, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbd9d461a54696a1e51d697e38b3b96e?s=128&d=identicon&r=PG", "display_name": "Fake Name", "link": "https://stackoverflow.com/users/268006/fake-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20331, "favorite_count": 3, "accepted_answer_id": 30768982, "answer_count": 4, "score": 8, "last_activity_date": 1434022963, "creation_date": 1433976921, "question_id": 30768714, "link": "https://stackoverflow.com/questions/30768714/properly-casting-a-void-to-an-integer-in-c", "title": "Properly casting a `void*` to an integer in C++", "body": "<p>I'm dealing with some code that uses an external library in which you can pass values to callbacks via a <code>void*</code> value.</p>\n\n<p>Unfortunately, the previous person working on this code decided to just pass integers to these callbacks by casting an integer to a void pointer (<code>(void*)val</code>).</p>\n\n<p>I'm now working on cleaning up this mess, and I'm trying to determine the \"proper\" way to cast an integer to/from a <code>void*</code>. Unfortunately, fixing the <em>use</em> of the void pointers is somewhat beyond the scope of the rework I'm able to do here.</p>\n\n<p>Right now, I'm doing two casts to convert from/to a void pointer:</p>\n\n<pre><code>static_cast&lt;int&gt;(reinterpret_cast&lt;intptr_t&gt;(void_p))\n</code></pre>\n\n<p>and </p>\n\n<pre><code>reinterpret_cast&lt;void *&gt;(static_cast&lt;intptr_t&gt;(dat_val))\n</code></pre>\n\n<p>Since I'm on a 64 bit machine, casting directly (<code>(int)void_p</code>) results in the error:</p>\n\n<pre><code>error: cast from 'void*' to 'int' loses precision [-fpermissive]\n</code></pre>\n\n<p>The original implementation <em>did</em> work with <code>-fpermissive</code>, but I'm trying to get away from that for maintainability and bug-related issues, so I'm trying to do this \"properly\", e.g. c++ casts.</p>\n\n<p>Casting directly to an int (<code>static_cast&lt;int&gt;(void_p)</code>) fails (<code>error: invalid static_cast from type 'void*' to type 'int'</code>). My understanding of <code>reinterpret_cast</code> is that it basically just causes the compiler to treat the address of the value in question as the cast-to data-type without actually emitting any machine code, so casting an <code>int</code> directly to a <code>void*</code> would be a bad idea because the <code>void*</code> is larger then the <code>int</code> (4/8 bytes respectively).</p>\n\n<p>I <em>think</em> using <code>intptr_t</code> is the correct intermediate here, since it's guaranteed to be large enough to contain the integral value of the <code>void*</code>, and once I have an integer value I can then truncate it without causing the compiler to complain.</p>\n\n<p>Is this the correct, or even a sane approach given I'm stuck having to push data through a void pointer?</p>\n"}, {"tags": ["c++", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1433976815, "post_id": 30768673, "comment_id": 49589408, "body": "Reference to a pointer."}], "answers": [{"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 2, "last_activity_date": 1433977383, "creation_date": 1433977383, "answer_id": 30768785, "question_id": 30768673, "link": "https://stackoverflow.com/questions/30768673/how-does-int-variablename-work/30768785#30768785", "title": "how does int*&amp; variableName work ?", "body": "<p><strong>Consider this:</strong></p>\n\n<pre><code>void func1(int* ip)\n{\n    // in here you have a COPY of the pointer ip\n    // if you change the value of ip it will be\n    // lost when the function ends (because it is a copy)\n}\n</code></pre>\n\n<p><strong>Then this:</strong></p>\n\n<pre><code>void func2(int*&amp; ip)\n{\n    // in here you have a REFERENCE to the pointer ip\n    // if you change the value of ip you are really\n    // changing the value of the pointer that the \n    // function was called with.\n}\n</code></pre>\n\n<p><strong>So now:</strong></p>\n\n<pre><code>int main()\n{\n    int* ip = new int;\n\n    // func1 can not change ip here (only its own copy)\n    func1(ip); \n\n    // If func2 changes ip we will see the change out here\n    // because it won't be a copy that changes it will be the \n    // one we passed in that gets changed.\n    func2(ip); \n\n    // etc...\n}\n</code></pre>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1433986229, "creation_date": 1433986229, "answer_id": 30770097, "question_id": 30768673, "link": "https://stackoverflow.com/questions/30768673/how-does-int-variablename-work/30770097#30770097", "title": "how does int*&amp; variableName work ?", "body": "<p>In this code it is being used as an output parameter.</p>\n\n<p>Here is a simpler example of using a reference as an output parameter:</p>\n\n<pre><code>void get_number(int &amp;x)\n{\n    x = 5;\n}\n\nint main()\n{\n    int y;\n    get_number(y);\n    cout &lt;&lt; y &lt;&lt; '\\n';   // prints 5\n}\n</code></pre>\n\n<p>In this code, <code>get_number</code> has one output parameter and no input parameters or return value.  </p>\n\n<p>Normally you would use the return value instead of a single output parameter, but sometimes the output parameter has its advantages.</p>\n"}], "owner": {"reputation": 307, "user_id": 4656495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-SoN5oXm5aZo/AAAAAAAAAAI/AAAAAAAAAFs/wGtk2brX-8c/photo.jpg?sz=128", "display_name": "wazeeer", "link": "https://stackoverflow.com/users/4656495/wazeeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 30768785, "answer_count": 2, "score": -2, "last_activity_date": 1433986229, "creation_date": 1433976732, "question_id": 30768673, "link": "https://stackoverflow.com/questions/30768673/how-does-int-variablename-work", "title": "how does int*&amp; variableName work ?", "body": "<p>My professor gave us the following code but i don't fully understand how int*&amp; works. My understanding is that the selectionSort function is passing back the address of the memory location where the array starts.</p>\n\n<pre><code>void SelectionSort(int* nums, unsigned int N, int*&amp; SortedNums);\nvoid SelectionSort(int* nums, unsigned int index);\n\n\n  int main(){\n  const unsigned int size = 12;\n  int array[size] = {3,5,7,13,31,56,8,4,2,5,7,4};\n  int* sorted;\n  cout &lt;&lt; \"in main: \" &lt;&lt; &amp;sorted &lt;&lt; endl;\n\n  SelectionSort(array, size, sorted);\n\n\n  for( unsigned int i =0; i &lt;size  ; i++){\n  cout &lt;&lt;  *(sorted+i) &lt;&lt; endl;\n  }\n  delete [] sorted;\n\n  return 0;\n  }\n\nvoid SelectionSort(int* nums, unsigned int N, int*&amp; SortedNums){\n     cout &lt;&lt; \"in fucnt: \" &lt;&lt; &amp;SortedNums&lt;&lt; endl;\n\n     SortedNums = new int[N];\n     for(unsigned int i= 0 ; i &lt; N ; i++ ){\n         *(SortedNums +i) = *(nums + i);\n     }\n\n  unsigned int numb_of_indexes = N-1; \n\n\n SelectionSort(SortedNums, numb_of_indexes);\n }\n\n void SelectionSort(int* nums, unsigned int index){\n     if(index ==1 ) return;\n\n     int smallestindex = smallestIndex(nums, index);\n     Swap(nums, smallestindex);\n     SelectionSort(nums+1, index-1);\n }\n</code></pre>\n"}, {"tags": ["c++", "shell", "mingw", "msys"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1433977380, "post_id": 30768671, "comment_id": 49589602, "body": "Like other questions asking &quot;is there a way to do X&quot; this one is too broad."}, {"owner": {"reputation": 1811, "user_id": 2595767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLCvI.png?s=128&g=1", "display_name": "Keith Marshall", "link": "https://stackoverflow.com/users/2595767/keith-marshall"}, "edited": false, "score": 1, "creation_date": 1433985336, "post_id": 30768671, "comment_id": 49591699, "body": "As you originally posed it, I didn&#39;t think this question was too broad at all; quite the opposite, in fact, and I might have offered an answer to that question. Now you&#39;ve changed its scope entirely, to something which I would have no interest whatsoever in addressing."}, {"owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "reply_to_user": {"reputation": 1811, "user_id": 2595767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLCvI.png?s=128&g=1", "display_name": "Keith Marshall", "link": "https://stackoverflow.com/users/2595767/keith-marshall"}, "edited": false, "score": 0, "creation_date": 1433986903, "post_id": 30768671, "comment_id": 49592079, "body": "@KeithMarshall, if you can post or outline a potential answer, I will roll the question back. I don&#39;t really think my question was broad either or care that others think it&#39;s too broad. I&#39;ve narrowed it down only because I am interested in seeking a solution. And a more general solution for MinGW/MSYS is certainly better in my book."}, {"owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "reply_to_user": {"reputation": 1811, "user_id": 2595767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLCvI.png?s=128&g=1", "display_name": "Keith Marshall", "link": "https://stackoverflow.com/users/2595767/keith-marshall"}, "edited": false, "score": 0, "creation_date": 1433987397, "post_id": 30768671, "comment_id": 49592189, "body": "@KeithMarshall Could you help edit my question to the original form you saw? I couldn&#39;t find a way to rollback my own edits."}, {"owner": {"reputation": 1811, "user_id": 2595767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLCvI.png?s=128&g=1", "display_name": "Keith Marshall", "link": "https://stackoverflow.com/users/2595767/keith-marshall"}, "edited": false, "score": 0, "creation_date": 1433988440, "post_id": 30768671, "comment_id": 49592439, "body": "I don&#39;t have sufficient privilege to do any more than <i>suggest</i> edits, so no, I can&#39;t really help you with that. If you click the <a href=\"http://stackoverflow.com/posts/30768671/revisions\">edited x hours ago</a> link below the question you should see the full editing history; your original question is <a href=\"http://stackoverflow.com/revisions/30768671/1\">here</a>"}, {"owner": {"reputation": 1811, "user_id": 2595767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLCvI.png?s=128&g=1", "display_name": "Keith Marshall", "link": "https://stackoverflow.com/users/2595767/keith-marshall"}, "edited": false, "score": 0, "creation_date": 1433989049, "post_id": 30768671, "comment_id": 49592576, "body": "Your specific case isn&#39;t really a <i>corner</i> case; more like just one specific example of a more generally useful technique, (and I&#39;ve answered in that more general sense). I don&#39;t know why this is attracting down votes; IMO, they are unwarranted."}, {"owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "edited": false, "score": 0, "creation_date": 1433989209, "post_id": 30768671, "comment_id": 49592623, "body": "I don&#39;t know. Maybe my language is bad:)"}], "answers": [{"tags": [], "owner": {"reputation": 1811, "user_id": 2595767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hLCvI.png?s=128&g=1", "display_name": "Keith Marshall", "link": "https://stackoverflow.com/users/2595767/keith-marshall"}, "is_accepted": true, "score": 1, "last_activity_date": 1433986952, "creation_date": 1433986952, "answer_id": 30770202, "question_id": 30768671, "link": "https://stackoverflow.com/questions/30768671/how-to-convert-a-msys-shell-script-into-a-windows-exe-file/30770202#30770202", "title": "How to convert a msys shell script into a windows exe file", "body": "<p>You originally asked this under the heading \"How [can I] convert an MSYS shell script to a Windows .exe?\"  In my opinion, that's a generally more useful (and quite specific) question to ask, than what you are now asking. On this basis, I will offer an answer to the original question.</p>\n\n<p>I know of no way in which you can simply <em>compile</em> an MSYS shell script, (or indeed <em>any</em> Bourne shell script), into a Windows executable, such that it may be invoked as a child of another executable. However, what you may be able to do is invoke the MSYS shell itself, as the child process, to interpret the script; the syntax you need is:</p>\n\n<pre><code>sh.exe -c 'script [argument ...]'\n</code></pre>\n\n<p>so, if you can configure your emacs clojure process to invoke the command in this fashion, you <em>may</em> achieve your objective.</p>\n\n<p>A word of caution, however: MSYS commands are intended to be run from within an already running, and properly initialized MSYS parent shell. If emacs is running as a child of such a shell, then this should work okay. However, if emacs is running as a purely native Windows process, outside of an MSYS environment, then <em>you</em> have to take care of initialization[*], when you invoke the child shell. If you see error messages such as <em>\"resource unavailable\"</em>, <em>\"resource temporarily unavailable\"</em>, or <em>\"cannot reserve space for cygwin's heap\"</em>, (yes, MSYS is derived from an early cygwin release, and the text of this message was never changed), that's a fairly certain indicator that the shell environment is not properly initialized.</p>\n\n<p>[*] Effectively, you need to reproduce the initialization steps which are performed by the msys.bat command script, which accompanies any MSYS installation.</p>\n"}], "owner": {"reputation": 18780, "user_id": 683218, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/7Vy7c.png?s=128&g=1", "display_name": "tinlyx", "link": "https://stackoverflow.com/users/683218/tinlyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 30770202, "answer_count": 1, "score": -1, "last_activity_date": 1433988597, "creation_date": 1433976729, "last_edit_date": 1433988597, "question_id": 30768671, "link": "https://stackoverflow.com/questions/30768671/how-to-convert-a-msys-shell-script-into-a-windows-exe-file", "title": "How to convert a msys shell script into a windows exe file", "body": "<p>Is there a generic way to convert a shell script under MSYS/MinGW into a windows <code>.exe</code> file (which calls the shell script behind the scene)?</p>\n\n<p>The specific problem I am facing is that I have a shell script <code>lein</code> from Leiningen (clojure tool chain). I installed it to the default path at <code>/usr/local/bin</code> (note: I used the shell script version for MSYS, and didn't want to install <code>lein</code> command outside the MinGW/MSys tree).</p>\n\n<p>Now emacs cider cannot pick up the <code>lein</code> script although <code>lein</code> is on the windows path and <code>exec-path</code>. If I copy <code>lein</code> into a fake <code>lein.exe</code></p>\n\n<pre><code>cd /usr/local/bin &amp;&amp; cp lein lein.exe\n</code></pre>\n\n<p>then, <code>cider</code> recognizes <code>lein.exe</code>. But of course, <code>cider</code> couldn't load it because it's not a valid <code>exe</code>.</p>\n\n<p>Hence, my question. Is there a generic way I can convert a shell script like <code>lein</code> into a windows executable, e.g. by writing a proxy c++ program?</p>\n\n<p>Thanks.</p>\n\n<p>-- EDIT ---</p>\n\n<p>(Thoughts after seeing the downvotes).</p>\n\n<p>I know this is a corner case and maybe not something you do everyday, and but this is the best solution I can identify so far for making a workable clojure tool chain in MinGW/MSYS. </p>\n"}, {"tags": ["c++", "this", "multiple-inheritance", "virtual-functions", "vtable"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1433976669, "post_id": 30768589, "comment_id": 49589354, "body": "Isn&#39;t this essentially a duplicate of your previous (unanswered) <a href=\"http://stackoverflow.com/questions/30766982/virtual-method-table-for-multiple-inheritance\">question</a>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1433976834, "post_id": 30768589, "comment_id": 49589415, "body": "<i>&quot;... of what <b>Bjarne</b> tried ...&quot;</i> Cool, you&#39;re that kinda familiar with him ;-) ..."}], "answers": [{"comments": [{"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "reply_to_user": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "edited": false, "score": 0, "creation_date": 1434025655, "post_id": 30768666, "comment_id": 49611478, "body": "@FihopZz: The compiler doesn&#39;t generate a thunk unless it needs to. But it must generate a new thunk every time it either calls a different function or needs to have a different offset."}, {"owner": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "edited": false, "score": 0, "creation_date": 1434038882, "post_id": 30768666, "comment_id": 49621741, "body": "For <code>A* p = new C(); p-&gt;f()</code>, please verify me. <code>p-&gt;vtable-&gt;f(p)</code>, (A&#39;s vtable and function pointer) since <code>A</code> pointer starts from the same address as <code>C</code> pointer, <code>p</code> actually points to the start address of the <code>C</code> object. So <code>p-&gt;vtable-&gt;f(p)</code> already finished the job. There is no need to generate a thunk?"}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "reply_to_user": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "edited": false, "score": 0, "creation_date": 1434146808, "post_id": 30768666, "comment_id": 49673761, "body": "Not in that case, no. But there are plenty of cases where A and C do not start from the same address."}], "tags": [], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": true, "score": 2, "last_activity_date": 1433976674, "creation_date": 1433976674, "answer_id": 30768666, "question_id": 30768589, "link": "https://stackoverflow.com/questions/30768589/understanding-of-multiple-inheritance-for-c/30768666#30768666", "title": "understanding of multiple inheritance for c++", "body": "<p>It <em>is</em> a <code>C*</code>, it's just not typed as such.</p>\n\n<p>Frankly, that's a pretty terrible explanation and not really how it's done. It's a lot better and easier to store function pointers in the vtable.</p>\n\n<pre><code>struct vtbl {\n    void(*f)(B* b);\n};\nstruct B {\n   vtbl* vtable;\n};\n// Invoke function:\nB* p = init();\np-&gt;vtable-&gt;f(p);\n// Function pointer points to:\nvoid f_thunk(B* b) {\n    C* c = (char*)b - delta(B);\n    C::f(c);\n}\n</code></pre>\n\n<p>When the compiler generates the thunks, it knows the derived object they're thunking to, so they don't need to store the offset in the vtable. The compiler can simply offset the pointer inside the thunk and then delegate to the appropriate method with the pointer. Of course, this thunk is pretty much generated assembly only without any C++ representation, so it would be invalid to state that that the pointers within have any particular C++ type.</p>\n"}, {"comments": [{"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1433976975, "post_id": 30768691, "comment_id": 49589463, "body": "There&#39;s no reason why a person should not attempt to understand the most common implementation techniques."}, {"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "reply_to_user": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1433977127, "post_id": 30768691, "comment_id": 49589507, "body": "@Puppy Except keeping whats left of your sanity, that is a pretty good reason. :)"}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "edited": false, "score": 1, "creation_date": 1433977472, "post_id": 30768691, "comment_id": 49589637, "body": "I agree, It&#39;s worth a historical note that the first C++ compilers compiled to C source (which was then itself compiled). I thoroughly enjoy Stroustrup&#39;s writing but he has a tendency to explain things from the point of view of someone inside looking out not outside looking in. He sometimes explains how things work by how he implemented them and assumes you&#39;re a totally fluent C programmer before you even start. Ironic that such an evangelist of abstraction and data hiding shows a habit of giving concrete implementations and exposing data!"}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 1, "last_activity_date": 1433976820, "creation_date": 1433976820, "answer_id": 30768691, "question_id": 30768589, "link": "https://stackoverflow.com/questions/30768589/understanding-of-multiple-inheritance-for-c/30768691#30768691", "title": "understanding of multiple inheritance for c++", "body": "<p>You're getting lost in the weeds here.</p>\n\n<p>Are you trying to write your own C++ compiler? If so, feel free to ignore me. But if you're just trying to understand and learn C++ virtual inheritance, which is what it sounds like, none of what you wrote matters much.</p>\n\n<p>Only compiler writers need to fully understand and figure out how the vtbl works, in all the gory details, in order to actually implement C++. It is not needed to effectively program and develop in C++. All that needs to be understood is how virtual inheritance works, from purely the class's viewpoint. As long as you understand that when invoking <code>pb</code>'s method you're actually ending up invoking <code>C</code>'s method, and why (with the why being simply \"because it is actually an instance of <code>C</code>), that's pretty much all that needs to be understood.</p>\n\n<p>Oh, and your class should probably have a virtual destructor, but that's a different story.</p>\n\n<p>The vtbl is typically not even accessible by C++ code. And the C++ standard does not even require a C++ compiler to actually implement anything that's called \"vtable\". The only requirement is a specification for how virtual inheritance, and virtual method calls must work. Any actual implementation that produces the same results is compliant.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1433993951, "last_edit_date": 1495541158, "creation_date": 1433993951, "answer_id": 30771140, "question_id": 30768589, "link": "https://stackoverflow.com/questions/30768589/understanding-of-multiple-inheritance-for-c/30771140#30771140", "title": "understanding of multiple inheritance for c++", "body": "<blockquote>\n  <p>I'm totally confused here. Why <code>(B*)</code> not a <code>(C*)</code> in (*vt->fct)</p>\n</blockquote>\n\n<p>At that level, the only known type is <code>B</code>. The actual object could be of type <code>C</code>, <code>Foo</code>, or <code>Bar</code>.</p>\n\n<p>However, that paper is a bit dated. Actual implementations in modern compiler could be very different. <a href=\"https://stackoverflow.com/a/30768666/434551\">@Puppy's answer</a> shows how it can be done without adding <code>delta(B)</code> to the vtable.</p>\n"}], "owner": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 30768666, "answer_count": 3, "score": 0, "last_activity_date": 1433993951, "creation_date": 1433976285, "question_id": 30768589, "link": "https://stackoverflow.com/questions/30768589/understanding-of-multiple-inheritance-for-c", "title": "understanding of multiple inheritance for c++", "body": "<p>I'm reading <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CB4QFjAAahUKEwjjr_G4mIbGAhXCbK0KHbcbCr0&amp;url=http%3A%2F%2Fwww.usenix.org%2Fpublications%2Fcompsystems%2F1989%2Ffall_stroustrup.pdf&amp;ei=Srx4VePiMMLZtQW3t6joCw&amp;usg=AFQjCNHPqDyiu0Gc700VQ-3h_98GX0A_Ig&amp;sig2=L2OiChU2Vpbzufivj0-Rpw&amp;bvm=bv.95277229,d.b2w\" rel=\"nofollow\">multiple inheritance for c++</a>\nAn Example in the paper:(page 377)</p>\n\n<pre><code>class A {virtual void f();};\nclass B {virtual void f(); virtual void g();};\nclass C: A, B {void f();};\nA* pa = new C;\nB* pb = new C;\nC* pc = new C;\npa-&gt;f();\npb-&gt;f();\npc-&gt;f();\npc-&gt;g()\n</code></pre>\n\n<p>(1) Bjarne wrote: On entry to <code>C::f</code>, the <code>this</code> pointer must point to the beginning of the <code>C</code> object (and not to the <code>B</code> part). However, it is not in general known at compile time that the <code>B</code> pointed to by <code>pb</code> is part of a <code>C</code> so the compiler cannot subtract the constant <code>delta(B)</code>. So we have to store the delta(B) for the runtime which is actually stored with the vtbl. So the vtbl entry now looks like:</p>\n\n<pre><code>struct vtbl_entry {\n    void (*fct)();\n    int  delta;\n}\n</code></pre>\n\n<p>An object of class c will look like this:</p>\n\n<pre><code>----------             vtbl: \n   vptr --------------&gt;-----------------------\n   A part                C::f   | 0 \n----------             -----------------------   \n   vptr --------------&gt;----------------------- \n   B part                C::f   | -delta(B)\n----------               B::g   | 0\n   C part              -----------------------\n----------\n</code></pre>\n\n<p>Bjarne wrote:</p>\n\n<pre><code>pb-&gt;f() // call of C::f:\nregister vtbl_entry* vt = &amp;pb-&gt;vtbl[index(f)];\n(*vt-&gt;fct)((B*)((char*)pb+vt-&gt;delta)) //vt-&gt;delta is a negative number I guess\n</code></pre>\n\n<p>I'm totally confused here. Why <strong>(B*)</strong> not a <strong>(C*)</strong> in <code>(*vt-&gt;fct)((B*)((char*)pb+vt-&gt;delta))</code>???? Based on my understanding and Bjarne's introduction at the first sentence at 5.1 section at 377 page, we should pass a C* as <code>this</code> here!!!!!!  </p>\n\n<p>Followed by the above code snippet, Bjarne continued writing: \nNote that the object pointer may have to be adjusted to po\nint to the correct sub-object before looking for the member pointing to the vtbl. </p>\n\n<p>Oh, Man!!! I totally have no idea of what Bjarne tried to say? Can you help me explain it? </p>\n"}, {"tags": ["c++", "windows", "winapi", "compilation", "midi"], "comments": [{"owner": {"reputation": 131, "user_id": 4924838, "user_type": "registered", "profile_image": "https://graph.facebook.com/847139983087/picture?type=large", "display_name": "Chuckk Hubbard", "link": "https://stackoverflow.com/users/4924838/chuckk-hubbard"}, "edited": false, "score": 0, "creation_date": 1433976913, "post_id": 30768567, "comment_id": 49589440, "body": "Specifically: <code>C:\\MinGW\\bin&gt;&quot;g++.exe&quot; -Wall -D__WINDOWS_MM__ -I&quot;C:\\MinGW\\include&quot; -I&quot;C:\\Users\\chuckk\\Downloads\\rtmidi-2.1.0\\tests&quot; -L&quot;C:\\Users\\chuckk\\Downloads\\rtmidi-2.1.0\\tests&quot; -o midiprobe C:\\Users\\chuckk\\Downloads\\rtmidi-2.1.0\\tests\\midiprobe.cpp C:\\Users\\chuckk\\Downloads\\rtmidi-2.1.0\\tests\\RtMidi.cpp</code> gives: <code>C:\\Windows\\TEMP\\ccQsL07P.o:RtMidi.cpp:(.text+0x11c9): undefined reference to </code>midiInAddBuffer@12&#39;` midiInAddBuffer IS defined in mmsystem.h, included by RtMidi.cpp and in C:\\MinGW\\include. Why is it telling me it&#39;s undefined? Later ld.exe fails with 1, but doesn&#39;t say where."}, {"owner": {"reputation": 131, "user_id": 4924838, "user_type": "registered", "profile_image": "https://graph.facebook.com/847139983087/picture?type=large", "display_name": "Chuckk Hubbard", "link": "https://stackoverflow.com/users/4924838/chuckk-hubbard"}, "edited": false, "score": 0, "creation_date": 1434010281, "post_id": 30768567, "comment_id": 49600843, "body": "I figured out a step. libwinmm.a is in MinGW/lib. For some reason, however a search for &#39;winmm&#39; in that folder comes up with no results. I couldn&#39;t find it until I searched each folder. I added that folder and library, and those particular undefined references went away. Now I&#39;m stuck on this: <a href=\"http://stackoverflow.com/questions/7751640/undefined-reference-to-gxx-personality-sj0\" title=\"undefined reference to gxx personality sj0\">stackoverflow.com/questions/7751640/&hellip;</a> so I will try to make sense of the suggestions there."}, {"owner": {"reputation": 459, "user_id": 1095967, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/PBlPi.jpg?s=128&g=1", "display_name": "MaxRussell", "link": "https://stackoverflow.com/users/1095967/maxrussell"}, "edited": false, "score": 0, "creation_date": 1515867763, "post_id": 30768567, "comment_id": 83468290, "body": "I&#39;m trying to compile rtmidi on win 7 as part of a dependency (for VCVRack). I&#39;ve tried using the --with-winmm option on configure, but it fails. I&#39;ve tried modifying the makefile to use: AC_MSG_RESULT(using WinMM)     LIBS=&quot;-lwinmm ${LIBS}&quot;     api=&quot;$api -D__WINDOWS_MM__&quot;  how (if you did) did you get this to configure and compile?"}], "owner": {"reputation": 131, "user_id": 4924838, "user_type": "registered", "profile_image": "https://graph.facebook.com/847139983087/picture?type=large", "display_name": "Chuckk Hubbard", "link": "https://stackoverflow.com/users/4924838/chuckk-hubbard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 865, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1433976193, "creation_date": 1433976193, "question_id": 30768567, "link": "https://stackoverflow.com/questions/30768567/compiling-or-using-rtmidi-on-windows-7", "title": "Compiling or using RtMidi on Windows 7", "body": "<p>The docs for RtMidi have example compiler commands for Linux and OSX, but not Windows. It just says that it depends on the compiler. I can find no such example anywhere on the Internet.</p>\n\n<p>I am trying every combination I can think of and finding that RtMidi.cpp in fact references things that are supposed to be in the Windows API, but my computer isn't finding them. The docs say winmm.lib is needed, but this doesn't exist for me; winmm.dll does, but it will not link. I'm using MinGW. The RtMidi documentation offers no information on how to compile a sample program with RtMidi on Windows. First it says to use MinGW, then it says to use a VisualStudio project, but there is no actual example of a command in either case. I have been reading for days, searching through header files, debugging, and in my searches I keep seeing references on this site to other people having problems using RtMidi - but who have compiled it. I am only using g++ as provided by MinGW; I don't want to create a project file, configure, make, etc., as the program I want to make will have about 100 lines of code. I tried doing configure and make from MSYS, but it gave me a Unix executable.</p>\n\n<p>Thank you for any insight.</p>\n"}, {"tags": ["c++", "qt", "hashcode", "dynamic-cast", "typeinfo"], "owner": {"reputation": 408, "user_id": 3033051, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/059a0639536708636a8dbf1165207d7b?s=128&d=identicon&r=PG&f=1", "display_name": "brahmin", "link": "https://stackoverflow.com/users/3033051/brahmin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1434386417, "creation_date": 1433976188, "last_edit_date": 1434386417, "question_id": 30768565, "link": "https://stackoverflow.com/questions/30768565/c-what-can-make-type-infohash-code-differs-for-two-supposedly-same-objects", "title": "C++ what can make type_info::hash_code differs for two (supposedly) same objects", "body": "<p>After trying to debug an unsuccessful dynamic downcasting, I eventually found that the reason probably is: type_info::hash_code for the type it is casted to is not the same depending where in the code it is called. type_info::name stays exactly the same though.\nUnfortunately I'm unable to reproduce the behavior in a minimal example since it appears in a quite entangled context. Therefore I'm essentially looking for clues of what can be the cause of such behavior, and consequently what direction I can take to solve this.</p>\n\n<p>In short, if related, type looks like this (EDITED):</p>\n\n<pre><code>class A {...}\n\ntemplate &lt; template &lt;class&gt; class&gt;\nclass B : virtual public A {...}\n\ntemplate &lt; template &lt;class&gt; class&gt;\nclass C : virtual public A {...}\n\ntemplate &lt; template &lt;class&gt; class&gt;\nclass D : public B, public C {...}\n\ntemplate &lt;class&gt;\nclass E {...}\n</code></pre>\n\n<p>Issue looks like this:</p>\n\n<pre><code>D&lt;E&gt;* d = build_d();    \nB&lt;E&gt;* b = d; \nA* a = d;     \n\ndynamic_cast&lt;D&lt;E&gt;*&gt;(b);//returns correct pointer\ndynamic_cast&lt;D&lt;E&gt;*&gt;(a);//returns 0, and really shouldn't !!\n\ntypeid(B&lt;E&gt;).hash_code();//differing depending where in the code this is called\n</code></pre>\n\n<p>Calls to type_info::hash_code are done inside different libraries (of my own). After digging, I found about compiler option -rdynamic with GCC (even if I'm using Clang). I'm not sure if it can be related to my problem in any way.</p>\n\n<hr>\n\n<p>EDIT: I eventually found a good clue. No solution yet unfortunately. It appears the problem may be Qt related in the end.</p>\n\n<p>Issue occurs in a slot function. When the slot is called by a signal, dynamic_cast downcasting fails. But if I manually call the slot instead (in main for instance), it succeeds. And if manually call the slot, then trigger it by the signal, it succeeds too.\nThere's no argument for the signal, and content of the slot has been \"neutralized\" and doesn't depend of any parameter. 99,99% sure problem is not due to an algorithm error of allocation. </p>\n\n<p>It looks like qt_static_metacall, when calling the slot, somehow lose the track of casting properties. Is the fact the associated moc being precompiled can have something to do with this ?</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1433975853, "post_id": 30768472, "comment_id": 49589068, "body": "<a href=\"http://stackoverflow.com/a/2216055/179910\">stackoverflow.com/a/2216055/179910</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1433976300, "post_id": 30768472, "comment_id": 49589214, "body": "It&#39;s essentially the same approach with one more hop of indirection."}, {"owner": {"reputation": 1748, "user_id": 2777540, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ca64280eaf22c382feb6a744f0cb4353?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P", "link": "https://stackoverflow.com/users/2777540/michael-p"}, "edited": false, "score": 2, "creation_date": 1433976441, "post_id": 30768472, "comment_id": 49589259, "body": "IF you have a type SomeType variable [10][10][10] define type SomeTypePP and overload its [] to return SomeTypeP and overload SomTypeP [] operator to return SomeType."}], "owner": {"reputation": 309, "user_id": 4329516, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Wvbde.jpg?s=128&g=1", "display_name": "Binary Mind", "link": "https://stackoverflow.com/users/4329516/binary-mind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "closed_date": 1433976249, "answer_count": 0, "score": 0, "last_activity_date": 1433975731, "creation_date": 1433975731, "question_id": 30768472, "link": "https://stackoverflow.com/questions/30768472/overloading-operator-for-3-dimension-array", "closed_reason": "Duplicate", "title": "Overloading operator [ ] for 3 dimension array", "body": "<p>I have no problem with overloading operator [] for matrix, but how can I overload it for 3D array, to use code like this <code>array[2][3][1]</code>?</p>\n"}, {"tags": ["c++", "c", "process", "signals"], "answers": [{"comments": [{"owner": {"reputation": 1748, "user_id": 2777540, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/ca64280eaf22c382feb6a744f0cb4353?s=128&d=identicon&r=PG&f=1", "display_name": "Michael P", "link": "https://stackoverflow.com/users/2777540/michael-p"}, "edited": false, "score": 0, "creation_date": 1433976698, "post_id": 30768548, "comment_id": 49589366, "body": "One thing I can add and elaborate about 1. Because Claris is 100% correct. When you fork a process you create 2 processes, and from now on they have completely separate contexts. In other words, memory is not shared between them, they may use the same virtual memory but they would map to different physical memory. For IPC there&#39;s also named and unnamed pipes."}], "tags": [], "owner": {"reputation": 2223, "user_id": 325181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26de4aa17ab84757b1233714af5fec84?s=128&d=identicon&r=PG", "display_name": "Clarus", "link": "https://stackoverflow.com/users/325181/clarus"}, "is_accepted": false, "score": 0, "last_activity_date": 1433976120, "creation_date": 1433976120, "answer_id": 30768548, "question_id": 30768452, "link": "https://stackoverflow.com/questions/30768452/conceptual-questions-about-processes-and-signals/30768548#30768548", "title": "Conceptual Questions About Processes and Signals", "body": "<p>Some quick thoughts on your questions; </p>\n\n<ol>\n<li>No, signals are not good for transferring data. Signals involve a lot of overhead and are not queued very effectively.</li>\n<li>Many methods of IPC are available. The two that are most popular for UNIX are sockets and shared memory (see shm for instance). Sockets are generally better when talking to un-trusted applications. In your example of forking an application pipes would be applicable as well.</li>\n<li>As long as you can handle the interrupt much faster than they are coming in you are OK. Probably in the case with your ctrl-c example you could do the same thing using poll and fcntl (on UNIX) and you would be likely to get better precision.</li>\n</ol>\n"}], "owner": {"reputation": 59, "user_id": 4651240, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/98b7593f2d5e7ff91e3a6d6de67cc244?s=128&d=identicon&r=PG&f=1", "display_name": "SciGuy", "link": "https://stackoverflow.com/users/4651240/sciguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433976120, "creation_date": 1433975584, "question_id": 30768452, "link": "https://stackoverflow.com/questions/30768452/conceptual-questions-about-processes-and-signals", "title": "Conceptual Questions About Processes and Signals", "body": "<p>I am studying for my final in systems programming and I have a few questions that I cannot answer.</p>\n\n<ol>\n<li><p>Say a parent process forks off a child process that creates a large object. Can the child pass this object back to the parent fairly easily using just signals?</p></li>\n<li><p>A parent process forks off a child process, and the child continues running the same program. Is the best way for the parent to give a data structure to a child that was created before the fork to write to a separate file and give that to the child? (This one I am thinking it is not a good way, because the child will still share some of the parents data, including said data structure)</p></li>\n<li><p>Let us say you write a program to measure how quick a\nperson's fingers are by trapping SIGINT and then asking them to press\nCtrl-C as rapidly as possible. The SIGINT signal handler increments a\nglobal counter every time Ctrl-C is typed. After a predefined time it\nstops and prints the global counter divided by the time used.\nWhat is a fundamental problem with this program?</p></li>\n</ol>\n\n<p>Any help is appreciated. </p>\n"}, {"tags": ["c++", "templates", "c++11", "std", "std-function"], "comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1433975708, "post_id": 30768411, "comment_id": 49589017, "body": "What compiler and options do you use for your &quot;toy snippet&quot;? As far as I can tell, it shouldn&#39;t compile.."}, {"owner": {"reputation": 217, "user_id": 4225086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd38039037c02368b87ef25aa1cb4d93?s=128&d=identicon&r=PG&f=1", "display_name": "JDR", "link": "https://stackoverflow.com/users/4225086/jdr"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1433975805, "post_id": 30768411, "comment_id": 49589052, "body": "I&#39;m running g++ 4.6.3 on Ubuntu 12.04LTS. Compiling with simple <code>g++ test.cpp -o test</code>, no flags or anything."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 4, "creation_date": 1433975816, "post_id": 30768411, "comment_id": 49589055, "body": "Related/duplicate: <a href=\"http://stackoverflow.com/q/7245235/\">Syntax of C++ templates with function type parameters</a>"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1433975897, "post_id": 30768411, "comment_id": 49589079, "body": "<i>&quot;no flags or anything&quot;</i> That&#39;s not a good idea for many compilers. For g++, I&#39;d suggest use <code>-std=c++11 -pedantic -Wall -Wextra</code> to specify the version of the Standard it shall follow, and warn about non-standard extensions it accepts."}, {"owner": {"reputation": 217, "user_id": 4225086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd38039037c02368b87ef25aa1cb4d93?s=128&d=identicon&r=PG&f=1", "display_name": "JDR", "link": "https://stackoverflow.com/users/4225086/jdr"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 2, "creation_date": 1433976097, "post_id": 30768411, "comment_id": 49589146, "body": "Thanks a bunch for the second reply, it was exactly the answer I was looking for. I looked around for it and really didn&#39;t run into it. It&#39;s a <b>function signature</b>. Function signatures can be passed as template parameters -- I didn&#39;t know... Hey thanks again."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1433977139, "post_id": 30768411, "comment_id": 49589513, "body": "So you agree that <code>void (*)(int, int)</code> names a type, and that it&#39;s a pointer to something. How would you name the type of the thing it points to?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 2, "creation_date": 1433977272, "post_id": 30768411, "comment_id": 49589561, "body": "@JDR Someone very pedantic might point out that <code>void(int,int)</code> is not actually a <i>function signature</i>, since the signature of (non-template) functions does not contain the return type ;) (That makes me very pedantic, I guess.) It can be called a <i>function type</i>, since it&#39;s the type of a function. You can even declare, but not define a <i>function</i> using a <i>function type</i>. E.g. <code>using FT = void(int); FT myFunc; void myFunc(int) {}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1433976990, "post_id": 30768619, "comment_id": 49589466, "body": "Specifically, <code>void(int,int)</code> is not only a signature, but in <i>certain</i> contexts, is also a type. Namely, the type of the &quot;object&quot; that <code>void(*)(int,int)</code> points to.   functions aren&#39;t truly objects in C++ though, for the same reason that <code>void(int,int)</code> isn&#39;t a real type: the type has no size."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 3, "creation_date": 1433977356, "post_id": 30768619, "comment_id": 49589592, "body": "@TBohne <code>void</code> also has no size, and so does <code>int[]</code>. The C++ Standard calls all of them types, though. <code>void(int,int)</code> isn&#39;t a signature either, using the terminology of the Standard."}], "tags": [], "owner": {"reputation": 217, "user_id": 4225086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd38039037c02368b87ef25aa1cb4d93?s=128&d=identicon&r=PG&f=1", "display_name": "JDR", "link": "https://stackoverflow.com/users/4225086/jdr"}, "is_accepted": false, "score": 0, "last_activity_date": 1433976445, "last_edit_date": 1495541664, "creation_date": 1433976445, "answer_id": 30768619, "question_id": 30768411, "link": "https://stackoverflow.com/questions/30768411/understanding-the-template-argument-to-stdfunction-in-c11/30768619#30768619", "title": "Understanding the template argument to std::function in C++11?", "body": "<p>dyp pointed me to the correct <a href=\"https://stackoverflow.com/q/7245235/\">answer</a>. This was a duplicate question.</p>\n\n<p>void (int, int) represents a \"function signature\" and function signatures can be passed as template parameters.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1433989894, "last_edit_date": 1433989894, "creation_date": 1433984575, "answer_id": 30769879, "question_id": 30768411, "link": "https://stackoverflow.com/questions/30768411/understanding-the-template-argument-to-stdfunction-in-c11/30769879#30769879", "title": "Understanding the template argument to std::function in C++11?", "body": "<p>Not all types have values.  <code>void</code> is the most well know example.</p>\n\n<p><code>void(int,int)</code> is just a type that is the type of no values.  And it is useful, so it is used.</p>\n\n<p>The type can be used outside of template arguments in a few spots.  For example, it can be used to declare a method or a function, or a pointer to the type can be used as a function pointer, or a reference as a function reference.</p>\n"}], "owner": {"reputation": 217, "user_id": 4225086, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd38039037c02368b87ef25aa1cb4d93?s=128&d=identicon&r=PG&f=1", "display_name": "JDR", "link": "https://stackoverflow.com/users/4225086/jdr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 0, "closed_date": 1433993367, "answer_count": 2, "score": 0, "last_activity_date": 1433989894, "creation_date": 1433975359, "last_edit_date": 1433975744, "question_id": 30768411, "link": "https://stackoverflow.com/questions/30768411/understanding-the-template-argument-to-stdfunction-in-c11", "closed_reason": "Duplicate", "title": "Understanding the template argument to std::function in C++11?", "body": "<p>I am brushing up on some C++11 and am having a bit of a hard time understanding something.</p>\n\n<p><code>std::function</code> lets me pass any Callable type as a function object. I <em>know</em> what it does and how to use it.</p>\n\n<pre><code>void foo(int a, int b) {} \nstd::function&lt;void (int, int)&gt; bar = foo;\n...\n</code></pre>\n\n<p><code>bar</code> is a callable object who'se target is <code>foo</code>, a function that takes two ints as parameters.</p>\n\n<p>What I don't understand is exactly what <code>void (int, int)</code> means... </p>\n\n<ul>\n<li>I know it is the template parameter I am giving the compiler.</li>\n<li>I know that from it the compiler interprets that the callable type must take two ints and return void.</li>\n</ul>\n\n<p>But, <code>void (int, int)</code> doesn't appear to \"name a type\".</p>\n\n<ul>\n<li><code>void (*)(int, int)</code> is a pointer to a void returning function that takes two ints</li>\n<li><code>void (Foo*::)(int, int)</code> is a pointer to Foo's void returning function that takes two ints</li>\n</ul>\n\n<p>In fact the following toy snippet compiles fine.</p>\n\n<pre><code>class Foo {};\nint main(int, char**)\n{\n    void (*)(int, int);\n    void (Foo*::)(int, int);\n}\n</code></pre>\n\n<p>But adding the expression <code>void (int, int)</code> causes a compile time error.</p>\n\n<p>I did a little bit more digging around before posting my question.\nThe following code snippet compiles:</p>\n\n<pre><code>class Foo {};\n\ntemplate &lt;typename T&gt;\nstruct Bar\n{\n    typedef T type;\n};\n\nvoid a(int b, int c) {}\n\nint main(int, char**)\n{\n    void (*)(int, int);\n    void (Foo::*)(int, int);\n\n    Bar&lt;int (int, int)&gt; bar;\n}\n</code></pre>\n\n<p>But attempting to use <code>Bar::type</code> in any way produces another error: \"invalidly declared function type\".</p>\n\n<hr>\n\n<p>TLDR:\nWhat exactly does the expression <code>void (int, int)</code> mean <strong>and</strong> why is it a valid template parameter?</p>\n\n<p>Thanks for any help you can send my way.</p>\n"}, {"tags": ["c++", "c", "visual-studio", "compilation", "increment"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1433975406, "post_id": 30768285, "comment_id": 49588932, "body": "Your example does not even compile as is. And it should be <code>int main()</code>."}, {"owner": {"reputation": 14280, "user_id": 3213868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c996b05d00dac2362ca4804e78f564e?s=128&d=identicon&r=PG&f=1", "display_name": "ooga", "link": "https://stackoverflow.com/users/3213868/ooga"}, "edited": false, "score": 0, "creation_date": 1433975622, "post_id": 30768285, "comment_id": 49588989, "body": "How do you know the first function call is &quot;ignored&quot;? That seems impossible from the code given."}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433975889, "post_id": 30768285, "comment_id": 49589076, "body": "<a href=\"http://imageshack.com/a/img538/9657/rHcnx9.png\" rel=\"nofollow noreferrer\">imageshack.com/a/img538/9657/rHcnx9.png</a>"}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433975958, "post_id": 30768285, "comment_id": 49589104, "body": "Printing starts with 0,3 instead of a blank matrix"}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 0, "creation_date": 1433976076, "post_id": 30768285, "comment_id": 49589136, "body": "So you increase the position [1][1] ten times before calling &quot;decrement()&quot; and turning it back to zero. The decrement call should make Y = 9 and X = 0, so now you&#39;re writing on the 0 indexes that you were trying so hard to avoid, but the check functions never take those indexes into account. So I guess your program will be stuck in there forever? Don&#39;t blame the compiler.."}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976150, "post_id": 30768285, "comment_id": 49589163, "body": "I increment with Matrix[x][y]++; and IMEDIATELY print the matrix, and still get only 0&#39;s"}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976167, "post_id": 30768285, "comment_id": 49589166, "body": "Tried on a different computer, same result"}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 0, "creation_date": 1433976427, "post_id": 30768285, "comment_id": 49589255, "body": "I just ran your code and it does exactly what I just said"}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976518, "post_id": 30768285, "comment_id": 49589299, "body": "1. It does not increase shit. At least not here. Everything remains 0. Always."}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976556, "post_id": 30768285, "comment_id": 49589306, "body": "But I replaced unsigned int with int and now works, it is buggy, but the incrementation works. I have no idea why it would matter..."}, {"owner": {"reputation": 14963, "user_id": 834261, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxyWz.png?s=128&g=1", "display_name": "hatchet - done with SOverflow", "link": "https://stackoverflow.com/users/834261/hatchet-done-with-soverflow"}, "edited": false, "score": 0, "creation_date": 1433978017, "post_id": 30768285, "comment_id": 49589816, "body": "@AlexPop - you might find this interesting (regarding using unsigned for indexing) <a href=\"https://software.intel.com/en-us/forums/topic/534769\" rel=\"nofollow noreferrer\">software.intel.com/en-us/forums/topic/534769</a>"}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 0, "creation_date": 1433980949, "post_id": 30768285, "comment_id": 49590661, "body": "@AlexPop The incrementation doesn&#39;t work that way either. I&#39;ve answered why. All I&#39;ve done was check what happens when you run the code, I still have no idea what it is you are trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 382, "user_id": 4969759, "user_type": "registered", "profile_image": "https://graph.facebook.com/952637991425219/picture?type=large", "display_name": "Pratap", "link": "https://stackoverflow.com/users/4969759/pratap"}, "reply_to_user": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976385, "post_id": 30768500, "comment_id": 49589240, "body": "For <code>x=1, y=1</code>, the instruction <code>Matrix[x][y]++</code> is taking effect. But after it became 10, the call to <code>decrement</code> function took place in which <code>x</code> became 0 and <code>y</code> became <code>9</code>. But in the <code>print_matrix</code> function, you never printed the cells with <code>x=0</code>. And in <code>checkLine</code>, <code>checkColumn</code> and <code>checkSquare</code> functions, you were checking for cells with <code>x&gt;1</code>."}, {"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976608, "post_id": 30768500, "comment_id": 49589329, "body": "You are the second one to say that. On my laptop it doesn&#39;t. Unless I replace unsigned int with int... Have no idea why"}], "tags": [], "owner": {"reputation": 382, "user_id": 4969759, "user_type": "registered", "profile_image": "https://graph.facebook.com/952637991425219/picture?type=large", "display_name": "Pratap", "link": "https://stackoverflow.com/users/4969759/pratap"}, "is_accepted": false, "score": 0, "last_activity_date": 1433975842, "creation_date": 1433975842, "answer_id": 30768500, "question_id": 30768285, "link": "https://stackoverflow.com/questions/30768285/c-ignoring-incrementation/30768500#30768500", "title": "C ignoring incrementation", "body": "<p>You feel that the <code>increment</code> is ignored because the <code>checkSquare</code> function is buggy. It never returned 1 and hence the <code>increment</code> function was never called.</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "edited": false, "score": 0, "creation_date": 1433976694, "post_id": 30768628, "comment_id": 49589363, "body": "Nothing of what you say happens to me, unless i replace unsigned int with int... WHY? I do not understand.."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1433989982, "last_edit_date": 1433989982, "creation_date": 1433976475, "answer_id": 30768628, "question_id": 30768285, "link": "https://stackoverflow.com/questions/30768285/c-ignoring-incrementation/30768628#30768628", "title": "C ignoring incrementation", "body": "<p>Your output is a bit confusing since the output of the line</p>\n\n<pre><code>printf(\"%u, %u\", x, y);\n</code></pre>\n\n<p>runs into the output of</p>\n\n<pre><code>print_Matrix();\n</code></pre>\n\n<p>By adding a newline to the output of the first line, i.e. by using </p>\n\n<pre><code>printf(\"%u, %u\\n\", x, y);\n</code></pre>\n\n<p>you will notice that at some point <code>x</code> gets decremented to <code>0</code> and never gets incremented again. Since you never print <code>Matrix[0][y]</code>, you never see the non-zero values.</p>\n\n<p>In addition to the change to above <code>printf</code>, if you change <code>print_Matrix</code> to:</p>\n\n<pre><code>void print_Matrix(){\n   unsigned int i, j;\n\n   for (i = 0; i &lt;= 9; i++){\n        // ^^^ Use 0 instead of 1\n      for (j = 0; j &lt;= 9; j++)\n           // ^^^ Use 0 instead of 1\n         printf(\"%u \", Matrix[i][j]);\n      printf(\"\\n\");\n   }\n}\n</code></pre>\n\n<p>you will see the non-zero values.</p>\n\n<p>See working code at <a href=\"http://ideone.com/HlQ4xp\" rel=\"nofollow\">http://ideone.com/HlQ4xp</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "is_accepted": false, "score": 0, "last_activity_date": 1433978257, "last_edit_date": 1433978257, "creation_date": 1433976738, "answer_id": 30768675, "question_id": 30768285, "link": "https://stackoverflow.com/questions/30768285/c-ignoring-incrementation/30768675#30768675", "title": "C ignoring incrementation", "body": "<p>What happens is that you're incrementing the position marked by x and y, that's position [1][1]. Until it reaches 10 nothing interesting happens, you can actually see the top left corner of the matrix increasign to 10, but then the condition to decrement becomes true and you decrement.</p>\n\n<p>See for yourself (prints),</p>\n\n<pre><code>while (x &lt; 10) //Condition OBVIOUSLY true***\n{\n    printf(\"%u, %u\", x, y); //Keeps printing 0,3 and eventually 0,2***\n    printf(\"\\n\");\n\n    Matrix[x][y]++; //Incrementation...*** \n\n    print_Matrix(); // Always prints a blank Matrix consisting of only 0's***\n\n\n    if (checkLine() &amp;&amp; checkColumn() &amp;&amp; checkSquare())\n    {\n        increment();\n    }\n\n    if (Matrix[x][y] == 10){\n        Matrix[x][y] = 0;\n        decrement();\n    }\n\n    printf( \"Enter to continue\\n\" );\n    getchar();\n\n}\n</code></pre>\n\n<p>It turns Y = 9, X = 0 and the [1][1] position becomes 0, so you see only zeros because you're not printing the zero indexes.</p>\n\n<p>This process repeats until Y = 1 and X = 0, you increase the position until 10 so that the decrement works again.</p>\n\n<p>When Y = 1, X = 0 and position [0][1] is 10, the decrement call will do x--. Since X is an unsigned int, it will underflow and become 4.2 billion something, which is greater than 10 and the loop ends.</p>\n\n<p>What are you trying to achieve here?</p>\n\n<hr>\n\n<p>Edit: Something even more amazing happens when you make x and y ints instead of unsigned ints.</p>\n\n<p>Instead of x underflowing it will become -1. Matrix[-1][9]++ strangely increased x by 1 when I ran the code, so x went back to 0. Which means the program loops forever at this point.</p>\n\n<p>The increment function was never called.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4996826, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IkgBT2DamVM/AAAAAAAAAAI/AAAAAAAAALQ/w5K_DHCBlfc/photo.jpg?sz=128", "display_name": "Sahil", "link": "https://stackoverflow.com/users/4996826/sahil"}, "is_accepted": false, "score": 0, "last_activity_date": 1433980320, "last_edit_date": 1433980320, "creation_date": 1433976859, "answer_id": 30768697, "question_id": 30768285, "link": "https://stackoverflow.com/questions/30768285/c-ignoring-incrementation/30768697#30768697", "title": "C ignoring incrementation", "body": "<p>It shows matrix and increment when tested online, here are results</p>\n\n<p>1) for C compiler</p>\n\n<p><a href=\"http://ideone.com/KRLO8w\" rel=\"nofollow\">http://ideone.com/KRLO8w</a></p>\n\n<pre><code>    #include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nunsigned int Matrix[10][10], x, y;\n\n// Ignore this..\nint checkLine()\n{\n    unsigned int i, j, k;\n    for (k = 1; k &lt;= 9; k++){\n        if (Matrix[k][1] == 0) break;\n        for (i = 1; i &lt;= 9; i++)\n            for (j = 1; j &lt;= 9; j++)\n                if (Matrix[k][i] == Matrix[k][j] &amp;&amp; i!=j)\n                    return 0;\n    }\n    return 1;\n}\n\n//Ignore this..\nint checkColumn()\n{\n    unsigned int i, j, k;\n    for (k = 1; k &lt;= 9; k++){\n        if (Matrix[1][k] == 0) break;\n        for (i = 1; i &lt;= 9; i++)\n            for (j = 1; j &lt;= 9; j++)\n                if (Matrix[i][k] == Matrix[j][k] &amp;&amp; i!=j)\n                    return 0;\n    }\n    return 1;\n}\n\n//Ignore this..\nint checkSquare()\n{\n    unsigned int i, j, k,l,m,n;\n    for (m = 1; m &lt;= 7; m = m + 3)\n    for (n = 1; n &lt;= 7; n = n + 3)\n\n    for (k = m; k &lt;= m + 2; k++)\n    for (l = n; l &lt;= n + 2; l++)\n    for (i = m; i &lt;= m + 2; i++)\n    for (j = n; j &lt;= n + 2; j++)\n        if (Matrix[k][l] == Matrix[i][j] &amp;&amp; !(k==i &amp;&amp; l==j))\n            return 0;\n    return 1;\n}\n\nvoid increment()\n{\n    if (y == 9)\n    {\n        x++;\n        y = 1;\n    }\n    else y++;\n}\n\nvoid decrement()\n{\n    if (y == 1)\n    {\n        x--;\n        y = 9;\n    }\n    else\n        y--;\n}\n\nvoid print_Matrix(){\n    unsigned int i, j;\n\n    for (i = 1; i &lt;= 9; i++){\n        for (j = 1; j &lt;= 9; j++)\n            printf(\"%u \", Matrix[i][j]);\n        printf(\"\\n\");\n    }\n}\n\n//\n// MAIN. PROBLEM BELOW\n//**\nvoid main()\n{\n    unsigned int i, j;\n    for (i = 1; i &lt;= 9;i++)\n    for (j = 1; j &lt;= 9; j++)\n        Matrix[i][j] = 0;\n\n    print_Matrix(); // Function call is ignored here. Don't know why.***\n\n    x = 1; \n    y = 1;\n    // X and Y are OBVIOUSLY 1***\n\n    while (x &lt; 10) //Condition OBVIOUSLY true***\n    {\n        printf(\"%u, %u\", x, y); //Keeps printing 0,3 and eventually 0,2***\n        printf(\"\\n\");\n\n        Matrix[x][y]++; //Incrementation...*** \n\n        print_Matrix(); // Always prints a blank Matrix consisting of only 0's***\n\n\n        if (checkLine() &amp;&amp; checkColumn() &amp;&amp; checkSquare())\n        {\n            increment();\n        }\n\n        if (Matrix[x][y] == 10){\n            Matrix[x][y] = 0;\n            decrement();\n        }\n\n\n\n    }\n\n    print_Matrix();\n\n}\n</code></pre>\n\n<p>2) for c++ compiler C++ 4.9.2 (changed return type of main to int)</p>\n\n<p><a href=\"http://ideone.com/Ey5nG1\" rel=\"nofollow\">http://ideone.com/Ey5nG1</a></p>\n\n<p>In your image starting value of 0, 3 is due to buffer limit of command prompt. As the program never ends, so it terminates abruptly and latest few bytes are stored in buffer and is only shown that much. To see complete output redirect it to a file and open it.</p>\n"}], "owner": {"reputation": 7, "user_id": 4996865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48b1865ba2456c9c704e5bcd22da43f9?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Pop", "link": "https://stackoverflow.com/users/4996865/alex-pop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 4, "score": -4, "last_activity_date": 1433989982, "creation_date": 1433974729, "last_edit_date": 1433975662, "question_id": 30768285, "link": "https://stackoverflow.com/questions/30768285/c-ignoring-incrementation", "title": "C ignoring incrementation", "body": "<p>I tried this but my compiler(Visual Studio 2013) keeps messing up things. \nI have a 9 by 9 matrix indexed from 1. It is 0 at the beginig. And starting from element 1:1 I start incrementing the value in the matrix or incrementing x,y, basically moving to the next matrix element. </p>\n\n<p>However, the program ignores my incrementation and the fact that x,y are initially set to 1. \nAlso it ignores a function call.\nCode is commented below.</p>\n\n<p>I am sure this is the source I am compiling!\nRestarted laptop and Visual Studio but still doesn't work.\nOpened new project, same thing.\nThanks in advance.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\n\nunsigned int Matrix[10][10], x, y;\n\n// Ignore this..\nint checkLine()\n{\n    unsigned int i, j, k;\n    for (k = 1; k &lt;= 9; k++){\n        if (Matrix[k][1] == 0) break;\n        for (i = 1; i &lt;= 9; i++)\n            for (j = 1; j &lt;= 9; j++)\n                if (Matrix[k][i] == Matrix[k][j] &amp;&amp; i!=j)\n                    return 0;\n    }\n    return 1;\n}\n\n//Ignore this..\nint checkColumn()\n{\n    unsigned int i, j, k;\n    for (k = 1; k &lt;= 9; k++){\n        if (Matrix[1][k] == 0) break;\n        for (i = 1; i &lt;= 9; i++)\n            for (j = 1; j &lt;= 9; j++)\n                if (Matrix[i][k] == Matrix[j][k] &amp;&amp; i!=j)\n                    return 0;\n    }\n    return 1;\n}\n\n//Ignore this..\nint checkSquare()\n{\n    unsigned int i, j, k,l,m,n;\n    for (m = 1; m &lt;= 7; m = m + 3)\n    for (n = 1; n &lt;= 7; n = n + 3)\n\n    for (k = m; k &lt;= m + 2; k++)\n    for (l = n; l &lt;= n + 2; l++)\n    for (i = m; i &lt;= m + 2; i++)\n    for (j = n; j &lt;= n + 2; j++)\n        if (Matrix[k][l] == Matrix[i][j] &amp;&amp; !(k==i &amp;&amp; l==j))\n            return 0;\n    return 1;\n}\n\nvoid increment()\n{\n    if (y == 9)\n    {\n        x++;\n        y = 1;\n    }\n    else y++;\n}\n\nvoid decrement()\n{\n    if (y == 1)\n    {\n        x--;\n        y = 9;\n    }\n    else\n        y--;\n}\n\nvoid print_Matrix(){\n    unsigned int i, j;\n\n    for (i = 1; i &lt;= 9; i++){\n        for (j = 1; j &lt;= 9; j++)\n            printf(\"%u \", Matrix[i][j]);\n        printf(\"\\n\");\n    }\n}\n\n//\n// MAIN. PROBLEM BELOW\n//**\nvoid main()\n{\n    unsigned int i, j;\n    for (i = 1; i &lt;= 9;i++)\n    for (j = 1; j &lt;= 9; j++)\n        Matrix[i][j] = 0;\n\n    print_Matrix(); // Function call is ignored here. Don't know why.***\n\n    x = 1; \n    y = 1;\n    // X and Y are OBVIOUSLY 1***\n\n    while (x &lt; 10) //Condition OBVIOUSLY true***\n    {\n        printf(\"%u, %u\", x, y); //Keeps printing 0,3 and eventually 0,2***\n        printf(\"\\n\");\n\n        Matrix[x][y]++; //Incrementation...*** \n\n        print_Matrix(); // Always prints a blank Matrix consisting of only 0's***\n\n\n        if (checkLine() &amp;&amp; checkColumn() &amp;&amp; checkSquare())\n        {\n            increment();\n        }\n\n        if (Matrix[x][y] == 10){\n            Matrix[x][y] = 0;\n            decrement();\n        }\n\n\n\n    }\n\n    print_Matrix();\n\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2013", "fortran", "intel-fortran"], "comments": [{"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1455911483, "post_id": 30768251, "comment_id": 58718269, "body": "Use tag <a href=\"https://stackoverflow.com/questions/tagged/fortran\">fortran</a> to get more attention."}], "answers": [{"tags": [], "owner": {"reputation": 5480, "user_id": 2643582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4109e2c614151bab2fe602ae9a1bc2d7?s=128&d=identicon&r=PG", "display_name": "Steve Lionel", "link": "https://stackoverflow.com/users/2643582/steve-lionel"}, "is_accepted": false, "score": 0, "last_activity_date": 1434053290, "creation_date": 1434053290, "answer_id": 30790455, "question_id": 30768251, "link": "https://stackoverflow.com/questions/30768251/vs2013-integration-with-intel-fortran-compiler/30790455#30790455", "title": "VS2013 integration with Intel Fortran Compiler", "body": "<p>A Google search on this error message tends to suggest that you may get this if the project is on a network drive. The recommended solution is to right click on the project (in Solution Explorer), select Reload Project, and respond to the prompts.</p>\n"}], "owner": {"reputation": 1, "user_id": 4996892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab487e5a1e9c7d925f2969d1e325d6af?s=128&d=identicon&r=PG&f=1", "display_name": "JWebb", "link": "https://stackoverflow.com/users/4996892/jwebb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455911479, "creation_date": 1433974536, "last_edit_date": 1455911479, "question_id": 30768251, "link": "https://stackoverflow.com/questions/30768251/vs2013-integration-with-intel-fortran-compiler", "title": "VS2013 integration with Intel Fortran Compiler", "body": "<p>I have several C++ codes I develop in VS2013 Professional. Today, I installed the Intel Fortan Compiler (Composer XE2013 SP1), and now none of my C++ Projects will load. When I open my solution, I see:</p>\n\n<p>myprojectname (load failed)</p>\n\n<pre><code>The Project requires user input. Reload the project for more information\n</code></pre>\n\n<p>If I reload the project, I get a popup error that reads:</p>\n\n<pre><code>Parameter \"path\" cannot be null.\n</code></pre>\n\n<p>Any suggestions on how to solve this without just reinstalling VS? \nThanks!</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "vector", "stdthread"], "comments": [{"owner": {"reputation": 1875, "user_id": 1091536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d2f11fe9ce90bd4462a24c1bf2975c?s=128&d=identicon&r=PG", "display_name": "gomons", "link": "https://stackoverflow.com/users/1091536/gomons"}, "edited": false, "score": 0, "creation_date": 1433974963, "post_id": 30768216, "comment_id": 49588776, "body": "If you plan to stop your application correctly, you should call <code>join()</code>  before thread object will destroy. Or call <code>detach()</code> for detach thread from object. Otherwise you will get <code>terminate()</code> call in thread destructor."}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "reply_to_user": {"reputation": 1875, "user_id": 1091536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94d2f11fe9ce90bd4462a24c1bf2975c?s=128&d=identicon&r=PG", "display_name": "gomons", "link": "https://stackoverflow.com/users/1091536/gomons"}, "edited": false, "score": 0, "creation_date": 1433975098, "post_id": 30768216, "comment_id": 49588818, "body": "gomons, did not get your point. join() will hold the main thread execution, and that&#180;s not desired here..."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1433975618, "post_id": 30768216, "comment_id": 49588988, "body": "You can also use <code>readerThreads.emplace_back(readerThread::start, reader);</code>, What gomons means is that you must either <code>join()</code> or <code>detach()</code> a thread instance before its destructor executes, otherwise <code>terminate()</code> is called. But your threads seem quite happy to run forever, so this is not a problem in the example above."}], "answers": [{"comments": [{"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "edited": false, "score": 2, "creation_date": 1433975026, "post_id": 30768282, "comment_id": 49588799, "body": "Yes! Now I remember that from other readings.. Thanks for helping... Working like a charm..."}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": true, "score": 20, "last_activity_date": 1433974716, "creation_date": 1433974716, "answer_id": 30768282, "question_id": 30768216, "link": "https://stackoverflow.com/questions/30768216/c-stdvector-of-independent-stdthreads/30768282#30768282", "title": "C++ std::vector of independent std::threads", "body": "<p>You need to use something like</p>\n\n<pre><code>readerThreads.push_back(move(th));\n</code></pre>\n\n<p>This will make <code>th</code> an rvalue, and cause the move ctor to be called. The copy ctor of <code>thread</code> was <a href=\"http://www.cplusplus.com/reference/thread/thread/thread/\" rel=\"noreferrer\">disabled</a> by design (see Anthony Williams' <a href=\"http://www.manning.com/williams/\" rel=\"noreferrer\">C++ Concurrency In Action</a>).</p>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 9, "last_activity_date": 1434038867, "last_edit_date": 1434038867, "creation_date": 1433977061, "answer_id": 30768740, "question_id": 30768216, "link": "https://stackoverflow.com/questions/30768216/c-stdvector-of-independent-stdthreads/30768740#30768740", "title": "C++ std::vector of independent std::threads", "body": "<pre><code>/usr/local/include/c++/5.1.0/ext/new_allocator.h: In instantiation of 'void __gnu_cxx::new_allocator&lt;_Tp&gt;::construct(_Up*, _Args&amp;&amp; ...) [with _Up = std::thread; _Args = {const std::thread&amp;}; _Tp = std::thread]':\n/usr/local/include/c++/5.1.0/bits/alloc_traits.h:256:4:   required from 'static std::_Require&lt;std::allocator_traits&lt;_Alloc&gt;::__has_construct&lt;_Tp, _Args ...&gt; &gt; std::allocator_traits&lt;_Alloc&gt;::_S_construct(_Alloc&amp;, _Tp*, _Args&amp;&amp; ...) [with _Tp = std::thread; _Args = {const std::thread&amp;}; _Alloc = std::allocator&lt;std::thread&gt;; std::_Require&lt;std::allocator_traits&lt;_Alloc&gt;::__has_construct&lt;_Tp, _Args ...&gt; &gt; = void]'\n/usr/local/include/c++/5.1.0/bits/alloc_traits.h:402:16:   required from 'static decltype (_S_construct(__a, __p, (forward&lt;_Args&gt;)(std::allocator_traits::construct::__args)...)) std::allocator_traits&lt;_Alloc&gt;::construct(_Alloc&amp;, _Tp*, _Args&amp;&amp; ...) [with _Tp = std::thread; _Args = {const std::thread&amp;}; _Alloc = std::allocator&lt;std::thread&gt;; decltype (_S_construct(__a, __p, (forward&lt;_Args&gt;)(std::allocator_traits::construct::__args)...)) = &lt;type error&gt;]'\n/usr/local/include/c++/5.1.0/bits/stl_vector.h:917:30:   required from 'void std::vector&lt;_Tp, _Alloc&gt;::push_back(const value_type&amp;) [with _Tp = std::thread; _Alloc = std::allocator&lt;std::thread&gt;; std::vector&lt;_Tp, _Alloc&gt;::value_type = std::thread]'\nmain.cpp:37:30:   required from here\n/usr/local/include/c++/5.1.0/ext/new_allocator.h:120:4: error: use of deleted function 'std::thread::thread(const std::thread&amp;)'\n  { ::new((void *)__p) _Up(std::forward&lt;_Args&gt;(__args)...); }\n</code></pre>\n\n<p>Lets peel this back a bit.</p>\n\n<pre><code>error: use of deleted function 'std::thread::thread(const std::thread&amp;)'\n</code></pre>\n\n<p>Your code is doing something that attempts to introduce a <code>std::thread</code>.</p>\n\n<pre><code>required from 'void std::vector&lt;_Tp, _Alloc&gt;::push_back(const value_type&amp;)\n</code></pre>\n\n<p><code>push_back</code> is the culprit.</p>\n\n<p><code>std::thread</code> is not copyable - what would it <em>mean</em> to copy a thread?</p>\n\n<pre><code>std::thread t1([](){});\nstd::thread t2 = t1;\n</code></pre>\n\n<p>So instances of <code>std::thread</code> objects are intended to be unique owners. Aside from the simple confusion, much pain would ensue.</p>\n\n<p>They are, however, movable.</p>\n\n<pre><code>std::thread t1([](){});\nstd::thread t2 = std::move(t1);\n</code></pre>\n\n<p><code>t1</code> is no-longer a valid thread descriptor, the thread it was describing is now owned by <code>t2</code>.</p>\n\n<p>For placing such things into a container you can either use <code>std::move</code> or <code>std::emplace</code>/<code>std::emplace_back</code>.</p>\n\n<pre><code>std::vector&lt;std::thread&gt; threads;\nthreads.push_back(std::move(std::thread([](){})));\nthreads.emplace_back([](){});\n</code></pre>\n\n<p>While your code is focusing on this particular issue, let me point out that the C++ standard declares it as an error for a thread destructor to be invoked while a thread is still attached and not joined.</p>\n\n<pre><code>int main() {\n    std::thread t1([](){ while (true) { std::this_thread::yield(); } };\n}\n</code></pre>\n\n<p>When main terminates, t1.~thread() is called, which detects that the thread is still attached and not joined, this raises an exception causing a shutdown crash.</p>\n\n<p>You either need to <code>join()</code> the thread, waiting for it to terminate running, or <code>detach()</code> it. You'll need some way to tell the thread to stop if you want to use <code>join()</code> and if you <code>detach()</code> the program may exit in the middle of the thread doing something like writing data etc, you may introduce a serious bug.</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;chrono&gt;\n#include &lt;future&gt;\n\nint main () {\n  std::promise&lt;void&gt; cnx_promise;\n  std::shared_future&lt;void&gt; cnx_future;\n\n  std::thread t1([cnx_future]() {\n      while (cnx_future.valid()) {\n        std::this_thread::yield();\n      }\n  });\n\n  std::this_thread::sleep_for(std::chrono::seconds(1));\n\n  cnx_promise.set_value();\n\n  t1.join();\n}\n</code></pre>\n\n<p>Here we use a promise to let the thread know when it's time to stop running, but you could use condition variables, signals, etc, or even just a simple <code>std::atomic&lt;bool&gt; ok_to_run { true };</code> that you test for false.</p>\n"}, {"comments": [{"owner": {"reputation": 124, "user_id": 7143843, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bseOi.jpg?s=128&g=1", "display_name": "JulianSoto", "link": "https://stackoverflow.com/users/7143843/juliansoto"}, "edited": false, "score": 0, "creation_date": 1516044173, "post_id": 34573381, "comment_id": 83522196, "body": "Simplest and best answer."}], "tags": [], "owner": {"reputation": 498, "user_id": 5728618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbe55709d2e28e48d0928d510d7ddc53?s=128&d=identicon&r=PG", "display_name": "Seth", "link": "https://stackoverflow.com/users/5728618/seth"}, "is_accepted": false, "score": 6, "last_activity_date": 1451795902, "creation_date": 1451795902, "answer_id": 34573381, "question_id": 30768216, "link": "https://stackoverflow.com/questions/30768216/c-stdvector-of-independent-stdthreads/34573381#34573381", "title": "C++ std::vector of independent std::threads", "body": "<p>Another variant that works is to create your thread object in the vector.push_back call. No need to call std::move in this case because its already an rvalue (thus it will be be moved).</p>\n\n<pre><code>for (int &amp;reader : readers)\n    readerThreads.push_back(std::thread(readerThread::start, reader));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4596, "user_id": 3743145, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/680680d82143e4d33dc569913e5ef8c5?s=128&d=identicon&r=PG", "display_name": "kyb", "link": "https://stackoverflow.com/users/3743145/kyb"}, "is_accepted": false, "score": 2, "last_activity_date": 1531034712, "creation_date": 1531034712, "answer_id": 51229743, "question_id": 30768216, "link": "https://stackoverflow.com/questions/30768216/c-stdvector-of-independent-stdthreads/51229743#51229743", "title": "C++ std::vector of independent std::threads", "body": "<p>This is guarantee that every thread will be created in vector's storage. No object byte will be copied.</p>\n\n<pre><code>for (int &amp;reader : readers)\n    readerThreads.emplace_back( readerThread::start, reader );\n</code></pre>\n\n<p>In common case this not the same as @Seth suggested. But in current case it is 99% the same.</p>\n"}], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22691, "favorite_count": 1, "accepted_answer_id": 30768282, "answer_count": 4, "score": 17, "last_activity_date": 1531034712, "creation_date": 1433974361, "last_edit_date": 1433975137, "question_id": 30768216, "link": "https://stackoverflow.com/questions/30768216/c-stdvector-of-independent-stdthreads", "title": "C++ std::vector of independent std::threads", "body": "<p>I\u00b4m building a real time software where I have a main infinite loops on <code>main()</code> and threads used to read and process data.</p>\n\n<p>One of the issues is keeping a <code>std::vector</code> of running threads to send signals to them and to monitor execution. So I put together this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n\nnamespace readerThread {\n\n    void start(int id)\n    {\n        while (1)\n        {\n            std::cout &lt;&lt; \"Reader \" &lt;&lt; id &lt;&lt; \" running...\" &lt;&lt;  std::endl;\n            std::this_thread::sleep_for(std::chrono::milliseconds(1000));\n        }\n    }\n\n}\n\n\nint main() \n{\n\n        int readers[] = { 1, 2, 3 };\n\n        std::vector&lt;std::thread&gt; readerThreads;\n\n        for (int &amp;reader : readers)\n        {\n            std::thread th(readerThread::start, reader);\n            readerThreads.push_back(th);\n        }\n\n        while(true)\n        {\n            std::cout &lt;&lt; \"Waiting...\" &lt;&lt; std::endl;\n            std::this_thread::sleep_for(std::chrono::milliseconds(10000));\n        }\n\n        return 0;\n}\n</code></pre>\n\n<p>It doesn\u00b4t even compile, getting this error:</p>\n\n<pre><code>In file included from /usr/local/include/c++/5.1.0/x86_64-unknown-linux-gnu/bits/c++allocator.h:33:0,\n                 from /usr/local/include/c++/5.1.0/bits/allocator.h:46,\n                 from /usr/local/include/c++/5.1.0/string:41,\n                 from /usr/local/include/c++/5.1.0/bits/locale_classes.h:40,\n                 from /usr/local/include/c++/5.1.0/bits/ios_base.h:41,\n                 from /usr/local/include/c++/5.1.0/ios:42,\n                 from /usr/local/include/c++/5.1.0/ostream:38,\n                 from /usr/local/include/c++/5.1.0/iostream:39,\n                 from main.cpp:1:\n/usr/local/include/c++/5.1.0/ext/new_allocator.h: In instantiation of 'void __gnu_cxx::new_allocator&lt;_Tp&gt;::construct(_Up*, _Args&amp;&amp; ...) [with _Up = std::thread; _Args = {const std::thread&amp;}; _Tp = std::thread]':\n/usr/local/include/c++/5.1.0/bits/alloc_traits.h:256:4:   required from 'static std::_Require&lt;std::allocator_traits&lt;_Alloc&gt;::__has_construct&lt;_Tp, _Args ...&gt; &gt; std::allocator_traits&lt;_Alloc&gt;::_S_construct(_Alloc&amp;, _Tp*, _Args&amp;&amp; ...) [with _Tp = std::thread; _Args = {const std::thread&amp;}; _Alloc = std::allocator&lt;std::thread&gt;; std::_Require&lt;std::allocator_traits&lt;_Alloc&gt;::__has_construct&lt;_Tp, _Args ...&gt; &gt; = void]'\n/usr/local/include/c++/5.1.0/bits/alloc_traits.h:402:16:   required from 'static decltype (_S_construct(__a, __p, (forward&lt;_Args&gt;)(std::allocator_traits::construct::__args)...)) std::allocator_traits&lt;_Alloc&gt;::construct(_Alloc&amp;, _Tp*, _Args&amp;&amp; ...) [with _Tp = std::thread; _Args = {const std::thread&amp;}; _Alloc = std::allocator&lt;std::thread&gt;; decltype (_S_construct(__a, __p, (forward&lt;_Args&gt;)(std::allocator_traits::construct::__args)...)) = &lt;type error&gt;]'\n/usr/local/include/c++/5.1.0/bits/stl_vector.h:917:30:   required from 'void std::vector&lt;_Tp, _Alloc&gt;::push_back(const value_type&amp;) [with _Tp = std::thread; _Alloc = std::allocator&lt;std::thread&gt;; std::vector&lt;_Tp, _Alloc&gt;::value_type = std::thread]'\nmain.cpp:37:30:   required from here\n/usr/local/include/c++/5.1.0/ext/new_allocator.h:120:4: error: use of deleted function 'std::thread::thread(const std::thread&amp;)'\n  { ::new((void *)__p) _Up(std::forward&lt;_Args&gt;(__args)...); }\n    ^\nIn file included from main.cpp:4:0:\n/usr/local/include/c++/5.1.0/thread:126:5: note: declared here\n     thread(const thread&amp;) = delete;\n     ^\n</code></pre>\n\n<p>The threads areindependent, so I don\u00b4t need to call <code>join</code> on the main program nor on any thread... </p>\n\n<p>So, here are my doubts:</p>\n\n<p>Why my code does not compile? </p>\n\n<p>Is that the correct way to store the vector of threads ? </p>\n\n<p>Thanks for helping...</p>\n\n<p>PS:<a href=\"http://coliru.stacked-crooked.com/a/f8064cce3edd2c47\" rel=\"noreferrer\">Original code here</a>: </p>\n"}, {"tags": ["c++", "inheritance"], "answers": [{"tags": [], "owner": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "is_accepted": false, "score": 1, "last_activity_date": 1433974917, "creation_date": 1433974917, "answer_id": 30768317, "question_id": 30768194, "link": "https://stackoverflow.com/questions/30768194/cant-access-protected-member/30768317#30768317", "title": "Can&#39;t access protected member", "body": "<p>Here Even Object of type C class can not use the functions of class A and B. If you want access of member functions then make public access of B to C.\ndo this ...\nclass c : public B{.. then it will be able to access functions but remember not the member variables.</p>\n"}, {"tags": [], "owner": {"reputation": 622, "user_id": 4694036, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/XwC8h.jpg?s=128&g=1", "display_name": "Eddie", "link": "https://stackoverflow.com/users/4694036/eddie"}, "is_accepted": true, "score": 4, "last_activity_date": 1433975228, "creation_date": 1433975228, "answer_id": 30768387, "question_id": 30768194, "link": "https://stackoverflow.com/questions/30768194/cant-access-protected-member/30768387#30768387", "title": "Can&#39;t access protected member", "body": "<p>It seems like you understood 'protected inheritance' right but misunderstood 'protected members and methods'.</p>\n\n<p>protected methods are inaccessible from outside of class.</p>\n\n<p>Meaning</p>\n\n<pre><code>C c(1,2,3);\ncout &lt;&lt; c.get_x(); // THIS DOES NOT WORK.\n</code></pre>\n\n<p>where you can access get_x() is within class C.</p>\n\n<pre><code>class C: protected B \n{\n  int z; \n  public: C(int i,int j,int k):z(i),B(j,k){} \n  int get_z(){ return z; }\n  int get_x_from_c() { return this-&gt;get_x(); } // THIS IS ALLOWED.\n};\n</code></pre>\n"}], "owner": {"reputation": 274, "user_id": 4016912, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/hyrSL.jpg?s=128&g=1", "display_name": "Shury", "link": "https://stackoverflow.com/users/4016912/shury"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 30768387, "answer_count": 2, "score": 1, "last_activity_date": 1437643246, "creation_date": 1433974263, "last_edit_date": 1437643246, "question_id": 30768194, "link": "https://stackoverflow.com/questions/30768194/cant-access-protected-member", "title": "Can&#39;t access protected member", "body": "<p>I have some difficulties understanding the following code. I have 3 classes: A, B and C. A has a private x of type int. B inherits A and everything from it. C inherits from B but protected. This means that both X and Y become inaccessible in class C. Also, get_x() and get_y() become protected in class C. So C should be able to acces the get_x() and get_y() functions but not x and y?</p>\n\n<pre><code>#include&lt;iostream&gt; \nusing namespace std; \n\nclass A \n{ \nint x; \npublic: A(int i):x(i){} \nint get_x(){ return x; } \n}; \n\nclass B: public A \n{ \nint y; \npublic: B(int i,int j):y(i),A(j){} \nint get_y(){ return y; } }; \n\nclass C: protected B \n{\nint z; \npublic: C(int i,int j,int k):z(i),B(j,k){} \nint get_z(){ return z; } \n}; \n\nint main() \n{\nC c(1,2,3); \ncout&lt;&lt;c.get_x();\ncout&lt;&lt;c.get_y();\ncout&lt;&lt;c.get_z();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "oop", "friend", "derived-class"], "comments": [{"owner": {"reputation": 28965, "user_id": 2344584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dcecdcb0f6089de0a693c97c05cdb4ca?s=128&d=identicon&r=PG", "display_name": "Stefano Sanfilippo", "link": "https://stackoverflow.com/users/2344584/stefano-sanfilippo"}, "edited": false, "score": 0, "creation_date": 1433973950, "post_id": 30768024, "comment_id": 49588377, "body": "<code>eat()</code> is not declared static..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1433973979, "post_id": 30768024, "comment_id": 49588392, "body": "You&#39;ll need any <code>Animal</code> instance (e.g. a <code>Lion</code>) to call it: <code>leo.eat(lhs, rhs, &amp;hungry);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 514, "user_id": 2079579, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f7a129eb8993dbd97d867ca1b7a00e1b?s=128&d=identicon&r=PG", "display_name": "AndrewCox", "link": "https://stackoverflow.com/users/2079579/andrewcox"}, "edited": false, "score": 0, "creation_date": 1434020024, "post_id": 30768099, "comment_id": 49607584, "body": "Ah yes - True. Even accessing private members must be done from an object, e.g. <code>lhs.mass</code>"}], "tags": [], "owner": {"reputation": 382, "user_id": 4969759, "user_type": "registered", "profile_image": "https://graph.facebook.com/952637991425219/picture?type=large", "display_name": "Pratap", "link": "https://stackoverflow.com/users/4969759/pratap"}, "is_accepted": true, "score": 1, "last_activity_date": 1433973838, "creation_date": 1433973838, "answer_id": 30768099, "question_id": 30768024, "link": "https://stackoverflow.com/questions/30768024/calling-protected-function-from-derived-friend-function/30768099#30768099", "title": "Calling Protected Function From Derived Friend Function", "body": "<p>A <code>friend</code> function is a non member function which has access to private members of a class. But you still have to provide the object details for accessing data members. </p>\n\n<p>The usage of <code>eat</code> function must be similar to <code>object_name.eat()</code> in the <code>feed</code> function.</p>\n"}], "owner": {"reputation": 514, "user_id": 2079579, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f7a129eb8993dbd97d867ca1b7a00e1b?s=128&d=identicon&r=PG", "display_name": "AndrewCox", "link": "https://stackoverflow.com/users/2079579/andrewcox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 30768099, "answer_count": 1, "score": 0, "last_activity_date": 1433973838, "creation_date": 1433973472, "question_id": 30768024, "link": "https://stackoverflow.com/questions/30768024/calling-protected-function-from-derived-friend-function", "title": "Calling Protected Function From Derived Friend Function", "body": "<p>I have a base class, <code>Animal</code>, and a derived class, <code>Lion</code>. <code>Animal</code> has a protected function called <code>eat()</code>. I would like to call <code>eat()</code> from a friend function defined in <code>Lion</code>, but when it won't compile:</p>\n\n<pre><code>error: call to non-static member function without an object argument\n</code></pre>\n\n<p>Why can't I call a protected function from a friend of <code>Lion</code>? I have work-arounds, but I can't figure out why a friend wouldn't be able to call <code>eat()</code>. It doesn't seem to matter if I use <code>Animal::eat</code> or <code>Lion::eat</code>, I get the same error. Thoughts?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Animal{\npublic:\n    Animal(int m) : mass(m){}\n    int getMass() const { return mass; }\nprotected:\n    int mass;\n    void eat(const Animal&amp; lhs, const Animal&amp; rhs, Animal *result){\n        result-&gt;mass = lhs.getMass() + rhs.getMass();\n    }\n};\n\nclass Gazelle : public Animal{\npublic:\n    Gazelle(int m) : Animal(m){}\n};\n\nclass Lion : public Animal{\npublic:\n    Lion(int m) : Animal(m){}\n\n    friend Lion feed(const Lion &amp;lhs, const Gazelle &amp;rhs){\n        Lion hungry(0);\n        eat(lhs, rhs, &amp;hungry);\n        return hungry;\n    }\n};\n\nint main(void){\n    Lion leo(5);\n    Gazelle greg(1);\n\n    Lion fullLeo = feed(leo, greg);\n    cout &lt;&lt; \"Full Leo has mass \" &lt;&lt; fullLeo.getMass() &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "c-preprocessor"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1433974733, "post_id": 30768006, "comment_id": 49588678, "body": "it looks like the function <code>_system_pre_init(void)</code> is in one file and the <code>main()</code> is in another.  Are both files compiled at the same time allowing the board type to be specified at compile time or does the function <code>_system_pre_init(void)</code> need to make the initialization decision at run time?  When is <code>_system_pre_init(void)</code> actually invoked versus when is <code>main()</code> invoked?  Does <code>main()</code> actually need to know what board is being used or could it ask <code>_system_pre_init(void)</code>?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1433974748, "post_id": 30768006, "comment_id": 49588682, "body": "Have you considered creating separate libraries for board1, board2, boardN, and using the only one that is appropriate for a project?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1433974764, "post_id": 30768006, "comment_id": 49588690, "body": "Main (or often the startup code of a bsp &#39;board support package&#39;) must query something on the hardware (call it inventory?) to discover on which board the code is running.  OSE and vxWorks both provide BSP&#39;s designed to make this easy.  Are you rolling your own?  No matter.  This is a typical chicken-and-egg challenge to getting a code running on &#39;either&#39; target.  Most code designed to run on more than one configuration must discover something unique about that card.  Usually a rom &#39;inventory&#39;, but possibly 1 card has an interface the other does not."}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1433975040, "post_id": 30768006, "comment_id": 49588803, "body": "@RichardChambers correct, different files.  They are compiled at the same time.  <code>_system_pre_init</code> is invoked prior to <code>main</code>.  <code>_system_pre_init</code> doesn&#39;t know what board is being used, which is really the root of the problem."}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1433975122, "post_id": 30768006, "comment_id": 49588829, "body": "@RSahu Unfortunately, separate libaries for each board is not an ideal solution for my situation."}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1433975295, "post_id": 30768006, "comment_id": 49588880, "body": "@DOUGLASO.MOEN Providing the board headers is an attempt to provide a &quot;compile-time definition&quot; of board hardware instead of a &quot;runtime discovery&quot;.  I&#39;m hoping this is in someway possible"}], "answers": [{"comments": [{"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1433975795, "post_id": 30768205, "comment_id": 49589045, "body": "Not sure I follow...if I <code>#define Init Init_boardN</code>, then the call to Init() in boot.cpp will be undefined, correct?"}], "tags": [], "owner": {"reputation": 5815, "user_id": 1210291, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/053Gk.jpg?s=128&g=1", "display_name": "sirgeorge", "link": "https://stackoverflow.com/users/1210291/sirgeorge"}, "is_accepted": false, "score": 0, "last_activity_date": 1433974322, "creation_date": 1433974322, "answer_id": 30768205, "question_id": 30768006, "link": "https://stackoverflow.com/questions/30768006/how-to-define-an-extern-function-in-multiple-files-and-specify-which-definition/30768205#30768205", "title": "How to define an extern function in multiple files and specify which definition to use?", "body": "<p>I can see two options:</p>\n\n<ol>\n<li>Macro - in each header (<code>board1.hpp</code>, <code>board2.hpp</code>) define a macro like this</li>\n</ol>\n\n<p><code>#define Init Init_boardN</code></p>\n\n<p>where <code>Init_boardN</code> would be your specific function to init board number <code>N</code>.\nThis allows you to call <code>Init</code> in the old way as <code>Init()</code>. </p>\n\n<ol start=\"2\">\n<li>Additional argument to the <code>Init</code> function (suggested enum) to tell it which board to init. You can call the real init function (specific to board) from body of <code>Init</code> based on the argument.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1434037572, "post_id": 30768560, "comment_id": 49620822, "body": "Good solution, thanks.  Ended up going with the make approach because it lets boot.cpp be board file agnostic, but otherwise this would have worked well"}], "tags": [], "owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "is_accepted": false, "score": 1, "last_activity_date": 1433976179, "creation_date": 1433976179, "answer_id": 30768560, "question_id": 30768006, "link": "https://stackoverflow.com/questions/30768006/how-to-define-an-extern-function-in-multiple-files-and-specify-which-definition/30768560#30768560", "title": "How to define an extern function in multiple files and specify which definition to use?", "body": "<p>It appears that what you are wanting to do is to have a decision at compile time as to what board the application will be using. The function <code>_system_pre_init(void)</code> needs to know which board.</p>\n\n<p>The approach I would consider would be to have a compiler command line define as part of your build environment which would select the target board type. This compiler command line define would then be used in file boot.cpp to include either board1.cpp or board2.cpp, or what ever.  Notice that I am saying the board definition C++ source files and not the header files.</p>\n\n<p>The different versions of the boards would all have the same function names, classes, etc. though the implementation would be board specific.</p>\n\n<p>Since the board implementation file would be included into the boot.cpp file it would mean that what ever board file that is included, as determined by the compiler command line option, would be available for the function <code>_system_pre_init(void)</code> as well as the rest of your code.</p>\n\n<p>So for instance you may have a compiler command line option of <code>-DBOARDTYPE=1</code> or <code>-DBOARDTYPE=2</code> and then in your boot.cpp file you would have preprocessor macros such as:</p>\n\n<pre><code>#if BOARDTYPE == 1\n#include \"board1.cpp\"\n#elif BOARDTYPE == 2\n#include \"board2.cpp\"\n#endif\n\n// called prior to main() due to microprocessor behavior\nextern \"C\" int _system_pre_init(void)\n{\n    Init();\n\n    return 1;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1433990108, "post_id": 30770146, "comment_id": 49592803, "body": "Actually this is a good alternative to using conditional compilation whether using <code>make</code> or using an IDE.  Most IDEs have some kind of a <code>make</code> facility which the IDE uses to execute the build command to minimize the amount of compilation done  So it would be a matter of setting up various targets in the IDE with each configuration using a different version of the board.cpp file to fit the specific target board. In Visual Studio there is the Configuration Manager for instance which typically has two configurations, Debug and Release but there is nothing stopping you from adding others."}, {"owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "edited": false, "score": 0, "creation_date": 1434037395, "post_id": 30770146, "comment_id": 49620692, "body": "I&#39;m using CMake, so this solution ended up working perfectly.  The project implementing the common library specifies what board file source to include in its CMakeLists.txt.  Allows the flexibility to keep common board files in the library and also allow for specific board files outside of the library to be used.  Thanks"}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": true, "score": 2, "last_activity_date": 1433986594, "creation_date": 1433986594, "answer_id": 30770146, "question_id": 30768006, "link": "https://stackoverflow.com/questions/30768006/how-to-define-an-extern-function-in-multiple-files-and-specify-which-definition/30770146#30770146", "title": "How to define an extern function in multiple files and specify which definition to use?", "body": "<blockquote>\n  <p>Providing the board headers is an attempt to provide a \"compile-time\n  definition\" of board hardware instead of a \"runtime discovery\". I'm\n  hoping this is in someway possible</p>\n</blockquote>\n\n<p>At most of my embedded system employment this idea was implemented in the make file.  i.e. you either build target1  or you build target2.  The decision of which you are building is done by the user by selecting the correct target of the make file.</p>\n\n<p>When building the whole system, you would specify 'all'.</p>\n\n<p>With the target identified, the make file only builds the files required by that target.</p>\n\n<p>Conditional compilation flags were not used.</p>\n\n<p>But, perhaps this is not useful ... if you don't use make.</p>\n"}], "owner": {"reputation": 1032, "user_id": 1730078, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tvZfZ.png?s=128&g=1", "display_name": "schumacher574", "link": "https://stackoverflow.com/users/1730078/schumacher574"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 30770146, "answer_count": 3, "score": 1, "last_activity_date": 1433986594, "creation_date": 1433973395, "last_edit_date": 1433979788, "question_id": 30768006, "link": "https://stackoverflow.com/questions/30768006/how-to-define-an-extern-function-in-multiple-files-and-specify-which-definition", "title": "How to define an extern function in multiple files and specify which definition to use?", "body": "<p>Not sure if <code>extern</code> is the correct way to handle this situation, but it is what I've currently attempted.</p>\n\n<p>I have a library sharing common code across multiple projects, some of which have different pin configuration that must be done during the <code>_system_pre_init()</code> function in the library (which is called prior to <code>main()</code> due to microprocessor behavior).</p>\n\n<p>Ex:</p>\n\n<p><strong>boot.cpp</strong></p>\n\n<pre><code>extern void Init(void);\n\n// called prior to main() due to microprocessor behavior\nextern \"C\" int _system_pre_init(void)\n{\n    Init();\n\n    return 1;\n}\n</code></pre>\n\n<p><strong>board1.hpp</strong></p>\n\n<pre><code>void Init(void);\n</code></pre>\n\n<p><strong>board1.cpp</strong></p>\n\n<pre><code>void Init(void)\n{\n    // init specific to board 1\n}\n</code></pre>\n\n<p><strong>board2.hpp</strong></p>\n\n<pre><code>void Init(void);\n</code></pre>\n\n<p><strong>board2.cpp</strong></p>\n\n<pre><code>void Init(void)\n{\n    // init specific to board 2\n}\n</code></pre>\n\n<p>The plan was for the project implementing the libary to #include whatever board header it needed, which would in turn define the appropriate Init() function.</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"board1.hpp\"\n\nint main(int argc, char ** argv)\n{\n    //...\n}\n</code></pre>\n\n<p>However, it doesn't look like the board header I include has any effect over the definition of Init().  How can I manage this?  Or is there some other paradigm that fits better here?</p>\n"}, {"tags": ["java", "android", "c++", "audio", "cocos2d-x"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4996803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af32825c6f4cd1cc25ae5d1982155d7?s=128&d=identicon&r=PG&f=1", "display_name": "VideoArch", "link": "https://stackoverflow.com/users/4996803/videoarch"}, "edited": false, "score": 0, "creation_date": 1434482922, "post_id": 30794397, "comment_id": 49794085, "body": "I appreciate your help.  I don&#39;t think that cocos/audio/include/AudioEngine.h needs to be changed, because it doesn&#39;t include the original (playEffect).  Same applies to Cocos2dxMusic.java.  It turns out I had missed Cocos2dxHelper.java, but I still can&#39;t get it to compile.  The documentation says that CocosDenshion is based on openAL, and there IS a reference to playEffect in cocos/audio/openal/SimpleAudioEngineOpenAL.cpp, so I strongly suspect that I need to add playEffectN to that source file, as well."}, {"owner": {"reputation": 11, "user_id": 4996803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af32825c6f4cd1cc25ae5d1982155d7?s=128&d=identicon&r=PG&f=1", "display_name": "VideoArch", "link": "https://stackoverflow.com/users/4996803/videoarch"}, "edited": false, "score": 0, "creation_date": 1434495385, "post_id": 30794397, "comment_id": 49800205, "body": "I made some progress on this.  It appears that in order to add new methods (in Android, using existing SoundPool methods), the following files need to be edited:      cocos/audio/include/SimpleAudioEngine.h     cocos/audio/android/cddSimpleAudioEngine.cpp     cocos/audio/android/jni/cddandroidAndroidJavaEngine.h     cocos/audio/android/jni/cddandroidAndroidJavaEngine.cpp     platform/android/java/src/org/cocos2dx/lib/Cocos2dxHelper.ja&zwnj;&#8203;va     platform/android/java/src/org/cocos2dx/lib/Cocos2dxSound.jav&zwnj;&#8203;a"}, {"owner": {"reputation": 11, "user_id": 4996803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af32825c6f4cd1cc25ae5d1982155d7?s=128&d=identicon&r=PG&f=1", "display_name": "VideoArch", "link": "https://stackoverflow.com/users/4996803/videoarch"}, "edited": false, "score": 0, "creation_date": 1434495485, "post_id": 30794397, "comment_id": 49800241, "body": "Then, if you are using the new method(s) in a project that already exists, you have to copy the new files over to the cocos and platform directories within your existing project&#39;s directory structure.  Before recompiling, to force your new methods to be included, from your proj.android directory, do &quot;rm -r obj&quot;.  I did all of the above, recompiled, and was able to successfully compile and install my Android app, but then I got a run-time error (E/JniHelper(32099): Failed to find static method id of playEffectN), which resulted in no sound output."}, {"owner": {"reputation": 11, "user_id": 4996803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af32825c6f4cd1cc25ae5d1982155d7?s=128&d=identicon&r=PG&f=1", "display_name": "VideoArch", "link": "https://stackoverflow.com/users/4996803/videoarch"}, "edited": false, "score": 0, "creation_date": 1434495589, "post_id": 30794397, "comment_id": 49800288, "body": "I tracked that down to a typo in cocos/platform/android/java/src/org/cocos2dx/lib/Cocos2dxSou&zwnj;&#8203;nd.java (I mistakenly called &quot;doPlayEffect&quot; instead of &quot;doPlayEffectN&quot;, which resulted in a mismatch in the JNI method signature (boolean instead of int).  However, I&#39;m still getting the same error (Failed to find static method id of playEffectN), and no sound output."}], "tags": [], "owner": {"reputation": 1573, "user_id": 3886642, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ut7zQ.png?s=128&g=1", "display_name": "yangguang1029", "link": "https://stackoverflow.com/users/3886642/yangguang1029"}, "is_accepted": false, "score": 0, "last_activity_date": 1434076872, "last_edit_date": 1434076872, "creation_date": 1434075599, "answer_id": 30794397, "question_id": 30767998, "link": "https://stackoverflow.com/questions/30767998/adding-new-methods-to-cocos2d-x-simpleaudioengine/30794397#30794397", "title": "Adding new methods to Cocos2d-x SimpleAudioEngine", "body": "<p>first, add c++ apis, in :</p>\n\n<pre><code>cocos/audio/include/AudioEngine.h \n</code></pre>\n\n<p>though there is no implement in cddSimpleAudioEngine.cpp, you still need to declare functions in  AudioEngine.h</p>\n\n<p>then, the bridge btween c++ and java:</p>\n\n<pre><code>cocos/audio/android/jni/cddandroidAndroidJavaEngine.h\ncocos/audio/android/jni/cddandroidAndroidJavaEngine.cpp\n</code></pre>\n\n<p>here, declare in cddandroidAndroidJavaEngine.h and implement in cddandroidAndroidJavaEngine.cpp, like</p>\n\n<pre><code> void AndroidJavaEngine::playEffectN(int times) {\n        cocos2d::JniMethodInfo methodInfo;\n\n        if (! getJNIStaticMethodInfo(methodInfo, \"playEffectN\", \"(I)V\")) {\n            return ;\n        }\n\n        methodInfo.env-&gt;CallStaticVoidMethod(methodInfo.classID, methodInfo.methodID, times);\n        methodInfo.env-&gt;DeleteLocalRef(methodInfo.classID);\n    }\n</code></pre>\n\n<p>then in java</p>\n\n<pre><code>cocos/platform/android/java/src/org/cocos2dx/lib/Cocos2dxHelper.java\n</code></pre>\n\n<p>add function like:</p>\n\n<pre><code>public static void playEffectN(int times) {\n\n}\n</code></pre>\n\n<p>finally is your java implement, in </p>\n\n<pre><code>cocos/platform/android/java/src/org/cocos2dx/lib/Cocos2dxMusic.java\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4996803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5af32825c6f4cd1cc25ae5d1982155d7?s=128&d=identicon&r=PG&f=1", "display_name": "VideoArch", "link": "https://stackoverflow.com/users/4996803/videoarch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 322, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434076872, "creation_date": 1433973348, "question_id": 30767998, "link": "https://stackoverflow.com/questions/30767998/adding-new-methods-to-cocos2d-x-simpleaudioengine", "title": "Adding new methods to Cocos2d-x SimpleAudioEngine", "body": "<p>In Cocos2d-x (3.6) I am trying to add increased functionality to SimpleAudioEngine.  Specifically, with regard to Android's SoundPool (which SimpleAudioEngine is based upon, at least for Android), I am trying to add some of the methods that have not yet been implemented but are documented in the Android Developer web site.</p>\n\n<p>For example, SoundPool's play method includes a loop variable that is of type int, whereas in SimpleAudioEngine it is of type bool (boolean on the Java side).  If I can implement a new method with the loop variable as type int, I will be able to control the number of repetitions directly when I call the playEffect method.</p>\n\n<p>I have figured out most of the changes required, including various C++ header and .cpp files (cocos/audio/include/SimpleAudioEngine.h, cocos/audio/android/cddSimpleAudioEngine.cpp, cocos/audio/android/jni/cddandroidAndroidJavaEngine.h, and cocos/audio/android/jni/cddandroidAndroidJavaEngine.cpp) and also the Cocos2dxSound.java file, but I am still getting error messages saying that my new method (which I am calling playEffectN) cannot be found.</p>\n\n<p>The only other place I can see where something might need to be added is in the cocos/audio/openal/SimpleAudioEngineOpenAL.cpp file, but I'm not quite sure how to modify that in order to add my new method.</p>\n\n<p>Can anyone point me in the right direction as to what else I need to do in order to add this additional functionality to SimpleAudioEngine?  If I am successful, I will gladly share the results.  (If successful, I will also be able to add some of the other unimplemented methods in SoundPool, such as setLoop, setPriority, setRate, and setVolume, for sounds that have already been assigned a soundID.)</p>\n"}, {"tags": ["c++", "c++14", "perfect-forwarding"], "answers": [{"comments": [{"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 2, "creation_date": 1434088446, "post_id": 30767868, "comment_id": 49641363, "body": "<code>static_cast</code> instead of <code>std::forward</code> little bit more suitable. Due to <code>std::forward&lt; T &gt;()</code> is sematically identical to <code>static_cast&lt; T &amp;&amp; &gt;()</code> and <code>T</code> here is always reference."}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 14, "last_activity_date": 1433973187, "last_edit_date": 1433973187, "creation_date": 1433972773, "answer_id": 30767868, "question_id": 30767785, "link": "https://stackoverflow.com/questions/30767785/can-auto-parameters-be-perfect-forwarded/30767868#30767868", "title": "Can `auto &amp;&amp;` parameters be perfect forwarded?", "body": "<p>Yes, they can be perfect-forwarded by means of <a href=\"http://en.cppreference.com/w/cpp/language/decltype\" rel=\"noreferrer\"><code>decltype()</code></a> specifier:</p>\n\n<pre><code>auto f = [](auto&amp;&amp; v)\n{\n    g(std::forward&lt;decltype(v)&gt;(v));\n    //             ~~~~~~~~~~^\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/2dd678ec5a30a2a6\" rel=\"noreferrer\"><strong>DEMO</strong></a></p>\n"}], "owner": {"reputation": 11019, "user_id": 418488, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/625af9d6f5c5062f65a43582b57c041d?s=128&d=identicon&r=PG", "display_name": "Just another metaprogrammer", "link": "https://stackoverflow.com/users/418488/just-another-metaprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 2, "accepted_answer_id": 30767868, "answer_count": 1, "score": 12, "last_activity_date": 1434052636, "creation_date": 1433972390, "last_edit_date": 1434052636, "question_id": 30767785, "link": "https://stackoverflow.com/questions/30767785/can-auto-parameters-be-perfect-forwarded", "title": "Can `auto &amp;&amp;` parameters be perfect forwarded?", "body": "<p>For template functions I use perfect forwarding like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid f (T &amp;&amp; v)\n{\n  g (std::forward&lt;T&gt; (v));\n}\n</code></pre>\n\n<p>How do I perfect forward <code>auto &amp;&amp;</code> parameters in <code>C++14</code> lambda expressions?</p>\n\n<pre><code>auto f = [] (auto &amp;&amp; v)\n  {\n    g (std::forward&lt;??&gt; (v));\n  };\n</code></pre>\n\n<p>(Tried to google for it but didn't get any good hits on the keywords I picked)</p>\n"}, {"tags": ["c++", "c++11", "rvalue-reference", "overloading", "function-templates"], "answers": [{"comments": [{"owner": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "edited": false, "score": 0, "creation_date": 1433973614, "post_id": 30768014, "comment_id": 49588265, "body": "This is perfectly working. But what if i want to have two saperate print functions?? Or is it stupid thing to do??"}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "edited": false, "score": 0, "creation_date": 1433973742, "post_id": 30768014, "comment_id": 49588303, "body": "If you want to have two separate print functions then you should have two overloads as in your example. However, from a practical point of view if you only want to print (i.e., not alter the input argument), a single function with input argument a <code>const</code> lvalue reference is sufficient."}, {"owner": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "edited": false, "score": 0, "creation_date": 1433973875, "post_id": 30768014, "comment_id": 49588348, "body": "I am trying to have two saperate templates for both print functions one with T&amp; and other with T&amp;&amp; but its not working."}, {"owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "reply_to_user": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "edited": false, "score": 0, "creation_date": 1433974014, "post_id": 30768014, "comment_id": 49588404, "body": "Yeap, with templates won&#39;t work cause the compiler due to certain C++ standard rules can&#39;t distinguish between the two overloads."}, {"owner": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "edited": false, "score": 0, "creation_date": 1433974107, "post_id": 30768014, "comment_id": 49588446, "body": "Then i guess i will have to live with only one print.. Anyway thank you so much. :) :)"}], "tags": [], "owner": {"reputation": 38854, "user_id": 2352671, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kd1xb.jpg?s=128&g=1", "display_name": "101010", "link": "https://stackoverflow.com/users/2352671/101010"}, "is_accepted": true, "score": 1, "last_activity_date": 1433973437, "creation_date": 1433973437, "answer_id": 30768014, "question_id": 30767642, "link": "https://stackoverflow.com/questions/30767642/function-overloading-with-template/30768014#30768014", "title": "Function overloading with template", "body": "<p>Unless you want to change the input argument a <code>const</code> lvalue reference will do the job because rvalue references can bind to <code>const</code> lvalue references:</p>\n\n<pre><code>void print(int const &amp;number) {\n    ...\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/c5fe1432c6e171a2\" rel=\"nofollow\"><em>LIVE DEMO</em></a></p>\n\n<p>Nevertheless, You could just:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid print(T &amp;&amp;number) {\n    ...\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4aeb7d34e5c0b646\" rel=\"nofollow\"><em>LIVE DEMO</em></a></p>\n"}], "owner": {"reputation": 719, "user_id": 3476492, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/IPHzX.jpg?s=128&g=1", "display_name": "01000001", "link": "https://stackoverflow.com/users/3476492/01000001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "accepted_answer_id": 30768014, "answer_count": 1, "score": 3, "last_activity_date": 1433975692, "creation_date": 1433971828, "last_edit_date": 1433975692, "question_id": 30767642, "link": "https://stackoverflow.com/questions/30767642/function-overloading-with-template", "title": "Function overloading with template", "body": "<p>I have the following code.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n\nvoid print(int&amp; number){\n    cout&lt;&lt;\"\\nIn Lvalue\\n\";\n}\n\nvoid print(int&amp;&amp; number){\n    cout&lt;&lt;\"\\nIn Rvalue\\n\";\n}\n\nint main(int argc,char** argv){\n\n    int n=10;\n    print(n);\n    print(20);\n}\n</code></pre>\n\n<p>It works fine. But I want to make a function template so that it accepts both lvalues and rvalues. Can anyone suggest how to do it?</p>\n"}, {"tags": ["c++", "boost", "cmake", "suppress-warnings"], "comments": [{"owner": {"reputation": 65308, "user_id": 2556117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde5c1d8e38358013a16a3f7a686ae87?s=128&d=identicon&r=PG", "display_name": "Fraser", "link": "https://stackoverflow.com/users/2556117/fraser"}, "edited": false, "score": 0, "creation_date": 1433972544, "post_id": 30767609, "comment_id": 49587836, "body": "That should work.  Are you sure you&#39;ve not got a typo?  If not, you&#39;ll need to at least show us your CMakeLists.txt."}, {"owner": {"reputation": 7430, "user_id": 3474956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RWbuy.jpg?s=128&g=1", "display_name": "kilojoules", "link": "https://stackoverflow.com/users/3474956/kilojoules"}, "reply_to_user": {"reputation": 65308, "user_id": 2556117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde5c1d8e38358013a16a3f7a686ae87?s=128&d=identicon&r=PG", "display_name": "Fraser", "link": "https://stackoverflow.com/users/2556117/fraser"}, "edited": false, "score": 0, "creation_date": 1433972756, "post_id": 30767609, "comment_id": 49587940, "body": "This cmake file generates a make file. I get the error during the execution of the <code>Makefile</code>. I can&#39;t edit the CMakeLists.txt file. Is it possible to set this flag to be on for the generated <code>Makefile</code> using a cmake file?"}, {"owner": {"reputation": 65308, "user_id": 2556117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde5c1d8e38358013a16a3f7a686ae87?s=128&d=identicon&r=PG", "display_name": "Fraser", "link": "https://stackoverflow.com/users/2556117/fraser"}, "edited": false, "score": 1, "creation_date": 1433973978, "post_id": 30767609, "comment_id": 49588391, "body": "That&#39;s a bit confusing!  Anyway, depending on how the CMakeLists.txt is written, you might get away with running CMake like this: <code>cmake . -DCMAKE_CXX_FLAGS=-DBOOST_SIGNALS_NO_DEPRECATION_WARNING</code>.  That&#39;s not as good an option though as setting the definition in the CMakeLists.txt."}, {"owner": {"reputation": 7430, "user_id": 3474956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RWbuy.jpg?s=128&g=1", "display_name": "kilojoules", "link": "https://stackoverflow.com/users/3474956/kilojoules"}, "reply_to_user": {"reputation": 65308, "user_id": 2556117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cde5c1d8e38358013a16a3f7a686ae87?s=128&d=identicon&r=PG", "display_name": "Fraser", "link": "https://stackoverflow.com/users/2556117/fraser"}, "edited": false, "score": 0, "creation_date": 1434083787, "post_id": 30767609, "comment_id": 49639874, "body": "Something I can stick in the cmake file would of course be ideal, but it looks like it simply cannot be done in this situation"}], "owner": {"reputation": 7430, "user_id": 3474956, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/RWbuy.jpg?s=128&g=1", "display_name": "kilojoules", "link": "https://stackoverflow.com/users/3474956/kilojoules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 333, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434083879, "creation_date": 1433971658, "last_edit_date": 1434083879, "question_id": 30767609, "link": "https://stackoverflow.com/questions/30767609/add-line-in-cmake-to-edit-makefile-definition", "title": "add line in cmake to edit Makefile definition", "body": "<p>In my cmake file, I am specifying <code>add_definitions ( -DBOOST_SIGNALS_NO_DEPRECATION_WARNING )</code>. However, I am still seeing the warning <code>warning: #warning \"Boost.Signals is no longer being maintained and is now deprecated. Please switch to Boost.Signals2. To disable this warning message, define BOOST_SIGNALS_NO_DEPRECATION_WARNING.\" [-Wcpp]</code>. How do I properly define <code>BOOST_SIGNALS_NO_DEPRECATION_WARNING</code>?</p>\n\n<p><strong>edit</strong></p>\n\n<p>This cmake file generates a make file. I get the error during the execution of the Makefile. I can't edit the CMakeLists.txt file. Is it possible to set this flag to be on for the generated Makefile using a cmake file?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 11, "creation_date": 1433970192, "post_id": 30767243, "comment_id": 49586636, "body": "pointer to member."}, {"owner": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1433970440, "post_id": 30767243, "comment_id": 49586763, "body": "Like an alias to a method?  Because there&#39;s no member (variable nor method) named <code>read_simple</code> on this class.  The CPP for this header does use a variable named <code>read_simple</code>, but I don&#39;t see any declaration for it.  And this class doesn&#39;t extend anything.. maybe I&#39;m just missing something"}, {"owner": {"reputation": 4368, "user_id": 2352158, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/91cd5bff136b9c7608cf986ca729e19a?s=128&d=identicon&r=PG", "display_name": "coincoin", "link": "https://stackoverflow.com/users/2352158/coincoin"}, "edited": false, "score": 1, "creation_date": 1433970540, "post_id": 30767243, "comment_id": 49586814, "body": "related post : <a href=\"https://stackoverflow.com/questions/670734/c-pointer-to-class-data-member\" title=\"c pointer to class data member\">stackoverflow.com/questions/670734/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "edited": false, "score": 0, "creation_date": 1433971121, "post_id": 30767316, "comment_id": 49587093, "body": "Thanks!  Now I just have to figure out why they&#39;re doing this. :)  That member points at a pure virtual member function."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "edited": false, "score": 2, "creation_date": 1433972602, "post_id": 30767316, "comment_id": 49587868, "body": "@Matt Nothing wrong with that. When you call it with an instance, it&#39;ll still go through the same virtual dispatch process."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 15, "last_activity_date": 1433970441, "creation_date": 1433970441, "answer_id": 30767316, "question_id": 30767243, "link": "https://stackoverflow.com/questions/30767243/what-does-mean-in-c/30767316#30767316", "title": "What does ::* mean in C++?", "body": "<p>It's a <a href=\"http://en.cppreference.com/w/cpp/language/pointer#Pointers_to_member_functions\">pointer to member function</a>. Specifically, <code>read_simple</code> is a pointer to a member function of class <code>LASreader</code> that takes zero arguments and returns a <code>BOOL</code>.</p>\n\n<p>From the example in the cppreference:</p>\n\n<pre><code>struct C {\n    void f(int n) { std::cout &lt;&lt; n &lt;&lt; '\\n'; }\n};\nint main()\n{\n    void (C::*p)(int) = &amp;C::f; // p points at member f of class C\n    C c;\n    (c.*p)(1); // prints 1\n    C* cptr = &amp;c;\n    (cptr-&gt;*p)(2); // prints 2\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1433970489, "creation_date": 1433970489, "answer_id": 30767333, "question_id": 30767243, "link": "https://stackoverflow.com/questions/30767243/what-does-mean-in-c/30767333#30767333", "title": "What does ::* mean in C++?", "body": "<pre><code>BOOL (LASreader::*read_simple)();\n</code></pre>\n\n<p><code>read_simple</code> is a pointer to a member function of class <code>LASreader</code> that takes no arguments and returns a <code>BOOL</code>.</p>\n"}], "owner": {"reputation": 1556, "user_id": 1861346, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/AQaJK.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1861346/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4154, "favorite_count": 6, "accepted_answer_id": 30767316, "answer_count": 2, "score": 15, "last_activity_date": 1433971393, "creation_date": 1433970140, "question_id": 30767243, "link": "https://stackoverflow.com/questions/30767243/what-does-mean-in-c", "title": "What does ::* mean in C++?", "body": "<p>What does</p>\n\n<pre><code> private:\n    BOOL (LASreader::*read_simple)();\n</code></pre>\n\n<p>mean?</p>\n\n<p>It's from LAStools, in <a href=\"https://github.com/LAStools/LAStools/blob/master/LASlib/inc/lasreader.hpp#L132-L133\">lasreader.hpp</a></p>\n\n<p><code>BOOL</code> is a <code>typedef bool</code> (from <a href=\"https://github.com/LAStools/LAStools/blob/master/LASzip/src/mydefs.hpp#L59\">mydefs.hpp</a>), but I don't know what this line is declaring, specifically the <code>::*</code> (double colon asterisk), and that it looks like a function call.</p>\n"}, {"tags": ["c++", "opencv", "pca"], "comments": [{"owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 1, "creation_date": 1434001509, "post_id": 30767017, "comment_id": 49595956, "body": "you need much more data, also you have to normalize() your images before the pca step"}, {"owner": {"reputation": 75, "user_id": 4980573, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/582765e62927b4416748971de6e4f0e3?s=128&d=identicon&r=PG&f=1", "display_name": "KeenLearner", "link": "https://stackoverflow.com/users/4980573/keenlearner"}, "reply_to_user": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 0, "creation_date": 1434144234, "post_id": 30767017, "comment_id": 49672828, "body": "Yea....increasing the data worked!"}], "answers": [{"tags": [], "owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "is_accepted": true, "score": 2, "last_activity_date": 1434007019, "last_edit_date": 1592644375, "creation_date": 1434007019, "answer_id": 30774097, "question_id": 30767017, "link": "https://stackoverflow.com/questions/30767017/eigenfaces-in-opencv-using-c/30774097#30774097", "title": "Eigenfaces in OpenCV using C++", "body": "<p>Your code looks fine, so what is wrong?</p>\n<p>DataDataData, it's so crucial when performing computer vision tasks like this. To give yourself an advantage use a readily avaliable dataset with corresponding test data - <a href=\"http://www.cs.princeton.edu/%7Ecdecoro/eigenfaces/\" rel=\"nofollow noreferrer\">This would work</a></p>\n<p>Also, as berak says normalising the images will help. In <a href=\"http://www.vision.jhu.edu/teaching/vision08/Handouts/case_study_pca1.pdf\" rel=\"nofollow noreferrer\">Turk &amp; Pentland</a> (Which if you haven't read you should) they state:</p>\n<blockquote>\n<p>Step 6.3: compute the M best eigenvectors of AAT : ui = Avi</p>\n<p>(important: normalize ui such that ||ui|| = 1)</p>\n</blockquote>\n<p>This will mean that all your training data will be of the same vein and give your algorithm much better chance of success</p>\n"}], "owner": {"reputation": 75, "user_id": 4980573, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/582765e62927b4416748971de6e4f0e3?s=128&d=identicon&r=PG&f=1", "display_name": "KeenLearner", "link": "https://stackoverflow.com/users/4980573/keenlearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 30774097, "answer_count": 1, "score": 4, "last_activity_date": 1434007019, "creation_date": 1433969217, "question_id": 30767017, "link": "https://stackoverflow.com/questions/30767017/eigenfaces-in-opencv-using-c", "title": "Eigenfaces in OpenCV using C++", "body": "<p>I have written a code to create eigenfaces. I have taken 3 images of different people as input. I have calculated the eigenvectors and eigenvalues. Since only 3 images are taken, I select all the three eigenvectors, each of size 36000x1, as the principal components. When I reshape the eigenvectors to see the image, I get eigenface for only one person. The other images are almost completely blank.</p>\n\n<p>I am extracting each eigenvector from covevec(matrix of eigenvectors of covariance matrix)</p>\n\n<pre><code>col1=covevec.col(0);\ncol2=covevec.col(1);\ncol3=covevec.col(2);\n</code></pre>\n\n<p>I reshape them as follows:</p>\n\n<pre><code>if (!col1.isContinuous() &amp;&amp; !col2.isContinuous() &amp;&amp; !col3.isContinuous())\n{\n    col1=col1.clone();\n    col2=col2.clone();\n    col3=col3.clone();\n}\nMat final1,final2,final3;\nfinal1=col1.reshape(0,200);\nfinal2=col2.reshape(0,200);\nfinal3=col3.reshape(0,200);\n</code></pre>\n\n<p>This how final2 looks like:\n<img src=\"https://i.stack.imgur.com/Sakf6.png\" alt=\"Output image final2\"></p>\n\n<p>And the other two look like this:<img src=\"https://i.stack.imgur.com/cvjtv.png\" alt=\"Output image final1\"></p>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "eclipse", "xcode", "static-libraries", "static-linking"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1433969624, "post_id": 30767014, "comment_id": 49586287, "body": "&quot;this is a severe pain in the *** for me&quot;  How is that relevant?"}], "answers": [{"tags": [], "owner": {"reputation": 122, "user_id": 773840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0803c4fbdc1e69893110e96a7dcaa3e?s=128&d=identicon&r=PG", "display_name": "exs", "link": "https://stackoverflow.com/users/773840/exs"}, "is_accepted": false, "score": 0, "last_activity_date": 1433970551, "creation_date": 1433970551, "answer_id": 30767353, "question_id": 30767014, "link": "https://stackoverflow.com/questions/30767014/how-do-i-use-a-bunch-of-h-and-cpp-files-to-create-a-static-library-that-can-be/30767353#30767353", "title": "How do i use a bunch of .h and .cpp files to create a static library that can be used in another c++ Project", "body": "<p>First off, almost all the information for Xcode will be available on the Apple Developer's portal:\n<a href=\"https://developer.apple.com/library/prerelease/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/start_project.html#//apple_ref/doc/uid/TP40010215-CH2-SW5\" rel=\"nofollow\">https://developer.apple.com/library/prerelease/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/start_project.html#//apple_ref/doc/uid/TP40010215-CH2-SW5</a></p>\n\n<p>To create a simple static library on Xcode 6 you start by creating a new project, then under OS X - Framework and Library select Library, on the next window change the Framework to None (Plain C/C++ Library) and static (since that is what your are stating).</p>\n\n<p>Once your project is created, add the existing headers and sources to your project, either by dragging them with the mouse or with the add files drop menu from the right click functionality, you can create a new group in Xcode if you want some order for them.</p>\n\n<p>When adding the files, on the add window shown you can select to either copy them or use their current location.</p>\n\n<p>If needed you might have to change the \"header search path\" in your target configuration under \"Build Settings\", if it is the first time you are using Xcode some of this will sound weird but I am sure you will find most of it on the Apple Developers portal in great detail.</p>\n\n<p>If you want to test the files without having to create an external static library you could create a command line project and test them faster and easier.</p>\n"}], "owner": {"reputation": 1327, "user_id": 3656414, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e61d1247b5d7ea2f20d4b7371d671dc7?s=128&d=identicon&r=PG&f=1", "display_name": "rapidclock", "link": "https://stackoverflow.com/users/3656414/rapidclock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1433971037, "creation_date": 1433969207, "last_edit_date": 1433971037, "question_id": 30767014, "link": "https://stackoverflow.com/questions/30767014/how-do-i-use-a-bunch-of-h-and-cpp-files-to-create-a-static-library-that-can-be", "title": "How do i use a bunch of .h and .cpp files to create a static library that can be used in another c++ Project", "body": "<p>I am trying to learn C++ from some Stanford Course and they have a custom library which contains a bunch of header files(.h) and their associated source (.cpp) files.</p>\n\n<p>I want to create new C++ projects in xcode 6.x to try out code and include those custom header files in my new projects.</p>\n\n<p>I have no freaking idea how to include those files in my project so that i can peacefully #include \"blahblahblah.h\" and use functions from that header file without issues.</p>\n\n<p>I am new to both xcode, c++(although i know some coding part) and anything else with this process.</p>\n\n<p><strong>Summary:</strong></p>\n\n<ol>\n<li>I have a folder Library which contains a series of .h and .cpp\nfiles.</li>\n<li>I have XCode 6.x.x/Eclipse installed.</li>\n<li>I want to create a new C++ project and use #include\n\"OneOfThoseHeaderFiles.h\" and then use a function or something from\nthose header files.</li>\n</ol>\n\n<p><em>Also assume i have no clue how to run some command line codes that i see a lot of.</em></p>\n\n<p>If someone can please tell me in the most simple way(preferably step-by-step) i would be so eternally grateful and sing praises to you until the day i die :)</p>\n\n<p><strong><em>Note:</strong> Either XCode or Eclipse is fine. I really just want to start coding.</em></p>\n\n<p>I have spent the better part of a whole week trying out xcode, eclipse etc and trying to follow a ton of steps to get it working but i just cant get how to add the files without issues. Either the info seems to be for Xcode 4.x and every menu seems changed or the suggestions are so complicated that a novice like me cant figure it out.</p>\n"}, {"tags": ["c++", "pointers", "this", "multiple-inheritance", "this-pointer"], "answers": [{"comments": [{"owner": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "edited": false, "score": 0, "creation_date": 1433971129, "post_id": 30767192, "comment_id": 49587096, "body": "(1) what do you mean by &quot;interchangeable&quot;, can you explain a little bit more detail? (2) If passing a <code>B2</code> pointer as <code>this</code> to D::f2(), what if we want to access the members of B1 class in D::f2()? For (2), please see the update of the question."}, {"owner": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "edited": false, "score": 0, "creation_date": 1433974012, "post_id": 30767192, "comment_id": 49588403, "body": "Thanks so much!! Please verify me. <code>B2 b2; b2.test()</code>, it&#39;s a <code>B2</code> pointer passed as <code>this</code> to <code>B2::test()</code> definitely since <code>b2</code> is a standlone object. For <code>D d; d.test()</code>, the compiler passes the fixup pointer which actually points to the sub-object <code>B2</code> of <code>D</code> as the <code>this</code> to <code>test()</code> since the actually calling function is <code>B2::test()</code>. If the <code>this</code> does not point to <code>B2</code> inside <code>D</code>, it would cause problems when accessing the members of <code>B2</code> inside the function <code>B2::test()</code>. This is why I think we should pass a fixup pointer as <code>this</code>. This example cannot explain the update. Thanks still"}, {"owner": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "edited": false, "score": 0, "creation_date": 1433974640, "post_id": 30767192, "comment_id": 49588647, "body": "For <code>D d; d.test()</code>, I agree we do something like <code>d.test(B2* b2)</code> (means <code>this</code> points to sub-object <code>B2</code> of D). However, inside <code>B2:test</code>, <code>b2-&gt;f2()</code> should execute <code>D::f2</code>. Am I right? Now the problem becomes what kind of <code>this</code> is passed to <code>b2-&gt;f2()</code>"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1433979348, "post_id": 30767192, "comment_id": 49590221, "body": "Also consider the common situation of <code>void foo( const B2&amp; b2) { b2.f2(); }</code>.  Calling <code>foo()</code> with an object of type <code>D</code> needs to work, but there&#39;s no possibility for <code>foo()</code> to be able to pass a <code>this</code> pointer of type <code>D</code>. So the compiler must compile <code>D::f2()</code> assuming that the <code>this</code> pointer hidden parameter is to a <code>B2</code> type. However, it can assume that the hidden pointer parameter is pointing to the <code>B2</code> type that is embedded in a <code>D</code> type. So the function still has access to members of <code>D&#39; (but must adjust the passed in </code>this` pointer appropriately and automatically)."}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "reply_to_user": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "edited": false, "score": 1, "creation_date": 1433980246, "post_id": 30767192, "comment_id": 49590478, "body": "@FihopZz &quot;inside <code>B2:test</code>, <code>b2-&gt;f2()</code> should execute <code>D::f2</code>&quot; You are absolutely right! That&#39;s precisely the reason why <code>this</code> pointer passed to <code>test()</code> must be that of <code>B2</code> inside <code>D</code>, because <code>test()</code> has no way to adjust the pointer for the call of <code>D::f2()</code>. Therefore, it passes its own <code>this</code> regardless of how it was called, and it works, because both <code>B2::f2</code> and <code>D::f2</code> expect an identical layout of what is passed through <code>this</code> pointer."}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 4, "last_activity_date": 1433972271, "last_edit_date": 1433972271, "creation_date": 1433969981, "answer_id": 30767192, "question_id": 30766982, "link": "https://stackoverflow.com/questions/30766982/virtual-method-table-for-multiple-inheritance/30767192#30767192", "title": "virtual method table for multiple-inheritance", "body": "<p>We cannot pass the <code>D</code> pointer to a virtual function overriding <code>B2::f2()</code>, because all overrides of the same virtual function must accept identical memory layout. </p>\n\n<p>Since <code>B2::f2()</code> function expects <code>B2</code>'s memory layout of the object being passed to it as its <code>this</code> pointer, i.e.</p>\n\n<pre><code>b2:\n  +0: pointer to virtual method table of B2\n  +4: value of int_in_b2\n</code></pre>\n\n<p>the overriding function <code>D::f2()</code> must expect the same layout as well. Otherwise, the functions would no longer be interchangeable.</p>\n\n<p>To see why interchangeability matters consider this scenario:</p>\n\n<pre><code>class B2 {\npublic:\n  void test() { f2(); }\n  virtual void f2() {}\n  int int_in_b2;\n};\n...\nB2 b2;\nb2.test(); // Scenario 1\nD d;\nd.test(); // Scenario 2\n</code></pre>\n\n<p><code>B2::test()</code> needs to make a call of <code>f2()</code> in both scenarios. It has no additional information to tell it how <code>this</code> pointer has to be adjusted when making these calls<sup>*</sup>. That is why the compiler passes the fixed-up pointer, so <code>test()</code>'s call of <code>f2</code> would work both with <code>D::f2()</code> and <code>B2::f2()</code>.</p>\n\n<p><sup>*</sup> Other implementations may very well pass this information; however, multiple inheritance implementation discussed in the article does not do it.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1433993034, "creation_date": 1433993034, "answer_id": 30771001, "question_id": 30766982, "link": "https://stackoverflow.com/questions/30766982/virtual-method-table-for-multiple-inheritance/30771001#30771001", "title": "virtual method table for multiple-inheritance", "body": "<p>Given your class hierarchy, an object of type <code>B2</code> will have the following memory footprint.</p>\n\n\n\n<pre><code>+------------------------+\n| pointer for B2 vtable  |\n+------------------------+\n| int_in_b2              |\n+------------------------+\n</code></pre>\n\n<p>An object of type <code>D</code> will have the following memory footprint.</p>\n\n<pre><code>+------------------------+\n| pointer for B1 vtable  |\n+------------------------+\n| int_in_b1              |\n+------------------------+\n| pointer for B2 vtable  |\n+------------------------+\n| int_in_b2              |\n+------------------------+\n| int_in_d               |\n+------------------------+\n</code></pre>\n\n<p>When you use:</p>\n\n<pre><code>D* d  = new D();\nd-&gt;f2();\n</code></pre>\n\n<p>That call is the same as:</p>\n\n<pre><code>B2* b  = new D();\nb-&gt;f2();\n</code></pre>\n\n<p><code>f2()</code> can be called using a pointer of type <code>B2</code> or pointer of type <code>D</code>. Given that the runtime must be able to correctly work with a pointer of type <code>B2</code>, it has to be able to correctly dispatch the call to <code>D::f2()</code> using the appropriate function pointer in <code>B2</code>'s vtable. However, when the call is dispatched to <code>D:f2()</code> the original pointer of type <code>B2</code> must somehow be offset properly so that in <code>D::f2()</code>, <code>this</code> points to a <code>D</code>, not a <code>B2</code>.</p>\n\n<p>Here's your example code, altered a little bit to print useful pointer values and member data to help understand the changes to the value of <code>this</code> in various functions.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct B1 \n{\n   void f0() {}\n   virtual void f1() {}\n   int int_in_b1;\n};\n\nstruct B2 \n{\n   B2() : int_in_b2(20) {}\n   void test_f2()\n   {\n      std::cout &lt;&lt; \"In B::test_f2(), B*: \" &lt;&lt; (void*)this &lt;&lt; std::endl;\n      this-&gt;f2();\n   }\n\n   virtual void f2()\n   {\n      std::cout\n         &lt;&lt; \"In B::f2(), B*: \" &lt;&lt; (void*)this\n         &lt;&lt; \", int_in_b2: \" &lt;&lt; int_in_b2 &lt;&lt; std::endl;\n   }\n\n   int int_in_b2;\n};\n\nstruct D : B1, B2 \n{\n   D() : int_in_d(30) {}\n   void d() {}\n   void f2()\n   {\n      // ======================================================\n      // If \"this\" is not adjusted properly to point to the D\n      // object, accessing int_in_d will lead to undefined \n      // behavior.\n      // ======================================================\n\n      std::cout\n         &lt;&lt; \"In D::f2(), D*: \" &lt;&lt; (void*)this\n         &lt;&lt; \", int_in_d: \" &lt;&lt; int_in_d &lt;&lt; std::endl;\n   }\n   int int_in_d;\n};\n\nint main()\n{\n   std::cout &lt;&lt; \"sizeof(void*) : \" &lt;&lt; sizeof(void*) &lt;&lt; std::endl;\n   std::cout &lt;&lt; \"sizeof(int)   : \" &lt;&lt; sizeof(int) &lt;&lt; std::endl;\n   std::cout &lt;&lt; \"sizeof(B1)    : \" &lt;&lt; sizeof(B1) &lt;&lt; std::endl;\n   std::cout &lt;&lt; \"sizeof(B2)    : \" &lt;&lt; sizeof(B2) &lt;&lt; std::endl;\n   std::cout &lt;&lt; \"sizeof(D)     : \" &lt;&lt; sizeof(D) &lt;&lt; std::endl &lt;&lt; std::endl;\n\n   B2 *b2 = new B2();\n   D  *d  = new D();\n   b2-&gt;test_f2();\n   d-&gt;test_f2();\n   return 0;\n}\n</code></pre>\n\n<p>Output of the program:</p>\n\n\n\n<pre><code>sizeof(void*) : 8\nsizeof(int)   : 4\nsizeof(B1)    : 16\nsizeof(B2)    : 16\nsizeof(D)     : 32\n\nIn B::test_f2(), B*: 0x1f50010\nIn B::f2(), B*: 0x1f50010, int_in_b2: 20\nIn B::test_f2(), B*: 0x1f50040\nIn D::f2(), D*: 0x1f50030, int_in_d: 30\n</code></pre>\n\n<p>When the actual object used to call <code>test_f2()</code> is <code>D</code>, the value of <code>this</code> changes from <code>0x1f50040</code> in <code>test_f2()</code> to <code>0x1f50030</code> in <code>D::f2()</code>. That matches with sizeof <code>B1</code>, <code>B2</code>, and <code>D</code>. The offset of <code>B2</code> sub-object of a <code>D</code> object is <code>16 (0x10)</code>. The value of <code>this</code> in <code>B::test_f2()</code>, a <code>B*</code>, is changed by <code>0x10</code> before the call is dispatched to <code>D::f2()</code>.</p>\n\n<p>I am going to guess that the value of the offset from <code>D</code> to <code>B2</code> is stored in <code>B2</code>'s vtable. Otherwise, there is no way a generic function dispatch mechanism can change the value of <code>this</code> properly before dispatching the call to the right virtual function.</p>\n"}], "owner": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 1, "accepted_answer_id": 30767192, "answer_count": 2, "score": 7, "last_activity_date": 1433993034, "creation_date": 1433969109, "last_edit_date": 1433971486, "question_id": 30766982, "link": "https://stackoverflow.com/questions/30766982/virtual-method-table-for-multiple-inheritance", "title": "virtual method table for multiple-inheritance", "body": "<p>I'm reading this article \"<a href=\"http://en.wikipedia.org/wiki/Virtual_method_table\">Virtual method table</a>\"</p>\n\n<p>Example in the above article:</p>\n\n<pre><code>class B1 {\npublic:\n  void f0() {}\n  virtual void f1() {}\n  int int_in_b1;\n};\n\nclass B2 {\npublic:\n  virtual void f2() {}\n  int int_in_b2;\n};\n\nclass D : public B1, public B2 {\npublic:\n  void d() {}\n  void f2() {}  // override B2::f2()\n  int int_in_d;\n};\n\nB2 *b2 = new B2();\nD  *d  = new D();\n</code></pre>\n\n<p>In the article, the author introduces that the memory layout of object <code>d</code> is like this:</p>\n\n<pre><code>          d:\nD* d--&gt;      +0: pointer to virtual method table of D (for B1)\n             +4: value of int_in_b1\nB2* b2--&gt;    +8: pointer to virtual method table of D (for B2)\n             +12: value of int_in_b2\n             +16: value of int_in_d\n\nTotal size: 20 Bytes.\n\nvirtual method table of D (for B1):\n  +0: B1::f1()  // B1::f1() is not overridden\n\nvirtual method table of D (for B2):\n  +0: D::f2()   // B2::f2() is overridden by D::f2()\n</code></pre>\n\n<p>The question is about <code>d-&gt;f2()</code>. The call to <code>d-&gt;f2()</code> passes a <code>B2</code> pointer as a <code>this</code> pointer so we have to do something like:</p>\n\n<pre><code>(*(*(d[+8]/*pointer to virtual method table of D (for B2)*/)[0]))(d+8) /* Call d-&gt;f2() */\n</code></pre>\n\n<p>Why should we pass a <code>B2</code> pointer as the <code>this</code> pointer not the original <code>D</code> pointer??? We are actually calling D::f2(). Based on my understanding, we should pass a <code>D</code> pointer as <code>this</code> to D::f2() function.</p>\n\n<p>___update____</p>\n\n<p>If passing a <code>B2</code> pointer as <code>this</code> to D::f2(), What if we want to access the members of <code>B1</code> class in D::f2()?? I believe the <code>B2</code> pointer (this) is shown like this: </p>\n\n<pre><code>          d:\nD* d--&gt;      +0: pointer to virtual method table of D (for B1)\n             +4: value of int_in_b1\nB2* b2--&gt;    +8: pointer to virtual method table of D (for B2)\n             +12: value of int_in_b2\n             +16: value of int_in_d\n</code></pre>\n\n<p>It already has a certain offset of the beginning address of this contiguous memory layout. For example, we want to access <code>b1</code> inside D::f2(), I guess in runtime, it will do something like: <code>*(this+4)</code> (<code>this</code> points to the same address as b2) which would points <code>b2</code> in <code>B</code>???? </p>\n"}, {"tags": ["c++", "templates", "c++11", "generics", "sfinae"], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 8, "last_activity_date": 1433979055, "last_edit_date": 1433979055, "creation_date": 1433969792, "answer_id": 30767152, "question_id": 30766965, "link": "https://stackoverflow.com/questions/30766965/is-there-a-generic-way-to-negate-a-decltype-condition-with-sfinae/30767152#30767152", "title": "Is there a generic way to negate a decltype condition with SFINAE?", "body": "<blockquote>\n  <p>In essence, the equivalent of <code>if ... else if</code> with SFINAE.</p>\n</blockquote>\n\n<p>You can manually control overload resolution with an extra parameter:</p>\n\n<pre><code>template&lt;int I&gt; struct rank : rank&lt;I-1&gt; { static_assert(I &gt; 0, \"\"); };\ntemplate&lt;&gt; struct rank&lt;0&gt; {};\n\ntemplate &lt;class A, class B&gt;\nauto foo(A&amp; a, B&amp; b, rank&lt;10&gt;) -&gt; /*some SFINAE */\n{\n}\n\ntemplate &lt;class A, class B&gt;\nauto foo(A&amp; a, B&amp; b, rank&lt;9&gt;) -&gt; /* some other SFINAE */\n{\n}\n\n// ...\n\ntemplate &lt;class A, class B&gt;\nvoid foo(A&amp; a, B&amp; b, rank&lt;0&gt;)\n{\n// fallback\n}\n\ntemplate &lt;class A, class B&gt;\nvoid foo(A&amp; a, B&amp; b) { return foo(a, b, rank&lt;20&gt;()); }\n</code></pre>\n\n<p>The viable overload with the highest \"rank\" will be selected by overload resolution.</p>\n\n<p>You can't directly negate an <em>ad hoc</em> SFINAE constraint (\"this expression used in the signature must be well-formed\"). You'll need to write an actual trait to detect it, and then negate the result. Simplest way to do it is probably by using  <a href=\"http://en.cppreference.com/w/cpp/experimental/is_detected\" rel=\"nofollow\"><code>std::experimental::is_detected_v</code></a>, recently voted into v2 of the library fundamentals TS:</p>\n\n<pre><code>template&lt;class T&gt;\nusing is_special_t = decltype(T::is_special);\n\ntemplate &lt;class A, class B&gt;\nauto foo(A&amp; a, B&amp; b) -&gt; std::enable_if_t&lt;!std::experimental::is_detected_v&lt;is_special_t, A&gt;&gt;\n{\n    cout &lt;&lt; \"generic fallback\" &lt;&lt; endl;\n}\n\ntemplate &lt;class A, class B&gt;   \nauto foo(A&amp; a, B&amp; b) -&gt; std::enable_if_t&lt;std::experimental::is_detected_v&lt;is_special_t, A&gt;&gt;\n{\n    cout &lt;&lt; \"specialized fallback\" &lt;&lt; endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "edited": false, "score": 0, "creation_date": 1433972631, "post_id": 30767177, "comment_id": 49587886, "body": "Nice.. this seems the closest to what I asked for: a way to specify an arbitrary trait (with <code>decltype</code>) and then negate it anywhere."}], "tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": false, "score": 2, "last_activity_date": 1433970670, "last_edit_date": 1433970670, "creation_date": 1433969879, "answer_id": 30767177, "question_id": 30766965, "link": "https://stackoverflow.com/questions/30766965/is-there-a-generic-way-to-negate-a-decltype-condition-with-sfinae/30767177#30767177", "title": "Is there a generic way to negate a decltype condition with SFINAE?", "body": "<p>First, a template to check whether a given type is \"special\":</p>\n\n<pre><code>template&lt;typename ...&gt; using void_t = void;\n\ntemplate&lt; typename, typename = void &gt;\nstruct is_special : public std::false_type {};\n\ntemplate&lt; typename T &gt;\nstruct is_special&lt;T, void_t&lt;decltype(T::is_special)&gt; &gt; : public std::true_type {};\n</code></pre>\n\n<p>Instead of the <code>void_t</code>, you could also use your <code>decltype(T::is_special, void() )</code> construct.</p>\n\n<p>Next, you can plug in some SFINAE expressions which enable/disable the relevant functions depending on the passed types. The following code particularly disables any generic callback for your special type.</p>\n\n<pre><code>template &lt;class A, class B, typename = std::enable_if_t&lt;!is_special&lt;A&gt;::value&gt; &gt;\nvoid foo(A&amp; a, B&amp; b)\n{\n    cout &lt;&lt; \"generic fallback\" &lt;&lt; endl;\n}\n\ntemplate &lt;class A, typename = std::enable_if_t&lt;!is_special&lt;A&gt;::value&gt;&gt;\nvoid foo(A&amp; a, int &amp;i)\n{\n    cout &lt;&lt; \"generic int\" &lt;&lt; endl;\n}\n\ntemplate &lt;class A, typename = std::enable_if_t&lt;!is_special&lt;A&gt;::value&gt;&gt;\nvoid foo(A&amp; a, string&amp; s)\n{\n    cout &lt;&lt; \"generic str\" &lt;&lt; endl;\n}\n\n//this SFINAE check is probably redundant    \ntemplate &lt;class A, class B, typename = std::enable_if_t&lt;is_special&lt;A&gt;::value&gt; &gt;   \nauto foo(A&amp; a, B&amp; b)\n{\n    cout &lt;&lt; \"specialized fallback\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/dfdfcf33e53152f2\" rel=\"nofollow\">DEMO</a></p>\n\n<p>Note that the last check for <code>is_special</code> in the specialized fallback is probably redundant.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1434037393, "creation_date": 1434037393, "answer_id": 30785453, "question_id": 30766965, "link": "https://stackoverflow.com/questions/30766965/is-there-a-generic-way-to-negate-a-decltype-condition-with-sfinae/30785453#30785453", "title": "Is there a generic way to negate a decltype condition with SFINAE?", "body": "<pre><code>template&lt;class...&gt;struct voider{using type=void;};\ntemplate&lt;class...Ts&gt;using void_t=typename voider&lt;Ts...&gt;::type;\n</code></pre>\n\n<p><code>std::void_t</code> is not in C++11.  The above will work in every C++11 compiler I've tried it on.  (a one-step alias breaks some compilers due to a C++11 language defect)</p>\n\n<pre><code>namespace details {\n  template&lt;template&lt;class...&gt;class Z, class, class...Ts&gt;\n  struct can_apply : std::false_type {};\n  template&lt;template&lt;class...&gt;class Z, class...Ts&gt;\n  struct can_apply&lt;Z, /*std::*/ void_t&lt;Z&lt;Ts...&gt;&gt;, Ts...&gt;: std::true_type {};\n}\ntemplate&lt;template&lt;class...&gt;class Z, class...Ts&gt;\nusing can_apply = details::can_apply&lt;Z, void, Ts...&gt;;\n</code></pre>\n\n<p>this takes a template <code>Z</code> and a pack of parameters <code>Ts...</code>, and returns <code>true_type</code> iff <code>Z&lt;Ts...&gt;</code> is a valid expression.</p>\n\n<pre><code>template&lt;class T&gt;\nusing is_special_t = decltype( T::is_special );\n</code></pre>\n\n<p>takes a <code>T</code>, and returns its <code>is_special</code> type.</p>\n\n<pre><code>template&lt;class T&gt;\nusing has_special = can_apply&lt; is_special_t, T &gt;;\n</code></pre>\n\n<p>solves your problem.</p>\n\n<p>This is similar in function to <a href=\"http://en.cppreference.com/w/cpp/experimental/is_detected\" rel=\"nofollow\"><code>std::experimental::is_detected</code></a>, but is an independent implementation.</p>\n"}], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 799, "favorite_count": 1, "accepted_answer_id": 30767152, "answer_count": 3, "score": 3, "last_activity_date": 1434037393, "creation_date": 1433969060, "question_id": 30766965, "link": "https://stackoverflow.com/questions/30766965/is-there-a-generic-way-to-negate-a-decltype-condition-with-sfinae", "title": "Is there a generic way to negate a decltype condition with SFINAE?", "body": "<p>I have a dozen functions or so that take two parameters: a generic, and a specific type. E.g.:</p>\n\n<pre><code>template &lt;class A, class B&gt;\nvoid foo(A&amp; a, B&amp; b)\n{\n    cout &lt;&lt; \"generic fallback\" &lt;&lt; endl;\n}\n\ntemplate &lt;class A&gt;\nvoid foo(A&amp; a, int &amp;i)\n{\n    cout &lt;&lt; \"generic int\" &lt;&lt; endl;\n}\n\ntemplate &lt;class A&gt;\nvoid foo(A&amp; a, string&amp; s)\n{\n    cout &lt;&lt; \"generic str\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I want to create an overload which will get called whenever <code>A</code> is an instance of a particular struct[1]. The best I came up with so far was:</p>\n\n<pre><code>struct mine\n{\n    int is_special;\n};\n\ntemplate &lt;class A, class B&gt;\nauto foo(A&amp; a, B&amp; b) -&gt; decltype(A::is_special, void())\n{\n    cout &lt;&lt; \"specialized fallback\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The result I want is:</p>\n\n<pre><code>int x;\nstring y;\nfloat z;\nstring generic;\nmine special;\n\nfoo(generic, x); // generic int\nfoo(generic, y); // generic string\nfoo(generic, z); // generic fallback\nfoo(special, x); // specialized fallback\nfoo(special, y); // specialized fallback\nfoo(special, z); // specialized fallback\n</code></pre>\n\n<p>The above code doesn't work, however, because for the specialized cases, there is an ambiguous overload. Is there any easy way to cause those functions to only get created if <code>A::is_special</code> is not a valid type? Ideally I would annotate each function with something like:</p>\n\n<pre><code>template &lt;class A, class B&gt;\nauto foo(A&amp; a, B&amp; b) -&gt; decltype(doesnt_work(A::is_special), void())\n// ...\n</code></pre>\n\n<p>I ask also in the more general case: given any \"positive\" SFINAE test which results in a function or class getting created as a result of the test, is there any way to negate that test specifically for use in other cases? In essence, the equivalent of <code>if ... else if</code> with SFINAE.</p>\n\n<p>I did get this case to work, but I had to rename all <code>foo</code> to <code>foo_imp</code>, add a <code>long</code> parameter to the generic ones, an <code>int</code> parameter to the specialized one, and then define a <code>foo</code> that called them (ideone code <a href=\"https://ideone.com/ds5So4\" rel=\"nofollow\">here</a>). This seems less-than-ideal in that it's not as straightforward, although either way I have to modify all the existing <code>foo</code>s anyway.</p>\n\n<hr>\n\n<p>[1] Note that I can't use the type's name because it is a nested template and would thus result in a non-deducible context.</p>\n"}, {"tags": ["c++", "c", "visual-studio-2010", "dll", "code-injection"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1433969404, "post_id": 30766877, "comment_id": 49586166, "body": "You&#39;re not checking that the <code>VirtualAlloc</code> calls are succeeding - are they?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1433973289, "post_id": 30766877, "comment_id": 49588145, "body": "That debug info you posted is not useful, as all it shows are the DLL&#39;s that are loaded when your application is running."}, {"owner": {"reputation": 19, "user_id": 3245778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3Uca.jpg?s=128&g=1", "display_name": "cyberjitz", "link": "https://stackoverflow.com/users/3245778/cyberjitz"}, "edited": false, "score": 0, "creation_date": 1433986277, "post_id": 30766877, "comment_id": 49591916, "body": "Which is what I was getting at.  It seems to execute with no problems."}, {"owner": {"reputation": 19, "user_id": 3245778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3Uca.jpg?s=128&g=1", "display_name": "cyberjitz", "link": "https://stackoverflow.com/users/3245778/cyberjitz"}, "edited": false, "score": 0, "creation_date": 1433986346, "post_id": 30766877, "comment_id": 49591935, "body": "Jonathan, I&#39;m a C++ newb so I&#39;m not sure how to code in a check for VirtualAlloc"}, {"owner": {"reputation": 19, "user_id": 3245778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3Uca.jpg?s=128&g=1", "display_name": "cyberjitz", "link": "https://stackoverflow.com/users/3245778/cyberjitz"}, "edited": false, "score": 0, "creation_date": 1434033049, "post_id": 30766877, "comment_id": 49617356, "body": "Ok I added printf(&quot;%d\\n&quot;,MyFuncAddress); and printf(%d\\n&quot;,DataAddress); and they&#39;re not coming back as null. I received 80216064 from MyFuncAddress and 80281600 from DataAddress.  Stepping through the code, could this mean the next step to create the thread is failing?"}], "answers": [{"comments": [{"owner": {"reputation": 12628, "user_id": 12339804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/677529a68dbdac610158cfc55ec65aec?s=128&d=identicon&r=PG&f=1", "display_name": "timur", "link": "https://stackoverflow.com/users/12339804/timur"}, "edited": false, "score": 0, "creation_date": 1577183587, "post_id": 59467119, "comment_id": 105114303, "body": "I feel this answer in its current form lacks research and specifics. would you mind expanding on where the quote comes from?"}], "tags": [], "owner": {"reputation": 21, "user_id": 7610530, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DHjTzw9hToE/AAAAAAAAAAI/AAAAAAAAAG8/QcYO1zzkJPI/photo.jpg?sz=128", "display_name": "Walid Hafid", "link": "https://stackoverflow.com/users/7610530/walid-hafid"}, "is_accepted": false, "score": 0, "last_activity_date": 1577182085, "creation_date": 1577182085, "answer_id": 59467119, "question_id": 30766877, "link": "https://stackoverflow.com/questions/30766877/c-injection-code/59467119#59467119", "title": "C++ Injection Code", "body": "<p>I don't think you can inject code into explorer.exe</p>\n\n<blockquote>\n  <p>In Windows 7 and higher, it's not permitted to inject into core Windowsprocesses such as <strong>explorer.exe</strong> or into other users' processes.</p>\n</blockquote>\n"}], "owner": {"reputation": 19, "user_id": 3245778, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S3Uca.jpg?s=128&g=1", "display_name": "cyberjitz", "link": "https://stackoverflow.com/users/3245778/cyberjitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577182085, "creation_date": 1433968807, "question_id": 30766877, "link": "https://stackoverflow.com/questions/30766877/c-injection-code", "title": "C++ Injection Code", "body": "<p>(See below for entire code I'm referring to)</p>\n\n<p>I'm trying to run this code (<a href=\"http://www.codeproject.com/Tips/740480/Code-Injection-A-Generic-Approach-for-bit-and-bit\" rel=\"nofollow\">http://www.codeproject.com/Tips/740480/Code-Injection-A-Generic-Approach-for-bit-and-bit</a>) in Visual C++ 2010 Express to inject code into explorer.exe, but when I run it from the command line, it returns \"Error!\" which means thread is returning as 0.  I'm assuming   </p>\n\n<pre><code>    LPVOID DataAddress = VirtualAllocEx(p, NULL, sizeof(PARAMETERS), MEM_RESERVE | MEM_COMMIT, PAGE_READWRITE);\nWriteProcessMemory(p, DataAddress, &amp;data, sizeof(PARAMETERS), NULL);\n\nHANDLE thread = CreateRemoteThread(p, NULL, 0, (LPTHREAD_START_ROUTINE)MyFuncAddress, DataAddress, 0, NULL);\n</code></pre>\n\n<p>is not able to allocate space for notepad.exe or find notepad for some reason?</p>\n\n<p>I know very little of C++ and I'm trying to understand this.  I've verified the correct pid for explorer is being returned if that helps any (printed pid and verified through tasklist).  In Visual C++, I'm running it as a blank project and when I build it, it builds without error. So, my general thought process is: the code works, but it's not able to properly allocate space or execute notepad for some reason?  I'm familiar with Python and what I typically do is print out a bunch of the steps for debugging.  What should I be printing in this code to help debug?</p>\n\n<p>Also, below the code, I've placed the debug information. </p>\n\n<pre><code>/*\n    Application:    Code injection into a running process.\n    Author:            _RT\n    Dated:            07-March-2014\n*/\n\n#include &lt;windows.h&gt;\n#include &lt;fstream&gt;\n#include &lt;stdlib.h&gt;\n\n#pragma comment(lib,\"advapi32.lib\")\n#pragma comment(lib,\"user32.lib\")\n\ntypedef BOOL (WINAPI* CreatePrcssParam)(LPCTSTR, LPTSTR, LPSECURITY_ATTRIBUTES, \n    LPSECURITY_ATTRIBUTES, BOOL, DWORD, LPVOID, LPCTSTR, LPVOID, LPVOID);\n\nstruct PARAMETERS{\n    LPVOID CreateProcessInj;\n    char lpApplicationName[50];\n    char lpCommandLine[10];\n    LPSECURITY_ATTRIBUTES lpProcessAttributes;\n    LPSECURITY_ATTRIBUTES lpThreadAttributes;\n    BOOL bInheritHandles;\n    DWORD dwCreationFlags;\n    LPVOID lpEnvironment;\n    LPCTSTR lpCurrentDirectory;\n    LPVOID lpStartupInfo;\n    LPVOID lpProcessInformation;\n};\n\nint privileges();\nDWORD myFunc(PARAMETERS * myparam);\nDWORD Useless();    //used to calculate size of myFunc()\n\nint main()\n{\n    privileges();\n\n    _STARTUPINFOA si;\n    PROCESS_INFORMATION pi;\n\n    ZeroMemory(&amp;si, sizeof(si));\n    si.cb = sizeof(si);\n    ZeroMemory(&amp;pi, sizeof(pi));\n\n    DWORD pid;\n    GetWindowThreadProcessId(FindWindow(NULL, \"Start Menu\"), &amp;pid);\n\n    HANDLE p;\n    p = OpenProcess(PROCESS_ALL_ACCESS, false, pid);\n    if (p == NULL)\n    {\n        printf(\"ERROR\");\n        return 1; //error\n    }\n\n    char * AppName = \"C:\\\\Windows\\\\system32\\\\notepad.exe\";\n    char * CmdLine = \"\";\n\n  //Writing the structure vital for CreateProcess function\n    LPVOID StrtUpInfo = VirtualAllocEx(p, NULL, sizeof(si), MEM_RESERVE | MEM_COMMIT, PAGE_READWRITE);\n    WriteProcessMemory(p, StrtUpInfo, &amp;si, sizeof(si), NULL);\n\n    LPVOID PrcssInfo = VirtualAllocEx(p, NULL, sizeof(si), MEM_RESERVE | MEM_COMMIT, PAGE_READWRITE);\n    WriteProcessMemory(p, PrcssInfo, &amp;pi, sizeof(pi), NULL);\n  //=========================================================\n\n    PARAMETERS data = {0};\n    HMODULE Kernel32 = LoadLibrary(\"Kernel32.dll\");\n    data.CreateProcessInj = GetProcAddress(Kernel32, \"CreateProcessA\");\n    strcpy_s(data.lpApplicationName,AppName);\n    strcpy_s(data.lpCommandLine, CmdLine);\n    data.lpProcessAttributes = NULL;\n    data.lpThreadAttributes = NULL;\n    data.bInheritHandles = FALSE;\n    data.dwCreationFlags = NULL;\n    data.lpEnvironment = NULL;\n    data.lpCurrentDirectory = NULL;\n    data.lpStartupInfo = StrtUpInfo;\n    data.lpProcessInformation = PrcssInfo;\n\n    DWORD size_myFunc = (PBYTE)Useless - (PBYTE)myFunc;  //this gets myFunc's size\n\n    //Writing the code part of myFunc -- Instructions to be executed\n    LPVOID MyFuncAddress = VirtualAllocEx(p, NULL, size_myFunc, MEM_RESERVE | MEM_COMMIT, PAGE_EXECUTE_READWRITE);\n    WriteProcessMemory(p, MyFuncAddress, (void*)myFunc, size_myFunc, NULL);\n\n    //Writing the data part of myFunc -- Parameters of the functios\n    LPVOID DataAddress = VirtualAllocEx(p, NULL, sizeof(PARAMETERS), MEM_RESERVE | MEM_COMMIT, PAGE_READWRITE);\n    WriteProcessMemory(p, DataAddress, &amp;data, sizeof(PARAMETERS), NULL);\n\n    HANDLE thread = CreateRemoteThread(p, NULL, 0, (LPTHREAD_START_ROUTINE)MyFuncAddress, DataAddress, 0, NULL);\n    if (thread != 0){\n        //injection completed, not we can wait for it to end and free the memory\n        WaitForSingleObject(thread, INFINITE);   //this waits until thread thread has finished\n        VirtualFree(MyFuncAddress, 0, MEM_RELEASE); //free myFunc memory\n        VirtualFree(DataAddress, 0, MEM_RELEASE); //free data memory\n        CloseHandle(thread);\n        CloseHandle(p);  //don't wait for the thread to finish, just close the handle to the process\n    }\n    else{\n        printf(\"Error!\");\n    }\n    return EXIT_SUCCESS;\n}\n\nstatic DWORD myFunc(PARAMETERS * myparam){\n\n    CreatePrcssParam CreatePrcss = (CreatePrcssParam)myparam-&gt;CreateProcessInj;\n    BOOL result = CreatePrcss((LPCTSTR)myparam-&gt;lpApplicationName, NULL, \n    myparam-&gt;lpProcessAttributes, myparam-&gt;lpThreadAttributes, \n    myparam-&gt;bInheritHandles, myparam-&gt;dwCreationFlags, myparam-&gt;lpEnvironment, \n    myparam-&gt;lpCurrentDirectory, myparam-&gt;lpStartupInfo, myparam-&gt;lpProcessInformation);\n    return 0;\n}\n\nstatic DWORD Useless(){\n    return 0;\n}\n\n//this function is needed to get some extra privileges so your code will be able to work without conflicts with the system\nint privileges(){\n    HANDLE Token;\n    TOKEN_PRIVILEGES tp;\n    if (OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &amp;Token))\n    {\n        LookupPrivilegeValue(NULL, SE_DEBUG_NAME, &amp;tp.Privileges[0].Luid);\n        tp.PrivilegeCount = 1;\n        tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;\n        if (AdjustTokenPrivileges(Token, 0, &amp;tp, sizeof(tp), NULL, NULL) == 0){\n            return 1; //FAIL\n        }\n        else{\n            return 0; //SUCCESS\n        }\n    }\n    return 1;\n}\n</code></pre>\n\n<p>Debug info:</p>\n\n<pre><code>'inj_01.exe': Loaded 'C:\\Users\\root\\Documents\\Visual Studio 2010\\Projects\\inj_01\\Debug\\inj_01.exe', Symbols loaded.\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\ntdll.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\kernel32.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\KernelBase.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\user32.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\gdi32.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\lpk.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\usp10.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\msvcrt.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\advapi32.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\sechost.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\rpcrt4.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\sspicli.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\cryptbase.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\msvcr100d.dll', Symbols loaded.\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\imm32.dll', Symbols loaded (source information stripped).\n'inj_01.exe': Loaded 'C:\\Windows\\SysWOW64\\msctf.dll', Symbols loaded (source information stripped).\nThe thread 'Win32 Thread' (0x11b8) has exited with code 0 (0x0).\nThe program '[6244] inj_01.exe: Native' has exited with code 0 (0x0).\n</code></pre>\n\n<p>Thanks in advance for any help/pointers</p>\n"}, {"tags": ["c++", "tree"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4063815"}, "edited": false, "score": 0, "creation_date": 1433967965, "post_id": 30766600, "comment_id": 49585302, "body": "nullptr checks for a pointer, your parameters are no pointers! Is that a typo/copy-paste-error or (part of) the problem?"}, {"owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 0, "creation_date": 1433968029, "post_id": 30766600, "comment_id": 49585346, "body": "else if(node &gt; parent) strange.."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 0, "creation_date": 1433968080, "post_id": 30766600, "comment_id": 49585387, "body": "@JerryGoyal Looks like they&#39;re trying to heap sort, and they should have <code>else if(node-&gt;value &gt; parent-&gt;value)</code>, they&#39;re code has a number of other issues too"}, {"owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "edited": false, "score": 0, "creation_date": 1433968152, "post_id": 30766600, "comment_id": 49585430, "body": "I think it&#39;s code for binary search tree"}, {"owner": {"reputation": 1270, "user_id": 2403836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/364b2a1a765cbd232b64a2347fbc059e?s=128&d=identicon&r=PG", "display_name": "mr nooby noob", "link": "https://stackoverflow.com/users/2403836/mr-nooby-noob"}, "edited": false, "score": 0, "creation_date": 1433999160, "post_id": 30766600, "comment_id": 49595108, "body": "I turned my two parameters pointers but that still does not fix the error. I also fixed my careless mistake when comparing node &gt; parent."}], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 1, "last_activity_date": 1433967930, "creation_date": 1433967930, "answer_id": 30766631, "question_id": 30766600, "link": "https://stackoverflow.com/questions/30766600/c-no-matching-function-call/30766631#30766631", "title": "C++: no matching function call", "body": "<p>Your function needs the signature</p>\n\n<pre><code>void add(Node* parent, Node* node)\n</code></pre>\n\n<p>Note that these are <code>Node*</code> instead of <code>Node</code>. The same goes for the <code>public</code> overload of that function</p>\n\n<pre><code>void add(Node* node)\n</code></pre>\n\n<p>This is apparent because 1) you are doing comparisons to <code>nullptr</code> and 2) you keep dereferencing your variables with <code>-&gt;</code> instead of <code>.</code></p>\n"}, {"tags": [], "owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "is_accepted": false, "score": 0, "last_activity_date": 1433968317, "creation_date": 1433968317, "answer_id": 30766742, "question_id": 30766600, "link": "https://stackoverflow.com/questions/30766600/c-no-matching-function-call/30766742#30766742", "title": "C++: no matching function call", "body": "<p>CoryKramer has spotted some errors, I'll add this also.</p>\n\n<p>you can't compare pointers so it should be data:</p>\n\n<pre><code>else if(node-&gt;value &gt; parent-&gt;value){\n            add(parent-&gt;right, node);\n</code></pre>\n"}], "owner": {"reputation": 1270, "user_id": 2403836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/364b2a1a765cbd232b64a2347fbc059e?s=128&d=identicon&r=PG", "display_name": "mr nooby noob", "link": "https://stackoverflow.com/users/2403836/mr-nooby-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1433968317, "creation_date": 1433967843, "question_id": 30766600, "link": "https://stackoverflow.com/questions/30766600/c-no-matching-function-call", "title": "C++: no matching function call", "body": "<p>I am getting the above error and its pointing to my call for add(root, node). What does this error mean? I have tried moving the private add to the top but that doesnt work either. Also, it cant be because its private because its in the same class, right?</p>\n\n<pre><code>class Tree{\n\n    public:\n        Node *root;\n        Tree(Node *r){\n            root = r;\n        }\n\n        void add(Node node){\n            add(root, node);//error here\n        }\n    private:\n        void add(Node parent, Node node){\n\n            if(parent == root &amp;&amp; root == nullptr){\n                root = node;\n            }\n\n            if(parent == nullptr){\n                parent(node-&gt;value, nullptr, nullptr);\n            }\n            else if(node &gt; parent){\n                add(parent-&gt;right, node);\n            }\n            else {\n                add(parent-&gt;left, node);\n            }\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-filesystem", "wt"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1433968223, "post_id": 30766515, "comment_id": 49585477, "body": "That bind looks complete redundant"}], "answers": [{"tags": [], "owner": {"reputation": 2635, "user_id": 640397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3j0Sj.png?s=128&g=1", "display_name": "Apples", "link": "https://stackoverflow.com/users/640397/apples"}, "is_accepted": false, "score": 5, "last_activity_date": 1433968336, "last_edit_date": 1433968336, "creation_date": 1433968030, "answer_id": 30766664, "question_id": 30766515, "link": "https://stackoverflow.com/questions/30766515/no-viable-overloaded-in-stdbind-function/30766664#30766664", "title": "No viable overloaded &#39;=&#39; in std::bind function", "body": "<p>In a lambda function, variables that are captured by value with <code>[=]</code> are <code>const</code>. You seem to be capturing <code>i_RootPath</code> (and everything else) by value, thus it is <code>const</code>.</p>\n\n<p>Judging by your code, you should probably use the capture specification <code>[=,&amp;i_RootPath]</code> to capture only <code>i_RootPath</code> by reference.</p>\n\n<p>You could also use <code>[&amp;]</code> to capture everything by reference, but it looks like you need to keep a constant copy of <code>currentPath</code>. In that case, <code>[&amp;,currentPath]</code> would also work.</p>\n"}], "owner": {"reputation": 21, "user_id": 4996513, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-W5qEoXGo9Ag/AAAAAAAAAAI/AAAAAAAAAvE/ph8BgTw0KZo/photo.jpg?sz=128", "display_name": "Daniel Gustafsson", "link": "https://stackoverflow.com/users/4996513/daniel-gustafsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 468, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1433968336, "creation_date": 1433967560, "question_id": 30766515, "link": "https://stackoverflow.com/questions/30766515/no-viable-overloaded-in-stdbind-function", "title": "No viable overloaded &#39;=&#39; in std::bind function", "body": "<p>I am trying to set the value of the referenced variable i_RootPath to different values inside of the while-loop, if you click on the corresponding button. The compiles does not like the way I assign i_RootPath. It says:</p>\n\n<blockquote>\n  <p>No viable overloaded '='</p>\n</blockquote>\n\n<p>How can I successfully change the value of \"i_RootPath\" from within the different methods called by the buttons generated?</p>\n\n<pre><code>void NodeViewApp::AddToolbar( boost::filesystem::path&amp; i_RootPath ) {\n\n    boost::filesystem::path currentPath = i_RootPath;\n\n    while( currentPath.has_root_path() ){\n        WPushButton* currentButton = new WPushButton( \"myfile.txt\" );\n\n        currentButton-&gt;clicked().connect( std::bind([=] () {\n            i_RootPath = currentPath;\n        }) );\n        currentPath = currentPath.parent_path();\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "multiple-inheritance", "virtual-functions"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1433968939, "post_id": 30766496, "comment_id": 49585917, "body": "This may be a matter of interpretation.  <i>&quot;...not in general known&quot;</i> could mean <i>&quot;known in this example, but not in the general case of an arbitrary <code>B* pb</code>&quot;</i>"}, {"owner": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1433969195, "post_id": 30766496, "comment_id": 49586057, "body": "@DrewDormann, can you give me an example that we does not know at compile time?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1433969285, "post_id": 30766496, "comment_id": 49586104, "body": "Yes.  <code>void function( B *pb ) { pb-&gt;f(); }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "edited": false, "score": 0, "creation_date": 1433970786, "post_id": 30767040, "comment_id": 49586934, "body": "So when passing <code>pb1</code> or <code>pb2</code> to the function <code>foo</code>, the compiler only knows, ooh, okay, that&#39;s a <code>B</code> pointer, nothing else! Am I right?"}, {"owner": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "edited": false, "score": 0, "creation_date": 1433975101, "post_id": 30767040, "comment_id": 49588819, "body": "Sahu, I have another question, can you help me have look at it? <a href=\"http://stackoverflow.com/questions/30766982/virtual-method-table-for-multiple-inheritance\" title=\"virtual method table for multiple inheritance\">stackoverflow.com/questions/30766982/&hellip;</a>"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1433969351, "creation_date": 1433969351, "answer_id": 30767040, "question_id": 30766496, "link": "https://stackoverflow.com/questions/30766496/what-does-compiler-do-when-new-an-object-and-assign-the-address-of-the-created-o/30767040#30767040", "title": "what does compiler do when new an object and assign the address of the created object to its base class pointer", "body": "<p>Let's make a few minor changes to your code:</p>\n\n<pre><code>struct A {virtual void f() {}};\nstruct B {virtual void f() {} virtual void g() {}};\n\nvoid foo(B* bp)\n{\n   bp-&gt;f();\n}\n</code></pre>\n\n<p>In the above call, there is no way of knowing which sub-type of <code>B</code> <code>bp</code> points to. It could be <code>C</code>, <code>D</code>, or something else. If you step into the call you would know which sub-type of <code>B</code> <code>bp</code> points to.</p>\n\n<pre><code>struct C : A, B {void f() {}};\nstruct D : B {void f() {}};\n\nint main()\n{\n   B* pb1 = new C;\n   B* pb2 = new D;\n\n   foo(pb1);\n   foo(pb2);\n}\n</code></pre>\n"}], "owner": {"reputation": 2957, "user_id": 389898, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2d563c9aa6378d0668e633e51bfb06c2?s=128&d=identicon&r=PG", "display_name": "Fihop", "link": "https://stackoverflow.com/users/389898/fihop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 30767040, "answer_count": 1, "score": 1, "last_activity_date": 1433969351, "creation_date": 1433967515, "question_id": 30766496, "link": "https://stackoverflow.com/questions/30766496/what-does-compiler-do-when-new-an-object-and-assign-the-address-of-the-created-o", "title": "what does compiler do when new an object and assign the address of the created object to its base class pointer", "body": "<p><strong>Example 3</strong>:(page 377)</p>\n\n<pre><code>class A {virtual void f();};\nclass B {virtual void f(); virtual void g();};\nclass C: A, B {void f();};\nA* pa = new C;\nB* pb = new C;\nC* pc = new C;\npa-&gt;f();\npb-&gt;f();\npc-&gt;f();\npc-&gt;g()\n</code></pre>\n\n<p>(1) In <a href=\"https://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd=1&amp;cad=rja&amp;uact=8&amp;ved=0CB4QFjAAahUKEwjL7fGi-IXGAhUBcawKHQKfAI4&amp;url=http%3A%2F%2Fwww.usenix.org%2Fpublications%2Fcompsystems%2F1989%2Ffall_stroustrup.pdf&amp;ei=jpp4VcvuLIHisQWCvoLwCA&amp;usg=AFQjCNHPqDyiu0Gc700VQ-3h_98GX0A_Ig&amp;sig2=BbfKzrRzgJJsFB74JIGxhA&amp;bvm=bv.95277229,d.b2w\" rel=\"nofollow\">Multiple inheritance for C++</a>, Bjarne wrote: On entry to <code>C::f</code>, the <code>this</code> pointer must point to the beginning of the <code>C</code> object (and not to the <code>B</code> part). However, it is not in general known at compile time that the <code>B</code> pointed to by <code>pb</code> is part of a <code>C</code> so the compiler cannot subtract the constant <code>delta(B)</code>.</p>\n\n<p>Why does the compiler not know that <code>B</code> pointed to by <code>pb</code> is part of a <code>C</code> at compile time? Based on my understanding, <code>B</code> pointed to by <code>pb</code> is definitely a part of <code>C</code> since we <code>new C</code> and <code>C</code> inherits from <code>B</code>!</p>\n\n<p>What about <code>B* pb = new B;</code>? does the compile know <code>B</code> pointed to by pb is a standlone object?</p>\n"}, {"tags": ["c++", "c++11", "language-lawyer", "c++14", "cmath"], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1433968361, "post_id": 30766492, "comment_id": 49585567, "body": "Arguably, the C++11 wording requires <code>s</code> be cast to <code>float</code>, since its type is neither <code>long double</code> nor <code>double</code> nor an integer type."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1433968460, "post_id": 30766492, "comment_id": 49585636, "body": "@T.C. I kept debating that one, but yes it is arguable. Note, neither <code>libc++</code> nor <code>libstdc++</code> implement it that way."}, {"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1433998597, "post_id": 30766492, "comment_id": 49594924, "body": "<code>+ s</code> may be considered idiomatic too."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1434033497, "post_id": 30766492, "comment_id": 49617668, "body": "@Potatoswatter that is a fair point, I personally prefer to use more explicit cast then falling back on using unary <code>+</code> or old style C casts but I know many will argue that it saves typing and is not as ugly."}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 7, "last_activity_date": 1434109287, "last_edit_date": 1434109287, "creation_date": 1433967495, "answer_id": 30766492, "question_id": 30766491, "link": "https://stackoverflow.com/questions/30766491/is-it-valid-to-pass-non-arithmetic-types-as-arguments-to-cmath-functions/30766492#30766492", "title": "Is it valid to pass non-arithmetic types as arguments to cmath functions?", "body": "<p><B>TL;DR</B></p>\n\n<p>According to the standard it is valid to pass non-arithmetic types as arguments to <code>cmath</code> functions but defect report <code>2068</code> argues the original intent was that <code>cmath</code> functions should be restricted to arithmetic types and it appears possible using non-arithmetic arguments will eventually be made ill-formed. So although technically valid using non-arithmetic types as arguments seems questionable in light of defect report <code>2068</code>.</p>\n\n<p><B>Details</B></p>\n\n<p>The <a href=\"http://en.cppreference.com/w/cpp/numeric/math\" rel=\"nofollow\">cmath</a> header is covered in the draft standard section <code>26.8</code> <em>[c.math]</em> provides an additional <em>float</em> and <em>long double</em> overload for the each function defined in <a href=\"http://en.cppreference.com/w/c/numeric/math\" rel=\"nofollow\">math.h</a> that takes a <em>double</em> argument and further, paragraph <code>11</code> provides for <em>sufficient overloads</em> and says:</p>\n\n<blockquote>\n  <p>Moreover, there shall be additional overloads sufficient to ensure:</p>\n  \n  <ol>\n  <li>If any argument corresponding to a double parameter has type long double, then all arguments corresponding to double parameters are\n  effectively cast to long double.</li>\n  <li>Otherwise, if any argument corresponding to a double parameter has type double or an integer type, then all arguments corresponding to\n  double parameters are effectively cast to double.</li>\n  <li>Otherwise, all arguments corresponding to double parameters are effectively cast to float.</li>\n  </ol>\n</blockquote>\n\n<p><B>This seems valid in C++11</B></p>\n\n<p>In C++11  section <code>26.8</code> <em>[c.math]</em> does not include any restrictions disallowing non-arithmetic arguments to <code>cmath</code> functions. In each case from the question we have an overload available which takes <em>double</em> argument(s) and these should be selected via <a href=\"http://en.cppreference.com/w/cpp/language/overload_resolution\" rel=\"nofollow\">overload resolution</a>. </p>\n\n<p><B>Defect report 2086</B></p>\n\n<p>But for C++14 we have <a href=\"http://cplusplus.github.io/LWG/lwg-defects.html#2086\" rel=\"nofollow\">defect report 2086: Overly generic type support for math functions</a>, which argues that the original intent of section <code>26.8</code> <em>[c.math]</em> was to limit <code>cmath</code> functions to be valid only for <em>arithmetic types</em>, which would mimic how they worked in <em>C</em>:</p>\n\n<blockquote>\n  <p>My impression is that this rule set is probably more generic as\n  intended, my assumption is that it is written to mimic the C99/C1x\n  rule set in 7.25 p2+3 in the \"C++\" way [...] (note that C constraints\n  the valid set to types that C++ describes as arithmetic types, but see\n  below for one important difference) [...]</p>\n</blockquote>\n\n<p>and says:</p>\n\n<blockquote>\n  <p>My current suggestion to fix these problems would be to constrain the\n  valid argument types of these functions to arithmetic types.</p>\n</blockquote>\n\n<p>and reworded section <code>26.8</code> paragraph <code>11</code> to say (<em>emphasis mine</em>):</p>\n\n<blockquote>\n  <p>Moreover, there shall be additional overloads sufficient to ensure:</p>\n  \n  <ol>\n  <li>If any <strong>arithmetic</strong> argument corresponding to a double parameter has type long double, then all <strong>arithmetic</strong> arguments corresponding to\n  double parameters are effectively cast to long double.</li>\n  <li>Otherwise, if any <strong>arithmetic</strong> argument corresponding to a double parameter has type double or an integer type, then all <strong>arithmetic</strong>\n  arguments corresponding to double parameters are effectively cast to\n  double.</li>\n  <li>Otherwise, all <strong>arithmetic</strong> arguments corresponding to double parameters are effectively cast to <strong><s>are effectively cast to</S> have type</strong> float.</li>\n  </ol>\n</blockquote>\n\n<p><B>So this is invalid in C++14?</B></p>\n\n<p>Well, despite the intent it looks technically to still be valid as argued in this comment from the discussion in <a href=\"https://llvm.org/bugs/show_bug.cgi?id=18218#c8\" rel=\"nofollow\">libc++ bug report:  incorrect implementation of isnan and similar functions</a>:</p>\n\n<blockquote>\n  <p>That may have been the intent, but I don't see any way to read the\n  standard's wording that way. From the example in comment#0:</p>\n\n<pre><code>std::isnan(A());\n</code></pre>\n  \n  <p>There are no arguments of arithmetic type, so none of the bullets in\n  26.8/11 apply. The overload set contains 'isnan(float)', 'isnan(double)', and 'isnan(long double)', and 'isnan(float)' should\n  be selected.</p>\n</blockquote>\n\n<p>So, the rewording by <code>DR 2086</code> of paragraph <em>11</em> does not make it ill-formed to call the <em>float</em>, <em>double</em> and <em>long double</em> overloads available otherwise with non-arithmetic arguments.</p>\n\n<p><B>Technically valid but questionable to use</B></p>\n\n<p>So although the C++11 and C++14 standard do not restrict <code>cmath</code> functions to arithmetic arguments <code>DR 2068</code> argues the intent of <code>26.8</code> paragraph <code>11</code> was to restrict <code>cmath</code> functions to take only arithmetic arguments and apparently intended to close the loophole in C++14, but did not provide strong enough restrictions.</p>\n\n<p>It seems questionable to rely on a feature which could become ill-formed in a future version of the standard. Since we have implementation divergence any code that relies on passing non-arithmetic arguments to <code>cmath</code> functions for those cases is non-portable and so will be useful only in limited situations. We have an alternative solution, which is to explicitly cast non-arithmetic types to arithmetic types, which bypasses the whole issue, we no longer have to worry about the code becoming ill-formed and it is portable:</p>\n\n<pre><code>std::isgreater( static_cast&lt;double&gt;(s) ,1.0)\n                ^^^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>As Potatoswatter points out using unary <code>+</code> is also an option:</p>\n\n<pre><code>std::isgreater( +s ,1.0)\n</code></pre>\n\n<p><B>Update</B></p>\n\n<p>As T.C. points out in C++11 it can be argued that <code>26.8</code> paragraph <code>11</code> bullet <code>3</code> applies since the argument is neither <em>long double</em>, <em>double</em> nor an integer and should therefore the arguments of type <code>S</code> should be cast to <em>float</em> first. Note, as indicated by the defect report <code>gcc</code> never implemented this and as far I know neither did <code>clang</code>.</p>\n"}], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "accepted_answer_id": 30766492, "answer_count": 1, "score": 5, "last_activity_date": 1434109287, "creation_date": 1433967495, "last_edit_date": 1433974579, "question_id": 30766491, "link": "https://stackoverflow.com/questions/30766491/is-it-valid-to-pass-non-arithmetic-types-as-arguments-to-cmath-functions", "title": "Is it valid to pass non-arithmetic types as arguments to cmath functions?", "body": "<p>Given the following user-defined type <code>S</code> with a conversion function to <em>double</em>:</p>\n\n<pre><code>struct S\n{\n   operator double() { return 1.0;}\n};\n</code></pre>\n\n<p>and the following calls to <a href=\"http://en.cppreference.com/w/cpp/header/cmath\" rel=\"nofollow\">cmath</a> functions using the type <code>S</code>:</p>\n\n<pre><code>#include &lt;cmath&gt;\n\nvoid test(S s) {\n   std::sqrt(s); \n   std::log(s); \n   std::isgreater(s,1.0);\n   std::isless(s,1.0);\n   std::isfinite(s) ;\n}\n</code></pre>\n\n<p>This code compiles with <code>gcc</code> using <code>libstdc++</code> (<em><a href=\"http://melpon.org/wandbox/permlink/15CSejElegZAf85f\" rel=\"nofollow\">see it live</a></em>) but with <code>clang</code> using <code>libc++</code> it generates errors for several of the calls (<em><a href=\"http://melpon.org/wandbox/permlink/ImDK79QNvnVG0hnn\" rel=\"nofollow\">see it live</a></em>) with the following error for <a href=\"http://en.cppreference.com/w/cpp/numeric/math/isgreater\" rel=\"nofollow\">isgreater</a>:</p>\n\n<pre><code>error: no matching function for call to 'isgreater'\n   std::isgreater(s,1.0);\n   ^~~~~~~~~~~~~~\n\nnote: candidate template ignored: disabled by 'enable_if' [with _A1 = S, _A2 = double]\nstd::is_arithmetic&lt;_A1&gt;::value &amp;&amp;\n^\n</code></pre>\n\n<p>and similar errors for <a href=\"http://en.cppreference.com/w/cpp/numeric/math/isless\" rel=\"nofollow\">isless</a> and <a href=\"http://en.cppreference.com/w/cpp/numeric/math/isfinite\" rel=\"nofollow\">isfinite</a>, so <code>libc++</code> expects the arguments for those calls to be <a href=\"http://en.cppreference.com/w/cpp/types/is_arithmetic\" rel=\"nofollow\">arithmetic types</a> which <code>S</code> is not, we can confirm this by going to the source for <a href=\"https://github.com/llvm-mirror/libcxx/blob/0b6f8ed1c772afbdb2c28451e67ac5ee7b6092fe/include/cmath\" rel=\"nofollow\">libc++ cmath header</a>. Although, the requirement for arithmetic types is not consistent across all the <code>cmath</code> functions in <code>libc++</code>.</p>\n\n<p>So the question is, is it valid to pass non-arithmetic types as arguments to <code>cmath</code> functions?</p>\n"}, {"tags": ["c++", "c++14", "constexpr", "c++17"], "comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1433967252, "post_id": 30766103, "comment_id": 49584849, "body": "See also: <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2009/n2976.html\" rel=\"nofollow noreferrer\">open-std.org/JTC1/SC22/WG21/docs/papers/2009/n2976.html</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1433967903, "post_id": 30766103, "comment_id": 49585254, "body": "You&#39;re missing the fact that C++ makes no bloody sense any more."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1433967912, "post_id": 30766103, "comment_id": 49585262, "body": "inb4 lol @ &quot;any more&quot;"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1433968615, "post_id": 30766103, "comment_id": 49585722, "body": "@LightnessRacesinOrbit <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3597.html\" rel=\"nofollow noreferrer\">N3597</a> suggested <code>constexpr</code> destructors, but <i>&quot;no compelling use cases are known&quot;</i>. So a type that can be used in constant expressions needs to have a trivial dtor. OTOH, constant init is a use-case for types with constexpr ctors that cannot be used in a constant expression."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1433968762, "post_id": 30766103, "comment_id": 49585817, "body": "@dyp: It shouldn&#39;t be necessary to even think about any of this. (Notice I&#39;m not necessarily saying it should or could be automated)"}], "answers": [{"comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1433967460, "post_id": 30766445, "comment_id": 49584982, "body": "Hasn&#39;t MS fixed that for VS2015? Also, <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2009/n2976.html\" rel=\"nofollow noreferrer\">open-std.org/JTC1/SC22/WG21/docs/papers/2009/n2976.html</a>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1433967494, "post_id": 30766445, "comment_id": 49585000, "body": "@dyp Not for <code>std::mutex</code>."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1433967906, "post_id": 30766445, "comment_id": 49585259, "body": "Would you happen to have a link where I can read more about that? MSDN says it&#39;s a <code>constexpr</code> constructor, so is <i>constant initialization</i> missing in VS2015 or is it something specific to <code>std::mutex</code>?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 3, "creation_date": 1433968030, "post_id": 30766445, "comment_id": 49585347, "body": "@dyp There seems to be two problems. One is specific to <code>std::mutex</code>, whose default constructor isn&#39;t <code>constexpr</code> in VS2015 - 4th bullet in the list in <a href=\"http://blogs.msdn.com/b/vcblog/archive/2015/06/02/constexpr-complete-for-vs-2015-rtm-c-11-compiler-c-17-stl.aspx\" rel=\"nofollow noreferrer\">this VC blog post</a>. The other is that they are also not doing constant initialization properly - search for &quot;DevDiv#1134662&quot; in that blog post and the comments."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1433968707, "post_id": 30766445, "comment_id": 49585777, "body": "Thanks, <a href=\"https://msdn.microsoft.com/en-us/library/hh921463%28v=vs.140%29.aspx\" rel=\"nofollow noreferrer\">this page about <code>mutex::mutex</code></a> is misleading then..."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 16, "last_activity_date": 1469604403, "last_edit_date": 1469604403, "creation_date": 1433967351, "answer_id": 30766445, "question_id": 30766103, "link": "https://stackoverflow.com/questions/30766103/why-declare-constrexpr-constructors-for-classes-with-non-trivial-destructors-e/30766445#30766445", "title": "why declare constrexpr constructors for classes with non-trivial destructors (e.g. unique_ptr, std::variant)", "body": "<p><code>constexpr</code> constructors can be used for constant initialization, which, as a form of static initialization, is guaranteed to happen before any dynamic initialization takes place.</p>\n\n<p>For example, given a global <code>std::mutex</code>:</p>\n\n<pre><code>std::mutex mutex;\n</code></pre>\n\n<p>In a conforming implementation (read: not MSVC), constructors of other objects can safely lock and unlock <code>mutex</code>, because <code>std::mutex</code>'s constructor is <code>constexpr</code>.</p>\n"}], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1383, "favorite_count": 4, "accepted_answer_id": 30766445, "answer_count": 1, "score": 17, "last_activity_date": 1469604403, "creation_date": 1433966225, "question_id": 30766103, "link": "https://stackoverflow.com/questions/30766103/why-declare-constrexpr-constructors-for-classes-with-non-trivial-destructors-e", "title": "why declare constrexpr constructors for classes with non-trivial destructors (e.g. unique_ptr, std::variant)", "body": "<p>As far as I understand (at least for <code>c++14</code>), a destructor cannot be <code>constexpr</code> if it is not trivial (implicit generated or <code>=default</code>). What is the point of declaring <code>constexpr</code> constructors for structures with non-trivial destructors?</p>\n\n<pre><code>struct X {\n  int a_;\n\n  constexpr X(int a) : a_{a} {}\n\n  // constexpr ~X(){}; // Error dtor cannot be marked constexpr\n  // ~X(){}; // causes  error at y declaration: temporary of non-literal type \u2018X\u2019\n             // in a constant expression .\n};\n\ntemplate &lt;int N&gt; struct Y {};\n\nint main() {\n  Y&lt;X{3}.a_&gt; y; // OK only if the destructor is trivial\n  (void)y;\n}\n// tested with c++14 g++-5.1.0 and clang++ 3.5.0\n</code></pre>\n\n<p>For instance <code>std::unique_ptr</code> has some <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/unique_ptr\">constructors</a> <code>constexpr</code> (default and <code>nullptr_t</code>), even though the destructor is obviously explicitly defined (sure it has no effects if the object is <code>nullptr</code>, but doesn't that mean that it still has an explicit-defined destructor in order to check if the object is in an empty state, and as I've seen, even an empty destructor doesn't allow an object to be used in a compile-constant expression)</p>\n\n<p>Another example is the proposal for <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4542.pdf\">std::variant</a>: it has almost all the constructors <code>constexpr</code> although the destructor has the signature <code>~variant()</code> and it has to <code>call get&lt;T_j&gt; *this).T_j::~T_j() with j being index().</code></p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["c++", "templates", "std", "typetraits", "typename"], "comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1433966505, "post_id": 30766003, "comment_id": 49584443, "body": "<code>std::is_base_of does not work well with my ... stuff</code>. See Scott Meyer&#39;s &quot;Effective Modern C++&quot; item 27. You need <code>std::is_base_of&lt;Base, std::decay_t&lt;T&gt;&gt;::value</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1433966540, "post_id": 30766003, "comment_id": 49584457, "body": "@kfsone <code>Base</code> is a class template."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1433967081, "post_id": 30766003, "comment_id": 49584750, "body": "Well, you get my point. See <a href=\"http://ideone.com/d3Of8G\" rel=\"nofollow noreferrer\">ideone.com/d3Of8G</a>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1433967292, "post_id": 30766003, "comment_id": 49584872, "body": "@kfsone You don&#39;t get my point. <code>Base</code> is a class template. Not a class."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1433967484, "post_id": 30766003, "comment_id": 49584996, "body": "@Barry it is in his code, I&#39;m not referencing his code. <code>std::is_base_of&lt;TheBaseYouWantToTestAgainst, std::decay_t&lt;T&gt;&gt;::value</code>. Happy?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1433967574, "post_id": 30766003, "comment_id": 49585054, "body": "@kfsone He wants to test against <i>any</i> <code>Base&lt;U&gt;</code>. Not one specific <code>Base</code>."}, {"owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1433967587, "post_id": 30766003, "comment_id": 49585062, "body": "@kfsone I want to be able to test if something is of the base type without caring about template types. My <code>is_Base</code> thing does that very cleanly."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1433967667, "post_id": 30766003, "comment_id": 49585116, "body": "<code>std::is_base_of&lt;std::decay_t&lt;U&gt;, std::decay_t&lt;T&gt;&gt;::value</code>."}, {"owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1433969893, "post_id": 30766003, "comment_id": 49586443, "body": "@kfsone the code is a part of my question. I don&#39;t care about <code>is_base_of</code> or <code>decay_t</code> as they do not help me one bit."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "edited": false, "score": 0, "creation_date": 1433967215, "post_id": 30766185, "comment_id": 49584821, "body": "I defined the functions to get rid of the clang warnings. That alias is very similar to my passoff hack. Isn&#39;t there a way to just say <code>is_Base&lt;T&gt;::type::value</code> inside the enable_if?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "edited": false, "score": 0, "creation_date": 1433967260, "post_id": 30766185, "comment_id": 49584851, "body": "@Cory Yeah. Type exactly that."}, {"owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "edited": false, "score": 0, "creation_date": 1433967711, "post_id": 30766185, "comment_id": 49585139, "body": "I get an error. I have tried adding <code>typename</code> in various places, but I guess I just don&#39;t know the propper format."}, {"owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "edited": false, "score": 0, "creation_date": 1433967825, "post_id": 30766185, "comment_id": 49585202, "body": "Oh, ok. No <code>typename</code> at all. Haha. Thanks."}, {"owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "edited": false, "score": 0, "creation_date": 1433971747, "post_id": 30766185, "comment_id": 49587444, "body": "Ah, I didn&#39;t know they added the <code>_t</code> type alias&#39; in c++14. The alias solution is certainly cleaner. I will now accept this answer."}, {"owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "edited": false, "score": 0, "creation_date": 1433973087, "post_id": 30766185, "comment_id": 49588082, "body": "Aparently the plural of alias is aliases."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "edited": false, "score": 0, "creation_date": 1433973698, "post_id": 30766185, "comment_id": 49588293, "body": "@Cory Not alii? That&#39;s unfortunate."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1433966487, "creation_date": 1433966487, "answer_id": 30766185, "question_id": 30766003, "link": "https://stackoverflow.com/questions/30766003/find-typename-of-typename-in-template-parameter/30766185#30766185", "title": "find typename of typename in template parameter", "body": "<p>I'm not entirely sure I understand your question given that your code does work. But stylistically, for metafunctions that yield a type, that type should be named <code>type</code>. So you should have:</p>\n\n<pre><code>using type = decltype( test((T*)0) );\n      ^^^^\n</code></pre>\n\n<p>Or, to avoid the zero-pointer-cast-hack:</p>\n\n<pre><code>using type = decltype(test(std::declval&lt;T*&gt;()));\n</code></pre>\n\n<p>Also, your <code>test</code> doesn't need a definition. Just the declaration. We're not actually <em>calling</em> it, just checking its return type. It doesn't have to be <code>constexpr</code> either, so this suffices:</p>\n\n<pre><code>template&lt;class U&gt;\nstatic std::true_type test(Base&lt;U&gt; *);\nstatic std::false_type test(...);\n</code></pre>\n\n<p>Once you have that, you can alias it:</p>\n\n<pre><code>template &lt;typename T&gt;\nusing is_Base_t = typename is_Base&lt;T&gt;::type;\n</code></pre>\n\n<p>And use the alias:</p>\n\n<pre><code>template &lt;typename T, \n          typename = std::enable_if_t&lt; is_Base_t&lt;T&gt;::value&gt;&gt;\nvoid foo(T const&amp;)\n{\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 1, "creation_date": 1433968854, "post_id": 30766757, "comment_id": 49585868, "body": "Minor, assuming Barry won&#39;t stone me for a comment, you could reduce the <code>using base_type</code> to <code>using base_type = std::decay_t&lt;T&gt;</code> or C++11 <code>using base_type = typename std::decay&lt;T&gt;::type;</code> (<a href=\"http://en.cppreference.com/w/cpp/types/decay\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/types/decay</a>)"}, {"owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1433970699, "post_id": 30766757, "comment_id": 49586887, "body": "@kfsone I take it back. It looks like <code>decay</code> would be useful here."}], "tags": [], "owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "is_accepted": false, "score": 0, "last_activity_date": 1433968379, "creation_date": 1433968379, "answer_id": 30766757, "question_id": 30766003, "link": "https://stackoverflow.com/questions/30766003/find-typename-of-typename-in-template-parameter/30766757#30766757", "title": "find typename of typename in template parameter", "body": "<p>After stumbling blindly into the answer in the comments, I found out I can just use <code>is_Base&lt;T&gt;::type::value</code> without any <code>typename</code> keywords. When trying to remove the <code>static_passoff</code> before, I kept putting in <code>typename</code>. I have always been mixed up with that one. Anyway, here is the final code with a few teaks from Barry's answer:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nusing namespace std;\n\ntemplate &lt; typename D &gt;\nclass Base\n{\npublic:\n    typedef D EType;\n};\n\ntemplate&lt;class T&gt;\nstruct is_Base\n{\n    using base_type = typename std::remove_cv&lt;typename std::remove_reference&lt;T&gt;::type&gt;::type;\n\n    template&lt;class U&gt;\n    static constexpr std::true_type test(Base&lt;U&gt; *) { return std::true_type(); }\n    static constexpr std::false_type test(...) { return std::false_type(); }\n\n    using type = decltype(test(std::declval&lt;T*&gt;()));\n};\n\ntemplate &lt;typename T, typename = typename std::enable_if&lt; is_Base&lt; T &gt;::type::value &gt;::type &gt;\nvoid foo(T const&amp;)\n{\n}\n\n\nclass Derived : public Base&lt;Derived&gt; {};\nclass NotDerived {};\n\n\nint main()\n{\n    Derived d;\n    //NotDerived nd;\n\n    foo(d);\n    //foo(nd); // &lt;-- Should cause compile error\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 4852019, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9246120c5f15223ec909627b8384fd0f?s=128&d=identicon&r=PG", "display_name": "Cory", "link": "https://stackoverflow.com/users/4852019/cory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 1, "accepted_answer_id": 30766185, "answer_count": 2, "score": 1, "last_activity_date": 1433968784, "creation_date": 1433965921, "last_edit_date": 1433968784, "question_id": 30766003, "link": "https://stackoverflow.com/questions/30766003/find-typename-of-typename-in-template-parameter", "title": "find typename of typename in template parameter", "body": "<p>I would like the following code to compile when foo gets anything derived from base, otherwise a compile error ensues. I have written the type-trait class is_Base because the <code>std::is_base_of</code> does not work well with my template stuff. I am close. I got it to work using a <code>static_passoff</code> thing, but I would like to not have to use it. So how can write the enable_if without the <code>static_passoff</code> hack? Here is the running version: <a href=\"http://coliru.stacked-crooked.com/a/6de5171b6d3e12ff\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/6de5171b6d3e12ff</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nusing namespace std;\n\ntemplate &lt; typename D &gt;\nclass Base\n{\npublic:\n    typedef D EType;\n};\n\ntemplate&lt;class T&gt;\nstruct is_Base\n{\n    using base_type = typename std::remove_cv&lt;typename std::remove_reference&lt;T&gt;::type&gt;::type;\n\n    template&lt;class U&gt;\n    static constexpr std::true_type test(Base&lt;U&gt; *) { return std::true_type(); }\n    static constexpr std::false_type test(...) { return std::false_type(); }\n\n    using value = decltype( test((T*)0) );\n};\n\ntemplate &lt; typename A &gt;\nusing static_passoff = std::integral_constant&lt; bool, A::value &gt;;\n\ntemplate &lt;typename T, typename = typename std::enable_if&lt; static_passoff&lt; typename is_Base&lt; T &gt;::value &gt;::value &gt;::type &gt;\nvoid foo(T const&amp;)\n{\n}\n\n\nclass Derived : public Base&lt;Derived&gt; {};\nclass NotDerived {};\n\n\nint main()\n{\n    Derived d;\n    //NotDerived nd;\n\n    foo(d);\n    //foo(nd); // &lt;-- Should cause compile error\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "winforms", "visual-studio-2012", "tfs"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4996460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0779076381616ffeaf467816eab69236?s=128&d=identicon&r=PG&f=1", "display_name": "coop_d", "link": "https://stackoverflow.com/users/4996460/coop-d"}, "edited": false, "score": 0, "creation_date": 1434031188, "post_id": 30772329, "comment_id": 49615923, "body": "Thank you, that example was exactly what I needed!"}], "tags": [], "owner": {"reputation": 3168, "user_id": 1225429, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/aj2YU.jpg?s=128&g=1", "display_name": "ds19", "link": "https://stackoverflow.com/users/1225429/ds19"}, "is_accepted": true, "score": 2, "last_activity_date": 1434000685, "creation_date": 1434000685, "answer_id": 30772329, "question_id": 30765873, "link": "https://stackoverflow.com/questions/30765873/how-to-determine-team-project-uri-from-project-folder/30772329#30772329", "title": "How to determine Team Project Uri from project folder", "body": "<p>You'll have to use the <a href=\"https://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.aspx\" rel=\"nofollow\">VersionControlServer</a> class from TFS Client Object Model.</p>\n\n<p>You can find an example <a href=\"https://msdn.microsoft.com/en-us/magazine/jj883959.aspx\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 67, "user_id": 4996460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0779076381616ffeaf467816eab69236?s=128&d=identicon&r=PG&f=1", "display_name": "coop_d", "link": "https://stackoverflow.com/users/4996460/coop-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 30772329, "answer_count": 1, "score": 0, "last_activity_date": 1434000685, "creation_date": 1433965513, "last_edit_date": 1433965963, "question_id": 30765873, "link": "https://stackoverflow.com/questions/30765873/how-to-determine-team-project-uri-from-project-folder", "title": "How to determine Team Project Uri from project folder", "body": "<p>I'm making a <code>c#</code> application where the user provides a <code>c++</code> project directory that is under source control on <code>TFS</code> 2012. I need to determine the Team Project Uri so that I can use the <code>TFS API</code> to modify labels on that c++ project.</p>\n\n<p>The only thing I've found is to navigate to the <code>$tf</code> folder that is created and parse the <code>localversion.tf1</code> file, but it's not easy to read in. Is there a better way to determine this? </p>\n\n<p>Or perhaps a way to read the file using the Microsoft Team Foundation library?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15441, "user_id": 248123, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea22838ed5987c80d1a77245f6acabe4?s=128&d=identicon&r=PG", "display_name": "andand", "link": "https://stackoverflow.com/users/248123/andand"}, "edited": false, "score": 4, "creation_date": 1433965429, "post_id": 30765802, "comment_id": 49583864, "body": "Haven&#39;t you consumed the first number with the <code>cin&gt;&gt;user_input</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 341, "user_id": 2371809, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50c34ea0927fee1ef0db7c3d65352a82?s=128&d=identicon&r=PG", "display_name": "user2371809", "link": "https://stackoverflow.com/users/2371809/user2371809"}, "edited": false, "score": 0, "creation_date": 1433965607, "post_id": 30765846, "comment_id": 49583962, "body": "Ah, ok. Thanks for explaining that to me. That&#39;s interesting. Dumb mistake on my part."}], "tags": [], "owner": {"reputation": 541, "user_id": 3983972, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9cd8e81550abcb0143c6507947fe7712?s=128&d=identicon&r=PG&f=1", "display_name": "Batman", "link": "https://stackoverflow.com/users/3983972/batman"}, "is_accepted": false, "score": 3, "last_activity_date": 1433966614, "last_edit_date": 1433966614, "creation_date": 1433965445, "answer_id": 30765846, "question_id": 30765802, "link": "https://stackoverflow.com/questions/30765802/getline-ignores-first-character-of-string-input/30765846#30765846", "title": "getline ignores first character of string input", "body": "<p><code>cin &gt;&gt; user_input</code> is the culprit. It's grabbing the input until the first space Get rid of that line of code and you should be all set with just the <code>getline(cin,user_input)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1433965464, "creation_date": 1433965464, "answer_id": 30765855, "question_id": 30765802, "link": "https://stackoverflow.com/questions/30765802/getline-ignores-first-character-of-string-input/30765855#30765855", "title": "getline ignores first character of string input", "body": "<p><code>cin &gt;&gt; user_input;</code> is eating the first number.  Then <code>getline()</code> comes along and gets the rest of the input.  Remove <code>cin &gt;&gt; user_input;</code> and it should work fine.</p>\n"}, {"tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": false, "score": 3, "last_activity_date": 1433965466, "creation_date": 1433965466, "answer_id": 30765856, "question_id": 30765802, "link": "https://stackoverflow.com/questions/30765802/getline-ignores-first-character-of-string-input/30765856#30765856", "title": "getline ignores first character of string input", "body": "<pre><code>cin &gt;&gt; user_input;\n</code></pre>\n\n<p>I'm not sure why you put that line there, but that reads and consumes the first space delimited string from <code>cin</code>. So it reads the 1. After that, <code>getline</code> reads the rest of the line, which is <code>\" 2 3\"</code>.</p>\n"}], "owner": {"reputation": 341, "user_id": 2371809, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/50c34ea0927fee1ef0db7c3d65352a82?s=128&d=identicon&r=PG", "display_name": "user2371809", "link": "https://stackoverflow.com/users/2371809/user2371809"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2941, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1433966614, "creation_date": 1433965263, "last_edit_date": 1495541206, "question_id": 30765802, "link": "https://stackoverflow.com/questions/30765802/getline-ignores-first-character-of-string-input", "title": "getline ignores first character of string input", "body": "<p>Why does C++'s <code>getline</code> function ignore the first character of my input?</p>\n\n<p>In <a href=\"https://stackoverflow.com/questions/17006401/getline-ignoring-first-character-of-input\">this post</a>, the culprit was <code>cin.ignore()</code>, but I don't have the <code>cin.ignore()</code> function in my code.</p>\n\n<p>Here's a very basic sample of what I'm trying to do:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main(){\n\n    string user_input;\n\n    cout &lt;&lt; \"input: \";\n    cin &gt;&gt; user_input;\n    getline(cin,user_input);\n\n    cout &lt;&lt; \"length: \" &lt;&lt; user_input.length() &lt;&lt; endl;\n    cout &lt;&lt; \"your input: \" &lt;&lt; user_input &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem is, the output is totally wrong:</p>\n\n<pre><code>input: 1 2 3\nlength: 4\nyour input:  2 3\n</code></pre>\n\n<p>Obviously the length of the string, with spaces included, should be <code>5</code>, not <code>4</code>. You can also see that the 1st character of <code>user_input</code> is missing.</p>\n\n<p>Can somebody explain to me why this code gives the wrong output and what I need to do to fix this problem? I've never worked with strings that contain spaces like this. I'm curious about what causes this problem to arise! :)</p>\n"}, {"tags": ["c++", "constructor", "redefinition"], "comments": [{"owner": {"reputation": 13419, "user_id": 1405588, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/01a91a47db3526000ffa9247f95fff62?s=128&d=identicon&r=PG", "display_name": "o11c", "link": "https://stackoverflow.com/users/1405588/o11c"}, "edited": false, "score": 0, "creation_date": 1433966619, "post_id": 30765752, "comment_id": 49584497, "body": "Should be tagged as <code>c++</code> but there&#39;s a pending edit I approved without noticing that was missing."}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "edited": false, "score": 1, "creation_date": 1433972193, "post_id": 30765752, "comment_id": 49587668, "body": "Exactly what error do you get?"}, {"owner": {"reputation": 13, "user_id": 4996438, "user_type": "registered", "profile_image": "https://graph.facebook.com/1098898686805433/picture?type=large", "display_name": "Przemek Foltyn", "link": "https://stackoverflow.com/users/4996438/przemek-foltyn"}, "edited": false, "score": 0, "creation_date": 1434012841, "post_id": 30765752, "comment_id": 49602565, "body": "I had error - redefinition, diffirent basic types but Piotr Dajlido helped."}], "answers": [{"tags": [], "owner": {"reputation": 1867, "user_id": 4613957, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9Hbjg.jpg?s=128&g=1", "display_name": "Piotr Dajlido", "link": "https://stackoverflow.com/users/4613957/piotr-dajlido"}, "is_accepted": true, "score": 0, "last_activity_date": 1433967625, "last_edit_date": 1433967625, "creation_date": 1433967170, "answer_id": 30766398, "question_id": 30765752, "link": "https://stackoverflow.com/questions/30765752/redefinition-using-constructor/30766398#30766398", "title": "Redefinition using Constructor", "body": "<blockquote>\n  <p><strong><em>Witaj Przemeku Na StackOverflow!</em></strong></p>\n</blockquote>\n\n<p><strong>How about this?:</strong></p>\n\n<pre><code>class Base {\n        protected: int *value;\n        public: \n        Base() { \n           value = new int, \n          *value = 1; \n        };\n        Base(int &amp;n) { \n            value = new int[n]; \n        };\n};\n\nint main()\n{\n        int x;\n        x = 2;\n        Base base;\n        base = Base(x); &lt;--- fix\n        return 1;\n}\n</code></pre>\n\n<blockquote>\n  <p><strong>Prosz\u0119 bardziej formatowa\u0107 kod! ;)</strong></p>\n</blockquote>\n"}], "owner": {"reputation": 13, "user_id": 4996438, "user_type": "registered", "profile_image": "https://graph.facebook.com/1098898686805433/picture?type=large", "display_name": "Przemek Foltyn", "link": "https://stackoverflow.com/users/4996438/przemek-foltyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 30766398, "answer_count": 1, "score": 1, "last_activity_date": 1433967625, "creation_date": 1433965099, "last_edit_date": 1433967341, "question_id": 30765752, "link": "https://stackoverflow.com/questions/30765752/redefinition-using-constructor", "title": "Redefinition using Constructor", "body": "<p>I cant understand why I have redefinition trying to run this example. Can anyone tell me?</p>\n\n<pre><code>using namespace std;\n\nclass Base {\n        protected: int *value;\n        public: Base() { \n           value = new int, \n          *value = 1; \n        };\n        Base(int &amp;n) { \n            value = new int[n]; \n        }\n};\n\nint main() {\n        int x=2;\n        Base zm;\n        Base(x);\n        system(\"Pause\");\n}\n</code></pre>\n"}, {"tags": ["c++", "digital-signature", "msdn", "winverifytrust"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 3908329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375e9531b8a42a93748d005f2aaa1034?s=128&d=identicon&r=PG", "display_name": "Sasquatchua", "link": "https://stackoverflow.com/users/3908329/sasquatchua"}, "edited": false, "score": 0, "creation_date": 1434150703, "post_id": 30784705, "comment_id": 49674813, "body": "I had left a few commented lines in from my various attempts.  I tried most of these suggestions, with no changes in the results."}], "tags": [], "owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "is_accepted": false, "score": 0, "last_activity_date": 1434035788, "last_edit_date": 1434035788, "creation_date": 1434035435, "answer_id": 30784705, "question_id": 30765385, "link": "https://stackoverflow.com/questions/30765385/winverifytrust-error-code-handling/30784705#30784705", "title": "WinVerifyTrust error code handling", "body": "<p>According to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa382384(v=vs.85).aspx\" rel=\"nofollow\">MSDN</a> it seems that you should set</p>\n\n<pre><code>dwStateAction = WTD_STATEACTION_VERIFY;\n</code></pre>\n\n<p>Also I would try setting</p>\n\n<pre><code>wtfi.hFile = NULL;\n</code></pre>\n\n<p>or when giving the file handle setting</p>\n\n<pre><code>wtfi.pcwszFilePath = NULL;\n</code></pre>\n\n<p>(It's not quite clear to me if you are providing hFile or not. And I would not set both hFile and pcwszFilePath to valid values.)</p>\n\n<p>Another point to check: if you are compiling for Windows 8 or Windows Server 2012 you will have the struct member <code>pSignatureSettings</code> and will need to initialize it. Take care to set <code>cbStruct</code> so that <code>pSignatureSettings</code> is not included or to properly initialize <code>pSignatureSettings</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 3908329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/375e9531b8a42a93748d005f2aaa1034?s=128&d=identicon&r=PG", "display_name": "Sasquatchua", "link": "https://stackoverflow.com/users/3908329/sasquatchua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1668, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434150842, "creation_date": 1433963899, "last_edit_date": 1434150842, "question_id": 30765385, "link": "https://stackoverflow.com/questions/30765385/winverifytrust-error-code-handling", "title": "WinVerifyTrust error code handling", "body": "<p>I've been tasked with determining whether a particular DLL from a third party company has been tampered with, after installation on a user's system.  I've never done anything related to digital signing before.  I'm trying to set up a test on my own system using WinVerifyTrust.</p>\n\n<pre><code>{\n    WINTRUST_FILE_INFO wtfi;\n    wtfi.cbStruct = sizeof(WINTRUST_FILE_INFO);\n    wtfi.pcwszFilePath = TEXT(\"*****.dll\");\n    //wtfi.hFile = DllHandle;\n    wtfi.pgKnownSubject = NULL;\n\n    GUID wtvPolicyGUID = DRIVER_ACTION_VERIFY;\n\n    WINTRUST_DATA wtd;\n    wtd.cbStruct = sizeof(WINTRUST_DATA);\n    wtd.pPolicyCallbackData = NULL;\n    wtd.pSIPClientData = NULL;\n    wtd.dwUIChoice = WTD_UI_NONE;\n    wtd.fdwRevocationChecks = WTD_REVOKE_NONE;\n    wtd.dwUnionChoice = WTD_CHOICE_FILE;\n    wtd.pFile = &amp;wtfi;\n    wtd.dwStateAction = WTD_STATEACTION_IGNORE;\n    wtd.pwszURLReference = NULL;\n    wtd.dwProvFlags = WTD_REVOCATION_CHECK_NONE;\n    //wtd.pSignatureSettings = NULL;            // Win8 and Server2012 only?\n\n    LONG result = WinVerifyTrust( NULL, &amp;wtvPolicyGUID, &amp;wtd);\n    debugf(TEXT(\"Validation result: 0x%08x\"), result);\n}\n</code></pre>\n\n<p>This is returning 0x57.  From what I've gathered from <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa388208(v=vs.85).aspx\" rel=\"nofollow\">MSDN</a>, errors come from a supplied trust provider.  I don't really know what the trust provider is or what error messages it can return.</p>\n\n<ol>\n<li>I've linked in WinTrust.dll and WinTrust.lib, so I presume that means I'm using Microsoft's \"Software Publisher Trust Provider\".  Is this recommended, or are there better ones out there?  Should you be using one specific to / provided by the software publisher whose product you're analyzing?</li>\n<li>SoftPub.h contains the GUID input value, but does not seem to provide output error codes.  Any help in tracking down their response code list is appreciated.</li>\n</ol>\n\n<p>Thanks in advance.</p>\n\n<p>EDIT: I have since figured out that this library uses error codes provided by winerror.h.  0x57 is \"ERROR_INVALID_PARAMETER\", so I'm reviewing what it could be complaining about.  I also tried switching the Policy GUID to WINTRUST_ACTION_GENERIC_VERIFY_V2, which returned error TRUST_E_SUBJECT_FORM_UNKNOWN.  Neither error code is particularly illuminating about what the ultimate issue is.</p>\n\n<p>EDIT 2: I also ran Microsoft's SignTool.exe on the dll in question, and got the following output:</p>\n\n<pre><code>SignTool Error: A certificate chain processed, but terminated in a root\n        certificate which is not trusted by the trust provider.\n\nNumber of errors: 1\n</code></pre>\n\n<p>So it seems like I need to change the trust provider I'm using.  After discussing with the software manufacturer, the task is being dropped in favor of another approach.</p>\n"}, {"tags": ["c++", "svg", "wxwidgets"], "comments": [{"owner": {"reputation": 2165, "user_id": 2113881, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/SvllB.png?s=128&g=1", "display_name": "Evan Carslake", "link": "https://stackoverflow.com/users/2113881/evan-carslake"}, "edited": false, "score": 0, "creation_date": 1433964779, "post_id": 30765339, "comment_id": 49583525, "body": "That question should be asked on Super User."}, {"owner": {"reputation": 18238, "user_id": 15275, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WNTZ3.jpg?s=128&g=1", "display_name": "VZ.", "link": "https://stackoverflow.com/users/15275/vz"}, "edited": false, "score": 0, "creation_date": 1433971412, "post_id": 30765339, "comment_id": 49587258, "body": "Alternatively, you should at least try to explain what did you try to do and why did it fail."}], "owner": {"reputation": 17, "user_id": 4747949, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c28643f078fdd9c923bca22261aa2c70?s=128&d=identicon&r=PG&f=1", "display_name": "Thermoos", "link": "https://stackoverflow.com/users/4747949/thermoos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433963773, "creation_date": 1433963773, "question_id": 30765339, "link": "https://stackoverflow.com/questions/30765339/wxsvg-problems-with-installation-on-linux", "title": "wxSVG - problems with installation on linux", "body": "<p>So I have a problem. I would like to use wxSVG lib. I downloaded package from their website, however I dunno what should I do to make it work.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "mergesort"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1433963412, "post_id": 30765212, "comment_id": 49582804, "body": "&quot;However, I am not getting the correct output.&quot; What output are you getting? What&#39;s the expected output? Please provide a <a href=\"http://www.stackoverflow.com/help/mcve\">Minimal, Complete, Verifiable Example</a>"}, {"owner": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1433963479, "post_id": 30765212, "comment_id": 49582834, "body": "I have added the ideone link for people to see. But for completeness, I&#39;ll edit it still. :)"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1433963575, "post_id": 30765212, "comment_id": 49582895, "body": "Also... you don&#39;t want to be able to sort numbers larger than 999?"}, {"owner": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1433963651, "post_id": 30765212, "comment_id": 49582931, "body": "No. only for small numbers. If required, I can always change the sentinel to the maximum possible integer by calling the library functions. But for now, I just want to sort small numbers."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1433963988, "post_id": 30765212, "comment_id": 49583130, "body": "Merge sort is nice when for efficiency you can only go forward through the data, e.g. data on tape, or lines of text files, or a linked list. For arrays other sorts are generally better and simpler. Anyway, <code>std::sort</code> is the thing."}, {"owner": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1433964151, "post_id": 30765212, "comment_id": 49583211, "body": "@Cheersandhth.-Alf, I was just trying to understand the algorithm, so used an integer array. I am not really implementing any big stuff right now. Otherwise, library calls are really efficient when compared to this."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1433974842, "post_id": 30765212, "comment_id": 49588720, "body": "What a stupid algorithm! It performs approximately 2N allocations (calls to <code>new</code>) for approx. (N log N) items in total; the maximum during the execution is (2 log N) blocks allocated for 2N items (where N is the original array&#39;s length). All those allocations require initalisation, which means the whole array is copied (log N) times. And a half of all those allocations are <code>new int[1]</code>, which is incredibly ineffective. Withe the properly designed code the whole task can be completed with a <b>single</b> copy to a <b>single</b> allocated block for N items..."}, {"owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "edited": false, "score": 0, "creation_date": 1433975056, "post_id": 30765212, "comment_id": 49588806, "body": "@AnindyaDutta Hey, you do lots of allocations (<code>new</code>), but I can&#39;t see where you release allocated blocks (<code>delete</code>)..."}], "answers": [{"comments": [{"owner": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "edited": false, "score": 0, "creation_date": 1433964015, "post_id": 30765245, "comment_id": 49583144, "body": "Changing <code>R[j] = A[q+j+1]</code>. When <code>j=n2-1</code>, it would mean <code>A[q+n2]</code> = <code>A[q+r-q]</code> = <code>A[r]</code>. For <code>r=5</code> (my initial call), this means an <code>OutOfBounds</code>."}, {"owner": {"reputation": 1688, "user_id": 4974174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RAADm.jpg?s=128&g=1", "display_name": "Olivier Poulin", "link": "https://stackoverflow.com/users/4974174/olivier-poulin"}, "reply_to_user": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "edited": false, "score": 0, "creation_date": 1433964239, "post_id": 30765245, "comment_id": 49583259, "body": "@Anindya Dutta It seems correcting for one loop and not for another makes the code inconsistent with the source algorithm no? why don&#39;t you just keep the initial values at 1, and change the conditionals from &#39;&lt;&#39; to &#39;&lt;=&#39; so that you can be sure to stay consistent with the algorithm?"}, {"owner": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "edited": false, "score": 0, "creation_date": 1433964536, "post_id": 30765245, "comment_id": 49583411, "body": "Yeah, I&#39;ll try by considering all the arrays from indices <code>[1...n]</code>. Seems a waste of the <code>0</code>th index though. :\\"}, {"owner": {"reputation": 1688, "user_id": 4974174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RAADm.jpg?s=128&g=1", "display_name": "Olivier Poulin", "link": "https://stackoverflow.com/users/4974174/olivier-poulin"}, "reply_to_user": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "edited": false, "score": 0, "creation_date": 1433964949, "post_id": 30765245, "comment_id": 49583613, "body": "Haha, yea it does. But hardcoding a fix to one loop, while leaving the other intact (which makes your algorithm different from the original) might cause problems with the logic."}, {"owner": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "edited": false, "score": 0, "creation_date": 1433966772, "post_id": 30765245, "comment_id": 49584575, "body": "Indeed, changing <code>R[j]=A[q+j+1]</code> did do the work. Thank you. I&#39;m sorry about the part where I mentioned it going <code>outOfBounds</code>."}, {"owner": {"reputation": 1688, "user_id": 4974174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RAADm.jpg?s=128&g=1", "display_name": "Olivier Poulin", "link": "https://stackoverflow.com/users/4974174/olivier-poulin"}, "reply_to_user": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "edited": false, "score": 0, "creation_date": 1433966935, "post_id": 30765245, "comment_id": 49584669, "body": "@AnindyaDutta No problem! Don&#39;t forget to choose my answer ;)"}, {"owner": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "edited": false, "score": 0, "creation_date": 1433967063, "post_id": 30765245, "comment_id": 49584738, "body": "There were two other changes that needed to be done along with that too. The merging needed to be done till <code>&lt;=r</code> instead of <code>&lt;r</code>, and the array parameter passed in the <code>main</code> function needed to be reduced by <code>1</code>."}], "tags": [], "owner": {"reputation": 1688, "user_id": 4974174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RAADm.jpg?s=128&g=1", "display_name": "Olivier Poulin", "link": "https://stackoverflow.com/users/4974174/olivier-poulin"}, "is_accepted": false, "score": 1, "last_activity_date": 1433963475, "creation_date": 1433963475, "answer_id": 30765245, "question_id": 30765212, "link": "https://stackoverflow.com/questions/30765212/issue-with-merge-sort-implementation-in-c/30765245#30765245", "title": "Issue with Merge Sort - Implementation in C++", "body": "<pre><code>L[i]=A[p+i];                            //   5.    L[i] = A[p+i-1]\n</code></pre>\n\n<p>I think this is your problem, you do not follow the algorithm here, by fixing it a little (not using -1 because you start at 0) but in the next loop, you don't +1 when you're also not starting at the same number in the algorithm?</p>\n\n<pre><code>R[j]=A[q+j];                            //   7.    R[j] = A[q+j]\n</code></pre>\n\n<p>In the previous loop, you manually correct for starting at 0, instead of 1, but here you do not. </p>\n"}, {"tags": [], "owner": {"reputation": 8087, "user_id": 733637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444bbb295cc6185a5464e2250c1a35de?s=128&d=identicon&r=PG&f=1", "display_name": "CiaPan", "link": "https://stackoverflow.com/users/733637/ciapan"}, "is_accepted": true, "score": 1, "last_activity_date": 1434349261, "last_edit_date": 1495542308, "creation_date": 1433977921, "answer_id": 30768881, "question_id": 30765212, "link": "https://stackoverflow.com/questions/30765212/issue-with-merge-sort-implementation-in-c/30768881#30768881", "title": "Issue with Merge Sort - Implementation in C++", "body": "<p>Your recursive calls to <code>mergeSort</code> suggest that <code>p</code> and <code>r</code> are the indices of the first and last item of a subarray to be sorted:</p>\n\n<pre><code>void mergeSort(int* a, int p, int r) {\n    if(p&lt;r) {\n        int q=(p+r)/2;\n        mergeSort(a,p,q);\n        mergeSort(a,q+1,r);\n        merge(a,p,q,r);\n    }\n}\n</code></pre>\n\n<p>If so, your call in <code>main</code> is incorrect:</p>\n\n<pre><code>int arr[]={5,4,3,2,1};\nmergeSort(arr,0,5);\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>int arr[]={5,4,3,2,1};\nmergeSort(arr,0,4);\n</code></pre>\n\n<p>Next, copying the second half is wrong:</p>\n\n<pre><code>R[j]=A[q+j];\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>R[j]=A[q+1+j];\n</code></pre>\n\n<p>Note that <code>p</code> is an index of the first item in the left half, while <code>q</code> is an index of the last item of the left half \u2013 so the first item of the right half has index <code>q+1</code>, and that should be taken as a base for <code>+j</code>.</p>\n\n<p>Finally,</p>\n\n<pre><code>for(k=p; k&lt;r; k++) \n</code></pre>\n\n<p>should read</p>\n\n<pre><code>for(k=p; k&lt;=r; k++) \n</code></pre>\n\n<p>\u2013 <code>r</code> is an index of the last item in the right part, so you need to fill the <code>[r]</code> position of the merged subarray.</p>\n\n<p><strong>EDIT</strong><br>\nSee <a href=\"https://stackoverflow.com/a/29995966/733637\">my answer</a> to <a href=\"https://stackoverflow.com/questions/26403686/sorting-of-an-array-using-merge-sort\">Sorting of an array using merge sort</a>.</p>\n"}], "owner": {"reputation": 1894, "user_id": 3993371, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlles.jpg?s=128&g=1", "display_name": "Anindya Dutta", "link": "https://stackoverflow.com/users/3993371/anindya-dutta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 30768881, "answer_count": 2, "score": 0, "last_activity_date": 1434349261, "creation_date": 1433963324, "last_edit_date": 1434167581, "question_id": 30765212, "link": "https://stackoverflow.com/questions/30765212/issue-with-merge-sort-implementation-in-c", "title": "Issue with Merge Sort - Implementation in C++", "body": "<p>I am following the <em>Merge Sort</em> algorithm suggested in <em>2.3.1</em> of <em>Introduction to Algorithms by Cormen</em>. However, I am not getting the correct output. I am sure there's some silly mistake in here, but I haven't been able to figure that out for some time now. Any help would be really appreciated.</p>\n\n<p>e.g: For input : <code>5,4,3,2,1</code>, my output is <code>3 1 2 4 5</code> instead of <code>1 2 3 4 5</code>.</p>\n\n<p>Assume that the code will be tested for really small numbers, and that replacing the sentinel value \u221e (in the algorithm) by <code>999</code> does not affect the program. </p>\n\n<p>Here is the code and the corresponding steps of the algorithm is in comments. An execution of this is <a href=\"http://ideone.com/BoJUSi\" rel=\"nofollow\">here</a>.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid merge(int* A, int p, int q, int r) {       // MERGE(A,p,q,r)\n    int n1 = q-p+1;                             //   1. n1 = q-p+1\n    int n2 = r-q;                               //   2. n2 = r-q \n\n    int i,j,k;\n    int *L=new int[n1+1], *R = new int[n2+1];   //   3. let L[1...n1+1] and R[1..n2+1] be new arrays\n\n    for(i=0; i&lt;n1; i++)                         //   4. for i = 1 to n1\n        L[i]=A[p+i];                            //   5.    L[i] = A[p+i-1]\n       //the modification in above line is deliberately done to avoid IndexOutOfBounds when p=i=0 and is not because I forgot to subtract 1               \n    for(j=0; j&lt;n2;j++)                          //   6. for j = 1 to n2\n        R[j]=A[q+j];                            //   7.    R[j] = A[q+j]\n\n    L[n1]=999; //sentinel                       //   8. L[n1+1]= \u221e\n    R[n2]=999; //sentinel                       //   9. R[n2+1]= \u221e\n    i=0;                                        //  10. i = 1\n    j=0;                                        //  11. j = 1\n    for(k=p; k&lt;r; k++) {                        //  12. for k = p to r \n        if(L[i]&lt;=R[j])                          //  13.    if(L[i]&lt;=R[j])\n            A[k]=L[i++];                        //  14.         A[k] = L[i]\n                                                //  15.         i = i+1\n        else                                    //  16.    else A[k] = R[j]\n            A[k]=R[j++];                        //  17.         j = j+1                 \n    }\n\n    delete(L);\n    delete(R);\n}\n\nvoid mergeSort(int* a, int p, int r) {        // MERGE-SORT (A,p,r)\n    if(p&lt;r) {                                 //  1. if p&lt;r \n        int q=(p+r)/2;                        //  2.   q = (p+r)/2 \n        mergeSort(a,p,q);                     //  3.   MERGE-SORT(A,p,q)\n        mergeSort(a,q+1,r);                   //  4.   MERGE-SORT(A,q+1,r)\n        merge(a,p,q,r);                       //  5.   MERGE(A,p,q,r)\n    }\n}\n\nint main() {\n    int arr[]={5,4,3,2,1};\n    mergeSort(arr,0,5);\n\n    for(int i=0; i&lt;5; i++)\n        cout &lt;&lt; arr[i]&lt;&lt;\" \";\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "syntax", "reference", "variable-assignment"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1433963523, "post_id": 30765172, "comment_id": 49582858, "body": "reference variables are just an alias for the original variable. In contrast to pointers you cannot change the variable a reference is referencing"}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1433963601, "post_id": 30765172, "comment_id": 49582908, "body": "References are an alias to another value. You can think of it as a pointer without the added syntax. So anytime you change the original value, all references to that object change."}], "answers": [{"comments": [{"owner": {"reputation": 1391, "user_id": 283879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3258d9ec623b7731d76ec3b55403a8?s=128&d=identicon&r=PG", "display_name": "mtone", "link": "https://stackoverflow.com/users/283879/mtone"}, "edited": false, "score": 0, "creation_date": 1433963614, "post_id": 30765227, "comment_id": 49582911, "body": "Are you saying that I modified the original strings? I totally missed that."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1391, "user_id": 283879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3258d9ec623b7731d76ec3b55403a8?s=128&d=identicon&r=PG", "display_name": "mtone", "link": "https://stackoverflow.com/users/283879/mtone"}, "edited": false, "score": 0, "creation_date": 1433963691, "post_id": 30765227, "comment_id": 49582951, "body": "Yes, you used a reference to them to change their values."}, {"owner": {"reputation": 1391, "user_id": 283879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3258d9ec623b7731d76ec3b55403a8?s=128&d=identicon&r=PG", "display_name": "mtone", "link": "https://stackoverflow.com/users/283879/mtone"}, "edited": false, "score": 0, "creation_date": 1433963892, "post_id": 30765227, "comment_id": 49583072, "body": "Ok, thank you. So, if not using a wrapper (which I assume uses pointers), must I use pointers to do this task without copying the strings to regular variables?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1391, "user_id": 283879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3258d9ec623b7731d76ec3b55403a8?s=128&d=identicon&r=PG", "display_name": "mtone", "link": "https://stackoverflow.com/users/283879/mtone"}, "edited": false, "score": 0, "creation_date": 1433963953, "post_id": 30765227, "comment_id": 49583104, "body": "@mtone Pointers are probably the easiest way."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 4, "last_activity_date": 1433963679, "last_edit_date": 1433963679, "creation_date": 1433963398, "answer_id": 30765227, "question_id": 30765172, "link": "https://stackoverflow.com/questions/30765172/c-why-does-2-local-references-to-the-same-object-stay-in-sync/30765227#30765227", "title": "C++ - Why does 2 local references to the same object stay in sync?", "body": "<pre><code>string &amp; ref1 = *it;    \nstring &amp; ref2 = *it;\n</code></pre>\n\n<p>Okay, so you create two references to the same string.</p>\n\n<pre><code>++it;    // After this line, both ref1 &amp;&amp; ref2 evaluates to \"a\"\n</code></pre>\n\n<p>Right, because they are both references to the same string. This is the way you created them.</p>\n\n<pre><code>ref2 = *it; // After this line, both ref1 &amp;&amp; ref2 evaluates to \"b\"\n</code></pre>\n\n<p>Right, because they are both references to the same string, and you just used one to change the value of the string it referred to.</p>\n\n<blockquote>\n  <p>So in my mind, changing ref2 so it points to another string does not change the address of anything, but just the value of ref2 should now point or \"alias\" to string \"b\", while ref1 should still points to \"a\".</p>\n</blockquote>\n\n<p>That's not how references work. This is how references work:</p>\n\n<pre><code>int a, b;\nint&amp; ref = a;\nref = b; // same as a=b, does not \"re-seat\" the reference\n</code></pre>\n\n<p>If you want a reference that can be \"re-seated\", use <a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow\">std::reference_wrapper</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 4640, "user_id": 872616, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/00949aef46ef5e7c8171154d23cf5545?s=128&d=identicon&r=PG", "display_name": "Andreas Haferburg", "link": "https://stackoverflow.com/users/872616/andreas-haferburg"}, "is_accepted": false, "score": 1, "last_activity_date": 1433963943, "creation_date": 1433963943, "answer_id": 30765402, "question_id": 30765172, "link": "https://stackoverflow.com/questions/30765172/c-why-does-2-local-references-to-the-same-object-stay-in-sync/30765402#30765402", "title": "C++ - Why does 2 local references to the same object stay in sync?", "body": "<p>A reference is similar to a pointer where you can't change the address that it points to. Assigning to a reference is the same as assigning to the address that it points to, not to the pointer:</p>\n\n<pre><code>int x = 5;\nint&amp; xref = x;\n// equivalent to:\nint* const xptr = &amp;x;\n\nxref = 10;\n// equivalent to:\n*xptr = 10;\n</code></pre>\n"}], "owner": {"reputation": 1391, "user_id": 283879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e3258d9ec623b7731d76ec3b55403a8?s=128&d=identicon&r=PG", "display_name": "mtone", "link": "https://stackoverflow.com/users/283879/mtone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1640, "favorite_count": 0, "accepted_answer_id": 30765227, "answer_count": 2, "score": 0, "last_activity_date": 1433963943, "creation_date": 1433963215, "last_edit_date": 1433963492, "question_id": 30765172, "link": "https://stackoverflow.com/questions/30765172/c-why-does-2-local-references-to-the-same-object-stay-in-sync", "title": "C++ - Why does 2 local references to the same object stay in sync?", "body": "<p>I would like to understand what's going on here. Obviously, there's some aspect of references or assignment operators that I am not getting right.</p>\n\n<p><strong>Objective</strong>: Within a function, I want to work with 2 local reference variables to various elements of the same list: one is the iterated over and one is a \"marker\" that changes when certain conditions are met. Both are initially referencing the same element. I'm not modifying the strings in the list (in the actual code, the list is a parameter passed by reference).</p>\n\n<p><strong>Problem</strong>: as soon as a change the second reference to another element, the first reference now points to that new element as well. The references stay in sync, but I expected them to be independent.</p>\n\n<p><strong>My interpretation</strong>: iterator is a pointer to a string that is contained in the list. In <code>string &amp; ref1 = *it</code>, I am dereferencing iterator pointer to get the string address (whether that itself is a pointer shouldn't really matter IMO) so that <code>ref1</code> and <code>ref2</code> are \"aliases\" to the address of string \"a\". So in my mind, changing ref2 so it points to another string does not change the address of anything, but just the value of ref2 should now point or \"alias\" to string \"b\", while ref1 should still points to \"a\".</p>\n\n<p>Changing the code to use pointers instead of references works perfectly, so it seems I am incorrectly treating reference variables as pointers, or there's something behind the scenes (overloaded assignment operators?) I'm not thinking of.</p>\n\n<pre><code>list&lt;string&gt; l;    \nstring s1 = \"a\";   \nstring s2 = \"b\";    \nl.push_back(s1);    \nl.push_back(s2);    \nlist&lt;string&gt;::iterator it = l.begin();    \nstring &amp; ref1 = *it;    \nstring &amp; ref2 = *it;    \n++it;    // After this line, both ref1 &amp;&amp; ref2 evaluates to \"a\"\nref2 = *it; // After this line, both ref1 &amp;&amp; ref2 evaluates to \"b\"\nif(ref1 == ref2){    \n  cout &lt;&lt; \"woot!\" &lt;&lt; endl;    \n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "template-meta-programming"], "comments": [{"owner": {"reputation": 8744, "user_id": 4326278, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/FzH4Z.png?s=128&g=1", "display_name": "bogdan", "link": "https://stackoverflow.com/users/4326278/bogdan"}, "edited": false, "score": 1, "creation_date": 1433963710, "post_id": 30765151, "comment_id": 49582962, "body": "<a href=\"http://stackoverflow.com/q/25245453/4326278\">stackoverflow.com/q/25245453/4326278</a> might be useful."}], "answers": [{"comments": [{"owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "edited": false, "score": 0, "creation_date": 1433964915, "post_id": 30765293, "comment_id": 49583596, "body": "Thanks, that makes sense! What about the question I edited in - is there any way to get that result?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "edited": false, "score": 0, "creation_date": 1433965397, "post_id": 30765293, "comment_id": 49583848, "body": "@Claudiu If you can modify <code>wrapper</code>, yes. Updated the answer."}, {"owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "edited": false, "score": 0, "creation_date": 1433965953, "post_id": 30765293, "comment_id": 49584165, "body": "Hmm, to clarify a bit, how can I make two versions of <code>template &lt;typename T&gt; void foo(T&amp; v)</code> such that the first version gets called if <code>T</code> is an instance of <code>wrapper_maker&lt;A&gt;::wrapper&lt;B&gt;</code>, and the second gets called if it isn&#39;t? So far I have <a href=\"https://ideone.com/JJ9vUy\" rel=\"nofollow noreferrer\">this</a>. That is, I added a <code>bool is_wrapper</code> to <code>wrapper</code> and I do <code>auto foo(WrapperT&amp; wrapped) -&gt; decltype(WrapperT::is_wrapper, void()) {</code> to disable it for the unwrapped variant. But for the wrapped variant, both overloads work and I get an ambiguous overload error."}, {"owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "edited": false, "score": 0, "creation_date": 1433966020, "post_id": 30765293, "comment_id": 49584204, "body": "Note that I can&#39;t modify whatever <code>Unwrapped</code> types may exist - only the wrapper, as well as <code>foo</code>."}, {"owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "edited": false, "score": 0, "creation_date": 1433966919, "post_id": 30765293, "comment_id": 49584659, "body": "Roger that! Thanks again."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1433965382, "last_edit_date": 1433965382, "creation_date": 1433963649, "answer_id": 30765293, "question_id": 30765151, "link": "https://stackoverflow.com/questions/30765151/why-cant-this-metametafunctions-template-parameter-be-deduced/30765293#30765293", "title": "Why can&#39;t this metametafunction&#39;s template parameter be deduced?", "body": "<p>This:</p>\n\n<pre><code>template &lt;class ToWrap&gt;\nvoid foo(typename wrapper_maker&lt;ToWrap&gt;::template wrapper&lt;true&gt;&amp; wrapped)\n</code></pre>\n\n<p>Is a non-deduced context. Specifically, the first one in the list from [temp.deduct.type]4/5:</p>\n\n<blockquote>\n  <p>If a template parameter is used only in non-deduced\n  contexts and is not explicitly specified, template argument deduction fails.</p>\n  \n  <p>The non-deduced contexts are:<br>\n  (5.1) \u2014 The <em>nested-name-specifier</em> of a type that was specified using a <em>qualified-id</em>.</p>\n</blockquote>\n\n<p>You need to explicitly pass in <code>ToWrap</code> to make that work. </p>\n\n<p>Let me provide another example as to why this may be the case. Suppose we had:</p>\n\n<pre><code>template &lt;typename T&gt; struct some_fn;\ntemplate &lt;&gt; struct some_fn&lt;A&gt; { using type = int; };\ntemplate &lt;&gt; struct some_fn&lt;B&gt; { using type = int; };\n\ntemplate &lt;typename T&gt;\nvoid foo (typename some_fn&lt;T&gt;::type);\n\nfoo(0); // what should T be?\n</code></pre>\n\n<p>In general, in order to implement this, the compiler would have to know every possible specialization of <code>some_fn</code> - even if there were only one for which <code>some_fn&lt;T&gt;::type</code> were <code>int</code>. </p>\n\n<blockquote>\n  <p>Further, is there any way to define a specialization of foo that will get called on instances of <code>wrapper_maker&lt;T&gt;::wrapper&lt;W&gt;</code>, for any possible <code>T</code>, without having to specify either <code>T</code> or <code>W</code> at the call-site?</p>\n</blockquote>\n\n<p>In general, no, for the same reasons articulated above. However, you can just add additional info to <code>wrapper</code>:</p>\n\n<pre><code>template &lt;class ToWrap&gt;\nstruct wrapper_maker\n{\n    template &lt;bool b&gt;\n    struct wrapper\n    {\n        static constexpr bool value = b;\n        using to_wrap = ToWrap;\n\n        // etc.\n    };\n};\n\ntemplate &lt;typename WrapperT&gt;\nvoid foo(WrapperT&amp; wrapped) {\n    // typename WrapperT::to_wrap is your T\n    // WrappedT::value is your W\n}\n</code></pre>\n"}], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 30765293, "answer_count": 1, "score": 1, "last_activity_date": 1433965382, "creation_date": 1433963153, "last_edit_date": 1433964830, "question_id": 30765151, "link": "https://stackoverflow.com/questions/30765151/why-cant-this-metametafunctions-template-parameter-be-deduced", "title": "Why can&#39;t this metametafunction&#39;s template parameter be deduced?", "body": "<p>I have the following wrapper-maker metametafunction:</p>\n\n<pre><code>template &lt;class ToWrap&gt;\nstruct wrapper_maker\n{\n    template &lt;bool&gt;\n    struct wrapper\n    {\n        wrapper(ToWrap&amp; a) : a(a) { }\n        ToWrap&amp; a;\n    };\n};\n</code></pre>\n\n<p>I want to use it in this template function <code>foo</code>:</p>\n\n<pre><code>template &lt;class ToWrap&gt;\nvoid foo(typename wrapper_maker&lt;ToWrap&gt;::template wrapper&lt;true&gt;&amp; wrapped)\n{\n    cout &lt;&lt; \"foo\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Note: the use case is that <code>foo</code> already exists with different overloads, yet I want this particular overload to be called if the object is a <code>wrapper_maker&lt;ToWrap&gt;::wrapper&lt;bool&gt;</code> instance.</p>\n\n<p>However, when I write a function that calls <code>foo</code> with such an object:</p>\n\n<pre><code>template &lt;class ToWrap&gt;\nvoid call_foo(ToWrap&amp; o)\n{\n    typedef typename wrapper_maker&lt;ToWrap&gt;::template wrapper&lt;true&gt; wrapped_t;\n    wrapped_t wrapped(o);\n    foo(wrapped);\n}\n</code></pre>\n\n<p>Using it as so:</p>\n\n<pre><code>int to_wrap = 5;\ncall_foo(to_wrap);\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>prog.cpp: In instantiation of 'void call_foo(ToWrap&amp;) [with ToWrap = int]':\nprog.cpp:32:18:   required from here\nprog.cpp:27:16: error: no matching function for call to 'foo(wrapped_t&amp;)'\n     foo(wrapped);\n                ^\nprog.cpp:27:16: note: candidate is:\nprog.cpp:17:6: note: template&lt;class ToWrap&gt; void foo(typename wrapper_maker&lt;ToWrap&gt;::wrapper&lt;true&gt;&amp;)\n void foo(typename wrapper_maker&lt;ToWrap&gt;::template wrapper&lt;true&gt;&amp; wrapped)\n      ^\nprog.cpp:17:6: note:   template argument deduction/substitution failed:\nprog.cpp:27:16: note:   couldn't deduce template parameter 'ToWrap'\n     foo(wrapped);\n</code></pre>\n\n<p>Why is that?</p>\n\n<p>EDIT: Further, is there any way to define a specialization of <code>foo</code> that will get called on instances of <code>wrapper_maker&lt;T&gt;::wrapper&lt;W&gt;</code>, for any possible <code>T</code>, without having to specify either <code>T</code> or <code>W</code> at the call-site?</p>\n"}, {"tags": ["c++", "class", "calculator", "lnk2019"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4996305, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153349306973048/picture?type=large", "display_name": "ThatGuy01001010", "link": "https://stackoverflow.com/users/4996305/thatguy01001010"}, "edited": false, "score": 0, "creation_date": 1433963673, "post_id": 30765161, "comment_id": 49582942, "body": "I would up vote if I could, that was exactly what I needed but the other posted questions were too hard to parse with my limited programming knowledge. Thanks!"}], "tags": [], "owner": {"reputation": 10368, "user_id": 308392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/937ca9e6cd63e5ecdc180b8bc81b8b8d?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Trybus", "link": "https://stackoverflow.com/users/308392/micha%c5%82-trybus"}, "is_accepted": true, "score": 2, "last_activity_date": 1433963515, "last_edit_date": 1433963515, "creation_date": 1433963190, "answer_id": 30765161, "question_id": 30765101, "link": "https://stackoverflow.com/questions/30765101/lnk2019-error-with-simple-class/30765161#30765161", "title": "LNK2019 error with simple class", "body": "<p>You have declared the constructor in <code>Calculator.h</code> but have not defined it in <code>Calculator.cpp</code> (or anywhere else).</p>\n\n<p>Adding</p>\n\n<pre><code>Calculator::Calculator() { }\n</code></pre>\n\n<p>to <code>Calculator.cpp</code> will fix the issue.</p>\n"}], "owner": {"reputation": 15, "user_id": 4996305, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153349306973048/picture?type=large", "display_name": "ThatGuy01001010", "link": "https://stackoverflow.com/users/4996305/thatguy01001010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 0, "closed_date": 1433963275, "accepted_answer_id": 30765161, "answer_count": 1, "score": 1, "last_activity_date": 1433963515, "creation_date": 1433962965, "question_id": 30765101, "link": "https://stackoverflow.com/questions/30765101/lnk2019-error-with-simple-class", "closed_reason": "Duplicate", "title": "LNK2019 error with simple class", "body": "<p>(Sorry, I know there are many, many posts about this error, but none of them seem to have as simple a program as I'm trying to build. I apologize, but I don't know enough about C++ to figure out how to use the other questions to my advantage.)</p>\n\n<p>I'm building a simple calculator program based on defining and initializing a class for my C++ course. I think that I'm nearly finished, but I keep getting an error:</p>\n\n<blockquote>\n  <p>Driver.obj : error LNK2019: unresolved external symbol \"public: __thiscall >Calculator::Calculator(void)\" (??0Calculator@@QAE@XZ) referenced in function >_main</p>\n</blockquote>\n\n<p>I think it has something to do with my default constructor, but can anyone help me out? I appreciate any help I can get!</p>\n\n<p>code following:</p>\n\n<p>Calculator.cpp</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include \"Calculator.h\"\n\nusing namespace std;\n\nvoid Calculator::SetOperation(char oper, double opa, double opb)\n{\n    Calculator::operation = oper;\n    Calculator::op1 = opa;\n    Calculator::op2 = opb;\n}\n\nvoid Calculator::Calc()\n{\n    switch(operation)\n        {\n        case ('+'):\n            answer = op1 + op2;\n            result = \"Your operation is addition: \" + to_string(op1) + \" + \" + to_string(op2) + \" = \" + to_string(answer) + '\\n';\n            break;\n\n        case ('-'):\n            answer = op1 - op2;\n            result = \"Your operation is subtraction: \" + to_string(op1) + \" - \" + to_string(op2) + \" = \" + to_string(answer) + '\\n';\n            break;\n\n        case ('*'):\n            answer = op1 * op2;\n            result = \"Your operation is multiplication: \" + to_string(op1) + \" * \" + to_string(op2) + \" = \" + to_string(answer) + '\\n';\n            break;\n\n        case ('/'):\n            answer = op1 / op2;\n            result = \"Your operation is division: \" + to_string(op1) + \" / \" + to_string(op2) + \" = \" + to_string(answer) + '\\n';\n            break;\n        }\n}\n\nstring Calculator::GetResults()\n{\n    return result;\n}\n</code></pre>\n\n<p>Calculator.h</p>\n\n<pre><code>#ifndef _CALCULATOR_H_\n#define _CALCULATOR_H_\n\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass Calculator\n{\nprivate:\n    char operation;\n    double op1;\n    double op2;\n    double answer;\n    string result;\n    void Calc();\npublic:\n    Calculator();\n    void SetOperation(char oper, double opa, double opb);\n    string GetResults();\n};\n\n#endif\n</code></pre>\n\n<p>Driver.cpp</p>\n\n<pre><code>//\n\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include \"Calculator.h\"\n#include \"Functions.h\"\n\nusing namespace std;\n\nint main()\n{\n    char op;\n    double numA, numB;\n    string ing, correct(\"no\"), equals, another(\"no\");\n    Header();\n\n    Calculator MyCalc;\n\n    do\n    {\n        do\n        {\n            cout&lt;&lt; \"Enter the number of an operator from the following:\\n\\n\"\n                &lt;&lt; \"Addition (+):        1      Subtraction (-):  2\\n\"\n                &lt;&lt; \"Multiplication (*):  3      Division (/):     4\\n\\n\";\n            cin &gt;&gt; op;\n            cin.ignore();\n            switch(op)\n            {\n            case (1):\n                op = '+';\n                cout&lt;&lt; \"\\n\\nLet's do some addition!\\n\\n\";\n                ing = \"adding\";\n                break;\n            case (2):\n                op = '-';\n                cout&lt;&lt; \"\\n\\nLet's do some subtraction!\\n\\n\";\n                ing = \"subtracting\";\n                break;\n            case (3):\n                op = '*';\n                cout&lt;&lt; \"\\n\\nLet's do some multiplication!\\n\\n\";\n                ing = \"multiplying\";\n                break;\n            case (4):\n                op = '/';\n                cout&lt;&lt; \"\\n\\nLet's do some division!\\n\\n\";\n                ing = \"dividing\";\n                break;\n            }\n\n            cout&lt;&lt; \"Please enter your first operand: \";\n            cin &gt;&gt; numA;\n            cin.ignore();\n\n            cout&lt;&lt; \"\\n\\nPlease enter your second operand: \";\n            cin &gt;&gt; numB;\n            cin.ignore();\n\n            if (op == '/' &amp;&amp; numB == 0)\n            {\n                cout&lt;&lt; \"!!!!!     ILLEGAL OPERATION\\n!!!!!     Can't divide by zero!\";\n                correct = \"no\";\n            }\n            else\n            {\n                cout&lt;&lt; \"We'll be \" &lt;&lt; ing &lt;&lt; ' ' &lt;&lt; numA &lt;&lt; \" and \" &lt;&lt; numB &lt;&lt; \", correct?\\n&lt;yes/no&gt;&gt;&gt; \";\n                getline(cin, correct);\n            }\n\n        } while(correct != \"yes\");\n\n    MyCalc.SetOperation(op, numA, numB);\n    equals = MyCalc.GetResults();\n    cout&lt;&lt; \"\\n\\n\" &lt;&lt; equals;\n\n    cout&lt;&lt; \"\\n\\n\\nWould you like to perform another calculation?\\n&lt;yes/no&gt;&gt;&gt;\";\n    } while (another != \"no\");\n}\n</code></pre>\n\n<p>Functions.h</p>\n\n<pre><code>#ifndef _FUNCTIONS_H_\n#define _FUNCTIONS_H_\n\nvoid Header();\n\n#endif\n</code></pre>\n\n<p>Functions.cpp</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include \"Functions.h\"\n\nusing namespace std;\n\nvoid Header()\n{\n    do\n    {\n    cout&lt;&lt; \"blah blah blah\";\n    } while(cin.get() != '\\n');\n}\n</code></pre>\n"}, {"tags": ["c++", "nodes"], "comments": [{"owner": {"reputation": 471, "user_id": 3967987, "user_type": "registered", "profile_image": "https://graph.facebook.com/533007798/picture?type=large", "display_name": "ivanw", "link": "https://stackoverflow.com/users/3967987/ivanw"}, "edited": false, "score": 1, "creation_date": 1433962512, "post_id": 30764918, "comment_id": 49582280, "body": "have you tried  n1.left = &amp;n2;"}, {"owner": {"reputation": 1270, "user_id": 2403836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/364b2a1a765cbd232b64a2347fbc059e?s=128&d=identicon&r=PG", "display_name": "mr nooby noob", "link": "https://stackoverflow.com/users/2403836/mr-nooby-noob"}, "reply_to_user": {"reputation": 471, "user_id": 3967987, "user_type": "registered", "profile_image": "https://graph.facebook.com/533007798/picture?type=large", "display_name": "ivanw", "link": "https://stackoverflow.com/users/3967987/ivanw"}, "edited": false, "score": 0, "creation_date": 1433962655, "post_id": 30764918, "comment_id": 49582360, "body": "@ivanw cool that worked! Thank you! Can you please tell me what the difference is between * and &amp;? I thought both of them made them pointers or referred the to memory location..."}, {"owner": {"reputation": 471, "user_id": 3967987, "user_type": "registered", "profile_image": "https://graph.facebook.com/533007798/picture?type=large", "display_name": "ivanw", "link": "https://stackoverflow.com/users/3967987/ivanw"}, "edited": false, "score": 0, "creation_date": 1433962742, "post_id": 30764918, "comment_id": 49582413, "body": "&amp; returns address of while * deferences or declares a pointer."}, {"owner": {"reputation": 823, "user_id": 4812238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFdQT.jpg?s=128&g=1", "display_name": "Ediac", "link": "https://stackoverflow.com/users/4812238/ediac"}, "edited": false, "score": 0, "creation_date": 1433962784, "post_id": 30764918, "comment_id": 49582431, "body": "Also, no need to mention <code>public</code> twice. Just minor things."}, {"owner": {"reputation": 1270, "user_id": 2403836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/364b2a1a765cbd232b64a2347fbc059e?s=128&d=identicon&r=PG", "display_name": "mr nooby noob", "link": "https://stackoverflow.com/users/2403836/mr-nooby-noob"}, "edited": false, "score": 0, "creation_date": 1433962853, "post_id": 30764918, "comment_id": 49582473, "body": "okay thank you guys :)"}], "answers": [{"tags": [], "owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "is_accepted": true, "score": 5, "last_activity_date": 1433962585, "creation_date": 1433962585, "answer_id": 30764969, "question_id": 30764918, "link": "https://stackoverflow.com/questions/30764918/tree-implementation-in-c-cannot-convert-node-to-node/30764969#30764969", "title": "Tree implementation in C++: Cannot convert Node to Node*", "body": "<pre><code>int main(){\n\n    Node n1(\"this\", NULL,NULL);\n    Node n2(\"is\", NULL, NULL);\n    Node n3(\"next\", NULL, NULL);\n    n1.left = &amp;n2;\n    n1.right = &amp;n3;\n\n    n1.display();\n        return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10368, "user_id": 308392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/937ca9e6cd63e5ecdc180b8bc81b8b8d?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Trybus", "link": "https://stackoverflow.com/users/308392/micha%c5%82-trybus"}, "is_accepted": false, "score": 1, "last_activity_date": 1433962676, "creation_date": 1433962676, "answer_id": 30764996, "question_id": 30764918, "link": "https://stackoverflow.com/questions/30764918/tree-implementation-in-c-cannot-convert-node-to-node/30764996#30764996", "title": "Tree implementation in C++: Cannot convert Node to Node*", "body": "<p>When you create nodes like:</p>\n\n<pre><code>Node n1(\"this\", NULL,NULL);\n</code></pre>\n\n<p>you create them on stack, so <code>n1</code> is an object. <code>n1.left</code> is a pointer, so you have to assign a pointer to it too. In order to get a pointer to an object, you have to use the <code>&amp;</code>operator, like:</p>\n\n<pre><code>n1.left = &amp;n2;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1270, "user_id": 2403836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/364b2a1a765cbd232b64a2347fbc059e?s=128&d=identicon&r=PG", "display_name": "mr nooby noob", "link": "https://stackoverflow.com/users/2403836/mr-nooby-noob"}, "edited": false, "score": 0, "creation_date": 1433963046, "post_id": 30765078, "comment_id": 49582558, "body": "Oh okay. Is it because NULL just refers to the value of something but nullptr actually means that it is pointing to nothing? UPDATE: I just tried doing nullptr but it is saying that &#39;nullptr&quot; was not declared in that scope..."}, {"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "reply_to_user": {"reputation": 1270, "user_id": 2403836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/364b2a1a765cbd232b64a2347fbc059e?s=128&d=identicon&r=PG", "display_name": "mr nooby noob", "link": "https://stackoverflow.com/users/2403836/mr-nooby-noob"}, "edited": false, "score": 0, "creation_date": 1433963198, "post_id": 30765078, "comment_id": 49582674, "body": "Please read <i>&quot;<a href=\"http://stackoverflow.com/q/20509734/1629821\">NULL vs nullptr (Why was it replaced?)</a>&quot;</i> ."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 1, "last_activity_date": 1433962910, "last_edit_date": 1592644375, "creation_date": 1433962910, "answer_id": 30765078, "question_id": 30764918, "link": "https://stackoverflow.com/questions/30764918/tree-implementation-in-c-cannot-convert-node-to-node/30765078#30765078", "title": "Tree implementation in C++: Cannot convert Node to Node*", "body": "<blockquote>\n<pre><code>Node n1(&quot;this&quot;, NULL,NULL);\nNode n2(&quot;is&quot;, NULL, NULL);\nNode n3(&quot;next&quot;, NULL, NULL);\n\nn1.left = n2;\nn1.right = n3;\n</code></pre>\n</blockquote>\n<p><code>left</code> and <code>right</code> are <strong>pointers</strong> to Node instances (in fact, you defined them as <code>Node *left</code>, <code>Node *right</code>).</p>\n<p>So you have to take the address of n2 and n3 to do the assignments:</p>\n<pre><code>n1.left = &amp;n2;\nn1.right = &amp;n3;\n</code></pre>\n<p>Moreover, note that in C++11/14, you should use <code>nullptr</code> instead of <code>NULL</code>.</p>\n"}], "owner": {"reputation": 1270, "user_id": 2403836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/364b2a1a765cbd232b64a2347fbc059e?s=128&d=identicon&r=PG", "display_name": "mr nooby noob", "link": "https://stackoverflow.com/users/2403836/mr-nooby-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3929, "favorite_count": 0, "accepted_answer_id": 30764969, "answer_count": 3, "score": 1, "last_activity_date": 1433963321, "creation_date": 1433962371, "last_edit_date": 1433963321, "question_id": 30764918, "link": "https://stackoverflow.com/questions/30764918/tree-implementation-in-c-cannot-convert-node-to-node", "title": "Tree implementation in C++: Cannot convert Node to Node*", "body": "<p>My error is regarding the last two assignment statements in main. I am trying to create a basic tree by having each node point to 2 other nodes: left and right. I have also tried adding * in front of n1, n2, and n3 when creating them, but that did not work either...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n\nusing namespace std;\n\nclass Node{\n\n    public:\n    string value;\n    Node *left, *right;\n\n    public:\n    Node(string s, Node *l, Node *r){\n        value = s;\n        left = l;\n        right = r;\n    }\n    void display(){\n        cout &lt;&lt; value &lt;&lt; left-&gt;value &lt;&lt; right-&gt;value;\n    }\n\n};\nint main(){\n\n    Node n1(\"this\", NULL,NULL);\n    Node n2(\"is\", NULL, NULL);\n    Node n3(\"next\", NULL, NULL);\n    n1.left = n2;\n    n1.right = n3;\n\n    n1.display();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "sublimetext3"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1433962178, "post_id": 30764809, "comment_id": 49582082, "body": "Why can&#39;t you just run your program from the terminal?"}, {"owner": {"reputation": 4574, "user_id": 634042, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/3ace886600f171063b16ce5523631327?s=128&d=identicon&r=PG", "display_name": "derekhh", "link": "https://stackoverflow.com/users/634042/derekhh"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1433963101, "post_id": 30764809, "comment_id": 49582602, "body": "@Praetorian: There&#39;s no reason &quot;I can&#39;t&quot;. I just want to know whether there is a way to run this naturally in Sublime Text."}, {"owner": {"reputation": 4574, "user_id": 634042, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/3ace886600f171063b16ce5523631327?s=128&d=identicon&r=PG", "display_name": "derekhh", "link": "https://stackoverflow.com/users/634042/derekhh"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1433963118, "post_id": 30764809, "comment_id": 49582618, "body": "@Praetorian: And I don&#39;t understand why this gets an upvote as well.."}, {"owner": {"reputation": 4574, "user_id": 634042, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/3ace886600f171063b16ce5523631327?s=128&d=identicon&r=PG", "display_name": "derekhh", "link": "https://stackoverflow.com/users/634042/derekhh"}, "reply_to_user": {"reputation": 15569, "user_id": 2302862, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e264db339bb96e343770fa38018e00f1?s=128&d=identicon&r=PG", "display_name": "Siguza", "link": "https://stackoverflow.com/users/2302862/siguza"}, "edited": false, "score": 0, "creation_date": 1433963140, "post_id": 30764809, "comment_id": 49582631, "body": "@Siguza: I don&#39;t think this is a duplicate. That solution creates a file input directly."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1433963786, "post_id": 30764809, "comment_id": 49583005, "body": "@derekhh Possibly because someone agrees with me that this isn&#39;t worth wasting time over. The linked duplicate does answer your question - <i>I don&#39;t think stdin is supported in Sublime Text</i>, and then suggests a workaround. Anyway, I&#39;m not going to close it as a duplicate, hope you find an alternate answer."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 4967333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uJ0zn.gif?s=128&g=1", "display_name": "Harman Brar", "link": "https://stackoverflow.com/users/4967333/harman-brar"}, "is_accepted": true, "score": 1, "last_activity_date": 1433963214, "last_edit_date": 1495540713, "creation_date": 1433963214, "answer_id": 30765171, "question_id": 30764809, "link": "https://stackoverflow.com/questions/30764809/how-should-i-create-a-build-system-that-can-take-stdin-in-sublime-text-3-under-o/30765171#30765171", "title": "How should I create a build system that can take STDIN in Sublime Text 3 under OSX?", "body": "<p>I just ended up using terminal on OS X.</p>\n\n<p>Someone asked this question earlier but I didn't end up trying it\n<a href=\"https://stackoverflow.com/questions/11599066/sublime-text-with-console-input-for-c-programs\">Sublime Text with console input for c++ programs</a></p>\n"}], "owner": {"reputation": 4574, "user_id": 634042, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/3ace886600f171063b16ce5523631327?s=128&d=identicon&r=PG", "display_name": "derekhh", "link": "https://stackoverflow.com/users/634042/derekhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "closed_date": 1433976796, "accepted_answer_id": 30765171, "answer_count": 1, "score": 0, "last_activity_date": 1433963214, "creation_date": 1433962018, "question_id": 30764809, "link": "https://stackoverflow.com/questions/30764809/how-should-i-create-a-build-system-that-can-take-stdin-in-sublime-text-3-under-o", "closed_reason": "Duplicate", "title": "How should I create a build system that can take STDIN in Sublime Text 3 under OSX?", "body": "<p>I'm trying to build a single C++ file that can take STDIN after building so I can test some single examples and see whether the code work. But it seems the default C++ build system won't be able to consume any input from STDIN. Is there a way to create my own build system to fix this issue?</p>\n"}, {"tags": ["c++", "gcc", "netbeans", "g++", "cygwin"], "answers": [{"tags": [], "owner": {"reputation": 13285, "user_id": 157770, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/870524e51f7b2cf270f9053abea676d5?s=128&d=identicon&r=PG", "display_name": "AlG", "link": "https://stackoverflow.com/users/157770/alg"}, "is_accepted": false, "score": 1, "last_activity_date": 1433962341, "creation_date": 1433962341, "answer_id": 30764904, "question_id": 30764808, "link": "https://stackoverflow.com/questions/30764808/relationship-between-gcc-g-cygwin-and-wingw/30764904#30764904", "title": "Relationship between gcc, g++, cygwin, and wingw?", "body": "<p>Depends upon what you are building;</p>\n\n<ul>\n<li>gcc is for C programs. </li>\n<li>g++ is for C++ programs.</li>\n</ul>\n\n<p>I've not heard of wingw.</p>\n"}, {"tags": [], "owner": {"reputation": 1688, "user_id": 4974174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RAADm.jpg?s=128&g=1", "display_name": "Olivier Poulin", "link": "https://stackoverflow.com/users/4974174/olivier-poulin"}, "is_accepted": false, "score": 2, "last_activity_date": 1433962409, "creation_date": 1433962409, "answer_id": 30764927, "question_id": 30764808, "link": "https://stackoverflow.com/questions/30764808/relationship-between-gcc-g-cygwin-and-wingw/30764927#30764927", "title": "Relationship between gcc, g++, cygwin, and wingw?", "body": "<ol>\n<li>gcc will compile: <em>.c/</em>.cpp files as C and C++ respectively. </li>\n<li>g++ will compile: <em>.c/</em>.cpp files but they will all be treated as\nC++ files.</li>\n<li>Also if you use g++ to link the object files it automatically\n    links in the std C++ libraries (gcc does not do this).</li>\n<li>gcc compiling C files has less predefined macros.</li>\n</ol>\n\n<p>For wingw, did you mean mingw? Because MinGW is for compatibility with Windows. MinGW uses GCC/G++, and MinGW is not a compiler, it's basically a stripped version of Cygwin that uses MS libs wherever possible. </p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 5, "last_activity_date": 1433962681, "creation_date": 1433962681, "answer_id": 30764998, "question_id": 30764808, "link": "https://stackoverflow.com/questions/30764808/relationship-between-gcc-g-cygwin-and-wingw/30764998#30764998", "title": "Relationship between gcc, g++, cygwin, and wingw?", "body": "<p>g++ and gcc are the gnu C++ and C compiler respectively. They're really the same compiler with different flags though.</p>\n\n<p>MinGW is \"Minimalist Gnu for Windows\". It's a port of the gnu compiler to run on Windows.</p>\n\n<p>Cygwin is another port of the gnu compiler (and various other utilities) to Windows. More accurately (IMO, anyway), it's leaving the compiler/programs running on POSIX, and porting a POSIX layer to run on Windows.</p>\n\n<p>As to choosing between them: if you're running Linux, you probably want ot just get a package of gcc/g++ for the distro you're using.</p>\n\n<p>If you're running Windows, it'll depend on your intent. Cygwin works well for porting existing Linux/POSIX code to Windows. If, however, you plan to write code, and just want a compiler, I'd go for MinGW instead.</p>\n\n<p>One other note: the MinGW at MinGW.org hasn't been updated in years. If you decide to go with MinGW, I'd advise getting it from nuwen.net instead (it's updated <em>quite</em> regularly).</p>\n"}], "owner": {"reputation": 611, "user_id": 2449314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4fa100cb62d3657e998484aad7efe122?s=128&d=identicon&r=PG", "display_name": "Tanner Summers", "link": "https://stackoverflow.com/users/2449314/tanner-summers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 0, "accepted_answer_id": 30764998, "answer_count": 3, "score": 7, "last_activity_date": 1433962681, "creation_date": 1433962018, "question_id": 30764808, "link": "https://stackoverflow.com/questions/30764808/relationship-between-gcc-g-cygwin-and-wingw", "title": "Relationship between gcc, g++, cygwin, and wingw?", "body": "<p>I know for my class, I had to install cygwin to get my Netbeans IDE running, but I see options during setup for both g++ and gcc and I am not sure if they are the same thing or not, and where does wingw? is it another compiler, and if so why choose on over the other? </p>\n"}, {"tags": ["c++", "qt", "opencv", "computer-vision", "video-processing"], "comments": [{"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1434005591, "post_id": 30764784, "comment_id": 49597847, "body": "I don&#39;t really understand what you are trying to achieve, is the timer running too slow?"}, {"owner": {"reputation": 41, "user_id": 4996180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45ace100db091c46c2c98967f142d35?s=128&d=identicon&r=PG&f=1", "display_name": "Riyadh Mohammed", "link": "https://stackoverflow.com/users/4996180/riyadh-mohammed"}, "reply_to_user": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1434049210, "post_id": 30764784, "comment_id": 49627995, "body": "Yes , exactly. QTimer  is really slow"}, {"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1434049495, "post_id": 30764784, "comment_id": 49628207, "body": "It could be because your are creating a new timer object. Just create one before the loop"}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1434629403, "post_id": 30764784, "comment_id": 49867016, "body": "@RiyadhMohammed How did  you evaluate the speed of QTimer?"}, {"owner": {"reputation": 41, "user_id": 4996180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45ace100db091c46c2c98967f142d35?s=128&d=identicon&r=PG&f=1", "display_name": "Riyadh Mohammed", "link": "https://stackoverflow.com/users/4996180/riyadh-mohammed"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1434629984, "post_id": 30764784, "comment_id": 49867411, "body": "@UmNyobe  Lets say the video length is 5 minutes. The time my software take to process all frames is more than 5 minutes."}, {"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1434630015, "post_id": 30764784, "comment_id": 49867435, "body": "Then it is not Qtimer. How do you make sure you dont read the same frame twice?"}, {"owner": {"reputation": 41, "user_id": 4996180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45ace100db091c46c2c98967f142d35?s=128&d=identicon&r=PG&f=1", "display_name": "Riyadh Mohammed", "link": "https://stackoverflow.com/users/4996180/riyadh-mohammed"}, "reply_to_user": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1434630027, "post_id": 30764784, "comment_id": 49867443, "body": "@GPPK I use only one QTimer object for the whole loop"}, {"owner": {"reputation": 41, "user_id": 4996180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45ace100db091c46c2c98967f142d35?s=128&d=identicon&r=PG&f=1", "display_name": "Riyadh Mohammed", "link": "https://stackoverflow.com/users/4996180/riyadh-mohammed"}, "reply_to_user": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1434630777, "post_id": 30764784, "comment_id": 49868039, "body": "@UmNyobe I use a frame counter in the stream object to move to the next frame. This works fine because I also, that by the total number of frames I have processed. I also, have a preview option which allows me to see the frames I read. It seems a little slower than watching the original video."}], "answers": [{"tags": [], "owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "is_accepted": true, "score": 1, "last_activity_date": 1434632915, "creation_date": 1434632915, "answer_id": 30916244, "question_id": 30764784, "link": "https://stackoverflow.com/questions/30764784/qtimer-and-opencv-running-slow/30916244#30916244", "title": "qtimer and opencv running slow", "body": "<p>It has little to do with QTimer. But </p>\n\n<p><code>timer-&gt;start(0);</code></p>\n\n<p>is an issue.\nYour video, you input camera has a <code>frame per second</code>, which means a period to produce frame. For instance, 25fps means you will get a new frame every time period, <code>40ms</code> in this case. </p>\n\n<p><strong>Short answer:</strong>\nWithout a proper hardware synchronization, set the timer timeout to <code>1000 / expected fps</code>.</p>\n\n<p><strong>Long answer:</strong></p>\n\n<p>A timer with <code>timeout = 0</code> will schedule a <code>read_shape_params</code> as fast as the framework can. which means that the performance bottleneck end up being <code>capture-&gt;read(frame);</code>, assuming the other part of the code (display, etc..) work perfectly.</p>\n\n<p>There are 3 cases about <code>capture-&gt;read(frame)</code>:</p>\n\n<ol>\n<li>It takes more time that the resolution that time period : You can't do anything. It will be slow.</li>\n<li>It is exact same time. This is the sweet spot. This is also very unlikely.</li>\n<li><p>It takes less time that the resolution that time period : Should be good right? Wrong. You read the same image multiple times. Which means at best you waste cpu resource. At worst, things start to behave like in case 1 from your point of view. How is that? Let say it take 30 ms to present a frame (read and show, I assume you do it linearly).</p>\n\n<pre><code>Read 1 : 30 ms, frame 1\nRead 2 : 30 ms, frame 1 // wasted read, the other party has not updated the frame yet\nRead 3 : 30 ms, frame 2 // your second frame has 60 ms latency, not 40 ms\nRead 4 : 30 ms, frame 3 // frame 3 has 120 ms latency, sweet spot.\nRead 5 : 30 ms, frame 3 // wasted read\nRead 6 : 30 ms, frame 4 // frame 3 has 120 ms latency, sweet spot.\n</code></pre></li>\n</ol>\n\n<p>If on top of that you keep queuing item for display, and display is slow, your perceived fps will be lower.</p>\n\n<ul>\n<li><strong>You need to benchmark the execution time of\n<code>video_stream_reader::read_frame</code> to be sure.</strong></li>\n<li><strong>You also need to benchmark whichever code take care of displaying the\nimage. I  suspect there is a bottleneck there.</strong></li>\n</ul>\n"}], "owner": {"reputation": 41, "user_id": 4996180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45ace100db091c46c2c98967f142d35?s=128&d=identicon&r=PG&f=1", "display_name": "Riyadh Mohammed", "link": "https://stackoverflow.com/users/4996180/riyadh-mohammed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "accepted_answer_id": 30916244, "answer_count": 1, "score": 3, "last_activity_date": 1434632915, "creation_date": 1433961933, "last_edit_date": 1434631058, "question_id": 30764784, "link": "https://stackoverflow.com/questions/30764784/qtimer-and-opencv-running-slow", "title": "qtimer and opencv running slow", "body": "<p>I'm writing a code that uses QTimer to trigger calls to opencv videoCapture to read video frames. I usually read large chunks of videos so, wondering is there any other way to accelerate the process.</p>\n\n<p>here a snapshot of my code that uses QTimer :</p>\n\n<pre><code>timer = new  QTimer();\ntimer-&gt;setTimerType(Qt::PreciseTimer);\nconnect(timer, SIGNAL(timeout()), this, SLOT(read_shape_params()));\n\n//in a loop stop timer and setup the next video stream then start\n\nvoid next(){\n\n  timer-&gt;stop();\n\n   stream = new video_stream_reader();\n   stream-&gt;setColorGray(grayImage);\n   stream-&gt;set_begin_end(begin_at,end_at);\n   stream-&gt;open(video_base_path+video_path);\n\n   timer-&gt;start(0);\n}\n\nvoid shape_param_finder::read_shape_params(){\n   Mat frame;\n   frame = stream-&gt;read_frame();\n}\n\nMat video_stream_reader::read_frame(){\n   Mat frame;\n   bool bSuccess = capture-&gt;read(frame);\n   return frame;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1433962160, "post_id": 30764731, "comment_id": 49582076, "body": "You said <i>I want to make stock management program, using operator overload</i> Which one is more important?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1433962291, "post_id": 30764731, "comment_id": 49582138, "body": "You miss the very beginning - read a book (sorry, your code is junk)"}, {"owner": {"reputation": 693, "user_id": 3662223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ef0890f4d686f08217ccf1eac4c1a44?s=128&d=identicon&r=PG&f=1", "display_name": "Aumnayan", "link": "https://stackoverflow.com/users/3662223/aumnayan"}, "edited": false, "score": 0, "creation_date": 1433963346, "post_id": 30764731, "comment_id": 49582768, "body": "You are missing the fundamental concept of what a class is. Instead of &quot;class A&quot; try thinking of it as &quot;class product&quot;, then defining that class such that it containes everything you need to define a product in your homework. Basically a name, quantity. Apply the operator overloading to that class. Sorry I can&#39;t be specific, but when you are obviously missing an understanding of core concepts there really isn&#39;t a quick answer as to what&#39;s wrong with the code."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4894523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btFLg.jpg?s=128&g=1", "display_name": "WoW", "link": "https://stackoverflow.com/users/4894523/wow"}, "edited": false, "score": 0, "creation_date": 1434001686, "post_id": 30765457, "comment_id": 49596037, "body": "Thank you so much~ Great help!!"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 3, "last_activity_date": 1433964523, "last_edit_date": 1433964523, "creation_date": 1433964130, "answer_id": 30765457, "question_id": 30764731, "link": "https://stackoverflow.com/questions/30764731/operator-overloading-using-char/30765457#30765457", "title": "operator overloading, using char", "body": "<p>If I understand well, you want: </p>\n\n<ul>\n<li>AA be a container of objects:  <code>p[0]</code> would hold the quantity of \"tissue\", <code>p[1]</code> the quantity of \"calendar\", etc...  </li>\n<li>to implement an operator that would decrease the quantity of an object in this container, by using its name. </li>\n</ul>\n\n<h1>About solving your current issue:</h1>\n\n<p>Unfortunately your operator overload <code>int operator-(string &amp;a)</code> is something that could substract a string value from an <code>A</code> and return an <code>int</code>.  </p>\n\n<p>So in <code>main()</code> you should write:  </p>\n\n<pre><code>AA - \"tissue\";  \n</code></pre>\n\n<h1>Improving slightly your approach:</h1>\n\n<p>The fact of having a side effect for <code>operator-</code> is very weird.  When you write x-1, you don't expect that x is changed, do you ?  I'd therefore suggest to improve the readability of your code by using an operator where a side effect is expected.  </p>\n\n<p>By the way, I'd also use strings like C++ strings, and not like c-strings. </p>\n\n<pre><code>  A&amp; operator-= (string &amp;a) {\n     if (a == \"tissue\")\n        p[0]-=1;    // p[0]-- would be an alternative as well ;-)\n     else if (a==\"calendar\") \n        p[1]-=1; \n     //etc... \n     else\n        cout&lt;&lt;\"error\"&lt;&lt;endl;\n     return *this; \n  }\n</code></pre>\n\n<p>I suppose that your question is only about learning how to use operator overload, and not for wirting production quality code.  In this case this approach is fine.  </p>\n\n<h1>One step further:</h1>\n\n<p>In fact what you try to achieve in your own way, is a kind of associative container.  Forunately, this already exists in standard C++ with <strong><a href=\"http://www.cplusplus.com/reference/map/map/\" rel=\"nofollow\"><code>std::map</code></a></strong></p>\n\n<p>All your code could be replaced with:  </p>\n\n<pre><code>map&lt;string, int&gt; AA; \nAA[\"tissue\"]++; \nAA[\"calendar\"]+=10; \nAA[\"fan\"] = AA[\"calendar\"]*2;\ncout &lt;&lt; \"I have \"&lt;&lt;AA[\"tissue\"] &lt;&lt;\" tissues in stock\"&lt;&lt;endl; \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4894523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/btFLg.jpg?s=128&g=1", "display_name": "WoW", "link": "https://stackoverflow.com/users/4894523/wow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1433964523, "creation_date": 1433961738, "last_edit_date": 1433962007, "question_id": 30764731, "link": "https://stackoverflow.com/questions/30764731/operator-overloading-using-char", "title": "operator overloading, using char", "body": "<p>I want to make stock management program, using operator overload</p>\n\n<p>for example, if one tissue is sold, I want to operate using ' tissue-=1' </p>\n\n<p>I made an array for products inventory P = {1, 2, 3, 4, 5} each for tissue, calendar, fan, book, pen</p>\n\n<p>part of my code(for test) is:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n\nusing namespace std;\n\nclass A{\n   public:\n      static int p[];\n      int operator-(string &amp;a){\n         if (strcmp(a, \"tissue\")==0)\n            return p[0]-=1;\n         else\n            cout&lt;&lt;\"error\"&lt;&lt;endl;\n      }\n\n};\n\nint A::p[]={1,2,3,4,5}\n\nint main(){\n   A AA;\n   \"tissue\"-=1;\n   return 0;\n}\n</code></pre>\n\n<p>I tried my best as beginner.. I know the codes are very wierd, please tell me anything I missed</p>\n"}, {"tags": ["c++", "image", "textures", "sdl"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 3158081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e5cbb4d646e303feecf445fcf837a48?s=128&d=identicon&r=PG&f=1", "display_name": "NickM13", "link": "https://stackoverflow.com/users/3158081/nickm13"}, "edited": false, "score": 0, "creation_date": 1433963620, "post_id": 30765057, "comment_id": 49582916, "body": "I replaced the argument you said with nullptr and it did not work.  I also tried NULL and 0.  Ive compared my code to several online srcs such as <a href=\"https://wiki.libsdl.org/SDL_RenderCopy\" rel=\"nofollow noreferrer\">link</a> and <a href=\"https://gist.github.com/armornick/3434362\" rel=\"nofollow noreferrer\">link</a> but to no avail.  Here is a picture of what the screen looks like <a href=\"http://puu.sh/ijRO0/5fe63ec739.png\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "reply_to_user": {"reputation": 47, "user_id": 3158081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e5cbb4d646e303feecf445fcf837a48?s=128&d=identicon&r=PG&f=1", "display_name": "NickM13", "link": "https://stackoverflow.com/users/3158081/nickm13"}, "edited": false, "score": 0, "creation_date": 1433965339, "post_id": 30765057, "comment_id": 49583811, "body": "@NickM13: I added a MCVE that works on my system.  Without the <code>srcrect</code> change I suggested I get rectangle-only output similar to yours."}], "tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 1, "last_activity_date": 1433965317, "last_edit_date": 1592644375, "creation_date": 1433962846, "answer_id": 30765057, "question_id": 30764648, "link": "https://stackoverflow.com/questions/30764648/sdl2-image-rendering-not-working-properly/30765057#30765057", "title": "SDL2_image rendering not working properly", "body": "<p>Pass <code>nullptr</code> in for <code>srcrect</code> in your <code>SDL_RenderCopy()</code> call:</p>\n<pre><code>SDL_RenderCopy(renderer_, image_, nullptr, &amp;imgrect);\n</code></pre>\n<p>Right now if <code>x</code> and/or <code>y</code> are larger than <code>image_</code> SDL will clip <code>srcrect</code> to the extents of <code>image_</code>, end up with an empty rect, and do nothing.</p>\n<p>Example:</p>\n<pre><code>#include &lt;SDL2/SDL.h&gt;\n#include &lt;SDL2/SDL_image.h&gt;\n\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\n\nclass LTexture\n{\npublic:\n\n    LTexture()\n        : renderer_( nullptr )\n        , image_( nullptr )\n    { }\n\n    ~LTexture()\n    {\n        SDL_DestroyTexture(image_);\n        renderer_ = nullptr;\n        image_ = nullptr;\n    }\n\n    void init(SDL_Renderer* renderer)\n    {\n        printf(&quot;init texture\\n&quot;);\n        renderer_ = renderer;\n    }\n\n    void loadBMP(std::string filename)\n    {\n        printf(&quot;load texture\\n&quot;);\n        image_ = IMG_LoadTexture(renderer_, filename.c_str());\n        SDL_QueryTexture(image_, NULL, NULL, &amp;imgrect.w, &amp;imgrect.h);\n    }\n\n    void render(int x, int y)\n    {\n        imgrect.x = x;\n        imgrect.y = y;\n        SDL_SetRenderDrawColor(renderer_, 128, 128, 128, 255);\n        if (image_ != nullptr &amp;&amp; renderer_ != nullptr)\n        {\n            printf(&quot;%i,  %i\\n&quot;, imgrect.x, imgrect.y);\n            SDL_RenderDrawRect(renderer_, &amp;imgrect);\n            SDL_RenderCopy(renderer_, image_, nullptr, &amp;imgrect);\n        }\n    }\n\n    bool isLoaded()\n    {\n        return image_ != nullptr;\n    }\n\nprivate:\n    SDL_Renderer* renderer_;\n    SDL_Texture* image_;\n    SDL_Rect imgrect;\n};\n\n\nint main( int argc, char** argv )\n{\n    SDL_Init( SDL_INIT_EVERYTHING );\n    IMG_Init( IMG_INIT_PNG );\n\n    SDL_Window * window = SDL_CreateWindow\n        (\n        &quot;SDL2&quot;, \n        SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, \n        300, 300, \n        SDL_WINDOW_SHOWN\n        );\n\n    SDL_Renderer* renderer = SDL_CreateRenderer\n        (\n        window,\n        0,\n        SDL_RENDERER_ACCELERATED\n        );\n\n    LTexture tex;\n    tex.init( renderer );\n    tex.loadBMP( &quot;red.png&quot; );\n\n    bool running = true;\n    while( running )\n    {\n        SDL_Event ev;\n        while( SDL_PollEvent( &amp;ev ) )\n        {\n            if ( ev.type == SDL_QUIT )\n                running = false;\n        }\n\n        SDL_SetRenderDrawColor( renderer, 0, 0, 0, 255 );\n        SDL_RenderFillRect( renderer, NULL );\n\n        tex.render( 50, 50 );\n\n        SDL_RenderPresent( renderer );\n        SDL_Delay( 33 );\n    }\n\n    SDL_DestroyRenderer( renderer );\n    SDL_DestroyWindow( window );\n\n    IMG_Quit();\n    SDL_Quit();\n\n    return 0;\n}\n</code></pre>\n<p><code>red.png</code> for reference:</p>\n<p><a href=\"https://i.stack.imgur.com/589gD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/589gD.png\" alt=\"red.png\" /></a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12059985, "user_type": "registered", "profile_image": "https://graph.facebook.com/2093714167376548/picture?type=large", "display_name": "Jakub Sika", "link": "https://stackoverflow.com/users/12059985/jakub-sika"}, "is_accepted": false, "score": 0, "last_activity_date": 1569392797, "creation_date": 1569392797, "answer_id": 58092286, "question_id": 30764648, "link": "https://stackoverflow.com/questions/30764648/sdl2-image-rendering-not-working-properly/58092286#58092286", "title": "SDL2_image rendering not working properly", "body": "<p>I don't know if this is still actual, but I have problems using SDL_RENDERER_ACCELERATED flag (under Linuix Mint), when I use SW acceleration, SDL_Render* works.</p>\n"}], "owner": {"reputation": 47, "user_id": 3158081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e5cbb4d646e303feecf445fcf837a48?s=128&d=identicon&r=PG&f=1", "display_name": "NickM13", "link": "https://stackoverflow.com/users/3158081/nickm13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 513, "favorite_count": 0, "accepted_answer_id": 30765057, "answer_count": 2, "score": 1, "last_activity_date": 1569392797, "creation_date": 1433961425, "last_edit_date": 1433962449, "question_id": 30764648, "link": "https://stackoverflow.com/questions/30764648/sdl2-image-rendering-not-working-properly", "title": "SDL2_image rendering not working properly", "body": "<p>I am trying to render an image using SDL_image v2.0.0, in SDL2.</p>\n\n<p>I have an image called Red.png in my res/img/ folder.  When I try to load the texture, and use SDL_QueryTexture() it gets the size and everything just fine.  But when it comes to rendering the actual image, Ive put a rectangle outline to know where the image is, but there is no image in the box.</p>\n\n<p>The class I use to load and render the texture:</p>\n\n<pre><code>class LTexture\n{\npublic:\n\n    ~LTexture()\n    {\n        SDL_DestroyTexture(image_);\n        renderer_ = nullptr;\n        image_ = nullptr;\n    }\n\n    void init(SDL_Renderer* renderer)\n    {\n        printf(\"init texture\\n\");\n        renderer_ = renderer;\n    }\n\n    void loadBMP(std::string filename)\n    {\n        printf(\"load texture\\n\");\n        image_ = IMG_LoadTexture(renderer_, (\"res/img/\"+filename).c_str());\n        SDL_QueryTexture(image_, NULL, NULL, &amp;imgrect.w, &amp;imgrect.h);\n    }\n\n    void render(int x, int y)\n    {\n        imgrect.x = x;\n        imgrect.y = y;\n        SDL_SetRenderDrawColor(renderer_, 128, 128, 128, 255);\n        if (image_ != nullptr &amp;&amp; renderer_ != nullptr)\n        {\n            printf(\"%i,  %i\\n\", imgrect.x, imgrect.y);\n            SDL_RenderDrawRect(renderer_, &amp;imgrect);\n            SDL_RenderCopy(renderer_, image_, &amp;imgrect, &amp;imgrect);\n        }\n    }\n\n    bool isLoaded()\n    {\n        return image_ != nullptr;\n    }\n\nprivate:\n    SDL_Renderer* renderer_ = nullptr;\n    SDL_Texture* image_ = nullptr;\n    SDL_Rect imgrect;\n\n};\n</code></pre>\n\n<p>I know it correctly gets the renderer and loads the image because the DrawRect function works, and if you didn't guess by the name, Red.png is a red rectangle.</p>\n"}, {"tags": ["c++", "c", "ffmpeg"], "comments": [{"owner": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "edited": false, "score": 0, "creation_date": 1433974183, "post_id": 30764452, "comment_id": 49588487, "body": "You should be able to just save the &quot;raw packets&quot; out to a file, FFmpeg at least knows how to deal with raw files: <a href=\"https://trac.ffmpeg.org/wiki/audio%20types\" rel=\"nofollow noreferrer\">trac.ffmpeg.org/wiki/audio%20types</a> (other than that you could write out a .wav file by adding wave file headers after you finish the file)"}, {"owner": {"reputation": 337, "user_id": 2631051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8493e29735916d91f0d8143519ac9d83?s=128&d=identicon&r=PG&f=1", "display_name": "patrick", "link": "https://stackoverflow.com/users/2631051/patrick"}, "reply_to_user": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "edited": false, "score": 0, "creation_date": 1434353577, "post_id": 30764452, "comment_id": 49723242, "body": "@rogerdpack i edited the question. Do you know any solution for this?"}], "owner": {"reputation": 337, "user_id": 2631051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8493e29735916d91f0d8143519ac9d83?s=128&d=identicon&r=PG&f=1", "display_name": "patrick", "link": "https://stackoverflow.com/users/2631051/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1460, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434348364, "creation_date": 1433960847, "last_edit_date": 1434348364, "question_id": 30764452, "link": "https://stackoverflow.com/questions/30764452/how-to-extract-audio-from-video-in-c-using-ffmpeg-library", "title": "how to extract audio from video in c using ffmpeg library?", "body": "<p>I'm try to build an app in c that extract audio from video and save it as mp3 file. I wrote the code below but i got an runtime error : \"Invalid audio stream. Exactly one MP3 audio stream is required.\". I debugged the code and came to point that line no \"avformat_write_header( oc, &amp;opt );\" is giving this error. I wrote the same code form video extraction and that worked properly without any error. Does anyone know how to solve it? Help me in it. Thanks in advance.</p>\n\n<p>My code is :</p>\n\n<pre><code>#include &lt;libavcodec/avcodec.h&gt;\n#include &lt;libavformat/avformat.h&gt;\n#include &lt;libswscale/swscale.h&gt;\n#include &lt;libavformat/avio.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(int argc, char *argv[]) {\nint codec_id = AV_CODEC_ID_MP3;\nAVFormatContext *pFormatCtx = NULL;\nint             i;\n\nAVDictionary    *opt = NULL;\n\nif(argc &lt; 2) {\n        printf(\"Please provide a movie file\\n\");\n        return -1;\n}\n\nav_register_all();\n\nif(avformat_open_input(&amp;pFormatCtx, argv[1], NULL, NULL) &lt; 0) return -1; \n\nif(avformat_find_stream_info(pFormatCtx, NULL) &lt; 0) return -1; \n\nint audioStream=-1;\nAVStream *audio;\nfor(i=0; i&lt;pFormatCtx-&gt;nb_streams; i++) {\n        if(pFormatCtx-&gt;streams[i]-&gt;codec-&gt;codec_type==AVMEDIA_TYPE_AUDIO) {\n        audio = pFormatCtx-&gt;streams[i];\n            audioStream=i;\n            break;\n        }\n}\n\nif(audioStream==-1) return -1;\n\n    AVOutputFormat* fmt = av_guess_format(\"mp3\", NULL, NULL);\n    fmt-&gt;audio_codec = codec_id;\n    AVFormatContext* oc;\n    oc  = avformat_alloc_context();\n    if (oc) oc-&gt;oformat = fmt;\n\n    avio_open2(&amp;oc-&gt;pb, \"test.mp3\", AVIO_FLAG_WRITE,NULL,NULL);\n\n    AVCodec *codec;\n    codec = avcodec_find_encoder(fmt-&gt;audio_codec);\n\n    if (!codec) {\n        fprintf(stderr, \"Codec not found\\n\");\n        exit(1);\n    }\n\n    AVStream *audio_stream;\n    audio_stream = avformat_new_stream(oc, NULL);\n    avcodec_copy_context( audio_stream-&gt;codec, pFormatCtx-&gt;streams[audioStream]-&gt;codec);\n    audio_stream-&gt;codec-&gt;bit_rate = audio-&gt;codec-&gt;bit_rate;\n    audio_stream-&gt;codec-&gt;sample_rate = audio-&gt;codec-&gt;sample_rate;\n    audio_stream-&gt;codec-&gt;channels = audio-&gt;codec-&gt;channels;\n\n\navformat_write_header( oc, &amp;opt );\nav_dump_format( pFormatCtx, 0, pFormatCtx-&gt;filename, 0 );\nav_dump_format( oc, 0, oc-&gt;filename, 1 );\n\n\nAVPacket pkt;\ni = 0;\nav_init_packet( &amp;pkt );\n\nwhile ( av_read_frame( pFormatCtx, &amp;pkt ) &gt;= 0 ) {\n        if (pkt.stream_index == audioStream ) {     \n        if ( pkt.flags &amp; AV_PKT_FLAG_KEY ) {\n                continue;\n            }\n            pkt.stream_index = audio_stream-&gt;id;\n            pkt.pts = i++;\n            pkt.dts = pkt.pts;\n\n            av_interleaved_write_frame( oc, &amp;pkt );\n        }\n        av_free_packet( &amp;pkt );\n        av_init_packet( &amp;pkt );\n}\nav_read_pause( pFormatCtx );\nav_write_trailer( oc );\navio_close( oc-&gt;pb );\navformat_free_context( oc );\navformat_network_deinit();\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1433961132, "post_id": 30764374, "comment_id": 49581462, "body": "Make sure you are using the correct opencv binaries for your compiler. vc10 = Visual Studio 2010. vc11 = Visual Studio 2012. vc12 = Visual Studio 2013."}, {"owner": {"reputation": 99, "user_id": 4941509, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f06bc2967649700b4fd107f0055e8085?s=128&d=identicon&r=PG&f=1", "display_name": "futureLookingGrimm", "link": "https://stackoverflow.com/users/4941509/futurelookinggrimm"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1433961677, "post_id": 30764374, "comment_id": 49581780, "body": "Thanks for the response! I do have the correct opencv binaries and it still doesn&#39;t seem to work."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 1142424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1c58885379469c37242a7ab6819f1b3?s=128&d=identicon&r=PG", "display_name": "Ian.Zhang", "link": "https://stackoverflow.com/users/1142424/ian-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1469695235, "creation_date": 1469695235, "answer_id": 38631212, "question_id": 30764374, "link": "https://stackoverflow.com/questions/30764374/opencv-with-houghlinesvisual-studio-c-crtisvalidheappointerpuserdata-bre/38631212#38631212", "title": "OpenCV With HoughLines(Visual Studio C++): _CrtIsValidHeapPointer(pUserData) Breakpoint Error", "body": "<p>I got into this Debug Assertion too.</p>\n\n<p>In my case, It was because that my project was statically compiled, Yet I used OpenCV dynamically with it's dll. So I change my project into dynamically compile, Solved the Problem.</p>\n\n<p>It's Because that OpenCV object is allocated in different heap. And When this object is destructed, current run-time can's find that heap, This is why the Assertion is hit.</p>\n"}], "owner": {"reputation": 99, "user_id": 4941509, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f06bc2967649700b4fd107f0055e8085?s=128&d=identicon&r=PG&f=1", "display_name": "futureLookingGrimm", "link": "https://stackoverflow.com/users/4941509/futurelookinggrimm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 444, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469695235, "creation_date": 1433960594, "question_id": 30764374, "link": "https://stackoverflow.com/questions/30764374/opencv-with-houghlinesvisual-studio-c-crtisvalidheappointerpuserdata-bre", "title": "OpenCV With HoughLines(Visual Studio C++): _CrtIsValidHeapPointer(pUserData) Breakpoint Error", "body": "<p>I am still pretty new to OpenCV and I've just recently come across the HoughLinesP function. First and foremost, my goal is to write code that will detect rectangles in a webcam. Currently, the code I have below only detect lines in general. However, I still have problems while I am debugging the program. Here is my code:</p>\n\n<pre><code>#include \"opencv2/highgui/highgui.hpp\"\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing namespace std;\n\nint main() {\n    int erosion_size = 0;\n    VideoCapture cam(0);   \n\n    if (!cam.isOpened()) { \n        cout &lt;&lt; \"cannot open camera\";\n    }\n\n    while (true) {\n        Mat frame;\n        cam.read(frame);\n\n        Mat gray, edge, draw, die;\n        cvtColor(frame, gray, CV_BGR2GRAY);\n        Canny(gray, edge, 100, 150, 3);\n        edge.convertTo(draw, CV_8U);\n\n        dilate(draw, die, Mat(), Point(-1, -1), 2, 1, 1);\n        erode(die, die, Mat(), Point(-1, -1), 1, 1, 1);\n\n#if 0\n        vector&lt;Vec2f&gt; lines;\n        HoughLines(die, lines, 1, CV_PI / 180, 100, 0, 0);\n\n        for (size_t i = 0; i &lt; lines.size(); i++)\n        {\n            float rho = lines[i][0], theta = lines[i][1];\n            Point pt1, pt2;\n            double a = cos(theta), b = sin(theta);\n            double x0 = a*rho, y0 = b*rho;\n            pt1.x = cvRound(x0 + 1000 * (-b));\n            pt1.y = cvRound(y0 + 1000 * (a));\n            pt2.x = cvRound(x0 - 1000 * (-b));\n            pt2.y = cvRound(y0 - 1000 * (a));\n            line(frame, pt1, pt2, Scalar(0, 0, 255), 3, CV_AA);\n        }\n#else\n        vector&lt;Vec4i&gt; lines;\n        HoughLinesP(die, lines, 1, CV_PI / 180, 200, 50, 10);\n        for (size_t i = 0; i &lt; lines.size(); i++)\n        {\n            Vec4i l = lines[i];\n            line(frame, Point(l[0], l[1]), Point(l[2], l[3]), Scalar(0, 0, 255), 3, CV_AA);\n        }\n#endif\n\n\n        imshow(\"Canny\", die);\n        imshow(\"original\", frame);\n        if (waitKey(30) &gt;= 0)\n            break;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>When I debug the program, the webcam pops up okay, but when I show a rectangular object with lines(piece of paper) it stops the program with a break point error. I concluded that my program stopped every time it found a line. When I choose to continue instead of breaking, it gives me this error:</p>\n\n<pre><code>Debug Assertion failed!\nProgram: ....Studio\n2013/Projects/TrialRectangle/Debug/TrialRectangle.exe\nFile: f:/dd/vctools/crt/crtw32/misc/dbgheap.c\nLine: 1332\n\nExpression: _CrtIsValidHeapPointer(pUserData)\n</code></pre>\n\n<p>I played around with the HoughLinesP function and found that a high threshold parameter(ex. 500) seems to make my program run fine BUT it does not show any HoughLines at all in my webcam. If someone could explain why that is, that would be helpful as well!</p>\n\n<p>Does anyone have any ideas as to how to solve this breakpoint error? </p>\n"}, {"tags": ["c++", "inheritance", "shared-ptr"], "comments": [{"owner": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 2, "creation_date": 1433960890, "post_id": 30764358, "comment_id": 49581303, "body": "You should read this page  <a href=\"http://stackoverflow.com/questions/860339/difference-between-private-public-and-protected-inheritance\" title=\"difference between private public and protected inheritance\">stackoverflow.com/questions/860339/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1433960967, "post_id": 30764358, "comment_id": 49581351, "body": "friend boost::shared_ptr, but your design is flawed (passing the address of a non dynamically allocated B)"}, {"owner": {"reputation": 4640, "user_id": 872616, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/00949aef46ef5e7c8171154d23cf5545?s=128&d=identicon&r=PG", "display_name": "Andreas Haferburg", "link": "https://stackoverflow.com/users/872616/andreas-haferburg"}, "edited": false, "score": 1, "creation_date": 1433961135, "post_id": 30764358, "comment_id": 49581464, "body": "You should have a look at <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/smart_ptr/enable_shared_from_this.html\" rel=\"nofollow noreferrer\">enable_shared_from_this</a>."}, {"owner": {"reputation": 389, "user_id": 1130848, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b38badec51e367c8fbd939576353a51a?s=128&d=identicon&r=PG", "display_name": "innocent_bystander", "link": "https://stackoverflow.com/users/1130848/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1433961227, "post_id": 30764358, "comment_id": 49581522, "body": "@DieterL&#252;cking yes, you are right...that was just an oversight in my toy example...sorry.  so I&#39;d make boost::shared_ptr a friend of B  or A?"}, {"owner": {"reputation": 389, "user_id": 1130848, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b38badec51e367c8fbd939576353a51a?s=128&d=identicon&r=PG", "display_name": "innocent_bystander", "link": "https://stackoverflow.com/users/1130848/innocent-bystander"}, "reply_to_user": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1433961290, "post_id": 30764358, "comment_id": 49581553, "body": "@RobertJacobs thank you for your help but can you be more specific as to what portion I should refer to, I feel like I&#39;ve read through that and understand the concepts of public, private, and protected inheritance. I&#39;m not seeing where I&#39;m going wrong..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1433961310, "post_id": 30764358, "comment_id": 49581567, "body": "@innocent_bystander of none - redesign."}, {"owner": {"reputation": 389, "user_id": 1130848, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b38badec51e367c8fbd939576353a51a?s=128&d=identicon&r=PG", "display_name": "innocent_bystander", "link": "https://stackoverflow.com/users/1130848/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1433961489, "post_id": 30764358, "comment_id": 49581673, "body": "then what was your intent with the comment:  &#39;friend boost::shared_ptr&#39;"}, {"owner": {"reputation": 389, "user_id": 1130848, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b38badec51e367c8fbd939576353a51a?s=128&d=identicon&r=PG", "display_name": "innocent_bystander", "link": "https://stackoverflow.com/users/1130848/innocent-bystander"}, "reply_to_user": {"reputation": 2924, "user_id": 2066459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8408d7e5ef47a2e2af09f3c6da6e1a6?s=128&d=identicon&r=PG", "display_name": "Robert Jacobs", "link": "https://stackoverflow.com/users/2066459/robert-jacobs"}, "edited": false, "score": 0, "creation_date": 1433961668, "post_id": 30764358, "comment_id": 49581774, "body": "@RobertJacobs I guess what I&#39;m saying is that this would work if I used raw pointers"}, {"owner": {"reputation": 389, "user_id": 1130848, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b38badec51e367c8fbd939576353a51a?s=128&d=identicon&r=PG", "display_name": "innocent_bystander", "link": "https://stackoverflow.com/users/1130848/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1433962314, "post_id": 30764358, "comment_id": 49582157, "body": "@DieterL&#252;cking wait, B is dynamically allocated isn&#39;t it (make_shared??)...what&#39;s the flaw?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 1, "creation_date": 1433962631, "post_id": 30764358, "comment_id": 49582347, "body": "@innocent_bystander what Dieter means, is that (if inhteritance would be public) head is known as shared_ptr&lt;A&gt; AND as shared_ptr&lt;B&gt;, 2 different shared pointers.  When leaving main, both reference count go to 0 and and attempt is made to delete the object twice.  The same raw pointer should not be used to create shared pointers of different types."}, {"owner": {"reputation": 2187, "user_id": 1357387, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9a59cac3d004852864c545093e57c176?s=128&d=identicon&r=PG", "display_name": "Parham", "link": "https://stackoverflow.com/users/1357387/parham"}, "edited": false, "score": 0, "creation_date": 1433963550, "post_id": 30764358, "comment_id": 49582881, "body": "Just as a comment, the standard library now include <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\"><code>shared_ptr</code></a> and <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared\" rel=\"nofollow noreferrer\"><code>make_shared</code></a>."}, {"owner": {"reputation": 389, "user_id": 1130848, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b38badec51e367c8fbd939576353a51a?s=128&d=identicon&r=PG", "display_name": "innocent_bystander", "link": "https://stackoverflow.com/users/1130848/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1433964847, "post_id": 30764358, "comment_id": 49583557, "body": "@Christophe...yes understood now...thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1433961637, "post_id": 30764637, "comment_id": 49581757, "body": "Well that&#39;s a first thought.  However, if you make it protected inheritance, you get the same resutlt.  Should&#39;nt members of a class get access to the protected base ?"}, {"owner": {"reputation": 4640, "user_id": 872616, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/00949aef46ef5e7c8171154d23cf5545?s=128&d=identicon&r=PG", "display_name": "Andreas Haferburg", "link": "https://stackoverflow.com/users/872616/andreas-haferburg"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 2, "creation_date": 1433961793, "post_id": 30764637, "comment_id": 49581856, "body": "@Christophe <code>shared_ptr&lt;A&gt;</code> is a type completely separate from <code>B</code>. If <code>B</code> protectedly inherits from <code>A</code>, then all the children of <code>B</code> will also inherit from <code>A</code>, but a separate type like <code>shared_ptr&lt;A&gt;</code> won&#39;t know that (unless you make it a friend)."}, {"owner": {"reputation": 389, "user_id": 1130848, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b38badec51e367c8fbd939576353a51a?s=128&d=identicon&r=PG", "display_name": "innocent_bystander", "link": "https://stackoverflow.com/users/1130848/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1433962236, "post_id": 30764637, "comment_id": 49582109, "body": "Okay thanks...I guess I am just a bit confused because if you use raw pointers (A* and B*) everything compiles (i.e. I can do prev-&gt;next(this) ).  I undestand that since shared_ptr&lt;A&gt; is a different object that it doesn&#39;t have access to the A constructor.  But this then is a non-transparent difference between raw pointer capability and shared_ptr&lt;&gt; [said w/ no judgement...just noting it]"}, {"owner": {"reputation": 4640, "user_id": 872616, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/00949aef46ef5e7c8171154d23cf5545?s=128&d=identicon&r=PG", "display_name": "Andreas Haferburg", "link": "https://stackoverflow.com/users/872616/andreas-haferburg"}, "reply_to_user": {"reputation": 389, "user_id": 1130848, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b38badec51e367c8fbd939576353a51a?s=128&d=identicon&r=PG", "display_name": "innocent_bystander", "link": "https://stackoverflow.com/users/1130848/innocent-bystander"}, "edited": false, "score": 0, "creation_date": 1433962690, "post_id": 30764637, "comment_id": 49582383, "body": "@innocent_bystander <code>shared_ptr</code> doesn&#39;t get any special treatment, it&#39;s a regular citizen. <code>shared_ptr&lt;A&gt;</code> has nothing to do with <code>A</code>, same as <code>vector&lt;int&gt;</code> has nothing to do with <code>int</code>. Casting the <code>B* this</code> to an <code>A*</code> only works in <code>B::B()</code>. If you were to do that anywhere else (i.e. in a non-friend of <code>B</code>), say in <code>main()</code> or <code>shared_ptr&lt;B&gt;</code>, it wouldn&#39;t work."}], "tags": [], "owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "is_accepted": false, "score": 2, "last_activity_date": 1433961914, "last_edit_date": 1433961914, "creation_date": 1433961402, "answer_id": 30764637, "question_id": 30764358, "link": "https://stackoverflow.com/questions/30764358/shared-ptr-and-private-inheritance/30764637#30764637", "title": "shared_ptr and private inheritance", "body": "<p>When you use private inheritance, you're basically saying \"I want B to be implemented in terms of A, but I don't want it to be used like a A (is-a A)\"</p>\n\n<p>Here, you're giving <code>boost::shared_ptr</code> a pointer to B as if it was an A.</p>\n\n<p>That's a contradiction in your design. Maybe declaring <code>boost::shared_ptr&lt;A&gt;</code> a friend of B would help, but it's still a weird design.</p>\n\n<p>Additional note: If you want B to be a special A that doesn't expose A's interface, consider composition instead of private inheritance</p>\n"}, {"tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 5, "last_activity_date": 1433968461, "last_edit_date": 1433968461, "creation_date": 1433964028, "answer_id": 30765426, "question_id": 30764358, "link": "https://stackoverflow.com/questions/30764358/shared-ptr-and-private-inheritance/30765426#30765426", "title": "shared_ptr and private inheritance", "body": "<p>Change this single line:</p>\n\n<pre><code>prev-&gt;setNext(APtr(this)); \n</code></pre>\n\n<p>to</p>\n\n<pre><code>prev-&gt;setNext(APtr(static_cast&lt;A*&gt;(this))); \n</code></pre>\n\n<p>And it compiles. </p>\n\n<p>Or at least it does when using the <code>std</code> library. It is usually similar for <code>boost</code>.</p>\n\n<p>There are other errors but that gets round casting <code>B*</code> to <code>A*</code>.</p>\n\n<p>Why does that work? Because the template for the constructor <code>std::shared_ptr&lt;A&gt;</code> isn't what you think it is! It is more like <code>template &lt;class X&gt; std::shared_ptr(X* v)</code>. So the actual <code>B*</code> to <code>A*</code> cast is postponed and failing in a non-friend member.</p>\n\n<p>But if you cast the <code>B*</code> pointer (i.e. <code>this</code>) to <code>A*</code> inside a method of <code>class B</code> (the only place that is legal without a <code>friend</code> declaration) you're in.</p>\n\n<p><strong>NB:</strong> There is nothing in principle wrong with private inheritance. It isn't an anti-pattern and is provided for good reason. Do think about composition but objects that forbid some parts of the application from 'accessing' their 'real' type have lots of uses. For example pass out an object A that has some B bolt ons that only the object factory can access.</p>\n\n<p><strong>PS:</strong> The reason why the constructor is <code>template&lt;class T&gt; shared_ptr&lt;T* v&gt;</code> is so that <code>shared_ptr</code> uses the deleter of the type passed into it.\nAs you're not doubt aware <code>share_ptr</code> cleverly calls the 'right' destructor even if it isn't virtual.\nMy 'fix' actually subverts that cleverness so beware to pass in the right deleter or (recommended) make the destructor of <code>A</code> virtual.</p>\n\n<p>PPS:</p>\n\n<p>And finally a fully working program (using STL. Sorry I don't have Boost):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\n// An Item in a linked list\nclass A\n{\npublic:\n  //friend class B;\n  typedef std::shared_ptr&lt;A&gt; APtr;\n  A() : next_() {}\n  A(APtr n) : next_(n) {}\n  APtr next() { return next_; }\n  void setNext(APtr n) { next_ = n;}\n\n  virtual void doIt() { std::cout&lt;&lt;\"normal thing\"&lt;&lt;std::endl; }  \n\n  virtual ~A(){}\nprivate:\n  APtr next_;\n};\n\nclass B : public std::enable_shared_from_this&lt;A&gt;, private A // B really is a special A\n                    // that should have different behavior\n                    // at the tail of the chain\n                    // but I want to hide A's interface\n                    // to external clients\n{\npublic:\n  template&lt;class X&gt; friend class std::enable_shared_from_this;\n\n  typedef std::shared_ptr&lt;B&gt; BPtr;\n\n\n  static BPtr makeit(A::APtr prev){\n    BPtr B(std::make_shared&lt;B&gt;());\n    prev-&gt;setNext(B-&gt;shared_from_this());\n    return B;\n  } \n\n  void doIt() {std::cout&lt;&lt;\"end thing\"&lt;&lt;std::endl;}\nprivate: \n  B(){}\n};\n\nint main()\n{\n  A::APtr dummyPtr;\n  A::APtr head = std::make_shared&lt;A&gt;(dummyPtr);\n  B::BPtr tail = B::makeit(head);\n\n  for(A::APtr curr = head; curr; curr=curr-&gt;next()){\n    curr-&gt;doIt();\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>You need to use <code>enable_shared_from_this</code> because otherwise you're trying to create two 'families' of <code>shared_ptr</code> and that won't work.</p>\n\n<p>I've made a factory method because fixing the constructor just wouldn't work!\nThere is a precondition of <code>enable_shared_from_this</code> that there has to be a <code>std::shared_ptr</code> in existence and I suppose that means 'fully constructed'.</p>\n\n<p>The following constructor will not work for me:</p>\n\n<pre><code>B(A::APtr prev){\n   prev-&gt;setNext(shared_from_this());\n} \n</code></pre>\n\n<p>That said, if you do inherit from <code>enable_shared_from_this</code> it's a good idea to make all the constructors private and provide factories that return <code>shared_ptr</code>. Otherwise you can get in a right mess if calling code doesn't itself ensure that 'pre-existing <code>shared_ptr</code>' condition. A nasty piece of coupling if ever there was one.</p>\n"}], "owner": {"reputation": 389, "user_id": 1130848, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/b38badec51e367c8fbd939576353a51a?s=128&d=identicon&r=PG", "display_name": "innocent_bystander", "link": "https://stackoverflow.com/users/1130848/innocent-bystander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1075, "favorite_count": 2, "answer_count": 2, "score": 8, "last_activity_date": 1433968461, "creation_date": 1433960524, "question_id": 30764358, "link": "https://stackoverflow.com/questions/30764358/shared-ptr-and-private-inheritance", "title": "shared_ptr and private inheritance", "body": "<p>Here's a toy example illustrating a problem I encounter. The application is fairly irrelevant (it's essentially a linked list of elements with a special behavior at the end).  I'm unable to construct a base class shared_ptr with a derived pointer and it's for some reason linked to the fact that I'm using private inheritance.  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/shared_ptr.hpp&gt;\n#include &lt;boost/make_shared.hpp&gt;\n\nusing namespace std;\n\n// An Item in a linked list\nclass A\n{\npublic:\n  //friend class B;\n  typedef boost::shared_ptr&lt;A&gt; APtr;\n  A() : next_() {}\n  A(APtr n) : next_(n) {}\n  APtr next() { return next_; }\n  void setNext(APtr n) { next_ = n; }\n\n  virtual void doIt() { /* standard behavior */ }  \n\nprivate:\n  APtr next_;\n};\n\n\nclass B : private A // B really is a special A\n                    // that should have different behavior\n                    // at the tail of the chain\n                    // but I want to hide A's interface\n                    // to external clients\n{\npublic:\n  typedef boost::shared_ptr&lt;B&gt; BPtr;\n  B(A::APtr prev) \n  { // Set this object as the tail\n    prev-&gt;setNext(APtr(this));  /* WHY CAN'T I CONSTRUCT APtr(this) \n                                   WITH PRIVATE INH. */\n  }\n  void doIt() {/*special behavior at end */}\n\n};\n\nint main()\n{\n  A::APtr dummyPtr;\n  A::APtr head = boost::make_shared&lt;A&gt;(dummyPtr);\n  B::BPtr tail = boost::make_shared&lt;B&gt;(head);\n\n  for(A::APtr curr = head; curr; curr=curr-&gt;next()){\n    curr-&gt;doIt();\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>and I get this</p>\n\n<pre><code>/usr/include/boost/smart_ptr/shared_ptr.hpp: In constructor \u2018boost::shared_ptr&lt;T&gt;::shared_ptr(Y*) [with Y = B, T = A]\u2019:\nderived_shared.cpp:31:   instantiated from here\n/usr/include/boost/smart_ptr/shared_ptr.hpp:352: error: \u2018A\u2019 is an inaccessible base of \u2018B\u2019\n</code></pre>\n\n<p>I was under the impression that private inheritance allows the Derived class to still access the public interface of the base class but hides that interface to external clients.  Why does private inheritance cause this error (it works if I inherit publicly)?</p>\n"}, {"tags": ["c++", "arrays", "types"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 3, "creation_date": 1433960451, "post_id": 30764303, "comment_id": 49581021, "body": "<code>uint32_t</code> is not good enough?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1433960564, "post_id": 30764303, "comment_id": 49581083, "body": "To elaborate on the comment by @barakmanos there are a slew of fixed-width integer types in <a href=\"http://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow noreferrer\"><code>&lt;cstdint&gt;</code></a>"}, {"owner": {"reputation": 51, "user_id": 4880835, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/124b569339f36535e48005664d8b9675?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/4880835/nick"}, "edited": false, "score": 0, "creation_date": 1433960775, "post_id": 30764303, "comment_id": 49581223, "body": "If I read 32 bit integers from a list of 24 bit integers wouldn&#39;t all of my values be off?"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1433961264, "post_id": 30764303, "comment_id": 49581538, "body": "@barakmanos <code>uint32_t</code> exists if it can have 32 bits which might not be 4 bytes because of <code>CHAR_BIT != 8</code>, although it&#39;s an ephemeral possibility."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1433961407, "post_id": 30764303, "comment_id": 49581632, "body": "@Nick Is it a binary file or text one?"}, {"owner": {"reputation": 51, "user_id": 4880835, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/124b569339f36535e48005664d8b9675?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/4880835/nick"}, "reply_to_user": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 0, "creation_date": 1433961445, "post_id": 30764303, "comment_id": 49581649, "body": "@barakmanos It is a binary file"}, {"owner": {"reputation": 9690, "user_id": 1707560, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/8VK4M.jpg?s=128&g=1", "display_name": "imreal", "link": "https://stackoverflow.com/users/1707560/imreal"}, "edited": false, "score": 0, "creation_date": 1433961703, "post_id": 30764303, "comment_id": 49581795, "body": "Can you show some code?"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1433963307, "post_id": 30764303, "comment_id": 49582744, "body": "<code>sizeof (unsigned char[4]) == 4</code>, guaranteed. <code>sizeof (uint32_t) == 32 &#47; CHAR_BIT</code> <i>if</i> <code>uint32_t</code> exists; this is 4 if <code>CHAR_BIT == 8</code> (which is very likely the case)."}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 0, "last_activity_date": 1433988723, "creation_date": 1433988723, "answer_id": 30770420, "question_id": 30764303, "link": "https://stackoverflow.com/questions/30764303/guaranteeing-data-type-size/30770420#30770420", "title": "Guaranteeing data type size", "body": "<p>Go old school and read-a-byte, read-a-byte, read-a-byte-byte-byte!</p>\n\n<pre><code>uint32_t read24(unsigned char *&amp; bufp)\n{\n    uint32_t val;\n    val = *bufp++;\n    val |= *bufp++ &lt;&lt; 8;\n    val |= *bufp++ &lt;&lt; 16;\n    return val;\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>unsigned char buffer[] = \n{ 0x2A, 0x00, 0x00, 0x9A, 0x02, 0x00, 0x4E, 0x61, 0xBC };\nunsigned char * bufp = buffer;\nuint32_t A = read24(bufp);\nuint32_t B = read24(bufp);\nuint32_t C = read24(bufp);\n</code></pre>\n\n<p>Why unsigned <code>char</code>s? Easiest way to deal with sign extension. If you use signed <code>char</code>s, you have to do masking like this:</p>\n\n<pre><code>val = *bufp++ &amp; 0xFF;\n</code></pre>\n\n<p>to strip off the extra sign bits.</p>\n\n<p>And watch out for endian. Depending on where your data is coming from you might have to read everything in the other direction.</p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1444329346, "creation_date": 1444329346, "answer_id": 33023468, "question_id": 30764303, "link": "https://stackoverflow.com/questions/30764303/guaranteeing-data-type-size/33023468#33023468", "title": "Guaranteeing data type size", "body": "<p>The fixed-width type <code>uint32_t</code> is designed for this. It will be constructed from whatever primitive is appropriate on your system.</p>\n\n<p>You can find it in <code>&lt;cstdint&gt;</code> or, pre-C++11, in Boost as <code>&lt;boost/cstdint.hpp&gt;. C also provides a</code>` that may be of use.</p>\n\n<p>Failing that, <code>char[4]</code>?</p>\n"}], "owner": {"reputation": 51, "user_id": 4880835, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/124b569339f36535e48005664d8b9675?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/4880835/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1444329346, "creation_date": 1433960370, "last_edit_date": 1433962289, "question_id": 30764303, "link": "https://stackoverflow.com/questions/30764303/guaranteeing-data-type-size", "title": "Guaranteeing data type size", "body": "<p>Is there a correct or conventional way to guarantee a data type will be sizeof 4? </p>\n\n<p>Previously I had just done some typedef statements based upon sizeof different data types, and I was wondering if there is a better or more conventional method to have data types of a pre determined size on different architectures? </p>\n\n<p>For the sake of this question lets say I have a large array of chars that I have read from a file. I want to read a series of 24 bit Integers from this char array. In the past I have casted the array to a data type with a sizeof my desired data type, this method fails however if there is no primitive data type with my desired size. </p>\n\n<p>What is the best way to handle this situation? </p>\n\n<pre><code>  char x[10] = {1,1,1,1,1,1,1,1,1,1};\n  uint32_t* y = (uint32_t*)x;\n  for(int i=0; i &lt; 10; i++)std::cout &lt;&lt; \"y: \" &lt;&lt; y[i] &lt;&lt; \"\\n\";\n\n  output:\n  y: 16843009\n  y: 16843009\n  y: 257\n\n  desired output:\n  y: 65793\n  y: 65793\n  y: 65793\n   ....\n</code></pre>\n"}, {"tags": ["c++", "point-cloud-library", "point-clouds"], "answers": [{"tags": [], "owner": {"reputation": 1101, "user_id": 1525865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71694cac93edcd9f6757139a9af32939?s=128&d=identicon&r=PG", "display_name": "taketwo", "link": "https://stackoverflow.com/users/1525865/taketwo"}, "is_accepted": true, "score": 14, "last_activity_date": 1434061750, "creation_date": 1434061750, "answer_id": 30792522, "question_id": 30764222, "link": "https://stackoverflow.com/questions/30764222/how-to-read-ply-file-using-pcl/30792522#30792522", "title": "How to read .ply file using PCL", "body": "<p>The function <code>pcl::io::loadPLYFile()</code> is indeed what you should use to read PLY files. To solve the compilation problem, make sure that you include appropriate header file (<code>pcl/io/ply_io.h</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 5005500, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/PILHq.png?s=128&g=1", "display_name": "KHV", "link": "https://stackoverflow.com/users/5005500/khv"}, "is_accepted": false, "score": 1, "last_activity_date": 1581029465, "last_edit_date": 1581029465, "creation_date": 1481633881, "answer_id": 41121720, "question_id": 30764222, "link": "https://stackoverflow.com/questions/30764222/how-to-read-ply-file-using-pcl/41121720#41121720", "title": "How to read .ply file using PCL", "body": "<p>We can also create a PLYReader as the PCDReader to read the PLY file and all the points to the required cloud, as shown below </p>\n\n<pre><code>#include&lt;pcl/io/ply_io.h&gt;\n\npcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr cloud (new pcl::PointCloud&lt;pcl::PointXYZ&gt;);\npcl::PLYReader Reader;\nReader.read(\"Path of the PLY file\", *cloud);\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 4495436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d6ab2f93c080ecad9680974f92fa9355?s=128&d=identicon&r=PG&f=1", "display_name": "userzizzy", "link": "https://stackoverflow.com/users/4495436/userzizzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20001, "favorite_count": 4, "accepted_answer_id": 30792522, "answer_count": 2, "score": 4, "last_activity_date": 1581029465, "creation_date": 1433960187, "last_edit_date": 1433968528, "question_id": 30764222, "link": "https://stackoverflow.com/questions/30764222/how-to-read-ply-file-using-pcl", "title": "How to read .ply file using PCL", "body": "<p>I can read .pcd data using this program.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;pcl/io/pcd_io.h&gt;\n#include &lt;pcl/point_types.h&gt;\n\nint\nmain (int argc, char** argv)\n{\n  pcl::PointCloud&lt;pcl::PointXYZ&gt;::Ptr cloud (new pcl::PointCloud&lt;pcl::PointXYZ&gt;);\n\n  if (pcl::io::loadPCDFile&lt;pcl::PointXYZ&gt; (\"airplane.pcd\", *cloud) == -1) //* load the file\n  {\n    PCL_ERROR (\"Couldn't read file test_pcd.pcd \\n\");\n    return (-1);\n  }\n  std::cout &lt;&lt; \"Loaded \"\n            &lt;&lt; cloud-&gt;width * cloud-&gt;height\n            &lt;&lt; \" data points from test_pcd.pcd with the following fields: \"\n            &lt;&lt; std::endl;\n  for (size_t i = 0; i &lt; cloud-&gt;points.size (); ++i)\n    std::cout &lt;&lt; \"    \" &lt;&lt; cloud-&gt;points[i].x\n              &lt;&lt; \" \"    &lt;&lt; cloud-&gt;points[i].y\n              &lt;&lt; \" \"    &lt;&lt; cloud-&gt;points[i].z &lt;&lt; std::endl;\n\n  return (0);\n}\n</code></pre>\n\n<p>How to read a .ply file i made the following change in line 10:</p>\n\n<pre><code>if (pcl::io::loadPLYFile&lt;pcl::PointXYZ&gt; (\"airplane.ply\", *cloud) == -1) //* load the file\n</code></pre>\n\n<p>It gave comilation error.</p>\n\n<p>SO i rewrote as:</p>\n\n<pre><code>if (pcl::io::loadPCDFile&lt;pcl::PointXYZ&gt; (\"airplane.ply\", *cloud) == -1) //* load the file\n</code></pre>\n\n<p>Now it gave me run-time error:</p>\n\n<pre><code>[pcl::PCDReader::readHeader] No points to read\nCouldn't read file test_pcd.pcd \n</code></pre>\n\n<p>How to resolve this?</p>\n"}, {"tags": ["c++", "opencv", "visual-studio-2013"], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 4699086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMLj4.jpg?s=128&g=1", "display_name": "rnrover", "link": "https://stackoverflow.com/users/4699086/rnrover"}, "is_accepted": true, "score": 0, "last_activity_date": 1434035256, "last_edit_date": 1495535208, "creation_date": 1434035256, "answer_id": 30784625, "question_id": 30764129, "link": "https://stackoverflow.com/questions/30764129/opencv-c-houghcircles-causing-breakpoint-in-visual-studio-2013/30784625#30784625", "title": "opencv c++ HoughCircles causing breakpoint in Visual Studio 2013", "body": "<p>It would seem that the answer is that the MSVS2013 installation is \"incompatible\" with the opencv2.4.10 in this instance. The answer was to forget MSVS13 and install MS Visual C++ 2010 instead. The only tricky bit with that is finding a registration key to activate the free version of MSVC10. Use this one: 6VPJ7-H3CXH-HBTPT-X4T74-3YVY7</p>\n\n<p>Otherwise, once you have that sorted, follow these instructions to configure opencv in MSVC10:\n<a href=\"https://stackoverflow.com/questions/10901905/installing-opencv-2-4-3-in-visual-c-2010-express\">Installing OpenCV 2.4.3 in Visual C++ 2010 Express</a></p>\n\n<p>All good now!</p>\n"}], "owner": {"reputation": 15, "user_id": 4699086, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uMLj4.jpg?s=128&g=1", "display_name": "rnrover", "link": "https://stackoverflow.com/users/4699086/rnrover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 30784625, "answer_count": 1, "score": 0, "last_activity_date": 1434035256, "creation_date": 1433959891, "question_id": 30764129, "link": "https://stackoverflow.com/questions/30764129/opencv-c-houghcircles-causing-breakpoint-in-visual-studio-2013", "title": "opencv c++ HoughCircles causing breakpoint in Visual Studio 2013", "body": "<p>I have been detecting circles in frames from a video feed.</p>\n\n<p>The script will capture a frame, detect any circle/s and then analyse them before taking another frame to repeat the process all over again.</p>\n\n<p>Each time I ran this, the script would take the first frame, detect the circle/s and then once all circles had been analysed in that frame a breakpoint would occur with \"Invalid address specified to RtlValidateHeap\".</p>\n\n<p>I commented out the entire script and slowly narrowed it down to where I was able to determine that it was the HoughCircles function that was causing the problem.</p>\n\n<p>Has anyone else experienced this?</p>\n\n<p>This is the function for what it is worth:</p>\n\n<pre><code>HoughCircles(\n        greyGB, // Mat input source\n        circles, // vector&lt;vec3f&gt; output vector that stores sets of 3 values: x_{c}, y_{c}, r for each detected circle.\n        CV_HOUGH_GRADIENT, // detection method\n        1, // The inverse ratio of resolution (size of image / int)\n        grey.rows / 8, // minimum distance between center of two circles\n        120, // Upper threshold for the internal Canny edge detector (should be 3x next number)\n        40, // Threshold for center detection (minimum number of votes) (lower this if no circles detected)\n        12, // Minimum radius to be detected. If unknown, put zero as default.\n        80 // Maximum radius to be detected. If unknown, put zero as default\n        );\n</code></pre>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 474, "user_id": 4417788, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/oU6Ym.jpg?s=128&g=1", "display_name": "Khurram Sharif", "link": "https://stackoverflow.com/users/4417788/khurram-sharif"}, "edited": false, "score": 0, "creation_date": 1433960585, "post_id": 30764046, "comment_id": 49581102, "body": "Where do you call these functions"}, {"owner": {"reputation": 21, "user_id": 4996136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079a532e52629b7fd3e071103a01fd86?s=128&d=identicon&r=PG&f=1", "display_name": "mojtaba", "link": "https://stackoverflow.com/users/4996136/mojtaba"}, "reply_to_user": {"reputation": 474, "user_id": 4417788, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/oU6Ym.jpg?s=128&g=1", "display_name": "Khurram Sharif", "link": "https://stackoverflow.com/users/4417788/khurram-sharif"}, "edited": false, "score": 0, "creation_date": 1433961011, "post_id": 30764046, "comment_id": 49581376, "body": "i call it in:  private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e)"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1433962206, "post_id": 30764046, "comment_id": 49582091, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1433963529, "post_id": 30764046, "comment_id": 49582864, "body": "In exactly one .cpp file, write <code>string DataBace::Flow_Name[100];</code>, and similarly for other static members. Static members need to be declared in-class (as you did), and also defined out of class (as you did not)."}, {"owner": {"reputation": 21, "user_id": 4996136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079a532e52629b7fd3e071103a01fd86?s=128&d=identicon&r=PG&f=1", "display_name": "mojtaba", "link": "https://stackoverflow.com/users/4996136/mojtaba"}, "edited": false, "score": 0, "creation_date": 1434004609, "post_id": 30764046, "comment_id": 49597357, "body": "thanks every body for help. Igor solve my problem."}], "owner": {"reputation": 21, "user_id": 4996136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/079a532e52629b7fd3e071103a01fd86?s=128&d=identicon&r=PG&f=1", "display_name": "mojtaba", "link": "https://stackoverflow.com/users/4996136/mojtaba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434139055, "creation_date": 1433959653, "last_edit_date": 1434139055, "question_id": 30764046, "link": "https://stackoverflow.com/questions/30764046/lnk-error-in-vc-2013", "title": "LNK error in VC++ 2013", "body": "<p>My program compiles, but I get the following link errors:</p>\n\n<pre><code>1&gt;desalter.obj : error LNK2020: unresolved token (0A000065) \"private: static double (* DataBace::Number_d_save)[110]\" (?Number_d_save@DataBace@@$$Q0PAY0GO@NA)\n1&gt;desalter.obj : error LNK2020: unresolved token (0A000066) \"private: static double (* DataBace::Flow_spec)[5]\" (?Flow_spec@DataBace@@$$Q0PAY04NA)\n1&gt;desalter.obj : error LNK2020: unresolved token (0A000068) \"private: static class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; * DataBace::Flow_Name\" (?Flow_Name@DataBace@@$$Q0PAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A)\n1&gt;desalter.obj : error LNK2001: unresolved external symbol \"private: static double (* DataBace::Flow_spec)[5]\" (?Flow_spec@DataBace@@$$Q0PAY04NA)\n1&gt;desalter.obj : error LNK2001: unresolved external symbol \"private: static double (* DataBace::Number_d_save)[110]\" (?Number_d_save@DataBace@@$$Q0PAY0GO@NA)\n1&gt;desalter.obj : error LNK2001: unresolved external symbol \"private: static class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; * DataBace::Flow_Name\" (?Flow_Name@DataBace@@$$Q0PAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@A)\n1&gt;C:\\Users\\Mojtaba Mohayeji\\Documents\\Visual Studio 2010\\Projects\\desalter\\Debug\\desalter.exe : fatal error LNK1120: 6 unresolved externals\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>class DataBace\n{\npublic:\n\n//---\nvoid fLOW_NAME(int indicator, string flow_name)\n{\n    Flow_Name[indicator] = flow_name;\n}\nstring** fLOW_NAME_READ()\n{\n    string** flow_name_read = new string*[1];\n    for (int i = 1; i &lt; 100; i++)\n    {\n        string a = Flow_Name[i];\n        flow_name_read[i] = &amp;a;\n    }\n    return flow_name_read;\n}\nint Show(string show)\n{\n    for (int i = 0; i &lt; 100; i++)\n    {\n        string sh = Flow_Name[i];\n        if (sh==show)\n        {\n            return i;\n        }\n    }\n}\nvoid FLOW_SPEC(int indicator, double flow_spec[1][5])\n{\n    for (int i = 0; i &lt; 5; i++)\n    {\n        Flow_spec[indicator][i] = flow_spec[1][i];\n    }\n}\ndouble** FLOW_SPEC_READ(int SHOW)\n{\n    double** flow_spec_read = new double*[5];\n    for (int i = 1; i &lt; 5; i++)\n    {\n        double a = Flow_spec[SHOW][i];\n        flow_spec_read[i] = &amp;a;\n    }\n    return flow_spec_read;\n}\nvoid Number_d_SAVE(int indicator, double Number_d[110])\n{\n    for (int i = 0; i &lt; 110; i++)\n    {\n        Number_d_save[indicator][i] = Number_d[i];\n    }\n}\ndouble** Number_d_READ(int SHOW)\n{\n    double** Number_d_read = new double*[110];\n    for (int i = 1; i &lt; 110; i++)\n    {\n        double a = Number_d_save[SHOW][i];\n        Number_d_read[i] = &amp;a;\n    }\n    return Number_d_read;\n}\nprivate:\n    static string Flow_Name[100];\n    static double Flow_spec[100][5];\n    static double Number_d_save[100][110];\n\n};\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "c++14", "delete-operator"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1433960154, "post_id": 30764045, "comment_id": 49580827, "body": "I didn&#39;t know there was a <code>language-lawyer</code> tag. Awesome!"}], "answers": [{"comments": [{"owner": {"reputation": 3341, "user_id": 2548699, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2ddacf93f09b012ad6afe164e08cfadd?s=128&d=identicon&r=PG&f=1", "display_name": "Wake up Brazil", "link": "https://stackoverflow.com/users/2548699/wake-up-brazil"}, "edited": false, "score": 0, "creation_date": 1433960167, "post_id": 30764117, "comment_id": 49580835, "body": "It seems so obvious, after reading the answer. Thanks anyway."}, {"owner": {"reputation": 3341, "user_id": 2548699, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2ddacf93f09b012ad6afe164e08cfadd?s=128&d=identicon&r=PG&f=1", "display_name": "Wake up Brazil", "link": "https://stackoverflow.com/users/2548699/wake-up-brazil"}, "edited": false, "score": 0, "creation_date": 1433962542, "post_id": 30764117, "comment_id": 49582302, "body": "What would be the benefit of this construction?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "reply_to_user": {"reputation": 3341, "user_id": 2548699, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2ddacf93f09b012ad6afe164e08cfadd?s=128&d=identicon&r=PG&f=1", "display_name": "Wake up Brazil", "link": "https://stackoverflow.com/users/2548699/wake-up-brazil"}, "edited": false, "score": 0, "creation_date": 1433963363, "post_id": 30764117, "comment_id": 49582779, "body": "@Wake up Brazil: It might be useful, say, when you implement some sort of &quot;smart pointer&quot; class. If object <code>A a;</code> itself represents a generalized &quot;pointer&quot;, then you might want to be able to do <code>delete a;</code> This is when this implicit conversion comes into play. There are quite a few pitfalls in such approach to deletion, but for what it is worth..."}], "tags": [], "owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "is_accepted": true, "score": 13, "last_activity_date": 1433967277, "last_edit_date": 1433967277, "creation_date": 1433959848, "answer_id": 30764117, "question_id": 30764045, "link": "https://stackoverflow.com/questions/30764045/the-destructor-for-the-class-member-b-why-is-it-invoked-in-the-snippet-below/30764117#30764117", "title": "The destructor for the class member `B`, why is it invoked in the snippet below?", "body": "<p>Your <code>delete *a</code> applies operator <code>delete</code> to a <em>non-pointer</em> expression <code>*a</code> of type <code>A</code>. The only way this can be legal is when type <code>A</code> is implicitly convertible to some pointer type. </p>\n\n<blockquote>\n  <p><strong>5.3.5 Delete [expr.delete]</strong> </p>\n  \n  <p><strong>1</strong> ... The operand shall have a pointer to object type, or a class type having a single non-explicit conversion\n  function (12.3.2) to a pointer to object type. </p>\n  \n  <p><strong>2</strong> If the operand has a\n  class type, the operand is converted to a pointer type by calling the\n  above-mentioned conversion function, and the converted operand is used\n  in place of the original operand for the remainder of this section.</p>\n</blockquote>\n\n<p>In this case your class <code>A</code> is implicitly convertible to <code>B *</code>, which is exactly what happens when you do <code>delete *a</code>.</p>\n\n<p>In other words, your <code>delete *a</code> is actually interpreted as</p>\n\n<pre><code>delete (*a).operator B*();\n</code></pre>\n\n<p>It is <code>B</code> you <code>delete</code> in your code, not <code>A</code>. This is why the destructor of <code>B</code> is called.</p>\n\n<p>If you wanted to destroy the <code>A</code> object, you'd have to do</p>\n\n<pre><code>delete a;\n</code></pre>\n\n<p>(note, no <code>*</code>). That would not call <code>B</code>'s destructor.</p>\n"}, {"tags": [], "owner": {"reputation": 221, "user_id": 4985257, "user_type": "registered", "profile_image": "https://graph.facebook.com/785855358197425/picture?type=large", "display_name": "Alexander Dalshov", "link": "https://stackoverflow.com/users/4985257/alexander-dalshov"}, "is_accepted": false, "score": 0, "last_activity_date": 1433966758, "creation_date": 1433966758, "answer_id": 30766265, "question_id": 30764045, "link": "https://stackoverflow.com/questions/30764045/the-destructor-for-the-class-member-b-why-is-it-invoked-in-the-snippet-below/30766265#30766265", "title": "The destructor for the class member `B`, why is it invoked in the snippet below?", "body": "<p>if you tried to implement smart pointer - then you probably should examine <a href=\"http://www.boost.org/doc/libs/1_57_0/boost/move/unique_ptr.hpp\" rel=\"nofollow\">boost sources</a></p>\n\n<p>in a nutshell smart pointer pattern provide the idea of some small object, that wrap original object and destroy it as it's not required.</p>\n\n<p>for example very simple example, also without custom deleters and so on:</p>\n\n<pre><code>&lt;template class T&gt;\nclass scope_delete\n{\n public:\n   scope_delete(T* ptr) : p(ptr) {}\n   ~scope_delete() { delete p; }\n   T* operator-&gt;() { return p; }\n private:\n   T * p;\n};\n\n// somewere in programm\n{\n  auto obj = scope_delete(new MyCLasss);\n  obj-&gt;some_fun();\n} // here stack object obj will be deleted and remove original object.\n</code></pre>\n\n<p>for detailed information you should read some books, or I've just google this <a href=\"http://www.codeproject.com/Articles/15351/Implementing-a-simple-smart-pointer-in-c\" rel=\"nofollow\">article</a>.</p>\n"}], "owner": {"reputation": 3341, "user_id": 2548699, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2ddacf93f09b012ad6afe164e08cfadd?s=128&d=identicon&r=PG&f=1", "display_name": "Wake up Brazil", "link": "https://stackoverflow.com/users/2548699/wake-up-brazil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 30764117, "answer_count": 2, "score": 3, "last_activity_date": 1433967277, "creation_date": 1433959651, "question_id": 30764045, "link": "https://stackoverflow.com/questions/30764045/the-destructor-for-the-class-member-b-why-is-it-invoked-in-the-snippet-below", "title": "The destructor for the class member `B`, why is it invoked in the snippet below?", "body": "<p>From \u00a75.3.5[expr.delete]/1, I can understand that the destructor for the object <code>*a</code> is <strong>not</strong> invoked in the snippet below. But I didn't understand why is the destructor for the class member <code>B</code> invoked in this case, as can be seen in this <a href=\"http://coliru.stacked-crooked.com/a/d1bf3f2a54acea32\" rel=\"nofollow\">live example</a>.</p>\n\n<pre><code>#include &lt;iostream&gt;\nclass A\n{\npublic:\n   class B{ public: ~B(){ std::cout &lt;&lt; \"B dtor\" &lt;&lt; '\\n'; } };\n   A() { p = new B(); }\n   operator B*() { return p; }\nprivate:\n   B* p;\n};\n\nint main()\n{\n   A* a = new A();\n   delete *a;\n   std::cout &lt;&lt; \"end\" &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Would appreciate some quote from the Standard explaining this.</p>\n"}, {"tags": ["c++", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1433961895, "post_id": 30764021, "comment_id": 49581921, "body": "If <code>io_service::run</code> is executed in one thread, all the handlers get called sequentially - one by one. So, if one handler takes too much time to complete, the others are waiting in the queue."}, {"owner": {"reputation": 307, "user_id": 3976069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f33a1585a5376d33d8cca0cafa6c35d2?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Solo", "link": "https://stackoverflow.com/users/3976069/juan-solo"}, "reply_to_user": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1433962093, "post_id": 30764021, "comment_id": 49582031, "body": "Thank you for the response. I was wrong and I can not delete the question."}], "answers": [{"tags": [], "owner": {"reputation": 307, "user_id": 3976069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f33a1585a5376d33d8cca0cafa6c35d2?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Solo", "link": "https://stackoverflow.com/users/3976069/juan-solo"}, "is_accepted": false, "score": 0, "last_activity_date": 1433961972, "creation_date": 1433961972, "answer_id": 30764795, "question_id": 30764021, "link": "https://stackoverflow.com/questions/30764021/about-when-it-is-called-a-handler-in-boost-asio/30764795#30764795", "title": "About when it is called a handler in Boost.Asio", "body": "<p>Well, I'm wrong.</p>\n\n<p>The handler always will be called since you call one of these functions: run(), run_one(), poll() or poll_one()</p>\n\n<p>My code was wrong. I used the run_one() function with a timer. The timer was failure.</p>\n"}], "owner": {"reputation": 307, "user_id": 3976069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f33a1585a5376d33d8cca0cafa6c35d2?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Solo", "link": "https://stackoverflow.com/users/3976069/juan-solo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434051698, "creation_date": 1433959589, "last_edit_date": 1434051698, "question_id": 30764021, "link": "https://stackoverflow.com/questions/30764021/about-when-it-is-called-a-handler-in-boost-asio", "title": "About when it is called a handler in Boost.Asio", "body": "<p>I'm learning Boost.Asio. In the documentation we can see the following:</p>\n\n<blockquote>\n  <p>Asynchronous completion handlers will only be called from threads that\n  are currently calling io_service::run().</p>\n</blockquote>\n\n<p>I have only a thread (the main thread). In that thread, I call the <code>io_service::run()</code> function.</p>\n\n<p>Suppose that the thread is busy when Asio call handler.</p>\n\n<p>Is the handler called? Wait for the thread? Is it ignored?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1433959840, "post_id": 30763995, "comment_id": 49580624, "body": "What is the problem?  Wouldn&#39;t a plain old <code>delete[]</code> be the obvious way to go?  Note however, that you should probably use a <code>std::vector</code> instead, and all your memory management troubles will simply go away."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1433959916, "post_id": 30763995, "comment_id": 49580673, "body": "Also be aware of the <code>&amp;B == this</code> case (self-assignment)."}, {"owner": {"reputation": 77, "user_id": 4942510, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9683d9b35c26ed95e5bfdfe95c03d7ee?s=128&d=identicon&r=PG", "display_name": "user243380", "link": "https://stackoverflow.com/users/4942510/user243380"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1433960034, "post_id": 30763995, "comment_id": 49580750, "body": "yes i know the class vector, but in this exercise is no allow use vector. And dont know the way to solve this @ 5gon12eder"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1433960180, "post_id": 30763995, "comment_id": 49580842, "body": "You might also want to check out the <a href=\"http://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom\">copy and swap idiom</a>"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 77, "user_id": 4942510, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9683d9b35c26ed95e5bfdfe95c03d7ee?s=128&d=identicon&r=PG", "display_name": "user243380", "link": "https://stackoverflow.com/users/4942510/user243380"}, "edited": false, "score": 0, "creation_date": 1433961364, "post_id": 30764130, "comment_id": 49581603, "body": "@user243380 Look back in another minute or two. I forgot a vital part and am editing the answer."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 77, "user_id": 4942510, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9683d9b35c26ed95e5bfdfe95c03d7ee?s=128&d=identicon&r=PG", "display_name": "user243380", "link": "https://stackoverflow.com/users/4942510/user243380"}, "edited": false, "score": 0, "creation_date": 1433961594, "post_id": 30764130, "comment_id": 49581734, "body": "@user243380  Updated to move reassignment of row and col to after using them to delete the old matrix. Oops. added quickie loop t copy data from Matrix B to this."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 2, "last_activity_date": 1433961494, "last_edit_date": 1433961494, "creation_date": 1433959899, "answer_id": 30764130, "question_id": 30763995, "link": "https://stackoverflow.com/questions/30763995/assignment-operator-in-c-delete-memory/30764130#30764130", "title": "assignment operator in c++ delete memory", "body": "<p>Use <code>delete[]</code> on each row then on matrix.</p>\n\n<pre><code>if (matrix!=NULL){\n    for (int i = 0; i &lt; row; ++i)\n        delete[] matrix[i];\n    delete[] matrix;\n}\nrow = B.row;\ncol = B.col;\nmatrix = new int*[row];\nfor (int i = 0; i &lt; row; ++i)\n    matrix[i] = new int[col];\n</code></pre>\n\n<p>Note that this does not copy the contents of the source matrix. Need another loop for that</p>\n\n<pre><code>for (int i = 0; i &lt; row; ++i)\n    for (int j = 0; j &lt; col; ++j)\n        matrix[i][j] = B.matrix[i][j];\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 4942510, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9683d9b35c26ed95e5bfdfe95c03d7ee?s=128&d=identicon&r=PG", "display_name": "user243380", "link": "https://stackoverflow.com/users/4942510/user243380"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 30764130, "answer_count": 1, "score": 0, "last_activity_date": 1433961494, "creation_date": 1433959517, "question_id": 30763995, "link": "https://stackoverflow.com/questions/30763995/assignment-operator-in-c-delete-memory", "title": "assignment operator in c++ delete memory", "body": "<p>I'm trying to delete the memory first before allocate new memory, but i dont know how to make, and I have one problem when try to resize the matrix.</p>\n\n<pre><code>Matrix &amp; operator=(const Matrix &amp;B){            \n            row = B.row;\n            col = B.col;\n\n            if (matrix==0){\n                matrix = new int*[row];\n                for (int i = 0; i &lt; row; ++i)\n                    matrix[i] = new int[col];\n            }\n            for (int i = 0; i &lt; row; i++) {\n                for (int j = 0; j &lt; col; j++) {                 \n                    matrix[i][j] = B.matrix[i][j];\n                }\n            }   \n        return *this;\n\n    }\n</code></pre>\n\n<p>For example (resize)</p>\n\n<pre><code>Matrix matrixA(1, 1);\nMatrix matrixB(2, 2);\nmatrixA = matrixB;\n</code></pre>\n\n<p>Thank you &amp; best regards</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism"], "comments": [{"owner": {"reputation": 4640, "user_id": 872616, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/00949aef46ef5e7c8171154d23cf5545?s=128&d=identicon&r=PG", "display_name": "Andreas Haferburg", "link": "https://stackoverflow.com/users/872616/andreas-haferburg"}, "edited": false, "score": 0, "creation_date": 1433959765, "post_id": 30763978, "comment_id": 49580572, "body": "Downvoted because the formatting is a bit poor and the code is not minimal at all."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6581f0c383f1f81d12a32d7b0fe39d9d?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4996114/james"}, "edited": false, "score": 0, "creation_date": 1433960060, "post_id": 30764017, "comment_id": 49580769, "body": "Thanks for the quick response. I tried this and I now get the following error:  Error] expected unqualified-id before &#39;{&#39; token"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 13, "user_id": 4996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6581f0c383f1f81d12a32d7b0fe39d9d?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4996114/james"}, "edited": false, "score": 0, "creation_date": 1433960129, "post_id": 30764017, "comment_id": 49580816, "body": "@James You are missing a <code>;</code> after all of your class definitions"}, {"owner": {"reputation": 13, "user_id": 4996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6581f0c383f1f81d12a32d7b0fe39d9d?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4996114/james"}, "edited": false, "score": 0, "creation_date": 1433960358, "post_id": 30764017, "comment_id": 49580959, "body": "I just double checked my code and I do have them. Re-looking at the post, it looks  like they are there as well. I apologize for the poor formatting, I am new to coding! ;)"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 13, "user_id": 4996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6581f0c383f1f81d12a32d7b0fe39d9d?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4996114/james"}, "edited": false, "score": 0, "creation_date": 1433960477, "post_id": 30764017, "comment_id": 49581031, "body": "If this answer satisfies your existing question, then it would be more appropriate to ask a new question if you are getting a new error, and try to trim down your code to the smallest relevant snippet that shows the error."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 3, "last_activity_date": 1433959580, "creation_date": 1433959580, "answer_id": 30764017, "question_id": 30763978, "link": "https://stackoverflow.com/questions/30763978/i-am-having-problems-understanding-inheritance-and-getting-multiple-classes-to-w/30764017#30764017", "title": "I am having problems understanding inheritance and getting multiple classes to work together?", "body": "<p><code>virtual</code> functions need to have the same signature when they are intended to be overriden in the derived classes, so <code>findgrosspay();</code> needs to be</p>\n\n<pre><code>double virtual findgrosspay(double, double, double, double);\n</code></pre>\n\n<p>You can enforce this by using the <code>override</code> keyword in your derived classes, and the compiler would have told you this issue</p>\n\n<pre><code># in salaried\ndouble findgrosspay(double hrs, double salary, double otp, double oth) override;\n\n# in hourly\ndouble findgrosspay(double hrs, double hourlyrate, double otp, double oth) override;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4996114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6581f0c383f1f81d12a32d7b0fe39d9d?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/4996114/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 30764017, "answer_count": 1, "score": 0, "last_activity_date": 1433959889, "creation_date": 1433959474, "last_edit_date": 1433959889, "question_id": 30763978, "link": "https://stackoverflow.com/questions/30763978/i-am-having-problems-understanding-inheritance-and-getting-multiple-classes-to-w", "title": "I am having problems understanding inheritance and getting multiple classes to work together?", "body": "<p>This is an assignment for my class. I am supposed to have two classes--salaried and hourly-- which both need to inherit from another class employee. When I compile my code I get no errors but when I run my program, only the header and the netpay functions produce any output. I know the majority of this code is functioning because if I remove the new classes(salaried and hourly) the program works fine. I am having a hard time understanding inheritance, what I am doing wrong, and I can't seem to figure it out. Any help would be great, Thanks!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;stdlib.h&gt;\nusing namespace std;\n\nclass employee{ \nprotected:\n    ifstream fin;\n    char firstname;\n    char lastname;\n    int employeeid, inputs, hours, overtimehours, paymenttype;\n    double rate, overtimerate, grosspay, overtimepay, netpay, netpayavg, taxamount, taxrate;\n    double sum = 0.0;\n    void findinputs();\n    double virtual findgrosspay();\n    void findtaxamount();\n    void findnetpay();\n    void findnetpayavg();\n    void tableheader();\n    void outputdata();\npublic: void setvariables(int empid, double otp, double oth, char fname, char lname, int paytype, double hourlyrate, double salary, double hrs){\n    employeeid = empid;\n    firstname = fname;\n    lastname = lname;\n    hours = hrs;\n    overtimehours = oth;\n    overtimepay = otp;\n    paymenttype = paytype;\n    if(paytype == 1){\n        salary = rate;\n    else\n        hourly = rate;\n    }\n}\npublic: employee();\n    ~employee();\n    void printdata();\n}; //base class\nemployee::employee(){\nfin.open(\"M6employee.in\");\n}\nemployee::~employee(){\nfin.close();\n}\nclass salaried : public employee{\npublic: double findgrosspay(double hrs, double salary, double otp, double oth){\n    salary = (salary / 52) / 40;\n    if ((hrs - 40) &gt; 0 ){\n        oth = hrs - 40;\n    }\n    else{\n        oth = 0;\n        } // this program finds gross pay of salaried employee\n    otp = oth * (salary * 1.5);\n    grosspay = (hrs * salary) + otp;\n    return grosspay;\n    cout &lt;&lt; \"your salary is :\" &lt;&lt; grosspay &lt;&lt; endl;\n} // supposed to inherit from employee\n};\nclass hourly : public employee{\npublic: double findgrosspay(double hrs, double hourlyrate, double otp, double oth){\n    if ((hrs - 40) &gt; 0 ){\n        oth = hrs - 40;\n    }\n    else{\n        oth = 0;\n        } // this function should find grosspay of hourly employee\n    otp = oth * (hourlyrate * 1.5);\n    grosspay = (hourlyrate * hourlyrate) + otp;\n    return grosspay;\n    cout &lt;&lt; \"Your hourly rate is :\" &lt;&lt; grosspay &lt;&lt; endl;\n}// supposed to inherit from employee\n};  \nmain(){\nint j;\nchar firstname[j], lastname[j];\nint hours[j];\ndouble rate[j], netpay[j];\nemployee employeedata;\nemployeedata.printdata();\nreturn 0;\n}\ndouble employee::findgrosspay(){\n}\nvoid employee::findtaxamount(){\ntaxrate = .30;\ntaxamount = grosspay * taxrate;\ncout &lt;&lt; \" Your taxamount is :\" &lt;&lt; taxamount &lt;&lt; endl;\n}\nvoid employee::findnetpay(){\nnetpay = grosspay - taxamount;\nsum = netpay + sum;\ncout &lt;&lt; \"Your netpay is :\" &lt;&lt; netpay &lt;&lt; endl;\n}\nvoid employee::findnetpayavg(){\nnetpayavg = sum / inputs;\ncout &lt;&lt; endl &lt;&lt; endl;\ncout &lt;&lt; \"The netpay average is : \" &lt;&lt; netpayavg &lt;&lt; endl;\n} // find average of employee netpay\nvoid employee::tableheader(){\ncout &lt;&lt;\"JAMES MANN'S PAYROLL PROGRAM\" &lt;&lt; endl;\ncout &lt;&lt; \"--------------------------------------------------------------------------------\" &lt;&lt; endl;\ncout &lt;&lt; \"Employee Name  Hours   Hourly Rate Overtime Pay Gross Pay Tax Amount Net Pay\" &lt;&lt; endl;\ncout &lt;&lt; \"--------------------------------------------------------------------------------\" &lt;&lt; endl;\n} // creates header for table\nvoid employee::outputdata(){\ncout &lt;&lt; setprecision(2) &lt;&lt; setiosflags(ios::fixed | ios::showpoint);\ncout &lt;&lt; setw(6) &lt;&lt; firstname &lt;&lt; setw(8) &lt;&lt; lastname &lt;&lt; setw(6) &lt;&lt; hours &lt;&lt; setw(13) &lt;&lt; rate &lt;&lt; setw(12) &lt;&lt; overtimepay\n     &lt;&lt; setw(12) &lt;&lt; grosspay &lt;&lt; setw(10) &lt;&lt; taxamount &lt;&lt; setw(10) &lt;&lt; netpay &lt;&lt; endl; \n} // outputs calculations from other functions\nvoid employee::findinputs(){\n    inputs = 0;\n    string lines;\n    while(std::getline(fin, lines)) \n        ++inputs;\n    fin.close();\n    fin.open(\"M6employee.in\");\n    cout &lt;&lt; \"Your input total is :\" &lt;&lt; endl;\n} //used to count the number of inputs from file\nvoid employee::printdata(){\ntableheader();\nfindinputs();\nwhile(fin &gt;&gt; firstname &gt;&gt; lastname &gt;&gt; hours &gt;&gt; rate &gt;&gt; paymenttype){\n    findgrosspay();\n    findtaxamount();\n    findnetpay();\n    outputdata();\n}\nfindnetpayavg();\n} // used to print the the results of program\n</code></pre>\n"}, {"tags": ["c++", "string", "pipe", "gnuplot"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 3, "creation_date": 1433959556, "post_id": 30763939, "comment_id": 49580439, "body": "Shouldn&#39;t you quote the string for Gnuplot, ie <code>fprintf(gnuplotPipe, &quot;set title &#39;%s&#39;\\n&quot;, title);</code>?  I&#39;m not posting this as an answer because since you didn&#39;t provide a complete example, I couldn&#39;t try it out."}], "answers": [{"comments": [{"owner": {"reputation": 201, "user_id": 4974824, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/615f1a2058dd95edef0957f1aa9c787e?s=128&d=identicon&r=PG&f=1", "display_name": "khfrekek", "link": "https://stackoverflow.com/users/4974824/khfrekek"}, "edited": false, "score": 0, "creation_date": 1433959841, "post_id": 30763993, "comment_id": 49580627, "body": "Ah so my problem was just simple syntax... It works perfectly now, thank you so much!!"}], "tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": true, "score": 1, "last_activity_date": 1433959516, "creation_date": 1433959516, "answer_id": 30763993, "question_id": 30763939, "link": "https://stackoverflow.com/questions/30763939/c-pass-a-string-into-a-pipe-to-gnuplot/30763993#30763993", "title": "C++ Pass a string into a pipe to gnuplot", "body": "<p>You have to put the title in quotes:</p>\n\n<pre><code>fprintf(gnuplotPipe, \"set title \\\"%s\\\"\\n\", title.c_str());\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 4974824, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/615f1a2058dd95edef0957f1aa9c787e?s=128&d=identicon&r=PG&f=1", "display_name": "khfrekek", "link": "https://stackoverflow.com/users/4974824/khfrekek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 30763993, "answer_count": 1, "score": 0, "last_activity_date": 1433959516, "creation_date": 1433959358, "question_id": 30763939, "link": "https://stackoverflow.com/questions/30763939/c-pass-a-string-into-a-pipe-to-gnuplot", "title": "C++ Pass a string into a pipe to gnuplot", "body": "<p>I'm having a small problem passing a string to gnuplot from c++ I can pass integers easily enough, but when I try a string (user defined as \"title\" earlier in the code):</p>\n\n<pre><code>fprintf(gnuplotPipe, \"set title %s\\n\", title);\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code>error: cannot pass objects of non-trivially-copyable type \u2018std::string {aka class std::basic_string&lt;char&gt;}\u2019 through \u2018...\u2019\n</code></pre>\n\n<p>So instead I tried using:</p>\n\n<pre><code>fprintf(gnuplotPipe, \"set title %s\\n\", title.c_str());\n</code></pre>\n\n<p>and the code actually compiled, but when I ran it I got the error from Gnuplot:</p>\n\n<pre><code>line 0: undefined variable: h\n</code></pre>\n\n<p>Where \"h\" is just the test sting defined by \"title\".</p>\n\n<p>Does anyone have any ideas on how to pass this?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "code-formatting", "clang-format"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1433960199, "post_id": 30763869, "comment_id": 49580853, "body": "i think you should specify <code>BasedOnStyle</code>"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1433960269, "post_id": 30763869, "comment_id": 49580901, "body": "you should try it as a plugin (e.g. for Vim , Visual-Studio). It is much handy to use this way."}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1433961094, "post_id": 30763869, "comment_id": 49581439, "body": "@bolov As a plugin, will it still apply more than one formatting rule?  There are many conflicting formatting styles in our codebase,  and I don&#39;t want to clutter a commit with all of these additional changes that effect other people&#39;s portions of code.  I just want to apply a single style change so that other people can consume the change and handle merge conflicts more easily.  It&#39;s not practical to subscribe to an entire code style using BasedOnStyle right now."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1433961692, "post_id": 30763869, "comment_id": 49581787, "body": "of course. You just specify BasedOnStyle to set values for all options and then you can &quot;override&quot; any number of options. All this via config file. You can even have config files / project."}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1433962260, "post_id": 30763869, "comment_id": 49582118, "body": "@bolov Ok, so if I set every option to false and 0, clang shouldn&#39;t change any code at all.  I&#39;ll give it a try."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1433962602, "post_id": 30763869, "comment_id": 49582329, "body": "why would you set every option to false and 0? I don&#39;t know try it and read <a href=\"http://clang.llvm.org/docs/ClangFormatStyleOptions.html\" rel=\"nofollow noreferrer\">the documentation</a>"}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1433963109, "post_id": 30763869, "comment_id": 49582608, "body": "@bolov Because I only want to apply one rule change at at a time.  I need a default configuration where clang-format won&#39;t make any changes at all.  Then I can tweak one at a time, and see a diff of only that format option."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1433963349, "post_id": 30763869, "comment_id": 49582771, "body": "ok but you should be aware that some rules interact with each other"}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1433965335, "post_id": 30763869, "comment_id": 49583809, "body": "@bolov Right.  And a lot of them take integers 0 through N.  There&#39;s not really a way to turn them off..."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 10, "creation_date": 1508874130, "post_id": 30763869, "comment_id": 80784895, "body": "Blegh, came here for this functionality too. Sad it doesn&#39;t exist."}], "answers": [{"comments": [{"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 7, "creation_date": 1440508862, "post_id": 32191189, "comment_id": 52294331, "body": "Unfortunately, this seems to be the correct answer."}], "tags": [], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "is_accepted": true, "score": 18, "last_activity_date": 1440448134, "creation_date": 1440448134, "answer_id": 32191189, "question_id": 30763869, "link": "https://stackoverflow.com/questions/30763869/how-can-i-apply-only-one-clang-format-action/32191189#32191189", "title": "How can I apply only one clang-format action?", "body": "<p>I think clang format was simply not designed for this. Rules are not things it applies incrementally, the program is instead built around, parsing your entire program and forgetting (most of) the old whitespace, and generating new whitespace based on the rules you select.</p>\n\n<p>You can see some overview of the architecture here: <a href=\"http://www.llvm.org/devmtg/2013-04/jasper-slides.pdf\" rel=\"noreferrer\">http://www.llvm.org/devmtg/2013-04/jasper-slides.pdf</a></p>\n\n<p>First it runs clang lexer and parser, then it divides groups of tokens into \"unwrapped lines\" which are \"tokens we would like to put together on a single line if there was no column limit\". Then a layouter determines the formatting of each unwrapped line based on the various constraints and optimizing for the various penalties.</p>\n\n<p>So, I don't think \"one clang-format action\" is actually a thing, the design looks pretty much monolithic to me.</p>\n"}, {"tags": [], "owner": {"reputation": 1121, "user_id": 4988044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/176bea70fb8474bc1a454ffeefd59702?s=128&d=identicon&r=PG&f=1", "display_name": "TheCppZoo", "link": "https://stackoverflow.com/users/4988044/thecppzoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1599174651, "creation_date": 1599174651, "answer_id": 63732811, "question_id": 30763869, "link": "https://stackoverflow.com/questions/30763869/how-can-i-apply-only-one-clang-format-action/63732811#63732811", "title": "How can I apply only one clang-format action?", "body": "<p><code>clang-format</code> does not have a mechanism to do this.\nThe palliative I use is to configure what I want changed in two different ways, I run the tool with both configurations and diff them, that tells me the changes that affect what I want, but in general this requires at least some manual work.</p>\n<p><code>clang-format</code> is a good idea with a poor implementation.  Some of the many deficiencies it has are that there is no option to have it indicate the reason for a change, the XML output format is not consumable by any other popular tool...</p>\n"}], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2397, "favorite_count": 3, "accepted_answer_id": 32191189, "answer_count": 2, "score": 37, "last_activity_date": 1599174651, "creation_date": 1433959121, "last_edit_date": 1433965255, "question_id": 30763869, "link": "https://stackoverflow.com/questions/30763869/how-can-i-apply-only-one-clang-format-action", "title": "How can I apply only one clang-format action?", "body": "<p>I want to use <strong>clang-format</strong> to align my comments, but nothing else.  </p>\n\n<p>The option for that is:  <code>AlignTrailingComments (bool)</code>.  </p>\n\n<p>But when I run the following:  </p>\n\n<pre><code>clang-format-3.6 -i -style='{AlignTrailingComments: true}' &lt;file&gt;\n</code></pre>\n\n<p>It performs all kinds of other formatting options that I suppose have a default when unspecified.  </p>\n\n<p>How can I execute just one clang formatting rule on the codebase?  </p>\n\n<p>Having all of these defaults make it difficult to see the full effect that a single formatting option has on the code.  I have to parse through the diff of all these other changes and decide if it was the option I specified that actually did it.  </p>\n\n<hr>\n\n<p>I noticed that there is a <strong>DisableFormat</strong> option, but no matter how I use it, it stops any formatting from happening at all.  </p>\n\n<pre><code>clang-format-3.6 -i -style='{AlignTrailingComments: true, DisableFormat: true}'\n\nclang-format-3.6 -i -style='{DisableFormat: true, AlignTrailingComments: true}'\n</code></pre>\n\n<p>Both cause clang-format to not make any code anywhere.</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1433958062, "post_id": 30763514, "comment_id": 49579504, "body": "Multiplication in this case."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1433958076, "post_id": 30763514, "comment_id": 49579518, "body": "<code>const int*</code> is a pointer type."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1433958173, "post_id": 30763514, "comment_id": 49579579, "body": "It has three use cases: the multiply operator, a pointer type declaration and dereferencing a pointer (making it a reference to the value the pointer is pointing to) - Here, only multiplications are involved."}, {"owner": {"reputation": 73, "user_id": 3794938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cf427ced39ace19ac5b5027dab2b021?s=128&d=identicon&r=PG&f=1", "display_name": "user3794938", "link": "https://stackoverflow.com/users/3794938/user3794938"}, "edited": false, "score": 0, "creation_date": 1433958759, "post_id": 30763514, "comment_id": 49579970, "body": "@DieterL&#252;cking Can the multiply used together with pointer? If yes, how you can difference it?"}, {"owner": {"reputation": 73, "user_id": 3794938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cf427ced39ace19ac5b5027dab2b021?s=128&d=identicon&r=PG&f=1", "display_name": "user3794938", "link": "https://stackoverflow.com/users/3794938/user3794938"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1433958880, "post_id": 30763514, "comment_id": 49580042, "body": "@JerryCoffin thanks sir.."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 3794938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cf427ced39ace19ac5b5027dab2b021?s=128&d=identicon&r=PG&f=1", "display_name": "user3794938", "link": "https://stackoverflow.com/users/3794938/user3794938"}, "edited": false, "score": 0, "creation_date": 1433959185, "post_id": 30763849, "comment_id": 49580243, "body": "ahh I see.. Thank you very much for explaining to me.. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 73, "user_id": 3794938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cf427ced39ace19ac5b5027dab2b021?s=128&d=identicon&r=PG&f=1", "display_name": "user3794938", "link": "https://stackoverflow.com/users/3794938/user3794938"}, "edited": false, "score": 1, "creation_date": 1433959226, "post_id": 30763849, "comment_id": 49580270, "body": "@user3794938 Please avoid the sir"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": true, "score": 1, "last_activity_date": 1433959053, "creation_date": 1433959053, "answer_id": 30763849, "question_id": 30763514, "link": "https://stackoverflow.com/questions/30763514/is-sign-in-framesize-heightframesize-widthnmixtures2-2nchannels-means/30763849#30763849", "title": "Is * sign in frameSize.height*frameSize.width*nmixtures*(2 + 2*nchannels) means pointer or multiplication?", "body": "<p>The asterisk (*) has three use cases: </p>\n\n<ul>\n<li>The multiply operator: 2 * 3</li>\n<li>A pointer type declaration: int* p;</li>\n<li>Dereferencing a pointer (making it a reference to the value the\npointer is pointing to): *p = 6;</li>\n</ul>\n\n<p>Example:</p>\n\n<pre><code>int i;\nint* p = &amp;i; // Sorry, introducing another confusion, taking the address of i\n*p = 2 * 3;\n\n// Now *p and i have the value 6 \n</code></pre>\n\n<p>In the question, only multiplications are involved</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1433959373, "last_edit_date": 1433959373, "creation_date": 1433959084, "answer_id": 30763861, "question_id": 30763514, "link": "https://stackoverflow.com/questions/30763514/is-sign-in-framesize-heightframesize-widthnmixtures2-2nchannels-means/30763861#30763861", "title": "Is * sign in frameSize.height*frameSize.width*nmixtures*(2 + 2*nchannels) means pointer or multiplication?", "body": "<p>If we look at your example:</p>\n\n<pre><code>bgmodel.create( 1, frameSize.height*frameSize.width*nmixtures*(2 + 2*nchannels), CV_32F );\n</code></pre>\n\n<p>We want to know if the <code>*</code> is a pointer dereference or is it multiplication.  The form a a pointer dereference is</p>\n\n<p>*pointer_type;</p>\n\n<p>Which doesn't work here as every <code>*</code> is preceded by another variable.  If we look at the syntax for multiplication we have:</p>\n\n<pre><code>some_type * some_type;\n</code></pre>\n\n<p>Now that matches what we have with variables on each side of the <code>*</code></p>\n\n<p>Now lets say you want to dereference a pointer and multiply it with something.  To do that we will wrap the dereferencing in parentheses</p>\n\n<pre><code>some_type * (*pointer_type);\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 3794938, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9cf427ced39ace19ac5b5027dab2b021?s=128&d=identicon&r=PG&f=1", "display_name": "user3794938", "link": "https://stackoverflow.com/users/3794938/user3794938"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 30763849, "answer_count": 2, "score": 1, "last_activity_date": 1433959373, "creation_date": 1433957898, "question_id": 30763514, "link": "https://stackoverflow.com/questions/30763514/is-sign-in-framesize-heightframesize-widthnmixtures2-2nchannels-means", "title": "Is * sign in frameSize.height*frameSize.width*nmixtures*(2 + 2*nchannels) means pointer or multiplication?", "body": "<p>I'm never used C++ before, and I used OpenCV background subtraction MOG (Mixture of Gaussian) function in Python and I need to understand how the program works, <a href=\"http://code.opencv.org/projects/opencv/repository/revisions/2.4.9/entry/modules/video/src/bgfg_gaussmix.cpp\" rel=\"nofollow\">the OpenCV program</a> line 123 there's command <code>bgmodel.create( 1, frameSize.height*frameSize.width*nmixtures*(2 + 2*nchannels), CV_32F );</code>.. I found the <code>.create</code> function is to allocate new data from <a href=\"http://docs.opencv.org/2.4.11/modules/core/doc/basic_structures.html#mat-create\" rel=\"nofollow\">here</a> with I assumed the parameter inside was <code>(int ndims, const int* sizes, int type)</code>, my question is what the * mean, is it multiplication or pointer?     </p>\n"}, {"tags": ["c++", "matlab", "simulink", "mex", "s-function"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1433958679, "post_id": 30763504, "comment_id": 49579917, "body": "There&#39;s a preview box provided so you can properly format your question before posting it. You say input 2 is <code>unsigned int</code>, but seem to also indicate that it is <code>uint16</code>. Which is it? If it is <code>uint16</code>, then your problem probably is that <code>unsigned int</code> is 32-bit and you&#39;re reading the memory location where <code>u1</code> is stored. Use <code>unsigned short *u2 = ssGetInputPortSignal(S,1);</code>. Or better yet, use the fixed width types that mex defines - <code>uint16_T *u2 = ssGetInputPortSignal(S,1);</code>"}, {"owner": {"reputation": 1, "user_id": 3911395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d926a339e2ff31ab62b05a9030be98?s=128&d=identicon&r=PG&f=1", "display_name": "David N&#233;meth-Nagy", "link": "https://stackoverflow.com/users/3911395/david-n%c3%a9meth-nagy"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1433958786, "post_id": 30763504, "comment_id": 49579986, "body": "Thanks for reply !   originally i have a typedef for u1 and u2 so it looks this way:                        typedef  unsigned char  FaultC                                                                                                        typdef unsigned int  addData                                                                                                            FaultC <i>u1 = (FaultC</i>) ssGetInputPortSignal(S,0);                                                                         addData  <i>u2 = (addData</i>) ssGetInputPortSignal(S,1);       (types are registered)"}, {"owner": {"reputation": 1, "user_id": 3911395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d926a339e2ff31ab62b05a9030be98?s=128&d=identicon&r=PG&f=1", "display_name": "David N&#233;meth-Nagy", "link": "https://stackoverflow.com/users/3911395/david-n%c3%a9meth-nagy"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1433958977, "post_id": 30763504, "comment_id": 49580120, "body": "sorry for the bad format, quite new here."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1433959229, "post_id": 30763504, "comment_id": 49580272, "body": "You should add details to your question by clicking the <i>edit</i> button below it. Change your <code>typedef</code>s to <code>typedef uint8_T FaultC; typedef uint16_T addData;</code>, hopefully that&#39;ll fix your problem."}, {"owner": {"reputation": 1, "user_id": 3911395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d926a339e2ff31ab62b05a9030be98?s=128&d=identicon&r=PG&f=1", "display_name": "David N&#233;meth-Nagy", "link": "https://stackoverflow.com/users/3911395/david-n%c3%a9meth-nagy"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1433959780, "post_id": 30763504, "comment_id": 49580584, "body": "thanks all, will try! i thought unsigned int is 16bit, but now its clear that this is minimum 16bit and thats not equal:))"}], "owner": {"reputation": 1, "user_id": 3911395, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45d926a339e2ff31ab62b05a9030be98?s=128&d=identicon&r=PG&f=1", "display_name": "David N&#233;meth-Nagy", "link": "https://stackoverflow.com/users/3911395/david-n%c3%a9meth-nagy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433958498, "creation_date": 1433957861, "last_edit_date": 1433958498, "question_id": 30763504, "link": "https://stackoverflow.com/questions/30763504/level-2-c-mex-function-input-return-wrong-value", "title": "level 2 c-mex function input return wrong value", "body": "<p>I have a TLC generated mexfunction with 2 inputs and 0 output. input 1 is unsigned char and input 2 is unsigned int.</p>\n\n<p>When I try to get input values with:</p>\n\n<pre><code>unsigned char *u1 = ssGetInputPortSignal(S,0);     (uint8)    \nunsigned int  *u2 = ssGetInputPortSignal(S,1);     (uint16)\n\nmexPrintf(\"value1 %d\\n\",*u1);\nmexPrintf(\"value2 %d\\n\",*u2);\n</code></pre>\n\n<p>why <code>u2</code> depends on <code>u1</code>?</p>\n\n<p>for example:   in simulink the input <code>port #1 = 2;</code> \u21d2 <code>*u1= 2;</code></p>\n\n<p>but            in simulink the input <code>port #2 = 1000;</code> \u21d2 <code>*u2= *u2 +(*u1*65636);</code> </p>\n\n<p>I see this in <code>mexprint</code>..</p>\n\n<p>I get <code>u2</code> with a factor depends on the first input port</p>\n\n<p>I set <code>InputPortRequiredContiguous</code>  and <code>InputPortDirectFeedThrough</code> to 1.</p>\n"}, {"tags": ["c++", "excel", "vba", "dll", "mpi"], "comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1433959568, "post_id": 30763407, "comment_id": 49580448, "body": "Are you sure you really want to use MPI? Unless you want to target clusters and supercomputers, and those running Windows are really few, perhaps OpenMP, Intel TBB, or the Concurency Runtime will be much more suitable choices."}, {"owner": {"reputation": 99, "user_id": 2662434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea9c4ca7b48e3ea43acc5942f391aaa6?s=128&d=identicon&r=PG", "display_name": "user2662434", "link": "https://stackoverflow.com/users/2662434/user2662434"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1433960974, "post_id": 30763407, "comment_id": 49581355, "body": "Because the end user only has excel on windows system. I need to develop this dll for them to use in Excel Vba."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1434004674, "post_id": 30763407, "comment_id": 49597395, "body": "I don&#39;t think you understand my question. MPI (Message Passing Interface) is a technique for programming distributed memory systems, i.e. systems that consist of multiple compute nodes with no shared memory, addressable by all nodes. If you just want to use the power of a single multicore/multisocket computer, then MPI is not the right choice."}], "owner": {"reputation": 99, "user_id": 2662434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea9c4ca7b48e3ea43acc5942f391aaa6?s=128&d=identicon&r=PG", "display_name": "user2662434", "link": "https://stackoverflow.com/users/2662434/user2662434"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 257, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1503042037, "creation_date": 1433957585, "last_edit_date": 1434035242, "question_id": 30763407, "link": "https://stackoverflow.com/questions/30763407/excel-vba-call-dll-developed-using-mpi", "title": "Excel VBA call DLL developed using MPI", "body": "<p>I am new to C++. And I want to develop a dll of a function applying Monte Carlo Simulation using VS C++ 2013. I want to enhance the monte carlo capacity. So I want to use Microsoft MS-MPI and HPC 2008 to do parallel computing within this dll. Then, I need to call this dll in Excel VBA.</p>\n\n<ul>\n<li>Is it possible to do it?</li>\n<li>When excuting a C++ code using ms-mpi, I can use \"mpiexec.exe\" to tell computer how many cores to run. If in Excel Vba, I want the dll to run on multiple cores, how do I do that?</li>\n</ul>\n"}, {"tags": ["c++", "linux", "bash", "getenv"], "comments": [{"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 4, "creation_date": 1433957358, "post_id": 30763247, "comment_id": 49579114, "body": "That&#39;s not how the environment works. A spawned process gets a copy of its parent&#39;s environment when it starts and then the two are not connected anymore. If you want to talk to your application then you need a communications channel. Signals, pipes, sockets, standard input, control files that the program polls for, etc."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1433958347, "post_id": 30763247, "comment_id": 49579706, "body": "For reference: since the current question is &quot;how do I do this impossible thing, or any other thing&quot;, I&#39;m voting to close. A complete survey of UNIX IPC mechanisms is way too big. Do read up on the stuff Etan mentioned though, figure out what you need, and come back when you have a new question."}], "answers": [{"tags": [], "owner": {"reputation": 1417, "user_id": 1895896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EDjiX.jpg?s=128&g=1", "display_name": "Scott &#39;scm6079&#39;", "link": "https://stackoverflow.com/users/1895896/scott-scm6079"}, "is_accepted": false, "score": 1, "last_activity_date": 1433957431, "creation_date": 1433957431, "answer_id": 30763348, "question_id": 30763247, "link": "https://stackoverflow.com/questions/30763247/c-getenv-doesnt-update/30763348#30763348", "title": "C++ getenv doesnt update", "body": "<p>The C++ programs environment is not changing when you change it in bash - since when you start your program it gets a copy of the parent's environment and has no access to the parent process's environment.</p>\n\n<p>You can use a file to easily share data, however. </p>\n\n<p>Bash</p>\n\n<pre><code>echo \"1\" &gt; blink.txt\n./blink &amp;\nsleep 5s\necho \"0\" &gt; blink.txt\n</code></pre>\n\n<p>C++</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;unistd.h&gt;\nusing namespace std;\n\nstring getfile(const string&amp; filename) {\n    ifstream in(filename.c_str(), ios_base::binary);\n    in.exceptions(ios_base::badbit | ios_base::failbit | ios_base::eofbit);\n    return string(istreambuf_iterator&lt;char&gt;(in), istreambuf_iterator&lt;char&gt;());\n}\n\nint main(int argc, char* argv[]) {\n    string blink = getfile(\"blink.txt\");\n    while(blink[0] == '1')\n    {\n        std::cout &lt;&lt; getfile(\"blink.txt\") &lt;&lt; std::endl;\n        usleep(500000);\n    }\n\n    return 1;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1843, "user_id": 2333421, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d71746648032a935232edf43e3b8a7ce?s=128&d=identicon&r=PG", "display_name": "Daniel Fru\u017cy\u0144ski", "link": "https://stackoverflow.com/users/2333421/daniel-fru%c5%bcy%c5%84ski"}, "is_accepted": true, "score": 3, "last_activity_date": 1433957872, "creation_date": 1433957872, "answer_id": 30763507, "question_id": 30763247, "link": "https://stackoverflow.com/questions/30763247/c-getenv-doesnt-update/30763507#30763507", "title": "C++ getenv doesnt update", "body": "<p>It is not possible to modify program environment after it is started. You have to use another method of interprocess communication. The simplest one is to register handler for some signal to your app (e.g. SIGUSR1), and then send it using <code>kill -SIGUSR1 &lt;pid&gt;</code> command. </p>\n\n<p>There are also other solutions available, e.g. create named pipe (using <code>pipe</code> shell command), and check periodically if someone wrote something to it. If yes, exit loop. </p>\n\n<p>You can also use sockets if you want, but this could be more complicated.</p>\n"}], "owner": {"reputation": 684, "user_id": 1795570, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/e3014d3262922b2caf890e3ad73a686e?s=128&d=identicon&r=PG", "display_name": "Joe Jankowiak", "link": "https://stackoverflow.com/users/1795570/joe-jankowiak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 2, "accepted_answer_id": 30763507, "answer_count": 2, "score": 4, "last_activity_date": 1433957872, "creation_date": 1433957100, "question_id": 30763247, "link": "https://stackoverflow.com/questions/30763247/c-getenv-doesnt-update", "title": "C++ getenv doesnt update", "body": "<p>I'm trying to make a program that a bash script runs. I want the bash script to be able to change the state of the c++ program, and the only thing I could find was to use environment variables. Thing is, its seems getenv only gets the value at the time when the program was run.</p>\n\n<p>Bash</p>\n\n<pre><code>export BLINK=1\n./blink &amp;\nsleep 5s\nunset BLINK\n</code></pre>\n\n<p>C++</p>\n\n<pre><code>int main(int args, char **argv) {\n\n    char *blink = getenv(\"BLINK\");\n\n    while(blink &amp;&amp; blink[0] == '1')\n    {\n        std::cout &lt;&lt; getenv(\"BLINK\") &lt;&lt; std::endl;\n        usleep(500000);\n    }\n\n    return 1;\n}\n</code></pre>\n\n<p>So what this does is run the blink program, wait 5 seconds then unset the environment. The C++ program however always sees the enviorment value as 1 and never stops. How do I get an updated environment variable while the program is running? Or is there a better way to have a bash script control the state of a c++ program.</p>\n\n<p><strong><em>EDIT</em></strong> I should note, I do not want to just kill the process either because it has to turn off hardware when it ends.</p>\n"}, {"tags": ["c++", "shared-ptr", "boost-spirit", "boost-spirit-qi"], "comments": [{"owner": {"reputation": 199, "user_id": 2317130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pWxKF.jpg?s=128&g=1", "display_name": "ofloveandhate", "link": "https://stackoverflow.com/users/2317130/ofloveandhate"}, "edited": false, "score": 0, "creation_date": 1433959904, "post_id": 30763212, "comment_id": 49580663, "body": "i would like to add that I deliberately left the value in the qi::symbols.  Right now, it&#39;s int, but later I will put in shared_ptr&lt; Node &gt;, so that when I parse functions, I can associate a found symbol with the appropriate Node.  So leaving the int there is important to me."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 2317130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pWxKF.jpg?s=128&g=1", "display_name": "ofloveandhate", "link": "https://stackoverflow.com/users/2317130/ofloveandhate"}, "edited": false, "score": 0, "creation_date": 1433960211, "post_id": 30764109, "comment_id": 49580863, "body": "yup, nailed it.  I continue to enjoy my experiences with Qi, thanks to you and all the people who help us newcomers so freely. thanks for the quick reply."}, {"owner": {"reputation": 199, "user_id": 2317130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pWxKF.jpg?s=128&g=1", "display_name": "ofloveandhate", "link": "https://stackoverflow.com/users/2317130/ofloveandhate"}, "edited": false, "score": 0, "creation_date": 1433960282, "post_id": 30764109, "comment_id": 49580912, "body": "I&#39;ve seen some information on Joel&#39;s blog about Spirit about V3.  Looking forward to it!  should I make the leap now (2015.06.10)?"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 4, "last_activity_date": 1433959836, "creation_date": 1433959836, "answer_id": 30764109, "question_id": 30763212, "link": "https://stackoverflow.com/questions/30763212/making-a-vector-of-shared-pointers-from-spirit-qi/30764109#30764109", "title": "making a vector of shared pointers from Spirit Qi", "body": "<p>This declaration</p>\n\n<pre><code>qi::rule&lt;Iterator, std::shared_ptr&lt;std::string()&gt; &gt; new_variable_;\n</code></pre>\n\n<p>Doesn't match the desired type:</p>\n\n<pre><code>qi::rule&lt;Iterator, std::shared_ptr&lt;std::string&gt;() &gt; new_variable_;\n</code></pre>\n\n<p>Sadly, in old SpiritV2 this attribute is silently ignored and no attribute propagation is done. This also explains why it didn't error out on compile time.</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/5afe1660005d39ac\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#define BOOST_SPIRIT_USE_PHOENIX_V3 1\n#define BOOST_SPIRIT_DEBUG 1\n\n#include &lt;boost/spirit/include/qi_core.hpp&gt;\n#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/spirit/include/phoenix_core.hpp&gt;\n#include &lt;boost/spirit/include/phoenix_operator.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include &lt;boost/spirit/include/phoenix_stl.hpp&gt;\n\n#include &lt;boost/phoenix/bind/bind_member_function.hpp&gt;\n#include &lt;boost/spirit/include/phoenix_fusion.hpp&gt;\n\n// this solution for lazy make shared comes from the SO forum, user sehe.\n// https://stackoverflow.com/questions/21516201/how-to-create-boost-phoenix-make-shared\n//    post found using google search terms `phoenix construct shared_ptr`\n// changed from boost::shared_ptr to std::shared_ptr\nnamespace {\n    template &lt;typename T&gt; struct make_shared_f {\n        template &lt;typename... A&gt; struct result { typedef std::shared_ptr&lt;T&gt; type; };\n\n        template &lt;typename... A&gt; typename result&lt;A...&gt;::type operator()(A &amp;&amp;... a) const {\n            return std::make_shared&lt;T&gt;(std::forward&lt;A&gt;(a)...);\n        }\n    };\n\n    template &lt;typename T&gt; using make_shared_ = boost::phoenix::function&lt;make_shared_f&lt;T&gt; &gt;;\n}\n\nnamespace qi    = boost::spirit::qi;\nnamespace ascii = boost::spirit::ascii;\n\ntemplate &lt;typename Iterator, typename Skipper = ascii::space_type&gt;\nstruct SystemParser : qi::grammar&lt;Iterator, std::vector&lt;std::shared_ptr&lt;std::string&gt; &gt;(), Skipper&gt; {\n\n    SystemParser() : SystemParser::base_type(variable_group_) {\n        namespace phx = boost::phoenix;\n        using qi::_1;\n        using qi::_val;\n        using qi::eps;\n        using qi::lit;\n\n        var_counter = 0;\n\n        declarative_symbols.add(\"variable_group\", 0);\n\n        variable_group_       = \"variable_group\" &gt; genericvargp_ &gt; ';';\n        genericvargp_         = new_variable_ % ',';                                                                                      //\n        new_variable_         = unencountered_symbol_ [_val = make_shared_&lt;std::string&gt;()(_1)];\n        unencountered_symbol_ = valid_variable_name_ - (encountered_variables | declarative_symbols);\n        valid_variable_name_  = +qi::alpha &gt;&gt; *(qi::alnum | qi::char_(\"[]_\"));\n\n        BOOST_SPIRIT_DEBUG_NODES((variable_group_) (valid_variable_name_) (unencountered_symbol_) (new_variable_) (genericvargp_))\n    }\n\n    // rule declarations.  these are member variables for the parser.\n    qi::rule&lt;Iterator, std::vector&lt;std::shared_ptr&lt;std::string&gt; &gt;(), Skipper&gt; variable_group_;\n    qi::rule&lt;Iterator, std::vector&lt;std::shared_ptr&lt;std::string&gt; &gt;(), Skipper&gt; genericvargp_;\n    qi::rule&lt;Iterator, std::shared_ptr&lt;std::string&gt;() &gt; new_variable_;\n    qi::rule&lt;Iterator, std::string()&gt; unencountered_symbol_;\n    qi::rule&lt;Iterator, std::string()&gt; valid_variable_name_;\n\n    unsigned var_counter;\n    qi::symbols&lt;char, qi::unused_type&gt; encountered_variables;\n    qi::symbols&lt;char, qi::unused_type&gt; declarative_symbols;\n};\n\nint main()\n{\n    std::vector&lt;std::shared_ptr&lt;std::string&gt; &gt; V;\n    std::string str = \"variable_group x, y, z; \";\n\n    std::string::const_iterator iter = str.begin();\n    std::string::const_iterator end = str.end();\n\n    SystemParser&lt;std::string::const_iterator&gt; S;\n\n    bool s = phrase_parse(iter, end, S, boost::spirit::ascii::space, V);\n\n    if (s)\n    {\n        std::cout &lt;&lt; \"Parse succeeded: \" &lt;&lt; V.size() &lt;&lt; \" variables\\n\";\n        for (auto&amp; s : V)\n            std::cout &lt;&lt; \" - '\" &lt;&lt; *s &lt;&lt; \"'\\n\";\n    }\n    else\n        std::cout &lt;&lt; \"Parse failed\\n\";\n\n    if (iter!=end)\n        std::cout &lt;&lt; \"Remaining unparsed: '\" &lt;&lt; std::string(iter, end) &lt;&lt; \"'\\n\";\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>Parse succeeded: 3 variables\n - 'x'\n - 'y'\n - 'z'\n</code></pre>\n\n<p>As well as a lot of debug information</p>\n"}], "owner": {"reputation": 199, "user_id": 2317130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pWxKF.jpg?s=128&g=1", "display_name": "ofloveandhate", "link": "https://stackoverflow.com/users/2317130/ofloveandhate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 30764109, "answer_count": 1, "score": 3, "last_activity_date": 1433959836, "creation_date": 1433957013, "question_id": 30763212, "link": "https://stackoverflow.com/questions/30763212/making-a-vector-of-shared-pointers-from-spirit-qi", "title": "making a vector of shared pointers from Spirit Qi", "body": "<p>This is a followup question from <a href=\"https://stackoverflow.com/questions/30744000/parsing-into-stdvectorstring-with-spirit-qi-getting-segfaults-or-assert-fai\">a previous question</a>.  </p>\n\n<p>I can parse into vectors of strings from my grammar, but I cannot seem to parse into a vector of <em>shared pointers to strings</em>; i.e. <code>std::vector&lt;std::shared_ptr&lt;std::string&gt; &gt;</code>, and need a bit of help.</p>\n\n<p>My compiling header:</p>\n\n<pre><code>#define BOOST_SPIRIT_USE_PHOENIX_V3 1\n\n\n#include &lt;boost/spirit/include/qi_core.hpp&gt;\n#include &lt;boost/spirit/include/qi.hpp&gt;\n#include &lt;boost/spirit/include/phoenix_core.hpp&gt;\n#include &lt;boost/spirit/include/phoenix_operator.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n\n#include &lt;boost/spirit/include/phoenix_stl.hpp&gt;\n\n#include &lt;boost/phoenix/bind/bind_member_function.hpp&gt;\n#include &lt;boost/spirit/include/phoenix_fusion.hpp&gt;\n\n\n\n// this solution for lazy make shared comes from the SO forum, user sehe.\n// https://stackoverflow.com/questions/21516201/how-to-create-boost-phoenix-make-shared\n//    post found using google search terms `phoenix construct shared_ptr`\n// changed from boost::shared_ptr to std::shared_ptr\nnamespace {\n    template &lt;typename T&gt;\n    struct make_shared_f\n    {\n        template &lt;typename... A&gt; struct result\n        { typedef std::shared_ptr&lt;T&gt; type; };\n\n        template &lt;typename... A&gt;\n        typename result&lt;A...&gt;::type operator()(A&amp;&amp;... a) const {\n            return std::make_shared&lt;T&gt;(std::forward&lt;A&gt;(a)...);\n        }\n    };\n\n    template &lt;typename T&gt;\n    using make_shared_ = boost::phoenix::function&lt;make_shared_f&lt;T&gt; &gt;;\n}\n\n\n\n\nnamespace qi = boost::spirit::qi;\nnamespace ascii = boost::spirit::ascii;\n\n\ntemplate&lt;typename Iterator, typename Skipper = ascii::space_type&gt;\nstruct SystemParser : qi::grammar&lt;Iterator, std::vector&lt;std::shared_ptr&lt;std::string&gt; &gt;(), Skipper&gt;\n{\n\n\n    SystemParser() : SystemParser::base_type(variable_group_)\n    {\n        namespace phx = boost::phoenix;\n        using qi::_1;\n        using qi::_val;\n        using qi::eps;\n        using qi::lit;\n\n\n        var_counter = 0;\n\n        declarative_symbols.add(\"variable_group\",0);\n\n        variable_group_ = \"variable_group\" &gt; genericvargp_ &gt; ';';\n        genericvargp_ = new_variable_ % ','; //\n        new_variable_ = unencountered_symbol_ [_val = make_shared_&lt;std::string&gt;() (_1)];\n        unencountered_symbol_ = valid_variable_name_ - ( encountered_variables | declarative_symbols );\n        valid_variable_name_ = +qi::alpha &gt;&gt; *(qi::alnum | qi::char_(\"[]_\") );\n\n\n\n//      debug(variable_group_); debug(unencountered_symbol_); debug(new_variable_); debug(genericvargp_);\n//      BOOST_SPIRIT_DEBUG_NODES((variable_group_) (valid_variable_name_) (unencountered_symbol_) (new_variable_) (genericvargp_))\n    }\n\n\n    // rule declarations.  these are member variables for the parser.\n    qi::rule&lt;Iterator, std::vector&lt;std::shared_ptr&lt;std::string&gt; &gt;(), Skipper &gt; variable_group_;\n    qi::rule&lt;Iterator, std::vector&lt;std::shared_ptr&lt;std::string&gt; &gt;(), Skipper &gt; genericvargp_;\n    qi::rule&lt;Iterator, std::shared_ptr&lt;std::string()&gt; &gt;  new_variable_;\n    qi::rule&lt;Iterator, std::string()&gt; unencountered_symbol_;\n    qi::rule&lt;Iterator, std::string()&gt; valid_variable_name_;\n\n\n    unsigned var_counter;\n    qi::symbols&lt;char,int&gt; encountered_variables;\n    qi::symbols&lt;char,int&gt; declarative_symbols;\n};\n</code></pre>\n\n<p>with driver code:</p>\n\n<pre><code>int main(int argc, char** argv)\n{\n\n    std::vector&lt;std::shared_ptr&lt;std::string&gt; &gt; V;\n    std::string str = \"variable_group x, y, z; \";\n\n\n    std::string::const_iterator iter = str.begin();\n    std::string::const_iterator end = str.end();\n\n\n    SystemParser&lt;std::string::const_iterator&gt; S;\n\n\n    bool s = phrase_parse(iter, end, S, boost::spirit::ascii::space, V);\n\n    if (s)\n    {\n        std::cout &lt;&lt; \"Parse succeeded: \" &lt;&lt; V.size() &lt;&lt; \" variables\\n\";\n        for (auto&amp; s : V)\n            std::cout &lt;&lt; \" - '\" &lt;&lt; s &lt;&lt; \"'\\n\";\n    }\n    else\n        std::cout &lt;&lt; \"Parse failed\\n\";\n\n    if (iter!=end)\n        std::cout &lt;&lt; \"Remaining unparsed: '\" &lt;&lt; std::string(iter, end) &lt;&lt; \"'\\n\";\n\n\n    return 0;\n}\n</code></pre>\n\n<p>The text is parsed correctly, but the resulting vector is of length 0, while it should be of length 3.  Somehow, the <code>std::shared_ptr&lt;string&gt;</code> is not pushed onto the back of the vector resulting from the rule <code>genericvargp_</code>.  </p>\n\n<p>I've tried many things, including reading all the debug information from a test parse, and placement of the <code>%=</code> signs for rule definitions, which should be used for rules for which there is a semantic action that does not assign <code>_val</code> unless I am mistaken.  I've also played all night and day with using <code>phx::bind</code> to manually push onto the back of <code>_val</code>, but got nowhere.  I've further verified that the <code>make_shared_</code> provided by sehe in another answer is in fact lazy for std::shared_ptr.  </p>\n\n<p>As an aside, I have also struggled with getting the result of an <code>unencountered_symbol_</code> to add to <code>encountered_variables</code> so as to enforce uniqueness of variable names...</p>\n\n<p>The problem seems to be the propagation of the result of the <code>new_variable_</code> rule onto the desired vector of shared pointers in the <code>genericvargp_</code> rule.  </p>\n"}, {"tags": ["c++", "c++11", "new-operator", "c++14", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 6, "creation_date": 1433956508, "post_id": 30762994, "comment_id": 49578588, "body": "And your question would actually be valid back to C++11 too (earlier if you include Boost)"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1433957045, "post_id": 30762994, "comment_id": 49578903, "body": "I don&#39;t see how this is a duplicate of that question. You still need to use raw pointers even if you never use <code>new</code> and/or <code>delete</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1433957224, "post_id": 30762994, "comment_id": 49579023, "body": "I would say when you want to call the special operator new as no_throw, placement new or to implement custom allocator (that you want to wrap anyway in a <code>make_my_unique</code>)."}, {"owner": {"reputation": 5185, "user_id": 2540407, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70244e2142d529ec009d23422d404ba1?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2540407/michael"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 4, "creation_date": 1433957252, "post_id": 30762994, "comment_id": 49579044, "body": "@CoryKramer: I mentioned C++14 only because C++11 standard only had make_shared, but not make_unique, and that omission makes new useful."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1433959643, "post_id": 30762994, "comment_id": 49580492, "body": "Not worthy of a <i>separate</i> answer, so any answer may copy this - I believe <code>new</code> is still the idiomatic way to perform <a href=\"http://stackoverflow.com/questions/222557\">in-place construction</a>."}, {"owner": {"reputation": 2904, "user_id": 2283531, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/40555433e8da6e6720cd2c91296c6574?s=128&d=identicon&r=PG&f=1", "display_name": "Javi", "link": "https://stackoverflow.com/users/2283531/javi"}, "edited": false, "score": 0, "creation_date": 1434035669, "post_id": 30762994, "comment_id": 49619382, "body": "Please correct me if I&#39;m wrong, but smart pointers call the destructor of the pointed objects upon destruction. If that is correct, you still need <code>new</code> and <code>delete</code> to allocate/free memory. From a user point of view, they are not useful, but from a developer I guess it is the only way to allocate, isn&#39;t it?"}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1434550124, "post_id": 30762994, "comment_id": 49827255, "body": "Why make things more complicated for yourself when new and delete are the more sensible options for scientific or algorithmic programming?"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1434046844, "post_id": 30763767, "comment_id": 49626582, "body": "is there an error with the design in my answer, which allows you to create a <code>shared_ptr</code> with a custom deleter without calling non-placement <code>new</code> directly?  For <code>unique_ptr</code>, it is even easier: create <code>std::unique_ptr&lt;T, D&gt;( make_unique&lt;T&gt;(...).release(), deleter )</code> -- no call to <code>new</code>!  (offer invalid if <code>deleter</code> constructor throws)."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 4, "last_activity_date": 1433958736, "creation_date": 1433958736, "answer_id": 30763767, "question_id": 30762994, "link": "https://stackoverflow.com/questions/30762994/are-new-and-delete-still-useful-in-c14/30763767#30763767", "title": "Are new and delete still useful in C++14?", "body": "<p>The only reason I can think of is that occasionally you may wish to use a custom deleter with your <code>unique_ptr</code> or <code>shared_ptr</code>. To use a custom deleter you need to create the smart pointer directly, passing in the result of <code>new</code>. Even this isn't frequent but it does come up in practice.</p>\n\n<p>Other than that it seems that <code>make_shared</code>/<code>make_unique</code> should cover pretty much all uses.</p>\n"}, {"tags": [], "owner": {"reputation": 1121, "user_id": 4988044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/176bea70fb8474bc1a454ffeefd59702?s=128&d=identicon&r=PG&f=1", "display_name": "TheCppZoo", "link": "https://stackoverflow.com/users/4988044/thecppzoo"}, "is_accepted": false, "score": 1, "last_activity_date": 1433959209, "creation_date": 1433959209, "answer_id": 30763896, "question_id": 30762994, "link": "https://stackoverflow.com/questions/30762994/are-new-and-delete-still-useful-in-c14/30763896#30763896", "title": "Are new and delete still useful in C++14?", "body": "<p>I would say the only reason for <code>new</code> and <code>delete</code> is to implement other kinds of smart pointers.</p>\n\n<p>For example, the library still does not have intrusive pointers as boost::intrusive_ptr, which is a pity since they are superior for performance reasons to shared pointers, as Andrei Alexandrescu points out.</p>\n"}, {"comments": [{"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 10, "creation_date": 1433960239, "post_id": 30764025, "comment_id": 49580887, "body": "You also probably need <code>new</code> if you are working with a pre-existing library that implements some kind of GC (Qt, I am looking at you)."}, {"owner": {"reputation": 5185, "user_id": 2540407, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70244e2142d529ec009d23422d404ba1?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2540407/michael"}, "edited": false, "score": 1, "creation_date": 1433960731, "post_id": 30764025, "comment_id": 49581197, "body": "Interesting. Placement new is a separate beast though. Suppose now that hypothetical C++2x would add place_unique and place_shared, would there still be a need for new/delete?"}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1433960805, "post_id": 30764025, "comment_id": 49581239, "body": "For in-place construction there&#39;s <code>std::allocator</code> which allows to cleanly and generically <code>allocate</code>/<code>deallocate</code> and <code>construct</code>/<code>destroy</code> elements."}, {"owner": {"reputation": 3149, "user_id": 198083, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/cced447c5c184168da91abc5e1f27ed6?s=128&d=identicon&r=PG", "display_name": "cdmh", "link": "https://stackoverflow.com/users/198083/cdmh"}, "edited": false, "score": 0, "creation_date": 1434013822, "post_id": 30764025, "comment_id": 49603201, "body": "The language needs new/delete to manage memory, but new application code should avoid them aside from placement new/delete. Library implementers, however, need memory pointers with the overhead of smart pointers, and new/delete is needed to implement smart pointers"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 0, "creation_date": 1434034660, "post_id": 30764025, "comment_id": 49618610, "body": "I think it&#39;s worth emphasizing that the situation is not symmetric between new and delete, there are many more situations where you will need to use new and placement new, than delete. And, incidentally, putting yourself in a position where you need to use delete is much more error prone than using new. Example: you can write a memory pool where you manage the memory with a unique_ptr, and call placement new for allocation requests. You will never need to use delete."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 5185, "user_id": 2540407, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70244e2142d529ec009d23422d404ba1?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2540407/michael"}, "edited": false, "score": 1, "creation_date": 1434035213, "post_id": 30764025, "comment_id": 49619043, "body": "@Michael What in the world is <code>place_shared</code>?  Placement <code>new</code> is syntax to directly call a constructor on a block of memory.  Non-placement <code>new</code> is about first getting space, then constructing.  <code>unique_ptr</code> and <code>shared_ptr</code> are about managing lifetime.  <code>make_unique</code> and <code>make_shared</code> are a combo of getting resources, constructing and managing them in a smart ptr.  Placement new, because it does not deal in resources (just construction), is orthogonal to resource management."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 3, "creation_date": 1434035252, "post_id": 30764025, "comment_id": 49619072, "body": "@NirFriedman Yes: non-custom placement <code>new</code> is paired with manually calling the destructor in the same way non-placement <code>new</code> is paired with calling <code>delete</code>.  In a sense, placement <code>new</code> is only tangentially related to non-placement <code>new</code>: non-placement <code>new</code> effectively calls <code>new</code>, and <code>delete</code> calls the destructor."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1434038870, "post_id": 30764025, "comment_id": 49621726, "body": "@Yakk Yes, I&#39;m aware of this, thank you for making the relationships clear and detailed. I think that perhaps the answer could be edited so that these points are more clearly highlighted to help people. I think that a) giving them an understanding of the &quot;pairings&quot; you outlined is very good, and b) clarifying that delete is both more error prone and less necessary as a take away, so that developers are appropriately wary of using delete in modern c++ code."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1434040029, "post_id": 30764025, "comment_id": 49622518, "body": "Barry, you can replace calls to <code>new</code> for creating custom deleters in a <code>unique_ptr</code> and <code>shared_ptr</code> by creating a non-custom-deleter <code>unique_ptr</code> with <code>make_unique</code>, then <code>.release()</code>ing it.  This may seem like a minor point, but if you directly pass the <code>.release()</code> to the constructor of your smart pointer (and the other argument cannot throw), you can reduce the window where you have a non-RAII held resource."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1434049257, "post_id": 30764025, "comment_id": 49628030, "body": "@Puppy I disagree: <code>noexcept</code> is an acceptable window.  Which can be non-zero in length.  You can pass ownership from one RAII construct to another during a <code>noexcept</code> operation perfectly safely, and in general that cannot be avoided (only placed in isolated, safe, checked code) if resources ever move around.  And resources whose ownership never moves are boring."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1434086844, "post_id": 30764025, "comment_id": 49640752, "body": "Inventing tagged variant you can completely avoid using of placement <code>new</code>, <code>reinterpret_cast</code>, <i>not</i> smart pointers and other closer to pure C things. Another words it is not mandatory to use them to create your own discriminated union."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 39, "last_activity_date": 1434036118, "last_edit_date": 1434036118, "creation_date": 1433959599, "answer_id": 30764025, "question_id": 30762994, "link": "https://stackoverflow.com/questions/30762994/are-new-and-delete-still-useful-in-c14/30764025#30764025", "title": "Are new and delete still useful in C++14?", "body": "<p>While smart pointers are preferable to raw pointers in many cases, there are still lots of use-cases for <code>new</code>/<code>delete</code> in C++14. </p>\n\n<p>If you need to write anything that requires in-place construction, for example:</p>\n\n<ul>\n<li>a memory pool</li>\n<li>an allocator</li>\n<li>a tagged variant</li>\n<li>binary messages to a buffer</li>\n</ul>\n\n<p>you will need to use placement <code>new</code> and, possibly, <code>delete</code>. No way around that.</p>\n\n<p>For some containers that you want to write, you may want to use raw pointers for storage.</p>\n\n<p><em>Even</em> for the standard smart pointers, you will still need <code>new</code> if you want to use custom deleters since <code>make_unique</code> and <code>make_shared</code> don't allow for that. </p>\n"}, {"comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1434042906, "post_id": 30785239, "comment_id": 49624178, "body": "<i>&quot;As far as I can tell you cannot both have the &quot;combined allocation of object and reference counting block&quot; and a custom deleter&quot;</i> I think you can use <code>allocate_shared</code> for that purpose."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1434043582, "post_id": 30785239, "comment_id": 49624592, "body": "@dyp How do you inject the custom deleter with <code>allocate_shared</code>?  I know how to store extra data, but I don&#39;t know how to avoid the destructor of the <code>T</code> from being called when the reference count goes to zero.  I guess I could create a buffer with a bool tracking if it has been constructed and a deleter that invokes my custom deletion action, allocate that, use god-mode shared ptr constructor (<code>shared_ptr&lt;T&gt;( shared_ptr&lt;Y&gt;&amp;, T* )</code> to alias the type of the shared_ptr from a pointer to that to a pointer to <code>T</code> while constructing and setting said bool?  Gah, and has a bool of overhead!"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1434043771, "post_id": 30785239, "comment_id": 49624707, "body": "Hmm cppreference claims for <code>allocate_shared</code> that <i>&quot;A copy of alloc is stored as part of the control block so that it can be used to deallocate it once both shared and weak reference counts reach zero.&quot;</i> but I can&#39;t find such a guarantee in the Standard.."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1434043894, "post_id": 30785239, "comment_id": 49624788, "body": "@dyp that deallocation would happen when the weak pointer count goes to zero anyhow, not when the strong pointer count goes to zero.  The deleter is called when the strong pointer count reaches zero, and that is what I&#39;m trying to inject into the single-block shared ptr."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1434044092, "post_id": 30785239, "comment_id": 49624913, "body": "Yes, I was not commenting on the second part of that paragraph (separate deletion of control block and owned object) but on the first part (creation of a <code>shared_ptr</code> with a custom deleter via a single allocation)."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1434044445, "post_id": 30785239, "comment_id": 49625115, "body": "The wording in the Standard looks defective to me: it doesn&#39;t require storing the allocator and using it to destruct the object, but at least libc++ does that. Using only the allocation part of the allocator would IMO be kind of silly, too."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1434045123, "post_id": 30785239, "comment_id": 49625484, "body": "I still don&#39;t see how the allocate shared gives you a custom deleter enabled shared_ptr.  Deleter, in the context of a shared_ptr, refers to something very specific?  In any case, I think I figured out how to create a single-buffer shared ptr with a custom deleter with arbitrary state, and added it to my answer above.  The questionable bit is that I cast the raw buffer ptr to void ptr to T ptr at destruction time: while I think this is valid (as the T was constructed there), the rules in the standard are not something I understand.  I would hate to have to store <code>r</code>."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1434045565, "post_id": 30785239, "comment_id": 49625778, "body": "Allocators provide both a <code>construct</code> and a <code>destroy</code> function. It is essential for certain allocators that <code>construct</code> is called instead of placement-new (e.g. <code>scoped_allocator_adapter</code>). I don&#39;t know of any real use cases for <code>destruct</code>, though. I would expect an <i>allocator-supporting</i> <code>shared_ptr</code> to use the allocator interface for both construction and destruction. But the Standard is very vague and probably defective here. I know that there are issues in implementations wrt <code>std::vector</code> and the usage of this interface, as far as I can see there are similar issues here in libc++"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1434045934, "post_id": 30785239, "comment_id": 49626002, "body": "<i>&quot;I would expect an allocator-supporting shared_ptr to use the allocator interface for both construction and destruction.&quot;</i> This is probably where I&#39;m wrong: the ctor of <code>shared_ptr</code> takes the deleter and the allocator separately."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 7, "last_activity_date": 1435165331, "last_edit_date": 1435165331, "creation_date": 1434036894, "answer_id": 30785239, "question_id": 30762994, "link": "https://stackoverflow.com/questions/30762994/are-new-and-delete-still-useful-in-c14/30785239#30785239", "title": "Are new and delete still useful in C++14?", "body": "<p>It is a relatively common choice to use <code>make_unique</code> and <code>make_shared</code> rather than raw calls to <code>new</code>.  It is not, however, mandatory.  Assuming you choose to follow that convention, there are a few places to use <code>new</code>.</p>\n\n<p>First, non-custom placement <code>new</code> (I'll neglect the \"non-custom\" part, and just call it placement <code>new</code>) is a completely different card game than standard (non-placement) <code>new</code>.  It is logically paired with manually calling a destructor.  Standard <code>new</code> both acquires a resource from the free store, and constructs an object in it.  It is paired with <code>delete</code>, which destroys the object and recycles the storage to the free store.  In a sense, standard <code>new</code> calls placement <code>new</code> internally, and standard <code>delete</code> calls the destructor internally.</p>\n\n<p>Placement <code>new</code> is the way you directly call a constructor on some storage, and is required for advanced lifetime management code.  If you are implementing <code>optional</code>, a type safe <code>union</code> on aligned storage, or a smart pointer (with unified storage and non-unified lifetime, like <code>make_shared</code>), you will be using placement <code>new</code>.  Then at the end of a particular object's lifetime, you directly call its destructor.  Like non-placement <code>new</code> and <code>delete</code>, placement <code>new</code> and manual destructor calls come in pairs.</p>\n\n<p>Custom placement <code>new</code> is another reason to use <code>new</code>.  Custom placement <code>new</code> can be used to allocate resources from a non-global pool -- scoped allocation, or allocation into a cross-process shared memory page, allocation into video card shared memory, etc -- and other purposes.  If you want to write <code>make_unique_from_custom</code> that allocates its memory using custom placement new, you'd have to use the <code>new</code> keyword.  Custom placement <code>new</code> could act like placement new (in that it doesn't actually acquire resources, but rather the resource is somehow passed in), or it could act like standard <code>new</code> (in that it acquires resources, maybe using the arguments passed in).</p>\n\n<p>Custom placement <code>delete</code> is called if a custom placement <code>new</code> throws, so you might need to write that.  In C++ you don't call custom placement <code>delete</code>, it <sub>(C++)</sub> calls you<sub>(r overload)</sub>.</p>\n\n<p>Finally, <code>make_shared</code> and <code>make_unique</code> are incomplete functions in that they don't support custom deleters.</p>\n\n<p>If you are writing <code>make_unique_with_deleter</code>, you can still use <code>make_unique</code> to allocate the data, and <code>.release()</code> it into your unique-with-deleter's care.  If your deleter wants to stuff its state into the pointed-to buffer instead of into the <code>unique_ptr</code> or into a separate allocation, you'll need to use placement <code>new</code> here.</p>\n\n<p>For <code>make_shared</code>, client code doesn't have access to the \"reference counting stub\" creation code.  As far as I can tell you cannot easily both have the \"combined allocation of object and reference counting block\" and a custom deleter.</p>\n\n<p>In addition, <code>make_shared</code> causes the resource allocation (the storage) for the object itself to persist as long as <code>weak_ptr</code>s to it persist: in some cases this may not be desirable, so you'd want to do a <code>shared_ptr&lt;T&gt;(new T(...))</code> to avoid that.</p>\n\n<p>In the few cases where you want to call non-placement <code>new</code>, you can call <code>make_unique</code>, then <code>.release()</code> the pointer if you want to manage separately from that <code>unique_ptr</code>.  This increases your RAII coverage of resources, and means that if there are exceptions or other logic errors, you are less likely to leak.</p>\n\n<hr>\n\n<p>I noted above I didn't know how to use a custom deleter with a shared pointer that uses a single allocation block easily.  Here is a sketch of how to do it trickily:</p>\n\n<pre><code>template&lt;class T, class D&gt;\nstruct custom_delete {\n  std::tuple&lt;\n    std::aligned_storage&lt; sizeof(T), alignof(T) &gt;,\n    D,\n    bool\n  &gt; data;\n  bool bCreated() const { return std::get&lt;2&gt;(data); }\n  void markAsCreated() { std::get&lt;2&gt;()=true; }\n  D&amp;&amp; d()&amp;&amp; { return std::get&lt;1&gt;(std::move(data)); }\n  void* buff() { return &amp;std::get&lt;0&gt;(data); }\n  T* t() { return static_cast&lt;T*&gt;(static_cast&lt;void*&gt;(buff())); }\n  template&lt;class...Ts&gt;\n  explicit custom_delete(Ts...&amp;&amp;ts):data(\n    {},D(std::forward&lt;Ts&gt;(ts)...),false\n  ){}\n  custom_delete(custom_delete&amp;&amp;)=default;\n  ~custom_delete() {\n    if (bCreated())\n      std::move(*this).d()(t());\n  }\n};\n\ntemplate&lt;class T, class D, class...Ts, class dD=std::decay_t&lt;D&gt;&gt;\nstd::shared_ptr&lt;T&gt; make_shared_with_deleter(\n  D&amp;&amp; d,\n  Ts&amp;&amp;... ts\n) {\n  auto internal = std::make_shared&lt;custom_delete&lt;T, dD&gt;&gt;(std::forward&lt;D&gt;(d));\n  if (!internal) return {};\n  T* r = new(internal-&gt;data.buff()) T(std::forward&lt;Ts&gt;(ts...));\n  internal-&gt;markAsCreated();\n  return { internal, r };\n}\n</code></pre>\n\n<p>I think that should do it.  I made an attempt to allow stateless deleters to use no up space by using a <code>tuple</code>, but I may have screwed up.</p>\n\n<p>In a library-quality solution, if <code>T::T(Ts...)</code> is <code>noexcept</code>, I could remove the <code>bCreated</code> overhead, as there would be no opportunity for a <code>custom_delete</code> to have to be destroyed before the <code>T</code> is constructed.</p>\n"}], "owner": {"reputation": 5185, "user_id": 2540407, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/70244e2142d529ec009d23422d404ba1?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2540407/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4518, "favorite_count": 7, "accepted_answer_id": 30764025, "answer_count": 4, "score": 62, "last_activity_date": 1435165331, "creation_date": 1433956332, "last_edit_date": 1433957198, "question_id": 30762994, "link": "https://stackoverflow.com/questions/30762994/are-new-and-delete-still-useful-in-c14", "title": "Are new and delete still useful in C++14?", "body": "<p>Given availability of <code>make_unique</code> and <code>make_shared</code>, as well as automatic deletion by <code>unique_ptr</code> and <code>shared_ptr</code> destructors, what are the situations (apart from supporting legacy code) for using <code>new</code> and <code>delete</code> in C++14?</p>\n"}, {"tags": ["c++", "algorithm", "path-finding", "breadth-first-search"], "comments": [{"owner": {"reputation": 301, "user_id": 4701091, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-s00gbIDg5mo/AAAAAAAAAAI/AAAAAAAAAE4/mEdCCG-MCNI/photo.jpg?sz=128", "display_name": "Joseph Hutchinson", "link": "https://stackoverflow.com/users/4701091/joseph-hutchinson"}, "edited": false, "score": 0, "creation_date": 1433956506, "post_id": 30762951, "comment_id": 49578586, "body": "So you like to only keep a list of the perimeter points and optimize the algorithm?  Is that what you are saying?  And will there still be a list of the all the points with a value lower than 50?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1433956780, "post_id": 30762951, "comment_id": 49578738, "body": "what types are <code>point</code> and <code>pointList</code> ? What does BFS stand for?"}, {"owner": {"reputation": 740, "user_id": 4524860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-Z7TV8IXJjiw/AAAAAAAAAAI/AAAAAAAAABA/hedLPR9Xebw/photo.jpg?sz=128", "display_name": "asdfasdf", "link": "https://stackoverflow.com/users/4524860/asdfasdf"}, "edited": false, "score": 0, "creation_date": 1433956847, "post_id": 30762951, "comment_id": 49578779, "body": "Yeah, I would like a list of all the perimeter points with values below 50 while optimizing the algorithm. I would also like to keep the list with all the points below 50 for other purpose."}, {"owner": {"reputation": 740, "user_id": 4524860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-Z7TV8IXJjiw/AAAAAAAAAAI/AAAAAAAAABA/hedLPR9Xebw/photo.jpg?sz=128", "display_name": "asdfasdf", "link": "https://stackoverflow.com/users/4524860/asdfasdf"}, "edited": false, "score": 0, "creation_date": 1433956987, "post_id": 30762951, "comment_id": 49578855, "body": "I&#39;m using vtk library, so they have their own container. &#39;pointlist&#39; is just a list of points (double, double), and &#39;point&#39; is also 2 double. BFS stands for breadth-first search."}, {"owner": {"reputation": 477, "user_id": 1446892, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e0bd58ac202ae8950c914aa06b0459e4?s=128&d=identicon&r=PG", "display_name": "Synergist", "link": "https://stackoverflow.com/users/1446892/synergist"}, "edited": false, "score": 0, "creation_date": 1433960530, "post_id": 30762951, "comment_id": 49581060, "body": "If you had a 3x3 grid consisting of <code>[ 0 100 0; 100 0 100; 0 100 0]</code>, the <code>0</code> in the center would be considered an outer point by your definition: &quot;a cell with a value lower than 50 that does not have 4 adjacent cells with a value lower than 50.&quot; Does this fit with your intentions?"}, {"owner": {"reputation": 740, "user_id": 4524860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-Z7TV8IXJjiw/AAAAAAAAAAI/AAAAAAAAABA/hedLPR9Xebw/photo.jpg?sz=128", "display_name": "asdfasdf", "link": "https://stackoverflow.com/users/4524860/asdfasdf"}, "edited": false, "score": 0, "creation_date": 1433961882, "post_id": 30762951, "comment_id": 49581913, "body": "Exactly. It&#39;s a bit like the flood-filling algorithm where any values higher than 50 act like a wall. But I don&#39;t want to fill every cells, only the ones at the border. In your example, 0 is a border since at least one of its adjacent cell has a value higher than 50"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1433965400, "post_id": 30762951, "comment_id": 49583849, "body": "The problem is that your upper and lower bound may lead to and end of path without reaching destination.  If you want to avoid exploring all the possibilites, you could consider using <a href=\"http://en.wikipedia.org/wiki/A%2A_search_algorithm\" rel=\"nofollow noreferrer\">A* search</a>"}], "answers": [{"tags": [], "owner": {"reputation": 740, "user_id": 4524860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-Z7TV8IXJjiw/AAAAAAAAAAI/AAAAAAAAABA/hedLPR9Xebw/photo.jpg?sz=128", "display_name": "asdfasdf", "link": "https://stackoverflow.com/users/4524860/asdfasdf"}, "is_accepted": false, "score": 0, "last_activity_date": 1434038277, "creation_date": 1434038277, "answer_id": 30785784, "question_id": 30762951, "link": "https://stackoverflow.com/questions/30762951/how-to-use-the-bfs-algorithm-to-keep-only-the-outer-points/30785784#30785784", "title": "How to use the BFS algorithm to keep only the outer points?", "body": "<p>Sorry, I forgot to add my solution to the problem. Unfortunately, I think it's memory heavy, so any new answers will be glady accepted!</p>\n\n<pre><code>pointList pointsWithValueBelow50; // The list of points with a value below 50\npointList pointsBorder;\nmap&lt;point, bool&gt; pointDiscovered; // A map of the points we already passed through\nmap&lt;point, bool&gt; pointVisible; // The final visible points\nmap&lt;point, point&gt; pointParent; // A map of the parent point\npoint a = {0,0};\npoint b;\nint value;\nQueue q;\n\nq.enqueue(a);\npointDiscovered[a] = true;\nwhile(!q.isEmpty())\n{\n    a = q.dequeue(a)\n    value = calculateValue(a); // Random method that verify if the points has a value below 50 in the grid\n    if (value &lt; 50)\n    {\n         pointsWithValueBelow50.add(a);\n         b[0] = a[0]+1;\n         b[1] = a[1];\n         if(pointDiscovered[b] == false)\n         {\n             q.enqueue(b)\n             pointParent[b] = a\n             pointDiscovered[b] = true;\n         }\n         b[0] = a[0]-1;\n         b[1] = a[1];\n         if(pointDiscovered[b] == false)\n         {\n             q.enqueue(b)\n             pointParent[b] = a\n             pointDiscovered[b] = true;\n         }\n         b[0] = a[0];\n         b[1] = a[1]+1;\n         if(pointDiscovered[b] == false)\n         {\n             q.enqueue(b)\n             pointParent[b] = a\n             pointDiscovered[b] = true;\n         }\n         b[0] = a[0];\n         b[1] = a[1]-1;\n         if(pointDiscovered[b] == false)\n         {\n             q.enqueue(b)\n             pointParent[b] = a\n             pointDiscovered[b] = true;\n         }\n    }\n    else     \n    {\n        if(pointVisible[pointParent[a]] == false)\n        {\n            pointVisible[pointParent[a]] = true;\n            pointsBorder.add(poinParent[a]);\n        }\n    }\n}\n</code></pre>\n\n<p>the idea is simply that if I'm at a point that has a value higher than 50, we let the parent point know that he has to be visible since he is  \"border\" point.</p>\n"}, {"comments": [{"owner": {"reputation": 740, "user_id": 4524860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-Z7TV8IXJjiw/AAAAAAAAAAI/AAAAAAAAABA/hedLPR9Xebw/photo.jpg?sz=128", "display_name": "asdfasdf", "link": "https://stackoverflow.com/users/4524860/asdfasdf"}, "edited": false, "score": 0, "creation_date": 1434128009, "post_id": 30786500, "comment_id": 49664750, "body": "Thank you, this is exactly what I was looking for. Do you know if there is an important difference in term of calculation speed between having an unorganized set of points using BSF algorithm and then applying a delaunay surface reconstruction, or using a marching square with the advantage of having a set of organized points?"}], "tags": [], "owner": {"reputation": 15519, "user_id": 15472, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9b4128da626e5b0049cd4fb88033e3b3?s=128&d=identicon&r=PG", "display_name": "tucuxi", "link": "https://stackoverflow.com/users/15472/tucuxi"}, "is_accepted": true, "score": 1, "last_activity_date": 1434040498, "creation_date": 1434040498, "answer_id": 30786500, "question_id": 30762951, "link": "https://stackoverflow.com/questions/30762951/how-to-use-the-bfs-algorithm-to-keep-only-the-outer-points/30786500#30786500", "title": "How to use the BFS algorithm to keep only the outer points?", "body": "<p>Let us consider the cell array as a grey-scale image (where cell values are pixel intensities). What you are attempting to do (\"find borders\") is a common problem in graphics, and there is a well-known algorithm (<a href=\"http://Marching%20Squares\" rel=\"nofollow\">Marching Squares</a>) to find such borders as lists (with the additional property of the lists being ordered, so that when you traverse the list, you are going around the vertexes of a polygon that contains the interesting area.</p>\n\n<p>Marching squares is O(cells) (it only needs to look at each cell-neighbourhood once in the worst case), and can be parallelized for even greater performance. There are many variations, based on what is considered a relevant transition and whether you want to find only <em>one</em> boundary or <em>all</em> boundaries.</p>\n\n<p>There are many implementations out there. One of the cleanest that I have read is <a href=\"https://github.com/e-ucm/ead/blob/master/engine/core/src/main/java/es/eucm/ead/engine/utils/MarchingSquares.java\" rel=\"nofollow\">here</a> (LGPL; returns all boundaries; configurable threshold) - translating it from Java to C++ should be relatively straightforward.</p>\n"}], "owner": {"reputation": 740, "user_id": 4524860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh6.googleusercontent.com/-Z7TV8IXJjiw/AAAAAAAAAAI/AAAAAAAAABA/hedLPR9Xebw/photo.jpg?sz=128", "display_name": "asdfasdf", "link": "https://stackoverflow.com/users/4524860/asdfasdf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 2, "accepted_answer_id": 30786500, "answer_count": 2, "score": 0, "last_activity_date": 1434040498, "creation_date": 1433956200, "question_id": 30762951, "link": "https://stackoverflow.com/questions/30762951/how-to-use-the-bfs-algorithm-to-keep-only-the-outer-points", "title": "How to use the BFS algorithm to keep only the outer points?", "body": "<p>Let's say I have a 500x500 2D grid (from -250 to 250).</p>\n\n<p>Each cell of the grid has a certain value, from 0 to 100.</p>\n\n<p>What I've been trying to do is keep a list of all the cell with a value lower than 50 starting at the point (0, 0), but I would like not to keep all the points, but only the outer points (perimeter, bounds, a cell with a value lower than 50 that does not have 4 adjacent cells with a value lower than 50).</p>\n\n<p>The way I implemented the algorithm, I keep a list of all the points. How should I modify it? I would like to optimize the code if possible (I can have bigger grids), so I would prefer not to iterate again.</p>\n\n<pre><code>pointList pointsWithValueBelow50; // The list of points with a value below 50\nmap&lt;point, bool&gt; pointDiscovered; // A map of the points we already passed through\npoint a = {0,0};\npoint b;\nint value;\nQueue q;\n\nq.enqueue(a);\npointDiscovered[a] = true;\nwhile(!q.isEmpty())\n{\n    a = q.dequeue(a)\n    value = calculateValue(a); // Random method that verify if the points has a value below 50 in the grid\n    if (value &lt; 50)\n    {\n         pointsWithValueBelow50.add(a);\n         b[0] = a[0]+1;\n         b[1] = a[1];\n         if(pointDiscovered[b] == false)\n         {\n             q.enqueue(b)\n             pointDiscovered[b] = true;\n         }\n         b[0] = a[0]-1;\n         b[1] = a[1];\n         if(pointDiscovered[b] == false)\n         {\n             q.enqueue(b)\n             pointDiscovered[b] = true;\n         }\n         b[0] = a[0];\n         b[1] = a[1]+1;\n         if(pointDiscovered[b] == false)\n         {\n             q.enqueue(b)\n             pointDiscovered[b] = true;\n         }\n         b[0] = a[0];\n         b[1] = a[1]-1;\n         if(pointDiscovered[b] == false)\n         {\n             q.enqueue(b)\n             pointDiscovered[b] = true;\n         }\n    }     \n}\n</code></pre>\n\n<p>As you can see, I keep in my list all the points with a value below 50, instead of the outer points. How can I modify this code? Should I use another algorithm?</p>\n"}, {"tags": ["c++", "std", "unresolved-external"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1433956435, "post_id": 30762923, "comment_id": 49578537, "body": "Don&#39;t declare system or standard functions yourself, use the proper header files. Read <a href=\"http://en.cppreference.com/w/cpp/string/byte/atoi\" rel=\"nofollow noreferrer\">this reference of <code>atol</code></a> and pay close attention to the argument type."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1433956931, "post_id": 30762923, "comment_id": 49578822, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "reply_to_user": {"reputation": 73, "user_id": 3300735, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8172c1a0d993d36bcdc69d6035d21187?s=128&d=identicon&r=PG&f=1", "display_name": "user3300735", "link": "https://stackoverflow.com/users/3300735/user3300735"}, "edited": false, "score": 0, "creation_date": 1433957212, "post_id": 30763199, "comment_id": 49579010, "body": "I think the problem is that you declared by mistake a &quot;new&quot; non-standard atol overload, with a non-const char pointer, and the linker is trying to find its definition, and it&#39;s not finding it, since the correct standard implemented atol takes a const char*."}], "tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": true, "score": 2, "last_activity_date": 1433957107, "last_edit_date": 1433957107, "creation_date": 1433956986, "answer_id": 30763199, "question_id": 30762923, "link": "https://stackoverflow.com/questions/30762923/c-lnk2019-unresolved-external-symbol-stdlib/30763199#30763199", "title": "C++ LNK2019 unresolved external symbol stdlib", "body": "<p>You have this code:</p>\n\n<blockquote>\n<pre><code>void\nintstr( char *t )\n{\n    long int atol( char * );\n</code></pre>\n</blockquote>\n\n<p>What's the point of this <a href=\"http://en.cppreference.com/w/cpp/string/byte/atoi\" rel=\"nofollow\"><code>atol()</code></a> <em>wrong</em> declaration?<br>\nTo use <code>atol()</code> in your code, just <code>#include &lt;stdlib.h&gt;</code>.</p>\n\n<p>Note that the prototype of <a href=\"http://en.cppreference.com/w/cpp/string/byte/atoi\" rel=\"nofollow\">atol()</a> is:</p>\n\n<blockquote>\n<pre><code>long atol( const char *str );\n</code></pre>\n</blockquote>\n\n<p>(The input parameter is a <em>const</em> pointer.)</p>\n"}], "owner": {"reputation": 73, "user_id": 3300735, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8172c1a0d993d36bcdc69d6035d21187?s=128&d=identicon&r=PG&f=1", "display_name": "user3300735", "link": "https://stackoverflow.com/users/3300735/user3300735"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 30763199, "answer_count": 1, "score": 3, "last_activity_date": 1433957138, "creation_date": 1433956084, "last_edit_date": 1433957138, "question_id": 30762923, "link": "https://stackoverflow.com/questions/30762923/c-lnk2019-unresolved-external-symbol-stdlib", "title": "C++ LNK2019 unresolved external symbol stdlib", "body": "<p>I have a program that requires atol() in one of its functions.  So I included stdlib.h but it doesn't seem to see it.</p>\n\n<p>EDIT:  I'm aware to use it, I should include stdlib.h.  I did that but I'm still getting this error. \nThe function:</p>\n\n<pre><code>void\nintstr( char *t )\n{\n    long int atol( char * );\n    long x;\n    int i;\n    x=atol(t);\n\n    for(i=0;i&lt;nilit;i++){\n        if(x == ilit[i]){\n        lsymb =symbol[nsymb++] = 250+i;\n        return;}\n    }\n    if( 50 &lt;= nilit){ \n        puts(\"** too many int literals**\");\n        exit(1);\n    }\n    ilit[nilit++] = x;\n    lsymb = symbol[nsymb++] = 249 + nilit;\n}\n</code></pre>\n\n<p>The error I get when I try to build</p>\n\n<pre><code> error LNK2019: unresolved external symbol \"long __cdecl atol(char *)\" (?atol@@YAJPAD@Z) referenced in function \"void __cdecl intstr(char *)\" (?intstr@@YAXPAD@Z)\nC:x\\X\\X\\X\\Debug\\p8program.exe : fatal error LNK1120: 1 unresolved externals\n</code></pre>\n"}, {"tags": ["c++", "cygwin", "lapack"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1433957677, "post_id": 30762841, "comment_id": 49579288, "body": "How does is your <code>dgeev_</code> function implementation look like and where (which file) is it located? Also where is the function declaration located?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1433958071, "post_id": 30762841, "comment_id": 49579511, "body": "Hmm, or is it part of  <code>LAPACK</code>? If so, why does it to be declared, instead including its header file?"}, {"owner": {"reputation": 27, "user_id": 4924345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52a10de235d1ef6a46f857bc7151c4a6?s=128&d=identicon&r=PG&f=1", "display_name": "klicperajo", "link": "https://stackoverflow.com/users/4924345/klicperajo"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1434057329, "post_id": 30762841, "comment_id": 49632650, "body": "It is part of LAPACK. And the function prototype is necessary for the compiler, since LAPACK doesn&#39;t have any header files because it is a library (at least I think that is the reason)."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4924345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52a10de235d1ef6a46f857bc7151c4a6?s=128&d=identicon&r=PG&f=1", "display_name": "klicperajo", "link": "https://stackoverflow.com/users/4924345/klicperajo"}, "edited": false, "score": 0, "creation_date": 1434057045, "post_id": 30773526, "comment_id": 49632519, "body": "I can&#39;t believe it, that simple tweak was exactly what I was missing! Thank you!!"}], "tags": [], "owner": {"reputation": 3112, "user_id": 2707697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9da9a865b63faae8438d2d57c1c71b9?s=128&d=identicon&r=PG&f=1", "display_name": "ztik", "link": "https://stackoverflow.com/users/2707697/ztik"}, "is_accepted": true, "score": 0, "last_activity_date": 1434005121, "creation_date": 1434005121, "answer_id": 30773526, "question_id": 30762841, "link": "https://stackoverflow.com/questions/30762841/linking-error-with-lapack-under-cygwin/30773526#30773526", "title": "Linking error with LAPACK under cygwin", "body": "<p>Supposing that you have installed <code>BLAS</code> and <code>LAPACK</code> libraries correctly and the system can locate them, then you just have to change the order in the compile command.</p>\n\n<pre><code>$ g++ main.cpp -llapack -lblas\n</code></pre>\n\n<p>The compiler should know which functions of <code>main.cpp</code> should look into the libraries before declare them. </p>\n"}], "owner": {"reputation": 27, "user_id": 4924345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52a10de235d1ef6a46f857bc7151c4a6?s=128&d=identicon&r=PG&f=1", "display_name": "klicperajo", "link": "https://stackoverflow.com/users/4924345/klicperajo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 30773526, "answer_count": 1, "score": 0, "last_activity_date": 1434005121, "creation_date": 1433955835, "last_edit_date": 1495541158, "question_id": 30762841, "link": "https://stackoverflow.com/questions/30762841/linking-error-with-lapack-under-cygwin", "title": "Linking error with LAPACK under cygwin", "body": "<p>Similar to the problem described in <a href=\"https://stackoverflow.com/questions/13891423/linking-lapack-library-with-g-on-cygwin\" title=\"this question\">this question</a>, I want to compile a C++ program using LAPACK under Windows 8.1, using cygwin (and written in NetBeans). I got the necessary packages in cygwin (lapack, liblapack-devel, liblapack0), and have written a function prototype:</p>\n\n<pre><code>extern \"C\" void dgeev_(char* jobvl, char* jobvr, int* n, double* a,\n    int* lda, double* wr, double* wi, double* vl, int* ldvl,\n    double* vr, int* ldvr, double* work, int* lwork, int* info);\n</code></pre>\n\n<p>But trying to compile still throws an error from the linker:</p>\n\n<pre><code>$ g++ -llapack -lblas main.cpp \n/tmp/cc3opfN5.o:main.cpp:(.text+0x349): undefined reference to `dgeev_'\n/tmp/cc3opfN5.o:main.cpp:(.text+0x403): undefined reference to `dgeev_'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>The code looks like this (adapted from <a href=\"https://software.intel.com/sites/products/documentation/doclib/mkl_sa/11/mkl_lapack_examples/dgeev_ex.c.htm\" rel=\"nofollow noreferrer\">this example</a>):</p>\n\n<pre><code>/* Locals */\nint n = N, lda = LDA, ldvl = LDVL, ldvr = LDVR, info, lwork;\ndouble wkopt;\ndouble* work;\ndouble h = k_max / N;\n/* Local arrays */\ndouble wr[N], wi[N], vl[LDVL * N], vr[LDVR * N];\ndouble a[LDA * N];\n/* Initialize matrix */\nfor (int i = 0; i &lt; N; i++) {\n    for (int j = 0; j &lt; N; j++) {\n        a[i * N + j] = integral(i + 1, j + 1);\n        if (i == j) {\n            a[i * N + j] += diagonal((i + 1) * h);\n        }\n    }\n}\n/* Executable statements */\nprintf(\" DGEEV Example Program Results\\n\");\n/* Query and allocate the optimal workspace */\nlwork = -1;\nchar vec[] = \"Vectors\";\ndgeev_(vec, vec, &amp;n, a, &amp;lda, wr, wi, vl, &amp;ldvl, vr, &amp;ldvr,\n        &amp;wkopt, &amp;lwork, &amp;info);\nlwork = (int) wkopt;\nwork = (double*) malloc(lwork * sizeof (double));\n/* Solve eigenproblem */\ndgeev_(vec, vec, &amp;n, a, &amp;lda, wr, wi, vl, &amp;ldvl, vr, &amp;ldvr,\n        work, &amp;lwork, &amp;info);\n</code></pre>\n\n<p>What am I missing? :-/</p>\n"}, {"tags": ["java", "android", "c++", "qt", "java-native-interface"], "comments": [{"owner": {"reputation": 107, "user_id": 4768977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PNi1Q.jpg?s=128&g=1", "display_name": "zarachbaal", "link": "https://stackoverflow.com/users/4768977/zarachbaal"}, "edited": false, "score": 0, "creation_date": 1434098968, "post_id": 30762826, "comment_id": 49646561, "body": "I just edited my question"}, {"owner": {"reputation": 107, "user_id": 4768977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PNi1Q.jpg?s=128&g=1", "display_name": "zarachbaal", "link": "https://stackoverflow.com/users/4768977/zarachbaal"}, "edited": false, "score": 0, "creation_date": 1434460889, "post_id": 30762826, "comment_id": 49778968, "body": "I successfully managed to enable the Wifi hotspot using Java and Android Studio, I edited my question to add the code. Does anyone have any idea how to do the same with C++ ?"}], "answers": [{"tags": [], "owner": {"reputation": 185, "user_id": 1545874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/42e81724fa4cdc1507aa4aca7d31668a?s=128&d=identicon&r=PG", "display_name": "DevMultiTech", "link": "https://stackoverflow.com/users/1545874/devmultitech"}, "is_accepted": false, "score": 0, "last_activity_date": 1584550717, "creation_date": 1584550717, "answer_id": 60744151, "question_id": 30762826, "link": "https://stackoverflow.com/questions/30762826/how-to-send-from-native-code-a-android-content-context-parameter-to-a-java-fct/60744151#60744151", "title": "How to send (from Native code) a android.content.Context parameter to a Java fct (via JNI)", "body": "<p>Just in order to transfer context object from C++ to JNI, use auto-injection like that:</p>\n\n<pre><code>QtAndroid::androidActivity().callStaticMethod&lt;void&gt;(\n      \"com/company/project/MyApp\",\n      \"myFunc\", // method name\n      \"(Landroid/content/Context;)V\" // auto-injection\n    );\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 4768977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PNi1Q.jpg?s=128&g=1", "display_name": "zarachbaal", "link": "https://stackoverflow.com/users/4768977/zarachbaal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1218, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1584550717, "creation_date": 1433955793, "last_edit_date": 1495542812, "question_id": 30762826, "link": "https://stackoverflow.com/questions/30762826/how-to-send-from-native-code-a-android-content-context-parameter-to-a-java-fct", "title": "How to send (from Native code) a android.content.Context parameter to a Java fct (via JNI)", "body": "<p>I am developping an application for my android phone, and I am trying to enable the Wifi hotspot.\nI am using Qt 5.4.1 so I developp in C++.\nAs there is not any function to do this in the NDK, I am using JNI to call Java Methods.</p>\n\n<p>My java code is (thanks to Ashish Sahu's answer in <a href=\"https://stackoverflow.com/questions/6394599/android-turn-on-off-wifi-hotspot-programmatically?rq=1\">stackoverflow thread</a>) :</p>\n\n<pre><code>package org.app.test;\n\nimport android.content.*;\nimport android.net.wifi.*;\nimport java.lang.reflect.*;\n\n//Class that handles Wifi Hotspot (access point) configuration\npublic class ApManager {\n\n    //Is Wifi hotspot on or off ?\n    public static boolean isApOn(Context context) {\n        WifiManager wifimanager = (WifiManager) context.getSystemService(context.WIFI_SERVICE);\n        try {\n            Method method = wifimanager.getClass().getDeclaredMethod(\"isWifiApEnabled\");\n            method.setAccessible(true);\n            return (Boolean) method.invoke(wifimanager);\n        }\n        catch (Throwable ignored) {}\n        return false;\n    }\n\n    //Turn Wifi hotspot on or off\n    public static boolean configApState(Context context, boolean b) {\n        WifiManager wifimanager = (WifiManager) context.getSystemService(context.WIFI_SERVICE);\n        WifiConfiguration wificonfiguration = null;\n        try {\n            //if Wifi is on, turn it off\n            if(isApOn(context)) {\n                wifimanager.setWifiEnabled(false);\n            }\n            Method method = wifimanager.getClass().getMethod(\"setWifiApEnabled\", WifiConfiguration.class, boolean.class);\n            method.invoke(wifimanager, wificonfiguration, b);\n            return true;\n        }\n        catch(Exception e) {\n            e.printStackTrace();\n        }\n        return false;\n    }       \n}\n</code></pre>\n\n<p>C++ code sample : </p>\n\n<pre><code>setWifiApEnabled(QAndroidJniObject context, bool b)\n{\n    return QAndroidJniObject::callStaticMethod&lt;jboolean&gt;(\"org/app/test/ApManager\"\n                                                         , \"configApState\"\n                                                         , \"(Ljava/lang/Object;Z)Z\" //Or (Landroid/content/Context;Z)Z ???\n                                                         , context.object&lt;jobject&gt;()\n                                                         , b);\n}\n</code></pre>\n\n<p>But now I have a problem ; how to get the parameter <code>context</code> to pass to the function <code>setWifiApEnabled(context, b)</code> when I call it ?</p>\n\n<p>I am a little lost, I read some threads about this problem (<a href=\"http://discuss.cocos2d-x.org/t/jni-sending-a-android-content-context-parameter-to-a-function/2314/2\" rel=\"nofollow noreferrer\">like this one</a>) but I do not totally understand what the people who answered meant.</p>\n\n<p>Could you help me with this ?</p>\n\n<p><strong>EDIT</strong> : I found on this <a href=\"https://stackoverflow.com/questions/22029815/how-to-use-the-qt-jni-class-qandroidjniobject\">stackoverflow thread</a> a way to get the context :</p>\n\n<pre><code>interface = QApplication::platformNativeInterface();\nactiviti = (jobject)interface-&gt;nativeResourceForIntegration(\"QtActivity\");\nat = new QAndroidJniObject(activiti);\nappctx = at-&gt;callObjectMethod(\"getApplicationContext\", \"()Landroid/content/Context;\");\nif(appctx.isValid()) qDebug() &lt;&lt; \"I am valid !\";\nelse qDebug() &lt;&lt; \"I ain't valid !\";\n</code></pre>\n\n<p><code>appctx</code> is valid, but the Wifi hotspot doesn't get enabled and I cannot get its state. </p>\n\n<p><strong>EDIT 2 :</strong> : I successfully managed to enable the Wifi hotspot in java, using Android Studio. The code is the following :</p>\n\n<p>WifiApManager.java :</p>\n\n<pre><code>public class WifiApManager {\n    private WifiManager wifiMan;\n    protected Method setWifiApEnabledMethod, isWifiApEnabledMethod;\n    protected final static int MAX_ITER = 10;\n\n    public WifiApManager(WifiManager wifiMan) {\n        this.wifiMan = wifiMan;\n        getHiddenMethods();\n    }\n\n    private void getHiddenMethods() {\n        try {\n            setWifiApEnabledMethod = wifiMan.getClass().getMethod(\"setWifiApEnabled\", WifiConfiguration.class, boolean.class);\n            isWifiApEnabledMethod = wifiMan.getClass().getMethod(\"isWifiApEnabled\");\n        } catch (NoSuchMethodException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public boolean isWifiApEnabled() {\n        try {\n            return (Boolean)isWifiApEnabledMethod.invoke(wifiMan);\n        } catch (Exception e) {\n            return false;\n        }\n    }\n\n    public boolean isWifiEnabled() {\n        return wifiMan.isWifiEnabled();\n    }\n\n    public boolean setWifiApEnabled(WifiConfiguration conf, boolean enabled) {\n        try {\n            return (Boolean) setWifiApEnabledMethod.invoke(wifiMan, conf, true);\n        } catch (Exception e) {\n            return false;\n        }\n    }\n\n    public boolean toggleWifi(String ssid) {\n        // WifiConfiguration creation:\n        WifiConfiguration conf = new WifiConfiguration();\n        conf.SSID = ssid;\n        conf.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);\n\n        // If AP Wifi is enabled, disables it and returns:\n        if(isWifiApEnabled()) {\n            //setWifiApEnabled(null, false); Won't work, see two further lines\n            wifiMan.setWifiEnabled(true);\n            wifiMan.setWifiEnabled(false);\n            int maxIter = MAX_ITER;\n            while (isWifiApEnabled() &amp;&amp; maxIter-- &gt;= 0) {\n                try {Thread.sleep(500);} catch (Exception e) {}\n            }\n            return isWifiApEnabled();\n        }\n\n        // If standard Wifi is enabled, disables it:\n        if (isWifiEnabled()) {\n            if (wifiMan.setWifiEnabled(false)) {\n                int maxIter = MAX_ITER;\n                while (wifiMan.isWifiEnabled() &amp;&amp; maxIter-- &gt;= 0) {\n                    try {Thread.sleep(500);} catch (Exception e) {}\n                }\n            }\n            if (isWifiEnabled()) {\n                return false;\n            }\n        }\n\n        // Enables AP Wifi\n        try {\n            if (! setWifiApEnabled(conf, true)) {\n                System.out.println(\"setWifiApEnabledMethod failed.\");\n                return false;\n            }\n            int maxIter = MAX_ITER;\n            while (! isWifiApEnabled() &amp;&amp; maxIter-- &gt; 0) {\n                try {Thread.sleep(500);} catch (Exception e) {}\n            }\n        } catch(Exception e) {\n            e.printStackTrace();\n            return false;\n        }\n        return true;\n    }\n}\n</code></pre>\n\n<p>Main class :</p>\n\n<pre><code>public class AndroidMenusActivity extends Activity implements OnClickListener {\n    private WifiApManager wifiMan;\n    private ToggleButton wifiButton;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        wifiMan = new WifiApManager((WifiManager) this.getSystemService(Context.WIFI_SERVICE));\n        setContentView(R.layout.activity_android_menus);\n        makeUI();\n    }\n\n    private void makeUI() {\n        LinearLayout subLayout = (LinearLayout) findViewById(R.id.subLayout);\n        wifiButton = new ToggleButton(this);\n        wifiButton.setTextOn(\"Disable Wifi\");\n        wifiButton.setTextOff(\"Enable AP Wifi\");\n        wifiButton.setChecked(wifiMan.isWifiApEnabled());\n        wifiButton.setOnClickListener(this);\n        subLayout.addView(wifiButton);\n    }\n\n    @Override\n    public void onClick(View sender) {\n        if (!wifiButton.equals(sender))\n            return;\n\n        AsyncTask&lt;Object, Void, Boolean&gt; task = new AsyncTask&lt;Object, Void, Boolean&gt;() {\n            private ToggleButton bt;\n            private WifiApManager wm;\n\n            @Override\n            protected Boolean doInBackground(Object... args) {\n                bt = (ToggleButton) args[0];\n                wm = (WifiApManager) args[1];\n                return wm.toggleWifi(\"test.com\");\n            }\n            @Override\n            protected void onPostExecute (Boolean result) {\n                bt.setChecked(result.booleanValue());\n                bt.setEnabled(true);\n            }\n        };\n        wifiButton.setEnabled(false);\n        task.execute(wifiButton, wifiMan);\n    }\n}\n</code></pre>\n\n<p>But I cannot find a way to do the same in C++, any help ?</p>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1433957032, "post_id": 30762674, "comment_id": 49578891, "body": "The link does not work. Modifying <code>configure.ac</code> just before running <code>make</code> should make no difference since the makefile is generated by <code>configure</code>. What&#39;s your os? What does <code>file stream-0.6.0&#47;net_server&#47;src&#47;net_server</code> output? Are you able to run it directly? What does <code>which gdb | xargs file</code> output?"}, {"owner": {"reputation": 1, "user_id": 3675249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86c6085a003f907bb184cc4a5d7a835?s=128&d=identicon&r=PG&f=1", "display_name": "user221261", "link": "https://stackoverflow.com/users/3675249/user221261"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1433997942, "post_id": 30762674, "comment_id": 49594738, "body": "Sorry somehow link got corrupted the corrected link is <a href=\"http://infolab.stanford.edu/stream/code/stream-0.6.0.tar.gz\" rel=\"nofollow noreferrer\">infolab.stanford.edu/stream/code/stream-0.6.0.tar.gz</a> . The configure.ac is                                                                                            dnl CXXFLAGS=&#39;-g -ansi -Wall -D_MONITOR_ -D_DM_ -D_SYS_STR_&#39; CXXFLAGS=&#39;-ansi -D_MONITOR_ -O3 -D_SYS_STR_&#39; so as when i change place -g in front of the second line of CXXFLAGS then error starts occurring."}, {"owner": {"reputation": 1, "user_id": 3675249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86c6085a003f907bb184cc4a5d7a835?s=128&d=identicon&r=PG&f=1", "display_name": "user221261", "link": "https://stackoverflow.com/users/3675249/user221261"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1434299961, "post_id": 30762674, "comment_id": 49708601, "body": "My problem was solved by using CXXFLAGS=&#39;-g -O0 -ansi -D_MONITOR_ -O3 -D_SYS_STR_&#39; in configure.ac file."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1434393700, "post_id": 30762674, "comment_id": 49748610, "body": "Hmm, so what differs is: the presence of <code>-O0</code> but that seems to be useless since it gets overwritten by <code>-O3</code>; and the absence of <code>-Wall</code> but that also shouldn&#39;t make a difference either since it suppresses some warning messages (unless <code>-Werror</code> is also passed to the compiler from some other place in the Makefile)."}], "owner": {"reputation": 1, "user_id": 3675249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86c6085a003f907bb184cc4a5d7a835?s=128&d=identicon&r=PG&f=1", "display_name": "user221261", "link": "https://stackoverflow.com/users/3675249/user221261"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1433955343, "creation_date": 1433955343, "question_id": 30762674, "link": "https://stackoverflow.com/questions/30762674/placing-g-switch-in-configure-ac-gives-error-with-libtool", "title": "Placing -g switch in configure.ac gives error with libtool", "body": "<p>C++ Makefile Project\nI am trying to modify the code STREAM <a href=\"http://infolab.stanford.edu/stream/c...m-0.6.0.tar.gz\" rel=\"nofollow\">http://infolab.stanford.edu/stream/c...m-0.6.0.tar.gz</a> . This code is a Makefile C++ code which generates Library.\nMy problem is that when I try to use gdb it gives me error\n\"stream-0.6.0/net_server/src/net_server\": not in executable format: File format not recognized\"</p>\n\n<p>Then i tried to place -g in configure.ac then executed make. Afterwards libtool gave huge number of errors. How to use gdb so that i can trace it step by step to understand the code.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 1, "last_activity_date": 1433955388, "creation_date": 1433955388, "answer_id": 30762686, "question_id": 30762433, "link": "https://stackoverflow.com/questions/30762433/binding-function-to-rvalue-reference/30762686#30762686", "title": "Binding function to rvalue reference", "body": "<p>The compiler recognizes the syntax as being a function pointer</p>\n\n<pre><code>double(*ptr)(double) = &amp;doubleVal;\n</code></pre>\n\n<p>The additional <code>&amp;&amp;</code> is applied against ptr, not the properties of the function to which ptr will point</p>\n\n<pre><code>double(*&amp;&amp;ptr)(double) = &amp;doubleVal;\n</code></pre>\n\n<p>accepts <em>a reference to an rvalue</em>, and the thing on the right <em>is</em> an rvalue - it doesn't have a name or an address until it is stored in <code>ptr</code>.</p>\n\n<pre><code>return &amp;(&amp;doubleVal); // warning - returning address of temporary\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1433955405, "creation_date": 1433955405, "answer_id": 30762694, "question_id": 30762433, "link": "https://stackoverflow.com/questions/30762433/binding-function-to-rvalue-reference/30762694#30762694", "title": "Binding function to rvalue reference", "body": "<p>Your code is basically asking why:</p>\n\n<pre><code>using T = ...;\nT someVal;\n\nT*&amp;&amp; ref = &amp;someVal;\n</code></pre>\n\n<p>works. While <code>someVal</code> is an lvalue, <code>&amp;someVal</code> is a <a href=\"http://en.cppreference.com/w/cpp/language/value_category#rvalue_.28until_C.2B.2B11.29_.2F_prvalue_.28since_C.2B.2B11.29\" rel=\"nofollow\">prvalue</a>, which is a kind of rvalue. Any rvalue may be used to initialize an rvalue reference. </p>\n"}], "owner": {"reputation": 1005, "user_id": 4715851, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/47e6624fae469723fbb108199ff25a45?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/4715851/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 30762694, "answer_count": 2, "score": -1, "last_activity_date": 1433955405, "creation_date": 1433954641, "question_id": 30762433, "link": "https://stackoverflow.com/questions/30762433/binding-function-to-rvalue-reference", "title": "Binding function to rvalue reference", "body": "<p>How come the following works?</p>\n\n<pre><code>double doubleVal(double val) {\n    return val*2;\n}\n\nint main()\n{\n    double myVal = 3.0;\n    double(*&amp;&amp;ptr)(double) = &amp;doubleVal; // Why?\n}\n</code></pre>\n\n<p>I don't understand why the function address can be converted to an rvalue reference.. isn't it an lvalue?</p>\n"}, {"tags": ["c++", "type-conversion", "incomplete-type"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 5, "creation_date": 1433954617, "post_id": 30762401, "comment_id": 49577389, "body": "Move the line <code>B::operator A() {return x;</code>} after <code>class A</code>. That is the essence of ` &#39;class A&#39; is incomplete `"}, {"owner": {"reputation": 328, "user_id": 3981920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3f449828f666538bcd45e1f98db82044?s=128&d=identicon&r=PG&f=1", "display_name": "Ileana Profeanu", "link": "https://stackoverflow.com/users/3981920/ileana-profeanu"}, "edited": false, "score": 0, "creation_date": 1433955138, "post_id": 30762401, "comment_id": 49577707, "body": "thank you. but why doesn&#39;t the forward declaration of class A works, I wonder?"}, {"owner": {"reputation": 823, "user_id": 4812238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFdQT.jpg?s=128&g=1", "display_name": "Ediac", "link": "https://stackoverflow.com/users/4812238/ediac"}, "edited": false, "score": 0, "creation_date": 1433955180, "post_id": 30762401, "comment_id": 49577722, "body": "You can&#39;t convert an object from class B to class A using <code>=</code> without first overloading the <code>=</code> operator."}, {"owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "edited": false, "score": 1, "creation_date": 1433955271, "post_id": 30762401, "comment_id": 49577770, "body": "@IleanaProfeanu You have the forward declaration above class B, but the actual definition below, so class B can&#39;t even know what is class A. Forward declarations are normally used in header files. If you moved class B below class A you wouldn&#39;t need the forward declaration."}, {"owner": {"reputation": 328, "user_id": 3981920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3f449828f666538bcd45e1f98db82044?s=128&d=identicon&r=PG&f=1", "display_name": "Ileana Profeanu", "link": "https://stackoverflow.com/users/3981920/ileana-profeanu"}, "reply_to_user": {"reputation": 823, "user_id": 4812238, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qFdQT.jpg?s=128&g=1", "display_name": "Ediac", "link": "https://stackoverflow.com/users/4812238/ediac"}, "edited": false, "score": 0, "creation_date": 1433955421, "post_id": 30762401, "comment_id": 49577882, "body": "@CNomad in this case, the copy constructor is called, so it&#39;s pkay to use &#39;=&#39; even without having it overloaded"}], "answers": [{"tags": [], "owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "is_accepted": false, "score": 1, "last_activity_date": 1433958424, "last_edit_date": 1433958424, "creation_date": 1433956188, "answer_id": 30762946, "question_id": 30762401, "link": "https://stackoverflow.com/questions/30762401/class-type-conversion-fails-c/30762946#30762946", "title": "class type conversion fails C++", "body": "<p>You can easily move class B's declaration below class A's declaration.</p>\n\n<pre><code>class A\n{\n    ...\n};\n\nclass B\n{\n    ...\n    operator A();\n};\nB::operator A() {return x;}\n</code></pre>\n\n<p>And not use the forward declaration. Then use the operator like this, because you are not converting A to B, but B to A.</p>\n\n<pre><code>B b;\nA a = b; // A a = (A)b;\n...\n</code></pre>\n\n<hr>\n\n<p>About what happens I added some prints to show where the code goes through,</p>\n\n<pre><code>A(int i=6) {\n    std::cout&lt;&lt;\"Created A\"&lt;&lt;std::endl;x=i;\n}\nA( const A&amp; a ) {\n    std::cout&lt;&lt;\"Created A by Copy\"&lt;&lt;std::endl;\n    this-&gt;x = a.x;\n}\nB::operator A() {\n    std::cout &lt;&lt; \"Operator A\" &lt;&lt; std::endl;\n    return x;\n}\n</code></pre>\n\n<p>And ran this,</p>\n\n<pre><code>B b;\nstd::cout &lt;&lt; \"Begin\" &lt;&lt; std::endl;\nA a = b;\nstd::cout &lt;&lt; \"End\" &lt;&lt; std::endl;\n...\n</code></pre>\n\n<p>This is the output,</p>\n\n<pre><code>Begin\nOperator A\nCreated A\nCreated A by copy\nEnd\n</code></pre>\n\n<p>So operator A returns an int, which is used to construct an instance of A which is then used to initialize the instance 'a' by copy. I never knew you could do things like these (You probably don't want to do it anyway, but yeah..)</p>\n\n<p>Edit: You should actually be creating an instance of A explicitly in operator A() instead of relying on the compiler.</p>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 3, "last_activity_date": 1433958763, "last_edit_date": 1433958763, "creation_date": 1433956253, "answer_id": 30762966, "question_id": 30762401, "link": "https://stackoverflow.com/questions/30762401/class-type-conversion-fails-c/30762966#30762966", "title": "class type conversion fails C++", "body": "<p>You didn't post the full text of your errors, which means you left out the all important line numbers. As is often the case, the line numbers are often the most valuable piece of information in an error.</p>\n\n<pre><code>class A;\nclass B\n{\n    ...\n};\nB::operator A() {return x;}\n</code></pre>\n\n<p>I'm guessing that this is the line your compiler is telling you the error occurs on.</p>\n\n<p>At this line of code, the compiler does not yet have a complete declaration of <code>A</code> so it has no idea how to convert <code>int x</code> into <code>class A</code>. C++ compilation is single pass, so it can't defer this lookup.</p>\n\n<p>You need to complete your declarations before you proceed to the definitions.</p>\n\n<pre><code>class A;\nclass B\n{\n    int x;\npublic:\n    B(int i=107) {x=i;}\n    operator A();\n};\n\nclass A\n{\n    int x;\npublic:\n    A(int i=6) {x=i;}\n    int get_x() {return x;}\n};\n\n// done with declarations. begin definitions.\n\nB::operator A() {return x;}\n// compiler quietly expands this to be:\n// B::operator A() { return A::A(i=this-&gt;x); }\n</code></pre>\n\n<p>Typically <code>A</code> and <code>B</code> would be in header files and you would keep the definition, which requires both classes to be fully declared, for a .cpp file somewhere.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 1, "last_activity_date": 1433956525, "creation_date": 1433956525, "answer_id": 30763051, "question_id": 30762401, "link": "https://stackoverflow.com/questions/30762401/class-type-conversion-fails-c/30763051#30763051", "title": "class type conversion fails C++", "body": "<p>The code has several issues (See the comments)</p>\n\n<pre><code>#include&lt;iostream&gt;\n\n// Side Note: Never do this in a header (I avoid it in sources, too)\nusing namespace std;\n\nclass A;\nclass B\n{\n    int x;\npublic:\n    B(int i=107) {x=i;}\n    operator A() const;\n    // Moved to make 'main' reasonable\n    int get_x() {return x;}\n};\n\nclass A\n{\n    int x;\npublic:\n    A(int i=6) {x=i;}\n    // Make the desired conversion work:\n    operator B () const { return x; }\n};\n\n// This nedds a complete A. In other words, the delaration of A has to be knonwn.\nB::operator A() const {return x;}\n\n\nint main()\n{\n    A a;\n    B b=a;\n    cout &lt;&lt; b.get_x() &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 328, "user_id": 3981920, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3f449828f666538bcd45e1f98db82044?s=128&d=identicon&r=PG&f=1", "display_name": "Ileana Profeanu", "link": "https://stackoverflow.com/users/3981920/ileana-profeanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 30762966, "answer_count": 3, "score": 2, "last_activity_date": 1433958763, "creation_date": 1433954526, "question_id": 30762401, "link": "https://stackoverflow.com/questions/30762401/class-type-conversion-fails-c", "title": "class type conversion fails C++", "body": "<p>I'm trying to make something compile, but it won't, and I couldn't find anything relevant on the web.</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nclass A;\nclass B\n{\n    int x;\npublic:\n    B(int i=107) {x=i;}\n    operator A();\n};\nB::operator A() {return x;}\n\nclass A\n{\n    int x;\npublic:\n    A(int i=6) {x=i;}\n    int get_x() {return x;}\n};\n\nint main()\n{\n    A a;\n    B b=a;\n    cout&lt;&lt;a.get_x();\n    return 0;\n}\n</code></pre>\n\n<p>I get the errors:\nreturn type 'class A' is incomplete\nconversion from 'A' to non-scalar type 'B' requested</p>\n\n<p>Not even this works:</p>\n\n<pre><code>    B B;\n    A a=b;\n</code></pre>\n\n<p>I don't know what I do wrong, and I don't know where to find more info on the subject.</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "memory", "armadillo"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1433955029, "post_id": 30762396, "comment_id": 49577631, "body": "You solve the problem by debugging your code.  Writing programs isn&#39;t just about writing code, running code, and hoping it works.  Debugging is part and parcel of writing programs."}, {"owner": {"reputation": 142, "user_id": 3109979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35a9a13ebda2729086f4bdc9d6a8772a?s=128&d=identicon&r=PG&f=1", "display_name": "Haj Nasser", "link": "https://stackoverflow.com/users/3109979/haj-nasser"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1433955129, "post_id": 30762396, "comment_id": 49577699, "body": "To be honest, I didn&#39;t understand what you mean at all. Would you please clarify it more?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1433955209, "post_id": 30762396, "comment_id": 49577738, "body": "You are supposed to debug your program first if there is an error.  Did you expect to write programs and never need to debug them, i.e. they work every time?  No programmer writes programs that work the first time, unless they are lucky or the program is very simple.  Also, one of the reasons for having questions closed in SO is the lack of effort of the poster in debugging their code,"}, {"owner": {"reputation": 142, "user_id": 3109979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35a9a13ebda2729086f4bdc9d6a8772a?s=128&d=identicon&r=PG&f=1", "display_name": "Haj Nasser", "link": "https://stackoverflow.com/users/3109979/haj-nasser"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1433955481, "post_id": 30762396, "comment_id": 49577911, "body": "Of course, this program is for 21 particles but it runs well for 3 particles. On the oher hand, I debuged it for 3 particles before and I just expanded it to 21 particles and then the problem apeared."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1433955516, "post_id": 30762396, "comment_id": 49577928, "body": "Well use the debugger when the input is 21.  What&#39;s the problem in doing that?  And what is this?  <code>kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(&zwnj;&#8203;kron(kron(kron(kron(&zwnj;&#8203;kron(kron(kron(kron(&zwnj;&#8203;a1,a2),a3),a4),a5),a&zwnj;&#8203;6),a7),a8),a9),a10),&zwnj;&#8203;a11),a12),a13),a14),&zwnj;&#8203;a15),a16),a17),a18),&zwnj;&#8203;a19),a20),a21);}</code>  You need to do this differently, as one reason may be that you&#39;re blowing up the stack with such code."}, {"owner": {"reputation": 142, "user_id": 3109979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35a9a13ebda2729086f4bdc9d6a8772a?s=128&d=identicon&r=PG&f=1", "display_name": "Haj Nasser", "link": "https://stackoverflow.com/users/3109979/haj-nasser"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1433955865, "post_id": 30762396, "comment_id": 49578169, "body": "Of course, I asked this question before in <a href=\"http://stackoverflow.com/questions/30528648/tensor-product-of-n-matrices-in-c-and-armadillo\" title=\"tensor product of n matrices in c and armadillo\">stackoverflow.com/questions/30528648/&hellip;</a> but I didn&#39;t recieve any responses."}, {"owner": {"reputation": 142, "user_id": 3109979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35a9a13ebda2729086f4bdc9d6a8772a?s=128&d=identicon&r=PG&f=1", "display_name": "Haj Nasser", "link": "https://stackoverflow.com/users/3109979/haj-nasser"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1433956470, "post_id": 30762396, "comment_id": 49578564, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/80207/discussion-between-user3109979-and-paulmckenzie\">continue this discussion in chat</a>."}, {"owner": {"reputation": 3366, "user_id": 1080929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78ecd4627fdf46fc3b3a217eeb0e5104?s=128&d=identicon&r=PG", "display_name": "mtall", "link": "https://stackoverflow.com/users/1080929/mtall"}, "edited": false, "score": 0, "creation_date": 1433991568, "post_id": 30762396, "comment_id": 49593150, "body": "You are using global variables and initializing them outside of a function. These are big problems, as the order of initialization of global variables is undefined in C++.  The statement <code>cx_mat ee = ii.col(0);</code> may not work properly, as <code>ii</code> may not be initialized (ie. full of garbage). Similarly for <code>cx_mat sink=a21*a20.t();</code>. Rewrite your code so you don&#39;t have global variables."}, {"owner": {"reputation": 142, "user_id": 3109979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35a9a13ebda2729086f4bdc9d6a8772a?s=128&d=identicon&r=PG&f=1", "display_name": "Haj Nasser", "link": "https://stackoverflow.com/users/3109979/haj-nasser"}, "edited": false, "score": 0, "creation_date": 1434006561, "post_id": 30762396, "comment_id": 49598416, "body": "the main problem is      sink=a21*a20.t(), because when I delete all the lines after this comment and this comment, the code works well, but when I only add this lin to the code, I recieve the memory error."}], "answers": [{"comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1433958421, "post_id": 30763615, "comment_id": 49579751, "body": "Several of my friends who have recently moved from Python to C++ have found that - contrary to any of our expectations - MS Visual Studio (one of the free versions, e.g. VS 2015) has helped them hugely. There are even some really nice perf/profiling tools for Python available for MSVC (<a href=\"https://pytools.codeplex.com/\" rel=\"nofollow noreferrer\">pytools.codeplex.com</a>). Alternatively, consider using such as Eclipse or Code::Blocks. Learning C++ from the command line is hardcore and - frankly - the most painful route."}, {"owner": {"reputation": 142, "user_id": 3109979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35a9a13ebda2729086f4bdc9d6a8772a?s=128&d=identicon&r=PG&f=1", "display_name": "Haj Nasser", "link": "https://stackoverflow.com/users/3109979/haj-nasser"}, "edited": false, "score": 0, "creation_date": 1433964306, "post_id": 30763615, "comment_id": 49583295, "body": "Thank you very much dear kfsone. Yes, I have just moved from Python to c++ and I am really strange in c++. Would you please let me know name of a good c++11 book?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "reply_to_user": {"reputation": 142, "user_id": 3109979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35a9a13ebda2729086f4bdc9d6a8772a?s=128&d=identicon&r=PG&f=1", "display_name": "Haj Nasser", "link": "https://stackoverflow.com/users/3109979/haj-nasser"}, "edited": false, "score": 0, "creation_date": 1433965472, "post_id": 30763615, "comment_id": 49583901, "body": "There&#39;s  <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a> and more appropriately <a href=\"http://stackoverflow.com/questions/9822291/c-c-for-python-programmer\" title=\"c c for python programmer\">stackoverflow.com/questions/9822291/c-c-for-python-programme&zwnj;&#8203;r</a> but the take away is - it varies. I encourage you to see those threads to get some suggestions then find a book store or library so you can spend a while with the books that sound good. These books are often expensive and nothing is worse than getting 5 pages in and realizing the book is going to use examples you don&#39;t relate to in any way and that it is basically a heavy sleeping pill for you."}, {"owner": {"reputation": 142, "user_id": 3109979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35a9a13ebda2729086f4bdc9d6a8772a?s=128&d=identicon&r=PG&f=1", "display_name": "Haj Nasser", "link": "https://stackoverflow.com/users/3109979/haj-nasser"}, "edited": false, "score": 0, "creation_date": 1433967124, "post_id": 30763615, "comment_id": 49584772, "body": "Excuse me kfsone. I did all you said about compiling and debuging, but I received tha same error (memory error)."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "reply_to_user": {"reputation": 142, "user_id": 3109979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35a9a13ebda2729086f4bdc9d6a8772a?s=128&d=identicon&r=PG&f=1", "display_name": "Haj Nasser", "link": "https://stackoverflow.com/users/3109979/haj-nasser"}, "edited": false, "score": 0, "creation_date": 1433967364, "post_id": 30763615, "comment_id": 49584924, "body": "In gdb you can use the <code>bt</code> command to get a <code>back trace</code> from the current point of execution, which should tell you <i>where</i> the program is crashing and help you debug. You may want to consult <a href=\"http://www.cprogramming.com/gdbtutorial.html\" rel=\"nofollow noreferrer\">cprogramming.com/gdbtutorial.html</a> or similar for more help using gdb."}], "tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 1, "last_activity_date": 1433958581, "last_edit_date": 1433958581, "creation_date": 1433958202, "answer_id": 30763615, "question_id": 30762396, "link": "https://stackoverflow.com/questions/30762396/memory-error-in-c-armadillo/30763615#30763615", "title": "Memory error in c++ (armadillo)", "body": "<p>Step 1: Identify where it happens.</p>\n\n<p>Compile with</p>\n\n<pre><code>$ g++ -std=c++0x -Wall -O0 -g3 psinkt.cpp -o ./psinkt.out\n</code></pre>\n\n<p>and debug with</p>\n\n<pre><code>$ gdb ./psinkt.out\ngdb&gt; run\n</code></pre>\n\n<p>Or use valgrind</p>\n\n<pre><code>$ yum install valgrind\n# or\n$ apt-get install valgrind\n$ valgrind --tool=memcheck ./psinkt.out\n</code></pre>\n\n<p>Step 2: Improve your C++</p>\n\n<p>I'd strongly encourage you to visit a book store and skim some C++ books and find a more readable style. Your current code is very hard to penetrate and coming from Python to C++ is going to introduce a level of hurt like this - C++ is a language full of stupidly sharp edges and loaded hand cannons; it's C++, not you :)</p>\n\n<p>For example, that horrible kron thing you're doing... Rethink what it is you're trying to do, and things like this:</p>\n\n<pre><code>cx_mat H11=H1(a1,a2)+H1(a1,a3)+H1(a1,a4)+H1(a1,a5)+H1(a1,a6)+H1(a1,a7)+H1(a1,a8)+H1(a1,a9)+H1(a1,a10)+H1(a1,a11)+H1(a1,a12)+H1(a1,a13)+H1(a1,a14)+H1(a1,a15)+H1(a1,a16)+H1(a1,a17)+H1(a1,a18)+H1(a1,a19)+H1(a1,a20);\n</code></pre>\n\n<p>Here's the bad news: You're going to have to write more code in C++ and use less direct paths compared to how you write in Python. When you are more familiar with the language, its idioms, etc, the paths seem more obvious and natural, but coming from Python, stuff is often going to seem backwards.</p>\n\n<p>You basically have to provide a lot more detail to the system, specificity is the cost of performance.</p>\n\n<p>For example, you might want to consider putting your \"a\"s into a <code>std::vector</code> so that you can say things like:</p>\n\n<pre><code>cx_mat H11;\nfor (auto it = as.begin() + 1; it != as.end() - 1; ++it) {\n    H11 += H1(a1, *it); // (a1,a2) ... (a1, a20)\n}\n</code></pre>\n\n<p>You could refactor your kron nesting like this:</p>\n\n<pre><code>cx_mat tens(const cx_mat&amp; background, size_t posn, const cx_mat&amp; foreground, size_t width)\n{\n    std::vector&lt;cx_mat*&gt; mats;\n    mats.resize(width);\n    std::fill(mats.begin(), mats.end(), &amp;background);\n    mats[posn] = &amp;foreground;\n    cx_mat accum = *mats[0];\n    for (size_t i = 1; i &lt; width; ++i) {\n        accum = kron(accum, *mats[i]);\n    }\n    return accum;\n}\n\ncx_mat a1 = tens(gg, 0, ee, 21);\ncx_mat a2 = tens(gg, 1, ee, 21);\ncx_mat a3 = tens(gg, 2, ee, 21);\n...\n</code></pre>\n\n<p><code>const cx_mat&amp;</code> says to pass the value by reference, I don't know whether <code>cx_mat</code> is a trivial object or whether passing it by value as you are is expensive (pass by value requires a deep copy).</p>\n\n<p>Or you could write it like this:</p>\n\n<pre><code>void tens(cx_mat&amp; into, cx_mat&amp; background, size_t posn, cx_mat&amp; foreground, size_t width)\n{\n    std::vector&lt;cx_mat*&gt; mats;\n    mats.resize(width);\n    std::fill(mats.begin(), mats.end(), &amp;background);\n    mats[posn] = &amp;foreground;\n    into = *mats[0];\n    for (size_t i = 1; i &lt; width; ++i) {\n        accum = kron(accum, *mats[i]);\n    }\n}\n\nenum { Width = 21 };\nstd::vector&lt;mat&gt; amats;\namats.reserve(Width);\nfor (size_t i = 0; i &lt; Width; ++i) {\n    tens(amats[i], gg, i, ee, Width);\n}\n</code></pre>\n\n<p>Or you could use C++11 templates:</p>\n\n<pre><code>cx_mat tens(const cx_mat&amp; lhs, const cx_mat&amp; rhs)\n{\n    return kron(lhs, rhs);\n}\n\ntemplate&lt;typename Args...&gt;\ncx_mat tens(const cx_mat&amp; lhs, const cx_mat&amp; rhs, Args&amp;&amp;... rest)\n{\n    return tens(kron(lhs, rhs), std::forward&lt;Args&gt;(rest)...);\n}\n\ncx_mat a1 = tens(ee, gg, gg, gg, gg, gg, gg, gg, gg, gg, gg, gg, gg, gg, gg, gg, gg, gg, gg, gg, gg);\n</code></pre>\n\n<p>But that's my least favorite of the options. Note: the elipsis (...) are not me leaving stuff out, that's actual C++11 variadic template syntax: see <a href=\"http://ideone.com/VgfmVB\" rel=\"nofollow\">http://ideone.com/VgfmVB</a></p>\n\n<p>I don't know that the above code examples solve your problem or which is preferable in your case, but I'm hoping that between the two I've equipped you to make progress.</p>\n"}], "owner": {"reputation": 142, "user_id": 3109979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/35a9a13ebda2729086f4bdc9d6a8772a?s=128&d=identicon&r=PG&f=1", "display_name": "Haj Nasser", "link": "https://stackoverflow.com/users/3109979/haj-nasser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1431, "favorite_count": 0, "accepted_answer_id": 30763615, "answer_count": 1, "score": 0, "last_activity_date": 1433958581, "creation_date": 1433954518, "question_id": 30762396, "link": "https://stackoverflow.com/questions/30762396/memory-error-in-c-armadillo", "title": "Memory error in c++ (armadillo)", "body": "<p>I wanted to solve a kind of ordinary differential equation (master equation) and I wrote the following program in c++ by help of armadillo:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;armadillo&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\nusing namespace arma;\n\n\ncx_mat tens( cx_mat a1,cx_mat a2,cx_mat a3,cx_mat a4,cx_mat a5,cx_mat \na6,cx_mat a7,cx_mat a8,cx_mat a9,cx_mat a10,cx_mat a11,cx_mata12,cx_mat a13,cx_mat a14,cx_mat a15,cx_mat a16,cx_mat a17,cx_mat a18,cx_mat a19,cx_mat a20,cx_mat a21)\n{return kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(kron(a1,a2),a3),a4),a5),a6),a7),a8),a9),a10),a11),a12),a13),a14),a15),a16),a17),a18),a19),a20),a21);}\n\n\ncx_mat ii(2,2,fill::eye);// make a 2*2 identify cx_matrix\n\n\ncx_mat ee = ii.col(0); // extract a column vector\n\ncx_mat gg = ii.col(1);\n\ncx_mat a1 =tens(ee,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a2 =tens(gg,ee,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a3 =tens(gg,gg,ee,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a4 =tens(gg,gg,gg,ee,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a5 =tens(gg,gg,gg,gg,ee,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a6 =tens(gg,gg,gg,gg,gg,ee,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a7 =tens(gg,gg,gg,gg,gg,gg,ee,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a8 =tens(gg,gg,gg,gg,gg,gg,gg,ee,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a9 =tens(gg,gg,gg,gg,gg,gg,gg,gg,ee,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a10=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,ee,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a11=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,ee,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a12=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,ee,gg,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a13=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,ee,gg,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a14=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,ee,gg,gg,gg,gg,gg,gg,gg);\ncx_mat a15=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,ee,gg,gg,gg,gg,gg,gg);\ncx_mat a16=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,ee,gg,gg,gg,gg,gg);\ncx_mat a17=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,ee,gg,gg,gg,gg);\ncx_mat a18=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,ee,gg,gg,gg);\ncx_mat a19=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,ee,gg,gg);\ncx_mat a20=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,ee,gg);\ncx_mat a21=tens(gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,gg,ee);\n\n\n\ncx_mat sink=a21*a20.t();\n\n\ncx_mat H0(cx_mat a){\nreturn a*a.t();}\n\n\ncx_mat H1(cx_mat a,cx_mat b){\nreturn a*b.t()+b*a.t();}\n\n\ncx_mat H00=H0(a1)+H0(a2)+H0(a3)+H0(a4)+H0(a5)+H0(a6)+H0(a7);\n\ncx_mat H11=H1(a1,a2)+H1(a1,a3)+H1(a1,a4)+H1(a1,a5)+H1(a1,a6)+H1(a1,a7)+H1(a1,a8)+H1(a1,a9)+H1(a1,a10)+H1(a1,a11)+H1(a1,a12)+H1(a1,a13)+H1(a1,a14)+H1(a1,a15)+H1(a1,a16)+H1(a1,a17)+H1(a1,a18)+H1(a1,a19)+H1(a1,a20);\n\ncx_mat H=H00+H11;//system Hamiltonian\n\n\ncx_mat rhot(float t,cx_mat y){ \nreturn complex&lt;double&gt;(0, 1)*(-H*y+y*H)+0.5*(2*sink*y*sink.t()-sink.t()*sink*y-y*sink.t()*sink);}//Master equation\n\n\n\nint rk4(cx_mat y,float dt,float tmax)//Runge kutta 4th order\n{float t = 0.;cx_mat ydot1, ydot2, ydot3, ydot4;\n\n  while (t &lt; tmax)\n  {\n  ydot1 = rhot(t, y);\n  ydot2 = rhot(t+0.5*dt, y+0.5*dt*ydot1);\n  ydot3 = rhot(t+0.5*dt, y+0.5*dt*ydot2);\n  ydot4 = rhot(t+dt, y+dt*ydot3);\n  cout&lt;&lt;t&lt;&lt; real(a21.t()*y*a21) ;\n\n  y=y+ (dt/6.0)*(ydot1 + 2.0*ydot2 + 2.0*ydot3 + ydot4);\n  t=t+ dt;\n  }\n\nreturn 0;\n}\n\n\nint main()\n  {\n  rk4(a1*a1.t(),0.01,40.);\n return 0;\n  }\n</code></pre>\n\n<p>I run this program by typying the following comment on the Ubuntu terminal:</p>\n\n<pre><code> g++ -std=c++0x psinkt.cpp -o ./psinkt.out -O3 -march=native -larmadillo\n</code></pre>\n\n<p>but I encountered to the following memory error:</p>\n\n<pre><code>error: arma::memory::acquire(): out of memory\n\nterminate called after throwing an instance of 'std::bad_alloc'\n  what():  std::bad_alloc\nAborted (core dumped)\n</code></pre>\n\n<p>Generally, is there a way to solve such a problem? if yes, please tell me even the key word ! \nI really need to solve the problem.</p>\n"}, {"tags": ["c++", "c", "eclipse"], "comments": [{"owner": {"reputation": 9260, "user_id": 1059549, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NS6Vt.jpg?s=128&g=1", "display_name": "Dory Zidon", "link": "https://stackoverflow.com/users/1059549/dory-zidon"}, "edited": false, "score": 1, "creation_date": 1433954525, "post_id": 30762336, "comment_id": 49577329, "body": "maybe make the c into a shared library / dll?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 5, "creation_date": 1433954583, "post_id": 30762336, "comment_id": 49577365, "body": "Compile C code in C mode, then combine C and C++ at link time. If you use gcc, you can add a compiler option <code>-std=C99</code> or equivalent to force some source files be compiled as in C99 mode."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 3, "creation_date": 1433954636, "post_id": 30762336, "comment_id": 49577404, "body": "Nested functions aren&#39;t part of C either. That&#39;s a gcc extension (and insane)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1433954695, "post_id": 30762336, "comment_id": 49577440, "body": "related: <a href=\"http://stackoverflow.com/questions/5430688/compiling-c-and-c-files-together-using-gcc\">Compiling C and C++ files together using GCC</a>"}, {"owner": {"reputation": 21, "user_id": 4995755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e479ef4a36c0fa6deae1a145a6cd0e?s=128&d=identicon&r=PG&f=1", "display_name": "Frederic Loge", "link": "https://stackoverflow.com/users/4995755/frederic-loge"}, "edited": false, "score": 0, "creation_date": 1434029991, "post_id": 30762336, "comment_id": 49614880, "body": "I did indicate that the c program in the target_link_libraries(...) part. I actually did not need to do the compiling myself, CMakeLists knew how to handle the two seperate parts ... For some reason it works know, and the only think I am sure I&#39;ve changed is that the main function (for the C code) is in a .c file and not a .h file. The thing is, I do not call this function in my c++ code (otherwise I&#39;d have two mains) ... So I do not how it can work ... Thanks for your help guys !!"}], "owner": {"reputation": 21, "user_id": 4995755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1e479ef4a36c0fa6deae1a145a6cd0e?s=128&d=identicon&r=PG&f=1", "display_name": "Frederic Loge", "link": "https://stackoverflow.com/users/4995755/frederic-loge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1543585788, "creation_date": 1433954290, "question_id": 30762336, "link": "https://stackoverflow.com/questions/30762336/c-and-c-compatibility", "title": "c and c++ compatibility", "body": "<p>I have downloaded code written in C, I've written a CMakeLists.txt to access it through Eclipse and it works fine and compiles.</p>\n\n<p>My personal code is written in C++. I want to call the C code from it, and I've also created the CMakeLists.txt that takes into account where the C code is.</p>\n\n<p>When I build my project there's no problem, as long as I don't do the following instruction :</p>\n\n<hr>\n\n<p>// In one of my project's .cpp :</p>\n\n<pre><code>#ifdef __cplusplus\n   extern \"C\" {\n#endif\n   #include \"C_header_file_I_need.h\"\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>// Core of the .cpp</p>\n\n<hr>\n\n<p>The errors given tell me that the program is attempting to compile the C code with the C++ compiler and therefore :</p>\n\n<ul>\n<li><p>nested functions</p></li>\n<li><p>void*</p></li>\n<li>...</li>\n</ul>\n\n<p>are not accepted by the compiler.</p>\n\n<p>I've considered adapting the C program, but it is a lot of work ...</p>\n\n<p>Since it's one compiler per CMakeLists, I was wondering how I could be able to compile the two parts of my project independently and the link them, by using CMakeLists (because I need it to work on any platform).</p>\n\n<p>Thank you for you help, and do not hesitate to tell me what file/log you would need to look at.</p>\n"}, {"tags": ["c++", "pipe", "gnuplot"], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 3398329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3191b4422b8f38e9b29d2fd1a175138?s=128&d=identicon&r=PG&f=1", "display_name": "PlushBeaver", "link": "https://stackoverflow.com/users/3398329/plushbeaver"}, "is_accepted": true, "score": 3, "last_activity_date": 1433953664, "last_edit_date": 1433953664, "creation_date": 1433953583, "answer_id": 30762091, "question_id": 30762001, "link": "https://stackoverflow.com/questions/30762001/c-gnuplot-pipe-input-from-c-defined-variables/30762091#30762091", "title": "C++ Gnuplot pipe input from C++ defined variables", "body": "<p>The thing you want to do is exactly what <code>fprintf()</code> is for, see the <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow\">manual</a>. Here is an example:</p>\n\n<pre><code>int maximum = 500; // taken from user input maybe\nfprintf(gnuplotPipe, \"max=%d\\n\", maximum);\n</code></pre>\n\n<p>You're currently using <code>fprintf()</code> in a way of more simple <code>fputs()</code>.</p>\n"}], "owner": {"reputation": 201, "user_id": 4974824, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/615f1a2058dd95edef0957f1aa9c787e?s=128&d=identicon&r=PG&f=1", "display_name": "khfrekek", "link": "https://stackoverflow.com/users/4974824/khfrekek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2589, "favorite_count": 1, "accepted_answer_id": 30762091, "answer_count": 1, "score": 2, "last_activity_date": 1433953664, "creation_date": 1433953329, "question_id": 30762001, "link": "https://stackoverflow.com/questions/30762001/c-gnuplot-pipe-input-from-c-defined-variables", "title": "C++ Gnuplot pipe input from C++ defined variables", "body": "<p>I am using C++ to pipe commands to gnuplot using the following code:</p>\n\n<pre><code>FILE *gnuplotPipe = popen(\"gnuplot -persist\", \"w\");  // Open a pipe to gnuplot\n\nif (gnuplotPipe) {   // If gnuplot is found\n\n  fprintf(gnuplotPipe, \"reset\\n\"); //gnuplot commands\n  fprintf(gnuplotPipe, \"n='500'\\n\");\n  fprintf(gnuplotPipe, \"max='1500'\\n\");\n  fprintf(gnuplotPipe, \"min='-1500\\n\");\n  fprintf(gnuplotPipe, \"width=(max-min)/n\\n\");\n  fprintf(gnuplotPipe, \"hist(x,width)=width*floor(x/width)+width/2.0\\n\");\n  fprintf(gnuplotPipe, \"set term png #output terminal and file\\n\");\n  fprintf(gnuplotPipe, \"set output 'Observable_Histogram.png'\\n\");\n  fprintf(gnuplotPipe, \"set xrange [min:max]\\n\");\n  fprintf(gnuplotPipe, \"set yrange [0:]\\n\");\n  fprintf(gnuplotPipe, \"set offset graph 0.05,0.05,0.05,0.0\\n\");\n  fprintf(gnuplotPipe, \"set xtics min,(max-min)/5,max\\n\");\n  fprintf(gnuplotPipe, \"set boxwidth width*0.9\\n\");\n  fprintf(gnuplotPipe, \"set style fill solid 0.5\\n\");\n  fprintf(gnuplotPipe, \"set tics out nomirror\\n\");\n  fprintf(gnuplotPipe, \"set xlabel 'Observable'\\n\");\n  fprintf(gnuplotPipe, \"set ylabel 'Counts'\\n\");\n  fprintf(gnuplotPipe, \"set title 'Observable'\\n\");\n  fprintf(gnuplotPipe, \"plot 'output.txt' u (hist($1,width)):(1.0) smooth freq w boxes lc rgb'green' notitle\\n\");\n\n  fflush(gnuplotPipe); //flush pipe\n\n  fprintf(gnuplotPipe,\"exit \\n\");   // exit gnuplot\n  pclose(gnuplotPipe);    //close pipe\n\n}\n</code></pre>\n\n<p>This works perfectly, however I want it to be able to take input from previously defined variables in c++.<br>\nFor example, instead of straight up defining n='500', min='-1500', max='1500', etc., I want to use variables that I already defined (from user input) earlier in the code, i.e. int n, int max, int min, string title, string xlabel, etc.</p>\n\n<p>I have tried everything I can think of, such as:</p>\n\n<pre><code>fprintf(gnuplotPipe, \"max=\");\nfprintf(gnuplotPipe, 'max');\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>fprintf(gnuplotPipe, \"max=\" 'max' \"\\n\");\n</code></pre>\n\n<p>and nothing works unfortunately.</p>\n\n<p>Does anyone have any ideas on how I could get this working?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1433952415, "post_id": 30761625, "comment_id": 49575986, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/347441/erasing-elements-from-a-vector\">Erasing elements from a vector</a>"}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1433952647, "post_id": 30761625, "comment_id": 49576152, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4645705/vector-erase-iterator\">vector erase iterator</a>"}, {"owner": {"reputation": 5608, "user_id": 310971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c3218260b97c83b89427c798c0a989?s=128&d=identicon&r=PG", "display_name": "DumbCoder", "link": "https://stackoverflow.com/users/310971/dumbcoder"}, "edited": false, "score": 0, "creation_date": 1433952719, "post_id": 30761625, "comment_id": 49576195, "body": "Minor nitpick shouldn&#39;t <code>std::vector&lt;int&gt; foo(std::vector&lt;int&gt; v)</code> be <code>std::vector&lt;int&gt; foo(std::vector&lt;int&gt;&amp; v)</code>"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1433953586, "post_id": 30761625, "comment_id": 49576742, "body": "This is not a duplicate of any of the questions linked above, OP is trying to <a href=\"http://en.cppreference.com/w/cpp/container/vector/clear\" rel=\"nofollow noreferrer\"><code>clear</code></a> the vector, not erase a few elements. @St.Antario, learn how to use a debugger, it&#39;s trivial to figure out what&#39;s going on if you use one."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1433960371, "post_id": 30761625, "comment_id": 49580970, "body": "You have a function <code>foo</code> that deletes every other element of a vector, so you end up with a vector that is half the size of what you started with.  What&#39;s the question?"}], "answers": [{"comments": [{"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 3, "creation_date": 1433952538, "post_id": 30761686, "comment_id": 49576073, "body": "Which is why one should always use iterators instead of indexes, even when working with vectors"}, {"owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "reply_to_user": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1433952620, "post_id": 30761686, "comment_id": 49576131, "body": "@PanagiotisKanavos What do you mean should use iterators?"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1433960172, "post_id": 30761686, "comment_id": 49580838, "body": "@PanagiotisKanavos: How do iterators help?  erasing from a vector invalidates all later iterators referring to elements of the vector, so you can easily have dangling references that will cause undefined behavior when you try to use them.  At least with indexes, you know you can get at that element of the vector, without undefined behavior, even if it was a different element from what you were expecting..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1433962785, "post_id": 30761686, "comment_id": 49582432, "body": "@ChrisDodd the iterator returned by erase is a valid iterator and you can capture that and use it to delete the next element.  This is well defined behavior."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1433962947, "post_id": 30761686, "comment_id": 49582517, "body": "@NathanOliver: Yes, but you have to go out of your way to use the iterator returned by erase, and not just increment the iterator you called erase on (as the OP&#39;s code does)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 1, "creation_date": 1433963170, "post_id": 30761686, "comment_id": 49582651, "body": "@ChrisDodd I wouldn&#39;t really call this out of the way <code>while (it != v.end()) { it = v.erase(it); }</code>"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1433964862, "post_id": 30761686, "comment_id": 49583568, "body": "@NathanOliver: That erases everything in the vector, rather than every other element.  The equivalent to the OPs code is <code>for (auto i = v.begin(); i &lt; v.end(); i++) v.erase(i);</code> -- which is undefined behavior, though it is likely that it will work on most implementations."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1433965022, "post_id": 30761686, "comment_id": 49583647, "body": "@ChrisDodd the OP wants to erase everything not every other thing.  <code>&#39;m tried to erase all elements from a vector.</code>"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1433965814, "post_id": 30761686, "comment_id": 49584077, "body": "@NathanOliver: The point is that blindly saying &#39;always use iterators, not indexes&#39; is counterproductive -- it obscures the actual problem and likely leads to more problems than it solves."}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1434007096, "post_id": 30761686, "comment_id": 49598718, "body": "@ChrisDodd if you noticed, the OP mixed iterators and indexes, thinking <code>begin()</code> and <code>end()</code> are indexes. If one is going to use STL containers, one should learn and use STL&#39;s constructs for looping"}], "tags": [], "owner": {"reputation": 4944, "user_id": 4877767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RO6mn.png?s=128&g=1", "display_name": "marom", "link": "https://stackoverflow.com/users/4877767/marom"}, "is_accepted": true, "score": 4, "last_activity_date": 1433952459, "creation_date": 1433952459, "answer_id": 30761686, "question_id": 30761625, "link": "https://stackoverflow.com/questions/30761625/erasing-from-vector/30761686#30761686", "title": "Erasing from vector", "body": "<p>After third erasure you have i == 3 and v.size() == 3 and for exits</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1433952718, "creation_date": 1433952718, "answer_id": 30761794, "question_id": 30761625, "link": "https://stackoverflow.com/questions/30761625/erasing-from-vector/30761794#30761794", "title": "Erasing from vector", "body": "<p>To remove all elements from a vector use <a href=\"http://en.cppreference.com/w/cpp/container/vector/clear\" rel=\"nofollow\"><code>std::vector::clear</code></a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main()\n{\n    std::vector&lt;int&gt; v(10);\n    cout &lt;&lt; v.size() &lt;&lt; endl;\n    v.clear();\n    cout &lt;&lt; v.size();\n    cin.get();\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4742, "user_id": 3154588, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c8ef4736f3db9e55c6ce1f36a4eaf949?s=128&d=identicon&r=PG&f=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/3154588/phil"}, "is_accepted": false, "score": 1, "last_activity_date": 1433964867, "last_edit_date": 1433964867, "creation_date": 1433952722, "answer_id": 30761797, "question_id": 30761625, "link": "https://stackoverflow.com/questions/30761625/erasing-from-vector/30761797#30761797", "title": "Erasing from vector", "body": "<p>Because after the 3 erasures (when Size = 4), <code>v.size()</code> is 3 and <code>i</code> is 3, so <code>i &lt; v.size()</code> is no longer true and you break out of the for loop, <code>for(int i = 0; i &lt; v.size(); i++)</code> and return from the function.</p>\n\n<p>If you just want to erase all elements of a vector, try <code>v.clear()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1433953922, "last_edit_date": 1433953922, "creation_date": 1433953425, "answer_id": 30762036, "question_id": 30761625, "link": "https://stackoverflow.com/questions/30761625/erasing-from-vector/30762036#30762036", "title": "Erasing from vector", "body": "<p>You can understand the problem easy if you consider this abstract loop</p>\n\n<pre><code>size_t N = v.size();\n\nsize_t i = 0;\nsize_t j = N;\n\n\nwhile ( i &lt; j )\n{\n   i++;\n   j--;\n}\n</code></pre>\n\n<p>Thus you will delete exactly <code>( N + 1 ) / 2</code> elements in the vector or more precisely <code>( v.size() + 1 ) / 2</code> elements .:)</p>\n\n<p>To remove all elements in the vector you could use member function <code>clear()</code>.</p>\n\n<p>if you want to remove elements of the vector selectively you could write</p>\n\n<pre><code>for ( auto it = v.begin(); it != v.end(); )\n{\n    if ( need_to_delete ) it = v.erase( it );\n    else ++it;\n}\n</code></pre>\n\n<p>where <code>need_to_delete</code> is any condition you want to use.</p>\n"}, {"tags": [], "owner": {"reputation": 177, "user_id": 4192965, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100000322580538/picture?type=large", "display_name": "Sagar Kar", "link": "https://stackoverflow.com/users/4192965/sagar-kar"}, "is_accepted": false, "score": 1, "last_activity_date": 1433953468, "creation_date": 1433953468, "answer_id": 30762047, "question_id": 30761625, "link": "https://stackoverflow.com/questions/30761625/erasing-from-vector/30762047#30762047", "title": "Erasing from vector", "body": "<p>When the 1st element is deleted <em>v.size()</em> is also updated.So when it reaches size 3 its size is also 3 so it exits the for loop.</p>\n\n<p><strong>Note:</strong> try not to use the update condition (the middle condition of  <em>for loop</em> ) as something that changes as the loop proceed unless you are sure about doing it.</p>\n"}, {"tags": [], "owner": {"reputation": 1876, "user_id": 2209511, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/6BtmQ.png?s=128&g=1", "display_name": "aslg", "link": "https://stackoverflow.com/users/2209511/aslg"}, "is_accepted": false, "score": 3, "last_activity_date": 1433954267, "last_edit_date": 1433954267, "creation_date": 1433953857, "answer_id": 30762193, "question_id": 30761625, "link": "https://stackoverflow.com/questions/30761625/erasing-from-vector/30762193#30762193", "title": "Erasing from vector", "body": "<p>You should learn to use the appropriate loop for what you want to achieve, or simply use them appropriately.\nYou can use a for loop when you know in advance how many iterations you need to do, but be careful with how you use the index.</p>\n\n<p>What you're doing inside the cycle is changing the size of the vector, so every iteration v.size() becomes smaller. When i == 3, the vector size has been reduced to 3 and the loop ends earlier than you expected.</p>\n\n<p>There are some alternatives to what you want to achieve,</p>\n\n<pre><code>// Store the size of the array so it doesn't change midway in the loop\nfor(int i = 0, iEnd = v.size(); i &lt; iEnd; i++)\n{\n    std::cout &lt;&lt; v.size() &lt;&lt; std::endl;\n    //v.erase( v.begin() );\n    v.pop_back(); // pop_back is quicker but erases from the end\n}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>// More appropriate, since you don't even need to know the size\nwhile ( !v.empty() ) {\n    std::cout &lt;&lt; v.size() &lt;&lt; std::endl;\n    v.pop_back();\n}\n</code></pre>\n\n<p>In these loops I assume that you don't care about any specific elements and just want to erase them. If you do care about specific elements other answers already mention that.</p>\n\n<p>But really you should be using</p>\n\n<pre><code>v.clear();\n</code></pre>\n\n<p>because the STL already does that for you.</p>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 1, "last_activity_date": 1433965992, "last_edit_date": 1433965992, "creation_date": 1433955047, "answer_id": 30762572, "question_id": 30761625, "link": "https://stackoverflow.com/questions/30761625/erasing-from-vector/30762572#30762572", "title": "Erasing from vector", "body": "<p>You may be aware of the concept of \"iterator invalidation\", and you are using <code>size_t i</code> to avoid this. Unfortunately, what you're using is <em>still</em> essentially an iterator and erasing an element from a vector invalidates <em>all</em> iterators not just the <code>::iterator</code> typed ones :).</p>\n\n<p><code>invalidate</code> is a carefully chosen term that has subtle nuances. It implies that the iterators didn't stop working, and that you may sometimes find they still work. But you shouldn't trust them to.</p>\n\n<p>So <code>invalidate</code> doesn't mean they are broken or wrong, it means that you should reconsider them. For example, if you have captured <code>vec.begin()</code> and you have caused the vector to relocate it's data, the value of <code>vec.begin()</code> may no-longer be valid. It typically isn't, but <em>you've been warned</em> :)</p>\n\n<p><code>std::vector</code> is implemented over a simple contiguous array:</p>\n\n<pre><code>[  0  ][  1  ][  2  ][  3  ]\n</code></pre>\n\n<p>When you erase an element, the object it contains is destructed and then all of the elements to the right are moved left, physically resituated in memory.</p>\n\n<pre><code>[  0  ][~~~~~][  2  ][  3  ] sz=4\n[  0  ][  2  &lt;&lt;  2  ][  3  ] sz=4\n[  0  ][  2  ][  3  &lt;&lt;  3  ] sz=4\n[  0  ][  2  ][  3  ][?????] sz=4\n</code></pre>\n\n<p>Then the vector reduces <code>size</code> by the count of elements removed, in this case 1:</p>\n\n<pre><code>[  0  ][  2  ][  3  ] sz=3\n</code></pre>\n\n<p>You can see that the overall process of <code>erase()</code>, then, is expensive when the objects are not simple or when the vector is large, but I'll come back to that.</p>\n\n<p>The problem with your implementation is that you increase <code>i</code>, and the size shrinks, so you wind up deleting every second element.</p>\n\n<pre><code>  i=0\n[  0  ][  1  ][  2  ][  3  ] sz=4\n\nerase(i);\n  i=0\n[~~~~~][  1  ][  2  ][  3  ] sz=3\n[  1  &lt;&lt;  1  ][  2  ][  3  ] sz=3\n[  1  ][  2  &lt;&lt;  2  ][  3  ] sz=3\n[  1  ][  2  ][  3  &lt;&lt;  3  ] sz=3\n[  1  ][  2  ][  3  ][?????] sz=3\n[  1  ][  2  ][  3  ] sz=3\n  i=0\n\ni++;\n         i=1\n[  1  ][  2  ][  3  ] sz=3\n\nerase(i);\n         i=1\n[  1  ][~~~~~][  3  ] sz=3\n[  1  ][  3  &lt;&lt;  3  ] sz=3\n[  1  ][  3  ][?????] sz=3\n[  1  ][  3  ] sz=2\n         i=1\n\ni++;\n               i=2\n[  1  ][  3  ] sz=2\n\nbreak;\n</code></pre>\n\n<p><code>std::vector</code> provides <code>clear</code> to empty an array, but if you are interested in understanding how to perform such an operation yourself:</p>\n\n<p>Option 1: delete from back</p>\n\n<pre><code>while (!vec.empty())\n    vec.pop_back();\n</code></pre>\n\n<p>What this does is destruct the last element and then reduce size. It's very cheap.</p>\n\n<pre><code>[  0  ][  1  ][  2  ][  3  ] sz=4\npop_back();\n[  0  ][  1  ][  2  ][~~~~~] sz=4\n[  0  ][  1  ][  2  ] sz=3\n</code></pre>\n\n<p>Option 2: Erase a range of elements</p>\n\n<pre><code>std::vector&lt;int&gt; vec { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\nvec.erase(vec.begin() + 2, vec.begin() + 5);\nvec.erase(vec.begin(), vec.end());\n</code></pre>\n\n<p>Option 3: Shrink the array:</p>\n\n<pre><code>vec.resize(0);\n</code></pre>\n\n<p>Option 4: Clear</p>\n\n<p>This is the preferred and normal way to empty a vector</p>\n\n<pre><code>vec.clear();\n</code></pre>\n"}], "owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 30761686, "answer_count": 7, "score": -2, "last_activity_date": 1433965992, "creation_date": 1433952315, "question_id": 30761625, "link": "https://stackoverflow.com/questions/30761625/erasing-from-vector", "title": "Erasing from vector", "body": "<p>I'm tried to erase all elements from a vector. In fact, I wrote that:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;vector&gt;\n\nstd::vector&lt;int&gt; foo(std::vector&lt;int&gt; v)\n{\n    std::vector&lt;int&gt; result;\n    std::cout &lt;&lt; \"Initial size = \" &lt;&lt; v.size() &lt;&lt; std::endl;\n    for(int i = 0; i &lt; v.size(); i++)\n    {\n        std::cout &lt;&lt; \"Size = \" &lt;&lt; v.size() &lt;&lt; std::endl;\n        v.erase(v.begin() + i);\n    }\n    return result;\n}\n\nint main()\n{\n    int a[] = {1 ,2, 5, 8, 213, 2};\n    std::vector&lt;int&gt; v;\n    v.assign(a, a+6);\n    foo(v);\n}\n</code></pre>\n\n<p><strong><a href=\"http://coliru.stacked-crooked.com/a/f71aa4995882688e\" rel=\"nofollow\">DEMO</a></strong></p>\n\n<p>Why does that program prints</p>\n\n<pre><code>Initial size = 6\nSize = 6\nSize = 5\nSize = 4\n</code></pre>\n\n<p>Where is </p>\n\n<pre><code>Size = 3\nSize = 2\nSize = 1\n</code></pre>\n\n<p>?</p>\n"}, {"tags": ["c++", "filestream"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1433952303, "post_id": 30761464, "comment_id": 49575921, "body": "So you don&#39;t want to use: <code>file&lt;&lt;sec.count() &lt;&lt; (counter++ % 30 == 0 ? &quot;\\n&quot; : &quot;;&quot;)</code>"}, {"owner": {"reputation": 1005, "user_id": 3568427, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/68aee312d3d16c2b88701a084460f425?s=128&d=identicon&r=PG&f=1", "display_name": "WaeCo", "link": "https://stackoverflow.com/users/3568427/waeco"}, "edited": false, "score": 0, "creation_date": 1433952501, "post_id": 30761464, "comment_id": 49576049, "body": "instead of using a <code>;</code> always use <code>\\n</code> and then use <code>tail -n 1 MyFile.txt</code> to print the last line"}, {"owner": {"reputation": 33, "user_id": 4965756, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4e02c88fdfb82acac38d755c322ce036?s=128&d=identicon&r=PG&f=1", "display_name": "predictive", "link": "https://stackoverflow.com/users/4965756/predictive"}, "reply_to_user": {"reputation": 1005, "user_id": 3568427, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/68aee312d3d16c2b88701a084460f425?s=128&d=identicon&r=PG&f=1", "display_name": "WaeCo", "link": "https://stackoverflow.com/users/3568427/waeco"}, "edited": false, "score": 0, "creation_date": 1433964984, "post_id": 30761464, "comment_id": 49583626, "body": "@WaeCo I would like to create a csv file , that s why I am trying to display 30 results separated with a comma . and trying to make the 30+X result in the second line and so on ."}, {"owner": {"reputation": 33, "user_id": 4965756, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4e02c88fdfb82acac38d755c322ce036?s=128&d=identicon&r=PG&f=1", "display_name": "predictive", "link": "https://stackoverflow.com/users/4965756/predictive"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1433965331, "post_id": 30761464, "comment_id": 49583805, "body": "@NathanOliver doing a file&lt;&lt;sec.count() &lt;&lt; (counter++ % 30 == 0 ? &quot;\\n&quot; :  &quot;;&quot;) will increase the duration of the execution , and I would like to test only the performance of the program . I d ratther  use a script or command line to copy values that overshoot a certain threshold  to new line .so this will not affect the duration time stored in the file"}], "answers": [{"tags": [], "owner": {"reputation": 1005, "user_id": 3568427, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/68aee312d3d16c2b88701a084460f425?s=128&d=identicon&r=PG&f=1", "display_name": "WaeCo", "link": "https://stackoverflow.com/users/3568427/waeco"}, "is_accepted": false, "score": 0, "last_activity_date": 1434203722, "creation_date": 1434203722, "answer_id": 30819442, "question_id": 30761464, "link": "https://stackoverflow.com/questions/30761464/limited-value-in-a-file-output/30819442#30819442", "title": "limited value in a File output", "body": "<p>You can use awk.</p>\n\n<pre><code>awk '{ gsub(/([0-9]+(.[0-9]*)?;){30}/, \"&amp;\\n\"); print }' MyFile.txt\n</code></pre>\n\n<p>This should insert a <code>\\n</code> after each 30th <code>;</code></p>\n"}], "owner": {"reputation": 33, "user_id": 4965756, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4e02c88fdfb82acac38d755c322ce036?s=128&d=identicon&r=PG&f=1", "display_name": "predictive", "link": "https://stackoverflow.com/users/4965756/predictive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1434203722, "creation_date": 1433951863, "last_edit_date": 1433965548, "question_id": 30761464, "link": "https://stackoverflow.com/questions/30761464/limited-value-in-a-file-output", "title": "limited value in a File output", "body": "<p>I have a program that returns the execution time , the output of each run is diplayed in a file in the same row .</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;math&gt;\n#include &lt;boost&gt;\n\nusing namespace std;\n\nint main() {\n\nstd::ofstream file(\"MyFile.txt\",std::ios_base::app);\n\nv2 = rand() % 100 + 1; // just to burn  some time \nstd::cout &lt;&lt; v2 ;    // just to burn  some time\n\n\nboost::chrono::duration&lt;double&gt; sec = boost::chrono::system_clock::now() - start;\n    file&lt;&lt;sec.count() &lt;&lt; \";\";\nfile.close();\n  return 0 ;\n}\n</code></pre>\n\n<p>After 4 run here is the output in the file  : </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>0.0190567;4.92035;11.0541;13.1457;\n</code></pre>\n\n\n\n<p>I would like that after 30 runs the 30'th  result must be displayed in a newline . without any added functions or loops that will affect the duration of the runtime .I think that there is other way to format an output file via awk sed . </p>\n"}, {"tags": ["python", "c++", "deep-learning", "caffe"], "answers": [{"comments": [{"owner": {"reputation": 4739, "user_id": 1348187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/dZMOO.jpg?s=128&g=1", "display_name": "Rafael Ruiz Mu&#241;oz", "link": "https://stackoverflow.com/users/1348187/rafael-ruiz-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1433956660, "post_id": 30763062, "comment_id": 49578679, "body": "I changed to 2 at the beginning. I&#39;m going to try to create the whole net and train it for 10.000 iterations with input_dim: 10 and will try again to do it. Let me tell you in a while"}, {"owner": {"reputation": 4721, "user_id": 773226, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789e556956dd28cb9e476b82bf69f9ae?s=128&d=identicon&r=PG", "display_name": "Anoop K. Prabhu", "link": "https://stackoverflow.com/users/773226/anoop-k-prabhu"}, "reply_to_user": {"reputation": 4739, "user_id": 1348187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/dZMOO.jpg?s=128&g=1", "display_name": "Rafael Ruiz Mu&#241;oz", "link": "https://stackoverflow.com/users/1348187/rafael-ruiz-mu%c3%b1oz"}, "edited": false, "score": 1, "creation_date": 1433957944, "post_id": 30763062, "comment_id": 49579433, "body": "change it to 1 and it should work without any training. The first dimension is the batch size, it has no relation to the training that you do."}, {"owner": {"reputation": 4739, "user_id": 1348187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/dZMOO.jpg?s=128&g=1", "display_name": "Rafael Ruiz Mu&#241;oz", "link": "https://stackoverflow.com/users/1348187/rafael-ruiz-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1433958007, "post_id": 30763062, "comment_id": 49579470, "body": "I had &quot;batch_size: 2&quot; on the val.prototxt and train.prototxt.... is that correct that I should set it as 1 ?"}, {"owner": {"reputation": 4739, "user_id": 1348187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/dZMOO.jpg?s=128&g=1", "display_name": "Rafael Ruiz Mu&#241;oz", "link": "https://stackoverflow.com/users/1348187/rafael-ruiz-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1433958292, "post_id": 30763062, "comment_id": 49579655, "body": "@Annop-K-Prabhu the same error happens, with 1, 2 or 10"}, {"owner": {"reputation": 4721, "user_id": 773226, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789e556956dd28cb9e476b82bf69f9ae?s=128&d=identicon&r=PG", "display_name": "Anoop K. Prabhu", "link": "https://stackoverflow.com/users/773226/anoop-k-prabhu"}, "reply_to_user": {"reputation": 4739, "user_id": 1348187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/dZMOO.jpg?s=128&g=1", "display_name": "Rafael Ruiz Mu&#241;oz", "link": "https://stackoverflow.com/users/1348187/rafael-ruiz-mu%c3%b1oz"}, "edited": false, "score": 1, "creation_date": 1433959798, "post_id": 30763062, "comment_id": 49580597, "body": "Batch size is to make use of multi-core. It has no other effect on the results of your training.Check the edited answer."}, {"owner": {"reputation": 4739, "user_id": 1348187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/dZMOO.jpg?s=128&g=1", "display_name": "Rafael Ruiz Mu&#241;oz", "link": "https://stackoverflow.com/users/1348187/rafael-ruiz-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1433960034, "post_id": 30763062, "comment_id": 49580752, "body": "just found this:   <code>const bool kReshape = false; target_blobs[j]-&gt;FromProto(source_layer.blobs(j), kReshape);</code>  I&#39;m going to change it and I&#39;ll let you know!"}], "tags": [], "owner": {"reputation": 4721, "user_id": 773226, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/789e556956dd28cb9e476b82bf69f9ae?s=128&d=identicon&r=PG", "display_name": "Anoop K. Prabhu", "link": "https://stackoverflow.com/users/773226/anoop-k-prabhu"}, "is_accepted": true, "score": 2, "last_activity_date": 1433959761, "last_edit_date": 1433959761, "creation_date": 1433956569, "answer_id": 30763062, "question_id": 30761433, "link": "https://stackoverflow.com/questions/30761433/caffe-check-failed-shapeequalsproto-shape-mismatch-reshape-not-set/30763062#30763062", "title": "[Caffe]: Check failed: ShapeEquals(proto) shape mismatch (reshape not set)", "body": "<p>Let me confirm whether the basic steps are correct.</p>\n\n<pre><code>input_dim: 10\ninput_dim: 3\ninput_dim: 64\ninput_dim: 64\n</code></pre>\n\n<p>Have you tried changing the first parameter to 1 as you are only passing a single image.</p>\n\n<p>The above mentioned error occurs when the dimensions of the top or bottom blobs are not correct. And there is no where that could go wrong other than the input blobs.</p>\n\n<p><strong>Edit 2:</strong></p>\n\n<p><code>ShapeEquals(proto) shape mismatch (reshape not set)</code> error message occurs when 'reshape' parameter is set to false for the <a href=\"https://github.com/BVLC/caffe/blob/master/src/caffe/blob.cpp#L455\" rel=\"nofollow\"><em>fromproto</em> function call</a>.</p>\n\n<p>I did a quick search for the fromproto function call within the library as shown <a href=\"https://github.com/BVLC/caffe/search?utf8=%E2%9C%93&amp;q=FromProto\" rel=\"nofollow\">here</a>. Other than 'CopyTrainedLayersFrom' function no other function actually set the above mentioned parameter as <code>false</code>.</p>\n\n<p>This is actually confusing. Two methods that I would suggest is:</p>\n\n<ol>\n<li>Check whether the caffe source code is updated from the repository.</li>\n<li>Try running the <em>test</em> portion of <em>caffe.bin</em> executable found in /build/tools/.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 304, "user_id": 1865831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f831fa10b440d8552ba37588f9a58a6?s=128&d=identicon&r=PG", "display_name": "Jasper Uijlings", "link": "https://stackoverflow.com/users/1865831/jasper-uijlings"}, "is_accepted": false, "score": 4, "last_activity_date": 1436201333, "creation_date": 1436201333, "answer_id": 31251378, "question_id": 30761433, "link": "https://stackoverflow.com/questions/30761433/caffe-check-failed-shapeequalsproto-shape-mismatch-reshape-not-set/31251378#31251378", "title": "[Caffe]: Check failed: ShapeEquals(proto) shape mismatch (reshape not set)", "body": "<p>I just had the same error. In my case my output parameters of the final layer were incorrect: Switching datasets, I changed the number of classes in the train.prototxt and failed to do so in test.prototxt (or deploy.prototxt). Correcting this mistake solved the problem for me.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 1754513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQ4Ce.jpg?s=128&g=1", "display_name": "ricardo_8990", "link": "https://stackoverflow.com/users/1754513/ricardo-8990"}, "is_accepted": false, "score": 1, "last_activity_date": 1441185549, "creation_date": 1441185549, "answer_id": 32349239, "question_id": 30761433, "link": "https://stackoverflow.com/questions/30761433/caffe-check-failed-shapeequalsproto-shape-mismatch-reshape-not-set/32349239#32349239", "title": "[Caffe]: Check failed: ShapeEquals(proto) shape mismatch (reshape not set)", "body": "<p>In my case, the size of the kernel in the second convolutional layer in my solver file differed from the one in the train file. Changing the size in the solver file solved the problem.</p>\n"}], "owner": {"reputation": 4739, "user_id": 1348187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/dZMOO.jpg?s=128&g=1", "display_name": "Rafael Ruiz Mu&#241;oz", "link": "https://stackoverflow.com/users/1348187/rafael-ruiz-mu%c3%b1oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6305, "favorite_count": 0, "accepted_answer_id": 30763062, "answer_count": 3, "score": 0, "last_activity_date": 1490029656, "creation_date": 1433951796, "last_edit_date": 1433959853, "question_id": 30761433, "link": "https://stackoverflow.com/questions/30761433/caffe-check-failed-shapeequalsproto-shape-mismatch-reshape-not-set", "title": "[Caffe]: Check failed: ShapeEquals(proto) shape mismatch (reshape not set)", "body": "<p>I have this error and I have tried to take a look in Internet but I got nothing clear.</p>\n\n<p>I trained my net with Caffe successfully with around 82% of accuracy.</p>\n\n<p>Now I'm trying to try it with an image through this code:</p>\n\n<p><code>python python/classify.py --model_def examples/imagenet/imagenet_deploy.prototxt --pretrained_model caffe_mycaffe_train_iter_10000.caffemodel --images_dim 64,64 data/mycaffe/testingset/cat1/113.png foo --mean_file data/mycaffe/mycaffe_train_mean.binaryproto</code></p>\n\n<p>yes, my images are 64x64, </p>\n\n<p>these are the last lines I'm getting:</p>\n\n<blockquote>\n  <p>I0610 15:33:44.868100 28657 net.cpp:194] conv3 does not need backward computation.\n  I0610 15:33:44.868110 28657 net.cpp:194] norm2 does not need backward computation.\n  I0610 15:33:44.868120 28657 net.cpp:194] pool2 does not need backward computation.\n  I0610 15:33:44.868130 28657 net.cpp:194] relu2 does not need backward computation.\n  I0610 15:33:44.868142 28657 net.cpp:194] conv2 does not need backward computation.\n  I0610 15:33:44.868152 28657 net.cpp:194] norm1 does not need backward computation.\n  I0610 15:33:44.868162 28657 net.cpp:194] pool1 does not need backward computation.\n  I0610 15:33:44.868173 28657 net.cpp:194] relu1 does not need backward computation.\n  I0610 15:33:44.868182 28657 net.cpp:194] conv1 does not need backward computation.\n  I0610 15:33:44.868192 28657 net.cpp:235] This network produces output fc8_pascal\n  I0610 15:33:44.868214 28657 net.cpp:482] Collecting Learning Rate and Weight Decay.\n  I0610 15:33:44.868238 28657 net.cpp:247] Network initialization done.\n  I0610 15:33:44.868249 28657 net.cpp:248] Memory required for data: 3136120\n  F0610 15:33:45.025965 28657 blob.cpp:458] Check failed: ShapeEquals(proto) shape mismatch (reshape not set)\n  <strong>* Check failure stack trace: *</strong>\n  Aborted (core dumped)</p>\n</blockquote>\n\n<p>I've tried to not setting the --mean_file and more things, but my shots are over. </p>\n\n<p>This is my imagenet_deploy.prototxt which I've modified in some parameters to debug, but didn't work anything.</p>\n\n<pre><code>name: \"MyCaffe\"\ninput: \"data\"\ninput_dim: 10\ninput_dim: 3\ninput_dim: 64\ninput_dim: 64\nlayer {\n  name: \"conv1\"\n  type: \"Convolution\"\n  bottom: \"data\"\n  top: \"conv1\"\n  convolution_param {\n    num_output: 64\n    kernel_size: 11\n    stride: 4\n  }\n}\nlayer {\n  name: \"relu1\"\n  type: \"ReLU\"\n  bottom: \"conv1\"\n  top: \"conv1\"\n}\nlayer {\n  name: \"pool1\"\n  type: \"Pooling\"\n  bottom: \"conv1\"\n  top: \"pool1\"\n  pooling_param {\n    pool: MAX\n    kernel_size: 3\n    stride: 2\n  }\n}\nlayer {\n  name: \"norm1\"\n  type: \"LRN\"\n  bottom: \"pool1\"\n  top: \"norm1\"\n  lrn_param {\n    local_size: 5\n    alpha: 0.0001\n    beta: 0.75\n  }\n}\nlayer {\n  name: \"conv2\"\n  type: \"Convolution\"\n  bottom: \"norm1\"\n  top: \"conv2\"\n  convolution_param {\n    num_output: 64 \n    pad: 2\n    kernel_size: 5\n    group: 2\n  }\n}\nlayer {\n  name: \"relu2\"\n  type: \"ReLU\"\n  bottom: \"conv2\"\n  top: \"conv2\"\n}\nlayer {\n  name: \"pool2\"\n  type: \"Pooling\"\n  bottom: \"conv2\"\n  top: \"pool2\"\n  pooling_param {\n    pool: MAX\n    kernel_size: 3\n    stride: 2\n  }\n}\nlayer {\n  name: \"norm2\"\n  type: \"LRN\"\n  bottom: \"pool2\"\n  top: \"norm2\"\n  lrn_param {\n    local_size: 5\n    alpha: 0.0001\n    beta: 0.75\n  }\n}\nlayer {\n  name: \"conv3\"\n  type: \"Convolution\"\n  bottom: \"norm2\"\n  top: \"conv3\"\n  convolution_param {\n    num_output: 384\n    pad: 1\n    kernel_size: 3\n  }\n}\nlayer {\n  name: \"relu3\"\n  type: \"ReLU\"\n  bottom: \"conv3\"\n  top: \"conv3\"\n}\nlayer {\n  name: \"conv4\"\n  type: \"Convolution\"\n  bottom: \"conv3\"\n  top: \"conv4\"\n  convolution_param {\n    num_output: 384\n    pad: 1\n    kernel_size: 3\n    group: 2\n  }\n}\nlayer {\n  name: \"relu4\"\n  type: \"ReLU\"\n  bottom: \"conv4\"\n  top: \"conv4\"\n}\nlayer {\n  name: \"conv5\"\n  type: \"Convolution\"\n  bottom: \"conv4\"\n  top: \"conv5\"\n  convolution_param {\n    num_output: 64\n    pad: 1\n    kernel_size: 3\n    group: 2\n  }\n}\nlayer {\n  name: \"relu5\"\n  type: \"ReLU\"\n  bottom: \"conv5\"\n  top: \"conv5\"\n}\nlayer {\n  name: \"pool5\"\n  type: \"Pooling\"\n  bottom: \"conv5\"\n  top: \"pool5\"\n  pooling_param {\n    pool: MAX\n    kernel_size: 3\n    stride: 2\n  }\n}\nlayer {\n  name: \"fc6\"\n  type: \"InnerProduct\"\n  bottom: \"pool5\"\n  top: \"fc6\"\n  inner_product_param {\n    num_output: 4096\n  }\n}\nlayer {\n  name: \"relu6\"\n  type: \"ReLU\"\n  bottom: \"fc6\"\n  top: \"fc6\"\n}\nlayer {\n  name: \"drop6\"\n  type: \"Dropout\"\n  bottom: \"fc6\"\n  top: \"fc6\"\n  dropout_param {\n    dropout_ratio: 0.5\n  }\n}\nlayer {\n  name: \"fc7\"\n  type: \"InnerProduct\"\n  bottom: \"fc6\"\n  top: \"fc7\"\n  inner_product_param {\n    num_output: 4096\n  }\n}\nlayer {\n  name: \"relu7\"\n  type: \"ReLU\"\n  bottom: \"fc7\"\n  top: \"fc7\"\n}\nlayer {\n  name: \"drop7\"\n  type: \"Dropout\"\n  bottom: \"fc7\"\n  top: \"fc7\"\n  dropout_param {\n    dropout_ratio: 0.5\n  }\n}\nlayer {\n  name: \"fc8_pascal\"\n  type: \"InnerProduct\"\n  bottom: \"fc7\"\n  top: \"fc8_pascal\"\n  inner_product_param {\n    num_output: 3\n  }\n}\n</code></pre>\n\n<p>Does anyone could give me a clue?\nThank you very much.</p>\n\n<hr>\n\n<p>The same happens with C++ and the <strong>classification bin</strong>  they provide:</p>\n\n<blockquote>\n  <p>F0610 18:06:14.975601  7906 blob.cpp:455] Check failed: ShapeEquals(proto) shape mismatch (reshape not set)\n  <strong>* Check failure stack trace: *</strong>\n     @     0x7f0e3c50761c  google::LogMessage::Fail()\n     @     0x7f0e3c507568  google::LogMessage::SendToLog()\n     @     0x7f0e3c506f6a  google::LogMessage::Flush()\n     @     0x7f0e3c509f01  google::LogMessageFatal::~LogMessageFatal()\n     @     0x7f0e3c964a80  caffe::Blob&lt;>::FromProto()\n     @     0x7f0e3c89576e  caffe::Net&lt;>::CopyTrainedLayersFrom()\n     @     0x7f0e3c8a10d2  caffe::Net&lt;>::CopyTrainedLayersFrom()\n     @           0x406c32  Classifier::Classifier()\n     @           0x403d2b  main\n     @     0x7f0e3b124ec5  (unknown)\n     @           0x4041ce  (unknown)\n  Aborted (core dumped)</p>\n</blockquote>\n"}, {"tags": ["c++", "templates", "c++11", "overloading", "variadic-functions"], "answers": [{"comments": [{"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1433952826, "post_id": 30761816, "comment_id": 49576254, "body": "Sorry for bad formatting, I couldn&#39;t get the other one working. If you can fix, thanks!"}, {"owner": {"reputation": 3983, "user_id": 620029, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c3c977d6b546bc538aa47413431dba0c?s=128&d=identicon&r=PG", "display_name": "Vladp", "link": "https://stackoverflow.com/users/620029/vladp"}, "edited": false, "score": 0, "creation_date": 1433953165, "post_id": 30761816, "comment_id": 49576463, "body": "Looks like what I need, I will just check that it works for me and accept soon."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 3983, "user_id": 620029, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c3c977d6b546bc538aa47413431dba0c?s=128&d=identicon&r=PG", "display_name": "Vladp", "link": "https://stackoverflow.com/users/620029/vladp"}, "edited": false, "score": 0, "creation_date": 1438598271, "post_id": 30761816, "comment_id": 51499112, "body": "Reason for downvoting?"}], "tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": true, "score": 3, "last_activity_date": 1433953715, "last_edit_date": 1433953715, "creation_date": 1433952774, "answer_id": 30761816, "question_id": 30761331, "link": "https://stackoverflow.com/questions/30761331/c-va-list-function-overload/30761816#30761816", "title": "c++ va_list function overload", "body": "<ol>\n<li>Force type construction: <code>log(std::string{\"hello})</code>. But this isn't really what you seem to want.</li>\n<li><p>In either of the functions, call the other one.  </p>\n\n<pre><code>void log(const string&amp; s)  \n{\n      log(s.c_str());      \n}\n</code></pre>\n\n<p>But it's not very efficient because you'll have a useless <code>string</code> object, although the compiler may be able to inline the call.</p></li>\n<li><p>Use variadic templates and SFINAE: </p>\n\n<pre><code>void log(const string&amp;);\nauto log(const char *ptr, Args&amp;&amp; ... args) -&gt; \n     typename std::enable_if&lt;sizeof...(Args) != 0, void&gt;::type \n</code></pre>\n\n<p>The second overload will be available in the set of candidate functions only if there're trailing arguments. <a href=\"http://coliru.stacked-crooked.com/a/9c119795511fd2ec\" rel=\"nofollow\">Showcase</a>. In C++14, you can use the short-hand version of <code>std::enable_if</code>, <code>std::enable_if_t</code>, which makes the syntax clearer:</p>\n\n<pre><code>auto log(const char *ptr, Args&amp;&amp; ... args) -&gt; std::enable_if_t&lt;sizeof...(Args) != 0, void&gt;\n</code></pre>\n\n<p>You can still simplify it in C++11 by using </p>\n\n<pre><code>template &lt;bool B, typename T&gt;\nusing enable_if_t = typename std::enable_if&lt;B, T&gt;::type;\n</code></pre></li>\n</ol>\n\n<p>If you're calling a function which accepts a <code>va_list</code> (such as <code>printf</code>) you're still able to expand the pack of parameters:</p>\n\n<pre><code>std::printf(ptr, args...);\n</code></pre>\n\n<p>but not vice versa.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 0, "last_activity_date": 1433953805, "creation_date": 1433953805, "answer_id": 30762180, "question_id": 30761331, "link": "https://stackoverflow.com/questions/30761331/c-va-list-function-overload/30762180#30762180", "title": "c++ va_list function overload", "body": "<p>You might omit the 'printf' function style and use a stream manipulator (taking a variable number of arguments (variadic template)):</p>\n\n<pre><code>// Header\n// ============================================================================\n\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;tuple&gt;\n\n// Format\n// ============================================================================\n\nnamespace Detail {\n\n    template&lt;unsigned I, unsigned N&gt;\n    struct Format;\n\n    template&lt;unsigned N&gt;\n    struct Format&lt;N, N&gt; {\n        template&lt;typename... Args&gt;\n        static void write(std::ostream&amp;, const std::tuple&lt;Args...&gt;&amp;, std::size_t offset)\n        {}\n    };\n\n    template&lt;unsigned I, unsigned N&gt;\n    struct Format {\n        template&lt;typename... Args&gt;\n        static void write(\n            std::ostream&amp; stream,\n            const std::tuple&lt;Args...&gt;&amp; values,\n            std::size_t offset)\n        {\n            if(offset == 0) stream &lt;&lt; std::get&lt;I&gt;(values);\n            else Format&lt;I+1, N&gt;::write(stream, values, offset - 1);\n        }\n    };\n\n    class FormatParser\n    {\n        public:\n        const char* fmt;\n        const std::size_t size;\n\n        FormatParser(const char* fmt, std::size_t size)\n        : fmt(fmt), size(size)\n        {}\n\n        virtual ~FormatParser() {}\n\n        void write(std::ostream&amp; stream) const;\n\n        protected:\n        virtual void write_value(std::ostream&amp;, std::size_t index) const = 0;\n    };\n\n} // namespace Detail\n\ntemplate&lt;typename... Args&gt;\nclass Format : public Detail::FormatParser\n{\n    public:\n    typedef std::tuple&lt;const Args&amp;...&gt; Tuple;\n    static constexpr std::size_t Size = std::tuple_size&lt;Tuple&gt;::value;\n\n    const std::tuple&lt;const Args&amp;...&gt; values;\n\n    Format(const char* fmt, const Args&amp;... values)\n    : Detail::FormatParser(fmt, Size), values(values...)\n    {}\n\n    protected:\n    void write_value(std::ostream&amp; stream, std::size_t index) const {\n        Detail::Format&lt;0, Size&gt;::write(stream, values, index);\n    }\n};\n\ntemplate &lt;typename... Args&gt;\ninline Format&lt;Args...&gt; format(const char* fmt, const Args&amp;... values) {\n    return Format&lt;Args...&gt;(fmt, values...);\n}\n\ntemplate &lt;typename... Args&gt;\ninline std::ostream&amp; operator &lt;&lt; (std::ostream&amp; stream, const Format&lt;Args...&gt;&amp; format) {\n    format.write(stream);\n    return stream;\n}\n\ntemplate &lt;typename... Args&gt;\ninline std::string format_string(const char* fmt, const Args&amp;... values) {\n    std::ostringstream result;\n    result &lt;&lt; format(fmt, values...);\n    return result.str();\n}\n\n// Source\n// ============================================================================\n\n#include &lt;cctype&gt;\n#include &lt;cstdlib&gt;\n#include &lt;stdexcept&gt;\n\nnamespace Detail {\n\n    void FormatParser::write(std::ostream&amp; stream) const {\n        const char* s = fmt;\n        while(*s) {\n            switch(*s) {\n                case '{':\n                if(*(++s) != '{') {\n                    char* end;\n                    unsigned long index = std::strtoul(s, &amp;end, 10);\n                    while(*end != '}') {\n                        if( ! std::isspace(*end)) {\n                            s = end;\n                            if( ! *s) s = \"End\";\n                            throw std::runtime_error(std::string(\n                                \"Invalid Format String `\") + fmt + \"` at \" + s);\n                        }\n                        ++end;\n                    }\n                    s = end + 1;\n                    if(index &lt; size) write_value(stream, index);\n                    else throw std::runtime_error(std::string(\n                        \"Invalid Format Index `\")  + std::to_string(index)\n                        + \"` in `\" + fmt + '`');\n                    continue;\n                }\n                break;\n\n                case '}':\n                if(*(++s) !=  '}') {\n                    if( ! *s) s = \"End\";\n                    throw std::runtime_error(\n                        std::string(\"Invalid Format String `\") + fmt + \"`\"\n                        \"Missing `}` at \" + s);\n                }\n                break;\n            }\n            stream.put(*s++);\n        }\n    }\n} // namespace Detail\n\n\n// Usage\n// ============================================================================\n\nint main() {\n    // a = 1; b = 2; 1 + 2 = 3\n    std::cout &lt;&lt; format(\"a = {0}; b = {1}; {0} + {1} = {2}\", 1, 2, 3) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Also: Have a look at <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/format/doc/format.html\" rel=\"nofollow\">boost::format</a></p>\n"}], "owner": {"reputation": 3983, "user_id": 620029, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c3c977d6b546bc538aa47413431dba0c?s=128&d=identicon&r=PG", "display_name": "Vladp", "link": "https://stackoverflow.com/users/620029/vladp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 30761816, "answer_count": 2, "score": 1, "last_activity_date": 1433953805, "creation_date": 1433951562, "last_edit_date": 1433952701, "question_id": 30761331, "link": "https://stackoverflow.com/questions/30761331/c-va-list-function-overload", "title": "c++ va_list function overload", "body": "<p>I currently have 2 function overloads:</p>\n\n<pre><code>void log(const char* format, ...);\nvoid log(const string&amp; message);\n</code></pre>\n\n<p>and I want that in case of this call: <code>log(\"hello\");</code> the string version will be called, or in other words the first overload should only be called in case of 2 arguments or more.</p>\n\n<p>I thought about doing this:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid log(const char* format, T first, ...);\n</code></pre>\n\n<p>but in this case I will have trouble using <code>va_list</code> properly in the code.</p>\n\n<p>Is there any other solution I might be missing?</p>\n\n<p><strong>EDIT</strong>:\nI thought about checking the size of <code>va_list</code> from inside the function, and redirecting in case of 0, but as far as I understood it's impossible to get the size of <code>va_list</code>.</p>\n"}, {"tags": ["c++", "iostream", "fstream"], "comments": [{"owner": {"reputation": 1363, "user_id": 2773647, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Hr6Z2.jpg?s=128&g=1", "display_name": "cybersoft", "link": "https://stackoverflow.com/users/2773647/cybersoft"}, "edited": false, "score": 0, "creation_date": 1433951991, "post_id": 30761320, "comment_id": 49575712, "body": "Generally, difference in the conversion of <code>\\r</code> &amp; <code>\\n</code> symbols."}], "answers": [{"tags": [], "owner": {"reputation": 1688, "user_id": 4974174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RAADm.jpg?s=128&g=1", "display_name": "Olivier Poulin", "link": "https://stackoverflow.com/users/4974174/olivier-poulin"}, "is_accepted": false, "score": 1, "last_activity_date": 1433951960, "creation_date": 1433951960, "answer_id": 30761494, "question_id": 30761320, "link": "https://stackoverflow.com/questions/30761320/what-is-the-difference-between-binary-and-txt-modes-in-c/30761494#30761494", "title": "what is the difference between binary and txt modes in C++", "body": "<p>Certain special characters may get changed depending on what mode you are using.\nAlso, what those special characters get changed into may depend on the OS or computer system that the code runs on.</p>\n\n<p>With binary files you are SURE that the file will be read as-is, on any computer and regardless of the contents of the file.\nThe difference in the kind of file IO says it all: Text mode is for text based files, \nBinary is for all other kinds of IO (even text files if you don't want any interpretation to take place!) </p>\n"}], "owner": {"reputation": 2549, "user_id": 1926725, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/038451aa84836fbb61155f00a5f48671?s=128&d=identicon&r=PG", "display_name": "monim", "link": "https://stackoverflow.com/users/1926725/monim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 0, "closed_date": 1433951971, "answer_count": 1, "score": 2, "last_activity_date": 1433951960, "creation_date": 1433951543, "question_id": 30761320, "link": "https://stackoverflow.com/questions/30761320/what-is-the-difference-between-binary-and-txt-modes-in-c", "closed_reason": "Duplicate", "title": "what is the difference between binary and txt modes in C++", "body": "<p>I began to use C++ recently,and this may seem to be a nieve queation but I couldn't find an answer for it.\nWhen creating an fstream object, I have two options for mode,  binary and txt.\nfstream f (\"file.txt\",ios::out|ios::binary);\nand\nfstream f (\"file.txt,ios::out|ios::binary); \nboth write the same strings when use the overloaded operator &lt;&lt; . my question what is the differwnce between the two modes and does it affect the number of bytes used to write characters to the stream, so you will need a diifferent seekg when you read data written with each fstream ?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 235784, "user_id": 673730, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d1e4893fe7a566e6e4b90876b642163?s=128&d=identicon&r=PG", "display_name": "Luchian Grigore", "link": "https://stackoverflow.com/users/673730/luchian-grigore"}, "edited": false, "score": 2, "creation_date": 1433951558, "post_id": 30761283, "comment_id": 49575376, "body": "<code>i</code> is an <code>int</code>, <code>&amp;i</code> is the address of <code>i</code>, so a pointer to an <code>int</code>..."}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1433951634, "post_id": 30761283, "comment_id": 49575437, "body": "&amp;i is the address of variable i, which is of type (int *) and is an rvalue, because it is on the right hand side of the assignment... and that isn&#39;t automatically convertible to a pointer to a double, because it results in gibberish"}, {"owner": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "reply_to_user": {"reputation": 235784, "user_id": 673730, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d1e4893fe7a566e6e4b90876b642163?s=128&d=identicon&r=PG", "display_name": "Luchian Grigore", "link": "https://stackoverflow.com/users/673730/luchian-grigore"}, "edited": false, "score": 0, "creation_date": 1433951821, "post_id": 30761283, "comment_id": 49575580, "body": "@LuchianGrigore &amp;i is an address of i. Yes. But there&#39;s no pointer (which in essence an object too) mentioned which store that address. It&#39;s confusing to say an address of an object is a pointer to that address. They looks like 2 different things to me"}, {"owner": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "reply_to_user": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1433951848, "post_id": 30761283, "comment_id": 49575608, "body": "@GradyPlayer Pls see my response to Luchian"}, {"owner": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "reply_to_user": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1433951898, "post_id": 30761283, "comment_id": 49575646, "body": "@GradyPlayer I just don&#39;t see &amp;i == int * .. To me they are 2 distinct separate entity"}, {"owner": {"reputation": 235784, "user_id": 673730, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d1e4893fe7a566e6e4b90876b642163?s=128&d=identicon&r=PG", "display_name": "Luchian Grigore", "link": "https://stackoverflow.com/users/673730/luchian-grigore"}, "edited": false, "score": 0, "creation_date": 1433952281, "post_id": 30761283, "comment_id": 49575904, "body": "&quot;It&#39;s confusing to say an address of an object is a pointer to that address.&quot; it is, but no one is saying that. An address of an object is (the value of) a pointer to that object."}, {"owner": {"reputation": 13530, "user_id": 593382, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f7326fd554e09edf21ca727d6854e22e?s=128&d=identicon&r=PG", "display_name": "Grady Player", "link": "https://stackoverflow.com/users/593382/grady-player"}, "edited": false, "score": 0, "creation_date": 1433954211, "post_id": 30761283, "comment_id": 49577137, "body": "pointers aren&#39;t exactly an easy concept, and the notation that they chose to represent them maybe makes things less intuitive... but regardless ... <code>address of some var</code> , has a type, and if you want to store it the type that you use is <code>pointer to type of some var</code>"}, {"owner": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "edited": false, "score": 0, "creation_date": 1433954923, "post_id": 30761283, "comment_id": 49577580, "body": "The last part of the answer is not &quot;rvalue of <code>int *</code>&quot; but &quot;an rvalue <i>of type</i> <code>int*</code>&quot;. This should be read as  <code>&amp;i</code> is of type <code>int*</code> and <code>&amp;i</code> is also an rvalue. You can&#39;t have <code>&amp;i</code> on the left hand side of an expression."}], "answers": [{"comments": [{"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "edited": false, "score": 0, "creation_date": 1433952690, "post_id": 30761507, "comment_id": 49576178, "body": "@yapkm01.:Check the answer..hope this will be helpful"}, {"owner": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "edited": false, "score": 0, "creation_date": 1433952903, "post_id": 30761507, "comment_id": 49576296, "body": "Yes. i understand what an rvalue is. It&#39;s basically an expression where no location is specified .. e.g a temporary storage like in registry. I also do understand it&#39;s on RHS. But why would you say int * a rvalue eventhough it&#39;s on RHS? To me a int * an rvalue means there&#39;s no memory location for this int pointer. How about int* p = &amp;i;  Is int*p an rvalue? I know it&#39;s on the LHS but i just want to see what&#39;s the different int *p on LHS and int *p on RHS .."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "edited": false, "score": 0, "creation_date": 1433953075, "post_id": 30761507, "comment_id": 49576411, "body": "@yapkm01.:Look it is saying you can not initialize a <code>double *</code> with an <code>r-value of int*</code>. What is the r-value of an <code>int *</code>? it is address of an integer variable. So you are assigning to a <code>double pointer an r-value of int*</code> not r-value of <code>double*</code> which is an address of a <code>double</code>."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "edited": false, "score": 0, "creation_date": 1433953222, "post_id": 30761507, "comment_id": 49576503, "body": "@yapkm01.: The explanation part is given in answer..check it. I"}, {"owner": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "edited": false, "score": 0, "creation_date": 1433953231, "post_id": 30761507, "comment_id": 49576510, "body": "what&#39;s the difference int * p on the LHS and int *q on the RHS? why would you call int *p an ivalue and int *q a rvalue? Both has value which can be changed .. sorry .. see don&#39;t see the picture .. maybe later i will"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "edited": false, "score": 0, "creation_date": 1433953437, "post_id": 30761507, "comment_id": 49576645, "body": "@yapkm01.: Look they seem same but on RHS it means that it must be assigned to proper l-value(that is one who can hold it(int*))."}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "edited": false, "score": 0, "creation_date": 1433953987, "post_id": 30761507, "comment_id": 49576990, "body": "@yapkm01.: Please upvote,downvote or accept the answer as that is what makes this post useful to future users."}, {"owner": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "edited": false, "score": 0, "creation_date": 1433954297, "post_id": 30761507, "comment_id": 49577198, "body": "i can&#39;t yet. I still don&#39;t see it. My confusion lies with why int * on RHS is consider rvalue. Int * is always assignable. It&#39;s not like comparing a=b+c and b+c=a .. yes this is clear cut since b+c is not assignable .. but an int * can always has its value changed"}, {"owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "reply_to_user": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "edited": false, "score": 0, "creation_date": 1433954412, "post_id": 30761507, "comment_id": 49577264, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/80205/discussion-between-coderredoc-and-yapkm01\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 28550, "user_id": 3796113, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/960488e3bdc769466c183faaf102f2f1?s=128&d=identicon&r=PG&f=1", "display_name": "user2736738", "link": "https://stackoverflow.com/users/3796113/user2736738"}, "is_accepted": false, "score": 1, "last_activity_date": 1433953723, "last_edit_date": 1495540392, "creation_date": 1433951985, "answer_id": 30761507, "question_id": 30761283, "link": "https://stackoverflow.com/questions/30761283/understanding-c-primer-5th-ed-solution-posted-by-moothy-section-2-21/30761507#30761507", "title": "Understanding C++ Primer 5th ed solution posted by Moothy section 2.21", "body": "<blockquote>\n  <p><code>int*</code> means a variable which can contain address of a integer\n  variable. Now address of an integer variable when placed on the right\n  hand side of the assignment then the left hand side should be <code>int*</code>\n  otherwise it will give wrong results. That's what is told here.</p>\n</blockquote>\n\n<hr>\n\n<p>Where is the pointer? \n<code>dp</code> is a pointer but not an integer pointer that's why the error.</p>\n\n<p><code>rvalue</code>- the value that appears in the rhs of assignment operator.\nA=B (r-value)</p>\n\n<blockquote>\n  <p>Do you know why we need different pointers? Suppose you have a pointer\n  variable pointing to a chunk of integers.</p>\n</blockquote>\n\n<pre><code>BBBBBBB (bytes) \n| \npointer(p) \n\nBBBBBBB (bytes) \n   |\n   p+1 if pointing to int\nBBBBBBB\n |\n p+1 if ointing to char \n</code></pre>\n\n<blockquote>\n  <p>Now if we say p++, then where do we move.\n  Okay if it is pointing to int move( sizeof(int)) 4 bytes , if\n  character 1 byte. Now say you are allowed to do wrong r-value\n  assignment. then it will be very problematic. You have to careful\n  enoough to code it properly.</p>\n</blockquote>\n\n<p>Now hope you understand the whole picture.</p>\n\n<p>Note:Look it is saying you can not initialize a <code>double *</code> with an <code>r-value of int*</code>. What is the r-value of an <code>int *</code>? it is address of an integer variable. So you are assigning to a <code>double pointer an r-value of int*</code> not r-value of <code>double*</code> which is an address of a <code>double</code>.</p>\n\n<h2>FROM MSDN</h2>\n\n<blockquote>\n  <p>Every C++ expression is either an lvalue or an rvalue. An lvalue\n  refers to an object that persists beyond a single expression. You can\n  think of an lvalue as an object that has a name. All variables,\n  including nonmodifiable (const) variables, are lvalues. An rvalue is a\n  temporary value that does not persist beyond the expression that uses\n  it. To better understand the difference between lvalues and rvalues,\n  consider the following example:</p>\n</blockquote>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/f90831hc.aspx\" rel=\"nofollow noreferrer\">example</a></p>\n\n<p>For further example/clarification check this SO question</p>\n\n<p><a href=\"https://stackoverflow.com/questions/17357888/exact-difference-between-rvalue-and-lvalue\">exact-difference-between-rvalue-and-lvalue</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4805451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PYYep.png?s=128&g=1", "display_name": "Janonard", "link": "https://stackoverflow.com/users/4805451/janonard"}, "is_accepted": false, "score": 0, "last_activity_date": 1433953007, "creation_date": 1433953007, "answer_id": 30761888, "question_id": 30761283, "link": "https://stackoverflow.com/questions/30761283/understanding-c-primer-5th-ed-solution-posted-by-moothy-section-2-21/30761888#30761888", "title": "Understanding C++ Primer 5th ed solution posted by Moothy section 2.21", "body": "<p>'dp' is a pointer to an double-value and the code wants it to point to an integer-value. This simply doesn't work. If 'dp' and 'i' weren't pointers, the value would be casted, but because you are working with pointers and not variables, this does not work.</p>\n\n<p>Don't think to much about the given answer: That's compiler language and you will get a lot of sentences like that, but don't care about them now.</p>\n"}], "owner": {"reputation": 2833, "user_id": 303250, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/363f15e560fb17bbfb5fe228a7b2dde2?s=128&d=identicon&r=PG", "display_name": "yapkm01", "link": "https://stackoverflow.com/users/303250/yapkm01"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 592, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1433953723, "creation_date": 1433951446, "last_edit_date": 1433951614, "question_id": 30761283, "link": "https://stackoverflow.com/questions/30761283/understanding-c-primer-5th-ed-solution-posted-by-moothy-section-2-21", "title": "Understanding C++ Primer 5th ed solution posted by Moothy section 2.21", "body": "<p>I'm newbie to C++ and i'm working through exercises on chapter 2.<br>\nI have a question on exercise 2.21.<br>\nThis solution is given by Moothy found on GitHub</p>\n\n<blockquote>\n  <p>Exercise 2.21<br>\n  Explain each of the following definitions.<br>\n   Indicate whether any are illegal and, if so, why.<br>\n  int i = 0;<br>\n  (a) double* dp = &i;<br>\n  Answer:<br>\n  (a): illegal, cannot initialize a variable of type 'double *' with an\n        rvalue of type 'int *'</p>\n</blockquote>\n\n<p>I don't understand the last part of the answer \" .. rvalue of int *\".<br>\nThe &amp;i is the address of variable i and never was a pointer mentioned here.<br>\n Why would he mention a pointer here? And why an rvalue of a pointer to an int?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "atomic"], "comments": [{"owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 2, "creation_date": 1433970516, "post_id": 30761225, "comment_id": 49586804, "body": "Take a look on tutorial <a href=\"http://baptiste-wicht.com/posts/2012/07/c11-concurrency-tutorial-part-4-atomic-type.html\" rel=\"nofollow noreferrer\">baptiste-wicht.com/posts/2012/07/&hellip;</a>."}, {"owner": {"reputation": 411, "user_id": 4111860, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Charlie", "link": "https://stackoverflow.com/users/4111860/charlie"}, "edited": false, "score": 0, "creation_date": 1561595866, "post_id": 30761225, "comment_id": 100119774, "body": "You can&#39;t define atomic&lt;A&gt;, refer to <a href=\"https://stackoverflow.com/questions/32694114/can-i-make-a-thread-safe-stdatomicvectorint\" title=\"can i make a thread safe stdatomicvectorint\">stackoverflow.com/questions/32694114/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "edited": false, "score": 0, "creation_date": 1433951756, "post_id": 30761292, "comment_id": 49575535, "body": "what if I want to use a std:;vector&lt;A&gt; and access different member of vector in different threads?"}, {"owner": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "reply_to_user": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "edited": false, "score": 2, "creation_date": 1433951923, "post_id": 30761292, "comment_id": 49575667, "body": "@mans You can safely access different elements of an <code>std::vector</code> from multiple threads as long as you don&#39;t access the same element from several threads. That&#39;s a guarantee of the standard library."}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "edited": false, "score": 1, "creation_date": 1433952096, "post_id": 30761292, "comment_id": 49575770, "body": "@Morwenn But it seems that I can not write. If I read in one thread and write in another thread, the system crashes, Am I wrong?"}, {"owner": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "reply_to_user": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "edited": false, "score": 1, "creation_date": 1433952131, "post_id": 30761292, "comment_id": 49575793, "body": "@mans If you read the same memory location that you are writing into, this is indeed a data race."}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 19052, "user_id": 1364752, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mxlR2.jpg?s=128&g=1", "display_name": "Morwenn", "link": "https://stackoverflow.com/users/1364752/morwenn"}, "edited": false, "score": 0, "creation_date": 1433952557, "post_id": 30761292, "comment_id": 49576087, "body": "@Morwenn How can I guard it using std:;atomic&lt;&gt; (if I can)?"}, {"owner": {"reputation": 20682, "user_id": 161424, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/205f11d28937a412e4b3cdc9eee8a49c?s=128&d=identicon&r=PG", "display_name": "Cogwheel", "link": "https://stackoverflow.com/users/161424/cogwheel"}, "edited": false, "score": 3, "creation_date": 1433952977, "post_id": 30761292, "comment_id": 49576339, "body": "That&#39;s like asking &quot;how can I unscrew this philips head screw with a socket wrench?&quot; a screwdriver and a wrench are both tools to turn things, but one of them is not the right tool for the job. You need a proper mutex or some other more heavy duty synchronization construct in order to protect an entire vector."}], "tags": [], "owner": {"reputation": 471, "user_id": 3967987, "user_type": "registered", "profile_image": "https://graph.facebook.com/533007798/picture?type=large", "display_name": "ivanw", "link": "https://stackoverflow.com/users/3967987/ivanw"}, "is_accepted": false, "score": 8, "last_activity_date": 1534334519, "last_edit_date": 1534334519, "creation_date": 1433951484, "answer_id": 30761292, "question_id": 30761225, "link": "https://stackoverflow.com/questions/30761225/how-to-use-stdatomic/30761292#30761292", "title": "How to use std::atomic&lt;&gt;", "body": "<p>Declare the class member <code>x</code> as atomic, then you don't have to declare the object as atomic:</p>\n\n<pre><code>class A\n{  \n   std::atomic&lt;int&gt; x;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1138, "user_id": 561327, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bcee6691999f40d243e9e2da6807fc81?s=128&d=identicon&r=PG", "display_name": "Luke B.", "link": "https://stackoverflow.com/users/561327/luke-b"}, "edited": false, "score": 20, "creation_date": 1433969706, "post_id": 30761480, "comment_id": 49586335, "body": "I would sugest <code>std::lock_guard</code> instead of manually locking and releasing."}, {"owner": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 2, "creation_date": 1474583514, "post_id": 30761480, "comment_id": 66603097, "body": "@LukeB.Is the idea behind lock_guard to rely on the automatic variables&#39;s destructiors to be called when exiting the scope in order to release the lock, just like with RAII ?"}, {"owner": {"reputation": 1605, "user_id": 2508277, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qfYIb.png?s=128&g=1", "display_name": "Unda", "link": "https://stackoverflow.com/users/2508277/unda"}, "reply_to_user": {"reputation": 7126, "user_id": 1560774, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e5c7d8e9733ac6dee89d29d0cd0123f4?s=128&d=identicon&r=PG", "display_name": "Virus721", "link": "https://stackoverflow.com/users/1560774/virus721"}, "edited": false, "score": 4, "creation_date": 1474896716, "post_id": 30761480, "comment_id": 66706590, "body": "@Virus721 Yes, that&#39;s the idea behind <code>std::lock_guard</code>."}], "tags": [], "owner": {"reputation": 1605, "user_id": 2508277, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qfYIb.png?s=128&g=1", "display_name": "Unda", "link": "https://stackoverflow.com/users/2508277/unda"}, "is_accepted": false, "score": 41, "last_activity_date": 1434054229, "last_edit_date": 1434054229, "creation_date": 1433951915, "answer_id": 30761480, "question_id": 30761225, "link": "https://stackoverflow.com/questions/30761225/how-to-use-stdatomic/30761480#30761480", "title": "How to use std::atomic&lt;&gt;", "body": "<p>You need to make the <code>x</code> attribute atomic, and not your whole class, as followed:</p>\n\n<pre><code>class A\n{\n    std::atomic&lt;int&gt; x;\n\n    public:\n      A() {\n        x=0;\n      }\n      void Add() {\n        x++;\n      }\n      void Sub() {\n        x--;\n      }     \n};\n</code></pre>\n\n<p>The error you get in you original code is completely normal: there is no <code>std::atomic&lt;A&gt;::Add</code> method (see <a href=\"http://www.cplusplus.com/reference/atomic/atomic/?kw=atomic\">here</a>) unless you provide a specialization for <code>std::atomic&lt;A&gt;</code>.</p>\n\n<p><strong>Referring your edit</strong>: you cannot magically make your <code>class A</code> thread safe by using it as template argument of <code>std::atomic</code>. To make it thread safe, you can make its attributes atomic (as suggested above and provided the standard library gives a specialization for it), or use mutexes to lock your ressources yourself. See the <a href=\"http://www.cplusplus.com/reference/mutex/\">mutex</a> header. For example:</p>\n\n<pre><code>class   A\n{\n  std::atomic&lt;int&gt;      x;\n  std::vector&lt;int&gt;      v;\n  std::mutex            mtx;\n\n  void  Add() {\n    x++;\n  }\n  void  Sub() {\n    x--;\n  }\n\n  /* Example method to protect a vector */\n  void  complexMethod() {\n    mtx.lock();\n\n    // Do whatever complex operation you need here\n    //  - access element\n    //  - erase element\n    //  - etc ...\n\n    mtx.unlock();\n  }\n\n  /*\n  ** Another example using std::lock_guard, as suggested in comments\n  ** if you don't need to manually manipulate the mutex\n  */\n  void  complexMethod2() {\n    std::lock_guard&lt;std::mutex&gt; guard(mtx);\n\n    // access, erase, add elements ...\n  }\n\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3135, "user_id": 2648754, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UWGAJ.png?s=128&g=1", "display_name": "a_pradhan", "link": "https://stackoverflow.com/users/2648754/a-pradhan"}, "is_accepted": false, "score": 5, "last_activity_date": 1433952153, "creation_date": 1433952153, "answer_id": 30761567, "question_id": 30761225, "link": "https://stackoverflow.com/questions/30761225/how-to-use-stdatomic/30761567#30761567", "title": "How to use std::atomic&lt;&gt;", "body": "<p>The <code>.</code> operator can be used on an object to call its class's member function, not some other class's member function (unless you explicitly write the code that way).</p>\n\n<pre><code>std::atomic&lt;A&gt; a ;\na.Add(); // Here, a does not know what Add() is (a member function of the type parameter)\n         // It tries to call Add() method of its own class i.e. std::atomic\n         // But std::atomic has no method names Add or Sub\n</code></pre>\n\n<p>As the answer by @ivanw mentions, make <code>std::atomic&lt;int&gt;</code> a member of your class instead and then use it.</p>\n\n<p>Here is another example:</p>\n\n<pre><code>template &lt;typename T&gt; class A\n{};\n\nclass B { public: void hello() { std::cout &lt;&lt; \"HELLO!!!\"; } };\n\nA&lt;B&gt; a ;\na.hello(); // This statement means that call a's hello member function\n           // But the typeof(a) which is A does not have such a function\n           // Hence it will be an error.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5468, "user_id": 89233, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a36afadc530a6936e9e336a729f7ecf3?s=128&d=identicon&r=PG", "display_name": "Jon Watte", "link": "https://stackoverflow.com/users/89233/jon-watte"}, "is_accepted": false, "score": 3, "last_activity_date": 1470616621, "creation_date": 1470616621, "answer_id": 38819864, "question_id": 30761225, "link": "https://stackoverflow.com/questions/30761225/how-to-use-stdatomic/38819864#38819864", "title": "How to use std::atomic&lt;&gt;", "body": "<p>I think the problem with the answers above is that they don't explain what I think is, at a minimum, an ambiguity in the question, and most likely, a common threaded development fallacy.</p>\n\n<p>You can't make an object \"atomic\" because the interval between two functions (first \"read x\" and then later \"write x\") will cause a race with other uses. If you think you need an \"atomic\" object, then you need to carefully design the API and member functions to expose now to begin and commit updates to the object.</p>\n\n<p>If all you mean by \"atomic\" is \"the object doesn't corrupt its internal state,\" then you can achieve this through <code>std::atomic&lt;&gt;</code> for single plain-old-data types that have no invariant between them (a doesn't depend on b) but you need a lock of some sort for any dependent rules you need to enforce.</p>\n"}], "owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60617, "favorite_count": 17, "answer_count": 4, "score": 32, "last_activity_date": 1534334519, "creation_date": 1433951246, "last_edit_date": 1530296113, "question_id": 30761225, "link": "https://stackoverflow.com/questions/30761225/how-to-use-stdatomic", "title": "How to use std::atomic&lt;&gt;", "body": "<p>I have a class that I want to use in different threads and I think I may be able to use <code>std::atomic</code> this way:</p>\n\n<pre><code>class A\n{\n    int x;\n\npublic:\n    A()\n    {\n        x=0;\n    }\n\n    void Add()\n    {\n        x++;\n    }\n\n    void Sub()\n    {\n        x--;\n    }     \n};\n</code></pre>\n\n<p>and in my code:</p>\n\n<pre><code>  std::atomic&lt;A&gt; a;\n</code></pre>\n\n<p>and in a different thread:</p>\n\n<pre><code>  a.Add();\n</code></pre>\n\n<p>and</p>\n\n<pre><code>  a.Sub();\n</code></pre>\n\n<p>but I am getting an error that <code>a.Add()</code> is not known. How can I solve this?</p>\n\n<p>Is there any better way to do this?</p>\n\n<p>Please note that it is an example, and what I want is to make sure that access to class A is thread-safe, so I can not use </p>\n\n<pre><code>std::atomic&lt;int&gt; x;\n</code></pre>\n\n<p>How can I make a class thread-safe using <code>std::atomic</code> ?</p>\n"}, {"tags": ["c++", "arrays", "string", "file", "large-data"], "comments": [{"owner": {"reputation": 654, "user_id": 4079123, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0c28786e5157a528eb01657fda5a46b6?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj", "link": "https://stackoverflow.com/users/4079123/bharadwaj"}, "edited": false, "score": 0, "creation_date": 1433951073, "post_id": 30761070, "comment_id": 49575060, "body": "This is much easier to do in Python. Why C++ specifically?"}, {"owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 0, "creation_date": 1433951287, "post_id": 30761070, "comment_id": 49575201, "body": "Usually the bottleneck is the disk.  The best format for loading is usually the smallest.    How fast are they loading?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1433951367, "post_id": 30761070, "comment_id": 49575247, "body": "Did you mean &quot;000.123&quot; instead of &quot;0.123&quot; ? If not, I dont understand what you mean with 3 decimals"}, {"owner": {"reputation": 413, "user_id": 955405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d30855a6f79219b417cfa267657ef287?s=128&d=identicon&r=PG", "display_name": "maxx", "link": "https://stackoverflow.com/users/955405/maxx"}, "reply_to_user": {"reputation": 654, "user_id": 4079123, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0c28786e5157a528eb01657fda5a46b6?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj", "link": "https://stackoverflow.com/users/4079123/bharadwaj"}, "edited": false, "score": 0, "creation_date": 1434012983, "post_id": 30761070, "comment_id": 49602649, "body": "@Bharadwaj, the rest of the program is in C++ so it would make sense to use it. It&#39;s not absolutely necessary however. What makes python so much easier?"}, {"owner": {"reputation": 413, "user_id": 955405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d30855a6f79219b417cfa267657ef287?s=128&d=identicon&r=PG", "display_name": "maxx", "link": "https://stackoverflow.com/users/955405/maxx"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1434013027, "post_id": 30761070, "comment_id": 49602670, "body": "@tobi, i meant &quot;0.123&quot; and what i mean with decimals is the that there is alway three digits after the dot."}, {"owner": {"reputation": 654, "user_id": 4079123, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0c28786e5157a528eb01657fda5a46b6?s=128&d=identicon&r=PG&f=1", "display_name": "Bharadwaj", "link": "https://stackoverflow.com/users/4079123/bharadwaj"}, "edited": false, "score": 0, "creation_date": 1434013163, "post_id": 30761070, "comment_id": 49602738, "body": "Not just Python, but any scripting language, Python because parsing is much easier and faster, has a great string library, data conversions is very easy. just try it"}, {"owner": {"reputation": 413, "user_id": 955405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d30855a6f79219b417cfa267657ef287?s=128&d=identicon&r=PG", "display_name": "maxx", "link": "https://stackoverflow.com/users/955405/maxx"}, "edited": false, "score": 0, "creation_date": 1434013246, "post_id": 30761070, "comment_id": 49602791, "body": "Alright i will, thank you."}], "answers": [{"comments": [{"owner": {"reputation": 413, "user_id": 955405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d30855a6f79219b417cfa267657ef287?s=128&d=identicon&r=PG", "display_name": "maxx", "link": "https://stackoverflow.com/users/955405/maxx"}, "edited": false, "score": 0, "creation_date": 1433964053, "post_id": 30761199, "comment_id": 49583161, "body": "Its a real world heightmap with ranges typically between 0-500. Thanks for the tip i will look into that!"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 1, "last_activity_date": 1433951177, "creation_date": 1433951177, "answer_id": 30761199, "question_id": 30761070, "link": "https://stackoverflow.com/questions/30761070/fast-conversion-of-a-text-file-to-arrays-c/30761199#30761199", "title": "fast conversion of a text file to arrays C++", "body": "<p>part 2</p>\n\n<p>If you are reading the file back onto the same type of system (endianness) then use a binary blittable format. Ie store a straight binary dump of the 200 * 200 array. I would also multiply by 1000 and store as ints since they are typically slightly faster (you did not mention the range of values, nor the required precision, are the units feet, miles, nanometers?)</p>\n"}], "owner": {"reputation": 413, "user_id": 955405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d30855a6f79219b417cfa267657ef287?s=128&d=identicon&r=PG", "display_name": "maxx", "link": "https://stackoverflow.com/users/955405/maxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 30761199, "answer_count": 1, "score": 0, "last_activity_date": 1506035030, "creation_date": 1433950823, "last_edit_date": 1506102294, "question_id": 30761070, "link": "https://stackoverflow.com/questions/30761070/fast-conversion-of-a-text-file-to-arrays-c", "title": "fast conversion of a text file to arrays C++", "body": "<p>I've been working on a project that involves large heightmaps (3000x3000 ~60MB). . What i need to do is to split the data into several 200x200 arrays (15x15 of them), then save them separately (but this time in a format which is as fast as possible to load again). I've tried using streams (I'm not that good at C++ so don't exclude ideas with streams) but it's agonizingly slow. </p>\n\n<p>Stuff that might help (based on what I've seen while searching for the answer):\nThe heightmaps are supplied as text files (.asc) with the numbers written like this \"125.123\" but without the \"\". Each entry has three decimals no matter what the number is (\"0.123\" and \"100.123\").As far as i know there are no negative numbers and the size of the heightmap is known beforehand (usually 3000x3000).</p>\n\n<p>So my questions essentially:</p>\n\n<ol>\n<li>Whats the best way to do this? (preferably without boost or such but if it helps a lot then why not)</li>\n<li>What format (for the 200x200 arrays) would allow the fastest loading time?</li>\n</ol>\n\n<p>any help, ideas, code or links/litterature?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1433950891, "post_id": 30760982, "comment_id": 49574932, "body": "lessFunction is a <i>type</i>. To call <code>lessFunction::operator()</code> you need an <i>object</i>."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1433951053, "post_id": 30761085, "comment_id": 49575046, "body": "I would suggest that if you are going to doing this every time you call the push function you make <code>f</code> a class member so you don&#39;t have to create it every time you call the function."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1433951065, "post_id": 30761085, "comment_id": 49575057, "body": "Precisely, the operator overloaded function <i>cannot</i> be a static function."}], "tags": [], "owner": {"reputation": 3135, "user_id": 2648754, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UWGAJ.png?s=128&g=1", "display_name": "a_pradhan", "link": "https://stackoverflow.com/users/2648754/a-pradhan"}, "is_accepted": true, "score": 3, "last_activity_date": 1433951132, "last_edit_date": 1433951132, "creation_date": 1433950870, "answer_id": 30761085, "question_id": 30760982, "link": "https://stackoverflow.com/questions/30760982/c-template-function-with-predicate-support/30761085#30761085", "title": "c++ template function with predicate support", "body": "<p>You need to create an instance of the class and then use the overloaded () operator in your push member function.</p>\n\n<pre><code>...\nlessFunction f ;\nif (f(m_buffer[index], t))\n...\n</code></pre>\n\n<p>The operator overloaded function is not a static member function and hence requires an instance of the class be declared to be called. </p>\n"}, {"tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": 0, "last_activity_date": 1433951585, "creation_date": 1433951585, "answer_id": 30761338, "question_id": 30760982, "link": "https://stackoverflow.com/questions/30760982/c-template-function-with-predicate-support/30761338#30761338", "title": "c++ template function with predicate support", "body": "<p>You must call <code>lessFunction::operator(int&amp;, const int&amp;)</code> on a object because operator overloading function may not be static. Therefore, you can create an object of it like:</p>\n\n<pre><code> class MyClass\n {\n     lessFunction comparator;\n };\n</code></pre>\n\n<p>and, when needed, call it this way:  </p>\n\n<pre><code>if ( comparator(m_buffer[index], t) )\n</code></pre>\n\n<p>You can also declare it as a local variable but you'd better keep just one instance of it accessible throughout the class.<br>\nFinally, you may consider using <a href=\"http://en.cppreference.com/w/cpp/utility/functional/less\" rel=\"nofollow\"><code>std::less</code></a>, maybe as default template parameter, so that you don't have to reimplement it as you're doing for <code>myCompare</code>.  </p>\n\n<p><code>template &lt;typename T, std::size_t N, typename lessFunction = std::less&lt;T&gt;&gt;\nclass MyClass</code></p>\n"}], "owner": {"reputation": 705, "user_id": 1057286, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/vn0Mv.jpg?s=128&g=1", "display_name": "sanjay", "link": "https://stackoverflow.com/users/1057286/sanjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1092, "favorite_count": 0, "accepted_answer_id": 30761085, "answer_count": 2, "score": 0, "last_activity_date": 1433951585, "creation_date": 1433950598, "question_id": 30760982, "link": "https://stackoverflow.com/questions/30760982/c-template-function-with-predicate-support", "title": "c++ template function with predicate support", "body": "<p>I want to implement a priority queue using template.I tried but i am getting some error , i want to pass custom predicate support for less function.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;typename T, std::size_t N, typename lessFunction&gt;\nclass MyClass\n{\n    typedef std::size_t     size_type;\npublic:\n    void push( const T&amp; t) {\n        //\n        size_type index ;//(some value .. say 5)\n        //...//\n        if(lessFunction(m_buffer[index], t))\n        {\n            /// do something\n        }\n    }\n\nprivate:\n    T m_buffer[N];\n};\n\nstruct myCompare\n{\n    bool operator() (int&amp; x, const int&amp; y) {\n        return abs(x) &lt; abs(y);\n    }\n};\n\nint main()\n{\n    MyClass&lt;int , 8, myCompare&gt; obj;\n    obj.push(1);\n    return 0;\n}\n</code></pre>\n\n<p>I am getting this error.</p>\n\n<pre><code>/home/sanju/code/circular-buffer/main.cpp:17: error: no matching function for call to 'myCompare::myCompare(int&amp;, const int&amp;)'\n         if(lessFunction(m_buffer[index], t))\n</code></pre>\n\n<p>Please correct me. And i have one more question\nhow can this template use a functor as well as function as lessFunction ?</p>\n"}, {"tags": ["c++", "boost", "visual-studio-2015"], "comments": [{"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1433950757, "post_id": 30760889, "comment_id": 49574829, "body": "What does the Boost documentation say about that?"}, {"owner": {"reputation": 846, "user_id": 3211851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c50595fe3a5a43ca2dfc7ccf1b2b92fd?s=128&d=identicon&r=PG", "display_name": "OmegaExtern", "link": "https://stackoverflow.com/users/3211851/omegaextern"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1433950880, "post_id": 30760889, "comment_id": 49574917, "body": "@AdrianoRepetti: How do I undefine &quot;BOOST_ASSERT_CONFIG&quot;? You may want to see screenshots. I&#39;m not yet even in Visual Studio project. I want to compile lib file first.... Also.. -1? At least explain why."}, {"owner": {"reputation": 846, "user_id": 3211851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c50595fe3a5a43ca2dfc7ccf1b2b92fd?s=128&d=identicon&r=PG", "display_name": "OmegaExtern", "link": "https://stackoverflow.com/users/3211851/omegaextern"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1433951329, "post_id": 30760889, "comment_id": 49575223, "body": "@KABoissonneault To answer your question, docs, says: &quot;The library was successfully built and tested on the following platforms: ... MSVC 9.0 and newer&quot;. I don&#39;t get it.."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1433951484, "post_id": 30760889, "comment_id": 49575324, "body": "At this point, I&#39;d consider contacting the Boost people directly. They might have a better answer"}, {"owner": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1433959258, "post_id": 30760889, "comment_id": 49580286, "body": "@OmegaExtern well, they obviously meant &quot;MSVC 9.0 and newer <i>available by the date of 1.58 release</i>&quot;."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1438248071, "post_id": 30760889, "comment_id": 51376399, "body": "Since when Boost is a C library?"}, {"owner": {"reputation": 7849, "user_id": 576396, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8371065173a6c6bc169a4694c4fa2b50?s=128&d=identicon&r=PG", "display_name": "Katana314", "link": "https://stackoverflow.com/users/576396/katana314"}, "edited": false, "score": 0, "creation_date": 1443113281, "post_id": 30760889, "comment_id": 53372715, "body": "Old question by now, but boost 1.59.0 has official support for VS 2015."}, {"owner": {"reputation": 3649, "user_id": 294569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c97ccc8981952c53fa09dadfafb132?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/294569/damian"}, "edited": false, "score": 1, "creation_date": 1479830085, "post_id": 30760889, "comment_id": 68718340, "body": "If you use NuGet you can easily upgrade to the newest version of boost hat will works with your compiler."}, {"owner": {"reputation": 20901, "user_id": 9476, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f01cbd2238e2a78e4c43fa596f51d6a1?s=128&d=identicon&r=PG", "display_name": "Dmitri Nesteruk", "link": "https://stackoverflow.com/users/9476/dmitri-nesteruk"}, "edited": false, "score": 0, "creation_date": 1504685096, "post_id": 30760889, "comment_id": 79100283, "body": "Still an issue with Boost 1.65/VS2017"}], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 3211851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c50595fe3a5a43ca2dfc7ccf1b2b92fd?s=128&d=identicon&r=PG", "display_name": "OmegaExtern", "link": "https://stackoverflow.com/users/3211851/omegaextern"}, "edited": false, "score": 1, "creation_date": 1434994201, "post_id": 30959156, "comment_id": 50002424, "body": "At the end - builded successfully. Though, thanks for your information."}, {"owner": {"reputation": 225, "user_id": 5011111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GMZMg.jpg?s=128&g=1", "display_name": "Vladimir Gamalyan", "link": "https://stackoverflow.com/users/5011111/vladimir-gamalyan"}, "edited": false, "score": 3, "creation_date": 1470302809, "post_id": 30959156, "comment_id": 64898630, "body": "And for the next VS updates, magic numbers can be get by <code>cl</code> command in <code>Visual Studio Command Prompt (2015)</code>"}], "tags": [], "owner": {"reputation": 7948, "user_id": 4899330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a19fa016a8fc6c0a3250f03f108a9?s=128&d=identicon&r=PG&f=1", "display_name": "doqtor", "link": "https://stackoverflow.com/users/4899330/doqtor"}, "is_accepted": true, "score": 69, "last_activity_date": 1502495491, "last_edit_date": 1502495491, "creation_date": 1434836320, "answer_id": 30959156, "question_id": 30760889, "link": "https://stackoverflow.com/questions/30760889/unknown-compiler-version-while-compiling-boost-with-msvc-14-0-vs-2015/30959156#30959156", "title": "Unknown compiler version while compiling Boost with MSVC 14.0 (VS 2015)", "body": "<p>Latest (at the time of posting this answer)  <strong>Boost 1.58</strong> does support <strong>MSVC 14.0 Preview</strong> which was the latest MS compiler at the time of Boost 1.58 release.\nNow, the latest version of <strong>Visual Studio</strong> is <strong>2015 RC</strong> which isn't covered in the boost 1.58 config file.</p>\n\n<p>To stop Boost 1.58 complaining about unknown compiler version edit <code>boost/config/compiler/visualc.hpp</code> and replace:</p>\n\n<pre><code>// last known and checked version is 19.00.22129 (VC14 Preview):\n#if (_MSC_VER &gt; 1800 &amp;&amp; _MSC_FULL_VER &gt; 190022310)\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>// last known and checked version is 19.00.22816 (VC++ 2015 RC):\n#if (_MSC_VER &gt; 1800 &amp;&amp; _MSC_FULL_VER &gt; 190022816)\n</code></pre>\n\n<p>which you can find is already done in boost repo <a href=\"https://github.com/boostorg/config/pull/60/files\" rel=\"noreferrer\">here</a> for upcoming Boost 1.59 release.</p>\n\n<p><strong><em>Update</em></strong>: For <strong>Visual Studio 2015 RTM</strong> set it to:</p>\n\n<pre><code>// last known and checked version is 19.00.23026 (VC++ 2015):\n#if (_MSC_VER &gt; 1800 &amp;&amp; _MSC_FULL_VER &gt; 190023026)\n</code></pre>\n\n<p><strong><em>Update2</em></strong>: For <strong>Visual Studio 2015 Update 1</strong> set it to:</p>\n\n<pre><code>// last known and checked version is 19.00.23506 (VC++ 2015 Update 1):\n#if (_MSC_VER &gt; 1800 &amp;&amp; _MSC_FULL_VER &gt; 190023506)\n</code></pre>\n\n<hr>\n\n<p>Also if you have previously been running Boost.Build on <code>toolset=msvc-14.0</code> then delete from <code>C:\\Users\\&lt;name&gt;\\AppData\\Local\\Temp</code> the following cached files:</p>\n\n<pre><code>b2_msvc_14.0_vcvarsall_x86.cmd \nb2_msvc_14.0_vcvarsall_x86_amd64.cmd \nb2_msvc_14.0_vcvarsall_x86_arm.cmd\n</code></pre>\n\n<p>More about that <a href=\"https://groups.google.com/forum/#!topic/boost-devel-archive/5GNGMz8JC0w\" rel=\"noreferrer\">here</a>.</p>\n\n<p><strong><em>Update3</em></strong>\nFor future reference, in your Visual Studio Tools Command Prompt run the command <code>cl /Bv</code> to see your version numbers (the parameters are case sensitive).</p>\n\n<p>Mine outputs the following:</p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft Visual Studio\\Preview\\Professional\\VC\\Tools\\MSVC\\14.11.25503\\bin\\HostX64\\x64\\cl.exe:        Version 19.11.25506.0\n C:\\Program Files (x86)\\Microsoft Visual Studio\\Preview\\Professional\\VC\\Tools\\MSVC\\14.11.25503\\bin\\HostX64\\x64\\c1.dll:        Version 19.11.25506.0\n C:\\Program Files (x86)\\Microsoft Visual Studio\\Preview\\Professional\\VC\\Tools\\MSVC\\14.11.25503\\bin\\HostX64\\x64\\c1xx.dll:      Version 19.11.25506.0\n C:\\Program Files (x86)\\Microsoft Visual Studio\\Preview\\Professional\\VC\\Tools\\MSVC\\14.11.25503\\bin\\HostX64\\x64\\c2.dll:        Version 19.11.25506.0\n C:\\Program Files (x86)\\Microsoft Visual Studio\\Preview\\Professional\\VC\\Tools\\MSVC\\14.11.25503\\bin\\HostX64\\x64\\link.exe:      Version 14.11.25506.0\n C:\\Program Files (x86)\\Microsoft Visual Studio\\Preview\\Professional\\VC\\Tools\\MSVC\\14.11.25503\\bin\\HostX64\\x64\\mspdb140.dll:  Version 14.11.25506.0\n C:\\Program Files (x86)\\Microsoft Visual Studio\\Preview\\Professional\\VC\\Tools\\MSVC\\14.11.25503\\bin\\HostX64\\x64\\1033\\clui.dll: Version 19.11.25506.0\n</code></pre>\n\n<p>From this you can deduce the <code>_MSC_VER</code> is 1911 (from the text \"Version 19.11\") and the <code>_MSC_FULL_VER</code> is 191125506.</p>\n"}, {"tags": [], "owner": {"reputation": 239, "user_id": 1019139, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/87jrX.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1019139/matt"}, "is_accepted": false, "score": 4, "last_activity_date": 1437683198, "last_edit_date": 1437683198, "creation_date": 1437683011, "answer_id": 31597341, "question_id": 30760889, "link": "https://stackoverflow.com/questions/30760889/unknown-compiler-version-while-compiling-boost-with-msvc-14-0-vs-2015/31597341#31597341", "title": "Unknown compiler version while compiling Boost with MSVC 14.0 (VS 2015)", "body": "<p>Now using the fully released version of msvc-14.0 (Visual Studio 2015), you can use this: </p>\n\n<pre><code>#if (_MSC_VER &gt; 1800 &amp;&amp; _MSC_FULL_VER &gt; 190023026)\n</code></pre>\n\n<p>Is there any danger is this?  Should we instead wait for the next release of Boost that has been officially edited to have this value? </p>\n"}, {"comments": [{"owner": {"reputation": 975, "user_id": 4815980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hhFLE.png?s=128&g=1", "display_name": "sunny moon", "link": "https://stackoverflow.com/users/4815980/sunny-moon"}, "edited": false, "score": 1, "creation_date": 1491337051, "post_id": 34055064, "comment_id": 73505044, "body": "Visual Studio 2017: <code>#if (_MSC_VER &gt; 1910 &amp;&amp; _MSC_FULL_VER &gt; 191025017)</code>"}, {"owner": {"reputation": 3874, "user_id": 1930508, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4f709ca5b37805423d076b4e3f103f67?s=128&d=identicon&r=PG", "display_name": "Flamefire", "link": "https://stackoverflow.com/users/1930508/flamefire"}, "edited": false, "score": 0, "creation_date": 1498463537, "post_id": 34055064, "comment_id": 76491021, "body": "VS2015U3 is 190024215"}, {"owner": {"reputation": 335, "user_id": 919157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95588d33ebfc77b302ab349723482a0d?s=128&d=identicon&r=PG", "display_name": "zzz", "link": "https://stackoverflow.com/users/919157/zzz"}, "edited": false, "score": 1, "creation_date": 1503464160, "post_id": 34055064, "comment_id": 78619138, "body": "Now the latest release VS 2017 full version ends on 7 (not 6), but in boost 1.65 only _MSC_VER is used, so if you only update that part it works fine."}, {"owner": {"reputation": 3549, "user_id": 1824274, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/QRBsv.png?s=128&g=1", "display_name": "Arnaud", "link": "https://stackoverflow.com/users/1824274/arnaud"}, "edited": false, "score": 0, "creation_date": 1503471506, "post_id": 34055064, "comment_id": 78622530, "body": "This is strange, I just updated and the full version on my side is still 191125506"}, {"owner": {"reputation": 352, "user_id": 1742160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aac64cfd667b8eeb08f18a678eae0c3?s=128&d=identicon&r=PG", "display_name": "giles", "link": "https://stackoverflow.com/users/1742160/giles"}, "edited": false, "score": 0, "creation_date": 1512760458, "post_id": 34055064, "comment_id": 82402059, "body": "VS2017 v15.5.1 _MSC_VER=1912 _MSC_FULL_VER=191225830"}, {"owner": {"reputation": 893, "user_id": 6277384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6172ff7a5d08eb58a7bbcc7dd99a08c?s=128&d=identicon&r=PG", "display_name": "yumetodo", "link": "https://stackoverflow.com/users/6277384/yumetodo"}, "edited": false, "score": 0, "creation_date": 1606700088, "post_id": 34055064, "comment_id": 115032362, "body": "BTW: <code>_MSC_FULL_VER=191426433</code> is Visual Studio 2017 version 15.7.5. <a href=\"https://dev.to/yumetodo/list-of-mscver-and-mscfullver-8nd\" rel=\"nofollow noreferrer\">dev.to/yumetodo/list-of-mscver-and-mscfullver-8nd</a>"}], "tags": [], "owner": {"reputation": 3549, "user_id": 1824274, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/QRBsv.png?s=128&g=1", "display_name": "Arnaud", "link": "https://stackoverflow.com/users/1824274/arnaud"}, "is_accepted": false, "score": 38, "last_activity_date": 1555321851, "last_edit_date": 1555321851, "creation_date": 1449098697, "answer_id": 34055064, "question_id": 30760889, "link": "https://stackoverflow.com/questions/30760889/unknown-compiler-version-while-compiling-boost-with-msvc-14-0-vs-2015/34055064#34055064", "title": "Unknown compiler version while compiling Boost with MSVC 14.0 (VS 2015)", "body": "<p>Edit <code>boost/config/compiler/visualc.hpp</code> and replace the test about the last known and checked version with one of the following line:</p>\n\n<p>1) If you want to deactivate completely the version check: </p>\n\n<pre><code>#if 0\n</code></pre>\n\n<p>2) If you want to check the major version only (select a single line):</p>\n\n<pre><code>#if (_MSC_VER &gt; 1900) // Visual Studio 2015\n#if (_MSC_VER &gt; 1911) // Visual Studio 2017 15.0, 15.1 and 15.2\n#if (_MSC_VER &gt; 1911) // Visual Studio 2017 15.3 and 15.4\n#if (_MSC_VER &gt; 1912) // Visual Studio 2017 15.5\n#if (_MSC_VER &gt; 1913) // Visual Studio 2017 15.6\n#if (_MSC_VER &gt; 1914) // Visual Studio 2017 15.7\n#if (_MSC_VER &gt; 1915) // Visual Studio 2017 15.8\n#if (_MSC_VER &gt; 1916) // Visual Studio 2017 15.9\n#if (_MSC_VER &gt; 1920) // Visual Studio 2019 16.0\n</code></pre>\n\n<p>3) If you want to check both the major and minor version (select a single line):</p>\n\n<pre><code>#if (_MSC_VER &gt; 1900 &amp;&amp; _MSC_FULL_VER &gt; 190023506) // Visual Studio 2015 Update 1\n#if (_MSC_VER &gt; 1900 &amp;&amp; _MSC_FULL_VER &gt; 190023918) // Visual Studio 2015 Update 2\n#if (_MSC_VER &gt; 1900 &amp;&amp; _MSC_FULL_VER &gt; 190023918) // Visual Studio 2015 Update 3\n#if (_MSC_VER &gt; 1910 &amp;&amp; _MSC_FULL_VER &gt; 191025017) // Visual Studio 2017 15.0, 15.1 and 15.2\n#if (_MSC_VER &gt; 1911 &amp;&amp; _MSC_FULL_VER &gt; 191125542) // Visual Studio 2017 15.3 and 15.4\n#if (_MSC_VER &gt; 1912 &amp;&amp; _MSC_FULL_VER &gt; 191225835) // Visual Studio 2017 15.5\n#if (_MSC_VER &gt; 1913 &amp;&amp; _MSC_FULL_VER &gt; 191326132) // Visual Studio 2017 15.6\n#if (_MSC_VER &gt; 1914 &amp;&amp; _MSC_FULL_VER &gt; 191426433) // Visual Studio 2017 15.7\n#if (_MSC_VER &gt; 1915 &amp;&amp; _MSC_FULL_VER &gt; 191526726) // Visual Studio 2017 15.8\n#if (_MSC_VER &gt; 1916 &amp;&amp; _MSC_FULL_VER &gt; 191627030) // Visual Studio 2017 15.9\n#if (_MSC_VER &gt; 1920 &amp;&amp; _MSC_FULL_VER &gt; 192027508) // Visual Studio 2019 16.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 323, "user_id": 2478825, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/sDqlC.jpg?s=128&g=1", "display_name": "Atdhe Kurteshi", "link": "https://stackoverflow.com/users/2478825/atdhe-kurteshi"}, "is_accepted": false, "score": -1, "last_activity_date": 1590198688, "last_edit_date": 1590198688, "creation_date": 1457568609, "answer_id": 35905196, "question_id": 30760889, "link": "https://stackoverflow.com/questions/30760889/unknown-compiler-version-while-compiling-boost-with-msvc-14-0-vs-2015/35905196#35905196", "title": "Unknown compiler version while compiling Boost with MSVC 14.0 (VS 2015)", "body": "<p>I have tried the following code in Ogre 1.9 - Visual Studio 2015.</p>\n\n<p>Last known and checked version is 19.00.23506 (VC++ 2015 Update 1)</p>\n\n<p><code>if (_MSC_VER &gt; 1800 &amp;&amp; _MSC_FULL_VER &gt; 190023506)</code></p>\n"}, {"tags": [], "owner": {"reputation": 4834, "user_id": 213615, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/af186924b252e12ee40865d51ca5f806?s=128&d=identicon&r=PG", "display_name": "rkellerm", "link": "https://stackoverflow.com/users/213615/rkellerm"}, "is_accepted": false, "score": 5, "last_activity_date": 1462107801, "creation_date": 1462107801, "answer_id": 36966983, "question_id": 30760889, "link": "https://stackoverflow.com/questions/30760889/unknown-compiler-version-while-compiling-boost-with-msvc-14-0-vs-2015/36966983#36966983", "title": "Unknown compiler version while compiling Boost with MSVC 14.0 (VS 2015)", "body": "<p>In general, open <code>boost/config/compiler/visualc.hpp</code> and hover the mouse over <code>_MSC_FULL_VER</code> to see the version installed on your environment.</p>\n"}], "owner": {"reputation": 846, "user_id": 3211851, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c50595fe3a5a43ca2dfc7ccf1b2b92fd?s=128&d=identicon&r=PG", "display_name": "OmegaExtern", "link": "https://stackoverflow.com/users/3211851/omegaextern"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50545, "favorite_count": 16, "accepted_answer_id": 30959156, "answer_count": 5, "score": 57, "last_activity_date": 1590198688, "creation_date": 1433950375, "last_edit_date": 1532163942, "question_id": 30760889, "link": "https://stackoverflow.com/questions/30760889/unknown-compiler-version-while-compiling-boost-with-msvc-14-0-vs-2015", "title": "Unknown compiler version while compiling Boost with MSVC 14.0 (VS 2015)", "body": "<p>I get \"Unknown compiler version - please run configure tests and report the results\" while attempting to compile Boost library on my computer.<br>\nI have most recent Boost (as of date of the post) - 1.58.0.<br>\nDoesn't Boost support MSVC 14.0, yet? How do I \"run the configure tests\"?</p>\n\n<p><img src=\"https://s3.postimg.cc/nt5tksndf/boost_msvc_14_0.jpg\" alt=\"Screenshots\">.</p>\n"}, {"tags": ["android", "c++", "android-studio", "android-ndk", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 1220, "user_id": 1526028, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/zICT4.jpg?s=128&g=1", "display_name": "jennymo", "link": "https://stackoverflow.com/users/1526028/jennymo"}, "edited": false, "score": 0, "creation_date": 1434119231, "post_id": 30799344, "comment_id": 49659247, "body": "oh my god, such a simple solution...i could have seen this also :D :D So much thanks, it is working now :)"}, {"owner": {"reputation": 6014, "user_id": 188159, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/afada335d44b118c1f127d5809d4850d?s=128&d=identicon&r=PG", "display_name": "qubodup", "link": "https://stackoverflow.com/users/188159/qubodup"}, "edited": false, "score": 1, "creation_date": 1463367550, "post_id": 30799344, "comment_id": 62020770, "body": "you&#39;ve outlined what the problematic code is but could you also include a solution (change to one of the find commands?) Thanks!"}], "tags": [], "owner": {"reputation": 13953, "user_id": 2094884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cQnyd.png?s=128&g=1", "display_name": "ph0b", "link": "https://stackoverflow.com/users/2094884/ph0b"}, "is_accepted": true, "score": 4, "last_activity_date": 1434100145, "creation_date": 1434100145, "answer_id": 30799344, "question_id": 30760883, "link": "https://stackoverflow.com/questions/30760883/android-ndk-multiple-definition-of-o-and-c-files/30799344#30799344", "title": "Android NDK: Multiple definition of .o and .c files", "body": "<p>I think the root cause of your problem is that you're including the same files more than once for compilation since get_android_cpp_files_cmd (<code>find $(LOCAL_PATH) -type f  -iname \"*.cpp\"</code>) is already returning files that will be returned by get_shared_cpp_files_cmd (<code>find $(LOCAL_PATH)/src -type f  -iname \"*.cpp\"</code>) as <code>find</code> is recursive.</p>\n\n<p>Also, this is unrelated to your issue, but I wonder why you're compiling for armeabi, armeabi-v7a, arm64-v8a, and targeting android-12+ ? honeycomb_mr1 is quite a confidential version, why not directly targeting kitkat+ instead, and also including x86 arch in your list?</p>\n"}, {"tags": [], "owner": {"reputation": 2854, "user_id": 4398784, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjjTP.png?s=128&g=1", "display_name": "Geraldo Neto", "link": "https://stackoverflow.com/users/4398784/geraldo-neto"}, "is_accepted": false, "score": 0, "last_activity_date": 1452911640, "last_edit_date": 1495540372, "creation_date": 1452835417, "answer_id": 34804868, "question_id": 30760883, "link": "https://stackoverflow.com/questions/30760883/android-ndk-multiple-definition-of-o-and-c-files/34804868#34804868", "title": "Android NDK: Multiple definition of .o and .c files", "body": "<p>If you are still having the problem, even after ph0b's solution, I was having the same situation. An easy way to fix it is by cleaning the project (<strong>Build -> Clean Project</strong>) in <strong>Android Studio</strong>. </p>\n\n<p>To a more detailed <strong>solution</strong>, see my answer <a href=\"https://stackoverflow.com/questions/6233274/android-ndkcompilation-errorlibstdcmultiple-definition-of-stdbad-excepti/34804808#34804808\">here</a>.</p>\n\n<p><em>Hope it helps!</em></p>\n"}], "owner": {"reputation": 1220, "user_id": 1526028, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/zICT4.jpg?s=128&g=1", "display_name": "jennymo", "link": "https://stackoverflow.com/users/1526028/jennymo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4664, "favorite_count": 0, "accepted_answer_id": 30799344, "answer_count": 2, "score": 1, "last_activity_date": 1452911640, "creation_date": 1433950366, "question_id": 30760883, "link": "https://stackoverflow.com/questions/30760883/android-ndk-multiple-definition-of-o-and-c-files", "title": "Android NDK: Multiple definition of .o and .c files", "body": "<p>i want to implement a library with java and native code in my app project in Android Studio. Everytime when I change the c++ code, I have to recompile the c++ files so that the changes take effect in my app. Unfortunately the ndk-build command does not compile completely...</p>\n\n<p>Everytime I run this command, it compiles all the c++ files and when it tries to create the .so-files I get lots of errors that are all looking like this (just with others classes). The changes I do are very simple and did not add any c++ include headers etc.</p>\n\n<pre><code>/Users/jenny/appproject/libraryWithNativeCode/src/main/obj/local/armeabi/objs/libraryWithNativeCode-mobile-example-app/src/WorldPins/WorldPinMessage.o: In function `_STLP_alloc_proxy':\n/Users/jenny/NDK/android-ndk-r10e/sources/cxx-stl/stlport/stlport/stl/_string.c:647: multiple definition of `ExampleApp::WorldPins::WorldPinMessage::FocussedModel() const'\n/Users/jenny/appproject/libraryWithNativeCode/src/main/obj/local/armeabi/objs/libraryWithNativeCode-mobile-example-app/src/WorldPins/WorldPinMessage.o:/Users/jenny/NDK/android-ndk-r10e/sources/cxx-stl/stlport/stlport/stl/_string.c:647: first defined here\n</code></pre>\n\n<p>My Android.mk and the Application.mk looks like the following</p>\n\n<p><strong>Android.mk</strong></p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\n$(info TARGET_ARCH_ABI is $(TARGET_ARCH_ABI))\n\n$(info LOCAL_PATH is $(LOCAL_PATH))\n\nPREBUILT_LIBS := $(LOCAL_PATH)/../libs/libraryWithNativeCode/prebuilt/android-$(TARGET_ARCH_ABI)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := libraryWithNativeCode-sdk-lib\nLOCAL_SRC_FILES := $(PREBUILT_LIBS)/libraryWithNativeCode-sdk.a\ninclude $(PREBUILT_STATIC_LIBRARY)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := png-lib\nLOCAL_SRC_FILES := $(PREBUILT_LIBS)/libpng.a\nLOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../libs/libraryWithNativeCode/png\ninclude $(PREBUILT_STATIC_LIBRARY)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := curl-lib\nLOCAL_SRC_FILES := $(PREBUILT_LIBS)/libcurl.a\nLOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../libs/libraryWithNativeCode/curl/android-$(TARGET_ARCH_ABI)\ninclude $(PREBUILT_STATIC_LIBRARY)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := ssl-lib\nLOCAL_SRC_FILES := $(PREBUILT_LIBS)/libssl.a\ninclude $(PREBUILT_STATIC_LIBRARY)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := crypto-lib\nLOCAL_SRC_FILES := $(PREBUILT_LIBS)/libcrypto.a\ninclude $(PREBUILT_STATIC_LIBRARY)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := http-parser-lib\nLOCAL_SRC_FILES := $(PREBUILT_LIBS)/libhttp-parser.a\nLOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../libs/libraryWithNativeCode/http-parser\ninclude $(PREBUILT_STATIC_LIBRARY)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := jpeg-lib\nLOCAL_SRC_FILES := $(PREBUILT_LIBS)/libjpeg.a\ninclude $(PREBUILT_STATIC_LIBRARY)\n\ninclude $(CLEAR_VARS)\nLOCAL_MODULE := turbojpeg-lib\nLOCAL_SRC_FILES := $(PREBUILT_LIBS)/libturbojpeg.a\nLOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/../libs/libraryWithNativeCode/jpeg-turbo\ninclude $(PREBUILT_STATIC_LIBRARY)\n\ninclude $(CLEAR_VARS)\n\nLOCAL_MODULE := libraryWithNativeCode-mobile-example-app\nLOCAL_LDLIBS := -llog -landroid -lEGL -lGLESv2 -lz -lm\nLOCAL_LDLIBS += -fuse-ld=bfd\nLOCAL_STATIC_LIBRARIES := libraryWithNativeCode-sdk-lib png-lib curl-lib ssl-lib crypto-lib http-parser-lib jpeg-lib turbojpeg-lib android_native_app_glue ndk_helper\n\nLOCAL_CFLAGS += -Wall -Wno-unknown-pragmas -Wno-sign-compare -Wno-format-security -Wno-reorder\n#LOCAL_CFLAGS += -Werror\n\nifdef COMPILE_CPP_11\n  $(info Configured for C++11)\n  LOCAL_CPPFLAGS += -DCOMPILE_CPP_11=1 -std=c++11\nelse\n  $(info Configured for C++0x)\nendif\n\nos_name:=$(shell uname -s)\n\nget_android_cpp_files_cmd := find $(LOCAL_PATH) -type f  -iname \"*.cpp\"\nget_android_includes_cmd  := find $(LOCAL_PATH) -type d\nget_shared_cpp_files_cmd  := find $(LOCAL_PATH)/src -type f  -iname \"*.cpp\"\nget_shared_includes_cmd   := find $(LOCAL_PATH)/src -type d\nget_platform_includes_cmd := find $(LOCAL_PATH)/../libs/libraryWithNativeCode/platform -type d ! -path \"*/OSX/*\" ! -path \"*/iOS/*\"\n\n\nifeq ($(os_name),Darwin)\n    cppfiles := ${shell ${get_android_cpp_files_cmd}}\n    cppfiles += ${shell ${get_shared_cpp_files_cmd}}\n\n    includes := ${shell ${get_android_includes_cmd}}\n    includes += ${shell ${get_shared_includes_cmd}}\n    includes += ${shell ${get_platform_includes_cmd}}\nelse\n    # assume windows if not specified for now (due to no uname)\n    cppfiles := ${shell sh -c '${get_android_cpp_files_cmd}'}\n    cppfiles += ${shell sh -c '${get_shared_cpp_files_cmd}'}\n\n    includes := ${shell sh -c '${get_android_includes_cmd}'}\n    includes += ${shell sh -c '${get_shared_includes_cmd}'}\n    includes += ${shell sh -c '${get_platform_includes_cmd}'}\nendif\n\n\nLOCAL_SRC_FILES := $(cppfiles:$(LOCAL_PATH)/%=%)\nLOCAL_C_INCLUDES := $(includes)\n\nLOCAL_C_INCLUDES += $(LOCAL_PATH)/../libs/libraryWithNativeCode/rapidjson\nLOCAL_C_INCLUDES += $(LOCAL_PATH)/../libs/libraryWithNativeCode/rapidjson/internal\n\ninclude $(BUILD_SHARED_LIBRARY)\n\n$(call import-module,android/native_app_glue)\n$(call import-module,android/ndk_helper)\n</code></pre>\n\n<p><strong>Application.mk</strong></p>\n\n<pre><code>APP_PLATFORM := android-12\nAPP_STL := stlport_shared\nAPP_ABI := armeabi,armeabi-v7a,arm64-v8a\n</code></pre>\n\n<p>Anyone has an idea how to fix this?</p>\n"}, {"tags": ["c++", "ios", "xcode", "include"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 5755621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abbca1d67af9d286bf0e61271947546?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan MacKenzie", "link": "https://stackoverflow.com/users/5755621/dylan-mackenzie"}, "is_accepted": true, "score": 1, "last_activity_date": 1452143658, "creation_date": 1452143658, "answer_id": 34647805, "question_id": 30760809, "link": "https://stackoverflow.com/questions/30760809/xcode-7-handling-of-include-files-changed/34647805#34647805", "title": "Xcode 7 handling of include files changed", "body": "<p>There is a setting that should fix your problem. In the Utilities box to the right of the project screen there is an option labeled location. The default is \"Relative to Group\", changing it to \"Relative to Project\" should fix your problem. To change it for multiple files at once, you just have to select them all in the Project Navigator and the drop-down box should be available. The location option is the third from the top and the Utilities show/hide button is the top right of the window in Xcode 7.2.</p>\n"}], "owner": {"reputation": 279, "user_id": 4692954, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b6d0a9ac015f25cecdbeeb14c2f1a771?s=128&d=identicon&r=PG&f=1", "display_name": "James Takarashy", "link": "https://stackoverflow.com/users/4692954/james-takarashy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 34647805, "answer_count": 1, "score": 0, "last_activity_date": 1452143658, "creation_date": 1433950164, "question_id": 30760809, "link": "https://stackoverflow.com/questions/30760809/xcode-7-handling-of-include-files-changed", "title": "Xcode 7 handling of include files changed", "body": "<p>Since Xcode 7 came out, I tried to compile and run my game with it, to see the awesome performance boost ;).</p>\n\n<p>The only problem is that apparently the handling of #include files changed in Xcode 7. The best way to explain it would be with an example:</p>\n\n<p>We have an imaginary project with the flowing structure:</p>\n\n<ul>\n<li>source_folder\n<ul>\n<li>main_header.h</li>\n<li>Utility_code\n<ul>\n<li>my_class.cpp</li>\n<li>my_class.h</li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>Now we want to include the main header file in my_class.cpp. In Xcode 6, we would write</p>\n\n<p><strong>#include \"main_class.h\"</strong></p>\n\n<p>into my_class.cpp and everything would work since the starting point of includes is at the source_folder level.</p>\n\n<hr>\n\n<p>In Xcode 7, this changed and one would have to write</p>\n\n<p><strong>#include \"../main_class.h\"</strong></p>\n\n<p>since the starting point is at the same path as our my_class.cpp file.</p>\n\n<p>My project is rather huge and rewriting all includes is not an option. So my question is if someone knows if this is just a setting of Xcode 7 or maybe just a bug?!?!</p>\n\n<p>Your help is much apreciated!\nCheers,\nTK</p>\n"}, {"tags": ["c++", "io", "streambuf"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1433950403, "post_id": 30760759, "comment_id": 49574596, "body": "Maybe you meant How can I do that in std::streambuf."}], "answers": [{"tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": true, "score": 0, "last_activity_date": 1433950468, "creation_date": 1433950468, "answer_id": 30760926, "question_id": 30760759, "link": "https://stackoverflow.com/questions/30760759/custom-streambuffer-in-stdofstream/30760926#30760926", "title": "Custom streambuffer in std::ofstream", "body": "<p>The concrete file stream classes have their own <code>rdbuf()</code> method that takes  0 arguments and it <em>hides</em> the other <code>rdbuf()</code> method inherited from the virtual base <code>std::basic_ios</code>. Qualifying the name to lookup the base class method should work:</p>\n\n<pre><code>std::ofstream ofs;\nofs.basic_ios&lt;char&gt;::rdbuf(example.rdbuf());\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4912670"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "accepted_answer_id": 30760926, "answer_count": 1, "score": 0, "last_activity_date": 1433950468, "creation_date": 1433950037, "question_id": 30760759, "link": "https://stackoverflow.com/questions/30760759/custom-streambuffer-in-stdofstream", "title": "Custom streambuffer in std::ofstream", "body": "<p>I know that in <code>std::ostream</code>, I can use a custom <code>streambuf</code> through either stating so in the constructor: </p>\n\n<pre><code>std::ofstream temp;\ntemp.open(\"file.txt\", std::ios_base::in);\nstd::ostream example(temp.rdbuf());\n</code></pre>\n\n<p>as well as by setting it afterwards (same first two lines as before, but change the last line to:</p>\n\n<pre><code>std::ostream example;\nexample.rdbuf(temp.rdbuf());\n</code></pre>\n\n<p>My question is: How can I do that in <code>std::ofstream</code>? I want to be able to overwrite the methods <code>xsgetn</code> and <code>xsputn</code> implemented in <code>std::streambuf</code> in my own custom class and use this in my <code>ofstream</code>, but, short of writing my own custom <code>ofstream</code> am unsure of how to do so.</p>\n"}, {"tags": ["c++", "floating", "rate", "coupon", "quantlib"], "comments": [{"owner": {"reputation": 1956, "user_id": 878915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0870e5d6b30b12a448c8b0a2fe1f20?s=128&d=identicon&r=PG", "display_name": "shargors", "link": "https://stackoverflow.com/users/878915/shargors"}, "edited": false, "score": 0, "creation_date": 1433971272, "post_id": 30760682, "comment_id": 49587178, "body": "what is the question? thanks"}], "answers": [{"tags": [], "owner": {"reputation": 229, "user_id": 4974561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b88bdd7a7cb5d398f935def3cf9208e?s=128&d=identicon&r=PG&f=1", "display_name": "MisterC", "link": "https://stackoverflow.com/users/4974561/misterc"}, "is_accepted": false, "score": 2, "last_activity_date": 1433957752, "creation_date": 1433957752, "answer_id": 30763468, "question_id": 30760682, "link": "https://stackoverflow.com/questions/30760682/floatingratebond-cashflow-retrieval-and-printing/30763468#30763468", "title": "FloatingRateBond cashflow retrieval and printing", "body": "<p>Your question is not really clear. You're trying to iterate <code>Leg</code>, which should be defined as</p>\n\n<p><code>typedef std::vector&lt; boost::shared_ptr&lt;CashFlow&gt; &gt; Leg;</code><a href=\"http://cogitolearning.co.uk/?p=1540\" rel=\"nofollow\">source</a></p>\n\n<p>So if <code>it = cf.begin()</code>, than <code>*it</code> is of type <code>boost::shared_ptr&lt;CashFlow&gt;</code>, which would explain the type <code>N5boost10shared_ptrIN8QuantLib8CashFlowEEE</code> and the address <code>0x14365170</code>.</p>\n\n<p>Have you tried to de-referece one more time, to get <code>CashFlow</code>? Was that your problem?</p>\n"}, {"comments": [{"owner": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "edited": false, "score": 0, "creation_date": 1434017815, "post_id": 30767318, "comment_id": 49605973, "body": "<code>(*it)-&gt;amount()</code> should work, unless there was a problem with the calculation. What was the error?"}, {"owner": {"reputation": 41, "user_id": 4995320, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155599352430214/picture?type=large", "display_name": "Lucas Triana", "link": "https://stackoverflow.com/users/4995320/lucas-triana"}, "reply_to_user": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "edited": false, "score": 0, "creation_date": 1434027077, "post_id": 30767318, "comment_id": 49612586, "body": "Basically It was telling me that there was no amount() function on compilation."}], "tags": [], "owner": {"reputation": 41, "user_id": 4995320, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155599352430214/picture?type=large", "display_name": "Lucas Triana", "link": "https://stackoverflow.com/users/4995320/lucas-triana"}, "is_accepted": false, "score": 0, "last_activity_date": 1434027028, "last_edit_date": 1434027028, "creation_date": 1433970451, "answer_id": 30767318, "question_id": 30760682, "link": "https://stackoverflow.com/questions/30760682/floatingratebond-cashflow-retrieval-and-printing/30767318#30767318", "title": "FloatingRateBond cashflow retrieval and printing", "body": "<p>I have. however I get the same thing. My collegue solved it by not using an iterator but just a simple for loop and then pointing to the ->amount()</p>\n\n<p>I don't understand however how is this different given that quantlib is built upon STL and boost.</p>\n\n<p>like so:</p>\n\n<pre><code>Leg cf=floatingRateBond.cashflows();\n     for (Size j=0; j&lt;cf.size()-1; j++) {\n            if (!cf[j]-&gt;hasOccurred(settlementDate, false)) {\n                Date myDate =  cf[j]-&gt;date();\n                Real Amount = cf[j]-&gt;amount();\n                cout &lt;&lt; \"Date is \" &lt;&lt; myDate &lt;&lt; \"  |  Amount is \" &lt;&lt; Amount &lt;&lt; endl;\n\n\n            }\n        }\n</code></pre>\n\n<p>If it did (*it)->amount(); it would yield an error.</p>\n"}], "owner": {"reputation": 41, "user_id": 4995320, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10155599352430214/picture?type=large", "display_name": "Lucas Triana", "link": "https://stackoverflow.com/users/4995320/lucas-triana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "closed_date": 1434037394, "answer_count": 2, "score": -2, "last_activity_date": 1434027028, "creation_date": 1433949823, "last_edit_date": 1433951272, "question_id": 30760682, "link": "https://stackoverflow.com/questions/30760682/floatingratebond-cashflow-retrieval-and-printing", "closed_reason": "Needs details or clarity", "title": "FloatingRateBond cashflow retrieval and printing", "body": "<p>I am using the <code>FloatingRateBond</code> class to create a floating rate bond object, which I have already priced correctly. However, now I need to retrieve the cashflows and the dirty price to decompose the yield. I have been trying the following without any success:</p>\n\n<pre><code>Leg cf=floatingRateBond.cashflows();\n     Leg::iterator it;\n     for(it=cf.begin();it!=cf.end();++it)\n        cout&lt;&lt;\"Type: \"&lt;&lt;typeid(*it).name()&lt;&lt; \"    value:\" &lt;&lt; *it&lt;&lt;endl;\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>Type: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14362a50\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14362c40\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14362e70\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x143630a0\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x143632d0\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14363500\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14363730\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14363960\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14363b90\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14363dc0\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14363ff0\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14364220\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14364450\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14364680\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x143648b0\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14364ae0\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14364d10\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14364f40\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14365170\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x143653a0\nType: N5boost10shared_ptrIN8QuantLib8CashFlowEEE    value:0x14362660\n</code></pre>\n\n<p>thanks</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 0, "creation_date": 1433949860, "post_id": 30760638, "comment_id": 49574198, "body": "in templates &amp;&amp; does not necessary mean &#39;rvalue reference&#39;, but &#39;closest matching type, including rvalue ref&#39;"}, {"owner": {"reputation": 177, "user_id": 3865098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w38uA.jpg?s=128&g=1", "display_name": "tbukic", "link": "https://stackoverflow.com/users/3865098/tbukic"}, "reply_to_user": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 0, "creation_date": 1433949927, "post_id": 30760638, "comment_id": 49574255, "body": "I know. But: in <code>flip(g, j, 2)</code> third argument is rvalue of type <code>int &amp;&amp;</code>. Than, t2 is deduced from <code>int &amp;&amp; &amp;&amp; t2</code> to <code>int &amp;&amp; t2</code>, which IS right reference. Apparently, it is not rvalue, although  it was initialized by one."}, {"owner": {"reputation": 57058, "user_id": 476681, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/v9mVv.jpg?s=128&g=1", "display_name": "B\u0408\u043e\u0432\u0438\u045b", "link": "https://stackoverflow.com/users/476681/b%d0%88%d0%be%d0%b2%d0%b8%d1%9b"}, "edited": false, "score": 0, "creation_date": 1433950147, "post_id": 30760638, "comment_id": 49574402, "body": "google for &quot;c++ universal reference&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 3865098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w38uA.jpg?s=128&g=1", "display_name": "tbukic", "link": "https://stackoverflow.com/users/3865098/tbukic"}, "edited": false, "score": 0, "creation_date": 1433950556, "post_id": 30760861, "comment_id": 49574694, "body": "Thanx! I knew the solution, but didn&#39;t totally understand the source of problem. &quot;If it has a name&quot; is the key thing and it&#39;s totally clear to me, now. :)"}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": true, "score": 5, "last_activity_date": 1433950298, "creation_date": 1433950298, "answer_id": 30760861, "question_id": 30760638, "link": "https://stackoverflow.com/questions/30760638/right-reference-on-lvalue/30760861#30760861", "title": "Right reference on lvalue", "body": "<p>There's the <a href=\"http://thbecker.net/articles/rvalue_references/section_05.html\" rel=\"noreferrer\">\"if it has a name\"</a> rule saying that within code like this, if the variable has a name (in this case, your <code>t2</code>) then at that point it becomes an lvalue. (See also Scott Meyers <a href=\"http://shop.oreilly.com/product/0636920033707.do\" rel=\"noreferrer\">Effective Modern C++</a>.)</p>\n\n<p>To preserve the original intent of the caller, you would indeed use <a href=\"http://en.cppreference.com/w/cpp/utility/forward\" rel=\"noreferrer\">perfect forwarding</a>:</p>\n\n<pre><code>g(std::forward&lt;T2&gt;(t2), ...)\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 3865098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w38uA.jpg?s=128&g=1", "display_name": "tbukic", "link": "https://stackoverflow.com/users/3865098/tbukic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 30760861, "answer_count": 1, "score": 2, "last_activity_date": 1433950298, "creation_date": 1433949723, "question_id": 30760638, "link": "https://stackoverflow.com/questions/30760638/right-reference-on-lvalue", "title": "Right reference on lvalue", "body": "<p>When does rvalue become right reference on lvalue?</p>\n\n<p>Example is the following, and it should be solved with <code>std::forward</code>:</p>\n\n<pre><code>void g(int &amp;&amp; v1, int &amp; v2)\n{\n    std::cout &lt;&lt; v1 &lt;&lt; \" \" &lt;&lt; ++v2 &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename F, typename T1, typename T2&gt;\nvoid flip(F f,T1 &amp;&amp; t1, T2  &amp;&amp; t2){\n    g(t2, t1);\n}\n</code></pre>\n\n<p>Error occurs on call like this:</p>\n\n<pre><code>flip(g, j, 2);\n</code></pre>\n\n<p>My problem is:\nin <code>flip(g, j 2)</code>, third argument <code>2</code> is rvalue.<br />\nIn function <code>flip</code>, argument <code>t2</code> is right reference on 2. When <code>g</code> is called, it seems that <code>t2</code> is right reference to <strong>lvalue</strong>.<br />\nIn what point did rvalue, received by reference (without copying?), became lvalue?</p>\n\n<p>Here is example: <a href=\"https://ideone.com/cJvFCg\" rel=\"nofollow\">https://ideone.com/cJvFCg</a></p>\n"}, {"tags": ["c++", "c++11", "cereal"], "answers": [{"tags": [], "owner": {"reputation": 98, "user_id": 4782442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gv1GL.jpg?s=128&g=1", "display_name": "Enhex", "link": "https://stackoverflow.com/users/4782442/enhex"}, "is_accepted": true, "score": 0, "last_activity_date": 1434000292, "creation_date": 1434000292, "answer_id": 30772226, "question_id": 30760616, "link": "https://stackoverflow.com/questions/30760616/c-cereal-archive-type-specialization-not-working/30772226#30772226", "title": "C++ Cereal Archive Type Specialization not working", "body": "<p>I brought this question as an issue on Cereal's Github and got an answer:\n<a href=\"https://github.com/USCiLab/cereal/issues/197\" rel=\"nofollow\">https://github.com/USCiLab/cereal/issues/197</a></p>\n\n<p>The problem was the templated version of make_nvp, so</p>\n\n<p><code>ar(cereal::make_nvp&lt;Archive&gt;(i.first, i.second));</code></p>\n\n<p>becomes</p>\n\n<p><code>ar(cereal::make_nvp(i.first, i.second));</code></p>\n\n<p>The documentation was updated so this shouldn't be a problem anymore.</p>\n"}], "owner": {"reputation": 98, "user_id": 4782442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gv1GL.jpg?s=128&g=1", "display_name": "Enhex", "link": "https://stackoverflow.com/users/4782442/enhex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 30772226, "answer_count": 1, "score": 1, "last_activity_date": 1434000292, "creation_date": 1433949665, "last_edit_date": 1433950023, "question_id": 30760616, "link": "https://stackoverflow.com/questions/30760616/c-cereal-archive-type-specialization-not-working", "title": "C++ Cereal Archive Type Specialization not working", "body": "<p>I'm using Cereal 1.1.2 with VS 2013.</p>\n\n<p>I've tried the example for archive specialization with types from here: <a href=\"http://uscilab.github.io/cereal/archive_specialization.html\" rel=\"nofollow\">http://uscilab.github.io/cereal/archive_specialization.html</a></p>\n\n<p>But it doesn't compile with the error:</p>\n\n<p><code>error C2665: 'cereal::make_nvp' : none of the 3 overloads could convert all the argument types ... while trying to match the argument list '(const std::string, const std::string)</code></p>\n\n<p>I'm trying to compile the following code, using the snippets from the example:</p>\n\n<pre><code>#include \"cereal\\types\\map.hpp\"\n\nnamespace cereal\n{\n    //! Saving for std::map&lt;std::string, std::string&gt; for text based archives\n    // Note that this shows off some internal cereal traits such as EnableIf,\n    // which will only allow this template to be instantiated if its predicates\n    // are true\n    template &lt;class Archive, class C, class A,\n        traits::EnableIf&lt;traits::is_text_archive&lt;Archive&gt;::value&gt; = traits::sfinae&gt; inline\n    void save(Archive &amp; ar, std::map&lt;std::string, std::string, C, A&gt; const &amp; map)\n    {\n        for (const auto &amp; i : map)\n            ar(cereal::make_nvp&lt;Archive&gt;(i.first, i.second));\n    }\n\n    //! Loading for std::map&lt;std::string, std::string&gt; for text based archives\n    template &lt;class Archive, class C, class A,\n        traits::EnableIf&lt;traits::is_text_archive&lt;Archive&gt;::value&gt; = traits::sfinae&gt; inline\n    void load(Archive &amp; ar, std::map&lt;std::string, std::string, C, A&gt; &amp; map)\n    {\n        map.clear();\n\n        auto hint = map.begin();\n        while (true)\n        {\n            const auto namePtr = ar.getNodeName();\n\n            if (!namePtr)\n                break;\n\n            std::string key = namePtr;\n            std::string value; ar(value);\n            hint = map.emplace_hint(hint, std::move(key), std::move(value));\n        }\n    }\n} // namespace cereal\n\n\n#include \"cereal\\archives\\json.hpp\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nint main()\n{\n    std::stringstream ss;\n    {\n        cereal::JSONOutputArchive ar(ss);\n        std::map&lt;std::string, std::string&gt; filter = { { \"type\", \"sensor\" }, { \"status\", \"critical\" } };\n\n        ar(CEREAL_NVP(filter));\n    }\n\n    std::cout &lt;&lt; ss.str() &lt;&lt; std::endl;\n\n    {\n        cereal::JSONInputArchive ar(ss);\n        cereal::JSONOutputArchive ar2(std::cout);\n\n        std::map&lt;std::string, std::string&gt; filter;\n\n        ar(CEREAL_NVP(filter));\n        ar2(CEREAL_NVP(filter));\n    }\n\n    std::cout &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Note that if I remove the save() function overload it does compile. But my goal is to be able to use the map key as the JSON key, so it comes out like this:</p>\n\n<pre><code>{\n    \"map\": {\n        \"a\": 1,\n        \"b\": 2\n    },\n    \"map_not_string\": [\n        {\n            \"key\": 1,\n            \"value\": 1\n        },\n        {\n            \"key\": 2,\n            \"value\": 2\n        }\n    ]\n}\n</code></pre>\n"}]