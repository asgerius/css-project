[{"tags": ["c++", "algorithm", "recursion", "binary-search-tree"], "answers": [{"tags": [], "owner": {"reputation": 8173, "user_id": 3299580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5442c85b57162abfc606d86c0083e1d?s=128&d=identicon&r=PG&f=1", "display_name": "The Dark", "link": "https://stackoverflow.com/users/3299580/the-dark"}, "is_accepted": false, "score": 1, "last_activity_date": 1461802493, "creation_date": 1461802493, "answer_id": 36903089, "question_id": 36902922, "link": "https://stackoverflow.com/questions/36902922/kth-smallest-element-in-a-bst-recursive-solution/36903089#36903089", "title": "Kth Smallest Element in a BST recursive solution", "body": "<p>There is a big difference between <code>int&amp; k</code> (by reference) and <code>int k</code> (by value) as parameters.</p>\n\n<p>In the first case, any changes that are made to <code>k</code> (such as <code>k--</code>) are reflected in the calling function's variable that was passed as a parameter. </p>\n\n<p>In the second case, the function receives its own copy of <code>k</code> and any changes that are made to it won't affect the calling function.</p>\n\n<p>You could change your <code>kthSmallest</code> to take <code>k</code> as a reference (<code>int &amp;</code>), but that would change the way you would be allowed to call it. You probably still need a helper function, but you could put all of the code into it.</p>\n"}], "owner": {"reputation": 167, "user_id": 5194977, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f4989770df7d24325db7f575571588d8?s=128&d=identicon&r=PG&f=1", "display_name": "Lara Croft", "link": "https://stackoverflow.com/users/5194977/lara-croft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461802493, "creation_date": 1461801377, "question_id": 36902922, "link": "https://stackoverflow.com/questions/36902922/kth-smallest-element-in-a-bst-recursive-solution", "title": "Kth Smallest Element in a BST recursive solution", "body": "<p>This code is to return kth smallest element in a BST.</p>\n\n<pre><code>/**\n * Definition for a binary tree node.\n * struct TreeNode {\n *     int val;\n *     TreeNode *left;\n *     TreeNode *right;\n *     TreeNode(int x) : val(x), left(NULL), right(NULL) {}\n * };\n */\nclass Solution {\npublic:\nint fid;\n\nvoid inorder(TreeNode* node, int&amp; fid, int&amp; k) {\nif (!node) return;\ninorder(node-&gt;left, fid, k);\nif (!k) return;\nfid = node-&gt;val;\nk--;\ninorder(node-&gt;right, fid, k);\n}\n\nint kthSmallest(TreeNode* root, int k) {\ninorder(root, fid, k);\nreturn fid;\n}\n};\n</code></pre>\n\n<p>It gave the correct answer.\nI thought I could simplify the code by combining inorder function and kthSmallest function together.</p>\n\n<pre><code>class Solution {\npublic:\nint fid;\n int kthSmallest(TreeNode* root, int k) {\n if (!root) return fid;\nkthSmallest(root-&gt;left, k);\nif (!k) return fid;\nfid = root-&gt;val;\nk--;\nkthSmallest(root-&gt;right, k);\nreturn fid;\n}\n};\n</code></pre>\n\n<p>It gave the wrong answer. If I input BST{2,1} k=1, it will return 2 instead of 1.\nI couldn't figure out why two codes are different. Thanks for your help!</p>\n"}, {"tags": ["c++", "file", "scanf"], "comments": [{"owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "edited": false, "score": 0, "creation_date": 1461801092, "post_id": 36902843, "comment_id": 61369689, "body": "Could you post the code you&#39;ve got so far?"}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1461801149, "post_id": 36902843, "comment_id": 61369713, "body": "There are several ways one could solve this problem, but without knowing what your instructor expects you to be able to do, it&#39;s impossible to provide an answer that will not have a chance of getting you in trouble for cheating. It seems like the right answer will not include using an array all, but rather a <code>std::map</code>."}, {"owner": {"reputation": 11, "user_id": 6263844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55dea2faf0837ecf487c85bd00e514a8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Thomas", "link": "https://stackoverflow.com/users/6263844/andrew-thomas"}, "edited": false, "score": 0, "creation_date": 1461801345, "post_id": 36902843, "comment_id": 61369768, "body": "That is what I have been trying to figure out. the way to do it without a std::map since that was not taught. It was not taught in the course however it is in the book, and if i can demonstrate knowledge of it then so be it"}, {"owner": {"reputation": 11, "user_id": 6263844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55dea2faf0837ecf487c85bd00e514a8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Thomas", "link": "https://stackoverflow.com/users/6263844/andrew-thomas"}, "edited": false, "score": 0, "creation_date": 1461802483, "post_id": 36902843, "comment_id": 61370080, "body": "Sorry about that, new to this website. The file is printed more as lines with one word in each of them. My  thought process was to create an array of characters or strings and compare letter by letter, I believe i have the comparison portion down"}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1461802609, "post_id": 36902843, "comment_id": 61370118, "body": "Several problems here, but what should be done is not all that obvious. One problem is you seem to not understand what <code>fscanf(..., &quot;%s&quot;, ...)</code> does -- it does not scan in a letter, it scans in the full word. The actual solution to your problem will be more difficult than that though... and still I feel that how you go about it needs to conform to your instructor&#39;s expectations -- and nobody here knows what you are / what s/he feels you should know. I expect though that you need two arrays, one of words and another of counters (ints)."}, {"owner": {"reputation": 11, "user_id": 6263844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55dea2faf0837ecf487c85bd00e514a8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Thomas", "link": "https://stackoverflow.com/users/6263844/andrew-thomas"}, "edited": false, "score": 0, "creation_date": 1461803362, "post_id": 36902843, "comment_id": 61370292, "body": "Yes the original loop i had would scan in the full word, just the way i thought about it i seemed to want it in more of a character by character array, i tried %c but that was too unorganized, I either need a better way to store characters, which im not sure of, or my program for comparing the words should change. I am leaning towards the changing of the comparison now, just thought id see if this was possible first. your thoughts on this are appreciated by the way"}, {"owner": {"reputation": 11, "user_id": 6263844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55dea2faf0837ecf487c85bd00e514a8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Thomas", "link": "https://stackoverflow.com/users/6263844/andrew-thomas"}, "edited": false, "score": 0, "creation_date": 1461803430, "post_id": 36902843, "comment_id": 61370306, "body": "If i were to save the array of several words, is there a simple way to look at the individual characters inside those words, or do you think i should go another route?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 1, "creation_date": 1461803852, "post_id": 36902843, "comment_id": 61370409, "body": "Implement in steps.  First, read the input file, and output the words as you read them.  that will prove you can read the input.  Then you need to figure out the data structure you want to use to track the words.  Only you (and your instructor) can say whether library data structures such as <code>std::map</code> or <code>std::string</code> are acceptable for use.  Once you have the data structure(s) decided on (and implemented if you need to do that), it&#39;s more or less a simple matter of reading the input, updating the data structure, and outputting the results based on that data structure."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1461805649, "post_id": 36903245, "comment_id": 61370823, "body": "Why not just <code>while (in &gt;&gt; word) myWords[word]++;</code>? If <code>word</code> doesn&#39;t exist, <code>map</code> will create it, init it to 0,  and the <code>++</code> will set it to 1 lickety-split. I can&#39;t think of a good reason to perform the look-up twice."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1461813311, "post_id": 36903245, "comment_id": 61372870, "body": "@user4581301 does map initialize the int to 0? Doesn&#39;t it just call the constructor? Ints are not initialized to 0 by default."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1461868158, "post_id": 36903245, "comment_id": 61406931, "body": "By default, no, and there isn&#39;t really a constructor for <code>int</code> but constructor-like behaviour has to exist or all the standard containers  would require custom template specialization for every basic datatype or crap out as soon as they had to expand <code>TYPE()</code>.  Playing around, in <code>int test = int();</code>,  <code>test</code> is 0. For <code>int test = int(1);</code> <code>test</code> is 1. Can&#39;t cite the standard--have to buy me a copy some day--but too many things would break (or be a real pain to implement) if this bit of syntactic sugar was left out."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1461868602, "post_id": 36903245, "comment_id": 61407210, "body": "@user4581301 Well lets call mine the safe version for now. I will have a look around and see if i can find an answer for this."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1461868981, "post_id": 36903245, "comment_id": 61407414, "body": "Best I found while looking for some authority to back me, or cite the section of the standard is : <a href=\"http://stackoverflow.com/questions/5113365/do-built-in-types-have-default-constructors\" title=\"do built in types have default constructors\">stackoverflow.com/questions/5113365/&hellip;</a> . Doesn&#39;t cover the inner workings of <code>map</code>, though."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1461804323, "last_edit_date": 1495541770, "creation_date": 1461803814, "answer_id": 36903245, "question_id": 36902843, "link": "https://stackoverflow.com/questions/36902843/simple-reading-file-issue-with-array/36903245#36903245", "title": "Simple reading file issue with array?", "body": "<p>What you are trying to do is really quite simple. Lets break it down:</p>\n\n<ol>\n<li>Read in each word in a file.</li>\n<li>Store it in something that recognises individual words and can increment a number (a <code>std::map</code>).</li>\n<li>Print out the result.</li>\n</ol>\n\n<hr>\n\n<h2>Part 1 - Read each word</h2>\n\n<p>Lets read in a file word by word. Searching <a href=\"https://stackoverflow.com/questions/20372661/read-word-by-word-from-file-in-c\"><em>read in a file word by word c++</em></a> would have sufficed but here is a short example:</p>\n\n<pre><code>ifstream file; // A in file stream, the c++ way of reading files. \nfile.open (\"example.txt\");\nstring word; // A word to store each word. \n\n// Read each word. \nwhile ( file &gt;&gt; word) {\n    // Do something with your word. (Part 2)\n}\n</code></pre>\n\n<p>Its as easy as that!</p>\n\n<hr>\n\n<h2>Part 2 - Store them in a map</h2>\n\n<p>Now we want to have a map, this is because a map will store only unique words and we can use its value to count the number of each unique word. Read about maps <a href=\"http://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\">here</a>. We need a string as the key and an int to count the words, so:</p>\n\n<pre><code>std::map&lt;std::string, int&gt; myWords;\n</code></pre>\n\n<p>To put them in, we need to check if the word already exists, otherwise we set it to one:</p>\n\n<pre><code>// See if the map already contains the word (not only is this easy, it is also very efficient!)\n// If we dont contain the word then we get an iterator to past the end of the map. \nif (myWords.find(word) == myWords.end()) {\n    myWords[word] = 1; // If our map doesn't already have this word \n                       // we have encountered our first!\n} else {\n    myWords[word]++; // The map already has the word so just increment it. \n} \n</code></pre>\n\n<h2>Part 3 - Print them out</h2>\n\n<p>The easy part, simply iterate over the map and print them out:</p>\n\n<pre><code>for (auto wordPair : myWords) {\n    std::cout &lt;&lt; wordPair.first &lt;&lt; \" \" &lt;&lt; wordPair.second &lt;&lt; std::endl;\n}\n</code></pre>\n\n<hr>\n\n<h2>Put it all together</h2>\n\n<p>And you get this:</p>\n\n<p><a href=\"http://ideone.com/TCMOKh\" rel=\"nofollow noreferrer\">http://ideone.com/TCMOKh</a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6263844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55dea2faf0837ecf487c85bd00e514a8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Thomas", "link": "https://stackoverflow.com/users/6263844/andrew-thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1461893633, "last_edit_date": 1461893633, "creation_date": 1461892993, "answer_id": 36928053, "question_id": 36902843, "link": "https://stackoverflow.com/questions/36902843/simple-reading-file-issue-with-array/36928053#36928053", "title": "Simple reading file issue with array?", "body": "<p>So I have been working on it and I came up with the idea to have the data come in character by character with<code>fscanf(file, \"%c\", &amp;array[]);</code>and i have been working on an algorithm to set a certain amount of the characters before a '\\n' into a smaller array to use it tom compare to the full string. in the file i have added spaces to any word that was a few characters so that the \"word sizes are all the same with the spaces, the arrays are successful just having some issues witht  the algorithm itself. \n`</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cctype&gt;\n#define Words 9\n#define Letters 6\n#define CHARACT Words*Letters\n#define CORRECT 3\n\nint main(void){\n\ndouble xx;\nint match=0, indx=0, i=0, k=0, j=0, b, read=0, r, t, track=0;\nchar shrt[Letters],  Long[CHARACT], c;\n\n\nFILE *file;\nfile =fopen(\"C:\\\\Users\\\\Andrew\\\\Documents\\\\te2.txt\", \"r\");\nif(file != NULL)\n{\n    // initialize long string (full file by characters)\n    for(k=0; k&lt;CHARACT; k++)\n        {\n        fscanf(file, \"%c\", &amp;Long[k]);\n        }\n\n    // set up shrt[] to compare to rest of array\n    while(track &lt;= CHARACT)\n    {\n    indx+=track;\n        //STEP 1: take shrt[] out of Long[] for comparisons\n        for(r=0; r&lt;Letters; r++)\n            {\n                shrt[r] = Long[indx];\n                indx++;\n                if(shrt[r] == '\\n')\n                    break;\n            }\n\n        for(t=0; t&lt;CHARACT; t++)\n        {\n            match=0;\n            int VV = track*Letters;\n                // STEP 2: keep shrt[] constant, compare to full string one by one \n                for(int p=0; p&lt;Letters-2; p++)\n                {\n                    if(shrt[p] == Long[VV])\n                        {\n                            match++;\n                        }\n                }\n            if(match &gt;= CORRECT)\n            {\n                for(int ee=0; ee&lt;Letters; ee++)\n                {\n                    printf(\"%c\", shrt[ee]);\n                }\n                printf(\"  %i\", match);\n            }\n            track+=Letters;\n        }\n\n    }// big for loop\n\n\n\n\n    // TESTING TESTING\n    printf(\"\\n\\n\\nTEST\\n\\n\");\n    for(k=0; k&lt;CHARACT; k++)                \n        printf(\"%c\", Long[k]);              // delete when ready\n    printf(\"%i\", read);\n\n}// big if\nelse{\n    printf(\"error\");\n}\n    fclose(file);\n    scanf(\"%f\", &amp;xx);\nreturn 0;\n}`\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6263844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55dea2faf0837ecf487c85bd00e514a8?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Thomas", "link": "https://stackoverflow.com/users/6263844/andrew-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1461893633, "creation_date": 1461800858, "last_edit_date": 1461803557, "question_id": 36902843, "link": "https://stackoverflow.com/questions/36902843/simple-reading-file-issue-with-array", "title": "Simple reading file issue with array?", "body": "<p>I am working on a project for a basic programming class and am not entirely familiar with strings and all. The goal of the program is to take one simple text file with a few random, repeated words, and return a file with each separate word and the number of times it appears in the file. The input file looks something like </p>\n\n<pre><code>Class\nText\nClass\nfall\nmark\nmark\nText\n</code></pre>\n\n<p>and the output should read, </p>\n\n<pre><code>Class 2\nText 2\nfall 1\nmark 2\n</code></pre>\n\n<p>I am having trouble reading and setting up an array for the input data. Not sure exactly how to set it up. Any suggestions would be great.</p>\n\n<pre><code>int main(void)\n{\nint k=0, p=0, words=0, match=0, ch=0;\ndouble xx;\nchar I[WORD][LETTER; \n\nFILE *file;\nfile = fopen(\"C:\\\\Users\\\\Andrew\\\\Documents\\\\te2.txt\", \"r\");\n\nif(file != NULL){\n\n// Count the amount of words in file set up array   \nint i=0, j=0;\nfor(i=0; i&lt;WORD; i++){\n        for(j=0; j&lt;LETTER; j++){\n    fscanf(file, \"%s\", &amp;I[i][j]);\n    ch++;\n     }}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "edited": false, "score": 0, "creation_date": 1461800961, "post_id": 36902840, "comment_id": 61369659, "body": "You are missing semi collens all over the place.... and ever where it says you need a <code>typename</code> before it (like <code>std::vector&lt;T&gt;::iterator</code>) change it to <code>typename std::vector&lt;T&gt;::iterator</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5721810"}, "reply_to_user": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "edited": false, "score": 0, "creation_date": 1461801077, "post_id": 36902840, "comment_id": 61369686, "body": "Hmm @DarthRubik ! semi collens? xD .. Anways why do i need typename? What does it do?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1461801101, "post_id": 36902840, "comment_id": 61369693, "body": "What part of &quot;need \u2018typename\u2019 before \u2018std::list&lt;T&gt;::iterator\u2019&quot; you couldn&#39;t understand?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "edited": false, "score": 2, "creation_date": 1461801138, "post_id": 36902840, "comment_id": 61369710, "body": "The error message is literal enough. So literal that you even have a keyword to ask Google."}], "answers": [{"tags": [], "owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "is_accepted": true, "score": 1, "last_activity_date": 1461801624, "last_edit_date": 1461801624, "creation_date": 1461801272, "answer_id": 36902902, "question_id": 36902840, "link": "https://stackoverflow.com/questions/36902840/error-need-typename-before-iterator/36902902#36902902", "title": "Error: need \u2018typename\u2019 before iterator", "body": "<p>Your missing many semicolons, and you also need the keyword <code>typename</code> before all the itterators.. This fixes all the issues you have:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;list&gt;\n#include&lt;vector&gt;\n\ntemplate&lt;class T&gt;\nclass ListLib {\npublic:\n    ListLib(std::list&lt;T&gt;&amp; listItem) {\n        *listT = listItem;\n    }\n\n    std::vector&lt;T&gt; convertToVector() {\n        std::vector&lt;T&gt; result;\n        typename std::list&lt;T&gt;::iterator itList;\n\n        for (itList = *listT-&gt;begin(); itList != *listT-&gt;end(); itList++)\n                result.push_back(*itList);\n\n        typename std::vector&lt;T&gt;::iterator itVec;\n        for (itVec = result.begin(); itVec != result.end(); itVec++)\n            std::cout &lt;&lt; *itVec &lt;&lt; std::endl;\n    }\nprivate:\n    std::list&lt;T&gt; *listT;\n};\n\nint main() {\n    std::list&lt;std::string&gt; sampleList;\n    std::vector&lt;std::string&gt; sampleVector;\n    sampleList.push_back(\"3\");\n    sampleList.push_back(\"4\");\n    sampleList.push_back(\"5\");\n    sampleList.push_back(\"6\");\n\n    ListLib&lt;std::string&gt; listLib(sampleList);\n    std::cout &lt;&lt; \"Hello World\" &lt;&lt; std::endl;\n}\n\n/*template&lt;class T&gt;\nvoid convertListToVector(std::list&lt;T&gt; *listItem, std::vector&lt;T&gt; *vectorConvert) {\nstd::list&lt;T&gt;::iterator it;\nfor (it = *listItem-&gt;begin(); it != *listItem-&gt;end(); it++)\n*vectorConvert-&gt;push_back(*it);\n}*/\n</code></pre>\n\n<p>Working <kbd><a href=\"http://cpp.sh/6dmyy\" rel=\"nofollow\">\"<code>C++ Fiddle</code>\"</a></kbd></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5721810"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2432, "favorite_count": 0, "closed_date": 1461801588, "accepted_answer_id": 36902902, "answer_count": 1, "score": 0, "last_activity_date": 1461801624, "creation_date": 1461800839, "question_id": 36902840, "link": "https://stackoverflow.com/questions/36902840/error-need-typename-before-iterator", "closed_reason": "Duplicate", "title": "Error: need \u2018typename\u2019 before iterator", "body": "<p>Hey guys i have this code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;list&gt;\n#include&lt;vector&gt;\n\ntemplate&lt;class T&gt;\nclass ListLib {\npublic:\n    ListLib(std::list&lt;T&gt;&amp; listItem) {\n        *listT = listItem;\n    }\n\n    std::vector&lt;T&gt; convertToVector() {\n        std::vector&lt;T&gt; result;\n        std::list&lt;T&gt;::iterator itList;\n\n        for (itList = *listT-&gt;begin(); itList != *listT-&gt;end(); itList++)\n            result-&gt;(*itList);\n\n        std::vector&lt;T&gt;::iterator itVec;\n        for (itVec = result.begin(); itVec != result.end())\n            std::cout &lt;&lt; *itVec &lt;&lt; std::endl;\n    }\nprivate:\n    std::list&lt;T&gt; *listT;\n};\n\nint main() {\n    std::list&lt;std::string&gt; sampleList;\n    std::vector&lt;std::string&gt; sampleVector;\n    sampleList.push_back(\"3\");\n    sampleList.push_back(\"4\");\n    sampleList.push_back(\"5\");\n    sampleList.push_back(\"6\");\n\n    ListLib&lt;std::string&gt; listLib(sampleList);\n    std::cout &lt;&lt; \"Hello World\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>And i tried to resolve many errors i got with this, but led to no good!I made a function that does same thing as libary im making now with a class. i need help! Here is error:</p>\n\n<pre><code>/home/ubuntu/workspace/c++/CustomLibaries/listLib.cpp: In member function \u2018std::vector&lt;T&gt; ListLib&lt;T&gt;::convertToVector()\u2019:                                                                                                                 \n/home/ubuntu/workspace/c++/CustomLibaries/listLib.cpp:15:3: error: need \u2018typename\u2019 before \u2018std::list&lt;T&gt;::iterator\u2019 because \u2018std::list&lt;T&gt;\u2019 is a dependent scope                                                                            \n   std::list&lt;T&gt;::iterator itList;                                                                                    \n   ^                                                                                                                 \n/home/ubuntu/workspace/c++/CustomLibaries/listLib.cpp:15:26: error: expected \u2018;\u2019 before \u2018itList\u2019                     \n   std::list&lt;T&gt;::iterator itList;                                                                                    \n                          ^                                                                                          \n/home/ubuntu/workspace/c++/CustomLibaries/listLib.cpp:17:8: error: \u2018itList\u2019 was not declared in this scope           \n   for (itList = *listT-&gt;begin(); itList != *listT-&gt;end(); itList++)                                                 \n        ^                                                                                                            \n/home/ubuntu/workspace/c++/CustomLibaries/listLib.cpp:18:12: error: expected unqualified-id before \u2018(\u2019 token         \n    result-&gt;(*itList);                                                                                               \n            ^                                                                                                        \n/home/ubuntu/workspace/c++/CustomLibaries/listLib.cpp:20:3: error: need \u2018typename\u2019 before \u2018std::vector&lt;T&gt;::iterator\u2019 because \u2018std::vector&lt;T&gt;\u2019 is a dependent scope                                                                        \n   std::vector&lt;T&gt;::iterator itVec;                                                                                   \n   ^                                                                                                                 \n/home/ubuntu/workspace/c++/CustomLibaries/listLib.cpp:20:28: error: expected \u2018;\u2019 before \u2018itVec\u2019                      \n   std::vector&lt;T&gt;::iterator itVec;                                                                                   \n                            ^                                                                                        \n/home/ubuntu/workspace/c++/CustomLibaries/listLib.cpp:21:8: error: \u2018itVec\u2019 was not declared in this scope            \n   for (itVec = result.begin(); itVec != result.end())                                                               \n        ^\n/home/ubuntu/workspace/c++/CustomLibaries/listLib.cpp:21:53: error: expected \u2018;\u2019 before \u2018)\u2019 token\n   for (itVec = result.begin(); itVec != result.end())\n                                                     ^\n</code></pre>\n"}, {"tags": ["c++", "smart-pointers"], "comments": [{"owner": {"reputation": 3593, "user_id": 5280543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ea2c2b205d1c4b331bbc78720115121?s=128&d=identicon&r=PG", "display_name": "Michael Albers", "link": "https://stackoverflow.com/users/5280543/michael-albers"}, "edited": false, "score": 1, "creation_date": 1461800881, "post_id": 36902813, "comment_id": 61369635, "body": "Can I ask, why are you doing this? Or is this just a basic example in lieu of something more complicated? With this example you&#39;re misusing smart pointers. You wouldn&#39;t put <code>delete this</code> in a destructor."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1461800904, "post_id": 36902813, "comment_id": 61369647, "body": "Your class <code>A</code> does not compile."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1461801011, "post_id": 36902813, "comment_id": 61369672, "body": "<code>A() : self(*this) { }</code> Huh? What is this supposed to do? What are you trying to achieve?"}, {"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "edited": false, "score": 0, "creation_date": 1461801093, "post_id": 36902813, "comment_id": 61369690, "body": "It is only an example (and apparently not a compilable one).....Not trying to actually use this code"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1461801233, "post_id": 36902813, "comment_id": 61369736, "body": "Okay, but it&#39;s hard to understand what the actual problem is, when you demonstrate your problem with an example, saying &quot;This occurs ...&quot;, when in fact, nothing occurs, because the example doesn&#39;t even compile."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1461801261, "post_id": 36902813, "comment_id": 61369744, "body": "I&#39;m afraid this example oversimplifies. Programming languages do not strive to prevent you <i>trying</i> to shoot yourself in the foot, especially C and C++. They are just tools, just as a hammer that does not prevent you from hitting yourself in the head. What I am trying to say: What is your real world use-case where this will bite you? (In addition to what @BenjaminLindley already mentioned.)"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461801446, "post_id": 36902813, "comment_id": 61369798, "body": "Are you saying that the presence of the shared_ptr reference to the parent object shouldn&#39;t count against the shared_ptr as a reference? If so, how would you ever decide to delete the object?"}, {"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1461801551, "post_id": 36902813, "comment_id": 61369826, "body": "@BaummitAugen Edited so it compiles....I am just curious if there is a smarter smart pointer (not actually looking because I need it)"}, {"owner": {"reputation": 4457, "user_id": 436084, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-aozJEg9VUWw/AAAAAAAAAAI/AAAAAAAAAAA/Fv-MMjSrXH4/photo.jpg?sz=128", "display_name": "Bill", "link": "https://stackoverflow.com/users/436084/bill"}, "edited": false, "score": 0, "creation_date": 1461801808, "post_id": 36902813, "comment_id": 61369908, "body": "what is the problem you are trying to solve? if <code>smart_ptr</code> leads to cyclic dependency in your case, you can use <code>unique_ptr</code> or other types of smart pointers."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1461802248, "post_id": 36902813, "comment_id": 61370022, "body": "Tbh, without a real world use case, my first response to this still is: Get your your owner relationships straight. I have yet to encounter a problem where some object needs to own its owner. (Maybe there is some A-B-A problem like stuff, but really, show us, there are probably ways around that.)"}, {"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1461802334, "post_id": 36902813, "comment_id": 61370046, "body": "@BaummitAugen This could show up in a linked list implementation (where every node has a reference to the next and previous node)"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1461802484, "post_id": 36902813, "comment_id": 61370081, "body": "@DarthRubik - but typically in such a linked list implementation the designer/coder would not create the cycles and instead have the back pointers be either naked pointers or weak pointers (depending on the operations he&#39;s going to allow on the linked list).  In other words, with reference counting, it is a design issue."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1461802486, "post_id": 36902813, "comment_id": 61370082, "body": "This is not a leak and doesn&#39;t indicate anything is wrong. Code may come along later and modify either or both of those smart pointers. There is absolutely nothing wrong with having two objects that have smart pointers to each other."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1461802501, "post_id": 36902813, "comment_id": 61370089, "body": "@DarthRubik Not convinced yet. In a linked list, all nodes are owned by the big list and exist independent of each other. That is, you can  delete any node at any time without more than changing some prev and next pointers, that&#39;s kind of the point of a linked list."}], "answers": [{"comments": [{"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1461802243, "post_id": 36902850, "comment_id": 61370020, "body": "Yes.  The problem with reference counting as a GC mechanism is that it can&#39;t clean up (by itself) cycles. You&#39;ve got to do it manually.  No smart pointer could detect it for you either <i>at the point of creating the cycle</i>  because it wouldn&#39;t really know which link was the problematic one.  You <i>could</i> imagine a smart pointer implementation that recorded sufficient information during the program so that at the end of a run (or at checkpoint) it could report on leaks (cycles of objects not pointed to externally).  But I&#39;m not aware of one (and it would necessarily be &quot;debug only&quot;)."}, {"owner": {"reputation": 251, "user_id": 6210960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QD5L0.jpg?s=128&g=1", "display_name": "Ethan F.", "link": "https://stackoverflow.com/users/6210960/ethan-f"}, "edited": false, "score": 0, "creation_date": 1461881782, "post_id": 36902850, "comment_id": 61413858, "body": "It is the purpose of the weak pointer, &quot;std::weak_ptr is used to break circular references of std::shared_ptr. &quot;"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1461886575, "post_id": 36902850, "comment_id": 61415295, "body": "Well, the purpose of a weak pointer is to be a weak pointer. Explaining what is a weak pointer is, and how it works, is somewhat beyond the scope of a 200 character response on stackoverflow.com. Any good book on modern C++ should give you a full explanation, and description."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 3, "last_activity_date": 1461800934, "creation_date": 1461800934, "answer_id": 36902850, "question_id": 36902813, "link": "https://stackoverflow.com/questions/36902813/smarter-smart-pointers/36902850#36902850", "title": "Smarter smart pointers", "body": "<p>A weak pointer is exactly what should be used here.</p>\n\n<p>The fact that <code>std::shared_ptr</code> implements basic reference counting, and nothing, more isn't something that was discovered recently. C++ is not a managed language, and has no facilities for automatic garbage collection. As such, circular references via <code>std::shared_ptr</code> are problematic. The solution is the weak pointer.</p>\n"}, {"comments": [{"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "edited": false, "score": 0, "creation_date": 1461801603, "post_id": 36902910, "comment_id": 61369844, "body": "That really wasn&#39;t my question (I am just trying to see about smarter smart pointers, the example was inconsequential)"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "edited": false, "score": 0, "creation_date": 1461801805, "post_id": 36902910, "comment_id": 61369905, "body": "when you say &quot;smarter smart pointers&quot; what do you mean? What exactly do you want it to do?"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "edited": false, "score": 0, "creation_date": 1461801833, "post_id": 36902910, "comment_id": 61369916, "body": "@DarthRubik - then maybe you should think of a different example ... the current example has the drawback (besides the fact it doesn&#39;t compile, apparently) that there exists an &quot;answer&quot; which, plausibly, you didn&#39;t know.  Thus, it is confusing."}, {"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "edited": false, "score": 0, "creation_date": 1461801841, "post_id": 36902910, "comment_id": 61369919, "body": "I mean one that senses when I should have used a weak pointer"}, {"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1461801869, "post_id": 36902910, "comment_id": 61369928, "body": "@davidbak I will post an alternative example"}, {"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1461802059, "post_id": 36902910, "comment_id": 61369985, "body": "@davidbak Edited my post (hope this helps)"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1461801317, "creation_date": 1461801317, "answer_id": 36902910, "question_id": 36902813, "link": "https://stackoverflow.com/questions/36902813/smarter-smart-pointers/36902910#36902910", "title": "Smarter smart pointers", "body": "<p>The solution is not this:</p>\n\n<pre><code>class A{\n  std::weak_ptr&lt;A&gt; self;\n  public:\n  A() : self(*this) { }\n};\n</code></pre>\n\n<p>the solution is this:</p>\n\n<pre><code>class A : std::enable_shared_from_this&lt;A&gt;\n{\n\n  void use_me()\n  {\n     // say i need to pass a shared_ptr to myself to some other function...\n     foo(this-&gt;shared_from_this());\n  }\n};\n\nauto var = std::make_shared&lt;A&gt;();\n</code></pre>\n"}], "owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1461802010, "creation_date": 1461800698, "last_edit_date": 1461802010, "question_id": 36902813, "link": "https://stackoverflow.com/questions/36902813/smarter-smart-pointers", "title": "Smarter smart pointers", "body": "<p>I think the concept of a pointer that cleans up after it self like <code>std::shared_ptr</code> is cool, but I was wondering if there is a better third party smart pointer out there.</p>\n\n<p>The problem with the <code>shared_ptr</code> is that of recursive references.  This occurs when you have something like this:</p>\n\n<pre><code>class A{\n  public:\n  std::shared_ptr&lt;A&gt; other;\n\n  A() { }\n};\n\n//Later\nstd::shared_ptr&lt;A&gt; a = std::make_shared&lt;A&gt;();\nstd::shared_ptr&lt;A&gt; b = std::make_shared&lt;A&gt;();\na-&gt;other = b;  //Memory leak\nb-&gt;other = a;  //Memory leak\n</code></pre>\n\n<p>Is there a smarter smart pointer out there that can sense when I should have used a weak pointer and doesn't leak (or at least gives a warning)? (After a brief google search I can not find anything)</p>\n"}, {"tags": ["c++", "multithreading", "libssh"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1461799506, "post_id": 36902415, "comment_id": 61369238, "body": "<a href=\"https://www.libssh.org/communication/\" rel=\"nofollow noreferrer\">libssh.org/communication</a> - why are you asking this question here, instead of the libssh@libssh.org&#39;s mailing list?"}, {"owner": {"reputation": 1597, "user_id": 1131067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5zIZe.png?s=128&g=1", "display_name": "ManiAm", "link": "https://stackoverflow.com/users/1131067/maniam"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1461799720, "post_id": 36902415, "comment_id": 61369311, "body": "More than 100 questions are tagged with libssh in SO and I thought that SO would be a suitable place. Moreover, developers usually monitor the relevant tags in SO and answer them. I will also post this in the libssh mailing list later. Thanks!"}], "owner": {"reputation": 1597, "user_id": 1131067, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5zIZe.png?s=128&g=1", "display_name": "ManiAm", "link": "https://stackoverflow.com/users/1131067/maniam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 687, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1461798115, "creation_date": 1461798115, "question_id": 36902415, "link": "https://stackoverflow.com/questions/36902415/libssh-and-multi-threading", "title": "libssh and multi-threading", "body": "<p>I was wondering if libssh supports multi-threaded applications. In my C++ code, I create a SSH session which will be shared among multiple threads. Each thread requests a shell, run a command and calls ssh_channel_read_timeout in a while loop to receive all output messages. Is this scenario supported by libssh?</p>\n\n<p>I found this <a href=\"http://api.libssh.org/master/libssh_tutor_threads.html\" rel=\"nofollow\">doc</a>, but I was wondering if the documentation is up to date.</p>\n"}, {"tags": ["c++", "algorithm", "boost", "linear-algebra", "numerical-analysis"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1461799066, "creation_date": 1461799066, "answer_id": 36902566, "question_id": 36902407, "link": "https://stackoverflow.com/questions/36902407/c-back-substitution-via-boost-bad-index-error/36902566#36902566", "title": "C++ - Back Substitution via Boost - Bad Index Error", "body": "<p>The condition <code>i&gt;=0</code> is <strong>always</strong> true for <code>unsigned</code> types of <code>i</code>.</p>\n\n<p>If you compile with warnings (<code>-Wall -Wextra -pedantic</code> on your GCC/Clang) then the compiler would tell you this.</p>\n"}], "owner": {"reputation": 39, "user_id": 5628688, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1687e041700b6cee89bdfed7c71de84c?s=128&d=identicon&r=PG&f=1", "display_name": "Ray Foo", "link": "https://stackoverflow.com/users/5628688/ray-foo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 36902566, "answer_count": 1, "score": 1, "last_activity_date": 1461799066, "creation_date": 1461798073, "question_id": 36902407, "link": "https://stackoverflow.com/questions/36902407/c-back-substitution-via-boost-bad-index-error", "title": "C++ - Back Substitution via Boost - Bad Index Error", "body": "<p>I have the following code for a back substitution algorithm: </p>\n\n<pre><code>#include &lt;boost\\numeric\\ublas\\matrix.hpp&gt;\ntypedef boost::numeric::ublas::matrix&lt;double&gt; dM;\ndM bSub(dM A, dM b)\n{\n    unsigned int n = (int)b.size1();\n    assert(b.size2() == 1);\n    assert(n == A.size1());\n    dM x(n, 1);\n    for (unsigned i = (n - 1); i &gt;= 0; --i)\n    {\n        double sum = 0.0;\n        for (unsigned j = (n - 1); j &gt; i; --j)\n        {\n            sum += A(i, j)*x(j, 0);\n        }\n        x(i, 0) = (b(i, 0) - sum) / A(i, i);\n    }\n\n    return x;\n}\n</code></pre>\n\n<p>A bad index error pops up when I try to run it. I am not quite sure where the error is as I can't find the problem when I am manually going through the algo.</p>\n\n<p>I have also tried incrementing the nested loop: <code>for(unsigned j = 0; j &lt; n; ++j)</code>. Again, I run into the same bad index error.</p>\n\n<p>Based on the debugger, I think the problem has to do with <code>i</code> somehow taking on a value of 4294967295, I am not sure where that number could come from as it doesn't really fit in other parts of my code.  </p>\n\n<p>Lastly, I have also written a forward substitution algo, using a very similar structure, which runs without a problem.</p>\n\n<p>Anyone have an idea what's going on?</p>\n"}, {"tags": ["c++", "templates", "c++14", "sfinae"], "answers": [{"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1461823247, "post_id": 36902487, "comment_id": 61376159, "body": "@T.C. I strongly suspect that your sentence, <i>Substitution failure is not an elephant</i>, contains an error (even though one cannot say it&#39;s false indeed)."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1461823305, "post_id": 36902487, "comment_id": 61376181, "body": "Good hint the <i>guard pack</i>, never thought of that technique: <i>+1</i>."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1461963371, "post_id": 36902487, "comment_id": 61453199, "body": "Can you illustrate with an example the necessety of this <code>int...</code>?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 1, "creation_date": 1461965504, "post_id": 36902487, "comment_id": 61454094, "body": "@Orient Without it, you can write <code>Foo&lt;2&gt;().bar&lt;1&gt;(0);</code>."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 8, "last_activity_date": 1461798557, "creation_date": 1461798557, "answer_id": 36902487, "question_id": 36902397, "link": "https://stackoverflow.com/questions/36902397/c-14-using-enable-if-t-to-select-member-function-of-class-templated-on-integra/36902487#36902487", "title": "C++-14 using enable_if_t to select member function of class templated on integral type", "body": "<p>Substitution failure is not an elephant <em>when it happens during template argument deduction</em>.</p>\n\n<p>Also, <code>enable_if_t&lt;true&gt;</code> is <code>void</code>, and you can't have a <code>void</code> template non-type parameter.</p>\n\n<p>Defer evaluation with a default template argument:</p>\n\n<pre><code>template&lt;int Dimension&gt;\nstruct Foo\n{\n    template&lt;int..., int I = Dimension, std::enable_if_t&lt;I == 1, int&gt; = 0&gt;\n    int bar(int i) const { return i; }\n    // etc.\n};\n</code></pre>\n\n<p>The unnamed parameter pack<code>int...</code> guards against attempts to explicitly specify <code>I</code>.</p>\n"}], "owner": {"reputation": 1552, "user_id": 1202808, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/35b124689a6d9fc44a7904e51d4cb5fb?s=128&d=identicon&r=PG", "display_name": "RandomBits", "link": "https://stackoverflow.com/users/1202808/randombits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1941, "favorite_count": 1, "accepted_answer_id": 36902487, "answer_count": 1, "score": 4, "last_activity_date": 1461798557, "creation_date": 1461798004, "question_id": 36902397, "link": "https://stackoverflow.com/questions/36902397/c-14-using-enable-if-t-to-select-member-function-of-class-templated-on-integra", "title": "C++-14 using enable_if_t to select member function of class templated on integral type", "body": "<p>I am trying to enable different member functions based on an integral class template parameter like so:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate&lt;int Dimension&gt;\nstruct Foo\n{\n    template&lt;std::enable_if_t&lt;Dimension == 1&gt; = 0&gt;\n    int bar(int i) const { return i; }\n\n    template&lt;std::enable_if_t&lt;Dimension == 2&gt; = 0&gt;\n    int bar(int i, int j) const { return i + j; }\n};\n\nint main(int argc, const char **argv)\n{\n    Foo&lt;1&gt; a;\n    a.bar(1);\n\n    Foo&lt;2&gt; b;\n    b.bar(1,2);\n\n    return 0;\n}\n</code></pre>\n\n<p>Using gcc5 in c++-14 mode, it fails to compile with the following errors:</p>\n\n<pre><code>tools/t1.cpp: In instantiation of 'struct Foo&lt;1&gt;':\ntools/t1.cpp:18:12:   required from here\ntools/t1.cpp:13:9: error: no type named 'type' in 'struct std::enable_if&lt;false, int&gt;'\n     int bar(int i, int j) const { return i + j; }\n         ^\ntools/t1.cpp: In instantiation of 'struct Foo&lt;2&gt;':\ntools/t1.cpp:21:12:   required from here\ntools/t1.cpp:10:9: error: no type named 'type' in 'struct std::enable_if&lt;false, int&gt;'\n     int bar(int i) const { return i; }\n</code></pre>\n\n<p>These seem to indicated the SFINAE is not doing what I expect since the enable_if_t seems to be working correctly.</p>\n\n<p>In this trivial example, overloading would work as well, but in my actual use case I need to hide the functions to prevent accidental use and / or compilation errors depending on the circumstance.</p>\n\n<p>What am I missing with SFINAE here?</p>\n"}, {"tags": ["c++", "html", "opencv"], "comments": [{"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1461841266, "post_id": 36902351, "comment_id": 61387453, "body": "Use a c++ library that does this, you may use WebRTC (with <a href=\"http://sourcey.com/webrtc-native-to-browser-video-streaming-example/\" rel=\"nofollow noreferrer\">Sourcey</a>) for example. Or maybe <a href=\"http://www.live555.com/liveMedia/\" rel=\"nofollow noreferrer\">Live555</a>"}], "owner": {"reputation": 1107, "user_id": 3930460, "user_type": "registered", "accept_rate": 39, "profile_image": "https://i.stack.imgur.com/7saJD.jpg?s=128&g=1", "display_name": "Kevin Wu", "link": "https://stackoverflow.com/users/3930460/kevin-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 592, "favorite_count": 3, "answer_count": 0, "score": 2, "last_activity_date": 1461797669, "creation_date": 1461797669, "question_id": 36902351, "link": "https://stackoverflow.com/questions/36902351/opencv-browser-live-streaming", "title": "opencv browser live streaming", "body": "<p>Currently, I am using OpenCV to record a lifestream from my webcam. I now want to display that in a browser. I was thinking of using <code>VideoWriter</code> to write the video to a file, then somehow access that file from HTML5. Is this possible? Any other suggestions?</p>\n\n<p>The following is the code I have.</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n    VideoCapture cap(0); // open the default camera\n    if(!cap.isOpened()) { // check if we succeeded\n        std::cout &lt;&lt; \"No camera found!\\n\";\n    }\n\n    namedWindow(\"Window\",1);\n    for(;;)\n    {\n        Mat frame;\n        cap &gt;&gt; frame; // get a new frame from camera\n\n        imshow(\"Window\", frame);\n        char keypress;\n        keypress = waitKey(30);\n        if(keypress==27) break;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>As can be seen, I am displaying the live stream in a window, but, as said, I want a browser lifestream. Thanks.</p>\n"}, {"tags": ["c++", "delphi", "indy"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1461797072, "post_id": 36902229, "comment_id": 61368555, "body": "How <i>specifically</i> are you <i>trying to add them</i>, and what <i>specific</i> errors are you getting? I start a new VCL Forms Application, drop a TIdHTTP component on the form, and build the project and it works fine, with no errors or warnings, and it generates an executable."}, {"owner": {"reputation": 9, "user_id": 6204331, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a805dfc2b9fdd52f3f4c3b18e6e2eae9?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/6204331/j-doe"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1461797169, "post_id": 36902229, "comment_id": 61368589, "body": "Dynamically, like &#39;TIdHTTP test*=new TIdHTTP;&#39;. The error is Undefined Symbol: TIdHTTP"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1461797289, "post_id": 36902229, "comment_id": 61368624, "body": "Then you need to add the proper include files manually. The easiest way? Drop the component on the form, compile to make sure the header files and libraries are correct, and then delete the component from the form and create it manually if you want to do so. (And <a href=\"https://stackoverflow.com/posts/36902229/edit\">edit</a> your question to be specific and to include the code you&#39;re trying to use. Without it, there&#39;s no information in your question. We shouldn&#39;t have to guess what you&#39;re asking or what you&#39;re doing.)"}, {"owner": {"reputation": 9, "user_id": 6204331, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a805dfc2b9fdd52f3f4c3b18e6e2eae9?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/6204331/j-doe"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1461797314, "post_id": 36902229, "comment_id": 61368642, "body": "I&#39;d do that, but I don&#39;t have them in the Tool Palette"}, {"owner": {"reputation": 9, "user_id": 6204331, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a805dfc2b9fdd52f3f4c3b18e6e2eae9?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/6204331/j-doe"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1461799150, "post_id": 36902229, "comment_id": 61369146, "body": "Which header files do I need to include?"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1461800190, "post_id": 36902229, "comment_id": 61369431, "body": "If you don&#39;t have them in the Component Palette, you have something wrong. What OS are you targeting? What type of application? What version of C++ Builder? (Why are you making me play 20 questions, instead of just making a substantial edit to your post and provide sufficient details there for us to use to help you?)"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6204331, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a805dfc2b9fdd52f3f4c3b18e6e2eae9?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/6204331/j-doe"}, "edited": false, "score": 0, "creation_date": 1461800927, "post_id": 36902773, "comment_id": 61369651, "body": "Thank you. Solved all my problems"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1461800489, "creation_date": 1461800489, "answer_id": 36902773, "question_id": 36902229, "link": "https://stackoverflow.com/questions/36902229/how-to-add-indy-components-to-c-builder-project/36902773#36902773", "title": "How to add Indy components to C++ Builder project?", "body": "<p>The C++ equivalent of Delphi's <code>uses</code> clause is <code>#include</code> statements for C++ header file.</p>\n\n<p>In this case, to use <code>TIdHTTP</code> in C++, you need an <code>#include &lt;IdHTTP.hpp&gt;</code> statement in your C++ code, and make sure Indy's header files are in a folder in your project's Includes search path.  If you drop a <code>TIdHTTP</code> component on a Form/Frame/DataModule at design-time, the IDE will generate the <code>#include</code> statement for you.  Otherwise you have to add it manually.</p>\n"}], "owner": {"reputation": 9, "user_id": 6204331, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a805dfc2b9fdd52f3f4c3b18e6e2eae9?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/6204331/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 721, "favorite_count": 1, "accepted_answer_id": 36902773, "answer_count": 1, "score": -3, "last_activity_date": 1461800672, "creation_date": 1461796952, "last_edit_date": 1461800672, "question_id": 36902229, "link": "https://stackoverflow.com/questions/36902229/how-to-add-indy-components-to-c-builder-project", "title": "How to add Indy components to C++ Builder project?", "body": "<p>I get undefined errors when I try to add them to an empty project. In Delphi you'd just add a 'uses'. Are there any tutorials on this?</p>\n\n<p>For example, adding:</p>\n\n<pre><code>TIdHTTP test*=new TIdHTTP;\n</code></pre>\n\n<p>produces: <code>Undefined Symbol: TIdHTTP</code></p>\n\n<p>Target platform is Win32 Release. I'm using RAD 10 Studio Seattle Version 23.0</p>\n\n<p><a href=\"http://i.stack.imgur.com/uWPNk.png\" rel=\"nofollow\">What my tool palette looks like</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1461797003, "post_id": 36902208, "comment_id": 61368523, "body": "<code>const int arr[][cow]</code> cannot be done. <code>cow</code> must be constant. Use a <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> or <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a> instead. If these are outlawed, write a small wrapper class (eg <code>struct wrapper{ int ** array, int pigs; int cows; };</code>) to carry the array and its sizes."}, {"owner": {"reputation": 5646, "user_id": 6238076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B6N6D.png?s=128&g=1", "display_name": "gdlmx", "link": "https://stackoverflow.com/users/6238076/gdlmx"}, "edited": false, "score": 0, "creation_date": 1461797025, "post_id": 36902208, "comment_id": 61368531, "body": "Welcome to SO. Please break the long lines in your code into shorter ones"}, {"owner": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 2, "creation_date": 1461797048, "post_id": 36902208, "comment_id": 61368544, "body": "What precisely do you mean by &quot;having difficulty&quot;? What&#39;s the error you&#39;re getting? See <a href=\"http://www.stackoverflow.com/help/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 0, "creation_date": 1461797301, "post_id": 36902208, "comment_id": 61368635, "body": "I also have to wonder: how much research did you do before posting? If you suspect it&#39;s a duplicate, you probably know that this has been answered before. <a href=\"https://duckduckgo.com/?q=C%2B%2B+pass+2d+array&amp;t=canonical&amp;ia=qa\" rel=\"nofollow noreferrer\">It has.</a>"}, {"owner": {"reputation": 3036, "user_id": 3466415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610a8a95f861678ab9f72ee483d1c1a7?s=128&d=identicon&r=PG&f=1", "display_name": "David K", "link": "https://stackoverflow.com/users/3466415/david-k"}, "edited": false, "score": 0, "creation_date": 1461797403, "post_id": 36902208, "comment_id": 61368673, "body": "What you&#39;re trying to do is not only illegal in C++, it doesn&#39;t make any sense as something to want to do. Before you called <code>temp-&gt;w</code> you had already said that <code>arr</code> was an array of <code>NN+1</code> columns, but inside <code>temp-&gt;w</code> you want to say it is an array of <code>cow</code> columns? Why?"}], "owner": {"reputation": 1, "user_id": 6263860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2eeea59e5d3963467e460e58e7ba8a7?s=128&d=identicon&r=PG&f=1", "display_name": "caz", "link": "https://stackoverflow.com/users/6263860/caz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1461797465, "answer_count": 0, "score": 0, "last_activity_date": 1461796860, "creation_date": 1461796860, "question_id": 36902208, "link": "https://stackoverflow.com/questions/36902208/pass-a-2d-array-from-a-class-into-another-class-c", "closed_reason": "Duplicate", "title": "Pass a 2D array from a class into another class C++", "body": "<p>I'm sure this is probably a duplicate question but I'm having difficulty passing a 2D array from one class into a function in a different class- it seems like its only expecting one argument rather than four. I'm kind of new to C++ so  I might be missing something obvious. Here's basically what the code looks like:</p>\n\n<pre><code>//global variables\n  int NN;\n\n\n class x\n{\n...\n\nvoid w(const int arr[][cow], int pig, int cow, int NN) //my problem is in here, the compiler will come up with errors like there is an expected ) before the first [] in my array and that cow isn't a variable in the scope even though from what i can tell i shouldn't have to declare it if i'm passing it in\n{\n    ... //nothing in the actual block of code has been setting off errors so i don't think its anything in here \n\n}\n\n};\n\nclass y\n{\n...\n\nvoid e() //this function by itself compiles\n{\n    int arr[NN][NN + 1];\n    int pig = 0;\n    int cow = 0;\n    x* temp = NULL;\n\n    ...\n        //the function call \n        temp-&gt;w(arr, pig, cow, NN);\n    ...\n\n\n}\n};\n</code></pre>\n\n<p>If i need to post more code i can but i really think its just in how i passed it; thanks in advance for any help</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1461795412, "post_id": 36901841, "comment_id": 61367894, "body": "This is very confusing terminology, saying that you have a &quot;two-dimensional vector&quot; that is &quot;of type int&quot;. No, the vector is a one-dimensional vector of type <code>vector&lt;vector&lt;int&gt;&gt;</code> and it stores <code>vector&lt;int&gt;</code>s!"}, {"owner": {"reputation": 3796, "user_id": 4859885, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HcTm.jpg?s=128&g=1", "display_name": "Brian Rodriguez", "link": "https://stackoverflow.com/users/4859885/brian-rodriguez"}, "edited": false, "score": 0, "creation_date": 1461795455, "post_id": 36901841, "comment_id": 61367920, "body": "What do you get stuck on when you try it yourself?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1461796351, "post_id": 36901841, "comment_id": 61368264, "body": "Off topic. Having two variables named <code>mineField</code> seems not to be a good idea to me. Even if they don&#39;t wander into each other&#39;s scope, it makes searching more difficult."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1461796644, "post_id": 36901841, "comment_id": 61368374, "body": "All the information of <code>int</code> <code>mineField</code> is also in <code>cell</code> <code>mineField</code>. You can discard the <code>int</code> mineField`."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1461831892, "post_id": 36901841, "comment_id": 61381003, "body": "You can also make isMine a member function and declare mineField as a vector of Cell (not of vector of Cell). [i][j] becomes [i * columns + j]."}], "owner": {"reputation": 41, "user_id": 6196378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c39410e12c1095302e602852f517eb8?s=128&d=identicon&r=PG&f=1", "display_name": "Wilmer Suarez", "link": "https://stackoverflow.com/users/6196378/wilmer-suarez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461795068, "creation_date": 1461795068, "question_id": 36901841, "link": "https://stackoverflow.com/questions/36901841/2d-vector-of-structs", "title": "2D vector of structs", "body": "<p>I am making a minesweeper game.\nI have 2 two dimensional vectors, one of type int:</p>\n\n<pre><code>vector&lt; vector&lt;int&gt; &gt; mineField;\n</code></pre>\n\n<p>which is filled with randomly placed mines (mines = -1) and one of type cell:</p>\n\n<pre><code>vector&lt;vector&lt;cell&gt; &gt; mineField;            //actual representation of game board \n\nstruct cell{\n     int state;                     //( 0 hidden, 1 revealed, 2 marked) \n     int value;                     //(-1 mine, 0 no surrounding, # &gt; 0 number of surrounding mines)\n     bool isMine;\n};\n</code></pre>\n\n<p>After evaluating which cells in the int vector do not have mines, and determining how many mines surround that cell; how can I use the cell vector to update each cell after I've determined how many mines surround it.\nThank You!</p>\n"}, {"tags": ["c++", "compilation", "cygwin"], "answers": [{"comments": [{"owner": {"reputation": 3204, "user_id": 193506, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f5b5bc759fc8ed636ca0680676cd5bad?s=128&d=identicon&r=PG", "display_name": "DeveloperChris", "link": "https://stackoverflow.com/users/193506/developerchris"}, "edited": false, "score": 0, "creation_date": 1462699959, "post_id": 36902237, "comment_id": 61739423, "body": "Thanks this caught me after I did a &quot;clean build&quot; I had updated my cygwin install a few weeks ago and it didn&#39;t occur to me they may have changed such a basic function. of course he question now is why was it changed..."}, {"owner": {"reputation": 21714, "user_id": 32136, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3Pkex.jpg?s=128&g=1", "display_name": "philsquared", "link": "https://stackoverflow.com/users/32136/philsquared"}, "edited": false, "score": 0, "creation_date": 1487665520, "post_id": 36902237, "comment_id": 71874302, "body": "The linked article only says that <code>_BSD_SOURCE</code> is required for <code>settimeofday()</code>, not <code>gettimeofday()</code>. Can anyone confirm it is required for <code>gettimeofday()</code>, too?"}], "tags": [], "owner": {"reputation": 166, "user_id": 6021620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f36ea3beb3aac12557bdfb46d1191d0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Duncan", "link": "https://stackoverflow.com/users/6021620/andrew-duncan"}, "is_accepted": true, "score": 7, "last_activity_date": 1461796993, "creation_date": 1461796993, "answer_id": 36902237, "question_id": 36901803, "link": "https://stackoverflow.com/questions/36901803/gettimeofday-not-declared-in-this-scope-cygwin/36902237#36902237", "title": "gettimeofday() not declared in this scope - Cygwin", "body": "<p>You need to define _BSD_SOURCE to include the declaration gettimeofday (since glibc2.2.2 according to link below)</p>\n\n<pre><code>#define _BSD_SOURCE\n\n#include &lt;sys/time.h&gt;\n\nint main() {\n    struct timeval start;\n\n    gettimeofday(&amp;start, NULL);\n}\n</code></pre>\n\n<p><a href=\"http://www.tutorialspoint.com/unix_system_calls/settimeofday.htm\">gettimeofday() - Unix, Linux System Call</a></p>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 7169640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fa5e42bf9b12d75965433ca5402118?s=128&d=identicon&r=PG&f=1", "display_name": "Marcus", "link": "https://stackoverflow.com/users/7169640/marcus"}, "is_accepted": false, "score": 0, "last_activity_date": 1507717088, "creation_date": 1507717088, "answer_id": 46685671, "question_id": 36901803, "link": "https://stackoverflow.com/questions/36901803/gettimeofday-not-declared-in-this-scope-cygwin/46685671#46685671", "title": "gettimeofday() not declared in this scope - Cygwin", "body": "<p>Thank you John - your question game me my answer!</p>\n\n<p>In case it helps anyone else searching on this error...\nI got the same error:</p>\n\n<pre><code>error: \u2018gettimeofday\u2019 was not declared in this scope\n  gettimeofday(&amp;lastBigTick, NULL);\n</code></pre>\n\n<p>This error started happening when I moved from Debian 8 (jessie) to Debian 9 (stretch) on a raspberry pi</p>\n\n<p>For me, I had NOT #included \"sys/time.h\"  I had only #included \"time.h\"\nNot sure how it compiled before, but it did, so adding </p>\n\n<pre><code>#include \"sys/time.h\"\n</code></pre>\n\n<p>did the job for me.</p>\n\n<p>Note:  \"time.h\" is different and is still needed for other time functions, so I ended up needing both:</p>\n\n<pre><code>#include \"time.h\"\n#include \"sys/time.h\"\n</code></pre>\n\n<p>My situation was perhaps different, as adding</p>\n\n<pre><code>#define _BSD_SOURCE\n</code></pre>\n\n<p>made no difference in my case - ie this was not the issue for me.</p>\n"}], "owner": {"reputation": 197, "user_id": 4259271, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f08a3eca5cf46fbf020eb6f0f868c52a?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4259271/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9470, "favorite_count": 0, "accepted_answer_id": 36902237, "answer_count": 2, "score": 1, "last_activity_date": 1507717088, "creation_date": 1461794904, "last_edit_date": 1461796168, "question_id": 36901803, "link": "https://stackoverflow.com/questions/36901803/gettimeofday-not-declared-in-this-scope-cygwin", "title": "gettimeofday() not declared in this scope - Cygwin", "body": "<p>Can cygwin make use of gettimeofday()? I'm getting the error:</p>\n\n<pre><code>lab8.cpp: In function \u2018int main()\u2019:\nlab8.cpp:62:30: error: \u2018gettimeofday\u2019 was not declared in this scope\n     gettimeofday(&amp;start, NULL);\n                              ^\nmakefile:14: recipe for target 'lab8.o' failed\nmake: *** [lab8.o] Error 1\n</code></pre>\n\n<p>I definitely included <code>&lt;sys/time.h&gt;</code>. Is there a package that I have to install or does it just not work on Windows?</p>\n\n<p>EDIT: Here's a simple test that yields the same error:</p>\n\n<pre><code>#include &lt;sys/time.h&gt;\n\nint main() {\n    struct timeval start;\n\n    gettimeofday(&amp;start, NULL);\n}\n</code></pre>\n\n<p>With the error:</p>\n\n<pre><code>$ g++ -c -Wall -g -std=c++11 test.cpp -o test.o\ntest.cpp: In function \u2018int main()\u2019:\ntest.cpp:6:30: error: \u2018gettimeofday\u2019 was not declared in this scope\n     gettimeofday(&amp;start, NULL);\n</code></pre>\n"}, {"tags": ["c++", "input"], "answers": [{"tags": [], "owner": {"reputation": 1238, "user_id": 677299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9a0a6b12c50853df1e565fd54253a?s=128&d=identicon&r=PG", "display_name": "jbruni", "link": "https://stackoverflow.com/users/677299/jbruni"}, "is_accepted": false, "score": 1, "last_activity_date": 1461795413, "creation_date": 1461795413, "answer_id": 36901925, "question_id": 36901783, "link": "https://stackoverflow.com/questions/36901783/read-from-text-file-and-save-to-two-or-three-variables/36901925#36901925", "title": "Read from Text File and Save to Two or Three Variables", "body": "<p>The problem is with whitespace. Remember that newlines are also whitespace. To see what is going wrong, convert all of your newlines to spaces and walk through the program. At the point that you are reading <code>breadth A</code> your variables will contain the following:</p>\n\n<pre><code>cmnd=\"breadth\"\nv1='A'\nv2='d' // from depth\n</code></pre>\n\n<p>This is a framing error. Since you have optional input terminated with newlines, you might look at <code>istream::getline()</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 319, "user_id": 6263821, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0de4959e84f289c8a6b54f293492db8b?s=128&d=identicon&r=PG&f=1", "display_name": "TacoB0t", "link": "https://stackoverflow.com/users/6263821/tacob0t"}, "is_accepted": true, "score": 1, "last_activity_date": 1461795951, "creation_date": 1461795951, "answer_id": 36902024, "question_id": 36901783, "link": "https://stackoverflow.com/questions/36901783/read-from-text-file-and-save-to-two-or-three-variables/36902024#36902024", "title": "Read from Text File and Save to Two or Three Variables", "body": "<p>I managed to get a work around as follows:</p>\n\n<pre><code>int main(int argc, char **argv){\n\n          ifstream fin(argv[1]);\n\n          string cmnd;\n          char v1, v2;\n\n          while (fin &gt;&gt; cmnd){\n\n                if (cmnd == \"add\"){\n                    (fin &gt;&gt; v1 &gt;&gt; v2);\n                     //do something\n                }\n\n                if (cmnd == \"breadth\"){\n                    (fin &gt;&gt; v1); \n                    //etc...\n                 }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 319, "user_id": 6263821, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0de4959e84f289c8a6b54f293492db8b?s=128&d=identicon&r=PG&f=1", "display_name": "TacoB0t", "link": "https://stackoverflow.com/users/6263821/tacob0t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18, "favorite_count": 0, "accepted_answer_id": 36902024, "answer_count": 2, "score": 0, "last_activity_date": 1461795951, "creation_date": 1461794830, "question_id": 36901783, "link": "https://stackoverflow.com/questions/36901783/read-from-text-file-and-save-to-two-or-three-variables", "title": "Read from Text File and Save to Two or Three Variables", "body": "<p>Currently, I have a program that reads from a text input file that is expected to be in the format:</p>\n\n<pre><code>add A B\nadd A C\nadd B D\nbreadth A\ndepth A\nremove A B\nadd B A\nbreadth B\ndepth B\n</code></pre>\n\n<p>However, I wrote my program to be:</p>\n\n<pre><code>int main(int argc, char **argv){\n\n        ifstream fin(argv[1]);\n\n        string cmnd;\n        char v1, v2;\n\n\n        while (fin &gt;&gt; cmnd &gt;&gt; v1 &gt;&gt; v2){\n\n                     if (cmnd == \"add\"){\n                             //do something\n                     }\n\n                     if (cmnd == \"remove\"){\n                             //do something\n                     }\n\n                     if (cmnd == \"breadth\"){\n                             //do something\n                     }\n\n                     if (cmnd == \"depth\"){\n                             //do something\n                     }\n         }\n</code></pre>\n\n<p>Of course, it ends when it reaches a line in the text file with just two variable, such as \"breadth A\" or \"depth A\". Someone had quickly suggested in-person to me that I could just addd a second nested while loop for readth and depth to fix this but I didn't follow. The variables will only ever be two or three. Any help is appreciated!</p>\n"}, {"tags": ["python", "c++", "reference", "cython"], "comments": [{"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1461794998, "post_id": 36901759, "comment_id": 61367712, "body": "Note that the workaround proposed in the link is not <code>integer_ref[0] = other_value</code>, it&#39;s <code>(&amp;integer_ref)[0] = other_value</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2544124"}, "reply_to_user": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1461795209, "post_id": 36901759, "comment_id": 61367798, "body": "Sorry, i didn&#39;t mean to imply that i used <code>integer_ref[0] = other_value</code> as a workaround from the link. The workaround from the link also didn&#39;t work for me, throwing a long compile error. Thanks for catching that, I forgot to mention."}], "answers": [{"tags": [], "owner": {"reputation": 7711, "user_id": 1150961, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/TOcu2.jpg?s=128&g=1", "display_name": "Till Hoffmann", "link": "https://stackoverflow.com/users/1150961/till-hoffmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1534186474, "creation_date": 1534186474, "answer_id": 51828856, "question_id": 36901759, "link": "https://stackoverflow.com/questions/36901759/references-in-cython/51828856#51828856", "title": "References in Cython", "body": "<p>You could use standard pointers to tackle this problem. For example,</p>\n\n<pre><code>def test():\n    cdef:\n        int i = 10\n        int* ref = &amp;i\n\n    print(ref[0])  # Prints 10\n    ref[0] = 5\n    print(i)  # Prints 5\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2544124"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 819, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1534186474, "creation_date": 1461794700, "last_edit_date": 1461795255, "question_id": 36901759, "link": "https://stackoverflow.com/questions/36901759/references-in-cython", "title": "References in Cython", "body": "<p>I'm having some trouble experimenting with references in Cython.\nI'm using this code to create an int and make a reference to it. </p>\n\n<pre><code>cdef int i = 10;\ncdef int&amp; integer_ref = i;\n</code></pre>\n\n<p>However, I cant figure out how to change the value of i through integer_ref. In C, I'd just use <code>integer_ref = some_other_value</code>, and that would set the value of <code>i</code> to <code>some_other_value</code>. </p>\n\n<p>However, doing that in cython returns an error because assignment to a reference isn't allowed. \nI tried <code>integer_ref[0] = some_other_value</code> as well, but that attempts to index an <code>int &amp;</code> which is not allowed. What should i be using?\nI found <a href=\"https://groups.google.com/forum/#!topic/cython-users/j58Sp3QMrD4\" rel=\"noreferrer\">this post on the cython-users list</a> that seems to imply that it's a known bug, but I'm not too sure. The workaround in the link of using <code>(&amp;integer_ref)[0] = some_other_value</code> also did not work for me.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1461794268, "post_id": 36901616, "comment_id": 61367395, "body": "UB calling <code>main</code>. What happens when you remove the call?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1461794574, "post_id": 36901616, "comment_id": 61367542, "body": "Recursive <code>main</code>. That&#39;s something I haven&#39;t seen before."}, {"owner": {"reputation": 79, "user_id": 5641230, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cae2b503bd21fdb6d91d8d201a1c8649?s=128&d=identicon&r=PG&f=1", "display_name": "Guilherme Almeida", "link": "https://stackoverflow.com/users/5641230/guilherme-almeida"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1461802384, "post_id": 36901616, "comment_id": 61370057, "body": "@user4581301 Really? I do that all the time on small programs, it seems to be a bad pratice."}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 5, "last_activity_date": 1461794674, "creation_date": 1461794674, "answer_id": 36901754, "question_id": 36901616, "link": "https://stackoverflow.com/questions/36901616/why-do-stdadressof-behaves-like-this-on-invalid-inputs/36901754#36901754", "title": "Why do std::adressof() behaves like this on invalid inputs?", "body": "<p>Let's call the function <code>meow</code> (or throw it into a namespace), because using <code>::main</code> makes the program ill-formed.</p>\n\n<pre><code>int meow(int argc, char *argv[])\n{\n    int input;\n    cin &gt;&gt; input;\n    cout &lt;&lt; std::addressof(input) &lt;&lt; endl;\n    meow(argc, argv);\n    return 0;\n}\n</code></pre>\n\n<p>A failed stream extraction sets <code>failbit</code> on the stream. Later extraction operations on that stream will immediately fail without blocking for input, so you end up in (obvious) infinite recursion printing addresses over and over again.</p>\n\n<p>(Your code has infinite recursion any way; the only difference is that it's not as apparent when <code>cin &gt;&gt; input</code> blocks.)</p>\n"}], "owner": {"reputation": 79, "user_id": 5641230, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/cae2b503bd21fdb6d91d8d201a1c8649?s=128&d=identicon&r=PG&f=1", "display_name": "Guilherme Almeida", "link": "https://stackoverflow.com/users/5641230/guilherme-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 36901754, "answer_count": 1, "score": 0, "last_activity_date": 1461795315, "creation_date": 1461794068, "question_id": 36901616, "link": "https://stackoverflow.com/questions/36901616/why-do-stdadressof-behaves-like-this-on-invalid-inputs", "title": "Why do std::adressof() behaves like this on invalid inputs?", "body": "<p>So say I have the following code:</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n    int input;\n    cin &gt;&gt; input;\n    cout &lt;&lt; std::addressof(input) &lt;&lt; endl;\n    main(argc, argv);\n}\n</code></pre>\n\n<p>If you give it a valid int input it will just print a normal adress, however, if you give it a invalid value (i.e \"this is a string value\", \"kasdkjadlksnkqlw~\" or 9999999999999999999) it will keep printing adresses.</p>\n\n<p>Why does it behaves like this? Is this a so called buffer overflow?\nEXTRA: How do I enable syntax highlighting on this website?</p>\n"}, {"tags": ["c++", "c++11", "vector", "operator-overloading"], "comments": [{"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1461793158, "post_id": 36901276, "comment_id": 61366872, "body": "&quot;<i>so it shouldnt&#39; be trying to convert from an int to a vector?</i>&quot; -- That&#39;s precisely what it tries to do, but since there&#39;s no <code>vector</code> constructor that only takes in <code>int</code>, it doesn&#39;t know how to, and that&#39;s exactly the error message you&#39;re getting, no?"}, {"owner": {"reputation": 877, "user_id": 2548319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Thw8X.jpg?s=128&g=1", "display_name": "Paulo1205", "link": "https://stackoverflow.com/users/2548319/paulo1205"}, "edited": false, "score": 2, "creation_date": 1461793542, "post_id": 36901276, "comment_id": 61367070, "body": "Certainly it isn&#39;t.  He didn&#39;t copy the part of the message that says that it is related to the failed attempt to match a valid assignment operator (<code>operator=</code>) function to the object <code>a</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1461793905, "post_id": 36901276, "comment_id": 61367232, "body": "@Dolda2000: &quot;<i>there&#39;s no vector constructor that only takes in int</i>&quot; - no, but there is one that accepts a <code>vector::size_type</code> instead (to specify the initial number of default-constructed items to fill the vector with), and an <code>int</code> can be assigned to a <code>vector::size_type</code>. However, a <code>vector</code> cannot be <i>implicitly</i> constructed from an <code>int</code>/<code>size_type</code>, only <i>explicitly</i>, which is why an <code>int</code> cannot be passed to <code>vector::operator=</code> directly."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1461794044, "post_id": 36901276, "comment_id": 61367290, "body": "Overloading of the comma operator is not recommend, per the <a href=\"https://isocpp.org/wiki/faq/operator-overloading\" rel=\"nofollow noreferrer\">C++ FAQ</a> also check out <a href=\"http://debian.fmi.uni-sofia.bg/~mrpaff/Effective%20C++/MEC/MI7_FR.HTM\" rel=\"nofollow noreferrer\">More Effective C++, Item 7</a>"}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1461794066, "post_id": 36901276, "comment_id": 61367301, "body": "@RemyLebeau: Sure, but that constructor is <code>explicit</code>."}], "answers": [{"tags": [], "owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "is_accepted": true, "score": 19, "last_activity_date": 1461794715, "last_edit_date": 1461794715, "creation_date": 1461793274, "answer_id": 36901433, "question_id": 36901276, "link": "https://stackoverflow.com/questions/36901276/operator-comma-overloading/36901433#36901433", "title": "Operator comma overloading", "body": "<p>There is already a built-in definition for the comma operator applied to ints. Your template isn't even in the running for overload resolution, since you can't overload operators unless at least one of the arguments is a user defined type.</p>\n\n<p>You could do something like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct vector_maker\n{\n    std::vector&lt;T&gt; vec;\n    vector_maker&amp; operator,(T const&amp; rhs) {\n        vec.push_back(rhs);\n        return *this;\n    }\n\n    std::vector&lt;T&gt; finalize() {\n        return std::move(vec);\n    }\n};\n\nint main() {\n    auto a = (vector_maker&lt;int&gt;(),1,2,3,4,5).finalize();\n}\n</code></pre>\n\n<p>Or take a look at <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/assign/doc/index.html\" rel=\"noreferrer\">Boost.Assign</a>, which allows constructions like this:</p>\n\n<pre><code>std::vector&lt;int&gt; a;\na += 1,2,3,4,5,6,7,8;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1238, "user_id": 677299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9a0a6b12c50853df1e565fd54253a?s=128&d=identicon&r=PG", "display_name": "jbruni", "link": "https://stackoverflow.com/users/677299/jbruni"}, "is_accepted": false, "score": 2, "last_activity_date": 1461794198, "last_edit_date": 1461794198, "creation_date": 1461793903, "answer_id": 36901585, "question_id": 36901276, "link": "https://stackoverflow.com/questions/36901276/operator-comma-overloading/36901585#36901585", "title": "Operator comma overloading", "body": "<p>The expression on the right-hand side of the assignment is evaluated simply as <code>(1,2)</code> and degenerates to <code>(2)</code> or <code>2</code>, which is an <code>int</code>. </p>\n\n<p>Then the assignment is evaluated. The left-hand side is of type <code>vector&lt;int&gt;</code>. You are attempting to assign <code>2</code> (an <code>int</code>) to <code>a</code> (a <code>vector&lt;int&gt;</code>), and since there is no conversion from an <code>int</code> to a <code>vector&lt;&gt;</code> you get the error.</p>\n\n<p>You won't be able to overload the operators for built-in types, such as <code>int</code>.</p>\n"}], "owner": {"reputation": 115, "user_id": 1800629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebcee3e51223cc77d8e10c108e60635e?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/1800629/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1816, "favorite_count": 0, "accepted_answer_id": 36901433, "answer_count": 2, "score": 5, "last_activity_date": 1461794715, "creation_date": 1461792615, "last_edit_date": 1461793763, "question_id": 36901276, "link": "https://stackoverflow.com/questions/36901276/operator-comma-overloading", "title": "Operator comma overloading", "body": "<p>I'm trying to learn more about how operator overloading works.</p>\n\n<p>I understand that overloading the comma operator may not be the best idea, but this is for instructional purposes only.</p>\n\n<p>I'm expecting the following code to use my overloaded operator (I used brackets as I'm aware the comma operator has the lowest precedence) to construct a vector containing (1,2) and then call the vector's assignment operator.</p>\n\n<p>However, I get an error:</p>\n\n<pre><code>no known conversion from argument 1 from 'int' to 'const std::vector&lt;int&gt;&amp;'\n</code></pre>\n\n<p>I don't understand why this is happening.  (1,2) should construct a vector so it shouldn't be trying to convert from an <code>int</code> to a <code>vector&lt;int&gt;</code>?</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;utility&gt;\n\nusing std::vector;\nusing std::move;\n\ntemplate &lt;typename T&gt;\nvector&lt;T&gt; operator,(const T&amp; v1, const T&amp; v2)\n{\n    vector&lt;T&gt; v;\n    v.push_back(v1);\n    v.push_back(v2);\n    return move(v);\n}\n\nint main()\n{\n    vector&lt;int&gt; a;\n    a = (1,2);\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "tree"], "comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461792630, "post_id": 36901110, "comment_id": 61366633, "body": "If you have C++11 please consider getting into the habit of using <code>nullptr</code> instead of <code>NULL</code>. Can you show the exact error you get?"}, {"owner": {"reputation": 5994, "user_id": 1127972, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WkDOK.jpg?s=128&g=1", "display_name": "doug65536", "link": "https://stackoverflow.com/users/1127972/doug65536"}, "edited": false, "score": 2, "creation_date": 1461792635, "post_id": 36901110, "comment_id": 61366637, "body": "If every <code>KDTree</code> contains two <code>KDTree</code>s, then you get infinite recursion, the size is infinite."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 1, "creation_date": 1461792845, "post_id": 36901110, "comment_id": 61366740, "body": "@Shiro you&#39;re reinventing a square wheel with this class. Unless it&#39;s a homework problem, you should just grab one of the million existing implementations, one that&#39;s templated, allocator aware, and exception safe."}, {"owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1461793317, "post_id": 36901110, "comment_id": 61366960, "body": "@NicolasHolthaus I prefer doing it myself. I don&#39;t need it to be templated and I don&#39;t think exceptions are that hard to handle. But yes, this is part of my thesis, and I prefer not to use any unnecessary libraries, for no reason. It is much more readable and self-contained this way."}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1461793539, "post_id": 36901110, "comment_id": 61367069, "body": "@Shiro you&#39;d be doing your future self a favor if you research it a bit. IMHO writing data structures is one of the hardest things to do well in c++, and other peoples poorly implemented data structures are one of the biggest headaches professional programmers have to deal with. I say this as someone whose implemented several bad tree data structures in the past and am still dealing with the consequences."}, {"owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1461793672, "post_id": 36901110, "comment_id": 61367129, "body": "@NicolasHolthaus I agree with you. However, the quality of this data structure and the whole project as a whole will be tested extensively with various data, and so there is no possibility the finished product will be bad."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1461795572, "post_id": 36901110, "comment_id": 61367968, "body": "How silly. Read <a href=\"https://en.wikipedia.org/wiki/Not_invented_here\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Not_invented_here</a>. If I were your advisor I&#39;d want you to stop wasting time re-inventing the standard library, use the facilities that everyone else uses in the way that everyone else uses them, and get on with the actual logic of your thesis."}, {"owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461796099, "post_id": 36901110, "comment_id": 61368161, "body": "@LightnessRacesinOrbit The main purpose of this project is understanding algorithms and data structures. C++ is simply a tool here, not the purpose. But I do see where you are coming from."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1461796146, "post_id": 36901110, "comment_id": 61368183, "body": "Yeah you really need a reason <i>not</i> to use existing technology, not the other way around. Are you building your own CPU &amp; OS to run this program on, too? :)"}, {"owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1461796225, "post_id": 36901110, "comment_id": 61368215, "body": "@LightnessRacesinOrbit KDTrees are not as essential as OS, and they are not part of the standard library."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461799051, "post_id": 36901110, "comment_id": 61369120, "body": "Well okay not the standard library but whatever is the <i>de facto</i> industry standard."}, {"owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461893717, "post_id": 36901110, "comment_id": 61416896, "body": "@LightnessRacesinOrbit Fun fact, my usecase of KDTrees is so specific to my project (a routing engine with spatial data) that there are no templated libraries that would help me achieve what I want. This is because I already have an array that gets the <code>Point</code> object from the <code>node_id</code>. So there is no need to save a reference to the <code>Point</code> object on the <code>KDTree</code>. Instead, I only save the <code>node_id</code>, from which I can retrieve the <code>Point</code> object. With this KDTree I can retrieve <code>node_id</code> from <code>Point</code>. So, the fact that every tree node has only 2 pointers and a <code>int node_id</code> saves me tons of ram."}, {"owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1461894155, "post_id": 36901110, "comment_id": 61416987, "body": "@LightnessRacesinOrbit That is at least 25% ram saved  (since my nodes would have 3 properties instead of 4), from whatever any other standard library could offer me. And for this problem, that is HUGE, because there are about 1,5 billion nodes."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461923223, "post_id": 36901110, "comment_id": 61429253, "body": "@Shiro: Okay, that&#39;s a good reason not to use <code>std::map</code>. I think your assertion that there is no existing library in the entire world that already does this fairly basic thing is unrealistic, though."}, {"owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461955479, "post_id": 36901110, "comment_id": 61449407, "body": "@LightnessRacesinOrbit How could someone predict that i already possess another datastructure (an array) therefore my kd-tree can contain less information ? That couldn&#39;t possibly work..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461972525, "post_id": 36901110, "comment_id": 61456432, "body": "@Shiro: You&#39;re underestimating how basic and common this requirement is. The world&#39;s a big place! Rule of thumb: whatever you think up, someone already thought it up before. Don&#39;t know why you think nobody would have written space-efficient trees before."}, {"owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461974917, "post_id": 36901110, "comment_id": 61456995, "body": "@LightnessRacesinOrbit Hey, I read up that KD-trees were invented by an undergrad during a lecture, so you never know :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1462020497, "post_id": 36901110, "comment_id": 61467924, "body": "@Shiro: That was forty years ago. You think there are no ready-made implementations by now?"}, {"owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1462045841, "post_id": 36901110, "comment_id": 61476536, "body": "@LightnessRacesinOrbit Oh no, I agree with you. I am just generally speaking. You could obviously find a similar tree if you looked at other open source routing engines. Its more fun doing it yourself though. And more educational. I spent 4 days researching the topic. Its really challenging. Coming up with ideas and solutions to problems is a skill that can only be taught by practice."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1462058556, "post_id": 36901110, "comment_id": 61479671, "body": "@Shiro: That&#39;s a good reason :)"}], "answers": [{"tags": [], "owner": {"reputation": 1659, "user_id": 6252597, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209557469319499/picture?type=large", "display_name": "Cameron637", "link": "https://stackoverflow.com/users/6252597/cameron637"}, "is_accepted": true, "score": 2, "last_activity_date": 1461792215, "creation_date": 1461792215, "answer_id": 36901164, "question_id": 36901110, "link": "https://stackoverflow.com/questions/36901110/implementing-trees-in-c/36901164#36901164", "title": "Implementing trees in c++", "body": "<p>left and right should be KDTree pointers like this: KDTree* left, KDTree* right. Then Null will work as used</p>\n\n<p>Also, in the first if statement you might need to change</p>\n\n<pre><code>left = KDTree (...);\nright = KDTree (...);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>left = new KDTree (...);\nright = new KDTree (...);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "edited": false, "score": 0, "creation_date": 1461792642, "post_id": 36901270, "comment_id": 61366640, "body": "I removed &quot;recursive&quot; to not confuse people."}, {"owner": {"reputation": 331, "user_id": 5049261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c431372477692a205445c0906a6ec73b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob C", "link": "https://stackoverflow.com/users/5049261/bob-c"}, "reply_to_user": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "edited": false, "score": 0, "creation_date": 1461793127, "post_id": 36901270, "comment_id": 61366859, "body": "I shall no longer be confused :)"}, {"owner": {"reputation": 5994, "user_id": 1127972, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WkDOK.jpg?s=128&g=1", "display_name": "doug65536", "link": "https://stackoverflow.com/users/1127972/doug65536"}, "edited": false, "score": 1, "creation_date": 1461793404, "post_id": 36901270, "comment_id": 61367007, "body": "Tell me, what is <code>sizeof(KDTree)</code> in the original question - pick any platform. Infinite, right?"}], "tags": [], "owner": {"reputation": 331, "user_id": 5049261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c431372477692a205445c0906a6ec73b?s=128&d=identicon&r=PG&f=1", "display_name": "Bob C", "link": "https://stackoverflow.com/users/5049261/bob-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1461792576, "creation_date": 1461792576, "answer_id": 36901270, "question_id": 36901110, "link": "https://stackoverflow.com/questions/36901110/implementing-trees-in-c/36901270#36901270", "title": "Implementing trees in c++", "body": "<p>The example is incomplete, so I'm just guessing based on what I see.</p>\n\n<p><code>KDTree left</code> and <code>KDTree right</code> are objects, not pointers.  So you can't assign <code>NULL</code> to them.  Try turning them into pointers:</p>\n\n<pre><code>class KDTree\n{\n    public:\n        KDTree(...);   \n        ~KDTree();\n        // Note: You'll have to clean up your left and right trees in the destructor!\n\n    private:\n        LatLng element;   // The value of the node\n        KDTree * left;    // The left sub-tree\n        KDTree * right;   // The right sub-tree\n};\n\n\nKDTree::KDTree(...)\n{   \n    value = ...;\n    if(not_finished)\n    {\n        left  = new KDTree(...); // recursive constructor call (nuh-uh! see below)\n        right = new KDTree(...); // recursive constructor call (nuh-uh! see below)\n    }\n    else\n    {\n        left = NULL; // how to implement this properly ?\n        right= NULL; // how to implement this properly ?\n    }\n}    \n</code></pre>\n\n<p>An additional FYI: I see your \"recursive constructor call\" comment in there.  That's not quite right.  In your original code, <code>left = KDTree(...);</code> does <em>not</em> recursively call your constructor.  It simply assigns a new <code>KDTree</code> to <code>left</code> (I'm guessing <code>KDTree</code> has an assignment operator).</p>\n"}], "owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 36901164, "answer_count": 2, "score": 1, "last_activity_date": 1461792631, "creation_date": 1461791976, "last_edit_date": 1461792631, "question_id": 36901110, "link": "https://stackoverflow.com/questions/36901110/implementing-trees-in-c", "title": "Implementing trees in c++", "body": "<p>I want to implement a binary tree where each node contains the <code>left</code> and the <code>right</code> sub-tree. Here is how my class looks like:</p>\n\n<pre><code>class KDTree\n{\npublic:\n    KDTree(...);   \n    ~KDTree();\n\nprivate:\n    LatLng element; // The value of the node\n    KDTree left;    // The left sub-tree\n    KDTree right;   // The right sub-tree\n};\n</code></pre>\n\n<p>And then my constructor looks like this:</p>\n\n<pre><code>KDTree::KDTree(...)\n{   \n    value = ...;\n    if(not_finished)\n    {\n        left  = KDTree(...);\n        right = KDTree(...);\n    }\n    else\n    {\n        left = NULL; // how to implement this properly ?\n        right= NULL; // how to implement this properly ?\n    }\n}\n</code></pre>\n\n<p>If I try and put <code>NULL</code> as I show above, then the compiler complains that <code>left</code> and <code>right</code> properties aren't initialized. How can I do this properly ?</p>\n"}, {"tags": ["c++", "vector", "genetic-algorithm"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1461791538, "post_id": 36900957, "comment_id": 61366098, "body": "Are you just looking for a 2D array? <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code>? Also does variables need to be a <code>vector&lt;double&gt;</code>?"}, {"owner": {"reputation": 195, "user_id": 6188122, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/429f360485ef801e6d9bec1e12791760?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/6188122/milan"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1461791826, "post_id": 36900957, "comment_id": 61366240, "body": "Reading up on 2D arrays now, seems that might be it yes! I want the formula to be able to use decimals too, so that it can for example get 2a = 3 as well. So I believe double would be needed for that, no?"}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 6188122, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/429f360485ef801e6d9bec1e12791760?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/6188122/milan"}, "edited": false, "score": 0, "creation_date": 1461792601, "post_id": 36901074, "comment_id": 61366617, "body": "Thanks, that&#39;s exactly what I meant! And I even understand it haha. Thanks again, that saved me a lot of headaches."}, {"owner": {"reputation": 195, "user_id": 6188122, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/429f360485ef801e6d9bec1e12791760?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/6188122/milan"}, "edited": false, "score": 0, "creation_date": 1461832921, "post_id": 36901074, "comment_id": 61381660, "body": "Okay, I thought I fully understood it but apparently not. If instead of displaying all vectors you only wanted to display for example individual[4], how would you do that? I thought std::cout &lt;&lt; individual[4]; would do the trick, but that&#39;s clearly not working.. :("}, {"owner": {"reputation": 195, "user_id": 6188122, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/429f360485ef801e6d9bec1e12791760?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/6188122/milan"}, "edited": false, "score": 0, "creation_date": 1461833314, "post_id": 36901074, "comment_id": 61381928, "body": "Individual[4] = chromsome[4] by the way, I realised naming it individual would make more sense."}, {"owner": {"reputation": 195, "user_id": 6188122, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/429f360485ef801e6d9bec1e12791760?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/6188122/milan"}, "edited": false, "score": 0, "creation_date": 1461850641, "post_id": 36901074, "comment_id": 61394779, "body": "Thought I&#39;d replied to this already, but thanks again! I think it&#39;s the &quot;auto&quot; part that is messing me up, it&#39;s quite confusing. Anyway, thanks again, this works perfectly :)"}], "tags": [], "owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "is_accepted": true, "score": 1, "last_activity_date": 1461839863, "last_edit_date": 1461839863, "creation_date": 1461791881, "answer_id": 36901074, "question_id": 36900957, "link": "https://stackoverflow.com/questions/36900957/vector-inside-vector-creating-chromosomes/36901074#36901074", "title": "Vector inside vector (creating chromosomes)", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;random&gt;\n\n// Set population size\n\nconst int population_size = 10;\nconst int number_of_variables = 4;\n\n\nint main()\n{\n// Generate random number\n\nstd::random_device rd;    \nstd::mt19937 rng(rd());    // random-number engine (Mersenne-Twister in this case)\nstd::uniform_int_distribution&lt;int&gt; uni(-10, 10); \n\n// Set gene values.\n\nstd::vector&lt; std::vector&lt;int&gt;&gt;chromosome;\n\n\nfor( int kp = 0; kp &lt; population_size; kp++ )\n{\n    std::vector&lt;int&gt;variables;\nfor (int i = 0; i &lt; number_of_variables; ++i)\n{\n    double rand_num = uni(rng);\n    variables.push_back (rand_num);\n\n}\nchromosome.push_back( variables );\n}\n\n// display entire population\n\nfor( auto c : chromosome )\n{\n    for( auto v : c )\n    {\n        std::cout &lt;&lt; v &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; \"\\n\";\n}\n\n// display 4th member of population\n\nfor( auto v : chromosone[ 3 ] )\n    {\n        std::cout &lt;&lt; v &lt;&lt; \" \";\n    }\n    std::cout &lt;&lt; \"\\n\";\n\nreturn 0;\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/2jastJ\" rel=\"nofollow\">http://ideone.com/2jast</a>J</p>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 1, "last_activity_date": 1461792031, "creation_date": 1461792031, "answer_id": 36901123, "question_id": 36900957, "link": "https://stackoverflow.com/questions/36900957/vector-inside-vector-creating-chromosomes/36901123#36901123", "title": "Vector inside vector (creating chromosomes)", "body": "<p>You can place a vector inside a vector with the syntax:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt;\n</code></pre>\n\n<p>but you will need to make the outer vector large enough for num_variables.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;cstdlib&gt;\n\nusing Individual = std::vector&lt;int&gt;;\nusing Population = std::vector&lt;Individual&gt;;\n// short for std::vector&lt;std::vector&lt;int&gt;&gt;;\n\nconst size_t number_of_variables = 8;\n\nint main() {\n    Population population(10);\n\n    for (auto&amp; individual : population) {\n        individual.resize(number_of_variables);\n        for (size_t j = 0; j &lt; number_of_variables; ++j) {\n            individual[j] = j;  // replace with random number\n        }\n    }\n}\n</code></pre>\n\n<p>Live demo: <a href=\"http://ideone.com/pfufGt\" rel=\"nofollow\">http://ideone.com/pfufGt</a></p>\n"}], "owner": {"reputation": 195, "user_id": 6188122, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/429f360485ef801e6d9bec1e12791760?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/6188122/milan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 36901074, "answer_count": 2, "score": 1, "last_activity_date": 1461839863, "creation_date": 1461791401, "question_id": 36900957, "link": "https://stackoverflow.com/questions/36900957/vector-inside-vector-creating-chromosomes", "title": "Vector inside vector (creating chromosomes)", "body": "<p>I'm attempting to build a genetic algorithm that can take a certain amount of variables (say 4), and use these in a way so that you could have 2a + 3b + c*c + d = 16. I realise there are more efficient ways to calculate this, but I want to try and build a genetic algorithm to expand later.</p>\n\n<p>I'm starting by trying to create \"organisms\" that can compete later. What I've done is this:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;random&gt;\n\n// Set population size\n\nconst int population_size = 10;\nconst int number_of_variables = 4;\n\n\nint main()\n{\n// Generate random number\n\nstd::random_device rd;    \nstd::mt19937 rng(rd());    // random-number engine (Mersenne-Twister in this case)\nstd::uniform_int_distribution&lt;int&gt; uni(-10, 10); \n\n// Set gene values.\n\nstd::vector&lt;int&gt;chromosome;\nstd::vector&lt;int&gt;variables;\n\n\nfor (int i = 0; i &lt; number_of_variables; ++i)\n{\n    double rand_num = uni(rng);\n    variables.push_back (rand_num);\n    std::cout &lt;&lt; variables[i] &lt;&lt; \"\\n\";\n}\n\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>What happens is it will fill up the number_of_variables vector, and output these just because that makes it clear for me that it's actually doing what I intend for it to do. What I want it to do however is to fill up each \"chromosome\" with one variables vector, so that for example chromosome 0 would have the values {1, 5, -5, 9} etc. </p>\n\n<p>The following code obviously isn't working, but this is what I'd like it to do:</p>\n\n<pre><code>for (int j = 0; j &lt; population_size; ++j)\n{\n    for (int i = 0; i &lt; number_of_variables; ++i)\n    {\n        double rand_num = uni(rng);\n        variables.push_back(rand_num);\n    }\n\n    chromosome.push_back(variables[j]);\n    std::cout &lt;&lt; chromosome[j] &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Meaning it'd fill up the variables randomly, then chromosome1 would take those 4 values that \"variables\" took, and repeat. What actually happens is that (I think) it only takes the first value from \"variables\" and copies that into \"chromosome\" rather than all 4. </p>\n\n<p>If anyone could help it'd be very much appreciated, I realise this might be simply a rookie mistake that is laughably simply in the eyes of someone more experienced with vectors (which would probably be 99% of the people on this website, hah).</p>\n\n<p>Anyway, thanks :)</p>\n"}, {"tags": ["javascript", "c++", "node.js", "leap-motion", "cylon.js"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4207876, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o63Fti3b6ps/AAAAAAAAAAI/AAAAAAAAAPc/wNhZiC2t7Oc/photo.jpg?sz=128", "display_name": "Rodrigo Carrilho", "link": "https://stackoverflow.com/users/4207876/rodrigo-carrilho"}, "edited": false, "score": 0, "creation_date": 1461841515, "post_id": 36901097, "comment_id": 61387639, "body": "Thanks for your reply.  I want readings to be an array that can hold the values from a another array, as you see further down in the code, this will be then changed to have other values.              total = total - readings[readIndex];             // read from the sensor:             readings[readIndex] = hand.palmPosition;             // add the reading to the total:             total = total + readings[readIndex];  But it&#39;s a type of syntax that is different from what I&#39;m used to."}], "tags": [], "owner": {"reputation": 2757, "user_id": 64372, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a7214acdea146fcd74caf6290c233722?s=128&d=identicon&r=PG", "display_name": "Gabriel Florit", "link": "https://stackoverflow.com/users/64372/gabriel-florit"}, "is_accepted": false, "score": 0, "last_activity_date": 1461792325, "last_edit_date": 1461792325, "creation_date": 1461791945, "answer_id": 36901097, "question_id": 36900872, "link": "https://stackoverflow.com/questions/36900872/attempting-smoothing-code-on-node-js-and-cylon-js-but-syntax-failing/36901097#36901097", "title": "Attempting smoothing code on node.js and cylon.js but syntax failing", "body": "<p>This is invalid JS:</p>\n\n<pre><code>var readings[numReadings];\n</code></pre>\n\n<p>Looks like you want <code>readings</code> to be an array. You don't need to initialize a JS array with a size. To create an array:</p>\n\n<pre><code>var readings = [];\n</code></pre>\n\n<p>To fill it with zeros:</p>\n\n<pre><code>for (var thisReading = 0; thisReading &lt; numReadings; thisReading++) {\n  readings.push[0];\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4207876, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-o63Fti3b6ps/AAAAAAAAAAI/AAAAAAAAAPc/wNhZiC2t7Oc/photo.jpg?sz=128", "display_name": "Rodrigo Carrilho", "link": "https://stackoverflow.com/users/4207876/rodrigo-carrilho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1461794843, "creation_date": 1461791101, "last_edit_date": 1461794843, "question_id": 36900872, "link": "https://stackoverflow.com/questions/36900872/attempting-smoothing-code-on-node-js-and-cylon-js-but-syntax-failing", "title": "Attempting smoothing code on node.js and cylon.js but syntax failing", "body": "<p>I'm new to JavaScript and have been trying to put a smoothing filter on the output data from my Leap Motion. I get the data using Cylon.js and it basically outputs 3 values (x, y and z). I can't, however, get the smoothing code to work, I think it's because I'm used to the C/C++ syntax and am probably doing something wrong. </p>\n\n<p>The code is this:</p>\n\n<pre><code>\"use strict\";\n\nvar Cylon = require(\"cylon\");\n\nvar numReadings = 20;\n\nvar readings[numReadings];\nvar readIndex = 0;\nvar total = 0;\nvar average = 0;\n\nfor (var thisReading = 0; thisReading &lt; numReadings; thisReading++) {\n    readings[thisReading] = 0;\n}\n\nCylon.robot({\n    connections: {\n        leapmotion: {\n            adaptor: \"leapmotion\"\n        }\n    },\n\n    devices: {\n        leapmotion: {\n            driver: \"leapmotion\"\n        }\n    },\n\n    work: function(my) {\n        my.leapmotion.on(\"hand\", function(hand) {\n            console.log(hand.palmPosition.join(\",\"));\n\n            // subtract the last reading:\n            total = total - readings[readIndex];\n            // read from the sensor:\n            readings[readIndex] = hand.palmPosition;\n            // add the reading to the total:\n            total = total + readings[readIndex];\n            // advance to the next position in the array:\n            readIndex = readIndex + 1;\n\n            // if we're at the end of the array...\n            if (readIndex &gt;= numReadings) {\n                // ...wrap around to the beginning:\n                readIndex = 0;\n            }\n\n            // calculate the average:\n            average = total / numReadings;\n            console.log(average);\n        });\n    }\n}).start();\n</code></pre>\n\n<p>So the data I am trying to filter is the \"hand.palmPosition\". But it gives me the following error on the console:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5xcqF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5xcqF.jpg\" alt=\"Console Error\"></a></p>\n\n<p>Any help is appreciated!</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "visual-studio", "linker", "dependencies", "projects-and-solutions"], "comments": [{"owner": {"reputation": 4051, "user_id": 517634, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5a553115a86e5f1d7d59c4c9eefcb6f2?s=128&d=identicon&r=PG", "display_name": "T33C", "link": "https://stackoverflow.com/users/517634/t33c"}, "edited": false, "score": 2, "creation_date": 1461792254, "post_id": 36900789, "comment_id": 61366460, "body": "Have you read: <a href=\"https://msdn.microsoft.com/en-us/library/ayds71se(v=vs.90).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ayds71se(v=vs.90).aspx</a>"}, {"owner": {"reputation": 449, "user_id": 4708444, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/57e1665328d412a518089ebbdcfb1845?s=128&d=identicon&r=PG&f=1", "display_name": "GloriousLemon", "link": "https://stackoverflow.com/users/4708444/gloriouslemon"}, "reply_to_user": {"reputation": 4051, "user_id": 517634, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5a553115a86e5f1d7d59c4c9eefcb6f2?s=128&d=identicon&r=PG", "display_name": "T33C", "link": "https://stackoverflow.com/users/517634/t33c"}, "edited": false, "score": 0, "creation_date": 1461793701, "post_id": 36900789, "comment_id": 61367150, "body": "Thanks for the link. No I haven&#39;t seen this link, I saw one similar, but the only topics there were path deleted and path renamed. I will take a look at this."}, {"owner": {"reputation": 449, "user_id": 4708444, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/57e1665328d412a518089ebbdcfb1845?s=128&d=identicon&r=PG&f=1", "display_name": "GloriousLemon", "link": "https://stackoverflow.com/users/4708444/gloriouslemon"}, "reply_to_user": {"reputation": 4051, "user_id": 517634, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5a553115a86e5f1d7d59c4c9eefcb6f2?s=128&d=identicon&r=PG", "display_name": "T33C", "link": "https://stackoverflow.com/users/517634/t33c"}, "edited": false, "score": 0, "creation_date": 1461857099, "post_id": 36900789, "comment_id": 61399894, "body": "I&#39;m not sure this is an answer, but more of a speculation. Since I&#39;m dealing with an unmanaged project, references shouldn&#39;t be used. It&#39;s primarly used for managed projects. If an unmanaged project needed to reference another unmanaged project, the correct approach would be to use project dependencies. I think I got confused because after upgrading my project to VS2015, all these references were created automatically. I double-checked my original project in VS2008 and discovered that the same projects did not have references before."}, {"owner": {"reputation": 449, "user_id": 4708444, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/57e1665328d412a518089ebbdcfb1845?s=128&d=identicon&r=PG&f=1", "display_name": "GloriousLemon", "link": "https://stackoverflow.com/users/4708444/gloriouslemon"}, "reply_to_user": {"reputation": 4051, "user_id": 517634, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5a553115a86e5f1d7d59c4c9eefcb6f2?s=128&d=identicon&r=PG", "display_name": "T33C", "link": "https://stackoverflow.com/users/517634/t33c"}, "edited": false, "score": 0, "creation_date": 1461857181, "post_id": 36900789, "comment_id": 61399965, "body": "To summarize: It&#39;s an odd behaviour that VS2015 tried to automatically create references from the existing project dependencies of an unmanaged project."}, {"owner": {"reputation": 3486, "user_id": 3427520, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/vb17V.jpg?s=128&g=1", "display_name": "zwcloud", "link": "https://stackoverflow.com/users/3427520/zwcloud"}, "edited": false, "score": 0, "creation_date": 1537855237, "post_id": 36900789, "comment_id": 91923527, "body": "By using project dependencies, you Are adding references. They are the same for VC++ projects."}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 3229835, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b5410308c3333d70ac04eff4a1b8d1e7?s=128&d=identicon&r=PG&f=1", "display_name": "andrebroz", "link": "https://stackoverflow.com/users/3229835/andrebroz"}, "is_accepted": false, "score": 1, "last_activity_date": 1609091488, "creation_date": 1609091488, "answer_id": 65468704, "question_id": 36900789, "link": "https://stackoverflow.com/questions/36900789/how-to-solve-the-microsoft-visualstudio-projectsystem-references-unresolvedbui/65468704#65468704", "title": "How to solve: The &quot;Microsoft.VisualStudio.ProjectSystem.References.UnresolvedBuildDependencyProjectReference&quot; reference could not be resolved?", "body": "<p>I ran into the similar issue. In my case just closing the solution and opening it again fixed the issue.</p>\n"}], "owner": {"reputation": 449, "user_id": 4708444, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/57e1665328d412a518089ebbdcfb1845?s=128&d=identicon&r=PG&f=1", "display_name": "GloriousLemon", "link": "https://stackoverflow.com/users/4708444/gloriouslemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5219, "favorite_count": 1, "answer_count": 1, "score": 22, "last_activity_date": 1609091488, "creation_date": 1461790800, "question_id": 36900789, "link": "https://stackoverflow.com/questions/36900789/how-to-solve-the-microsoft-visualstudio-projectsystem-references-unresolvedbui", "title": "How to solve: The &quot;Microsoft.VisualStudio.ProjectSystem.References.UnresolvedBuildDependencyProjectReference&quot; reference could not be resolved?", "body": "<p>In the Solution Explorer, the vcxproj projects that have references, show a warning symbol on each of the references associated with the project. When the reference is highlighted, the properties panel indicates that the Full Path is:</p>\n\n<blockquote>\n  <p>The Microsoft.VisualStudio.ProjectSystem.References.UnresolvedBuildDependencyProject Reference\" reference could not be resolved.</p>\n</blockquote>\n\n<p>If the \"...\" box is pressed, the same error messagebox is shown and I am unable to select a new reference. I have tried deleting the reference and adding it again, but the result is the same. When new projects references are added, the result is the same.</p>\n\n<p>All this happens when I compile using the Visual Studio 2008 (v90) toolset. If I compile using the Visual Studio 2015 (v140) toolset, the Full Path to the referenced library is shown correctly.</p>\n\n<p><strong>Some Background:</strong></p>\n\n<p>I upgraded my project from Visual Studio 2008 to Visual Studio 2015. This project contains a mix of managed and unmanaged with type .vcxproj. On this machine, the Visual Studio 2008 redistributable has been installed. This enabled me to compile using the Visual Studio 2008 (v90) toolset. My intention is to first compile my project with my VS2008 settings within VS2015 (For restrictive reasons, I have to use the v90 toolset). Thus, I configured the VC++ directories accordingly. There is no Linker option in the Configuration properties of the linking project. In the properties of the reference, the following configurations are enabled:</p>\n\n<ul>\n<li>Copy Local - True</li>\n<li>Copy Local Satellite Assemblies - False</li>\n<li>Reference Assembly Output - True</li>\n<li>Link Library Dependencies - False</li>\n<li>Use Library Dependency Inputs - False</li>\n<li>Full Path - The \"Microsoft.VisualStudio.ProjectSystem.References.UnresolvedBuildDependencyProjectReference\" reference could not be resolved</li>\n</ul>\n"}, {"tags": ["c++", "vector", "iterator"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1461790694, "post_id": 36900673, "comment_id": 61365668, "body": "Note this is only safe if <code>it_start != it_end</code>."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1461790722, "post_id": 36900715, "comment_id": 61365683, "body": "I doubt he wants to advance <code>it_start</code>. And a mention of <code>std::next</code> would be good too."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 4, "last_activity_date": 1461791982, "last_edit_date": 1461791982, "creation_date": 1461790529, "answer_id": 36900715, "question_id": 36900673, "link": "https://stackoverflow.com/questions/36900673/get-element-at-index-from-iterator/36900715#36900715", "title": "Get element at index from iterator", "body": "<pre><code>void func(vector&lt;LatLng&gt;::iterator it_start,\n          vector&lt;LatLng&gt;::iterator it_end)\n{\n    int middle_index = (it_end - it_start) / 2;\n    std::advance(it_start, middle_index);\n    LatLng&amp; mid = *it_start;\n}\n</code></pre>\n\n<p>or simply </p>\n\n<pre><code>    LatLng&amp; mid = *std::advance(it_start, (it_end - it_start) / 2);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>    LatLng&amp; mid = it_start[(it_end - it_start) / 2];\n</code></pre>\n\n<p>or using <a href=\"http://en.cppreference.com/w/cpp/iterator/next\" rel=\"nofollow\"><code>std::next</code></a>:</p>\n\n<pre><code>    LatLng&amp; mid = *std::next(it_start, middle_index);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 868, "user_id": 3367929, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5f06ec213df31bb3a61141cdc1f2222e?s=128&d=identicon&r=PG&f=1", "display_name": "Rames", "link": "https://stackoverflow.com/users/3367929/rames"}, "is_accepted": false, "score": 1, "last_activity_date": 1461791275, "creation_date": 1461791275, "answer_id": 36900915, "question_id": 36900673, "link": "https://stackoverflow.com/questions/36900673/get-element-at-index-from-iterator/36900915#36900915", "title": "Get element at index from iterator", "body": "<p>More reusable solution which works also for lists (if you make it template function or change parameter to <code>std::list&lt;T&gt;::iterator</code>) looks like:</p>\n\n<pre><code>void func(vector&lt;LatLng&gt;::iterator it_start,\n          vector&lt;LatLng&gt;::iterator it_end)\n{\n    auto &amp;mid = *std::next(it_start, std::distance(it_start, it_end)/2);\n}\n</code></pre>\n"}], "owner": {"reputation": 3485, "user_id": 4043556, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/g7cx1.jpg?s=128&g=1", "display_name": "dimitris93", "link": "https://stackoverflow.com/users/4043556/dimitris93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1461791982, "creation_date": 1461790395, "question_id": 36900673, "link": "https://stackoverflow.com/questions/36900673/get-element-at-index-from-iterator", "title": "Get element at index from iterator", "body": "<p>I have a function like this: </p>\n\n<pre><code>void func(vector&lt;LatLng&gt;::iterator it_start,\n           vector&lt;LatLng&gt;::iterator it_end)\n{\n    int middle_index = (it_end - it_start) / 2;\n    // how can I now get the element at 'middle_index' ?\n}\n</code></pre>\n\n<p>Can I now get the element at <code>middle_index</code> without passing the vector itself as a parameter ?</p>\n"}, {"tags": ["c++", "g++", "compiler-optimization", "tail-recursion", "clang++"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1461790687, "post_id": 36900593, "comment_id": 61365665, "body": "It may be hard to do TRO if you need to call destructors before returning a value. Try <code>const string&amp;</code> parameters, but there&#39;s no guarantee..."}, {"owner": {"reputation": 21557, "user_id": 1122270, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1ab0e19086582d27abe75b0635f57f43?s=128&d=identicon&r=PG", "display_name": "cnst", "link": "https://stackoverflow.com/users/1122270/cnst"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1461791340, "post_id": 36900593, "comment_id": 61366002, "body": "@n.m., changed <code>s</code> to be of type <code>const std::string&amp;</code> as you suggest, but still getting the same thing"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1461791621, "post_id": 36900593, "comment_id": 61366129, "body": "You still have to destroy the temporary you are returning."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1461795399, "post_id": 36900593, "comment_id": 61367885, "body": "You may have better luck with moving, try <code>string&amp;&amp;</code>."}, {"owner": {"reputation": 21557, "user_id": 1122270, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1ab0e19086582d27abe75b0635f57f43?s=128&d=identicon&r=PG", "display_name": "cnst", "link": "https://stackoverflow.com/users/1122270/cnst"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1461795512, "post_id": 36900593, "comment_id": 61367947, "body": "@n.m., i don&#39;t think <code>string&amp;&amp;</code> is even valid..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1461795694, "post_id": 36900593, "comment_id": 61368008, "body": "It most definitely is valid. You need to enable C++11 because it is still mot the default with g++. You also need to read up on C++11."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1461799879, "post_id": 36900593, "comment_id": 61369356, "body": "I think you need to update your version of clang. The current release is 3.8. I am using apple clang 7.3 and the whole program gets inlined."}, {"owner": {"reputation": 21557, "user_id": 1122270, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1ab0e19086582d27abe75b0635f57f43?s=128&d=identicon&r=PG", "display_name": "cnst", "link": "https://stackoverflow.com/users/1122270/cnst"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1461815442, "post_id": 36900593, "comment_id": 61373500, "body": "@RichardHodges, I&#39;m running the latest clang on Debian wheezy; how exactly did they get from no tail-recursion-optimisation to inlining the whole thing in a couple of releases?  And does it imply that gcc/g++ is now that much behind, too?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1461820759, "post_id": 36900593, "comment_id": 61375138, "body": "@cnst I don&#39;t think anyone is using gcc lower than 5.3 if they can help it. version 6 is due out this summer."}], "owner": {"reputation": 21557, "user_id": 1122270, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/1ab0e19086582d27abe75b0635f57f43?s=128&d=identicon&r=PG", "display_name": "cnst", "link": "https://stackoverflow.com/users/1122270/cnst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1461790136, "creation_date": 1461790136, "last_edit_date": 1495535291, "question_id": 36900593, "link": "https://stackoverflow.com/questions/36900593/gcc-is-there-no-tail-recursion-if-i-return-stdstring-in-c", "title": "gcc: is there no tail recursion if I return std::string in C++?", "body": "<p>As per my answer in <a href=\"https://stackoverflow.com/questions/5760774/write-a-recursive-function-that-reverses-the-input-string/36900592#36900592\">Write a recursive function that reverses the input string</a>, I've tried seeing whether <code>clang++ -O3</code> or <code>g++ -O3</code> would make a tail-recursion optimisation, using some of the suggestions from <a href=\"https://stackoverflow.com/questions/490324/how-do-i-check-if-gcc-is-performing-tail-recursion-optimization\">How do I check if gcc is performing tail-recursion optimization?</a>, but it doesn't look like any tail recursion optimisation is taking place.  Any idea why?</p>\n\n<p>Does this have to do with the way C++ objects are created and destroyed?  Is there any way to make it work?</p>\n\n<p>The programme:</p>\n\n<pre><code>% cat t2.cpp\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstd::string\nrerev1(std::string s)\n{\n        if (s.empty())\n                return s;\n        return rerev1(s.substr(1)) + s[0];\n}\n\nstd::string\nrerev2(std::string s, std::string b = \"\")\n{\n        if (s.empty())\n                return b;\n        return rerev2(s.substr(1), s[0] + b);\n}\n\nint\nmain()\n{\n        std::cout &lt;&lt; rerev1(\"testing\") &lt;&lt; std::endl;\n        std::cout &lt;&lt; rerev2(\"testing\") &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The testing (if the tail recursion optimisation would have been taking place, I'd expect there'd only be one call to each version of the function, not two):</p>\n\n<pre><code>% clang++ -Wall -O3 t2.cpp\n% objdump --disassemble a.out | fgrep rerev | fgrep callq\n  400d8f:       e8 ac ff ff ff          callq  400d40 &lt;_Z6rerev1Ss&gt;\n  400fd1:       e8 5a ff ff ff          callq  400f30 &lt;_Z6rerev2SsSs&gt;\n  401168:       e8 d3 fb ff ff          callq  400d40 &lt;_Z6rerev1Ss&gt;\n  40128d:       e8 9e fc ff ff          callq  400f30 &lt;_Z6rerev2SsSs&gt;\n\n% g++ -O3 t2.cpp\n% objdump --disassemble a.out | fgrep rerev | fgrep callq\n  400c93:       e8 28 02 00 00          callq  400ec0 &lt;_Z6rerev1Ss&gt;\n  400cfa:       e8 11 03 00 00          callq  401010 &lt;_Z6rerev2SsSs&gt;\n  400f25:       e8 96 ff ff ff          callq  400ec0 &lt;_Z6rerev1Ss&gt;\n  4010ca:       e8 41 ff ff ff          callq  401010 &lt;_Z6rerev2SsSs&gt;\n\n% clang++ -v\nDebian clang version 3.0-6.2 (tags/RELEASE_30/final) (based on LLVM 3.0)\nTarget: x86_64-pc-linux-gnu\nThread model: posix\n\n% g++ --version\ng++ (Debian 4.7.2-5) 4.7.2\nCopyright (C) 2012 Free Software Foundation, Inc.\n</code></pre>\n"}, {"tags": ["c++", "oop", "inheritance", "circular-dependency"], "comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461790180, "post_id": 36900580, "comment_id": 61365375, "body": "Why does it need to know &quot;Deriving&quot;, why not just take a pointer to &quot;Base*&quot;?"}, {"owner": {"reputation": 225, "user_id": 4246148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/R9cBS.jpg?s=128&g=1", "display_name": "mak", "link": "https://stackoverflow.com/users/4246148/mak"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461790506, "post_id": 36900580, "comment_id": 61365565, "body": "Because in my program there can be many Base objects pointing to the same Deriving object because of certain reasons."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461790591, "post_id": 36900580, "comment_id": 61365620, "body": "By <i>object</i> do you mean instance or class definition?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461790865, "post_id": 36900580, "comment_id": 61365749, "body": "Can you show how you intend to construct Deriving and Base, please?"}, {"owner": {"reputation": 225, "user_id": 4246148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/R9cBS.jpg?s=128&g=1", "display_name": "mak", "link": "https://stackoverflow.com/users/4246148/mak"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461791140, "post_id": 36900580, "comment_id": 61365912, "body": "In my case Base objects can actually only be constructed by a Deriving object. The Deriving object can be constructed from outside. The Deriving object has a method which constructs a Base object and returns a pointer to it. Why does it matter?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461791513, "post_id": 36900580, "comment_id": 61366091, "body": "Trying to eliminate misunderstanding/miscommunication about polymorphism as the issue. So far as I know, what you&#39;re trying to do is impossible because you can&#39;t pre-declare a descendant before it&#39;s ancestor. Someone else may have a clever multiple-inheritance workaround though, but only if they know you&#39;re not just thinking you are responsible for creating an instance of your Base class when you instantiate your Derived."}, {"owner": {"reputation": 501, "user_id": 4562676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4499a73c0034783da2ab032cb054869c?s=128&d=identicon&r=PG", "display_name": "tomse", "link": "https://stackoverflow.com/users/4562676/tomse"}, "edited": false, "score": 0, "creation_date": 1461791619, "post_id": 36900580, "comment_id": 61366127, "body": "You have to separate the declaration and definition to solve your problem. Add a class forward <code>class Derived;</code> before <code>Base</code> so the compiler knows <code>Derived</code> and change your functions, ctors, etc. to declarations e.g. <code>void f();</code> and add the definitions afterwards e.g. <code>void Base::f() { d-&gt;g(); }</code>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1461803532, "post_id": 36900580, "comment_id": 61370328, "body": "Maybe <a href=\"http://stackoverflow.com/questions/4173254/what-is-the-curiously-recurring-template-pattern-crtp\">CRTP</a> woul solve your problem"}], "answers": [{"tags": [], "owner": {"reputation": 1934, "user_id": 4932834, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cb44dcd4ebddfea3ede8c6d46b02795?s=128&d=identicon&r=PG&f=1", "display_name": "PcAF", "link": "https://stackoverflow.com/users/4932834/pcaf"}, "is_accepted": true, "score": 2, "last_activity_date": 1461791800, "creation_date": 1461791800, "answer_id": 36901052, "question_id": 36900580, "link": "https://stackoverflow.com/questions/36900580/base-class-with-pointer-to-deriving-object-how-to-tell-both-of-each-others-exi/36901052#36901052", "title": "Base class with pointer to deriving object: How to tell both of each other&#39;s existence?", "body": "<p>In Base, only function <code>f</code> needs to know definition of class <code>Deriving</code>, so define it after <code>Deriving</code> is defined .</p>\n\n<pre><code>class Deriving;\n\nclass Base {\n      Deriving* d;\n    public:\n      Base(Deriving* deriving) {\n        d = deriving;\n      }\n      void f();\n};\n\nclass Deriving : public Base {\n    public:\n      Deriving() : Base(this) {}\n      void g();\n};\n\nvoid Base::f()\n{\n    d-&gt;g();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1461800582, "creation_date": 1461800582, "answer_id": 36902794, "question_id": 36900580, "link": "https://stackoverflow.com/questions/36900580/base-class-with-pointer-to-deriving-object-how-to-tell-both-of-each-others-exi/36902794#36902794", "title": "Base class with pointer to deriving object: How to tell both of each other&#39;s existence?", "body": "<p>This kind of arrangement is normally a logic error. The base class should never need to know anything about the derived class. If a method in the base class needs to use assets that happen to be stored in the derived class, then references to those assets can be passed into the function f().</p>\n\n<p>In the example above, the desired behaviour can be achieved with inheritance:</p>\n\n<p>Something like this:</p>\n\n<pre><code>class Base\n{\npublic:\n  void f() {\n    impl_f();\n  }\nprivate:\n  virtual void impl_f() = 0;\n};\n\nclass Derived : public Base\n{\nprivate:\n  void impl_f() override\n  {\n    // whatever g() was going to do...\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 4246148, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/R9cBS.jpg?s=128&g=1", "display_name": "mak", "link": "https://stackoverflow.com/users/4246148/mak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 36901052, "answer_count": 2, "score": 0, "last_activity_date": 1461800582, "creation_date": 1461790083, "question_id": 36900580, "link": "https://stackoverflow.com/questions/36900580/base-class-with-pointer-to-deriving-object-how-to-tell-both-of-each-others-exi", "title": "Base class with pointer to deriving object: How to tell both of each other&#39;s existence?", "body": "<p>Here is a minimal example. I have a Base class that needs to know the Deriving class. In turn the Deriving class needs to know the Base class. So how can I define them, so that they know of each other's existence?</p>\n\n<pre><code>class Base {\n  Deriving* d;\npublic:\n  Base(Deriving* deriving) {\n    d = deriving;\n  }\n  void f() {\n    d-&gt;g();\n  }\n};\n\nclass Deriving : public Base {\npublic:\n  Deriving() : Base(this) {}\n  g();\n};\n</code></pre>\n\n<p>Here is what I tried and what the compiler said:\nDefining <code>Base</code> first leads to <code>error: 'Deriving' does not name a type</code>. Defining <code>Deriving</code> first leads to <code>error: expected class-name before '{' token</code>. Declaring an incomplete type of <code>Base</code> or <code>Deriving</code> leads to <code>error: invalid use of incomplete type 'class X'</code>. I do not know what else to try.</p>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1461789557, "post_id": 36900357, "comment_id": 61365022, "body": "Show the definition of <code>perspective</code>. If it is taking the value by reference for example, that would be important to know."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1461789780, "post_id": 36900357, "comment_id": 61365152, "body": "i wouldnt use names starting with an underscore (they are not allowed in global namespace)"}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1461789897, "post_id": 36900357, "comment_id": 61365217, "body": "Is <code>perspective</code> a function or a member of a class?"}, {"owner": {"reputation": 9, "user_id": 6263555, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/adb4dff2e3f57103ee475a5cffbe8e8f?s=128&d=identicon&r=PG&f=1", "display_name": "GabeNoodle", "link": "https://stackoverflow.com/users/6263555/gabenoodle"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1461789924, "post_id": 36900357, "comment_id": 61365231, "body": "@tobi303 That was intentional, as It only needs to be used localy."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1461790056, "post_id": 36900357, "comment_id": 61365295, "body": "Also wondering what version of C++ you are compiling with as C++14 may be required to do the assignment in the struct."}, {"owner": {"reputation": 9, "user_id": 6263555, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/adb4dff2e3f57103ee475a5cffbe8e8f?s=128&d=identicon&r=PG&f=1", "display_name": "GabeNoodle", "link": "https://stackoverflow.com/users/6263555/gabenoodle"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1461790059, "post_id": 36900357, "comment_id": 61365299, "body": "@MichaelDorgan Yes, it is."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1461790133, "post_id": 36900357, "comment_id": 61365349, "body": "Yes it is a function or yes it is a member?  lol"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1461790276, "post_id": 36900357, "comment_id": 61365426, "body": "As an aside, putting constants into a struct like this is silly, in my opinion. Why not use <code>namespace Constants</code>, then you can drop the <code>static</code>."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1461792345, "post_id": 36900357, "comment_id": 61366497, "body": "Try it with Visual C++ 2015. Lots of updates in that one."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6263555, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/adb4dff2e3f57103ee475a5cffbe8e8f?s=128&d=identicon&r=PG&f=1", "display_name": "GabeNoodle", "link": "https://stackoverflow.com/users/6263555/gabenoodle"}, "edited": false, "score": 0, "creation_date": 1461790346, "post_id": 36900575, "comment_id": 61365478, "body": "My friend who was using GCC was able to compile it. But I can&#39;t even with the exact same settings and without any compiler specifics."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 9, "user_id": 6263555, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/adb4dff2e3f57103ee475a5cffbe8e8f?s=128&d=identicon&r=PG&f=1", "display_name": "GabeNoodle", "link": "https://stackoverflow.com/users/6263555/gabenoodle"}, "edited": false, "score": 0, "creation_date": 1461790387, "post_id": 36900575, "comment_id": 61365498, "body": "@GabeNoodle: Then it sounds like the compiler and version you&#39;re using would be important information to include in your question."}, {"owner": {"reputation": 9, "user_id": 6263555, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/adb4dff2e3f57103ee475a5cffbe8e8f?s=128&d=identicon&r=PG&f=1", "display_name": "GabeNoodle", "link": "https://stackoverflow.com/users/6263555/gabenoodle"}, "edited": false, "score": 0, "creation_date": 1461790551, "post_id": 36900575, "comment_id": 61365592, "body": "I am using Visual Studio 2013."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 0, "last_activity_date": 1461790063, "creation_date": 1461790063, "answer_id": 36900575, "question_id": 36900357, "link": "https://stackoverflow.com/questions/36900357/illegal-reference-to-non-static-member-in-a-struct/36900575#36900575", "title": "Illegal reference to non static member in a struct", "body": "<p>I cannot reproduce the error on GCC 6. If I make <code>perspective</code> take a <code>const &amp;</code> for the Tau argument, then I can get this error:</p>\n\n<pre><code>constexpr-test.cpp:(.text+0x1b): undefined reference to `Constants::Tau'\n</code></pre>\n\n<p>Otherwise it works fine, for me.</p>\n\n<p>My only other guess is that you have unsaved changes in your Maths.hpp file. Or you have a second copy of it someplace. Somewhere that you don't have <code>static</code> on the definition of Tau.</p>\n"}], "owner": {"reputation": 9, "user_id": 6263555, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/adb4dff2e3f57103ee475a5cffbe8e8f?s=128&d=identicon&r=PG&f=1", "display_name": "GabeNoodle", "link": "https://stackoverflow.com/users/6263555/gabenoodle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461792305, "creation_date": 1461789348, "last_edit_date": 1461792305, "question_id": 36900357, "link": "https://stackoverflow.com/questions/36900357/illegal-reference-to-non-static-member-in-a-struct", "title": "Illegal reference to non static member in a struct", "body": "<p>When compiling with Visual Studio 2013 I get the error</p>\n\n<pre><code>illegal reference to non-static member 'Ice::Constants::Tau\n</code></pre>\n\n<p>And this is all of the relevant code</p>\n\n<p>Maths.hpp</p>\n\n<pre><code>#ifndef ICE_MATHS_DEFINES_H\n#define ICE_MATHS_DEFINES_H\n\n#include \"Vec2.hpp\"\n#include \"Vec3.hpp\"\n#include \"Vec4.hpp\"\n#include \"Mat4.hpp\"\n#include \"Quaternion.hpp\"\n\nnamespace Ice\n{\n  struct Constants\n  {\n    static constexpr f32 Pi  = 3.14159265359;\n    static constexpr f32 Tau = 6.28318530718;\n  };\n}\n\n#endif\n</code></pre>\n\n<p>Offending line of code in engine.cpp</p>\n\n<pre><code>_context_scene.projection = perspective( Constants::Tau, aspect_ratio, 0.1f, 100.0f );\n</code></pre>\n\n<p>Perspective function</p>\n\n<pre><code>  Mat4 perspective( f32 fov, f32 aspect, f32 near, f32 far );\n</code></pre>\n"}, {"tags": ["c++", "opencv", "stream", "rtsp"], "owner": {"reputation": 51, "user_id": 6263456, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GD127zALltw/AAAAAAAAAAI/AAAAAAAAANA/L8U2a7j2OQg/photo.jpg?sz=128", "display_name": "Peter Bak\u0161a", "link": "https://stackoverflow.com/users/6263456/peter-bak%c5%a1a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 903, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1461841156, "creation_date": 1461789308, "last_edit_date": 1461841156, "question_id": 36900346, "link": "https://stackoverflow.com/questions/36900346/rtsp-error-while-decoding-mb", "title": "RTSP: error while decoding MB", "body": "<p>I have problem with RTSP stream from my BOSH cammera. While Im getting stream  to my program with this code:</p>\n\n<pre><code>VideoCapture cap(\"rtsp://name:password@IPaddress:554\");\n</code></pre>\n\n<p>i get some stream, but after few images i get this error:</p>\n\n<p><a href=\"http://i.stack.imgur.com/ubElH.png\" rel=\"nofollow\">enter image description here</a></p>\n\n<p>and then, my stream looks like this:\n<a href=\"http://i.stack.imgur.com/RtHdW.jpg\" rel=\"nofollow\">enter image description here</a></p>\n\n<p>I saw that there are more solutions for my problem, like using VLC libraries to resolve my problem, or GStreamer. But this is no solution for my problem, because I need to use OPenCV libraries, save every image to MATRIX, and Im then using my special image processing.. \nDoes anybody have solution ? \nIs it possible to create some buffer ? If answer yes, can anybody write HOW ?\nHere is my code: </p>\n\n<pre><code>#include &lt;opencv\\cv.h&gt;\n#include &lt;opencv2\\highgui\\highgui.hpp&gt;\n#include &lt;opencv2\\imgproc\\imgproc.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\nusing namespace cv;\n\nint main()\n{\n    Mat frame;\n    namedWindow(\"video\", 1);\n    VideoCapture cap(\"rtsp://name:password@IPaddress:554\");\n\n    if(!cap.isOpened())\n    {\n        cout&lt;&lt;\"Camera not found\"&lt;&lt;endl;\n        return -1;\n    }\n\n    while(1)\n    {\n        cap &gt;&gt; frame;\n        if(frame.empty()) break;\n        resize(frame, frame, Size(1200, 800), 0, 0, INTER_CUBIC);\n        imshow(\"video\", frame);\n        if(waitKey(1000) &gt;= 0) break;\n    }   \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "pcap"], "answers": [{"tags": [], "owner": {"reputation": 390, "user_id": 1181783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc4df175c4842306310c62f6771f41e6?s=128&d=identicon&r=PG", "display_name": "Correa", "link": "https://stackoverflow.com/users/1181783/correa"}, "is_accepted": false, "score": 0, "last_activity_date": 1461790374, "creation_date": 1461790374, "answer_id": 36900663, "question_id": 36900317, "link": "https://stackoverflow.com/questions/36900317/reading-pcap-file-to-vector-array/36900663#36900663", "title": "Reading pcap file to vector/array", "body": "<p>According to documentation your code looks right. pcap_loop should be doing the FILE reading, you shouldn't try to do it.</p>\n\n<p>One thing the doc mentions is that in older pcap versions 0 for count in pcap_loop is undefined, so it should be safer to use -1 in case you are linking to an older version.</p>\n"}, {"tags": [], "owner": {"reputation": 2159, "user_id": 1080517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2716302deba4765ec00122e0b0da833d?s=128&d=identicon&r=PG", "display_name": "sebap123", "link": "https://stackoverflow.com/users/1080517/sebap123"}, "is_accepted": true, "score": 0, "last_activity_date": 1461790731, "creation_date": 1461790731, "answer_id": 36900769, "question_id": 36900317, "link": "https://stackoverflow.com/questions/36900317/reading-pcap-file-to-vector-array/36900769#36900769", "title": "Reading pcap file to vector/array", "body": "<p>I after further documentation and Internet investigation I've found function: <a href=\"http://www.tcpdump.org/manpages/pcap_next_ex.3pcap.html\" rel=\"nofollow\">pcap_next_ex()</a></p>\n\n<p>Thanks to that I can use now while loop and read line by line (or more precisely packet by packet). The general idea is as follows:</p>\n\n<pre><code>struct pcap_pkthdr *header;\nconst u_char *pkt_data;\nint res;\n\nwhile((res = pcap_next_ex(fp, &amp;header, &amp;pkt_data)) &gt;= 0)\n{\n    //Process packet\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user862787"}, "is_accepted": false, "score": 0, "last_activity_date": 1461839078, "creation_date": 1461839078, "answer_id": 36911847, "question_id": 36900317, "link": "https://stackoverflow.com/questions/36900317/reading-pcap-file-to-vector-array/36911847#36911847", "title": "Reading pcap file to vector/array", "body": "<blockquote>\n  <p>I've been trying to treat file as a typical <code>FILE</code>, and in while loop read until <code>EOF</code>, but it doesn't work, because I cannot simply treat <code>fp</code> as <code>FILE</code>.</p>\n</blockquote>\n\n<p>No, because it's <em>not</em> a <code>FILE</code>.  (You also get a <code>pcap_t *</code> from <code>pcap_open_live()</code> or from a <code>pcap_create()</code>/<code>pcap_activate()</code> combination, but that gives you a handle for a live capture, not for a file.)</p>\n\n<blockquote>\n  <p>Also I don't see any possibility to pass pointer to <code>pcap_handler</code> to retrieve it later.</p>\n</blockquote>\n\n<p>The fourth argument to <code>pcap_loop()</code> is passed as the first argument to <em><code>pcap_handler</code></em>, so you could do</p>\n\n<pre><code>pcap_loop(fp, 0, dispatcher_handler, pointer);\n</code></pre>\n\n<p>and then, in <code>dispatcher_handler()</code>, cast <code>temp1</code> to the appropriate type and use it - it'll point to the same thing that <code>pointer</code> does.</p>\n"}], "owner": {"reputation": 2159, "user_id": 1080517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2716302deba4765ec00122e0b0da833d?s=128&d=identicon&r=PG", "display_name": "sebap123", "link": "https://stackoverflow.com/users/1080517/sebap123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "accepted_answer_id": 36900769, "answer_count": 3, "score": 0, "last_activity_date": 1461839078, "creation_date": 1461789198, "question_id": 36900317, "link": "https://stackoverflow.com/questions/36900317/reading-pcap-file-to-vector-array", "title": "Reading pcap file to vector/array", "body": "<p>I am trying to read pcap file to some data structure like vector or array and later use gathered data (only selected one like packet length, timestamp) in application. I've found some sample application for reading pcap:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;pcap.h&gt;\n\n#define LINE_LEN 16\n\nvoid dispatcher_handler(u_char *, const struct pcap_pkthdr *, const u_char *);\n\nint main(int argc, char **argv)\n{\n    pcap_t *fp;\n    char errbuf[PCAP_ERRBUF_SIZE];\n\n    if(argc != 2)\n    {\n        printf(\"usage: %s filename\", argv[0]);\n        return -1;\n\n    }\n\n    /* Open the capture file */\n    if ((fp = pcap_open_offline(argv[1],            // name of the device\n                         errbuf                 // error buffer\n                         )) == NULL)\n    {\n        fprintf(stderr,\"\\nUnable to open the file %s.\\n\", argv[1]);\n        return -1;\n    }\n\n    /* read and dispatch packets until EOF is reached */\n    pcap_loop(fp, 0, dispatcher_handler, NULL);\n\n    pcap_close(fp);\n    return 0;\n}\n\n\n\nvoid dispatcher_handler(u_char *temp1,\n                        const struct pcap_pkthdr *header,\n                        const u_char *pkt_data)\n{\n    u_int i=0;\n\n    /*\n     * unused variable\n     */\n    (VOID*)temp1;\n\n    /* print pkt timestamp and pkt len */\n    printf(\"%ld:%ld (%ld)\\n\", header-&gt;ts.tv_sec, header-&gt;ts.tv_usec, header-&gt;len);\n\n    printf(\"\\n\\n\");\n\n}\n</code></pre>\n\n<p>The problem is with <code>pcap_loop()</code>. I've found <a href=\"http://www.tcpdump.org/manpages/pcap_loop.3pcap.html\" rel=\"nofollow\">documentation</a> for this, but the only information is that this is reading whole file until end of file is reached. I've been trying to treat file as a typical <code>FILE</code>, and in while loop read until <code>EOF</code>, but it doesn't work, because I cannot simply treat <code>fp</code> as <code>FILE</code>.</p>\n\n<p>Also I don't see any possibility to pass pointer to <code>pcap_handler</code> to retrieve it later.</p>\n\n<p>Can someone suggest how I can do it other way?</p>\n"}, {"tags": ["c++", "git", "makefile", "artifactory"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1461791601, "post_id": 36900260, "comment_id": 61366119, "body": "Is it a bad idea?  We keep ours in source control - it seems to work ok.  Now I am worried I am missing something."}, {"owner": {"reputation": 30812, "user_id": 589329, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7badf6e89094b134dd4eb65792b7f734?s=128&d=identicon&r=PG", "display_name": "Vampire", "link": "https://stackoverflow.com/users/589329/vampire"}, "edited": false, "score": 1, "creation_date": 1461792316, "post_id": 36900260, "comment_id": 61366479, "body": "Keeping binaries in source control is almost always a bad idea. VCS are usually optimized for source code i. e. text that can be diffed and compressed very efficiently. Most are pretty bad with storing binaries regarding size and performance."}, {"owner": {"reputation": 42229, "user_id": 1290731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cd21d706444339285b779efb2e5f34e?s=128&d=identicon&r=PG", "display_name": "jthill", "link": "https://stackoverflow.com/users/1290731/jthill"}, "edited": false, "score": 0, "creation_date": 1461798938, "post_id": 36900260, "comment_id": 61369084, "body": "If you&#39;re just using git to cache your build products I don&#39;t see anything wrong there, I&#39;d do that by (a) making the build hierarchy a separate repository a.k.a. a submodule, (b) committing tagged builds separately, without any history, and (c) doing the clone/update management directly.  But if you&#39;re on any kind of a decent system you can probably get much better results with ccache."}], "answers": [{"tags": [], "owner": {"reputation": 1038, "user_id": 547270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yEM1T.png?s=128&g=1", "display_name": "scrutari", "link": "https://stackoverflow.com/users/547270/scrutari"}, "is_accepted": false, "score": 0, "last_activity_date": 1461791078, "creation_date": 1461791078, "answer_id": 36900863, "question_id": 36900260, "link": "https://stackoverflow.com/questions/36900260/artifactory-support-for-c-c-dev/36900863#36900863", "title": "Artifactory support for C/ C++ dev", "body": "<p>Raw solution would be to use maven with native-plugin and extract-plugin. You will have to deploy your libraries and headers to maven repository. Then you may consume them through pom.XML just specifying dependencies. This solution is quite good if you want maintainable incremental builds, but implies certain efforts investments.</p>\n"}], "owner": {"reputation": 3887, "user_id": 510423, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/9f1e6368ae6c29084396dd81758ec743?s=128&d=identicon&r=PG", "display_name": "Kamath", "link": "https://stackoverflow.com/users/510423/kamath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 392, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461791078, "creation_date": 1461788986, "question_id": 36900260, "link": "https://stackoverflow.com/questions/36900260/artifactory-support-for-c-c-dev", "title": "Artifactory support for C/ C++ dev", "body": "<p>I want to cut down build time in a large C++ project by version controlling the libraries. This looks to be a bad idea with git, or any other VCS for that matter.</p>\n\n<p>While there is to a git extension called git-lfs to manage this problem,  <a href=\"https://www.jfrog.com/artifactory/\" rel=\"nofollow\">Artifactory</a>  or other similar tools seems to be a better approach.</p>\n\n<p>Can Artifactory be used for a C++ project with Makefile based build system ?</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 1296, "user_id": 506013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d474a0dd3522671e6bc02b1ac55776?s=128&d=identicon&r=PG", "display_name": "rts1", "link": "https://stackoverflow.com/users/506013/rts1"}, "edited": false, "score": 1, "creation_date": 1461789139, "post_id": 36900254, "comment_id": 61364802, "body": "You have radius in the base class as well as the derived class: I suspect that&#39;s the problem"}, {"owner": {"reputation": 389, "user_id": 217085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58aa754c0293b89d2e4a614cb7dc024?s=128&d=identicon&r=PG", "display_name": "Mr_Hic-up", "link": "https://stackoverflow.com/users/217085/mr-hic-up"}, "edited": false, "score": 3, "creation_date": 1461789148, "post_id": 36900254, "comment_id": 61364806, "body": "The &quot;setRadius&quot; method shouldn&#39;t be static."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1461789228, "post_id": 36900254, "comment_id": 61364838, "body": "There should be no <code>cylinderType::setRadius</code> function at all, since a correct version is already inherited from the base class.  Cylinder just needs to perform height handling, and calculate the total area of all surfaces (two faces equal to surface area, and one curved surface which just might be related to the circle circumference somehow)."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1461789434, "post_id": 36900254, "comment_id": 61364951, "body": "<a href=\"http://stackoverflow.com/help/mcve\">How to create a MCVE</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4237682, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a7c4249dbe13480ed8ab9efb1211ff88?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4237682/raj"}, "edited": false, "score": 0, "creation_date": 1461794817, "post_id": 36901022, "comment_id": 61367645, "body": "Thank you all for your input. I have tried the suggestions out but end up with a similar error.  Error 1 error C2352: &#39;circleType::setRadius&#39; : illegal call of non-static member function  This is my dilemma. I get one or the other error. Line 26 in main.cpp is causing the error:  cylinderType::setRadius(cylinderBase + cylinderHeight);  I&#39;ve tried some other variations but get one of those two error or get an external link error."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 31, "user_id": 4237682, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a7c4249dbe13480ed8ab9efb1211ff88?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4237682/raj"}, "edited": false, "score": 0, "creation_date": 1461795774, "post_id": 36901022, "comment_id": 61368036, "body": "@Raj static functions are meant to be called using the <code>class::</code> syntax, while non-static functions are meant to be called with <code>object.</code> or <code>pointer-&gt;</code> syntax. You need to create an object of the class before you call the non-static member."}], "tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 2, "last_activity_date": 1461791680, "creation_date": 1461791680, "answer_id": 36901022, "question_id": 36900254, "link": "https://stackoverflow.com/questions/36900254/c2597-illegal-reference-to-non-static-member/36901022#36901022", "title": "C2597 illegal reference to non static member", "body": "<p>It's a very simple rule: static member functions can only access member variables that are static as well. That's because a static function isn't called against a specific object, so object members don't make sense in that context.</p>\n\n<p>In your case, the static function <code>setRadius</code> is trying to modify the member variable <code>radius</code> which is <em>not</em> static. I suspect that you really <em>don't</em> want <code>setRadius</code> to be a static function.</p>\n"}], "owner": {"reputation": 31, "user_id": 4237682, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a7c4249dbe13480ed8ab9efb1211ff88?s=128&d=identicon&r=PG&f=1", "display_name": "Raj", "link": "https://stackoverflow.com/users/4237682/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7501, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1461791680, "creation_date": 1461788972, "question_id": 36900254, "link": "https://stackoverflow.com/questions/36900254/c2597-illegal-reference-to-non-static-member", "title": "C2597 illegal reference to non static member", "body": "<p>Trying to get this homework figured out and I just keep hitting one wall after another. What I am getting now is the error message:</p>\n\n<p>Error 1 error C2597: illegal reference to non-static member 'circleType::radius'</p>\n\n<p>I have 2 header files, circleType.h and cylinderType.h and I need to out put results for shipping and painting costs that a user would enter. A little help before I go completely out of my mind ... Thank you.</p>\n\n<p>circle.h</p>\n\n<pre><code>class circleType\n{\npublic:\nstatic void setRadius(double r);\n\ndouble getRadius();\ndouble area();\ndouble circumference();\n\ncircleType(double r = 0);\n\nprivate:\ndouble radius;\n\n};\n\nvoid circleType::setRadius(double r)\n{\nif (r &gt;= 0)\n{\n    radius = r;\n}\nelse\n{\n    radius = 0;\n}\n}\n\ndouble circleType::getRadius() \n{\nreturn radius;\n}\n\ndouble circleType::area() \n{\nreturn 3.1416 * radius * radius;\n}\n\ndouble circleType::circumference() \n{\nreturn 2 * 3.1416 * radius;\n}\n\ncircleType::circleType(double r)\n{\nsetRadius(r);\n}\n</code></pre>\n\n<p>cylinderTyper.h</p>\n\n<pre><code>#include \"circleType.h\"\n\nclass cylinderType: public circleType\n{\npublic:\nstatic void setRadius(double r);\n\nstatic double getRadius();\nstatic double area();\nstatic double circumference();\n\ncylinderType(double r = 0);\n\nprivate:\n\ndouble radius;\n\n};\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"cylinderType.h\"\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nvoid enterData(int&amp; cylinderBase,int&amp; cylinerHeight, double&amp; shipCost,     double&amp; paintCost);\n\nint main()\n{\ncout &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt; setprecision(2);\n\nint cylinderBase, cylinderHeight;\ndouble sCost, pCost, shipCost, paintCost, volume, area = 0, circumference = 0;\n\nenterData(cylinderBase, cylinderHeight, shipCost, paintCost);\n\ncylinderType::setRadius(cylinderBase + cylinderHeight);\ncylinderType::getRadius();\ncylinderType::area();\ncylinderType::circumference();\n\ncout &lt;&lt; \"Cost of shipping: $\" &lt;&lt; circumference * shipCost &lt;&lt; endl;\n\ncout &lt;&lt; \"Cost of painting: $\" &lt;&lt; area * paintCost &lt;&lt; endl;\n\nsystem(\"pause\");\nreturn 0;\n}\n\nvoid enterData(int&amp; cylinderBase, int&amp; cylinderHeight, double&amp; shipCost, double&amp; paintCost)\n{\ncout &lt;&lt; \"Enter the base size of cylinder: \";\ncin &gt;&gt; cylinderBase;\ncout &lt;&lt; endl;\n\ncout &lt;&lt; \"Enter the hight size of cylinder: \";\ncin &gt;&gt; cylinderHeight;\ncout &lt;&lt; endl;\n\ncout &lt;&lt; \"Enter shipping cost per liter: \";\ncin &gt;&gt; shipCost;\ncout &lt;&lt; endl;\n\ncout &lt;&lt; \"Enter cost of painting per square foot: \";\ncin &gt;&gt; paintCost;\ncout &lt;&lt; endl;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "openmp"], "comments": [{"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 0, "creation_date": 1461789440, "post_id": 36900239, "comment_id": 61364958, "body": "Showing some code will help a lot. Concerning the number of threads - did you check out OpenMP documentation?"}, {"owner": {"reputation": 31, "user_id": 6263517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b15270e0e1346120cea833121260331?s=128&d=identicon&r=PG&f=1", "display_name": "a_myth", "link": "https://stackoverflow.com/users/6263517/a-myth"}, "reply_to_user": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 0, "creation_date": 1461791348, "post_id": 36900239, "comment_id": 61366008, "body": "I have included the code. I am getting slightly reduced performance when I do the vector updates as shown in the code as compared to when done sequentially. Parallelising the routines scalarProd and Matrix vector multiplication is also further worsening the performance."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 2, "creation_date": 1461830356, "post_id": 36900239, "comment_id": 61380147, "body": "There is an implicit barrier applied at the end of each work-sharing <code>for</code> clause."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6263517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b15270e0e1346120cea833121260331?s=128&d=identicon&r=PG&f=1", "display_name": "a_myth", "link": "https://stackoverflow.com/users/6263517/a-myth"}, "edited": false, "score": 0, "creation_date": 1461858320, "post_id": 36919027, "comment_id": 61400730, "body": "I have tried parallelising scalarprod() and  mentioned my results in the edit. I am getting huge speed downs."}, {"owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "reply_to_user": {"reputation": 31, "user_id": 6263517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b15270e0e1346120cea833121260331?s=128&d=identicon&r=PG&f=1", "display_name": "a_myth", "link": "https://stackoverflow.com/users/6263517/a-myth"}, "edited": false, "score": 0, "creation_date": 1461867391, "post_id": 36919027, "comment_id": 61406479, "body": "I&#39;ve edited my response to reflect your new post as well. Basically, the end advice is: use a common library to perform these low-level, highly optimized basic linear algebra ideas for you."}], "tags": [], "owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "is_accepted": false, "score": 0, "last_activity_date": 1461863996, "last_edit_date": 1461863996, "creation_date": 1461857052, "answer_id": 36919027, "question_id": 36900239, "link": "https://stackoverflow.com/questions/36900239/multithreaded-program-for-sparse-matrices/36919027#36919027", "title": "Multithreaded Program for Sparse Matrices", "body": "<p>Honestly, I would suggest parallelizing at a higher level. By this I mean trying to minimize the number of <code>#pragma omp parallel</code>s you are using. Every time you try and split up the work among your threads, there is an OpenMP overhead. Try and avoid this whenever possible.</p>\n\n<p>So in your case at the very least I would try:</p>\n\n<pre><code>Mat_Vec_Mult(MAT,x0,rm);\ndouble* pm = (double*) malloc(numcols*sizeof(double)); // must be performed once outside of parallel region\n\n// all threads forked and created once here\n#pragma omp parallel for schedule(static)\nfor(int i = 0; i &lt; numcols; i++) {\n    rm[i] = b[i] - rm[i]; // (1)\n    xm[i] = x0[i];        // (2) does not require (1)\n    pm[i] = rm[i];        // (3) requires (1) at this i, not (2)\n}  \n// implicit barrier at the end of omp for\n// implicit join of all threads at the end of omp parallel\n\nscalarProd(rm,rm,numcols);\n</code></pre>\n\n<p>Notice how I show that no barriers are actually necessary between your loops anyway. </p>\n\n<p>If the majority of your time had been spent in this computation stage, you will surely be seeing considerable improvement. However, I'm reasonably confident that the majority of your time is being spent in <code>Mat_Vec_Mult()</code> and maybe also <code>scalarProd()</code>, so the amount of time you'll be saving is probably minimal.</p>\n\n<p>** <strong>EDIT</strong> **</p>\n\n<p>And as per your edit, I am seeing a few problems. (1) Always compile with <code>-O3</code> when you are testing performance of your algorithm. (2) You won't be able to improve the runtime of something that takes .000007 sec to complete; that's nearly instantaneous. This goes back to what I said previously: try and parallelize at a higher level. CG Method is inherently a sequential algorithm, but there are certainly research papers developed detailing parallel CG. (3) Your implementation of scalar product is not optimal. Indeed, I suspect your implementation of matrix-vector product is not either. I would personally do the following:</p>\n\n<pre><code>double scalarProd(double* vec1, double* vec2, int n) {\n    double prod = 0.0;\n    int i;\n\n    // omp_set_num_threads(4); this should be done once during initialization somewhere previously in your program\n    #pragma omp parallel for private(i) reduction(+:prod)\n    for (i = 0; i &lt; n; ++i) {\n        prod += vec1[i]*vec2[i];\n    }\n    return prod;\n}\n</code></pre>\n\n<p>(4) There are entire libraries (LAPACK, BLAS, etc) that have highly optimized matrix-vector, vector-vector, etc operations. Any Linear Algebra library must be built upon them. Therefore, I'd suggest looking at using one of those libraries to do your two operations before you start re-creating the wheel here and trying to implement your own.</p>\n"}], "owner": {"reputation": 31, "user_id": 6263517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b15270e0e1346120cea833121260331?s=128&d=identicon&r=PG&f=1", "display_name": "a_myth", "link": "https://stackoverflow.com/users/6263517/a-myth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461864043, "creation_date": 1461788935, "last_edit_date": 1461864043, "question_id": 36900239, "link": "https://stackoverflow.com/questions/36900239/multithreaded-program-for-sparse-matrices", "title": "Multithreaded Program for Sparse Matrices", "body": "<p>I am a newbie to multithreading. I am trying to design a program that solves a sparse matrix. In my code I call Vector Vector dot product and Matix vector product as  subroutines many times to arrive at the final solution. I am trying to parallelise the code using open MP (Especially the above two sub routines.)\nI also have sequential codes in between which i donot intend to parallelise.</p>\n\n<p>My question is how do I handle the threads created when the sub routine is called. Should I put a barrier at the end of every sub routine call.</p>\n\n<p>Also where should I set the number of threads? </p>\n\n<pre><code>Mat_Vec_Mult(MAT,x0,rm);\n#pragma omp parallel for schedule(static)\nfor(int i=0;i&lt;numcols;i++)  \n    rm[i] = b[i] - rm[i];\n\n#pragma omp barrier\n\n\n#pragma omp parallel for schedule(static)\nfor(int i=0;i&lt;numcols;i++)  \n    xm[i] = x0[i];\n#pragma omp barrier\n\n\ndouble* pm = (double*) malloc(numcols*sizeof(double));\n\n\n    #pragma omp parallel for schedule(static)\nfor(int i=0;i&lt;numcols;i++)  \n    pm[i] = rm[i];\n#pragma omp barrier\nscalarProd(rm,rm,numcols);\n</code></pre>\n\n<p>Thanks</p>\n\n<p>EDIT: </p>\n\n<p>for the scalar dotproduct, I am using the following piece of code:</p>\n\n<pre><code>double scalarProd(double* vec1, double* vec2, int n){\ndouble prod = 0.0;\nint chunk = 10; \nint i;\n//double* c = (double*) malloc(n*sizeof(double));\n\nomp_set_num_threads(4);\n\n// #pragma omp parallel shared(vec1,vec2,c,prod) private(i)\n#pragma omp parallel\n{\n    double pprod = 0.0;\n    #pragma omp for\n    for(i=0;i&lt;n;i++) {\n        pprod += vec1[i]*vec2[i];\n    }\n\n    //#pragma omp for reduction (+:prod)\n    #pragma omp critical\n    for(i=0;i&lt;n;i++) {\n        prod += pprod;\n    }\n}\n\n\nreturn prod;\n}\n</code></pre>\n\n<p>I have now added the time calculation code in my ConjugateGradient function as below:</p>\n\n<pre><code>start_dotprod = omp_get_wtime();\nrm_rm_old = scalarProd(rm,rm,MAT-&gt;ncols);\n    run_dotprod = omp_get_wtime() - start_dotprod;\nfprintf(timing,\"Time taken by rm_rm dot product : %lf \\n\",run_dotprod);        \n</code></pre>\n\n<p>Observed results : Time taken for the dot product Sequential Version : 0.000007s Parallel Version : 0.002110</p>\n\n<p>I am doing a simple compile using gcc -fopenmp command on Linux OS on my Intel I7 laptop.</p>\n\n<p>I am currently using a matrix of size n = 5000.</p>\n\n<p>I am getting huge speed down overall since the same dot product gets called multiple times till convergence is achieved( around 80k times).</p>\n\n<p>Please suggest some improvements. Any help is much appreciated!</p>\n"}, {"tags": ["c++", "iostream", "streambuf"], "answers": [{"tags": [], "owner": {"reputation": 877, "user_id": 2548319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Thw8X.jpg?s=128&g=1", "display_name": "Paulo1205", "link": "https://stackoverflow.com/users/2548319/paulo1205"}, "is_accepted": true, "score": 1, "last_activity_date": 1461826396, "last_edit_date": 1461826396, "creation_date": 1461798514, "answer_id": 36902480, "question_id": 36900226, "link": "https://stackoverflow.com/questions/36900226/customize-streambuffer-for-c-ostream/36902480#36902480", "title": "Customize streambuffer for C++ ostream", "body": "<p>The problem, it seems, is that your object <code>d</code> is destroyed before <code>std::cout</code>, and thus the final calls for destructing the global object, which include flushing buffers, and that take palce after the end of <code>main()</code> (remember it's a global object), attempt to perform operations on a no longer-extant <code>streambuf</code> object.  Your buffer object definitely should outlive the stream you associate it with.</p>\n\n<p>One way of having this in you program is to make <code>d</code> into a pointer, which you will never delete.  Alternatively, you can keep your local object as you used it, but call <code>std::cout.flush()</code>, and then assign <code>cout</code>'s buffer to something else (even <code>nullptr</code>) <strong>before</strong> going out of scope.</p>\n\n<p>While testing with your program (and before I found the problem), I made small changes that made sense to me.  For example, after you successfully write to the descriptor, you can simply <code>bump(ret)</code> (you already know that <code>ret!=-1</code>, so its safe to use).</p>\n\n<p>Other changes that I didn't make, but which you could consider, are to have the descriptor set by the constructor itself, having the destructor close a dangling descriptor, and perhaps change dynamic allocation from C-oriented <code>malloc()</code>/<code>realloc()</code>/<code>free()</code> to C++-oriented <code>std::vector</code>.</p>\n\n<p>Speaking of allocation, you made a very common mistake when using <code>realloc()</code>.  If the reallocation fails, <code>realloc()</code> will keep the original pointer intact, and signal the failure by returning a null pointer.  Since you use the same pointer to get the return value, you risk losing the reference to a still allocated memory.  So, if you at all cannot use C++ containers instead of C pointers, you should change you code to something more like this:</p>\n\n<pre><code>char *newptr;\nnewptr=static_cast&lt;char *&gt;(realloc(ptr, newsize));\nif(newptr)\n    ptr=newptr;\nelse {\n    // Any treatment you want.  I wrote some fatal failure code, but\n    // you might even prefer to go on with current buffer.\n    perror(\"ralloc()\");\n    exit(1);\n}\n</code></pre>\n"}], "owner": {"reputation": 2102, "user_id": 2828925, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/18abe23c6b1123371f171f55be659ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/2828925/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "accepted_answer_id": 36902480, "answer_count": 1, "score": 0, "last_activity_date": 1461826396, "creation_date": 1461788892, "question_id": 36900226, "link": "https://stackoverflow.com/questions/36900226/customize-streambuffer-for-c-ostream", "title": "Customize streambuffer for C++ ostream", "body": "<p>I am implementing my own streambuffer for output stream. Basically it is a vector-like streambuffer in which everytime the overflow function simply reallocates the buffer to two times larger. The sync function will write all data out to the device specified by a file descriptor <code>fd</code>. </p>\n\n<pre><code>class MyStreamBuf : public ::std::streambuf {\n\n  constexpr static size_t INIT_BUFFER_SIZE {1024};\n\n  public: \n\n    MyStreamBuf();\n    ~MyStreamBuf();\n\n    void fd(const int);\n\n    int sync() override;\n    int_type overflow(int_type ch = traits_type::eof()) override;\n\n  private:\n\n    int _fd {-1};\n    size_t _size;\n    char_type* _base;    \n    void _resize(const size_t);\n};\n\n\nMyStreamBuf::MyStreamBuf() {\n  _size = INIT_BUFFER_SIZE;\n  _base = static_cast&lt;char_type*&gt;(malloc(_size * sizeof(char_type)));\n  setp(_base, _base + _size - 1);   // -1 to make overflow easier.\n}\n\n// Destructor.\nMyStreamBuf::~MyStreamBuf() {\n  ::free(_base);\n}\n\n// Procedure: fd\n// Change the underlying device.\nvoid MyStreamBuf::fd(const int fd) {\n  _fd = fd;\n}\n\n// Procedure: _resize\n// Resize the underlying buffer to fit at least \"tgt_size\" items of type char_type.\nvoid MyStreamBuf::_resize(const size_t tgt_size) {\n\n  // Nothing has to be done if the capacity can accommodate the file descriptor.\n  if(_size &gt;= tgt_size) return;\n\n  // Adjust the cap to the next highest power of 2 larger than num_fds\n  for(_size = (_size ? _size : 1); _size &lt; tgt_size; _size *= 2);\n\n  // Adjust and reset the memory chunk.\n  _base = static_cast&lt;char_type*&gt;(::realloc(_base, _size*sizeof(char_type)));\n\n  setp(_base, _base + _size - 1);   // -1 to make overflow easier.\n}\n\nint MyStreamBuf::sync() {\n\n  int res = 0;\n\n  ::std::ptrdiff_t remain = pptr() - pbase();\n\n  while(remain) {\n\n    issue_write:\n    auto ret = ::write(_fd, pptr() - remain, remain);\n\n    if(ret == -1) {\n      if(errno == EINTR) {\n        goto issue_write;\n      }\n      else if(errno == EAGAIN) {\n        break;\n      }\n      else {\n        res = -1;\n        break;\n      }\n    }\n    remain -= ret;\n  }\n\n  if(remain) {\n    ::memcpy(pbase(), pptr() - remain, remain*sizeof(char_type));\n  }\n  pbump(pbase() + remain - pptr());\n\n  return res;\n}\n\ntypename MyStreamBuf::int_type MyStreamBuf::overflow(int_type ch) {\n  assert(traits_type::eq_int_type(ch, traits_type::eof()) == false);\n  _resize(_size * 2);\n  return ch;\n}\n</code></pre>\n\n<p>However I am getting segfault while replacing the <code>cout</code> with my own buffer. I couldn't find where the error is after struggling with GDB.</p>\n\n<pre><code>// Function: main\nint main() {\n\n  auto fd = open(\"./test.txt\",  O_WRONLY | O_CREAT | O_TRUNC, S_IRUSR | S_IWUSR);\n\n  MyStreamBuf d;\n\n  d.fd(fd);\n\n  ::std::cout.rdbuf(&amp;d);\n\n  ::std::cout &lt;&lt; 1 &lt;&lt; \" \" &lt;&lt; 2 &lt;&lt; ::std::endl;\n\n  close(fd);\n\n  return 0;\n}\n</code></pre>\n\n<p>Is there anything wrong with this implementation? I saw many articles typically overriding <code>sync</code> and <code>overflow</code> are required.</p>\n"}, {"tags": ["c++", "vector", "struct", "binaryfiles"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1461788547, "post_id": 36900102, "comment_id": 61364447, "body": "You found The Wrong Way."}, {"owner": {"reputation": 23, "user_id": 4812325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d18e605e7929de454d103ec676e59c?s=128&d=identicon&r=PG&f=1", "display_name": "Lansrow", "link": "https://stackoverflow.com/users/4812325/lansrow"}, "edited": false, "score": 0, "creation_date": 1461788676, "post_id": 36900102, "comment_id": 61364531, "body": "Yeah I figured, I have just been taking shots in the dark hoping something sticks"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4812325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d18e605e7929de454d103ec676e59c?s=128&d=identicon&r=PG&f=1", "display_name": "Lansrow", "link": "https://stackoverflow.com/users/4812325/lansrow"}, "edited": false, "score": 0, "creation_date": 1461793625, "post_id": 36900360, "comment_id": 61367109, "body": "Thank you! Im going to try and implement this and get back with my results"}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 1, "last_activity_date": 1461789353, "creation_date": 1461789353, "answer_id": 36900360, "question_id": 36900102, "link": "https://stackoverflow.com/questions/36900102/writing-a-vector-of-structs-that-contain-another-vector-to-a-binary-file/36900360#36900360", "title": "writing a vector of structs that contain another vector to a binary file", "body": "<p>A very easy way is to use <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/serialization/doc/tutorial.html\" rel=\"nofollow\"><code>Boost Serialization</code></a>. You will need to define a member function in each of your classes to handle the serialization for example:</p>\n\n<pre><code>void details::serialize(Archive &amp; ar, const unsigned int version) {\n    ar &amp; balance;\n    ar &amp; history;\n    ar &amp; pin;\n}\n\n\nvoid customer::serialize(Archive &amp; ar, const unsigned int version) {\n    ar &amp; vectorID;\n    ar &amp; name; \n    ar &amp; type;  \n    ar &amp; detail;\n}\n</code></pre>\n\n<p>Then when you want to add to file you can just do:</p>\n\n<pre><code>std::ofstream ofs(\"filename\", std::ios::binary); // binary file open\n....\n// save data to archive\n{\n    boost::archive::text_oarchive oa(ofs);\n    // write class instance to archive\n    oa &lt;&lt; yourCustomerClass;\n}\n</code></pre>\n\n<p>And the opposite to read the file. </p>\n"}], "owner": {"reputation": 23, "user_id": 4812325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d18e605e7929de454d103ec676e59c?s=128&d=identicon&r=PG&f=1", "display_name": "Lansrow", "link": "https://stackoverflow.com/users/4812325/lansrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461789353, "creation_date": 1461788457, "last_edit_date": 1461788632, "question_id": 36900102, "link": "https://stackoverflow.com/questions/36900102/writing-a-vector-of-structs-that-contain-another-vector-to-a-binary-file", "title": "writing a vector of structs that contain another vector to a binary file", "body": "<p>I have been trying to write this to a file, but to no avail I have found a way, I also need to be able to read from this as well. Here is the struct</p>\n\n<pre><code>struct details\n{\n    float balance=0;\n    vector&lt;string&gt; history;\n    string pin;\n};\nstruct customer\n{\n    int vectorID;\n    string name; \n    char type;  \n    details detail;\n};\nvector&lt;customer&gt; accounts;\n</code></pre>\n\n<p>what I have right now is:</p>\n\n<pre><code>ofstream fileBack;\nfileBack.open(\"file.txt\", ios::in|ios::binary|ios::trunc);\n\nfileBack.write(reinterpret_cast&lt;char*&gt;(&amp;accounts), accounts.size()*sizeof(accounts));\nfileBack.close();\n</code></pre>\n\n<p>And I know this is wrong because when I open the file it is not nearly large enough to contain the information I put into it.\nAll help appreciated, thank you in advance</p>\n"}, {"tags": ["c++", "algorithm", "terrain", "procedural-generation", "heightmap"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1461788404, "post_id": 36900037, "comment_id": 61364370, "body": "what do you mean with &quot;rough interpretation&quot;? Maybe your Example is a rough interpretation of What it should look like."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1461825682, "post_id": 36900037, "comment_id": 61377308, "body": "Too lazy to go through your code so just hints: 1. recursion is really tricky on this due to overlaps and edge crossing irregularities simpler/faster/better is to use iteration instead see my <a href=\"http://stackoverflow.com/a/36258843/2521214\">Iterative Diamond&amp;Square in C++</a> 2. looks like you are not adjusting randomness (the magnitude should lovering with recursion layer) or not using average position as base (midpoint displacement) but that is just visual impression you need to check it (could be also wrong recursion). Also look at <a href=\"http://stackoverflow.com/a/36647622/2521214\">island generator</a>"}], "answers": [{"tags": [], "owner": {"reputation": 856, "user_id": 950488, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GIg0O.png?s=128&g=1", "display_name": "Pikalek", "link": "https://stackoverflow.com/users/950488/pikalek"}, "is_accepted": false, "score": 0, "last_activity_date": 1462654168, "creation_date": 1462654168, "answer_id": 37093555, "question_id": 36900037, "link": "https://stackoverflow.com/questions/36900037/c-diamond-square-algorithm-output-is-random-and-noisy/37093555#37093555", "title": "C++ - Diamond-Square algorithm output is random and noisy", "body": "<p>Your midpoint calculations look wrong. The algorithm should sets the midpoint of that square or diamond to be the average of the four corner points plus a random value. But in your code I see this:</p>\n\n<p><code>y = rand() % (int)(avg/5);</code></p>\n\n<p>This basically says, set y to a random number between zero &amp; one fifth of the average of the corners. Instead I would expect to see something like this:</p>\n\n<pre><code>// get a random float in the range 0 to 1\nfloat r = (float)(rand()) / (float)(RAND_MAX);\n// scale r to be in the range -magnitude to magnitude\nr = (r * 2 * magnitude) - magnitude;\n// add the scaled random value to the average of the corners\ny = avg + r;\n</code></pre>\n\n<p>Note: it's possible that this approach will give you y values less than zero. If that's a problem, normalize the data by finding the lowest value &amp; subtracting that amount from each y.</p>\n"}], "owner": {"reputation": 9, "user_id": 3553826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c532e9fe0f53e2c27310200fa33e8a?s=128&d=identicon&r=PG&f=1", "display_name": "user3553826", "link": "https://stackoverflow.com/users/3553826/user3553826"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 860, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570203810, "creation_date": 1461788200, "last_edit_date": 1570203810, "question_id": 36900037, "link": "https://stackoverflow.com/questions/36900037/c-diamond-square-algorithm-output-is-random-and-noisy", "title": "C++ - Diamond-Square algorithm output is random and noisy", "body": "<p>I have implemented a rough interpretation of the <em>Diamond-Square algorithm</em> in C++ to create some semi-realistic fractal terrain, but the output just seems like a random y value at each point rather than smooth rocky shapes. I have altered parameters but feel like an outside look at the code might help me understand the issue. Here are examples of the output:</p>\n\n<p>I got this:</p>\n\n<p><img src=\"https://s32.postimg.org/uohdppoc5/Diamond_Square_3.png\" alt=\"Example\"></p>\n\n<p>And should look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rfMDp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rfMDp.png\" alt=\"What it *should* look like (this is loaded from a file)\"></a>\n</p>\n\n<p>The code:</p>\n\n<pre><code>//Diamond-square algorithm\nHeightMap::HeightMap(float maxY) {\n//type = GL_POINTS; \n//type = GL_LINES;\nnumVertices = RAW_WIDTH*RAW_HEIGHT; //256^2 squares =&gt; 257^2 vertices\nnumIndices = (RAW_WIDTH - 1)*(RAW_HEIGHT - 1) * 6; //each square is 2 triangles (6 indices)\nvertices = new Vector3[numVertices];\ntextureCoords = new Vector2[numVertices];\nindices = new GLuint[numIndices];\ncolours = new Vector4[numVertices];\n\nint cornerA, cornerB, cornerC, cornerD; //Identify corners\ncornerA = 0;\ncornerB = RAW_WIDTH - 1;\ncornerC = RAW_WIDTH*RAW_HEIGHT - RAW_WIDTH;\ncornerD = RAW_WIDTH*RAW_HEIGHT - 1;\n\n//Create vertices\nfor (int x = 0; x &lt; RAW_WIDTH; ++x) {\n    for (int z = 0; z &lt; RAW_HEIGHT; ++z) {\n        int offset = (x * RAW_WIDTH) + z;\n        float y = 0; //Start with vertices set flat\n        if (offset == cornerA ||\n            offset == cornerB ||\n            offset == cornerC ||\n            offset == cornerD) {\n            vertices[offset] = Vector3(x * HEIGHTMAP_X, maxY/2, z * HEIGHTMAP_Z); //Initialise corners to mid height\n            std::cout &lt;&lt; \"Corners: \" &lt;&lt; offset &lt;&lt; std::endl;\n        }\n\n        if (vertices[offset] == Vector3(0, 0, 0)) {\n            vertices[offset] = Vector3(x * HEIGHTMAP_X, y * HEIGHTMAP_Y, z * HEIGHTMAP_Z);\n        }\n        //  textureCoords[offset] = Vector2(x * HEIGHTMAP_TEX_X, z * HEIGHTMAP_TEX_Z);\n    }\n}\n\nVector3 tl, tr, bl, br;\ntl = vertices[cornerA];\ntr = vertices[cornerB];\nbl = vertices[cornerC];\nbr = vertices[cornerD];\n\nfloat roughness = 1.0f;\n\nSquare square = Square(tl, tr, bl, br);\ndiamondSquare(vertices, numVertices, square, roughness);\n\n//Colour\nfor (int x = 0; x &lt; RAW_WIDTH; ++x) {\n    for (int z = 0; z &lt; RAW_HEIGHT; ++z) {\n        int offset = (x*RAW_WIDTH) + z;\n        float shade;\n        if (vertices[offset].y &gt; 0) {\n            shade = 1 - 1.0f / (vertices[offset].y / maxY * 2);\n        }\n        else {\n            shade = 0.1f;\n        }\n        colours[offset] = Vector4(shade, shade, shade, 1.0f);\n        //Colour any vertex that hasn't been passed over red\n        if (vertices[offset].y == maxY / 2 + 100) {\n            colours[offset] = Vector4(1, 0, 0, 1);\n        }\n    }\n}\n\n//Create indices\nnumIndices = 0;\nfor (int x = 0; x &lt; RAW_WIDTH - 1; ++x) {\n    for (int z = 0; z &lt; RAW_HEIGHT - 1; ++z) {\n        int a = (x*(RAW_WIDTH)) + z;\n        int b = ((x + 1)*(RAW_WIDTH)) + z;\n        int c = ((x + 1)*(RAW_WIDTH)) + (z + 1);\n        int d = (x*(RAW_WIDTH)) + (z + 1);\n\n        indices[numIndices++] = c;\n        indices[numIndices++] = b;\n        indices[numIndices++] = a;\n        indices[numIndices++] = a;\n        indices[numIndices++] = d;\n        indices[numIndices++] = c;\n\n    }\n}\nBufferData();\n</code></pre>\n\n<p>}</p>\n\n<pre><code>void HeightMap::squareStep(Vector3 vertices[], int len, Vector3 tl, Vector3 tr, Vector3 bl, Vector3 br, float mid, float roughness) {\nfor (int i = 0; i &lt; len; i++) {\n    Vector3 top = (tl + tr) / 2;\n    Vector3 bot = (bl + br) / 2;\n    Vector3 left = (tl + bl) / 2;\n    Vector3 right = (tr + br) / 2;\n    top.y = 0;\n    bot.y = 0;\n    left.y = 0;\n    right.y = 0;\n    if (vertices[i] == top ||\n        vertices[i] == bot ||\n        vertices[i] == left ||\n        vertices[i] == right) {\n        float y = rand() % (int)(mid/5);\n        y *= roughness;\n        vertices[i] = Vector3(vertices[i].x, mid + y, vertices[i].z); //Set Diamond centre points to mid height + rand\n        std::cout &lt;&lt; \"Square: \" &lt;&lt; vertices[i];\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<pre><code>float HeightMap::diamondStep(Vector3 vertices[], int len, Vector3 tl, Vector3 tr, Vector3 bl, Vector3 br, float roughness) {\nfloat avg;\nfloat y;\n    for (int i = 0; i &lt; len; i++) {\n        Vector3 corners = (tl + tr + bl + br) / 4;\n        avg = corners.y;\n        y = rand() % (int)(avg/5);\n        y *= roughness;\n        corners.y = 0;\n        if (vertices[i] == corners) {\n            vertices[i] = Vector3(vertices[i].x, avg + y, vertices[i].z);         //Set Square centre point to avg height of corners + rand\n            std::cout &lt;&lt; \"Diamond: \" &lt;&lt; vertices[i];\n        }\n    }\nreturn avg + y;\n</code></pre>\n\n<p>}</p>\n\n<pre><code>void HeightMap::diamondSquare(Vector3 vertices[], int numVertices, Square s, float roughness) {\nVector3 tl = s.tl;\nVector3 tr = s.tr;\nVector3 bl = s.bl;\nVector3 br = s.br;\nfloat mid = diamondStep(vertices, numVertices, tl, tr, bl, br, roughness);\nsquareStep(vertices, numVertices, tl, tr, bl, br, mid, roughness);\nroughness *= 0.75f;\nif (s.width &gt; 2 * HEIGHTMAP_X) {\n    std::vector&lt;Square&gt; squares = s.split();\n    for (int i = 0; i &lt; 4; i++) {\n        diamondSquare(vertices, numVertices, squares[i], roughness);\n    }\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "macos", "dllimport", "dylib", "dllexport"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1461788579, "post_id": 36899898, "comment_id": 61364473, "body": "You mean <a href=\"http://stackoverflow.com/questions/4506121/how-to-print-a-list-of-symbols-exported-from-a-dynamic-library\">like this question</a>?"}], "answers": [{"tags": [], "owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "is_accepted": true, "score": 1, "last_activity_date": 1461789174, "creation_date": 1461789174, "answer_id": 36900309, "question_id": 36899898, "link": "https://stackoverflow.com/questions/36899898/def-file-equivalent-for-os-x/36900309#36900309", "title": ".def file equivalent for OS X", "body": "<p>The main part of what you're looking for (if I've understood it) can be accomplished using the <code>-alias &lt;symbol_name&gt; &lt;alternate_symbol_name&gt;</code> and <code>-alias_list &lt;filename&gt;</code> options to the linker (<code>ld</code>). You can achieve additional control using <code>-exported_symbol &lt;symbol&gt;</code> and <code>-unexported_symbol &lt;symbol&gt;</code> and their file-list counterparts <code>-exported_symbols_list &lt;filename&gt;</code> and <code>-unexported_symbols_list &lt;file&gt;</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 425, "user_id": 3081123, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3bed3650e255e662910c7cbba902d4cb?s=128&d=identicon&r=PG&f=1", "display_name": "user3081123", "link": "https://stackoverflow.com/users/3081123/user3081123"}, "edited": false, "score": 0, "creation_date": 1461790463, "post_id": 36900402, "comment_id": 61365540, "body": "Thank you for a detail answer, I will definitely need to rethink some of my approaches. I&#39;m marking Ken Thomases answer as accepted for tracking purposes since it directly answers the question, but your one was incredibly helpful and made me think about things I do."}], "tags": [], "owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1461791723, "last_edit_date": 1461791723, "creation_date": 1461789508, "answer_id": 36900402, "question_id": 36899898, "link": "https://stackoverflow.com/questions/36899898/def-file-equivalent-for-os-x/36900402#36900402", "title": ".def file equivalent for OS X", "body": "<p>Using a .def file to force simpler naming conventions on exported symbols is <em>really</em> not the way to go - generally once you have mangling problems at that level, there is a good chance that something else will go wrong. I'm basing this on the <code>C++</code> tag in your question.</p>\n\n<p>Generally the compiler/linker will generate the correct mangling to match the code you're exporting if you intend on connecting <code>C++</code> code so that when you try to consume it then linker errors would indicate that you're straying off binary compatibility, and linkage may be the least of your problems - y'all are straying into potentially incompatible allocators, etc.</p>\n\n<p>You should export a simple \"C\" api, which will reduce linking complications - there is a well defined C linkage, and the routines will get simple names for linking.</p>\n\n<p>This is the general purpose of the guards in .h files:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n\u2026 library exports \u2026\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>This will automagically get you eminently simpler names for linking against than the convolutions you would normally see when trying to link against C++ code - as long as you <code>#include</code> the <code>.h</code> file when compiling the <code>.cpp</code> file, as long as there are declarations for the routines you want to export in <code>.h</code> that have the corresponding definitions in the <code>.cpp</code> they will be automatically exported demangled.</p>\n\n<p>You still can use the answers offered by Ken Thomases answer - they will give you symbols visibility and symbol aliasing, but TBH, it sounds like you're trying to fit a solution you've been using in windows to another platform, but to me it seems like you've been using an incorrect approach in the windows platform in the first place.</p>\n\n<p>Historical/linkage commentary:</p>\n\n<blockquote>\n  <p>I'm also going to mention that the <code>.def</code> file support on windows is really caused by the different export mechanism on windows - it originally exported symbols from <code>.dll</code> files by ordinal - i.e. a number so you had to use the def file to remap the linkage of names back to the number in question in order to understand things like the calling conventions. Most unix/linux systems never exported only numbered indexes, which means that the names that were defined in the API could be linked directly.<br>\n  The slightly manglesome <code>@&lt;number&gt;</code> items at the end of function names exported from windows <code>.dll</code> files nowadays indicate the number of bytes that are needed for parameters. The <code>__stdcall</code> calling convention adds this in order to ensure that the caller understands that the function being called will pop that number of bytes from the stack before returning, so that the caller can clean up any possible extra parameters for the function call (this is only theoretical - variadic routines are converted to the cdecl calling convention by the compiler automatically to eliminate this issue by default).<br>\n  The ABIs on other platforms don't use calling convention that can split the responsibility of stack cleanup between the caller and callee like that, so as a result, don't get mangling like that by default for 'protection'.</p>\n</blockquote>\n"}], "owner": {"reputation": 425, "user_id": 3081123, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3bed3650e255e662910c7cbba902d4cb?s=128&d=identicon&r=PG&f=1", "display_name": "user3081123", "link": "https://stackoverflow.com/users/3081123/user3081123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 36900309, "answer_count": 2, "score": 0, "last_activity_date": 1461791723, "creation_date": 1461787727, "last_edit_date": 1461788436, "question_id": 36899898, "link": "https://stackoverflow.com/questions/36899898/def-file-equivalent-for-os-x", "title": ".def file equivalent for OS X", "body": "<p>I've found an interesting for me way of exporting functions from dll (windows) using  module definition (.def) file and friendly names for export, but I can't find any information on how that can be done on Mac.</p>\n\n<p>I would like to know if there is any equivalent of module definition on OS X.</p>\n"}, {"tags": ["c++", "vtk"], "answers": [{"tags": [], "owner": {"reputation": 272, "user_id": 2318977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35103d3ea33091bd617f9e24785676f4?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/2318977/afshin"}, "is_accepted": false, "score": 2, "last_activity_date": 1462020665, "creation_date": 1462020665, "answer_id": 36955156, "question_id": 36899801, "link": "https://stackoverflow.com/questions/36899801/how-to-create-vtkpolydata-from-vtkimagedata-surface-extraction/36955156#36955156", "title": "How to Create VTKPolyData from VTKImageData (surface extraction)?", "body": "<p>Use vtkMarchingCubes class. there are some examples <a href=\"http://www.vtk.org/Wiki/VTK/Examples/Cxx/Modelling/ExtractLargestIsosurface\" rel=\"nofollow\">here</a> and <a href=\"https://www.evl.uic.edu/aspale/cs526/final/3-5-2-0.htm\" rel=\"nofollow\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 159, "user_id": 869029, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e4fe6b4434cd2d7af074c1d76a8a58da?s=128&d=identicon&r=PG", "display_name": "Sonnenschein", "link": "https://stackoverflow.com/users/869029/sonnenschein"}, "edited": false, "score": 0, "creation_date": 1463417343, "post_id": 37021957, "comment_id": 62044986, "body": "l folllowed the steps found here(<a href=\"https://pyscience.wordpress.com/2014/09/11/surface-extraction-creating-a-mesh-from-pixel-data-using-python-and-vtk/\" rel=\"nofollow noreferrer\">pyscience.wordpress.com/2014/09/11/&hellip;</a>) and got the same result. What is the difference between <b>vtkmarchingcubes</b> and <b>vtkdiscretemarchingcubes</b>?"}, {"owner": {"reputation": 554, "user_id": 4476501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oTMdb.jpg?s=128&g=1", "display_name": "Summer Sun", "link": "https://stackoverflow.com/users/4476501/summer-sun"}, "edited": false, "score": 0, "creation_date": 1489665809, "post_id": 37021957, "comment_id": 72776364, "body": "When it comes to 2d image and polygon, you may refer to <code>vtkMarchingSquares</code> which is the 2d marching cube."}, {"owner": {"reputation": 149, "user_id": 9598404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7f7d9785f8a047d2f80837915b2db8?s=128&d=identicon&r=PG&f=1", "display_name": "sc241", "link": "https://stackoverflow.com/users/9598404/sc241"}, "edited": false, "score": 0, "creation_date": 1573230898, "post_id": 37021957, "comment_id": 103826891, "body": "Thanks a lot this is so useful"}], "tags": [], "owner": {"reputation": 685, "user_id": 1310934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f2e0ec444c5147b6df51f973123db6?s=128&d=identicon&r=PG", "display_name": "g.stevo", "link": "https://stackoverflow.com/users/1310934/g-stevo"}, "is_accepted": true, "score": 4, "last_activity_date": 1462406981, "last_edit_date": 1462406981, "creation_date": 1462349277, "answer_id": 37021957, "question_id": 36899801, "link": "https://stackoverflow.com/questions/36899801/how-to-create-vtkpolydata-from-vtkimagedata-surface-extraction/37021957#37021957", "title": "How to Create VTKPolyData from VTKImageData (surface extraction)?", "body": "<p>A minimal working example would be something like this.</p>\n\n<pre><code>vtkSmartPointer&lt;vtkMarchingCubes&gt; surface = \nvtkSmartPointer&lt;vtkMarchingCubes&gt;::New();\n\n#if VTK_MAJOR_VERSION &lt;= 5\nsurface-&gt;SetInput(volume);\n#else\nsurface-&gt;SetInputData(volume);\n#endif\nsurface-&gt;SetValue(0, 0.5);\nsurface-&gt;Update();\n\nvtkSmartPointer&lt;vtkPolyData&gt; poly = vtkSmartPointer&lt;vtkPolyData&gt;::New();\npoly = surface-&gt;GetOutput();\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 869029, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e4fe6b4434cd2d7af074c1d76a8a58da?s=128&d=identicon&r=PG", "display_name": "Sonnenschein", "link": "https://stackoverflow.com/users/869029/sonnenschein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1837, "favorite_count": 1, "accepted_answer_id": 37021957, "answer_count": 2, "score": 0, "last_activity_date": 1462406981, "creation_date": 1461787363, "question_id": 36899801, "link": "https://stackoverflow.com/questions/36899801/how-to-create-vtkpolydata-from-vtkimagedata-surface-extraction", "title": "How to Create VTKPolyData from VTKImageData (surface extraction)?", "body": "<p>Given a vtk image:</p>\n\n<hr>\n\n<p><code>vtkSmartPointer&lt;vtkImageData&gt; VTKImage = vtkSmartPointer&lt;vtkImageData&gt;::New();</code></p>\n\n<hr>\n\n<p>which is a 3D image that contains a segmentation result as binary data (segmented object = 1, background = 0), \nHow could I extract the surface of the segmented object and save it as VTKpolyData?</p>\n"}, {"tags": ["c++", "qt", "templates", "qobject"], "answers": [{"comments": [{"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1461802515, "post_id": 36899938, "comment_id": 61370095, "body": "Make sure to include the <code>Q_OBJECT</code> macro in the <code>VectorIndexProxy</code> and <code>HashIndexProxy</code> class definitions in the first example."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1461845974, "post_id": 36899938, "comment_id": 61390952, "body": "@JonHarper That&#39;s what&#39;s implied in the <code>...</code> :) Otherwise it&#39;s a slippery slope and the next thing someone else will tell me is that the entire, correct implementation of a model belongs there :)"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1461790383, "last_edit_date": 1495541257, "creation_date": 1461787836, "answer_id": 36899938, "question_id": 36899800, "link": "https://stackoverflow.com/questions/36899800/alternatives-to-virtual-index-implementation-in-a-model/36899938#36899938", "title": "Alternatives to virtual index implementation in a model", "body": "<p>Make the index-type-specific class one of the base classes:</p>\n\n<pre><code>template &lt;typename Index&gt; class IndexHandler {\n};\n\nusing VectorIndexHandler = IndexHandler&lt;QVector&gt;;\nusing HashIndexHandler = IndexHandler&lt;QHash&gt;;\n\nclass VectorIndexProxy : public QAbstractItemModel, VectorIndexHandler {\n  ... // should be very small\n};\n\nclass HashIndexProxy : public QAbstractItemModel, HashIndexHandler {\n  ... // should be very small\n};\n</code></pre>\n\n<p>Then instead of passing the index type to the constructor, use a factory function:</p>\n\n<pre><code>QAbstractItemModel * proxyFactory(IndexType indexType, QObject * parent = 0) {\n  switch (indexType) {\n  case Foo::Vector:\n    return new VectorIndexProxy(parent);\n  ...\n  }\n}\n</code></pre>\n\n<p>If you envision an interface broader or different than <code>QAbstractItemModel</code>, you'll need to write such a base class and derive from it in the concrete implementations, of course.</p>\n\n<p>You could use CRTP if needed for <code>IndexHandler</code> to call directly into the derived class's methods, making it even smaller:</p>\n\n<pre><code>template &lt;typename Index, typename Derived&gt; class IndexHandler {\n  Derived * derived() { return static_cast&lt;Derived*&gt;(this); }\n  const Derived * derived() const; // as above\n  void foo() {\n    derived()-&gt;setObjectName(\"Yay\");\n  }\n};\n\nclass VectorIndexProxy : \n  public QAbstractItemModel, \n  public VectorIndexHandler&lt;QVector, VectorIndexProxy&gt;\n{\n  ... // should be very small\n};\n</code></pre>\n\n<p>You can also \"promote\" methods from the base class to be Qt slots:</p>\n\n<pre><code>class VectorIndexProxy : ... {\n#ifdef Q_MOC_RUN\n   Q_SLOT void foo();\n#endif\n};\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/q/17057222/1329652\">this question</a> about having a base non-QObject class with signals and slots.</p>\n\n<p>Finally, you could use the <a href=\"https://stackoverflow.com/q/25250171/1329652\">PIMPL idiom</a>, and have a concrete implementation of a fixed type just like you desire. The factory would be invoked in the constructor and you'd be swapping in different PIMPLs for different indices. That's not as expensive as you think since <em>all Qt classes already dynamically allocate a PIMPL</em>, so you can piggy-back on that allocation by deriving your PIMPL from <code>QObjectPrivate</code> (<code>#include &lt;private/qobject_p.h&gt;</code>), and passing the instance of the PIMPL to the protected <code>QObject(QObjectPrivate&amp;)</code>. This pattern is omnipresent in Qt, so even though it's an implementation detail, it's not going away in Qt 5 at the very least. Here's a rough sketch:</p>\n\n<pre><code>// ProxyModel.cpp\n#include &lt;private/qobject_p.h&gt;\n\nclass ProxyModelPrivate : public QObjectPrivate { \n  // Note: you don't need a q-pointer, QObjectData already provides it\n  // for you! CAVEAT: q-pointer is not valid until the QObject-derived-class's\n  // constructor has returned. This would be the case even if you passed\n  // the q-pointer explicitly, of course.\n  ... \n}; // base class\n\nclass VectorProxyModelPrivate : public ProxyModelPrivate { ... };\n\nclass ProxyModel : public QObject\n{\n  Q_OBJECT\n  Q_DECLARE_PRIVATE(ProxyModel)\n  ProxyModel * pimpl(IndexType indexType) {\n    switch (indexType) {\n    case Vector: return new VectorProxyModelPrivate();\n    ...\n  }\npublic:\n    enum IndexType { Vector, Hash };\n\n    explicit ProxyModel(IndexType indexType, QObject *parent = 0) :\n        QObject(*pimpl(IndexType), parent)\n    {}\n};\n</code></pre>\n\n<p>If you were deriving from <code>QAbstractItemModel</code>, your PIMPL would derive from <code>QAbstractItemModelPrivate</code>, in the same fashion; this works for any <code>QObject</code>-deriving class in Qt!</p>\n"}], "owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 36899938, "answer_count": 1, "score": 1, "last_activity_date": 1461790383, "creation_date": 1461787362, "question_id": 36899800, "link": "https://stackoverflow.com/questions/36899800/alternatives-to-virtual-index-implementation-in-a-model", "title": "Alternatives to virtual index implementation in a model", "body": "<p>So I have again encountered the limits of <code>QObject</code>s that cannot be mixed with templates (at least not directly). Basically I have a proxy model class that uses indexing to translate the source positions to local positions and back. The index can be implemented in number of ways, for now I need two versions, one using <code>QHash</code> and one using <code>QVector</code>. The interface of the index is common to both with only subtle differences regarding index manipulation. With templates this would be easy, I would make the class a template and then used specialization for these two cases.</p>\n\n<p>However the model needs to be a <code>QObject</code> so instead it seems I would need to use polymorphism like so:</p>\n\n<pre><code>class IndexInterface;\nclass VectorIndex; //inherits IndexInterface\nclass HashIndex; //inherits IndexInterface\n\nclass ProxyModel : public QObject\n{\n    Q_OBJECT\npublic:\n    enum IndexType { Vector, Hash };\n\n    explicit ProxyModel(IndexType indexType, QObject *parent = 0) :\n        QObject(parent), \n        index(indexType == Vector ? new VectorIndex : new HashIndex) \n    {\n    }\n    //...\n\nprivate:\n    IndexInterface *index = nullptr;\n};\n</code></pre>\n\n<p>I have couple of issues with this. First, it requires dynamic allocation of the index which I would like to get rid off. Second, because of the use of pointer to <code>IndexInterace</code> to dispatch the calls to the index no method of the index will ever be inlined (I have looked over dissasembled code to confirm this and tried various optimizations etc. to no avail).</p>\n\n<p>What would be the alternatives to this design ideally without dynamic allocation of the index and without virtual calls to the index?</p>\n"}, {"tags": ["c++", "openmp"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1461787516, "post_id": 36899777, "comment_id": 61363834, "body": "how do you measure the time?"}, {"owner": {"reputation": 4768, "user_id": 787366, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a49b6d8775416297257c4c4d36e39967?s=128&d=identicon&r=PG", "display_name": "Shmoopy", "link": "https://stackoverflow.com/users/787366/shmoopy"}, "edited": false, "score": 0, "creation_date": 1461788558, "post_id": 36899777, "comment_id": 61364458, "body": "Not an answer-  but I think that your if (jsd[i] &gt;= maxval) belongs in the critical section"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461793981, "post_id": 36899777, "comment_id": 61367265, "body": "Can you take a moment to make your post a little more presentable?"}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1461826629, "post_id": 36899777, "comment_id": 61377886, "body": "Do you really think 50 threads work better than 4?"}], "answers": [{"comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 2, "creation_date": 1461787795, "post_id": 36899896, "comment_id": 61363989, "body": "Your first paragraph is exactly what I would suggest as well. Synchronization can severely limit the benefits of multi-threading"}, {"owner": {"reputation": 11, "user_id": 6050413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca9c2280cef284849cbced026ac75a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Emad Rawashdeh", "link": "https://stackoverflow.com/users/6050413/emad-rawashdeh"}, "edited": false, "score": 0, "creation_date": 1461789309, "post_id": 36899896, "comment_id": 61364895, "body": "the function1 is the thing that slows the application coz it has a hashmap.. but function2 is simiple calculation"}, {"owner": {"reputation": 11, "user_id": 6050413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca9c2280cef284849cbced026ac75a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Emad Rawashdeh", "link": "https://stackoverflow.com/users/6050413/emad-rawashdeh"}, "edited": false, "score": 0, "creation_date": 1461789504, "post_id": 36899896, "comment_id": 61364990, "body": "also. std::max_element() only works for vecors and jsd is an array and when i want to insert (push_back) into vector in a parallel code it produces conflict."}, {"owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "edited": false, "score": 0, "creation_date": 1461791137, "post_id": 36899896, "comment_id": 61365909, "body": "You should read more about the STL and how these things work. You can perform any of these iterator-based functions on arrays. The iterator is a pointer into the array in this case. You can also savely access a  <code>std::vector</code>&#39;s elements in parallel if you first create the vector with the correct size and then access like the array. Or use C++11&#39;s <code>std::array()</code>."}, {"owner": {"reputation": 11, "user_id": 6050413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca9c2280cef284849cbced026ac75a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Emad Rawashdeh", "link": "https://stackoverflow.com/users/6050413/emad-rawashdeh"}, "edited": false, "score": 0, "creation_date": 1461792219, "post_id": 36899896, "comment_id": 61366438, "body": "i update the code as following. but still get slower for more threads"}, {"owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "edited": false, "score": 0, "creation_date": 1461795051, "post_id": 36899896, "comment_id": 61367727, "body": "You should really try <code>double *best = std::max_element(jsd, jsd + N); pos = best - jsd; maxval = *best;</code> although it won&#39;t solve your performance problem ;)"}], "tags": [], "owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "is_accepted": false, "score": 3, "last_activity_date": 1461787720, "creation_date": 1461787720, "answer_id": 36899896, "question_id": 36899777, "link": "https://stackoverflow.com/questions/36899777/openmp-code-c-is-slower-thatn-c/36899896#36899896", "title": "OpenMP code C++ is slower thatn c++", "body": "<p>The first optimization I would suggest is to first compute all jsd values in the loop, then find the maximum element via <code>std::max_element()</code>.\nThis way you are not forcing the threads to synchronise.</p>\n\n<p>The second thing I would do is move over to Intel TBB instead of OpenMP and use <code>parallel_reduce()</code>.</p>\n\n<p>But the biggest question is, how complex are the objective functions you are evaluating.</p>\n"}], "owner": {"reputation": 11, "user_id": 6050413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca9c2280cef284849cbced026ac75a5e?s=128&d=identicon&r=PG&f=1", "display_name": "Emad Rawashdeh", "link": "https://stackoverflow.com/users/6050413/emad-rawashdeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1461793383, "creation_date": 1461787285, "last_edit_date": 1461793383, "question_id": 36899777, "link": "https://stackoverflow.com/questions/36899777/openmp-code-c-is-slower-thatn-c", "title": "OpenMP code C++ is slower thatn c++", "body": "<p>i have the following part of code, i run it on sample of N=3000, the c++ sequential code is faster by 3 seconds which is not good at all.</p>\n\n<p>this code is filling the array jsd[N] with calculated values and i want to locate the maximum value and its location. \nso \n1- is this openmp conversion correct, and is there any better suggstion to make it more profissional\n2- why it is slower that the equavilant c++ code, also the more threads i create the more it get slow.</p>\n\n<p>thanks in advance</p>\n\n<pre><code>double maxval = 0;\nint pos = -1;\ndouble jsd[N];\n#pragma omp parallel for num_threads(4) \nfor (int i = 0; i &lt; N; i++) {\n  double Hl = obj.function1(sequenceVctr, i, LEFT);\n  double Hr = obj.function1(sequenceVctr, i, RIGHT);\n  jsd[i] = obj.function2(H, i + 1, N, Hl, Hr);   \n\n  if (jsd[i] &gt;= maxval) {\n      #pragma omp critical \n      {\n        maxval = jsd[i];\n         pos = i;\n      }\n  }\n}  // for \n</code></pre>\n\n<p>update:</p>\n\n<p>here is the new code but still  slow and get slower in more threads.\ni update the code as following. but still get slower for more threads </p>\n\n<pre><code>double maxval = 0;\nint pos = -1;\ndouble jsd[N];\n#pragma omp parallel num_threads(50)\nfor (int i = 0; i &lt; N; i++) {\n  double Hl = obj.function1(sequenceVctr, i, LEFT);\n  double Hr = obj.function1(sequenceVctr, i, RIGHT);\n  jsd[i]= obj.function2(H, i + 1, N, Hl, Hr);\n\n}  // for\n#pragma omp master\n{\n    vector&lt;double&gt; jsd2 (jsd,jsd+N);\n    vector&lt;double&gt;::iterator jsditer;\n  jsditer = std::max_element(jsd2.begin(), jsd2.end());\n  maxval=*jsditer;\n  pos=std::distance(jsd2.begin(),jsditer) ;\n // cout&lt;&lt;\"pos\"&lt;&lt;pos&lt;&lt;endl;\n} \n#pragma omp barrier\n</code></pre>\n"}, {"tags": ["c++", "c", "for-loop"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1461787584, "post_id": 36899735, "comment_id": 61363873, "body": "use <code>break</code> instead of <code>goto</code>  ?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1461787650, "post_id": 36899735, "comment_id": 61363910, "body": "State Machine design? implement states on every loop and check to use continue(s) and/or break(s)"}, {"owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "edited": false, "score": 0, "creation_date": 1461787699, "post_id": 36899735, "comment_id": 61363936, "body": "make all of the conditionals in the nested loops false (according to the number you want to break out of), then break from the inner-most loop. You have no code after the check here, but be advised any code after this in &quot;parent&quot; loops would execute one more time before breaking."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1461787752, "post_id": 36899735, "comment_id": 61363963, "body": "btw there is nothing inherently wrong with goto, it just leads to extremly messy code in most cases, but you dont have to write messy code just to avoid <code>goto</code>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1461787938, "post_id": 36899735, "comment_id": 61364084, "body": "Breaking out of nested loops is one of the remaining cases where <code>goto</code> is the cleanest solution."}, {"owner": {"reputation": 365, "user_id": 1561663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5702679472b548e01cd2d6738c42d82?s=128&d=identicon&r=PG", "display_name": "joelw", "link": "https://stackoverflow.com/users/1561663/joelw"}, "edited": false, "score": 0, "creation_date": 1461787988, "post_id": 36899735, "comment_id": 61364110, "body": "The <code>goto nj</code> is simply a <code>break</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 365, "user_id": 1561663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5702679472b548e01cd2d6738c42d82?s=128&d=identicon&r=PG", "display_name": "joelw", "link": "https://stackoverflow.com/users/1561663/joelw"}, "edited": false, "score": 0, "creation_date": 1461788056, "post_id": 36899735, "comment_id": 61364154, "body": "@joelw and under the hood a <code>break</code> is simply a <code>goto</code> ;)"}, {"owner": {"reputation": 365, "user_id": 1561663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5702679472b548e01cd2d6738c42d82?s=128&d=identicon&r=PG", "display_name": "joelw", "link": "https://stackoverflow.com/users/1561663/joelw"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1461788390, "post_id": 36899735, "comment_id": 61364361, "body": "@tobi303 Absolutely, but if you are trying to break out of the innermost loop, <code>break</code> is clearer."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 365, "user_id": 1561663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5702679472b548e01cd2d6738c42d82?s=128&d=identicon&r=PG", "display_name": "joelw", "link": "https://stackoverflow.com/users/1561663/joelw"}, "edited": false, "score": 0, "creation_date": 1461788605, "post_id": 36899735, "comment_id": 61364484, "body": "@joelw he doesnt want to break out of the innermost loop only, but conditionally also out of some of the outer ones. Imho the original code is much clearer than the accepted answer (nevertheless I think it is a good answer to the question, given that <code>goto</code> is not wanted)."}, {"owner": {"reputation": 1989, "user_id": 1040315, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/RKlgf.jpg?s=128&g=1", "display_name": "theWalker", "link": "https://stackoverflow.com/users/1040315/thewalker"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1461788874, "post_id": 36899735, "comment_id": 61364640, "body": "@tobi303, you right, goto in this case is most simply and clean solution. I don&#39;t like break in multiple loops from old compilers, where sometimes break breaks over two for()"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1461787906, "post_id": 36899925, "comment_id": 61364059, "body": "I dont really agree that &quot;break cant help&quot;. He could use a flag to kind of forward the break to the outer loops. Whether this would be better than <code>goto</code> is a different question."}, {"owner": {"reputation": 1884, "user_id": 3078414, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b1180f5e68d3542488d66de14ff53964?s=128&d=identicon&r=PG&f=1", "display_name": "user3078414", "link": "https://stackoverflow.com/users/3078414/user3078414"}, "edited": false, "score": 0, "creation_date": 1461836914, "post_id": 36899925, "comment_id": 61384457, "body": "I don&#39;t quite agree with respect to &quot;break can&#39;t help&quot;, or &quot;break can help&quot;. Perhaps it&#39;s also a matter of wording and pragmatism. I dare say  I&#39;ve seen examples of good programming practice using <code>goto</code> for breaking out of multiple nested loops and it is perhaps one of two scenarios I&#39;m also using a <code>goto</code> in C. Although I understand this does not answer the question, using a <code>break</code> whenever one can achieve the goal without overtaxing the code by declaring, setting, checking against and resetting additional variables, flags, etc. is the best solution."}], "tags": [], "owner": {"reputation": 539, "user_id": 6136013, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9dfd7585752c56c5272150aa4fead686?s=128&d=identicon&r=PG&f=1", "display_name": "BlindDriver", "link": "https://stackoverflow.com/users/6136013/blinddriver"}, "is_accepted": false, "score": 2, "last_activity_date": 1461787802, "creation_date": 1461787802, "answer_id": 36899925, "question_id": 36899735, "link": "https://stackoverflow.com/questions/36899735/c-multi-loop-for-basics/36899925#36899925", "title": "C multi-loop for() basics", "body": "<p><code>goto nj</code> can be replaced with <code>break</code>. however, <code>break</code> can't help you if you need to break out of nested loops. I think this is a perfectly legit use case for <code>goto</code>. The only alternative I can think of is to sett the loop counter outside of its range, e.g. <code>c = cmax(j)</code>. Worse than <code>goto</code>, in my opinion.</p>\n"}, {"tags": [], "owner": {"reputation": 5548, "user_id": 5068056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m53CE.jpg?s=128&g=1", "display_name": "Farhad", "link": "https://stackoverflow.com/users/5068056/farhad"}, "is_accepted": true, "score": 2, "last_activity_date": 1461789120, "last_edit_date": 1461789120, "creation_date": 1461787836, "answer_id": 36899939, "question_id": 36899735, "link": "https://stackoverflow.com/questions/36899735/c-multi-loop-for-basics/36899939#36899939", "title": "C multi-loop for() basics", "body": "<p>check this code: </p>\n\n<pre><code>    bool flag = false;\n    for(i=0;i&lt;imax;i++)\n    {   for(j=0;j&lt;jmax(i);j++)\n        {   for(c=0;c&lt;cmax(j);c++)\n            {   if(!check1(c))\n                {    if(check2()) {flag=true;break;}// goes to ni\n                     else break; //goes to nj\n                }\n            }\n            if(flag){flag=false; break;}\n            nj:;\n        }\n        // procedure\n    ni:;\n    }\n</code></pre>\n"}], "owner": {"reputation": 1989, "user_id": 1040315, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/RKlgf.jpg?s=128&g=1", "display_name": "theWalker", "link": "https://stackoverflow.com/users/1040315/thewalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1283, "favorite_count": 0, "accepted_answer_id": 36899939, "answer_count": 2, "score": 1, "last_activity_date": 1461789120, "creation_date": 1461787147, "last_edit_date": 1461788513, "question_id": 36899735, "link": "https://stackoverflow.com/questions/36899735/c-multi-loop-for-basics", "title": "C multi-loop for() basics", "body": "<p>How to write example code without goto and without additional procedure call?</p>\n\n<pre><code>for(i=0;i&lt;imax;i++)\n{   for(j=0;j&lt;jmax(i);j++)\n    {   for(c=0;c&lt;cmax(j);c++)\n        {   if(!check1(c))\n            {    if(check2()) goto ni;\n                 else goto nj;\n            }\n        }\n    // **EDIT** procedure call is here\nnj:;\n    }\nni:;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 1, "creation_date": 1461787023, "post_id": 36899659, "comment_id": 61363535, "body": "Do <code>while(getline(in_file, buffer)) {...}</code> where <code>buffer</code> is a <code>std::string</code> which stores the contents of each line in the file. Parse each line around the comma and you&#39;re good to go"}, {"owner": {"reputation": 3, "user_id": 6263401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4852c1c44d82776cbc9df87657065a4?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Tang", "link": "https://stackoverflow.com/users/6263401/simon-tang"}, "reply_to_user": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 0, "creation_date": 1461787363, "post_id": 36899659, "comment_id": 61363743, "body": "Thank you! But that&#39;s not really what i need in this case,my problems is how to divide the &quot;weight&quot; and the &quot;name&quot; into two different variables for each line i get from the file."}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1461787576, "post_id": 36899659, "comment_id": 61363867, "body": "Is each weight and query in the file on separate lines?"}, {"owner": {"reputation": 3, "user_id": 6263401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4852c1c44d82776cbc9df87657065a4?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Tang", "link": "https://stackoverflow.com/users/6263401/simon-tang"}, "edited": false, "score": 0, "creation_date": 1461787744, "post_id": 36899659, "comment_id": 61363960, "body": "no,one weight for one city,and one weight with one name makes one line,sorry for the confusion"}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 2, "creation_date": 1461790134, "post_id": 36899659, "comment_id": 61365352, "body": "You probably don&#39;t need to parse the integer value for <code>weight</code> since you can just use a formatted input provided by <code>operator&gt;&gt;</code>"}, {"owner": {"reputation": 3, "user_id": 6263401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4852c1c44d82776cbc9df87657065a4?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Tang", "link": "https://stackoverflow.com/users/6263401/simon-tang"}, "edited": false, "score": 0, "creation_date": 1461794744, "post_id": 36899659, "comment_id": 61367611, "body": "Well,i did used &gt;&gt; but it didn&#39;t work,that&#39;s why i try a different approach"}], "answers": [{"tags": [], "owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1461787500, "creation_date": 1461787500, "answer_id": 36899838, "question_id": 36899659, "link": "https://stackoverflow.com/questions/36899659/ccould-someone-help-me-with-getline-from-a-string/36899838#36899838", "title": "(C++)Could someone help me with getline from a string?", "body": "<p>Here is the outline of a potential solution, untested so it may need some tweaking.    </p>\n\n<pre><code>std::string buffer = \"\";\nwhile(getline(in_file, buffer)) {\n    // parse up to the first space (by checking characters in buffer)\n    size_t count1 = 0;\n    while (buffer.at(count1) != ' ' &amp;&amp; count1 &lt; buffer.size()) {\n        ++count1;\n    }\n    // get substring of buffer up to first space occurrence, and convert to \n    // integral type to store in long variable\n    long weight = atoi(buffer.substr(0,count1).c_str());\n\n    // do similar parsing around the commas to get the city/country data...\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "is_accepted": false, "score": 1, "last_activity_date": 1461788608, "last_edit_date": 1461788608, "creation_date": 1461788088, "answer_id": 36900010, "question_id": 36899659, "link": "https://stackoverflow.com/questions/36899659/ccould-someone-help-me-with-getline-from-a-string/36900010#36900010", "title": "(C++)Could someone help me with getline from a string?", "body": "<p>You can use the extraction <code>operator&gt;&gt;</code> of <code>stringstream</code>,which use a space as an input delimiter, to read the formatted long int value for the <code>weight</code>(no need to read this as string and convert to int) and you can then use <code>getline</code> to read the rest the line from the <code>stringstream</code>.</p>\n\n<pre><code>string query_LS;\nlong weight_LS;\nstring name;\nwhile (in_file.peek() != EOF)\n{\n    getline(in_file,name);//read a line from the file\n    istringstream iss(name);\n\n    query_LS=\"\";\n    iss&gt;&gt;weight_LS;//read a formatted long integer,reads upto the space\n    getline(iss,query_LS);//read the rest of the string     \n\n    if (query_LS != \"\")\n    {    \n        Term input_que(query_LS,weight_LS);\n        Search_SL.insert(input_que);\n        last++;\n    } \n}   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6263401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4852c1c44d82776cbc9df87657065a4?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Tang", "link": "https://stackoverflow.com/users/6263401/simon-tang"}, "edited": false, "score": 0, "creation_date": 1461795182, "post_id": 36900018, "comment_id": 61367783, "body": "But it wont delete the numbers right?It works but it didn&#39;t help with my question! :3 Thank you though"}, {"owner": {"reputation": 669, "user_id": 6253379, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/VDrH9.png?s=128&g=1", "display_name": "Nikos Kazazakis", "link": "https://stackoverflow.com/users/6253379/nikos-kazazakis"}, "reply_to_user": {"reputation": 3, "user_id": 6263401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4852c1c44d82776cbc9df87657065a4?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Tang", "link": "https://stackoverflow.com/users/6263401/simon-tang"}, "edited": false, "score": 0, "creation_date": 1461795389, "post_id": 36900018, "comment_id": 61367878, "body": "ah sorry, i read that the other way around. Just swap double and string in the code above and it should do the trick, I&#39;ll update the answer"}, {"owner": {"reputation": 3, "user_id": 6263401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4852c1c44d82776cbc9df87657065a4?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Tang", "link": "https://stackoverflow.com/users/6263401/simon-tang"}, "edited": false, "score": 0, "creation_date": 1461796687, "post_id": 36900018, "comment_id": 61368392, "body": "The second one didn&#39;t work,from my test,it would return all the stuff one by one whatever it&#39;s a string or long int :("}, {"owner": {"reputation": 669, "user_id": 6253379, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/VDrH9.png?s=128&g=1", "display_name": "Nikos Kazazakis", "link": "https://stackoverflow.com/users/6253379/nikos-kazazakis"}, "reply_to_user": {"reputation": 3, "user_id": 6263401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4852c1c44d82776cbc9df87657065a4?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Tang", "link": "https://stackoverflow.com/users/6263401/simon-tang"}, "edited": false, "score": 0, "creation_date": 1461797357, "post_id": 36900018, "comment_id": 61368655, "body": "You&#39;re right, that&#39;s what I get for not compiling it haha. I updated the edit, it should work fine now :)"}, {"owner": {"reputation": 3, "user_id": 6263401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4852c1c44d82776cbc9df87657065a4?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Tang", "link": "https://stackoverflow.com/users/6263401/simon-tang"}, "edited": false, "score": 0, "creation_date": 1461798649, "post_id": 36900018, "comment_id": 61369007, "body": "your solution worked ! :) but my program still has problem,i guess that&#39;s my work there.However,it has been an honer to discuss this problem with you! Thank you!"}], "tags": [], "owner": {"reputation": 669, "user_id": 6253379, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/VDrH9.png?s=128&g=1", "display_name": "Nikos Kazazakis", "link": "https://stackoverflow.com/users/6253379/nikos-kazazakis"}, "is_accepted": true, "score": -1, "last_activity_date": 1461797323, "last_edit_date": 1495535317, "creation_date": 1461788103, "answer_id": 36900018, "question_id": 36899659, "link": "https://stackoverflow.com/questions/36899659/ccould-someone-help-me-with-getline-from-a-string/36900018#36900018", "title": "(C++)Could someone help me with getline from a string?", "body": "<p>After you get the line, try iterating through the istringstream elements (example taken from <a href=\"https://stackoverflow.com/questions/24504582/how-to-test-whether-stringstream-operator-has-parsed-a-bad-type-and-skip-it\">here</a>):</p>\n\n<pre><code>istringstream iss(\"2.832 1.3067 nana 1.678\");\ndouble num = 0;\nwhile(iss &gt;&gt; num || !iss.eof()) {\n    if(iss.fail()) {\n        iss.clear();\n        string dummy;\n        iss &gt;&gt; dummy;\n        continue;\n    }\n    cout &lt;&lt; num &lt;&lt; endl;\n}\n</code></pre>\n\n<p>This will only return the numbers in the stringstream.</p>\n\n<p>EDIT: Code to do this the other way around, i.e. get the strings instead of the numbers:</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(){\n\n    istringstream iss(\"2.832 mike 1.3067 nana 1.678\");\n    double num = 0;\n    while(iss &gt;&gt; num  || !iss.eof()) {\n        if(iss.fail()) {\n            iss.clear();\n            string dummy;\n            iss &gt;&gt; dummy;\n            cout &lt;&lt; dummy &lt;&lt; endl;\n            continue;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3422, "user_id": 1458030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3728aa864efa903f4d0c7db9ac39989?s=128&d=identicon&r=PG", "display_name": "qPCR4vir", "link": "https://stackoverflow.com/users/1458030/qpcr4vir"}, "is_accepted": false, "score": 0, "last_activity_date": 1463487978, "creation_date": 1463487978, "answer_id": 37276170, "question_id": 36899659, "link": "https://stackoverflow.com/questions/36899659/ccould-someone-help-me-with-getline-from-a-string/37276170#37276170", "title": "(C++)Could someone help me with getline from a string?", "body": "<p>Maybe the one immediate problem with your code is?</p>\n\n<pre><code>if (i == 1)    ==&gt;   if (i == 0)  \n</code></pre>\n\n<p>But I like to reuse what we have from the <code>std::</code>, specially in simple cases. </p>\n\n<p>This is my \"I too...\" (untested):</p>\n\n<pre><code>struct Term {std::string query; long weight;};\n... \nTerm input{};\nwhile(in_file&gt;&gt;input.weight &amp;&amp; std::getline(in_file, input.query))\n    if (!input.query.empty())\n        Search_SL.insert(input);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6263401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4852c1c44d82776cbc9df87657065a4?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Tang", "link": "https://stackoverflow.com/users/6263401/simon-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 36900018, "answer_count": 4, "score": 0, "last_activity_date": 1463487978, "creation_date": 1461786868, "last_edit_date": 1461787844, "question_id": 36899659, "link": "https://stackoverflow.com/questions/36899659/ccould-someone-help-me-with-getline-from-a-string", "title": "(C++)Could someone help me with getline from a string?", "body": "<p>I'm new to this community.</p>\n\n<p>I got a program which get info from a .txt file then store it into a array for future use.However,when i try to get line from file with cities name,it didn't work that well.</p>\n\n<p>Sameple for the line:</p>\n\n<pre><code>8175133 New York, New York, United States\n7871900 Taipei, Taiwan\n7785965 Kinshasa, Democratic Republic of the Congo\n</code></pre>\n\n<p>the point here is to get the weight(which are those long int) and the name of the cities(include the Country name .etc) then store them into a class named \"Term\" which has two variables \"weight\" and \"query\".Then store the \"Term\" class in a list.</p>\n\n<p>My problem is,how can i do that?(get info from the file)\nThe way i did it was to get whole line (such as \"7871900    Taipei, Taiwan\")then try to use \"(getline(iss,get_line,' ')\" but it didn't work and give me \"0\" for most of the lines.</p>\n\n<pre><code>  Autocomplete Search_SL(10),Result_SL(k+1);\n    while (!in_file.eof())\n    {\n        string weight;\n        string query_LS;\n        long weight_LS;\n        string name;\n        getline(in_file,name);\n        istringstream iss(name);\n        for (int i = 0;i &lt; 10;i++)\n        {\n            if (getline(iss,get_line,' '))\n            {\n                weight = get_line;\n                if (i == 1)\n                {\n                    weight_LS = atoi(weight.c_str());\n                    cout&lt;&lt; weight_LS&lt;&lt;endl;\n                }\n                else\n                {\n                    query_LS += weight;\n                }\n            }\n        }\n        if (query_LS != \"\")\n        {    \n            Term input_que(query_LS,weight_LS);\n            Search_SL.insert(input_que);\n            last++;\n        }    \n    }    \n</code></pre>\n\n<p>Let me know if you guys have any questions on my question! :P Thank you!</p>\n\n<p>PS: Here's a sample output(correct one):</p>\n\n<pre><code>Please input the search query(type \"exit\" to quit): \nChic\u21b5\u21b5 \n\n 1. 2695598 Chicago, Illinois, United States \n 2. 577375 Chiclayo, Peru\n 3. 86187 Chico, California, United States \n</code></pre>\n\n<p>I'm sure the rest of my program are right coz when i use other txt file which has line like \"</p>\n\n<pre><code> 1. 5627187200  the \n 2. 509184100   at\n</code></pre>\n\n<p>it will works</p>\n"}, {"tags": ["python", "c++", "cython"], "comments": [{"owner": {"reputation": 5662, "user_id": 5781248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/712de4f2f811d1a400d3311c9cdd5836?s=128&d=identicon&r=PG&f=1", "display_name": "J.J. Hakala", "link": "https://stackoverflow.com/users/5781248/j-j-hakala"}, "edited": false, "score": 0, "creation_date": 1462294739, "post_id": 36899655, "comment_id": 61572303, "body": "You could try to change the type of <code>p</code> from <code>const vector[double]&amp;</code> to list, tuple or numpy array, and then convert to <code>const vector[double]&amp;</code>  if necessary."}], "answers": [{"tags": [], "owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "is_accepted": false, "score": 0, "last_activity_date": 1462622435, "creation_date": 1462622435, "answer_id": 37088270, "question_id": 36899655, "link": "https://stackoverflow.com/questions/36899655/exposing-a-c-function-to-python-using-cython/37088270#37088270", "title": "Exposing a c++ function to python using cython", "body": "<p>You have to first tell Cython about the function (through the <code>cdef exetern from</code> mechanism) and then create a Cython function that calls it, and it's this you can use from Python:</p>\n\n<pre><code>from libcpp.vector cimport vector\n\ncdef extern from \"auction.h\":\n    double util(\n        int q, \n        int sq, \n        double alpha, \n        double beta, \n        double kappa, \n        int s, \n        int ss, \n        int m, \n        const vector[double]&amp; p, \n        double a0);\n\ndef py_util(int q, \n        int sq, \n        double alpha, \n        double beta, \n        double kappa, \n        int s, \n        int ss, \n        int m, \n        p, \n        double a0):\n    cdef vector[double] p_vec = p\n    return util(q,sq,alpha,beta,kappa,s,ss,m,p_vec,a0)\n</code></pre>\n\n<p>The slight complication is the conversion to a C++ <code>vector&lt;double&gt;</code>. Cython can automatically convert lists/tuples containing appropriate types to vectors. The flipside is that this is done every time you call <code>py_util</code> and so probably a bit slow. It's also a problem if <code>util</code> stores the reference for use later (probably unlikely, but always possible!) since <code>p_vec</code> will have ceased to exist by then.</p>\n\n<p>Two other options are to create a Cython class that wraps <code>vector[double]</code>. This is clearly a bit more work for you, but avoids a type conversion on every call of <code>py_util</code>. Alternatively you might be able to modify <code>util</code> so it uses a <code>double*</code>, and use numpy arrays or python arrays on the Python side.</p>\n"}], "owner": {"reputation": 539, "user_id": 6136013, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9dfd7585752c56c5272150aa4fead686?s=128&d=identicon&r=PG&f=1", "display_name": "BlindDriver", "link": "https://stackoverflow.com/users/6136013/blinddriver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462622435, "creation_date": 1461786858, "last_edit_date": 1461793216, "question_id": 36899655, "link": "https://stackoverflow.com/questions/36899655/exposing-a-c-function-to-python-using-cython", "title": "Exposing a c++ function to python using cython", "body": "<p>I am trying to expose a c++ function to python using cython as follows:</p>\n\n<pre><code>from libcpp.vector cimport vector\n\ncdef extern from \"auction.h\":\n    cpdef double util(\n        int q, \n        int sq, \n        double alpha, \n        double beta, \n        double kappa, \n        int s, \n        int ss, \n        int m, \n        const vector[double]&amp; p, \n        double a0);\n</code></pre>\n\n<p>I am getting the following (not very descriptive) error:</p>\n\n<blockquote>\n  <p>src\\RFQLib.pyx:4:21: Cannot convert 'double (int, int, double, double,\n  double, int, int, int, const vector[double] &amp;, double)' to Python\n  object</p>\n</blockquote>\n\n<p>What's the problem here?</p>\n\n<p>Thanks in advance for all your help.</p>\n"}, {"tags": ["c++", "templates", "lldb"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 454180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ff741e5568d1283ae1d29cfa4248fa?s=128&d=identicon&r=PG", "display_name": "Stonewall Ballard", "link": "https://stackoverflow.com/users/454180/stonewall-ballard"}, "edited": false, "score": 1, "creation_date": 1461868983, "post_id": 36903358, "comment_id": 61407416, "body": "That put me on a useful track. It still reports types without regard to the specific template instance. I found that adding the -A flag will at least show all the possible resolved types. The one I want is in there somewhere - I just have to eyeball it to find which one matches the template instance I&#39;m examining. Perhaps a python script can automate this. It&#39;s too bad that I can&#39;t use &quot;image lookup -t template_name&lt;my_type&gt;::var_t&quot; or the like."}], "tags": [], "owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "is_accepted": true, "score": 4, "last_activity_date": 1461951138, "last_edit_date": 1461951138, "creation_date": 1461804581, "answer_id": 36903358, "question_id": 36899648, "link": "https://stackoverflow.com/questions/36899648/can-lldb-show-the-actual-type-of-a-typedef/36903358#36903358", "title": "Can lldb show the actual type of a typedef?", "body": "<p>There is no way to tell the variable printer to show the resolved type rather than the declared type of a variable.  You can find out what the resolved type for a typedef is using the type search mode of <code>image lookup</code>:</p>\n\n<pre><code>(lldb) image lookup -t var_t\n1 match found in /private/tmp/foo:\nid = {0x000000b2}, name = \"var_t\", byte-size = 8, decl = foo.cpp:9, compiler_type = \"typedef var_t\"\n     typedef 'var_t': id = {0x00000043}, name = \"helper&lt;short&gt;::type\", byte-size = 8, decl = foo.cpp:4, compiler_type = \"typedef helper&lt;short&gt;::type\"\n     typedef 'helper&lt;short&gt;::type': id = {0x000000eb}, name = \"long int\", qualified = \"long\", byte-size = 8, compiler_type = \"long\"\n</code></pre>\n\n<p>Here's another way to get the same info from the Python API if you want to use that:</p>\n\n<pre><code>(lldb) script\nPython Interactive Interpreter. To exit, type 'quit()', 'exit()' or Ctrl-D.\n&gt;&gt;&gt; foo_var = lldb.frame.FindVariable(\"foo\")\n&gt;&gt;&gt; foo_type = foo_var.GetType()\n&gt;&gt;&gt; print foo_type\ntypedef var_t\n&gt;&gt;&gt; print foo_type.GetCanonicalType()\nlong\n</code></pre>\n\n<p>If this is something you need to do a lot, you could write a Python based lldb command to print the fully resolved type. There's info here:</p>\n\n<p><a href=\"http://lldb.llvm.org/python-reference.html\" rel=\"nofollow\">http://lldb.llvm.org/python-reference.html</a></p>\n\n<p>on how to do that. </p>\n"}], "owner": {"reputation": 93, "user_id": 454180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ff741e5568d1283ae1d29cfa4248fa?s=128&d=identicon&r=PG", "display_name": "Stonewall Ballard", "link": "https://stackoverflow.com/users/454180/stonewall-ballard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1523, "favorite_count": 2, "accepted_answer_id": 36903358, "answer_count": 1, "score": 1, "last_activity_date": 1461951138, "creation_date": 1461786842, "question_id": 36899648, "link": "https://stackoverflow.com/questions/36899648/can-lldb-show-the-actual-type-of-a-typedef", "title": "Can lldb show the actual type of a typedef?", "body": "<p>I'm debugging some template code, and would like lldb to show me the actual type (c-type) of a frame variable instead of a monstrously complex typedef. The actual type would be something like \"int\" or \"unsigned char\", but it shows me only the typedef as if it had no knowledge of the specific template instance.</p>\n\n<p>For example:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct helper\n{\n    using type = long;\n};\n\nint main(int argc, const char * argv[]) {\n\n    using var_t = typename helper&lt;short&gt;::type;\n\n    var_t foo = 1;\n}\n</code></pre>\n\n<p>Stopping at a breakpoint set on \"var_t foo = 1\" shows</p>\n\n<pre><code>foo = (var_t)0\n</code></pre>\n\n<p>I really need to see something like</p>\n\n<pre><code>foo = (long)0\n</code></pre>\n\n<p>Is there any way to do this, or to find out what the resolved type is?</p>\n\n<p>I'm using XCode 7.3 and lldb-350.0.21.3</p>\n"}, {"tags": ["c++", "oop", "compiler-errors", "trie"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461787939, "post_id": 36899643, "comment_id": 61364085, "body": "You need to put the default in the class declaration, not the function definition."}, {"owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461796040, "post_id": 36899643, "comment_id": 61368147, "body": "I think I tried this and it still didn&#39;t work"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461801131, "post_id": 36899643, "comment_id": 61369707, "body": "See <a href=\"http://stackoverflow.com/questions/2749471/default-string-arguments\" title=\"default string arguments\">stackoverflow.com/questions/2749471/default-string-arguments</a> for the proper way to declare the default for <code>std::string</code> arguments."}], "owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "closed_date": 1461789961, "answer_count": 0, "score": 0, "last_activity_date": 1461786827, "creation_date": 1461786827, "question_id": 36899643, "link": "https://stackoverflow.com/questions/36899643/compiling-error-in-trie-constructor", "closed_reason": "Duplicate", "title": "Compiling error in trie constructor", "body": "<p>I'm trying to implement a trie data structure in order to include autocomplete functionality in a database query syncing application I'm testing out. I'm getting an error here that I don't understand. Anyone know what the problem is?</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;set&gt;\n\nusing namespace std;\n\nclass Trie {\n    public:\n        map&lt;char, Trie&gt; children;\n        string value;\n        bool flag;\n\n        Trie(const string &amp;);\n        void add(char);\n        string find(const string &amp;);\n        void insert(const string &amp;);\n        vector&lt;string&gt; all_prefixes();\n        vector&lt;string&gt; autocomplete(const string &amp;);\n};\n\nTrie::Trie(const string &amp;val=\"\") {\n    value = val;\n    flag = false;\n}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>In file included from FILEIO.cpp:7:\n./trie.h:23:26: error: addition of default argument on redeclaration makes this constructor a default constructor\nTrie::Trie(const string &amp;val=\"\") {\n                         ^   ~~\n./trie.h:15:9: note: previous declaration is here\n        Trie(const string &amp;);\n        ^\n1 error generated.\n</code></pre>\n"}, {"tags": ["c++", "sfinae", "enable-if"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1461787053, "post_id": 36899634, "comment_id": 61363550, "body": "Its unclear what you want.  How is it not working.  How do you expect it to work?"}, {"owner": {"reputation": 373, "user_id": 4764917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e922ec5064abd32272f4dda21b36fc5d?s=128&d=identicon&r=PG&f=1", "display_name": "Ini", "link": "https://stackoverflow.com/users/4764917/ini"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1461790918, "post_id": 36899634, "comment_id": 61365785, "body": "I posted more code and explained it in more detail"}], "answers": [{"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 373, "user_id": 4764917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e922ec5064abd32272f4dda21b36fc5d?s=128&d=identicon&r=PG&f=1", "display_name": "Ini", "link": "https://stackoverflow.com/users/4764917/ini"}, "edited": false, "score": 1, "creation_date": 1461794576, "post_id": 36900664, "comment_id": 61367543, "body": "That way it won&#39;t work. At least, the function must be a <code>constexpr</code> one. I&#39;m updating the answer with a minimal, working example."}, {"owner": {"reputation": 373, "user_id": 4764917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e922ec5064abd32272f4dda21b36fc5d?s=128&d=identicon&r=PG&f=1", "display_name": "Ini", "link": "https://stackoverflow.com/users/4764917/ini"}, "edited": false, "score": 0, "creation_date": 1461803595, "post_id": 36900664, "comment_id": 61370343, "body": "but constexp does only workl with one return statement. I have an if in my function"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 373, "user_id": 4764917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e922ec5064abd32272f4dda21b36fc5d?s=128&d=identicon&r=PG&f=1", "display_name": "Ini", "link": "https://stackoverflow.com/users/4764917/ini"}, "edited": false, "score": 0, "creation_date": 1461822501, "post_id": 36900664, "comment_id": 61375813, "body": "If you are passing the <code>-std=C++14</code> argument to the compiler, you can use something more complex than a <code>return</code> statement. Let me update the answer."}, {"owner": {"reputation": 373, "user_id": 4764917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e922ec5064abd32272f4dda21b36fc5d?s=128&d=identicon&r=PG&f=1", "display_name": "Ini", "link": "https://stackoverflow.com/users/4764917/ini"}, "edited": false, "score": 0, "creation_date": 1461898004, "post_id": 36900664, "comment_id": 61417866, "body": "thank you, can you give me a link to where changes of constexp in C++14 are reported? I don&#39;t find a report, where it&#39;s documented that constexp can now have more return statements then one. Sure it&#39;s working but I don&#39;t find the information about that on the internet."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 373, "user_id": 4764917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e922ec5064abd32272f4dda21b36fc5d?s=128&d=identicon&r=PG&f=1", "display_name": "Ini", "link": "https://stackoverflow.com/users/4764917/ini"}, "edited": false, "score": 0, "creation_date": 1461912467, "post_id": 36900664, "comment_id": 61422600, "body": "As an example, <a href=\"http://en.cppreference.com/w/cpp/language/constexpr\" rel=\"nofollow noreferrer\">here</a> is what you are looking for."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": true, "score": 0, "last_activity_date": 1461822723, "last_edit_date": 1461822723, "creation_date": 1461790374, "answer_id": 36900664, "question_id": 36899634, "link": "https://stackoverflow.com/questions/36899634/sfinae-enable-if-condition/36900664#36900664", "title": "sfinae: enable_if condition", "body": "<p>Not sure about what you are looking for, but here is an example of <em>sfinae</em> that uses member functions:</p>\n\n<pre><code>#include&lt;type_traits&gt;\n\ntemplate&lt;typename T&gt;\nstd::enable_if_t&lt;std::is_member_function_pointer&lt;T&gt;::value&gt;\nfoo() { }\n\nstruct S {\n    void bar() { }\n    int i;\n};\n\nint main() {\n    // compiles, for it is a member function\n    foo&lt;decltype(&amp;S::bar)&gt;();\n    // does not compile, for it is not a member function\n    //foo&lt;decltype(&amp;S::i)&gt;();\n}\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>After the edit of the OP, I'm updating the answer with a minimal, working example that shows how to use <em>sfinae</em> the way he wants.<br>\nIn order to do that, the member function has to be <code>constexpr</code> at least for obvious reasons.</p>\n\n<pre><code>#include&lt;type_traits&gt;\n\nstruct S {\n    static constexpr bool bar(bool b) { return b; }\n};\n\ntemplate&lt;bool b&gt;\nstd::enable_if_t&lt;S::bar(b)&gt;\nfoo() { }\n\nint main() {\n    foo&lt;true&gt;();\n    // fails to compile because of sfinae\n    // foo&lt;false&gt;();\n}\n</code></pre>\n\n<p>The OP's example is far from being a minimal one and I guess it doesn't worth to <em>fix</em> it.<br>\nInstead, the one above is enough to explain the idea behind the solution.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>As mentioned in the comments, C++11 has stricter limitations on <code>constexpr</code> functions.<br>\nInstead you can have more complex statements in a <code>constexpr</code> function since C++14.<br>\nAs an example, the code below compiles using <code>-std=c++14</code>, whilst it doesn't compile using <code>-std=c++11</code>:</p>\n\n<pre><code>#include&lt;type_traits&gt;\n\nstruct T {\n    constexpr T(char c): ch{c} { }\n    char ch;\n};\n\nstruct S {\n    static constexpr bool bar(T&amp;&amp; t) {\n        if(t.ch == 'y') {\n            return static_cast&lt;unsigned int&gt;(t.ch) % 2 == 0;\n        } else {\n            return true;\n        }\n    }\n};\n\ntemplate&lt;char c&gt;\nstd::enable_if_t&lt;S::bar(T{c})&gt;\nfoo() { }\n\nint main() {\n    foo&lt;'x'&gt;();\n    // fails to compile because of sfinae\n    // foo&lt;'y'&gt;();\n}\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 4764917, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e922ec5064abd32272f4dda21b36fc5d?s=128&d=identicon&r=PG&f=1", "display_name": "Ini", "link": "https://stackoverflow.com/users/4764917/ini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 929, "favorite_count": 0, "accepted_answer_id": 36900664, "answer_count": 1, "score": 1, "last_activity_date": 1462010909, "creation_date": 1461786797, "last_edit_date": 1462010909, "question_id": 36899634, "link": "https://stackoverflow.com/questions/36899634/sfinae-enable-if-condition", "title": "sfinae: enable_if condition", "body": "<p>I always only see enable_if is used with the condition std::is_integral::value.</p>\n\n<p>Is there a way to use in the condition a function-call of a memberfunction of an object of another templateclass? The function I'm talking about should look like this:</p>\n\n<pre><code>bool someFunc()\n{\n    if (QString(T::staticMetaObject.className()) == QString(\"Form\")) {\n        return true;\n    }\n    return false;   \n}\n</code></pre>\n\n<p>Currently I cannot get it compiled no matter what I try.</p>\n\n<p>Thank you for helping me.</p>\n\n<p><strong>edit:</strong></p>\n\n<p>that my question is more clear more code and an error msg.</p>\n\n<p>mainwindow.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;QDebug&gt;\n\ntemplate &lt;class T&gt;\ntypename std::enable_if&lt;Form&lt;MainWindow&gt;::staticThis-&gt;someFunc(),bool&gt;::type\n  is_smth (T* obj) { return true; }\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    form = new Form&lt;MainWindow&gt;;\n\n    qDebug() &lt;&lt; is_smth(this);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n</code></pre>\n\n<p>mainwindow.h</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include \"form.h\"\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n\n    Form&lt;MainWindow&gt;* form;\n\nprivate:\n    Ui::MainWindow *ui;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>form.h</p>\n\n<pre><code>#ifndef FORM_H\n#define FORM_H\n#include &lt;QObject&gt;\n\nclass FormBase : public QObject\n{\n    Q_OBJECT\n};\n\ntemplate &lt;class T&gt;\nclass Form : public FormBase\n{\npublic:\n    Form() {}\n\n    static Form* staticThis;\n\n    bool someFunc()\n    {\n        if (QString(T::staticMetaObject.className()) == QString(Form::staticMetaObject.className())) {\n            return true;\n        }\n        return false;\n    }\n};\n\n#endif // FORM_H\n</code></pre>\n\n<p>form.cpp</p>\n\n<pre><code>#include \"form.h\"\n#include \"mainwindow.h\"\n\nForm&lt;MainWindow&gt;* Form::staticThis = NULL;\n</code></pre>\n\n<p>error:</p>\n\n<p>the value of 'Form::staticThis' is not usable in a constant expression\n typename std::enable_if::staticThis->someFunc(),bool>::type\n                                                                ^</p>\n\n<p>I'm do not want to use in condition of enable_if a function from std or something. I want to use my own function. And i don't know how to get it work. Maybe thats why you will think the code is a little bit busy. But i think it should show now what I'm trying to accomplish.</p>\n\n<p>Thank you again</p>\n"}, {"tags": ["c++", "c", "calculator"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1461786038, "post_id": 36899417, "comment_id": 61362915, "body": "Read more about data types and their representations."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 4, "creation_date": 1461786060, "post_id": 36899417, "comment_id": 61362929, "body": "Every data type has a specific range of values which is limited."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1461786169, "post_id": 36899417, "comment_id": 61362985, "body": "<i>&quot;What causes my calculator written in C/C++ to give these wrong answers with big numbers?&quot;</i> - The problem is caused by a bug in your code. Although I&#39;m a bit skeptical there&#39;s any code since there is no language called <i>C/C++</i>"}, {"owner": {"reputation": 23331, "user_id": 134252, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/azWjr.png?s=128&g=1", "display_name": "Dolda2000", "link": "https://stackoverflow.com/users/134252/dolda2000"}, "edited": false, "score": 0, "creation_date": 1461786184, "post_id": 36899417, "comment_id": 61362996, "body": "There are no built-in data types for arbitrary-precision calculations, but you can certainly roll your own. Look at Java&#39;s <code>java.math.BigDecimal</code>, for instance."}, {"owner": {"reputation": 1769, "user_id": 3471712, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001030341259/picture?type=large", "display_name": "Auguste", "link": "https://stackoverflow.com/users/3471712/auguste"}, "edited": false, "score": 0, "creation_date": 1461786445, "post_id": 36899417, "comment_id": 61363165, "body": "Could we see the code you use to create your calculator?:)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1461786742, "post_id": 36899417, "comment_id": 61363346, "body": "Both those numbers and their sum fit <code>int64_t</code>."}, {"owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "edited": false, "score": 2, "creation_date": 1461787272, "post_id": 36899417, "comment_id": 61363691, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3290173/how-to-work-with-big-numbers\">How to work with BIG numbers?</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461787283, "post_id": 36899417, "comment_id": 61363699, "body": "May I suggest your program also prints the supposed value of the two operands? Errors can happen on the first step."}], "answers": [{"tags": [], "owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "is_accepted": false, "score": 1, "last_activity_date": 1461786926, "last_edit_date": 1461786926, "creation_date": 1461786570, "answer_id": 36899568, "question_id": 36899417, "link": "https://stackoverflow.com/questions/36899417/calculating-with-very-big-numbers/36899568#36899568", "title": "Calculating With Very Big Numbers", "body": "<p>Simply put, the built-in numeric data types that you're using within C and C++, such as <code>float</code>, <code>int</code>, etc., are limited due to them being represented with a finite and fixed amount of bits, such as 32, 64, etc. bits. You can't \"stuff\" more information into 32 bits than you can, that's the theory of information (read up). Now, when you add two \"very big\" numbers, due to the machine representation, a so-called \"overflow\" occurs (read up), which means that a bit sequence is being created as a result of the operation that represents a \"meaningless\" number; and if the data type is signed, a negative number is likely to appear (again, due to the internal representation).</p>\n\n<p>Now your calculators use so-called \"big numbers arithmetic\", or \"long numbers arithmetic\", implemented in the corresponding libraries. With this approach, the number is represented as an array of numbers, and is thus virtually unlimited (of course, there are limits to the length of an array too, but the range that you can represent this way is a lot wider than that of the built-in types.)</p>\n\n<p>To sum up, read on:</p>\n\n<ul>\n<li>theory of information</li>\n<li>binary number system and conversions decimal &lt;-> binary</li>\n<li>binary arithmetics with signed numbers</li>\n<li>big number arithmetics</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 669, "user_id": 6253379, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/VDrH9.png?s=128&g=1", "display_name": "Nikos Kazazakis", "link": "https://stackoverflow.com/users/6253379/nikos-kazazakis"}, "is_accepted": false, "score": 2, "last_activity_date": 1461786622, "creation_date": 1461786622, "answer_id": 36899588, "question_id": 36899417, "link": "https://stackoverflow.com/questions/36899417/calculating-with-very-big-numbers/36899588#36899588", "title": "Calculating With Very Big Numbers", "body": "<p>Digital data is represented as binary information. So, for an 8-bit integer you would have: <code>0=00000000, 1=00000001, 2=00000010, 3=00000011,</code> etc. As you can imagine, the larger the numbers grow, the more storage is required to represent this information in binary form. What happens with your calculator is called overflow, where the resulting number is simply too large to represent in binary form (there are not enough bits to hold the information).</p>\n\n<p>Now as to why you get accurate results in your computer, it depends on how their software is implemented. Possible explanations are that they either use higher precision arithmetic (they dedicate more bits) the use m<a href=\"https://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic\" rel=\"nofollow\">ultiple precision arithmetic</a>, or perform floating point calculations internally. My money would be on multiple precision arithmetic though.</p>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1461790556, "post_id": 36899725, "comment_id": 61365596, "body": "Also try the synonym &quot;c++ Big Number library&quot;. :-)"}], "tags": [], "owner": {"reputation": 29251, "user_id": 3923896, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4139ee1298ce4b0690a788cb97d47569?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Summit", "link": "https://stackoverflow.com/users/3923896/steve-summit"}, "is_accepted": false, "score": 1, "last_activity_date": 1461787105, "creation_date": 1461787105, "answer_id": 36899725, "question_id": 36899417, "link": "https://stackoverflow.com/questions/36899417/calculating-with-very-big-numbers/36899725#36899725", "title": "Calculating With Very Big Numbers", "body": "<p>Short answer (and I'm not sure why you didn't find it, because it's been asked many, many times): you want a multiple-precision arithmetic library, such as GMP.</p>\n"}], "owner": {"reputation": 1, "user_id": 6263359, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IW1GMgmlWpo/AAAAAAAAAAI/AAAAAAAAAEQ/JH-1nHnqHWw/photo.jpg?sz=128", "display_name": "arda g&#252;ler", "link": "https://stackoverflow.com/users/6263359/arda-g%c3%bcler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "closed_date": 1461787336, "answer_count": 3, "score": -5, "last_activity_date": 1461787105, "creation_date": 1461786001, "question_id": 36899417, "link": "https://stackoverflow.com/questions/36899417/calculating-with-very-big-numbers", "closed_reason": "Not suitable for this site", "title": "Calculating With Very Big Numbers", "body": "<p>I'm -kind of- a beginner to C.</p>\n\n<p>I made several searches but I haven't seen this question asked.\nWhen I try to calculate very big numbers (let's say... Adding 45235432412321312 to 5495034095872309238) my calculator gives answers which are not true. (The answer of my calculator was -2 for the numbers I've given in the previous sentence). </p>\n\n<p>But both Linux's and Windows's own calculators calculate these numbers precisely.</p>\n\n<p>What causes my calculator written in C/C++ to give these wrong answers with big numbers? What can I do to calculate these?</p>\n"}, {"tags": ["python", "c++", "debugging", "release"], "owner": {"reputation": 166, "user_id": 1114790, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0349b8e4cb97fd23710f1c2670d6468c?s=128&d=identicon&r=PG", "display_name": "Stvad", "link": "https://stackoverflow.com/users/1114790/stvad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1461785975, "creation_date": 1461785975, "question_id": 36899408, "link": "https://stackoverflow.com/questions/36899408/c-debugging-approaches-for-code-that-is-compiled-in-release-mode-and-called-fr", "title": "C++ Debugging approaches for code that is compiled in release mode and called from Python", "body": "<p>I have the following situation:</p>\n\n<p>I have the C++ code that is used from Python through bindings.</p>\n\n<p>This code does processing of incoming network packages and decoding them (it's audio and video packets). So the performance is essential and trying to compile it in debug mode renders it unusable.</p>\n\n<p>My question is what are the good practices to approach debugging in this scenario? </p>\n\n<p>Obviously, I can do print debugging and a lot of logging, and that's what I do right now. \nBut I'm wondering whether there are approaches or tools that can simplify my life.\nThank you!</p>\n\n<p>Working environment: Linux, GCC 4.9, python2.7.</p>\n"}, {"tags": ["c++", "qt", "ellipse"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1461786368, "post_id": 36899325, "comment_id": 61363114, "body": "i quickly searched the docs and from what i understood the QPainter uses some coordinate system to draw stuff and you can apply transformations to that to draw e.g. an ellipse whose major axes are not horizontal/vertical. see here: <a href=\"http://doc.qt.io/qt-4.8/coordsys.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/coordsys.html</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1461786476, "post_id": 36899325, "comment_id": 61363187, "body": "btw whats wrong with using a boundary rectangle and rotating it? you just have to calculate the corresponding numbers"}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1461786587, "post_id": 36899325, "comment_id": 61363250, "body": "Additionally, with the draw/rotate method, you can paint one ellipse, and create the rest by rotating and scaling, which in Qt is a lot less resource intensive then painting them all individually."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1461786692, "post_id": 36899325, "comment_id": 61363309, "body": "imho it would be silly by Qt to provide another method of drawing ellipses, when it is already possible to draw arbitrary ellipses by rotating the bounding rectangle"}, {"owner": {"reputation": 5548, "user_id": 5068056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m53CE.jpg?s=128&g=1", "display_name": "Farhad", "link": "https://stackoverflow.com/users/5068056/farhad"}, "edited": false, "score": 0, "creation_date": 1461786829, "post_id": 36899325, "comment_id": 61363403, "body": "visit this link: <a href=\"http://stackoverflow.com/questions/29196610/qt-drawing-a-filled-rounded-rectangle-with-border\" title=\"qt drawing a filled rounded rectangle with border\">stackoverflow.com/questions/29196610/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1461792210, "last_edit_date": 1461792210, "creation_date": 1461790638, "answer_id": 36900745, "question_id": 36899325, "link": "https://stackoverflow.com/questions/36899325/can-i-draw-an-ellipse-in-qt-c-without-using-a-rectangle/36900745#36900745", "title": "Can I draw an ellipse in Qt c++ without using a rectangle?", "body": "<blockquote>\n  <p>Is there any other way to draw an ellipse than using a boundary rectangle and then rotating it?</p>\n</blockquote>\n\n<p>No. There isn't. Of course you'll have to rotate the coordinate system first, before you draw the ellipse.</p>\n\n<p>The computation of the rotation angles is not necessary. Since you're given the  major axis, you can easily normalize it and derive an orthogonal vector. These vectors form an orthonormal basis and their components are the <a href=\"http://en.wikipedia.org/wiki/Direction_cosine\" rel=\"nofollow\">directional cosines</a> in a <a href=\"http://en.wikipedia.org/wiki/Euclidean_vector#/Multiple_Cartesian_bases\" rel=\"nofollow\">transformation matrix</a> you'll set on the painter.</p>\n\n<p>As the major axis direction is already expressed as a vector, you don't need to compute any transcendental functions to arrive at the transformation matrix for the painter. Very few additions and multiplications is all it takes, even if you had to invert the matrix (and you don't).</p>\n"}], "owner": {"reputation": 539, "user_id": 4649258, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1d1ffbb262b5b061a2b77f1fc5ff3af7?s=128&d=identicon&r=PG&f=1", "display_name": "Little geek", "link": "https://stackoverflow.com/users/4649258/little-geek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1230, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1461792210, "creation_date": 1461785696, "last_edit_date": 1461790855, "question_id": 36899325, "link": "https://stackoverflow.com/questions/36899325/can-i-draw-an-ellipse-in-qt-c-without-using-a-rectangle", "title": "Can I draw an ellipse in Qt c++ without using a rectangle?", "body": "<p>I'm using c++ in Qt and I would like to draw an ellipse.\nFrom the Qt documentation I found that I can use drawEllipse to draw an ellipse from a boundary rectangle:</p>\n\n<pre><code>void QPainter::drawEllipse(const QRectF &amp;rectangle)\n</code></pre>\n\n<p>and the rectangle is given by:</p>\n\n<pre><code>QRectF(qreal x, qreal y, qreal width, qreal height)\n</code></pre>\n\n<p>However, this only provides an ellipse with horizontal/vertical major and minor axis.</p>\n\n<p>My ellipse is given by two coordinate sets to denote the major axis and a ratio between the length of the major and minor axes. Therefore the axes can have a slope that is not horizontal or vertical.\n(I need to use this method anyway since I also export it to a dxf file, which has this notation)</p>\n\n<p>My question is:</p>\n\n<p><strong>Is there any other way to draw an ellipse than using a boundary rectangle and then rotating it?</strong></p>\n\n<p>It seems a little silly to put it in a horizontal/vertical rectangle and then computing the rotation when I have the axes coordinates from the beginning.</p>\n"}, {"tags": ["c++", "xml", "boost"], "comments": [{"owner": {"reputation": 4390, "user_id": 126517, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c95fa0b3a7230398100ed67a9d10d306?s=128&d=identicon&r=PG", "display_name": "Vladimir Prus", "link": "https://stackoverflow.com/users/126517/vladimir-prus"}, "edited": false, "score": 1, "creation_date": 1461840098, "post_id": 36899296, "comment_id": 61386649, "body": "No, XML configuration files are not supported."}, {"owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "reply_to_user": {"reputation": 4390, "user_id": 126517, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c95fa0b3a7230398100ed67a9d10d306?s=128&d=identicon&r=PG", "display_name": "Vladimir Prus", "link": "https://stackoverflow.com/users/126517/vladimir-prus"}, "edited": false, "score": 0, "creation_date": 1461859633, "post_id": 36899296, "comment_id": 61401670, "body": "Thanks for the response!  That&#39;s what I figured, but the documentation doesn&#39;t show any details regarding the config file format."}, {"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "edited": false, "score": 0, "creation_date": 1465797902, "post_id": 36899296, "comment_id": 63032622, "body": "You can use boost serialization to &quot;deserialise&quot; your config file from XML. This should get you close to the same thing without using another library."}], "owner": {"reputation": 4728, "user_id": 2457733, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/LG30R.png?s=128&g=1", "display_name": "It&#39;sPete", "link": "https://stackoverflow.com/users/2457733/itspete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1461785622, "creation_date": 1461785622, "question_id": 36899296, "link": "https://stackoverflow.com/questions/36899296/boost-program-options-config-file", "title": "Boost Program Options Config File", "body": "<p>I looked through the boost documentation and couldn't get an answer.</p>\n\n<p>Does program_options support a configuration file stored in XML format or do I need to use property_tree for the file?</p>\n\n<p>Reason I ask is because my program also has command line options, so I'm already using program_options.</p>\n"}, {"tags": ["c++", "breadth-first-search"], "comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1461785432, "post_id": 36899181, "comment_id": 61362537, "body": "Why don&#39;t you think it&#39;s right?"}, {"owner": {"reputation": 396, "user_id": 6222078, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eea33d090efcf3b3dc8d25125dca165e?s=128&d=identicon&r=PG&f=1", "display_name": "TJain", "link": "https://stackoverflow.com/users/6222078/tjain"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1461785493, "post_id": 36899181, "comment_id": 61362581, "body": "I was just editing the question to add that and you downvoted."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1461785509, "post_id": 36899181, "comment_id": 61362589, "body": "I didn&#39;t downvote. :)"}], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 6222078, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eea33d090efcf3b3dc8d25125dca165e?s=128&d=identicon&r=PG&f=1", "display_name": "TJain", "link": "https://stackoverflow.com/users/6222078/tjain"}, "edited": false, "score": 0, "creation_date": 1461793056, "post_id": 36900786, "comment_id": 61366829, "body": "That count was left by mistake as I forgot to remove it after trying different variations. I&#39;ve edited and removed it now.   I believe, the visited array can hold all nodes as the adjacency matrix will be n*n if the graph has n nodes. Hence, visited can take care of all nodes.   Ok, it may not perform a sort always, but it is not supposed to visit the same node multiple times. I added a print statement for top after visited[top] = true and found repetition of nodes which I think does not happen in BFS."}, {"owner": {"reputation": 517, "user_id": 1340410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0eaa45aa2140005e3a407b84b3b5db?s=128&d=identicon&r=PG", "display_name": "KalyanS", "link": "https://stackoverflow.com/users/1340410/kalyans"}, "reply_to_user": {"reputation": 396, "user_id": 6222078, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eea33d090efcf3b3dc8d25125dca165e?s=128&d=identicon&r=PG&f=1", "display_name": "TJain", "link": "https://stackoverflow.com/users/6222078/tjain"}, "edited": false, "score": 0, "creation_date": 1461796832, "post_id": 36900786, "comment_id": 61368443, "body": "You are missing one key point: in the declaration of visited, you specify the size as matrix.size(). But, matrix is a vector of vector. When you say matrix, size(), you get the outer vector&#39;s size. But, visited may potentially need to have all the elements."}, {"owner": {"reputation": 396, "user_id": 6222078, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eea33d090efcf3b3dc8d25125dca165e?s=128&d=identicon&r=PG&f=1", "display_name": "TJain", "link": "https://stackoverflow.com/users/6222078/tjain"}, "edited": false, "score": 0, "creation_date": 1462154967, "post_id": 36900786, "comment_id": 61503755, "body": "But the number of elements = size of outer matrix as it&#39;s an adjacency matrix."}], "tags": [], "owner": {"reputation": 517, "user_id": 1340410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c0eaa45aa2140005e3a407b84b3b5db?s=128&d=identicon&r=PG", "display_name": "KalyanS", "link": "https://stackoverflow.com/users/1340410/kalyans"}, "is_accepted": false, "score": 0, "last_activity_date": 1461797091, "last_edit_date": 1461797091, "creation_date": 1461790794, "answer_id": 36900786, "question_id": 36899181, "link": "https://stackoverflow.com/questions/36899181/bfs-on-adjacency-matrix/36900786#36900786", "title": "BFS on Adjacency Matrix", "body": "<p>There a few questions, to help us hone the answer. But, please share more details on the count that you get back. Here are the things to look at:</p>\n\n<ul>\n<li>Why do you increment the count inside the for loop? You are possibly counting a node multiple times.</li>\n<li>The size of <em>Visited</em> isn't sufficient to hold all the nodes. In <code>std::vector&lt;bool&gt; visited(matrix.size(), false);</code>, matrix.size() returns only the outer vector's size. It means that at most one row worth of data is available in <em>Visited</em>.</li>\n<li>The data structure used for <em>Visited</em> is problematic. Either you use a vector> or a linearized vector that has n*n elements in one sequence. If you end up using a simple vector, you need to map a [i][j] index into a position when you look up the index in <em>Visited</em>. This is a major issue and you cannot track the nodes correctly.</li>\n<li>Sorted order is not guaranteed out of a BFS. Please construct a simple counter example to convince yourself. Topological Sort can be performed using BFS(or DFS).</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 396, "user_id": 6222078, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eea33d090efcf3b3dc8d25125dca165e?s=128&d=identicon&r=PG&f=1", "display_name": "TJain", "link": "https://stackoverflow.com/users/6222078/tjain"}, "edited": false, "score": 0, "creation_date": 1461849899, "post_id": 36904704, "comment_id": 61394140, "body": "I arrived at the answer as well by hit and trial, but fundamentally the for loop is for adding all the neighbours of the visited node, right ? And isn&#39;t it the same if we visit it when we&#39;re removing from the Queue or should I just add (not in Queue) when doing the if ?"}, {"owner": {"reputation": 921, "user_id": 5217410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d86469e3a8590912cfe93304d7121b9?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Darryl", "link": "https://stackoverflow.com/users/5217410/jonathan-darryl"}, "reply_to_user": {"reputation": 396, "user_id": 6222078, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eea33d090efcf3b3dc8d25125dca165e?s=128&d=identicon&r=PG&f=1", "display_name": "TJain", "link": "https://stackoverflow.com/users/6222078/tjain"}, "edited": false, "score": 0, "creation_date": 1461852108, "post_id": 36904704, "comment_id": 61395967, "body": "no, it&#39;s not the same. example: say u have (1)-&gt;(2), (3) and (2)-&gt;(3). If you count++ when you pop the queue, the (3) node is counted twice."}], "tags": [], "owner": {"reputation": 921, "user_id": 5217410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d86469e3a8590912cfe93304d7121b9?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Darryl", "link": "https://stackoverflow.com/users/5217410/jonathan-darryl"}, "is_accepted": false, "score": 5, "last_activity_date": 1461813948, "creation_date": 1461813948, "answer_id": 36904704, "question_id": 36899181, "link": "https://stackoverflow.com/questions/36899181/bfs-on-adjacency-matrix/36904704#36904704", "title": "BFS on Adjacency Matrix", "body": "<p>Instead of setting <code>visited</code> node to true after popping the queue, you should set it when you insert it to the queue, and add count inside as well, as to prevent double counting of some nodes. Please refer to the following:</p>\n\n<pre><code>//..previous lines\n\nQ.push(start);\nvisited[start] = true;\nint count = 1;\n\nwhile(!Q.empty()){\n    int top = Q.front(); Q.pop();\n\n    for (int i = 0; i &lt; matrix.size(); ++i){\n        if(matrix[top][i] != 0 &amp;&amp; (! visited[i]) ){\n            Q.push(i);\n            visited[i] = true;\n            count++;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 396, "user_id": 6222078, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eea33d090efcf3b3dc8d25125dca165e?s=128&d=identicon&r=PG&f=1", "display_name": "TJain", "link": "https://stackoverflow.com/users/6222078/tjain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11937, "favorite_count": 1, "answer_count": 2, "score": 9, "last_activity_date": 1461813948, "creation_date": 1461785293, "last_edit_date": 1461792434, "question_id": 36899181, "link": "https://stackoverflow.com/questions/36899181/bfs-on-adjacency-matrix", "title": "BFS on Adjacency Matrix", "body": "<p>I'm trying to implement a BFS on adjacency matrix of undirected unweighted graph which returns the number of nodes visited. I've come up with this till now but I think this is not right as when I print out the top/ visited node, I'm getting multiple occurrences of some nodes as well as it's not sorted. I've read somewhere that BFS is a topological sort and the order I get is not sorted.</p>\n\n<pre><code>int BFS(std::vector&lt;std::vector&lt;int&gt; &gt; &amp;matrix, int start)\n{\n    std::vector&lt;bool&gt; visited(matrix.size(), false);\n    std::queue&lt;int&gt; Q;\n    Q.push(start);\n    int count = 0;\n\n    while( ! Q.empty())\n    {\n        int top = Q.front(); Q.pop();\n        visited[top] = true; count++;\n        for (int i = 0; i &lt; matrix.size(); ++i)\n        {\n            if(matrix[top][i] != 0 &amp;&amp; (! visited[i]) )\n            {\n                Q.push(i);\n            }\n        }\n    }\n    return count;\n}\n</code></pre>\n"}, {"tags": ["c++", "sorting", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1461785759, "post_id": 36898884, "comment_id": 61362740, "body": "This is a very good example to use for learning a debugger.  Start the debugger.  Single step each statement, watching the values of the variables.  With linked lists, I also recommend drawing the list as the statements are executed.  Let us know which statement is causing the issue."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1461785912, "post_id": 36898884, "comment_id": 61362832, "body": "If you are allergic to debuggers, you can use the ancient technique of Print Statement Debugger.  Essentially, you sprinkle print statements through your code to <i>log</i> the activity.  Filenames, function names and line numbers may be useful along with the variable names and values."}, {"owner": {"reputation": 3590, "user_id": 2700399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6zBy.jpg?s=128&g=1", "display_name": "Bart van Nierop", "link": "https://stackoverflow.com/users/2700399/bart-van-nierop"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1461785997, "post_id": 36898884, "comment_id": 61362880, "body": "To add to @ThomasMatthews&#39; comment, you can also read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">this blog post by Eric Lippert about debugging small programs</a>, such as yours."}, {"owner": {"reputation": 82, "user_id": 4859541, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/YMggY.jpg?s=128&g=1", "display_name": "Nathan Drieling", "link": "https://stackoverflow.com/users/4859541/nathan-drieling"}, "reply_to_user": {"reputation": 3590, "user_id": 2700399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f6zBy.jpg?s=128&g=1", "display_name": "Bart van Nierop", "link": "https://stackoverflow.com/users/2700399/bart-van-nierop"}, "edited": false, "score": 0, "creation_date": 1461786797, "post_id": 36898884, "comment_id": 61363381, "body": "@BartvanNierop  I should definitely take a look at that link now.. I have tried to draw the activity on paper, but I have honestly never drawn my programs activity before. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 82, "user_id": 4859541, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/YMggY.jpg?s=128&g=1", "display_name": "Nathan Drieling", "link": "https://stackoverflow.com/users/4859541/nathan-drieling"}, "edited": false, "score": 0, "creation_date": 1461788026, "post_id": 36899658, "comment_id": 61364134, "body": "Your suggested change does work and make a high to low list.. however I am still dealing with a duplicate in the list. Would an else if statement to see if the newnode&#39;s data and if the current&#39;s data be needed to check this?"}, {"owner": {"reputation": 251, "user_id": 6210960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QD5L0.jpg?s=128&g=1", "display_name": "Ethan F.", "link": "https://stackoverflow.com/users/6210960/ethan-f"}, "reply_to_user": {"reputation": 82, "user_id": 4859541, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/YMggY.jpg?s=128&g=1", "display_name": "Nathan Drieling", "link": "https://stackoverflow.com/users/4859541/nathan-drieling"}, "edited": false, "score": 0, "creation_date": 1461788257, "post_id": 36899658, "comment_id": 61364271, "body": "You used rand to generate number list, however, rand does not guarantee unique numbers. Duplication does happen."}, {"owner": {"reputation": 251, "user_id": 6210960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QD5L0.jpg?s=128&g=1", "display_name": "Ethan F.", "link": "https://stackoverflow.com/users/6210960/ethan-f"}, "reply_to_user": {"reputation": 82, "user_id": 4859541, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/YMggY.jpg?s=128&g=1", "display_name": "Nathan Drieling", "link": "https://stackoverflow.com/users/4859541/nathan-drieling"}, "edited": false, "score": 0, "creation_date": 1461788977, "post_id": 36899658, "comment_id": 61364699, "body": "@NathanDrieling not sure about the requirement. In this case, duplicated numbers are handled OK. If the list only takes unique number, then just add a if statement to check. When found the number already exists, just do nothing and ignore the duplicated one."}, {"owner": {"reputation": 251, "user_id": 6210960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QD5L0.jpg?s=128&g=1", "display_name": "Ethan F.", "link": "https://stackoverflow.com/users/6210960/ethan-f"}, "reply_to_user": {"reputation": 82, "user_id": 4859541, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/YMggY.jpg?s=128&g=1", "display_name": "Nathan Drieling", "link": "https://stackoverflow.com/users/4859541/nathan-drieling"}, "edited": false, "score": 0, "creation_date": 1461953951, "post_id": 36899658, "comment_id": 61448720, "body": "@NathanDrieling If you think the answer helps please upvote or accept. Thank you."}, {"owner": {"reputation": 82, "user_id": 4859541, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/YMggY.jpg?s=128&g=1", "display_name": "Nathan Drieling", "link": "https://stackoverflow.com/users/4859541/nathan-drieling"}, "edited": false, "score": 0, "creation_date": 1462057742, "post_id": 36899658, "comment_id": 61479508, "body": "your answer was the most helpful. As such, I up voted and accepted your answer."}], "tags": [], "owner": {"reputation": 251, "user_id": 6210960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QD5L0.jpg?s=128&g=1", "display_name": "Ethan F.", "link": "https://stackoverflow.com/users/6210960/ethan-f"}, "is_accepted": true, "score": 1, "last_activity_date": 1461786867, "creation_date": 1461786867, "answer_id": 36899658, "question_id": 36898884, "link": "https://stackoverflow.com/questions/36898884/c-linked-list-sorting-from-highest-to-lowest-error/36899658#36899658", "title": "c++ linked list sorting from highest to lowest error", "body": "<p>I found your problem:</p>\n\n<p>In function:</p>\n\n<pre><code>void HighestToLowestLinkedListCreation(int number)\n</code></pre>\n\n<p>At code part that I modified.</p>\n\n<pre><code> while (NewNode-&gt;data &lt; current-&gt;data &amp;&amp; current-&gt;next != NULL)\n                    {\n                        // set the previous node to current node\n                        previous = current;\n                        // the current now is set to the currents next link\n                        current = current-&gt;next;\n                    }\n                    //if (current-&gt;next != NULL) // if the next current has a value\n                    if (NewNode-&gt;data &gt;= current-&gt;data)\n                    {\n                        // set the next previous node to the newnode\n                        previous-&gt;next = NewNode;\n                        // set the next link for newnode equal to current\n                        NewNode-&gt;next = current;\n                    }\n</code></pre>\n\n<p>Reason?</p>\n\n<p>The while statement:</p>\n\n<pre><code> while (NewNode-&gt;data &lt; current-&gt;data &amp;&amp; current-&gt;next != NULL)\n</code></pre>\n\n<p>stops can be because of either of conditions breaks or BOTH of them. I leave the left for you to think.</p>\n"}], "owner": {"reputation": 82, "user_id": 4859541, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/YMggY.jpg?s=128&g=1", "display_name": "Nathan Drieling", "link": "https://stackoverflow.com/users/4859541/nathan-drieling"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 935, "favorite_count": 1, "accepted_answer_id": 36899658, "answer_count": 1, "score": 0, "last_activity_date": 1461786867, "creation_date": 1461784366, "question_id": 36898884, "link": "https://stackoverflow.com/questions/36898884/c-linked-list-sorting-from-highest-to-lowest-error", "title": "c++ linked list sorting from highest to lowest error", "body": "<p>In my program, the User enters a number between 20 and 100. Based on the users input, a file called \"numbers.txt\" will contain randomly generated numbers between 0 and 99. From here the variable number is passed into each of the 4 types of linked lists sorts. My problems have come from the third function: <code>void HighestToLowestLinkedListCreation(int number)</code></p>\n\n<p>The highest to lowest function basically sorts the linked list from highest number to lowest number. However, I get this as an output if the user enters 20, for example: </p>\n\n<blockquote>\n  <p>----------HIGHEST TO LOWEST LINKED LIST----------------------------------------------------------------\n          95      91      81      78      69      67      64      62      61\n  58      45      42      41      36      34      27      27      5       0\n  24 [List Deleted]</p>\n</blockquote>\n\n<p>Now at first glance it may look correct, but the number 27 repeats twice and a 24 is incorrectly placed last. What could be causing this error? I am not necessarily asking for code strictly but I would appreciate a good response as to how and why its doing this.  Now here is the code for each function below so you guys can run it on your own.</p>\n\n<p>Function Declarations:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\n// linkedlist node\nstruct node{\n    int data;\n    node * next;\n};\n\n// function declaration for UserEnteringNumber\nint UserEnteringNumber(int number);\n\n// function declaration for FileCreation\nvoid FileCreation(int number);\n\n// function declaration for SinglyLinkedListCreation\nvoid SinglyLinkedListCreation(int number);\n\n// function declaraton for RevereseLinkedListCreation\nvoid ReverseLinkedListCreation(int number);\n\n// function declaration for HighestLinkedListCreation\nvoid HighestToLowestLinkedListCreation(int number);\n\n// function declaration for LowestLinkedListCreation\nvoid LowestToHighestLinkedListCreation(int number);\n\n// function declaration for PrintList\nvoid PrintList(node *&amp;head);\n\n// function declaration for DeleteList\nvoid DeleteList(node *&amp;head);\n</code></pre>\n\n<p>Main Function: </p>\n\n<pre><code>// main function\nint main()\n{\n    // number variable \n    int number = 0;\n    // number will be equal to a function returning a number variable\n    number = UserEnteringNumber(number);\n    // function call to create file\n    FileCreation(number);\n    cout &lt;&lt; \"----------ELEMENTS IN LINKED LIST----------\" &lt;&lt; endl;\n    // Singly linked list creation function call\n    //SinglyLinkedListCreation(number);\n    cout &lt;&lt; \"----------ELEMENTS IN REVERSE LINKED LIST----------\" &lt;&lt; endl;\n    // Reverse linked list creation function call\n    //ReverseLinkedListCreation(number);\n    cout &lt;&lt; \"----------HIGHEST TO LOWEST LINKED LIST----------\" &lt;&lt; endl;\n    // Highest to lowest linked list creation function call\n    HighestToLowestLinkedListCreation(number);\n    cout &lt;&lt; \"----------LOWEST TO HIGHEST LINKED LIST----------\" &lt;&lt; endl;\n    // Lowest to Highest Linked List Creation function call\n    //LowestToHighestLinkedListCreation(number);\n    cout &lt;&lt; \"[Program Complete]\" &lt;&lt; endl;\n    cin.get();\n    cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>UserEnteringNumber Function:</p>\n\n<pre><code>// functon definition for UserEnteringNumber\nint UserEnteringNumber(int number)\n{\n    cout &lt;&lt; \"enter a number between 20 and 100: \";\n    // user enters a number\n    cin &gt;&gt; number;\n    // if not a number or if number is less than 20 or greater than 100\n    if (!cin || number &lt; 20 || number &gt; 100)\n    {\n        while (!cin || number &lt; 20 || number &gt; 100)\n        {   // while loop to make sure user enters correct data\n            cout &lt;&lt; \"Entry is not in range. Enter again: \";\n            cin.clear(); // clear\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n'); // ignore\n            cin &gt;&gt; number; // take in another number\n        }\n    }\n    // returns number\n    return number;\n}\n</code></pre>\n\n<p>FileCreation Function:</p>\n\n<pre><code>// function definition for FileCreation\nvoid FileCreation(int number)\n{\n    string Filename;\n    ofstream outfile;\n    int RandomNumber = 0;\n    Filename = \"Numbers.txt\";\n    // opens file \"numbers.txt\"\n    outfile.open(Filename);\n    // if not the file\n    if (!outfile)\n    {\n        // error\n        cout &lt;&lt; \"there was an error.\" &lt;&lt; endl;\n    }\n    else // else if valid file opened\n    {\n        // create a file\n        cout &lt;&lt; \"creating file.\" &lt;&lt; endl;\n        for (int i = 0; i &lt; number; i++)\n        {\n            // for the number entered, the for loop will make random numbers\n            RandomNumber = rand() % 100;\n            //send them to the outfile\n            outfile &lt;&lt; RandomNumber &lt;&lt; endl;\n        }\n    }\n    // close the file\n    outfile.close();\n}\n</code></pre>\n\n<p>HighestToLowestLinkedListCreation Function:</p>\n\n<pre><code>// function definition for HighestToLowestLinkedListCreation\nvoid HighestToLowestLinkedListCreation(int number)\n{\n    // Create a pointer we can use to keep track of the head of the list\n    //\n    struct node *head;\n    // Create a head node. new() will return NULLif it fails to create the node.\n    // If it fails we want to notify the user and exit.\n    //\n    if ((head = new(node)) == NULL)\n    {\n        cout &lt;&lt; \"There was a failure creating the head node.\" &lt;&lt; endl\n            &lt;&lt; \"Hit enter to exit...\" &lt;&lt; endl;\n        cin.get();\n        cin.get();\n        exit(1);\n    }\n    // Now we have created the head node so we can set the pointer to NULL\n    //\n    head-&gt;next = NULL;\n    // Now lets open the file we will read the data from\n    //\n    ifstream infile;\n    infile.open(\"Numbers.txt\");\n\n    // Check that it opened\n    //\n    if (!infile)\n    {\n        cout &lt;&lt; \"There was an error opening the file.\" &lt;&lt; endl\n            &lt;&lt; \"Check that the file exist in this directory and that you have permissions.\" &lt;&lt; endl;\n        cin.get();\n        cin.get();\n        exit(1);\n    }\n\n    // Here we create a loop that will read in the number from the file and create an node in the list.\n    // We use the number passed into the function to determine how long we loop.  If we did not already\n    // know how many to read, we would use a while loop and read to the end of the file.\n    //\n    for (int i = 0; i &lt; number; i++)\n    {\n        // Create a pointer we can use to navigate the list and set it equal to head\n        // so we can naviagate the list\n        //\n        node *current = head;\n\n        // Check to see if this is the first node\n        //\n        if (i == 0)\n        {\n            // Read in the first item of data and put it in the head node\n            //\n            infile &gt;&gt; head-&gt;data;\n        }\n\n        // Run this code if it is not the first node\n        else\n        {\n            // Look for the end of the list\n            //\n            while (infile)\n            {\n                if (current-&gt;next == NULL)\n                {\n                    // make a current node and set it equal to head\n                    node *current = head;\n                    // create a new node\n                    node *NewNode = new node;\n                    // take in a number\n                    infile &gt;&gt; NewNode-&gt;data;\n                    if (!infile) // if invalid data\n                    {\n                        infile.clear(); // clear\n                        infile.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n'); // ignore\n                        infile &gt;&gt; NewNode-&gt;data; // take in another number\n                    }\n                    // set the next link for newnode to null\n                    NewNode-&gt;next = NULL;\n                    // if the head is null\n                    if (head == NULL)\n                    {\n                        // the head is now the newnode\n                        head = NewNode;\n                    }\n                    else if (head-&gt;data &lt; NewNode-&gt;data) // if the head data is greater or equal to newnodes data\n                    {\n                        // set the next node of the newnode to head\n                        NewNode-&gt;next = head;\n                        // set the head equal to newnode\n                        head = NewNode;\n                    }\n                    else // else if each if above is false\n                    {\n                        // create a previous node and set to current\n                        node *previous = current;\n                        // while the newnode data is greater than or equal to the current data and the next link for current contains data\n                        while (NewNode-&gt;data &lt; current-&gt;data &amp;&amp; current-&gt;next != NULL)\n                        {\n                            // set the previous node to current node\n                            previous = current;\n                            // the current now is set to the currents next link\n                            current = current-&gt;next;\n                        }\n                        if (current-&gt;next != NULL) // if the next current has a value\n                        {\n                            // set the next previous node to the newnode\n                            previous-&gt;next = NewNode;\n                            // set the next link for newnode equal to current\n                            NewNode-&gt;next = current;\n                        }\n                        else // else..\n                        {\n                            // set the next link for the current node equal to the newnode\n                            current-&gt;next = NewNode;\n                        }\n                    }\n                    // Exit the while loop\n                    break;\n                }\n                // Keep looping untill we get to the end\n                //\n                current = current-&gt;next;\n            }\n        }\n    }\n    // Call the function to print the list\n    //\n    PrintList(head);\n}\n</code></pre>\n\n<p>PrintList Function:</p>\n\n<pre><code>// function definition for PrintList\nvoid PrintList(node *&amp;head)\n{\n    // make a current and set it equal to head\n    node *current = head;\n    // while the next link for current has a value\n    while (current)\n    {\n        // make a space and show the value in the current node\n        cout &lt;&lt; \"   \" &lt;&lt; current-&gt;data;\n        // set the current node to the next link for current\n        current = current-&gt;next;\n    }\n    DeleteList(head);\n}\n</code></pre>\n\n<p>DeleteList Function:</p>\n\n<pre><code>// function definition for DeleteList\nvoid DeleteList(node *&amp;head)\n{\n    // make a node called delete\n    node * deleteNode;\n    // while the head has a value\n    while (head != NULL){\n        // set the deletenode equal to the next head node\n        deleteNode = head;\n        // head now goes to the next node\n        head = head-&gt;next;\n        // delete the delete node\n        delete(deleteNode);\n    }\n    // say the list was successfully deleted\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"[List Deleted]\" &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "undefined-behavior", "unions"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1461784762, "post_id": 36898863, "comment_id": 61362106, "body": "Does ptrace write data into proper union member? If it does, all is well. If it doesn&#39;t, this is still undefined behavior."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1461784903, "post_id": 36898863, "comment_id": 61362193, "body": "@SergeyA the problem is <code>ptrace</code> can be implemented in completely another language \u2014 be it C or assembly or something exotic. Would it count if the code is &quot;intended to&quot; write to the correct union member but doesn&#39;t expressly do this in C++ syntax?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1461785111, "post_id": 36898863, "comment_id": 61362344, "body": "interoperations between C++ code and <i>exotic</i> code are not defined anyways. If you want this union to be interoperable, it has to be inside <code>extern &quot;C&quot;</code>. I will post a separate answer."}], "answers": [{"comments": [{"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461785558, "post_id": 36899230, "comment_id": 61362620, "body": "Your last sentence seems to imply that it&#39;s enough to declare a union to have C linkage to get the right to use it arbitrarily with the C rules for a union (i.e. accessing inactive member)... or do I misunderstand anything?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461785614, "post_id": 36899230, "comment_id": 61362644, "body": "@Ruslan, this is exactly what I mean."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461785685, "post_id": 36899230, "comment_id": 61362692, "body": "So the code like <code>extern &quot;C&quot; { union A{float x;int y;}a;} &#47;*...*&#47; a.x=5;f(a.y);</code> would be well-defined (up to trap representations)?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461785798, "post_id": 36899230, "comment_id": 61362769, "body": "@Ruslan, yes. It will follow C rules, which allow inactive union member access."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461816466, "post_id": 36899230, "comment_id": 61373788, "body": "Dunno. This must have some critical look from others for several days. Your statement leaves me in a big doubt: it seems very strange that just specifying a different linkage drastically changes the rules of the language about usage of a data structure. If you can back up this with a quote, I&#39;ll be more than happy to upvote and accept immediately."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461958902, "post_id": 36899230, "comment_id": 61451062, "body": "I&#39;ve tried looking for confirmation of your assertion in the C++ standard, but AFAICT, linkage there only defines how identifiers refer to one another in different translation units. I&#39;ve found nothing which would say about different rules of usage of their types. So it seems your assertion is wrong."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461962015, "post_id": 36899230, "comment_id": 61452543, "body": "I&#39;m glad you&#39;re so self-confident, but maybe you could provide some proof/evidence of your rightness?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461962235, "post_id": 36899230, "comment_id": 61452664, "body": "@Ruslan, 7.5 / 1. <code>Some of the properties associated with an entity with language linkage are specific to each implementation and are not described here. For example....</code>. This is what I am talking about."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461962403, "post_id": 36899230, "comment_id": 61452750, "body": "OK, that&#39;s already something, thanks. Now this still doesn&#39;t guarantee that any particular properties of these entities will be exactly as in C. Also notes are informative, not normative in C++ standard."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461962525, "post_id": 36899230, "comment_id": 61452805, "body": "@Ruslan, judging by the name, you should be familiar with Ostap Bender? Full guarantee can only be obtained through insurance policy. However, you can be very much sure this is happening. Otherwise, no C++ code could use endless C unions defined in thousands of low-level system API."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461962833, "post_id": 36899230, "comment_id": 61452959, "body": "Well, this might be a good argument, but my question was explicitly marked with <a href=\"https://stackoverflow.com/questions/tagged/language-lawyer\">language-lawyer</a> tag from the beginning. I&#39;m interested in correctness of the code according to the standard, otherwise I&#39;d be satisfied with what most compilers allow me to do (with their documentation explicitly mentioning this)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1461963308, "post_id": 36899230, "comment_id": 61453168, "body": "C++ doesn&#39;t cover questions of correctness of C code. However, I am tired of this fruitless discussion, so you can choose whatever approach fits you best."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1461785429, "creation_date": 1461785429, "answer_id": 36899230, "question_id": 36898863, "link": "https://stackoverflow.com/questions/36898863/is-this-use-of-union-well-defined/36899230#36899230", "title": "Is this use of union well defined?", "body": "<p>In essence, the question can be rephrased in a shorter form:</p>\n\n<pre><code>union A {\n   int x;\n   int y;\n};\n\nA a;\nmy_non_cpp_function(&amp;a);\n</code></pre>\n\n<p>Now the question becomes, since it is absolutely unknown to C++ compiler how would non-cpp function access the members of the union, how do we define which member of the union is active? (remember, C explicitly allows accessing inactive member)!</p>\n\n<p>Answer is simple. Since interface between C++ and non-C++ constructs is not defined anyways, the properl solution is to declare union inside <code>extern \"C\"</code> block. This would ensure C linkage for the union, and, in turn, make it defined to access inactive member.</p>\n"}], "owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1461785429, "creation_date": 1461784297, "question_id": 36898863, "link": "https://stackoverflow.com/questions/36898863/is-this-use-of-union-well-defined", "title": "Is this use of union well defined?", "body": "<p>Consider the following code:</p>\n\n<pre><code>union\n{\n    PrStatus_X86_64 prstat64;\n    PrStatus_X86    prstat32;\n} prstat;\n\niovec prstat_iov = {&amp;prstat, sizeof prstat};\n\nif(ptrace(PTRACE_GETREGSET, tid, NT_PRSTATUS, &amp;prstat_iov) != -1)\n{\n    if(prstat_iov.iov_len==sizeof prstat.prstat64)\n        use(prstat.prstat64);\n    else if(prstat_iov.iov_len==sizeof prstat.prstat32)\n        use(prstat.prstat32);\n}\n</code></pre>\n\n<p>Here, depending on what the <code>ptrace</code> call returns as the resulting <code>prstat_iov.iov_len</code>, <code>prstat</code> should be interpreted either as one structure, or as another one.</p>\n\n<p>As is well known, in C++ unions can't be used as freely as in C, namely, reading an inactive member of a union results in undefined behavior. But can we consider that the <code>ptrace</code> call in the above code will actually act as \"writing to the correct member\" of the union, according to the C++ Standard, so that the above code would have well-defined behavior?</p>\n"}, {"tags": ["c++", "function", "virtual"], "comments": [{"owner": {"reputation": 1708, "user_id": 730537, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fa9400d198477125f47d8ce1243f790f?s=128&d=identicon&r=PG", "display_name": "Tejendra", "link": "https://stackoverflow.com/users/730537/tejendra"}, "edited": false, "score": 1, "creation_date": 1461784317, "post_id": 36898778, "comment_id": 61361805, "body": "You need to understand the whole idea behind polymorphism...the following link might help...  <a href=\"http://stackoverflow.com/questions/1031273/what-is-polymorphism-what-is-it-for-and-how-is-it-used\" title=\"what is polymorphism what is it for and how is it used\">stackoverflow.com/questions/1031273/&hellip;</a>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1461784420, "post_id": 36898778, "comment_id": 61361875, "body": "Take a look at this: <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a> although any book on basic oop should explain the concept."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1461784632, "post_id": 36898778, "comment_id": 61362015, "body": "I give a concrete example in <a href=\"http://stackoverflow.com/a/27099751/464581\">my answer</a> to the question you link to."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1461784463, "creation_date": 1461784463, "answer_id": 36898916, "question_id": 36898778, "link": "https://stackoverflow.com/questions/36898778/instance-creation-with-virtual-functions-why/36898916#36898916", "title": "Instance creation with virtual functions, why?", "body": "<p>Extend the code base to also include a class <code>C</code> that's derived from <code>A</code>.</p>\n\n<p>Now add a function <code>display_A</code>, which is defined as:</p>\n\n<pre><code>void display_A(A* aPtr)\n{\n   a-&gt;show();\n}\n</code></pre>\n\n<p>You can use that function with an instance of <code>B</code> as well as an instance of <code>C</code>.</p>\n\n<pre><code>B* bPtr = new B;\nC* cPtr = new C;\n\ndisplay_A(bPtr);\ndisplay_A(cPtr);\n</code></pre>\n\n<p>Here, a <code>B*</code> and a <code>C*</code> are automatically cast to <code>A*</code> before the call to <code>display_A</code>. <code>aPtr-&gt;show()</code> in <code>display_A</code> works regardless of whether <code>aPtr</code> points to a <code>B</code> or a <code>C</code>. That's the real motivation for creating <code>virtual</code> functions.</p>\n\n<p>The purpose of using</p>\n\n<pre><code>A *a1 = new B;\na1-&gt;show();\n</code></pre>\n\n<p>is to demonstrate that <code>B::show()</code> gets called even when the pointer is of type <code>A*</code> if what the pointer points to is really a <code>B</code> object.</p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1461785954, "post_id": 36898970, "comment_id": 61362849, "body": "What language is this?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1461786185, "post_id": 36898970, "comment_id": 61362998, "body": "In C++ object passed by value will be sliced. Syntax for call a method for an object is incorrect. If you mean pointers you should use them and you introduce memory leaks."}, {"owner": {"reputation": 76, "user_id": 3210164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsMhZ.jpg?s=128&g=1", "display_name": "ricanontherun", "link": "https://stackoverflow.com/users/3210164/ricanontherun"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1461786315, "post_id": 36898970, "comment_id": 61363083, "body": "@Slava, I&#39;m answering his question of why this is useful, not providing production ready code."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1461786439, "post_id": 36898970, "comment_id": 61363157, "body": "Nobody would expect you to provide production ready code, but introducing bad practice is questionable and <code>driveToWork(new Car);</code> is one, it either leads to memory leak or would require to call delete inside function."}], "tags": [], "owner": {"reputation": 76, "user_id": 3210164, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fsMhZ.jpg?s=128&g=1", "display_name": "ricanontherun", "link": "https://stackoverflow.com/users/3210164/ricanontherun"}, "is_accepted": true, "score": 2, "last_activity_date": 1461786238, "last_edit_date": 1461786238, "creation_date": 1461784620, "answer_id": 36898970, "question_id": 36898778, "link": "https://stackoverflow.com/questions/36898778/instance-creation-with-virtual-functions-why/36898970#36898970", "title": "Instance creation with virtual functions, why?", "body": "<p>This is a good example of <strong><a href=\"https://en.wikipedia.org/wiki/Polymorphism_(computer_science)\" rel=\"nofollow\">Polymorphism</a></strong>.</p>\n\n<p>In short, polymorphism allows two different types (classes) to offer the same interface with different underlying implementations.</p>\n\n<p>Rather than using A and B as an example, consider two classes <strong>Motorcycle</strong> and <strong>Car</strong>. Both <strong>motorcycles</strong> and <strong>cars</strong> can be <strong>driven</strong>, right? The way in which you drive those two vehicles is pretty different. Both classes should offer a <strong>drive()</strong> method, although their implementations are different.</p>\n\n<pre><code>class Vehicle {\n    public:\n        virtual void drive() = 0;\n}\n\nclass Car : public Vehicle {\n    public:\n        void drive() {\n            // Driving to work, however a car does that.\n        };\n}\n\nclass Motorcycle : public Vehicle {\n    public:\n        void drive() {\n            // Driving to work, however a motorcycle does that.\n        };\n}\nVehicle *car = new Car;\nVehicle *motorcycle = new Motorcycle;\n\n// We can both be driven, so we share the same interface.\ncar-&gt;drive();\nmotorcycle-&gt;drive();\n</code></pre>\n\n<p>This can be particularly useful when passing objects into functions. You have a function which implenments being taken to work. You really don't care <strong>how</strong> you get to work, as long as you are driven somehow.</p>\n\n<pre><code>void driveToWork(Vehicle *vehicle) {\n    vehicle-&gt;drive();\n}\n\ndriveToWork(new Car);\n\n// It's Tuesday, your car broke down!\n// As long as we use a Vehicle to get to work, all is well.\ndriveToWork(new Motorcycle);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 247, "user_id": 6230862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe5231fb3b586a41736037601723835?s=128&d=identicon&r=PG&f=1", "display_name": "C. Korb", "link": "https://stackoverflow.com/users/6230862/c-korb"}, "is_accepted": false, "score": 1, "last_activity_date": 1461784953, "creation_date": 1461784953, "answer_id": 36899079, "question_id": 36898778, "link": "https://stackoverflow.com/questions/36898778/instance-creation-with-virtual-functions-why/36899079#36899079", "title": "Instance creation with virtual functions, why?", "body": "<p>Bottom line is that when you call a virtual function, it executes the <em>most derived form of that function</em> that it can.</p>\n\n<pre><code>class Message\n{\n     virtual void buildMessage();\n}\n\nclass ShutdownMessage : public Message\n{\n     virtual void buildMessage() { /* Do a thing. */ }\n}\n\nclass StartupMessage : public Message\n{\n     virtual void buildMessage() { /* Do a totally different thing. */ }\n}\n\nvoid prepareMessage(Message *M)\n{\n    M-&gt;buildMessage();\n}\n</code></pre>\n\n<p>Now you can call this:</p>\n\n<pre><code>prepareMessage(myMsg);\n</code></pre>\n\n<p>on any message, and it will call the appropriate buildMessage function.</p>\n"}], "owner": {"reputation": 63, "user_id": 5558453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654ebd92641c9e3c2555be3450d149b8?s=128&d=identicon&r=PG&f=1", "display_name": "mirc00", "link": "https://stackoverflow.com/users/5558453/mirc00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 36898970, "answer_count": 3, "score": 1, "last_activity_date": 1461786238, "creation_date": 1461784002, "last_edit_date": 1495541770, "question_id": 36898778, "link": "https://stackoverflow.com/questions/36898778/instance-creation-with-virtual-functions-why", "title": "Instance creation with virtual functions, why?", "body": "<p>i have a question about virtual functions or methods. I found a really nice post here on stackoverflow <a href=\"https://stackoverflow.com/a/27443155\">link to post</a> explaining why and how virtual functions work. I understand how virtual functions work now, but i still dont understand WHY u need them. If you look at the link and the provided example, he creates an instance like this:</p>\n\n<pre><code>A *a1 = new B;\na1-&gt;show();\n</code></pre>\n\n<p>But why would u ever want to create an instance like this if you want to use functions from B? Why not do it like this:</p>\n\n<pre><code>B b1 = new B;\nb1-&gt;show();\n</code></pre>\n\n<p>why should i use the A pointer when i want to use a B reference?</p>\n\n<p>I hope you guys understand what i dont get about this and can explain it to me.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1461786691, "post_id": 36898753, "comment_id": 61363307, "body": "It&#39;s not totally clear what you are trying to do, and the code you are showing us does nothing."}, {"owner": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "reply_to_user": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1461826577, "post_id": 36898753, "comment_id": 61377848, "body": "I&#39;m sorry, thought I was clear. I tried to explain better. And yes, the code does nothing because I&#39;m asking you how to do something I can&#39;t, so how can I write it to my question?"}, {"owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "edited": false, "score": 0, "creation_date": 1461938809, "post_id": 36898753, "comment_id": 61439883, "body": "I think you did a good job with your edits actually."}], "answers": [{"comments": [{"owner": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "edited": false, "score": 0, "creation_date": 1461839438, "post_id": 36908211, "comment_id": 61386195, "body": "Thanks a lot! The problem now is that I already have a label with an image in the dialog window displayed and I&#39;d like the new image (the one you showed me how to display it) to be displayed on the top of the mentioned label so the label would be a static background and the other images I&#39;d like to add and remove as I need to. I&#39;ll add it to the code above."}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "edited": false, "score": 0, "creation_date": 1461840326, "post_id": 36908211, "comment_id": 61386821, "body": "@T.Syk You can set the background image of the QGraphicsScene in the same fashion. I would strongly encourage using the QGraphicsScene for all of the image rendering. QLabel approach is possible but is meant for different purposes (not to serve as background to be further worked on like a board. So simply add the background yourself to the scene in the same way I have shown first."}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "edited": false, "score": 0, "creation_date": 1461840693, "post_id": 36908211, "comment_id": 61387070, "body": "@T.Syk I have edited my answer to cover the background image as well in the constructor of the dialogue. You may also setBackgroundBrush() on the scene. Additionally you may want to adjust the background&#39;s z pozition (setZValue) to something like -0.1 to ensure the background will always be in the background and not obscuring whatever you added later."}, {"owner": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "edited": false, "score": 0, "creation_date": 1461842862, "post_id": 36908211, "comment_id": 61388571, "body": "I tried it to do it this way but the solution has two problems which I can&#39;t solve. The first one is the size of the layout. It resizes somehow strangely, when I click to the right down corner it moves. The second problem is displaying of the images in mousePressEvent function. When I click somewhere, the image shows a few centimeters away, but after clicking to the right down corner they start to display correctly and after resizing of the window they display incorrectly again. It&#39;s hard to explain, video would be better."}, {"owner": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "edited": false, "score": 0, "creation_date": 1461842866, "post_id": 36908211, "comment_id": 61388576, "body": "What I&#39;d like to have is a window with fixed size, the background picture would be on some position and when I click somewhere on the window the next image displays on that position."}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "edited": false, "score": 0, "creation_date": 1461843848, "post_id": 36908211, "comment_id": 61389297, "body": "@T.Syk So what is the problem? Set the QGraphicsView to be the only widget in the layout, give layout no padding space so it takes all of the window, set it to fixed size (yours 500x500) and add the background image as I have described. It would literally be 2 or 3 extra lines in the code I have provided or none if you did it all in the designer."}, {"owner": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "edited": false, "score": 0, "creation_date": 1461849220, "post_id": 36908211, "comment_id": 61393541, "body": "It seems I&#39;m getting to it, thanks, but I just can&#39;t figure out how to set layout to a fixed size."}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "edited": false, "score": 0, "creation_date": 1461849400, "post_id": 36908211, "comment_id": 61393705, "body": "@T.Syk You do not set layout to any size. Layout stretches with the widget so you must set the widget size (QDialog in your case). See <a href=\"http://doc.qt.io/qt-5/qwidget.html#setFixedHeight\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qwidget.html#setFixedHeight</a>"}, {"owner": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "edited": false, "score": 0, "creation_date": 1461850889, "post_id": 36908211, "comment_id": 61395002, "body": "I added a picture of my app. I want the layout to be just under the grid. The black balls are the images which should be placed in <code>mousePressEvent</code> function. The place next to the grid will be used for other buttons. Is it possible? Or should I find any other approach to do what I want?"}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "edited": false, "score": 0, "creation_date": 1461851077, "post_id": 36908211, "comment_id": 61395175, "body": "It certainly is possible but you should first familiarize with Qt Graphics Framework <a href=\"http://doc.qt.io/qt-5/graphicsview.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/graphicsview.html</a> It is even possible to embed widgets into the scene so what you describe is possible. However you have already drifterd very very far from your original question..."}], "tags": [], "owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "is_accepted": true, "score": 0, "last_activity_date": 1461840571, "last_edit_date": 1461840571, "creation_date": 1461828960, "answer_id": 36908211, "question_id": 36898753, "link": "https://stackoverflow.com/questions/36898753/how-to-display-image-on-specific-coordinates-in-qt/36908211#36908211", "title": "How to display image on specific coordinates in Qt?", "body": "<p>You will need to use <code>QGraphicsView</code> (<a href=\"http://doc.qt.io/qt-5/qgraphicsview.html\" rel=\"nofollow\">docs</a>) and <code>QGraphicsScene</code> (<a href=\"http://doc.qt.io/qt-5/qgraphicsscene.html\" rel=\"nofollow\">docs</a>):</p>\n\n<pre><code>class Board : public QDialog\n{\npublic:\n    Board(QWidget *parent = 0) : \n        QDialog(parent),\n        ui(new Ui::Board),\n        view(&amp;scene) \n    { \n        QVBoxLayout *layout = new QVBoxLayout(this);\n        layout-&gt;addWidget(&amp;view);\n        //or set the layout and the view in the designer if using Qt Creator\n\n        //EDIT: add background like this first\n        QGraphicsPixmapItem *background = QGraphicsPixmapItem(QPixmap(\"path/to/background.png\"));\n        scene.addItem(background);\n        background.setPos(0, 0); //position it to cover all the scene so at 0,0 which is the origin point\n        background.setScale(2.0); //scale the image to the scene rectangle to fill it\n        background.setZValue(-0.1); //to ensure it is always at the back\n    }\n\nprotected:\n    virtual void mousePressEvent(QMouseEvent *mouseEvent) override\n    {\n        QGraphicsPixmapItem *item = new QGraphicsPixmapItem(QPixmap(\"path/to/image.png\"));\n        scene.addItem(item);\n        item-&gt;setPos(coordX, coordY);\n    }\n\nprivate:\n    Ui::Board *ui;\n    QGraphicsScene scene;\n    QGraphicsView view;\n};\n</code></pre>\n\n<p>And that is pretty much it. Also note that the position is that of upper left corner of the item (image). If you would want to center it you would need to adjust the position based on the proportions of the item (image).</p>\n"}], "owner": {"reputation": 1477, "user_id": 6204637, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2aefad0b667887ac0c12219d41326a2e?s=128&d=identicon&r=PG&f=1", "display_name": "T.Poe", "link": "https://stackoverflow.com/users/6204637/t-poe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1884, "favorite_count": 0, "accepted_answer_id": 36908211, "answer_count": 1, "score": 1, "last_activity_date": 1461850886, "creation_date": 1461783919, "last_edit_date": 1461850886, "question_id": 36898753, "link": "https://stackoverflow.com/questions/36898753/how-to-display-image-on-specific-coordinates-in-qt", "title": "How to display image on specific coordinates in Qt?", "body": "<p>I have this dialog window class in Qt:</p>\n\n<pre><code>class Board : public QDialog\n{\n    Q_OBJECT\n\npublic:\n    explicit Board(QWidget *parent = 0);\n    ~Board();\n\nprivate:\n    Ui::Board *ui;\n\n    void mousePressEvent(QMouseEvent *mouseEvent);\n};\n</code></pre>\n\n<p>I want to dislay a png image on user given coordinates in function <code>mousePressEvent</code>, which is called every time user clicks somewhere on the dialog window. So I need something like <code>displayImage(\"path/to/image.png\", coordX, coordY);</code>. How can I do it?</p>\n\n<p>The new code:</p>\n\n<pre><code>class Board : public QDialog\n{\npublic:\n    Board(QWidget *parent = 0) : \n    QDialog(parent),\n    ui(new Ui::Board),\n    view(&amp;scene) \n{ \n    // Set background image\n    /**************/\n    ui-&gt;setupUi(this);\n\n    QPixmap pix(\"path/background.png\");\n    ui-&gt;label_board-&gt;setPixmap(pix);\n\n    /**************/\n    / Set layout for displaying other images on the background\n    QVBoxLayout *layout = new QVBoxLayout(this);\n    layout-&gt;addWidget(&amp;view);\n    //or set the layout and the view in the designer if using Qt Creator\n}\n\nprotected:\nvirtual void mousePressEvent(QMouseEvent *mouseEvent) override\n{\n    QGraphicsPixmapItem *item = new QGraphicsPixmapItem(QPixmap(\"path/to/image.png\"));\n    scene.addItem(item);\n    item-&gt;setPos(coordX, coordY);\n}\n\nprivate:\n    Ui::Board *ui;\n    QGraphicsScene scene;\n    QGraphicsView view;\n};\n</code></pre>\n\n<p>The <code>label_board</code> is a label 500x500 set to some position with Qt Designer.</p>\n\n<p><a href=\"https://i.stack.imgur.com/AxjfM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AxjfM.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "inheritance", "composition"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1461783146, "post_id": 36898399, "comment_id": 61361096, "body": "You can&#39;t override member data (you&#39;re creating independent arrays). <code>int array[];</code> is zero-sized array. Time to look into templates."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1461783341, "post_id": 36898399, "comment_id": 61361209, "body": "Your first problem is that zero length arrays are not permitted in C++ so the GCC extension that this is not considered portable."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461783619, "post_id": 36898399, "comment_id": 61361385, "body": "consider adding a virtual function to the base class, <code>virtual int* Array()</code>, which derived classes implement returning a pointer to their array."}, {"owner": {"reputation": 13, "user_id": 5990995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/730c2697a0aa6fb4ec275c516a0f955b?s=128&d=identicon&r=PG&f=1", "display_name": "Cam2025", "link": "https://stackoverflow.com/users/5990995/cam2025"}, "edited": false, "score": 0, "creation_date": 1461783787, "post_id": 36898399, "comment_id": 61361493, "body": "I have been looking at using either std:;array or std::vector and thus far prefer the former, because the size is fixed at compile time. Would using std::array still allow me to defer stating the size of the array until the derived classes?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461786244, "post_id": 36898399, "comment_id": 61363036, "body": "@Cam2025 You can&#39;t defer the size of the class until some subsequent definition, so it&#39;s not possible to defer sizing of or virtualize members."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5990995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/730c2697a0aa6fb4ec275c516a0f955b?s=128&d=identicon&r=PG&f=1", "display_name": "Cam2025", "link": "https://stackoverflow.com/users/5990995/cam2025"}, "edited": false, "score": 0, "creation_date": 1461784466, "post_id": 36898520, "comment_id": 61361906, "body": "A definite concern as the hierarchy will have 3 levels when it is done, the base class, the intermediate classes in which the sizes of the arrays becomes known, and then &quot;leaf&quot; classes with configuration specific tweaks to various virtual functions."}], "tags": [], "owner": {"reputation": 4955, "user_id": 5699329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86758f7ce8c15546da5968c504360e55?s=128&d=identicon&r=PG", "display_name": "rsjaffe", "link": "https://stackoverflow.com/users/5699329/rsjaffe"}, "is_accepted": false, "score": 1, "last_activity_date": 1461784599, "last_edit_date": 1461784599, "creation_date": 1461783244, "answer_id": 36898520, "question_id": 36898399, "link": "https://stackoverflow.com/questions/36898399/would-using-a-built-in-arrays-within-a-class-definition-but-with-size-deferred/36898520#36898520", "title": "Would using a built in arrays within a class definition, but with size deferred to derived class cause hiding?", "body": "<p>Functions can be made 'virtual', meaning that the actual function called will be determined for a given object by looking it up in the object's vtable.  This is how overloading works. An object instantiated for a derived class will have a vtable pointing to the derived functions.</p>\n\n<p>C++ doesn't do that for data members. Your derived class's data members are different from the base members. If you try to access the array, which one you select will be based upon the type of the variable pointing to the object, <em>not</em> the type of the object itself. And that <strong>is not a good thing</strong>. </p>\n\n<blockquote>\n  <p>C makes it easy to shoot yourself in the foot; C++ makes it harder, but when you do it blows your whole leg off. \u2014Bjarne Stroustrup's FAQ</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1461783906, "creation_date": 1461783906, "answer_id": 36898747, "question_id": 36898399, "link": "https://stackoverflow.com/questions/36898399/would-using-a-built-in-arrays-within-a-class-definition-but-with-size-deferred/36898747#36898747", "title": "Would using a built in arrays within a class definition, but with size deferred to derived class cause hiding?", "body": "<p>Nothing in any of the code you displayed uses <code>A::array</code>, so you can just remove it as being unnecessary. <code>B</code> and <code>C</code> just have their own personal arrays that their respective overrides of <code>Display()</code> know what to do with - <code>A</code> doesn't need to be involved here. Just have:</p>\n\n<pre><code>struct A {\n    virtual void Display() = 0;\n};\n</code></pre>\n\n<hr />\n\n<p>Note that <code>B(int numbers[4]);</code> isn't actually any different from <code>B(int *numbers)</code> as far as constructors go, the number there is just giving the illusion of safety - I can easily pass wrong-sized arrays into there. For that reason, prefer to use <code>std::array</code> - which has the added benefit of being copy-constructible:</p>\n\n<pre><code>class B : public A {\npublic:\n     B (std::array&lt;int, 4&gt; const&amp; arr)\n     : array(arr)\n     { }\n\n     virtual void Display();\nprotected:\n     std::array&lt;int, 4&gt; array;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 0, "last_activity_date": 1461786478, "last_edit_date": 1461786478, "creation_date": 1461785286, "answer_id": 36899177, "question_id": 36898399, "link": "https://stackoverflow.com/questions/36898399/would-using-a-built-in-arrays-within-a-class-definition-but-with-size-deferred/36899177#36899177", "title": "Would using a built in arrays within a class definition, but with size deferred to derived class cause hiding?", "body": "<p>You may benefit from using a templated approach to provide an <em>array</em> in the base class that derived classes can use and define the size of at compile time.</p>\n\n<p>Something like this:</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;size_t N&gt;\nclass A\n{\npublic:\n    A(): arr{} {}\n    A(const std::array&lt;int, N&gt;&amp; arr): arr{arr} {}\n\n    virtual ~A() = default; // needs virtual destructor\n\n    void Display() const // doesn't need to be virtual\n    {\n        for(auto n: arr) // generic code\n            std::cout &lt;&lt; n &lt;&lt; ' ';\n        std::cout &lt;&lt; '\\n';\n    }\n\n    int Get(size_t n) const { return arr.at(n); }\n    void Set(size_t n, int value) { arr.at(n) = value; }\n\nprotected:\n    std::array&lt;int, N&gt; arr;\n};\n\nclass B: public A&lt;4&gt;\n{\npublic:\n    B(const std::array&lt;int, 4&gt;&amp; numbers): A(numbers) {}\n};\n\nclass C: public A&lt;8&gt;\n{\npublic:\n    C(const std::array&lt;int, 8&gt;&amp; numbers): A(numbers) {}\n};\n\nint main()\n{\n    std::array&lt;int, 4&gt; B_numbers = {1, 2, 3, 4};\n\n    B b(B_numbers);\n    C c({5, 6, 7, 8, 9, 10, 11, 12});\n\n    b.Display();\n    c.Display();\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>1 2 3 4 \n5 6 7 8 9 10 11 12 \n</code></pre>\n\n<p>The benefit of this approach is that by writing generic functions in the base class (that rely only on the properties of the <code>std::array</code> class like <code>arr.size()</code> and <em>iterators</em>) you can save time creating similar classes which differ only on the size.</p>\n"}, {"tags": [], "owner": {"reputation": 669, "user_id": 6253379, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/VDrH9.png?s=128&g=1", "display_name": "Nikos Kazazakis", "link": "https://stackoverflow.com/users/6253379/nikos-kazazakis"}, "is_accepted": false, "score": 0, "last_activity_date": 1461785715, "creation_date": 1461785715, "answer_id": 36899329, "question_id": 36898399, "link": "https://stackoverflow.com/questions/36898399/would-using-a-built-in-arrays-within-a-class-definition-but-with-size-deferred/36899329#36899329", "title": "Would using a built in arrays within a class definition, but with size deferred to derived class cause hiding?", "body": "<p>There are a number of ways you could go about this. </p>\n\n<p>When you declared <code>array[]</code> as protected in the base class, it means all the derived classes have access to it (so you don't have to redefine it).</p>\n\n<p>If you want to be certain that your data is always as intended, you could remove the additional <code>array</code> definitions, as they create ambiguity (you have a base class and derived class member with the same name), and declare the intended size of the array as a protected variable, which you can then assign in each derived class' constructor.</p>\n\n<p>An alternative way you could code this would be with vectors, as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass A {\n    public: \n        A() {};\n        virtual void Display() = 0;\n    protected:\n        vector&lt;int&gt; array;\n        int size;\n};\n\nclass B : public A {\n    public:\n        B(int *numbers);\n        virtual void Display();\n};\n\nB::B(int *numbers) {\n    size=4;\n    for(int i=0; i&lt;size; i++)\n        array.push_back(numbers[i]);\n}\n\nvoid B::Display() {\n    cout &lt;&lt; \" B numbers are: \";\n    for(int i = 0; i &lt; size; i++)\n        cout &lt;&lt; array[i] &lt;&lt; \" \";\n    cout &lt;&lt; endl;\n}\n\nclass C : public A {\n    public: \n        C(int *numbers);\n        virtual void Display();\n};\n\nC::C(int *numbers) {\n    size=8;\n    for(int i=0; i&lt;size; i++)\n        array.push_back(numbers[i]);\n}\n\nvoid C::Display() {\n    cout &lt;&lt; \" C numbers are: \";\n    for(int i = 0; i &lt; size; i++)\n        cout &lt;&lt; array[i] &lt;&lt; \" \";\n    cout &lt;&lt; endl;\n}\n\nint main() {\n    int B_numbers[] = {1,2,3,4};\n    int C_numbers[] = {5,6,7,8,9,10,11,12};\n    B b(B_numbers);\n    C c(C_numbers);\n    b.Display();\n    c.Display();\n    return 0;\n}\n</code></pre>\n\n<p>This way you only declare the size in one place per class (the constructor), and there's only one possible container which can hold your data in your objects. You also don't have to worry about memory management.</p>\n\n<p>If you want to go the extra mile, you could use vectors (and iterators) everywhere, this would ensure that the size of your input always matches the size of your storage.</p>\n"}], "owner": {"reputation": 13, "user_id": 5990995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/730c2697a0aa6fb4ec275c516a0f955b?s=128&d=identicon&r=PG&f=1", "display_name": "Cam2025", "link": "https://stackoverflow.com/users/5990995/cam2025"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 36898747, "answer_count": 4, "score": 1, "last_activity_date": 1461786478, "creation_date": 1461782889, "question_id": 36898399, "link": "https://stackoverflow.com/questions/36898399/would-using-a-built-in-arrays-within-a-class-definition-but-with-size-deferred", "title": "Would using a built in arrays within a class definition, but with size deferred to derived class cause hiding?", "body": "<p>Every class within the tree depends has-a relationship with other classes for monitoring voltage and current sensors (which are usually named 1,2,3...). The problem is that how many of these sensors there are depends on what type of unit is being simulated; meaning only the derived classes will know that.</p>\n\n<pre><code>#include &lt;iostream&gt;\nclass A {\npublic: \n     A() {};\n     virtual void Display() = 0;\nprotected:\n     int array[]; // size is purposefully left out in base class\n};\n\nclass B : public A {\npublic:\n     B(int numbers[4]);\n     virtual void Display();\nprotected:\n     int array[4]; // 4 sensors are required, number fixed at compile time\n}\n\nB::B(int numbers[4]) {\n     for(int i=0; i&lt;4; i++)\n          array[i] = numbers[i];\n}\n\nvoid B::Display() {\n     cout &lt;&lt; \" B numbers are: \";\n     for(int i = 0; i &lt; 4; i++)\n          cout &lt;&lt; array[i] &lt;&lt; \" \";\n     cout &lt;&lt; endl;\n}\n\nclass C : public A {\npublic: \n     C(int numbers[8]);\n     virtual void Display();\nprotected:\n     int array[8]; // 8 sensors needed, number fixed at compile time\n};\n\nC::C(int numbers[8]) {\n     for(int i=0; i&lt;8; i++)\n          array[i] = numbers[i];\n}\n\nvoid C::Display() {\n     cout &lt;&lt; \" C numbers are: \";\n     for(int i = 0; i &lt; 8; i++)\n          cout &lt;&lt; array[i] &lt;&lt; \" \";\n     cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>This driver shows that this will technically work when using the g++ compiler, but I fear that I may have data hiding by redeclaring array in B and C classes.</p>\n\n<pre><code>main() {\n    int B_numbers[] = {1,2,,3,4};\n    int C_numbers[] = {5,6,7,8,9,10,11,12};\n    B b(B_numbers[]);\n    C c(C_numbers[]);\n    b.Display();\n    c.Display();\n}\n</code></pre>\n\n<p>And thank you for any suggestions anyone is able to provide.</p>\n"}, {"tags": ["c++", "visual-studio", "compilation"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1461782842, "post_id": 36898357, "comment_id": 61360890, "body": "Do you have #include &quot;xxxx.cpp&quot; in a cpp file?"}, {"owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1461782884, "post_id": 36898357, "comment_id": 61360915, "body": "Yes, yes, exactly. How the compiler should handle it?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1461783004, "post_id": 36898357, "comment_id": 61361002, "body": "As a general rule one should only ever include header files.  see this: <a href=\"http://programmers.stackexchange.com/questions/254233/why-do-we-need-to-include-the-h-while-everything-works-when-including-only-the\" title=\"why do we need to include the h while everything works when including only the\">programmers.stackexchange.com/questions/254233/&hellip;</a>"}, {"owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1461783829, "post_id": 36898357, "comment_id": 61361520, "body": "@NathanOliver I have used Include Guards in my .cpp files why defining my classes, so there can be no problem of a redefinition, as the answer in your link states."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1461784051, "post_id": 36898357, "comment_id": 61361644, "body": "I&#39;m just stating that it flies against the standard coding practice.  SOP is to have headers with declaration and cpp files with definitions.  You include all the pertinent headers in the cpp files as need and then you compile all of the cpp files into object files and then link them all together.  You don&#39;t have to do it that way but it is the way the majority of C++ is written."}], "answers": [{"comments": [{"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1461784100, "post_id": 36898429, "comment_id": 61361676, "body": "Nice, don&#39;t think I ever read such a clear explanation of what minimal rebuild actually does."}, {"owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "edited": false, "score": 0, "creation_date": 1461784114, "post_id": 36898429, "comment_id": 61361680, "body": "I have disabled minimal rebuild using this: <a href=\"https://msdn.microsoft.com/en-us/library/kfz8ad09.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/kfz8ad09.aspx</a> but it still recompiled only one file. But I expect all of them, when I change <code>A.cpp</code>."}, {"owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "edited": false, "score": 0, "creation_date": 1461785096, "post_id": 36898429, "comment_id": 61362329, "body": "I have also set to <b>No</b> the <b>Enable Function-Level Linking</b> param. Still compiles one file. Compiler is too smart?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "edited": false, "score": 0, "creation_date": 1461788094, "post_id": 36898429, "comment_id": 61364179, "body": "@Narek: This is controlled by the minimal rebuild compiler options, and has nothing to do with linking."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "edited": false, "score": 0, "creation_date": 1461788198, "post_id": 36898429, "comment_id": 61364248, "body": "@Narek: I presume after you removed <code>&#47;Gm</code> that the messages &quot;Skipping... (no relevant changes detected)&quot; disappeared?"}, {"owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "edited": false, "score": 0, "creation_date": 1461824190, "post_id": 36898429, "comment_id": 61376615, "body": "Yes, Ben that message is gone. What does that mean?"}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 5, "last_activity_date": 1461782966, "creation_date": 1461782966, "answer_id": 36898429, "question_id": 36898357, "link": "https://stackoverflow.com/questions/36898357/why-not-all-cpp-files-recompile/36898429#36898429", "title": "Why not all cpp files recompile?", "body": "<p>Visual Studio minimal rebuild works at a finer granularity than per-file.  If you just change the contents of a non-inline function but the signature remains the same, the Visual C++ toolchain can sometimes avoid recompiling things, even though they included a file that changed.</p>\n\n<p>File modification times are still needed to decide what to parse, but the compiler then applies AST-level dependencies -- if the token stream matches the previous version and none of the AST-level inputs have changed, the compiler can reuse the previously generated object code for that function instead of repeating the optimization steps.</p>\n"}], "owner": {"reputation": 35247, "user_id": 163394, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/af52bc2881bfd89cc35bf928e20f7d6a?s=128&d=identicon&r=PG", "display_name": "Narek", "link": "https://stackoverflow.com/users/163394/narek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461782966, "creation_date": 1461782755, "question_id": 36898357, "link": "https://stackoverflow.com/questions/36898357/why-not-all-cpp-files-recompile", "title": "Why not all cpp files recompile?", "body": "<p>In visual studio 2015 community version I do a debug build with the following file structure.</p>\n\n<p>A.cpp\nB.cpp that includes A.cpp\nC.cpp that includes A.cpp and B.cpp\nmain.cpp that includes A.cpp, B.cpp and C.cpp</p>\n\n<p>So when I change A.cpp in debug mode I get recompiled only A.cpp and main.cpp, but when I go to Release build mode, I get recompiled only A.cpp. Also I get some messages like:</p>\n\n<p><strong>In Release mode compile:</strong> <em>0 of 17 functions ( 0.0%) were compiled, the rest were copied from previous compilation.</em></p>\n\n<p><strong>In Debug Mode Compile:</strong> <em>Skipping... (no relevant changes detected)</em></p>\n\n<p>I was expecting to get recompiled all files as I include A.cpp in all files, and I changed it. </p>\n\n<p>P.S. I know it is wired to include .cpp file but this is just some experiment, that I would like to understand how it works.</p>\n"}, {"tags": ["c++", "initialization", "header-files"], "answers": [{"comments": [{"owner": {"reputation": 9326, "user_id": 2115381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08e9c37fb930fc49aa27f35d6b85238a?s=128&d=identicon&r=PG", "display_name": "hr_117", "link": "https://stackoverflow.com/users/2115381/hr-117"}, "edited": false, "score": 0, "creation_date": 1461784437, "post_id": 36898751, "comment_id": 61361886, "body": "Seems that what he shuld do /  like to do is <code>Stack(int size, double value)         : s(size, value) </code> ..."}], "tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 2, "last_activity_date": 1461784586, "last_edit_date": 1461784586, "creation_date": 1461783913, "answer_id": 36898751, "question_id": 36898328, "link": "https://stackoverflow.com/questions/36898328/c-how-to-initialize-an-object-that-uses-two-header-files/36898751#36898751", "title": "C++ : How to initialize an object that uses two header files?", "body": "<p>This is because you haven't specified a default constructor (<code>Array::Array()</code>) for Array and when the compiler sees this:</p>\n\n<pre><code>    Stack(int size, double value) {\n        s.size(size);\n        s.value(value);    // &lt;--- Not sure if I should use this, see Array header file how default value is used to resize an array\n        count = 0\n\n        //used member functions which are not important to solve this particular problem\n    }\n</code></pre>\n\n<p>what you have actually written is:</p>\n\n<pre><code>    Stack(int size, double value)\n        : s()  // default initialize s\n        , count()  // default initialize count\n    {\n        s.size(size);\n        s.value(value);    // &lt;--- Not sure if I should use this, see Array header file how default value is used to resize an array\n        count = 0\n\n        //used member functions which are not important to solve this particular problem\n    }\n</code></pre>\n\n<p>The <code>s()</code> fails because this is a default-construction of Array and there is no default constructor for Array.</p>\n\n<p>EDIT:\nAs hr_117 points out, you can solve this either by adding a default ctor to Array or you could add the following initialization to Stack:</p>\n\n<pre><code>    Stack(int size, double value)\n        : s(size, value)  // default initialize s\n        , count(0)  // default initialize count\n    {\n    }\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 6255655, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/892611cb3b323f708c5f8ec81eea4395?s=128&d=identicon&r=PG&f=1", "display_name": "user_537", "link": "https://stackoverflow.com/users/6255655/user-537"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 36898751, "answer_count": 1, "score": 3, "last_activity_date": 1461787880, "creation_date": 1461782662, "last_edit_date": 1461787880, "question_id": 36898328, "link": "https://stackoverflow.com/questions/36898328/c-how-to-initialize-an-object-that-uses-two-header-files", "title": "C++ : How to initialize an object that uses two header files?", "body": "<p>I am having trouble with initializing an object that uses two header files. One header file stacks values into an array which is made from the other header file. I use a separate main script to do calculations with a Stack definition file. It looks as follow:</p>\n\n<p>Main script</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Stack.h\"\n#include \"Array.h\"\n\nusing namespace std ;\n\nint main() {\n\nint LEN = 10;               // size array\ndouble def_val = 1.1 ;      // a default value that is used to fill a resized array\n\nStack s(LEN, def_val) ;     // &lt;--- causing compiler error\n\n// Do calculations with functions defined in a Stack.cc file\n\nreturn 0;\n}\n</code></pre>\n\n<p>Stack header file</p>\n\n<pre><code>#ifndef STACK_HH \n#define STACK_HH\n\n#include &lt;iostream&gt;\n#include \"Array.h\"\n\nusing namespace std ;\n\nclass Stack {\n\n    public: \n        Stack(int size, double value) {\n            s.size(size);\n            s.value(value);    // &lt;--- Not sure if I should use this, see Array header file how default value is used to resize an array\n            count = 0\n\n            //used member functions which are not important to solve this particular problem\n        }\n\n    // Member functions\n\n    private:\n       Array&lt;double&gt; s ;\n       int count ;\n};\n</code></pre>\n\n<p>Array header file</p>\n\n<pre><code>#ifndef ARRAY_HH\n#define ARRAY_HH\n\ntemplate &lt;class T&gt; \nclass Array {\npublic:\n\n  Array(int size, T value) : _size(size) {         // &lt;--- takes two arguments\n     _arr = new T[_size] ;\n     _value = value ;       // Set default value\n     std::cout &lt;&lt; \"default value = \" &lt;&lt; _value &lt;&lt; std::endl ;\n  }\n\n\n  Array(const Array&lt;T&gt;&amp; other) : _size(other._size), _value(other._value) {\n    _arr = new T[other._size] ;\n    _value = _value ;       \n\n    // Copy elements\n    for (int i=0 ; i&lt;_size ; i++) {\n        _arr[i] = other._arr[i] ;\n    }\n\n  }\n\n ~Array() {\n    delete[] _arr ;\n  }\n\n\n  Array&lt;T&gt;&amp; operator=(const Array&lt;T&gt;&amp; other) {\n    if (&amp;other==this) return *this ;\n    if (_size != other._size) {\n       resize(other._size) ;\n    }\n    for (int i=0 ; i&lt;_size ; i++) {\n       _arr[i] = other._arr[i] ;\n    }\n    return *this ;\n  }\n\n  T&amp; operator[](int index) {\n      if (index &gt; _size) {          \n          resize(index) ;\n      }\n      return _arr[index] ;\n   }\n\n  const T&amp; operator[](int index) const {\n      if (index &gt; _size) {          \n         resize(index) ;\n      }\n      return _arr[index] ;\n  }\n\n int size() const { return _size ; }\n T value() const { return _value ; }   // &lt;--- Included this for reading the default value from the object initialized in the main script, just like the size is read.\n\n void resize(int newSize) {\n    // Allocate new array\n    T* newArr = new T[newSize] ;\n\n    // Copy elements\n    for (int i=0 ; i&lt;_size ; i++) {\n        newArr[i] = _arr[i] ;\n    }\n\n    // Fill remaining array with default value\n    for (int i=_size ; i&lt;=newSize; i++){\n        newArr[i] = _value ;\n    }\n\n    // Delete old array and install new one\n    delete[] _arr ;\n    _size = newSize ;\n    _arr = newArr ;\n\n }\n\n\nprivate:\n  int _size ;\n  T* _arr ;\n  T _value ;\n} ;\n\n#endif\n</code></pre>\n\n<p>When compiling I get the error that no matching function can be called for \n\"Array[double]::Array()\" when Stack(int size, double value) { } is being read in the Stack.h file.</p>\n\n<p>Initially, only the size was being read. However, I realized the Array header file needs a second argument to make an array. So I included the s.value() function in the Stack.h file similar to the s.size() one. Yet this didn't solve the compiler error. </p>\n\n<p>This is a modified version of an already working script I made two weeks ago but now want to extend its usability and turn it into a template class.</p>\n\n<p>Please don't mind my English.</p>\n\n<p>EDIT:</p>\n\n<p>I thank you both. This was indeed causing the problem.</p>\n"}, {"tags": ["c++", "x86", "intrinsics", "intel-tsx"], "answers": [{"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": true, "score": 4, "last_activity_date": 1471101525, "last_edit_date": 1471101525, "creation_date": 1461787601, "answer_id": 36899866, "question_id": 36898325, "link": "https://stackoverflow.com/questions/36898325/does-an-aborted-xbegin-transaction-restore-the-stack-context-that-existed-at-the/36899866#36899866", "title": "Does an aborted xbegin transaction restore the stack context that existed at the xbegin start?", "body": "<p>related: See also <a href=\"http://www.realworldtech.com/haswell-tm/\" rel=\"nofollow\">David Kanter's TSX writeup</a> for some theory on how it works under the hood and how software can benefit from it, and <a href=\"http://natsys-lab.blogspot.ca/2013/11/studying-intel-tsx-performance.html\" rel=\"nofollow\">this blog post</a> for some experimental performance numbers on HSW (before the TSX bug was discovered and microcode updates disabled TSX on that hardware.)</p>\n\n<hr>\n\n<p>The Intel insn ref manual <a href=\"http://www.felixcloutier.com/x86/XBEGIN.html\" rel=\"nofollow\">entry for <code>xbegin</code></a> is pretty clear.  (See the <a href=\"/questions/tagged/x86\" class=\"post-tag\" title=\"show questions tagged &#39;x86&#39;\" rel=\"tag\">x86</a> tag wiki for links to Intel's official PDF, and other stuff.)</p>\n\n<blockquote>\n  <p>On an RTM abort, the logical processor discards <strong>all architectural\n  register and memory updates</strong> performed during the RTM execution and\n  restores architectural state to that corresponding to the outermost\n  XBEGIN instruction.  The fallback address following an abort is computed from the outermost XBEGIN instruction.</p>\n</blockquote>\n\n<p>So the instruction works like a conditional branch, where the branch condition is \"did an abort happen before <code>XEND</code>?\"  e.g.:</p>\n\n<pre><code>; NASM syntax, I assume MASM is similar\nALIGN 16\nretry:\n    ; eax holds abort info, all other architectural state + memory is unchanged\n    inc     [retry_count]      ; or whatever other debug instrumentation you want to add\n\nglobal xbegin_wrapper_with_retry\nxbegin_wrapper_with_retry:\n    xbegin  retry\n    ret\n</code></pre>\n\n<p>If an abort happens, <strong>it's as if all the code that ran after <code>xbegin</code> didn't run at all</strong>, just a jump to the fallback address with <code>eax</code> modified.</p>\n\n<p>You might want to do something other than just infinite retries on an abort, of course.  This isn't meant to be a real example.  (<a href=\"http://natsys-lab.blogspot.ca/2013/11/studying-intel-tsx-performance.html\" rel=\"nofollow\">This article</a> does have a real example of the kind of logic you might want to use, using intrinsics.  It looks like they just test <code>eax</code> instead of using the <code>xbegin</code> as the jump in an <code>if</code>, unless the compiler optimizes that check. IDK if it's the most efficient way.)</p>\n\n<p>What do you mean \"interrupts effects\"?  In current implementations, anything that changes privilege level (like a syscall or interrupt) causes a transaction abort.  So ring-level changes never need to be rolled back.  <strong>The CPU will just abort the transaction when it encounters anything it can't roll back</strong>.  This means the possible bugs include putting something inside the transaction that always causes an abort, but not that you do something that can't be rolled back.</p>\n\n<hr>\n\n<p>You might want to try to get the compiler to emit the three-byte <code>XEND</code> instruction without a function call, so pushing the return address onto the stack isn't part of the transaction.  e.g.</p>\n\n<pre><code>// no idea if this is safe, or if it might get reordered by the optimizer\n#define xend_MSVC  __asm _emit 0x0F  __asm _emit   0x01 __asm _emit 0xD5\n</code></pre>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/1b80826t.aspx\" rel=\"nofollow\">I think this does still work in 64bit mode</a>, since the doc mentions <code>rax</code>, and it looks like <a href=\"https://software.intel.com/en-us/articles/intel-architecture-code-analyzer\" rel=\"nofollow\">IACA's header file</a> uses <code>__asm _emit</code>.</p>\n\n<p>It'll be safer to put <code>XEND</code> in its own wrapper function, too, I guess.  You just need a stop-gap until you can upgrade to a compiler with intrinsics, so it doesn't have to be perfect as long as the extra reads/writes from the <code>ret</code> and <code>call</code> don't cause too many aborts.</p>\n"}], "owner": {"reputation": 191, "user_id": 1261908, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b5d9c40a715518a44b2b2a7e52369992?s=128&d=identicon&r=PG", "display_name": "Chris Cochran", "link": "https://stackoverflow.com/users/1261908/chris-cochran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "accepted_answer_id": 36899866, "answer_count": 1, "score": 2, "last_activity_date": 1587368965, "creation_date": 1461782647, "last_edit_date": 1587368965, "question_id": 36898325, "link": "https://stackoverflow.com/questions/36898325/does-an-aborted-xbegin-transaction-restore-the-stack-context-that-existed-at-the", "title": "Does an aborted xbegin transaction restore the stack context that existed at the xbegin start?", "body": "<p>I am interested in encapsulating a transactional xbegin and xend inside XBEGIN( ) and XEND( ) functions, in a static assembler lib.  However I am unclear how (or if) the stack gets restored to the original xbegin calling state, given an xabort originating at some other stack level (higher or lower).  In other words, is the dynamic stack context (including interrupts effects) managed and rolled back as just another part of the transaction?</p>\n\n<p>This assembler approach is needed for a VC++ 2010 build that doesn't have _xbegin( ) and _xend( ) intrinsics supported or available, and x64 builds cannot use _asm { } inlining.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "edited": false, "score": 0, "creation_date": 1461782969, "post_id": 36898307, "comment_id": 61360977, "body": "DId you try to eliminate one thing at time? You can start with constructing the vector and deleting it afterwards. Add more code until error shows up."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1461784384, "post_id": 36898307, "comment_id": 61361850, "body": "If the real types used for either <code>Key</code> or <code>Value</code> are non-trivial, the use of <code>memcpy</code> is invalid and the result undefined. You might want to use <code>std::copy</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 2542813, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5a25c80d81d1dd0ca741577704d3aecc?s=128&d=identicon&r=PG", "display_name": "user2542813", "link": "https://stackoverflow.com/users/2542813/user2542813"}, "edited": false, "score": 0, "creation_date": 1461809697, "post_id": 36898955, "comment_id": 61371904, "body": "thanks for helping, changing the memcpy with std::copy really worked, thanks for the tips too."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 1, "last_activity_date": 1461784574, "creation_date": 1461784574, "answer_id": 36898955, "question_id": 36898307, "link": "https://stackoverflow.com/questions/36898307/primitive-vector-deletion-throws-exception/36898955#36898955", "title": "primitive vector deletion throws exception", "body": "<p>The exception says your code (or rather CRT) tried to write at memory location with value 0xABABABAB. Under debugger Visual Studio sets this value to help find bugs. It means:</p>\n\n<pre><code>Used by HeapAlloc() to mark \"no man's land\" guard bytes after allocated heap memory\n</code></pre>\n\n<p>Because this exception originates from <code>delete</code> it means that either you have corrupted heap by overwriting some memory buffers, or you are trying to delete dangling pointer.</p>\n\n<p>One thing that looks suspicious is that you are using memcpy to copy <code>elements</code> - you should memcpy only trivial types. To check if that is a case use static assertion:</p>\n\n<pre><code>static_assert(std::is_trivially_copyable&lt;Pair&lt;Key, Value&gt;&gt;::value, \"must be TriviallyCopyable type\");\n</code></pre>\n\n<p>Its always better to use <code>std::copy</code> - it will use <code>memmove</code> for TriviallyCopyable types, and otherwise will copy elements one by one.</p>\n\n<p>To prevent from having such bugs, you should use <code>std::vector</code> instead of dynamic arrays, if you need pointers then you might use <code>std::unique_ptr</code>. Combined with various functions from <code>&lt;algorithm&gt;</code> header.</p>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1461785004, "creation_date": 1461785004, "answer_id": 36899098, "question_id": 36898307, "link": "https://stackoverflow.com/questions/36898307/primitive-vector-deletion-throws-exception/36899098#36899098", "title": "primitive vector deletion throws exception", "body": "<p>I see that you copy the allocated memory.</p>\n\n<pre><code> memcpy(left-&gt;elements, elements, sizeof(Pair&lt;Key, Value&gt;) * middle);\n    if (!leaf()){\n        left-&gt;nchilds = middle + 1;\n        memcpy(left-&gt;childs, childs, sizeof(Node&lt;Key, Value&gt;*) * left-&gt;nchilds);\n    }\n</code></pre>\n\n<p>From a <code>Node</code> instance to another?</p>\n\n<p>In this case, are you sure that you free an allocated pointer only one time?</p>\n"}], "owner": {"reputation": 313, "user_id": 2542813, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5a25c80d81d1dd0ca741577704d3aecc?s=128&d=identicon&r=PG", "display_name": "user2542813", "link": "https://stackoverflow.com/users/2542813/user2542813"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 36898955, "answer_count": 2, "score": -2, "last_activity_date": 1461785004, "creation_date": 1461782596, "question_id": 36898307, "link": "https://stackoverflow.com/questions/36898307/primitive-vector-deletion-throws-exception", "title": "primitive vector deletion throws exception", "body": "<p>the problem is the title, when debugging right before the delete instruction i can see that the pointer(vector) is fine, i can even modify its values through the VC++Express2013 immediate window, but after the delete it throw the exception: </p>\n\n<pre><code>Unhandled exception at 0x55ACDF62 (msvcp120d.dll) in BTREE.EXE: 0xC0000005: Access violation writing location 0xABABABAB.\n</code></pre>\n\n<p>My vector is a vector of this class:</p>\n\n<pre><code>template&lt;class Key, class Value&gt;\nclass Pair{\npublic:\nPair(){\n    key = Key();\n    value = Value();\n}\n\nPair(Key key, Value value){\n    this-&gt;key = key;\n    this-&gt;value = value;\n}\n\nKey key;\nValue value;\n};\n</code></pre>\n\n<p>in the templates i use int for the key and std::string for the value, the vector is only allocated via this method:</p>\n\n<pre><code>Node(unsigned int max){\n    nelements = 0;\n    nchilds = 0;\n    /*reserva espa\u00e7o para os elementos e os n\u00f3s filhos, cada vetor possui uma espa\u00e7o adicional reservado*/\n    elements = new Pair&lt;Key, Value&gt;[max];\n    childs = new Node&lt;Key, Value&gt;*[max + 1];\n    this-&gt;max = max;\n\n    for (unsigned int i = 0; i &lt; max + 1; i++)\n        childs[i] = nullptr;\n}\n</code></pre>\n\n<p>more complicated operations using this vector are here:</p>\n\n<pre><code>        left-&gt;nelements = middle;\n    memcpy(left-&gt;elements, elements, sizeof(Pair&lt;Key, Value&gt;) * middle);\n    if (!leaf()){\n        left-&gt;nchilds = middle + 1;\n        memcpy(left-&gt;childs, childs, sizeof(Node&lt;Key, Value&gt;*) * left-&gt;nchilds);\n    }\n</code></pre>\n\n<p>and here is the destructor:</p>\n\n<pre><code>~Node(){\n    for (unsigned int i = 0; i &lt; nchilds; i++)\n            delete childs[i];\n    delete[] childs;\n    delete[] elements;\n}\n</code></pre>\n\n<p>thanks for helping.</p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461782603, "post_id": 36898212, "comment_id": 61360737, "body": "<b><i>a missing &quot;MSVCR120.dll&quot; dll error message has popped.</i></b> You need to install the Visual Studio 2013 redistributable on these computers."}, {"owner": {"reputation": 728, "user_id": 5922180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c63faa62b64336441393d7c11e1ec79a?s=128&d=identicon&r=PG&f=1", "display_name": "DrPrItay", "link": "https://stackoverflow.com/users/5922180/drpritay"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461782840, "post_id": 36898212, "comment_id": 61360888, "body": "That&#39;s the exact opposite of what I wish to do, I want that computers that I implement my program on won&#39;t have to install visual studio 2013, I wanna load that dll for them.. @drescherjm"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1461782923, "post_id": 36898212, "comment_id": 61360935, "body": "You don&#39;t install visual studio 2013. Just the runtime. The answer points out the file you need to install."}], "answers": [{"comments": [{"owner": {"reputation": 728, "user_id": 5922180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c63faa62b64336441393d7c11e1ec79a?s=128&d=identicon&r=PG&f=1", "display_name": "DrPrItay", "link": "https://stackoverflow.com/users/5922180/drpritay"}, "edited": false, "score": 0, "creation_date": 1461782965, "post_id": 36898322, "comment_id": 61360972, "body": "Could you please be more specific to my question? the program runs fine on my computer, I want to run it on other computers without having to download special tools on their computers, just by loading dll&#39;s from within my code into their computer @Eric T."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461783009, "post_id": 36898322, "comment_id": 61361008, "body": "Just download the redistibutable for Visual Studio 2013 and install that on the machines that need it. <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=40784\" rel=\"nofollow noreferrer\">microsoft.com/en-us/download/details.aspx?id=40784</a> Since you said the program is 32 bit you need the 6.2 MB vcredist_x86.exe file."}, {"owner": {"reputation": 66, "user_id": 3046738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YtYXt.png?s=128&g=1", "display_name": "Eric T.", "link": "https://stackoverflow.com/users/3046738/eric-t"}, "edited": false, "score": 0, "creation_date": 1461783088, "post_id": 36898322, "comment_id": 61361053, "body": "You program depends on DLL to run, e.g. not all the function are in your program. When you installed Visual studio on you you development PC, the installer install all the needed DLL to run programs generated by Visual Studio. If you want to run your program on another PC you will have to install at least the the runtime DLL. Most program install includes the DLL they depend on in their own installer."}], "tags": [], "owner": {"reputation": 66, "user_id": 3046738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YtYXt.png?s=128&g=1", "display_name": "Eric T.", "link": "https://stackoverflow.com/users/3046738/eric-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1461782639, "creation_date": 1461782639, "answer_id": 36898322, "question_id": 36898212, "link": "https://stackoverflow.com/questions/36898212/c-transportation-of-executable-files/36898322#36898322", "title": "C++ - transportation of executable files", "body": "<p>if you built you program with visual studio, you will need to install Microsoft redistribuables:<a href=\"https://support.microsoft.com/en-us/kb/2977003\" rel=\"nofollow\">https://support.microsoft.com/en-us/kb/2977003</a></p>\n\n<p>Regards</p>\n"}, {"comments": [{"owner": {"reputation": 728, "user_id": 5922180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c63faa62b64336441393d7c11e1ec79a?s=128&d=identicon&r=PG&f=1", "display_name": "DrPrItay", "link": "https://stackoverflow.com/users/5922180/drpritay"}, "edited": false, "score": 0, "creation_date": 1461783568, "post_id": 36898451, "comment_id": 61361353, "body": "Thanks, also how would I overcome different processor architectures? @c-smile"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1461784878, "post_id": 36898451, "comment_id": 61362179, "body": "Compile a different version for each architecture. Although 32 bit x86 will work without issue on x64."}, {"owner": {"reputation": 728, "user_id": 5922180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c63faa62b64336441393d7c11e1ec79a?s=128&d=identicon&r=PG&f=1", "display_name": "DrPrItay", "link": "https://stackoverflow.com/users/5922180/drpritay"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461822944, "post_id": 36898451, "comment_id": 61376013, "body": "not talking about x86 and x64, talking about risc and mips vs x86 @drescherjm"}, {"owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "reply_to_user": {"reputation": 728, "user_id": 5922180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c63faa62b64336441393d7c11e1ec79a?s=128&d=identicon&r=PG&f=1", "display_name": "DrPrItay", "link": "https://stackoverflow.com/users/5922180/drpritay"}, "edited": false, "score": 0, "creation_date": 1461903472, "post_id": 36898451, "comment_id": 61419131, "body": "@DrPrItay you will have different executables for each platform. No other reasonable options."}], "tags": [], "owner": {"reputation": 24428, "user_id": 421163, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/l4J7H.jpg?s=128&g=1", "display_name": "c-smile", "link": "https://stackoverflow.com/users/421163/c-smile"}, "is_accepted": true, "score": 2, "last_activity_date": 1461783058, "last_edit_date": 1495535634, "creation_date": 1461783058, "answer_id": 36898451, "question_id": 36898212, "link": "https://stackoverflow.com/questions/36898212/c-transportation-of-executable-files/36898451#36898451", "title": "C++ - transportation of executable files", "body": "<p>You have two options:</p>\n\n<ol>\n<li>To create installation package for your exe that includes VC++\nredistribuables.</li>\n<li>To compile your exe with VC++ runtime compiled in <a href=\"https://stackoverflow.com/questions/757418/should-i-compile-with-md-or-mt\">as a static library</a>.</li>\n</ol>\n\n<p>In second case you don't need installation package, just copy the exe on target machine and run it from there. </p>\n"}], "owner": {"reputation": 728, "user_id": 5922180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/c63faa62b64336441393d7c11e1ec79a?s=128&d=identicon&r=PG&f=1", "display_name": "DrPrItay", "link": "https://stackoverflow.com/users/5922180/drpritay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 36898451, "answer_count": 2, "score": 0, "last_activity_date": 1461783058, "creation_date": 1461782252, "question_id": 36898212, "link": "https://stackoverflow.com/questions/36898212/c-transportation-of-executable-files", "title": "C++ - transportation of executable files", "body": "<p>I've built this really simple mulithreaded winsock tcp based multi-user chat in C++.</p>\n\n<p>I'm personally running a 32 bit windows 7 version, the chat works fine and now I want to test it among different computers in my LAN, simply for the example, I would like to run my client.exe file within another computer, a windows 7 that runs 64 bit.</p>\n\n<p>so I have a few questions before doing so:</p>\n\n<ol>\n<li>firstly assuming both computes run x86 architecture It shouldn't be a problem to transport those .exe files and run them on different computers right?</li>\n<li>now my second question is missing dll's, when tried executing my client.exe file on the other computer, a missing \"MSVCR120.dll\" dll error message has popped. which actually makes sense as the computers may be architecture compatible but may have different dll's. so my question is, if within my C++ Client.exe file source code, I will load the MSVCR120.dll and include it to the folder of my Client.exe file, would that solve my problem?</li>\n</ol>\n"}, {"tags": ["c++", "initialization", "constants", "static-members"], "comments": [{"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 0, "creation_date": 1461782731, "post_id": 36898168, "comment_id": 61360818, "body": "Would there be any repercussions if you used <code>const int i = 123;</code> inside your structure? i.e., remove the <code>static</code> keyword?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 0, "creation_date": 1461783414, "post_id": 36898168, "comment_id": 61361255, "body": "@Logicrat: without <code>static</code>, no errors (only a couple of warning compiling with c++98 because only from c++11 you can initialize in this way a not static variable)"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "edited": false, "score": 0, "creation_date": 1461783617, "post_id": 36898168, "comment_id": 61361382, "body": "@David: I suppose you&#39;re right: the question is little different but the background is the same and the answer are good for my question too. What I&#39;m supposed to do in this (duplicate question) case? I should delete the question?"}, {"owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "edited": false, "score": 0, "creation_date": 1461784331, "post_id": 36898168, "comment_id": 61361815, "body": "@max66 You don&#39;t have to do anything, it&#39;s all good. Just leave your question here - it may be useful to someone in the future even marked as duplicate"}], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1461782787, "answer_count": 0, "score": 3, "last_activity_date": 1461782107, "creation_date": 1461782107, "question_id": 36898168, "link": "https://stackoverflow.com/questions/36898168/trouble-with-static-const-integral-member-declaration", "closed_reason": "Duplicate", "title": "trouble with static const integral member declaration", "body": "<p>I'm a little confused about static class/struct member declaration/initialization.</p>\n\n<p>I was convinced that it's necessary declare a static member inside the class/struct body and initialize it outside. With an important exception: it's possible declare <em>and</em> initialize a static member inside the class/struct body if the member (a) is const and (b) is of integral type (<code>bool</code>, <code>int</code>, <code>long</code>, etc.).</p>\n\n<p>So (I was convinced that) it's perfectly legal something like</p>\n\n<pre><code>struct foo\n { static const int i = 123; };\n</code></pre>\n\n<p>And it works, in the following example</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct foo\n {\n   static const int i = 123;\n\n   void baz (const int j)\n    { std::cout &lt;&lt; \"baz: j = \" &lt;&lt; j &lt;&lt; '\\n'; }\n\n   void bar ()\n    { baz(foo::i); }\n };\n\nint main ()\n {\n   foo().bar();\n\n   return 0;\n }\n</code></pre>\n\n<p>But if I change the definition of <code>foo::baz()</code> method passing the argument <code>j</code> as reference</p>\n\n<pre><code>   void baz (const int &amp; j)\n    { std::cout &lt;&lt; \"baz: j = \" &lt;&lt; j &lt;&lt; '\\n'; }\n</code></pre>\n\n<p>I find that <code>foo::i</code> is undefined. And this with <code>g++</code> (4.9.2), with <code>clang++</code> (3.5.0), compiling as c++98, as c++11 or as c++14. In all cases i get the following linker error: <code>riferimento non definito a \"foo::i\"</code> (italian for \"undefined reference to \\\"<code>foo::i</code>\\\"\").</p>\n\n<p>If I declare only the static member inside</p>\n\n<pre><code>   //static const int i = 123;\n   static const int i;\n</code></pre>\n\n<p>and initialize it outside the body of the struct,</p>\n\n<pre><code>const int foo::i = 123;\n</code></pre>\n\n<p>no more errors and the program work as expected.</p>\n\n<p>So... why?</p>\n\n<p>It's me (I don't understand the static member initialization?) or are the compilers (a bug of <code>g++</code> and <code>clang++</code>?)?</p>\n\n<p>p.s.: sorry for my bad English.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 156, "user_id": 6162709, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/lEQOC.png?s=128&g=1", "display_name": "stackoverfloweth", "link": "https://stackoverflow.com/users/6162709/stackoverfloweth"}, "edited": false, "score": 0, "creation_date": 1461782518, "post_id": 36898163, "comment_id": 61360669, "body": "Can you show me multiple inputs and outputs that you want, and or explain what you want in more detail. There seems to be an easier way to do this."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1461782663, "post_id": 36898163, "comment_id": 61360776, "body": "You can check the value of <code>num</code> <i>before</i> multiplying it by 10. Catch the overflow event before it happens."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1461782665, "post_id": 36898163, "comment_id": 61360779, "body": "May we assume that using pre-existing functions like <code>std::stoi</code> and <code>strtol</code> that do this are disallowed?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1461784605, "post_id": 36898163, "comment_id": 61361995, "body": "Please don&#39;t dabble with the code posted. This isn&#39;t a real-time edit-feedback site. You need to break the loop on the first condition too."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461786610, "post_id": 36898163, "comment_id": 61363268, "body": "<code>if (num &lt; (INT_MAX&#47;10)) {             num *= 10;         }          if (num &lt; INT_MAX - 10)             num += s[i++] - &#39;0&#39;;</code> does not work.  Try <code>&quot;2147483640&quot;</code> and <code>&quot;2147483647&quot;</code>  Best to revert your post to its original as commented by @Weather Vane"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1461782845, "post_id": 36898341, "comment_id": 61360892, "body": "think you mean ` INT_MAX / 10` here ` INT_MAX - 10`"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1461783119, "post_id": 36898341, "comment_id": 61361073, "body": "@user4581301 the answer has both, but only the <code>num&lt;(INT_MAX&#47;10)</code> is necessary. Adding 9 cannot then overflow <code>INT_MAX</code>."}, {"owner": {"reputation": 135, "user_id": 4904312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f4aa02472e031ac11f7305b4c53d340f?s=128&d=identicon&r=PG", "display_name": "Calihog", "link": "https://stackoverflow.com/users/4904312/calihog"}, "edited": false, "score": 0, "creation_date": 1461783146, "post_id": 36898341, "comment_id": 61361095, "body": "I&#39;ve tried <code>if (num&lt; (INT_MAX&#47;10))             num *= 10;         if (num &lt; INT_MAX - 10 )             num += s[i++] - &#39;0&#39;;</code> but it doesn&#39;t work."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461783268, "post_id": 36898341, "comment_id": 61361165, "body": "Thanks @WeatherVane . Couldn&#39;t grasp what that last test was for."}, {"owner": {"reputation": 135, "user_id": 4904312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f4aa02472e031ac11f7305b4c53d340f?s=128&d=identicon&r=PG", "display_name": "Calihog", "link": "https://stackoverflow.com/users/4904312/calihog"}, "edited": false, "score": 0, "creation_date": 1461783802, "post_id": 36898341, "comment_id": 61361503, "body": "Any idea what I am doing wrong if this is the correct answer? I&#39;m doing the check <code>num&lt;(INT_MAX&#47;10)</code> and then <code>num *= 10</code>"}, {"owner": {"reputation": 1051, "user_id": 4134321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iTKqJ.jpg?s=128&g=1", "display_name": "Henrik Carlqvist", "link": "https://stackoverflow.com/users/4134321/henrik-carlqvist"}, "edited": false, "score": 0, "creation_date": 1461784242, "post_id": 36898341, "comment_id": 61361752, "body": "As INT_MAX is 2147483647 adding 9 to 2147483640 could overflow INT_MAX. Also, adding 9 to 2147483638 would not overflow INT_MAX but might later underflow INT_MIN if you find a &quot;-&quot; to try and convert -2147483647. I don&#39;t know why you fail with your checks, but maybe you would want to add some else that flags that you have avoided an overflow so it will be detected? What result do you get when you think things go wrong?"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 135, "user_id": 4904312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f4aa02472e031ac11f7305b4c53d340f?s=128&d=identicon&r=PG", "display_name": "Calihog", "link": "https://stackoverflow.com/users/4904312/calihog"}, "edited": false, "score": 0, "creation_date": 1461784317, "post_id": 36898341, "comment_id": 61361806, "body": "@Calihog you have not shown what you do if you can&#39;t take any more digits, so we don&#39;t know. But I suggest <code>if (num &gt; INT_MAX&#47;10) break;</code>"}, {"owner": {"reputation": 135, "user_id": 4904312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f4aa02472e031ac11f7305b4c53d340f?s=128&d=identicon&r=PG", "display_name": "Calihog", "link": "https://stackoverflow.com/users/4904312/calihog"}, "edited": false, "score": 0, "creation_date": 1461784596, "post_id": 36898341, "comment_id": 61361982, "body": "I have updated my code in the question. With the following string I get a result of &quot;214748371&quot; in the variable num."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1461784823, "post_id": 36898341, "comment_id": 61362140, "body": "@HenrikCarlqvist yes you got me, I was working from <code>999999999</code>"}, {"owner": {"reputation": 1051, "user_id": 4134321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iTKqJ.jpg?s=128&g=1", "display_name": "Henrik Carlqvist", "link": "https://stackoverflow.com/users/4134321/henrik-carlqvist"}, "edited": false, "score": 0, "creation_date": 1461785356, "post_id": 36898341, "comment_id": 61362494, "body": "214748371 is more than INT_MAX/10. So we get rather close but not all the way up to INT_MAX... If you want to be able to get all the way up to INT_MAX you will need a third solution: 1) store the previous value of num. 2) Increase num. 3) Check that num is bigger than the previous value of num."}, {"owner": {"reputation": 135, "user_id": 4904312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f4aa02472e031ac11f7305b4c53d340f?s=128&d=identicon&r=PG", "display_name": "Calihog", "link": "https://stackoverflow.com/users/4904312/calihog"}, "edited": false, "score": 0, "creation_date": 1461786030, "post_id": 36898341, "comment_id": 61362906, "body": "&#205; don&#39;t think I&#39;m doing the right thing. I thought that I should get 214748364 as the last value. Can I see your implementation? :("}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1461786543, "post_id": 36898341, "comment_id": 61363223, "body": "@HenrikCarlqvist <i>1) store the previous value of num. 2) Increase num. 3) Check that num is bigger than the previous value of num.</i>  But integer overflow is undefined behavior.  That&#39;s THE example given in the <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf\" rel=\"nofollow noreferrer\">C Standard</a> for the definition of &quot;undefined behavior&quot;:  &quot;EXAMPLE An example of undefined behavior is the behavior on integer overflow.&quot;"}, {"owner": {"reputation": 1051, "user_id": 4134321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iTKqJ.jpg?s=128&g=1", "display_name": "Henrik Carlqvist", "link": "https://stackoverflow.com/users/4134321/henrik-carlqvist"}, "edited": false, "score": 0, "creation_date": 1461787393, "post_id": 36898341, "comment_id": 61363753, "body": "The reason that you get 214748371 instead of 214748364 when you was hoping for 2147483647 is that you first get 214748364 but that is not multiplied by 10 to avoid possible overflow. But then you add 7 to 214748364 which sums up to 214748371. IMHO the best thing would be to somehow detect and report overflow."}, {"owner": {"reputation": 1051, "user_id": 4134321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iTKqJ.jpg?s=128&g=1", "display_name": "Henrik Carlqvist", "link": "https://stackoverflow.com/users/4134321/henrik-carlqvist"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1461787498, "post_id": 36898341, "comment_id": 61363818, "body": "@Andrew Henle you are right that integer overflow is not defined so my example in the comment might not work. In most cases it will however when integers are represented by 2 complement numbers."}, {"owner": {"reputation": 1051, "user_id": 4134321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iTKqJ.jpg?s=128&g=1", "display_name": "Henrik Carlqvist", "link": "https://stackoverflow.com/users/4134321/henrik-carlqvist"}, "edited": false, "score": 0, "creation_date": 1461821771, "post_id": 36898341, "comment_id": 61375532, "body": "But if you really want 214748364 above it could be rather easy done with: <code>if (num &lt; (INT_MAX&#47;10)) {num *= 10; if (num &lt; INT_MAX - 10) {num += s[i++] - &#39;0&#39;;} else break; } else break;</code>. It would also be possible to get a little close with 2147483640 with <code>if (num &lt;= (INT_MAX&#47;10)) {num *= 10; if (num &lt; INT_MAX - 10) {num += s[i++] - &#39;0&#39;;} else break; } else break;</code>."}], "tags": [], "owner": {"reputation": 1051, "user_id": 4134321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iTKqJ.jpg?s=128&g=1", "display_name": "Henrik Carlqvist", "link": "https://stackoverflow.com/users/4134321/henrik-carlqvist"}, "is_accepted": false, "score": 1, "last_activity_date": 1461782705, "creation_date": 1461782705, "answer_id": 36898341, "question_id": 36898163, "link": "https://stackoverflow.com/questions/36898163/manually-converting-string-to-int-and-check-if-an-overflow-occured-in-c-c/36898341#36898341", "title": "Manually converting string to int and check if an overflow occured in C/C++?", "body": "<p>I see two possible solutions:</p>\n\n<p>1) Check if num&lt;(INT_MAX/10) before multiplying num with 10 and check that num &lt; INT_MAX - 10 before adding s[i++]. You will need to include limits.h for this.</p>\n\n<p>2) After converting your string to an int, use <code>snprintf</code> to print your int back to a string and use <code>strcmp</code> to see if your strings are identical.</p>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 4904312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f4aa02472e031ac11f7305b4c53d340f?s=128&d=identicon&r=PG", "display_name": "Calihog", "link": "https://stackoverflow.com/users/4904312/calihog"}, "edited": false, "score": 0, "creation_date": 1461783099, "post_id": 36898389, "comment_id": 61361061, "body": "There is &quot;Manually&quot; at the topic for a reason. I don&#39;t want to use functions for this solution. Thanks anyway."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 135, "user_id": 4904312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f4aa02472e031ac11f7305b4c53d340f?s=128&d=identicon&r=PG", "display_name": "Calihog", "link": "https://stackoverflow.com/users/4904312/calihog"}, "edited": false, "score": 1, "creation_date": 1461788057, "post_id": 36898389, "comment_id": 61364155, "body": "@Calihog I&#39;m not sure why you&#39;d say that? Why would you try to reinvent what the standard already provides? Unless... Is this homework?"}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1461788307, "last_edit_date": 1461788307, "creation_date": 1461782865, "answer_id": 36898389, "question_id": 36898163, "link": "https://stackoverflow.com/questions/36898163/manually-converting-string-to-int-and-check-if-an-overflow-occured-in-c-c/36898389#36898389", "title": "Manually converting string to int and check if an overflow occured in C/C++?", "body": "<p>Your best bet is using <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow\"><code>stoi</code></a> instead of hand-crafting an inferior solution.</p>\n\n<pre><code>try {\n    i = stoi(s);\n} catch(const out_of_range&amp; /*e*/) {\n    i = numeric_limits&lt;int&gt;::max();\n}\n</code></pre>\n\n<p><a href=\"http://ideone.com/vsIsdC\" rel=\"nofollow\"><kbd>Live Example</kbd></a></p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1461785965, "last_edit_date": 1492087233, "creation_date": 1461784631, "answer_id": 36898973, "question_id": 36898163, "link": "https://stackoverflow.com/questions/36898163/manually-converting-string-to-int-and-check-if-an-overflow-occured-in-c-c/36898973#36898973", "title": "Manually converting string to int and check if an overflow occured in C/C++?", "body": "<p>To cope with <code>int</code> overflow, code must <em>prevent</em> it.<br>\nSimple test if <code>num</code> and <code>digit</code> are too big before attempting <code>num*10 + digit</code></p>\n\n<pre><code>(num &gt;= INT_MAX/10) &amp;&amp; ((num &gt; INT_MAX/10) || (digit &gt; INT_MAX%10))\n</code></pre>\n\n<p>Usage</p>\n\n<pre><code>overflow = false;\nwhile (i &lt; s.length()) {\n  int digit = s[i++] - '0';\n\n  // Will num*10 + digit overflow?\n  if ((num &gt;= INT_MAX/10) &amp;&amp; ((num &gt; INT_MAX/10) || (digit &gt; INT_MAX%10))) {\n    // or break per OP's coding goal\n    num = INT_MAX;\n    overflow = true;\n  } else {\n    num *= 10;\n    num += digit;\n  }\n}\n</code></pre>\n\n<p>OP's code also has trouble with the textual version of <code>INT_MIN</code>.</p>\n\n<p><a href=\"https://codereview.stackexchange.com/a/45912/29485\">Sample <code>my_atoi()</code></a> that correctly returns <code>[INT_MIN  ... INT_MAX]</code></p>\n"}], "owner": {"reputation": 135, "user_id": 4904312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f4aa02472e031ac11f7305b4c53d340f?s=128&d=identicon&r=PG", "display_name": "Calihog", "link": "https://stackoverflow.com/users/4904312/calihog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 36898973, "answer_count": 3, "score": 0, "last_activity_date": 1461788307, "creation_date": 1461782089, "last_edit_date": 1461784531, "question_id": 36898163, "link": "https://stackoverflow.com/questions/36898163/manually-converting-string-to-int-and-check-if-an-overflow-occured-in-c-c", "title": "Manually converting string to int and check if an overflow occured in C/C++?", "body": "<p>I have the following issue - I wrote a function that takes a string and converts it to an int, but I don't know how to check if any overflow occurs. I want to return the last possible value of the integer, before the overflow ocurred. \nFor example: if I have a string representation of \"2147483648\", I want to return 214748364 as an int, because in the next iterration an overflow will occur. Do you have any ideas how to solve this?</p>\n\n<p>My code is:</p>\n\n<pre><code>    int main () {\n    string s = \"2147483647\";\n    int num = 0, i = 0, buff = 0;\n    bool isNegative = false;\n\n    if (s[0] == '-') {\n            isNegative = true;\n            i++;\n        }\n    while (i &lt; s.length()) {\n        if (num &lt; (INT_MAX/10)) {\n            num *= 10;\n        }\n\n        if (num &lt; INT_MAX - 10)\n            num += s[i++] - '0';\n        else\n            break;\n\n    }\n\n    if (isNegative)\n        num = -num;\n\n    cout &lt;&lt; \"\\nthe number is: \" &lt;&lt; num;\n\n    getch();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glut", "freeglut", "gldrawpixels"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1461785385, "post_id": 36898134, "comment_id": 61362513, "body": "Why are you using <code>malloc()</code> in a c++ program??"}], "answers": [{"tags": [], "owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "is_accepted": false, "score": 2, "last_activity_date": 1461794400, "last_edit_date": 1461794400, "creation_date": 1461782752, "answer_id": 36898356, "question_id": 36898134, "link": "https://stackoverflow.com/questions/36898134/glutswapbuffers-access-violation-reading-location-0x0000000004c0f000/36898356#36898356", "title": "glutSwapBuffers &quot;Access violation reading location 0x0000000004C0F000&quot;", "body": "<p><code>malloc(h*w)</code> should be <code>malloc(h*w*sizeof(int))</code>, otherwise you're only allocating enough memory for a quarter of your image.</p>\n\n<p>You also seem to be leaking the entire image every single frame, which will quickly exhaust your available RAM. You need to <code>free</code> and <code>delete</code> everything you <code>malloc</code> and <code>new</code>, respectively.</p>\n\n<p>You probably also want to clear the memory you allocate for your image right away to avoid problems where only some of the pixels are set (the rest will be random values, which is likely less preferable than e.g. full transparency). You can do this with a <code>memset</code> or <code>std::fill</code> after the <code>malloc</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 62852, "user_id": 1737, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9152c282382ec3b1f0cd18dc8ba7a5ab?s=128&d=identicon&r=PG", "display_name": "Roddy", "link": "https://stackoverflow.com/users/1737/roddy"}, "is_accepted": false, "score": 3, "last_activity_date": 1461795244, "creation_date": 1461795244, "answer_id": 36901876, "question_id": 36898134, "link": "https://stackoverflow.com/questions/36898134/glutswapbuffers-access-violation-reading-location-0x0000000004c0f000/36901876#36901876", "title": "glutSwapBuffers &quot;Access violation reading location 0x0000000004C0F000&quot;", "body": "<p>Sorry, but you have LOTS wrong... :)</p>\n\n<ul>\n<li>You're using malloc instead of <code>new[]</code></li>\n<li>You never <code>free</code> or <code>delete</code> anything</li>\n<li>In most cases (apart from <code>pixels</code>) you don't need to create things on the heap anyway</li>\n<li>This <code>pixels[x + y] = rgb;</code> is obviously wrong</li>\n<li>This :   <code>char *w_ = new char; //in case of the file doesn't have a comment\n        myfile &gt;&gt; w_;\n        if (*w_ == '#')</code>\n.. absolutely does NOT do what you think it does, or what you want it to do.</li>\n</ul>\n\n<p>There's probably more. :(</p>\n"}], "owner": {"reputation": 21, "user_id": 6262720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f115cbd4cc49a6411164ea7d3c6d8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Henrique Machado", "link": "https://stackoverflow.com/users/6262720/henrique-machado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1461795244, "creation_date": 1461781998, "last_edit_date": 1461782399, "question_id": 36898134, "link": "https://stackoverflow.com/questions/36898134/glutswapbuffers-access-violation-reading-location-0x0000000004c0f000", "title": "glutSwapBuffers &quot;Access violation reading location 0x0000000004C0F000&quot;", "body": "<p>What I have to do is to display an image using a .ptm file.</p>\n\n<p>So, I open the file, read the W and H and set the RGBA to each pixel. But when I try to display I get an Access Violation error at <code>glutSwapBuffers()</code>.</p>\n\n<p>Here is the code. It's kind of a mess because I'm trying many different things to fix it but I'm starting to think that each time I create a new problem :D</p>\n\n<p>Image.h</p>\n\n<pre><code>    class Image {\npublic:\n    Image() {};\n    Image(int w, int h);\n    ~Image();\n    void setPixel(int rgb, int x, int y) {\n        pixels[x + y] = rgb;\n    }\n    int setRgb(int r, int g, int b);\n    int setRgb(int r, int g, int b, int a);\n    int getPixel(int x, int y) {\n        return pixels[x + y*width];\n    }\n    int * getPixel() { return pixels; }\n    int getWidth() { return width; }\n    int getHeight() { return height; }\nprivate:\n    int *pixels; \n    int width, height;\n};\n</code></pre>\n\n<p>Image.cpp</p>\n\n<pre><code>#include \"Image.h\"\n#include &lt;stdlib.h&gt;\n\n\nImage::Image(int w, int h)\n{\n    width = w; height = h;\n    pixels = (int*)malloc(h*w);\n}\n\n\nImage::~Image()\n{\n}\n\nint Image::setRgb(int r, int g, int b)\n{\n    int rgb;\n    rgb = (r &lt;&lt; 16) | (g &lt;&lt; 8) | b;\n    return rgb;\n}\n\nint Image::setRgb(int r, int g, int b, int a)\n{\n    int rgba;\n    rgba = (a&lt;&lt; 24) | (r &lt;&lt; 16) | (g &lt;&lt; 8) | b;\n    return rgba;\n}\n</code></pre>\n\n<p>source.cpp</p>\n\n<pre><code>#include &lt;GL\\freeglut.h&gt;\n#include &lt;GL\\GL.h&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;Windows.h&gt;\n#include \"Image.h\"\n\nusing namespace std;\n\nvoid display()\n{\n    glClear(GL_COLOR_BUFFER_BIT);\n\n    Image *img = new Image(800, 500);\n    int w, h, max; //width height MaxValue\n    char *w_ = new char; //in case of the file doesn't have a comment\n    string fileModel, comment;\n    ifstream myfile(\"dba.ptm\"); //open the file\n\n    if (myfile.is_open())\n    {\n        myfile &gt;&gt; fileModel;\n        if (fileModel == \"P7\")\n        {\n            myfile &gt;&gt; w_;\n            if (*w_ == '#')\n                getline(myfile, comment);\n            else\n                w = atoi(w_);\n            myfile &gt;&gt; h;\n\n            int a, r, g, b, rgba;\n            myfile &gt;&gt; max;\n            for (int i = 0; i &lt; w; i++)\n            {\n                for (int k = 0; k &lt; h; k++)\n                {\n                    myfile &gt;&gt; a;\n                    myfile &gt;&gt; r;\n                    myfile &gt;&gt; g;\n                    myfile &gt;&gt; b;\n                    rgba = img-&gt;setRgb(r, g, b, a);\n                    img-&gt;setPixel(rgba, i, k);\n                }\n            }\n        }\n    }\n    myfile.close();\n\n\n    glDrawPixels(img-&gt;getWidth(), img-&gt;getHeight(), GL_BGRA_EXT, GL_UNSIGNED_BYTE, img-&gt;getPixel());\n    glutSwapBuffers();\n}\n\nvoid init(void)\n{\n\n    glClearColor(0.0, 0.0, 0.0, 0.0);\n    glShadeModel(GL_FLAT);\n    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);\n    glEnable(GL_BLEND);\n    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\n\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    glOrtho(0.0, 800.0, 0.0, 500.0, -1.0, 1.0);\n}\n\nint main(int argc, char** argv)\n{\n    glutInit(&amp;argc, argv);\n    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA);\n    glutInitWindowSize(800, 500);\n    glutInitWindowPosition(100, 100);\n    glutCreateWindow(\"PTM\");\n    init();\n    glutDisplayFunc(display);\n    glutMainLoop();\n    return 0;   \n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "lambda"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1461781630, "post_id": 36897968, "comment_id": 61360098, "body": "Can you change <code>process</code>?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1461781645, "post_id": 36897968, "comment_id": 61360112, "body": "What are you trying to achieve? Simply using lambda instead of a function pointer is an XY problem. If you tell us what you really need, we can suggest a proper solution. Right now I can only lecture you on lambdas in general, but this would be reiteration of specification."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1461781804, "post_id": 36897968, "comment_id": 61360216, "body": "@SergeyA Does my edit help at all?"}], "answers": [{"comments": [{"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1461782059, "post_id": 36898136, "comment_id": 61360393, "body": "Why are you using auto everywhere?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1461782091, "post_id": 36898136, "comment_id": 61360405, "body": "<code>auto*</code> is redundant.  You can simply use <code>auto</code>."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1461782136, "post_id": 36898136, "comment_id": 61360434, "body": "What is <code>lam</code> is it a function name or a variable?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1461782140, "post_id": 36898136, "comment_id": 61360437, "body": "lambda itself has to be <code>auto</code>, lam is a <code>lambda expression</code>, convertible to function pointer. It&#39;s type is unknown. As for the arguments, I was not sure what are your original args. You can replace it with actual types. As a matter of fact, I will replace it now."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1461785526, "post_id": 36898136, "comment_id": 61362598, "body": "I get an error message when I try to implement this, please see above edit"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1461786942, "post_id": 36898136, "comment_id": 61363480, "body": "@user3728501, you need to post the full relevant code. And the compiler."}, {"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1461786986, "post_id": 36898136, "comment_id": 61363508, "body": "@SergeyA Unfortunately I can&#39;t do that."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1461787714, "post_id": 36898136, "comment_id": 61363945, "body": "@user3728501 than I can&#39;t help you, unfortuante as it is."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1461782385, "last_edit_date": 1461782385, "creation_date": 1461782001, "answer_id": 36898136, "question_id": 36897968, "link": "https://stackoverflow.com/questions/36897968/how-can-i-convert-my-conversion-function-to-a-lambda-expression/36898136#36898136", "title": "How can I convert my conversion function to a lambda expression?", "body": "<p>Non-capturing lambdas can be converted to function pointers seamlessly. And you do not seem to need captures here. Following code would work:</p>\n\n<pre><code>void my_func(double _x1_, double _y1_, double _x2_, double _y2_)\n{\n\n    auto lam = [](double* x_in, double* y_in, double* x_out, double* y_out)\n    {\n        *x_out = *x_in;\n        *y_out = *y_in;\n    };\n\n    process(lam, _x1_, _y1_, _x2_, _y2_);\n}\n</code></pre>\n"}], "owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461785657, "creation_date": 1461781482, "last_edit_date": 1461785657, "question_id": 36897968, "link": "https://stackoverflow.com/questions/36897968/how-can-i-convert-my-conversion-function-to-a-lambda-expression", "title": "How can I convert my conversion function to a lambda expression?", "body": "<p>I have a C++ code with basic conversion functions, such as the following:</p>\n\n<pre><code>void convert(double *x_out, double *y_out, double *x_in, double *y_in)\n{\n    *x_out = *x_in;\n    *y_out = *y_in;\n}\n</code></pre>\n\n<p>I then have another function later in my code which takes a function pointer to a conversion function.</p>\n\n<pre><code>void process(void (*converter)(double *x_out, double *y_out, double *x_in, double *y_in), double x1, double y1, double x2, double y2)\n{\n    (*converter)(x1, y1, x2, y2);\n    // do something\n    return something;\n}\n</code></pre>\n\n<p><code>process</code> is called elsewhere in the code.</p>\n\n<pre><code>void my_func(...args...)\n{\n    process(&amp;convert, _x1_, _y1_, _x2_, _y2_);\n}\n</code></pre>\n\n<p>I want to use a lambda function instead of the function pointer approach.</p>\n\n<p>I can't quite get my head around lambdas.</p>\n\n<p>My best guess so far from reading this <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/lambda</a> this <a href=\"http://www.cprogramming.com/c++11/c++11-lambda-closures.html\" rel=\"nofollow\">http://www.cprogramming.com/c++11/c++11-lambda-closures.html</a> and this <a href=\"https://msdn.microsoft.com/en-gb/library/dd293608.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-gb/library/dd293608.aspx</a> is:</p>\n\n<pre><code>void my_func(double _x1_, double _y1_, double _x2_, double _y2_)\n{\n\n    [&amp;_x1_, &amp;_x2_, &amp;_y1_, &amp;_y2_] -&gt; void\n    {\n        double x_in = _x1_;\n        double y_in = _y1_;\n        double x_out = x_in;\n        double y_out = y_in;\n\n        // return\n        _x2_ = x_out;\n        _y2_ = y_out;    \n    }\n\n    process(what goes here?, _x1_, _y1_, _x2_, _y2_);\n\n}\n</code></pre>\n\n<p>I'm fairly sure the declaration of the lambda goes inside the function <code>my_func</code> itself, so that it can capture the local arguments/variables.</p>\n\n<p>But I'm not sure how to call it from <code>process()</code>?</p>\n\n<p>Edits: To answer the questions below,</p>\n\n<p>There is a function, <code>process</code> which acts on pairs of data, x and y, but before process operates on this data, it must be converted using a translation function. The example I have given as a translation is trivially, x->x y->y, but a more interesting one might be x->2x, y->0.5y.</p>\n\n<p>Error Message:</p>\n\n<pre><code>no known conversion for argument 1 from\n\u2018namespace::classname::my_func(uint32_t, uint32_t, uint32_t,\nuint32_t)::&lt;lambda(int32_t*, const int32_t*, int32_t*, const\nint32_t*)&gt;\u2019 to \u2018void (namespace::classname::*)(int32_t*, const\nint32_t*, int32_t*, const int32_t*) {aka void\n(namespace::classname::*)(int*, const int*, int*, const int*)}\u2019\n</code></pre>\n\n<p>Arguments in examples should have been <code>int32_t</code> rather than double, but this is clearly not of the upmost importance.</p>\n"}, {"tags": ["c++", "visual-studio", "debugging"], "comments": [{"owner": {"reputation": 6063, "user_id": 3225495, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/57OBG.jpg?s=128&g=1", "display_name": "BJ Myers", "link": "https://stackoverflow.com/users/3225495/bj-myers"}, "edited": false, "score": 0, "creation_date": 1461782539, "post_id": 36897854, "comment_id": 61360684, "body": "Visual Studio (especially 2015) has a ton of profiling tools, so if your goal is really to do profiling you would be better off using those."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1461783491, "post_id": 36897854, "comment_id": 61361298, "body": "It is a supported debugging scenario, you have to run the app on another machine and use the remote debugger."}, {"owner": {"reputation": 4893, "user_id": 194709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTCwx.png?s=128&g=1", "display_name": "Chris O", "link": "https://stackoverflow.com/users/194709/chris-o"}, "edited": false, "score": 0, "creation_date": 1461809413, "post_id": 36897854, "comment_id": 61371827, "body": "You can edit your breakpoint&#39;s properties, perhaps you can configure the breakpoint to do what you want to achieve."}], "answers": [{"tags": [], "owner": {"reputation": 8952, "user_id": 1007353, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c3db4337a39ff8bdb97316015c074493?s=128&d=identicon&r=PG", "display_name": "JDiMatteo", "link": "https://stackoverflow.com/users/1007353/jdimatteo"}, "is_accepted": true, "score": -1, "last_activity_date": 1461794648, "last_edit_date": 1461794648, "creation_date": 1461790316, "answer_id": 36900638, "question_id": 36897854, "link": "https://stackoverflow.com/questions/36897854/how-to-get-visual-studio-debugger-to-break-without-focus/36900638#36900638", "title": "How to get Visual Studio debugger to break without focus", "body": "<p>There are two ways to break without changing mouse focus to Visual Studio:</p>\n\n<ol>\n<li><p>Install <a href=\"https://msdn.microsoft.com/en-us/library/y7f5zaaa.aspx\" rel=\"nofollow\">Remote Tools and debug from another machine</a>, <em>OR</em></p></li>\n<li><p>Add a thread with a timer and set a break point there, e.g. add this somewhere to break every 5 seconds:</p>\n\n<pre><code>static bool debug_timer_started = false;\nif ( !debug_timer_started )\n{\n  debug_timer_started = true;\n  std::thread([]\n  {\n    static int seconds = 5;\n    static bool keep_going = true;\n    while ( keep_going )\n    {\n      /* set break point on this line: */ std::this_thread::sleep_for(std::chrono::seconds(seconds));\n    }\n  }).detach();\n}\n</code></pre>\n\n<p>You will need these headers:</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;chrono&gt;\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 8952, "user_id": 1007353, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c3db4337a39ff8bdb97316015c074493?s=128&d=identicon&r=PG", "display_name": "JDiMatteo", "link": "https://stackoverflow.com/users/1007353/jdimatteo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 36900638, "answer_count": 1, "score": 1, "last_activity_date": 1461794648, "creation_date": 1461781113, "last_edit_date": 1495542772, "question_id": 36897854, "link": "https://stackoverflow.com/questions/36897854/how-to-get-visual-studio-debugger-to-break-without-focus", "title": "How to get Visual Studio debugger to break without focus", "body": "<p>I am trying to break while my (native C++) application has mouse focus, and by switching to the Visual Studio application to Ctrl-Alt-Break or Debug > Break All, my application is no longer doing the thing I am trying to break on.</p>\n\n<p>Is there a way to get Visual Studio to break after 5 seconds has elapsed for example?  Or is there some kind of debugging api that I can write a script to trigger a Break All without me switching focus to the Visual Studio application?</p>\n\n<p>Being able to break without focus could help with <a href=\"https://stackoverflow.com/a/378024/1007353\">poor man's profiling</a> and better understanding unfamiliar code related to focus.</p>\n"}, {"tags": ["c++", "string", "unicode", "utf-8"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user933161"}, "edited": false, "score": 3, "creation_date": 1461781124, "post_id": 36897781, "comment_id": 61359774, "body": "ICU4C <a href=\"http://icu-project.org/apiref/icu4c/\" rel=\"nofollow noreferrer\">icu-project.org/apiref/icu4c</a>?"}], "answers": [{"comments": [{"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "edited": false, "score": 0, "creation_date": 1461782209, "post_id": 36898054, "comment_id": 61360483, "body": "Thanks for the detailed answer. In response to some of your comments:  1. The reason the usage of <code>toupper</code> was confusing to me was that I read that in general case mapping a single byte can be convert to a multi-byte character. So a simple iterator wouldn&#39;t work if it was transforming characters in-place.  2. Perhaps my notation for the byte sequence on the <code>string</code> was confusing. I meant to say that it was two bytes in a row: 0xc3, 0xb3. They&#39;re each valid unsigned chars.  Is it safe to say that the only way this can be accomplished is to use <code>wstring</code> types?"}, {"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "edited": false, "score": 0, "creation_date": 1461782370, "post_id": 36898054, "comment_id": 61360583, "body": "Also, is the UTF-8 locale guaranteed to be available? I&#39;m running this code on an iPhone and I get a NULL return when I try to <code>setlocale</code> to UTF-8."}, {"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "edited": false, "score": 0, "creation_date": 1461782984, "post_id": 36898054, "comment_id": 61360991, "body": "And if my source for the text is UTF-8 encoded <code>string</code> (not <code>wstring</code>), is it trivial to convert from <code>string</code> to <code>wstring</code>? I think that process would also require knowledge of the UTF-8 encoding."}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 3, "creation_date": 1461788629, "post_id": 36898054, "comment_id": 61364501, "body": "This doesn&#39;t really answer the question as it doesn&#39;t actually convert a <code>std::string</code>contaning utf8."}, {"owner": {"reputation": 20069, "user_id": 596219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a385671d1a06953de272d02e8095dd?s=128&d=identicon&r=PG", "display_name": "\u4e00\u4e8c\u4e09", "link": "https://stackoverflow.com/users/596219/%e4%b8%80%e4%ba%8c%e4%b8%89"}, "edited": false, "score": 2, "creation_date": 1461812304, "post_id": 36898054, "comment_id": 61372593, "body": "Nothing in the C++ standard requires <code>wchar_t</code> to support UTF-32 code units (or Unicode at all)."}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1573089729, "post_id": 36898054, "comment_id": 103771135, "body": "There are two topics, 1.) functions handling chars of two or more bytes, 2.) handling the lwr or upr functionality. If one is using only US ASCII characters only the first, this answer is needed. Using other (extended) characters of lwr and upr case versions my answers are needed to be considered for it. The C-library versions I tried only converts US ASCII to lwr or upr case."}], "tags": [], "owner": {"reputation": 198, "user_id": 6262916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e70e07141e8457023b7591d94631bb?s=128&d=identicon&r=PG&f=1", "display_name": "user6262916", "link": "https://stackoverflow.com/users/6262916/user6262916"}, "is_accepted": false, "score": 3, "last_activity_date": 1461781767, "creation_date": 1461781767, "answer_id": 36898054, "question_id": 36897781, "link": "https://stackoverflow.com/questions/36897781/how-to-uppercase-lowercase-utf-8-characters-in-c/36898054#36898054", "title": "How to uppercase/lowercase UTF-8 characters in C++?", "body": "<blockquote>\n  <p>There are some examples on StackOverflow but they use wide character strings, and other answers say you shouldn't be using wide character strings for UTF-8.</p>\n</blockquote>\n\n<p>The article within (utf8everywhere) and answers apply to Windows. The C++ standard requires that <code>wchar_t</code> be wide enough to accomodate all supported code units (32-bits wide) but works perfectly fine with UTF-8. On Windows, <code>wchar_t</code> is UTF-16 but if you're on Windows you have more problems than just that if we're going to be honest (namely their horrifying API).</p>\n\n<blockquote>\n  <p>It also appears that this problem can be very \"tricky\" in that the output might be dependent upon the user's locale.</p>\n</blockquote>\n\n<p>Not really. Set the locale inside the code. Some programs like <code>sort</code> don't work properly if you don't set the locale inside the shell for example, so the onus on the user.</p>\n\n<blockquote>\n  <p>I was expecting to just use something like std::toupper(), but the usage is really unclear to me because it seems like I'm not just converting one character at a time but an entire string.</p>\n</blockquote>\n\n<p>The code example uses iterators. If you don't want to convert every character, don't.</p>\n\n<blockquote>\n  <p>Also, this Ideone example I put together seems to show that toupper() of 0xc3b3 is just 0xc3b3, which is an unexpected result. Calling setlocale to either UTF-8 or ISO8859-1 doesn't appear to change the outcome.</p>\n</blockquote>\n\n<p>You  have undefined behavior. The range of <code>unsigned char</code> is 255. <code>0xc3b3</code> way surpasses that.</p>\n\n<blockquote>\n  <p>I'd love some guidance if you could shed some light on either what I'm doing wrong or why my question/premise is faulty!</p>\n</blockquote>\n\n<p>This example works perfectly fine:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;locale&gt;\n\nint main()\n{\n    std::setlocale(LC_CTYPE, \"en_US.UTF-8\"); // the locale will be the UTF-8 enabled English\n\n    std::wstring str = L\"\u00f3\u00f3\";\n\n    std::wcout &lt;&lt; str &lt;&lt; std::endl;\n\n    for (std::wstring::iterator it = str.begin(); it != str.end(); ++it)\n        *it = towupper(*it);\n\n    std::wcout &lt;&lt; str &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Outputs: <code>\u00d3\u00d3</code></p>\n"}, {"comments": [{"owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "edited": false, "score": 0, "creation_date": 1461783621, "post_id": 36898621, "comment_id": 61361388, "body": "Can you think of an instance in which the <code>wstring</code> approach mentioned in the other answer wouldn&#39;t work?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "edited": false, "score": 3, "creation_date": 1461783728, "post_id": 36898621, "comment_id": 61361453, "body": "@aardvarkk: If the implementation doesn&#39;t implement <code>en_US.UTF-8</code>. Also if the implementation doesn&#39;t use a Unicode format for its <code>wchar_t</code>. Nothing in the standard <i>guarantees</i> either of these. Wide-character strings are just as implementation-defined as narrow-character strings. Also, the other answer didn&#39;t use UTF-8, which was a part of your requirement."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 5, "last_activity_date": 1461784498, "last_edit_date": 1461784498, "creation_date": 1461783486, "answer_id": 36898621, "question_id": 36897781, "link": "https://stackoverflow.com/questions/36897781/how-to-uppercase-lowercase-utf-8-characters-in-c/36898621#36898621", "title": "How to uppercase/lowercase UTF-8 characters in C++?", "body": "<p>There is no standard way to do Unicode case conversion in C++. There are ways that work on <em>some</em> C++ implementations, but the standard doesn't require them to.</p>\n\n<p>If you want guaranteed Unicode case conversion, you will need to use a library like <a href=\"http://icu-project.org/apiref/icu4c/\" rel=\"nofollow\">ICU</a> or Boost.Locale (aka: ICU with a more C++-like interface).</p>\n"}, {"tags": [], "owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "is_accepted": false, "score": 3, "last_activity_date": 1545786462, "last_edit_date": 1545786462, "creation_date": 1545642201, "answer_id": 53911303, "question_id": 36897781, "link": "https://stackoverflow.com/questions/36897781/how-to-uppercase-lowercase-utf-8-characters-in-c/53911303#53911303", "title": "How to uppercase/lowercase UTF-8 characters in C++?", "body": "<p>These case insensitive features are definitely needed in search facilities. </p>\n\n<p><em>Well, I have the same need as described above and UTF8 is pretty smooth in most ways, but the upper and lower case situations is not that great. Looks like it fall off the todo list when done? Because it has been in the past one of the major topics on the todo list in such cases. I have been patching IBM keyboard driver 1984 before IBM shipped, but copies were available. Also patched Displaywrite 1 and 3 (PC-DOS wordprocessor) before IBM wanted to ship in Europe. Done an awful lot of PC-DOS (CP850) and CP1252 (Windows) to and from national EBCDIC Code pages in IBM 3270 mainframe terminal systems. Them all had this case sensitivity topic on the todo list. In all national ASCII versions and the CP1252 Windows tables had a shift between the 0x40-0x5F and 0x60-0x7F to flip between lower and higher cases (but not PCDOS CP850), by 0x20.</em>  </p>\n\n<p><strong><em>What to do about it?</em></strong></p>\n\n<p>The tolower() and toupper() will not work in UTF8 multi character strings, outside US-ASCII. They are only working with one byte. But a string solution would work, and there are solutions for about everything else. </p>\n\n<p><strong>Western Europeans are lucky</strong></p>\n\n<p>Well the UTF8 put the CP1252 (Windows 8bit/Latin1) as the first additional table, \nLatin-1 Supplement (Unicode block), as is. This means that it is possible to shift the Letters (C3XX) like regular US ASCII. Code sample below. </p>\n\n<p><strong>Greeks, Russians, Icelanders and Eastern Europeans are not that lucky</strong></p>\n\n<p>For the Icelanders the \u0110/\u0111 - D with stroke (same as the th sound of the word the) is just punched out from CP1252. </p>\n\n<p>The Greeks, Russians and Eastern Europeans ISO8-charsets (CP1253, CP1251 and CP1257) could have been used (as the latin CP1252 was directly used). Then just shifting would also have worked. But instead someone just filled the table pretty randomly (like in the PC-DOC 8-bit ASCII). </p>\n\n<p>There is only one working solution, the same as for PC_DOS ASCII, make translation-tables. I will do it for next X-mas (when I need it bad) but I hint how to do it if someone else is in a hurry. </p>\n\n<p><strong>How to do solutions for the Greeks, Russians, Icelanders and Eastern Europeans</strong></p>\n\n<p>Make different tables relating to the different first byte of the UTF8-table for Eastern Europe, Greek and Cyrillic in the programming code. Fill the tables with the second byte of the letters in its UTF8 second byte positions and exchange the uppercase letters with the matching second byte of the lower cases, and make another one doing the other way around. </p>\n\n<p>Then identify what first byte that relates to each table. That way the programming code can select the right table and just read the right position and get the upper or lower case characters needed. Then modify the letter case functions below (those I have made for Latin1), to use tables instaed of shifting 0x20, for some first UTF8-characters, where tables must be used. It will work smooth and new computers have no problem with memory and power. </p>\n\n<p><strong>UTF8 letter case related functions Latin1 samples</strong></p>\n\n<p>This is working I believe, tried it yet shortly. It only works in Latin-1, and USACII parts of the UTF8. </p>\n\n<pre><code>unsigned char *StrToLwrUft8Latin1(unsigned char *pString)\n{\n    char cExtChar = 0;\n    if (pString &amp;&amp; *pString) {\n        unsigned char *p = pString;\n        while (*p) {\n            if (((cExtChar &amp;&amp; ((*p &gt;= 0x80) &amp;&amp; (*p &lt;= 0xbf)))\n                || ((!cExtChar) &amp;&amp; (*p &lt;= 0x7f)))\n                &amp;&amp; ((((*p &amp; 0x7f) + cExtChar) &gt;= 0x40)\n                    &amp;&amp; (((*p &amp; 0x7f) + cExtChar) &lt;= 0x5f)))\n                *p += 0x20;\n            if (cExtChar)\n                cExtChar = 0;\n            else if (*p == 0xc3)\n                cExtChar = 0x40;\n            p++;\n        }\n    }\n    return pString;\n}\nunsigned char *StrToUprUft8Latin1(unsigned char *pString)\n{\n    char cExtChar = 0;\n    if (pString &amp;&amp; *pString) {\n        unsigned char *p = pString;\n        while (*p) {\n            if (((cExtChar &amp;&amp; ((*p &gt;= 0x80) &amp;&amp; (*p &lt;= 0xbf)))\n                || ((!cExtChar) &amp;&amp; (*p &lt;= 0x7f)))\n                &amp;&amp; ((((*p &amp; 0x7f) + cExtChar) &gt;= 0x60)\n                    &amp;&amp; (((*p &amp; 0x7f) + cExtChar) &lt;= 0x7e)))\n                *p -= 0x20;\n            if (cExtChar)\n                cExtChar = 0;\n            else if (*p == 0xc3)\n                cExtChar = 0x40;\n            p++;\n        }\n    }\n    return pString;\n}\nint StrnCiCmpLatin1(const char *s1, const char *s2, size_t ztCount)\n{\n    unsigned char cExtChar = 0;\n    if (s1 &amp;&amp; *s1 &amp;&amp; s2 &amp;&amp; *s2) {\n        for (; ztCount--; s1++, s2++) {\n            int iDiff = tolower((unsigned char)(*s1 &amp; 0x7f)\n                + cExtChar) - tolower((unsigned char)(*s2 &amp; 0x7f) + cExtChar);\n            if (iDiff != 0 || !*s1 || !*s2)\n                return iDiff;\n            if (cExtChar)\n                cExtChar = 0;\n            else if (((unsigned char )*s2) == ((unsigned char)0xc3))\n                cExtChar = 0x40;\n        }\n    }\n    return 0;\n}\nint StrCiCmpLatin1(const char *s1, const char *s2)\n{\n    return StrnCiCmpLatin1(s1, s2, (size_t)(-1));\n}\nchar *StrCiStrLatin1(const char *s1, const char *s2)\n{\n    if (s1 &amp;&amp; *s1 &amp;&amp; s2 &amp;&amp; *s2) {\n        char *p = (char *)s1;\n        size_t len = strlen(s2);\n        while (*p) {\n            if (StrnCiCmpLatin1(p, s2, len) == 0)\n                return p;\n            p++;\n        }\n    }\n    return (0);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8734, "user_id": 133183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2c77da3d1d53514294331467d2589139?s=128&d=identicon&r=PG", "display_name": "Cygon", "link": "https://stackoverflow.com/users/133183/cygon"}, "edited": false, "score": 0, "creation_date": 1572977106, "post_id": 53920363, "comment_id": 103727231, "body": "When I compile this with GCC, I get two warnings about <code>switch</code> fall-throughs (they&#39;re where the nested switch statements are) -- are they intentional?"}, {"owner": {"reputation": 8734, "user_id": 133183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2c77da3d1d53514294331467d2589139?s=128&d=identicon&r=PG", "display_name": "Cygon", "link": "https://stackoverflow.com/users/133183/cygon"}, "edited": false, "score": 0, "creation_date": 1572977226, "post_id": 53920363, "comment_id": 103727277, "body": "Second observation: I tried this code snippet with the string <code>u8&quot;&#194;&#202;&#206;&#212;&#219; &#193;&#201;&#205;&#211;&#218; &#192;&#200;&#204;&#210;&#217; A&#214;U&quot;</code> but the result was <code>&#194;&#202;&#206;&#212;&#219; &#193;&#201;&#205;&#211;&#218; &#192;&#200;&#204;&#210;&#217; a&#214;U</code> (16 characters are still uppercase, two are wrong)."}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "reply_to_user": {"reputation": 8734, "user_id": 133183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2c77da3d1d53514294331467d2589139?s=128&d=identicon&r=PG", "display_name": "Cygon", "link": "https://stackoverflow.com/users/133183/cygon"}, "edited": false, "score": 0, "creation_date": 1573086921, "post_id": 53920363, "comment_id": 103770570, "body": "Do you have the hex values of the string? It could be unauthorized other character sets with extended Latin characters within UTF8  that is not documented (in the UTF8 documentation I had) and as such this routine could not identify them. Not having the hex code I can&#39;t tell.  So if I get the hex code I will be able to tell, Could be bugs in the code?"}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "reply_to_user": {"reputation": 8734, "user_id": 133183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2c77da3d1d53514294331467d2589139?s=128&d=identicon&r=PG", "display_name": "Cygon", "link": "https://stackoverflow.com/users/133183/cygon"}, "edited": false, "score": 0, "creation_date": 1573088255, "post_id": 53920363, "comment_id": 103770857, "body": "Thanks for the correction info, two breaks were missing at 0xc6 and 0xcd and I corrected the code. Nested? Mean stacked switch statements?"}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "reply_to_user": {"reputation": 8734, "user_id": 133183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2c77da3d1d53514294331467d2589139?s=128&d=identicon&r=PG", "display_name": "Cygon", "link": "https://stackoverflow.com/users/133183/cygon"}, "edited": false, "score": 0, "creation_date": 1573089023, "post_id": 53920363, "comment_id": 103771008, "body": "Basically I wanted to show how to do this. And to me (now) lwr is enough for comparing strings. It could be extended for upr, if someone needs upr text. But that is the same work, just reverse and a job to do. The basic job is reading the UTF8 specification of all character sets and makes the lists. I needed comparing, lwr is enough, and thought it useful for others here. Most developers need not more than the other simplified version, just handle extended Latin."}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "reply_to_user": {"reputation": 8734, "user_id": 133183, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2c77da3d1d53514294331467d2589139?s=128&d=identicon&r=PG", "display_name": "Cygon", "link": "https://stackoverflow.com/users/133183/cygon"}, "edited": false, "score": 1, "creation_date": 1573089047, "post_id": 53920363, "comment_id": 103771011, "body": "I am not part of the standard committee of the C-libraries (that about all programming language libraries are based on). But I think these lists upr and lwr UTF8 conversion should be included in C-library functions, in the future because of the wide use of UTF8. But that is just my opinion, hope they consider including it."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1613821732, "post_id": 53920363, "comment_id": 117197843, "body": "Are there still plans to make a StrToUppExt function?"}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1613837224, "post_id": 53920363, "comment_id": 117202010, "body": "My experience is that standard committees are not responding on questions in media. To find out you need to find someone that is a committee member and directly communicate.  My experience is that what\u2019s not there isn&#39;t and in C-programming you always need to make your own function library to fill your needs. Being happy what\u2019s in the standard libs, far better than nothing. The function for Lwr I provided was due to my need of it (for comparing strings) I had to do it myself, and here I share it with others needing it. I have no need for the Upr (yet) and have other tasks to do."}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1613837290, "post_id": 53920363, "comment_id": 117202037, "body": "I suggest you read the Lwr and make an Upr with the same logic and share it with us. Don&#39;t be shy if you publish something with a bug, there will be some trying your stuff for their own needs and check it does it right, if not report the issue. By this we get flawless additions to the ANSI C libs. That is the meaning and benefit with the Stackoverflow, helping each other, take and give."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1613844533, "post_id": 53920363, "comment_id": 117204183, "body": "I agree with your 2 comments. I looked at the Lwr routine for my first usage and does an easy job (compared to the ICU library, that does not yet work fore me). When compiling the Lwr function I got the message: &quot;warning: suggest parentheses around \u2018&amp;&amp;\u2019 within \u2018||\u2019&quot; so should: case 0x83: // Georgian if ((*p &gt;= 0x80) &amp;&amp; ((*p &lt;= 0x85) || (*p == 0x87)) || (*p == 0x8d)) (*p) += 0x30;  not be formulated as: case 0x83: // Georgian if ((*p &gt;= 0x80) &amp;&amp; (*p &lt;= 0x85)) || (*p == 0x87) || (*p == 0x8d)) (*p) += 0x30; (when responding please use @albert as I&#39;m not the first responding person)"}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1613869776, "post_id": 53920363, "comment_id": 117209716, "body": "If you only need one function many commercial libs are over-intelligent and deliver more than asked for, easier to make your own function for the thing you need. Almost every C and C++ programmer has a C and a H-file with their own standard stuff solutions like this. So yes, good idea to make your own function and if you present it here we check it for bugs. Thing is the lwr function set the logic that just have to be reversed, next character has to be previous etc. It is like 2h editing a table, when done it works. If you only need it for Latin try the next answer simpler solution for Upr."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1613929148, "post_id": 53920363, "comment_id": 117221708, "body": "For just Latin it is indeed easy, but I need it for all other as well like Cyrillic, Greek, ... Any comment on my sugested fix? (though the <code>if ((</code> should be <code>if (((*p &gt;= 0x80) &amp;&amp; (*p &lt;= 0x85)) || (*p == 0x87) || (*p == 0x8d)) (*p) += 0x30;</code>"}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1613938935, "post_id": 53920363, "comment_id": 117224495, "body": "Well to do the Upr one need to find the tables and compare the characters, it takes time. Thing is the code above here in this answer is not that simple as you suggest because different tables have taken the Upr/lwr shift differently serious. So for US ascii and Latin 1 it is imply  if ((*p &gt;= 0x41) &amp;&amp; (*p &lt;= 0x5a)) {(*p) += 0x20;} but when it comes to Latin extended you need to handle specific characters and the next is lwr, the previous upr. US and Latin1 is simple (my answer a year before) and this complete answer is longer. If you need Greek, Cyrillic etc as you must make a long version."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1614168452, "post_id": 53920363, "comment_id": 117301987, "body": "Very impressing though it looks like it is not 100% complete (e.g missing: &#39;ADLAM CAPITAL LETTER SHA&#39; 0xF0 0x9E 0xA4 0xA1). What source did you use to compose your table?"}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1614171979, "post_id": 53920363, "comment_id": 117303535, "body": "I will update the function with Adlam tonight (CET) and I use the UTF8 tables I can get over the web. (There are different updates and some are useable and some are incomplete. We need to update this funktion in the future when other alphabets are supported. Well, the topic has to be updated is supported in Win10 from May 2019 and I published the solution in dec 2018 and my Win10 did not support Adlam <a href=\"https://en.wikipedia.org/wiki/Adlam_script\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Adlam_script</a>"}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1614188437, "post_id": 53920363, "comment_id": 117311797, "body": "@JanBergstr&#246;m thanks. I think the good source is <a href=\"https://www.unicode.org/Public/UCD/latest/ucd/CaseFolding.txt\" rel=\"nofollow noreferrer\">unicode.org/Public/UCD/latest/ucd/CaseFolding.txt</a> lease use <code>@albert</code> so I get notified when you add a comment."}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1614300979, "post_id": 53920363, "comment_id": 117351074, "body": "@albert Adlam support of Lwr and cmp done."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1614328317, "post_id": 53920363, "comment_id": 117357193, "body": "Thanks a lot, not only adding Adlam but also the upper case function, impressive."}, {"owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "edited": false, "score": 0, "creation_date": 1614354119, "post_id": 53920363, "comment_id": 117368226, "body": "Please test it, and report any bugs. I have only reedit a copy of the Lwr function reversing the actions. I have not tested it, have no time and no need myself for it right now. When I did Adlam I had to check how it works in anyway and thought I could do the editing, because the function was demanded. I like to have it tested if I need it in the future."}], "tags": [], "owner": {"reputation": 548, "user_id": 5293554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-qCDOUHHK7Zo/AAAAAAAAAAI/AAAAAAAAAF8/n8wutrasmnE/photo.jpg?sz=128", "display_name": "Jan Bergstr&#246;m", "link": "https://stackoverflow.com/users/5293554/jan-bergstr%c3%b6m"}, "is_accepted": false, "score": 3, "last_activity_date": 1614305869, "last_edit_date": 1614305869, "creation_date": 1545723874, "answer_id": 53920363, "question_id": 36897781, "link": "https://stackoverflow.com/questions/36897781/how-to-uppercase-lowercase-utf-8-characters-in-c/53920363#53920363", "title": "How to uppercase/lowercase UTF-8 characters in C++?", "body": "<p>This function covering the case sensitive character sets in the UTF8 i found (might be some bugs in the matching, but I think I got it right).</p>\n<p>Well, this is shorter than a table solution, and cover it all?</p>\n<p>Could likely be written more elegant, but show the picture. The cmp function must copy the strings for the operation, and that might slow huge strings and eat memory. But we are not 5 persons sharing a PDP11 with 64KB anymore, like in the past?</p>\n<p>This is something I would like to find in a place like this. (The upper case version is not needed for case insensitive cmp-cases, and might be added later.)</p>\n<pre><code>unsigned char *StrToLwrExt(unsigned char *pString)\n{\n    if (pString &amp;&amp; *pString) {\n        unsigned char *p = pString;\n        unsigned char *pExtChar = 0;\n        while (*p) {\n            if ((*p &gt;= 0x41) &amp;&amp; (*p &lt;= 0x5a)) // US ASCII\n                (*p) += 0x20;\n            else if (*p &gt; 0xc0) {\n                pExtChar = p;\n                p++;\n                switch (*pExtChar) {\n                case 0xc3: // Latin 1\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0x9e)\n                        &amp;&amp; (*p != 0x97))\n                        (*p) += 0x20; // US ASCII shift\n                    break;\n                case 0xc4: // Latin Exteneded\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0xb7)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)++; // Next char is lwr\n                    else if ((*p &gt;= 0xb9)\n                        &amp;&amp; (*p &lt;= 0xbe)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0xbf) {\n                        *pExtChar = 0xc5;\n                        (*p) = 0x80;\n                    }\n                    break;\n                case 0xc5: // Latin Exteneded\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0x88)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)++; // Next char is lwr\n                    else if ((*p &gt;= 0x8a)\n                        &amp;&amp; (*p &lt;= 0xb7)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)++; // Next char is lwr\n                    else if ((*p &gt;= 0xb9)\n                        &amp;&amp; (*p &lt;= 0xbe)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)++; // Next char is lwr\n                    break;\n                case 0xc6: // Latin Exteneded\n                    switch (*p) {\n                    case 0x82:\n                    case 0x84:\n                    case 0x87:\n                    case 0x8b:\n                    case 0x91:\n                    case 0x98:\n                    case 0xa0:\n                    case 0xa2:\n                    case 0xa4:\n                    case 0xa7:\n                    case 0xac:\n                    case 0xaf:\n                    case 0xb3:\n                    case 0xb5:\n                    case 0xb8:\n                    case 0xbc:\n                        (*p)++; // Next char is lwr\n                        break;\n                    default:\n                        break;\n                    }\n                    break;\n                case 0xc7: // Latin Exteneded\n                    if (*p == 0x84)\n                        (*p) = 0x86;\n                    else if (*p == 0x85)\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0x87)\n                        (*p) = 0x89;\n                    else if (*p == 0x88)\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0x8a)\n                        (*p) = 0x8c;\n                    else if (*p == 0x8b)\n                        (*p)++; // Next char is lwr\n                    else if ((*p &gt;= 0x8d)\n                        &amp;&amp; (*p &lt;= 0x9c)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)++; // Next char is lwr\n                    else if ((*p &gt;= 0x9e)\n                        &amp;&amp; (*p &lt;= 0xaf)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0xb1)\n                        (*p) = 0xb3;\n                    else if (*p == 0xb2)\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0xb4)\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0xb8)\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0xba)\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0xbc)\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0xbe)\n                        (*p)++; // Next char is lwr\n                    break;\n                case 0xc8: // Latin Exteneded\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0x9f)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)++; // Next char is lwr\n                    else if ((*p &gt;= 0xa2)\n                        &amp;&amp; (*p &lt;= 0xb3)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0xbb)\n                        (*p)++; // Next char is lwr\n                    break;\n                case 0xcd: // Greek &amp; Coptic\n                    switch (*p) {\n                    case 0xb0:\n                    case 0xb2:\n                    case 0xb6:\n                        (*p)++; // Next char is lwr\n                        break;\n                    default:\n                        if (*p == 0xbf) {\n                            *pExtChar = 0xcf;\n                            (*p) = 0xb3;\n                        }\n                        break;\n                    }\n                    break;\n                case 0xce: // Greek &amp; Coptic\n                    if (*p == 0x86)\n                        (*p) = 0xac;\n                    else if (*p == 0x88)\n                        (*p) = 0xad;\n                    else if (*p == 0x89)\n                        (*p) = 0xae;\n                    else if (*p == 0x8a)\n                        (*p) = 0xaf;\n                    else if (*p == 0x8c) {\n                        *pExtChar = 0xcf;\n                        (*p) = 0x8c;\n                    }\n                    else if (*p == 0x8e) {\n                        *pExtChar = 0xcf;\n                        (*p) = 0x8d;\n                    }\n                    else if (*p == 0x8f) {\n                        *pExtChar = 0xcf;\n                        (*p) = 0x8e;\n                    }\n                    else if ((*p &gt;= 0x91)\n                        &amp;&amp; (*p &lt;= 0x9f))\n                        (*p) += 0x20; // US ASCII shift\n                    else if ((*p &gt;= 0xa0)\n                        &amp;&amp; (*p &lt;= 0xab)\n                        &amp;&amp; (*p != 0xa2)) {\n                        *pExtChar = 0xcf;\n                        (*p) -= 0x20;\n                    }\n                    break;\n                case 0xcf: // Greek &amp; Coptic\n                    if (*p == 0x8f)\n                        (*p) = 0xb4;\n                    else if (*p == 0x91)\n                        (*p)++; // Next char is lwr\n                    else if ((*p &gt;= 0x98)\n                        &amp;&amp; (*p &lt;= 0xaf)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0xb4)\n                        (*p) = 0x91;\n                    else if (*p == 0xb7)\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0xb9)\n                        (*p) = 0xb2;\n                    else if (*p == 0xbb)\n                        (*p)++; // Next char is lwr\n                    else if (*p == 0xbd) {\n                        *pExtChar = 0xcd;\n                        (*p) = 0xbb;\n                    }\n                    else if (*p == 0xbe) {\n                        *pExtChar = 0xcd;\n                        (*p) = 0xbc;\n                    }\n                    else if (*p == 0xbf) {\n                        *pExtChar = 0xcd;\n                        (*p) = 0xbd;\n                    }\n\n                    break;\n                case 0xd0: // Cyrillic\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0x8f)) {\n                        *pExtChar = 0xd1;\n                        (*p) += 0x10;\n                    }\n                    else if ((*p &gt;= 0x90)\n                        &amp;&amp; (*p &lt;= 0x9f))\n                        (*p) += 0x20; // US ASCII shift\n                    else if ((*p &gt;= 0xa0)\n                        &amp;&amp; (*p &lt;= 0xaf)) {\n                        *pExtChar = 0xd1;\n                        (*p) -= 0x20;\n                    }\n                    break;\n                case 0xd1: // Cyrillic supplement\n                    if ((*p &gt;= 0xa0)\n                        &amp;&amp; (*p &lt;= 0xbf)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)++; // Next char is lwr\n                    break;\n                case 0xd2: // Cyrillic supplement\n                    if (*p == 0x80)\n                        (*p)++; // Next char is lwr\n                    else if ((*p &gt;= 0x8a)\n                        &amp;&amp; (*p &lt;= 0xbf)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)++; // Next char is lwr\n                    break;\n                case 0xd3: // Cyrillic supplement\n                    if ((*p &gt;= 0x81)\n                        &amp;&amp; (*p &lt;= 0x8e)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)++; // Next char is lwr\n                    else if ((*p &gt;= 0x90)\n                        &amp;&amp; (*p &lt;= 0xbf)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)++; // Next char is lwr\n                    break;\n                case 0xd4: // Cyrillic supplement &amp; Armenian\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0xaf)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)++; // Next char is lwr\n                    else if ((*p &gt;= 0xb1)\n                        &amp;&amp; (*p &lt;= 0xbf)) {\n                        *pExtChar = 0xd5;\n                        (*p) -= 0x10;\n                    }\n                    break;\n                case 0xd5: // Armenian\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0x96)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)++; // Next char is lwr\n                    break;\n                case 0xe1: // Three byte code\n                    pExtChar = p;\n                    p++;\n                    switch (*pExtChar) {\n                    case 0x82: // Georgian\n                        if ((*p &gt;= 0xa0)\n                            &amp;&amp; (*p &lt;= 0xbf)) {\n                            *pExtChar = 0x83;\n                            (*p) -= 0x10;\n                        }\n                        break;\n                    case 0x83: // Georgian\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; ((*p &lt;= 0x85)\n                                || (*p == 0x87))\n                            || (*p == 0x8d))\n                            (*p) += 0x30;\n                        break;\n                    case 0xb8: // Latin extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0xbf)\n                            &amp;&amp; (!(*p % 2))) // Even\n                            (*p)++; // Next char is lwr\n                        break;\n                    case 0xb9: // Latin extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0xbf)\n                            &amp;&amp; (!(*p % 2))) // Even\n                            (*p)++; // Next char is lwr\n                        break;\n                    case 0xba: // Latin extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0x94)\n                            &amp;&amp; (!(*p % 2))) // Even\n                            (*p)++; // Next char is lwr\n                        else if ((*p &gt;= 0x9e)\n                            &amp;&amp; (*p &lt;= 0xbf)\n                            &amp;&amp; (!(*p % 2))) // Even\n                            (*p)++; // Next char is lwr\n                        break;\n                    case 0xbb: // Latin extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0xbf)\n                            &amp;&amp; (!(*p % 2))) // Even\n                            (*p)++; // Next char is lwr\n                        break;\n                    case 0xbc: // Greek extened\n                        if ((*p &gt;= 0x88)\n                            &amp;&amp; (*p &lt;= 0x8f))\n                            (*p) -= 0x08;\n                        else if ((*p &gt;= 0x98)\n                            &amp;&amp; (*p &lt;= 0x9f))\n                            (*p) -= 0x08;\n                        else if ((*p &gt;= 0xa8)\n                            &amp;&amp; (*p &lt;= 0xaf))\n                            (*p) -= 0x08;\n                        else if ((*p &gt;= 0xb8)\n                            &amp;&amp; (*p &lt;= 0x8f))\n                            (*p) -= 0x08;\n                        break;\n                    case 0xbd: // Greek extened\n                        if ((*p &gt;= 0x88)\n                            &amp;&amp; (*p &lt;= 0x8d))\n                            (*p) -= 0x08;\n                        else if ((*p &gt;= 0x98)\n                            &amp;&amp; (*p &lt;= 0x9f))\n                            (*p) -= 0x08;\n                        else if ((*p &gt;= 0xa8)\n                            &amp;&amp; (*p &lt;= 0xaf))\n                            (*p) -= 0x08;\n                        else if ((*p &gt;= 0xb8)\n                            &amp;&amp; (*p &lt;= 0x8f))\n                            (*p) -= 0x08;\n                        break;\n                    case 0xbe: // Greek extened\n                        if ((*p &gt;= 0x88)\n                            &amp;&amp; (*p &lt;= 0x8f))\n                            (*p) -= 0x08;\n                        else if ((*p &gt;= 0x98)\n                            &amp;&amp; (*p &lt;= 0x9f))\n                            (*p) -= 0x08;\n                        else if ((*p &gt;= 0xa8)\n                            &amp;&amp; (*p &lt;= 0xaf))\n                            (*p) -= 0x08;\n                        else if ((*p &gt;= 0xb8)\n                            &amp;&amp; (*p &lt;= 0xb9))\n                            (*p) -= 0x08;\n                        break;\n                    case 0xbf: // Greek extened\n                        if ((*p &gt;= 0x88)\n                            &amp;&amp; (*p &lt;= 0x8c))\n                            (*p) -= 0x08;\n                        else if ((*p &gt;= 0x98)\n                            &amp;&amp; (*p &lt;= 0x9b))\n                            (*p) -= 0x08;\n                        else if ((*p &gt;= 0xa8)\n                            &amp;&amp; (*p &lt;= 0xac))\n                            (*p) -= 0x08;\n                        break;\n                    default:\n                        break;\n                    }\n                    break;\n                case 0xf0: // Four byte code\n                    pExtChar = p;\n                    p++;\n                    switch (*pExtChar) {\n                    case 0x90:\n                        pExtChar = p;\n                        p++;\n                        switch (*pExtChar) {\n                        case 0x92: // Osage \n                            if ((*p &gt;= 0xb0)\n                                &amp;&amp; (*p &lt;= 0xbf)) {\n                                *pExtChar = 0x93;\n                                (*p) -= 0x18;\n                            }\n                            break;\n                        case 0x93: // Osage \n                            if ((*p &gt;= 0x80)\n                                &amp;&amp; (*p &lt;= 0x93))\n                                (*p) += 0x18;\n                            break;\n                        default:\n                            break;\n                        }\n                        break;\n                    default:\n                        break;\n                    }\n                    break;\n                    case 0x9E:\n                        pExtChar = p;\n                        p++;\n                        switch (*pExtChar) {\n                        case 0xA4: // Adlam\n                            if ((*p &gt;= 0x80)\n                                &amp;&amp; (*p &lt;= 0xA1))\n                                (*p) += 0x22;\n                            break;\n                        default:\n                            break;\n                        }\n                    break;\n                default:\n                    break;\n                }\n                pExtChar = 0;\n            }\n            p++;\n        }\n    }\n    return pString;\n}\n\nint StrnCiCmp(const char *s1, const char *s2, size_t ztCount)\n{\n    if (s1 &amp;&amp; *s1 &amp;&amp; s2 &amp;&amp; *s2) {\n        char cExtChar = 0;\n        unsigned char *pStr1Low = calloc(strlen(s1) + 1, sizeof(char));\n        unsigned char *pStr2Low = calloc(strlen(s2) + 1, sizeof(char));\n        if (pStr1Low &amp;&amp; pStr2Low) {\n            unsigned char *p1 = pStr1Low;\n            unsigned char *p2 = pStr2Low;\n            strcpy(pStr1Low, s1);\n            strcpy(pStr2Low, s2);\n            StrToLwrExt(pStr1Low);\n            StrToLwrExt(pStr2Low);\n            for (; ztCount--; p1++, p2++) {\n                int iDiff = *p1 - *p2;\n                if (iDiff != 0 || !*p1 || !*p2) {\n                    free(pStr1Low);\n                    free(pStr2Low);\n                    return iDiff;\n                }\n            }\n            free(pStr1Low);\n            free(pStr2Low);\n            return 0;\n        }\n        return (-1);\n    }\n    return (-1);\n}\nint StrCiCmp(const char *s1, const char *s2)\n{\n    return StrnCiCmp(s1, s2, (size_t)(-1));\n}\nchar *StrCiStr(const char *s1, const char *s2)\n{\n    if (s1 &amp;&amp; *s1 &amp;&amp; s2 &amp;&amp; *s2) {\n        char *p = (char *)s1;\n        size_t len = strlen(s2);\n        while (*p) {\n            if (StrnCiCmp(p, s2, len) == 0)\n                return (char *)p;\n            p++;\n        }\n    }\n    return (0);\n}\n</code></pre>\n<p><strong>UTF8 Ext Upr function</strong></p>\n<p>On frequent demand, that I believe would work. I have no time to test it. I will correct any bug reports.</p>\n<pre><code>unsigned char* StrToUprExt(unsigned char* pString)\n{\n    if (pString &amp;&amp; *pString) {\n        unsigned char* p = pString;\n        unsigned char* pExtChar = 0;\n        while (*p) {\n            if ((*p &gt;= 0x61) &amp;&amp; (*p &lt;= 0x7a)) // US ASCII\n                (*p) -= 0x20;\n            else if (*p &gt; 0xc0) {\n                pExtChar = p;\n                p++;\n                switch (*pExtChar) {\n                case 0xc3: // Latin 1\n                    if ((*p &gt;= 0xa0)\n                        &amp;&amp; (*p &lt;= 0xbe)\n                        &amp;&amp; (*p != 0xb7))\n                        (*p) -= 0x20; // US ASCII shift\n                    break;\n                case 0xc4: // Latin Exteneded\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0xb7)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)--; // Prev char is upr\n                    else if ((*p &gt;= 0xb9)\n                        &amp;&amp; (*p &lt;= 0xbe)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0xbf) {\n                        *pExtChar = 0xc5;\n                        (*p) = 0x80;\n                    }\n                    break;\n                case 0xc5: // Latin Exteneded\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0x88)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)--; // Prev char is upr\n                    else if ((*p &gt;= 0x8a)\n                        &amp;&amp; (*p &lt;= 0xb7)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)--; // Prev char is upr\n                    else if ((*p &gt;= 0xb9)\n                        &amp;&amp; (*p &lt;= 0xbe)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)--; // Prev char is upr\n                    break;\n                case 0xc6: // Latin Exteneded\n                    switch (*p) {\n                    case 0x83:\n                    case 0x85:\n                    case 0x88:\n                    case 0x8c:\n                    case 0x92:\n                    case 0x99:\n                    case 0xa1:\n                    case 0xa3:\n                    case 0xa5:\n                    case 0xa8:\n                    case 0xad:\n                    case 0xb0:\n                    case 0xb4:\n                    case 0xb6:\n                    case 0xb9:\n                    case 0xbd:\n                        (*p)--; // Prev char is upr\n                        break;\n                    default:\n                        break;\n                    }\n                    break;\n                case 0xc7: // Latin Exteneded\n                    if (*p == 0x86)\n                        (*p) = 0x84;\n                    else if (*p == 0x85)\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0x89)\n                        (*p) = 0x87;\n                    else if (*p == 0x88)\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0x8c)\n                        (*p) = 0x8a;\n                    else if (*p == 0x8b)\n                        (*p)--; // Prev char is upr\n                    else if ((*p &gt;= 0x8d)\n                        &amp;&amp; (*p &lt;= 0x9c)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)--; // Prev char is upr\n                    else if ((*p &gt;= 0x9e)\n                        &amp;&amp; (*p &lt;= 0xaf)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0xb3)\n                        (*p) = 0xb1;\n                    else if (*p == 0xb2)\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0xb4)\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0xb8)\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0xba)\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0xbc)\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0xbe)\n                        (*p)--; // Prev char is upr\n                    break;\n                case 0xc8: // Latin Exteneded\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0x9f)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)--; // Prev char is upr\n                    else if ((*p &gt;= 0xa2)\n                        &amp;&amp; (*p &lt;= 0xb3)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0xbc)\n                        (*p)--; // Prev char is upr\n                    break;\n                case 0xcd: // Greek &amp; Coptic\n                    switch (*p) {\n                    case 0xb1:\n                    case 0xb3:\n                    case 0xb7:\n                        (*p)--; // Prev char is upr\n                        break;\n                    default:\n                        if (*p == 0xbb) {\n                            *pExtChar = 0xcf;\n                            (*p) = 0xbd;\n                        }\n                        else if (*p == 0xbc) {\n                            *pExtChar = 0xcf;\n                            (*p) = 0xbe;\n                        }\n                        else if (*p == 0xbd) {\n                            *pExtChar = 0xcf;\n                            (*p) = 0xbf;\n                        }\n                        break;\n                    }\n                    break;\n                case 0xce: // Greek &amp; Coptic\n                    if (*p == 0xac)\n                        (*p) = 0x86;\n                    else if (*p == 0xad)\n                        (*p) = 0x88;\n                    else if (*p == 0xae)\n                        (*p) = 0x89;\n                    else if (*p == 0xaf)\n                        (*p) = 0x8a;\n                    else if ((*p &gt;= 0xb1)\n                        &amp;&amp; (*p &lt;= 0xbf))\n                        (*p) -= 0x20; // US ASCII shift\n                    break;\n                case 0xcf: // Greek &amp; Coptic\n                    if (*p == 0xb4)\n                        (*p) = 0x8f;\n                    else if (*p == 0x92)\n                        (*p)--; // Prev char is upr\n                    else if ((*p &gt;= 0x98)\n                        &amp;&amp; (*p &lt;= 0xaf)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0x91)\n                        (*p) = 0xb4;\n                    else if (*p == 0xb8)\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0xb2)\n                        (*p) = 0xb9;\n                    else if (*p == 0xbc)\n                        (*p)--; // Prev char is upr\n                    else if (*p == 0x8c) {\n                        *pExtChar = 0xce;\n                        (*p) = 0x8c;\n                    }\n                    else if (*p == 0x8d) {\n                        *pExtChar = 0xce;\n                        (*p) = 0x8e;\n                    }\n                    else if (*p == 0x8e) {\n                        *pExtChar = 0xce;\n                        (*p) = 0x8f;\n                    }\n                    else if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0x8b)\n                        &amp;&amp; (*p != 0x82)) {\n                        *pExtChar = 0xce;\n                        (*p) += 0x20;\n                    }\n                    else if (*p == 0xb3) {\n                        *pExtChar = 0xcd;\n                        (*p) = 0xbf;\n                    }\n                    break;\n                case 0xd0: // Cyrillic\n                    if ((*p &gt;= 0xb0)\n                        &amp;&amp; (*p &lt;= 0xbf))\n                        (*p) -= 0x20; // US ASCII shift\n                    break;\n                case 0xd1: // Cyrillic supplement\n                    if ((*p &gt;= 0x90)\n                        &amp;&amp; (*p &lt;= 0x9f)) {\n                        *pExtChar = 0xd0;\n                        (*p) -= 0x10;\n                    }\n                    else if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0x8f)) {\n                        *pExtChar = 0xd0;\n                        (*p) += 0x20;\n                    }\n                    else if ((*p &gt;= 0xa0)\n                        &amp;&amp; (*p &lt;= 0xbf)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)--; // Prev char is upr\n                    break;\n                case 0xd2: // Cyrillic supplement\n                    if (*p == 0x80)\n                        (*p)++; // Prev char is upr\n                    else if ((*p &gt;= 0x8a)\n                        &amp;&amp; (*p &lt;= 0xbf)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)--; // Prev char is upr\n                    break;\n                case 0xd3: // Cyrillic supplement\n                    if ((*p &gt;= 0x81)\n                        &amp;&amp; (*p &lt;= 0x8e)\n                        &amp;&amp; (!(*p % 2))) // Even\n                        (*p)--; // Prev char is upr\n                    else if ((*p &gt;= 0x90)\n                        &amp;&amp; (*p &lt;= 0xbf)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)--; // Prev char is upr\n                    break;\n                case 0xd4: // Cyrillic supplement &amp; Armenian\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0xaf)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)--; // Prev char is upr\n                    break;\n                case 0xd5: // Armenian\n                    if ((*p &gt;= 0x80)\n                        &amp;&amp; (*p &lt;= 0x96)\n                        &amp;&amp; (*p % 2)) // Odd\n                        (*p)--; // Prev char is upr\n                    else if ((*p &gt;= 0xa1)\n                        &amp;&amp; (*p &lt;= 0xaf)) {\n                        *pExtChar = 0xd4;\n                        (*p) += 0x10;\n                    }\n                    break;\n                case 0xe1: // Three byte code\n                    pExtChar = p;\n                    p++;\n                    switch (*pExtChar) {\n                    case 0x82: // Georgian\n                        break;\n                    case 0x83: // Georgian\n                        if ((*p &gt;= 0x90)\n                            &amp;&amp; (*p &lt;= 0xaf)) {\n                            *pExtChar = 0x82;\n                            (*p) += 0x10;\n                        }\n                        else if ((*p &gt;= 0xb0)\n                            &amp;&amp; ((*p &lt;= 0xb5)\n                                || (*p == 0xb7))\n                            || (*p == 0xbd))\n                            (*p) -= 0x30;\n                        break;\n                    case 0xb8: // Latin extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0xbf)\n                            &amp;&amp; (*p % 2)) // Odd\n                            (*p)--; // Prev char is upr\n                        break;\n                    case 0xb9: // Latin extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0xbf)\n                            &amp;&amp; (*p % 2)) // Odd\n                            (*p)--; // Prev char is upr\n                        break;\n                    case 0xba: // Latin extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0x94)\n                            &amp;&amp; (*p % 2)) // Odd\n                            (*p)--; // Prev char is upr\n                        else if ((*p &gt;= 0x9e)\n                            &amp;&amp; (*p &lt;= 0xbf)\n                            &amp;&amp; (*p % 2)) // Odd\n                            (*p)--; // Prev char is upr\n                        break;\n                    case 0xbb: // Latin extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0xbf)\n                            &amp;&amp; (*p % 2)) // Odd\n                            (*p)--; // Prev char is upr\n                        break;\n                    case 0xbc: // Greek extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0x87))\n                            (*p) += 0x08;\n                        else if ((*p &gt;= 0x90)\n                            &amp;&amp; (*p &lt;= 0x97))\n                            (*p) += 0x08;\n                        else if ((*p &gt;= 0xa0)\n                            &amp;&amp; (*p &lt;= 0xa7))\n                            (*p) += 0x08;\n                        else if ((*p &gt;= 0xb0)\n                            &amp;&amp; (*p &lt;= 0x87))\n                            (*p) += 0x08;\n                        break;\n                    case 0xbd: // Greek extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0x87))\n                            (*p) += 0x08;\n                        else if ((*p &gt;= 0x90)\n                            &amp;&amp; (*p &lt;= 0x97))\n                            (*p) += 0x08;\n                        else if ((*p &gt;= 0xa0)\n                            &amp;&amp; (*p &lt;= 0xa7))\n                            (*p) += 0x08;\n                        else if ((*p &gt;= 0xb0)\n                            &amp;&amp; (*p &lt;= 0x87))\n                            (*p) += 0x08;\n                        break;\n                    case 0xbe: // Greek extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0x87))\n                            (*p) += 0x08;\n                        else if ((*p &gt;= 0x90)\n                            &amp;&amp; (*p &lt;= 0x97))\n                            (*p) += 0x08;\n                        else if ((*p &gt;= 0xa0)\n                            &amp;&amp; (*p &lt;= 0xa7))\n                            (*p) += 0x08;\n                        else if ((*p &gt;= 0xb0)\n                            &amp;&amp; (*p &lt;= 0xb1))\n                            (*p) += 0x08;\n                        break;\n                    case 0xbf: // Greek extened\n                        if ((*p &gt;= 0x80)\n                            &amp;&amp; (*p &lt;= 0x84))\n                            (*p) += 0x08;\n                        else if ((*p &gt;= 0x90)\n                            &amp;&amp; (*p &lt;= 0x93))\n                            (*p) += 0x08;\n                        else if ((*p &gt;= 0xa0)\n                            &amp;&amp; (*p &lt;= 0xa4))\n                            (*p) += 0x08;\n                        break;\n                    default:\n                        break;\n                    }\n                    break;\n                case 0xf0: // Four byte code\n                    pExtChar = p;\n                    p++;\n                    switch (*pExtChar) {\n                    case 0x90:\n                        pExtChar = p;\n                        p++;\n                        switch (*pExtChar) {\n                        case 0x92: // Osage \n                            break;\n                        case 0x93: // Osage \n                            if ((*p &gt;= 0x80)\n                                &amp;&amp; (*p &lt;= 0x93))\n                                (*p) += 0x18;\n                            else if ((*p &gt;= 0x98)\n                                &amp;&amp; (*p &lt;= 0xa7)) {\n                                *pExtChar = 0x92;\n                                (*p) += 0x18;\n                            }\n                            break;\n                        default:\n                            break;\n                        }\n                        break;\n                    case 0x9E:\n                        pExtChar = p;\n                        p++;\n                        switch (*pExtChar) {\n                        case 0xA4: // Adlam     \n                            if ((*p &gt;= 0xa2)\n                                &amp;&amp; (*p &lt;= 0xc3))\n                                (*p) -= 0x22;\n                            break;\n                        default:\n                            break;\n                        }\n                        break;\n                    default:\n                        break;\n                    }\n                    break;\n                default:\n                    break;\n                }\n                pExtChar = 0;\n            }\n            p++;\n        }\n    }\n    return pString;\n}\n</code></pre>\n"}], "owner": {"reputation": 13077, "user_id": 618068, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7bcc37850bde70904ddb82f17c46d49c?s=128&d=identicon&r=PG", "display_name": "aardvarkk", "link": "https://stackoverflow.com/users/618068/aardvarkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8737, "favorite_count": 3, "accepted_answer_id": 36898621, "answer_count": 4, "score": 15, "last_activity_date": 1614305869, "creation_date": 1461780896, "last_edit_date": 1495541965, "question_id": 36897781, "link": "https://stackoverflow.com/questions/36897781/how-to-uppercase-lowercase-utf-8-characters-in-c", "title": "How to uppercase/lowercase UTF-8 characters in C++?", "body": "<p>Let's imagine I have a UTF-8 encoded <code>std::string</code> containing the following: </p>\n\n<p><code>\u00f3\u00f3</code></p>\n\n<p>and I'd like to convert it to the following:</p>\n\n<p><code>\u00d3\u00d3</code></p>\n\n<p>Ideally I want the uppercase/lowercase approach I'm using to be generic across all of UTF-8. If that's even possible.</p>\n\n<p>The original byte sequence in the string is <code>0xc3b3c3b3</code> (two bytes per character, and two instances of <code>\u00f3</code>) and I'd like the output to be <code>0xc393c393</code> (two instances of <code>\u00d3</code>). There are <a href=\"https://stackoverflow.com/questions/17991431/convert-a-unicode-string-in-c-to-upper-case\">some examples</a> on StackOverflow but they use wide character strings, and <a href=\"https://stackoverflow.com/questions/23136837/in-c-when-to-use-wchar-and-when-to-use-char\">other answers</a> say you shouldn't be using wide character strings for UTF-8. It also appears that this problem can be very \"tricky\" in that the output might be dependent upon the user's locale.</p>\n\n<p>I was expecting to just use something like <code>std::toupper()</code>, but the usage is really unclear to me because it seems like I'm not just converting one character at a time but an entire string. Also, this <a href=\"http://ideone.com/uFKo0B\" rel=\"noreferrer\">Ideone example</a> I put together seems to show that <code>toupper()</code> of <code>0xc3b3</code> is just <code>0xc3b3</code>, which is an unexpected result. Calling <code>setlocale</code> to either UTF-8 or ISO8859-1 doesn't appear to change the outcome.</p>\n\n<p>I'd love some guidance if you could shed some light on either what I'm doing wrong or why my question/premise is faulty!</p>\n"}, {"tags": ["c++", "smart-pointers", "c++17"], "comments": [{"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 3, "creation_date": 1461779756, "post_id": 36897316, "comment_id": 61358921, "body": "It helps you write correct code via static analysis. For instance, if you mistakenly call <code>delete</code> on one of them, the compiler will give you an error, preventing you from freeing memory you don&#39;t own."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2693780"}, "edited": false, "score": 0, "creation_date": 1463396470, "post_id": 36897485, "comment_id": 62032180, "body": "Does observer_ptr prevent writing to the wrapped ptr? Also, the motivating issue you&#39;re presenting in your answer can be solved by a Foo const * ptr. What does an observer_ptr provide that a const ptr doesn&#39;t? Just interested in your take on this."}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "edited": false, "score": 1, "creation_date": 1463401419, "post_id": 36897485, "comment_id": 62035121, "body": "@denniskb - It&#39;s not that <code>observer_ptr</code> can do anything that <code>Foo const *ptr</code> can&#39;t. (That&#39;s why it&#39;s called &quot;the world&#39;s dumbest smart pointer.&quot;) It&#39;s that an <code>observer_ptr</code> can <i>better communicate to other developers</i> (and, potentially, to static analysis tools) how the pointer is used."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2693780"}, "edited": false, "score": 0, "creation_date": 1463415071, "post_id": 36897485, "comment_id": 62043717, "body": "thx for the clarification. I strongly disagree with this statement though. const was made for this, it is one of the strongest guarantees you can provide in a C++ program. I don&#39;t see the benefit of adding new, redundant syntax with weaker semantics, when const correctness has been practiced by devs for decades now."}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "edited": false, "score": 1, "creation_date": 1463417418, "post_id": 36897485, "comment_id": 62045034, "body": "@denniskb - <code>observer_ptr</code> isn&#39;t new syntax; it&#39;s a new library feature. It&#39;s not redundant with <code>const</code>; as I explained, it&#39;s intended to communicate meaning where a raw <code>Foo const *</code> can be ambiguous (observer versus sink versus array versus optional reference). It&#39;s not &quot;weaker&quot; than const, it&#39;s simply different; e.g., there&#39;s nothing stopping you from using <code>observer_ptr&lt;const Foo&gt;</code>."}], "tags": [], "owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "is_accepted": false, "score": 7, "last_activity_date": 1461780009, "creation_date": 1461780009, "answer_id": 36897485, "question_id": 36897316, "link": "https://stackoverflow.com/questions/36897316/whats-the-point-of-the-worlds-dumbest-smart-pointer/36897485#36897485", "title": "What&#39;s the point of &quot;The World&#39;s Dumbest Smart Pointer?&quot;", "body": "<p>Did you read the \"Motivation\" section from <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4282.pdf\">proposal N4282</a> that you linked?</p>\n\n<blockquote>\n  <p>It has often proven to be very challenging and time-consuming for a programmer to inspect code in order to discern the use to which any specific bare pointer is put, even if that use has no management role at all. As Lo\u00efc A. Joly observed, \u201cit is not easy to disambiguate a T* pointer that is only observing the data.... Even if it would just serve for documentation, having a dedicated type would have some value I think.\u201d Our experience leads us to agree with this assessment.</p>\n</blockquote>\n\n<p>In other words, it's to make code more self-documenting.</p>\n\n<p>For example, if I see the following function:</p>\n\n<pre><code>void do_something(Foo *foo);\n</code></pre>\n\n<p>then I don't know if do_something is taking ownership of foo, wants a Foo array of indeterminate length, just needs a nullable reference to it, is using it as a <a href=\"https://google.github.io/styleguide/cppguide.html#Reference_Arguments\">Google C++ Style Guide</a> style output parameter, or is legacy C-style code that just wants a reference.</p>\n\n<p>However, if I see</p>\n\n<pre><code>void do_something(observer_ptr&lt;Foo&gt; foo);\n</code></pre>\n\n<p>then I know it's observing a Foo instance, and no more.</p>\n\n<p>The <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md\">C++ Core Guidelines</a> have several additional examples (<code>owner</code>, <code>not_null</code>, etc.) of using templates, not to add run-time functionality, but to better document behavior.</p>\n"}], "owner": {"reputation": 198, "user_id": 6262916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e70e07141e8457023b7591d94631bb?s=128&d=identicon&r=PG&f=1", "display_name": "user6262916", "link": "https://stackoverflow.com/users/6262916/user6262916"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "closed_date": 1461781199, "answer_count": 1, "score": 6, "last_activity_date": 1461780009, "creation_date": 1461779506, "question_id": 36897316, "link": "https://stackoverflow.com/questions/36897316/whats-the-point-of-the-worlds-dumbest-smart-pointer", "closed_reason": "Duplicate", "title": "What&#39;s the point of &quot;The World&#39;s Dumbest Smart Pointer?&quot;", "body": "<p>Proposal <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4282.pdf\" rel=\"noreferrer\">N4282</a> advocates a new type of non-owning smart pointer called an <code>observer_ptr</code>. Its working name was <code>exempt_ptr</code> and it's intended as a replacement for \"raw pointers\". But I don't understand its purpose, especially with this hypothetical code for what it's designed to achieve:</p>\n\n<pre><code>struct do_nothing\n{\n  template &lt;class T&gt;\n  void operator ()(T*) { }; // do nothing\n};\n\ntemplate &lt;class T&gt;\n  using non_owning_ptr = unique_ptr&lt;T, do_nothing&gt;;\n</code></pre>\n\n<p>Even after reading the article, I don't understand the purpose of a smart pointer that doesn't do nothing. What advantage does it have over a non-owning <code>shared_ptr</code> or raw pointer?</p>\n"}, {"tags": ["c++", "arrays", "sorting", "struct"], "comments": [{"owner": {"reputation": 19601, "user_id": 1620779, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dlgGb.png?s=128&g=1", "display_name": "sjsam", "link": "https://stackoverflow.com/users/1620779/sjsam"}, "edited": false, "score": 1, "creation_date": 1461779496, "post_id": 36897292, "comment_id": 61358728, "body": "Post the code and error here please. don&#39;t have a DROPBAAX account."}, {"owner": {"reputation": 1083, "user_id": 1205182, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b414e8e73f57cc5918faf27d8babd442?s=128&d=identicon&r=PG&f=1", "display_name": "Nattrass", "link": "https://stackoverflow.com/users/1205182/nattrass"}, "edited": false, "score": 0, "creation_date": 1461779857, "post_id": 36897292, "comment_id": 61358992, "body": "Have you defined a &gt; operator for your student struct?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461781620, "post_id": 36897292, "comment_id": 61360090, "body": "You need to add the declaration of <code>StudentsInfo</code> to the question."}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1461780031, "post_id": 36897441, "comment_id": 61359111, "body": "I don&#39;t know where you got the undefined behaviour from."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1461784693, "post_id": 36897441, "comment_id": 61362068, "body": "Yep, the statement about undefined behavior is incorrect. Undefined behavior is something that compiles, but is not guaranteed to work. OP&#39;s code does not compile."}], "tags": [], "owner": {"reputation": 32, "user_id": 4864461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-vrz8wVmawMo/AAAAAAAAAAI/AAAAAAAAABk/q0HTdzTTAdg/photo.jpg?sz=128", "display_name": "JoyStickFanatic", "link": "https://stackoverflow.com/users/4864461/joystickfanatic"}, "is_accepted": false, "score": -2, "last_activity_date": 1461779864, "creation_date": 1461779864, "answer_id": 36897441, "question_id": 36897292, "link": "https://stackoverflow.com/questions/36897292/what-does-this-error-mean-in-general-and-how-i-fix-it-in-this-case/36897441#36897441", "title": "what does this error mean in general? and how I fix it in this case?", "body": "<p>The error means that > only takes two arguments and you are using it for something else. In this case you are comparing an entire data structure that does not have an override for > operator and is an undefined behavior. StudentsInfo[i] is a data structure that has more than one element in it. Replace the StudentsInfo[i] with StudentsInfo[i].GPA or another element whose data type has a defined > operator. </p>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 6153324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/780041f1d3e435a0fa336ae3d6a3c6ed?s=128&d=identicon&r=PG&f=1", "display_name": "artanislm", "link": "https://stackoverflow.com/users/6153324/artanislm"}, "is_accepted": true, "score": 2, "last_activity_date": 1461780696, "creation_date": 1461780696, "answer_id": 36897721, "question_id": 36897292, "link": "https://stackoverflow.com/questions/36897292/what-does-this-error-mean-in-general-and-how-i-fix-it-in-this-case/36897721#36897721", "title": "what does this error mean in general? and how I fix it in this case?", "body": "<p>What do you compare in your program? As I see, you have to compare names, but all you do is compare an array element which is a struct data type.\nIf you are trying to compare names, you have to use dot \".\" operator to reach names. After yo compare names, you can change the elements's place.</p>\n"}], "owner": {"reputation": 91, "user_id": 6262919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jnqkh.jpg?s=128&g=1", "display_name": "Ahmed Hadi", "link": "https://stackoverflow.com/users/6262919/ahmed-hadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1462829023, "accepted_answer_id": 36897721, "answer_count": 2, "score": -5, "last_activity_date": 1461784385, "creation_date": 1461779457, "last_edit_date": 1461784385, "question_id": 36897292, "link": "https://stackoverflow.com/questions/36897292/what-does-this-error-mean-in-general-and-how-i-fix-it-in-this-case", "closed_reason": "Not suitable for this site", "title": "what does this error mean in general? and how I fix it in this case?", "body": "<p>The error message appears on Xcode that says \"invalid operands to binary expression.</p>\n\n<p>in my code I'm using an array of a struct, i'm trying to sort input data in an ascending order, and i'm getting this error message at the \"if\" condition shown in the print screen at this link:</p>\n\n<p><a href=\"https://www.dropbox.com/s/0mch2gbxcif0a20/Screen%20Shot%202016-04-27%20at%2012.45.45%20PM.png?dl=0\" rel=\"nofollow\">https://www.dropbox.com/s/0mch2gbxcif0a20/Screen%20Shot%202016-04-27%20at%2012.45.45%20PM.png?dl=0</a></p>\n\n<p><strong>The Code</strong></p>\n\n<pre><code>if (studentsInfo[i] &gt; studentsInfo[i + 1]) {}\n</code></pre>\n\n<p><strong>The Error</strong></p>\n\n<p>Invalid operands to binary expression ('students' and 'students')</p>\n"}, {"tags": ["c++", "visual-studio-2015", "kernel", "driver", "kmdf"], "comments": [{"owner": {"reputation": 1771, "user_id": 2641959, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/4c6d8336fe8a675f9f20f519faec5fc0?s=128&d=identicon&r=PG&f=1", "display_name": "Mohan", "link": "https://stackoverflow.com/users/2641959/mohan"}, "edited": false, "score": 0, "creation_date": 1478350917, "post_id": 36897291, "comment_id": 68124191, "body": "Have you solved this issue?"}, {"owner": {"reputation": 170, "user_id": 2407555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1a571b52ecd490ff9ec123a468c5487?s=128&d=identicon&r=PG", "display_name": "Susarla Nikhilesh", "link": "https://stackoverflow.com/users/2407555/susarla-nikhilesh"}, "edited": false, "score": 0, "creation_date": 1517817300, "post_id": 36897291, "comment_id": 84232406, "body": "Has this issue been resolved ? if so please let me know the solution of how to proceed"}], "owner": {"reputation": 23, "user_id": 6262616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6db9a18accfd91ef28496ccf967831f0?s=128&d=identicon&r=PG&f=1", "display_name": "user6262616", "link": "https://stackoverflow.com/users/6262616/user6262616"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 489, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1461779790, "creation_date": 1461779455, "last_edit_date": 1461779790, "question_id": 36897291, "link": "https://stackoverflow.com/questions/36897291/visual-studio-2015-kernel-debugger-gets-stuck", "title": "Visual Studio 2015 kernel debugger gets stuck", "body": "<p>I am attempting to write a KMDF driver using visual studio 2015. When I try to deploy the driver and start the debugger everything seems to work: visual studio is able to build the solution and deploy it to the target computer (wich is a virtual machine), but after the deployment of the files, it seems to get stuck: I can't pause the debugger and execute the debugger's commands.</p>\n\n<p><strong>My Question: How do I get the debugger to break/pause?</strong></p>\n\n<p><strong>What I have tried:</strong></p>\n\n<p>I have tried connecting to the target computer both  with the network and with pipes, but neither seems to change anything.</p>\n\n<p>I have tried setting the test certificate to \"WDKTestCert\".</p>\n\n<p>I have tried adding a package project to the solution.</p>\n\n<p><strong>Additional Information:</strong></p>\n\n<p>My configuration of the project is the exact same as shown on MSDN <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/hh439654(v=vs.85).aspx\" rel=\"nofollow\">here</a>.</p>\n\n<p>My host computer and target computer are both running windows 8.1 64 bit.</p>\n\n<p>The target computer is a VMWare virtual machine.</p>\n\n<p>I am using visual studio 2015 Version 14.0.25123.00 Update 2.</p>\n\n<p>I am using WDK 10.</p>\n\n<p><strong>The Debugger's Log:</strong></p>\n\n<pre><code>Using NET for debugging\nOpened WinSock 2.0\nWaiting to reconnect...\n[20:00:30:970]: Remove Existing Remote Package\n[20:00:31:802]: Task \"Remove Existing Remote Package\" completed successfully\n[20:00:31:824]: Copy Driver Package\n[20:00:35:171]: Task \"Copy Driver Package\" completed successfully\n[20:00:35:193]: Driver Removal\n[20:00:35:194]: Removing any existing files from test execution folder.\n[20:00:36:057]: Copying required files for \"Driver Removal\".\n\n$KitRoot$\\Testing\\Runtimes\\TAEF\\te.exe \"%SystemDrive%\\DriverTest\\Run\\DriverTestTasks_downlevel.dll\" /select:\"@Name='DriverTestTasks::_DriverRemoval'\" /p:\"InfFile=KmdfDriver.inf\" /p:\"Debug=1\" /p:\"ImportDriver=1\" /p:\"RemoveDriver=1\" /p:\"CertificateFile=KmdfDriver.cer\" /p:\"PackageGuid=x64\" /p:\"HardwareId=Root\\KmdfDriver\" /rebootStateFile:%SystemDrive%\\DriverTest\\Run\\DriverTestReboot.xml /enableWttLogging /wttDeviceString:$LogFile:file=\"%SystemDrive%\\DriverTest\\Run\\Driver_Removal_00008.wtl\",writemode=append,encoding=unicode,nofscache=true,EnableLvl=\"WexStartTest|WexEndTest|WexXml|WexProperty|WexCreateContext|WexCloseContext|*\" /runas:Elevated\n[20:01:51:745]: Result Summary: Total=1, Passed=1, Failed=0, Blocked=0, Warned=0, Skipped=0\n[20:01:51:750]: Task \"Driver Removal\" completed successfully\n[20:01:52:183]: Driver Preparation\n[20:01:52:184]: Removing any existing files from test execution folder.\n[20:01:53:029]: Copying required files for \"Driver Preparation\".\n\n$KitRoot$\\Testing\\Runtimes\\TAEF\\te.exe \"%SystemDrive%\\DriverTest\\Run\\DriverTestTasks_downlevel.dll\" /select:\"@Name='DriverTestTasks::_DriverPreparation'\" /p:\"InfFile=KmdfDriver.inf\" /p:\"Debug=1\" /p:\"ImportDriver=1\" /p:\"RemoveDriver=1\" /p:\"CertificateFile=KmdfDriver.cer\" /p:\"PackageGuid=x64\" /p:\"HardwareId=Root\\KmdfDriver\" /rebootStateFile:%SystemDrive%\\DriverTest\\Run\\DriverTestReboot.xml /enableWttLogging /wttDeviceString:$LogFile:file=\"%SystemDrive%\\DriverTest\\Run\\Driver_Preparation_00008.wtl\",writemode=append,encoding=unicode,nofscache=true,EnableLvl=\"WexStartTest|WexEndTest|WexXml|WexProperty|WexCreateContext|WexCloseContext|*\" /runas:Elevated\n[20:02:07:150]: Result Summary: Total=1, Passed=1, Failed=0, Blocked=0, Warned=0, Skipped=0\n[20:02:07:154]: Task \"Driver Preparation\" completed successfully\n[20:02:07:866]: Driver Install\n[20:02:07:867]: Removing any existing files from test execution folder.\n[20:02:08:709]: Copying required files for \"Driver Install\".\n\n$KitRoot$\\Testing\\Runtimes\\TAEF\\te.exe \"%SystemDrive%\\DriverTest\\Run\\DriverTestTasks_downlevel.dll\" /select:\"@Name='DriverTestTasks::_RunProcess'\" /p:\"BinaryPath=%SystemDrive%\\DriverTest\\devcon.exe\" /p:\"Arguments=-f install %SystemDrive%\\DriverTest\\Drivers\\KmdfDriver.inf Root\\KmdfDriver\" /p:\"WorkingFolder=%SystemDrive%\\DriverTest\\Drivers\" /rebootStateFile:%SystemDrive%\\DriverTest\\Run\\DriverTestReboot.xml /enableWttLogging /wttDeviceString:$LogFile:file=\"%SystemDrive%\\DriverTest\\Run\\Driver_Install_00008.wtl\",writemode=append,encoding=unicode,nofscache=true,EnableLvl=\"WexStartTest|WexEndTest|WexXml|WexProperty|WexCreateContext|WexCloseContext|*\" /runas:Elevated\n[20:02:22:809]: Result Summary: Total=1, Passed=1, Failed=0, Blocked=0, Warned=0, Skipped=0\n[20:02:22:813]: Task \"Driver Install\" completed successfully\n[20:02:23:267]: Driver Post Install Actions\n[20:02:23:268]: Removing any existing files from test execution folder.\n[20:02:24:107]: Copying required files for \"Driver Post Install Actions\".\n\n$KitRoot$\\Testing\\Runtimes\\TAEF\\te.exe \"%SystemDrive%\\DriverTest\\Run\\DriverTestTasks_downlevel.dll\" /select:\"@Name='DriverTestTasks::_DriverPostInstall'\" /rebootStateFile:%SystemDrive%\\DriverTest\\Run\\DriverTestReboot.xml /enableWttLogging /wttDeviceString:$LogFile:file=\"%SystemDrive%\\DriverTest\\Run\\Driver_Post_Install_Actions_00008.wtl\",writemode=append,encoding=unicode,nofscache=true,EnableLvl=\"WexStartTest|WexEndTest|WexXml|WexProperty|WexCreateContext|WexCloseContext|*\" /runas:Elevated\n[20:02:36:377]: Result Summary: Total=1, Passed=1, Failed=0, Blocked=0, Warned=0, Skipped=0\n[20:02:36:380]: Task \"Driver Post Install Actions\" completed successfully\n</code></pre>\n\n<p>After this point it seems like nothing happens.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c++", "unicode", "encoding"], "comments": [{"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 2, "creation_date": 1461780792, "post_id": 36897235, "comment_id": 61359560, "body": "I&#39;m voting to close this question as off-topic because it&#39;s just a &quot;give me the code&quot;."}, {"owner": {"reputation": 635, "user_id": 780180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzzGj.jpg?s=128&g=1", "display_name": "N D", "link": "https://stackoverflow.com/users/780180/n-d"}, "edited": false, "score": 0, "creation_date": 1461794804, "post_id": 36897235, "comment_id": 61367638, "body": "okay. apparently I don&#39;t understand the culture here. I searched for an answer to this for a few days on stack over flow. I have never asked a question here after many years of using the site and answering questions where I can. I am in the process of coming up with an answer and was going to post it once I&#39;m done. Please advise me on how I could rewrite the question."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1461795304, "post_id": 36897235, "comment_id": 61367837, "body": "If you were going to provide the code yourself, you should really have waited until you were ready to post both the question and answer, and submitted them at the same time. We all thought you wanted us to just do it for you. I&#39;m voting to reopen; once several others have done the same, you will be able to post your answer."}, {"owner": {"reputation": 635, "user_id": 780180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzzGj.jpg?s=128&g=1", "display_name": "N D", "link": "https://stackoverflow.com/users/780180/n-d"}, "edited": false, "score": 0, "creation_date": 1461795482, "post_id": 36897235, "comment_id": 61367932, "body": "Well, I&#39;m not very satisfied with my solution so I was hopping to get some advice mid course. I&#39;m forced to manually compare the character sets. I was hopping there was a function some where that I could have used like using a codec."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 2, "creation_date": 1461795851, "post_id": 36897235, "comment_id": 61368069, "body": "For a one-off your &#39;manually comparing&#39; code may very well be more efficient than a generalized codec routine. For instance: since you only have one single target encoding to test, you don&#39;t have to loop over each of its characters. You can sort the Cyrillic encoding on its (translated!) Unicode values and then efficiently use a binary lookup for each of your input characters. (Voted to reopen by the way \ud83d\ude04)"}, {"owner": {"reputation": 635, "user_id": 780180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzzGj.jpg?s=128&g=1", "display_name": "N D", "link": "https://stackoverflow.com/users/780180/n-d"}, "edited": false, "score": 0, "creation_date": 1461796135, "post_id": 36897235, "comment_id": 61368178, "body": "Thank you, I appreciate it, I want to support codecs ISO 8859-1 to ISO 8859-5, I just rewrote the question just in case it was too broad. I&#39;m afraid that in manually encoding the list I might miss character here or there."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1461796796, "post_id": 36897235, "comment_id": 61368431, "body": "If you&#39;re using UTF-8, why are your strings using wide characters? Indeed <code>vector&lt;char32_t&gt; bytes(str.begin(), str.end());</code> make no sense, as wide characters need not be Unicode at all. And on Windows, they&#39;re UTF-16, which does not directly map to UTF-32 the way you do here."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1461796994, "post_id": 36897235, "comment_id": 61368515, "body": "@ND: &quot;<i>I want to support codecs ISO 8859-1 to ISO 8859-5</i>&quot; Those are very different things, and you&#39;d need a separate function to check for each one. Indeed, writing a checker for Latin-1 is trivial, while writing a checker for Latin/Cyrilic is far more difficult."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1461797450, "post_id": 36897235, "comment_id": 61368685, "body": "@NicolBolas: not really &quot;far more difficult&quot;, is it? Latin-1 indeed is trivial, but for other character sets all it needs is 1 (one) lookup routine, with a pointer to an array of 256 Unicode values (or 128, if you are really stingy, but it hardly matters for a binary search). &quot;.. in manually encoding the list I might miss a character..&quot; \u2013 just copy and paste them from web pages and sort, or look up presorted lists."}, {"owner": {"reputation": 635, "user_id": 780180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzzGj.jpg?s=128&g=1", "display_name": "N D", "link": "https://stackoverflow.com/users/780180/n-d"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1461799359, "post_id": 36897235, "comment_id": 61369202, "body": "@NicolBolas so you are saying that char32_t is too wide? should I use something else?"}, {"owner": {"reputation": 635, "user_id": 780180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzzGj.jpg?s=128&g=1", "display_name": "N D", "link": "https://stackoverflow.com/users/780180/n-d"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1461799614, "post_id": 36897235, "comment_id": 61369274, "body": "@RadLexus I am using the tables here <a href=\"http://czyborra.com/charsets/iso8859.html\" rel=\"nofollow noreferrer\">czyborra.com/charsets/iso8859.html</a> these tables don&#39;t include the control characters for the old teletype machines which suites me fine. But I still have questions as to their completeness. Is there a better place that is known to have more reliable tables that I should be looking at?"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1461801574, "post_id": 36897235, "comment_id": 61369834, "body": "For all things Unicode\u2122, have a look at <code>unicode.org</code>! Here is a list of all ISO 8859 encodings: <a href=\"ftp://ftp.unicode.org/Public/MAPPINGS/ISO8859\" rel=\"nofollow noreferrer\">ftp.unicode.org/Public/MAPPINGS/ISO8859</a>"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1461802022, "post_id": 36897235, "comment_id": 61369978, "body": "@ND: &quot;<i>so you are saying that char32_t is too wide?</i>&quot; I&#39;m saying that it&#39;s not UTF-8. Your question is supposedly about how to test if a UTF-8 character sequence contains codepoints outside a certain range. Your code doesn&#39;t actually use UTF-8 <i>anywhere</i>. So what exactly is your question? It&#39;s like someone asking about OpenGL, but then posting a bunch of D3D code."}, {"owner": {"reputation": 635, "user_id": 780180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzzGj.jpg?s=128&g=1", "display_name": "N D", "link": "https://stackoverflow.com/users/780180/n-d"}, "edited": false, "score": 0, "creation_date": 1461803952, "post_id": 36897235, "comment_id": 61370430, "body": "I am assuming that wstring was derived from UTF. But I could clean that up I suppose."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1461864616, "post_id": 36897235, "comment_id": 61404788, "body": "@ND You seem to be confused between code units and code points, and seem to ignore the fact that UTF-8 is a particular encoding used to express  (encode) Unicode code points using bytes."}, {"owner": {"reputation": 635, "user_id": 780180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzzGj.jpg?s=128&g=1", "display_name": "N D", "link": "https://stackoverflow.com/users/780180/n-d"}, "edited": false, "score": 1, "creation_date": 1461865913, "post_id": 36897235, "comment_id": 61405605, "body": "Thank you. I don&#39;t know the difference between code units and points. My understanding is that UTF-8 characters use between 1 and 4 bytes per character. This is the binary representation of the character which is different from when the character is rendered. The std::wstring is templated on wchar_t. wchar_t on Linux is 4 bytes wide, thus if you put a multibyte UTF-8 set into a wstring you can more easily identify each character since each character is a consistent width of 4 bytes and all UTF-8 characters will fit into a 4 bit width so the wstring handles any possible characters from UTF-8."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1461867595, "post_id": 36897235, "comment_id": 61406578, "body": "@ND: That&#39;s indeed a correct. summary. The reason we&#39;re surprised is that programming indeed often is a matter of breaking a hard task into manageable chunks. Your UTF-8 title would be hard, but converting it to UTF-32 and then determining if it&#39;s from a subset is a lot easier. So you initially gave the impression of needing a lot more programming help, when it really was just a poor choice of words."}], "answers": [{"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1461865357, "post_id": 36914716, "comment_id": 61405261, "body": "Although <code>canEncode</code> is indeed broken, you&#39;re passing large <code>c</code>&#39;s that require a surrogate pair to represent. You need to be passing them as surrogate pairs encoded in a <code>QString</code> instead. You need to use <code>QChar</code> surrogate logic to check if a given UCS-4 <code>c</code> is representable as a single <code>QChar</code> or as a surrogate pair, and go from there."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1461865464, "post_id": 36914716, "comment_id": 61405330, "body": "@Kuba - I hadn&#39;t spotted that those were outside BMP.  Thanks for the clarification."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1461866009, "post_id": 36914716, "comment_id": 61405663, "body": "One thing I&#39;m unsure of is whether L&quot;foo&quot; expects &quot;foo&quot; to be UTF-8 or what :( It&#39;s implementation defined, it seems, per <a href=\"http://stackoverflow.com/a/25568251/1329652\">this answer</a>."}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1461846483, "creation_date": 1461846483, "answer_id": 36914716, "question_id": 36897235, "link": "https://stackoverflow.com/questions/36897235/test-if-a-unicode-code-point-is-in-the-iso-8859-5-set-using-c/36914716#36914716", "title": "Test if a Unicode code point is in the ISO-8859-5 set using C++", "body": "<p>There is no Standard C++ library for character code conversions.  In fact, I don't think a C++ implementation even needs to be aware of more than one encoding.  So any solution is going to require a library, or else hand-crafted code (i.e. a big <code>switch</code>...).</p>\n\n<p>Since you mention Qt, then yes, you should be able to use <code>QTextCodec::canEncode</code>:</p>\n\n<pre><code>#include &lt;QDebug&gt;\n#include &lt;QTextCodec&gt;\n\n#include &lt;string&gt;\n\nint main() {\n    std::wstring const str = L\"A\u00e5\u0411\ud83d\ude00\ud83d\ude44\ud83d\ude210\";\n    auto const *codec = QTextCodec::codecForName(\"ISO-8859-5\");\n    if (!codec) {\n        qFatal(\"Codec not found\");\n    }\n\n    qDebug() &lt;&lt; \"Using codec\" &lt;&lt; qPrintable(codec-&gt;name());\n\n    for (auto c: str) {\n        if (codec-&gt;canEncode(c))\n            qDebug() &lt;&lt; c;\n    }\n}\n</code></pre>\n\n<p>But this gives me\n</p>\n\n<pre><code>Using codec ISO-8859-5\n65\n229\n1041\n128512\n128580\n128545\n48\n</code></pre>\n\n<p>So that's a non-solution.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1461867742, "post_id": 36921537, "comment_id": 61406658, "body": "As all ISO-8859-1 sets are extensions of ASCII (control characters included), and so is UTF-8 (as is Unicode itself when you ignore leading zeroes). So you might want to split that test in two, a quick check for <code>&lt;128</code> and a lookup for the rest."}, {"owner": {"reputation": 635, "user_id": 780180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzzGj.jpg?s=128&g=1", "display_name": "N D", "link": "https://stackoverflow.com/users/780180/n-d"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1462213275, "post_id": 36921537, "comment_id": 61532371, "body": "Nice idea. That would make it more efficient."}], "tags": [], "owner": {"reputation": 635, "user_id": 780180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzzGj.jpg?s=128&g=1", "display_name": "N D", "link": "https://stackoverflow.com/users/780180/n-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1462231553, "last_edit_date": 1462231553, "creation_date": 1461864288, "answer_id": 36921537, "question_id": 36897235, "link": "https://stackoverflow.com/questions/36897235/test-if-a-unicode-code-point-is-in-the-iso-8859-5-set-using-c/36921537#36921537", "title": "Test if a Unicode code point is in the ISO-8859-5 set using C++", "body": "<p>For the moment I am using this custom solution:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;boost/assign/std/vector.hpp&gt;\n\nusing namespace std;\nusing namespace boost::assign; \n\nbool isIntInSet(int val, std::vector&lt;int&gt; set){\n  if (std::find(set.begin(), set.end(), val) != set.end())\n  {\n    return true;\n  }\n  return false;\n}\n\nbool isLegal(int val, string isoNum){\n  const string ISO8859_5 = \"ISO8859-5\";\n  if (ISO8859_5 == isoNum){\n    vector&lt;int&gt; isoSet5;\n    isoSet5 += 0x0020,0x0021,0x0022,0x0023,0x0024,0x0025,0x0026,0x0027,0x0028,0x0029,0x002A,0x002B,0x002C,0x002D,0x002E,0x002F,0x0030,0x0031,0x0032,0x0033,0x0034,0x0035,0x0036,0x0037,0x0038,0x0039,0x003A,0x003B,0x003C,0x003D,0x003E,0x003F,0x0040,0x0041,0x0042,0x0043,0x0044,0x0045,0x0046,0x0047,0x0048,0x0049,0x004A,0x004B,0x004C,0x004D,0x004E,0x004F,0x0050,0x0051,0x0052,0x0053,0x0054,0x0055,0x0056,0x0057,0x0058,0x0059,0x005A,0x005B,0x005C,0x005D,0x005E,0x005F,0x0060,0x0061,0x0062,0x0063,0x0064,0x0065,0x0066,0x0067,0x0068,0x0069,0x006A,0x006B,0x006C,0x006D,0x006E,0x006F,0x0070,0x0071,0x0072,0x0073,0x0074,0x0075,0x0076,0x0077,0x0078,0x0079,0x007A,0x007B,0x007C,0x007D,0x007E,0x00A0,0x0401,0x0402,0x0403,0x0404,0x0405,0x0406,0x0407,0x0408,0x0409,0x040A,0x040B,0x040C,0x00AD,0x040E,0x040F,0x0410,0x0411,0x0412,0x0413,0x0414,0x0415,0x0416,0x0417,0x0418,0x0419,0x041A,0x041B,0x041C,0x041D,0x041E,0x041F,0x0420,0x0421,0x0422,0x0423,0x0424,0x0425,0x0426,0x0427,0x0428,0x0429,0x042A,0x042B,0x042C,0x042D,0x042E,0x042F,0x0430,0x0431,0x0432,0x0433,0x0434,0x0435,0x0436,0x0437,0x0438,0x0439,0x043A,0x043B,0x043C,0x043D,0x043E,0x043F,0x0440,0x0441,0x0442,0x0443,0x0444,0x0445,0x0446,0x0447,0x0448,0x0449,0x044A,0x044B,0x044C,0x044D,0x044E,0x044F,0x2116,0x0451,0x0452,0x0453,0x0454,0x0455,0x0456,0x0457,0x0458,0x0459,0x045A,0x045B,0x045C,0x00A7,0x045E,0x045F;\n    if (isIntInSet(val, isoSet5))return true;\n  }\n  return false;\n}\n</code></pre>\n\n<p>By looking up a list of visible character sets on <a href=\"http://czyborra.com/charsets/iso8859.html\" rel=\"nofollow\">http://czyborra.com/charsets/iso8859.html</a> each character set does not include the control characters, so this is not the complete ISO8859-5 list of characters, but it seems good enough for all printable characters. </p>\n"}], "owner": {"reputation": 635, "user_id": 780180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lzzGj.jpg?s=128&g=1", "display_name": "N D", "link": "https://stackoverflow.com/users/780180/n-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 330, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1462231553, "creation_date": 1461779280, "last_edit_date": 1462213195, "question_id": 36897235, "link": "https://stackoverflow.com/questions/36897235/test-if-a-unicode-code-point-is-in-the-iso-8859-5-set-using-c", "title": "Test if a Unicode code point is in the ISO-8859-5 set using C++", "body": "<p>The ISO-8859-5 standard is a subset of the unicode character set. I want to test if a unicode character is supported in a character subset of ISO-8859-5 in C++. To do this I want to write a function like <strong>isLegal</strong> below, so that the following code will filter out non ISO-8859-5 characters. </p>\n\n<p>Assume that wstring came from a unicode encoded string.</p>\n\n<pre><code>wstring str = L\"A\u00e5\u0411\ud83d\ude00\ud83d\ude44\ud83d\ude210\";\nvector&lt;char32_t&gt; bytes(str.begin(), str.end());\nfor (vector&lt;char32_t&gt;::const_iterator i = bytes.begin(); i != bytes.end(); ++i){\nif (isLegal(*i, \"ISO-8859-5\"))\n{\n  std::cout &lt;&lt; (*i) &lt;&lt; ' ';\n}\n</code></pre>\n\n<p>}</p>\n\n<p>The reason for this is that I would like to limit the supported characters to a subset of the unicode superset so that the user can't submit characters like emoji's and characters that are not in the supported languages. Thank you for your help.</p>\n\n<p>Is there a simple way to do this. Using for instance codecs or something like that. For instance I know about a function from Qt is there anything in this vein that could help me?</p>\n\n<pre><code>QTextCodec *codec = QTextCodec::codecForName(\"ISO 8859-5\");\n</code></pre>\n\n<p>Or perhaps a library out there that would do this for me.</p>\n\n<p><em>Note: Why am I using wstring? My understanding is that unicode characters use between 1 and 4 bytes per character. This is the binary representation of the character which is different from when the character is rendered. std:string supports a multibyte string but when you try to isolate individual characters I didn't know where a character started and where it ended because the width of bytes in each character were inconsistent.</em></p>\n\n<p><em>So I used a codec to decode the multibyte string into the std::wstring which is templated on wchar_t. wchar_t on Linux is 4 bytes wide, thus each character will have a consistent width. Because of this, if you put a multibyte unicode set into a wstring you can more easily identify each character since each character is a consistent width of 4 bytes and all unicode characters will fit into a 4 bit width so the wstring handles any possible characters from unicode.</em></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1461779300, "post_id": 36897208, "comment_id": 61358608, "body": "yes - its called a debugger. What platform are you on"}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1461779316, "post_id": 36897208, "comment_id": 61358621, "body": "Some code please. Alternatively, you can also DEBUG and find it out yourself."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1461779367, "post_id": 36897208, "comment_id": 61358648, "body": "@Ajay it was kind of an interview question, basically asking for a code example that can crash before main starts"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1461779373, "post_id": 36897208, "comment_id": 61358654, "body": "One common cause iin Windows is that a required DLL is not found."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1461779471, "post_id": 36897208, "comment_id": 61358714, "body": "<a href=\"http://stackoverflow.com/questions/2518415/is-there-any-way-a-c-c-program-can-crash-before-main\" title=\"is there any way a c c program can crash before main\">stackoverflow.com/questions/2518415/&hellip;</a>"}, {"owner": {"reputation": 337, "user_id": 1964336, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8e2967906ec9e3ee3c571a5594a08077?s=128&d=identicon&r=PG", "display_name": "jatinder bhola", "link": "https://stackoverflow.com/users/1964336/jatinder-bhola"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1461779492, "post_id": 36897208, "comment_id": 61358721, "body": "Hi, guys it was an interview question and I did not able to answer. Yes, I replied debugging but they did not impressed with this answer. @Ajay"}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 3, "creation_date": 1461779507, "post_id": 36897208, "comment_id": 61358733, "body": "<code>int foo() { return *((int*)0); } int global = foo(); int main(){}</code>"}, {"owner": {"reputation": 337, "user_id": 1964336, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8e2967906ec9e3ee3c571a5594a08077?s=128&d=identicon&r=PG", "display_name": "jatinder bhola", "link": "https://stackoverflow.com/users/1964336/jatinder-bhola"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1461779723, "post_id": 36897208, "comment_id": 61358895, "body": "thank you @pm100. appreciate"}], "answers": [{"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1461779606, "post_id": 36897335, "comment_id": 61358807, "body": "just to be clear - this code does NOT crash before main"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1461779644, "post_id": 36897335, "comment_id": 61358839, "body": "actually I wasnt sure..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1461779680, "post_id": 36897335, "comment_id": 61358865, "body": "@pm100 but arent global variables initialized before main starts?"}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 1, "creation_date": 1461779768, "post_id": 36897335, "comment_id": 61358931, "body": "<code>getSomeValue</code> has to cause crash. Global variables are initialized before <code>main</code>. <code>static</code> (function level) variables get initialized on their first usage"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1461779821, "post_id": 36897335, "comment_id": 61358966, "body": "@Ajay so you agree that my example crashes before main?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1461779981, "post_id": 36897335, "comment_id": 61359069, "body": "why would it crash? You need to replace the comment by some bad code"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1461780086, "post_id": 36897335, "comment_id": 61359154, "body": "@pm100 well, if that is your problem... I just didnt want to make it too specific. I mean there are several ways to cause a crash, but only if a function causing a crash is used to initialize a global variable this happens before main and thats what I wanted to illustrate. Anyhow I will make it more explicit"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461782568, "post_id": 36897335, "comment_id": 61360706, "body": "To be pedantic, this causes undefined behavior. Whether it actually causes a crash is implementation-dependent. But that&#39;s more a fault of the way the question was asked."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461784409, "post_id": 36897335, "comment_id": 61361868, "body": "@Barmar and for this reason I previously I didnt provide any code that does cause the crash, but only the comment that was supposed to be replcaced with some crash causing code. Usually I avoid crashing my programs, thus I have little experience how to do it ;). Arent in fact all crashs implementation dependent ?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461784658, "post_id": 36897335, "comment_id": 61362037, "body": "I suppose you could call <code>abort()</code>, that&#39;s supposed to crash the program."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461784729, "post_id": 36897335, "comment_id": 61362090, "body": "@Barmar ah thanks, thats a good example of something that one actually would use in real code. Well, not in this way, but still better than some lousy UB"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 2, "last_activity_date": 1461784820, "last_edit_date": 1461784820, "creation_date": 1461779566, "answer_id": 36897335, "question_id": 36897208, "link": "https://stackoverflow.com/questions/36897208/i-have-an-c-code-which-crashes-on-startup-before-reaching-execution-of-main/36897335#36897335", "title": "I have an c++ code which crashes on startup before reaching execution of main() where might the issue reside?", "body": "<p>There are several things that take place before the actual execution starts. The first thing that comes to my mind is initialization of global variables. For example:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n\nint getSomeValue(){\n    // some code to produce crash, e.g. as suggested by Barmar...\n    abort();\n    return 0;\n}\n\nint value = getSomeValue();\n\nint main(){\n    return 0;\n}\n</code></pre>\n\n<p>And concerning your question of how to find such a bug, the answer is: use a debugger.</p>\n"}, {"tags": [], "owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "is_accepted": false, "score": 0, "last_activity_date": 1461785288, "creation_date": 1461785288, "answer_id": 36899178, "question_id": 36897208, "link": "https://stackoverflow.com/questions/36897208/i-have-an-c-code-which-crashes-on-startup-before-reaching-execution-of-main/36899178#36899178", "title": "I have an c++ code which crashes on startup before reaching execution of main() where might the issue reside?", "body": "<p>As @tobi303 said, global variables get initialized before <code>main</code>.</p>\n\n<p>If one of those global variables is an object, then that object's Constructor gets run before <code>main</code>. </p>\n\n<p>If that Constructor calls other functions, then those functions are also called before <code>main</code>.</p>\n\n<pre><code>class SelfCrashing\n{\npublic:\n    SelfCrashing() { int x = *(int*)NULL; } // Deliberate crash\n};\n\nSelfCrashing myGlobal; // Default Constructor called\n\nint main()\n{\n    /* Program never got here */\n}\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 1964336, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/8e2967906ec9e3ee3c571a5594a08077?s=128&d=identicon&r=PG", "display_name": "jatinder bhola", "link": "https://stackoverflow.com/users/1964336/jatinder-bhola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "closed_date": 1461786619, "accepted_answer_id": 36897335, "answer_count": 2, "score": 0, "last_activity_date": 1461785288, "creation_date": 1461779204, "question_id": 36897208, "link": "https://stackoverflow.com/questions/36897208/i-have-an-c-code-which-crashes-on-startup-before-reaching-execution-of-main", "closed_reason": "Duplicate", "title": "I have an c++ code which crashes on startup before reaching execution of main() where might the issue reside?", "body": "<p>I am bachelor student, I was asked this question by my instructor could you pls help me in this.\nI already did googling about it but I am still confused.</p>\n\n<p>Is there any tool who find out the reason of crashes?</p>\n\n<p>I will really appreciate your time. </p>\n"}, {"tags": ["c++", "templates", "entityx"], "owner": {"reputation": 11, "user_id": 6262662, "user_type": "registered", "profile_image": "https://graph.facebook.com/1074426099270642/picture?type=large", "display_name": "Felipe Marques", "link": "https://stackoverflow.com/users/6262662/felipe-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1512834531, "creation_date": 1461779019, "last_edit_date": 1512834531, "question_id": 36897156, "link": "https://stackoverflow.com/questions/36897156/c-openecs-components-dynamically", "title": "C++ OpenEcs Components dynamically", "body": "<p>For those not familiar OpenEcs, it works much like the EntityX library.</p>\n\n<ul>\n<li><a href=\"https://github.com/Gronis/OpenEcs\" rel=\"nofollow noreferrer\">https://github.com/Gronis/OpenEcs</a></li>\n<li><a href=\"https://github.com/alecthomas/entityx\" rel=\"nofollow noreferrer\">https://github.com/alecthomas/entityx</a></li>\n</ul>\n\n<hr>\n\n<p>I'm using OpenEcs library and I need do this kind of thing to create an entity with components:</p>\n\n<pre><code>entities.create_with&lt;Velocity, Position&gt;();\n</code></pre>\n\n<p>The template used in this method is:</p>\n\n<pre><code>template&lt;typename ...Components&gt;\n</code></pre>\n\n<p>Well, what I want to do is build this <code>&lt;Velocity, Position&gt;</code> dynamically, like this:</p>\n\n<pre><code>vector&lt;size_t&gt; components = {1, 2};\nauto&amp; componentList = // something\n\nfor (auto&amp; component : components)\n{\n  switch (component)\n  {\n    case 1:\n      componentList.add(Velocity);\n      break;\n\n    case 2:\n      componentList.add(Position);\n      break;\n\n    default:\n      break;\n  }\n}\n\nentities.create_with&lt;componentList&gt;();\n</code></pre>\n\n<hr>\n\n<p>PS: I can do separately too, for example</p>\n\n<pre><code>entity.add&lt;Velocity&gt;();\n</code></pre>\n\n<p>But, for performance gains, the first way is better, how can I do to work like the first way?</p>\n"}, {"tags": ["c++", "visual-studio", "lnk2019", "cppunit", "lnk2005"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461779056, "post_id": 36896887, "comment_id": 61358465, "body": "Is the project you added as a dependency a <code>.lib</code> or <code>.dll</code> project. A project that is an <code>.exe</code> will not work."}, {"owner": {"reputation": 1, "user_id": 5961961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca25716475a6d3b252c3c91d82464522?s=128&d=identicon&r=PG", "display_name": "throwsFireball", "link": "https://stackoverflow.com/users/5961961/throwsfireball"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461779859, "post_id": 36896887, "comment_id": 61358994, "body": "I have no idea. I just added it in Build Dependencies -&gt; Project Dependencies.  Should I do something else here?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461779914, "post_id": 36896887, "comment_id": 61359023, "body": "You have no idea what kind of projects you are building? What I am saying is you can not make an application dependent on a second application and expect the symbols to link since you can not link to an application in native <code>c++</code>."}, {"owner": {"reputation": 1, "user_id": 5961961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca25716475a6d3b252c3c91d82464522?s=128&d=identicon&r=PG", "display_name": "throwsFireball", "link": "https://stackoverflow.com/users/5961961/throwsfireball"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461780857, "post_id": 36896887, "comment_id": 61359607, "body": "Ah, I just realised that I skipped over that. For anyone who&#39;s wondering, he&#39;s talking about Project Properties and the Configuration Type. It is currently set to .exe but I&#39;ve just tried switching it out for a .lib / .dll and that doesn&#39;t seem to have solved the problem. Am I skipping something or missing something here?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461780936, "post_id": 36896887, "comment_id": 61359658, "body": "<b><i>that doesn&#39;t seem to have solved the problem.</i></b> You can not arbitrarily switch the project type. My advice is to create a static library project that both your application projects depend on. Put all of the code that you need to share in the static library project."}, {"owner": {"reputation": 1, "user_id": 5961961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca25716475a6d3b252c3c91d82464522?s=128&d=identicon&r=PG", "display_name": "throwsFireball", "link": "https://stackoverflow.com/users/5961961/throwsfireball"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461783745, "post_id": 36896887, "comment_id": 61361464, "body": "I&#39;m sorry, I&#39;m more used to Java, PHP and the like. C++ has a lot of stuff going on that I&#39;m not really understanding here. I&#39;m testing pretty much all my code through my CPPUnitTests, so the library would just hold all the code. Is it possible to just reference that through?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461783872, "post_id": 36896887, "comment_id": 61361543, "body": "After you put your code into a static library your method of setting the dependency between projects should work. Remember that a static library will not contain a <code>int main()</code> You need to separate your code into what belongs in the applications that use the library and what belongs in the library."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461784217, "post_id": 36896887, "comment_id": 61361732, "body": "Here is an example: <a href=\"https://msdn.microsoft.com/en-us/library/ms235627.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms235627.aspx</a>"}], "owner": {"reputation": 1, "user_id": 5961961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca25716475a6d3b252c3c91d82464522?s=128&d=identicon&r=PG", "display_name": "throwsFireball", "link": "https://stackoverflow.com/users/5961961/throwsfireball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1461778231, "creation_date": 1461778231, "question_id": 36896887, "link": "https://stackoverflow.com/questions/36896887/rotating-lnk2005-lnk2019-errors-in-cppunittest-in-c-visual-studio", "title": "Rotating LNK2005 / LNK2019 Errors in CPPUnitTest in C++ Visual Studio", "body": "<p>I've been trying to set up a CPPUnitTest to test a C++ project. I've came across an error where I've got two rotating errors depending on how I try to solve my problem.</p>\n\n<p>I've got two projects in a solution in Visual Studio. One is for testing, one is for the project itself. I'm having these errors whilst trying to reference the project in the testing project.</p>\n\n<p>If I do this, I get a LNK2019 (unresolved external symbol) error any time I try to construct an object or call a function:</p>\n\n<pre><code>#pragma once\n#ifndef REFERENCE_H\n#define REFERENCE_H\n#include \"../Stuff/Thing.h\"\n#include \"../Stuff/OtherThing.h\"\n#endif\n</code></pre>\n\n<p>However, if I do this, I get a LNK2005 (test2.obj: blahblahlblah is already defined in test1.obj) error since two of the tests reference it:</p>\n\n<pre><code>#pragma once\n#ifndef REFERENCE_H\n#define REFERENCE_H\n#include \"../Stuff/Thing.cpp\"\n#include \"../Stuff/OtherThing.cpp\"\n#endif\n</code></pre>\n\n<p>Deleting one of the tests fixes the problem with the latter (.cpp) but obviously that's not very good.</p>\n\n<p>I think I may have missed a step somewhere along the way but I'm not sure what it is. I did add the \"project\" project as a dependency to the test.</p>\n\n<p>Does anyone have the solution to this?</p>\n"}, {"tags": ["c++", "bit-manipulation"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1461779281, "post_id": 36896837, "comment_id": 61358591, "body": "Search the internet for &quot;bit twiddling hacks&quot;."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 1, "creation_date": 1461779704, "post_id": 36896837, "comment_id": 61358883, "body": "<code>__builtin_popcount(~(word | 0x55555555))</code> seems very efficient. Why do you lose a lot of time picking between the 3 cases?"}, {"owner": {"reputation": 1026, "user_id": 5583153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116adeea4dcb2db23e70b696d4949184?s=128&d=identicon&r=PG&f=1", "display_name": "Nacho", "link": "https://stackoverflow.com/users/5583153/nacho"}, "edited": false, "score": 0, "creation_date": 1461784865, "post_id": 36896837, "comment_id": 61362169, "body": "Nice trick, though you can&#39;t use it for the 00 comparisson."}], "answers": [{"comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1461779610, "post_id": 36897223, "comment_id": 61358811, "body": "How do you cache the integer?"}, {"owner": {"reputation": 784, "user_id": 3565315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f94c26f3337cd6d46fce6dcccad0b3e4?s=128&d=identicon&r=PG&f=1", "display_name": "manglano", "link": "https://stackoverflow.com/users/3565315/manglano"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1461780026, "post_id": 36897223, "comment_id": 61359109, "body": "Store it in some variable. Int is implementation-defined but if the programmer has a lot of memory to use, (un)signed long long would do the trick."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1461780634, "post_id": 36897223, "comment_id": 61359458, "body": "Wouldn&#39;t the value already be stored in some variable? I&#39;m trying to learn and I find the terminology confusing. So if caching==&quot;Store it in some variable&quot;, then what does &quot;Restore the cached integer to the temporary integer.&quot; mean? Seems like we&#39;re just copying values then? No CPU or other cache is directly implied? Why copy it in the first place? How does this answer provide a more efficient solution than <code>__builtin_popcount(~(word | 0x55555555))</code> along with two other cases?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1461780673, "post_id": 36897223, "comment_id": 61359487, "body": "Slight tweak to that: If this is supported on your compiler and platform, <code>#include &lt;cstdint&gt;</code> and then use <code>int32_t</code> or since this is an exercise in bit-twiddling use <code>uint32_t</code> and ignore the sign. This way you get no surprises with the size of the integer. It will be 32 bits or you&#39;ll get a compiler error saying 32 bits can&#39;t be done."}, {"owner": {"reputation": 784, "user_id": 3565315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f94c26f3337cd6d46fce6dcccad0b3e4?s=128&d=identicon&r=PG&f=1", "display_name": "manglano", "link": "https://stackoverflow.com/users/3565315/manglano"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1461814030, "post_id": 36897223, "comment_id": 61373084, "body": "@flatmouse Yes, but the 32bit integer passed to the function will be mutated by the bitshifts, regardless of how it is stored, so it must be copied. I cannot confirm that the solution will be more efficient but certain architectures (ARM, for one) can do a bitshift while moving a value from memory into a register. The hardware architecture can be the determining factor with regard to how performant low-level code is. It is possible that __builtin_popcount may be more performant on some architectures."}], "tags": [], "owner": {"reputation": 784, "user_id": 3565315, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f94c26f3337cd6d46fce6dcccad0b3e4?s=128&d=identicon&r=PG&f=1", "display_name": "manglano", "link": "https://stackoverflow.com/users/3565315/manglano"}, "is_accepted": false, "score": 2, "last_activity_date": 1461779247, "creation_date": 1461779247, "answer_id": 36897223, "question_id": 36896837, "link": "https://stackoverflow.com/questions/36896837/comparing-and-counting-bits-blockwise/36897223#36897223", "title": "Comparing and counting bits blockwise", "body": "<p>Store all your 2bit bitmasks in an array. \nCache the 32-bit integer.</p>\n\n<p>For each 2bit block of the 32bit integer:</p>\n\n<p>Restore the cached integer to the temporary integer.</p>\n\n<p>&lt;&lt; to clear the more significant bits, then bitshift >> 30 bits such that the bits you desire to examine are the two least significant bits in the register.</p>\n\n<p>For each mask, Bitwise AND. Cache result to some subset of previously allocated array.</p>\n\n<p>Loop, changing the bitshift as necessary to obtain a distinct mask.</p>\n\n<p>In the first iteration, &lt;&lt; 30 bits,  >> 30 bits.\nIn the second iteration, &lt;&lt; 28 bits, >> 30 bits.</p>\n"}, {"comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1461787909, "post_id": 36898104, "comment_id": 61364061, "body": "Well I&#39;m not sure I believe the premise to begin with. OPs solution would have a latency of 5 on Haswell, the minimum for a load is 4 and it already becomes 5 just by using indexing, and realistically you can add a cache miss on top of that."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1461788334, "post_id": 36898104, "comment_id": 61364313, "body": "@harold but not portable... not that mine is portable either, or even possible :)"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1461782265, "last_edit_date": 1461782265, "creation_date": 1461781926, "answer_id": 36898104, "question_id": 36896837, "link": "https://stackoverflow.com/questions/36896837/comparing-and-counting-bits-blockwise/36898104#36898104", "title": "Comparing and counting bits blockwise", "body": "<p>The fastest possible way to compute this at run-time (theoretically) is to pre-compute the result.</p>\n\n<p>Warning, this may take 'some time' to compile...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;limits&gt;\n#include &lt;utility&gt;\n\nconstexpr int bits_less(unsigned int sample, int cmp)\n{\n    auto samples = std::numeric_limits&lt;unsigned int&gt;::digits;\n    auto tot = 0;\n    while (samples)\n    {\n        auto acc = sample &amp; 0x3;\n        if (acc &lt;= cmp)\n            ++tot;\n        sample &gt;&gt;= 2;\n        samples -= 2;\n    }\n    return tot;\n\n}\n\nstruct less_table\n{\n    constexpr less_table()\n    : less_table(std::make_index_sequence&lt;entries&gt;())\n    {}\n\n    template&lt;std::size_t...Is&gt;\n    constexpr less_table(std::index_sequence&lt;Is...&gt;)\n    : less_tab {\n        { bits_less(Is, 0), bits_less(Is, 1), bits_less(Is, 2) }\n    }\n    {}\n\n    constexpr int get(unsigned int sample, int pattern) const\n    {\n        return less_tab[sample][pattern];\n    }\n\n    static constexpr std::size_t entries = std::size_t(std::numeric_limits&lt;unsigned int&gt;::max()) + 1;\n    int less_tab[entries][3];\n};\n\nint main()\n{\n    std::cout &lt;&lt; bits_less(0x34237645, 0x01) &lt;&lt; std::endl;\n\n    constexpr less_table lt;\n    std::cout &lt;&lt; lt.get(0x34237645, 0x01) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>results may vary:</p>\n\n<pre><code>clang: error: unable to execute command: Killed: 9\nclang: error: clang frontend command failed due to signal (use -v to see invocation)\nApple LLVM version 7.3.0 (clang-703.0.29)\nTarget: x86_64-apple-darwin15.4.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\nclang: note: diagnostic msg: PLEASE submit a bug report to http://developer.apple.com/bugreporter/ and include the crash backtrace, preprocessed source, and associated run script.\nclang: note: diagnostic msg:\n********************\n\nPLEASE ATTACH THE FOLLOWING FILES TO THE BUG REPORT:\nPreprocessed source(s) and associated run script(s) are located at:\nclang: note: diagnostic msg: /var/folders/h0/qp9lmbgs3fx_6gc9czqv8wh80000gp/T/less_tab-fb5e34.cpp\nclang: note: diagnostic msg: /var/folders/h0/qp9lmbgs3fx_6gc9czqv8wh80000gp/T/less_tab-fb5e34.sh\nclang: note: diagnostic msg:\n\n********************\n</code></pre>\n\n<p>enjoy :)</p>\n"}, {"tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": false, "score": 1, "last_activity_date": 1461797942, "creation_date": 1461797942, "answer_id": 36902386, "question_id": 36896837, "link": "https://stackoverflow.com/questions/36896837/comparing-and-counting-bits-blockwise/36902386#36902386", "title": "Comparing and counting bits blockwise", "body": "<p>With appropriate bit manipulation each of the three cases can be efficiently handled:</p>\n\n<pre><code>#include &lt;iostream&gt; \n\nint main()\n{\n    unsigned int value{0xE4E79EEF};\n\n    unsigned int A{~(value | 0x55555555)};\n    unsigned int B{~((~value) | 0x55555555)};\n    unsigned int C{(~(value | 0xAAAAAAAA)) &lt;&lt; 1};\n    unsigned int D{(~((~value) | 0xAAAAAAAA)) &lt;&lt; 1};\n\n    int lt00{16 - __builtin_popcount(B|D)};\n    int lt01{__builtin_popcount(A)};\n    int lt10{__builtin_popcount(A|C)};\n\n    std::cout &lt;&lt; \"Original bit pattern: 11 10 01 00 11 10 01 11 10 01 11 10 11 10 11 11\\n\";\n    std::cout &lt;&lt; \"Number of 2-bit blocks less than or equal to 00: \" &lt;&lt; lt00 &lt;&lt; \" block(s)\\n\";\n    std::cout &lt;&lt; \"Number of 2-bit blocks less than or equal to 01: \" &lt;&lt; lt01 &lt;&lt; \" block(s)\\n\";\n    std::cout &lt;&lt; \"Number of 2-bit blocks less than or equal to 10: \" &lt;&lt; lt10 &lt;&lt; \" block(s)\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>Original bit pattern: 11 10 01 00 11 10 01 11 10 01 11 10 11 10 11 11\nNumber of 2-bit blocks less than or equal to 00: 1 block(s)\nNumber of 2-bit blocks less than or equal to 01: 4 block(s)\nNumber of 2-bit blocks less than or equal to 10: 9 block(s)\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/47c2a3f8b8041344\" rel=\"nofollow\">Live demo</a></p>\n"}], "owner": {"reputation": 163, "user_id": 1000742, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8ef70cbf50c31bbbcd9b750ec40a4d44?s=128&d=identicon&r=PG", "display_name": "user1000742", "link": "https://stackoverflow.com/users/1000742/user1000742"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1461799580, "creation_date": 1461778069, "last_edit_date": 1461799580, "question_id": 36896837, "link": "https://stackoverflow.com/questions/36896837/comparing-and-counting-bits-blockwise", "title": "Comparing and counting bits blockwise", "body": "<p>I have a very specific problem and I'd like to get your opinion on it:</p>\n\n<p>Given a 32-bit integer, I want to know how many 2-bit-blocks are less or equal to 00, 01 or 10. I <strong>don't</strong> know the 2-bit-pattern I'm comparing the integer to at compile-time.</p>\n\n<pre><code>00 01 10 11 01 11 00 10 ... // 4 blocks &lt;= 01\n</code></pre>\n\n<p>So far I'm using if-constructs and create a bit mask applying to the integer and calling <code>__builtin_popcount()</code>. Here is an example on how to check <code>word</code> for <code>&lt;= 01</code> on 32-bit integers.</p>\n\n<pre><code>__builtin_popcount(~(word | 0x55555555))\n</code></pre>\n\n<p>Unfortunately those case distinctions (3 in total) cost a lot of time and I would like to speed things up. Iterating over the integer and comparing blockwise is probably a worse idea. Any chance I can improve it further?</p>\n"}, {"tags": ["c++", "matrix", "rotation", "directx-11"], "answers": [{"tags": [], "owner": {"reputation": 179, "user_id": 5888436, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/818427391612398/picture?type=large", "display_name": "Bartosz Boczula", "link": "https://stackoverflow.com/users/5888436/bartosz-boczula"}, "is_accepted": true, "score": 1, "last_activity_date": 1461844611, "creation_date": 1461844611, "answer_id": 36913942, "question_id": 36896607, "link": "https://stackoverflow.com/questions/36896607/how-to-rotate-an-object-around-one-of-its-local-axis-in-directx11/36913942#36913942", "title": "How to rotate an object around one of its local axis in DirectX11", "body": "<p>AFAIU, the 1st approach is correct, however, it seems that first you create a world matrix (hence each of your vertex is in world-space now) and then you apply the 'around-local-y-axis' transformation. IMO, you should first apply <i>XMMatrixRotationY( XMConvertToRadians( angle ) );</i> to vertexes in model-space and then construct World Matrix.</p>\n"}], "owner": {"reputation": 750, "user_id": 3009827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BrRHw.png?s=128&g=1", "display_name": "SvinSimpe", "link": "https://stackoverflow.com/users/3009827/svinsimpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2978, "favorite_count": 0, "accepted_answer_id": 36913942, "answer_count": 1, "score": 0, "last_activity_date": 1541172714, "creation_date": 1461777397, "last_edit_date": 1541172714, "question_id": 36896607, "link": "https://stackoverflow.com/questions/36896607/how-to-rotate-an-object-around-one-of-its-local-axis-in-directx11", "title": "How to rotate an object around one of its local axis in DirectX11", "body": "<p>I want to rotate an object around one of its local axis. In my case the Y-axis.\nThe object has its own world matrix that is initialized like this:</p>\n\n<pre><code>XMFLOAT4X4 newInstance;\n\n// Construct matrix\nXMStoreFloat4x4( &amp;newInstance.worldMatrix, XMMatrixScaling( scale.x, scale.y, scale.z ) *\n                 XMMatrixRotationRollPitchYaw( XMConvertToRadians( rotation.x ),\n                                               XMConvertToRadians( rotation.y ),\n                                               XMConvertToRadians( rotation.z ) ) *\n                    XMMatrixTranslation( translation.x, translation.y, translation.z ) ) ;\n\n// Add new instance to collection\nmInstanceData.push_back( newInstance );\n</code></pre>\n\n<p>My end goal is to rotate my object based on input from a gamepad.</p>\n\n<p>I <strong>don't</strong> have a \"math-heavy\" background so please bear with me on this one. \nI'm familiar with the importance of order when multiplying matrices (Scale * Rotation * Translation). I've tried several approaches and all fail on me.\n<br><br></p>\n\n<h2>1st approach</h2>\n\n<pre><code>// Create rotation matrix\nXMMATRIX rotationMatrix = XMMatrixRotationY( XMConvertToRadians( angle ) );\n\n// Multiply with old matrix AND store back to the old matrix\nXMStoreFloat4x4( &amp;newInstance.worldMatrix, XMLoadFloat4X4( &amp;newInstance.worldMatrix ) * rotationMatrix );\n</code></pre>\n\n<p>This results in the object rotating around the world Y-axis and <strong>not</strong> its local axis. <br><br></p>\n\n<h2>2nd approach</h2>\n\n<p>I figured that I need to find my local Y-axis. Perhaps extracting it out of my existing world matrix? I found <a href=\"http://www.gamedev.net/topic/322275-how-get-local-xyz-axis-from-world-matrix/\" rel=\"nofollow noreferrer\">this</a> post where someone explains that\nyou <strong>can</strong> indeed extract all the local axis of an object from its world matrix.</p>\n\n<blockquote>\n  <p>A | 1 0 0 0 | <br>\n  B | 0 1 0 0 | <br>\n  C | 0 0 1 0 | <br>\n  D | 0 0 0 1 | <br>\n  ----x y z w</p>\n  \n  <p>Here, the first three values in row A are your local X-axis = (1,0,0)<br>\n  first three values in row B are your local Y-axis = (0,1,0)<br>\n  and first three values in row C are your local z-axis = (0,0,1).</p>\n</blockquote>\n\n<p>So I went about extracting the Y-axis from the object world matrix.</p>\n\n<pre><code>// Construct axis\nXMVECTOR axis =  XMVectorSet( mInstanceData[0].worldMatrix._21, mInstanceData[0].worldMatrix._22, mInstanceData[0].worldMatrix._23, 0 );\n\n// Create rotation matrix based on axis\nXMMATRIX rotationMatrix = XMMatrixRotationAxis( axis ,XMConvertToRadians( angle) );\n\n// Multiply with old matrix AND store back to the old matrix\nXMStoreFloat4x4( &amp;mInstanceData[0].worldMatrix, XMLoadFloat4x4( &amp;mInstanceData[0].worldMatrix ) * rotationMatrix );\n</code></pre>\n\n<p>This approach also failed. The result of using <a href=\"https://msdn.microsoft.com/en-us/library/microsoft.directx_sdk.matrix.xmmatrixrotationaxis%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">XMMatrixRotationAxis</a> is the object rotating around and axis from the world origin to the specified vector.<br><br></p>\n\n<h2>3rd approach</h2>\n\n<p>Then I thought that I could perhaps perform the rotation using the same technique I initialized the matrix with! This meant that I still needed to extract some current data from the objects world matrix. I found this:\n<a href=\"https://i.stack.imgur.com/Q159v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q159v.png\" alt=\"enter image description here\"></a><br><br></p>\n\n<p>So I tried to extract any relevant data from the current world matrix and construct new Scale, Rotation and Translation matrices, multiply them and store into the object world matrix.</p>\n\n<pre><code>// Extract scale and translation and construct new matrix\nXMStoreFloat4x4( &amp;mInstanceData[0].worldMatrix,  XMMatrixScaling( mInstanceData[0].worldMatrix._11, mInstanceData[0].worldMatrix._22, mInstanceData[0].worldMatrix._33 ) *\n        XMMatrixRotationRollPitchYaw( 0.0f, XMConvertToRadians( angle ), 0.0f ) *\n        XMMatrixTranslation( mInstanceData[0].worldMatrix._41, mInstanceData[0].worldMatrix._42, mInstanceData[0].worldMatrix._43 ) );\n</code></pre>\n\n<p>This resulted in the object just morphing itself into something unspeakable.\n<br><br></p>\n\n<p>When all things fail you turn to stackoverlow.. Anyone out there with some insight to share? Thank you! </p>\n"}, {"tags": ["c++", "visual-studio-2010", "visual-studio-2015", "linker"], "comments": [{"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1461777235, "post_id": 36896467, "comment_id": 61357241, "body": "Are the libraries including each other"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1461777967, "post_id": 36896467, "comment_id": 61357749, "body": "Make sure that in Visual Studio 2015 you are not using any libraries that were compiled with Visual Studio 2010."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1461777973, "post_id": 36896467, "comment_id": 61357755, "body": "Probably the 2010 project defined the <code>&#47;FORCE:MULTIPLE</code> linker command. <a href=\"https://msdn.microsoft.com/en-us/library/70abkas3.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/&hellip;</a>"}, {"owner": {"reputation": 2214, "user_id": 498915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c145804e69d843f300edc0a03b41a34?s=128&d=identicon&r=PG", "display_name": "Ultratrunks", "link": "https://stackoverflow.com/users/498915/ultratrunks"}, "edited": false, "score": 0, "creation_date": 1461778010, "post_id": 36896467, "comment_id": 61357781, "body": "Yes, some of the libraries do include each other.  Keep in mind this has compiled for years in VS2010"}, {"owner": {"reputation": 2214, "user_id": 498915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c145804e69d843f300edc0a03b41a34?s=128&d=identicon&r=PG", "display_name": "Ultratrunks", "link": "https://stackoverflow.com/users/498915/ultratrunks"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1461778658, "post_id": 36896467, "comment_id": 61358209, "body": "@AndyG, I&#39;m looking at the 2010 build and it does not appear that <code>&#47;FORCE:MULTIPLE</code> command is set."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1461778828, "post_id": 36896467, "comment_id": 61358319, "body": "@Ultratrunks: Then perhaps there were preprocessor statements that controlled whether a symbol would get created or not, and after the upgrade, those preprocessors don&#39;t behave as before.  If it&#39;s at all possible to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, then we&#39;d be able to help better, but I understand the difficulties with all the metadata surrounding VS projects."}], "owner": {"reputation": 2214, "user_id": 498915, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7c145804e69d843f300edc0a03b41a34?s=128&d=identicon&r=PG", "display_name": "Ultratrunks", "link": "https://stackoverflow.com/users/498915/ultratrunks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 690, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474178267, "creation_date": 1461776958, "question_id": 36896467, "link": "https://stackoverflow.com/questions/36896467/link-error-already-defined-after-updating-from-visual-studio-2010-to-2015", "title": "Link error &quot;already defined&quot; after updating from Visual Studio 2010 to 2015", "body": "<p>I have a c++ .dll project that was created in Visual Studio 2010 a few years ago.  Its comprised of 4 .lib projects and 1 .dll project.  Everything is statically linked so as to not require redistributables to be deployed on the host machine.  Its been maintained over the years but we'd like to update all our compilers to Visual Studio 2015. Never as easy as it sounds.</p>\n\n<p>I've opened the solution file in Visual Studio 2015 and it performed a quick conversion I suppose.  However, when I build, I get these 2 errors.</p>\n\n<pre><code>LNK2005 ___report_gsfailure already defined in EasyHook32.lib(gs_report.obj)    .....\\LIBCMT.lib(gs_report.obj)\n\nLNK1169 one or more multiply defined symbols found\n</code></pre>\n\n<p>So, I suppose my biggest question is, how can upgrading from VS2010 to VS2015 magically cause a link error all of a sudden?  Also, how can I resolve this link issue?</p>\n"}, {"tags": ["c++", "unit-testing", "googletest", "googlemock", "gmock"], "comments": [{"owner": {"reputation": 1549, "user_id": 2037446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e5ec51f2cab11499c35b78fbbd85aea?s=128&d=identicon&r=PG", "display_name": "Ammar Husain", "link": "https://stackoverflow.com/users/2037446/ammar-husain"}, "edited": false, "score": 0, "creation_date": 1461776979, "post_id": 36896393, "comment_id": 61357071, "body": "Why not test doSomething and the Turtle class explicitly, rather than through tests for Painter?"}, {"owner": {"reputation": 115, "user_id": 6262705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1780330c17b3230ef7083e4e8c571bee?s=128&d=identicon&r=PG&f=1", "display_name": "mcjay", "link": "https://stackoverflow.com/users/6262705/mcjay"}, "reply_to_user": {"reputation": 1549, "user_id": 2037446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e5ec51f2cab11499c35b78fbbd85aea?s=128&d=identicon&r=PG", "display_name": "Ammar Husain", "link": "https://stackoverflow.com/users/2037446/ammar-husain"}, "edited": false, "score": 0, "creation_date": 1461777226, "post_id": 36896393, "comment_id": 61357234, "body": "DrawSomething method have more instructions, I want to draw a rectangle using few turtle methods for example move(), turn(), penDown() etc. and I want test if they are called properly when the DrawSomething is called."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1461777253, "post_id": 36896393, "comment_id": 61357256, "body": "Well, mocking classes need to communicate via interfaces. You should introduce a <code>ITurtle</code> interface (abstract class), that is passed to <code>void Painter::DrawSomething()</code> or held by <code>Painter</code> as a reference member variable."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 6262705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1780330c17b3230ef7083e4e8c571bee?s=128&d=identicon&r=PG&f=1", "display_name": "mcjay", "link": "https://stackoverflow.com/users/6262705/mcjay"}, "edited": false, "score": 0, "creation_date": 1461783412, "post_id": 36897170, "comment_id": 61361254, "body": "Thank you very much for detail explanaition, I mocked the turtle exactly as you did in TurtleMock class. Only one question more: let&#39;s say that i don&#39;t have a ITurtle member in Painter class and Turtle object is only created in DrawSomething function. If I want to pass the mock object to this method, the only way is to make DrawSomething(ITurtle&amp; turtle)?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 115, "user_id": 6262705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1780330c17b3230ef7083e4e8c571bee?s=128&d=identicon&r=PG&f=1", "display_name": "mcjay", "link": "https://stackoverflow.com/users/6262705/mcjay"}, "edited": false, "score": 1, "creation_date": 1461783677, "post_id": 36897170, "comment_id": 61361416, "body": "@mcjay <i>&quot;the only way is to make <code>DrawSomething(ITurtle&amp; turtle)</code>?&quot;</i> Yes, that&#39;s the alternative."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 6, "last_activity_date": 1461783952, "last_edit_date": 1461783952, "creation_date": 1461779071, "answer_id": 36897170, "question_id": 36896393, "link": "https://stackoverflow.com/questions/36896393/c-googlemock-testing-local-object/36897170#36897170", "title": "C++, Googlemock - testing local object", "body": "<blockquote>\n  <p>I have mocked the Turtle class ...</p>\n</blockquote>\n\n<p>How exactly did you mock it?</p>\n\n<blockquote>\n  <p>... but how can I test <code>doSomething()</code> method (for example with <code>EXPECT_CALL</code>) when the object of turtle is created locally? \n  <em>Is it possible without modifying Painter class?</em><br>\n  <sub>(Emphasis mine)</sub></p>\n</blockquote>\n\n<p>The straightforward answer is: <strong>No</strong>.</p>\n\n<p>You cannot magically inject a mock instead of a <em>real instance</em> used in another class without decoupling via an interface.</p>\n\n<hr>\n\n<p>You should have something like the following code instead:</p>\n\n<pre><code>struct ITurtle {\n    virtual void PenUp() = 0;\n    virtual void PenDown() = 0;\n    virtual void TurnLeft(double degrees) = 0;\n    virtual void Move(double distance) = 0;\n    // ...\n    virtual ~ITurtle() {}\n};\n</code></pre>\n\n<hr>\n\n<pre><code>struct TurtleMock : ITurtle {\n    // Mock method declarations\n    MOCK_METHOD0(PenUp, void ());\n    MOCK_METHOD0(PenDown, void ());\n    MOCK_METHOD1(TurnLeft, void (double));\n    MOCK_METHOD1(Move, void (double));\n};\n</code></pre>\n\n<hr>\n\n<pre><code>class Turtle : public ITurtle {\npublic:\n    void PenUp();\n    void PenDown();\n    void TurnLeft(double degrees);\n    void Move(double distance);\n};\n</code></pre>\n\n<p>Provide the <em>real</em> implementation for the above declarations in a separate translation unit.</p>\n\n<hr>\n\n<pre><code>class Painter {\npublic:\n    Painter(ITurtle&amp; turtle) : turtle_(turtle) {}   \n    void DrawSomething();\nprivate:\n    ITurtle&amp; turtle_;\n};\n\nvoid Painter::DrawSomething() {\n    turtle_.PenDown();\n    turtle_.TurnLeft(30.0);\n    turtle_.Move(10.0);\n    turtle_.TurnLeft(30.0);\n    turtle_.Move(10.0);\n    // ...\n}\n</code></pre>\n\n<p>You can alternatively pass the <code>ITurtle</code> interface to the <code>DrawSomething()</code> function:</p>\n\n<pre><code>class Painter {\npublic:\n    void DrawSomething(ITurtle&amp; turtle);\n};\n\nvoid Painter::DrawSomething(ITurtle&amp; turtle) {\n    turtle.PenDown();\n    turtle.TurnLeft(30.0);\n    turtle.Move(10.0);\n    turtle.TurnLeft(30.0);\n    turtle.Move(10.0);\n    // ...\n}\n</code></pre>\n\n<hr>\n\n<pre><code>int main() {\n     NiceMock&lt;TurtleMock&gt; turtle;\n     Painter p(turtle);\n     // Painter p; &lt;&lt;&lt; for the alternative solution\n\n     EXPECT_CALL(turtle,PenDown())\n         .Times(1);\n     EXPECT_CALL(turtle,TurnLeft(_))\n         .Times(2);\n     EXPECT_CALL(turtle,Move(_))\n         .Times(2);\n\n     p.DrawSomething();\n     //  p.DrawSomething(turtle); &lt;&lt;&lt; for the alternative solution\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1049, "user_id": 1283198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/vIM81.jpg?s=128&g=1", "display_name": "Prasaathviki", "link": "https://stackoverflow.com/users/1283198/prasaathviki"}, "is_accepted": false, "score": 0, "last_activity_date": 1564750413, "creation_date": 1564750413, "answer_id": 57326894, "question_id": 36896393, "link": "https://stackoverflow.com/questions/36896393/c-googlemock-testing-local-object/57326894#57326894", "title": "C++, Googlemock - testing local object", "body": "<p>I have written a wrapper class to mock production code without changing it. Please let me know if there is any flaw in this.  </p>\n\n<pre><code>#include \"gtest/gtest.h\"\n#include \"src/gtest-all.cc\"\n#include \"src/gmock-all.cc\"\n#include \"src/gmock_main.cc\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing ::testing::An;\nusing ::testing::AtLeast;\nusing ::testing::DoAll;\nusing ::testing::NotNull;\nusing ::testing::Return;\nusing ::testing::ReturnRef;\nusing ::testing::SetArgReferee;\n\nusing namespace std;\n\nclass Student\n{\n    int iAge;\n\n    public:\n    Student(int _iAge) : iAge(_iAge)\n    {\n    }\n\n    virtual void PrintDetails()\n    {\n        cout&lt;&lt;\"Age:\"&lt;&lt;iAge&lt;&lt;endl;\n    }\n    virtual bool CheckGrade(int iGrade)\n    {\n        return (iGrade - 5) == iAge;\n    }\n};\n\nclass StudentFaker\n{\n    static Student* internalObject;\n\n    public:\n\n    static void FakerSetObject(Student* object) {\n        internalObject = object;\n    }\n\n    StudentFaker(int _iAge){\n    }\n\n    void PrintDetails()  {\n        internalObject-&gt;PrintDetails();\n    }\n\n    bool CheckGrade(int iGrade)  {\n        return internalObject-&gt;CheckGrade(iGrade);\n    }\n};\n\nStudent* StudentFaker::internalObject = NULL;\n\nclass StudentMock : public Student\n{\n    public:\n    StudentMock(int _iAge) : Student(_iAge) { }\n\n    MOCK_METHOD0(PrintDetails,void());\n    MOCK_METHOD1(CheckGrade,bool(int));\n};\n\n#define UNITTEST\n\nbool ProductionCode();\n\nTEST(STUDENT,TEST)\n{\n    StudentMock stMock(8);\n\n    EXPECT_CALL(stMock, PrintDetails())\n        .Times(AtLeast(1))\n        .WillOnce(Return());\n\n    EXPECT_CALL(stMock, CheckGrade(5))\n        .Times(AtLeast(1))\n        .WillOnce(Return(true));\n\n    StudentFaker::FakerSetObject(&amp;stMock);\n\n    EXPECT_TRUE(ProductionCode());\n}\n\n//Production code\n#ifdef UNITTEST\n#define Student StudentFaker\n#endif\n\nbool ProductionCode()\n{\n    Student st(8);\n    st.PrintDetails();\n    if(st.CheckGrade(5))\n        return true;\n    else\n        return false;\n}\n\n//Production code\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 6262705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1780330c17b3230ef7083e4e8c571bee?s=128&d=identicon&r=PG&f=1", "display_name": "mcjay", "link": "https://stackoverflow.com/users/6262705/mcjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2257, "favorite_count": 1, "accepted_answer_id": 36897170, "answer_count": 2, "score": 7, "last_activity_date": 1564750413, "creation_date": 1461776759, "question_id": 36896393, "link": "https://stackoverflow.com/questions/36896393/c-googlemock-testing-local-object", "title": "C++, Googlemock - testing local object", "body": "<p>I started to use googletest and googlemock libraries and I have a problem which I cannot solve. I have a code something like this:</p>\n\n<pre><code>class Painter\n{\n  public:\n  void DrawSomething();\n};\n\nvoid Painter::DrawSomething()\n{\n  Turtle turtle;\n turtle.doSomething();\n}\n\nmain()\n{\n  Painter p;\n  p.DrawSomething();\n}\n</code></pre>\n\n<p>I have mocked the Turtle class but how can I test doSomething() method (for example with EXPECT_CALL) when the object of turtle is created locally? Is it possible without modifying Painter class?</p>\n\n<p>Thank you for answers.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1461776536, "post_id": 36896230, "comment_id": 61356775, "body": "does ftell return a long or a 64.  How is user1 defined?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 3612, "user_id": 1813336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1zONI.jpg?s=128&g=1", "display_name": "cleblanc", "link": "https://stackoverflow.com/users/1813336/cleblanc"}, "edited": false, "score": 0, "creation_date": 1461776925, "post_id": 36896230, "comment_id": 61357029, "body": "@cleblanc  <code>long int ftell(FILE *stream)</code>"}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461777077, "post_id": 36896230, "comment_id": 61357134, "body": "typedef struct {       long recid;       char dataid[5];              /* USER1 */       ..     } user1_type;"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1461777606, "post_id": 36896230, "comment_id": 61357493, "body": "From the docs for ftell() that I use: &quot;Note that when a file is opened for appending data, the current file position is determined by the last I/O operation, not by where the next write would occur.&quot;  You must call fseek() first."}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461786136, "post_id": 36896230, "comment_id": 61362965, "body": "apparently on some implementations the file pos for a+b is set at EOF without a seek being needed (FreeBSD)"}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1461776981, "post_id": 36896355, "comment_id": 61357073, "body": "I don&#39;t see such behavior under gcc 4.9.3/cygwin. Can you provide supporting documentation?"}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461777125, "post_id": 36896355, "comment_id": 61357162, "body": "This has been working in the past, but the code was moved into a virtualized environment.. would that cause any change?"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1461777356, "post_id": 36896355, "comment_id": 61357328, "body": "@R-Sahu: &quot;<i>Note that when a file is opened for appending data, the current file position is determined by the last I/O operation, not by where the next write would occur.</i>&quot; (MS VC2008)"}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1461777447, "post_id": 36896355, "comment_id": 61357387, "body": "@R Sahu This behaviors is for MSVC. I am not sure about gcc. i&#39;ll try to look into it."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1461777519, "post_id": 36896355, "comment_id": 61357436, "body": "@bkVnet, thanks for adding the clarification and the supporting documentation."}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "reply_to_user": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 1, "creation_date": 1461777906, "post_id": 36896355, "comment_id": 61357710, "body": "@Trent Three As mentioned in the comment by R Sahu, this behavior may be implementation dependent(i&#39;m not sure), the behavior i provide in the answer comes from MSDN documentation of ftell, but again you can use fseek() to seek to the end of file before using ftell"}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461782912, "post_id": 36896355, "comment_id": 61360934, "body": "This explains things.... I had numerous c-based programs running under FreeBSD... they all broke when I migrated them to virtualized CentOS7.  I need to know what I need to do to make this legacy code work properly.. I am finding that seek and/or appends aren&#39;t behaving the same."}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "reply_to_user": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461785282, "post_id": 36896355, "comment_id": 61362447, "body": "@TrentThree you can use <code>fseek(dfile,0,SEEK_END)</code> to position the pointer to the end before calling <code>ftell()</code>. This should not interfere with further calls to write data to the file."}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461786291, "post_id": 36896355, "comment_id": 61363067, "body": "I was storing the record number in the file, and I was getting it by ftell() prior to appending, so I was storing invalid data in the file when I migrated to a different OS"}], "tags": [], "owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "is_accepted": false, "score": 3, "last_activity_date": 1461777454, "last_edit_date": 1461777454, "creation_date": 1461776627, "answer_id": 36896355, "question_id": 36896230, "link": "https://stackoverflow.com/questions/36896230/problems-getting-ftell-in-binary-append/36896355#36896355", "title": "Problems getting ftell() in binary append", "body": "<p>From MSDN's documentation of <a href=\"https://msdn.microsoft.com/en-us/library/0ys3hc0b.aspx\" rel=\"nofollow\"><code>ftell</code></a></p>\n\n<blockquote>\n  <p>The position returned by <code>ftell()</code> is expressed as an offset relative\n  to the beginning of the stream</p>\n  \n  <p>If no I/O operation has yet occurred on a file opened for appending,\n  the file position is the beginning of the file.</p>\n</blockquote>\n\n<p>This gives you an offset of 0 relative to the beginning.</p>\n\n<p>So when you call <code>user1.recid=ftell(dfile);</code> no I/O operation has occurred on the stream yet so <code>ftell()</code> returns 0 indicating the file pointer position is at the begining.</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461783593, "post_id": 36896524, "comment_id": 61361367, "body": "I think you may be correct sir!  Here&#39;s what I think is happening.. on my previous FreeBSD implementation, when a file is opened for append, the position is already moved to the end of the file, so ftell() works in one way, but under CentOS, you have to add     fseek(dfile,0,SEEK_END);  in order to get ftell() to give you something other than 0!"}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461783707, "post_id": 36896524, "comment_id": 61361441, "body": "I believe my code problems are the result of getting invalid record number references when appending."}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461785194, "post_id": 36896524, "comment_id": 61362395, "body": "will a fread() change the position of ftell() or is that implementation dependent and I may need to also do a seek?"}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461786432, "post_id": 36896524, "comment_id": 61363153, "body": "also does a fseek need to be done if a text file is opened a la fopen(filename,&quot;at&quot;); ?"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 2, "last_activity_date": 1461777127, "creation_date": 1461777127, "answer_id": 36896524, "question_id": 36896230, "link": "https://stackoverflow.com/questions/36896230/problems-getting-ftell-in-binary-append/36896524#36896524", "title": "Problems getting ftell() in binary append", "body": "<p>...so (in addition to bkVnet's answer) you must use <code>fseek(dfile,0,SEEK_END)</code> to seek to the end, ask <code>ftell</code> the position and divide that by <code>sizeof(user1_type)</code> to get the record id (i.e. the number of records already in the file, so plus 1 for the new record).</p>\n"}, {"comments": [{"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1461778043, "post_id": 36896819, "comment_id": 61357803, "body": "Thanks for the clarification. I suspected i could be implementation defined."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1461778106, "post_id": 36896819, "comment_id": 61357846, "body": "Nicely explain OP&#39;s &quot;code that was working on a server until it was moved to a different system&quot;"}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461782737, "post_id": 36896819, "comment_id": 61360824, "body": "WOW thanks... ok, I&#39;ve got to figure this out... what&#39;s happening is I need to know the file position before I do the write."}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461782773, "post_id": 36896819, "comment_id": 61360852, "body": "I was using FreeBSD and ftell() returned something different on that implementation.. now under CentOS, it works differently... do I need to open the file with a different mode/command?"}, {"owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 0, "creation_date": 1461783779, "post_id": 36896819, "comment_id": 61361484, "body": "I believe Paul Ogilvie has the right answer- a manual seek has to be executed before getting the position, the need for which may be implementation different.. I&#39;m testing this right now"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "reply_to_user": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "edited": false, "score": 1, "creation_date": 1461784613, "post_id": 36896819, "comment_id": 61362001, "body": "@TrentThree: I don&#39;t think you need to worry about different implementations - just do the <code>fseek(dfile,0,SEEK_END)</code> regardless.  If the file pointer is already positioned there, it&#39;s effectively a no-op, and for implementations that start with the file pointer at the beginning it will give you the behavior that you need.  If you open the file in append mode, a write will <i>always</i> seek to the end of the file before performing the write."}], "tags": [], "owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "is_accepted": false, "score": 3, "last_activity_date": 1461778069, "last_edit_date": 1461778069, "creation_date": 1461777990, "answer_id": 36896819, "question_id": 36896230, "link": "https://stackoverflow.com/questions/36896230/problems-getting-ftell-in-binary-append/36896819#36896819", "title": "Problems getting ftell() in binary append", "body": "<p>This behavior of <code>ftell(dfile)</code> here would be implementation defined. From C11 7.21.3 (similar wording in previous C standards):</p>\n\n<blockquote>\n  <p>If a file can support positioning requests (such as a disk file, as\n  opposed to a terminal), then a file position indicator associated with\n  the stream is positioned at the start (character number zero) of the\n  file, <strong>unless the file is opened with append mode in which case it is\n  implementation-defined</strong> whether the file position indicator is\n  initially positioned at the beginning or the end of the file.</p>\n</blockquote>\n"}], "owner": {"reputation": 83, "user_id": 4326181, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8b2882df9ea455d4a47eba0092a8761d?s=128&d=identicon&r=PG&f=1", "display_name": "Trent Three", "link": "https://stackoverflow.com/users/4326181/trent-three"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 36896524, "answer_count": 3, "score": 3, "last_activity_date": 1461786773, "creation_date": 1461776310, "last_edit_date": 1461786773, "question_id": 36896230, "link": "https://stackoverflow.com/questions/36896230/problems-getting-ftell-in-binary-append", "title": "Problems getting ftell() in binary append", "body": "<p>I've got some code that was working on a server until it was moved to a different system.  The problem seems to be here:</p>\n\n<p>given a structure I've defined elsewhere:</p>\n\n<pre><code>user1_type user1;              /* structure containing user data */\nuser1_type *user1_ptr=&amp;user1;\n</code></pre>\n\n<p>this routine appends the record to the end of the file</p>\n\n<pre><code>if ((dfile=fopen(filename,\"ab+\"))==NULL)  \n  error_message(\"Unable to open file for append.\",filename,1);\n else { /* append data */\n user1.recid=ftell(dfile);               /* update file position */\n\n fwrite(user1_ptr,sizeof(user1),1,dfile);\n fflush(dfile);\n fclose(dfile);\n</code></pre>\n\n<p>I can confirm the data gets appended in the file, but the value of user1.recid always returns 0 - any ideas why?   </p>\n\n<p>UPDATE:  Looks like the issue is not all implementations require a fseek() after fopen().   I obviously need an fseek(dfile,0,SEEK_END); before I do a ftell() when appending.  But if I want to read from the beginning of a text or binary file, is it also customary to place a fseek() right after fopen?  Does it vary depending upon the file type?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1461776560, "post_id": 36896198, "comment_id": 61356800, "body": "Why are you using libstdc++ 4.1? That&#39;s ancient.."}], "answers": [{"comments": [{"owner": {"reputation": 352, "user_id": 4177480, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/87ed99450f9bf33a1b4a749c5d8a28fd?s=128&d=identicon&r=PG&f=1", "display_name": "Rui Huang", "link": "https://stackoverflow.com/users/4177480/rui-huang"}, "edited": false, "score": 0, "creation_date": 1461777396, "post_id": 36896311, "comment_id": 61357358, "body": "I added operator &lt; now it is OK."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1461777090, "last_edit_date": 1461777090, "creation_date": 1461776538, "answer_id": 36896311, "question_id": 36896198, "link": "https://stackoverflow.com/questions/36896198/compiling-error-when-insert-pair-into-set/36896311#36896311", "title": "Compiling error when insert pair into set", "body": "<p><code>std::set</code> require you to specify an <code>operator &lt;</code> for the type it holds or you can supply your own comparison functor as a template parameter.  Since <code>stop</code> does not have an <code>operator &lt;</code> the <code>operator &lt;</code> from <code>std::pair</code> is not compileable since it relies on using the <code>operator &lt;</code> of the types it holds..  You either need to supply your own comparison functor or define an <code>operator &lt;</code> for <code>stop</code>.</p>\n"}], "owner": {"reputation": 352, "user_id": 4177480, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/87ed99450f9bf33a1b4a749c5d8a28fd?s=128&d=identicon&r=PG&f=1", "display_name": "Rui Huang", "link": "https://stackoverflow.com/users/4177480/rui-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1461776819, "accepted_answer_id": 36896311, "answer_count": 1, "score": -1, "last_activity_date": 1461777090, "creation_date": 1461776249, "last_edit_date": 1461776334, "question_id": 36896198, "link": "https://stackoverflow.com/questions/36896198/compiling-error-when-insert-pair-into-set", "closed_reason": "Duplicate", "title": "Compiling error when insert pair into set", "body": "<p>I can't understand why g++ returns error like this:</p>\n\n<pre><code>/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_pair.h: In function \u9225\u6996ool std::operator&lt;(const std::pair&lt;_T1, _T2&gt;&amp;, const std::pair&lt;_T1, _T2&gt;&amp;) [with _T1 = int, _T2 = stop]\u9225\n/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_function.h:227:   instantiated from \u9225\u6996ool std::less&lt;_Tp&gt;::operator()(const _Tp&amp;, const _Tp&amp;) const [with _Tp = std::pair&lt;int, stop&gt;]\u9225\n/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_tree.h:921:   instantiated from \u9225\u69aetd::pair&lt;typename std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;::iterator, bool&gt; std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;::insert_unique(const _Val&amp;) [with _Key = std::pair&lt;int, stop&gt;, _Val = std::pair&lt;int, stop&gt;, _KeyOfValue = std::_Identity&lt;std::pair&lt;int, stop&gt; &gt;, _Compare = std::less&lt;std::pair&lt;int, stop&gt; &gt;, _Alloc = std::allocator&lt;std::pair&lt;int, stop&gt; &gt;]\u9225\n/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_set.h:321:   instantiated from \u9225\u69aetd::pair&lt;typename std::_Rb_tree&lt;_Key, _Key, std::_Identity&lt;_Key&gt;, _Compare, typename _Alloc::rebind&lt;_Key&gt;::other&gt;::const_iterator, bool&gt; std::set&lt;_Key, _Compare, _Alloc&gt;::insert(const _Key&amp;) [with _Key = std::pair&lt;int, stop&gt;, _Compare = std::less&lt;std::pair&lt;int, stop&gt; &gt;, _Alloc = std::allocator&lt;std::pair&lt;int, stop&gt; &gt;]\u9225\nnewGraph.cpp:48:   instantiated from here\n    /usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/stl_pair.h:104: error: no match for \u9225\u69a6perator&lt;\u9225in \u9225\u6991_x-&gt;std::pair&lt;int, stop&gt;::second &lt; __y-&gt;std::pair&lt;int, stop&gt;::second\u9225\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;list&gt;\n\n#include &lt;set&gt;\n#include &lt;utility&gt; // for pair\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nconst int max_weight = INT_MAX;\n\nstruct stop {\n    std::string name_stop;\n    int id_stop;\n    bool operator !=(const stop &amp;rhs) const\n    {\n        return ((id_stop != rhs.id_stop) || (name_stop != rhs.name_stop));\n    }\n\n};\n\nstruct neighbor {\n\n    stop target;\n    int weight;\n    neighbor(stop arg_target, int arg_weight) : target(arg_target), weight(arg_weight) { }\n};\n\nstd::list&lt;stop&gt; dijkstraComputeAndGetShortestPaths(stop src,\n                                            stop dst,\n                                            std::vector&lt; std::vector&lt;neighbor&gt; &gt; &amp;adj_list,\n                                            std::vector&lt;int&gt; &amp;min_distance,\n                                            std::vector&lt;stop&gt; &amp;previous)\n{\n    stop fake_stop;\n    fake_stop.id_stop = INT_MAX;\n    fake_stop.name_stop = \"Null\";\n\n    std::list&lt;stop&gt; path;\n    int n = adj_list.size();\n    min_distance.clear();\n    min_distance.resize(n, max_weight);\n    min_distance[src.id_stop] = 0;\n    previous.clear();\n    previous.resize(n, fake_stop);\n    std::set&lt; std::pair&lt; int, stop &gt; &gt; vertex_queue;\n    vertex_queue.insert(std::make_pair(min_distance[src.id_stop], src));\n\n    while (!vertex_queue.empty()) \n    {\n        int dist = vertex_queue.begin()-&gt;first;\n        stop u = vertex_queue.begin()-&gt;second;\n        vertex_queue.erase(vertex_queue.begin());\n\n        // Visit each edge exiting u\n        const std::vector&lt;neighbor&gt; &amp;neighbors = adj_list[u.id_stop];\n\n        for(std::vector&lt;neighbor&gt;::const_iterator neighbor_iter = neighbors.begin();\n            neighbor_iter != neighbors.end();\n         neighbor_iter++)\n        {\n            stop v = neighbor_iter-&gt;target;\n            int weight = neighbor_iter-&gt;weight;\n            int distance_through_u = dist + weight;\n\n            if (distance_through_u &lt; min_distance[v.id_stop]) {\n                vertex_queue.erase(std::make_pair(min_distance[v.id_stop], v));\n\n                min_distance[v.id_stop] = distance_through_u;\n                previous[v.id_stop] = u;\n                vertex_queue.insert(std::make_pair(min_distance[v.id_stop], v));\n\n            }\n\n        }\n        if(u.id_stop == dst.id_stop)\n        {\n            std::cout &lt;&lt; \"Find : \";\n            for ( ; dst != fake_stop; dst = previous[dst.id_stop])\n            {\n                path.push_front(dst);\n            }\n\n            return path;\n        }\n    }\n}\n\nint main()\n{\n\n    std::vector&lt; std::vector&lt;neighbor&gt; &gt; adj_list(9);\n    stop stop_s;\n    stop_s.id_stop = 1001;\n    stop_s.name_stop = \"A\";\n\n    stop stop_x;\n    stop_x.id_stop = 1002;\n    stop_x.name_stop = \"B\";\n\n    adj_list[stop_s.id_stop].push_back(neighbor(stop_x, 5));\n\n    stop_s.id_stop = 1003;\n    stop_s.name_stop = \"C\";\n\n    adj_list[stop_x.id_stop].push_back(neighbor(stop_s, 15));\n\n    stop_x.id_stop = 1004;\n    stop_x.name_stop = \"D\";\n\n    adj_list[stop_s.id_stop].push_back(neighbor(stop_x, 20));\n\n    stop_s.id_stop = 1001;\n    stop_s.name_stop = \"A\";\n\n    std::vector&lt;int&gt; min_distance;\n    std::vector&lt;stop&gt; previous;\n\n    std::list&lt;stop&gt; path = dijkstraComputeAndGetShortestPaths(stop_s, stop_x, adj_list, min_distance, previous);\n    std::cout &lt;&lt; \"Distance from 1001 to 1004: \" &lt;&lt; min_distance[stop_x.id_stop] &lt;&lt; std::endl;\n    //std::cout &lt;&lt; \"Path : \";\n    #if 0\n    for (int index = 0; index &lt; path.size(); index++)\n    {\n        auto path_front = path.begin();\n        std::advance(path_front, index);\n\n        std::cout &lt;&lt; path_front-&gt;id_stop &lt;&lt; \" \";\n\n    }\n    std::cout &lt;&lt; std::endl;\n    #endif\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "numpy", "swig"], "answers": [{"tags": [], "owner": {"reputation": 2883, "user_id": 5162389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FTqjP.jpg?s=128&g=1", "display_name": "m7thon", "link": "https://stackoverflow.com/users/5162389/m7thon"}, "is_accepted": true, "score": 0, "last_activity_date": 1461781971, "creation_date": 1461781971, "answer_id": 36898127, "question_id": 36896172, "link": "https://stackoverflow.com/questions/36896172/undefined-symbol-error-when-importing-swigpython-module/36898127#36898127", "title": "&quot;undefined symbol&quot; error when importing SWIG+python module", "body": "<p>The difference between your code and the cookbook examples is that your code is C++. Therefore, you need to pass the <code>-c++</code> option to SWIG. In the construction of <code>Extension(...)</code> in setup.py, simply add <code>swig_opts=['-c++'],</code>.</p>\n\n<p>Note that distutils will still invoke the C compiler on the generated wrapper file, but this will have a <code>.cpp</code> extension, so it should be compiled correctly if the compiler is gcc or clang.</p>\n\n<p>My experience using distutils or setuptools for C++ SWIG extensions that are even slightly beyond trivial has been poor, so I invoke SWIG to generate a wrapper outside of distutils (I do it via a Makefile) and only use distutils to compile the extension from the wrapper file.</p>\n"}], "owner": {"reputation": 23, "user_id": 3310956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bffd2da1bb75271cbc118b02a6b8bb0?s=128&d=identicon&r=PG&f=1", "display_name": "Hi4ko", "link": "https://stackoverflow.com/users/3310956/hi4ko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "accepted_answer_id": 36898127, "answer_count": 1, "score": 1, "last_activity_date": 1461781971, "creation_date": 1461776173, "question_id": 36896172, "link": "https://stackoverflow.com/questions/36896172/undefined-symbol-error-when-importing-swigpython-module", "title": "&quot;undefined symbol&quot; error when importing SWIG+python module", "body": "<p>I created a *.so file for use in Python using SWIG, but when I import it I get this:</p>\n\n<pre><code>/_analyzer.so: undefined symbol: autocorellation\n</code></pre>\n\n<p>I did almost everything according to this instruction: <a href=\"https://scipy.github.io/old-wiki/pages/Cookbook/SWIG_NumPy_examples.html\" rel=\"nofollow\">https://scipy.github.io/old-wiki/pages/Cookbook/SWIG_NumPy_examples.html</a> </p>\n\n<p>my code is following:</p>\n\n<p>analyzer.h:</p>\n\n<pre><code>void autocorellation(double *in, double *out, long long n);\n</code></pre>\n\n<p>analyzer.cpp:</p>\n\n<pre><code>#include \"analyzer.h\"\n#include &lt;math.h&gt;\n#include &lt;stdlib.h&gt;\n\n#define PI 3.14159265358979323846\n\ntypedef struct {\n    double real;\n    double im;\n} Complex;\n\nvoid complex_multiply(Complex a,Complex b,Complex* c){\n    c-&gt;real = a.real * b.real - a.im * b.im;\n    c-&gt;im = a.real * b.im + a.im * b.real;\n}\n\nvoid complex_multiply_int(int a, Complex b,Complex* c){\n    c-&gt;real = a * b.real;\n    c-&gt;im = a * b.im;\n}\n\nvoid complex_sum(Complex a,Complex b,Complex* c){\n    c-&gt;real = a.real + b.real;\n    c-&gt;im = a.im + b.im;\n}\n\nvoid complex_conjugate(Complex* a,Complex* b,long long n){\n    for(int i = 0; i &lt; n; ++i){\n        b[i].real = a[i].real;\n        b[i].im = -1 * a[i].im;\n    }\n}\n\nlong long rev (long long num, long long lg_n) {\n    long long res = 0;\n    for (long long i=0; i &lt; lg_n; ++i)\n        if (num &amp; (1 &lt;&lt; i))\n            res |= 1 &lt;&lt; (lg_n-1-i);\n    return res;\n}\n\nvoid fft (Complex* a, long long n,bool invert) {\n    long long lg_n = 0;\n    while ((1 &lt;&lt; lg_n) &lt; n)\n        ++lg_n;\n    for (long long  i=0; i&lt;n; ++i){\n        long long r= rev(i,lg_n);\n        if (i &lt; r){\n            a[i].real = a[i].real +  a[r].real;\n            a[r].real = a[i].real -  a[r].real;\n            a[i].real = a[i].real -  a[r].real;\n            a[i].im = a[i].im +  a[r].im;\n            a[r].im = a[i].im -  a[r].im;\n            a[i].im = a[i].im -  a[r].im;\n        }\n    }\n    for (long long len=2; len&lt;=n; len &lt;&lt;= 1) {\n        double ang = 2*PI/len * (invert ? -1 : 1);\n        Complex wn;\n        wn.real = cos(ang);\n        wn.im = sin(ang);\n        for (long long i=0; i&lt;n; i+=len) {\n            Complex w;\n            w.real = 1;\n            w.im = 0;\n            long long ll = (long long)(len * 0.5);\n            for (long long j=0; j&lt; ll; ++j) {\n                Complex u = a[i+j],v;\n                complex_multiply(a[i+j+ll],w,&amp;v);\n                complex_sum(u,v,&amp;a[i+j]);\n                complex_multiply_int(-1,v,&amp;v);\n                complex_sum(u,v,&amp;a[i+j+ll]);\n                complex_multiply(w,wn,&amp;w);\n            }\n        }\n    }\n    if (invert)\n        for (long long i=0; i&lt;n; ++i){\n            a[i].real /= n;\n            a[i].im /= n;\n        }\n}\n\nvoid autocorellation(double *in, double *out, long long n){\n    long long le = 1;\n    while(n &gt; le)\n        le *= 2;\n    double m = 0;\n    for(int i = 0; i &lt; n; ++i)\n        m+=in[i];\n    m /= n;\n    for(int i = 0; i &lt; n; ++i)\n        in[i] -= m;\n    Complex* a = (Complex*) malloc(le*sizeof(Complex));\n    Complex* b = (Complex*) malloc(le*sizeof(Complex));\n    for(long long i = 0; i &lt; n; ++i){\n        a[i].im = 0;\n        a[i].real = in[i];\n    }\n    for(long long i = n; i &lt; le; ++i){\n        a[i].im = 0;\n        a[i].real = 0;\n    }\n    fft(a,le,false);\n    complex_conjugate(a,b,le);\n    Complex* c = (Complex*) malloc(le*sizeof(Complex));\n    for(long long i = 0; i &lt; le; ++i)\n        complex_multiply(b[i],a[i],&amp;c[i]);\n    fft(c,le,true);\n    for(long long i = 0; i &lt; n; ++i)\n        out[i] = (c[i].real/c[0].real);\n    free(a);\n    free(b);\n    free(c);\n}\n</code></pre>\n\n<p>analyzer.i:</p>\n\n<pre><code>    %module analyzer\n\n%{\n    #define SWIG_FILE_WITH_INIT\n    #include \"analyzer.h\"\n%}\n\n%include \"numpy.i\"\n\n%init %{\n    import_array();\n%}\n\n%apply (double* IN_ARRAY1,int DIM1) {(double *in, long long n)}\n%apply (double* ARGOUT_ARRAY1,int DIM1) {(double *out, long long n)}\n%include \"analyzer.h\"\n</code></pre>\n\n<p>setup.py:</p>\n\n<pre><code>    #! /usr/bin/env python\n\n# System imports\nfrom distutils.core import *\nfrom distutils      import sysconfig\n\n# Third-party modules - we depend on numpy for everything\nimport numpy\n\n# Obtain the numpy include directory.  This logic works across numpy versions.\ntry:\n    numpy_include = numpy.get_include()\nexcept AttributeError:\n    numpy_include = numpy.get_numpy_include()\n\n# ezrange extension module\n_analyzer = Extension(\"_analyzer\",\n                   [\"analyzer.i\",\"analyzer.cpp\"],\n                   include_dirs = [numpy_include],\n                   )\n\n# ezrange setup\nsetup(  name        = \"range function\",\n        description = \"Autocorellation function evaluation\",\n        author      = \"Bodya\",\n        version     = \"1.0\",\n        ext_modules = [_analyzer]\n        )\n</code></pre>\n"}, {"tags": ["c++", "c", "perl", "macros", "profiling"], "comments": [{"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 1, "creation_date": 1461965976, "post_id": 36896140, "comment_id": 61454297, "body": "Sympathies. Even if you find what you want, unless the program is really simple, you will get probably get a file of many Mb, mostly containing low-level stuff that doesn&#39;t tell you much. When I want to know how something works I use two methods. 1) Step Into/Over, which you looked down on, but don&#39;t. 2) Let it rip, and then hit &quot;pause&quot; or Ctrl-C to <a href=\"http://stackoverflow.com/a/378024/23771\"><i>stop it at random</i></a>. Do it a few times, each time looking at who is calling whom and why. This quickly gets you an understanding of how it spends the bulk of its time."}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "reply_to_user": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1461966451, "post_id": 36896140, "comment_id": 61454480, "body": "iron mike, you&#39;re probably right. The amount of time I spent figuring out how this could work, I could have stepped into millions of functions :/... one option would be to compile with <code>-finstruction-functions</code> flag only the files which I want to see. that would ignore the lower level stuff..."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1461966632, "post_id": 36896140, "comment_id": 61454542, "body": "I&#39;m flattered, I guess :) But really, try it. Don&#39;t expect instant results. What you want to know will gradually dawn on you. I&#39;ve done it several times. If there were a better way, I and others would have found it."}, {"owner": {"reputation": 891, "user_id": 3896299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3660fe434b2c13e0d54e35643b3b32b?s=128&d=identicon&r=PG&f=1", "display_name": "Garland", "link": "https://stackoverflow.com/users/3896299/garland"}, "edited": false, "score": 0, "creation_date": 1461968846, "post_id": 36896140, "comment_id": 61455367, "body": "I use Boost Log and created a wrapper for it:  <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/log/doc/html/index.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_60_0/libs/log/doc/html/index.html</a>. I created &quot;TraceIn&quot; (for function entry), &quot;TraceOut&quot; (for function exit), and other Severity Levels like &quot;Verbose&quot;, &quot;Info&quot;, &quot;Warning&quot;, and &quot;Error&quot;.  For each log entry, there are timestamp, thread ID, level, and function name added."}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "reply_to_user": {"reputation": 891, "user_id": 3896299, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3660fe434b2c13e0d54e35643b3b32b?s=128&d=identicon&r=PG&f=1", "display_name": "Garland", "link": "https://stackoverflow.com/users/3896299/garland"}, "edited": false, "score": 0, "creation_date": 1461969350, "post_id": 36896140, "comment_id": 61455535, "body": "@gxy can you submit an answer with your solution?"}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "edited": false, "score": 0, "creation_date": 1462077020, "post_id": 36896140, "comment_id": 61482638, "body": "@cross Can you be more specific with your question. The etrace utility as is works for me. The simulator you want to trace, are you compiling it because for this to work you need to be and if you&#39;re compiling it whats stoping you adding this?"}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "reply_to_user": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "edited": false, "score": 0, "creation_date": 1462099186, "post_id": 36896140, "comment_id": 61487066, "body": "@Harry wrote an update..."}, {"owner": {"reputation": 843, "user_id": 6020333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea9014ebf1e1188cac53beb61560df8?s=128&d=identicon&r=PG&f=1", "display_name": "bart", "link": "https://stackoverflow.com/users/6020333/bart"}, "edited": false, "score": 0, "creation_date": 1462108105, "post_id": 36896140, "comment_id": 61489665, "body": "Can you provide a sample C++ source file with a relevant Makefile that would produce minimal example of the binary that <code>etrace.pl</code> has trouble analyzing?"}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 0, "creation_date": 1462127352, "post_id": 36896140, "comment_id": 61496271, "body": "I would, but that is unfeasible as it is a complete simulation framework. But you can find all you asked here: <a href=\"https://github.com/sommer/veins\" rel=\"nofollow noreferrer\">github.com/sommer/veins</a>"}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "edited": false, "score": 0, "creation_date": 1462129560, "post_id": 36896140, "comment_id": 61497056, "body": "@Cross, do you want this to work on Mac or Linux."}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "reply_to_user": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "edited": false, "score": 0, "creation_date": 1462130571, "post_id": 36896140, "comment_id": 61497366, "body": "@Harry linux would suffice atm"}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "edited": false, "score": 0, "creation_date": 1462130831, "post_id": 36896140, "comment_id": 61497456, "body": "Then I think you&#39;re all set with the Perl changes I gave."}], "answers": [{"comments": [{"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 0, "creation_date": 1462138758, "post_id": 36969008, "comment_id": 61500091, "body": "your solution sounds reasonable, and I am certain it would work in most cases... but in the case of this big project I get questions marks from the perl script. See the update."}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "reply_to_user": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 2, "creation_date": 1462139435, "post_id": 36969008, "comment_id": 61500304, "body": "It&#39;s using dynamic libraries and is unable to resolve the symbols or the address offsets are wrong. You keep changing the question ie it&#39;s a moving target, if I answer your next question there&#39;ll be another question and another for the next several days. You need to understand how etrace works and get it working using both the static and dynamic methods using the crumble program. At the moment it sounds like you&#39;re trying to add something you don&#39;t understand to a program you don&#39;t understand in order to understand it."}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 0, "creation_date": 1462139855, "post_id": 36969008, "comment_id": 61500453, "body": "I agree completely with what you say... <code>note to self and others:</code> probably spending couple of hours understanding how the tool works saves much more time on trying to patch things here and there... but since the questions has got some attention it would be helpful to bring it to some conclusion"}, {"owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 0, "creation_date": 1462483070, "post_id": 36969008, "comment_id": 61667822, "body": "I accepted your answer for your efforts to solve the question. However (if you find fit) you might want to extend it to provide a definite solution."}, {"owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "reply_to_user": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "edited": false, "score": 0, "creation_date": 1462483435, "post_id": 36969008, "comment_id": 61667959, "body": "My solution worked on Linux and I also had it working on the Mac with some tweaking for underscores etc. I&#39;m not sure what else I could do."}], "tags": [], "owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "is_accepted": true, "score": 4, "last_activity_date": 1462483626, "last_edit_date": 1462483626, "creation_date": 1462120076, "answer_id": 36969008, "question_id": 36896140, "link": "https://stackoverflow.com/questions/36896140/how-to-use-etrace-with-a-dynamic-library-for-chronological-traceing-of-function/36969008#36969008", "title": "How to use etrace with a dynamic library for chronological traceing of function calls in C++?", "body": "<h2>Fixing the Perl Script</h2>\n\n<blockquote>\n  <p>Hexadecimal number > 0xffffffff non-portable\"</p>\n</blockquote>\n\n<p>This is a warning from <code>hex</code> because it's detecting a possibly non-portable value (something > 32bits). </p>\n\n<p>At the very top of the script, add this:</p>\n\n<pre><code>use bigint qw/hex oct/;\n</code></pre>\n\n<p>When this tool was written, I suspect the people were on 32-bit machines. You can compile the program using 32-bit with the flag <code>-m32</code>, but if you change the perl script as mentioned above you won't need to. </p>\n\n<p>Note, if you're on a Mac, you can't use <code>mknod</code> the way it's used in the script to create a pipe; you need to use <code>mkfifo</code> with no arguments instead. </p>\n\n<p>On Linux, adding the <code>bigint</code> fix above works. You then need to run both commands from the same directory, I did this using <code>example2</code>:</p>\n\n<pre><code>../src/etrace.pl crumble\n# Switch to a different terminal\n./crumble\n</code></pre>\n\n<p>and I get this on the Mac and Linux</p>\n\n<pre><code>\\-- main\n|   \\-- Crumble_make_apple_crumble\n|   |   \\-- Crumble_buy_stuff\n|   |   |   \\-- Crumble_buy\n|   |   |   \\-- Crumble_buy\n|   |   |   \\-- Crumble_buy\n|   |   |   \\-- Crumble_buy\n|   |   |   \\-- Crumble_buy\n|   |   \\-- Crumble_prepare_apples\n|   |   |   \\-- Crumble_skin_and_dice\n|   |   \\-- Crumble_mix\n|   |   \\-- Crumble_finalize\n|   |   |   \\-- Crumble_put\n|   |   |   \\-- Crumble_put\n|   |   \\-- Crumble_cook\n|   |   |   \\-- Crumble_put\n|   |   |   \\-- Crumble_bake\n</code></pre>\n\n<h2>About the Dynamic Library...</h2>\n\n<p>When you load a dynamic library, the address in the object file is not the address that will be used when running. What etrace does is take a function name from a header you specify. For example, in the case of <code>example2</code>, this would be the following:</p>\n\n<pre><code>#include \"crumble.h\"\n#define PTRACE_REFERENCE_FUNCTION Crumble_buy\n</code></pre>\n\n<p>You would then edit the makefile to make sure that the header file can be found:</p>\n\n<pre><code>CFLAGS = -g -finstrument-functions -I.\n</code></pre>\n\n<p>Note the addition of the include <code>-I.</code>. The address of the symbol from the header (in our case, <code>Crumble_buy</code>) is used to calculate the offset between the object file and the actual address; this allows the program to calculate the correct address to find the symbol.</p>\n\n<p>If you look at the output of <code>nm</code>, you get something like the following: </p>\n\n<pre><code>0000000100000960 T _Crumble_bake\n00000001000005b0 T _Crumble_buy\n0000000100000640 T _Crumble_buy_stuff\n00000001000009f0 T _Crumble_cook\n</code></pre>\n\n<p>The addresses on the left are relative, that is, at runtime, these addresses actually change. The etrace.pl program is storing these in a hash like this:</p>\n\n<pre><code>$VAR1 = {\n          '4294969696' =&gt; '_Crumble_bake',\n          '4294969424' =&gt; '_Crumble_put',\n          '4294970096' =&gt; '_main',\n          '4294969264' =&gt; '_Crumble_mix',\n          '4294970704' =&gt; '_gnu_ptrace_close',\n          '4294967296' =&gt; '__mh_execute_header',\n          '4294968752' =&gt; '_Crumble_buy',\n          '4294968896' =&gt; '_Crumble_buy_stuff',\n          '4294969952' =&gt; '_Crumble_make_apple_crumble',\n          '4294969184' =&gt; '_Crumble_prepare_apples',\n          '4294971512' =&gt; '___GNU_PTRACE_FILE__',\n          '4294971504' =&gt; '_gnu_ptrace.first',\n          '4294970208' =&gt; '_gnu_ptrace',\n          '4294970656' =&gt; '___cyg_profile_func_exit',\n          '4294970608' =&gt; '___cyg_profile_func_enter',\n          '4294969552' =&gt; '_Crumble_finalize',\n          '4294971508' =&gt; '_gnu_ptrace.active',\n          '4294969840' =&gt; '_Crumble_cook',\n          '4294969088' =&gt; '_Crumble_skin_and_dice',\n          '4294970352' =&gt; '_gnu_ptrace_init'\n        };\n</code></pre>\n\n<p>Note the leading underscore because this is on a Mac using clang. At runtime, these addresses are not correct, but their relative offsets are. If you can work out what the offset is, you can adjust the addresses you get at runtime to find the actual symbol. The code that does this follows:</p>\n\n<pre><code> if ($offsetLine =~ m/^$REFERENCE_OFFSET\\s+($SYMBOL_NAME)\\s+($HEX_NUMBER)$/) {\n    # This is a dynamic library; need to calculate the load offset\n    my $offsetSymbol  = \"_$1\";\n    my $offsetAddress = hex $2; \n\n    my %offsetTable = reverse %SYMBOLTABLE;\n\n    print Dumper(\\%offsetTable);\n    $baseAddress = $offsetTable{$offsetSymbol} - $offsetAddress;\n    #print(\"offsetSymbol == $offsetSymbol\\n\");\n    #print(\"offsetAddress == $offsetAddress\\n\");\n    #print(\"baseoffsetAddress == $offsetAddress\\n\");\n    $offsetLine = &lt;CALL_DATA&gt;;\n  } else {\n    # This is static\n    $baseAddress = 0;\n  }\n</code></pre>\n\n<p>This is what the line <code>#define PTRACE_REFERENCE_FUNCTION Crumble_buy</code> is for. The <code>C</code> code in ptrace is using that MACRO, and if defined, outputting the address of that function as the first thing. It then calculates the offset, and for all subsequent addresses, adjusts them by this amount, looking up the correct symbol in the hash.</p>\n"}], "owner": {"reputation": 950, "user_id": 4317408, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5f7519c4f04b57198ce87f657da139df?s=128&d=identicon&r=PG&f=1", "display_name": "cross", "link": "https://stackoverflow.com/users/4317408/cross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1187, "favorite_count": 1, "accepted_answer_id": 36969008, "answer_count": 1, "score": 15, "last_activity_date": 1577750632, "creation_date": 1461776088, "last_edit_date": 1577750632, "question_id": 36896140, "link": "https://stackoverflow.com/questions/36896140/how-to-use-etrace-with-a-dynamic-library-for-chronological-traceing-of-function", "title": "How to use etrace with a dynamic library for chronological traceing of function calls in C++?", "body": "<p><strong>Background:</strong></p>\n\n<p>I have one big simulation tool, and I need to understand its logical behavior. In order to do that, the most of help I would get if I have the chronological order of function calls, for a minimal working example.</p>\n\n<p>I found many tools online, like <a href=\"http://www.logix.cz/michal/devel/CygProfiler/\" rel=\"nofollow noreferrer\">CygProfiler</a> and <a href=\"https://github.com/elcritch/etrace\" rel=\"nofollow noreferrer\">etrace</a>. I became so miserable on finding a solution that I started to follow the craziest solution of using \"step into\" with the debugger. Which is a good option if you have a small program but not a complete simulation tool.</p>\n\n<hr>\n\n<p><strong>Problem:</strong></p>\n\n<p>One of the problems I face is that the above-mentioned solutions are originally meant for <code>C</code> and they generate a static file (<code>*.o</code>) when compiled. On the other hand the simulation tool generates a shared library (<code>.so</code>). I don't have much knowledge on lower level stuff so I seem to fail when I try linking them.</p>\n\n<p>I looked specifically at the <code>etrace</code> <a href=\"https://github.com/elcritch/etrace/blob/master/README\" rel=\"nofollow noreferrer\">documentation</a>, and it says:</p>\n\n<blockquote>\n  <p>To see how to modify ptrace.c to work with a dynamic library, look at\n  the example2 directory. The sources there also create a stand-alone\n  executable, but the PTRACE_REFERENCE_FUNCTION macro is defined just as\n  it would be for a dynamic library.</p>\n</blockquote>\n\n<p>If you look at the repo there is no difference between the files in <code>example</code> and <code>example2</code> folders. Only there is an extra <code>.h</code> file in <code>example2</code>.</p>\n\n<p>On the other hand, if you look at <code>src/ptrace.c</code> there it says:</p>\n\n<blockquote>\n  <p>When using ptrace on a dynamic library, you must set the\n    PTRACE_REFERENCE_FUNCTION macro to be the name of a function in the\n    library. The address of this function when loaded will be the first\n    line output to the trace file and will permit the translation of the\n    other entry and exit pointers to their symbolic names. You may set\n    the macro PTRACE_INCLUDE with any #include directives needed for\n    that function to be accesible to this source file.</p>\n</blockquote>\n\n<p>a little below there is the commented code:</p>\n\n<pre><code>/* When using ptrace on a dynamic library, the following must be defined:\n#include \"any files needed for PTRACE_REFERENCE_FUNCTION\"\n#define PTRACE_REFERENCE_FUNCTION functionName\n`*/\n</code></pre>\n\n<hr>\n\n<p><strong>Question:</strong></p>\n\n<p>In essence the question is the following: How to use <code>etrace</code> with a dynamic library?</p>\n\n<p>Do I need to #include any files?</p>\n\n<blockquote>\n  <p>To trace a stand-alone program, there is no need to #include any\n  additional file. Just link your code against ptrace.c and use the\n  -finstrument-functions option as a compile option for gcc. This should do it.</p>\n</blockquote>\n\n<p>How do I link a C++ code which is built via makefiles against <code>ptrace.c</code></p>\n\n<p><strong>Final Note:</strong> I would appreciate if someone bears with my ignorance and provides a step-by-step solution to my question.</p>\n\n<hr>\n\n<p><strong>Update 1:</strong></p>\n\n<p>I managed to add the libraries related to etrace to the simulation tool, and it executes fine. </p>\n\n<p>However, (probably because the scripts are too old, or are not meant for use with C++) I get the following error when using the <a href=\"https://github.com/elcritch/etrace/blob/master/src/etrace.pl\" rel=\"nofollow noreferrer\">perl script</a> provided by default by <code>etrace</code></p>\n\n<blockquote>\n<pre><code>Hexadecimal number &gt; 0xffffffff non-portable\"\n</code></pre>\n</blockquote>\n\n<p>Probably this changes a bit the nature of this question, turning it more to a perl related issue at this point. </p>\n\n<p>If this problem is solved, I hope <code>etrace</code> will work with a complicated project and I will provide the details</p>\n\n<hr>\n\n<p><strong>Update 2:</strong></p>\n\n<p>I took the suggestions from @Harry, and I believe that would work in most projects. However in my case I get the following from the perl script:</p>\n\n<pre><code>Use of uninitialized value within %SYMBOLTABLE in list assignment at etrace2.pl line 99, &lt;CALL_DATA&gt; line 1.\n\n\\-- ???\n|   \\-- ???\n\\-- ???\n|   \\-- ???\n|   |   \\-- ???\n\\-- ???\n|   \\-- ???\n\\-- ???\n|   \\-- ???\n\\-- ???\n|   \\-- ???\n\\-- ???\n|   \\-- ???\n\\-- ???\n|   \\-- ???\n</code></pre>\n\n<p>Due to autegenerated makefiles I used the <a href=\"https://stackoverflow.com/a/36959597/4317408\">LD_PRELOAD</a> to load the shared library for etrace.so which I got as follows:</p>\n\n<pre><code>gcc -g -finstrument-functions -shared -fPIC ptrace.c -o etrace.so -I &lt;path-to-etrace&gt;\n</code></pre>\n\n<p>I created the dummy etrace.h inside the tool:</p>\n\n<pre><code>#ifndef __ETRACE_H_\n#define __ETRACE_H_\n\n#include &lt;stdio.h&gt;\n\nvoid Crumble_buy(char * what, int quantity, char * unit);\n\n\nvoid Crumble_buy(char * what, int quantity, char * unit)\n{\n    printf(\"buy %d %s of %s\\n\", quantity, unit, what);\n}\n\n#endif\n</code></pre>\n\n<p>and used <code>Crumble_buy</code> for the <code>#define</code> and the <code>etrace.h</code> for the <code>#include</code>.</p>\n"}, {"tags": ["c++", "c", "vsync", "vulkan"], "answers": [{"comments": [{"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 4, "creation_date": 1461841330, "post_id": 36900602, "comment_id": 61387504, "body": "FIFO is the one mode that is always available"}, {"owner": {"reputation": 3724, "user_id": 6077683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/69WTF.jpg?s=128&g=1", "display_name": "Sascha Willems", "link": "https://stackoverflow.com/users/6077683/sascha-willems"}, "reply_to_user": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 4, "creation_date": 1461854247, "post_id": 36900602, "comment_id": 61397740, "body": "Technically yes, at is required to be supported by the specs. But you should still have a fallback and don&#39;t rely on the presence of VK_PRESENT_MODE_FIFO_KHR, e.g. if you&#39;re running on non-conformant drivers or implementations."}], "tags": [], "owner": {"reputation": 3724, "user_id": 6077683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/69WTF.jpg?s=128&g=1", "display_name": "Sascha Willems", "link": "https://stackoverflow.com/users/6077683/sascha-willems"}, "is_accepted": true, "score": 17, "last_activity_date": 1461823015, "last_edit_date": 1461823015, "creation_date": 1461790182, "answer_id": 36900602, "question_id": 36896021, "link": "https://stackoverflow.com/questions/36896021/enabling-vsync-in-vulkan/36900602#36900602", "title": "Enabling VSync in Vulkan", "body": "<p>Though you could realize that by using a fence the correct way would be to use a presentation mode that waits for the vertical blank like VK_PRESENT_MODE_FIFO_KHR. </p>\n\n<p>Intel has a great article that contains a detailed look at Vulkan's different presentation modes <a href=\"https://software.intel.com/en-us/api-without-secrets-introduction-to-vulkan-part-2?language=en#_Toc445674479\">over here</a></p>\n\n<p>Note that this mode may not be available on every device and that some drivers may ignore the v-sync even if you select a corresponding presentation mode. So if you use one of these modes and don't get v-sync you may have to wait for a newer driver.</p>\n\n<p>But if it's implemented inside the driver this is the correct way of doing v-sync across all platforms supported by Vulkan.</p>\n"}], "owner": {"reputation": 7060, "user_id": 105466, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jMWs6.png?s=128&g=1", "display_name": "SurvivalMachine", "link": "https://stackoverflow.com/users/105466/survivalmachine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6770, "favorite_count": 3, "accepted_answer_id": 36900602, "answer_count": 1, "score": 12, "last_activity_date": 1461855742, "creation_date": 1461775719, "question_id": 36896021, "link": "https://stackoverflow.com/questions/36896021/enabling-vsync-in-vulkan", "title": "Enabling VSync in Vulkan", "body": "<p>How do I use vsync in Vulkan? I'm on Windows, but the code should also work on Linux. Is it implemented by inserting a fence in <code>vkAcquireNextImageKHR</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 2, "creation_date": 1461775726, "post_id": 36895983, "comment_id": 61356244, "body": "To prevent the application from closing by waiting for user input i guess."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1461775739, "post_id": 36895983, "comment_id": 61356251, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/9386651/pause-screen-at-program-completion-in-c\">Pause screen at program completion in C</a>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1461775742, "post_id": 36895983, "comment_id": 61356253, "body": "It&#39;s just there so that you have to hit any key before continuing."}], "answers": [{"tags": [], "owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "is_accepted": true, "score": 6, "last_activity_date": 1461775781, "creation_date": 1461775781, "answer_id": 36896045, "question_id": 36895983, "link": "https://stackoverflow.com/questions/36895983/what-is-the-point-of-calling-getchar-after-printing-an-error-with-fprintf/36896045#36896045", "title": "What is the point of calling &quot;getchar()&quot; after printing an error with &quot;fprintf&quot;?", "body": "<p>It's probably because the .exe is a command-line utility.  Without the getchar() call, if a user simply double-clicks the .exe on Windows, and the program gets an error right away and exits, the user will just see a command prompt window pop up and then disappear, and never see the error.  Waiting for user input gives the user a chance to see what happened.</p>\n"}, {"tags": [], "owner": {"reputation": 568, "user_id": 2847010, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/fYr5h.jpg?s=128&g=1", "display_name": "Francesco Argese", "link": "https://stackoverflow.com/users/2847010/francesco-argese"}, "is_accepted": false, "score": 1, "last_activity_date": 1461776272, "creation_date": 1461776272, "answer_id": 36896211, "question_id": 36895983, "link": "https://stackoverflow.com/questions/36895983/what-is-the-point-of-calling-getchar-after-printing-an-error-with-fprintf/36896211#36896211", "title": "What is the point of calling &quot;getchar()&quot; after printing an error with &quot;fprintf&quot;?", "body": "<p>getchar() is used to pause the application after the execution in order to leave the command line and the output visible to the user.</p>\n\n<p>Without getchar function the application would exit immediately and, if it was launched from a graphical user interface, the results/errors would not be visible.</p>\n"}], "owner": {"reputation": 35, "user_id": 6262656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qq3z0.jpg?s=128&g=1", "display_name": "Kieran Williams", "link": "https://stackoverflow.com/users/6262656/kieran-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 36896045, "answer_count": 2, "score": 1, "last_activity_date": 1461777160, "creation_date": 1461775604, "last_edit_date": 1461777160, "question_id": 36895983, "link": "https://stackoverflow.com/questions/36895983/what-is-the-point-of-calling-getchar-after-printing-an-error-with-fprintf", "title": "What is the point of calling &quot;getchar()&quot; after printing an error with &quot;fprintf&quot;?", "body": "<p>I'm currently in the process of learning to use OpenGL, and to start I'm following a series of tutorials from <a href=\"http://www.opengl-tutorial.org/\" rel=\"nofollow\">http://www.opengl-tutorial.org/</a>. </p>\n\n<p>In the first tutorial, they begin main() with this if-statement: </p>\n\n<pre><code>// Initialize GLFW\nif (!glfwInit() ) \n{\n  fprintf( stderr, \"failed to initialize GLFW\\n\" );\n  getchar();\n  return -1;\n}\n</code></pre>\n\n<p>I understand that fprintf is an unbuffered print that's kind of the standard for indicating an error. And return -1 makes sense too. But what's the point of calling getchar() after indicating an error?</p>\n\n<p>Thanks. </p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461775801, "post_id": 36895954, "comment_id": 61356298, "body": "#2 <code>std::get&lt;Is&gt;(tuple)...</code> unpacks the entire expression for each value of <code>Is...</code>"}, {"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1461776056, "post_id": 36895954, "comment_id": 61356451, "body": "#3 is of the form 1-4 (i.e. <code>get&lt;0&gt;(tuple)</code> will return the 1st entry in the tuple, <code>get&lt;1&gt;(tuple)</code> will return 2nd and so on...) The template argument is a numeric index which gives the tuple entry to return - NOTE: this is compile time.."}, {"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1461776114, "post_id": 36895954, "comment_id": 61356495, "body": "#4 the argument to the function itself is redundant, the deduced type (which provides the index sequence is what is relevant here, in this case the sequence of numbers <code>0,1,2,3</code> etc.)"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461776609, "post_id": 36895954, "comment_id": 61356841, "body": "<code>std::index_sequence</code> is a <code>size_t</code> specialization of <code>std::integer_sequence</code>. It might help you to read the proposal for <code>integer_sequence</code> here <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3658.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3658.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461776544, "post_id": 36896096, "comment_id": 61356789, "body": "#3 he&#39;s asking you to follow the link and tell him which of the 8 variants of std::get listed is the one being invoked"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6262188"}, "edited": false, "score": 0, "creation_date": 1461779016, "post_id": 36896096, "comment_id": 61358443, "body": "Is represents &#39;the current value of Is&#39; while Is... is being unpacked. The trailing ... causes unpacking of the expression in which Is is used.  I still don&#39;t understand. Please explain more :)"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1461780592, "post_id": 36896096, "comment_id": 61359427, "body": "@J.Doe added an example which you can compile (c++14). Hopefully the inline comments will get you started."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 2, "last_activity_date": 1461780557, "last_edit_date": 1461780557, "creation_date": 1461775957, "answer_id": 36896096, "question_id": 36895954, "link": "https://stackoverflow.com/questions/36895954/variadic-templates-some-issues/36896096#36896096", "title": "Variadic templates. Some issues", "body": "<blockquote>\n  <p>What does return std::index_sequence_for()) ?</p>\n</blockquote>\n\n<p>assuming T_value... is T, T, T (i.e. 3 types...)</p>\n\n<pre><code>std::index_sequence&lt;0, 1, 2&gt;\n</code></pre>\n\n<blockquote>\n  <p>Why in yadda(std::get(tuple)...); there is Is instead of Is...? Therefore, what does it mean Is? Is... in unpacked ( expanded ) types pack but what is Is.</p>\n</blockquote>\n\n<p><code>Is</code> represents 'the current value of Is' while <code>Is...</code> is being unpacked. The trailing <code>...</code> causes unpacking of the expression in which <code>Is</code> is used.</p>\n\n<blockquote>\n  <p>Especially, which std::get fits from (1)-(8) (<a href=\"http://en.cppreference.com/w/cpp/utility/tuple/get\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/utility/tuple/get</a>)</p>\n</blockquote>\n\n<p>In this case the tuple reference is a <code>const std::tuple&lt;T_values...&gt;&amp;</code> so it'll be number 3.</p>\n\n<blockquote>\n  <p>Why call_yadda_with_tuple gets std::index_sequence. After all, this argument is nameless so it is useless. I suppose that it is connected with deduction types but I cannot see how does it help?</p>\n</blockquote>\n\n<p>It's there simply to cause <code>Is...</code> to exist and therefore allow you to expand across all <code>Is</code> in the sequence.</p>\n\n<p>edit:</p>\n\n<p>Here's an example with comments that hopefully explain what's going on</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;tuple&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\n// for any value I, write a comma and space to stdout\n// (i.e. ignore the value I)\ntemplate&lt;std::size_t I&gt;\nvoid emit_sep()\n{\n    std::cout &lt;&lt; \", \";\n}\n\n// specialise for when I is zero... no comma in this case\ntemplate&lt;&gt;\nvoid emit_sep&lt;0&gt;()\n{\n}\n\n// emit and value at some position I. Use emit_sep&lt;I&gt; to determine whether\n// to print a separator\ntemplate&lt;std::size_t I, class T&gt;\nvoid emit(const T&amp; t)\n{\n    emit_sep&lt;I&gt;();\n    std::cout &lt;&lt; t;\n}\n\n// given a tuple type and a sequence of integers (Is...) emit the value\n// at each index position of the tuple. Take care to emit a separator only\n// before each element after the first one\ntemplate&lt;class Tuple, size_t...Is&gt;\nvoid impl_show_it(const Tuple&amp; tup, std::index_sequence&lt;Is...&gt;)\n{\n    using expand = int[];\n\n    std::cout &lt;&lt; \"here are the indexes in the index_sequence: \";\n    // the following line will expand (in our example) to:\n    // void(int[] { 0, \n    //      (emit&lt;0&gt;(0), 0),\n    //      (emit&lt;1&gt;(1), 0),\n    //      (emit&lt;2&gt;(2), 0),\n    //      });\n    // and the optimiser will remove the operations which have no observable\n    // side-effects (namely, building an array of ints which is never used)\n    // so the code emitted will be equivalent to:\n    // emit&lt;0&gt;(0); emit&lt;1&gt;(1); emit&lt;2&gt;(2);\n    //\n    void(expand {\n        0,\n        (emit&lt;Is&gt;(Is), 0)...\n    });\n    std::cout &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"here are the values in the tuple: \";\n    void(expand {\n        0,\n        (emit&lt;Is&gt;(std::get&lt;Is&gt;(tup)), 0)...\n    });\n    std::cout &lt;&lt; std::endl;\n}\n\n// for some tuple type, compute the size of the tuple, build an index sequence\n// representing each INDEX in the tuple and then use that sequence to call\n// impl_show_it in order to actually perform the write\ntemplate&lt;class Tuple&gt;\nvoid show_it(const Tuple&amp; tup)\n{\n    constexpr auto tuple_size = std::tuple_size&lt;Tuple&gt;::value;\n    auto sequence = std::make_index_sequence&lt;tuple_size&gt;();\n    impl_show_it(tup, sequence);\n}\n\n// make a tuple and then show it on stdout\nint main()\n{\n    auto t = std::make_tuple(6, std::string(\"hello\"), 5.5);\n    show_it(t);\n}\n</code></pre>\n\n<p>expected results:</p>\n\n<pre><code>here are the indexes in the index_sequence: 0, 1, 2\nhere are the values in the tuple: 6, hello, 5.5\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6262188"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 36896096, "answer_count": 1, "score": 0, "last_activity_date": 1461780557, "creation_date": 1461775523, "question_id": 36895954, "link": "https://stackoverflow.com/questions/36895954/variadic-templates-some-issues", "title": "Variadic templates. Some issues", "body": "<pre><code>template &lt;class... T_values&gt;\nclass Thing {\npublic:\n  void something(T_values... values) {\n    tuple_ = std::tuple&lt;T_values...&gt;(values...);\n  }\n\n  void do_something_with_values() {\n     call_yadda_with_tuple(tuple_,\n      std::index_sequence_for&lt;T_value...&gt;())\n  }\n\n  void yadda(T... values);\n\nprivate:\n  //The helper method.\n  template&lt;std::size_t... Is&gt;\n  void call_yadda_with_tuple(const std::tuple&lt;T_values...&gt;&amp; tuple,\n    std::index_sequence&lt;Is...&gt;) {\n    yadda(std::get&lt;Is&gt;(tuple)...);\n  }\n\n  std::tuple&lt;T_values...&gt; tuple_;\n};\n</code></pre>\n\n<p>Above sourcecode comes from: <a href=\"https://www.murrayc.com/permalink/2015/12/05/modern-c-variadic-template-parameters-and-tuples/\" rel=\"nofollow\">https://www.murrayc.com/permalink/2015/12/05/modern-c-variadic-template-parameters-and-tuples/</a></p>\n\n<p>I would like to ask some questions:</p>\n\n<ol>\n<li>What does return <code>std::index_sequence_for&lt;T_value...&gt;())</code> ?</li>\n<li>Why in <code>yadda(std::get&lt;Is&gt;(tuple)...);</code> there is <code>Is</code> instead of <code>Is...</code>? Therefore, what does it mean <code>Is</code>? <code>Is...</code> in unpacked ( expanded ) types pack but what is <code>Is</code>. </li>\n<li>Especially, which <code>std::get</code> fits from (1)-(8)\n(<a href=\"http://en.cppreference.com/w/cpp/utility/tuple/get\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/utility/tuple/get</a>)</li>\n<li>Why <code>call_yadda_with_tuple</code> gets <code>std::index_sequence&lt;Is...&gt;</code>.\nAfter all, this argument is nameless so it is useless. I suppose that it is connected with deduction types but I cannot see how does it help?</li>\n</ol>\n"}, {"tags": ["android", "c++", "c++11", "c++builder"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1461782511, "post_id": 36895851, "comment_id": 61360666, "body": "bccaarm is a C++11 compiler, you don&#39;t have to do anything extra to set it to C++11. I don&#39;t have Berlin installed yet, what does line 1465 of <code>sysmac.h</code> actually look like?"}, {"owner": {"reputation": 931, "user_id": 5106997, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d66d1ef88c27f499c2ce44e3a40d224f?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130brahim", "link": "https://stackoverflow.com/users/5106997/%c4%b0brahim"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1461785371, "post_id": 36895851, "comment_id": 61362506, "body": "Look at the picture: <a href=\"http://s32.postimg.org/5n12szgxh/cppbuilderberlinerror.png\" rel=\"nofollow noreferrer\">link</a>. Thanks."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1461789519, "post_id": 36895851, "comment_id": 61364997, "body": "Have you searched your IDE installation folders to make sure a <code>type_traits</code> file exists?  If so, then your project&#39;s includes path is likely not configured correctly."}, {"owner": {"reputation": 931, "user_id": 5106997, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d66d1ef88c27f499c2ce44e3a40d224f?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130brahim", "link": "https://stackoverflow.com/users/5106997/%c4%b0brahim"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1461795983, "post_id": 36895851, "comment_id": 61368126, "body": "I couldn&#39;t find reason of the error. I looked at the installation folders but there isn&#39;t type_traits file."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1461796368, "post_id": 36895851, "comment_id": 61368271, "body": "Then you <i>do</i> have a reason: the <code>type_traits</code> file is not installed. Maybe your IDE install is incomplete, try reinstalling again. Or file a bug report to Embarcadero with <a href=\"http://quality.embarcadero.com\" rel=\"nofollow noreferrer\">Quality Portal</a>. <code>type_traits</code> is a standard C++11 header file, so it should be present. Boost (which you can install via GetIt) also has its own <code>type_traits</code> file, if you want to try installing that."}, {"owner": {"reputation": 2313, "user_id": 339392, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/niSL1.png?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/339392/sam"}, "edited": false, "score": 0, "creation_date": 1474379882, "post_id": 36895851, "comment_id": 66500827, "body": "Several versions of <code>type_traits</code> are installed as part of <b><i>Android NDK</i></b>, But I was not able to make any of them work correctly either."}], "owner": {"reputation": 931, "user_id": 5106997, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d66d1ef88c27f499c2ce44e3a40d224f?s=128&d=identicon&r=PG&f=1", "display_name": "\u0130brahim", "link": "https://stackoverflow.com/users/5106997/%c4%b0brahim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1261, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1461789431, "creation_date": 1461775200, "last_edit_date": 1461789431, "question_id": 36895851, "link": "https://stackoverflow.com/questions/36895851/c-builder-10-1-android-compile-error-type-traits-file-not-found", "title": "C++ Builder 10.1 Android Compile Error: type_traits file not found", "body": "<p>I created a Multi-Device Application in C++ Builder 10.1 Berlin. Then I compiled this project for android platform. My project is only form, no code. (New Multi-Device App C++ and compile).</p>\n\n<p>I am getting this error message:</p>\n\n<blockquote>\n  <p>[bccaarm Fatal Error] sysmac.h(1465): 'type_traits' file not found</p>\n</blockquote>\n\n<p>I know this error for C++11 but how can I set C++11 in C++ Builder 10.1 Berlin?</p>\n\n<p><a href=\"https://i.stack.imgur.com/3xaHR.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3xaHR.jpg\" alt=\"screenshot\"></a></p>\n"}, {"tags": ["c++", "string", "function", "date"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1461775177, "post_id": 36895838, "comment_id": 61355910, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3325915"}, "edited": false, "score": 0, "creation_date": 1461775430, "post_id": 36895838, "comment_id": 61356057, "body": "Edit your post to have the correct indentations - or no one will even take you serious on this site lol. If you do that, I can look at what&#39;s going on."}, {"owner": {"reputation": 1230, "user_id": 4674358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-QOHEQlS_y40/AAAAAAAAAAI/AAAAAAAABXg/30gqlPXTQC0/photo.jpg?sz=128", "display_name": "Shubham", "link": "https://stackoverflow.com/users/4674358/shubham"}, "edited": false, "score": 0, "creation_date": 1461776359, "post_id": 36895838, "comment_id": 61356643, "body": "add the input for which it failed and for which it passed."}, {"owner": {"reputation": 11, "user_id": 6212587, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8VWssvbjkP8/AAAAAAAAAAI/AAAAAAAABMQ/exjZLSqz4PE/photo.jpg?sz=128", "display_name": "abanoub maher", "link": "https://stackoverflow.com/users/6212587/abanoub-maher"}, "edited": false, "score": 0, "creation_date": 1461780680, "post_id": 36895838, "comment_id": 61359492, "body": "Yusha I don&#39;t understand you"}, {"owner": {"reputation": 11, "user_id": 6212587, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8VWssvbjkP8/AAAAAAAAAAI/AAAAAAAABMQ/exjZLSqz4PE/photo.jpg?sz=128", "display_name": "abanoub maher", "link": "https://stackoverflow.com/users/6212587/abanoub-maher"}, "edited": false, "score": 0, "creation_date": 1462150815, "post_id": 36895838, "comment_id": 61502961, "body": "The date I tried gave me difference 116 while it should be 118"}, {"owner": {"reputation": 767, "user_id": 578480, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/LKpvI.jpg?s=128&g=1", "display_name": "Steve Heim", "link": "https://stackoverflow.com/users/578480/steve-heim"}, "edited": false, "score": 0, "creation_date": 1462151835, "post_id": 36895838, "comment_id": 61503153, "body": "Hi and welcome to SO! Please read <a href=\"http://stackoverflow.com/help/how-to-ask\">this</a> post for how to ask better questions, which will help people give you better answers. In particular, adding a sample of the data to be loaded, so people can test your use-case would be helpful."}], "answers": [{"tags": [], "owner": {"reputation": 2473, "user_id": 4490706, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nmMcD.jpg?s=128&g=1", "display_name": "Ton Plooij", "link": "https://stackoverflow.com/users/4490706/ton-plooij"}, "is_accepted": false, "score": 0, "last_activity_date": 1462166752, "creation_date": 1462166752, "answer_id": 36975483, "question_id": 36895838, "link": "https://stackoverflow.com/questions/36895838/c-date-difference-between-two-dates/36975483#36975483", "title": "c++ date difference between two dates", "body": "<p>I think you're doing things a bit complicated. My suggestion would be to convert your dates to a time_t value by setting the appropriate fields in a struct tm and using mktime(). You can then use difftime() to calculate the difference in seconds between the two dates. </p>\n"}], "owner": {"reputation": 11, "user_id": 6212587, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8VWssvbjkP8/AAAAAAAAAAI/AAAAAAAABMQ/exjZLSqz4PE/photo.jpg?sz=128", "display_name": "abanoub maher", "link": "https://stackoverflow.com/users/6212587/abanoub-maher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462166752, "creation_date": 1461775150, "last_edit_date": 1462155069, "question_id": 36895838, "link": "https://stackoverflow.com/questions/36895838/c-date-difference-between-two-dates", "title": "c++ date difference between two dates", "body": "<p>I'm trying to make a function that reads two dates and chooses the bigger one, and then gets the difference in days. I've tried a lot so far but sometimes the answer is incorrect.<br>\nI can't find where the problem is. Can anyone help me find the problem, and/or give some advice on how to debug this kind of problem?</p>\n\n<pre><code>#include &lt; iostream &gt;\n#include &lt; string.h &gt;\n#include &lt; string&gt;\n#include &lt; cstdlib &gt;\n#include &lt; sstream &gt;\nusing namespace std;\nint period(string days1, string months1, string years1, string days2,string months2, string years2)\n{\nint periodday, periodmonth, periodyear, periodindays,\nyear1 = atof(years1.c_str()), month1 = atof(months1.c_str()),\nday1 = atof(days1.c_str()), year2 = atof(years2.c_str()),\nmonth2 = atof(months2.c_str()), day2 = atof(days2.c_str());\nint biggeryear, smalleryear, biggermonth, smallermonth, biggerday, smallerday;\nif (year1 &gt; year2) {\n    biggeryear = year1;\n    biggermonth = month1;\n    biggerday = day1;\n    smalleryear = year2;\n    smallermonth = month2;\n    smallerday = day2;\n    }\nelse {\n    biggeryear = year2;\n    biggermonth = month2;\n    biggerday = day2;\n    smalleryear = year1;\n    smallermonth = month1;\n    smallerday = day1;\n}\nif (year1 == year2) {\n    if (month1 &gt; month2) {\n        biggeryear = year1;\n        biggermonth = month1;\n        biggerday = day1;\n        smalleryear = year2;\n        smallermonth = month2;\n        smallerday = day2;\n    }\n    else {\n        biggeryear = year2;\n        biggermonth = month2;\n        biggerday = day2;\n        smalleryear = year1;\n        smallermonth = month1;\n        smallerday = day1;\n    }\n    if (month1 == month2) {\n        if (day1 &gt; day2) {\n            biggeryear = year1;\n            biggermonth = month1;\n            biggerday = day1;\n            smalleryear = year2;\n            smallermonth = month2;\n            smallerday = day2;\n        }\n        else {\n            biggeryear = year2;\n            biggermonth = month2;\n            biggerday = day2;\n            smalleryear = year1;\n            smallermonth = month1;\n            smallerday = day1;\n        }\n    }\n}\nperiodday = biggerday - smallerday;\nperiodmonth = biggermonth - smallermonth;\nperiodyear = biggeryear - smalleryear;\nif (periodday &lt; 0) {\n    periodmonth = periodmonth - 1;\n    if (biggermonth == 1 || biggermonth == 3 || biggermonth == 5 ||\n    biggermonth == 7 || biggermonth == 8 | biggermonth == 12 ||\n    biggermonth == 10) {\n        periodday += 31;\n    }\n    if (biggermonth == 4 || biggermonth == 6 || biggermonth == 9 ||\n    biggermonth == 11) {\n        periodday += 30;\n    }\n    if (biggermonth == 2 &amp;&amp; biggeryear == 0) {\n        periodday += 28;\n    }\n    if (biggermonth == 1 &amp;&amp; biggeryear % 4 != 0) {\n        periodday += 29;\n    }\n}\nif (periodmonth &lt; 0) {\n    periodyear--;\n    if (biggermonth == 1 || biggermonth == 3 || biggermonth == 5 ||\n    smallermonth == 7 || biggermonth == 8 || biggermonth == 12 ||\n    biggermonth == 10)\n    {\n        periodmonth = periodmonth + 12;\n        periodmonth = abs(periodmonth) * 31;\n    }\n    if (biggermonth == 4 || biggermonth == 6 || biggermonth == 9 ||\n    biggermonth == 11) {\n        periodmonth = periodmonth + 12;\n        periodmonth = abs(periodmonth) * 30;\n    }\n    if (biggermonth == 2 &amp;&amp; biggeryear % 4 == 0) {\n        periodmonth = periodmonth + 12;\n        periodmonth = abs(periodmonth) * 28;\n    }\n    if (biggermonth == 2 &amp;&amp; biggeryear % 4 != 0) {\n        periodmonth = periodmonth + 12;\n        periodmonth = abs(periodmonth) * 29;\n    }\n}\nelse if (periodmonth &gt;= 0) {\n    if (biggermonth == 1 || biggermonth == 3 || biggermonth == 5 ||\n    biggermonth == 7 || biggermonth == 8 || biggermonth == 12 ||\n    biggermonth == 10) {\n        periodmonth = periodmonth * 31;\n    }\n    if (biggermonth == 4 || biggermonth == 6 || biggermonth == 9 ||\n    biggermonth == 11) {\n        periodmonth = periodmonth * 30;\n    }\n    if (biggermonth == 2 &amp;&amp; biggeryear % 4 == 0) {\n        periodmonth = periodmonth * 28;\n    }\n    if (biggermonth == 2 &amp;&amp; biggeryear % 4 != 0) {\n        periodmonth = periodmonth * 29;\n    }\n}\nif (periodyear &lt; 0) {\n    if (year1 % 4 != 0 || year2 % 4 != 0) {\n        periodyear = year2 - year1;\n        periodyear *= 366;\n    }\n    else {\n        periodyear = year2 - year1;\n        periodyear *= 365;\n    }\n}\nelse if (periodyear &gt;= 0) {\n    if (year1 % 4 != 0 || year2 % 4 != 0) {\n        periodyear *= 366;\n    }\n    else {\n        periodyear *= 365;\n    }\n}\nperiodindays = periodday + periodmonth + periodyear;\nreturn abs(periodindays);\n}\nint main()\n{\n    string daya = (\"1\"), montha = (\"1\"), yeara = (\"2016\"), yearb = (\"2016\"),\n    monthb = (\"4\"), dayb = (\"27\");\n    int difference;\n    difference = period(daya, montha, yeara, dayb, monthb, yearb);\n    cout &lt;&lt; difference &lt;&lt; endl;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "systemc"], "answers": [{"tags": [], "owner": {"reputation": 3122, "user_id": 1503413, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/JVUOu.jpg?s=128&g=1", "display_name": "random", "link": "https://stackoverflow.com/users/1503413/random"}, "is_accepted": false, "score": 0, "last_activity_date": 1461854276, "last_edit_date": 1495542701, "creation_date": 1461854276, "answer_id": 36917907, "question_id": 36895796, "link": "https://stackoverflow.com/questions/36895796/systemc-measure-and-include-file-parsing-time-in-systemc-simulation/36917907#36917907", "title": "SystemC - measure and include file parsing time in systemc simulation", "body": "<p>SystemC is a modeling library. So you can only measure <strong>simulation time</strong> with sc_time_stamp.\nIf you want to measure physical time you will need to measure it with some other C/C++ library (<a href=\"https://stackoverflow.com/questions/2808398/easily-measure-elapsed-time\">Easily measure elapsed time</a>).</p>\n\n<p>Then, if you want to add this time to your simulation time, you can put</p>\n\n<pre><code>wait( measured_parsing_time );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 729, "user_id": 5942006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe054f41dc543395631acc84ac04f60?s=128&d=identicon&r=PG&f=1", "display_name": "systemcpro", "link": "https://stackoverflow.com/users/5942006/systemcpro"}, "is_accepted": true, "score": 0, "last_activity_date": 1461854341, "creation_date": 1461854341, "answer_id": 36917937, "question_id": 36895796, "link": "https://stackoverflow.com/questions/36895796/systemc-measure-and-include-file-parsing-time-in-systemc-simulation/36917937#36917937", "title": "SystemC - measure and include file parsing time in systemc simulation", "body": "<p>Your question \"measure parsing time using systemc\" and the pseudo code example you gave appear to indicate you want to measure real-time. The pseudo-code</p>\n\n<pre><code>wait some-event\nparseFile()\nsignal.write(1)\n...\n</code></pre>\n\n<p>Will take exactly zero simulation time since (unless parseFile() itself has wait statements) parseFile() is carried out in one delta cycle. If parseFile() does have wait statements (wait 10ms for example) then in simulation time it will take 10 ms. The only way systemc has of knowing how long a process takes to complete is if you tell it.</p>\n"}], "owner": {"reputation": 335, "user_id": 6262458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a05cd934a65b25f9ac766ff22147bf?s=128&d=identicon&r=PG&f=1", "display_name": "nervuzz", "link": "https://stackoverflow.com/users/6262458/nervuzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 36917937, "answer_count": 2, "score": 2, "last_activity_date": 1461854341, "creation_date": 1461775017, "last_edit_date": 1461775394, "question_id": 36895796, "link": "https://stackoverflow.com/questions/36895796/systemc-measure-and-include-file-parsing-time-in-systemc-simulation", "title": "SystemC - measure and include file parsing time in systemc simulation", "body": "<p>I have a simple C++ function which parse CSV (10-10k rows) file line-by-line and insert each field in defined structure, array of structures to be more specific.</p>\n\n<p>Now I want to measure parsing time using <code>systemc</code> methods (without C++ utilities, e.g <code>clock()</code>) and include it in simulation like any other process and generate trace file - is it possible at all?</p>\n\n<p>For couple of days I am struggling doing that in every possible way. Actually I have realised that <code>sc_time_stamp()</code> is useless in that particular case as it only shows declared <code>sc_start()</code> simulation elapsed time.</p>\n\n<p>I thought it will be as simple as:</p>\n\n<ol>\n<li><code>wait() until pos.edg</code></li>\n<li><code>parseFile()</code></li>\n<li><code>signal.write(1)</code></li>\n<li><code>doOtherStuff()</code></li>\n</ol>\n\n<p>but apparently it's not...</p>\n\n<p>Internet is full of adders, counters and other logic stuff examples but I did not found anything related to my problem.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "c++", "numpy", "boost", "boost-python"], "owner": {"reputation": 29, "user_id": 4225040, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FW35r.jpg?s=128&g=1", "display_name": "mconte", "link": "https://stackoverflow.com/users/4225040/mconte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1618732842, "creation_date": 1461774390, "last_edit_date": 1618732842, "question_id": 36895623, "link": "https://stackoverflow.com/questions/36895623/creating-c-stl-forward-iterator-given-numpy-array-using-boostpython", "title": "Creating C++ stl forward iterator given numpy array using Boost::Python", "body": "<p>I'm having trouble creating a boost python forward iterator to get a numpy array as input of a C++ function that takes an stl begin and end iterator as a template and modifies it, here's the code for the C++ function:</p>\n<pre><code>template&lt;typename _InputIt&gt;\nvoid vec_fill_increasing(_InputIt begin, _InputIt end, typename std::iterator_traits&lt;_InputIt&gt;::value_type start, typename std::iterator_traits&lt;_InputIt&gt;::value_type increment)\n{\n    typedef typename std::iterator_traits&lt;_InputIt&gt;::value_type _Type;\n    if (std::is_floating_point&lt;_Type&gt;::value)\n    {\n        std::size_t count = 0;\n        while (begin != end)\n        {\n        *begin = start + ((_Type)count*increment);\n        ++begin;\n        ++count;\n        }\n    }\n    else {\n\n        while (begin != end)\n        {\n            *begin = start;\n            start += increment;\n            ++begin;\n        }\n}\n</code></pre>\n<p>There is already an implementation of an stl input iterator in Boost Python (i.e. <strong>stl_iterator.hpp</strong>) but it's not mutable, so that won't help me here, so I tried to create my own stl_forward_iterator based on the input iterator.</p>\n<pre><code>namespace boost {\n    namespace python\n    {\n        // An STL forward iterator over a python sequence\n        template&lt;typename ValueT&gt;\n        struct stl_forward_iterator\n        : boost::iterator_facade&lt;\n            stl_forward_iterator&lt;ValueT&gt;\n            , ValueT\n            , std::forward_iterator_tag\n        &gt;\n        {\n            stl_forward_iterator()\n            : impl_()\n            {\n            }\n\n            // ob is the python sequence\n            stl_forward_iterator(boost::python::object const &amp;ob)\n            : impl_(ob)\n            {\n            }\n\n        private:\n            friend class boost::iterator_core_access;\n\n            void increment()\n            {\n                this-&gt;impl_.increment();\n            }\n\n            ValueT&amp; dereference() const\n            {\n                return extract&lt;ValueT&amp;&gt;(this-&gt;impl_.current().get())();\n            }\n\n            bool equal(stl_forward_iterator&lt;ValueT&gt; const &amp;that) const\n            {\n                return this-&gt;impl_.equal(that.impl_);\n            }\n\n            objects::stl_input_iterator_impl impl_;\n        };\n    }\n}\n</code></pre>\n<p>The only change I really made was changing the return of the deference function to a reference instead of just a value.</p>\n<p>And I use this in my main application as follows:</p>\n<pre><code>template&lt;typename T&gt;\nvoid wrap_fill_increasing(boost::python::numeric::array&amp; array, T start, T increment) {\n   boost::python::stl_forward_iterator&lt;T&gt; begin(array);\n   boost::python::stl_forward_iterator&lt;T&gt; end;\n   vec_fill_increasing(begin, end, start, increment);\n}\n\nBOOST_PYTHON_MODULE(example) {\n    import_array();\n    p::numeric::array::set_module_and_type(&quot;numpy&quot;, &quot;ndarray&quot;);\n    p::def(&quot;fill_increasing&quot;, &amp;wrap_fill_increasing&lt;int&gt;);\n}\n\nint main(int argc, char **argv)\n{\n    PyImport_AppendInittab(&quot;example&quot;, &amp;PyInit_example);\n    \n    Py_Initialize();\n\n    PyRun_SimpleString(\n    &quot;import example\\n&quot;\n    &quot;import numpy\\n&quot;\n    &quot;z3 = numpy.zeros((1024,), dtype=numpy.int)\\n&quot;\n    &quot;example.fill_increasing(z3, 0, 1)\\n&quot;\n    &quot;print(z3)\\n&quot;\n    );\n\n    Py_Finalize();\n}\n</code></pre>\n<p>But I get the error:</p>\n<blockquote>\n<p><strong>TypeError: No registered converter was able to extract a C++ reference to type int from this Python object of type numpy.int32</strong></p>\n</blockquote>\n<p>And it occurs on the dereference function in my stl_forward_iterator and I don't know how to resolve this.</p>\n<p>If something that can help in this scenario doesn't exist, I really think there should be one as a suggestion, unless there is a different solution.</p>\n"}, {"tags": ["c++", "c", "opencv"], "comments": [{"owner": {"reputation": 3349, "user_id": 3734222, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jmeZw.png?s=128&g=1", "display_name": "Dimitri Podborski", "link": "https://stackoverflow.com/users/3734222/dimitri-podborski"}, "edited": false, "score": 0, "creation_date": 1461774929, "post_id": 36895552, "comment_id": 61355752, "body": "Try to use <code>cout &lt;&lt; src;</code>"}, {"owner": {"reputation": 11, "user_id": 6262526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb9674ff774a13da5141bd0382d0c7?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6262526/meh"}, "reply_to_user": {"reputation": 3349, "user_id": 3734222, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jmeZw.png?s=128&g=1", "display_name": "Dimitri Podborski", "link": "https://stackoverflow.com/users/3734222/dimitri-podborski"}, "edited": false, "score": 0, "creation_date": 1461775179, "post_id": 36895552, "comment_id": 61355913, "body": "@incBrain Thanks for the reply. Accurately I tried that but the result show a bit messy cause I complier and run the code by using terminal only. Is that anyway to display in more organize way?"}, {"owner": {"reputation": 3349, "user_id": 3734222, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jmeZw.png?s=128&g=1", "display_name": "Dimitri Podborski", "link": "https://stackoverflow.com/users/3734222/dimitri-podborski"}, "edited": false, "score": 0, "creation_date": 1461775576, "post_id": 36895552, "comment_id": 61356150, "body": "I don&#39;t know what you mean by <i>display in more organize way</i>, but you can iterate over all rows and cols and do whatever you want ;)"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461775826, "post_id": 36895552, "comment_id": 61356306, "body": "<code>for(int y=0; y&lt;rows; ++y) for(int x=0; x&lt;cols; ++x) std::cout &lt;&lt; &quot;(&quot;&lt;&lt;x&lt;&lt;&quot;,&quot;&lt;&lt;y&lt;&lt;&quot;) = &quot; &lt;&lt; src.at&lt;cv::Vec3b&gt;(y,x) &lt;&lt; std::endl;</code>"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461775907, "post_id": 36895552, "comment_id": 61356360, "body": "instead of <code>if( !src.data )</code> I would use <code>if(src.empty())</code> should be the same result but better readability"}, {"owner": {"reputation": 11, "user_id": 6262526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb9674ff774a13da5141bd0382d0c7?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6262526/meh"}, "edited": false, "score": 0, "creation_date": 1461776055, "post_id": 36895552, "comment_id": 61356449, "body": "For clarification, I want to inspect the pixels value and show in the form of matrix like what the picture shows inside the link below:   <a href=\"http://docs.opencv.org/2.4/doc/tutorials/core/mat_the_basic_image_container/mat_the_basic_image_container.html\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/doc/tutorials/core/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 6262526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb9674ff774a13da5141bd0382d0c7?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6262526/meh"}, "reply_to_user": {"reputation": 3349, "user_id": 3734222, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jmeZw.png?s=128&g=1", "display_name": "Dimitri Podborski", "link": "https://stackoverflow.com/users/3734222/dimitri-podborski"}, "edited": false, "score": 0, "creation_date": 1461776284, "post_id": 36895552, "comment_id": 61356591, "body": "@incBrain but just using terminal to run the code, the result only show numbers without organize in rows and columns."}, {"owner": {"reputation": 11, "user_id": 6262526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb9674ff774a13da5141bd0382d0c7?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6262526/meh"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461776307, "post_id": 36895552, "comment_id": 61356605, "body": "@Micka Thanks micka, I will try it out now."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461776387, "post_id": 36895552, "comment_id": 61356670, "body": "what&#39;s your image size? for typical resolutions you won&#39;t fit an image row in one terminal row..."}, {"owner": {"reputation": 11, "user_id": 6262526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb9674ff774a13da5141bd0382d0c7?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6262526/meh"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461776516, "post_id": 36895552, "comment_id": 61356763, "body": "@Micka using the code above the number of rows and column both is 225."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461776595, "post_id": 36895552, "comment_id": 61356836, "body": "probably won&#39;t fit in the terminal rows/columns ;) my sample code prints one pixel value per terminal line."}, {"owner": {"reputation": 11, "user_id": 6262526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb9674ff774a13da5141bd0382d0c7?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6262526/meh"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461776777, "post_id": 36895552, "comment_id": 61356933, "body": "@Micka In understood now. any suggest program that can use to make a demo on that? Btw I already tried your sample code, one of the result shows as below:  (183,222) = [76, 86, 193]  From what I understand is the (183,222) represent the column and rows, but how about the 76, 86, 193?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461777018, "post_id": 36895552, "comment_id": 61357099, "body": "your color image has 3 channels. first value is the blue channel intensity. second is green channel, third is red channel. pixel intensities (each channel) range between 0 and 255 for that kind of images."}, {"owner": {"reputation": 11, "user_id": 6262526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb9674ff774a13da5141bd0382d0c7?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6262526/meh"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461777300, "post_id": 36895552, "comment_id": 61357290, "body": "@Micka Ya, I guess I asked a stupid question before I really study on it. So let say that I turn my image to edges using Canny( src, edge, 50, 150, 3); &lt;&lt;example. Can I use the same method to determine the pixel values?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461779565, "post_id": 36895552, "comment_id": 61358777, "body": "no because the canny edge image will have only one channel. you&#39;ll have to change to: <code>src.at&lt;unsigned char&gt;(y,x)</code> because cv::Vec3b is 3 byte values (24 bit from 3 channels) and <code>unsigned char</code> is a single byte (1 channel)"}, {"owner": {"reputation": 11, "user_id": 6262526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb9674ff774a13da5141bd0382d0c7?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6262526/meh"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461784871, "post_id": 36895552, "comment_id": 61362170, "body": "@Micka,  I edited my code as show as above but I fail to get the result."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1461785140, "post_id": 36895552, "comment_id": 61362358, "body": "remove the line edge.convertTo(draw, CV_8U);"}, {"owner": {"reputation": 11, "user_id": 6262526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb9674ff774a13da5141bd0382d0c7?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6262526/meh"}, "edited": false, "score": 0, "creation_date": 1461785974, "post_id": 36895552, "comment_id": 61362868, "body": "The result still the same although I remove the line edge.convertTo(draw, CV_8U);"}, {"owner": {"reputation": 11, "user_id": 6262526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb9674ff774a13da5141bd0382d0c7?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6262526/meh"}, "edited": false, "score": 0, "creation_date": 1461786674, "post_id": 36895552, "comment_id": 61363301, "body": "It show part of the result like this:  (218,224) =  (219,224) = \ufffd (220,224) = \ufffd"}], "owner": {"reputation": 11, "user_id": 6262526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9fb9674ff774a13da5141bd0382d0c7?s=128&d=identicon&r=PG&f=1", "display_name": "meh", "link": "https://stackoverflow.com/users/6262526/meh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1461784814, "creation_date": 1461774151, "last_edit_date": 1461784814, "question_id": 36895552, "link": "https://stackoverflow.com/questions/36895552/display-data-from-mat-cvmat-for-an-image-in-matrix-form-opencv", "title": "Display data from Mat / cv::Mat for an image in matrix form (OpenCV)", "body": "<p>I dealing with school project now and I hopping to display the pixels value for an random image in matrix form. Below is the code I use to determine the number rows and column but I hope to get all the pixel value by columns and rows. Sorry for the bad explanation with less information cause I just getting familiar with opencv but I hope someone can really help me on this. </p>\n\n<p>Thanks</p>\n\n<pre><code>if( src.empty() )\n{ cout &lt;&lt; \"No input picture\" &lt;&lt; endl;return -1; }\n\nnamedWindow( \"Original image\", CV_WINDOW_FREERATIO );\n    imshow( \"Original image\", src);\n\n\ncvtColor(src, gray, CV_BGR2GRAY);\nnamedWindow( \"Gray image\", CV_WINDOW_FREERATIO );  \n    imshow( \"Gray image\", gray );\n\nCanny( gray, edge, 50, 150, 3);\nedge.convertTo(draw, CV_8U);\n    namedWindow(\"edge\", CV_WINDOW_FREERATIO );\n    imshow(\"edge\", draw);   \n\nint rows = draw.rows;\nint cols = draw.cols;\n\nfor(int y=0; y&lt;rows; ++y) for(int x=0; x&lt;cols; ++x) std::cout &lt;&lt; \"(\"&lt;&lt;x&lt;&lt;\",\"&lt;&lt;y&lt;&lt;\") = \" &lt;&lt; draw.at&lt;unsigned char&gt;(y,x) &lt;&lt; std::endl;\n\n//cout&lt;&lt; edge &lt;&lt;endl;   \ncout&lt;&lt;\"Number of rows:  \"&lt;&lt;draw.rows&lt;&lt;endl;\ncout&lt;&lt;\"Number of columns:  \"&lt;&lt;draw.cols&lt;&lt;endl;  \n\n\n//cout &lt;&lt; src &lt;&lt; endl;\n\n\nwaitKey(0);                                       \n    return 0;\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13, "user_id": 6262365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23fa04e1f66c0f39bf1ba050c131b563?s=128&d=identicon&r=PG&f=1", "display_name": "Shafik Oudeh", "link": "https://stackoverflow.com/users/6262365/shafik-oudeh"}, "edited": false, "score": 0, "creation_date": 1461773565, "post_id": 36895319, "comment_id": 61354769, "body": "I was trying to use insert function by position like this void insert(int x, int pos); but it breaks if I put 0 for pos"}, {"owner": {"reputation": 12454, "user_id": 79737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GaA88.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/79737/jay"}, "edited": false, "score": 0, "creation_date": 1461773653, "post_id": 36895319, "comment_id": 61354837, "body": "What error are you getting?"}, {"owner": {"reputation": 13, "user_id": 6262365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23fa04e1f66c0f39bf1ba050c131b563?s=128&d=identicon&r=PG&f=1", "display_name": "Shafik Oudeh", "link": "https://stackoverflow.com/users/6262365/shafik-oudeh"}, "reply_to_user": {"reputation": 12454, "user_id": 79737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GaA88.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/79737/jay"}, "edited": false, "score": 0, "creation_date": 1461773762, "post_id": 36895319, "comment_id": 61354928, "body": "Time Check Failure"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461773778, "post_id": 36895319, "comment_id": 61354951, "body": "Maybe you should show the code you are talking about. It would be not help you for me to guess your implementation. I mean where is the code for <code>insert(int x, int pos)</code> So far you posted nothing that can help debug and you have not posted the error (or what you mean by it breaks)."}, {"owner": {"reputation": 13, "user_id": 6262365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23fa04e1f66c0f39bf1ba050c131b563?s=128&d=identicon&r=PG&f=1", "display_name": "Shafik Oudeh", "link": "https://stackoverflow.com/users/6262365/shafik-oudeh"}, "edited": false, "score": 0, "creation_date": 1461774266, "post_id": 36895319, "comment_id": 61355302, "body": "I posted the whole code"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461774653, "post_id": 36895319, "comment_id": 61355575, "body": "<b><i>Time Check Failure</i></b> Is this the problem? c++ does not have the notion of an execution time limit. Does that mean you are running this on some online <code>c++</code> implementation with an execution time limit?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1461774681, "post_id": 36895319, "comment_id": 61355595, "body": "@ShafikOudeh <i>&quot;I posted the whole code&quot;</i> Now narrow it down to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the error please."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461774689, "post_id": 36895319, "comment_id": 61355600, "body": "If you are running this online perhaps you will be better served with an IDE that you can run locally on your computer that has a debugger and no execution time limit at all."}, {"owner": {"reputation": 13, "user_id": 6262365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23fa04e1f66c0f39bf1ba050c131b563?s=128&d=identicon&r=PG&f=1", "display_name": "Shafik Oudeh", "link": "https://stackoverflow.com/users/6262365/shafik-oudeh"}, "edited": false, "score": 0, "creation_date": 1461775010, "post_id": 36895319, "comment_id": 61355804, "body": "No I&#39;m not running it online. The problem is with the insert function. It makes the program break when I add it to the Main file."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1461775270, "post_id": 36895319, "comment_id": 61355969, "body": "Why do you assume / require that there are 5 items in your Queue if the front is not null?"}], "answers": [{"tags": [], "owner": {"reputation": 1230, "user_id": 4674358, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-QOHEQlS_y40/AAAAAAAAAAI/AAAAAAAABXg/30gqlPXTQC0/photo.jpg?sz=128", "display_name": "Shubham", "link": "https://stackoverflow.com/users/4674358/shubham"}, "is_accepted": false, "score": 1, "last_activity_date": 1461775316, "creation_date": 1461775316, "answer_id": 36895891, "question_id": 36895319, "link": "https://stackoverflow.com/questions/36895319/program-keeps-breaking/36895891#36895891", "title": "Program keeps breaking", "body": "<p>In insert method \n<code>else if (now != NULL &amp;&amp; pos == 0)\n    {</code>\nthis part can never run because now is null as it has never been initialized.\nThen control goes to else part\nwhere if pos =0 *past is never initialized.\nInitialize *now first.\nelse you can remove else if part and just initialize *past once outside the while loop i.e.</p>\n\n<pre><code>else\n{\n    now = front;\n    int count = 0;//here initialize past once past=now;\n    while (now != NULL &amp;&amp; count != pos)\n    {\n        past = now;\n        now = now-&gt;next;\n        count++;\n    }\n    past-&gt;next = new Queue(x, now);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 6262365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23fa04e1f66c0f39bf1ba050c131b563?s=128&d=identicon&r=PG&f=1", "display_name": "Shafik Oudeh", "link": "https://stackoverflow.com/users/6262365/shafik-oudeh"}, "is_accepted": false, "score": 0, "last_activity_date": 1461775948, "creation_date": 1461775948, "answer_id": 36896088, "question_id": 36895319, "link": "https://stackoverflow.com/questions/36895319/program-keeps-breaking/36896088#36896088", "title": "Program keeps breaking", "body": "<p>I edited it. It works for all positions except for 0 pos.\nI need the element to go to the front of the queue.</p>\n\n<pre><code>   void queueType::insert(int x, int pos )\n{\n    Queue *now, *past;\n   if (front == NULL)\n    front = new Queue(x);\n   else\n  {\n    now = front;\n\n    int count = 0;\n    while (now != NULL &amp;&amp; count != pos)\n    {\n        past = now;\n        now = now-&gt;next;\n        count++;\n    }\n    past-&gt;next = new Queue(x, now);\n}\n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 13, "user_id": 6262365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23fa04e1f66c0f39bf1ba050c131b563?s=128&d=identicon&r=PG&f=1", "display_name": "Shafik Oudeh", "link": "https://stackoverflow.com/users/6262365/shafik-oudeh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 0, "closed_date": 1462513615, "answer_count": 2, "score": -5, "last_activity_date": 1461775948, "creation_date": 1461773519, "last_edit_date": 1461774215, "question_id": 36895319, "link": "https://stackoverflow.com/questions/36895319/program-keeps-breaking", "closed_reason": "Not suitable for this site", "title": "Program keeps breaking", "body": "<p>Write the definition of the function moveNthFront that takes as a parameter a positive integer, n. The function moves the nth element of the queue to the front. The order of the remaining elements remains unchanged. For example, suppose:</p>\n\n<p>queue = {5, 11, 34, 67, 43, 55} and n = 3.</p>\n\n<p>After a call to the function moveNthFront:</p>\n\n<p>queue = {34, 5, 11, 67, 43, 55}.</p>\n\n<p>Add this function to the class queueType. Also, write a program to test your method.</p>\n\n<p>Here is my header</p>\n\n<pre><code>#ifndef queueType_H\n#define queueType_H\n#include&lt;iostream&gt;\n\nclass queueType\n{\nprivate:\n    class Queue\n    {\n        friend class queueType;\n        int value;\n        Queue *next;\n        Queue(int value1, Queue *next1 = NULL)\n        {\n            value = value1;\n            next = next1;\n        }\n    };\n    // These track the front and rear of the queue\n    Queue *front;\n    Queue *rear;\n    Queue *head;\n\n\npublic:\n   void moveNthFront(int);\n</code></pre>\n\n<p>Here is the cpp for the header.</p>\n\n<pre><code>#include\"queueType.h\"\n#include&lt;iostream&gt;\nusing namespace std;\n\nqueueType::queueType() {\nfront = NULL;\nrear = NULL;\n}\n\nqueueType::~queueType() {\nclear();\n}\n\nvoid queueType::enqueue(int num)\n{\n    if (isEmpty())\n    {\n        front = new Queue(num);\n        rear = front;\n    }\n    else\n    {\n        rear-&gt;next = new Queue(num);\n        rear = rear-&gt;next;\n    }\n}\nvoid queueType::dequeue(int &amp;num)\n{\n    Queue *temp;\n    if (isEmpty())\n    {\n        cout &lt;&lt; \"The queue is empty.\\n\";\n        exit(1);\n    }\n    else\n    {\n        num = front-&gt;value;\n        temp = front;\n        front = front-&gt;next;\n        delete temp;\n    }\n}\n\nbool queueType::isEmpty() const\n{\n    if (front == NULL)\n\n        return true;\n    else\n        return false;\n}\n\nint queueType::search(int x)\n{\n    if (front == NULL)\n        return -1;\n    else\n    {\n        int count = 0;\n        Queue *aptr = front;\n        while (aptr != NULL)\n        {\n        if (aptr-&gt;value == x)\n            return count;\n            aptr = aptr-&gt;next;\n            count++;\n        }\n        return -1;\n    }\n}\n\nvoid queueType::clear()\n{\n    int value;   // Dummy variable for dequeue\n\n    while (!isEmpty())\n        dequeue(value);\n}\nvoid queueType::remove(int pos)\n{\n    if (front == NULL)\n        return;\n    else if (pos == 0)\n        front = front-&gt;next;\n    else\n    {\n        int count = 0;\n        Queue *now = front, *past;\n        while (now != NULL &amp;&amp; count != pos)\n        {\n            past = now;\n            now = now-&gt;next;\n            count++;\n        }\n    if (now)\n        {\n            past-&gt;next = now-&gt;next;\n            delete now;\n        }\n    }\n}\nvoid queueType::insert(int x, int pos )\n{\n    Queue *now, *past;\n    if (front == NULL)\n        front = new Queue(x);\n    else if (now != NULL &amp;&amp; pos == 0)\n    {\n    now = front;\n    ;\n        for (int i = 0; i &lt; 5; i++)\n        {\n            past = now;\n            now = now-&gt;next;\n\n        }\n        past-&gt;next = new Queue(x, now);\n    }\n    else\n    {\n        now = front;\n        int count = 0;\n        while (now != NULL &amp;&amp; count != pos)\n        {\n            past = now;\n            now = now-&gt;next;\n            count++;\n        }\n        past-&gt;next = new Queue(x, now);\n    }\n}\n</code></pre>\n\n<p>Here is my main</p>\n\n<pre><code>#include\"queueType.h\"\n#include&lt;iostream&gt;\nusing namespace std;\n\nint main() {\n\nqueueType intqueue;\n\nint input, temp, x = 0;\n\nfor (int i = 0; i &lt; 5; i++) {\n    intqueue.enqueue(i*i);\n}\ncout &lt;&lt; \"The values in the queue were:\\n\";\nwhile (!intqueue.isEmpty())\n{\n    int value;\n    intqueue.dequeue(value);\n    cout &lt;&lt; value &lt;&lt; \"  \";\n}\n\nfor (int i = 0; i &lt; 5; i++) {\n    intqueue.enqueue(i*i);\n}\ncout &lt;&lt; \"\\nEnter the value to find:\" &lt;&lt; endl;\ncin &gt;&gt; input;\nintqueue.search(input);\ntemp = intqueue.search(input);\nintqueue.remove(temp);\nintqueue.insert(input, 0);\n\ncout &lt;&lt; \"\\nThe values after change was made:\\n\";\nwhile (!intqueue.isEmpty())\n{\n    int value;\n    intqueue.dequeue(value);\n    cout &lt;&lt; value &lt;&lt; \"  \";\n}\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "c", "gcc", "arm"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1461773170, "post_id": 36895123, "comment_id": 61354462, "body": "Well, do you have the cross-compiler toolchain already?  What OS are you running on the micro controller?"}, {"owner": {"reputation": 213, "user_id": 5046520, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e2b960e50c074118062eb9e953d7f3d?s=128&d=identicon&r=PG&f=1", "display_name": "AugustoQ", "link": "https://stackoverflow.com/users/5046520/augustoq"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1461773506, "post_id": 36895123, "comment_id": 61354722, "body": "I do have the cross-compiler tool chain, for eclipse. The micro controller runs linux."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1461773733, "post_id": 36895123, "comment_id": 61354903, "body": "Are you pointing the cross-compiler at the appropriate headers and libraries for the target system (either manually with <code>-I</code>/<code>-L</code> or the easy way with <code>--sysroot=</code>)?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1461774237, "post_id": 36895123, "comment_id": 61355278, "body": "then you probably need to use arm-linux-gnueabi-gcc from the tool chain. <code>-none</code> is for bare metal applications."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1461774312, "post_id": 36895123, "comment_id": 61355336, "body": "@AugustoQ Related: <a href=\"http://stackoverflow.com/questions/18900855/how-to-work-with-external-libraries-when-cross-compiling\" title=\"how to work with external libraries when cross compiling\">stackoverflow.com/questions/18900855/&hellip;</a>"}, {"owner": {"reputation": 213, "user_id": 5046520, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e2b960e50c074118062eb9e953d7f3d?s=128&d=identicon&r=PG&f=1", "display_name": "AugustoQ", "link": "https://stackoverflow.com/users/5046520/augustoq"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1461774433, "post_id": 36895123, "comment_id": 61355428, "body": "@user3528438 Is it in anyways possible to solve using -none? I was asked to do it using that."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1461775353, "post_id": 36895123, "comment_id": 61356024, "body": "You can use <code>-I</code>, <code>-L</code>, <code>-Wl,-rpath</code>, <code>-Wl,-rpath-link</code>, <code>--sysroot</code> or even static linking to achieve that, but that&#39;s not a good idea because you don&#39;t know if the libraries are compatible with the compiler or not. If you are asked to compile a Linux application with <code>arm-none-eabi-gcc</code> you do need to know the rationale because the implied constraint could bite you later."}, {"owner": {"reputation": 213, "user_id": 5046520, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e2b960e50c074118062eb9e953d7f3d?s=128&d=identicon&r=PG&f=1", "display_name": "AugustoQ", "link": "https://stackoverflow.com/users/5046520/augustoq"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1461859884, "post_id": 36895123, "comment_id": 61401825, "body": "@user3528438 One last thing: is there any library for networking that I could use with arm-non-eabi-gcc without worry? One that doesn&#39;t depend on the system, or something like that."}], "owner": {"reputation": 213, "user_id": 5046520, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1e2b960e50c074118062eb9e953d7f3d?s=128&d=identicon&r=PG&f=1", "display_name": "AugustoQ", "link": "https://stackoverflow.com/users/5046520/augustoq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 735, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1461774073, "creation_date": 1461773008, "last_edit_date": 1461774073, "question_id": 36895123, "link": "https://stackoverflow.com/questions/36895123/how-to-arm-none-eabi-gcc-client-server", "title": "How to arm-none-eabi-gcc Client-Server", "body": "<p>So, I need to use arm-none-eabi-gcc to run some authentications tests. But I've never used the cross compiler, and I can't find a lot of information on coding for it. Most importantly: I can't find a way to write a Client-Server program (client side using arm-gcc). I have tried re-using the code I wrote in plain C, with gcc, but it doesn't accept three of the libraries (namely, <code>&lt;sys/socket.h&gt;</code>, <code>&lt;netinet/in.h&gt;</code> and <code>&lt;netdb.h&gt;</code>), so I can't use it.</p>\n\n<p>Can anyone help me by showing me a way through with I can make a micro controller contact a server in order to simulate an authentication trial?</p>\n"}, {"tags": ["c++", "libpng", "libjpeg"], "comments": [{"owner": {"reputation": 2048, "user_id": 6192747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-agy-meieasc/AAAAAAAAAAI/AAAAAAAAAC8/ipYF1p3tygQ/photo.jpg?sz=128", "display_name": "Stian Skjelstad", "link": "https://stackoverflow.com/users/6192747/stian-skjelstad"}, "edited": false, "score": 0, "creation_date": 1461777891, "post_id": 36895054, "comment_id": 61357703, "body": "The same problem happens if you only load the file and save it (do not perform any filtering or changes to the pixelbuffer)?"}, {"owner": {"reputation": 252, "user_id": 1403459, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aJZrJ.png?s=128&g=1", "display_name": "Asaaj", "link": "https://stackoverflow.com/users/1403459/asaaj"}, "reply_to_user": {"reputation": 2048, "user_id": 6192747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-agy-meieasc/AAAAAAAAAAI/AAAAAAAAAC8/ipYF1p3tygQ/photo.jpg?sz=128", "display_name": "Stian Skjelstad", "link": "https://stackoverflow.com/users/6192747/stian-skjelstad"}, "edited": false, "score": 0, "creation_date": 1461779924, "post_id": 36895054, "comment_id": 61359030, "body": "Oddly enough, it doesn&#39;t. Loading the correctly burred photo from above (or just the unchanged one) and saving it works correctly. Maybe it&#39;s getting confused about PixelBuffers, from the undo/redo functionality.. That&#39;s interesting"}, {"owner": {"reputation": 2048, "user_id": 6192747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-agy-meieasc/AAAAAAAAAAI/AAAAAAAAAC8/ipYF1p3tygQ/photo.jpg?sz=128", "display_name": "Stian Skjelstad", "link": "https://stackoverflow.com/users/6192747/stian-skjelstad"}, "edited": false, "score": 1, "creation_date": 1461780117, "post_id": 36895054, "comment_id": 61359173, "body": "Your filter/blur probably overflows/underflows the color values. You should make sure that the values are saturated within 0 and 255 (if values goes under 0, set them to 0, and if values goes above 255, set them to 255)"}, {"owner": {"reputation": 252, "user_id": 1403459, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aJZrJ.png?s=128&g=1", "display_name": "Asaaj", "link": "https://stackoverflow.com/users/1403459/asaaj"}, "reply_to_user": {"reputation": 2048, "user_id": 6192747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-agy-meieasc/AAAAAAAAAAI/AAAAAAAAAC8/ipYF1p3tygQ/photo.jpg?sz=128", "display_name": "Stian Skjelstad", "link": "https://stackoverflow.com/users/6192747/stian-skjelstad"}, "edited": false, "score": 1, "creation_date": 1461783316, "post_id": 36895054, "comment_id": 61361189, "body": "Wonderful, that&#39;s exactly it. I built in the <code>clampedColor()</code> function to the <code>ColorData</code> objects but failed to use it. Changing the <code>cd.getRed()</code> (along with the others) to <code>cd.clampedColor().getRed()</code> fixed it. Thanks!"}, {"owner": {"reputation": 2048, "user_id": 6192747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-agy-meieasc/AAAAAAAAAAI/AAAAAAAAAC8/ipYF1p3tygQ/photo.jpg?sz=128", "display_name": "Stian Skjelstad", "link": "https://stackoverflow.com/users/6192747/stian-skjelstad"}, "edited": false, "score": 1, "creation_date": 1461783751, "post_id": 36895054, "comment_id": 61361467, "body": "Copied the comment into an answer, so that you can tag is as solved"}], "answers": [{"tags": [], "owner": {"reputation": 2048, "user_id": 6192747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-agy-meieasc/AAAAAAAAAAI/AAAAAAAAAC8/ipYF1p3tygQ/photo.jpg?sz=128", "display_name": "Stian Skjelstad", "link": "https://stackoverflow.com/users/6192747/stian-skjelstad"}, "is_accepted": true, "score": 3, "last_activity_date": 1461783717, "creation_date": 1461783717, "answer_id": 36898702, "question_id": 36895054, "link": "https://stackoverflow.com/questions/36895054/image-libraries-writing-incorrectly/36898702#36898702", "title": "Image libraries writing incorrectly", "body": "<p>Your filter/blur probably overflows/underflows the color values. You should make sure that the values are saturated within 0 and 255 (if values goes under 0, set them to 0, and if values goes above 255, set them to 255)</p>\n"}], "owner": {"reputation": 252, "user_id": 1403459, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/aJZrJ.png?s=128&g=1", "display_name": "Asaaj", "link": "https://stackoverflow.com/users/1403459/asaaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 36898702, "answer_count": 1, "score": 3, "last_activity_date": 1461783717, "creation_date": 1461772860, "last_edit_date": 1592644375, "question_id": 36895054, "link": "https://stackoverflow.com/questions/36895054/image-libraries-writing-incorrectly", "title": "Image libraries writing incorrectly", "body": "<p>I am using libpng and libjpeg to read and write images. The code I use was taken almost straight from the examples provided with the two libraries' documentation, and image loading works correctly with both libraries. However, when I go to save an image, something goes wrong, and it seems to write corrupted data somehow. The confusing part is that it writes it in exactly the same incorrect way, using both libraries. Here's an example:</p>\n<h3>Original:</h3>\n<p><a href=\"https://i.stack.imgur.com/S7kB4.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S7kB4.jpg\" alt=\"Original picture\" /></a></p>\n<h3>Blurred picture (as it looks in the program, before saving):</h3>\n<p><a href=\"https://i.stack.imgur.com/RqJH5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RqJH5.png\" alt=\"Blurred picture\" /></a></p>\n<h3>How it saves (png):</h3>\n<p><a href=\"https://i.stack.imgur.com/30dVh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/30dVh.png\" alt=\"Discolored png\" /></a></p>\n<p>The jpeg version saves with identical discoloration, just more compressed.</p>\n<p>Here's the png saving code:</p>\n<pre><code>void PNGHandler::save(PixelBuffer* buffer, std::string fileName)\n{\n    FILE* filePointer = fopen(fileName.c_str(), &quot;wb&quot;);\n\n    int width = buffer-&gt;getWidth();\n    int height = buffer-&gt;getHeight();\n\n    png_structp png = png_create_write_struct(PNG_LIBPNG_VER_STRING, NULL, NULL, NULL);\n    png_infop info = png_create_info_struct(png);\n\n    png_init_io(png, filePointer);\n\n    // 8-bit depth, RGBA\n    png_set_IHDR(png, info, width, height, 8,\n        PNG_COLOR_TYPE_RGBA, PNG_INTERLACE_NONE,\n        PNG_COMPRESSION_TYPE_DEFAULT,\n        PNG_FILTER_TYPE_DEFAULT);\n\n    png_write_info(png, info);\n\n\n    // Set up rows for writing from\n    png_bytep *rowPointers = new png_bytep[height];\n    for(int y = 0; y &lt; height; y++) {\n        rowPointers[y] = new png_byte[png_get_rowbytes(png,info)];\n    }\n\n    for(int y = 0; y &lt; height; y++) {\n        for(int x = 0; x &lt; width; x++) {\n            ColorData cd = buffer-&gt;getPixel(x, height - y - 1);\n            rowPointers[y][x*4] = (int)(cd.getRed() * 255);\n            rowPointers[y][x*4+1] = (int)(cd.getGreen() * 255);\n            rowPointers[y][x*4+2] = (int)(cd.getBlue() * 255);\n            rowPointers[y][x*4+3] = (int)(cd.getAlpha() * 255);\n        }\n    }\n\n    png_write_image(png, rowPointers);\n    png_write_end(png, info);\n\n    delete [] rowPointers;\n    png_destroy_write_struct(&amp;png, &amp;info);\n    fclose(filePointer);\n}\n</code></pre>\n<p>(I know the error handling isn't great right now, but I'll fix that later)</p>\n<p>Additionally, the file always saves this way. That is, I can apply the blur and save, then reload the original and do it again, and performing a <code>diff</code> on the two files reveals they're identical. The <code>PixelBuffer</code> pointer that's passed in is a pointer to the buffer that is being displayed on the screen, so all of the color data should be exactly as it appears.</p>\n<p>I know this isn't much information to go on, but if someone can guide me toward what I should look for, I can bring more to the table (it's a large project, so I can't post all the code)</p>\n<p>Edit: It's also worth noting that the image looks correct after saving, but once the saved image is loaded in, it displays the discoloration. This points toward a problem in the saving methods to me</p>\n"}, {"tags": ["c++", "pointers", "c++11", "void-pointers"], "comments": [{"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 1, "creation_date": 1461772838, "post_id": 36895014, "comment_id": 61354203, "body": "<code>int x; double y; void* p = &amp;x; p = &amp;y;</code> won&#39;t work with <code>auto*</code>."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 0, "creation_date": 1461772878, "post_id": 36895014, "comment_id": 61354240, "body": "Why not @TavianBarnes ..?"}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 4, "creation_date": 1461772962, "post_id": 36895014, "comment_id": 61354308, "body": "Because <code>auto*</code> will be deduced to <code>int*</code>."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 2, "creation_date": 1461773041, "post_id": 36895014, "comment_id": 61354370, "body": "Oh i see! @TavianBarnes !!! So auto will be converted to the type that holds it the first! Thanks a lot.."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1461773147, "post_id": 36895014, "comment_id": 61354448, "body": "I doubt C++ primer makes a good reading in 2016."}, {"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 2, "creation_date": 1461773232, "post_id": 36895014, "comment_id": 61354509, "body": "I&#39;m pretty sure <code>void*</code> is <b>strongly</b> discouraged in C++..."}, {"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 1, "creation_date": 1461774036, "post_id": 36895014, "comment_id": 61355144, "body": "Did you compile <code>auto *somePtr=5;</code>? I doubt so."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1461788905, "post_id": 36895014, "comment_id": 61364660, "body": "@SergeyA why not? Its in the top list on C++ Books to read for begginers.. (Coming from a popular question about which books to read...)"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 5773017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74266223a02812ed8bbae3a27aa8fdb0?s=128&d=identicon&r=PG&f=1", "display_name": "Rjain", "link": "https://stackoverflow.com/users/5773017/rjain"}, "is_accepted": false, "score": 1, "last_activity_date": 1461773560, "creation_date": 1461773560, "answer_id": 36895332, "question_id": 36895014, "link": "https://stackoverflow.com/questions/36895014/difference-between-auto-and-void/36895332#36895332", "title": "Difference between Auto and Void?", "body": "<p>To answer your first question,</p>\n\n<p>void and auto are not same. <code>When you declare a variable of auto, it means it takes the data types of the value assigned</code>.</p>\n\n<p>for ex:</p>\n\n<p>auto a = 5    // 'a' is of type integer</p>\n\n<p>auto a = 5.0  // 'a' is of type float etc.,</p>\n\n<p>The actual difference can be observed while dereferencing.</p>\n\n<p>The above statement \"the actual difference can be observed while dereferencing\" answers your second question.</p>\n\n<p>void* cannot be deferenced, whereas auto* can be deferenced </p>\n"}, {"tags": [], "owner": {"reputation": 3111, "user_id": 479941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebad9df474aa1949c09ef5136e55fd33?s=128&d=identicon&r=PG", "display_name": "Mark Nunberg", "link": "https://stackoverflow.com/users/479941/mark-nunberg"}, "is_accepted": false, "score": 9, "last_activity_date": 1461774068, "creation_date": 1461774068, "answer_id": 36895524, "question_id": 36895014, "link": "https://stackoverflow.com/questions/36895014/difference-between-auto-and-void/36895524#36895524", "title": "Difference between Auto and Void?", "body": "<p><code>auto</code> uses compile-time <a href=\"https://en.wikipedia.org/wiki/Type_inference\">type inference</a>: the variable has a definite type which is its correct type, however the type is inferred from its value. Throughout the lifetime of the <code>auto</code> variable, the compiler will ensure that it is being used in accordance with its actual inferred type</p>\n\n<p><code>void*</code> can indeed hold the address of any object, but as opposed to <code>auto</code>, you must explicitly convert the <code>void*</code> pointer to a different type before using it. Unlike <code>auto</code> that conversion is explicit, and unlike <code>auto</code> the compiler cannot warn about improper usage.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6260287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b90f193eddab59f735a85ea9c380a04c?s=128&d=identicon&r=PG&f=1", "display_name": "Shishir Pahi", "link": "https://stackoverflow.com/users/6260287/shishir-pahi"}, "is_accepted": false, "score": 0, "last_activity_date": 1461774170, "creation_date": 1461774170, "answer_id": 36895554, "question_id": 36895014, "link": "https://stackoverflow.com/questions/36895014/difference-between-auto-and-void/36895554#36895554", "title": "Difference between Auto and Void?", "body": "<p>In case auto variable it will take data type of variable from whom it is getting assgnied. For example\nAuto obj =  class_obj. Here data type of class_obj became data type of obj. You  no need explicetly  remember and type cast. In case void * you need to know data type and do type cast explicetly.</p>\n"}, {"comments": [{"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "edited": false, "score": 0, "creation_date": 1461793779, "post_id": 36895871, "comment_id": 61367184, "body": "Wow! Help me understood more about auto... so basically you can substitute <code>auto</code> with <code>void</code>... Then why in the world did C++11 Add the <code>auto</code> keyword? Also @c650 says that <code>*void</code> is a bad practice in C++(As he said in the comments of question). Do you agree? If so why and what should i use instead of <code>*void</code> that serves of the same purpose?"}, {"owner": {"reputation": 1238, "user_id": 677299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9a0a6b12c50853df1e565fd54253a?s=128&d=identicon&r=PG", "display_name": "jbruni", "link": "https://stackoverflow.com/users/677299/jbruni"}, "edited": false, "score": 1, "creation_date": 1461794690, "post_id": 36895871, "comment_id": 61367597, "body": "<code>auto</code> means: deduce the type from the initializer. <code>void</code> means: no type. <code>auto</code> is still strongly typed. The difference between <code>auto</code> and <code>auto*</code> is subtle. <code>auto*</code> means a pointer. <code>auto</code> means any type and might be a pointer. Similarly <code>auto&amp;</code> means reference."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "reply_to_user": {"reputation": 1238, "user_id": 677299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9a0a6b12c50853df1e565fd54253a?s=128&d=identicon&r=PG", "display_name": "jbruni", "link": "https://stackoverflow.com/users/677299/jbruni"}, "edited": false, "score": 0, "creation_date": 1461796521, "post_id": 36895871, "comment_id": 61368332, "body": "Yes i know that @jbruni . I stated in my above comment i completely understand that.. But was just curius why C++11 decided to include <code>auto</code>.. basically <code>void</code> is better than <code>auto</code>, cause it dosent have to deduce the type of the initalizer, it is always &quot;no-type&quot;... The only reason i can see there is when the programmer wants the variable he is declaring to be the type its initalized by a type, preety much like <code>template</code>! Other than that i see no other benifets of using <code>auto</code>, or am i wrong? And also @c650 pointed out that <code>*void</code> is <b>strongly</b> discouraged. Why?"}, {"owner": {"reputation": 1238, "user_id": 677299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9a0a6b12c50853df1e565fd54253a?s=128&d=identicon&r=PG", "display_name": "jbruni", "link": "https://stackoverflow.com/users/677299/jbruni"}, "edited": false, "score": 0, "creation_date": 1461797017, "post_id": 36895871, "comment_id": 61368530, "body": "<code>auto</code> is very useful. Suppose you have a function that returns a complex nested template type such as a vector of vectors. Having to type that is annoying. It&#39;s much easier to type <code>auto a = foo();</code> than <code>vector&lt;vector&lt;int&gt;&gt; a = foo();</code> every time. Plus, if the type of <code>foo()</code> changes you don&#39;t need to find every consumer of <code>foo()</code> and update its type. See the commentary in the C++ Programming Language for other uses, especially in template programming where you might not know the type until the template is instantiated."}, {"owner": {"reputation": 1238, "user_id": 677299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9a0a6b12c50853df1e565fd54253a?s=128&d=identicon&r=PG", "display_name": "jbruni", "link": "https://stackoverflow.com/users/677299/jbruni"}, "edited": false, "score": 1, "creation_date": 1461797222, "post_id": 36895871, "comment_id": 61368599, "body": "I disagree that <code>void*</code> is a bad practice. It&#39;s like saying <code>goto</code> is always a bad practice. Unreadable code created by artificial rules is by far a worse practice."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1461798365, "post_id": 36895871, "comment_id": 61368939, "body": "Using <code>void *</code> pointers basically disables all benefits the type system gives you meaning you&#39;ll have to do everything yourself. (And while doing so, you&#39;re likely to shoot yourself into the foot.) Sometimes, this is what you need, but the cases are rare in modern C++. (As they are for <code>goto</code>.) But I would stop thinking of <code>void</code> and <code>auto</code> as related features, it will cause more confusion than good. <a href=\"https://herbsutter.com/2013/08/12/gotw-94-solution-aaa-style-almost-always-auto/\" rel=\"nofollow noreferrer\"><code>auto</code> is awesome</a>, by the way."}, {"owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "reply_to_user": {"reputation": 1238, "user_id": 677299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9a0a6b12c50853df1e565fd54253a?s=128&d=identicon&r=PG", "display_name": "jbruni", "link": "https://stackoverflow.com/users/677299/jbruni"}, "edited": false, "score": 0, "creation_date": 1461798970, "post_id": 36895871, "comment_id": 61369090, "body": "@jbruni i have never ever done a <code>vector</code> of <code>vectors</code>! I wouldnt imagine! Is that even possible??? That would be like a matrix i suppose. 5gon im asking why <code>auto</code> is awesome. jburni i am reading the C++ Primer because im preety sure thats more subtle for begginers.. And im a begginer(has been 8 days since i started C++).. Anways i will use <code>auto</code> for times where i dont exactly know what type a variable will be. I suppose thats the proper usage? Also 5gon, now i have understood that auto and void are completely diffrent topics!"}], "tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": true, "score": 12, "last_activity_date": 1461775267, "creation_date": 1461775267, "answer_id": 36895871, "question_id": 36895014, "link": "https://stackoverflow.com/questions/36895014/difference-between-auto-and-void/36895871#36895871", "title": "Difference between Auto and Void?", "body": "<p>Did you try running your examples through a compiler? As it happens, neither</p>\n\n<pre><code>auto * p;  // error\n</code></pre>\n\n<p>nor</p>\n\n<pre><code>int a = 0;\nvoid * p = &amp;a;\nstd::cout &lt;&lt; typeid(*p) &lt;&lt; '\\n';  // error\n</code></pre>\n\n<p>will compile while both</p>\n\n<pre><code>void * p;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>int a = 0;\nauto * p = &amp;a;\nstd::cout &lt;&lt; typeid(*p) &lt;&lt; '\\n';\n</code></pre>\n\n<p>are fine.</p>\n\n<p>To give an informal and easy to remember analogy for <code>void *</code> and <code>auto *</code>, think of <code>void * p</code> as telling the compiler</p>\n\n<blockquote>\n  <p>Don't care about what <code>p</code> pointer points to, I'll handle it myself (at run-time).</p>\n</blockquote>\n\n<p>whereas <code>auto * p = (expression)</code> tells the compiler</p>\n\n<blockquote>\n  <p>Please figure out for me (at compile-time) what (pointer) type <code>(expression)</code> evaluates to and make the type of <code>p</code> be accordingly.</p>\n</blockquote>\n\n<p>As a matter of fact, <code>auto *</code> is rarely useful. You can simply write <code>auto</code> instead and if the initializing expression is a pointer type, the <code>auto</code> will be deduced to be a pointer, too.</p>\n"}, {"comments": [{"owner": {"reputation": 1238, "user_id": 677299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d9a0a6b12c50853df1e565fd54253a?s=128&d=identicon&r=PG", "display_name": "jbruni", "link": "https://stackoverflow.com/users/677299/jbruni"}, "edited": false, "score": 2, "creation_date": 1461794873, "post_id": 36897416, "comment_id": 61367668, "body": "Similarly, you cannot do <code>void&amp;</code>."}], "tags": [], "owner": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "is_accepted": false, "score": 2, "last_activity_date": 1461780535, "last_edit_date": 1461780535, "creation_date": 1461779798, "answer_id": 36897416, "question_id": 36895014, "link": "https://stackoverflow.com/questions/36895014/difference-between-auto-and-void/36897416#36897416", "title": "Difference between Auto and Void?", "body": "<p><em>From the compiler's viewpoint</em>:</p>\n\n<ul>\n<li>In C++11 <code>auto</code> uses the same rules of inference as <a href=\"http://en.cppreference.com/w/cpp/language/template_argument_deduction\" rel=\"nofollow\">template argument deduction</a>. It basically tells the compiler: <em>\"Deduce the type from the initializer.\"</em></li>\n<li><code>void *</code> tells the compiler: <em>\"Here is a pointer pointing to an object whose type cannot possibly be known at compile time.\"</em></li>\n</ul>\n\n<p>For <code>auto</code> the actual type is <em>deduced at compile time</em>, so the compiler can warn about possible misuse.</p>\n\n<p>For <code>void *</code> the actual type is deduced in code <em>by the programmer</em> using a <a href=\"http://en.cppreference.com/w/cpp/language/reinterpret_cast\" rel=\"nofollow\"><code>reinterpret_cast</code></a> to cast to a known pointer type, typically at the point of execution of that segment of code.</p>\n\n<hr>\n\n<p><em>From the programmer's viewpoint</em>:</p>\n\n<ul>\n<li>Hey compiler I'm too lazy or too clumsy to write the type. I'll just <code>auto</code> it and let you figure out the rest. <em>(And it looks smaller than the type I was about to write. Except for</em> <code>int</code><em>.)</em></li>\n<li>Hey compiler, don't you dare mess with my <code>void *</code>. I'll figure out the type <em>at runtime</em> myself (in code...) when I need it.\n\n<ul>\n<li><em>Useful for runtime polymorphism as the same pointer can be used to point to objects of different types as needed in the context.</em></li>\n<li>Also useful if you are coding a base class and you client needs to store an object of an <em>User Defined Type</em> defined by the client.</li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>So <strong>NO</strong> <code>auto</code> is <strong>NOT</strong> equivalent to <code>void</code>. <code>void</code> means <em>nothing</em>. In fact you can't even declare a variable of type <code>void</code>. <code>void *</code> however is a <em>special type of pointer</em> that can <em>point to anything!</em> And <code>auto *</code> is redundant, just use plain old <code>auto</code> instead.</p>\n\n<p>In your example,</p>\n\n<blockquote>\n<pre><code>int a = 5;\nauto *somePtr = 5;\nstd::cout &lt;&lt; typeid(*somePtr).name(); &lt;&lt; std::endl;\n</code></pre>\n</blockquote>\n\n<p>You assigned an address <code>5</code> to <code>somePtr</code> which is illegal. Needlessly stating that <code>*somePtr</code> is also illegal in that context. Although <code>auto</code> is probably deduced to an <code>int</code>, which is what you wanted to print. </p>\n\n<p>Well with modern C++ techniques, you rarely see <code>void *</code>s and <code>reinterpret_cast</code>s or any raw pointers for instance except deep within any library implementation internals.</p>\n"}], "owner": {"reputation": 4268, "user_id": 5768335, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FVCGA.jpg?s=128&g=1", "display_name": "amanuel2", "link": "https://stackoverflow.com/users/5768335/amanuel2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3766, "favorite_count": 4, "accepted_answer_id": 36895871, "answer_count": 5, "score": 4, "last_activity_date": 1474403903, "creation_date": 1461772767, "last_edit_date": 1474403903, "question_id": 36895014, "link": "https://stackoverflow.com/questions/36895014/difference-between-auto-and-void", "title": "Difference between Auto and Void?", "body": "<p>I am reading the C++ Primer Book (fifth edition) and I have a question upon the book i am reading. It says:</p>\n\n<blockquote>\n  <p>The type <code>void*</code> is a special pointer type that can hold the address of\n  any object. Like any other pointer, a <code>void*</code> pointer holds an address,\n  but the type of the object at that address is unknown.</p>\n</blockquote>\n\n<p>Ok, so I understand that but\u2026 I have many contradictions to the statement. First of all, can't you use <code>auto</code>? Doesn't it do the same thing as <code>void</code>? Meaning aren't</p>\n\n<pre><code>void *somePtr;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>auto *somePtr;\n</code></pre>\n\n<p>the same?</p>\n\n<p>Second of all it says the type of the attached address is unknown. Can't you use <code>typeid</code> to get the type? Like this:</p>\n\n<pre><code>int a = 5;\nauto *somePtr = 5;\nstd::cout &lt;&lt; typeid(*somePtr).name() &lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": ["c++", "c++11", "virtual", "final"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1461773098, "post_id": 36895012, "comment_id": 61354417, "body": "final functions are de-virtualized only when static type matches the one where function is final. Happenes rarely, and is often an indication of the fact that no virtual is needed in the first place."}, {"owner": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1461774534, "post_id": 36895012, "comment_id": 61355502, "body": "@SergeyA Yes. That&#39;s why I wrote qualified."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 2, "creation_date": 1461776324, "post_id": 36895012, "comment_id": 61356614, "body": "If the compiler can guarantee that it does not need a virtual call then it will not plant a virtual call (as an optimization). The compiler is clever and already did this pre the introduction of final. But I suppose it is easier now."}, {"owner": {"reputation": 1240, "user_id": 3585575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W47ui.png?s=128&g=1", "display_name": "KyleKnoepfel", "link": "https://stackoverflow.com/users/3585575/kyleknoepfel"}, "edited": false, "score": 0, "creation_date": 1461776471, "post_id": 36895012, "comment_id": 61356731, "body": "@AnirbanSarkar Can you clarify what you mean by your compiler &quot;is very quiet about this&quot;?"}, {"owner": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "edited": false, "score": 0, "creation_date": 1461777973, "post_id": 36895012, "comment_id": 61357756, "body": "It does not say anything, that whether I explicitly need to state a <code>final</code> keyword in the declaration sequence of the member function in question. <i>If I don&#39;t it does not complain. If I do it does not complain.</i> At first glance it seemed so implicit, I omitted writing <code>final</code>. And there is no way to check if the function is indeed marked <code>final</code>. So suspicions arose and I decided to post this."}, {"owner": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "reply_to_user": {"reputation": 1240, "user_id": 3585575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W47ui.png?s=128&g=1", "display_name": "KyleKnoepfel", "link": "https://stackoverflow.com/users/3585575/kyleknoepfel"}, "edited": false, "score": 0, "creation_date": 1461781299, "post_id": 36895012, "comment_id": 61359892, "body": "@KyleKnoepfel I didn&#39;t find helpful definitions in this context on the web either."}, {"owner": {"reputation": 17408, "user_id": 2881849, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a2fd0122f50f7582be15be3062c5b71?s=128&d=identicon&r=PG&f=1", "display_name": "MikeMB", "link": "https://stackoverflow.com/users/2881849/mikemb"}, "edited": false, "score": 2, "creation_date": 1461781811, "post_id": 36895012, "comment_id": 61360223, "body": "If you mark your class final, you can&#39;t inherit from it and hence you cant override any of its memberfunctions, so why bother if a member function is final or not?"}, {"owner": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "edited": false, "score": 0, "creation_date": 1461809983, "post_id": 36895012, "comment_id": 61371973, "body": "More specifically because my compiler doesn&#39;t complain in either case, which is annoying."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1461810256, "post_id": 36895012, "comment_id": 61372027, "body": "The compiler is allowed to treat all member functions of a <code>final</code> class as if they were declared <code>final</code>"}, {"owner": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1461810456, "post_id": 36895012, "comment_id": 61372089, "body": "@M.M So does it or does it not treat them as such? Or is it all implementation dependent? That is my question."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1461810600, "post_id": 36895012, "comment_id": 61372125, "body": "IDK what your particular compiler does.  The behaviour defined by the C++ Standard for a program is identical whether or not you write <code>final</code> on the member functions of a <code>final</code> class."}, {"owner": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1461810759, "post_id": 36895012, "comment_id": 61372168, "body": "@M.M OK. Thanks! That actually solves my question. Can you post a quote/reference to the standard that actually states this?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1462543404, "post_id": 36895012, "comment_id": 61693367, "body": "I&#39;m confused. Aren&#39;t all of these things the same thing? If you can&#39;t derive from <code>Class</code> then you can&#39;t override its virtual member functions either."}, {"owner": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1462985591, "post_id": 36895012, "comment_id": 61872640, "body": "@LightnessRacesinOrbit Yes. That&#39;s why I asked if final specifier (applied to member virtual functions) could be implied in such a case."}], "answers": [{"comments": [{"owner": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "edited": false, "score": 0, "creation_date": 1461811245, "post_id": 36898879, "comment_id": 61372320, "body": "Nope. The entire virtualization mechanism (done with virtual tables and pointers) is not part of the standard. I was hoping the implementors would post details about the implementation details they implemented.  Anyway, +1 for the clear answer."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 18, "last_activity_date": 1559572556, "last_edit_date": 1559572556, "creation_date": 1461784353, "answer_id": 36898879, "question_id": 36895012, "link": "https://stackoverflow.com/questions/36895012/does-c-final-imply-final-in-all-aspects/36898879#36898879", "title": "Does C++ final imply final in all aspects?", "body": "<blockquote>\n  <p>The reason I am asking this is because final functions become qualified for de-virtualization, which is a great optimization.</p>\n</blockquote>\n\n<p>Do they? \"De-virtualization\" is not part of the C++ standard. Or at least, not really.</p>\n\n<p>De-virtualization is merely a consequence of the \"as if\" rule, which states that the implementation can do whatever it likes so long as the implementation behaves \"as if\" it is doing what the standard says.</p>\n\n<p>If the compiler can detect at compile-time that a particular call to a virtual member function, through a polymorphic type, will undeniably call a specific version of that function, then it is allowed to avoid using the virtual dispatching logic and calling the function statically. That's behaving \"as if\" it had used the virtual dispatching logic, since the compiler can prove that this is the function that would have been called.</p>\n\n<p>As such, the standard does not define when de-virtualization is allowed/forbidden. A compiler, upon inlining a function that takes a pointer to a base class type, may find that the pointer being passed is pointing to a stack variable local declared in the function that it is being inlined within. Or that the compiler can trace down a particular inline/call graph to the point of origin for a particular polymorphic pointer/reference. In those cases, the compiler can de-virtualize calls into that type. But only if it's smart enough to do so.</p>\n\n<p>Will a compiler devirtualize all virtual function calls to a <code>final</code> class, regardless of whether those methods are declared <code>final</code> themselves? It may. It may not. It may not even devirtualize any calls to methods declared <code>final</code> on the polymorphic type. That's a valid (if not particularly bright) implementation.</p>\n\n<p>The question you're asking is implementation specific. It can vary from compiler to compiler.</p>\n\n<p>However, a class being declared <code>final</code>, as you pointed out, ought to be sufficient information for the compiler to devirtualize all calls to pointers/references to the <code>final</code> class type. If a compiler doesn't do so, then that's a quality-of-implementation issue, not a standards one.</p>\n"}, {"comments": [{"owner": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "edited": false, "score": 0, "creation_date": 1461810325, "post_id": 36898976, "comment_id": 61372051, "body": "Uh? How is it <i>ill-formed</i>? The <code>final class</code> is supposed to imply <b>its own</b> virtually inherited member function as <code>final</code>. The example above compiles in both test cases: When the <code>final</code> specifier is attached to the virtual function and when not (without an error/warning/informational messages whatsoever). Please explain."}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "reply_to_user": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "edited": false, "score": 0, "creation_date": 1461818048, "post_id": 36898976, "comment_id": 61374244, "body": "Yes, the standard wording you (as asked for) relates to when the an attempt it made to override a final method or have a final class as a base. That is the purpose of final. The final keyword can be combined, there is no problem with that, the two cases don&#39;t mean the same thing. It could even be advised if you have concerns about future maintenance of the code. The optimizations you mention are a quality of implementation issues, and have been around long before final was added to the standard."}], "tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": false, "score": 7, "last_activity_date": 1611836663, "last_edit_date": 1611836663, "creation_date": 1461784638, "answer_id": 36898976, "question_id": 36895012, "link": "https://stackoverflow.com/questions/36895012/does-c-final-imply-final-in-all-aspects/36898976#36898976", "title": "Does C++ final imply final in all aspects?", "body": "<p>To quote the draft C++ standard from here <a href=\"http://eel.is/c++draft/class.derived#class.virtual-4\" rel=\"nofollow noreferrer\">[class.virtual/4]</a>:</p>\n<blockquote>\n<p>If a virtual function <code>f</code> in some class <code>B</code> is marked with the <em>virt-specifier</em> <code>final</code> and in a class <code>D</code> derived from <code>B</code> a function <code>D::f</code> overrides <code>B::f</code>, the program is ill-formed.</p>\n</blockquote>\n<p>And here <a href=\"http://eel.is/c++draft/class#3\" rel=\"nofollow noreferrer\">[class/3]</a>:</p>\n<blockquote>\n<p>If a class is marked with the <em>class-virt-specifier</em> <code>final</code> and it appears as a <em>base-type-specifier</em> in a <em>base-clause</em> (Clause [class.derived]), the program is ill-formed.</p>\n</blockquote>\n<p><em>So, in answer to the question</em>;</p>\n<blockquote>\n<p>Does a <code>final</code> <code>class</code> implicitly imply its <code>virtual</code> functions to be <code>final</code> as well? Should it? Please clarify.</p>\n</blockquote>\n<p>So, at least not formally. Any attempt to violate either rule will have the same result in both cases; the program is ill-formed and won't compile. A <code>final class</code> means the class cannot be derived from, so as a consequence of this, its <code>virtual</code> methods cannot be overridden.</p>\n<p>Should it? At least formally, probably not; they are related but they are not the same thing. There is also no need formally require the one to imply the other, the effect follows naturally. Any violations have the same result, a failed compilation (hopefully with appropriate error messages to distinguish the two).</p>\n<hr />\n<p>To touch on your motivation for the query and the de-virtualization of the virtual calls. This is not always immediately affected by the <code>final</code> of the class nor method (albeit they offer help), the normal rules of the virtual functions and class hierarchy apply.</p>\n<p>If the compiler can determine that at runtime a particular method will always be called (e.g. with an automatic object, i.e. &quot;on the stack&quot;), it could apply such <a href=\"https://stackoverflow.com/a/7047248/3747990\">an optimisation anyway</a>, irrespective of the method being marked final or not. These optimisations fall under the &quot;as-if&quot; rule, that allow the compiler to <a href=\"http://en.cppreference.com/w/cpp/language/as_if\" rel=\"nofollow noreferrer\">apply any transformation</a> so long as the observable behaviour is as-if the original code had been executed.</p>\n"}, {"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": false, "score": 1, "last_activity_date": 1576590477, "creation_date": 1576590477, "answer_id": 59375658, "question_id": 36895012, "link": "https://stackoverflow.com/questions/36895012/does-c-final-imply-final-in-all-aspects/59375658#59375658", "title": "Does C++ final imply final in all aspects?", "body": "<blockquote>\n  <p>Does a <code>final</code> class implicitly imply its <code>virtual</code> functions to be <code>final</code> as well?</p>\n  \n  <p><em>[...]</em></p>\n  \n  <p>I am asking this is because final functions become qualified for <strong>de-virtualization</strong>, which is a great optimization.</p>\n</blockquote>\n\n<p><strong><em>Yes</em></strong>, it does, for the purposes of de-virtualization, in all major compilers (including MSVC):</p>\n\n<pre><code>struct B                   { virtual void f() = 0;   };\n\nstruct D1       : public B {         void f();       };\nstruct D2       : public B {         void f() final; };\nstruct D3 final : public B {         void f();       };\n\nvoid f1(D1&amp; x) { x.f(); } // Not de-virtualized\nvoid f2(D2&amp; x) { x.f(); } //     De-virtualized\nvoid f3(D3&amp; x) { x.f(); } //     De-virtualized\n</code></pre>\n"}], "owner": {"reputation": 736, "user_id": 4294597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0cd3cdd73ff8f94319c2dde2e4b8b8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Anirban Sarkar", "link": "https://stackoverflow.com/users/4294597/anirban-sarkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3334, "favorite_count": 4, "accepted_answer_id": 36898879, "answer_count": 3, "score": 19, "last_activity_date": 1611836663, "creation_date": 1461772766, "last_edit_date": 1461809804, "question_id": 36895012, "link": "https://stackoverflow.com/questions/36895012/does-c-final-imply-final-in-all-aspects", "title": "Does C++ final imply final in all aspects?", "body": "<blockquote>\n  <p>C++11 added final.</p>\n</blockquote>\n\n<p>Finally!</p>\n\n<p>I understand <code>final</code> does two things:</p>\n\n<ul>\n<li>Makes a class non-inheritable.</li>\n<li>Makes (virtual) functions in a class non-overridable (in a derived class).</li>\n</ul>\n\n<p>Both of these seem independent of each other. But take for example the following:</p>\n\n<pre><code>class Foo\n{\n    public:\n    virtual void bar()\n    {\n        //do something unimportant.\n    }\n};\nclass Baz final : public Foo\n{\n    public:\n    void bar() /*final*/ override\n    {\n        //do something more important than Foo's bar.\n    }\n};\n</code></pre>\n\n<p>From above, I believe <code>Baz</code> being <code>final</code>, I <em>should <strong>NOT</strong> need to specify</em> that its <code>virtual</code> member function <code>bar</code> is also <code>final</code>. Since <code>Baz</code> cannot be inherited, the question of overriding <code>bar</code> goes out of scope. However my compiler VC++ 2015, is very quiet about this. I have not tested this on any others at the moment.</p>\n\n<p>I would be glad if someone could shed some light on this topic. A quote from the standard (if any) would be extremely appreciated. Also please state any corner cases that I am unaware of, that may cause my logical belief to fail.</p>\n\n<p>So, my question is: <strong>Does a</strong> <code>final class</code> <strong>implicitly imply its</strong> <code>virtual</code> <strong>functions to be</strong> <code>final</code> <strong>as well? Should it? Please clarify.</strong></p>\n\n<hr>\n\n<p>The reason I am asking this is because <code>final</code> functions become qualified for <strong>de-virtualization</strong>, which is a great optimization. Any help is appreciated.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 2, "creation_date": 1461772905, "post_id": 36895011, "comment_id": 61354266, "body": "Not entirely sure what the point of any of this code is... But you are assigning to num in your <code>if (num=2)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 2, "creation_date": 1461772984, "post_id": 36895011, "comment_id": 61354330, "body": "Looks like you&#39;re dividing by 0 somewhere."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1461773292, "post_id": 36895011, "comment_id": 61354558, "body": "Time to break out the debugger."}, {"owner": {"reputation": 3, "user_id": 6262432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be87f9bafbaab4ded910cec69a33aebb?s=128&d=identicon&r=PG&f=1", "display_name": "Kishore Ganesh", "link": "https://stackoverflow.com/users/6262432/kishore-ganesh"}, "edited": false, "score": 0, "creation_date": 1461773525, "post_id": 36895011, "comment_id": 61354738, "body": "Well, this is Project Euler problem 3. I am sure there&#39;s a simpler way to do this, but I thought I would give it a try. Basically, I am trying to find prime factors of 13195. So first I find all prime factors (upto 100), and then find all factors divisible by 13195."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6262432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be87f9bafbaab4ded910cec69a33aebb?s=128&d=identicon&r=PG&f=1", "display_name": "Kishore Ganesh", "link": "https://stackoverflow.com/users/6262432/kishore-ganesh"}, "edited": false, "score": 0, "creation_date": 1461773436, "post_id": 36895108, "comment_id": 61354678, "body": "I am not sure I understand. Isn&#39;t the % operator meant to find the remainder? So theoretically, if i=1 and j=1, then their remainder would be 0. But the division is perfectly logical, is it not?"}, {"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "reply_to_user": {"reputation": 3, "user_id": 6262432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be87f9bafbaab4ded910cec69a33aebb?s=128&d=identicon&r=PG&f=1", "display_name": "Kishore Ganesh", "link": "https://stackoverflow.com/users/6262432/kishore-ganesh"}, "edited": false, "score": 0, "creation_date": 1461773753, "post_id": 36895108, "comment_id": 61354920, "body": "That division is logical, but if i and j are zero, which they are the first time through the loop, you&#39;re dividing by zero."}, {"owner": {"reputation": 3, "user_id": 6262432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be87f9bafbaab4ded910cec69a33aebb?s=128&d=identicon&r=PG&f=1", "display_name": "Kishore Ganesh", "link": "https://stackoverflow.com/users/6262432/kishore-ganesh"}, "edited": false, "score": 0, "creation_date": 1461773777, "post_id": 36895108, "comment_id": 61354949, "body": "Thank you, that fixed it. I knew it was going to be something easy ;)"}, {"owner": {"reputation": 12454, "user_id": 79737, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GaA88.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/79737/jay"}, "edited": false, "score": 0, "creation_date": 1461773820, "post_id": 36895108, "comment_id": 61354976, "body": "From MSDN: &quot;The modulus, or remainder, operator divides number1 by number2 and returns only the remainder.&quot;"}], "tags": [], "owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "is_accepted": true, "score": 2, "last_activity_date": 1461772983, "creation_date": 1461772983, "answer_id": 36895108, "question_id": 36895011, "link": "https://stackoverflow.com/questions/36895011/c-program-is-crashing-for-some-unknown-reason/36895108#36895108", "title": "C++ program is crashing for some unknown reason", "body": "<p>In <code>if((i%j)==0)</code> if <code>i</code> and <code>j</code> are zero, your next line is dividing i and j. This is division by zero.</p>\n"}], "owner": {"reputation": 3, "user_id": 6262432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be87f9bafbaab4ded910cec69a33aebb?s=128&d=identicon&r=PG&f=1", "display_name": "Kishore Ganesh", "link": "https://stackoverflow.com/users/6262432/kishore-ganesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 36895108, "answer_count": 1, "score": 0, "last_activity_date": 1461773300, "creation_date": 1461772765, "last_edit_date": 1461773300, "question_id": 36895011, "link": "https://stackoverflow.com/questions/36895011/c-program-is-crashing-for-some-unknown-reason", "title": "C++ program is crashing for some unknown reason", "body": "<p>I started learning C++ recently, and thought I would test my mettle with Project Euler problems. I solved the first two, but I am stuck on the third. It is compiling correctly without any errors, but it is crashing as soon as it is executed. I tried removing the nested for loops to isolate the problem, and it still crashed.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;math.h&gt;\nint main()\n{\n  float quot;\n  int num = 0;\n  int array[100];\n  float next;\n\n  for(int i = 0; i &lt; 100; i++)\n  {\n      for (int j = 0; j &lt; 100; j++)\n      {\n          if((i % j) == 0)\n          {\n            quot=j/i;\n            num=num+1;\n          }\n\n          if (num=2)\n          {\n            array[i]=i;\n          }\n      }\n  }\n\n  for (int i = 0; i &lt; 100; i++)\n  {\n    if((13195 % i) == 0)\n    {\n      std::cout &lt;&lt; i;\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-asio", "cpp-netlib"], "comments": [{"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 3, "creation_date": 1461772865, "post_id": 36894951, "comment_id": 61354224, "body": "Paste one of those messages into Google.  I&#39;ll bet you aren&#39;t the first person to encounter these.  Learning how to get yourself out of holes is a key skill."}, {"owner": {"reputation": 449, "user_id": 5585956, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/5pwKs.png?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/5585956/sean"}, "edited": false, "score": 0, "creation_date": 1461772985, "post_id": 36894951, "comment_id": 61354331, "body": "Without any code samples, it becomes pretty difficult to help. From a quick glance, it seems like you have syntax errors. Did you write the program?"}, {"owner": {"reputation": 1, "user_id": 6262438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/400f8866ce391b9759437e9ed8fc8aab?s=128&d=identicon&r=PG&f=1", "display_name": "0x452", "link": "https://stackoverflow.com/users/6262438/0x452"}, "reply_to_user": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1461773056, "post_id": 36894951, "comment_id": 61354383, "body": "@duffymo sorry, but i didn&#39;t find that in google :("}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1461773116, "post_id": 36894951, "comment_id": 61354431, "body": "I did: <a href=\"https://msdn.microsoft.com/en-us/library/0eya6e3a.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/0eya6e3a.aspx</a>"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 5773017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74266223a02812ed8bbae3a27aa8fdb0?s=128&d=identicon&r=PG&f=1", "display_name": "Rjain", "link": "https://stackoverflow.com/users/5773017/rjain"}, "is_accepted": false, "score": 1, "last_activity_date": 1461773153, "last_edit_date": 1495539850, "creation_date": 1461773153, "answer_id": 36895184, "question_id": 36894951, "link": "https://stackoverflow.com/questions/36894951/errors-when-im-compiling-my-project/36895184#36895184", "title": "errors when i&#39;m compiling my project", "body": "<p>The below link could help you fix this, \n<a href=\"https://stackoverflow.com/questions/23539396/undeclared-identifier-error-c2065-in-c\">Undeclared identifier (error C2065) in c++</a></p>\n\n<p>Basically, looks like you have not included the \"using namespace\" or missing out on adding few headers</p>\n"}], "owner": {"reputation": 1, "user_id": 6262438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/400f8866ce391b9759437e9ed8fc8aab?s=128&d=identicon&r=PG&f=1", "display_name": "0x452", "link": "https://stackoverflow.com/users/6262438/0x452"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "closed_date": 1461780907, "answer_count": 1, "score": -5, "last_activity_date": 1461773153, "creation_date": 1461772639, "last_edit_date": 1461772819, "question_id": 36894951, "link": "https://stackoverflow.com/questions/36894951/errors-when-im-compiling-my-project", "closed_reason": "Not suitable for this site", "title": "errors when i&#39;m compiling my project", "body": "<p>when i'm compiling my project i will get a lot of errors:</p>\n\n<pre><code>1&gt;------ Build started: Project: cpp-uri, Configuration: Debug x64 ------\n1&gt;  uri_builder.cpp\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(45): error C2065: 'void_': undeclared identifier\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(46): error C2923: 'network_boost::mpl::is_void_': 'void_' is not a valid template type argument for parameter 'T'\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(51): error C2913: explicit specialization; 'network_boost::mpl::is_void_' is not a specialization of a class template\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(63): error C2065: 'void_': undeclared identifier\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(64): error C2923: 'network_boost::mpl::is_not_void_': 'void_' is not a valid template type argument for parameter 'T'\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(69): error C2913: explicit specialization; 'network_boost::mpl::is_not_void_' is not a specialization of a class template\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(71): error C2913: explicit specialization; 'network_boost::mpl::is_void_' is not a specialization of a class template\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(71): error C2988: unrecognizable template declaration/definition\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(71): error C2143: syntax error: missing ';' before '&lt;'\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(71): error C2059: syntax error: '&lt;'\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(71): error C2143: syntax error: missing ';' before '{'\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(71): error C2447: '{': missing function header (old-style formal list?)\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(72): error C2913: explicit specialization; 'network_boost::mpl::is_not_void_' is not a specialization of a class template\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(72): error C2977: 'network_boost::mpl::lambda': too many template arguments\n1&gt;  c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(71): note: see declaration of 'network_boost::mpl::lambda'\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(72): error C3646: 'is_le': unknown override specifier\n1&gt;  c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(72): note: see reference to class template instantiation 'network_boost::mpl::lambda&lt;Tag&gt;' being compiled\n1&gt;c:\\gta-five\\multiplayer\\vendor\\cpp-uri\\src\\boost/mpl/void.hpp(72): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int\n</code></pre>\n\n<p>i must get a cpp-uri.lib but i get a huge list of errors</p>\n\n<p>vs2015 boost 1.58</p>\n"}, {"tags": ["c++", "c++11", "error-handling"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1461772810, "post_id": 36894923, "comment_id": 61354172, "body": "Another way to make the <code>main</code> function less cluttered is to write functions and call them."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 2, "creation_date": 1461772881, "post_id": 36894923, "comment_id": 61354245, "body": "I&#39;d avoid as many dependencies on preprocessor magic as humanly possible."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1461772884, "post_id": 36894923, "comment_id": 61354248, "body": "<i>&quot;As you can see, the main function is less cluttered.&quot;</i> Well, that depends on POV. When reviewing your code I would always need to see the macro definition to get assured that it&#39;s doing what the macro name suggests."}, {"owner": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "edited": false, "score": 0, "creation_date": 1461772892, "post_id": 36894923, "comment_id": 61354253, "body": "Yes, you should refactor out that behaviour <code>(!ifs.is_open(), open_file_error(filename), 1 )</code>, to a function call if it&#39;s used more than once. Where I work we have a coding style guide that recommends against macros.  You should probably think about having a single exit point on the function too (so a single <code>return</code>)"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1461773010, "post_id": 36894923, "comment_id": 61354343, "body": "Also, look into imbuing exceptions into your filestream if error handling becomes too burdensome: <a href=\"http://en.cppreference.com/w/cpp/io/basic_ios/exceptions\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/basic_ios/exceptions</a>"}, {"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1461773137, "post_id": 36894923, "comment_id": 61354444, "body": "@PeteBecker: well, everything is in main here to make a self-contained example, but the idea is to use this method in large projects with hundreds of classes and methods."}, {"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1461773213, "post_id": 36894923, "comment_id": 61354495, "body": "@erip: I agree. I&#39;d like a solution entirely based on lambdas for example but I&#39;m at the limits of my knowledge here."}, {"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1461773328, "post_id": 36894923, "comment_id": 61354587, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 You&#39;re right but good IDE will show you that by hovering. I agree that a solution with no macro would be better."}, {"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1461773397, "post_id": 36894923, "comment_id": 61354646, "body": "@AndyG: the precise error is not the subject here. The way of handling it is."}, {"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "reply_to_user": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "edited": false, "score": 1, "creation_date": 1461773592, "post_id": 36894923, "comment_id": 61354788, "body": "@CJBrew: we also vote against macros but there is use cases where they are useful\u2026 With a function, how would you allow the caller to return if and only if the test is failed ?"}, {"owner": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "edited": false, "score": 0, "creation_date": 1461773788, "post_id": 36894923, "comment_id": 61354957, "body": "@Kleag I&#39;m not sure I understand what you&#39;re testing for, but I think explicit code is better than hiding simple boolean logic in a macro."}, {"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "reply_to_user": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "edited": false, "score": 0, "creation_date": 1461774866, "post_id": 36894923, "comment_id": 61355705, "body": "@CJBrew: I started to think at that solution after adding error handling to the call to the python c api like PyImport_ImportModule followed by PyList_Append and several PyObject_CallMethod. This made the function hard to read. Using my method make it easier to read while still handling errors."}], "answers": [{"comments": [{"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "edited": false, "score": 0, "creation_date": 1475490248, "post_id": 36895031, "comment_id": 66948493, "body": "I will accept your answer as you mainly agree with me :-)  Anyway, thanks to the other contributors for their inputs and discussions."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 0, "last_activity_date": 1461772801, "creation_date": 1461772801, "answer_id": 36895031, "question_id": 36894923, "link": "https://stackoverflow.com/questions/36894923/are-there-drawbacks-to-using-a-lambda-and-macro-for-error-handling/36895031#36895031", "title": "Are there drawbacks to using a lambda and macro for error handling?", "body": "<p>Looks okay to me. I wouldn't put all your eggs into this basket because you don't have to make it much more complicated to run into limitations with preprocessor syntax but, as it is, this is fine.</p>\n"}, {"comments": [{"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "edited": false, "score": 0, "creation_date": 1461774349, "post_id": 36895344, "comment_id": 61355362, "body": "Thank you for your suggestion but I&#39;m not sure it generalizes well to all use cases of handling functions error handling. For example, the first test on success adds one level of indentation. If you have something like 10 calls to external functions (like I just had while embedding a python module inside my c++ module), this will not be more readable that standard way I put at the beginning of my question."}, {"owner": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "reply_to_user": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "edited": false, "score": 0, "creation_date": 1461774731, "post_id": 36895344, "comment_id": 61355625, "body": "I&#39;d argue this is sort of what exceptions are designed to do... Make your function calls to external code <code>throw</code> on errors. That way you don&#39;t have to worry about return at all."}, {"owner": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "reply_to_user": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "edited": false, "score": 0, "creation_date": 1461775103, "post_id": 36895344, "comment_id": 61355870, "body": "@Kleag, Updated my answer, using exceptions instead."}, {"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "edited": false, "score": 0, "creation_date": 1461775563, "post_id": 36895344, "comment_id": 61356137, "body": "I see. But then, I still have to encapsulate each external call into a function that can throw after testing the return value. Or to make several calls in one function but then we are back to the initial question of clutering with individual tests and throws."}, {"owner": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "reply_to_user": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "edited": false, "score": 0, "creation_date": 1461775815, "post_id": 36895344, "comment_id": 61356302, "body": "If you&#39;re dealing with an external API it may well be worth wrapping it in your own class...  In which case you will have a wrapper function for each call or calls anyway, and can do all your own exception/failure handling there."}], "tags": [], "owner": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "is_accepted": false, "score": 2, "last_activity_date": 1461776626, "last_edit_date": 1461776626, "creation_date": 1461773581, "answer_id": 36895344, "question_id": 36894923, "link": "https://stackoverflow.com/questions/36894923/are-there-drawbacks-to-using-a-lambda-and-macro-for-error-handling/36895344#36895344", "title": "Are there drawbacks to using a lambda and macro for error handling?", "body": "<p>Suggest this as a much cleaner example. NOW USING EXCEPTIONS... \nI haven't tested that it's 100% the same behaviour as your example (which I appreciate is just that; an example).</p>\n\n<p>By the way, MFC has a \"SUCCESS\" macro that does a similar check to your \"RETURN_IF\". I don't like that macro either...</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nvoid TestForFileOpen(const std::string&amp; filename) \n{\n    std::ifstream ifs(filename.c_str());\n    if (!ifs.is_open())\n    {\n        throw std::exception(\"Failed\");\n    }\n}\n\nvoid ReportFileOpenFailure(const std::string&amp; filename) \n{\n    std::cerr &lt;&lt; \"Failed to open file \" &lt;&lt; filename &lt;&lt; std::endl;\n}\n\nvoid NoisyTestForFileOpen(const std::string&amp; filename)\n{\n    try\n    {\n        TestForFileOpen(filename);\n    }\n    catch(...)\n    {\n        ReportFileOpenFailure(filename);\n        throw;\n    }\n}\n\nint main(int argc, char **argv)\n{    \n    std::string filename(\"/usr/include/malloc.h\");\n\n    try\n    {\n        NoisyTestForFileOpen(filename);\n\n        std::cout &lt;&lt; \"Passed the first error handling\" &lt;&lt; std::endl;\n\n        filename = \"/this/file/does/not/exist\";\n        NoisyTestForFileOpen(filename);        \n    }\n    catch (...)\n    {\n        return 1;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>A more general example with a custom API:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nclass IFileTester \n{\npublic:\n    virtual ~IFileTester() {}\n\n    // throws if file cannot be opened\n    virtual void TestForFileOpen(const std::string&amp; filename) const = 0;\n};\n\nclass IfStreamFileTester : public IFileTester // implement as many versions as you need\n{\npublic:\n    virtual void TestForFileOpen(const std::string&amp; filename) const\n    {\n        // implement this in terms of ifstream\n        std::ifstream ifs(filename.c_str());\n\n        // thanks @Jerry-Coffin\n        ifs.exceptions(std::ios::failbit);\n    }\n};\n\n\nvoid ReportFileOpenFailure(const std::string&amp; filename) \n{\n    std::cerr &lt;&lt; \"Failed to open file \" &lt;&lt; filename &lt;&lt; std::endl;\n}\n\nvoid NoisyTestForFileOpen(const IFileTester&amp; fileTester, const std::string&amp; filename)\n{\n    try\n    {\n        fileTester.TestForFileOpen(filename);\n    }\n    catch(...)\n    {\n        ReportFileOpenFailure(filename);\n        throw;\n    }\n}\n\nint main(int argc, char **argv)\n{    \n    IFileTester&amp; fileTester = IfStreamFileTester();\n\n    std::string filename(\"/usr/include/malloc.h\");\n\n    try\n    {\n        NoisyTestForFileOpen(fileTester, filename);\n\n        std::cout &lt;&lt; \"Passed the first error handling\" &lt;&lt; std::endl;\n\n        filename = \"/this/file/does/not/exist\";\n        NoisyTestForFileOpen(fileTester, filename);\n    }\n    catch (...)\n    {\n        return 1;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "edited": false, "score": 0, "creation_date": 1461774581, "post_id": 36895589, "comment_id": 61355526, "body": "Your solution is maybe good for the file opening example but it does not handle the general problem of breaking algorithm flow with function error return values handling. Or is there something I miss ?"}, {"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "reply_to_user": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "edited": false, "score": 0, "creation_date": 1461774675, "post_id": 36895589, "comment_id": 61355590, "body": "... well that wasn&#39;t part of the initial problem, anyway - return values are okay in some cases, but if it&#39;s exceptional - throw an exception..."}, {"owner": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "edited": false, "score": 0, "creation_date": 1461774780, "post_id": 36895589, "comment_id": 61355655, "body": "I agree -- throwing an exception is a much better way to deal with this than comparing return values."}, {"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "edited": false, "score": 0, "creation_date": 1461775196, "post_id": 36895589, "comment_id": 61355928, "body": "I have no power on the way external libraries are designed and I have to check their errors the way they are offered to me. If exception are a good way to handle errors is another question."}, {"owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "edited": false, "score": 0, "creation_date": 1461775348, "post_id": 36895589, "comment_id": 61356021, "body": "...and now you have extended the problem again. :) You have to handle errors in the way the library designer has intended that they should be handled.. However when designing your own, you should pick what makes most sense..."}, {"owner": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "reply_to_user": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "edited": false, "score": 0, "creation_date": 1461775726, "post_id": 36895589, "comment_id": 61356245, "body": "@Kleag, as @Nim says, you just have to handle each function call. But you have the choice of how to deal with that on your own program level, and you significantly clean up YOUR code by using exceptions (as in my updated answer). In this case, my updated answer is far less coupled to the behaviour of ifstream::open and you can easily use a different method, simply change the failure test (currently <code>if( ifs.open(..)</code> and keep the <code>throw std::exception</code> bit on failure"}], "tags": [], "owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "is_accepted": false, "score": 4, "last_activity_date": 1461774278, "creation_date": 1461774278, "answer_id": 36895589, "question_id": 36894923, "link": "https://stackoverflow.com/questions/36894923/are-there-drawbacks-to-using-a-lambda-and-macro-for-error-handling/36895589#36895589", "title": "Are there drawbacks to using a lambda and macro for error handling?", "body": "<p>Well, if you are already using lambdas, and you don't want all that testing code everywhere, you could always do something like (NOTE: uncompiled/untested code,) </p>\n\n<pre><code>template &lt;typename FileReader&gt;\nvoid with_file(std::string file, FileReader&amp;&amp; reader) {\n  std::ifstream in(file);\n  if (in) {\n    reader(in);\n  } else {\n    throw std::runtime_error(\"Failed to open file: \" + file); // NOTE: I'm being lazy here\n  }\n}\n\nint main(...) {\n  with_file(\"foo.txt\", [](auto&amp; in) {\n    // do something with the stream\n  });\n}\n</code></pre>\n\n<p>.. but it's a matter of preference, I like exceptions, lambdas and small utility functions, but some may not... </p>\n"}, {"comments": [{"owner": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "edited": false, "score": 1, "creation_date": 1461775497, "post_id": 36895898, "comment_id": 61356099, "body": "I like the <code>ifstream::exceptions</code> function, haven&#39;t seen that before. Whilst I think @Kleag is looking at a general case (not ifstream related), using exceptions in general is definitely the answer."}, {"owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "reply_to_user": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "edited": false, "score": 0, "creation_date": 1461775753, "post_id": 36895898, "comment_id": 61356264, "body": "You&#39;re right @CJBrew. It&#39;s the general case that is interesting me. Thanks anyway for the answer."}, {"owner": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "edited": false, "score": 1, "creation_date": 1461776080, "post_id": 36895898, "comment_id": 61356469, "body": "The general case is you define your own API and how it behaves. Therefore, your own classes and interfaces, and <i>you</i> decide that it throws on errors. Then whatever 3rd party stuff you use, just implement your own API in terms of that."}, {"owner": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "edited": false, "score": 0, "creation_date": 1461776357, "post_id": 36895898, "comment_id": 61356640, "body": "@Jerry-Coffin I was about to suggest  <a href=\"https://www.amazon.co.uk/Exceptional-C-Herb-Sutter/dp/0201615622\" rel=\"nofollow noreferrer\">amazon.co.uk/Exceptional-C-Herb-Sutter/dp/0201615622</a>"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 2393, "user_id": 177762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52da0309ec063ec5e7249a1d8c529784?s=128&d=identicon&r=PG", "display_name": "CJBrew", "link": "https://stackoverflow.com/users/177762/cjbrew"}, "edited": false, "score": 0, "creation_date": 1461776445, "post_id": 36895898, "comment_id": 61356713, "body": "@CJBrew: it is a good book (as is <a href=\"https://rads.stackoverflow.com/amzn/click/com/020170434X\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\"><i>More Exceptional C++</i></a>)."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1461777256, "post_id": 36895898, "comment_id": 61357262, "body": "If you set failbit before opening will it not throw on the open?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1461781990, "post_id": 36895898, "comment_id": 61360347, "body": "@LokiAstari: I&#39;d have to check to be sure--as a general rule, I always pass a file name to the ctor, so I essentially never have a situation where I do anything with the stream before opening."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1461797660, "post_id": 36895898, "comment_id": 61368748, "body": "Me too in general. But here you are throwing on a fail to <code>close()</code> may there not be other situations where it actually worked opening but failed closing. Note: The only situation where I don&#39;t open in the constructor is when adding a locale to the stream for special processing (but that is a very rare special case)."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1461797873, "post_id": 36895898, "comment_id": 61368808, "body": "@LokiAstari: Right--and depending on the situation, failing to close might or might not be an error you care about. In essence, it&#39;s up to you to decide and disable the exception being thrown if it&#39;s not an error. Simple rule of thumb: if you were just reading from the file, failure to close probably isn&#39;t an error; if you were writing, chances that it&#39;s a real problem are much higher. The other side of it is that if you can&#39;t close the file, there may not be a whole lot you <i>can</i> do to fix things."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 4, "last_activity_date": 1461776273, "last_edit_date": 1461776273, "creation_date": 1461775340, "answer_id": 36895898, "question_id": 36894923, "link": "https://stackoverflow.com/questions/36894923/are-there-drawbacks-to-using-a-lambda-and-macro-for-error-handling/36895898#36895898", "title": "Are there drawbacks to using a lambda and macro for error handling?", "body": "<p>This is pretty much a textbook example of when to use exceptions.</p>\n\n<p>You don't, however, have to write your own code to test for a file opening correctly, and throwing an exception (and so on) when it fails. Iostreams already support that fairly directly, so you can write code something like this:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    try {\n        std::ifstream in(\"/usr/include/malloc.h\");\n        in.exceptions(std::ios::failbit);\n        in.close();\n        std::cout &lt;&lt; \"passed first test.\\n\";\n\n        std::ifstream in2(\"/this/file/does/not/exist\");\n        in2.exceptions(std::ios::failbit);\n        in2.close();\n\n        std::cout &lt;&lt; \"Passed second test\\n\";\n    }\n    catch (std::system_error &amp;f) {\n        std::cerr &lt;&lt; \"Failed to open file: \" &lt;&lt; f.what() &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>Of course, if you want to get the try/catch out of <code>main</code>, you can do that as well. I'm not sure you gain much from doing so though.</p>\n\n<p>More generally, however, exceptions are clearly the right tool for this job. For other functions that don't provide a way to get exceptions reported as exceptions, you may have to write a wrapper of your own. Either way, however, if you have a function that has some range of normal return values, and one (or a few) \"special\" values in indicate failure (and similar) that's a pretty decent indication that it's indicating an exceptional condition via the return value--and the right way to deal with exceptional conditions is via exceptions rather than return values.</p>\n\n<p>Rather than try to reiterate the (long) list of why/when/how to use exception handling, I'll refer you (as a starting point) to Herb Sutter's old article on <a href=\"http://www.drdobbs.com/when-and-how-to-use-exceptions/184401836\" rel=\"nofollow\">when and how to use exceptions</a>.</p>\n"}], "owner": {"reputation": 532, "user_id": 1073044, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b75be5f17a93e2dccca6d97287a291c9?s=128&d=identicon&r=PG", "display_name": "Kleag", "link": "https://stackoverflow.com/users/1073044/kleag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 36895031, "answer_count": 4, "score": 2, "last_activity_date": 1475491101, "creation_date": 1461772553, "last_edit_date": 1475491101, "question_id": 36894923, "link": "https://stackoverflow.com/questions/36894923/are-there-drawbacks-to-using-a-lambda-and-macro-for-error-handling", "title": "Are there drawbacks to using a lambda and macro for error handling?", "body": "\n\n<p>Properly testing function return values is fundamental, but it can quickly clutter the code and make it hard to read, like in the simple example below:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nint main(int argc, char **argv) \n{\n  std::string filename(\"/usr/include/malloc.h\");\n  std::ifstream ifs(filename.c_str());\n  if (!ifs.is_open())\n  {\n    std::cerr &lt;&lt; \"Failed to open file \" &lt;&lt; filename &lt;&lt; std::endl;\n    return 1;\n  }\n  ifs.close();\n  std::cout &lt;&lt; \"Passed the first error handling\" &lt;&lt; std::endl;\n\n  filename = \"/this/file/does/not/exist\";\n  ifs.open(filename.c_str());\n  if (!ifs.is_open())\n  {\n    std::cerr &lt;&lt; \"Failed to open file \" &lt;&lt; filename &lt;&lt; std::endl;\n    return 1;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>I have thought of a solution reducing cluttering by using a macro and c++11 lambda functions like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\n#define RETURN_IF(X,Y,Z) if ( X ) { Y ; return Z; }\n\nauto open_file_error = [](const std::string&amp; filename)\n{\n  std::cerr &lt;&lt; \"Failed to open file \" &lt;&lt; filename &lt;&lt; std::endl;\n};\n\n\nint main(int argc, char **argv) \n{\n  std::string filename(\"/usr/include/malloc.h\");\n  std::ifstream ifs(filename.c_str());\n  RETURN_IF (!ifs.is_open(), open_file_error(filename), 1 );\n  ifs.close();\n  std::cout &lt;&lt; \"Passed the first error handling\" &lt;&lt; std::endl;\n\n  filename = \"/this/file/does/not/exist\";\n  ifs.open(filename.c_str());\n  RETURN_IF (!ifs.is_open(), open_file_error(filename), 1 );\n  return 0;\n}\n</code></pre>\n\n<p>As you can see, the main function is less cluttered. Do you think that there are drawbacks to doing it like that or could it be a method to largely use?</p>\n\n<p>Note that I use several macros to handle cases with or without a return value, for testing equality with a value, etc.</p>\n\n<p>I propose the new version below to take into account two things:\n- the answers and comments about the preference on using exceptions instead of return values;\n- put away the emphasis on std::ifstream specific errors which are not the subject of the question.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;exception&gt;\n\nclass OurExceptionForTheExternalLibraryFailure : public std::exception {};\n\n#define CLEANUP_AND_THROW_IF(X,Y,Z) if ( X ) { Y ; throw Z; }\n\n/* Return true in case of succes and false otherwise */\nbool anyExternalFunction(const std::string&amp; aString)\n{\n    std::ifstream ifs(aString.c_str());\n    if (ifs.is_open())\n    {\n      ifs.close();\n      return true;\n    }\n    else\n    {\n      return false;\n    }\n}\n\nauto this_external_function_error_cleanup = [](const std::string&amp; aString) \n{\n  std::cerr &lt;&lt; \"The external function failed \" &lt;&lt; aString &lt;&lt; std::endl;\n  // other stuff\n};\n\nint main(int argc, char **argv) \n{\n  try \n  {\n    std::string aString = \"/usr/include/malloc.h\";\n    bool functionResult = anyExternalFunction(aString);\n    CLEANUP_AND_THROW_IF (!functionResult, this_external_function_error_cleanup(aString), OurExceptionForTheExternalLibraryFailure() );\n    std::cout &lt;&lt; \"Passed the first error handling\" &lt;&lt; std::endl;\n\n    aString = \"/this/file/does/not/exist\";\n    functionResult = anyExternalFunction(aString);\n    CLEANUP_AND_THROW_IF (!functionResult, this_external_function_error_cleanup(aString), OurExceptionForTheExternalLibraryFailure() );\n  } \n  catch (const OurExceptionForTheExternalLibraryFailure&amp; e)\n  {\n    std::cerr &lt;&lt; \"Catched OurExceptionForTheExternalLibraryFailure. There was an error\" &lt;&lt; std::endl;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>What do you think about this new version (which still uses a macro, though...) ?</p>\n"}, {"tags": ["c++", "templates", "c++11", "variadic-templates"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1461772790, "post_id": 36894907, "comment_id": 61354159, "body": "Seems to <a href=\"https://ideone.com/uOEwKD\" rel=\"nofollow noreferrer\">work as indented</a> after fixing the usual newbie mistakes."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1461781589, "post_id": 36894907, "comment_id": 61360069, "body": "@KerrekSB: I feel like a blind person here... what did you change? <code>void main</code> to <code>int main</code> is what I&#39;ve spotted.... (I should be a real programmer and just diff the code)."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1461782607, "post_id": 36894907, "comment_id": 61360738, "body": "I may also have switched to a C++11 compiler :-)"}, {"owner": {"reputation": 6564, "user_id": 2109064, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05bfc90904db2f3abb20860d6e56e562?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2109064/michael"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1461796802, "post_id": 36894907, "comment_id": 61368434, "body": "@KerrekSB: Yes, it seems to be related to the compiler in peculiar manner. I edited it into the question."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1461797623, "post_id": 36894907, "comment_id": 61368737, "body": "Pass <code>-cuda</code> and let&#39;s see what <code>nvcc</code> is feeding to <code>g++</code>."}, {"owner": {"reputation": 6564, "user_id": 2109064, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05bfc90904db2f3abb20860d6e56e562?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2109064/michael"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1461797805, "post_id": 36894907, "comment_id": 61368792, "body": "@T.C.: I was looking for something like that. It&#39;s difficult to phrase and therefore difficult to google... Where do I have to put <code>-cuda</code> exactly?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1461797924, "post_id": 36894907, "comment_id": 61368828, "body": "Should be to <code>nvcc</code>, so <code>nvcc -cuda main.cu ...</code>"}, {"owner": {"reputation": 6564, "user_id": 2109064, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05bfc90904db2f3abb20860d6e56e562?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2109064/michael"}, "edited": false, "score": 0, "creation_date": 1461798688, "post_id": 36894907, "comment_id": 61369016, "body": "Gives a long *.ii file. I take the part corresponding to main.cu, copy it into a *.cpp file, compile it and it works fine... Only when exactly the same code is in a *.cu file, I have a problem. Same flags and everything."}, {"owner": {"reputation": 6564, "user_id": 2109064, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05bfc90904db2f3abb20860d6e56e562?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2109064/michael"}, "edited": false, "score": 0, "creation_date": 1461847664, "post_id": 36894907, "comment_id": 61392289, "body": "Just for my understanding: <code>nvcc</code> will take the *.cu file, translate the CUDA-specific syntax into C++ and pass that code to the compiler given by <code>-ccbin</code>? That would mean that <code>nvcc</code> also has to do other &quot;code-level&quot; stuff like instantiating templates. So I would assume that <code>nvcc</code> can not handle my template in that step? (Workaround: Define a template of <code>make(...)</code> for any possible number of arguments. Not that bad.)"}], "answers": [{"comments": [{"owner": {"reputation": 6564, "user_id": 2109064, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05bfc90904db2f3abb20860d6e56e562?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2109064/michael"}, "edited": false, "score": 0, "creation_date": 1461797329, "post_id": 36902267, "comment_id": 61368648, "body": "Both seem to be equal. (I do not want to downvote it, but that&#39;s really not an answer.)"}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": -1, "last_activity_date": 1461797164, "creation_date": 1461797164, "answer_id": 36902267, "question_id": 36894907, "link": "https://stackoverflow.com/questions/36894907/variadic-template-and-template-template-probably-a-compiler-issue-related-to-cu/36902267#36902267", "title": "Variadic template and template template (probably a compiler issue related to CUDA)", "body": "<p>Maybe it's that <code>nvcc</code> requires <code>--std c++11</code> rather than <code>--std=c++11</code>?</p>\n"}], "owner": {"reputation": 6564, "user_id": 2109064, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/05bfc90904db2f3abb20860d6e56e562?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/2109064/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461797164, "creation_date": 1461772492, "last_edit_date": 1461796771, "question_id": 36894907, "link": "https://stackoverflow.com/questions/36894907/variadic-template-and-template-template-probably-a-compiler-issue-related-to-cu", "title": "Variadic template and template template (probably a compiler issue related to CUDA)", "body": "<p>I try to write the small template function <code>make</code> to facilitate the construction of some functors following the same structure as <code>Functor</code>. Works fine as follows for a functor with one argument:</p>\n\n<pre><code>template &lt;class ARG1&gt;\nstruct Functor{\n    Functor(ARG1 x){ }\n};\n\ntemplate &lt;template &lt;class&gt; class FCT, class ARG&gt;\nFCT&lt;ARG&gt; make(ARG arg){\n    return FCT&lt;ARG&gt;(arg);\n}\n\nvoid main(){\n    int a = 5;\n    make&lt;Functor&gt;(a);\n}\n</code></pre>\n\n<p>Now I try to extend <code>make</code> to use it for functors with any number of arguments, for example the now two argument functor <code>Functor</code>:</p>\n\n<pre><code>template &lt;class ARG1, class ARG2&gt;\nstruct Functor{\n    Functor(ARG1 x, ARG2 y){ }\n};\n\ntemplate &lt;template &lt;class, class...&gt; class FCT, class... ARG&gt;\nFCT&lt;ARG...&gt; make(ARG... arg){\n    return FCT&lt;ARG...&gt;(arg...);\n}\n\nvoid main(){\n    int a = 5;\n    double b = 6;\n    make&lt;Functor&gt;(a, b);\n}\n</code></pre>\n\n<p>That does not work any longer, compiler says: </p>\n\n<blockquote>\n  <p>basic.cpp(199): error: no instance of function template \"make\" matches\n  the argument list\n              argument types are: (int, double)</p>\n</blockquote>\n\n<p>Honestly, I have no idea what's wrong here. I do not see a conceptional difference to the first example. What do I need to do to make it work?</p>\n\n<p>Some further investigation, based on comments:</p>\n\n<p>It works fine when directly compiling the code as <code>main.cpp</code> with g++-4.8.3:</p>\n\n<pre><code>/path/to/g++-4.8.3 -std=c++11 main.cpp\n</code></pre>\n\n<p>It issues the error when compiling the code as <code>main.cu</code> via nvcc using g++-4.8.3:</p>\n\n<pre><code>/path/to/cuda/cuda-6.5/bin/nvcc main.cu -o experiments_cuda -O0 -g -ccbin=/path/to/g++-4.8.3 --compiler-options='-std=c++11' -std=c++11\n</code></pre>\n\n<p>Furthermore, it works fine when compiling the code as <code>main.cpp</code>via nvcc:</p>\n\n<pre><code>/path/to/cuda/cuda-6.5/bin/nvcc main.cpp -o experiments_cuda -O0 -g -ccbin=/path/to/g++-4.8.3 --compiler-options='-std=c++11' -std=c++11\n</code></pre>\n\n<p>The C++ 11 flags seem to be passed correctly - if I remove them, I get way more errors.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1461773551, "creation_date": 1461773551, "answer_id": 36895331, "question_id": 36894839, "link": "https://stackoverflow.com/questions/36894839/writing-a-structure-that-contains-arrays-into-a-binary-file/36895331#36895331", "title": "Writing a structure that contains arrays into a binary file", "body": "<p>The <code>for</code> expressions are correct... and that's all!</p>\n\n<ul>\n<li>you are mixing <code>'\\n'</code> and <code>std::endl</code> to output end of lines: in C++ stick to former</li>\n<li>you read double values from <code>cin</code> without testing that the read was correct: use <code>if (!cin) {...}</code> after reading</li>\n<li>a test (negated) for non-negative should be <code>&lt;= -1</code> or better <code>&lt; 0</code></li>\n<li><code>outputFile.write(reinterpret_cast &lt;char*&gt; (&amp;allDivisions[i].quarterlySales[j]),</code> is correct for the first part (converting a pointer to double to a <code>char *</code> is valid), but the size should be <code>sizeof(double)</code> or <code>sizeof(allDivisions[i].quarterlySales[j])</code> or <code>sizeof(allDivisions[0].quarterlySales[0])</code></li>\n</ul>\n\n<p>But you should remember that storing binary values to a file is not portable across different architectures.</p>\n"}], "owner": {"reputation": 47, "user_id": 5497186, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/cf7de19a7e834eb5139a4bf4e7c89382?s=128&d=identicon&r=PG&f=1", "display_name": "elequang", "link": "https://stackoverflow.com/users/5497186/elequang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461773551, "creation_date": 1461772318, "question_id": 36894839, "link": "https://stackoverflow.com/questions/36894839/writing-a-structure-that-contains-arrays-into-a-binary-file", "title": "Writing a structure that contains arrays into a binary file", "body": "<p>Im prompting the user to enter sales data, then adding that data to the struct array. Is this the way to go about it?</p>\n\n<p>This is my struct:</p>\n\n<pre><code>struct CompanyDivision {\nchar name[NAME_LENGTH];\ndouble quarterlySales[QUARTERS];};\n</code></pre>\n\n<p>This is my main</p>\n\n<pre><code>int main() {\n\nconst int DIVISIONS = 4;\n\n\nCompanyDivision allDivisions[DIVISIONS] = {{ \"North\" }, { \"South\" }, { \"East\" }, { \"West\" }};\n\ncout &lt;&lt; \"Please enter the sales figures for each quarter at each division: \" &lt;&lt; endl;\n\nfor (int quarter = 0; quarter &lt; QUARTERS; quarter++) {\n    cout &lt;&lt; \"\\n**For quarter \" &lt;&lt; quarter + 1 &lt;&lt; endl;\n    for (int division = 0; division &lt; DIVISIONS; division++) {\n        cout &lt;&lt; \"\\t\" &lt;&lt; allDivisions[division].name &lt;&lt; \" &gt;&gt; $\";\n        cin &gt;&gt; allDivisions[division].quarterlySales[quarter];\n        while (allDivisions[division].quarterlySales[quarter] &lt; -1) {\n            cout &lt;&lt; \"Please enter a non-negative sales figure.\" &lt;&lt; endl;\n            cout &lt;&lt; \"\\t\" &lt;&lt; allDivisions[division].name &lt;&lt; \" &gt;&gt; $\";\n            cin &gt;&gt; allDivisions[division].quarterlySales[quarter];\n        }\n    }\n    cout &lt;&lt; endl;\n}\nofstream outputFile(\"QuarterlySales.dat\", ios::binary | ios::out);\nfor (int i = 0; i &lt; QUARTERS; i++) {\n    for (int j = 0; j &lt; DIVISIONS; j++) {\n        outputFile.write(reinterpret_cast &lt;char*&gt; (&amp;allDivisions[i].quarterlySales[j]), sizeof(CompanyDivision)* 4);\n    }\n}\noutputFile.close();\n\nsystem(\"pause\");\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>Is the nested for loop done correctly where each division (North,South,West,East) and there quarters(1,2,3,4) and the syntax for writing out to a binary file correct?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "scanf"], "comments": [{"owner": {"reputation": 1605, "user_id": 2508277, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qfYIb.png?s=128&g=1", "display_name": "Unda", "link": "https://stackoverflow.com/users/2508277/unda"}, "edited": false, "score": 0, "creation_date": 1461772179, "post_id": 36894718, "comment_id": 61353679, "body": "Use <code>std::cin &gt;&gt; n1 &gt;&gt; n2</code>"}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 1, "creation_date": 1461772186, "post_id": 36894718, "comment_id": 61353683, "body": "How about calling <code>scanf()</code> in a loop?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1461772263, "post_id": 36894718, "comment_id": 61353741, "body": "In c++ it&#39;s probably better to use <code>std::cin</code> for reading input. Though for either cases you should use a loop and check the input stream state after reading the input."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1605, "user_id": 2508277, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/qfYIb.png?s=128&g=1", "display_name": "Unda", "link": "https://stackoverflow.com/users/2508277/unda"}, "edited": false, "score": 0, "creation_date": 1461772336, "post_id": 36894718, "comment_id": 61353795, "body": "@Unda That&#39;s still fixed at reading 2 variables, nothing gained."}, {"owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 0, "creation_date": 1461773406, "post_id": 36894718, "comment_id": 61354654, "body": "You&#39;re doing C++ - don&#39;t use <code>scanf</code> !!!"}, {"owner": {"reputation": 465, "user_id": 5833471, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3067e5d6a33098fe9902356cf59ab019?s=128&d=identicon&r=PG", "display_name": "Jutta", "link": "https://stackoverflow.com/users/5833471/jutta"}, "reply_to_user": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 0, "creation_date": 1461773830, "post_id": 36894718, "comment_id": 61354989, "body": "But isn&#39;t it faster to use scanf() than use iostream? @Sean"}, {"owner": {"reputation": 55713, "user_id": 26095, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WLsjF.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/26095/sean"}, "edited": false, "score": 1, "creation_date": 1461774324, "post_id": 36894718, "comment_id": 61355345, "body": "@Jutta - You&#39;re doing console IO, I wouldn&#39;t worry about the performance. Plus, think of the type safety that <code>iostream</code> gives you."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 1, "last_activity_date": 1461773213, "last_edit_date": 1461773213, "creation_date": 1461772461, "answer_id": 36894894, "question_id": 36894718, "link": "https://stackoverflow.com/questions/36894718/get-unknown-number-of-parameter-from-input/36894894#36894894", "title": "Get unknown number of parameter from input", "body": "<p>The simplest thing I can think of in c++:</p>\n\n<pre><code>std::vector&lt;int&gt; allParams;\nint num;\nwhile(std::cin &gt;&gt; num) {\n    allParams.push_back(num);\n}\n</code></pre>\n\n<hr>\n\n<p>Similar solution using <code>scanf()</code>:</p>\n\n<pre><code>std::vector&lt;int&gt; allParams;\nint num;\nwhile(scanf(\"%d\", &amp;num) != EOF) {\n    allParams.push_back(num);\n}\n</code></pre>\n"}], "owner": {"reputation": 465, "user_id": 5833471, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3067e5d6a33098fe9902356cf59ab019?s=128&d=identicon&r=PG", "display_name": "Jutta", "link": "https://stackoverflow.com/users/5833471/jutta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 36894894, "answer_count": 1, "score": 0, "last_activity_date": 1461773213, "creation_date": 1461772012, "last_edit_date": 1461772549, "question_id": 36894718, "link": "https://stackoverflow.com/questions/36894718/get-unknown-number-of-parameter-from-input", "title": "Get unknown number of parameter from input", "body": "<p>When I use scanf(), I need to know how many parameters I will get from the client.\nFor example, <code>scanf(\"%d%d\", &amp;n1, &amp;n2);</code> </p>\n\n<p>What if I don't know the exact number of input parameters? </p>\n\n<p>In the instance above, it's possible that when the client input an invalid number, and I want to interrupt the process without getting the rest of  the parameters.</p>\n\n<p>It's OK if you can recommend me some other functions in C/C++ to deal with this problem.</p>\n"}, {"tags": ["c++", "c", "multithreading", "performance", "gcc"], "comments": [{"owner": {"reputation": 842, "user_id": 3431018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec7e7c6e6ed3cbe22d7f6179fe8870e9?s=128&d=identicon&r=PG", "display_name": "rafaelcpalmeida", "link": "https://stackoverflow.com/users/3431018/rafaelcpalmeida"}, "edited": false, "score": 0, "creation_date": 1461771647, "post_id": 36894504, "comment_id": 61353255, "body": "I believe that you can only send signals between processes if they have any kind of relation (i.e father / child). Only the kernel has the ability to send a signal to any process he desires."}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1461771762, "post_id": 36894504, "comment_id": 61353356, "body": "You&#39;re looking for Inter Process Communication: <a href=\"http://beej.us/guide/bgipc/\" rel=\"nofollow noreferrer\">beej.us/guide/bgipc</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 842, "user_id": 3431018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec7e7c6e6ed3cbe22d7f6179fe8870e9?s=128&d=identicon&r=PG", "display_name": "rafaelcpalmeida", "link": "https://stackoverflow.com/users/3431018/rafaelcpalmeida"}, "edited": false, "score": 1, "creation_date": 1461771764, "post_id": 36894504, "comment_id": 61353357, "body": "@rafaelcpalmeida That&#39;s not true. You can send a signal to any process."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 842, "user_id": 3431018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec7e7c6e6ed3cbe22d7f6179fe8870e9?s=128&d=identicon&r=PG", "display_name": "rafaelcpalmeida", "link": "https://stackoverflow.com/users/3431018/rafaelcpalmeida"}, "edited": false, "score": 1, "creation_date": 1461771780, "post_id": 36894504, "comment_id": 61353379, "body": "@rafaelcpalmeida, of course not. You are able to send signals to any process as long as you have perimissions - i.e. is the same user which runs the process or is root."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461771796, "post_id": 36894504, "comment_id": 61353392, "body": "@Barmar, not to <b>any</b> process."}, {"owner": {"reputation": 842, "user_id": 3431018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec7e7c6e6ed3cbe22d7f6179fe8870e9?s=128&d=identicon&r=PG", "display_name": "rafaelcpalmeida", "link": "https://stackoverflow.com/users/3431018/rafaelcpalmeida"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1461771870, "post_id": 36894504, "comment_id": 61353450, "body": "@SergeyA my process can send a signal to another process or I (user) can send a signal to another process?"}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "reply_to_user": {"reputation": 842, "user_id": 3431018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec7e7c6e6ed3cbe22d7f6179fe8870e9?s=128&d=identicon&r=PG", "display_name": "rafaelcpalmeida", "link": "https://stackoverflow.com/users/3431018/rafaelcpalmeida"}, "edited": false, "score": 0, "creation_date": 1461771907, "post_id": 36894504, "comment_id": 61353476, "body": "@rafaelcpalmeida Yes, definitely! Look at the link I posted in my comment above ;)"}, {"owner": {"reputation": 842, "user_id": 3431018, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ec7e7c6e6ed3cbe22d7f6179fe8870e9?s=128&d=identicon&r=PG", "display_name": "rafaelcpalmeida", "link": "https://stackoverflow.com/users/3431018/rafaelcpalmeida"}, "edited": false, "score": 0, "creation_date": 1461772261, "post_id": 36894504, "comment_id": 61353738, "body": "Thanks guys, I thought my process could only send signals to his child processes"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1461772358, "post_id": 36894504, "comment_id": 61353808, "body": "The first two paragraphs describe an extremely unlikely OS design.  &#39;Programs&#39; do not run on cores, threads do."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "reply_to_user": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1461772415, "post_id": 36894504, "comment_id": 61353852, "body": "@terencehill, thanks for commenting and the link you provided. I am just wondering how program2 will react once it get signal/interrupt from program1. Considering both case when Program2 is not under our control and when it is in our control( we can write signal handler code)."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461778856, "post_id": 36894504, "comment_id": 61358342, "body": "@bholanath Nobody can answer your question because as far as we know program2 is some kind of black box. It&#39;s up to YOU to find out about program2 and what mechanisms it <i>provides</i> for IPC. Maybe it listens on sockets, maybe it has support for SysV IPC of some form, or maybe it has custom signal handlers for, say, SIGUSR1. Since you say you can&#39;t change program2, we can only propose possible mechanisms but we&#39;re wasting our time if program2 doesn&#39;t support them."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461780230, "post_id": 36894504, "comment_id": 61359239, "body": "@kfsone, thank you for your comment. I am trying to control a program execution which is not under my control. May be I need to rephrase the question in a way &quot; how to control execution of a independent program which is running in other core&quot; , may be sending signal is not a solution, may be I need to use some other approach to achieve that."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461782282, "post_id": 36894504, "comment_id": 61360533, "body": "There&#39;s no general purpose way to do that. The program has to provide some way for it to be controlled. If it&#39;s an interactive application that reads input from the terminal, you can use an <code>Expect</code> script to control it."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461783445, "post_id": 36894504, "comment_id": 61361269, "body": "@Barmar, the other process is running continuously, doing some compute intensive job, so it is not an interactive process which is waiting for some input from terminal. As per Stian&#39;s comment I am looking into ptrace option to control (start/stop) execution of other process."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461783740, "post_id": 36894504, "comment_id": 61361458, "body": "I&#39;ve updated my answer. If you&#39;re looking into <code>ptrace</code>, then you can try using a debugger as the interface to it."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461785032, "post_id": 36894504, "comment_id": 61362285, "body": "Are you saying you want to control scheduling of program2? To block it from executing for some period of time before allowing it to resume execution?"}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1461786701, "post_id": 36894504, "comment_id": 61363316, "body": "@kfsone, you are right. Exactly I am trying to block it for some period of time before allowing it to resume its execution and also allow for very small amount of time so that it can use very little cpu."}], "answers": [{"comments": [{"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1461772267, "post_id": 36894707, "comment_id": 61353746, "body": "I need to control execution of other program. How other process will react when it receives interrupt due to kill command ?"}, {"owner": {"reputation": 3134, "user_id": 5475209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRBxV.jpg?s=128&g=1", "display_name": "terence hill", "link": "https://stackoverflow.com/users/5475209/terence-hill"}, "edited": false, "score": 0, "creation_date": 1461772330, "post_id": 36894707, "comment_id": 61353790, "body": "... and one of the <code>exec</code> family to execute a process (<a href=\"http://www.gnu.org/software/libc/manual/html_node/Executing-a-File.html#Executing-a-File\" rel=\"nofollow noreferrer\">link</a>)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1461772429, "post_id": 36894707, "comment_id": 61353867, "body": "@bholanath Use <code>sigaction</code> in the receiver to establish a signal handler function."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1461784494, "post_id": 36894707, "comment_id": 61361923, "body": "@Barmar, I know the pid of running process(cpu intensive process), and in which core it is running, however I don&#39;t have access to what you mentioned as - You&#39;ll need a copy of the program with the symbol table intact for this. Is there any way to stop this process for a few microsec and again allow it to run for few microsec?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1461784698, "post_id": 36894707, "comment_id": 61362069, "body": "You just want to stop and start it, not actually make it do specific things?"}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1461784963, "post_id": 36894707, "comment_id": 61362238, "body": "@Barmar, I just want to start and stop the other process whenever I want. Actually I just want to restrict another compute intensive process which is running in other CPU core, whose pid I know, I want to interrupt or preempt or schedule out frequently from CPU run queue so that it can&#39;t use more cpu. One way I am trying to do this by using cpulimit and nice."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1461785138, "post_id": 36894707, "comment_id": 61362354, "body": "@Barmar, I have done this in a single cpu when both program1 and program2 are running in same cpu core and program1 allow program2 to run for very small amount of time, before it is preempted by program1."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1461785357, "post_id": 36894707, "comment_id": 61362495, "body": "@Barmar, I will just try your code using kill -STOP &lt;pid&gt; and kill -CONT &lt;pid&gt; and let you know whether it is working or not."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1461784743, "last_edit_date": 1461784743, "creation_date": 1461771953, "answer_id": 36894707, "question_id": 36894504, "link": "https://stackoverflow.com/questions/36894504/sending-interrupt-signal-to-other-independent-process-in-c-c-in-linux/36894707#36894707", "title": "Sending interrupt signal to other independent process in C/C++ in linux", "body": "<p>You could attach a debugger like <code>gdb</code> to the running process. Then you can examine and modify variables, stop the process, force it to call specific functions, etc.</p>\n\n<p>Debuggers make use of the <code>ptrace</code> mechanism that was mentioned in comments. This way, you don't need to learn all the details of converting information in the program's symbol table to the actual controlling code, this has all been done by the debugger's author.</p>\n\n<p>You'll need a copy of the program with the symbol table intact for this.</p>\n\n<p>If you just want to suspend the program and resume it, you can do it from the shell:</p>\n\n<pre><code>kill -STOP &lt;pid&gt;\nkill -CONT &lt;pid&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1461780002, "post_id": 36896947, "comment_id": 61359086, "body": "I just want to control the execution of program2 without making any changes in program2. May be sometime program2 will run, sometime it will pause. I was reading about cpulimit , but no idea if it will help to achieve that. Although cpulimit is not related to signal/interrupt."}, {"owner": {"reputation": 2048, "user_id": 6192747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-agy-meieasc/AAAAAAAAAAI/AAAAAAAAAC8/ipYF1p3tygQ/photo.jpg?sz=128", "display_name": "Stian Skjelstad", "link": "https://stackoverflow.com/users/6192747/stian-skjelstad"}, "reply_to_user": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1461780339, "post_id": 36896947, "comment_id": 61359291, "body": "you can also use the ptrace API, this allows you to intercept signal receive, making SIGSTOP/SIGCONT invisible, pause at any system call etc."}, {"owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "edited": false, "score": 0, "creation_date": 1461781035, "post_id": 36896947, "comment_id": 61359722, "body": "does ptrace API needs to include inside Program1 ? If it needs to include Program2 , I can&#39;t use that approach. However, I know the pid of Program2. Can I use pid of Program2 inside Program1 using ptrace you are talking about? If yes, a link to related document or a sample code will be a great help."}], "tags": [], "owner": {"reputation": 2048, "user_id": 6192747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-agy-meieasc/AAAAAAAAAAI/AAAAAAAAAC8/ipYF1p3tygQ/photo.jpg?sz=128", "display_name": "Stian Skjelstad", "link": "https://stackoverflow.com/users/6192747/stian-skjelstad"}, "is_accepted": false, "score": 0, "last_activity_date": 1461778383, "creation_date": 1461778383, "answer_id": 36896947, "question_id": 36894504, "link": "https://stackoverflow.com/questions/36894504/sending-interrupt-signal-to-other-independent-process-in-c-c-in-linux/36896947#36896947", "title": "Sending interrupt signal to other independent process in C/C++ in linux", "body": "<p>If you want to pause program2, you can use kill/signal SIGCONT SIGSTOP SIGTSTP.</p>\n\n<p>Since you can not change anything in program2, how would you expect program2 to be able to receive and IPC/remote signals?</p>\n"}], "owner": {"reputation": 1529, "user_id": 2191202, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/6b276e74b1bc731105d163bbb79906c0?s=128&d=identicon&r=PG", "display_name": "bholanath", "link": "https://stackoverflow.com/users/2191202/bholanath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1461784743, "creation_date": 1461771467, "last_edit_date": 1461780880, "question_id": 36894504, "link": "https://stackoverflow.com/questions/36894504/sending-interrupt-signal-to-other-independent-process-in-c-c-in-linux", "title": "Sending interrupt signal to other independent process in C/C++ in linux", "body": "<p>I have two programs in C/C++. Program1 has multiple thread (under my control, I can add any code inside this program) and Program2 has one thread(not under my control, so can't add any code). Both programs are running on different CPU core. </p>\n\n<p>Threads in Program1 are running in round-robin fashion.</p>\n\n<p>Is there any way I can control execution of other program2 from program1 by sending any signal or interrupt from thread of Program1? </p>\n\n<p>Is it possible to control execution in the following way ?</p>\n\n<pre><code>Step 1 : Thread (i) sends interrupt/notification to start execution of Program2\nStep 2 : Program2 start execution\nStep 3 : Thread (i+1) sends notification/interrupt to stop execution of Program2 or preempted/scheduled out this process from CPU core.\n\n\nCore -1 : ---T1----Signal sent to V to start --T2---Signal sent to V to stop--\n\n\nCore -2 : ---------------- V start here -----------------V stop here------\n</code></pre>\n\n<p>When both Program1 and Program2 are running in same CPU core, I am able to control execution of program2.</p>\n\n<pre><code>Core 1 : ----T1----V ----- T2 ----- V -----\n</code></pre>\n\n<p>Now, I want to implement this in a scenario when two independent processes are running in separate CPU core.   </p>\n\n<p>I am using gcc/g++ and linux.</p>\n\n<p>Any link to related document/concept or suggestions to implement above idea will be a great help. Thanks in advance.</p>\n\n<p><strong>Update 1:</strong> We <strong>can't write signal handler code</strong> inside Program2. As it is independent program. We can write anything inside Program1.</p>\n\n<p><strong>Update 2:</strong> From several comments received so far, it looks like we need to write a signal handler in Program2 to control execution of program2 by using sending signal/interrupt. It is not necessary to send signal/interrupt to control execution (start/pause) of Program2, we can think other way to restrict to run program2, may be by <strong>using cpulimit</strong> or some other way which I don't know.</p>\n\n<pre><code>Core -1 : ---T1----Something needs to be done here to start V --T2---Something needs to be done here to stop V--\n\n\nCore -2 : ---------------- V start here --------------------------------V stop here------\n</code></pre>\n"}, {"tags": ["c++", "winapi", "screenshot"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 1, "creation_date": 1461772543, "post_id": 36894465, "comment_id": 61353972, "body": "You would need to get the display DC (GetDC(NULL)) then BitBlt the window rectangle"}, {"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "reply_to_user": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1461782203, "post_id": 36894465, "comment_id": 61360477, "body": "@AlexK. Technically, the popup menu can extend outside the window rectangle..."}, {"owner": {"reputation": 9, "user_id": 5119210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0505ad1c7628116adf4dac7ab18b6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/5119210/anton"}, "edited": false, "score": 0, "creation_date": 1462203994, "post_id": 36894465, "comment_id": 61527338, "body": "Hi Alex, That works quite well, thank you."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1461836650, "post_id": 36909140, "comment_id": 61384281, "body": "How does this answer address the issue presented in the question?"}], "tags": [], "owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "is_accepted": false, "score": 0, "last_activity_date": 1461831817, "creation_date": 1461831817, "answer_id": 36909140, "question_id": 36894465, "link": "https://stackoverflow.com/questions/36894465/how-to-get-device-context-for-for-window-sub-menus-and-context-menus/36909140#36909140", "title": "How to get device context for for window, sub menus and context menus?", "body": "<p>The display abstraction presented by GDI is not aware of any of the magic performed by desktop composition - a window DC represents the area of a window on the display and if the window is not shown, or obscured by other windows, that area is clipped out and does not exist - you cannot blit to it using the window DC, and when reading it you will probably get blackness.</p>\n\n<p>As such, to capture an area of the screen that including the content from multiple windows - you would need to use a screen, rather than window, DC.</p>\n"}], "owner": {"reputation": 9, "user_id": 5119210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0505ad1c7628116adf4dac7ab18b6a1?s=128&d=identicon&r=PG&f=1", "display_name": "Anton", "link": "https://stackoverflow.com/users/5119210/anton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 475, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1461831817, "creation_date": 1461771375, "last_edit_date": 1461772093, "question_id": 36894465, "link": "https://stackoverflow.com/questions/36894465/how-to-get-device-context-for-for-window-sub-menus-and-context-menus", "title": "How to get device context for for window, sub menus and context menus?", "body": "<p>I'm screen capturing application windows from their window handle (hwnd) and am getting their device context using <code>GetWindowDC</code> which I can use to capture the whole window, top level menu and scroll bars. </p>\n\n<pre><code>HDC hdcWindow = GetWindowDC(hwnd);\nHDC hdcMemDC = CreateCompatibleDC(hdcWindow); // or hdcScreen\n</code></pre>\n\n<p>When I open a sub menu e.g. the File menu in the top left corner of Notepad, that menu is not captured. It doesn't seem to be included in the device context. Is there a way to get the device context for everything withing the application window?  </p>\n"}, {"tags": ["c++", "aerospike"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 2299301, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/6fedd49c815565fe064c1294f9f52201?s=128&d=identicon&r=PG", "display_name": "VNS", "link": "https://stackoverflow.com/users/2299301/vns"}, "edited": false, "score": 1, "creation_date": 1461918021, "post_id": 36898282, "comment_id": 61425872, "body": "yes, i made it as static function to call in the foreach loop. Thanks for response."}], "tags": [], "owner": {"reputation": 3916, "user_id": 6171361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6HzJh.jpg?s=128&g=1", "display_name": "sel-fish", "link": "https://stackoverflow.com/users/6171361/sel-fish"}, "is_accepted": false, "score": 1, "last_activity_date": 1461782504, "creation_date": 1461782504, "answer_id": 36898282, "question_id": 36894340, "link": "https://stackoverflow.com/questions/36894340/callback-function-with-aerospike-query-foreach-giving-build-error/36898282#36898282", "title": "Callback function with aerospike_query_foreach giving build error", "body": "<p>You shouldn't use a method as 'aerospike_query_foreach_callback'.<br>\n<strong>Use a function which doesn't belong to any namespace.</strong><br>\nFor example, change your function to :</p>\n\n<pre><code>bool ProcessResults(const as_val* p_val, void* udata)\n{\n   if (! p_val)\n   {\n      fprintf(stderr, \"query callback returned null - query is complete.\");\n      return true;\n   }\n}\n</code></pre>\n\n<p>Call it as:</p>\n\n<pre><code>aerospike_query_foreach(&amp;m_asConnection, &amp;error, NULL, &amp;query, ProcessResults, NULL)\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 2299301, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/6fedd49c815565fe064c1294f9f52201?s=128&d=identicon&r=PG", "display_name": "VNS", "link": "https://stackoverflow.com/users/2299301/vns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461782504, "creation_date": 1461771045, "question_id": 36894340, "link": "https://stackoverflow.com/questions/36894340/callback-function-with-aerospike-query-foreach-giving-build-error", "title": "Callback function with aerospike_query_foreach giving build error", "body": "<p>i am trying to create a c++ client for aerospike server. I am able to insert the data using lists. Later i want to retrieve data using aerospike_query_foreach call. In this call we need to send one callback function. I tried to send a callback function called processresult defined in same class with bool return type. But, it give error like type mismatch with library function. Code i wrote is </p>\n\n<pre><code>as_query query;\nas_error error;\nas_query_init(&amp;query, pConfigInfo-&gt;inputNsName.c_str(), (*itr).c_str());\nas_query_where_inita(&amp;query, 1);\nas_query_where(&amp;query, \"rawData\", as_integer_range(startinterval,stopinterval));\n//Execute the query for database specified.\nif (aerospike_query_foreach(&amp;m_asConnection, &amp;error, NULL, &amp;query, CDataBaseManager::ProcessResults, NULL) != AEROSPIKE_OK)\n{\n    fprintf(stderr, \"aerospike_query_foreach() returned %d - %s\", err.code, err.message);\n    as_query_destroy(&amp;query);\n}\n</code></pre>\n\n<p>My call back function is </p>\n\n<pre><code>bool CDataBaseManager::ProcessResults(const as_val* p_val, void* udata)\n{\n   if (! p_val)\n   {\n      fprintf(stderr, \"query callback returned null - query is complete.\");\n      return true;\n   }\n}\n</code></pre>\n\n<p>Compile Error is</p>\n\n<pre><code>database_manager.cpp:126:112: error: cannot convert \u00e2CDataBaseManager::ProcessResults\u00e2 from type \u00e2bool (CDataBaseManager::)(const as_val*, void*) {aka bool (CDataBaseManager::)(const as_val_s*, void*)}\u00e2 to type \u00e2aerospike_query_foreach_callback {aka bool (*)(const as_val_s*, void*)}\u00e2\n   if (aerospike_query_foreach(&amp;m_asConnection, &amp;error, NULL, &amp;query, CDataBaseManager::ProcessResults, NULL) != AEROSPIKE_OK)\n                                                                                                                ^\nmake: *** [database_manager.o] Error 1\n</code></pre>\n\n<p>Please guide me, if i am doing anything wrong in this call?</p>\n"}]