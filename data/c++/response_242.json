[{"tags": ["c++", "class", "c++11", "insert", "stdmap"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2956272"}, "edited": false, "score": 2, "creation_date": 1567036768, "post_id": 57701329, "comment_id": 101846426, "body": "<code>Please do go over my code</code> Please minimize your code."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1567036876, "post_id": 57701329, "comment_id": 101846436, "body": "<code>ReportCard getReportCard()</code> and <code>std::map&lt;std::string, double&gt; getReportCardInstance()</code> return a copy where you most likely want a reference or perhaps a different interface so you don&#39;t expose class internals."}], "answers": [{"tags": [], "owner": {"reputation": 1759, "user_id": 6661174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OBv75.jpg?s=128&g=1", "display_name": "rmawatson", "link": "https://stackoverflow.com/users/6661174/rmawatson"}, "is_accepted": false, "score": 2, "last_activity_date": 1567037322, "creation_date": 1567037322, "answer_id": 57701404, "question_id": 57701329, "link": "https://stackoverflow.com/questions/57701329/how-to-insert-to-stdmap-in-c11/57701404#57701404", "title": "How to insert to std::map in C++11?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nclass ReportCard\n{\n   //private:  this is the default anyway for a class\n   public: //made to be able to print the internals below.\n        std::map&lt;std::string, double&gt; m_report_card;\n\n   public:\n\n\n        /* this returns an instance of the std::map. The map is copied and \n        returned, so any modifications will not affect m_report_card\n        std::map&lt;std::string, double&gt; getReportCardInstance()\n        {\n            return m_report_card;\n        }\n\n        if you want to do this, return std::map&lt;std::string, double&gt;&amp;.\n        std::map&lt;std::string, double&gt;&amp; getReportCardInstance()\n        {\n            return m_report_card;\n        }\n        */\n\n        // better solution is to have a method to add the report\n\n        void add_report(const std::string&amp; first,double second)\n        {\n            m_report_card[first] = second;\n        }  \n\n};\n\n\nint main() {\n    ReportCard rc;\n    rc.add_report(\"Percy\",1.0);\n    rc.add_report(\"Pig\",2.0);\n\n    for(auto internal_report_card : rc.m_report_card)\n    {\n        std::cout &lt;&lt; internal_report_card.first &lt;&lt; \", \" \n                  &lt;&lt; internal_report_card.second &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/esytXH\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 5631336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb301b56c589e5705248e02c35742165?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/5631336/james"}, "edited": false, "score": 0, "creation_date": 1567073726, "post_id": 57706100, "comment_id": 101857983, "body": "Thank you for the detailed explanation. :)"}, {"owner": {"reputation": 121, "user_id": 5631336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb301b56c589e5705248e02c35742165?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/5631336/james"}, "edited": false, "score": 0, "creation_date": 1567075819, "post_id": 57706100, "comment_id": 101859148, "body": "How do we know which functions to declare as const? getName() returns something yet it is const however getReportCard also returns something but it isn&#39;t const. Also why do we write const before the function declaration sometimes (const std::string&amp; getName() const { return m_name; } here const comes first) and after other times (int getRollNo() const { return m_roll_no; } here const comes later)?"}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 121, "user_id": 5631336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb301b56c589e5705248e02c35742165?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/5631336/james"}, "edited": false, "score": 0, "creation_date": 1567076341, "post_id": 57706100, "comment_id": 101859454, "body": "@james a const function declaration is like <code>return_type funcName() const {...}</code>. See the <code>const</code> which makes the function <code>const</code> meaning it does not change the members of the class inside the definition of the function. Secondly, <code>const std::string&amp; getName() const { return m_name; } </code> here the function is <code>const</code> and we return the <code>const</code> qualified reference to the member <code>m_name</code>, meaning the member is niether is modified inside the function nor can be modified outside, rather the caller can only read it."}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 121, "user_id": 5631336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb301b56c589e5705248e02c35742165?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/5631336/james"}, "edited": false, "score": 0, "creation_date": 1567076403, "post_id": 57706100, "comment_id": 101859489, "body": "@james Read more about the const functions: <a href=\"https://stackoverflow.com/questions/3141087/what-is-meant-with-const-at-end-of-function-declaration\">What is meant with \u201cconst\u201d at end of function declaration?</a>"}], "tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 2, "last_activity_date": 1567067292, "creation_date": 1567067292, "answer_id": 57706100, "question_id": 57701329, "link": "https://stackoverflow.com/questions/57701329/how-to-insert-to-stdmap-in-c11/57706100#57706100", "title": "How to insert to std::map in C++11?", "body": "<p>The following functions</p>\n\n<pre><code>std::map&lt;std::string, double&gt; getReportCardInstance() { ... }\n//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nReportCard getReportCard() { ... }\n//^^^^^^^^\n</code></pre>\n\n<p>returns the copy of <code>std::map&lt;std::string, double&gt;</code> and <code>ReportCard</code> class respectively. Therefore, whatever you insert here</p>\n\n<pre><code>student.getReportCard().getReportCardInstance().insert(std::make_pair&lt;std::string, double&gt;(\"Math\", generateMark));\n</code></pre>\n\n<p>does on the copies of the above, hence the original member in <code>ReportCard</code>(i.e. <code>m_report_card</code>) will never get be updated. After the call of above line, the copies will be destroyed and expecting it to work make no sense. </p>\n\n<p>Secondly, shown code is wrong, because in c++ you should have used <code>this</code> not <code>self</code></p>\n\n<pre><code>ReportCard getReportCard()\n{\n    return self.m_reportCard;\n         //^^^^ --&gt; should be `return this-&gt;m_reportCard;`\n         // or simply         `return m_reportCard;`\n}\n</code></pre>\n\n<p>Correcting the above, and returning the member by reference will make the code work. \n<strong>(<a href=\"https://wandbox.org/permlink/ZLZ9AnSEWeHpyuaf\" rel=\"nofollow noreferrer\">See live online</a>)</strong></p>\n\n<pre><code>std::map&lt;std::string, double&gt;&amp; getReportCardInstance()\n// ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n{\n    return m_report_card;\n}\n\nReportCard&amp; getReportCard()\n//^^^^^^^^\n{\n    return m_reportCard;\n}\n</code></pre>\n\n<hr>\n\n<p>That being said, your <code>ReportCard</code> and <code>Student</code> classes will expose the members, if you do the above. Which is not a good design. If those are meant only for the internal uses of <code>Driver</code> class, you could keep them as <code>private</code> properties of <code>Driver</code> class.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\n\nclass Driver /* final */ // -&gt; optional\n{\nprivate: // Student is private for Driver class\n    class Student\n    {\n        // type alias is enough for the map\n        using ReportCard  = std::map&lt;std::string, double&gt;;\n    private:\n        int m_roll_no;\n        std::string m_name;\n        ReportCard m_reportCard;\n\n    public:\n        Student(int inRollNo, const std::string&amp; inName)\n            : m_roll_no{ inRollNo }, m_name{ inName }\n        {}\n        // make the member functions const if they are not modifing the members\n        const std::string&amp; getName() const { return m_name; }\n        int getRollNo() const { return m_roll_no; }\n        ReportCard&amp; getReportCard() { return m_reportCard; }\n        std::size_t getReportCardSize() const { return m_reportCard.size(); }\n    };\n\nprivate:\n    std::vector&lt;Student&gt; student_list;\n    std::vector&lt;Student&gt; temp;\n\npublic:\n    void studentTestPopulate()\n    {\n        // construct the `Student` in-place using `std::vector::emplace_back`\n        student_list.emplace_back(1, \"Tim\"); \n        student_list.emplace_back(2, \"Matt\");\n        student_list.emplace_back(100, \"Luke\");\n        student_list.emplace_back(68, \"Lissy\");\n        student_list.emplace_back(20, \"Tony\");\n        student_list.emplace_back(33, \"Joseph\");\n        student_list.emplace_back(14, \"Sid\");\n        student_list.emplace_back(15, \"Roby\");\n        student_list.emplace_back(44, \"Rohan\");\n        student_list.emplace_back(11, \"Kevin\");\n        student_list.emplace_back(19, \"George\");\n    }\n\n    void reportCardPopulate()\n    {\n        for (auto&amp; student : student_list)\n        {\n            std::cout &lt;&lt; student.getName() &lt;&lt; \"\\n\";\n\n            student.getReportCard().emplace(student.getName(), 12.0);\n            //                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n            // use `std::map::emplace` for constructing `ReportCard` in-place\n            for (auto&amp; mark : student.getReportCard())\n            {\n                std::cout &lt;&lt; mark.first &lt;&lt; \" \" &lt;&lt; mark.second &lt;&lt; \"\\n\";\n            }\n        }\n    }\n    // ... other members\n};\n\nint main()\n{\n    Driver driver;\n    driver.studentTestPopulate();\n    driver.reportCardPopulate();\n}\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 5631336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb301b56c589e5705248e02c35742165?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/5631336/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 57706100, "answer_count": 2, "score": 2, "last_activity_date": 1567067631, "creation_date": 1567036506, "last_edit_date": 1567067631, "question_id": 57701329, "link": "https://stackoverflow.com/questions/57701329/how-to-insert-to-stdmap-in-c11", "title": "How to insert to std::map in C++11?", "body": "<p>I am trying to insert a set of pair values into a <code>std::map</code> in <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a>. However, the values don't seem to insert into the <code>std::map</code>. Please do go over my code about the same. I appreciate any and all help.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;algorithm&gt;\n#include&lt;vector&gt;\n#include&lt;map&gt;\n#include&lt;cstdlib&gt;\n#include&lt;utility&gt;\n#include&lt;ctime&gt;\n\n#include \"print.h\"\n\nclass ReportCard\n{\nprivate:\n    std::map&lt;std::string, double&gt; m_report_card;\n\npublic:\n    std::map&lt;std::string, double&gt; getReportCardInstance() {  return m_report_card;  }\n};\n\nclass Student\n{\n\nprivate:\n    int m_roll_no;\n    std::string m_name;\n    ReportCard m_reportCard;\n\npublic:\n    Student(int inRollNo, const std::string&amp; inName) :\n        m_roll_no(inRollNo), m_name(inName)\n    {}\n\n    std::string getName()   {   return m_name;  } \n    int getRollNo()     {   return m_roll_no;   }\n    ReportCard getReportCard()  {   return self.m_reportCard;   }\n    int getReportCardSize() {   return m_reportCard.getReportCardInstance().size(); }\n};\n\nclass Driver\n{\nprivate:\n    std::vector&lt;Student&gt; student_list;\n    std::vector&lt;Student&gt; temp;\n\npublic:\n    void studentTestPopulate()\n    {\n        student_list.push_back(Student(1, \"Tim\"));\n        student_list.push_back(Student(2, \"Matt\"));\n        student_list.push_back(Student(100, \"Luke\"));\n        student_list.push_back(Student(68, \"Lissy\"));\n        student_list.push_back(Student(20, \"Tony\"));\n        student_list.push_back(Student(33, \"Joseph\"));\n        student_list.push_back(Student(14, \"Sid\"));\n        student_list.push_back(Student(15, \"Roby\"));\n        student_list.push_back(Student(44, \"Rohan\"));\n        student_list.push_back(Student(11, \"Kevin\"));\n        student_list.push_back(Student(19, \"George\"));\n    }\n    void reportCardPopulate()\n    {\n        for (auto&amp; student : student_list)\n        {\n            std::cout &lt;&lt; student.getName() &lt;&lt; std::endl;\n            student.getReportCard().getReportCardInstance().insert(std::make_pair&lt;std::string, double&gt;(\"Math\", generateMark));\n            //This is the function that does not work. No marks are printed!!\n            for (auto&amp; mark : student.getReportCard().getReportCardInstance())\n            {\n                std::cout &lt;&lt; mark.first &lt;&lt; \" \" &lt;&lt; mark.second;\n            }\n            //student.getReportCard().getReportCardInstance().insert(std::make_pair(\"Science\", generateMark));\n            //student.getReportCard().getReportCardInstance().insert(std::make_pair(\"Geography\", generateMark));\n            //student.getReportCard().getReportCardInstance().insert(std::make_pair(\"French\", generateMark));\n            //student.getReportCard().getReportCardInstance().insert(std::make_pair(\"History\", generateMark));\n        }\n    }\n    void showAllStudentDetails()\n    {\n        for (auto&amp; student : student_list)\n        {\n            std::cout &lt;&lt; student.getName() &lt;&lt; std::endl;\n            std::cout &lt;&lt; student.getRollNo() &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"REPORT CARD : \" &lt;&lt; student.getReportCardSize() &lt;&lt; std::endl &lt;&lt; std::endl;\n            for (auto&amp; mark : student.getReportCard().getReportCardInstance())\n            {\n                std::cout &lt;&lt; mark.first &lt;&lt; std::endl;\n                std::cout &lt;&lt; mark.second &lt;&lt; std::endl;\n            }\n        }\n    }\n};\n\nint main()\n{\n    srand(time(NULL));\n    Driver driver;\n    driver.studentTestPopulate();\n    driver.reportCardPopulate();\n    //driver.showAllStudentDetails();\n}\n</code></pre>\n\n<p>The <code>reportCardPopulate()</code> function is supposed to insert pairs of values into a report_card map. However, the insert function doesn't seem to work.</p>\n\n<p>When we try to print the values within the <code>reportCardPopulate()</code> function, it doesn't print anything. When I try to print the <em>size of the map</em>, it prints <code>0</code>. When I printed the size using sizeof() it prints the same size before and after the insertion.</p>\n"}, {"tags": ["c++", "xcode", "char"], "comments": [{"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 1, "creation_date": 1567034055, "post_id": 57701056, "comment_id": 101845935, "body": "The Ascii character representation of the integer 95 is <code>_</code>. If you want to print it as an integer, you should cast it to an integer value when printing."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1567034231, "post_id": 57701056, "comment_id": 101845968, "body": "&quot;If I assign the value to a single digit, it outputs just fine&quot; - I think you&#39;re ommitting something here. There&#39;s a big difference between <code>5</code> and <code>&#39;5&#39;</code>."}, {"owner": {"reputation": 125, "user_id": 11600922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc543f4b1ec8229e35576fa6f4851e40?s=128&d=identicon&r=PG", "display_name": "MagicGAT", "link": "https://stackoverflow.com/users/11600922/magicgat"}, "edited": false, "score": 0, "creation_date": 1567034425, "post_id": 57701056, "comment_id": 101846011, "body": "alter igel Yes, that is correct. Thank you, I made the edit"}], "answers": [{"tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 4, "last_activity_date": 1567034167, "creation_date": 1567034167, "answer_id": 57701094, "question_id": 57701056, "link": "https://stackoverflow.com/questions/57701056/assigning-a-2-digit-integer-to-a-char-variable/57701094#57701094", "title": "Assigning a 2 digit integer to a char variable", "body": "<p>When you write a <code>char</code> to a stream, it's assumed that you wish to write an actual character instead of its integer value.  To output an integer, cast it instead:</p>\n\n<pre><code>cout &lt;&lt; \"I will work hard to get a grade of \"\n     &lt;&lt; static_cast&lt;int&gt;(desired_score)\n     &lt;&lt; \" in this course!\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 457, "user_id": 9584001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IxBn4.png?s=128&g=1", "display_name": "Rotartsi", "link": "https://stackoverflow.com/users/9584001/rotartsi"}, "edited": false, "score": 1, "creation_date": 1567034691, "post_id": 57701112, "comment_id": 101846064, "body": "To clarify a bit: a char is either a string charater (ei. &#39;a&#39;, or &#39;%&#39;) or a 8-bit number. When you say <code>desired_score = 95</code>, then <code>95</code> is interpreted as a charater. However, when you say <code>desired_score=5</code>, then <code>5</code> is interpreted as a number."}, {"owner": {"reputation": 125, "user_id": 11600922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc543f4b1ec8229e35576fa6f4851e40?s=128&d=identicon&r=PG", "display_name": "MagicGAT", "link": "https://stackoverflow.com/users/11600922/magicgat"}, "edited": false, "score": 0, "creation_date": 1567035090, "post_id": 57701112, "comment_id": 101846131, "body": "I appreciate this extra info on why the single digit worked while the double digit did not"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 457, "user_id": 9584001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IxBn4.png?s=128&g=1", "display_name": "Rotartsi", "link": "https://stackoverflow.com/users/9584001/rotartsi"}, "edited": false, "score": 2, "creation_date": 1567035544, "post_id": 57701112, "comment_id": 101846210, "body": "@Rotartsi \u2014 when you assign a numeric value to a <code>char</code> variable you\u2019re just assigning a value. <code>desired_score=95;</code> stores the value <code>95</code>. <code>desired_value=5;</code> stores the value <code>5</code>. <code>5</code> is not <code>\u20195\u2019</code>."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 457, "user_id": 9584001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IxBn4.png?s=128&g=1", "display_name": "Rotartsi", "link": "https://stackoverflow.com/users/9584001/rotartsi"}, "edited": false, "score": 1, "creation_date": 1567036026, "post_id": 57701112, "comment_id": 101846287, "body": "@Rotartsi your comment is a bit confusing. A <code>char</code> in C++ <b>is</b> a number (whose size in bits is not standardized). C++ is embarassingly bad at handling text encodings. The literals <code>95</code> and <code>5</code> are not &quot;interpreted&quot; as different types, and indeed, OP made a typo regarding that. The literals <code>5</code> and <code>&#39;5&#39;</code> are however different types."}], "tags": [], "owner": {"reputation": 136, "user_id": 11984534, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vzh3Y.jpg?s=128&g=1", "display_name": "Aggs123", "link": "https://stackoverflow.com/users/11984534/aggs123"}, "is_accepted": false, "score": 1, "last_activity_date": 1567036823, "last_edit_date": 1567036823, "creation_date": 1567034331, "answer_id": 57701112, "question_id": 57701056, "link": "https://stackoverflow.com/questions/57701056/assigning-a-2-digit-integer-to-a-char-variable/57701112#57701112", "title": "Assigning a 2 digit integer to a char variable", "body": "<p>The reason this is happening is because the ascii code for _ (underscore) is 95. A simple fix would be to use either a string, an int, or a short instead of a char.</p>\n\n<p>Edit:\nIt works for single digits because you used a character literal, NOT because characters are also bytes in c++. That was my mistake.</p>\n"}], "owner": {"reputation": 125, "user_id": 11600922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc543f4b1ec8229e35576fa6f4851e40?s=128&d=identicon&r=PG", "display_name": "MagicGAT", "link": "https://stackoverflow.com/users/11600922/magicgat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 57701094, "answer_count": 2, "score": 1, "last_activity_date": 1567036823, "creation_date": 1567033804, "last_edit_date": 1567034389, "question_id": 57701056, "link": "https://stackoverflow.com/questions/57701056/assigning-a-2-digit-integer-to-a-char-variable", "title": "Assigning a 2 digit integer to a char variable", "body": "<p>Im doing a simple assignment from school which involves assigning a two digit integer (&lt;100) to a char variable. I am using Xcode 9.2. I should be able to do this and Xcode is not complaining. Yet when I try to <code>cout</code> the variable to the console it returns <code>_</code> in place of the variable</p>\n\n<p>This on a <code>.cpp</code> file within a normal <code>command line tool</code> project. </p>\n\n<pre><code>    char desired_score;\n    desired_score = 95;\n\n    cout &lt;&lt; \"I will work hard to get a grade of \" &lt;&lt; desired_score &lt;&lt; \" in this course!\\n\";\n</code></pre>\n\n<p>This code yields:</p>\n\n<pre><code>I will work hard to get a grade of _ in this course!\n</code></pre>\n\n<p>If I assign the value to a single digit, it outputs just fine. So I was able to code a workaround where I just reassign the variable value from <code>'9'</code> to <code>'5'</code> and use two different <code>cout</code> statements.</p>\n\n<p>Does anyone know why this is happening? It's part of a homework assignment and my textbook says this should be possible in C++. Is this a peculiarity of Xcode?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "git", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 1820, "user_id": 6411572, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UW5c3vqf1Uk/AAAAAAAAAAI/AAAAAAAACVM/MxyCKe2XJJM/photo.jpg?sz=128", "display_name": "Shawn Mathew", "link": "https://stackoverflow.com/users/6411572/shawn-mathew"}, "edited": false, "score": 0, "creation_date": 1567090138, "post_id": 57700866, "comment_id": 101867724, "body": "Thanks @paddy. The answer gave me a compile error &quot;Stray # in code&quot;. Edited the answer to solve that."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 1820, "user_id": 6411572, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UW5c3vqf1Uk/AAAAAAAAAAI/AAAAAAAACVM/MxyCKe2XJJM/photo.jpg?sz=128", "display_name": "Shawn Mathew", "link": "https://stackoverflow.com/users/6411572/shawn-mathew"}, "edited": false, "score": 0, "creation_date": 1567121754, "post_id": 57700866, "comment_id": 101879296, "body": "Ah of course, my apologies for a mediocre answer.  Glad you were able to correct it."}], "tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 2, "last_activity_date": 1567100758, "last_edit_date": 1567100758, "creation_date": 1567032042, "answer_id": 57700866, "question_id": 57700834, "link": "https://stackoverflow.com/questions/57700834/error-reading-the-git-commit-hash-into-c/57700866#57700866", "title": "Error reading the Git commit hash into C++", "body": "<p>The hash is not actually a string.  Even the compiler error is telling you this.</p>\n\n<p>You need to use the <em>stringize</em> operator (<code>#</code>).\nFrom <a href=\"https://stackoverflow.com/questions/20119643/stringizing-operator-in-c-c\">Stringizing operator in C/C++</a>:</p>\n\n<pre><code>#define STRINGIFY_(x) #x\n#define STRINGIFY(x) STRINGIFY_(x)\n\n#ifdef _GIT_COMMIT_HASH\nreturn STRINGIFY(_GIT_COMMIT_HASH);\n#endif\n</code></pre>\n\n<p>Note also that since this function always returns a string literal, it may be more appropriate for the return type to be <code>const char*</code> instead of <code>std::string</code>.  Although it's perfectly valid either way.</p>\n\n<p>One other point is that if the hash is not available, your compiler may warn you that the second <code>return</code> is unreachable.  If you don't want that to happen, then use a <code>#else</code> directive:</p>\n\n<pre><code>#ifdef _GIT_COMMIT_HASH\nreturn STRINGIFY(_GIT_COMMIT_HASH);\n#else\nreturn \"unavailable\";\n#endif\n</code></pre>\n"}], "owner": {"reputation": 1820, "user_id": 6411572, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UW5c3vqf1Uk/AAAAAAAAAAI/AAAAAAAACVM/MxyCKe2XJJM/photo.jpg?sz=128", "display_name": "Shawn Mathew", "link": "https://stackoverflow.com/users/6411572/shawn-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 57700866, "answer_count": 1, "score": 1, "last_activity_date": 1567100758, "creation_date": 1567031792, "question_id": 57700834, "link": "https://stackoverflow.com/questions/57700834/error-reading-the-git-commit-hash-into-c", "title": "Error reading the Git commit hash into C++", "body": "<p>I'm trying to read the Git commit hash into a C++ application. Using the following CMakeList file I get the correct commit hash.</p>\n\n<p>CMakelist</p>\n\n<pre><code>  FIND_PACKAGE(Git)\n  IF(GIT_FOUND)\n    EXECUTE_PROCESS(\n      COMMAND ${GIT_EXECUTABLE} rev-parse --short HEAD\n      WORKING_DIRECTORY \"${CMAKE_CURRENT_SOURCE_DIR}\"\n      OUTPUT_VARIABLE COMMIT\n      OUTPUT_STRIP_TRAILING_WHITESPACE)\n    MESSAGE( STATUS \"Commit : ${COMMIT}\" )\n  ELSE(GIT_FOUND)\n    SET(COMMIT 0)\n  ENDIF(GIT_FOUND)\n\nset(yada \"${COMMIT}\")\nMESSAGE(\"lkpoopkpoef\".${yada})\nadd_definitions(\"-D_GIT_COMMIT_HASH=${yada}\")\n</code></pre>\n\n<p>However, when I try to read the value in C++ in the following function, I get an error.</p>\n\n<p>main.cpp</p>\n\n<pre><code>std::string getGitCommit()\n{\n    #ifdef _GIT_COMMIT_HASH\n    return _GIT_COMMIT_HASH;\n    #endif\n    return \"unavailable\";\n}\n</code></pre>\n\n<blockquote>\n  <p>In function \u2018std::__cxx11::string getGitCommit()\u2019:\n  :0:18: error: \u2018d2cdfd2\u2019 was not declared in this scope</p>\n</blockquote>\n\n<p>d2cdfd2 is the commit hash.</p>\n\n<p>I'm referring to </p>\n\n<ol>\n<li><a href=\"http://xit0.org/2013/04/cmake-use-git-branch-and-commit-details-in-project/\" rel=\"nofollow noreferrer\">http://xit0.org/2013/04/cmake-use-git-branch-and-commit-details-in-project/</a> </li>\n<li><a href=\"https://stackoverflow.com/questions/7900661/how-to-read-a-cmake-variable-in-c-source-code\">How to read a CMake Variable in C++ source code</a></li>\n</ol>\n\n<p>I'm trying to avoid creating another file to store the commit hash and would like to directly read this from the CMakeList.</p>\n\n<p>I'm using catkin_make to build the application on an Ubuntu 16.04</p>\n\n<p>What am I doing wrong here?</p>\n"}, {"tags": ["c++", "xcode", "sfml"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567040212, "post_id": 57700742, "comment_id": 101846991, "body": "<code>brew: command not found</code> looks like you don&#39;t have <code>brew</code> installed or its not in your PATH"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567040270, "post_id": 57700742, "comment_id": 101847003, "body": "Related: <a href=\"https://apple.stackexchange.com/questions/148901/why-does-my-brew-installation-not-work\" title=\"why does my brew installation not work\">apple.stackexchange.com/questions/148901/&hellip;</a>"}], "owner": {"reputation": 31, "user_id": 10981707, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W9Xkf2vjeZs/AAAAAAAAAAI/AAAAAAAAABM/ZFImQD3DSTs/photo.jpg?sz=128", "display_name": "David Morse", "link": "https://stackoverflow.com/users/10981707/david-morse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567030977, "creation_date": 1567030977, "question_id": 57700742, "link": "https://stackoverflow.com/questions/57700742/error-reason-image-not-found-when-setting-up-c-sfml-for-xcode", "title": "Error: &quot;Reason: image not found&quot; when setting up C++ SFML for Xcode", "body": "<p>I am very close to finally getting C++ programming to work with SFML on my macOS. I went to a camp that only used Windows computers to program and I have been struggling to get C++ with SFML to work at my home. So I have been watching tutorials about how to get C++ with SFML to work on Xcode, and I recieve the following error after doing setting it all up:</p>\n\n<pre><code>dyld: Library not loaded: @rpath/libsfml-window.2.5.dylib\n  Referenced from: \n/Users/David/Library/Developer/Xcode/DerivedData/SFML_Proj.- \n  hadjgrdxcbtqnjejwvchenudpkqr/Build/Products/Debug/SFML Proj.\n  Reason: image not found\n</code></pre>\n\n<p>I have tried to fix it by looking at comments that say to put brew install sfml into terminal, but the following error shows up.</p>\n\n<pre><code>-bash: brew: command not found\n</code></pre>\n\n<p>Can someone please help me?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 530, "user_id": 10266364, "user_type": "registered", "profile_image": "https://graph.facebook.com/2142406652680807/picture?type=large", "display_name": "Marcin Poloczek", "link": "https://stackoverflow.com/users/10266364/marcin-poloczek"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1567030099, "post_id": 57700610, "comment_id": 101845148, "body": "Yes, but those have to be in one line"}, {"owner": {"reputation": 1458, "user_id": 11746212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69fe33bc21a8570b9e9c0fce89a681fa?s=128&d=identicon&r=PG&f=1", "display_name": "IronMan", "link": "https://stackoverflow.com/users/11746212/ironman"}, "edited": false, "score": 0, "creation_date": 1567030268, "post_id": 57700610, "comment_id": 101845178, "body": "This may be of interest <a href=\"https://stackoverflow.com/questions/9354192/reading-a-list-of-integer-in-a-single-input-line-in-c\" title=\"reading a list of integer in a single input line in c\">stackoverflow.com/questions/9354192/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 530, "user_id": 10266364, "user_type": "registered", "profile_image": "https://graph.facebook.com/2142406652680807/picture?type=large", "display_name": "Marcin Poloczek", "link": "https://stackoverflow.com/users/10266364/marcin-poloczek"}, "edited": false, "score": 0, "creation_date": 1567030292, "post_id": 57700635, "comment_id": 101845185, "body": "Thanks, that&#39;s what I needed."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1567030362, "post_id": 57700635, "comment_id": 101845210, "body": "Addendum: After you read the size, you can <code>values.reserve(size);</code> to possibly save a bit of time spent resizing the <code>vector</code> during <code>push_back</code>s."}, {"owner": {"reputation": 3331, "user_id": 8038186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ac0cc4d0f1414caf2172751b2ded50?s=128&d=identicon&r=PG&f=1", "display_name": "KoralK", "link": "https://stackoverflow.com/users/8038186/koralk"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1567030877, "post_id": 57700635, "comment_id": 101845310, "body": "@user4581301 He can also use vector&#39;s constructor and set the initialized elements&#39; count to this size, and then instead <code>push_back</code>, just use <code>vec[i] = value</code>"}, {"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "reply_to_user": {"reputation": 3331, "user_id": 8038186, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72ac0cc4d0f1414caf2172751b2ded50?s=128&d=identicon&r=PG&f=1", "display_name": "KoralK", "link": "https://stackoverflow.com/users/8038186/koralk"}, "edited": false, "score": 0, "creation_date": 1567030952, "post_id": 57700635, "comment_id": 101845324, "body": "@KorelK True. For a small number of elements, I imagine all of these are a wash. But if there&#39;s, say, a billion elements, then using the constructor, which has to zero those elements out, might be appreciably slower."}], "tags": [], "owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "is_accepted": true, "score": 3, "last_activity_date": 1567030779, "last_edit_date": 1567030779, "creation_date": 1567030176, "answer_id": 57700635, "question_id": 57700610, "link": "https://stackoverflow.com/questions/57700610/dealing-with-unknown-size-inputs/57700635#57700635", "title": "Dealing with unknown size inputs", "body": "<p>It sounds like this is for a programming competition or some other similar setup where you can trust that the input is properly formatted. If that's the case, yes, you can do this without buffering things through a <code>std::string</code>. Here's one option:</p>\n\n<pre><code>std::size_t size;\nstd::cin &gt;&gt; size;\n\nstd::vector&lt;int&gt; values;\n// Could do values.reserve(size); here if you'd like.\n\nfor (std::size_t i = 0; i &lt; size; i++) {\n    std::size_t value;\n    std::cin &gt;&gt; value;\n\n    values.push_back(value);\n}\n</code></pre>\n\n<p>Note that the stream extraction operator <code>operator &gt;&gt;</code> will use any whitespace character as a delimiter, so the newline after the number of elements and the space characters between the numbers themselves will work great as separators. There's no need to pull the entire second line by itself and then parse it apart.</p>\n\n<p>This does no error-checking, which is a real problem if you can't trust the inputs. But if you can, this should do the trick.</p>\n"}], "owner": {"reputation": 530, "user_id": 10266364, "user_type": "registered", "profile_image": "https://graph.facebook.com/2142406652680807/picture?type=large", "display_name": "Marcin Poloczek", "link": "https://stackoverflow.com/users/10266364/marcin-poloczek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 57700635, "answer_count": 1, "score": 0, "last_activity_date": 1567042037, "creation_date": 1567030022, "last_edit_date": 1567042037, "question_id": 57700610, "link": "https://stackoverflow.com/questions/57700610/dealing-with-unknown-size-inputs", "title": "Dealing with unknown size inputs", "body": "<p>The input for the program consists of two parts.\nThe first line of the input is the number of elements, and the second line is all the elements. This is an example input:</p>\n\n<pre><code>5\n1 3 23 4 2\n</code></pre>\n\n<p>Is there a way to deal with this kind of input without using <code>std::string</code> and parsing it to the vector of ints later?</p>\n"}, {"tags": ["c++", "inheritance", "casting", "c++17", "shared-ptr"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1567028282, "post_id": 57700321, "comment_id": 101844667, "body": "Why do you have (non const) reference?"}, {"owner": {"reputation": 153, "user_id": 5423886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284ea3eb0b0cdf5da730e69d7da1317e?s=128&d=identicon&r=PG&f=1", "display_name": "cypheratheist", "link": "https://stackoverflow.com/users/5423886/cypheratheist"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1567029998, "post_id": 57700321, "comment_id": 101845124, "body": "@Jarod42 Because of pure ignorance.  :)  I had imagined that a const would have made the shared_ptr objects completely immutable (i.e. not clone:able (to use Rust speak)), but Barry&#39;s answer makes it clear that I have severe knowledge gaps wrt const and shared_ptr."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1567064623, "post_id": 57700321, "comment_id": 101853225, "body": "Smart ptr semantics follow ptr semantics!"}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1567029675, "post_id": 57700483, "comment_id": 101845061, "body": "Most certainly it should be by-value and then moveing."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1567029133, "creation_date": 1567029133, "answer_id": 57700483, "question_id": 57700321, "link": "https://stackoverflow.com/questions/57700321/casting-shared-ptr-in-initializer-list/57700483#57700483", "title": "Casting shared_ptr in initializer list", "body": "<p>A <code>shared_ptr&lt;Derived&gt;</code> can be <em>converted</em> to a <code>shared_ptr&lt;Base&gt;</code>, but it <em>is not</em> a <code>shared_ptr&lt;Base&gt;</code>.</p>\n\n<p>In other words, this compiles:</p>\n\n<pre><code>std::shared_ptr&lt;Derived&gt; pd;\nstd::shared_ptr&lt;Base&gt; pb = pd;\n</code></pre>\n\n<p>But this does not:</p>\n\n<pre><code>std::shared_ptr&lt;Base&gt;&amp; pb = pd;\n</code></pre>\n\n<p>But this does, because const references can bind to temporaries and this will implicitly perform a conversion:</p>\n\n<pre><code>std::shared_ptr&lt;Base&gt; const&amp; pb = pd;\n</code></pre>\n\n<p>The problem is that you're taking non-const lvalue references in your constructors. You should either take const lvalue references or just take them by value.</p>\n"}], "owner": {"reputation": 153, "user_id": 5423886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284ea3eb0b0cdf5da730e69d7da1317e?s=128&d=identicon&r=PG&f=1", "display_name": "cypheratheist", "link": "https://stackoverflow.com/users/5423886/cypheratheist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 57700483, "answer_count": 1, "score": 1, "last_activity_date": 1567029133, "creation_date": 1567027988, "last_edit_date": 1567028995, "question_id": 57700321, "link": "https://stackoverflow.com/questions/57700321/casting-shared-ptr-in-initializer-list", "title": "Casting shared_ptr in initializer list", "body": "<p>Is it possible to up-cast a shared pointer object reference in an initializer list?</p>\n\n<p>I have two class hierarchies with matching derived classes.  Let's say I have a <code>Base</code> class which is derived to a <code>Foo</code> and a <code>Bar</code> class.  Then I have a separate hierarchy with a <code>ProxyBase</code> class and then (to match the other hierarchy) there's <code>FooProxy</code> and <code>BarProxy</code>.</p>\n\n<p>The <code>ProxyBase</code> class stores a <code>shared_ptr&lt;Base&gt;</code>.  When a <code>ProxyFoo</code> is created it requires a <code>std::shared_ptr&lt;Foo&gt;&amp;</code>, when a <code>ProxyBar</code> is created it requires a <code>std::shared_ptr&lt;Bar&gt;&amp;</code>.</p>\n\n<p>There are two ways I can make this work:</p>\n\n<ul>\n<li>Don't use references to the <code>std::shared_ptr&lt;*&gt;</code> objects.</li>\n<li>Use <code>std::shared_ptr&lt;Base&gt;&amp; obj</code> as input to the <code>ProxyFoo</code> and <code>ProxyBar</code> constructors.  This requires a down-cast (which I want to avoid) in the constructor (since I want the <code>Foo</code> and <code>Bar</code> specific properties), plus that it makes the contract/API more allowing than it should be.</li>\n</ul>\n\n<p>But I'm wondering if this can be done with references.</p>\n\n<p>I <em>think</em> I know what the problem is:  When I remove the references it works, and I think that's because \"casting\" a <code>shared_ptr&lt;X&gt;</code> is technically not allowed; it can only be \"casted\" by creating a new <code>shared_ptr</code> object of a derived/base type.  When using references one tries to actually cast one <code>shared_ptr</code> object to another which isn't allowed.  Is this correct?</p>\n\n<p>Originally I thought this was one of those cases where <code>std::static_pointer_cast</code> would help, but if my hypothesis is correct then that won't help either.</p>\n\n<p>Self-contained example:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nclass Base { };\n\nclass Foo : public Base\n{\nprivate:\n  int val_;\n\npublic:\n  Foo(int val) : val_(val) { }\n};\n\nclass ProxyBase\n{\nprotected:\n  std::shared_ptr&lt;Base&gt; obj_;\n\n  ProxyBase(std::shared_ptr&lt;Base&gt;&amp; obj) : obj_(obj) { }\n};\n\nclass FooProxy : public ProxyBase\n{\npublic:\n  FooProxy(std::shared_ptr&lt;Foo&gt;&amp; fobj) : ProxyBase(fobj) { }\n};\n\nint main()\n{\n  auto f = std::make_shared&lt;Foo&gt;(42);\n  auto fp = std::make_shared&lt;FooProxy&gt;(f);\n}\n</code></pre>\n\n<p>So my question boils down to:  Is it possible to do what I'm trying to do in the (currently non-functional) code above without removing the references and yet keep the <code>Foo</code> and <code>Bar</code> specific constructors to <code>FooProxy</code> and <code>BarProxy</code>?</p>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567027734, "post_id": 57700222, "comment_id": 101844478, "body": "1) Define what you mean by &quot;consuming high cpu&quot;. 2) Why the try-catch block? COM functions don&#39;t throw. They return the status of the operation."}, {"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 5, "creation_date": 1567027827, "post_id": 57700222, "comment_id": 101844503, "body": "You probably don&#39;t want to create a new instance of <code>ILog</code> for each message that you log."}, {"owner": {"reputation": 27, "user_id": 8087263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147633615264310/picture?type=large", "display_name": "Ramesh Nimmala", "link": "https://stackoverflow.com/users/8087263/ramesh-nimmala"}, "edited": false, "score": 0, "creation_date": 1567027950, "post_id": 57700222, "comment_id": 101844545, "body": "If I am not wrong cocreateinstance is a singleton so isn&#39;t that take care of it even if someone try to create multiple instance? &quot;consuming high cpu&quot; :when I debug the code it was showing 100% of cpu consumed isn&#39;t that make process slow?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567028229, "post_id": 57700222, "comment_id": 101844649, "body": "@RameshNimmala &quot;<i>If I am not wrong cocreateinstance is a singleton</i>&quot; Why do you think that? 1) You can create multiple instances, of a same CLSID. Think <code>class</code> in C++, and instance of a <code>class</code>. Can there ever be a single instance of a <code>class</code>? 2) Your <code>LogMessage</code> creates a <code>coclass</code>, and destroys it, at the end of it (destructor of <code>CComPtr</code> destroys it), on every call. If it&#39;s out-of-proc COM server - that may be very expensive to do. So, when profiling, did you look at the hit count, of <code>CoCreateInstance</code>, and did you look at total CPU usage, or average?"}, {"owner": {"reputation": 27, "user_id": 8087263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147633615264310/picture?type=large", "display_name": "Ramesh Nimmala", "link": "https://stackoverflow.com/users/8087263/ramesh-nimmala"}, "edited": false, "score": 0, "creation_date": 1567028544, "post_id": 57700222, "comment_id": 101844751, "body": "I looked at hit count and it was more than 20 times. total CPU usage varied between 80% to 100%. Is there any alternative to create instance once and use the methods several times? or Can I put cocreate instance in constructor?"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1567030170, "post_id": 57700222, "comment_id": 101845156, "body": "@RameshNimmala Every time you call CoCreateInstance it creates an instance."}], "answers": [{"comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1567071063, "post_id": 57702394, "comment_id": 101856575, "body": "<code>CComPtr</code> has automatic clean up. It doesn&#39;t need explicit <code>Release</code>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1567072246, "post_id": 57702394, "comment_id": 101857170, "body": "You do not cast COM interfaces by using <code>dynamic_cast</code>. The COM-compatible equivalent of what you were trying to accomplish is <code>QueryInterface</code>. And, as noted, you don&#39;t need it anyway, since <code>CComPtr</code> is a smart pointer, that automatically releases the interface reference count on destruction."}, {"owner": {"reputation": 27, "user_id": 8087263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147633615264310/picture?type=large", "display_name": "Ramesh Nimmala", "link": "https://stackoverflow.com/users/8087263/ramesh-nimmala"}, "edited": false, "score": 0, "creation_date": 1567198598, "post_id": 57702394, "comment_id": 101906186, "body": "@Joshua I updated code again can you please take a look at it? it&#39;s static method and I can&#39;t move or make  CComPtr&lt;LOGSERVICELib::ILogUtility&gt; ILog  as static that&#39;s really bad as per some articles. Do you have any suggest ions what would be the best solution?"}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 27, "user_id": 8087263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147633615264310/picture?type=large", "display_name": "Ramesh Nimmala", "link": "https://stackoverflow.com/users/8087263/ramesh-nimmala"}, "edited": false, "score": 0, "creation_date": 1567198875, "post_id": 57702394, "comment_id": 101906266, "body": "@RameshNimmala: Unfortunately your choices are few."}, {"owner": {"reputation": 27, "user_id": 8087263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147633615264310/picture?type=large", "display_name": "Ramesh Nimmala", "link": "https://stackoverflow.com/users/8087263/ramesh-nimmala"}, "edited": false, "score": 0, "creation_date": 1567791742, "post_id": 57702394, "comment_id": 102083143, "body": "@Joshua I updated it to non-static method as per your suggestion and try to access it in stdAfx.h(Main project) but I am struggling with declaring a macro. I tried to use  #define LOG_THIS(x)     extern LogMessage( L&quot;Service&quot;, _Module.m_bstrLogHelper, _Module.m_LogHelperLogFile, x) but it did not work and also I have seen several articles and Microsoft link where they declared cocreateinstance inside the method instead of constructor. Can you please provide your insight on both macro declaration and cocreateinstance inside the method instead of constructor?"}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 27, "user_id": 8087263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147633615264310/picture?type=large", "display_name": "Ramesh Nimmala", "link": "https://stackoverflow.com/users/8087263/ramesh-nimmala"}, "edited": false, "score": 0, "creation_date": 1567794814, "post_id": 57702394, "comment_id": 102084276, "body": "@RameshNimmala: You provided the incite that CoCreateInstance of this particular COM object is slow. I don&#39;t use macros like that and have nothing to add."}], "tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": false, "score": 1, "last_activity_date": 1567198844, "last_edit_date": 1567198844, "creation_date": 1567047358, "answer_id": 57702394, "question_id": 57700222, "link": "https://stackoverflow.com/questions/57700222/cocreateinstance-consuming-high-cpu/57702394#57702394", "title": "Cocreateinstance consuming high cpu", "body": "<pre><code>        hr = ILog.CoCreateInstance(__uuidof(LOGSERVICELib::LogUtility));\n</code></pre>\n\n<p>Clearly this code belongs in the constructor of <code>LogHelper</code>. Profiler guided optimization for the win, and you already used the profiler. Good for you. While you're at it, get rid of the <code>f(ILog == NULL)</code> altogether and move the declaration to your class constructor. This way the code that tries to create it always runs.</p>\n\n<p>CComPtr auto-frees the object.</p>\n\n<p>Unfortunately <code>LogMethod</code> is currently <code>static</code>. To fix the performance the available choices are refactor until it isn't <code>static</code> anymore or implement <code>LOGSERVICELib::LogUtility</code> yourself.</p>\n"}], "owner": {"reputation": 27, "user_id": 8087263, "user_type": "registered", "profile_image": "https://graph.facebook.com/1147633615264310/picture?type=large", "display_name": "Ramesh Nimmala", "link": "https://stackoverflow.com/users/8087263/ramesh-nimmala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1567198844, "creation_date": 1567027425, "last_edit_date": 1567198468, "question_id": 57700222, "link": "https://stackoverflow.com/questions/57700222/cocreateinstance-consuming-high-cpu", "title": "Cocreateinstance consuming high cpu", "body": "<p>I am using a LOGSERVICELib.dll exposed interface methods as logging method in main project. There is abc.h file in main project where it create instance of LOGSERVICELib.dll and uses it's exposed methods to log main project errors. I recently observed that it's making process too slow ,after profiling the code, I found that cocreate instance consuming high cpu along with other CStdio functions* why Cstdio funcitons taking high cpu time(70-80%)?</p>\n\n<pre><code>        Cstdiofile::Readstring()\n        Cstdiofile::writeString()\n        Cstdiofile::flush()\n\n\nLogHelper.h( external .h file)\n\nclass LogHelper\n{\n\npublic:\n    LogHelper()\n    {\n        CoInitialize(NULL);\n    };\n\n\n    ~LogHelper()\n    {\n        CoUninitialize();\n    };\n\n    static void LogMessage(_bstr_t eventName, _bstr_t logFilePath, _bstr_t logFileName, _bstr_t message)\n    {\n        HRESULT hr = S_OK ;\n\n        try\n        {\n            CComPtr&lt;LOGSERVICELib::ILogUtility&gt; ILog;\n            if(ILog == NULL)\n            hr = ILog.CoCreateInstance(__uuidof(LOGSERVICELib::LogUtility));\n\n            if( SUCCEEDED( hr ) )\n            {\n                hr = pILog-&gt;PostMessage( logFilePath, logFileName, eventName, message, L\"\", L\"\");           \n            }\n        }\n        catch( _com_error&amp; )\n        {\n            // forget it\n        }\n\n\n    }}\n\nstdAfx.h(Main project)\n\n#define LOG_THIS(x)     LogHelper::LogMessage( L\"Service\", _Module.m_bstrLogHelper, _Module.m_LogHelperLogFile, x)\n\n\nService.cpp:\n\nvoid publish()\n{\nLOG_THIS(\"published new service\");\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "language-lawyer", "variadic-templates", "template-argument-deduction"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567027168, "post_id": 57700049, "comment_id": 101844322, "body": "For once MSVS doesn&#39;t compile.  ICC does not as well.  Looks like an extension/bug to me."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567027247, "post_id": 57700049, "comment_id": 101844343, "body": "Also, did you not notice the bug report link for gcc on the top answer?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567027355, "post_id": 57700049, "comment_id": 101844377, "body": "@NathanOliver - But I&#39;ve compiled with &quot;-pedantic-error&quot;; more a bug than an extension, IMHO."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567027409, "post_id": 57700049, "comment_id": 101844393, "body": "Call it what you will, you have the standard quote saying it is illegal, so it&#39;s illegal.  If they compile then it&#39;s a bug/extension."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567027443, "post_id": 57700049, "comment_id": 101844401, "body": "@NathanOliver - D&#39;Oh! - I&#39;ve read it yesterday but I&#39;ve forgotten. But not completely, considering I&#39;ve used <code>std::integral_constant</code>."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567027618, "post_id": 57700049, "comment_id": 101844450, "body": "@NathanOliver - Maybe you&#39;re right. But, as Linux and open-source enthusiast, is painful to think that g++ and clang++ are bugged and msvc correct."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1567027750, "post_id": 57700049, "comment_id": 101844483, "body": "It happens.  C++ is a very complex language and g++ and clang have bugs that have been opened for years.  Same goes for MSVS.  They are all not 100% conformant, but they are all close, to varying degrees.  It just goes to show that open-source doesn&#39;t guarantee that things get fixed quickly."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567027928, "post_id": 57700049, "comment_id": 101844534, "body": "Just to prove the point, both <code>constexpr</code> and TMP are Turing complete languages so C++ is 3 Turing complete languages all wraped together in a manner that is still mostly backwards compatible to what it was in 1998.  That offers a lot a places to get things wrong."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567028464, "post_id": 57700049, "comment_id": 101844723, "body": "@NathanOliver - yes... sometimes variadic ellipsis seems to me part a morse message from my subconscious saying &quot;sos, abandon ship, saves who can&quot;. The bad part is that I love it."}], "answers": [{"comments": [{"owner": {"reputation": 5201, "user_id": 11638718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a4a973e6a1f850f94f71bf09a47f6?s=128&d=identicon&r=PG&f=1", "display_name": "\u5eb7\u6853\u744b", "link": "https://stackoverflow.com/users/11638718/%e5%ba%b7%e6%a1%93%e7%91%8b"}, "edited": false, "score": 0, "creation_date": 1567060008, "post_id": 57702322, "comment_id": 101851144, "body": "When you declare <code>template &lt;typename... Types, Types... Values&gt; void foo(std::integral_constant&lt;Types, Values&gt;...);</code> MSVC <b>will</b> accept it; But when  you declare <code>template &lt;typename... Types, Types... Values&gt; void bar();</code> MSVC will not accept it. So MSVC also has this bug? see <a href=\"https://godbolt.org/z/FEPKpI\" rel=\"nofollow noreferrer\">live demo</a>."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 5201, "user_id": 11638718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a4a973e6a1f850f94f71bf09a47f6?s=128&d=identicon&r=PG&f=1", "display_name": "\u5eb7\u6853\u744b", "link": "https://stackoverflow.com/users/11638718/%e5%ba%b7%e6%a1%93%e7%91%8b"}, "edited": false, "score": 0, "creation_date": 1567060276, "post_id": 57702322, "comment_id": 101851263, "body": "@\u5eb7\u6853\u744b Well, I think you are right ...  A diagnostic is required for an ill-formed declaration in any case"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 5201, "user_id": 11638718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a4a973e6a1f850f94f71bf09a47f6?s=128&d=identicon&r=PG&f=1", "display_name": "\u5eb7\u6853\u744b", "link": "https://stackoverflow.com/users/11638718/%e5%ba%b7%e6%a1%93%e7%91%8b"}, "edited": false, "score": 0, "creation_date": 1567061670, "post_id": 57702322, "comment_id": 101851841, "body": "@\u5eb7\u6853\u744b Thank you for the demo!"}], "tags": [], "owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "is_accepted": true, "score": 1, "last_activity_date": 1567061651, "last_edit_date": 1567061651, "creation_date": 1567046828, "answer_id": 57702322, "question_id": 57700049, "link": "https://stackoverflow.com/questions/57700049/g-and-clang-are-both-bugged-with-template-function-parameter-pack-expansion/57702322#57702322", "title": "g++ and clang++ are both bugged with template function parameter pack expansion?", "body": "<p>It's illegal, the standard is very clear.  For what it's worth, MSVC doesn't seem to accept the code (<a href=\"https://godbolt.org/z/DtLJg5\" rel=\"nofollow noreferrer\">https://godbolt.org/z/DtLJg5</a>).  This is a GCC bug and a <a href=\"https://bugs.llvm.org/show_bug.cgi?id=24625\" rel=\"nofollow noreferrer\">Clang bug</a>.  (I didn't check old versions.)</p>\n\n<p>As a workaround, you can do something like this:</p>\n\n<pre><code>template &lt;typename... ICs&gt;\nstd::enable_if_t&lt;std::conjunction_v&lt;is_integral_constant&lt;ICs&gt;...&gt;&gt; foo(ICs...)\n{\n    ((std::cout &lt;&lt; ICs::value &lt;&lt; '\\n'), ...);\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/-gD2h9\" rel=\"nofollow noreferrer\">Live demo</a></p>\n"}], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 57702322, "answer_count": 1, "score": 2, "last_activity_date": 1567061651, "creation_date": 1567026492, "question_id": 57700049, "link": "https://stackoverflow.com/questions/57700049/g-and-clang-are-both-bugged-with-template-function-parameter-pack-expansion", "title": "g++ and clang++ are both bugged with template function parameter pack expansion?", "body": "<p>This is a follows up of <a href=\"https://stackoverflow.com/questions/57689726/g-and-clang-different-behaviour-deducing-variadic-template-auto-values\">another question</a> where an answer point my attention to Templates [temp.param] 17.1.17 (last C++17 draft, but I suppose also preceding standardizations) where is stated that</p>\n\n<blockquote>\n  <p>A template parameter pack that is a pack expansion shall not expand a parameter pack declared in the same template-parameter-list.</p>\n</blockquote>\n\n<p>with an example of this limitation</p>\n\n<blockquote>\n<pre><code>template &lt;class... T, T... Values&gt; // error: Values expands template type parameter\nstruct static_array;               // pack T within the same template parameter list\n</code></pre>\n</blockquote>\n\n<p>So, if I understand correctly this rule, the following function (that I find extremely reasonable) is illegal</p>\n\n<pre><code>template &lt;typename ... Types, Types ... Values&gt;\nvoid foo (std::integral_constant&lt;Types, Values&gt;...)\n { ((std::cout &lt;&lt; Values &lt;&lt; std::endl), ...); }\n</code></pre>\n\n<p>because the second parameter pack (<code>Types ... Values</code>) expand a parameter pack (<code>Types</code>) declared in the same template parameter lists.</p>\n\n<p>Anyway, both g++ (9.2.0, by example) and clang++ (8.0.0, by example) compile the following code without problem</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename ... Types, Types ... Values&gt;\nvoid foo (std::integral_constant&lt;Types, Values&gt;...)\n { ((std::cout &lt;&lt; Values &lt;&lt; std::endl), ...); }\n\nint main()\n {\n   foo(std::integral_constant&lt;int, 0&gt;{},\n       std::integral_constant&lt;long, 1L&gt;{},\n       std::integral_constant&lt;long long, 2LL&gt;{});\n }\n</code></pre>\n\n<p>So I suppose there is something I misunderstand.</p>\n\n<p>Are both g++ and clang++ bugged or am I that misunderstand the standard?</p>\n"}, {"tags": ["c++", "arrays", "bit", "memcpy"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1567026242, "post_id": 57699999, "comment_id": 101843966, "body": "Something based on <code>std::bitset</code> maybe? Also <code>boost::dynamic_bitset</code> might be viable."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1567026336, "post_id": 57699999, "comment_id": 101843999, "body": "First create a function that returns a single bit. Then call this in a loop and get your desired bits one-by-one. Once that works, if you need more performance, you should be better equipped to figure out how to get bits in larger chunks instead of one-by-one."}, {"owner": {"reputation": 12967, "user_id": 1168588, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BxNie.jpg?s=128&g=1", "display_name": "PaulProgrammer", "link": "https://stackoverflow.com/users/1168588/paulprogrammer"}, "edited": false, "score": 0, "creation_date": 1567026341, "post_id": 57699999, "comment_id": 101844000, "body": "<code>&amp;</code> for bitwise and, and <code>&lt;&lt;</code> for bit shift inside a <code>for</code> loop perhaps?  I suppose my ancient old C is showing instead of the fancy new C++..."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 3, "creation_date": 1567027001, "post_id": 57699999, "comment_id": 101844260, "body": "I don&#39;t understand &quot;<i>if the start bit was 17</i>&quot;. Please show the code you have for the single case you mentioned."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1567039482, "last_edit_date": 1567039482, "creation_date": 1567039145, "answer_id": 57701583, "question_id": 57699999, "link": "https://stackoverflow.com/questions/57699999/copying-arbitrary-bits-from-an-array-into-a-variable/57701583#57701583", "title": "Copying arbitrary bits from an array into a variable?", "body": "<p>From the desired starting bit index, you can use the <code>/</code> and <code>%</code> operators to calculate the exact byte in the array, and the initial bit index within that byte.  Then it is just a matter of iterating the byte array and shifting bits around until the desired number of bits have been copied into the result.</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>uint32_t getBits(const void *Data, uint32_t DataLen, uint32_t StartBit, uint8_t NumBits)\n{\n    uint32_t Result = 0;\n\n    // are there any bytes at all?\n    if (DataLen != 0)\n    {\n        // get a pointer to the starting byte...\n        const uint8_t *pData = &amp;(static_cast&lt;const uint8_t*&gt;(Data)[StartBit / 8]);\n        uint8_t b = *pData;\n\n        // calculate the starting bit within that byte...\n        int BitOffset = 7 - (StartBit % 8);\n\n        // iterate for the desired number of bits...\n        for(int i = 0; i &lt; NumBits; ++i)\n        {\n            // make room for the next bit...\n            Result &lt;&lt;= 1;\n            // copy the bit...\n            Result |= ((b &gt;&gt; BitOffset) &amp; 0x01);\n            // reached the end of the current byte?\n            if (--BitOffset &lt; 0)\n            {\n                b = *(++pData); // go to the next byte...\n                BitOffset = 7; // restart at the first bit in that byte...\n            }\n        }\n    }\n\n    // all done...\n    return Result;\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>uint8_t arr[] = {0x00, 0x00, 0xFF, 0xF1, 0x6D, 0xA2, 0x00, 0x00};\nuint32_t value = getBits(arr, 8, 17, 13);\n</code></pre>\n\n<p><a href=\"https://ideone.com/d2jTKM\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p>If needed, you can then optimize this further to make the code shift+copy more than 1 bit at a time.  For instance, before entering the loop, if the starting bit index is not at a byte boundary then shift off the unwanted bits from the initial <code>b</code> and <code>OR</code> the remaining bits to <code>Result</code>. Then have the loop <code>OR</code> 1 whole byte at a time into <code>Result</code> while the desired number of bits is <code>&gt;= 8</code>. Then after exiting the loop, if the desired number of bits is still <code>&gt; 0</code> then shift off the unwanted bits from the final <code>b</code> and <code>OR</code> the remaining bits to <code>Result</code>.</p>\n\n<p>I leave that as an exercise for you to figure out.</p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 0, "last_activity_date": 1567214570, "creation_date": 1567214570, "answer_id": 57734571, "question_id": 57699999, "link": "https://stackoverflow.com/questions/57699999/copying-arbitrary-bits-from-an-array-into-a-variable/57734571#57734571", "title": "Copying arbitrary bits from an array into a variable?", "body": "<p>@Punchki If you want to build a machine yourself,perheps this idea could help.</p>\n\n<pre><code>                 First (17)   Last (inclusive)\n                   !            !\n                   !            ! +- The least significant bit in the least significant byte\n                   !            ! !\n00000000 00000000 11111111 11110001 01101101 10100010 00000000 00000000\n                      &amp;        &amp;     &lt;- AND\n                  01111111 11111100  &lt;- 13 bit bit-mask\n                                     &lt;- cast all bytes to std::uintmax_t and ...\n&lt;&lt;(24-2) &lt;&lt;(16-2)  &lt;&lt;(8-2)  &gt;&gt;(0+2)  &lt;- ... shift and ...\n                 |                   &lt;- ... OR all into the result variable\n                  00011111 11111100\n\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 2905124, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Q5HZk.jpg?s=128&g=1", "display_name": "Punchki", "link": "https://stackoverflow.com/users/2905124/punchki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1567214570, "creation_date": 1567026117, "question_id": 57699999, "link": "https://stackoverflow.com/questions/57699999/copying-arbitrary-bits-from-an-array-into-a-variable", "title": "Copying arbitrary bits from an array into a variable?", "body": "<p>so I am working with a data set that comes in as an array.  For example:</p>\n\n<p>{0x00, 0x00, 0xFF, 0xF1, 0x6D, 0xA2, 0x00 0x00}</p>\n\n<p>{0b00000000, 0b00000000, 0b11111111, 0b11110001, 0b01101101, 0b10100010, 0b00000000, 0b00000000}</p>\n\n<p>I need to be able to extract information from this array based on two values:</p>\n\n<ul>\n<li>The start bit.</li>\n<li>The number of bits.</li>\n</ul>\n\n<p>For example, if the start bit was 17, and the bit length was 13, (assuming the first bit is index 0), my data would be:</p>\n\n<p>0b1111111111100</p>\n\n<p>Decimal: 8188</p>\n\n<p>This decimal value (or uint32_t or w/e)  would  then be stored in a variable and output.  I can do this for a single case, but am having a hard time writing code where start bit and number of bits are variables into a function or block of code...</p>\n\n<hr>\n\n<p>I've tried using memcpy, but this is only byte addressable.</p>\n\n<p>I would appreciate any feedback!</p>\n"}, {"tags": ["c++", "pointers", "templates", "null", "byte"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1567026652, "post_id": 57699866, "comment_id": 101844123, "body": "Can any of the downvoters pitch in, with the reason? At the very least, the question has <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which is a rare sight on SO, nowadays."}, {"owner": {"reputation": 141, "user_id": 4464627, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mp56iqAZaHY/AAAAAAAAAAI/AAAAAAAAAD4/mzqbOeNZpfI/photo.jpg?sz=128", "display_name": "NBWL", "link": "https://stackoverflow.com/users/4464627/nbwl"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567027039, "post_id": 57699866, "comment_id": 101844277, "body": "I first separated the code into different blocks and then realised it was going to a pain to copy paste if somebody wants to compile it. That&#39;s probably the reason."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567027326, "post_id": 57699866, "comment_id": 101844369, "body": "But still, it was passable as <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.. I know that I am quick on a draw, on downvoting, and scolding people, due to the lack of <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, but your example looked good. Apparently, some people are even quicker on the downvote button, than me :/"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567048004, "post_id": 57699866, "comment_id": 101848327, "body": "@AlgirdasPreid\u017eius That&#39;s not minimal.  It contains a lot of irrelevant code."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1567078777, "post_id": 57699866, "comment_id": 101860800, "body": "@L.F. How do you define &quot;a lot&quot;? I would disagree on the statement that it has &quot;a lot&quot; of irrelevant code. It <i>might</i> have some code, that isn&#39;t relevant, to the immediate issue, but maybe, one just wanted to demonstrate how <code>data</code> member was being used, don&#39;t you think? I am comparing such example, with the average question, on SO, which, typically, is either not minimal (having couple hundreds of lines, which has unclear relation, to the issue being observed), and/or not reproducible (you can&#39;t copy-paste it, and get it to compile)."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567078932, "post_id": 57699866, "comment_id": 101860895, "body": "@AlgirdasPreid\u017eius I guess you are right, this one is above average ...  But a minimal reproducible example for this shouldn&#39;t really exceed 10 lines IMO ..."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 1, "creation_date": 1567079063, "post_id": 57699866, "comment_id": 101860965, "body": "@L.F. If you know, what the problem is, you can make <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, that produces only said problem. But, at that point - you already know the answer, and don&#39;t need to ask a question."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567079200, "post_id": 57699866, "comment_id": 101861040, "body": "@AlgirdasPreid\u017eius I don&#39;t really think so, it should be possible to identify that <code>copy</code> is the problem via debugging."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1567079509, "post_id": 57699866, "comment_id": 101861238, "body": "@L.F. 1) &quot;<i>it should be possible to identify that copy is the problem via debugging</i>&quot; Yes (for some of us, it was apparent immediately, without even debugging), but the true question, was <b>why it was a problem</b>? 2) If all people knew how to use the debugger, and knew how to <b>interpret what they are seeing</b>, there would be no need for 90% of questions asked on SO. 3) What I forgot to mention, in my previous comment: remember, this is UB we are talking about. The behavior, might as well, changed to whatever they expected behavior was, if they tried to make the example smaller."}], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1567026827, "post_id": 57700024, "comment_id": 101844195, "body": "Beat me to it, with the answer.. Even though, I knew that this had to be UB, I was having major brain farts, as to the reason for it. Had to debug through <code>std::copy</code>, while having memory window open, to notice it :/"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567026911, "post_id": 57700024, "comment_id": 101844231, "body": "@AlgirdasPreid\u017eius Had the same problem :D <code>std::copy</code> looks so well here"}, {"owner": {"reputation": 141, "user_id": 4464627, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mp56iqAZaHY/AAAAAAAAAAI/AAAAAAAAAD4/mzqbOeNZpfI/photo.jpg?sz=128", "display_name": "NBWL", "link": "https://stackoverflow.com/users/4464627/nbwl"}, "edited": false, "score": 0, "creation_date": 1567026934, "post_id": 57700024, "comment_id": 101844238, "body": "it works like a charm with std::memcpy. Thanks a lot"}], "tags": [], "owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "is_accepted": true, "score": 3, "last_activity_date": 1567148145, "last_edit_date": 1567148145, "creation_date": 1567026328, "answer_id": 57700024, "question_id": 57699866, "link": "https://stackoverflow.com/questions/57699866/loosing-pointer-after-reading-bytes/57700024#57700024", "title": "Loosing pointer after reading bytes", "body": "<p><strong>You confused <a href=\"https://es.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\"><code>std::copy</code></a> with <a href=\"https://en.cppreference.com/w/cpp/string/byte/memcpy\" rel=\"nofollow noreferrer\"><code>std::memcpy</code></a>.</strong></p>\n\n<p><code>std::copy</code> is an algorithm from <code>&lt;algorithm&gt;</code> library, which takes a pair of iterators as source and an iterator as the output. It will simply go through each element in the source range and copy contruct them at range starting with <code>output</code>.</p>\n\n<p>Because you provided an <code>int</code> as output, you are only allowed to write a single element. Going further is Undefined Behaviour (which in your case seems to be overwriting <code>data</code> member).</p>\n\n<p>Sample usage of <code>std::copy</code>:</p>\n\n<pre><code>std::vector&lt;int&gt; a {1, 2, 3, 4, 5};\nstd::array&lt;int, 5&gt; b;\nfor(int n: b)\n    std::cout &lt;&lt; n &lt;&lt; \" \"; //0 0 0 0 0\nstd::copy(a.begin(), a.end(), b.begin());\nfor(int n: b)\n    std::cout &lt;&lt; n &lt;&lt; \" \"; //1 2 3 4 5\n</code></pre>\n\n<hr>\n\n<p><code>std::memcpy</code> on the other hand will simply take the content of the memory at given place and put in the other place, which is what you wanted to achieve.</p>\n\n<p>Sample usage:</p>\n\n<pre><code>int a = 5;\nchar[4] b;\nstd::memcpy(b, &amp;a, 4);\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 4464627, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Mp56iqAZaHY/AAAAAAAAAAI/AAAAAAAAAD4/mzqbOeNZpfI/photo.jpg?sz=128", "display_name": "NBWL", "link": "https://stackoverflow.com/users/4464627/nbwl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1567069770, "accepted_answer_id": 57700024, "answer_count": 1, "score": 0, "last_activity_date": 1567148145, "creation_date": 1567025373, "last_edit_date": 1567025730, "question_id": 57699866, "link": "https://stackoverflow.com/questions/57699866/loosing-pointer-after-reading-bytes", "closed_reason": "Not suitable for this site", "title": "Loosing pointer after reading bytes", "body": "<p>I'm doing a project where to construct an object MyClass from received bytes. The byte string consists of an integer (4 bytes) followed by a message (5 bytes).</p>\n\n<p>I have created a template class to be able to read multiple types with ease and also wrote a template specialisation function to handle the case of char arrays.</p>\n\n<p>Here's the code that's copy pastable in a main.cpp file.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\ntemplate &lt;typename T&gt;\nclass ByteReaderT {\n    public:\n\n    static const char* read(const char* source, T&amp; dest, size_t sz)\n    {\n            std::copy(source, source + sz, &amp;dest);\n            return source + sz;\n        }\n\n};\n\ntemplate&lt;&gt;\ninline const char* ByteReaderT&lt;char*&gt;::read(const char* source, char*&amp; dest, size_t sz)\n{\n    return std::copy(source, source + sz, dest);\n}\n\n\n#define DATA_SIZE 5\n\nstruct MyClass {\n\n    int num;\n    char* data;\n\n    MyClass(): num(0), data(new char[DATA_SIZE]) {}\n\n    void read(const char* str) {\n        // data is still alive and well\n        str = ByteReaderT&lt;int&gt;::read(str, num, sizeof(int));\n        // data is gone (data = nullptr)\n        // I need to reallocate memory with data = new char[DATA_SIZE];\n        str = ByteReaderT&lt;char*&gt;::read(str, data, DATA_SIZE);\n    }\n\n};\n\n\n\nint main()\n{\n    char received_arr[] = {\n        '\\x01', '\\0', '\\0', '\\0', // bytes for num\n        'r', 'e', 'c', 'v', ' ' // bytes for data\n    };\n\n    MyClass c;\n    char* ptr = nullptr;\n\n    c.read(received_arr);\n    std::cout &lt;&lt; c.num &lt;&lt; std::endl;\n    std::cout &lt;&lt; std::string(c.data) &lt;&lt; std::endl;\n\n    return 0;\n}\n\n\n</code></pre>\n\n<p>However in the <code>MyClass::read</code> function, my data pointer is reset to nullptr after reading the first 4 bytes for the number.</p>\n\n<p>And I have no clue why this is happening. The template function <code>ByteReaderT&lt;int&gt;::read</code> shouldn't touch the data pointer.</p>\n\n<p>I can always allocate memory again for data in MyClass::read before reading the 5 byte message but that's not clean because I shouldn't have to.</p>\n\n<p>If anyone sees where it goes wrong it would be much appreciated because right now I'm stuck.</p>\n"}, {"tags": ["c++", "sorting"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1567025492, "post_id": 57699838, "comment_id": 101843700, "body": "It appears that <code>ptr</code> is an array or a<code>int*</code>. If it is, <code>ptr.begin()</code> and <code>ptr.end()</code> are not correct. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so someone can help you resolve the problem."}, {"owner": {"reputation": 43, "user_id": 11674974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fq-5s9HdGVg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGnOPI-Lg9V1JBQtLheHH2J4XxCQ/mo/photo.jpg?sz=128", "display_name": "CeNiEi", "link": "https://stackoverflow.com/users/11674974/ceniei"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1567025757, "post_id": 57699838, "comment_id": 101843795, "body": "really sorry, i intended to include that line but for some reason forgot. btw it is an array indeed."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 11674974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fq-5s9HdGVg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGnOPI-Lg9V1JBQtLheHH2J4XxCQ/mo/photo.jpg?sz=128", "display_name": "CeNiEi", "link": "https://stackoverflow.com/users/11674974/ceniei"}, "edited": false, "score": 0, "creation_date": 1567051754, "post_id": 57700015, "comment_id": 101849024, "body": "Thank you very much. I thought that begin and end work with arrays."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 43, "user_id": 11674974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fq-5s9HdGVg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGnOPI-Lg9V1JBQtLheHH2J4XxCQ/mo/photo.jpg?sz=128", "display_name": "CeNiEi", "link": "https://stackoverflow.com/users/11674974/ceniei"}, "edited": false, "score": 0, "creation_date": 1567051943, "post_id": 57700015, "comment_id": 101849054, "body": "@CeNiEi, you may use <code>std::begin()</code> and <code>std::end()</code> with arrays but they have to be arrays whose size is known at compile time, such as <code>int a[10]; ... sort(std::begin(a), std::end(a));</code>. That wont work if you use dynamically allocated arrays like you have."}, {"owner": {"reputation": 43, "user_id": 11674974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fq-5s9HdGVg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGnOPI-Lg9V1JBQtLheHH2J4XxCQ/mo/photo.jpg?sz=128", "display_name": "CeNiEi", "link": "https://stackoverflow.com/users/11674974/ceniei"}, "edited": false, "score": 0, "creation_date": 1567079878, "post_id": 57700015, "comment_id": 101861470, "body": "Ohhhhhh thanx very much!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1567026639, "last_edit_date": 1567026639, "creation_date": 1567026233, "answer_id": 57700015, "question_id": 57699838, "link": "https://stackoverflow.com/questions/57699838/sort-function-in-algorithm-returning-an-error/57700015#57700015", "title": "sort function in algorithm returning an error", "body": "<p><code>ptr.begin()</code> and <code>ptr.end()</code> are not correct.</p>\n\n<p><code>ptr</code> is of type <code>int*</code>. Pointers don't have member functions. You can use the following instead.</p>\n\n<pre><code>sort(ptr, ptr+n);\n</code></pre>\n\n<p>Lets' say <code>n</code> is 5. <code>ptr</code> points to the first element of an array of 5 <code>int</code>s.</p>\n\n<pre><code>ptr\n|\nv\n+---+---+---+---+---+\n|   |   |   |   |   |\n+---+---+---+---+---+\n</code></pre>\n\n<p>When you use</p>\n\n<pre><code>sort(ptr, ptr+n);\n</code></pre>\n\n<p>You are asking the function to sort all the objects that start at <code>ptr</code> and end at <code>ptr+n</code>.</p>\n\n<pre><code>ptr                 ptr+n\n|                   |\nv                   v\n+---+---+---+---+---+\n|   |   |   |   |   |\n+---+---+---+---+---+\n</code></pre>\n\n<p>Please note that the element <code>ptr[n]</code> is not valid and <code>sort</code> will not try to access it. It will access <code>ptr[n-1]</code> at most.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 11674974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fq-5s9HdGVg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGnOPI-Lg9V1JBQtLheHH2J4XxCQ/mo/photo.jpg?sz=128", "display_name": "CeNiEi", "link": "https://stackoverflow.com/users/11674974/ceniei"}, "edited": false, "score": 0, "creation_date": 1567051718, "post_id": 57700046, "comment_id": 101849020, "body": "Thank for the suggestion. Can you please recommend some good materials."}, {"owner": {"reputation": 59, "user_id": 11983682, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vb1aC4kwe_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduZ936GyUEfo--C-HXruOKU38KQA/photo.jpg?sz=128", "display_name": "Alexey Medvedev", "link": "https://stackoverflow.com/users/11983682/alexey-medvedev"}, "reply_to_user": {"reputation": 43, "user_id": 11674974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fq-5s9HdGVg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGnOPI-Lg9V1JBQtLheHH2J4XxCQ/mo/photo.jpg?sz=128", "display_name": "CeNiEi", "link": "https://stackoverflow.com/users/11674974/ceniei"}, "edited": false, "score": 0, "creation_date": 1567052363, "post_id": 57700046, "comment_id": 101849135, "body": "Classic, of course, is the &quot;Effective STL&quot; by Scott Meyers. From the modern, I, personally, like &quot;C++17 STL Cookbook&quot; by Jacek Galowicz."}, {"owner": {"reputation": 43, "user_id": 11674974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fq-5s9HdGVg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGnOPI-Lg9V1JBQtLheHH2J4XxCQ/mo/photo.jpg?sz=128", "display_name": "CeNiEi", "link": "https://stackoverflow.com/users/11674974/ceniei"}, "edited": false, "score": 0, "creation_date": 1567079903, "post_id": 57700046, "comment_id": 101861484, "body": "Thnx very much!!"}], "tags": [], "owner": {"reputation": 59, "user_id": 11983682, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vb1aC4kwe_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduZ936GyUEfo--C-HXruOKU38KQA/photo.jpg?sz=128", "display_name": "Alexey Medvedev", "link": "https://stackoverflow.com/users/11983682/alexey-medvedev"}, "is_accepted": false, "score": 0, "last_activity_date": 1567026479, "creation_date": 1567026479, "answer_id": 57700046, "question_id": 57699838, "link": "https://stackoverflow.com/questions/57699838/sort-function-in-algorithm-returning-an-error/57700046#57700046", "title": "sort function in algorithm returning an error", "body": "<p>Use vector instead of native array. First you are trying to use pointer to int instead of object. Anyway I recommend you to read some book about STL first.</p>\n"}], "owner": {"reputation": 43, "user_id": 11674974, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fq-5s9HdGVg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGnOPI-Lg9V1JBQtLheHH2J4XxCQ/mo/photo.jpg?sz=128", "display_name": "CeNiEi", "link": "https://stackoverflow.com/users/11674974/ceniei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57700015, "answer_count": 2, "score": -3, "last_activity_date": 1567047051, "creation_date": 1567025267, "last_edit_date": 1567025955, "question_id": 57699838, "link": "https://stackoverflow.com/questions/57699838/sort-function-in-algorithm-returning-an-error", "title": "sort function in algorithm returning an error", "body": "<p>i am new to c++. i am trying to sort an array using <code>algorithm</code> header file and using <code>sort</code> function. But i am getting the following error: \n<code>error: member reference base type 'int *' is not a structure or union</code>. Is there some syntax error</p>\n\n<p>i am declaring and initializing the array by this:</p>\n\n<pre><code>\n    for(int i = 0; i &lt; n; i++) {\n        cin &gt;&gt; ptr[i];\n    }\n</code></pre>\n\n<p>and this is sort function:\n<code>sort(ptr.begin(), ptr.end());</code></p>\n\n<p>edit:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;array&gt;\n\nusing namespace std;\n\nint main() {\n    int n;\n    cin &gt;&gt; n;\n\n    int* ptr = new int[n];\n\n    for(int i = 0; i &lt; n; i++) {\n        cin &gt;&gt; ptr[i];\n    }\n    sort(ptr.begin(), ptr.end());\n\n    for(int i = 0; i &lt; n; i++) {\n        cout &lt;&lt; ptr[i];\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1567024396, "post_id": 57699645, "comment_id": 101843255, "body": "<code>But how do I show that these two numbers are equal?</code> What two numbers?"}, {"owner": {"reputation": 2371, "user_id": 2337207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fc476ff5e931716b2b931179c3328e7?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2337207/alexander"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1567024473, "post_id": 57699645, "comment_id": 101843282, "body": "@eerorika 4,294,967,295 == -1 mod 2^32"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1567024512, "post_id": 57699645, "comment_id": 101843298, "body": "Those numbers aren&#39;t <i>equal</i>. They are <i>congruent</i> mod 2^32. You can show if for example by using a calculator."}, {"owner": {"reputation": 394, "user_id": 7261925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnEFB.png?s=128&g=1", "display_name": "Robur_131", "link": "https://stackoverflow.com/users/7261925/robur-131"}, "edited": false, "score": 0, "creation_date": 1567024602, "post_id": 57699645, "comment_id": 101843333, "body": "Are you asking how to calculate mod for negative number?"}, {"owner": {"reputation": 2371, "user_id": 2337207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fc476ff5e931716b2b931179c3328e7?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2337207/alexander"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1567024757, "post_id": 57699645, "comment_id": 101843395, "body": "@eerorika That&#39;s the definition of congruent. 7 mod 2 is congruent with 5 mod 2, because 7 mod 2 = 1  is equal to 5 mod 2 = 1."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1567025075, "post_id": 57699645, "comment_id": 101843514, "body": "I don&#39;t understand this question. Are you asking for a mathematical proof that -1 and 4,294,967,295 are congruent modulo 4,294,967,296? Surely that is just a simple matter of arithmetic?"}, {"owner": {"reputation": 2371, "user_id": 2337207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fc476ff5e931716b2b931179c3328e7?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2337207/alexander"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1567027042, "post_id": 57699645, "comment_id": 101844281, "body": "@Brian It&#39;s obvious now: -1 mod 2^32 = 2^32 - 1, as - 1 = 2^32*( - 1) + 2^32 -1, where 0 &lt; 2^32 -1 &lt; 2^32."}], "answers": [{"comments": [{"owner": {"reputation": 2371, "user_id": 2337207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fc476ff5e931716b2b931179c3328e7?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2337207/alexander"}, "edited": false, "score": 0, "creation_date": 1567027648, "post_id": 57699854, "comment_id": 101844459, "body": "A small correction: <code>-1 mod 4,294,967,296 ==  4,294,967,295 mod 4,294,967,296</code>, instead of <code>-1 ==  4,294,967,295 mod 4,294,957,296</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 2371, "user_id": 2337207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fc476ff5e931716b2b931179c3328e7?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2337207/alexander"}, "edited": false, "score": 0, "creation_date": 1567027948, "post_id": 57699854, "comment_id": 101844542, "body": "@Alexander the modulo of the congruence is conventionally written on the right side."}, {"owner": {"reputation": 2371, "user_id": 2337207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fc476ff5e931716b2b931179c3328e7?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2337207/alexander"}, "edited": false, "score": 0, "creation_date": 1567028293, "post_id": 57699854, "comment_id": 101844669, "body": "I see what you mean now. Thanks."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1567026474, "last_edit_date": 1567026474, "creation_date": 1567025332, "answer_id": 57699854, "question_id": 57699645, "link": "https://stackoverflow.com/questions/57699645/conv-integral-3-in-the-the-latest-c-draft/57699854#57699854", "title": "[conv.integral]/3 in the the latest C++ draft", "body": "<blockquote>\n  <p>But how do I show that [4,294,967,295 and -1] are equal?</p>\n</blockquote>\n\n<p>Those numbers aren't <em>equal</em>. They are <em>congruent</em> modulo 2<sup>32</sup> (which equals 4'294'967'296).</p>\n\n<p>To know how to show congruence, let us first take a look at the definition (<a href=\"https://en.wikipedia.org/wiki/Modular_arithmetic\" rel=\"nofollow noreferrer\">wikipedia</a>):</p>\n\n<blockquote>\n  <p>For a positive integer n, two numbers a and b are said to be congruent modulo n, if their difference a \u2212 b is an integer multiple of n (that is, if there is an integer k such that a \u2212 b = kn)</p>\n</blockquote>\n\n<p>OK, so let us calculate that difference:</p>\n\n<pre><code>d = a \u2212 b\nd = 4'294'967'295 - (-1)\nd = 4'294'967'296\n</code></pre>\n\n<p>Now, let us answer the question, is <code>d</code> a multiple of <code>n</code>? In other words, does there exist a multiplier <code>k</code> that could be multiplied with <code>d</code> so that the result is <code>n</code>.</p>\n\n<p>Answer: Yes, there is. With <code>k = 1</code>, <code>d * 1</code> is equal to 4'294'967'296 which is indeed equal to <code>n</code>. Therefore we have shown that <code>-1 \u2261 4'294'967'295 (mod 4'294'967'296</code>).</p>\n"}], "owner": {"reputation": 2371, "user_id": 2337207, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7fc476ff5e931716b2b931179c3328e7?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2337207/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 57699854, "answer_count": 1, "score": 1, "last_activity_date": 1567026474, "creation_date": 1567024196, "question_id": 57699645, "link": "https://stackoverflow.com/questions/57699645/conv-integral-3-in-the-the-latest-c-draft", "title": "[conv.integral]/3 in the the latest C++ draft", "body": "<p>I understand the mechanics to convert a <code>short</code> into an <code>unsigned int</code>. For instance, given a <code>short y = -1;</code> and we assign it to an <code>unsigned int</code> we'll get the number 4,294,967,295 which is equal to 2^32 -1. If the <code>short</code> is equal to -2 and we assign it to an <code>unsigned int</code>, we'll get 4,294,967,294 which is equal 2^32 - 2, an so forth.</p>\n\n<p>My problem is to deduce the mechanics explained above from the paragraph <a href=\"http://eel.is/c++draft/conv.integral#3\" rel=\"nofollow noreferrer\">[conv.integral]/3</a> in the latest draft:</p>\n\n<blockquote>\n  <p>Otherwise, the result is the unique value of the destination type that\n  is congruent to the source integer modulo 2^N, where N is the width of\n  the destination type.</p>\n</blockquote>\n\n<p>I can understand that 4,294,967,295 mod 2^32 = 4,294,967,295 is the unique value of the destination type that is possibly congruent to the value -1 mod 2^32 of the source type (a short). But how do I show that these two numbers are equal? </p>\n"}, {"tags": ["c++", "include", "iso"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 3, "creation_date": 1567024370, "post_id": 57699613, "comment_id": 101843245, "body": "&quot;<i>Can it be considered an official recommendation of the ISO/IEC C++ consortium, peer-reviewed and acknowledged by many experts?</i>&quot; No. Until it becomes an actual ISO standard or Technical Specification, it&#39;s just a proposal."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 5, "creation_date": 1567024708, "post_id": 57699613, "comment_id": 101843370, "body": "As far as I understand, it says <i><code>&quot;&quot;</code> is bad, because it does precisely the same thing as <code>&lt;&gt;</code></i>. Also, this paper is basically just a bunch of opinions - &quot;I like this convention, why is not everyone using it&quot;?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1567028191, "post_id": 57699613, "comment_id": 101844630, "body": "I recommend refraining from placing path names into the source file.  If the header files move, then the source needs changing.  Prefer to supply the path names to the compiler."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1567035727, "post_id": 57699613, "comment_id": 101846240, "body": "I prefer placing path names into the source files.  If the header is moved, the compiler will notify the user.  For me, any search that finds &#39;the missing header&#39; has a chance to also find any other header files of the same name.  On a large system I worked on, there were 5 copies of doo.hpp (3 different versions), providing a 80% chance I modified the wrong one on my first try, despite being in the &#39;dominant&#39; version.  I prefer &#39;relative path&#39;s."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1567104822, "post_id": 57699613, "comment_id": 101874276, "body": "I would like <code>#include &gt;header.hpp&lt;</code> which would exclude searching the standard locations if not found in the project specific locations :-)"}], "answers": [{"tags": [], "owner": {"reputation": 2091, "user_id": 5226287, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/27CtT.png?s=128&g=1", "display_name": "Georg P.", "link": "https://stackoverflow.com/users/5226287/georg-p"}, "is_accepted": true, "score": 0, "last_activity_date": 1568051776, "creation_date": 1568051776, "answer_id": 57858994, "question_id": 57699613, "link": "https://stackoverflow.com/questions/57699613/including-c-headers-vs-style-official-iso-iec-opinion/57858994#57858994", "title": "Including C++ headers, &quot;...&quot; vs. &lt;...&gt; style, official ISO/IEC opinion?", "body": "<p>I finally understood. The author of the paper suggests to use only include paths that are specified with the <code>-I</code> flag to the compiler, but not to use any relative search paths. This makes sense if the relative include path is always given in the <code>#include</code> statement, and only one <code>-I</code> flag needs to be given for the root of the project.</p>\n\n<p>Anyway, it is a highly interesting paper that quite changed my understanding of how to structure C++ components. I'd wish to see more like this from the committee.</p>\n"}], "owner": {"reputation": 2091, "user_id": 5226287, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/27CtT.png?s=128&g=1", "display_name": "Georg P.", "link": "https://stackoverflow.com/users/5226287/georg-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 57858994, "answer_count": 1, "score": 0, "last_activity_date": 1568051776, "creation_date": 1567024039, "last_edit_date": 1567108941, "question_id": 57699613, "link": "https://stackoverflow.com/questions/57699613/including-c-headers-vs-style-official-iso-iec-opinion", "title": "Including C++ headers, &quot;...&quot; vs. &lt;...&gt; style, official ISO/IEC opinion?", "body": "<p>I know, this is an old question that has been asked many times <a href=\"https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename\">before</a>. I agree with the common answer that <code>#include &lt;filename&gt;</code> should be used for system headers and <code>#include \"filename\"</code> should be used for project-local headers.</p>\n\n<p>However, now I found <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p1204r0.html\" rel=\"nofollow noreferrer\">this paper</a> from the ISO/IEC C++ Tools Working Group, which states the following:</p>\n\n<blockquote>\n  <p>All headers within a project should be included using the <code>&lt;&gt;</code> style inclusion and contain the project name as a directory prefix. And all headers means all headers public, private, or implementation detail, in executables or in libraries.</p>\n</blockquote>\n\n<p>They also give an explanation:</p>\n\n<blockquote>\n  <p>The problem with the <code>\"\"</code> style inclusion is if the header is not found relative to the including file, most implementations will continue looking for it in the include search paths, the same as for <code>&lt;&gt;</code>. As a result, if the header is not present in the right place (for example, because it was mistakenly not listed as to be installed), chances are that a completely unrelated header with the same name will be found and included. Needless to say, debugging situations like these is unpleasant.</p>\n</blockquote>\n\n<p>I don't understand this. Why does this problem not occur with the <code>&lt;&gt;</code> style?</p>\n\n<p>Bonus question: What's the status of such a paper anyway? Can it be considered an official recommendation of the ISO/IEC C++ consortium, peer-reviewed and acknowledged by many experts? Or is it just a proposal by someone in order to trigger a discussion?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1567023396, "post_id": 57699482, "comment_id": 101842888, "body": "<code>~Sys();</code> is the destructor."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 3, "creation_date": 1567023448, "post_id": 57699482, "comment_id": 101842906, "body": "You may want to pick up <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a good book on modern C++ (C++11 and up)</a>. To help you search: from top to bottom, you have a constructor, copy constructor, copy assignment operator and destructor. Copy operations are <a href=\"https://en.cppreference.com/w/cpp/language/function#Deleted_functions\" rel=\"nofollow noreferrer\">deleted</a> - they would normally be generated by the compiler, this keyword prevents it and disallows copying of the object in any way."}, {"owner": {"reputation": 843, "user_id": 1504247, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/j43X7.jpg?s=128&g=1", "display_name": "vvy", "link": "https://stackoverflow.com/users/1504247/vvy"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1567023691, "post_id": 57699482, "comment_id": 101842990, "body": "@Yksisarvinen Yeah, I realize its about time to do that. Had been trying to rush through some code (that I didn&#39;t write). Thanks!"}, {"owner": {"reputation": 843, "user_id": 1504247, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/j43X7.jpg?s=128&g=1", "display_name": "vvy", "link": "https://stackoverflow.com/users/1504247/vvy"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1567024707, "post_id": 57699482, "comment_id": 101843369, "body": "@Yksisarvinen Is it ok to say that the object will be a <code>Singleton</code> with only one instance?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1567024943, "post_id": 57699482, "comment_id": 101843456, "body": "@vvy Nope. Given the code you&#39;ve shown, you can create as many objects as you like using it&#39;s constructor. But you cannot pass them around by value - you&#39;d have to move them."}, {"owner": {"reputation": 843, "user_id": 1504247, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/j43X7.jpg?s=128&g=1", "display_name": "vvy", "link": "https://stackoverflow.com/users/1504247/vvy"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1567025204, "post_id": 57699482, "comment_id": 101843559, "body": "@Yksisarvinen I see, <code>copy</code> is prohibited but a new instance can be created. What purpose does it serve, can you suggest a use case for <code>copy</code> prohibition?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1567025589, "post_id": 57699482, "comment_id": 101843731, "body": "There are quite a few objects in standard library that you cannot copy, for example standard streams (like <code>std::fstream</code> or <code>std::cout</code>). They hold a direct handle to some system resource - what would be the meaning of &quot;copy&quot;? Should they share that handle? What if they both try to use it at the same time? What if one of them returns the resource to the sytem, but the other tries to use it? Same situation is with <code>std::unique_ptr</code> - as the name suggests, it is the only owner of object allocated on the heap. There can be no other <code>unique_ptr</code> pointing to the same object."}, {"owner": {"reputation": 843, "user_id": 1504247, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/j43X7.jpg?s=128&g=1", "display_name": "vvy", "link": "https://stackoverflow.com/users/1504247/vvy"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1567026675, "post_id": 57699482, "comment_id": 101844134, "body": "@Yksisarvinen Makes sense. Thankyou!"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1567033175, "post_id": 57699482, "comment_id": 101845787, "body": "@Yksisarvinen the deleted copy constructor / assignment suppresses the default moves too"}], "answers": [{"tags": [], "owner": {"reputation": 5994, "user_id": 5698738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4tnZ9.jpg?s=128&g=1", "display_name": "Aganju", "link": "https://stackoverflow.com/users/5698738/aganju"}, "is_accepted": false, "score": 0, "last_activity_date": 1567023500, "creation_date": 1567023500, "answer_id": 57699520, "question_id": 57699482, "link": "https://stackoverflow.com/questions/57699482/is-this-an-object-destructor/57699520#57699520", "title": "Is this an object destructor?", "body": "<p>Line 2 is a copy constructor, and setting it to <code>= delete</code> means it will not be available. Effectively, the object cannot be copied.</p>\n\n<p>Line 3 is the copy assignment operator, same effect - the object is not allowed to be copy-assigned.</p>\n\n<p>If this is unclear to you, you should read a good book about C++.</p>\n"}], "owner": {"reputation": 843, "user_id": 1504247, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/j43X7.jpg?s=128&g=1", "display_name": "vvy", "link": "https://stackoverflow.com/users/1504247/vvy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1567342586, "creation_date": 1567023283, "question_id": 57699482, "link": "https://stackoverflow.com/questions/57699482/is-this-an-object-destructor", "title": "Is this an object destructor?", "body": "<p>I am trying to understand a C++ code. The Following is written in the <code>*.h</code> file </p>\n\n<pre><code>Sys(int w, int h, Eigen::Matrix3f K, bool enableSys = true);\nSys(const Sys&amp;) = delete;\nSys&amp; operator=(const Sys&amp;) = delete;\n~Sys();\n</code></pre>\n\n<p>What is the interpretation of <strong>Line 2</strong> and <strong>Line 3</strong>?</p>\n\n<p>Are those destructors?<br>\nWhy are they needed?<br>\nIs this a good practice?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567022385, "post_id": 57699252, "comment_id": 101842479, "body": "In <code>Qt</code> you may want to use signals and slots for this if the data you want to transfer is not GBs."}, {"owner": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567022476, "post_id": 57699252, "comment_id": 101842518, "body": "I am emitting a signal. emit updatecounter(arg1.toInt()); the worker thread receives it except it doesn&#39;t reset the loop. in the process method."}, {"owner": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567022677, "post_id": 57699252, "comment_id": 101842609, "body": "connect(this,&amp;MainWindow::updatecounter, m_Worker, &amp;Worker::updatecounter, Qt::QueuedConnection);"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567022741, "post_id": 57699252, "comment_id": 101842638, "body": "If your thread is executing the loop in <code>Worker::process()</code> your slot will not be called. It will only be called when the thread is not executing any other function."}, {"owner": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567023348, "post_id": 57699252, "comment_id": 101842869, "body": "How then can i update the variables inside process?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1567023410, "post_id": 57699252, "comment_id": 101842892, "body": "I think you want to divide up process to multiple slots. This is a difference between event based programming and procedural programming."}], "answers": [{"comments": [{"owner": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "edited": false, "score": 0, "creation_date": 1567027883, "post_id": 57699544, "comment_id": 101844526, "body": "I created a timer on the mainwindow and used that to call functions in the worker thread, application seems to work as intended now, but is this the correct way?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567040409, "post_id": 57699544, "comment_id": 101847027, "body": "You probably should have created a timer on your worker thread. Calling functions from the mainwindow would happen in the mainwindow&#39;s thread."}], "tags": [], "owner": {"reputation": 24802, "user_id": 232918, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b5897762377de1c8ffb9a98673262e91?s=128&d=identicon&r=PG", "display_name": "doron", "link": "https://stackoverflow.com/users/232918/doron"}, "is_accepted": true, "score": 2, "last_activity_date": 1567023648, "creation_date": 1567023648, "answer_id": 57699544, "question_id": 57699252, "link": "https://stackoverflow.com/questions/57699252/qt-how-to-pass-data-from-a-gui-to-another-thread/57699544#57699544", "title": "Qt How to pass data from a GUI to another thread", "body": "<p>You problem is:</p>\n\n<pre><code>// This loop simulates the actual work\nfor (auto i = counter;  state == RUNNING;  ++i)\n{\n    QThread::msleep(100);\n    if (isCancelled())\n    {\n         break;\n    }\n\n    qDebug() &lt;&lt; i;\n}\n</code></pre>\n\n<p>This is effectively an infinite loop. The problem is while your thread is stuck in this loop it never returns to the <code>Qthread::exec</code> (your main event loop) which is what processes all the signals and slots on the thread. </p>\n\n<p>In Qt you should always return back to your event loop as quickly as possible. Sleeps are a big no-no. For periodic work use a <code>QTimer</code>.</p>\n"}], "owner": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1567048067, "accepted_answer_id": 57699544, "answer_count": 1, "score": -3, "last_activity_date": 1567023648, "creation_date": 1567022077, "question_id": 57699252, "link": "https://stackoverflow.com/questions/57699252/qt-how-to-pass-data-from-a-gui-to-another-thread", "closed_reason": "Not suitable for this site", "title": "Qt How to pass data from a GUI to another thread", "body": "<p>I have an application that can start pause and cancel the thread.\ni would like to pass data from the main gui to the thread. \nin this example i have a spinbox. \ni wish to reset the counter in the worker thread everytime i change the spin box. </p>\n\n<p>for some reason i can't seem to update the counter variable in the worker thread. \nwhat am i missing in my program?</p>\n\n<p>MAINWINDOW.h</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n    #define MAINWINDOW_H\n\n    #include &lt;QMainWindow&gt;\n    #include &lt;QThread&gt;\n\n    #include \"worker.h\"\n\n    namespace Ui {\n    class MainWindow;\n    }\n\n    class MainWindow : public QMainWindow\n    {\n        Q_OBJECT\n\n    signals:\n        void updatecounter(int val);\n\n    public:\n        explicit MainWindow(QWidget *parent = nullptr);\n        ~MainWindow();\n\n    private slots:\n\n\n        void on_Time_valueChanged(const QString &amp;arg1);\n\n        void on_Start_clicked();\n\n        void on_Stop_clicked();\n\n        void on_Pause_clicked();\n\n    private:\n        Ui::MainWindow *ui;\n        QThread        *m_Thread;\n        Worker         *m_Worker;\n\n    };\n\n    #endif // MAINWINDOW_H\n</code></pre>\n\n<p>WORKER.h</p>\n\n<pre><code>#ifndef WORKER_H\n#define WORKER_H\n\n#include &lt;QObject&gt;\n#include &lt;QMutex&gt;\n#include &lt;QThread&gt;\n#include &lt;QDebug&gt;\n#include &lt;QEventLoop&gt;\n#include &lt;QAbstractEventDispatcher&gt;\n\nclass Worker : public QObject\n{\n    Q_OBJECT\n\npublic:\n    Worker();\n    ~Worker();\n\npublic slots:\n    void process();\n\nsignals:\n    void started();\n    void finished();\n\n   public slots:\n\n       void updatecounter(int val)\n       {\n           counter = val;\n       }\n\n       void pause()\n       {\n           auto const dispatcher = QThread::currentThread()-&gt;eventDispatcher();\n\n           if (!dispatcher)\n           {\n               qCritical() &lt;&lt; \"thread with no dispatcher\";\n               return;\n           }\n\n           if (state != RUNNING)\n               return;\n\n           state = PAUSED;\n           qDebug() &lt;&lt; this;\n           qDebug() &lt;&lt; \"paused\";\n\n           do\n           {\n               dispatcher-&gt;processEvents(QEventLoop::WaitForMoreEvents);\n           } while (state == PAUSED);\n       }\n\n       void resume()\n       {\n           if (state == PAUSED)\n           {\n               state = RUNNING;\n               qDebug() &lt;&lt; this;\n               qDebug() &lt;&lt; \"resumed\";\n\n               updatecounter(0);\n           }\n       }\n\n       void cancel()\n       {\n           if (state != IDLE)\n           {\n               state = IDLE;\n               qDebug() &lt;&lt; this;\n               qDebug() &lt;&lt; \"cancelled\";\n           }\n       }\n\n   protected:\n\n       enum State { IDLE, RUNNING, PAUSED };\n       State state = IDLE;\n       int counter = 0;\n       bool isCancelled()\n       {\n           auto const dispatcher = QThread::currentThread()-&gt;eventDispatcher();\n\n           if (!dispatcher)\n           {\n               qCritical() &lt;&lt; \"thread with no dispatcher\";\n               return false;\n           }\n\n           dispatcher-&gt;processEvents(QEventLoop::AllEvents);\n\n           return state == IDLE;\n       }\n};\n\n#endif // WORKER_H\n</code></pre>\n\n<p>MAINWINDOW.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\n#include &lt;QDebug&gt;\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n\n    qDebug() &lt;&lt; \"main thread\";\n\n    m_Thread = new QThread();\n\n    ui-&gt;Start-&gt;setEnabled(true);\n    ui-&gt;Pause-&gt;setEnabled(false);\n    ui-&gt;Stop-&gt;setEnabled(false);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\nvoid MainWindow::on_Time_valueChanged(const QString &amp;arg1)\n{\n    emit updatecounter(arg1.toInt());\n\n\n    //auto const m = m_Worker-&gt;metaObject();\n    //m-&gt;invokeMethod(m_Worker, \"updatecounter\",Qt::QueuedConnection,Q_ARG(int,arg1.toInt()));\n}\n\nvoid MainWindow::on_Start_clicked()\n{\n    if(!m_Thread-&gt;isRunning())\n    {\n        m_Thread = new QThread();\n        m_Worker = new Worker();\n        m_Worker-&gt;moveToThread(m_Thread);\n\n        connect(m_Thread, &amp;QThread::started, m_Worker, &amp;Worker::process);\n        connect(this,&amp;MainWindow::updatecounter, m_Worker, &amp;Worker::updatecounter, Qt::QueuedConnection);\n        connect(m_Worker, &amp;Worker::finished, m_Thread, &amp;QThread::quit);\n        m_Thread-&gt;start();\n\n    }\n    else\n    {\n        auto const m = m_Worker-&gt;metaObject();\n        m-&gt;invokeMethod(m_Worker, \"resume\");\n    }\n\n    ui-&gt;Start-&gt;setEnabled(false);\n    ui-&gt;Pause-&gt;setEnabled(true);\n    ui-&gt;Stop-&gt;setEnabled(true);\n}\n\nvoid MainWindow::on_Stop_clicked()\n{\n    auto const m = m_Worker-&gt;metaObject();\n    m-&gt;invokeMethod(m_Worker, \"cancel\");\n    ui-&gt;Start-&gt;setEnabled(true);\n    ui-&gt;Pause-&gt;setEnabled(false);\n    ui-&gt;Stop-&gt;setEnabled(false);\n\n}\n\nvoid MainWindow::on_Pause_clicked()\n{\n    auto const m = m_Worker-&gt;metaObject();\n    m-&gt;invokeMethod(m_Worker, \"pause\");\n    ui-&gt;Start-&gt;setEnabled(true);\n    ui-&gt;Pause-&gt;setEnabled(false);\n    ui-&gt;Stop-&gt;setEnabled(true);\n}\n</code></pre>\n\n<p>WORKER.cpp</p>\n\n<pre><code>#include \"worker.h\"\n\n#include &lt;QDebug&gt;\n#include &lt;QThread&gt;\n#include &lt;QTimer&gt;\n\nWorker::Worker()\n{\n    qDebug() &lt;&lt; this &lt;&lt; \" worker thread started\";\n}\n\nWorker::~Worker()\n{\n    qDebug() &lt;&lt; \"worker thread finished\";\n}\n\nvoid Worker::process()\n{\n    if (state == PAUSED)\n               // treat as resume\n               state = RUNNING;\n\n           if (state == RUNNING)\n               return;\n\n           state = RUNNING;\n           qDebug() &lt;&lt; \"started\";\n           emit started();\n\n           // This loop simulates the actual work\n           for (auto i = counter;  state == RUNNING;  ++i)\n           {\n               QThread::msleep(100);\n               if (isCancelled())\n               {\n                   break;\n               }\n\n               qDebug() &lt;&lt; i;\n           }\n\n           qDebug() &lt;&lt; this;\n           qDebug() &lt;&lt; \"finished\";\n           emit finished();\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "build", "cmake", "glew"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1567022365, "post_id": 57699098, "comment_id": 101842467, "body": "Do you use glew in static or dynamic library? If you use a static library, then you&#39;ve to set the preprocessor definition <code>GLEW_STATIC</code>."}, {"owner": {"reputation": 75, "user_id": 5730738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0670250f643e5fa7f3b266ff3c2768f6?s=128&d=identicon&r=PG&f=1", "display_name": "lutrarutra", "link": "https://stackoverflow.com/users/5730738/lutrarutra"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1567022597, "post_id": 57699098, "comment_id": 101842579, "body": "I am trying to build it from source. I downloaded zip file from glew&#39;s website and unpacked it into my project directory."}, {"owner": {"reputation": 457, "user_id": 9584001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IxBn4.png?s=128&g=1", "display_name": "Rotartsi", "link": "https://stackoverflow.com/users/9584001/rotartsi"}, "edited": false, "score": 0, "creation_date": 1567191712, "post_id": 57699098, "comment_id": 101903999, "body": "You could try manually linking GLEW instead of using <code>find_package</code> for a quick and dirty fix."}], "answers": [{"tags": [], "owner": {"reputation": 894, "user_id": 2912313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d436dd0f294401380c80c1483b38347?s=128&d=identicon&r=PG&f=1", "display_name": "mauricio777", "link": "https://stackoverflow.com/users/2912313/mauricio777"}, "is_accepted": false, "score": 2, "last_activity_date": 1577193068, "creation_date": 1577193068, "answer_id": 59469346, "question_id": 57699098, "link": "https://stackoverflow.com/questions/57699098/not-able-to-link-glew-with-cmake/59469346#59469346", "title": "Not able to link Glew with Cmake", "body": "<p>I was able to include GLEW with</p>\n\n<p><code>brew install glew</code> (This step builds glew and installs it on your system, so are you saying that this is failing? Otherwise, there is no further building of glew required.)</p>\n\n<p>And then in my top level CMakeLists.txt</p>\n\n<p><code>find_package(GLEW 2.0 REQUIRED)</code></p>\n\n<p>And in the CMakeLists.txt that setup my target for my main.cpp that needed to <code>#include \"GL/glew.h\"</code> I added the line:</p>\n\n<p><code>target_link_libraries(${MAIN} GLEW::GLEW)</code></p>\n\n<p>${MAIN} being a variable I set for my main target name.</p>\n"}], "owner": {"reputation": 75, "user_id": 5730738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0670250f643e5fa7f3b266ff3c2768f6?s=128&d=identicon&r=PG&f=1", "display_name": "lutrarutra", "link": "https://stackoverflow.com/users/5730738/lutrarutra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1577193068, "creation_date": 1567021310, "question_id": 57699098, "link": "https://stackoverflow.com/questions/57699098/not-able-to-link-glew-with-cmake", "title": "Not able to link Glew with Cmake", "body": "<p>I am getting into OpenGL with c++ using VScode on OS X. I have installed glfw and glew with brew. I have succesfully build glfw library with cmake and I can open a window, but when I try to build glew it always gives me an error.</p>\n\n<p>Here is my CMakeLists.txt</p>\n\n<pre><code>cmake_minimum_required (VERSION 3.5)\nproject (test)\n\nset(CMAKE_CXX_STANDARD 11)\n\nset(GLFW_BUILD_DOCS OFF CACHE BOOL \"\" FORCE)\nset(GLFW_BUILD_TESTS OFF CACHE BOOL \"\" FORCE)\nset(GLFW_BUILD_EXAMPLES OFF CACHE BOOL \"\" FORCE)\n\nadd_executable(test\nsrc/main.cpp\n)\n\nadd_subdirectory(glfw)\n\nfind_package(GLEW REQUIRED)\nfind_package(OpenGL REQUIRED)\n\nif (GLEW_FOUND)\n    include_directories(glew/include)\nendif()\n\nif (APPLE)\n    target_link_libraries(test ${GLEW_LIBRARY})\n    target_link_libraries(test \"-framework GLUT\")\n    target_link_libraries(test \"-framework OpenGL\")\nendif()\n\ntarget_link_libraries(test glfw ${GLEW_LIBRARIES})\n</code></pre>\n\n<p>It gives me this error when I try to 'make' it:</p>\n\n<pre><code>undefined symbols for architecture x86_64:\"_glewInit\", referenced from: _main in main.cpp.o. \n</code></pre>\n"}, {"tags": ["c++", "windows", "etw", "perfview"], "comments": [{"owner": {"reputation": 24288, "user_id": 1466046, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Fa7gP.png?s=128&g=1", "display_name": "magicandre1981", "link": "https://stackoverflow.com/users/1466046/magicandre1981"}, "edited": false, "score": 0, "creation_date": 1567170979, "post_id": 57698917, "comment_id": 101895040, "body": "<a href=\"https://github.com/microsoft/perfview/blob/97b28d2549d23aec5e8765a76a1374aff74b27e9/src/TraceEvent/RegisteredTraceEventParser.cs#L630\" rel=\"nofollow noreferrer\">perfview/traceevent uses 9000</a> for buffersize, try this."}, {"owner": {"reputation": 24288, "user_id": 1466046, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Fa7gP.png?s=128&g=1", "display_name": "magicandre1981", "link": "https://stackoverflow.com/users/1466046/magicandre1981"}, "edited": false, "score": 0, "creation_date": 1567284191, "post_id": 57698917, "comment_id": 101921998, "body": "have you tried a larger buffer value?"}, {"owner": {"reputation": 109, "user_id": 4034400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab26765b90b4e816e505697a9ed09b7f?s=128&d=identicon&r=PG", "display_name": "000Camus000", "link": "https://stackoverflow.com/users/4034400/000camus000"}, "reply_to_user": {"reputation": 24288, "user_id": 1466046, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Fa7gP.png?s=128&g=1", "display_name": "magicandre1981", "link": "https://stackoverflow.com/users/1466046/magicandre1981"}, "edited": false, "score": 0, "creation_date": 1578619753, "post_id": 57698917, "comment_id": 105507310, "body": "I tried both, a larger size and nothing, I am sure there is something else going on that is not documented."}, {"owner": {"reputation": 2682, "user_id": 284314, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9d18f8aefa9efe881ec69fc99d04422f?s=128&d=identicon&r=PG", "display_name": "Ovidiu Buligan", "link": "https://stackoverflow.com/users/284314/ovidiu-buligan"}, "edited": false, "score": 0, "creation_date": 1594280164, "post_id": 57698917, "comment_id": 111071974, "body": "@000Camus000 if you found out the solution please comment since tehre is a <code>TDHLoadManifest</code> function that says in the docs is required  for custom manifests : <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/tdh/nf-tdh-tdhloadmanifest\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/api/tdh/&hellip;</a>"}], "owner": {"reputation": 109, "user_id": 4034400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab26765b90b4e816e505697a9ed09b7f?s=128&d=identicon&r=PG", "display_name": "000Camus000", "link": "https://stackoverflow.com/users/4034400/000camus000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1587157674, "creation_date": 1567020489, "question_id": 57698917, "link": "https://stackoverflow.com/questions/57698917/tdhgeteventinformation-return-1168-not-found-how-perfview-can-get-the-info", "title": "TdhGetEventInformation return 1168 (NOT FOUND) - How PerfView can get the info?", "body": "<p>I have a ETL file and I am trying to parse it with OpenTrace and get the information with TdhGetEventInformation when I get the callback EventRecordCallback. </p>\n\n<p>However, for the provider that I need, it always return 1168 (NOT FOUND). The only way it works is by loading the manifest with TdhLoadManifest, this way I get all the information. But I don't understand how  WPA and PerfView can get all the events for my provider even when I am not providing the manifest...</p>\n\n<p>I found that the TDH.dll has some undocumented functions that PerfView uses like TdhGetAllEventsInformation, I tried to use this function by loading the DLL with LoadLibraryEx, the function again return 1168..</p>\n\n<p>Following code is mostly by Microsoft samples:</p>\n\n<pre><code>DWORD status = ERROR_SUCCESS;\nDWORD BufferSize = 0;\nstatus = TdhGetEventInformation(pEvent, 0, nullptr, pInfo, &amp;BufferSize);\n\nif (1168 == status)\n    return status; // THIS \n\nif (ERROR_INSUFFICIENT_BUFFER == status)\n{\n    pInfo = (TRACE_EVENT_INFO*)malloc(BufferSize);\n    ZeroMemory(pInfo, BufferSize);\n    if (pInfo == NULL)\n    {\n        LogPrintError(L\"Failed to allocate memory for event info (size=%lu).\\n\", BufferSize);\n        status = ERROR_OUTOFMEMORY;\n        goto cleanup;\n    }\n\n    // Retrieve the event metadata.\n\n    status = TdhGetEventInformation(pEvent, 0, NULL, pInfo, &amp;BufferSize);\n}\n</code></pre>\n\n<p>I really want to know how PerfView get this information without the manifest. So far I see they use TdhGetAllEventsInformation but I keep receiving 1168, I am missing something?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1567020273, "post_id": 57698839, "comment_id": 101841673, "body": "Where is the instantiation of <code>a</code> actually? Your example is incomplete."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1567020345, "post_id": 57698839, "comment_id": 101841696, "body": "That&#39;s exactly the same for <code>int f(); int const&amp; n = f();</code>..."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1567020465, "post_id": 57698839, "comment_id": 101841741, "body": "Have a look at <a href=\"https://stackoverflow.com/a/2784304/1312382\">this answer</a>. Context of the question there actually is a bit different, but the answer fits for your question as well (prolongation of life-time via const local references)."}, {"owner": {"reputation": 366, "user_id": 7492073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b011b9767f7270961c2a19ebd889102?s=128&d=identicon&r=PG&f=1", "display_name": "Gils", "link": "https://stackoverflow.com/users/7492073/gils"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1567020499, "post_id": 57698839, "comment_id": 101841756, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 Thanks. fixed."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1567020741, "post_id": 57698839, "comment_id": 101841843, "body": "In this case <code>r</code> refers to the pointer. The pointer points at an instance of <code>A::val</code>"}, {"owner": {"reputation": 366, "user_id": 7492073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b011b9767f7270961c2a19ebd889102?s=128&d=identicon&r=PG&f=1", "display_name": "Gils", "link": "https://stackoverflow.com/users/7492073/gils"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1567035136, "post_id": 57698839, "comment_id": 101846140, "body": "@user4581301 yes indeed, but the pointer is defined implicitly by the compiler (and not by me) and is hidden in the stack."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1567039953, "post_id": 57698839, "comment_id": 101846947, "body": "Hidden somewhere, probably the stack. Might sit in a register since you&#39;re not taking the pointer&#39;s address. Automatic storage can get a bit weird."}], "answers": [{"comments": [{"owner": {"reputation": 63570, "user_id": 155137, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/00f9d78517e7e17837e0e7ac227305ca?s=128&d=identicon&r=PG", "display_name": "Martijn Courteaux", "link": "https://stackoverflow.com/users/155137/martijn-courteaux"}, "edited": false, "score": 0, "creation_date": 1567020580, "post_id": 57698903, "comment_id": 101841780, "body": "+1 I didn&#39;t know this was possible. But this means that the usage/functionality of a const reference to a temporary are <b>exactly the same</b> as just copying the value? Except that you cannot overwrite the reference, where just storing the object would allow you to do so?"}, {"owner": {"reputation": 366, "user_id": 7492073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b011b9767f7270961c2a19ebd889102?s=128&d=identicon&r=PG&f=1", "display_name": "Gils", "link": "https://stackoverflow.com/users/7492073/gils"}, "edited": false, "score": 0, "creation_date": 1567020666, "post_id": 57698903, "comment_id": 101841811, "body": "@Igor G thanks for the super quick response. I checked the stack the &quot;hidden&quot; variable is indeed there. I just wondered if it is legal."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 366, "user_id": 7492073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b011b9767f7270961c2a19ebd889102?s=128&d=identicon&r=PG&f=1", "display_name": "Gils", "link": "https://stackoverflow.com/users/7492073/gils"}, "edited": false, "score": 0, "creation_date": 1567020767, "post_id": 57698903, "comment_id": 101841854, "body": "@Gils Beware that this only works in certain situations. Only <code>const T &amp;</code> allow it and only local references. For example, a reference type class member won&#39;t work this way."}, {"owner": {"reputation": 1484, "user_id": 11102572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c83b6b17eb13d31ab7c5d1ac554ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Igor G", "link": "https://stackoverflow.com/users/11102572/igor-g"}, "reply_to_user": {"reputation": 63570, "user_id": 155137, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/00f9d78517e7e17837e0e7ac227305ca?s=128&d=identicon&r=PG", "display_name": "Martijn Courteaux", "link": "https://stackoverflow.com/users/155137/martijn-courteaux"}, "edited": false, "score": 0, "creation_date": 1567020955, "post_id": 57698903, "comment_id": 101841926, "body": "@MartijnCourteaux, I would say that const reference can help <i>avoiding</i> making a copy. Consider passing a temporary object to <code>f(Type)</code> and <code>f(const Type&amp;)</code>."}, {"owner": {"reputation": 366, "user_id": 7492073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b011b9767f7270961c2a19ebd889102?s=128&d=identicon&r=PG&f=1", "display_name": "Gils", "link": "https://stackoverflow.com/users/7492073/gils"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567021167, "post_id": 57698903, "comment_id": 101842007, "body": "@Fran&#231;ois Andrieux I don&#39;t think I ever used this feature (at least not in this way). That&#39;s why it looks so wrong to me. I find the reference mark redundant in this case. I was just surprised it is legal."}, {"owner": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "reply_to_user": {"reputation": 366, "user_id": 7492073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b011b9767f7270961c2a19ebd889102?s=128&d=identicon&r=PG&f=1", "display_name": "Gils", "link": "https://stackoverflow.com/users/7492073/gils"}, "edited": false, "score": 0, "creation_date": 1567022339, "post_id": 57698903, "comment_id": 101842453, "body": "@Gils You&#39;re using it (maybe without knowing) everytime you pass a <code>&quot;text&quot;</code> to a function requiring a <code>const std::string&amp;</code>, a <code>std::string</code> temporary gets created and it&#39;s lifetime is extended for the duration of the function call."}, {"owner": {"reputation": 366, "user_id": 7492073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b011b9767f7270961c2a19ebd889102?s=128&d=identicon&r=PG&f=1", "display_name": "Gils", "link": "https://stackoverflow.com/users/7492073/gils"}, "reply_to_user": {"reputation": 963, "user_id": 7471267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4GGWfiRBWAY/AAAAAAAAAAI/AAAAAAAAAFo/awzT9uvFc5E/photo.jpg?sz=128", "display_name": "Mirko", "link": "https://stackoverflow.com/users/7471267/mirko"}, "edited": false, "score": 0, "creation_date": 1567035013, "post_id": 57698903, "comment_id": 101846118, "body": "@Mirko Indeed. Coming to think about, I use it a lot. Each time I pass an rvalue to a const reference parameter. But never like in this example. I still find this use of reference like in this example, useless."}], "tags": [], "owner": {"reputation": 1484, "user_id": 11102572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c83b6b17eb13d31ab7c5d1ac554ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Igor G", "link": "https://stackoverflow.com/users/11102572/igor-g"}, "is_accepted": false, "score": 6, "last_activity_date": 1567020426, "creation_date": 1567020426, "answer_id": 57698903, "question_id": 57698839, "link": "https://stackoverflow.com/questions/57698839/returning-a-pointer-to-a-member-and-assigning-it-to-a-reference-is-it-legal/57698903#57698903", "title": "Returning a pointer to a member and assigning it to a reference. Is it legal?", "body": "<p>There's one special case with references: a const reference is allowed to be bound to a temporary object, and it extends the lifetime of that temporary. Non-const references can't do this magic.</p>\n\n<p>In your code, <code>GetVal()</code> returns a pointer by value, that is it returns a temporary pointer object. When used as a const reference initializer, the compiler stores that pointer value somewhere (most likely in the current stack frame) and binds the reference to that location.</p>\n"}], "owner": {"reputation": 366, "user_id": 7492073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b011b9767f7270961c2a19ebd889102?s=128&d=identicon&r=PG&f=1", "display_name": "Gils", "link": "https://stackoverflow.com/users/7492073/gils"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "closed_date": 1567020729, "answer_count": 1, "score": 2, "last_activity_date": 1567020461, "creation_date": 1567020069, "last_edit_date": 1567020461, "question_id": 57698839, "link": "https://stackoverflow.com/questions/57698839/returning-a-pointer-to-a-member-and-assigning-it-to-a-reference-is-it-legal", "closed_reason": "Duplicate", "title": "Returning a pointer to a member and assigning it to a reference. Is it legal?", "body": "<p>I'm reviewing code and which looks kind of wrong to me.\nI know it can be written in another way and I know it is probably useless to write it this way.\nStill, I was surprised that the compiler didn't generate any error/warning so I wonder if it is legal and why.</p>\n\n<pre><code>struct A\n{\n    int val = 0;\n    int* GetVal() {\n        return &amp;val;\n    }\n};\n\nvoid main()\n{\n    A a;\n    int* const&amp; r = a.GetVal();\n}\n</code></pre>\n\n<p>AFAIK, a reference represents a real variable. The reference and the variable should both have the same memory address.\nIn this example, there is no variable holding the address (maybe a temporary?) so which variable does <code>r</code> refer to?</p>\n\n<p>If I remove the <code>const</code> it doesn't compile.</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1567022690, "post_id": 57698803, "comment_id": 101842618, "body": "You should post your CMakeLists.txt configuration too."}, {"owner": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1567022911, "post_id": 57698803, "comment_id": 101842708, "body": "Check my updated question @Romen."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567023292, "post_id": 57698803, "comment_id": 101842843, "body": "I think you don&#39;t have your mingw binaries in your system PATH environment variable."}, {"owner": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567023591, "post_id": 57698803, "comment_id": 101842961, "body": "When I run the command <code>echo %PATH%</code> one of the elements i <code>C:\\MinGW\\bin;</code> which stores the binaries, right @drescherjm?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567023744, "post_id": 57698803, "comment_id": 101843010, "body": "That is likely correct, Is there are make program in that folder?"}, {"owner": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "edited": false, "score": 0, "creation_date": 1567024061, "post_id": 57698803, "comment_id": 101843112, "body": "No there isn&#39;t."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567025034, "post_id": 57698803, "comment_id": 101843497, "body": "Then you need to download a complete mingw build."}, {"owner": {"reputation": 2653, "user_id": 1028434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b89a8b4efdb83da69d6cc93caac7?s=128&d=identicon&r=PG", "display_name": "fdk1342", "link": "https://stackoverflow.com/users/1028434/fdk1342"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1567077554, "post_id": 57698803, "comment_id": 101860070, "body": "@drescherjm My install of mingw-w64 <code>x86_64-8.1.0-release-win32-seh-rt_v6-rev0.7z</code> contains <code>mingw32-make.exe</code>.  If you are using stuff from MinGW installer then I think you have to install a subset of MSYS which should include <code>make</code>.  Personally I prefer mingw-w64 running in a git for windows shell then over mingw/msys."}], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "edited": false, "score": 0, "creation_date": 1567022418, "post_id": 57699183, "comment_id": 101842497, "body": "I tried adding <code>set(CMAKE_C_COMPILER \\MinGW\\bin) set(CMAKE_CXX_COMPILER \\MinGW\\bin)</code> but it gave me the exact same error."}], "tags": [], "owner": {"reputation": 1, "user_id": 9671339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e18128f253f971d4fcfa229db4e5c7?s=128&d=identicon&r=PG&f=1", "display_name": "Tripp", "link": "https://stackoverflow.com/users/9671339/tripp"}, "is_accepted": false, "score": 0, "last_activity_date": 1567021758, "creation_date": 1567021758, "answer_id": 57699183, "question_id": 57698803, "link": "https://stackoverflow.com/questions/57698803/how-do-i-stop-cmake-from-compiling-with-cl/57699183#57699183", "title": "How do I stop cmake from compiling with cl?", "body": "<p>You need to designate your compiler in the CMakeList.txt file:</p>\n\n<pre><code>set(CMAKE_C_COMPILER &lt;your c path &gt;)\nset(CMAKE_CXX_COMPILER &lt;your c++ path here&gt;)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "edited": false, "score": 0, "creation_date": 1567022137, "post_id": 57699239, "comment_id": 101842370, "body": "Check my question for the error that occured trying this."}, {"owner": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "edited": false, "score": 0, "creation_date": 1567022783, "post_id": 57699239, "comment_id": 101842659, "body": "the same error occurs when I add the path to the compilers and <code>-G &quot;MinGW Makefiles&quot;</code>."}, {"owner": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "edited": false, "score": 0, "creation_date": 1567023682, "post_id": 57699239, "comment_id": 101842987, "body": "By the make program you mean <code>C:\\Program Files\\CMake\\bin</code>?"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "edited": false, "score": 1, "creation_date": 1567023750, "post_id": 57699239, "comment_id": 101843012, "body": "@TomFinet, <code>make</code> is a program provided by MinGW, this is not the same program as <code>cmake</code>. And the path in <code>set(CMAKE_**** &lt;path&gt;)</code> should be pointing to an .exe, not the folder the exe is in."}, {"owner": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "edited": false, "score": 0, "creation_date": 1567024365, "post_id": 57699239, "comment_id": 101843241, "body": "I can&#39;t find a <code>make.exe</code> or <code>mingw32-make.exe</code> file in C:\\MinGW\\bin."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "edited": false, "score": 0, "creation_date": 1567024433, "post_id": 57699239, "comment_id": 101843270, "body": "@TomFinet, Which MinGW version/variant have you installed? (Please post a link)"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "edited": false, "score": 1, "creation_date": 1567025070, "post_id": 57699239, "comment_id": 101843511, "body": "@TomFinet, What programs <i>are</i> in your <code>C:\\MinGW\\bin</code> folder? Is it just <code>mingw-get.exe</code> ? Do you see <code>mingw32-make.exe</code> ?"}, {"owner": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "edited": false, "score": 0, "creation_date": 1567025244, "post_id": 57699239, "comment_id": 101843579, "body": "gcc, g++ and loads more."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "edited": false, "score": 0, "creation_date": 1567025252, "post_id": 57699239, "comment_id": 101843584, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/198607/discussion-between-romen-and-tom-finet\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "is_accepted": true, "score": 3, "last_activity_date": 1567023348, "last_edit_date": 1567023348, "creation_date": 1567021974, "answer_id": 57699239, "question_id": 57698803, "link": "https://stackoverflow.com/questions/57698803/how-do-i-stop-cmake-from-compiling-with-cl/57699239#57699239", "title": "How do I stop cmake from compiling with cl?", "body": "<blockquote>\n  <p>I am also confused as to why the error message is talking about an NMake generator with Visual C++ because I am not using Visual Studio? </p>\n</blockquote>\n\n<p>It seems that your CMake decided that \"NMake Makefiles\" was the default <a href=\"https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html\" rel=\"nofollow noreferrer\">generator type</a>, which means the CMake configuration step was outputting project/makefiles for NMake.</p>\n\n<blockquote>\n  <p>How do I configure cmake to compile using the compilers I already have on my machine?</p>\n</blockquote>\n\n<p>When you run CMake, specify the generator:</p>\n\n<pre><code>cmake . -G \"MinGW Makefiles\"\n</code></pre>\n\n<p>There are also some things you should do to improve/fix your CMakeLists.txt:</p>\n\n<ol>\n<li><p>Specify the minimum version <em>before</em> the project line.</p></li>\n<li><p>Add the following lines to tell CMake where your MinGW binaries are:  </p></li>\n</ol>\n\n<pre><code>set(CMAKE_MAKE_PROGRAM &lt;your make program path&gt;)\nset(CMAKE_C_COMPILER &lt;your c compiler path&gt;)\nset(CMAKE_CXX_COMPILER &lt;your c++ compiler path&gt;)\n</code></pre>\n\n<p><em>This step should be unecessary if MinGW is properly added to your <code>PATH</code>.</em></p>\n\n<ol start=\"3\">\n<li>Specify the languages used by the project.</li>\n</ol>\n\n<pre><code>project(Arena LANGUAGES CXX)\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 5393006, "user_type": "registered", "accept_rate": 18, "profile_image": "https://graph.facebook.com/1062870793747734/picture?type=large", "display_name": "Tom Finet", "link": "https://stackoverflow.com/users/5393006/tom-finet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 57699239, "answer_count": 2, "score": 0, "last_activity_date": 1567023348, "creation_date": 1567019848, "last_edit_date": 1592644375, "question_id": 57698803, "link": "https://stackoverflow.com/questions/57698803/how-do-i-stop-cmake-from-compiling-with-cl", "title": "How do I stop cmake from compiling with cl?", "body": "<p>I am trying to build a c++ project using cmake. I am using sublime text on windows. Here is my CMakeLists.txt configuration:</p>\n<pre><code>project(Arena)\n\ncmake_minimum_required(VERSION 3.0)\n\nset(CMAKE_C_COMPILER C:\\MinGW\\bin)\nset(CMAKE_CXX_COMPILER C:\\MinGW\\bin)\n</code></pre>\n<p>When I run the <code>cmake .</code> command, I get the following error messages:</p>\n<pre><code>-- Building for: NMake Makefiles\n-- The C compiler identification is unknown\n-- The CXX compiler identification is unknown\nCMake Error at CMakeLists.txt:1 (project):\n  The CMAKE_C_COMPILER:\n\n    cl\n\n  is not a full path and was not found in the PATH.\n\n  To use the NMake generator with Visual C++, cmake must be run from a shell\n  that can use the compiler cl from the command line.  This environment is\n  unable to invoke the cl compiler.  To fix this problem, run cmake from the\n  Visual Studio Command Prompt (vcvarsall.bat).\n\n  Tell CMake where to find the compiler by setting either the environment\n  variable &quot;CC&quot; or the CMake cache entry CMAKE_C_COMPILER to the full path to\n  the compiler, or to the compiler name if it is in the PATH.\n\n\nCMake Error at CMakeLists.txt:1 (project):\n  The CMAKE_CXX_COMPILER:\n\n    cl\n\n  is not a full path and was not found in the PATH.\n\n  To use the NMake generator with Visual C++, cmake must be run from a shell\n  that can use the compiler cl from the command line.  This environment is\n  unable to invoke the cl compiler.  To fix this problem, run cmake from the\n  Visual Studio Command Prompt (vcvarsall.bat).\n\n  Tell CMake where to find the compiler by setting either the environment\n  variable &quot;CXX&quot; or the CMake cache entry CMAKE_CXX_COMPILER to the full path\n  to the compiler, or to the compiler name if it is in the PATH.\n</code></pre>\n<p>The error message says that the <code>cl</code> compiler is not found, this is because I have not installed it. But I have installed the MINGW GNU compiler collection (GCC). These are in my <code>PATH</code> at <code>C:\\MinGW\\bin</code>. How do I configure cmake to compile using the compilers I already have on my machine?</p>\n<p>Stupid Question Alert: I am also confused as to why the error message is talking about an <code>NMake generator with Visual C++</code> because I am not using Visual Studio?</p>\n<h3>Attempt 1:</h3>\n<p>Ran the cmake command like so <code>cmake . -G &quot;MinGW Makefiles&quot;</code>, got the following error:</p>\n<pre><code>CMake Error: CMake was unable to find a build program corresponding to &quot;MinGW Makefiles&quot;.  CMAKE_MAKE_PROGRAM is not set.  You probably need to select a different build tool.\nCMake Error: CMake was unable to find a build program corresponding to &quot;MinGW Makefiles&quot;.  CMAKE_MAKE_PROGRAM is not set.  You probably need to select a different build tool.\nCMake Error: CMAKE_C_COMPILER not set, after EnableLanguage\nCMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1567018406, "post_id": 57698482, "comment_id": 101840930, "body": "Please define <i>large</i>. <i>Arbitrary large</i>?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 3, "creation_date": 1567018411, "post_id": 57698482, "comment_id": 101840931, "body": "Please show what you have tried. That value us only \u202d262144\u202c and will easily fit into an <code>int</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1567018619, "post_id": 57698482, "comment_id": 101841006, "body": "Most compilers have been able to support 64-bit integers for quite some time now. If you want more then you have to come up with more custom solutions, otherwise it&#39;s just a matter of just simple bitwise OR and shift."}, {"owner": {"reputation": 1484, "user_id": 11102572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c83b6b17eb13d31ab7c5d1ac554ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Igor G", "link": "https://stackoverflow.com/users/11102572/igor-g"}, "edited": false, "score": 0, "creation_date": 1567018717, "post_id": 57698482, "comment_id": 101841044, "body": "What is 1000000000000000000? It looks suspiciously close to the largest <i>decimal</i> number that would fit in int64_t..."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1567019069, "post_id": 57698482, "comment_id": 101841185, "body": "You need to read the binary number as a string. Converting a digit string to an integer is simple enough."}], "answers": [{"comments": [{"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 2, "creation_date": 1567019831, "post_id": 57698557, "comment_id": 101841505, "body": "Agree on the answer \u2013 cplusplus.com as reference is questionable, though, it is known for not always being up to date. [<a href=\"https://en.cppreference.com/w/]\" rel=\"nofollow noreferrer\">en.cppreference.com/w/]</a> usually is considered better choice."}, {"owner": {"reputation": 61, "user_id": 4460361, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2hlZbbC3eEk/AAAAAAAAAAI/AAAAAAAAABU/vf_lHfigYWQ/photo.jpg?sz=128", "display_name": "Justin Ramirez", "link": "https://stackoverflow.com/users/4460361/justin-ramirez"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1567019871, "post_id": 57698557, "comment_id": 101841522, "body": "Thanks! Will edit link"}], "tags": [], "owner": {"reputation": 61, "user_id": 4460361, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2hlZbbC3eEk/AAAAAAAAAAI/AAAAAAAAABU/vf_lHfigYWQ/photo.jpg?sz=128", "display_name": "Justin Ramirez", "link": "https://stackoverflow.com/users/4460361/justin-ramirez"}, "is_accepted": true, "score": 2, "last_activity_date": 1567019970, "last_edit_date": 1567019970, "creation_date": 1567018629, "answer_id": 57698557, "question_id": 57698482, "link": "https://stackoverflow.com/questions/57698482/how-to-convert-a-large-binary-number-to-decimal/57698557#57698557", "title": "How to convert a large binary number to decimal?", "body": "<p>There is a function called strtoull (string to unsigned long long integer) which should work, follow the link for an example. <a href=\"https://en.cppreference.com/w/cpp/string/byte/strtoul\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/string/byte/strtoul</a></p>\n"}], "owner": {"reputation": 3, "user_id": 11979940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be5d21fb4c5517e6ee04d8dc7ae9f750?s=128&d=identicon&r=PG&f=1", "display_name": "Rana Khan", "link": "https://stackoverflow.com/users/11979940/rana-khan"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "closed_date": 1567019391, "accepted_answer_id": 57698557, "answer_count": 1, "score": -3, "last_activity_date": 1567022148, "creation_date": 1567018268, "last_edit_date": 1567022148, "question_id": 57698482, "link": "https://stackoverflow.com/questions/57698482/how-to-convert-a-large-binary-number-to-decimal", "closed_reason": "Needs more focus", "title": "How to convert a large binary number to decimal?", "body": "<p>I am facing a problem. The maximum binary number I am able to convert is 1000000000000000000. Is there any way to convert a binary number larger than this?</p>\n"}, {"tags": ["c++", "linker", "xilinx", "zynq", "xsdk"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1567018068, "post_id": 57698413, "comment_id": 101840790, "body": "Name mangling problemz?"}, {"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1567018238, "post_id": 57698413, "comment_id": 101840865, "body": "how to fix it?  add extern &quot;c&quot; to what?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1567018382, "post_id": 57698413, "comment_id": 101840920, "body": "Could be a possible fix, yes."}, {"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1567018558, "post_id": 57698413, "comment_id": 101840980, "body": "I think you are mislabeling... this is not a matching question... I have proven using &quot;nm&quot; that its not a mangle problem... also, I&#39;m using a different toolchain... Xilinx Arm Toolchain for instead of Visual Studio.."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1567018572, "post_id": 57698413, "comment_id": 101840985, "body": "While I see <code>-L</code> flag (adds a path), I don&#39;t see <code>-l</code> to add the <code>liblwip4</code> lib."}, {"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "edited": false, "score": 0, "creation_date": 1567018663, "post_id": 57698413, "comment_id": 101841018, "body": "This is what flag &quot;-llwip4 &quot; does... its includes ./zynq_rtl.sdk/uartcmd_bsp/ps7_cortexa9_0/lib/liblwip4.a  ... the &quot;lib&quot; prefix is implicit with gcc when using &quot;-l&quot; flag."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1567019033, "post_id": 57698413, "comment_id": 101841176, "body": "Ah, yes, inside <code>-Wl</code> flag. Try to change the order of the used libs, if some one depends on another."}, {"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "edited": false, "score": 0, "creation_date": 1567019640, "post_id": 57698413, "comment_id": 101841441, "body": "I found the problem....  its caused because I&#39;m using C++ compiler to compile platform_zynq.c file which was original compile with C compiler...  and because the &quot;platform_zynq.c&quot; file is cheating by adding function prototypes into the c file instead of using the proper header file which has it marked as extern &quot;C&quot; linkage...  The solution was to comment out the function prototypes in &quot;platform_zynq.c&quot; and to add the correct header file instead: &quot;#include &quot;lwip/dhcp.h&quot;"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1567019999, "post_id": 57698413, "comment_id": 101841573, "body": "Post the solution as an answer, and accept it."}], "owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567059356, "creation_date": 1567017940, "last_edit_date": 1567018473, "question_id": 57698413, "link": "https://stackoverflow.com/questions/57698413/xsdk-linker-error-dhcp-fine-tmr-dhcp-coarse-tmr-undefined", "title": "XSDK: linker error: dhcp_fine_tmr() &amp; dhcp_coarse_tmr() undefined", "body": "<p>What would cause the following Linker Error when compiling C++ XSDK project??</p>\n\n<p><strong>Linker Error Message:</strong></p>\n\n<pre><code>./src/platform/platform_zynq.o: In function `timer_callback(XScuTimer*)':\nplatform_zynq.c:115:undefined reference to `dhcp_fine_tmr()'\n\nplatform_zynq.c:117:undefined reference to `dhcp_coarse_tmr()'\n\ncollect2.exe: error: ld returned 1 exit status\nmake: *** [uartcmd.elf] Error 1\n</code></pre>\n\n<p><strong>Linker Command as follows:</strong></p>\n\n<pre><code>arm-none-eabi-g++ \\\n    -mcpu=cortex-a9 \\\n    -mfpu=vfpv3 \\\n    -mfloat-abi=hard \\\n    -Wl,-build-id=none \\\n    -specs=Xilinx.spec \\\n    -Wl,-T\\\n    -Wl,../src/lscript.ld \\\n    -L../../uartcmd_bsp/ps7_cortexa9_0/lib \\\n    -o \"uartcmd.elf\" \\\n    ./src/platform/platform.o \\\n    ./src/platform/platform_mb.o \\\n    ./src/platform/platform_ppc.o \\\n    ./src/platform/platform_zynq.o \\\n    ./src/platform/platform_zynqmp.o \\\n    ./src/fpga_registers2.clang.o \\\n    ./src/main.o \\\n    ./src/network.o \\\n    -Wl,\\\n    --start-group,-lxil,-lfreertos,-lgcc,-lc,-lstdc++,--end-group\\\n    -Wl,--start-group,-lxil,-llwip4,-lgcc,-lc,--end-group\n</code></pre>\n\n<p><strong>Configured Xilinx SDK project as follows:</strong></p>\n\n<pre><code>// Step 0: Create Application Project with FreeRTOS Selected\n//\n// Step 1: Adding lwIP library to XSDK project.\n//\n// (2) Right click &lt;app&gt;_bsp and select\n// \"Board Support Package Settings\"\n// (3) Click Check box \"lwip\"\n//\n// Step 2: Add DHCP Support\n// (1) Right click &lt;app&gt;_bsp and select\n// \"Board Support Package Settings\"\n// (2) Click Overview:freertos901_xilinx.lwip141\n// (3) Check dhcp_options.dhcp_does_arp_check true\n// (4) Check dhcp_options.lwip_dhcp true\n</code></pre>\n\n<p><strong>Symbol Table as Follows:</strong></p>\n\n<pre><code>$ nm ./zynq_rtl.sdk/uartcmd_bsp/ps7_cortexa9_0/lib/liblwip4.a | grep -i dhcp_fine\n\n00001c7c T dhcp_fine_tmr\n\n$ nm ./zynq_rtl.sdk/uartcmd_bsp/ps7_cortexa9_0/lib/liblwip4.a | grep -i dhcp_coarse\n\n00001a54 T dhcp_coarse_tmr\n\n$ nm -C ./uartcmd/Debug/src/platform/platform_zynq.o | grep dhcp_fine\n\n         U dhcp_fine_tmr()\n\n$ nm -C ./uartcmd/Debug/src/platform/platform_zynq.o | grep dhcp_coarse\n\n         U dhcp_coarse_tmr()\n\n</code></pre>\n\n<p>Doesn't look like name mangle problem to me... I add \"-C\" option to prevent demangling of the symbol names...</p>\n"}, {"tags": ["c++", "templates", "recursion", "template-specialization", "factorial"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1567017055, "post_id": 57698167, "comment_id": 101840436, "body": "If it can <i>potentially</i> be called, it needs to exist."}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 2, "creation_date": 1567017189, "post_id": 57698167, "comment_id": 101840479, "body": "In this case <code>constexpr int f(int N);</code> (Or <code>consteval</code> in c++20) would also work."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1567019416, "post_id": 57698167, "comment_id": 101841354, "body": "Sidenote: What would be the result of <code>f&lt;-1&gt;()</code>? As it is meaningless, I&#39;d prefer unsigned int as template parameter. We wouldn&#39;t prevent anybody from writing <code>f&lt;-1&gt;</code> (would be converted to huge integer anyway), but at least we&#39;d express right from the start that we actually expect non-negative values only..."}, {"owner": {"reputation": 50273, "user_id": 167958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0defa74609a4ce5d51f2467b69c509be?s=128&d=identicon&r=PG", "display_name": "Omnifarious", "link": "https://stackoverflow.com/users/167958/omnifarious"}, "edited": false, "score": 0, "creation_date": 1567020252, "post_id": 57698167, "comment_id": 101841663, "body": "You&#39;ve gotten an excellent answer that I cannot usefully add to. I just want to state that this is one of the reasons <code>constexpr</code> was created."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1567235766, "post_id": 57698167, "comment_id": 101911186, "body": "To be <i>mathematically</i> complete: Factorial of 0 is defined as 1, so you should have <code>if constexpr(N == 0) return 1; else ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 22, "last_activity_date": 1567017485, "last_edit_date": 1567017485, "creation_date": 1567017071, "answer_id": 57698248, "question_id": 57698167, "link": "https://stackoverflow.com/questions/57698167/template-factorial-function-without-template-specialization/57698248#57698248", "title": "Template factorial function without template specialization", "body": "<p>The issue here is that your if statement is a run time construct.  When you have</p>\n\n<pre><code>int f() {\n  if (N == 1) return 1; // we exit the recursion at 1 instead of 0\n  return N*f&lt;N-1&gt;();\n}\n</code></pre>\n\n<p>the <code>f&lt;N-1&gt;</code> is instantiated as it may be called.  Even though the if condition will stop it from calling <code>f&lt;0&gt;</code>, the compiler still has to instantiate it since it is part of the function.  That means it instantiates <code>f&lt;4&gt;</code>, which instantiates <code>f&lt;3&gt;</code>, which instantiates <code>f&lt;2&gt;</code>, and on and on it will go forever.  </p>\n\n<p>The Pre C++17 way to stop this is to use a specialization for <code>0</code> which breaks that chain.  Starting in C++17 with <a href=\"https://en.cppreference.com/w/cpp/language/if#Constexpr_If\" rel=\"noreferrer\">constexpr if</a>, this is no longer needed.  Using</p>\n\n<pre><code>int f() {\n  if constexpr (N == 1) return 1; // we exit the recursion at 1 instead of 0\n  else return N*f&lt;N-1&gt;();\n}\n</code></pre>\n\n<p>guarantees that <code>return N*f&lt;N-1&gt;();</code> won't even exist in the <code>1</code> case, so you don't keep going down the instantiation rabbit hole.</p>\n"}, {"tags": [], "owner": {"reputation": 1484, "user_id": 11102572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c83b6b17eb13d31ab7c5d1ac554ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Igor G", "link": "https://stackoverflow.com/users/11102572/igor-g"}, "is_accepted": false, "score": 5, "last_activity_date": 1567019978, "last_edit_date": 1567019978, "creation_date": 1567019557, "answer_id": 57698748, "question_id": 57698167, "link": "https://stackoverflow.com/questions/57698167/template-factorial-function-without-template-specialization/57698748#57698748", "title": "Template factorial function without template specialization", "body": "<p>The problem is that <code>f&lt;N&gt;()</code> <em>always</em> instantiates <code>f&lt;N-1&gt;()</code> whether that if branch is taken or not. Unless properly terminated, that would create infinite recursion at compile time (i.e. it would attempt instantiating <code>F&lt;0&gt;</code>, then <code>f&lt;-1&gt;</code>, then <code>f&lt;-2&gt;</code> and so on). Obviously you should terminate that recursion somehow.</p>\n\n<p>Apart from <code>constexpr</code> solution and specialization suggested by NathanOliver, you may terminate the recursion explicitly:</p>\n\n<pre><code>template &lt;int N&gt;\ninline int f()\n{\n    if (N &lt;= 1)\n        return 1;\n    return N * f&lt;(N &lt;= 1) ? N : N - 1&gt;();\n}\n</code></pre>\n\n<p>Mind, this solution is rather poor (the same terminal condition must be repeated twice), I'm writing this answer merely to show that there are always more ways to solve the problem :- )</p>\n"}], "owner": {"reputation": 11283, "user_id": 5825294, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Un5fU.png?s=128&g=1", "display_name": "Enlico", "link": "https://stackoverflow.com/users/5825294/enlico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 1, "accepted_answer_id": 57698248, "answer_count": 2, "score": 15, "last_activity_date": 1567019978, "creation_date": 1567016734, "question_id": 57698167, "link": "https://stackoverflow.com/questions/57698167/template-factorial-function-without-template-specialization", "title": "Template factorial function without template specialization", "body": "<p>I don't understand the following behavior.</p>\n\n<p>The following code, aimed at computing the factorial at compile time, doesn't even compile:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\ntemplate&lt;int N&gt;\nint f() {\n  if (N == 1) return 1; // we exit the recursion at 1 instead of 0\n  return N*f&lt;N-1&gt;();\n}\nint main() {\n  cout &lt;&lt; f&lt;5&gt;() &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n\n<p>and throws the following error:</p>\n\n<pre><code>...$ g++ factorial.cpp &amp;&amp; ./a.out \nfactorial.cpp: In instantiation of \u2018int f() [with int N = -894]\u2019:\nfactorial.cpp:7:18:   recursively required from \u2018int f() [with int N = 4]\u2019\nfactorial.cpp:7:18:   required from \u2018int f() [with int N = 5]\u2019\nfactorial.cpp:15:16:   required from here\nfactorial.cpp:7:18: fatal error: template instantiation depth exceeds maximum of 900 (use \u2018-ftemplate-depth=\u2019 to increase the maximum)\n    7 |   return N*f&lt;N-1&gt;();\n      |            ~~~~~~^~\ncompilation terminated.\n</code></pre>\n\n<p>whereas, upon adding the specialization for <code>N == 0</code> (which the template above doesn't even reach),</p>\n\n<pre><code>template&lt;&gt;\nint f&lt;0&gt;() {\n  cout &lt;&lt; \"Hello, I'm the specialization.\\n\";\n  return 1;\n}\n</code></pre>\n\n<p>the code compiles and give the correct output of, even if the specialization is never used:</p>\n\n<pre><code>...$ g++ factorial.cpp &amp;&amp; ./a.out \n120\n</code></pre>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1567014343, "post_id": 57697609, "comment_id": 101839407, "body": "You forgot to tell us what the error is."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1567014364, "post_id": 57697609, "comment_id": 101839412, "body": "Please update your question with the exact error. It would also be helpful to know more about your <code>top</code> variable."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1567014484, "post_id": 57697609, "comment_id": 101839457, "body": "Why are you using an <code>int</code> where a <code>bool</code> would make more sense? <code>bool is_Empty() { return (top == NULL); }</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1567014615, "post_id": 57697609, "comment_id": 101839518, "body": "<i>@Pawan</i> It looks like you  coud profit from reading a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good book about the basics</a>."}], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 11779635, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XU7ggLAizSo/AAAAAAAAAAI/AAAAAAAAAJU/Ypub74vQ42g/photo.jpg?sz=128", "display_name": "Pawan Nirpal", "link": "https://stackoverflow.com/users/11779635/pawan-nirpal"}, "edited": false, "score": 0, "creation_date": 1567014537, "post_id": 57697635, "comment_id": 101839484, "body": "oh i get it,  the parentheses for function how silly of me , i feel like an idiot."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 305, "user_id": 11779635, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XU7ggLAizSo/AAAAAAAAAAI/AAAAAAAAAJU/Ypub74vQ42g/photo.jpg?sz=128", "display_name": "Pawan Nirpal", "link": "https://stackoverflow.com/users/11779635/pawan-nirpal"}, "edited": false, "score": 0, "creation_date": 1567014598, "post_id": 57697635, "comment_id": 101839511, "body": "Yes, very silly. :)"}, {"owner": {"reputation": 3029, "user_id": 1060004, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZOBMa.jpg?s=128&g=1", "display_name": "ustulation", "link": "https://stackoverflow.com/users/1060004/ustulation"}, "edited": false, "score": 0, "creation_date": 1567015000, "post_id": 57697635, "comment_id": 101839679, "body": "Error description could also do a better job here though. I bet more people miss the <code>()</code> as a typo vs those who wanted to take the address or something that the diagnostics is saying is probably missing. I don&#39;t have a machine at hand just now but I think several languages would produce better/direct hints to just guide novices more ? It does mention invalid use of <code>is_Empty()</code> so that&#39;s a hint but it could ask if the user missed <code>()</code> later too."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 3029, "user_id": 1060004, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZOBMa.jpg?s=128&g=1", "display_name": "ustulation", "link": "https://stackoverflow.com/users/1060004/ustulation"}, "edited": false, "score": 0, "creation_date": 1567015080, "post_id": 57697635, "comment_id": 101839715, "body": "@ustulation I agree."}, {"owner": {"reputation": 305, "user_id": 11779635, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XU7ggLAizSo/AAAAAAAAAAI/AAAAAAAAAJU/Ypub74vQ42g/photo.jpg?sz=128", "display_name": "Pawan Nirpal", "link": "https://stackoverflow.com/users/11779635/pawan-nirpal"}, "edited": false, "score": 0, "creation_date": 1567015130, "post_id": 57697635, "comment_id": 101839737, "body": "anyways thanks for pointing out a silly error i&#39;ll  mind being more conscious about syntax then just getting carried away by the logic part ;)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1567014390, "creation_date": 1567014390, "answer_id": 57697635, "question_id": 57697609, "link": "https://stackoverflow.com/questions/57697609/invalid-use-of-member-when-trying-to-use-my-function/57697635#57697635", "title": "&quot;invalid use of member&quot; when trying to use my function", "body": "<pre><code>if (s1.is_Empty==1)\n</code></pre>\n\n<p>That is not how to call a function.</p>\n\n<p>Here:</p>\n\n<pre><code>if (s1.is_Empty()==1)\n</code></pre>\n\n<p>You may wish to review your C++ book.</p>\n"}], "owner": {"reputation": 305, "user_id": 11779635, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XU7ggLAizSo/AAAAAAAAAAI/AAAAAAAAAJU/Ypub74vQ42g/photo.jpg?sz=128", "display_name": "Pawan Nirpal", "link": "https://stackoverflow.com/users/11779635/pawan-nirpal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1567014613, "answer_count": 1, "score": -1, "last_activity_date": 1567014504, "creation_date": 1567014285, "last_edit_date": 1567014504, "question_id": 57697609, "link": "https://stackoverflow.com/questions/57697609/invalid-use-of-member-when-trying-to-use-my-function", "closed_reason": "Not suitable for this site", "title": "&quot;invalid use of member&quot; when trying to use my function", "body": "<p>I'm trying to solve a balanced parentheses problem, here in my code I'm trying to get 1 from a function is_empty() if top of my stack is empty but then  here i am stuck with this ugly error. </p>\n\n<pre><code>int is_Empty()\n{\n    int x=0;\n    if (top==NULL)\n    {\n    x=1;\n    }\n    return x;\n}\n</code></pre>\n\n<p>here is how i recive it</p>\n\n<pre><code>if (s1.is_Empty==1)\n    {\n        cout&lt;&lt;\"matched\"&lt;&lt;endl;\n    }\n</code></pre>\n\n<p>my error log</p>\n\n<pre><code>bal.cpp:112:20: error: invalid use of member 'int stack::is_Empty()' (did you forget the '&amp;' ?)        \n             if (s1.is_Empty==1)\n                 ~~~^~~~~~~~\n</code></pre>\n"}, {"tags": ["c++", "debugging", "gdb"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1567014035, "post_id": 57697525, "comment_id": 101839272, "body": "Note: plain gdb allows basic reverse debugging as well, but <code>rr</code> adds extra goodies."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1567015134, "post_id": 57697525, "comment_id": 101839740, "body": "As does the current visual studio. S/B a fairly painless process to find the origination. One approach is to set up a trigger each time the variable is changed."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 2, "last_activity_date": 1567013878, "creation_date": 1567013878, "answer_id": 57697525, "question_id": 57697443, "link": "https://stackoverflow.com/questions/57697443/is-there-something-like-a-backtrace-to-indicate-which-path-a-variable-has-reache/57697525#57697525", "title": "Is there something like a backtrace to indicate which path a variable has reached to its current value?", "body": "<blockquote>\n  <p>is there an easy way like backtrace to get to the source of the error, namely the table and field name?</p>\n</blockquote>\n\n<p>No. There are however reverse debuggers, such as <a href=\"https://rr-project.org/\" rel=\"nofollow noreferrer\">rr</a>, which allow you to reverse-step, and reverse-continue. The latter is particularly useful when you want to know when a given variable was last modified.</p>\n"}], "owner": {"reputation": 11, "user_id": 11961834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cacba48d443829ae1d436cb4fb4a9ac8?s=128&d=identicon&r=PG&f=1", "display_name": "dt1024", "link": "https://stackoverflow.com/users/11961834/dt1024"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1567048089, "answer_count": 1, "score": -2, "last_activity_date": 1567013878, "creation_date": 1567013531, "question_id": 57697443, "link": "https://stackoverflow.com/questions/57697443/is-there-something-like-a-backtrace-to-indicate-which-path-a-variable-has-reache", "closed_reason": "Needs details or clarity", "title": "Is there something like a backtrace to indicate which path a variable has reached to its current value?", "body": "<p>I have a source like this</p>\n\n<pre><code> //file1.cpp\n int var_1=getDB(\" Table_name\",\"column_name\");\n ...\n //file2.cpp\n int var2=func2(var_1);\n ...\n //filen.cpp\n int var_n=funcn(var_n_1);\n</code></pre>\n\n<p>In debugging, I first diagnose var_n error message type, but the goal is to modify the table, is there an easy way like backtrace to get to the source of the error, namely the table and field name?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1567013482, "post_id": 57697384, "comment_id": 101839054, "body": "Not quite sure what you want, but you can create <code>static</code> functions if they don&#39;t depend on member variables or you can create free functions that you pass an instance of an object to operate on. Is that what you need/want?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567013530, "post_id": 57697384, "comment_id": 101839074, "body": "What would be the use case for such behavior? Technically, your question is, in essence, the same as asking if you can pass <code>B*</code>, to a function, that has the signature of <code>void f (A*);</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1567014222, "post_id": 57697384, "comment_id": 101839356, "body": "Have a look at <code>std::function</code>, eg: <code>void call(std::function&lt;void()&gt; func) { func(); }</code> then you can use <code>std:::bind()</code>: <code>int main() { A a; B b; call(std::bind(&amp;A::f, &amp;a)); call(std::bind(&amp;B::f, &amp;b)); }</code> or lambdas: <code>int main() { A a; B b; call([&amp;](){ a.f(); }); call([&amp;](){ b.f(); }); }</code>"}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 1, "creation_date": 1567016165, "post_id": 57697384, "comment_id": 101840085, "body": "You could pass a templated function to call <code>f</code>: <code>call_all([](const auto&amp; o) { o.f(); }, a, b, c);</code>"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1567024744, "post_id": 57697384, "comment_id": 101843388, "body": "I&#39;m really curious why you <i>don&#39;t</i> want to use a pure virtual interface to accomplish this?"}], "answers": [{"comments": [{"owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "edited": false, "score": 0, "creation_date": 1567013812, "post_id": 57697453, "comment_id": 101839192, "body": "I have a bunch of classes all defining same member function <code>f()</code> like in the example, and I want to call <code>f()</code> on all of them, but I do not know how to speficy <code>f()</code> alone without specifying the object it belongs to."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "edited": false, "score": 1, "creation_date": 1567013915, "post_id": 57697453, "comment_id": 101839222, "body": "@nyarlathotep108, in that case, you need to use <code>call(&amp;A::f, a);</code> and <code>call(&amp;B::f, b);</code>. That is certainly possible."}, {"owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "edited": false, "score": 0, "creation_date": 1567014160, "post_id": 57697453, "comment_id": 101839325, "body": "Sure, but that would be making two calls. If I could isolate <code>f()</code> from its own object, I could write something like: <code>call_all&lt;A,B,C&gt;( &amp;f );</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "edited": false, "score": 0, "creation_date": 1567014402, "post_id": 57697453, "comment_id": 101839429, "body": "@nyarlathotep108, that seems theoretical/abstract to me. If you can present a concrete use case, there might be ways of accomplishing your goal in an elegant way."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1567014434, "last_edit_date": 1567014434, "creation_date": 1567013589, "answer_id": 57697453, "question_id": 57697384, "link": "https://stackoverflow.com/questions/57697384/separate-member-function-from-its-class/57697453#57697453", "title": "Separate member function from its class", "body": "<blockquote>\n  <p>Is it possible to split a member function from its class, so that the same function can be called on another class?</p>\n</blockquote>\n\n<p>No. You may not call a member function of <code>A</code> with an instance of <code>B</code> when the classes are not related. The compiler should report that as a compile time error.</p>\n\n<p>It's not clear to me why you want to do that though.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1567024390, "creation_date": 1567024390, "answer_id": 57699680, "question_id": 57697384, "link": "https://stackoverflow.com/questions/57697384/separate-member-function-from-its-class/57699680#57699680", "title": "Separate member function from its class", "body": "<p>Not generic about name <code>f</code>, but you can do:</p>\n\n<pre><code>template &lt;typename ... Ts&gt;\nvoid call_f(Ts&amp; ... ts)\n{\n    (ts.f(), ...);\n}\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>A a; B b; C c;\ncall_f(a, b, c); // a.f(), b.f(), c.f();\n</code></pre>\n\n<p>More generic with lambda:</p>\n\n<pre><code>template &lt;typename F, typename ... Ts&gt;\nvoid call_all(F&amp;&amp; f, Ts&amp;&amp; ... ts)\n{\n    (f(std::forward&lt;Ts&gt;(ts)), ...);\n}\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>A a; B b; C c;\ncall_all([](auto&amp; e){ e.f(); }, a, b, c); // a.f(), b.f(), c.f();\n</code></pre>\n"}], "owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1567024390, "creation_date": 1567013285, "last_edit_date": 1567014595, "question_id": 57697384, "link": "https://stackoverflow.com/questions/57697384/separate-member-function-from-its-class", "title": "Separate member function from its class", "body": "<p>If have a bunch of classes, all with the same member function:</p>\n\n<pre><code>struct A { void f(){} };\nstruct B { void f(){} };\nstruct C { void f(){} };\n// ...and so on \n</code></pre>\n\n<p>I do not want to add any abstraction through inheritance, but still I want to be able to call <code>f()</code> upon all the given objects.</p>\n\n<pre><code>int main()\n{\n    A a; B b; C c;\n    call_all(&amp;f, a, b, c); \n}\n</code></pre>\n\n<p>Question is: how can <code>f</code> be isolated from the class context in which is defined, so that a <code>call_all</code> template function like in the example can be used?</p>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1567013322, "post_id": 57697345, "comment_id": 101838990, "body": "The whole point of the separate compilation model of C and C++ is that .cpp files are not dependent on other .cpp files."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1567014633, "post_id": 57697345, "comment_id": 101839529, "body": "You might want to take a look at <a href=\"http://make.mad-scientist.net/papers/advanced-auto-dependency-generation/\" rel=\"nofollow noreferrer\">this</a>."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1567013908, "post_id": 57697439, "comment_id": 101839217, "body": "It would be great if you could extend your answer how to generate dependencies to header files using the compiler options for a <code>.d</code> make include."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1567036626, "post_id": 57697439, "comment_id": 101846403, "body": "For non-deliverable code (experiments, small tools, demonstrations, evaluations, research, etc., more than 75% of my code, these days), including multiple .cpp files into one compilation unit saves me time.  The compiler certainly does not care.  For deliverable code, and when I&#39;m working on my make files, and when separate compilation is more important to my efforts, I take fewer, if any, short cuts.  I can not remember the last time I had circular includes, which are disguised by &#39;proper&#39; include sequences, but easily avoided and handled with multiple .cpp files &#39;tumbled&#39; together.."}], "tags": [], "owner": {"reputation": 1447, "user_id": 5162155, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GouJq.jpg?s=128&g=1", "display_name": "Moshe Rabaev", "link": "https://stackoverflow.com/users/5162155/moshe-rabaev"}, "is_accepted": false, "score": 1, "last_activity_date": 1567013520, "creation_date": 1567013520, "answer_id": 57697439, "question_id": 57697345, "link": "https://stackoverflow.com/questions/57697345/proper-makefile-dependency-list-c/57697439#57697439", "title": "Proper makefile dependency list (C++)", "body": "<p>No you shouldn't have .cpp dependency to main, the whole point of Makefile is for separate compilation.</p>\n\n<p>If you were to include .cpp as a dependency to main, then every time the implementation of that cpp changes main and the cpp would get recompiled which is not what we want. Rather, we only want the cpp file to get re-compiled and main stay the same.</p>\n\n<p>I think that the example from your textbook is a mistake.\nI could be wrong, Makefiles is an old friend for me, so I want to know what others have to say on the matter.</p>\n\n<p>I'm answering based on what I personally do and this is what also makes sense to me.</p>\n"}, {"comments": [{"owner": {"reputation": 1195, "user_id": 7183221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86c7680d9a8fe1fad9c200386bacc0fe?s=128&d=identicon&r=PG&f=1", "display_name": "csguy", "link": "https://stackoverflow.com/users/7183221/csguy"}, "edited": false, "score": 0, "creation_date": 1567015343, "post_id": 57697631, "comment_id": 101839795, "body": "So make doesn&#39;t parse source files, it just knows that it was modified?"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 1195, "user_id": 7183221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86c7680d9a8fe1fad9c200386bacc0fe?s=128&d=identicon&r=PG&f=1", "display_name": "csguy", "link": "https://stackoverflow.com/users/7183221/csguy"}, "edited": false, "score": 0, "creation_date": 1567015579, "post_id": 57697631, "comment_id": 101839871, "body": "@csguy Yes, it looks at the modification dates of files to figure out whether any of the dependencies have been edited after the target was created/modified. It doesn&#39;t care about the contents."}, {"owner": {"reputation": 69991, "user_id": 939557, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/3VPea.png?s=128&g=1", "display_name": "MadScientist", "link": "https://stackoverflow.com/users/939557/madscientist"}, "edited": false, "score": 3, "creation_date": 1567016143, "post_id": 57697631, "comment_id": 101840071, "body": "Make doesn&#39;t know anything about any particular programming languages.  It can be used with C, C++, latex, FORTRAN, or <i>anything</i> else where if one file changes then some command needs to be run to bring another file up to date.  So no, it doesn&#39;t have any built-in ability to parse C code."}], "tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": false, "score": 2, "last_activity_date": 1567015237, "last_edit_date": 1567015237, "creation_date": 1567014370, "answer_id": 57697631, "question_id": 57697345, "link": "https://stackoverflow.com/questions/57697345/proper-makefile-dependency-list-c/57697631#57697631", "title": "Proper makefile dependency list (C++)", "body": "<p>Each object file target needs to depend on its source file, obviously, but also all header files that it is including. The <code>make</code> program itself does not parse the source files, so it doesn't know what headers a source file includes. If one of the header files is missing and modified, the source file will not be automatically recompiled by <code>make</code>.</p>\n\n<p>Because tracking the header file dependencies manually is cumbersome and error-prone, there are tools to automate it, see e.g. <a href=\"https://stackoverflow.com/questions/297514/how-can-i-have-a-makefile-automatically-rebuild-source-files-that-include-a-modif/2501673\">this question</a>.</p>\n\n<p>Other source files should however not be dependencies, because one source file should not be including another, so there cannot be any dependency that isn't resolved in the later linker step in the main executable target.</p>\n\n<p>Any change in one source file that would affect a change in the compilation step of another source file would have to be through a change in the former source file's header file which is included in the later one. Therefore the header dependencies are sufficient.</p>\n\n<p>Therefore I see no justification for the textbook example you posted. The first example is fine however, as long as the project size is small enough to track the dependencies manually. The third example is wrong, because it wont recompile <code>main.cpp</code> if the header file changes. (Assuming <code>threeintsfcts.h</code> is included in <code>main.cpp</code>, which is the only thing making sense)</p>\n"}, {"tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": true, "score": 1, "last_activity_date": 1567015316, "creation_date": 1567015316, "answer_id": 57697847, "question_id": 57697345, "link": "https://stackoverflow.com/questions/57697345/proper-makefile-dependency-list-c/57697847#57697847", "title": "Proper makefile dependency list (C++)", "body": "<p>The example from your textbook:</p>\n\n<pre><code>main.o : main.cpp threeintsfcts.cpp threeintsfcts.h\n    g++ -Wall -c main.cpp \n</code></pre>\n\n<p>is wrong. The purpose of separating source code into two files is so that they can be compiled independently; if one depends on the other, they have been separated incorrectly.</p>\n\n<blockquote>\n  <p>\"...Why should any .h file be included as a dependency anyways?\n  Wouldn't a change in any .h file register as a change in the\n  respective .cpp file since the contents of the .h are just going to be\n  copy and pasted into the respective .cpp file through #include?\"</p>\n</blockquote>\n\n<p>If <code>threeintsfcts.h</code> is the only file that has been changed, then <code>main.cpp</code> has not been changed. Make is not smart enough to parse <code>main.cpp</code> and deduce that <code>threeintsfcts.h</code> ought to be a prerequisite of <code>main.o</code>. (There are ways to get Make to do that, but you must master the basics first.)</p>\n\n<blockquote>\n  <p>...In case threeintsfcts.cpp changes the name of one of its functions\n  used in main and you forget to change it in main.</p>\n</blockquote>\n\n<p>In that case you will not be able to build the executable; Make can (and will) inform you of the problem, but not fix it, no matter how you arrange the prerequisite lists.</p>\n"}], "owner": {"reputation": 1195, "user_id": 7183221, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86c7680d9a8fe1fad9c200386bacc0fe?s=128&d=identicon&r=PG&f=1", "display_name": "csguy", "link": "https://stackoverflow.com/users/7183221/csguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 1, "accepted_answer_id": 57697847, "answer_count": 3, "score": 0, "last_activity_date": 1567015316, "creation_date": 1567013077, "last_edit_date": 1567013728, "question_id": 57697345, "link": "https://stackoverflow.com/questions/57697345/proper-makefile-dependency-list-c", "title": "Proper makefile dependency list (C++)", "body": "<p>A lot of the examples I see regarding make files are somewhat inconsistent in regards to what files are considered dependencies of <code>main.o</code> and I was wondering what is the safest and most efficient way of going about creating a makefile.</p>\n\n<p>An example from <a href=\"https://www.tutorialspoint.com/makefile/makefile_quick_guide.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/makefile/makefile_quick_guide.htm</a>:</p>\n\n<pre><code>hello: main.o factorial.o hello.o\n   $(CC) main.o factorial.o hello.o -o hello\n\nmain.o: main.cpp functions.h\n   $(CC) -c main.cpp\n\nfactorial.o: factorial.cpp functions.h\n   $(CC) -c factorial.cpp\n\nhello.o: hello.cpp functions.h\n   $(CC) -c hello.cpp\n</code></pre>\n\n<p>As you can see, the header file <code>functions.h</code> is a dependency of <code>main.o</code>.</p>\n\n<p>An example from my textbook: </p>\n\n<pre><code>myprog.exe : main.o threeintsfcts.o\n    g++ main.o threeintsfcts.o -o myprog.exe\n\nmain.o : main.cpp threeintsfcts.cpp threeintsfcts.h\n    g++ -Wall -c main.cpp \n\nthreeintsfcts.o : threeintsfcts.cpp threeintsfcts.h\n    g++ -Wall -c threeintsfcts.cpp \n\nclean :\n    rm *.o myprog.exe\n</code></pre>\n\n<p>As you can see, the header file <code>.h</code> and it's <code>.cpp</code> are dependencies of <code>main.o</code>.</p>\n\n<p>I've also seen another example (from <a href=\"https://www.youtube.com/watch?v=_r7i5X0rXJk\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=_r7i5X0rXJk</a>) where the only dependency of <code>main.o</code> is <code>main.cpp</code>.</p>\n\n<p>Something like:</p>\n\n<pre><code>myprog.exe : main.o threeintsfcts.o\n        g++ main.o threeintsfcts.o -o myprog.exe\n\n    main.o : main.cpp \n        g++ -Wall -c main.cpp \n\n    threeintsfcts.o : threeintsfcts.cpp threeintsfcts.h\n        g++ -Wall -c threeintsfcts.cpp \n\n    clean :\n        rm *.o myprog.exe\n</code></pre>\n\n<hr>\n\n<p>When a <code>main.cpp</code> includes a <code>.h</code> file, should both the <code>.h</code> and its respective <code>.cpp</code> be included as dependencies?</p>\n\n<p>One of the thoughts that came into my head was this: why should any <code>.h</code> file be included as a dependency anyways? Wouldn't a change in any <code>.h</code> file register as a change in the respective <code>.cpp</code> file since the contents of the <code>.h</code> are just going to be copy and pasted into the respective <code>.cpp</code> file through #include?</p>\n\n<p>I am also unsure of whether to have the respective <code>.cpp</code> as a dependency.<br>\n(ex. <code>main.o : main.cpp threeintsfcts.cpp threeintsfcts.h</code>). \nI think doing so would go against one of the main benefits of makefiles which is the efficiency of modular compilation. (You would have to recompile the <code>main</code> whenever <code>threeintsfcts.cpp</code> changes).</p>\n\n<p>However, it might make sense to do so in case <code>threeintsfcts.cpp</code> changes the name of one of its functions used in <code>main</code> and you forget to change it in <code>main</code>.</p>\n"}, {"tags": ["c++", "cmake", "mingw-w64", "assimp"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1567013852, "post_id": 57697306, "comment_id": 101839203, "body": "Guessing: are you trying to build using a 32bit compiler rather than a 64bit one and the file is greater than 2 (or 3.5) GB?"}], "answers": [{"tags": [], "owner": {"reputation": 339, "user_id": 6047462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484b2b0724cfff138e254fc019152ef2?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantine Kozachuck", "link": "https://stackoverflow.com/users/6047462/konstantine-kozachuck"}, "is_accepted": true, "score": 0, "last_activity_date": 1567019043, "creation_date": 1567019043, "answer_id": 57698642, "question_id": 57697306, "link": "https://stackoverflow.com/questions/57697306/building-assimp-with-mingw-causes-file-too-big-error/57698642#57698642", "title": "Building ASSIMP with MinGW causes file too big error", "body": "<p>This error is fixed by assimp itself <a href=\"https://github.com/assimp/assimp/issues/2406\" rel=\"nofollow noreferrer\">https://github.com/assimp/assimp/issues/2406</a> Which version do you use?</p>\n"}, {"tags": [], "owner": {"reputation": 361, "user_id": 7683041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a537ca4cf2f7b646a88e76f592ee46?s=128&d=identicon&r=PG&f=1", "display_name": "PJ127", "link": "https://stackoverflow.com/users/7683041/pj127"}, "is_accepted": false, "score": 0, "last_activity_date": 1579704077, "creation_date": 1579704077, "answer_id": 59862173, "question_id": 57697306, "link": "https://stackoverflow.com/questions/57697306/building-assimp-with-mingw-causes-file-too-big-error/59862173#59862173", "title": "Building ASSIMP with MinGW causes file too big error", "body": "<p>What worked for me :<br>\nGo into the CMakeLists.txt and add:</p>\n\n<pre><code>set(CMAKE_CXX_FLAGS ${CMAKE_CXX_FLAGS} \"-O3\")\n</code></pre>\n\n<p>Then compile with some options off:</p>\n\n<pre><code>cmake .. -G \"Unix Makefiles\" -DASSIMP_BUILD_ASSIMP_TOOLS=OFF -DASSIMP_BUILD_TESTS=OFF\nmake -j4 &amp;&amp; make install\n</code></pre>\n\n<p>It worked for 5.0.0-rc1 and 5.0.1 too.</p>\n"}], "owner": {"reputation": 13, "user_id": 11853204, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d17nu13fUS4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rexTFxHYBS9qzEs8Vd9CX0fs-A_8g/photo.jpg?sz=128", "display_name": "Tim Horton", "link": "https://stackoverflow.com/users/11853204/tim-horton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 1, "accepted_answer_id": 57698642, "answer_count": 2, "score": 1, "last_activity_date": 1579704077, "creation_date": 1567012899, "last_edit_date": 1567016560, "question_id": 57697306, "link": "https://stackoverflow.com/questions/57697306/building-assimp-with-mingw-causes-file-too-big-error", "title": "Building ASSIMP with MinGW causes file too big error", "body": "<p>I am building ASSIMP using cmake and mingw-w64 on windows 10 and it gives me \"file too big\" errors while creating the object code. I tried using MinGW and MinGW-w64 and both give me the same error. I am using the default settings, I configure the project with cmake, generate the makefile and then run mingw32-make. Is there some kind of flag I can set to fix this? </p>\n\n<p>Compiler:</p>\n\n<pre><code>g++ (x86_64-posix-seh-rev0, Built by MinGW-W64 project) 8.1.0\n</code></pre>\n\n<p>Here is the output:   </p>\n\n<pre><code>[ 59%] Building CXX object code/CMakeFiles/assimp.dir/Importer/StepFile/StepFileImporter.cpp.obj\n[ 60%] Building CXX object code/CMakeFiles/assimp.dir/Importer/StepFile/StepFileGen1.cpp.obj\nC:/mingw-w64/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/8.1.0/../../../../x86_64-w64-mingw32/bin/as.exe: \nCMakeFiles\\assimp.dir\\Importer\\StepFile\\StepFileGen1.cpp.obj: section .xdata$_ZNSt10_Head_baseILy0EPN6Assimp8StepFile29directed_dimensional_locationELb0EE7_M_headERKS4_: \nstring table overflow at offset 10000029\nC:\\Users\\ANDREW~1.NOT\\AppData\\Local\\Temp\\ccwwseVM.s: Assembler messages:\nC:\\Users\\ANDREW~1.NOT\\AppData\\Local\\Temp\\ccwwseVM.s: Fatal error: can't close CMakeFiles\\assimp.dir\\Importer\\StepFile\\StepFileGen1.cpp.obj: File too big\nmingw32-make[2]: *** [code\\CMakeFiles\\assimp.dir\\build.make:2485: code/CMakeFiles/assimp.dir/Importer/StepFile/StepFileGen1.cpp.obj] Error 1\nmingw32-make[1]: *** [CMakeFiles\\Makefile2:274: code/CMakeFiles/assimp.dir/all] Error 2\nmingw32-make: *** [Makefile:129: all] Error 2\n</code></pre>\n\n<p>EDIT: I was using the master branch of Assimp from github, which has newer experimental features. I downloaded an older release version and I did not get the same errors. </p>\n"}, {"tags": ["c++", "arrays", "vector", "subscript"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1567011737, "post_id": 57697021, "comment_id": 101838294, "body": "What about <code>std::vector</code> and <code>std::fill()</code>?"}, {"owner": {"reputation": 2156, "user_id": 3476954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fb810a12cd393949bca88e4b0cdba75?s=128&d=identicon&r=PG&f=1", "display_name": "Mansoor", "link": "https://stackoverflow.com/users/3476954/mansoor"}, "edited": false, "score": 1, "creation_date": 1567011997, "post_id": 57697021, "comment_id": 101838410, "body": "If you want linear algebra for C++, I would recommend <code>Eigen</code>. It is a header-only library that provides an interface which is similar to Matlab. It has the index slicing notation you are looking for."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1567013272, "post_id": 57697021, "comment_id": 101838971, "body": "<code>std::valarray</code> and <code>std::indirect_array</code> should be mentioned here."}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 2, "last_activity_date": 1567012803, "creation_date": 1567012803, "answer_id": 57697288, "question_id": 57697021, "link": "https://stackoverflow.com/questions/57697021/fortran-array-access-via-vector-subscripts-cpp-equivalent/57697288#57697288", "title": "Fortran array access via vector subscripts, cpp equivalent", "body": "<p>Given (suitably initialized):</p>\n\n<pre><code>std::vector&lt;int&gt; iv1, ivcr;\nstd::vector&lt;std::vector&lt;int&gt;&gt; val;\n</code></pre>\n\n<p>Then your <code>iv1(ivcr(val(i,j)))=1</code> is simply</p>\n\n<pre><code>iv1[ivcr[val[i][j]]] = 1;\n</code></pre>\n\n<p>As for <code>iv1(ivcr(val(i:j,j)))=1</code>, or just <code>val(i:j, j)</code>, there is no inbuilt way to slice into arrays like this. To be able to assign <code>1</code> to these kinds of nested datastructure accesses, you would need datastructures that provide expression templates. The <code>Eigen</code> library has just that and is one of the major linear algebra libraries for C++. Check out their documentation for indexing and slicing here:</p>\n\n<p><a href=\"https://eigen.tuxfamily.org/dox-devel/group__TutorialSlicingIndexing.html\" rel=\"nofollow noreferrer\">https://eigen.tuxfamily.org/dox-devel/group__TutorialSlicingIndexing.html</a></p>\n"}], "owner": {"reputation": 159, "user_id": 1407220, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/abf9e348a0dbc4d23b5da119a3a139d4?s=128&d=identicon&r=PG", "display_name": "user1407220", "link": "https://stackoverflow.com/users/1407220/user1407220"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 57697288, "answer_count": 1, "score": 2, "last_activity_date": 1567013703, "creation_date": 1567011519, "last_edit_date": 1567013703, "question_id": 57697021, "link": "https://stackoverflow.com/questions/57697021/fortran-array-access-via-vector-subscripts-cpp-equivalent", "title": "Fortran array access via vector subscripts, cpp equivalent", "body": "<p>I am wondering whether there is a cpp equivalent to accessing array locations in fortran via indexes stored in other arrays</p>\n\n<p>I am novice to cpp but experienced in oop fortran. I am thinking about leaving fortran behind for the much better support of oop in recent cpp (oop in fortran is probably at the stage of year 2000 cpp).</p>\n\n<p>However, my applications are heavily geared towards linear algebra. Contrarily to cpp, fortran has a lot of compiler built in support for this. But I would happily load libraries in cpp for gaining elaborate oop support.</p>\n\n<p>But if the below construct is missing in cpp that would be really annoying. </p>\n\n<p>As I haven't found anything related yet I would appreciate if some experienced cpp programmer could comment.</p>\n\n<p>An assignment to a 1D array location in fortan using a cascade of vector subscripts can be a complex as this:</p>\n\n<pre><code>iv1(ivcr(val(i,j)))=1\n</code></pre>\n\n<p>where iv1 is a 1D integer vector, ivcr is a 1D integer vector, val is a 2D integer array and i and j are scalars. I am wondering whether I could write this in a similar compact form in cpp.</p>\n\n<p>A only slightly more complex example would be:</p>\n\n<pre><code>iv1(ivcr(val(i:j,j)))=1\n</code></pre>\n\n<p>which will fill a section in iv1 with \"1\".</p>\n\n<p>How would cpp deal with that problem in the shortest possible way.</p>\n"}, {"tags": ["c++", "sfinae", "detection-idiom"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1567011115, "post_id": 57696886, "comment_id": 101838067, "body": "So, is this code working or not?  It&#39;s not clear to me exactly what you are asking."}, {"owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567011631, "post_id": 57696886, "comment_id": 101838263, "body": "@NathanOliver Make CanDoX correctly detect the permitted overload."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1567012106, "post_id": 57696886, "comment_id": 101838450, "body": "<i>Somehow, there has to be a Bar val before the test for x(val)</i> - isn&#39;t that what <code>std::declval&lt;T&gt;()</code> does?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1567012150, "post_id": 57696886, "comment_id": 101838466, "body": "Do you want <code>std::declval&lt;const T&amp;&gt;()</code> ?"}, {"owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1567012281, "post_id": 57696886, "comment_id": 101838528, "body": "@Jarod42 Yes, that worked. You may write that as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 0, "last_activity_date": 1567014407, "last_edit_date": 1567014407, "creation_date": 1567013536, "answer_id": 57697445, "question_id": 57696886, "link": "https://stackoverflow.com/questions/57696886/sfinae-to-detect-operation-when-it-is-forbidden-to-call-with-temporary/57697445#57697445", "title": "SFINAE to detect operation when it is forbidden to call with temporary", "body": "<p><code>std::declval&lt;T&gt;()</code> returns a <code>T&amp;&amp;</code> so the better match is <code>Foo const&amp; x(Bar const&amp;&amp;)</code>.</p>\n\n<p>but you can use lvalue reference inside <code>std::declval</code> to get lvalue:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct CanDoX&lt;T, std::void_t&lt;decltype(x(std::declval&lt;T&amp;&gt;()))&gt;&gt;:std::true_type{};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>template&lt;class T&gt;\nstruct CanDoX&lt;T, std::void_t&lt;decltype(x(std::declval&lt;const T&amp;&gt;()))&gt;&gt;:std::true_type{};\n</code></pre>\n\n<p>Depending of your needs.</p>\n"}], "owner": {"reputation": 5309, "user_id": 877329, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b5c9fa7b8fa8139c1330b5fbbd5f934?s=128&d=identicon&r=PG", "display_name": "user877329", "link": "https://stackoverflow.com/users/877329/user877329"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57697445, "answer_count": 1, "score": 1, "last_activity_date": 1567014407, "creation_date": 1567010912, "question_id": 57696886, "link": "https://stackoverflow.com/questions/57696886/sfinae-to-detect-operation-when-it-is-forbidden-to-call-with-temporary", "title": "SFINAE to detect operation when it is forbidden to call with temporary", "body": "<p>It is possible to use the following pattern to detect whether or not x can be applied to T</p>\n\n<pre><code>template&lt;class T, class Enable = void&gt;\nstruct CanDoX: std::false_type{};\n\ntemplate&lt;class T&gt;\nstruct CanDoX&lt;T, std::void_t&lt;decltype(x(std::declval&lt;T&gt;()))&gt;&gt;:std::true_type{};\n</code></pre>\n\n<p>What if <code>x</code> has been defined as</p>\n\n<pre><code>Foo const&amp; x(Bar const&amp;&amp;) = delete;\nFoo const&amp; x(Bar const&amp; val) \n    {return val.get();}\n</code></pre>\n\n<p>Now <code>CanDoX&lt;Bar&gt;::value</code> is <code>false</code>, because no overload accepts a temporary. Somehow, there has to be a <code>Bar val</code> before the test for <code>x(val)</code>.</p>\n"}, {"tags": ["c++", "main"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 6, "creation_date": 1567010617, "post_id": 57696790, "comment_id": 101837868, "body": "You can&#39;t call <code>main</code> in C++. Trying to is Undefined Behavior so there is no logic to explain."}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 2, "creation_date": 1567010686, "post_id": 57696790, "comment_id": 101837893, "body": "It may or may work as you expect (or at all).  Calling main explicitly is undefined behavior."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1567010707, "post_id": 57696790, "comment_id": 101837903, "body": "&quot;Calling main() in any other function in c++&quot; - Calling <code>main()</code> is <i>not</i> allowed in C++. If you do it your program has <a href=\"https://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">Undefined Behaviour</a> and is essentially meaningless and your compiler is no longer required to generate anything meaningful for <i>the entire program</i>. Nor is the compiler required to issue any diagnostic - it&#39;s explicitly allowed to silently assume that no UB is present. It&#39;s <i>your</i> responsibility to know <i>all</i> the rules of C++ and <i>never</i> break them. The compiler will not help you, it will just asume you didn&#39;t break any rules."}, {"owner": {"reputation": 51, "user_id": 11958275, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xD2TaT93kIU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfq-ofKSD-sVfoxuplUWXM2qTuD0A/photo.jpg?sz=128", "display_name": "Ghazanfar Ateeb", "link": "https://stackoverflow.com/users/11958275/ghazanfar-ateeb"}, "edited": false, "score": 0, "creation_date": 1567010897, "post_id": 57696790, "comment_id": 101837982, "body": "Please review the post i added the output i got. Thank you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 5, "creation_date": 1567010979, "post_id": 57696790, "comment_id": 101838009, "body": "It doesn&#39;t matter what output you got - UB is UB."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1567011163, "post_id": 57696790, "comment_id": 101838085, "body": "@StrangePerson The output of a program is part of it&#39;s observable behavior. Since your program encounters Undefined Behavior during it&#39;s execution the language makes no guarantee about it&#39;s observable behavior. That means it makes no guarantee about it&#39;s output, so it&#39;s meaningless. Sure, it might have <i>this</i> output this time, but on another day, or with another compiler, or due to unrelated changes in the code or for any other possible reason the output might change."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1567011388, "post_id": 57696790, "comment_id": 101838169, "body": "I didn&#39;t see a question in your post. Do you have a specific question?"}, {"owner": {"reputation": 51, "user_id": 11958275, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xD2TaT93kIU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfq-ofKSD-sVfoxuplUWXM2qTuD0A/photo.jpg?sz=128", "display_name": "Ghazanfar Ateeb", "link": "https://stackoverflow.com/users/11958275/ghazanfar-ateeb"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1567011600, "post_id": 57696790, "comment_id": 101838251, "body": "@RSahu My question was to get the logic behind this unusual behavior."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1567012203, "post_id": 57696790, "comment_id": 101838489, "body": "@StrangePerson As soon as a program has <i>any</i> UB <i>anywhere</i>, all attempts to reason about logic are futile. There is <i>no</i> expected behaviour when the program contains UB. It may do exactly what you expect, it may do nothing at all, it may crash, it may format your harddrive, it may do random things on each invocation - literally <i>anything</i> is OK if there&#39;s UB in your code."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1567012318, "post_id": 57696790, "comment_id": 101838549, "body": "I suggest creating a function <code>myMain</code> with the same signature as <code>main</code>, moving the contents of <code>main</code> to <code>myMain</code>, using <code>myMain</code> instead of <code>main</code> from <code>max</code>, and changing the contents of <code>main</code> to <code>return myMain();</code>. That would remove UB and you are more likely to get a response."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1567012549, "post_id": 57696790, "comment_id": 101838644, "body": "you got absolute correct output. in what your problem/question ? <i>unusual behavior.</i> ? absolute usual and logic behavior. correct output (based on your program logic)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1567012928, "post_id": 57696790, "comment_id": 101838825, "body": "BTW, there is a <code>max</code> function in the <code>std</code> namespace.  So to avoid conflicts with your <code>max</code> function, <i>don&#39;t use <code>using namespace std;</code></i>.  Either us the <code>using std::cout;</code> for the individual elements you are using or prefix them with <code>std::</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1567013167, "post_id": 57696790, "comment_id": 101838928, "body": "That&#39;s a bad dupe."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1567015052, "post_id": 57696790, "comment_id": 101839702, "body": "<a href=\"https://stackoverflow.com/a/39442655/4581301\">Useful discussion</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1567018481, "post_id": 57696790, "comment_id": 101840952, "body": "@JesperJuhl I feel your comment may be misinterpreted. There can be UB in a branch and, as long as control flow never reaches that branch, the program&#39;s behavior is fine. Some sources of UB invalidate the entire code base immediately (for example violating ODR) but that is not usually the case."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1567018926, "post_id": 57696790, "comment_id": 101841130, "body": "@Fran&#231;oisAndrieux Got a standard quote? As <i>I</i> read the standard, <i>any</i> UB, <i>anywhere</i>, renders the entire program meaningless. Branch or no branch, taken or not."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1567019220, "post_id": 57696790, "comment_id": 101841260, "body": "@JesperJuhl Well, yes, if you <i>have</i> UB everything is broken. But my comment addresses the wording of your comment. It&#39;s not clear to an unfamiliar reader that most UB is only UB if it&#39;s encountered (or would be encountered). Example : Having an integer division by zero is UB. But only if the offending expression would be evaluated. So, the potential division would have UB, it is in the code, but the program isn&#39;t UB unless that expression becomes unavoidable."}, {"owner": {"reputation": 51, "user_id": 11958275, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xD2TaT93kIU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfq-ofKSD-sVfoxuplUWXM2qTuD0A/photo.jpg?sz=128", "display_name": "Ghazanfar Ateeb", "link": "https://stackoverflow.com/users/11958275/ghazanfar-ateeb"}, "edited": false, "score": 0, "creation_date": 1567023351, "post_id": 57696790, "comment_id": 101842870, "body": "My task was to find can we call main() in any other function or not. Therefore, my first priority was to find whether the programs works or not. Secondly, if it works what kind of behavior is observed and the third priority was to find why it is haopening. So I got the answers. Thank you all my task was done."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567018572, "post_id": 57698505, "comment_id": 101840986, "body": "<code>using namespace std;</code> is pretty much unanimously viewed as a bad idea by experienced developers. There are cases where it&#39;s not so bad (private .cpp files, and even then it&#39;s not a good idea) but nobody should complain that you didn&#39;t use it. If anybody complains that you removed it, you can safely ignore them."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567018703, "post_id": 57698505, "comment_id": 101841038, "body": "Congratulations on fixing your code. One note, that <code>while</code> loop where you loop, increment a variable until it reaches a value, is more clearly expressed by a <code>for</code> loop."}, {"owner": {"reputation": 159, "user_id": 8212390, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IIgFbouePYo/AAAAAAAAAAI/AAAAAAAAAE4/8YeCc361Ncw/photo.jpg?sz=128", "display_name": "xX randomryze Xx", "link": "https://stackoverflow.com/users/8212390/xx-randomryze-xx"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567018911, "post_id": 57698505, "comment_id": 101841124, "body": "Yeah a for loop would do it, It really was the first thing that came to my mind with the while loop, thanks for noting that. @Fran&#231;oisAndrieux"}, {"owner": {"reputation": 51, "user_id": 11958275, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xD2TaT93kIU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfq-ofKSD-sVfoxuplUWXM2qTuD0A/photo.jpg?sz=128", "display_name": "Ghazanfar Ateeb", "link": "https://stackoverflow.com/users/11958275/ghazanfar-ateeb"}, "edited": false, "score": 0, "creation_date": 1567023288, "post_id": 57698505, "comment_id": 101842842, "body": "My task was to find can we call main() in any other function or not. Therefore, my first priority was to find whether the programs works or not. Secondly, if it works what kind of behavior is observed and the third priority was to find why it is haopening. So I got the answers. Thank you all my work is done."}], "tags": [], "owner": {"reputation": 159, "user_id": 8212390, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IIgFbouePYo/AAAAAAAAAAI/AAAAAAAAAE4/8YeCc361Ncw/photo.jpg?sz=128", "display_name": "xX randomryze Xx", "link": "https://stackoverflow.com/users/8212390/xx-randomryze-xx"}, "is_accepted": false, "score": 1, "last_activity_date": 1567019425, "last_edit_date": 1567019425, "creation_date": 1567018397, "answer_id": 57698505, "question_id": 57696790, "link": "https://stackoverflow.com/questions/57696790/unusual-behavior-observed-while-calling-main-in-any-other-function-in-c/57698505#57698505", "title": "Unusual Behavior observed while calling main() in any other function in c++", "body": "<p>So I worked a bit on your code, and managed to maybe make it work as you intended it do to. It really wasn't such a big deal. I found a cleaner and easier to read code.</p>\n\n<p>The changes in the code are 1st in the beginning :</p>\n\n<pre><code>#include &lt;iostream&gt;\nvoid max(int a, int b, int c);\nint a, b, c;\nint main()\n{\nfor(int p = 0; p &lt; 3; p++) {\n    std::cout &lt;&lt; \"\\n\\n\";\n    std::cout &lt;&lt; \"Enter 1st number :\\t\";\n    std::cin &gt;&gt; a;\n    std::cout &lt;&lt; \"Enter 2nd number :\\t\";\n    std::cin &gt;&gt; b;\n    std::cout &lt;&lt; \"Enter 3rd number :\\t\";\n    std::cin &gt;&gt; c;\n    max(a, b, c);\n    std::cout &lt;&lt; \"\\n\\n\\n\";\n}\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p>You can see I removed the using namespace std; because I really don't like having that, you can add it if you want it it's just my preference. You see I made the whole code repeat in a for loop to remove the calling of the main function, and don't worry many of us have done it too. As you can see I also changes the max() function's parameters\nThe second change in the code is in the last part of the code:</p>\n\n<pre><code>void max(int a, int b, int c)\n{\n\nif (a &gt; b&amp;&amp;a &gt; c)\n{\n    std::cout &lt;&lt; a &lt;&lt; \" is maximum\";\n}\nelse if (b &gt; a&amp;&amp;b &gt; c)\n{\n    std::cout &lt;&lt; b &lt;&lt; \" is maximum\";\n}\nelse\n{\n    std::cout &lt;&lt; c &lt;&lt; \" is maximum\";\n}\n}\n</code></pre>\n\n<p>Here I just removed the part of the code which calls the main function. And overall it's all that had to change in your code to work.</p>\n"}], "owner": {"reputation": 51, "user_id": 11958275, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xD2TaT93kIU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfq-ofKSD-sVfoxuplUWXM2qTuD0A/photo.jpg?sz=128", "display_name": "Ghazanfar Ateeb", "link": "https://stackoverflow.com/users/11958275/ghazanfar-ateeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1567019425, "creation_date": 1567010513, "last_edit_date": 1567011478, "question_id": 57696790, "link": "https://stackoverflow.com/questions/57696790/unusual-behavior-observed-while-calling-main-in-any-other-function-in-c", "title": "Unusual Behavior observed while calling main() in any other function in c++", "body": "<p>I made a simple program to test whether I am able to call main in any other function like we call different functions in other function.</p>\n\n<p>Therefore, I made a program to generate the maximum number by getting input of 3 numbers from the user. For this I made the function containing if else. Surprisingly (especially for me) it worked. I got that I am keep inputting the numbers then I made another variable to control the inputs. I made it to input 3 times. I got answer from bottom to end and 3 answers are generated.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main();\nvoid max(int a, int b, int c,int p);\nint p = 0;\nint main()\n{\n    p++;\n    int a, b, c;\n    cout &lt;&lt; \"\\n\\n\";\n    cout &lt;&lt; \"Enter 1st number :\\t\";\n    cin &gt;&gt; a;\n    cout &lt;&lt; \"Enter 2nd number :\\t\";\n    cin &gt;&gt; b;\n    cout &lt;&lt; \"Enter 3rd number :\\t\";\n    cin &gt;&gt; c;\n    max(a, b, c, p);\n    cout &lt;&lt; \"\\n\\n\\n\";\n    system(\"pause\");\n    return 0;\n}\nvoid max(int a, int b, int c,int p)\n{\n    if (p &lt; 3) \n    {\n        main();\n    }\n    if (a &gt; b&amp;&amp;a &gt; c)\n    {\n        cout &lt;&lt; a &lt;&lt; \" is maximum\";\n    }\n    else if (b &gt; a&amp;&amp;b &gt; c)\n    {\n        cout &lt;&lt; b &lt;&lt; \" is maximum\";\n    }\n    else\n    {\n        cout &lt;&lt; c &lt;&lt; \" is maximum\";\n    }\n}\n</code></pre>\n\n<p>The output was as follows: -</p>\n\n<pre><code>\n\nEnter 1st number :      12                                                                                              \nEnter 2nd number :      14                                                                                              \nEnter 3rd number :      15\n\n\nEnter 1st number :      45                                                                                              \nEnter 2nd number :      69                                                                                              \nEnter 3rd number :      88  \n\n\nEnter 1st number :      14                                                                                      \nEnter 2nd number :      20                                                                                              \nEnter 3rd number :      11                                                                                             \n20 is maximum             \n\n\n                                                                                                                                                                                                                                                                                                                                              Press any key to continue . . .                                                                                         \n88 is maximum                                                                                                                                                                                                                                                                                                                                                           \n\n\n\nPress any key to continue . . .                                                                                         \n15 is maximum                                                                                                                                                                                                                                                                                                                                                           \n\n\n\nPress any key to continue . . .  \n</code></pre>\n\n<p>I don't get the logic behind it. I used Visual Studio 2017 for this.</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 4492940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bNnVc.png?s=128&g=1", "display_name": "gyok", "link": "https://stackoverflow.com/users/4492940/gyok"}, "edited": false, "score": 0, "creation_date": 1567076955, "post_id": 57696861, "comment_id": 101859761, "body": "I could not repeat your example (R literal and sv not working in one time for me). But I add spaces and line breaks, separate P3 in two letters and it start working. <code>unsigned char data[] = {     &#39;P&#39;,&#39;3&#39;,&#39;\\n&#39;,     &#39;1&#39;, &#39; &#39;, &#39;1&#39;,&#39;\\n&#39;,     &#39;255&#39;,&#39;\\n&#39;,     &#39;25&#39;,&#39; &#39;, &#39;0&#39;,&#39; &#39;, &#39;0&#39;   };</code>"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "reply_to_user": {"reputation": 319, "user_id": 4492940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bNnVc.png?s=128&g=1", "display_name": "gyok", "link": "https://stackoverflow.com/users/4492940/gyok"}, "edited": false, "score": 0, "creation_date": 1567079491, "post_id": 57696861, "comment_id": 101861225, "body": "row literal is available since <code>C++11</code> (language feature). <code>sv</code> suffix since <code>C++17</code> (standard library feature, you need include <code>string_view</code> header)."}], "tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": true, "score": 1, "last_activity_date": 1567011151, "last_edit_date": 1567011151, "creation_date": 1567010794, "answer_id": 57696861, "question_id": 57696630, "link": "https://stackoverflow.com/questions/57696630/how-fill-qpixmap-with-uchar-array-in-ppm-format/57696861#57696861", "title": "How fill QPixmap with uchar* array in PPM format", "body": "<p>First of all you must understand that PPM is text representation of some image. Now your <code>data</code> has been setup incorrectly that is why loading fails (missing spaces or line breaks makes this text unreadable).</p>\n\n<p>it can go like this (using c++17 <code>std::string_view</code>):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>using namespace std::string_view_literals;\n\n// this is a string view created from raw string literal\nconstexpr auto ppmImageData = R\"(P3\n3 2\n255\n255   0 0      0 255   0    0 0 255\n255 255 0    255 255 255    0 0   0\n)\"sv;\n\nImageViewer::ImageViewer(QWidget * pi_parent)\n  : QLabel{ QString{\"ImageViewer\" }, pi_parent }\n  , m_pixmap{ 3, 2}\n{\n  m_pixmap.loadFromData(ppmImageData.data(), ppmImageData.size(), \"PPM\");\n  this-&gt;setScaledContents(true);\n  this-&gt;setPixmap(m_pixmap);\n}\n</code></pre>\n\n<p>Dropping <code>std::string_view</code> (if you do not have C++17) is quite simple: just remove <code>sv</code> suffix and correct arguments of <code>loadFromData</code> invocation.</p>\n"}], "owner": {"reputation": 319, "user_id": 4492940, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bNnVc.png?s=128&g=1", "display_name": "gyok", "link": "https://stackoverflow.com/users/4492940/gyok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 57696861, "answer_count": 1, "score": 0, "last_activity_date": 1567015364, "creation_date": 1567009658, "last_edit_date": 1567015364, "question_id": 57696630, "link": "https://stackoverflow.com/questions/57696630/how-fill-qpixmap-with-uchar-array-in-ppm-format", "title": "How fill QPixmap with uchar* array in PPM format", "body": "<p>I generate array of dots colors in PPM format (255 255 255). How I can show it in pixmap?</p>\n\n<p>If I fill pixmap with bluecolor (<code>m_pixmap.fill(Qt::blue)</code>) program draw for me a blue square, but when I trying load PPM image I get empty space without any image.</p>\n\n<p>I am loading ppm in this way:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>ImageViewer::ImageViewer(QWidget * pi_parent)\n  : QLabel{ QString{\"ImageViewer\" }, pi_parent }\n  , m_pixmap{ 3, 2}\n{\n  m_pixmap.fill(Qt::blue);\n  unsigned char data[] = {\n    'P3',\n    '3', '2',\n    '255',\n    '255', '0', '0',\n    '0', '255', '0',\n    '0', '0', '255',\n    '255', '255', '0',\n    '255', '255', '255',\n    '0', '0', '0'\n  };\n  m_pixmap.loadFromData(data, sizeof(data), \"PPM\");\n  this-&gt;setScaledContents(true);\n  this-&gt;setPixmap(m_pixmap);\n}\n</code></pre>\n\n<p>How I can set PPM image from array of colors? (without reading from file)</p>\n"}, {"tags": ["c++", "linux", "networking", "concurrency", "network-programming"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1567010018, "post_id": 57696537, "comment_id": 101837639, "body": "Note to close-voters: I don&#39;t think this is a request for library. It&#39;s more a &quot;What Linux system call do I use to get network interface statistics?&quot;"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 2, "creation_date": 1567013598, "post_id": 57696537, "comment_id": 101839105, "body": "Maybe take a look at <a href=\"https://www.google.com/search?q=ifconfig+filetype%3Ac&amp;oq=ifconfig+filetype%3Ac\" rel=\"nofollow noreferrer\"><code>net-tools&#47;ifconfig.c</code></a> source code (and <a href=\"https://github.com/giftnuss/net-tools/blob/master/statistics.c\" rel=\"nofollow noreferrer\"><code>statistics.c</code></a>). It looks like <code>ioctl</code> is used."}, {"owner": {"reputation": 944, "user_id": 1499575, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/82374abfce29c20a6f214de4fa2226f5?s=128&d=identicon&r=PG", "display_name": "mreff555", "link": "https://stackoverflow.com/users/1499575/mreff555"}, "edited": false, "score": 0, "creation_date": 1567170824, "post_id": 57696537, "comment_id": 101894936, "body": "Thanks, I updated my research above."}], "owner": {"reputation": 944, "user_id": 1499575, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/82374abfce29c20a6f214de4fa2226f5?s=128&d=identicon&r=PG", "display_name": "mreff555", "link": "https://stackoverflow.com/users/1499575/mreff555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567170408, "creation_date": 1567009218, "last_edit_date": 1567170408, "question_id": 57696537, "link": "https://stackoverflow.com/questions/57696537/is-there-an-interface-for-network-interface-error-data", "title": "Is there an interface for network interface error data", "body": "<p>I'm trying to find an interface to track error linux network data such as the errors/dropped/overruns/frame errors displayed with ifconfig or ethtool.\nI've been grepping through /usr/include attempting to find something with no luck.  </p>\n\n<p>I realize this may just be a boolean flag as opposed to a counter which will be fine since I'm just trying to track overruns over time.</p>\n\n<p>Does a system call, or global variable exist for this information?</p>\n\n<h2>UPDATE</h2>\n\n<p>As suggested I took a look at the output of strace and as suggested and suspected, most of the information does seem to come by way of the ioctl library, however error data seems to come from a flat /proc file which I was not aware of \"/proc/net/dev\"</p>\n\n<p>This generates a couple of questions:</p>\n\n<ol>\n<li><p>If the only information I need is in that file, would I need to even bother with sockets?</p></li>\n<li><p>How fast can I query this information without causing detriment to the system?  I want to have time stamps associated with overflows, and I was hoping to monitor at 5s intervals but ramp up to 0.5s or less when the value begins to increment.</p></li>\n<li><p>I tried to capture the buffer using read()/write()/mmap() and the other commands mentioned in strace, and having some difficulty doing so.  If I were to just use fstream instead would this be any more/less likely to cause blocking/threading issues?</p>\n\n<pre><code>dmf86@tux5:/$ strace ifconfig eth0\n</code></pre>\n\n<p>execve(\"/sbin/ifconfig\", [\"ifconfig\", \"eth0\"], 0x7ffc92588278 /* 24 vars */) = 0\nbrk(NULL)                               = 0x565327409000\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\naccess(\"/etc/ld.so.preload\", R_OK)      = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/etc/ld.so.cache\", O_RDONLY|O_CLOEXEC) = 3\nfstat(3, {st_mode=S_IFREG|0644, st_size=227061, ...}) = 0\nmmap(NULL, 227061, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f2f042af000\nclose(3)                                = 0\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/lib/x86_64-linux-gnu/libc.so.6\", O_RDONLY|O_CLOEXEC) = 3\nread(3, \"\\177ELF\\2\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0\\260\\34\\2\\0\\0\\0\\0\\0\"..., 832) = 832\nfstat(3, {st_mode=S_IFREG|0755, st_size=2030544, ...}) = 0\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f2f042ad000\nmmap(NULL, 4131552, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f2f03ccf000\nmprotect(0x7f2f03eb6000, 2097152, PROT_NONE) = 0\nmmap(0x7f2f040b6000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x1e7000) = 0x7f2f040b6000\nmmap(0x7f2f040bc000, 15072, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f2f040bc000\nclose(3)                                = 0\narch_prctl(ARCH_SET_FS, 0x7f2f042ae540) = 0\nmprotect(0x7f2f040b6000, 16384, PROT_READ) = 0\nmprotect(0x565326999000, 4096, PROT_READ) = 0\nmprotect(0x7f2f042e7000, 4096, PROT_READ) = 0\nmunmap(0x7f2f042af000, 227061)          = 0\nbrk(NULL)                               = 0x565327409000\nbrk(0x56532742a000)                     = 0x56532742a000\nopenat(AT_FDCWD, \"/usr/lib/locale/locale-archive\", O_RDONLY|O_CLOEXEC) = 3\nfstat(3, {st_mode=S_IFREG|0644, st_size=3004464, ...}) = 0\nmmap(NULL, 3004464, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f2f039f1000\nclose(3)                                = 0\nuname({sysname=\"Linux\", nodename=\"tux5\", ...}) = 0\naccess(\"/proc/net\", R_OK)               = 0\naccess(\"/proc/net/unix\", R_OK)          = 0\nsocket(AF_UNIX, SOCK_DGRAM, 0)          = 3\nsocket(AF_INET, SOCK_DGRAM, IPPROTO_IP) = 4\naccess(\"/proc/net/if_inet6\", R_OK)      = 0\nsocket(AF_INET6, SOCK_DGRAM, IPPROTO_IP) = 5\naccess(\"/proc/net/ax25\", R_OK)          = -1 ENOENT (No such file or directory)\naccess(\"/proc/net/nr\", R_OK)            = -1 ENOENT (No such file or directory)\naccess(\"/proc/net/rose\", R_OK)          = -1 ENOENT (No such file or directory)\naccess(\"/proc/net/ipx\", R_OK)           = -1 ENOENT (No such file or directory)\naccess(\"/proc/net/appletalk\", R_OK)     = -1 ENOENT (No such file or directory)\naccess(\"/proc/sys/net/econet\", R_OK)    = -1 ENOENT (No such file or directory)\naccess(\"/proc/sys/net/ash\", R_OK)       = -1 ENOENT (No such file or directory)\naccess(\"/proc/net/x25\", R_OK)           = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/proc/net/dev\", O_RDONLY) = 6\nfstat(6, {st_mode=S_IFREG|0444, st_size=0, ...}) = 0\nread(6, \"Inter-|   Receive               \"..., 1024) = 470\nread(6, \"\", 1024)                       = 0\nclose(6)                                = 0\nioctl(5, SIOCGIFFLAGS, {ifr_name=\"eth0\"}) = -1 ENODEV (No such device)\nopenat(AT_FDCWD, \"/usr/share/locale/locale.alias\", O_RDONLY|O_CLOEXEC) = 6\nfstat(6, {st_mode=S_IFREG|0644, st_size=2995, ...}) = 0\nread(6, \"# Locale name alias data base.\\n#\"..., 4096) = 2995\nread(6, \"\", 4096)                       = 0\nclose(6)                                = 0\nopenat(AT_FDCWD, \"/usr/share/locale/en_US.UTF-8/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/usr/share/locale/en_US.utf8/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/usr/share/locale/en_US/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/usr/share/locale/en.UTF-8/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/usr/share/locale/en.utf8/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)openat(AT_FDCWD, \"/usr/share/locale/en/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/usr/share/locale-langpack/en_US.UTF-8/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/usr/share/locale-langpack/en_US.utf8/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/usr/share/locale-langpack/en_US/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/usr/share/locale-langpack/en.UTF-8/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/usr/share/locale-langpack/en.utf8/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)\nopenat(AT_FDCWD, \"/usr/share/locale-langpack/en/LC_MESSAGES/net-tools.mo\", O_RDONLY) = -1 ENOENT (No such file or directory)\nwrite(2, \"eth0: error fetching interface i\"..., 61eth0: error fetching interface information: Device not found\n) = 61\nclose(5)                                = 0\nexit_group(1)                           = ?\n+++ exited with 1 +++</p></li>\n</ol>\n"}, {"tags": ["c++", "exception", "floating-point", "fpu", "msvc12"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1567009767, "post_id": 57696329, "comment_id": 101837535, "body": "We need to have a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  <a href=\"https://stackoverflow.com/posts/57696329/edit\">Edit</a> your question to include enough code so that we can reproduce the error.  Specifically, we should be able to compile from your initial code thru the computation of that first bad cosine value."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5968287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10023e89b1230aafc08bdd69a294234?s=128&d=identicon&r=PG&f=1", "display_name": "electronpygmy", "link": "https://stackoverflow.com/users/5968287/electronpygmy"}, "edited": false, "score": 0, "creation_date": 1567068350, "post_id": 57697216, "comment_id": 101855211, "body": "In your example the values a linked, new value is derived from previously calculated value. My issue is that the cosine lookup calculation does not use previously calculated values; they are in complete isolation other than using floating point math. Yet the latter value is affected by a previous calculation, which is very odd. And would you be kind enough to clarify what .p0 on the hex address do (using VS 2013 so post C++11 is not fully supported). Thanks."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 41, "user_id": 5968287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10023e89b1230aafc08bdd69a294234?s=128&d=identicon&r=PG&f=1", "display_name": "electronpygmy", "link": "https://stackoverflow.com/users/5968287/electronpygmy"}, "edited": false, "score": 0, "creation_date": 1567070809, "post_id": 57697216, "comment_id": 101856446, "body": "@electronpygmy Perhaps you can edit this <a href=\"https://godbolt.org/z/i7WVSf\" rel=\"nofollow noreferrer\">godbolt version of my above program</a> and add the cosine calculations that causes problem and share the link to the resulting program here? The <code>.p0</code> is using exponent syntax for hexadecimal floating-point literals (C++17). You can use <code>static_cast&lt;float&gt;(0x10000)</code> for pre-C++17 compilers. The <code>static_assert</code> I put in the answer was to show that they are equal."}, {"owner": {"reputation": 41, "user_id": 5968287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10023e89b1230aafc08bdd69a294234?s=128&d=identicon&r=PG&f=1", "display_name": "electronpygmy", "link": "https://stackoverflow.com/users/5968287/electronpygmy"}, "edited": false, "score": 0, "creation_date": 1567072162, "post_id": 57697216, "comment_id": 101857122, "body": "Ive tried to add other floating point calculations to a new project but I dont see the error. I do not see the problem with GCC. I cant share the entire project. Ive been removing code for a &#39;minimal reproducible example&#39; but its a complex project. I can repeat the issue; 2 google units tests, one following the other. The first performs the calculations above, the second calculates a cosine lookup table in a loop. [1]. cos(0.006142) = -1.#IND00 [2]. cos(0.006142) = 0.999981. If I use _fpreset() at the end of the first unit test, [1]. cos(0.006142) = 0.999981 [2]. cos(0.006142) = 0.999981"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 41, "user_id": 5968287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10023e89b1230aafc08bdd69a294234?s=128&d=identicon&r=PG&f=1", "display_name": "electronpygmy", "link": "https://stackoverflow.com/users/5968287/electronpygmy"}, "edited": false, "score": 0, "creation_date": 1567074767, "post_id": 57697216, "comment_id": 101858578, "body": "If you drop the google unit test part and try to just write a small  <code>main()</code> function to reproduce the issue, it&#39;ll be easier to find out if there&#39;s an issue with <code>VS 2013</code>, the google unit test framework or something else."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 2, "last_activity_date": 1567020573, "last_edit_date": 1567020573, "creation_date": 1567012489, "answer_id": 57697216, "question_id": 57696329, "link": "https://stackoverflow.com/questions/57696329/why-is-a-fpu-reset-required-to-prevent-a-nan-result-propagating-to-next-calculat/57697216#57697216", "title": "Why is a FPU reset required to prevent a NaN result propagating to next calculation result?", "body": "<p><code>1.f / 0.f</code> does not result in <code>NaN</code>. It results in <code>inf</code>. Using it in the subsequent calculations may result in a <code>NaN</code> though, as is the case with your <code>g</code>.</p>\n\n<hr>\n\n<p>I'll try to demonstrate how the FPU exception state doesn't affect the calculations it does but that it's the state of the individual variables you use that has an effect on the result.  I renamed the variables to <code>L</code> and <code>G</code> (since <code>l</code> and <code>1</code> look so similar).</p>\n\n<pre><code>#include &lt;cfenv&gt;\n#include &lt;cmath&gt;\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;string&gt;\n\nstd::string excstr(int excepts) {\n    static const std::map&lt;int, std::string&gt; names = {\n        {FE_DIVBYZERO, \"FE_DIVBYZERO\"}, {FE_INEXACT, \"FE_INEXACT\"},\n        {FE_INVALID, \"FE_INVALID\"},     {FE_OVERFLOW, \"FE_OVERFLOW\"},\n        {FE_UNDERFLOW, \"FE_UNDERFLOW\"},\n    };\n    std::string rv;\n    for(const auto&amp; [mask, txt] : names) {\n        if(excepts &amp; mask) {\n            if(rv.size()) rv += \", \";\n            rv += txt;\n        }\n    }\n    return rv;\n}\n\ntemplate&lt;typename T&gt;\nvoid check(const char* txt, const T&amp; value) {\n    // taking \"value\" by-value would not guarantee a bit-perfect copy\n\n    std::cout &lt;&lt; std::right &lt;&lt; std::setw(13) &lt;&lt; txt &lt;&lt; \" isnan: \" &lt;&lt; std::left\n              &lt;&lt; std::setw(5) &lt;&lt; std::isnan(value) &lt;&lt; \" isinf: \" &lt;&lt; std::setw(5)\n              &lt;&lt; std::isinf(value) &lt;&lt; \" value: \" &lt;&lt; std::right &lt;&lt; std::setw(5)\n              &lt;&lt; value &lt;&lt; \" ex: \" &lt;&lt; std::left\n              &lt;&lt; excstr(std::fetestexcept(FE_ALL_EXCEPT)) &lt;&lt; \"\\n\";\n}\n\nint main() {\n    std::cout &lt;&lt; std::boolalpha;\n\n    float L = 1.f / 0.f;\n    check(\"L=1/0\", L);\n\n    std::feclearexcept(FE_ALL_EXCEPT); // clearing FE_DIVBYZERO\n\n    float G = L * 0.f; // L is inf regardless of the FPU state\n    check(\"G=L*0\", G);\n\n    std::feclearexcept(FE_ALL_EXCEPT); // clearing FE_INVALID\n    check(\"cleared?\", 0.f);\n\n    static_assert(static_cast&lt;float&gt;(0x10000) == 0x10000.p0);\n\n    // the two below calculations will set FE_INVALID again.\n\n    // casting inf to an unsigned int\n    auto lreg = static_cast&lt;unsigned int&gt;((L * 0x10000.p0) + 0.5f);\n    check(\"lreg\", lreg);\n\n    // casting NaN to an unsigned int\n    auto greg = static_cast&lt;unsigned int&gt;((G * 0x10000.p0) + 0.5f);\n    check(\"greg\", greg);\n\n    // the FPU doesn't need a reset to perform\n    // even though some exception bits are set:\n\n    float flreg = static_cast&lt;float&gt;(lreg) + 10.f;\n    check(\"flreg\", flreg);\n\n    float fgreg = static_cast&lt;float&gt;(greg) + 2.f;\n    check(\"fgreg\", fgreg);\n\n    float R = flreg / fgreg;\n    check(\"R=flreg/fgreg\", R);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>        L=1/0 isnan: false isinf: true  value:   inf ex: FE_DIVBYZERO\n        G=L*0 isnan: true  isinf: false value:  -nan ex: FE_INVALID\n     cleared? isnan: false isinf: false value:     0 ex:\n         lreg isnan: false isinf: false value:     0 ex: FE_INVALID\n         greg isnan: false isinf: false value:     0 ex: FE_INVALID\n        flreg isnan: false isinf: false value:    10 ex: FE_INVALID\n        fgreg isnan: false isinf: false value:     2 ex: FE_INVALID\nR=flreg/fgreg isnan: false isinf: false value:     5 ex: FE_INVALID\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5968287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10023e89b1230aafc08bdd69a294234?s=128&d=identicon&r=PG&f=1", "display_name": "electronpygmy", "link": "https://stackoverflow.com/users/5968287/electronpygmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1567080193, "creation_date": 1567008280, "last_edit_date": 1567080193, "question_id": 57696329, "link": "https://stackoverflow.com/questions/57696329/why-is-a-fpu-reset-required-to-prevent-a-nan-result-propagating-to-next-calculat", "title": "Why is a FPU reset required to prevent a NaN result propagating to next calculation result?", "body": "<p>I have a floating point calculation that results in -1.#IND0000 causing a -1.#IND0000 in the subsequent floating point calculation. What would cause this?</p>\n\n<p>The compiler is Visual Studio C++ 2013 18.00 x86. If I use GCC Version 7.4.0 the problem does not occur. As far as I\u2019m aware no FPU interaction is required to reset the state of the FPU.</p>\n\n<p>The code first performs some calculations, converts the values to fixed point. The google test framework uses the method under test. I can mitigate the numeric errors in the calculation (limit the input values, verify the output) but should the subsequent calculation be -1.#INF0000; compiler error?</p>\n\n<p>Minimal Example: I perform a calculation in RunCalcs() whereby, for example, t is zero thereby causing a _SW_ZERODIVIDE. CheckNextCalc() is then called to perform two subsequent calculations that do not depend on the previous result.</p>\n\n<p>Setting FPU_RESET to 1 include a call to _fpreset() after RunCalcs() and before CheckNextCalc() results in val1 being calculated as 0.999981. When FPU_RESET is 0, val1 is -1.#IND0000.</p>\n\n<pre><code>#define FPU_RESET 0\n\n#define _USE_MATH_DEFINES\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nclass CatchFloatEr\n{\npublic:\n    void RunCalcs(const float t, const float r, unsigned int&amp; val)\n    {\n        const float l = 1.0F / t;\n        val = static_cast&lt;unsigned int&gt;((l * static_cast&lt;float&gt;(0x10000)) + 0.5f);\n    }\n\n    void CheckNextCalc(float&amp; val1, float&amp; val2)\n    {\n        const float x1 = (2.0f * static_cast&lt;float&gt;(M_PI)) / static_cast&lt;float&gt;(1023);\n        val1 = cosf(x1);\n\n        const float x2 = (2.0f * static_cast&lt;float&gt;(M_PI)) / static_cast&lt;float&gt;(1023);\n        val2 = cosf(x2);     \n    }\n};\n\nint main(int argc, char *argv[])\n{\n    CatchFloatEr cf;\n    for (unsigned int a = 0; a &lt; 5; a++)\n    {\n        for (unsigned int b = 0; b &lt; 5; b++)\n        {\n            unsigned int val;\n            cf.RunCalcs(0.0F, 0.0F, val);\n            //std::cout &lt;&lt; a &lt;&lt; b &lt;&lt; \" val = \" &lt;&lt; val &lt;&lt; std::endl;\n        }\n    }\n\n#if FPU_RESET\n    _fpreset();\n#endif\n\n    float val1;\n    float val2;\n\n    cf.CheckNextCalc(val1, val2);\n\n    std::cout &lt;&lt; \"val1 = \" &lt;&lt; val1 &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"val2 = \" &lt;&lt; val2 &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<h2>Results</h2>\n\n<p>GCC 7.4.0 </p>\n\n<pre><code>FPU_RESET 0 and 1\ng++ -Wall -pg -O0 -pedantic -o app main.cpp\nval1 = 0.999981 \nval2 = 0.999981\n\nFPU_RESET 0/1\ng++ -Wall -pg -O2 -pedantic -o app main.cpp\nval1 = 0.999981 \nval2 = 0.999981\n</code></pre>\n\n<p>Visual Studio 2013 </p>\n\n<pre><code>FPU_RESET 0\nval1 = -1.#IND    &lt;--- Why would this result in -1.#INF0000\nval2 = 0.999981\n\nFPU_RESET 1\nval1 = 0.999981 \nval2 = 0.999981\n</code></pre>\n\n<h2>Aside</h2>\n\n<p>I have been using _statusfp() to read the flag bits:</p>\n\n<pre><code>_SW_INEXACT     0x01   inexact (precision)\n_SW_UNDERFLOW   0x02   underflow\n_SW_OVERFLOW    0x04   overflow\n_SW_ZERODIVIDE  0x08   zero divide\n_SW_INVALID     0x10   invalid\n</code></pre>\n\n<p>If I unmask the FPU exceptions I seem to get the following catch multiple faults which matches the flags read.</p>\n\n<pre><code>STATUS_FLOAT_MULTIPLE_FAULTS     0xC00002B4L\nSTATUS_FLOAT_MULTIPLE_TRAPS      0xC00002B5L\n</code></pre>\n\n<p>Enabling FP can be done by: </p>\n\n<pre><code>_clearfp();\nunsigned int currentState = 0U;\n_controlfp_s(&amp;currentState, 0U, _MCW_EM);\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1567007775, "post_id": 57696191, "comment_id": 101836599, "body": "What do you expect <code>y=&amp;x; delete y;</code> to do?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1567007929, "post_id": 57696191, "comment_id": 101836686, "body": "After doing <code>y=&amp;x;</code> the pointer no longer points to some memory that was allocated with <code>new</code> but to a address from the local stack."}, {"owner": {"reputation": 39, "user_id": 7434359, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1847534192194841/picture?type=large", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/7434359/amit-kumar"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567007965, "post_id": 57696191, "comment_id": 101836703, "body": "@NathanOliver it should deallocate memory allocated to y dynamically"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567008060, "post_id": 57696191, "comment_id": 101836767, "body": "@AmitKumar Why?  You assigned <code>y</code> the address of <code>x</code>.  It doesn&#39;t have the avalue of the memory it had before when you do that."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567008183, "post_id": 57696191, "comment_id": 101836835, "body": "Dynamically allocated memory is never automatically deallocated in C++. If you want dynamic memory to be deallocated without having to manually intervene you can use standard library features that implement that behavior like <code>std::unique_ptr</code>."}, {"owner": {"reputation": 39, "user_id": 7434359, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1847534192194841/picture?type=large", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/7434359/amit-kumar"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1567008213, "post_id": 57696191, "comment_id": 101836846, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 so can we say that delete can deallocate only those variable whose adress does not lie in stack .Thanks \u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6"}, {"owner": {"reputation": 39, "user_id": 7434359, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1847534192194841/picture?type=large", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/7434359/amit-kumar"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567008316, "post_id": 57696191, "comment_id": 101836895, "body": "@Fran&#231;oisAndrieux but what for manually deallocation of memory"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1567008640, "post_id": 57696191, "comment_id": 101837042, "body": "@AmitKumar I do not understand your last reply."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1567009141, "post_id": 57696191, "comment_id": 101837269, "body": "@AmitKumar &quot;<i>so can we say that delete can deallocate only those variable whose adress does not lie in stack</i>&quot; Not exactly. You can only <code>delete</code> what you <code>new</code>."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1567013109, "post_id": 57696191, "comment_id": 101838898, "body": "@AmitKumar You don&#39;t deallocate variables, only memory."}], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1567009751, "post_id": 57696254, "comment_id": 101837527, "body": "Technically speaking: C++ standard doesn&#39;t define &quot;stack&quot;, or &quot;heap&quot;, in the sense of variable storage. There are only &quot;automatic storage duration&quot;, and &quot;dynamic storage duration&quot;."}, {"owner": {"reputation": 9371, "user_id": 196964, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/df6zG.jpg?s=128&g=1", "display_name": "Doug Richardson", "link": "https://stackoverflow.com/users/196964/doug-richardson"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567009869, "post_id": 57696254, "comment_id": 101837579, "body": "@AlgirdasPreid\u017eius there is also thread_local and static storage durations."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567009962, "post_id": 57696254, "comment_id": 101837613, "body": "Yes? How were they relevant to this question, or you answer (as in: &quot;<i><code>delete</code> deletes from the heap, but <code>x</code> is on the stack.</i>&quot;)? I was just stating, that the words like &quot;stack&quot;, and &quot;heap&quot;  mentioned in your answer, doesn&#39;t appear in C++ standard in regards to variable storage."}, {"owner": {"reputation": 9371, "user_id": 196964, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/df6zG.jpg?s=128&g=1", "display_name": "Doug Richardson", "link": "https://stackoverflow.com/users/196964/doug-richardson"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567010037, "post_id": 57696254, "comment_id": 101837652, "body": "You said, &quot;there are only&quot;, but apparently I misunderstood you."}, {"owner": {"reputation": 9371, "user_id": 196964, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/df6zG.jpg?s=128&g=1", "display_name": "Doug Richardson", "link": "https://stackoverflow.com/users/196964/doug-richardson"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1567010172, "post_id": 57696254, "comment_id": 101837705, "body": "@AlgirdasPreid\u017eius updated answer per your feedback"}], "tags": [], "owner": {"reputation": 9371, "user_id": 196964, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/df6zG.jpg?s=128&g=1", "display_name": "Doug Richardson", "link": "https://stackoverflow.com/users/196964/doug-richardson"}, "is_accepted": false, "score": 6, "last_activity_date": 1567011353, "last_edit_date": 1567011353, "creation_date": 1567007958, "answer_id": 57696254, "question_id": 57696191, "link": "https://stackoverflow.com/questions/57696191/why-i-can-not-delete-the-following-pointer/57696254#57696254", "title": "Why I can not delete the following pointer?", "body": "<p><code>delete</code> destroys objects previously allocated by <code>new</code>, but <code>x</code> was not allocated by <code>new</code>. Your code is the same as:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int x=3;\ndelete &amp;x;\n</code></pre>\n\n<p>See Also:</p>\n\n<ul>\n<li><a href=\"https://en.cppreference.com/w/cpp/language/new\" rel=\"nofollow noreferrer\">new expression</a></li>\n<li><a href=\"https://en.cppreference.com/w/cpp/language/delete\" rel=\"nofollow noreferrer\">delete expression</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 9, "last_activity_date": 1567048362, "last_edit_date": 1567048362, "creation_date": 1567008005, "answer_id": 57696262, "question_id": 57696191, "link": "https://stackoverflow.com/questions/57696191/why-i-can-not-delete-the-following-pointer/57696262#57696262", "title": "Why I can not delete the following pointer?", "body": "<p><code>y</code> cannot be deleted because it points to a an object with automatic storage after the line</p>\n\n<pre><code>y = &amp;x;\n</code></pre>\n\n<p>Only an address returned by <code>new</code> may be deleted. If the operand of <code>delete</code> has some other value (such as address of an automatic object, as in the example) the behaviour of the program will be undefined. </p>\n\n<p>The quoted assignment overwrites the previous value, which was the only copy of the address of the dynamic allocation. This loss of the address is called a \"memory leak\", since the dynamic allocation can no longer be released.</p>\n"}, {"comments": [{"owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "edited": false, "score": 4, "creation_date": 1567009180, "post_id": 57696342, "comment_id": 101837284, "body": "This is not wrong, but I don&#39;t believe it answers the question (<b>Why</b> delete cannot be called on the pointer.)"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 5, "creation_date": 1567009523, "post_id": 57696342, "comment_id": 101837436, "body": "In addition to the above, minor nitpick: &quot;<i>I don&#39;t get any core dumps with that.</i>&quot; If you don&#39;t get core dump with a specific piece of code, in several executions, of it, it doesn&#39;t, automatically, prove, that the code is free of undefined behavior."}, {"owner": {"reputation": 39, "user_id": 11989955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0440e16fa8c770f7c6110ea07c11f68b?s=128&d=identicon&r=PG&f=1", "display_name": "JimNastic", "link": "https://stackoverflow.com/users/11989955/jimnastic"}, "reply_to_user": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "edited": false, "score": 0, "creation_date": 1567023519, "post_id": 57696342, "comment_id": 101842936, "body": "@BenJones  Is it because &#39;y&#39;  is assigned a value equal to the address of  &#39;x&#39; ?"}, {"owner": {"reputation": 661, "user_id": 5001502, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153410573162710/picture?type=large", "display_name": "Ben Jones", "link": "https://stackoverflow.com/users/5001502/ben-jones"}, "edited": false, "score": 0, "creation_date": 1567093345, "post_id": 57696342, "comment_id": 101869387, "body": "assigning the address <code>&amp;x</code> to the pointer <code>y</code> is perfectly valid.  The issue is that <a href=\"https://stackoverflow.com/questions/441831/calling-delete-on-variable-allocated-on-the-stack\">you cannot <code>delete</code> an object allocated on the stack</a>."}], "tags": [], "owner": {"reputation": 39, "user_id": 11989955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0440e16fa8c770f7c6110ea07c11f68b?s=128&d=identicon&r=PG&f=1", "display_name": "JimNastic", "link": "https://stackoverflow.com/users/11989955/jimnastic"}, "is_accepted": false, "score": 2, "last_activity_date": 1567008637, "last_edit_date": 1567008637, "creation_date": 1567008344, "answer_id": 57696342, "question_id": 57696191, "link": "https://stackoverflow.com/questions/57696191/why-i-can-not-delete-the-following-pointer/57696342#57696342", "title": "Why I can not delete the following pointer?", "body": "<p>I think you need to dereference <code>y</code> and assign to <code>x</code>.</p>\n\n<pre><code>int main()\n{\n    int x = 3;\n    int* y = new int(4);\n    *y = x;\n    cout &lt;&lt; y;\n    delete y;\n}\n</code></pre>\n\n<p>I don't get any core dumps with that.</p>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 5968218, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-b35kmq9ICk4/AAAAAAAAAAI/AAAAAAAAAH0/M0eZwCKW0oo/photo.jpg?sz=128", "display_name": "Hemantharaju .H", "link": "https://stackoverflow.com/users/5968218/hemantharaju-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1567012954, "creation_date": 1567012954, "answer_id": 57697318, "question_id": 57696191, "link": "https://stackoverflow.com/questions/57696191/why-i-can-not-delete-the-following-pointer/57697318#57697318", "title": "Why I can not delete the following pointer?", "body": "<p>When you do <code>int x = 3;</code>, x is stored on stack. After <code>y = &amp;x</code>, pointer y points to an element in stack. When you try to delete stack memory, you get a coredump as <code>delete</code> works only on memory allocated on heap.</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 11923505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C6rwhQ11j2c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9jkyB24w3AUZ5sNzK1lOdvZn_Uw/photo.jpg?sz=128", "display_name": "C. R. Ward", "link": "https://stackoverflow.com/users/11923505/c-r-ward"}, "is_accepted": false, "score": 0, "last_activity_date": 1567014079, "creation_date": 1567014079, "answer_id": 57697561, "question_id": 57696191, "link": "https://stackoverflow.com/questions/57696191/why-i-can-not-delete-the-following-pointer/57697561#57697561", "title": "Why I can not delete the following pointer?", "body": "<p>Because <code>delete auto-storage-class</code> is not a supported use of <code>operator delete</code>.</p>\n\n<p>In the statement, <code>int* y = new int(4);</code>, you use <code>operator new</code> to perform an allocation.</p>\n\n<p>However, in the statement, <code>y = &amp;x;</code>, you change the pointer to <code>auto int x = 3;</code>.</p>\n\n<p>An <code>auto</code> storage class variable is allocated by the C/C++ runtime and never by the user. This is the reason it is an error to try and <code>delete &amp;x;</code>.</p>\n"}], "owner": {"reputation": 39, "user_id": 7434359, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1847534192194841/picture?type=large", "display_name": "Amit Kumar", "link": "https://stackoverflow.com/users/7434359/amit-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "closed_date": 1567024932, "answer_count": 5, "score": -5, "last_activity_date": 1567048362, "creation_date": 1567007735, "last_edit_date": 1567008068, "question_id": 57696191, "link": "https://stackoverflow.com/questions/57696191/why-i-can-not-delete-the-following-pointer", "closed_reason": "Needs details or clarity", "title": "Why I can not delete the following pointer?", "body": "<pre><code>int main()\n{\n    int x = 3;\n    int* y = new int(4);\n    y = &amp;x;\n    cout &lt;&lt; y;\n    delete y;\n}\n</code></pre>\n\n<p>it shows the following error:</p>\n\n<blockquote>\n  <p>Error in './a.out':free(): invalid pointer:0x00007ffde8e1c0364</p>\n  \n  <p>0x7ffde8e1c0364 Aborted</p>\n</blockquote>\n"}, {"tags": ["c++", "arduino", "arduino-uno", "arduino-ide", "arduino-c++"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 2, "creation_date": 1567008224, "post_id": 57696189, "comment_id": 101836850, "body": "Didn&#39;t the compiler issue any warnings, as these numbers do not even fit unsigned chars"}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1567008398, "post_id": 57696189, "comment_id": 101836938, "body": "No warnings, I also have no output on the display."}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1567008480, "post_id": 57696189, "comment_id": 101836973, "body": "Then time to ensure you&#39;re compiling with <code>-Wall -Wextra</code> or similar"}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1567008568, "post_id": 57696189, "comment_id": 101837008, "body": "I use Arduino. How can flags be used when compiling?"}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1567008705, "post_id": 57696189, "comment_id": 101837080, "body": "The problem is that the characters are UTF-16 and I don&#39;t know how to convert any HEX code into a character equivalent for print. <a href=\"https://r12a.github.io/app-conversion/\" rel=\"nofollow noreferrer\">r12a.github.io/app-conversion</a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1567008754, "post_id": 57696189, "comment_id": 101837097, "body": "I know but how you can see where you&#39;re driving if your windshield is covered in mud"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1567008812, "post_id": 57696189, "comment_id": 101837121, "body": "You can use hex escapes in <i>string literals</i> for your letters. Or write the entire file in utf8 with these letterforms in there in quotes"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1567008836, "post_id": 57696189, "comment_id": 101837133, "body": "@Miranda utf-16 characters should be inside <code>char16_t</code> variables. For utf-8, you need either <code>char8_t</code> if your compiler supports it or simply <code>char</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1567008866, "post_id": 57696189, "comment_id": 101837152, "body": "The question says the characters are <code>UTF-8</code> but now you say they are <code>UTF-16</code>? Maybe update the question?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1567009022, "post_id": 57696189, "comment_id": 101837226, "body": "It looks like you needto convert <code>UTF-16</code> to <code>UTF-8</code>. Does Arduino support the standard library conversion routines?"}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1567009180, "post_id": 57696189, "comment_id": 101837283, "body": "@Galik I have no information about this, but is there a way to put characters in a <code>String</code> variable?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1567009294, "post_id": 57696189, "comment_id": 101837339, "body": "@Miranda <code>String</code> is not something from the standard library. Without knowing the implementation, it&#39;s hard to answer"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1567009353, "post_id": 57696189, "comment_id": 101837374, "body": "There will be a way but  how much work depends on what you already have available. I don&#39;t know much about Arduino&#39;s libraries tbh."}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1567009554, "post_id": 57696189, "comment_id": 101837455, "body": "@GuillaumeRacicot If I want to save the results in <code>char variable</code> instead of <code>strings variable</code>, what is the solution? I want to convert hex codes to characters and put them in a <code>char variable</code> so that I can display them on the screen."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1567010006, "post_id": 57696189, "comment_id": 101837631, "body": "It seems to me the codes you are storing in your table probably need to be in type <code>char16_t</code> not <code>unsigned char</code>. Then you need a function that takes a <code>UTF-16</code> character or a pair of <code>UTF-16</code> surrogates and converts them into <code>UTF-8</code> in an <code>unsigned char</code> buffer."}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1567010186, "post_id": 57696189, "comment_id": 101837712, "body": "@Galik Yes, that&#39;s right, I need exactly that."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1567010869, "post_id": 57696189, "comment_id": 101837968, "body": "@Miranda, a single <code>unsigned char</code> cannot represent an Arabic character in ASCII, UTF-8, or UTF-16. You <i>must</i> use the Arduino&#39;s <code>String</code> class to store a unicode character. Are you also sure that the Arduino screen you&#39;re using has support for Unicode characters too?"}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1567011827, "post_id": 57696189, "comment_id": 101838338, "body": "@Romen I use u8g2 library in arduino and support unicode character o OLED screen."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567057774, "post_id": 57697219, "comment_id": 101850371, "body": "Thank you very much for the solution but my question still is how to convert UTF-16 Hex to a character (That is, converting two bytes (UTF-16) to a character and then saving it to a <code>string</code> variable)?"}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567061376, "post_id": 57697219, "comment_id": 101851696, "body": "Also, the new problem with the method introduced by you is that this method consumes a lot of memory and when compiling, I get a memory error. (not enough memory)"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567093537, "post_id": 57697219, "comment_id": 101869503, "body": "@Miranda, I have updated my answer with a solution that should use less storage space and a proper method to convert hex values to UTF-8 strings."}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567259869, "post_id": 57697219, "comment_id": 101916354, "body": "Unbelievably, this new method doesn&#39;t work. It works fine when I enter the value manually [for example: String output =  String(&quot;\\u0628&quot;) ], but I couldn&#39;t find a way to extract it from the uint16_t Map table. it is interesting, the String output = String(hi) + String(lo)  command does not work and there is no output on display. The format must be in \\u0628"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567353323, "post_id": 57697219, "comment_id": 101932401, "body": "@Miranda, It seems round-about to build a string like <code>&quot;\\u0628&quot;</code> at run-time. I tested the <code>String(hi) + String(lo)</code> method on an arduino emulator with <code>Serial.print</code> and got the correct Arabic character, so does that line not compile? Or does it just give a <code>String</code> that doesn&#39;t work with the <code>u8g2</code> display function?"}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567406912, "post_id": 57697219, "comment_id": 101941707, "body": "I used String(hi) + String(lo) on <code>u8g2</code> and output is unclear (The program is compiled successfully.). but when I&#39;m using the <code>\\u0628</code> format, that&#39;s all right."}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567407926, "post_id": 57697219, "comment_id": 101942088, "body": "The problem is solved if the <code>Map</code> table data is converted to <code>u0628</code> like format and then sent to <code>u8g2.print</code> function. that&#39;s mean <code>0x0628</code> convert to <code>\\u0628</code>. Also, using &quot;\\u0628&quot; format in the <code>Map</code> table greatly increases the table size so the table data needs to be converted at runtime."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567515124, "post_id": 57697219, "comment_id": 101979335, "body": "@Miranda, I&#39;m not sure that you <i>can</i> build a string with <code>\\u</code> at run-time. The escaped characters are surely useful at compile-time, but I&#39;m not sure that there is a way to append an &quot;escaped character&quot; to a <code>String</code>. Can you confirm that the <code>String(hi) + String(lo)</code> method with <code>u8g2.print</code> does not print <code>\u0628</code> when you start with a hard-coded <code>uint16_t v = 0xD8A8</code>?"}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567525609, "post_id": 57697219, "comment_id": 101985181, "body": "with <code>uint16_t v = 0xD8A8</code> and <code>u8g2.print(v)</code> output is <code>55464</code>, and also with <code>u8g2.print(char(v))</code> is unclear and rubbish. also <code>String(hi) + String(lo)</code> is unclear and not <code>\u0628</code> and etc!"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567525870, "post_id": 57697219, "comment_id": 101985322, "body": "@Miranda, Could you humour me and post the output you get from <code>String(hi) + String(lo)</code>? The first two methods you posted in your last comment are not valid ways to convert the UTF-8 character (2 bytes) into a String that <code>u8g2.print()</code> will recognize as UTF-8. Also, please try it with <code>u8g2.drawUTF8()</code> as I suggested in the answer. The regular <code>u8g2.print()</code> method may be the issue here."}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567526816, "post_id": 57697219, "comment_id": 101985775, "body": "with <code>u8g2.drawUTF8(x, y, v)</code> screen is blank. also before <code>u8g2.print()</code> function I used <code>u8g2.enableUTF8Print()</code> for enable <code>UTF8</code> print. output for u8g2.print(&quot;\\u0628&quot;) is correct and that&#39;s <code>\u0628</code>"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567527328, "post_id": 57697219, "comment_id": 101985989, "body": "@Miranda, I see that you&#39;re trying to print <code>v</code> directly, that is a 16-bit unsigned integer. Most <code>print</code> methods are going to print the decimal value that <code>v</code> contains because <code>uint16_t</code> represents a number. You <i>need</i> to split that 16-bit number into the high and low bytes and then concatenate them as two <code>char</code> or <code>String</code> values into a <code>String</code>. That 16-bit number just happens to be identical to the two byte values (in sequence) that represent the single UTF-8 character.."}, {"owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567527791, "post_id": 57697219, "comment_id": 101986177, "body": "Thanks Romen, My code and output: <a href=\"https://gist.github.com/idreamsi/8b01321006c8391b784940ad77578e9d\" rel=\"nofollow noreferrer\">gist.github.com/idreamsi/8b01321006c8391b784940ad77578e9d</a>"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "reply_to_user": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "edited": false, "score": 0, "creation_date": 1567528316, "post_id": 57697219, "comment_id": 101986389, "body": "@Miranda, <code>uint16_t v = 0x0628;</code> is using the <b>code point</b>, which is not correct for UTF-8. You need to use <code>uint16_t v = 0xD8A8;</code> for that character, because that is the actual binary representation of the U+0628 character in UTF-8 encoding. I believe I explained this in my answer, so please make sure you read it fully."}], "tags": [], "owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "is_accepted": true, "score": 0, "last_activity_date": 1567528652, "last_edit_date": 1567528652, "creation_date": 1567012499, "answer_id": 57697219, "question_id": 57696189, "link": "https://stackoverflow.com/questions/57696189/how-to-convert-hex-utf-16-char-to-string-in-arduino/57697219#57697219", "title": "How to convert hex UTF-16 char to string in arduino", "body": "<p>First, I must suggest that you look up the UTF-8 values for those Arabic characters. Arduino and u8g2 both support UTF-8 encoding but not UTF-16. It is much more straightforward to solve this problem when starting with an array of UTF-8 values.</p>\n\n<p>For UTF-8 characters, the compiler can convert <strong>code points</strong> inside string literals for you:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>String character = u8\"\\u0628\"; // \u0628\n</code></pre>\n\n<p>Internally that string will contain two bytes that represent \"\u0628\" in UTF-8.\nA single <code>char</code> is not enough storage space for <em>any</em> Arabic character in UTF-8 or UTF-16, so you must use an array (<code>char*</code>) or a <code>String</code>.</p>\n\n<p>The Arduino IDE allows you to just write Unicode character literals directly in the code too:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>String character = \"\u0628\";\n</code></pre>\n\n<p>As long as the source code is saved in UTF-8 format, the string will be the same as above with the <code>u8\"\\u0628\"</code> value.</p>\n\n<p>You could rewrite your character map to use a <code>String</code>, and then just type in the Arabic characters literally or using the code point method: (using accented latin characters for example here)</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>const String Map[][5] PROGMEM = {\n  {\"a\", \"\u00e0\", \"\u00e1\", \"A\", \"\u00c1\"},\n  {\"e\", \"\u00e8\", \"\u00e9\", \"E\", \"\u00c9\"}\n};\n</code></pre>\n\n<p>Of course the <code>String</code> will use more than 2 bytes to store those characters, so you can save space by storing the characters as 16-bit integers, but you will have to do some conversion before-hand.</p>\n\n<p>A Unicode code point is not actually the binary representation that you will see in the character buffer. <code>U+0628 = \u0628</code> but the actual binary representation is <code>0xD8A8</code>. <em>That</em> this the value you should store in the Map, not the codepoint (<code>0x0628</code>) like you have already.</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>const uint16_t Map[][5] PROGMEM = {\n  {0xD8A8, ..., ..., ...},\n  ...\n};\n</code></pre>\n\n<p>If you use <code>String</code> for your map, you can easily build strings from it:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>String output = Map[i][2] + Map[j][3] + Map[k][4];\n</code></pre>\n\n<p>If you use <code>uint16_t</code>, then you have to split the integer value into two bytes to add a character:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>uint16_t v = Map[i][j];  // v = 0xD8A8 for example\nchar lo = v &amp; 0xFF;   // The D8 part of 0xD8A8, lo = 0xD8\nchar hi = v &gt;&gt; 8;     // The A8 part of 0xD8A8, hi = 0xA8\nString output = String(hi) + String(lo); // output = {0xA8, 0xD8}\n</code></pre>\n\n<p>Lastly, you will have to convert the <code>String</code> to a <code>char*</code> buffer for using with <code>U8g2::drawUTF8()</code>. You can do that by using <code>output.c_str()</code> to get the underlying <code>char*</code> buffer.</p>\n"}], "owner": {"reputation": 13, "user_id": 9892720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d96ae3317d9fe1ee43ff004c25a8c5c5?s=128&d=identicon&r=PG&f=1", "display_name": "Miranda", "link": "https://stackoverflow.com/users/9892720/miranda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1594, "favorite_count": 0, "accepted_answer_id": 57697219, "answer_count": 1, "score": 0, "last_activity_date": 1567528652, "creation_date": 1567007732, "last_edit_date": 1567009926, "question_id": 57696189, "link": "https://stackoverflow.com/questions/57696189/how-to-convert-hex-utf-16-char-to-string-in-arduino", "title": "How to convert hex UTF-16 char to string in arduino", "body": "<p>I'm working on a function to correctly display Arabic words on the display/LCD. (Arabic letters have four different modes.)\nI have an array of Arabic letters (<code>Map array</code>) in different states.\nAfter recognizing the alphabet in Arabic, I need to re-align the letters.\nMy question is how do I put the Unicode characters through the table (<code>Map Table</code>) to a <code>String variable</code> (pBuffer)?</p>\n\n<p>For example: To write the word <code>\u0628\u0627\u0628</code> you need to select the letter from <code>Map table</code> and place it in a <code>String</code> to send to the display/LCD.</p>\n\n<pre><code>...\nconst unsigned char Map[][5] PROGMEM = {\n\n     /* code, isolated, initial, medial, final */\n    {0x0621, 0xFE80, 0x0000, 0x0000, 0x0000 },  //1 /* HAMZA \u0621*/\n    {0x0622, 0xFE81, 0x0000, 0x0000, 0xFE82 },  //2/* ALEF_MADDA \u0622*/\n    {0x0623, 0xFE83, 0x0000, 0x0000, 0xFE84 },  //3/* ALEF_HAMZA_ABOVE \u0623*/\n    {0x0624, 0xFE85, 0x0000, 0x0000, 0xFE86 },  //4/* WAW_HAMZA \u0624*/\n    {0x0625, 0xFE87, 0x0000, 0x0000, 0xFE88 },  //5/* ALEF_HAMZA_BELOW \u0625*/\n    {0x0626, 0xFE89, 0xFE8B, 0xFE8C, 0xFE8A },  //6/* YEH_HAMZA \u0626*/\n    {0x0627, 0xFE8D, 0x0000, 0x0000, 0xFE8E },  //7/* ALEF \u0627*/\n    {0x0628, 0xFE8F, 0xFE91, 0xFE92, 0xFE90 }   //8/* BEH \u0628*/\n};\n\nString pBuffer;\npBuffer += ((char)(Map[7][4]));\npBuffer += ((char)(Map[6][6]));\npBuffer += ((char)(Map[7][3]));\n\nu8g2.setCursor(5, 20);\nu8g2.print(pBuffer);\n...\n</code></pre>\n\n<p>Unfortunately the above method used does not work.\nHow do I select characters from the \"Map\" table above and put them together in a <code>String</code> variable?</p>\n"}, {"tags": ["c++", "c++17", "stdoptional", "std-variant"], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1567010710, "post_id": 57696263, "comment_id": 101837907, "body": "I don&#39;t see how this answer addresses the case of an <code>optional&lt;T&gt;</code> going from <code>T</code> to a different <code>T</code> state. Note that <code>emplace</code> and <code>operator=</code> have different behavior here in the case of an exception being thrown in the process!"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1567011052, "post_id": 57696263, "comment_id": 101838034, "body": "@MaxLanghof: If the constructor throws in <code>emplace</code>, then the <code>optional</code> is explicitly stated to be unengaged. If <code>operator=</code> throws during construction, then there&#39;s similarly no value. Barry&#39;s point remains valid: it works because there is always a legitimate empty state that the <code>optional</code> can go to. <code>variant</code> doesn&#39;t have that luxury because <code>variant</code> cannot be empty."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1567011402, "post_id": 57696263, "comment_id": 101838177, "body": "@NicolBolas The difficult case (and the one most similar to the <code>variant</code> problem) is assigning a new value when you have an existing one. And the core of <i>retaining the initialization state</i> is using <code>T::operator=</code> - this specific case involves no empty <code>optional</code> and no destructor at all. Since all the cases covered in this answer regarding <code>std::optional</code> involve either destruction or empty states, I think this important case (covered by the other answers) is missing. Don&#39;t get me wrong, this answer covers all the other aspects just fine, but I had to read up on this last case myself..."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1567049754, "post_id": 57696263, "comment_id": 101848647, "body": "@MaxLanghof How&#39;s that related to <code>optional</code>?  It just does something like <code>**this = *other</code>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1567064427, "post_id": 57696263, "comment_id": 101853139, "body": "@L.F. That&#39;s the important detail - it does <i>not</i> destroy and recreate the contained instance, unlike <code>std::variant</code> (or <code>std::optional::emplace</code>). But I feel this comes down to what parts of the specification one considers obvious and what remains to be explained. The answers here differ in that regard, which should cover the different possible preconceptions of the interface."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 17, "last_activity_date": 1567012959, "last_edit_date": 1567012959, "creation_date": 1567008012, "answer_id": 57696263, "question_id": 57696187, "link": "https://stackoverflow.com/questions/57696187/how-is-stdoptional-never-valueless-by-exception/57696263#57696263", "title": "How is std::optional never &quot;valueless by exception&quot;?", "body": "<p><code>optional&lt;T&gt;</code> has one of two states:</p>\n\n<ul>\n<li>a <code>T</code></li>\n<li>empty</li>\n</ul>\n\n<p>A <code>variant</code> can only enter the valueless state when transitioning from one state to another if transitioning will throw - because you need to somehow recover the original object and the various strategies for doing so require either extra storage<sup>1</sup>, heap allocation<sup>2</sup>, or an empty state<sup>3</sup>.</p>\n\n<p>But for <code>optional</code>, transitioning from <code>T</code> to empty is just a destruction. So that only throws if <code>T</code>'s destructor throws, and really who cares at that point. And transitioning from empty to <code>T</code> is not an issue - if that throws, it's easy to recover the original object: the empty state is empty. </p>\n\n<p>The challenging case is: <code>emplace()</code> when we already had a <code>T</code>. We necessarily need to have destroyed the original object, so what do we do if the emplace construction throws? With <code>optional</code>, we have a known, convenient empty state to fallback to - so the design is just to do that. </p>\n\n<p><code>variant</code>'s problems from not having that easy state to recover to.</p>\n\n<hr />\n\n<p><sup>1</sup> As <a href=\"https://github.com/boostorg/variant2\" rel=\"noreferrer\"><code>boost::variant2</code></a> does.<br>\n<sup>2</sup> As <a href=\"https://www.boost.org/doc/libs/1_71_0/doc/html/variant.html\" rel=\"noreferrer\"><code>boost::variant</code></a> does.<br>\n<sup>3</sup> I'm not sure of a variant implementation that does this, but there was a design suggestion that <code>variant&lt;monostate, A, B&gt;</code> could transition into the <code>monostate</code> state if it held an <code>A</code> and the transition to <code>B</code> threw.</p>\n"}, {"comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1567008332, "post_id": 57696304, "comment_id": 101836901, "body": "&quot;the initialization state of *this is unchanged&quot; ... am I misunderstanding that statement?  I think you&#39;re saying that it could change to something not meaningful."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1567008430, "post_id": 57696304, "comment_id": 101836952, "body": "From <code>optional</code>&#39;s perspective, it&#39;s still holding an object. Whether that object is in a usable state is not <code>optional</code>&#39;s concern."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1567010619, "post_id": 57696304, "comment_id": 101837869, "body": "It is quite an important detail that <code>std::optional::operator=</code> uses <code>T::operator=</code> instead of destroying + constructing the <code>T</code> value. <code>emplace</code> does the latter (and leaves the <code>optional</code> empty if construction of the new value throws)."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 5, "last_activity_date": 1567008553, "last_edit_date": 1567008553, "creation_date": 1567008194, "answer_id": 57696304, "question_id": 57696187, "link": "https://stackoverflow.com/questions/57696187/how-is-stdoptional-never-valueless-by-exception/57696304#57696304", "title": "How is std::optional never &quot;valueless by exception&quot;?", "body": "<p>\"valueless by exception\" refers to a specific scenario where you need to change the type stored in the variant. That necessarily requires 1) destroying the old value and then 2) creating the new one in its place. If 2) fails, you have no way to go back (without undue overhead unacceptable to the committee).</p>\n\n<p><code>optional</code> doesn't have this problem. If some operation on the object it contains throws an exception, so be it. The object is still there. That doesn't mean that the object's state is still meaningful - it's whatever the throwing operation leaves it in. Hopefully that operation has at least the basic guarantee.</p>\n"}, {"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 8, "last_activity_date": 1567011130, "last_edit_date": 1567011130, "creation_date": 1567008316, "answer_id": 57696337, "question_id": 57696187, "link": "https://stackoverflow.com/questions/57696187/how-is-stdoptional-never-valueless-by-exception/57696337#57696337", "title": "How is std::optional never &quot;valueless by exception&quot;?", "body": "<p><code>std::optional</code> has it easy:</p>\n\n<ol>\n<li><p>It contains a value and a new value is assigned:<br>\nEasy, just delegate to the assignment operator and let it deal with it. Even in the case of an exception, there will still be a value left.</p></li>\n<li><p>It contains a value and the value is removed:<br>\nEasy, the dtor must not throw. The standard library generally assumes that for user-defined types.</p></li>\n<li><p>It contains no value and one is assigned:<br>\nReverting to no value in the face of an exception on constructing is simple enough.</p></li>\n<li><p>It contains no value and no value is assigned:<br>\nTrivial.</p></li>\n</ol>\n\n<p><code>std::variant</code> has the same easy time when the type stored does not change.<br>\nUnfortunately, when a different type is assigned it must make place for it by destroying the previous value, and then constructing the new value might throw!</p>\n\n<p>As the previous value is already lost, what can you do?<br>\nMark it as <em>valueless by exception</em> to have a stable, valid though undesirable state, and let the exception propagate.</p>\n\n<p>One could use extra space and time to allocate the values dynamically, save the old value somewhere temporarily, construct the new value before assigning or the like, but all those strategies are costly, and only the first always works.</p>\n"}], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 525, "favorite_count": 1, "accepted_answer_id": 57696263, "answer_count": 3, "score": 14, "last_activity_date": 1567012959, "creation_date": 1567007726, "last_edit_date": 1592644375, "question_id": 57696187, "link": "https://stackoverflow.com/questions/57696187/how-is-stdoptional-never-valueless-by-exception", "title": "How is std::optional never &quot;valueless by exception&quot;?", "body": "<p><code>std::variant</code> can enter a state called &quot;<a href=\"https://en.cppreference.com/w/cpp/utility/variant/valueless_by_exception\" rel=\"noreferrer\">valueless by exception</a>&quot;.</p>\n<p>As I understand, the common cause of this is if a move assignment throws an exception.  The variant's old value isn't guaranteed to be present anymore, and neither is the intended new value.</p>\n<p><code>std::optional</code>, however, doesn't have such a state.  cppreference makes the bold claim:</p>\n<blockquote>\n<p>If an exception is thrown, the initialization state of *this ... is unchanged, i.e. if the object contained a value, it still contains a value, and the other way round.</p>\n</blockquote>\n<p>How is <code>std::optional</code> able to avoid becoming &quot;valueless by exception&quot;, while <code>std::variant</code> is not?</p>\n"}, {"tags": ["c++", "ceres-solver"], "answers": [{"tags": [], "owner": {"reputation": 497, "user_id": 3632829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc46da5b0b6c5acb7d618cbb30fb8dca?s=128&d=identicon&r=PG", "display_name": "Sameer Agarwal", "link": "https://stackoverflow.com/users/3632829/sameer-agarwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1567548480, "creation_date": 1567548480, "answer_id": 57779278, "question_id": 57696125, "link": "https://stackoverflow.com/questions/57696125/installing-ceres-solver-on-centos7-and-getting-helloworld-cc-to-work/57779278#57779278", "title": "Installing ceres-solver on centOS7 and getting helloworld.cc to work", "body": "<p>You need to link to ceres solver. </p>\n\n<p>g++ helloworld.cc -I /usr/include/eigen3\\</p>\n\n<p>only compiles helloworld but does not tell the compiler where to find the headers and the compiled libraries for ceres solver.</p>\n"}], "owner": {"reputation": 163, "user_id": 8100373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ebea13ff2d3b6b54165d1ac9af5b368?s=128&d=identicon&r=PG", "display_name": "Abhishek Parab", "link": "https://stackoverflow.com/users/8100373/abhishek-parab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 385, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1567548480, "creation_date": 1567007507, "question_id": 57696125, "link": "https://stackoverflow.com/questions/57696125/installing-ceres-solver-on-centos7-and-getting-helloworld-cc-to-work", "title": "Installing ceres-solver on centOS7 and getting helloworld.cc to work", "body": "<p><strong>Problem</strong>: \nI would like to use Google's <code>ceres-solver</code> library for C++ but am not able to run the <code>helloworld.cc</code> example on <a href=\"https://ceres-solver.googlesource.com/ceres-solver/+/master/examples/helloworld.cc\" rel=\"nofollow noreferrer\">its webpage</a>. </p>\n\n<p><strong>Installation</strong>: \nI am using (a fresh install of) CentOS7 and am following installation instructions on the <code>ceres-solver</code> <a href=\"http://ceres-solver.org/installation.html\" rel=\"nofollow noreferrer\">website</a>. Replacing the <code>apt-get</code> with <code>yum</code>-equivalent packages, I installed the following:</p>\n\n<ul>\n<li>For <code>g++</code> compiler, installed <code>gcc</code> using <code>sudo yum install \"Development Tools\"</code> </li>\n<li><code>cmake</code> with <a href=\"https://gist.github.com/1duo/38af1abd68a2c7fe5087532ab968574e\" rel=\"nofollow noreferrer\">these instructions</a>. </li>\n<li>A few libraries with <code>sudo yum install glog-devel atlas-devel gflags-devel eigen3-devel suitesparse-devel blas-devel lapack-devel</code></li>\n<li>In a new folder, I downloaded the tar.gz file with </li>\n</ul>\n\n<pre><code>wget http://ceres-solver.org/ceres-solver-1.14.0.tar.gz \n</code></pre>\n\n<p>followed by the <a href=\"http://ceres-solver.org/installation.html#linux\" rel=\"nofollow noreferrer\">linux instructions</a> on the <code>ceres</code> webpage, namely</p>\n\n<pre><code>mkdir ceres-bin\ncd ceres-bin\nsudo cmake ../ceres-solver-1.14.0\nsudo make -j3\nsudo make test\nsudo make install\n</code></pre>\n\n<p><strong>Terminal output</strong>: \nA brief output of the above code is below. I can paste the complete log if it gives more details. </p>\n\n<ol>\n<li>Running <code>cmake</code>: </li>\n</ol>\n\n<pre><code>$ cmake ../ceres-solver-1.14.0\n-- The C compiler identification is GNU 4.8.5\n-- The CXX compiler identification is GNU 4.8.5\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Detected Ceres version: 1.14.0 from /home/opc/ceres-installer/ceres-solver-1.14.0/include/ceres/version.h\n-- Detected non-Debian/Arch-based 64-bit Linux distribution. Defaulting to library install directory: lib. You can override this by specifying LIB_SUFFIX.\n-- No preference for use of exported Eigen CMake configuration set, and no hints for include directory provided. Defaulting to preferring an installed/exported Eigen CMake configuration if available.\n-- Found installed version of Eigen: /usr/share/eigen3\n-- Found Eigen: /usr/include/eigen3 (found version \"3.3.4\")\n-- Found Eigen version 3.3.4: /usr/include/eigen3\n-- Enabling use of Eigen as a sparse linear algebra library.\n\n... [More log statements] ...\n\n-- Building Ceres as a static library.\n-- No build type specified; defaulting to CMAKE_BUILD_TYPE=Release.\n-- Creating configured Ceres config.h output directory: /home/opc/ceres-installer/ceres-bin/config/ceres/internal\n-- Enabling CERES_USE_EIGEN_SPARSE in Ceres config.h\n-- Enabling CERES_USE_OPENMP in Ceres config.h\n-- Enabling CERES_HAVE_PTHREAD in Ceres config.h\n-- Enabling CERES_HAVE_RWLOCK in Ceres config.h\n-- Enabling CERES_TR1_UNORDERED_MAP in Ceres config.h\n-- Enabling CERES_TR1_MEMORY_HEADER in Ceres config.h\n-- Enabling CERES_TR1_SHARED_PTR in Ceres config.h\n-- Build the examples.\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/opc/ceres-installer/ceres-bin\n</code></pre>\n\n<ol start=\"2\">\n<li>Tail output after running <code>make install</code>:</li>\n</ol>\n\n<pre><code>$ sudo make install\nInstall the project...\n-- Install configuration: \"Release\"\n-- Installing: /usr/local/include/ceres/autodiff_cost_function.h\n-- Installing: /usr/local/include/ceres/autodiff_local_parameterization.h\n-- Installing: /usr/local/include/ceres/c_api.h\n-- Installing: /usr/local/include/ceres/ceres.h\n\n... [Similar statements] ...\n\n-- Installing: /usr/local/include/ceres/internal/scoped_ptr.h\n-- Installing: /usr/local/include/ceres/internal/variadic_evaluate.h\n-- Installing: /usr/local/include/ceres/internal/config.h\n-- Installing: /usr/local/lib64/cmake/Ceres/CeresTargets.cmake\n-- Installing: /usr/local/lib64/cmake/Ceres/CeresTargets-release.cmake\n-- Installing: /usr/local/lib64/cmake/Ceres/CeresConfig.cmake\n-- Installing: /usr/local/lib64/cmake/Ceres/CeresConfigVersion.cmake\n-- Installing: /usr/local/lib64/cmake/Ceres/FindEigen.cmake\n-- Installing: /usr/local/lib64/cmake/Ceres/FindGlog.cmake\n-- Installing: /usr/local/lib64/cmake/Ceres/FindGflags.cmake\n-- Installing: /usr/local/lib64/libceres.a\n</code></pre>\n\n<p><strong>g++ error</strong>: \nWhen I try to run the <a href=\"https://ceres-solver.googlesource.com/ceres-solver/+/master/examples/helloworld.cc\" rel=\"nofollow noreferrer\"><code>helloworld.cc</code></a> file with the following command</p>\n\n<pre><code>g++ helloworld.cc -I /usr/include/eigen3\n</code></pre>\n\n<p>then I get the following error:</p>\n\n<pre><code>/tmp/cc8xntFU.o: In function `main':\nhelloworld.cc:(.text+0xd4): undefined reference to `ceres::Problem::Problem()'\nhelloworld.cc:(.text+0x119): undefined reference to `ceres::Problem::AddResidualBlock(ceres::CostFunction*, ceres::LossFunction*, double*)'\nhelloworld.cc:(.text+0x13e): undefined reference to `ceres::Solver::Summary::Summary()'\nhelloworld.cc:(.text+0x15b): undefined reference to `ceres::Solve(ceres::Solver::Options const&amp;, ceres::Problem*, ceres::Solver::Summary*)'\nhelloworld.cc:(.text+0x171): undefined reference to `ceres::Solver::Summary::BriefReport() const'\nhelloworld.cc:(.text+0x22c): undefined reference to `ceres::Problem::~Problem()'\nhelloworld.cc:(.text+0x288): undefined reference to `ceres::Problem::~Problem()'\n/tmp/cc8xntFU.o: In function `ceres::AutoDiffCostFunction&lt;CostFunctor, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0&gt;::AutoDiffCostFunction(CostFunctor*)':\nhelloworld.cc:(.text._ZN5ceres20AutoDiffCostFunctionI11CostFunctorLi1ELi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EEC2EPS1_[_ZN5ceres20AutoDiffCostFunctionI11CostFunctorLi1ELi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EEC5EPS1_]+0xb1): undefined reference to `google::LogMessageFatal::LogMessageFatal(char const*, int, google::CheckOpString const&amp;)'\nhelloworld.cc:(.text._ZN5ceres20AutoDiffCostFunctionI11CostFunctorLi1ELi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EEC2EPS1_[_ZN5ceres20AutoDiffCostFunctionI11CostFunctorLi1ELi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EEC5EPS1_]+0xbd): undefined reference to `google::LogMessage::stream()'\nhelloworld.cc:(.text._ZN5ceres20AutoDiffCostFunctionI11CostFunctorLi1ELi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EEC2EPS1_[_ZN5ceres20AutoDiffCostFunctionI11CostFunctorLi1ELi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EEC5EPS1_]+0xe3): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\nhelloworld.cc:(.text._ZN5ceres20AutoDiffCostFunctionI11CostFunctorLi1ELi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EEC2EPS1_[_ZN5ceres20AutoDiffCostFunctionI11CostFunctorLi1ELi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EEC5EPS1_]+0xef): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\n/tmp/cc8xntFU.o: In function `std::string* google::MakeCheckOpString&lt;int, int&gt;(int const&amp;, int const&amp;, char const*)':\nhelloworld.cc:(.text._ZN6google17MakeCheckOpStringIiiEEPSsRKT_RKT0_PKc[_ZN6google17MakeCheckOpStringIiiEEPSsRKT_RKT0_PKc]+0x24): undefined reference to `google::base::CheckOpMessageBuilder::CheckOpMessageBuilder(char const*)'\nhelloworld.cc:(.text._ZN6google17MakeCheckOpStringIiiEEPSsRKT_RKT0_PKc[_ZN6google17MakeCheckOpStringIiiEEPSsRKT_RKT0_PKc]+0x4b): undefined reference to `google::base::CheckOpMessageBuilder::ForVar2()'\nhelloworld.cc:(.text._ZN6google17MakeCheckOpStringIiiEEPSsRKT_RKT0_PKc[_ZN6google17MakeCheckOpStringIiiEEPSsRKT_RKT0_PKc]+0x66): undefined reference to `google::base::CheckOpMessageBuilder::NewString()'\nhelloworld.cc:(.text._ZN6google17MakeCheckOpStringIiiEEPSsRKT_RKT0_PKc[_ZN6google17MakeCheckOpStringIiiEEPSsRKT_RKT0_PKc]+0x75): undefined reference to `google::base::CheckOpMessageBuilder::~CheckOpMessageBuilder()'\nhelloworld.cc:(.text._ZN6google17MakeCheckOpStringIiiEEPSsRKT_RKT0_PKc[_ZN6google17MakeCheckOpStringIiiEEPSsRKT_RKT0_PKc]+0x89): undefined reference to `google::base::CheckOpMessageBuilder::~CheckOpMessageBuilder()'\n/tmp/cc8xntFU.o: In function `std::string* google::MakeCheckOpString&lt;int, ceres::DimensionType&gt;(int const&amp;, ceres::DimensionType const&amp;, char const*)':\nhelloworld.cc:(.text._ZN6google17MakeCheckOpStringIiN5ceres13DimensionTypeEEEPSsRKT_RKT0_PKc[_ZN6google17MakeCheckOpStringIiN5ceres13DimensionTypeEEEPSsRKT_RKT0_PKc]+0x24): undefined reference to `google::base::CheckOpMessageBuilder::CheckOpMessageBuilder(char const*)'\nhelloworld.cc:(.text._ZN6google17MakeCheckOpStringIiN5ceres13DimensionTypeEEEPSsRKT_RKT0_PKc[_ZN6google17MakeCheckOpStringIiN5ceres13DimensionTypeEEEPSsRKT_RKT0_PKc]+0x4b): undefined reference to `google::base::CheckOpMessageBuilder::ForVar2()'\nhelloworld.cc:(.text._ZN6google17MakeCheckOpStringIiN5ceres13DimensionTypeEEEPSsRKT_RKT0_PKc[_ZN6google17MakeCheckOpStringIiN5ceres13DimensionTypeEEEPSsRKT_RKT0_PKc]+0x66): undefined reference to `google::base::CheckOpMessageBuilder::NewString()'\nhelloworld.cc:(.text._ZN6google17MakeCheckOpStringIiN5ceres13DimensionTypeEEEPSsRKT_RKT0_PKc[_ZN6google17MakeCheckOpStringIiN5ceres13DimensionTypeEEEPSsRKT_RKT0_PKc]+0x75): undefined reference to `google::base::CheckOpMessageBuilder::~CheckOpMessageBuilder()'\nhelloworld.cc:(.text._ZN6google17MakeCheckOpStringIiN5ceres13DimensionTypeEEEPSsRKT_RKT0_PKc[_ZN6google17MakeCheckOpStringIiN5ceres13DimensionTypeEEEPSsRKT_RKT0_PKc]+0x89): undefined reference to `google::base::CheckOpMessageBuilder::~CheckOpMessageBuilder()'\n/tmp/cc8xntFU.o: In function `ceres::internal::AutoDiff&lt;CostFunctor, double, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0&gt;::Differentiate(CostFunctor const&amp;, double const* const*, int, double*, double**)':\nhelloworld.cc:(.text._ZN5ceres8internal8AutoDiffI11CostFunctordLi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EE13DifferentiateERKS2_PKPKdiPdPSA_[_ZN5ceres8internal8AutoDiffI11CostFunctordLi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EE13DifferentiateERKS2_PKPKdiPdPSA_]+0x8c): undefined reference to `google::LogMessageFatal::LogMessageFatal(char const*, int, google::CheckOpString const&amp;)'\nhelloworld.cc:(.text._ZN5ceres8internal8AutoDiffI11CostFunctordLi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EE13DifferentiateERKS2_PKPKdiPdPSA_[_ZN5ceres8internal8AutoDiffI11CostFunctordLi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EE13DifferentiateERKS2_PKPKdiPdPSA_]+0x98): undefined reference to `google::LogMessage::stream()'\nhelloworld.cc:(.text._ZN5ceres8internal8AutoDiffI11CostFunctordLi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EE13DifferentiateERKS2_PKPKdiPdPSA_[_ZN5ceres8internal8AutoDiffI11CostFunctordLi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EE13DifferentiateERKS2_PKPKdiPdPSA_]+0xa4): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\nhelloworld.cc:(.text._ZN5ceres8internal8AutoDiffI11CostFunctordLi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EE13DifferentiateERKS2_PKPKdiPdPSA_[_ZN5ceres8internal8AutoDiffI11CostFunctordLi1ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0ELi0EE13DifferentiateERKS2_PKPKdiPdPSA_]+0x33b): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\n/tmp/cc8xntFU.o: In function `void ceres::internal::Make1stOrderPerturbation&lt;ceres::Jet&lt;double, 1&gt;, double, 1&gt;(int, double const*, ceres::Jet&lt;double, 1&gt;*)':\nhelloworld.cc:(.text._ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_[_ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_]+0x45): undefined reference to `google::LogMessageFatal::LogMessageFatal(char const*, int)'\nhelloworld.cc:(.text._ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_[_ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_]+0x56): undefined reference to `google::LogMessage::stream()'\nhelloworld.cc:(.text._ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_[_ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_]+0x9b): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\nhelloworld.cc:(.text._ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_[_ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_]+0xcd): undefined reference to `google::LogMessageFatal::LogMessageFatal(char const*, int)'\nhelloworld.cc:(.text._ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_[_ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_]+0xde): undefined reference to `google::LogMessage::stream()'\nhelloworld.cc:(.text._ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_[_ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_]+0x123): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\nhelloworld.cc:(.text._ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_[_ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_]+0x1dd): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\nhelloworld.cc:(.text._ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_[_ZN5ceres8internal24Make1stOrderPerturbationINS_3JetIdLi1EEEdLi1EEEviPKT0_PT_]+0x1fa): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\n/tmp/cc8xntFU.o: In function `void ceres::internal::Take0thOrderPart&lt;ceres::Jet&lt;double, 1&gt;, double*&gt;(int, ceres::Jet&lt;double, 1&gt; const*, double*)':\nhelloworld.cc:(.text._ZN5ceres8internal16Take0thOrderPartINS_3JetIdLi1EEEPdEEviPKT_T0_[_ZN5ceres8internal16Take0thOrderPartINS_3JetIdLi1EEEPdEEviPKT_T0_]+0x45): undefined reference to `google::LogMessageFatal::LogMessageFatal(char const*, int)'\nhelloworld.cc:(.text._ZN5ceres8internal16Take0thOrderPartINS_3JetIdLi1EEEPdEEviPKT_T0_[_ZN5ceres8internal16Take0thOrderPartINS_3JetIdLi1EEEPdEEviPKT_T0_]+0x56): undefined reference to `google::LogMessage::stream()'\nhelloworld.cc:(.text._ZN5ceres8internal16Take0thOrderPartINS_3JetIdLi1EEEPdEEviPKT_T0_[_ZN5ceres8internal16Take0thOrderPartINS_3JetIdLi1EEEPdEEviPKT_T0_]+0x9b): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\nhelloworld.cc:(.text._ZN5ceres8internal16Take0thOrderPartINS_3JetIdLi1EEEPdEEviPKT_T0_[_ZN5ceres8internal16Take0thOrderPartINS_3JetIdLi1EEEPdEEviPKT_T0_]+0xf4): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\n/tmp/cc8xntFU.o: In function `void ceres::internal::Take1stOrderPart&lt;ceres::Jet&lt;double, 1&gt;, double, 0, 1&gt;(int, ceres::Jet&lt;double, 1&gt; const*, double*)':\nhelloworld.cc:(.text._ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_[_ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_]+0x57): undefined reference to `google::LogMessageFatal::LogMessageFatal(char const*, int)'\nhelloworld.cc:(.text._ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_[_ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_]+0x6b): undefined reference to `google::LogMessage::stream()'\nhelloworld.cc:(.text._ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_[_ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_]+0xb9): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\nhelloworld.cc:(.text._ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_[_ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_]+0xf1): undefined reference to `google::LogMessageFatal::LogMessageFatal(char const*, int)'\nhelloworld.cc:(.text._ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_[_ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_]+0x105): undefined reference to `google::LogMessage::stream()'\nhelloworld.cc:(.text._ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_[_ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_]+0x14d): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\nhelloworld.cc:(.text._ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_[_ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_]+0x205): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\nhelloworld.cc:(.text._ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_[_ZN5ceres8internal16Take1stOrderPartINS_3JetIdLi1EEEdLi0ELi1EEEviPKT_PT0_]+0x225): undefined reference to `google::LogMessageFatal::~LogMessageFatal()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I see the error is similar to <a href=\"https://stackoverflow.com/questions/35314764/\">this question</a> but it hasn't receive a satisfactory answer. Any help would be appreciated.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1567006556, "post_id": 57695848, "comment_id": 101835947, "body": "Can you explain exactly where or when you expect <code>setValue</code> to be called? In the code shown, there is no cause for it to be called, so it&#39;s normal that it is not called."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1567006574, "post_id": 57695848, "comment_id": 101835957, "body": "<i>but it seems there is an error though,</i> Why?  What makes you think that <code>setValue</code> must be called?"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 2, "creation_date": 1567006719, "post_id": 57695848, "comment_id": 101836030, "body": "You are not calling a member function anywhere. In your main do <code>ob1.setValue(123);</code>. The code gets executed inside the <code>main</code> function, not the class definition."}, {"owner": {"reputation": 712, "user_id": 10168590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5484b587c0114f37f8323164e249256?s=128&d=identicon&r=PG&f=1", "display_name": "Suven Pandey", "link": "https://stackoverflow.com/users/10168590/suven-pandey"}, "edited": false, "score": 1, "creation_date": 1567006735, "post_id": 57695848, "comment_id": 101836040, "body": "Just to clear member functions <b>have to be</b> called explicitly called by doing ob1.setvalue(<i>some integer</i>). If a function is not called by <code>main()</code> or by any of functions called from <code>main()</code>, the function is never executed."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1567006746, "post_id": 57695848, "comment_id": 101836048, "body": "<code>void Example::setValue(int a)   {                                    this-&gt;x = x;                      }     </code> &lt;-- That looks wrong. That would just assign the member <code>x</code> the value it already has and the function argument <code>a</code> is unused. Are you <i>sure</i> that&#39;s what your book is saying? Because if it is, I&#39;d say the book has a bug."}, {"owner": {"reputation": 39, "user_id": 11989955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0440e16fa8c770f7c6110ea07c11f68b?s=128&d=identicon&r=PG&f=1", "display_name": "JimNastic", "link": "https://stackoverflow.com/users/11989955/jimnastic"}, "edited": false, "score": 0, "creation_date": 1567006807, "post_id": 57695848, "comment_id": 101836085, "body": "The next part talks about replacing the code inside of the &#39;setvalue&#39; function, which is not getting called."}, {"owner": {"reputation": 39, "user_id": 11989955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0440e16fa8c770f7c6110ea07c11f68b?s=128&d=identicon&r=PG&f=1", "display_name": "JimNastic", "link": "https://stackoverflow.com/users/11989955/jimnastic"}, "edited": false, "score": 0, "creation_date": 1567006991, "post_id": 57695848, "comment_id": 101836189, "body": "Well, it just kinda seems its a bad exercise. Thanks all."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1567007679, "creation_date": 1567007679, "answer_id": 57696173, "question_id": 57695848, "link": "https://stackoverflow.com/questions/57695848/this-member-function-is-not-getting-called-and-i-cant-figure-out-how-to-rectif/57696173#57696173", "title": "This member function is not getting called, and I can&#39;t figure out how to rectify it", "body": "<p>It doesn't ever get called, because you never call it.</p>\n\n<p>The only place that the member variable <code>x</code> is set, in this particular example, is in the constructor. And the constructor happens to do so directly, rather than by calling <code>setValue()</code>.</p>\n\n<p>You <em>could</em> later call <code>setValue()</code> to change <code>x</code>, but currently you do not.</p>\n\n<p>It's not uncommon to provide functionality that makes sense to be part of the class, even if you're not using that functionality quite yet. Although, unless you're writing a library, you generally wouldn't do too much of writing functionality you don't yet need.</p>\n\n<p>Perhaps later exercises in the textbook involve calling <code>setValue()</code>. I would just continue reading and not worry about this.</p>\n"}], "owner": {"reputation": 39, "user_id": 11989955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0440e16fa8c770f7c6110ea07c11f68b?s=128&d=identicon&r=PG&f=1", "display_name": "JimNastic", "link": "https://stackoverflow.com/users/11989955/jimnastic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "closed_date": 1567069752, "answer_count": 1, "score": 0, "last_activity_date": 1567007679, "creation_date": 1567006428, "last_edit_date": 1567006671, "question_id": 57695848, "link": "https://stackoverflow.com/questions/57695848/this-member-function-is-not-getting-called-and-i-cant-figure-out-how-to-rectif", "closed_reason": "Needs details or clarity", "title": "This member function is not getting called, and I can&#39;t figure out how to rectify it", "body": "<p>I'm reading through my C++ textbook for an upcoming class, and following along an exercise in the book. This exercise compiles and seems to give the results that you would expect, but it seems there is an error though, and I can't figure out how to fix it.\nHere is the code.</p>\n\n<pre><code>// Page 706 from text\n\n\n//Contents of ThisExample.h\nclass Example\n{\n    int x;\n    public:\n        Example(int a){x=a;}\n        void setValue(int);\n        void printAddressAndValue();\n\n};\n\n/* \n//Contents of ThisExample.cpp\n#include \"ThisExample.h\"\n\n*/\n#include &lt;iostream&gt;\nusing namespace std;\n\n\n/*********************************************************\n * Set value of object.\n*********************************************************/\n\nvoid Example::setValue(int a)   // &lt;---------- Doesn't execute\n{                               // &lt;---------- Doesn't execute\n    x = a;                      // &lt;---------- Doesn't execute\n}                               // &lt;---------- Doesn't execute\n\nvoid Example::printAddressAndValue()\n{\n    cout&lt;&lt; \"The object at address \" &lt;&lt; this &lt;&lt; \" has \"\n        &lt;&lt; \"value \"&lt;&lt; (*this).x&lt;&lt;endl;\n\n}\n\n/*\n//Contents of main program\n\n#include &lt;iostream&gt;\n#include \"ThisExample.h\"\nusing namespace std;\n*/\nint main()\n{\n    Example ob1(10), ob2(20);\n    // Print the addresses of the two objects\n    cout&lt;&lt;\"Addresses of objects are \"&lt;&lt; &amp;ob1 &lt;&lt; \" and \"&lt;&lt;&amp;ob2&lt;&lt;endl;\n\n    // Print the addresses and values from within the member function\n    ob1.printAddressAndValue();\n    ob2.printAddressAndValue();\n\n    return 0;\n\n}\n</code></pre>\n\n<p>In the book, they talk about replacing </p>\n\n<pre><code>void Example::setValue(int a)  \n{                               \n    x = a;                     \n}   \n</code></pre>\n\n<p>with</p>\n\n<pre><code>void Example::setValue(int a)  \n{                               \n    this-&gt;x = x;                     \n}     \n</code></pre>\n\n<p>But when I step through it with a debugger (which I am also new to), I don't see that function ever getting called.    </p>\n\n<p>I've tried commenting out the function entirely and it still runs, that's how I know it isn't getting called.</p>\n\n<p>I also tried removing from the class </p>\n\n<pre><code>    Example(int a){x=a;}\n</code></pre>\n\n<p>but then it doesn't compile.  Any help? I just want to move along with the textbook, which is called \"Starting Out With C++ Early Objects\nJudy Walters, Godfrey Muganda, Tony Gaddis\" and the exercise is on page 706.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "algorithm", "containers", "transform"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1567005985, "post_id": 57695640, "comment_id": 101835574, "body": "Welcome to SO If I/O is working, just remove that from the question and focus on the algorithm. Otherwise, it just adds more unnecessary complexity and makes it harder to determine the input you&#39;re using. Also, this code is barely readable. Please use significant whitespace when posting questions (or when coding in general). Thanks."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 2, "creation_date": 1567006046, "post_id": 57695640, "comment_id": 101835619, "body": "Did you mean <code>cout&lt;&lt;arr2[k]+&quot; &quot;;</code> or <code>cout&lt;&lt;arr2[k]&lt;&lt;&quot; &quot;;</code>?  They do very different things."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10145167, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-l-Y_eVqgOgI/AAAAAAAAAAI/AAAAAAAADN4/f6zfkoR-LHI/photo.jpg?sz=128", "display_name": "ilaggy", "link": "https://stackoverflow.com/users/10145167/ilaggy"}, "edited": false, "score": 0, "creation_date": 1568345295, "post_id": 57696038, "comment_id": 102252202, "body": "thank you so much for the time you took to explain all that :), I  did mix in a bit of python in that last line and altering that fixed the thing. But I wasn&#39;t aware of vectors. Thank you for that piece of information"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1567007568, "last_edit_date": 1567007568, "creation_date": 1567007155, "answer_id": 57696038, "question_id": 57695640, "link": "https://stackoverflow.com/questions/57695640/incorrect-output-when-modifying-the-value-from-an-array-to-another-one/57696038#57696038", "title": "Incorrect output when modifying the value from an array to another one", "body": "<p>For starters it is better to use the standard class <code>std::vector</code> instead of arrays.</p>\n\n<p>The function should do only one action: to form a new array according to the assignment.</p>\n\n<p>Its output should be done in main.</p>\n\n<p>A general approach can look the following way. At first you should calculate the product of all elements of the original vector and then use this value by to calculate the value of an element of the destination vector simply by dividing the product by the value of the element of the original vector.</p>\n\n<p>Here is a demonstrative program that shows how it can be done using standard C++ algorithms.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n\nint main() \n{\n    std::vector&lt;int&gt; v1 = { 4, 5, 6 };\n\n    for ( const auto &amp;item : v1 ) std::cout &lt;&lt; item &lt;&lt; ' ';\n    std::cout &lt;&lt; '\\n';\n\n    int product = std::accumulate( std::begin( v1 ), std::end( v1 ), 1, \n                                   std::multiplies&lt;&gt;() );\n\n    std::vector&lt;int&gt; v2;\n    v2.reserve( v1.size() );\n\n    std::transform( std::begin( v1 ), std::end( v1 ), std::back_inserter( v2 ),\n                    [=]( const auto &amp;item ) { return product / item; } );\n\n    for ( const auto &amp;item : v2 ) std::cout &lt;&lt; item &lt;&lt; ' ';\n    std::cout &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>4 5 6 \n30 24 20 \n</code></pre>\n\n<p>Use the ideas to write your code.</p>\n\n<p>As for your code then you should the last loop place outside other loops.</p>\n\n<pre><code>for(int i=0;i&lt;num;i++)\n{\n    {\n        for(int j=0;j&lt;num;j++)\n        {\n            if(j==i)\n            {}\n            else\n            {\n                arr2[i]*=arr[j];\n            } \n        } \n    } \n\n}\n\nfor(int k=0;k&lt;num;k++)\n{\n    cout&lt;&lt;arr2[k] &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>And at least this code snippet</p>\n\n<pre><code>        if(j==i)\n        {}\n        else\n        {\n            arr2[i]*=arr[j];\n        } \n</code></pre>\n\n<p>it is better to rewrite like</p>\n\n<pre><code>        if(j != i)\n        {\n            arr2[i] *= arr[j];\n        } \n</code></pre>\n\n<p>And in this statement</p>\n\n<pre><code>cout&lt;&lt;arr2[k]+\" \";\n            ^^^\n</code></pre>\n\n<p>there is a typo. It is evident that you mean</p>\n\n<pre><code>cout&lt;&lt;arr2[k] &lt;&lt; \" \";\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10145167, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-l-Y_eVqgOgI/AAAAAAAAAAI/AAAAAAAADN4/f6zfkoR-LHI/photo.jpg?sz=128", "display_name": "ilaggy", "link": "https://stackoverflow.com/users/10145167/ilaggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567015029, "creation_date": 1567005668, "last_edit_date": 1567015029, "question_id": 57695640, "link": "https://stackoverflow.com/questions/57695640/incorrect-output-when-modifying-the-value-from-an-array-to-another-one", "title": "Incorrect output when modifying the value from an array to another one", "body": "<p>The question is to take a number (<code>num</code>), create an array with that many (<code>num</code>) elements, and then print an output which gives you an array in which each element is the product of the other elements in the array (excluding the corresponding element)</p>\n\n<p>You'll better understand this with an input/output example:</p>\n\n<p>If the input is:</p>\n\n<pre><code>3                // number of elements\n4 5 6            // array elements\n</code></pre>\n\n<p>...then the output should be:</p>\n\n<pre><code>30 24 20         // 6*5=30, 6*4=24, 4*5=20\n</code></pre>\n\n<p>Currently the output given happens to be incorrect.  I end up getting are garbage values.  I can't seem to figure out what went wrong and where.</p>\n\n<pre class=\"lang-cplusplus prettyprint-override\"><code>#include&lt;stdio.h&gt;\n#include&lt;iostream&gt;\n\nusing namespace std;\n\nvoid mult(int arr[],int num );\n\nint main()\n{\n    int num,arr[100];\n\n    cin&gt;&gt;num;\n\n    for(int i=0;i&lt;num;i++)\n    {\n        cin&gt;&gt;arr[i];\n    }\n\n    mult(arr,num);\n    return 0; \n}\n\nvoid mult(int arr[100],int num)\n{ \n    int arr2[100];\n    for(int i=0;i&lt;num;i++)\n    {\n        arr2[i]=1;\n    }\n\n    for(int i=0;i&lt;num;i++)\n    {\n        {\n            for(int j=0;j&lt;num;j++)\n            {\n                if(j==i)\n                {}\n                else\n                {\n                    arr2[i]*=arr[j];\n                } \n            } \n        } \n\n        for(int k=0;k&lt;num;k++)\n        {\n            cout&lt;&lt;arr2[k]+\" \";\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "mfc", "virtual-functions"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 3, "creation_date": 1567005832, "post_id": 57695639, "comment_id": 101835491, "body": "Create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1567005975, "post_id": 57695639, "comment_id": 101835568, "body": "Generally this means you have sliced the object.  Can&#39;t really help you without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "edited": false, "score": 0, "creation_date": 1567088509, "post_id": 57695639, "comment_id": 101866733, "body": "The general answer is that virtual functions are not called in constructors and destructors in C++."}], "answers": [{"comments": [{"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "edited": false, "score": 0, "creation_date": 1567007784, "post_id": 57695982, "comment_id": 101836604, "body": "So, it&#39;s happening because it&#39;s called from the destructor and the derived class has already been destructed? If I call <code>Close()</code> before throwing the exception, then I don&#39;t get the ASSERT. But then I lose the error information as well. Kind of a mess, but I think this is the right answer."}, {"owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "edited": false, "score": 0, "creation_date": 1567008014, "post_id": 57695982, "comment_id": 101836735, "body": "BTW, that&#39;s a pretty good answer. There&#39;s  a 250 point bounty on <a href=\"https://stackoverflow.com/questions/57649696/custom-crecordset-class-does-not-call-dofieldexchange-when-usemultirowfetch-is\">this question</a>, if you&#39;re interested. It&#39;s related to the same code."}, {"owner": {"reputation": 5170, "user_id": 1410246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfce8c2aa420b800bb7595ac5fbc986d?s=128&d=identicon&r=PG", "display_name": "EylM", "link": "https://stackoverflow.com/users/1410246/eylm"}, "reply_to_user": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "edited": false, "score": 0, "creation_date": 1567008118, "post_id": 57695982, "comment_id": 101836798, "body": "Yes, the destructors of base classes are called in the reverse order of the completion of their constructor. So if your base class is calling a virtual function, the derived object destructor is already been called, so no functions of the derived class could be called."}], "tags": [], "owner": {"reputation": 5170, "user_id": 1410246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfce8c2aa420b800bb7595ac5fbc986d?s=128&d=identicon&r=PG", "display_name": "EylM", "link": "https://stackoverflow.com/users/1410246/eylm"}, "is_accepted": true, "score": 1, "last_activity_date": 1567010801, "last_edit_date": 1567010801, "creation_date": 1567006916, "answer_id": 57695982, "question_id": 57695639, "link": "https://stackoverflow.com/questions/57695639/when-is-an-overridden-virtual-function-not-called/57695982#57695982", "title": "When is an overridden virtual function not called", "body": "<p>A base class method might be called instead of a derived class method when the base class destructor calls a virtual function. In this case, the derived class is already destroyed and no virtual method can be called. (More info on <a href=\"https://stackoverflow.com/questions/12092933/calling-virtual-function-from-destructor\">this question</a>).</p>\n\n<p>Back to your question:</p>\n\n<p>From MFC code, dbcore.cpp using VS 2019 (14.22.27905):</p>\n\n<p><code>CRecordset::FreeRowset()</code> calling <code>DoBulkFieldExchange</code>, and looks like that is some cases <code>FreeRowset()</code> is called by the destructor of <code>CRecordset</code>.</p>\n\n<p>This is the comment from <code>CRecordset::FreeRowset</code> code.</p>\n\n<blockquote>\n  <p>Calling virtual function, <code>DoBulkFieldExchange</code>, here is bad \n   because <code>Close</code> then <code>FreeRowset</code> may get called from destructor. \n   There is no simple choice however if <code>RFX_Bulk</code> functions do \n   a memory allocation. The net result is that users MUST call \n   <code>Close</code> explicitly\n   (rather than relying on destructor) if using multi row fetches,\n   otherwise they will get a memory leak. If rowset already allocated,\n   delete old rowset buffers</p>\n</blockquote>\n"}], "owner": {"reputation": 59348, "user_id": 522663, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/OKOEw.png?s=128&g=1", "display_name": "Jonathan Wood", "link": "https://stackoverflow.com/users/522663/jonathan-wood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 57695982, "answer_count": 1, "score": 0, "last_activity_date": 1567077701, "creation_date": 1567005661, "last_edit_date": 1567006573, "question_id": 57695639, "link": "https://stackoverflow.com/questions/57695639/when-is-an-overridden-virtual-function-not-called", "title": "When is an overridden virtual function not called", "body": "<p>I'm working with MFC's <code>CRecordset</code> class. I have overridden the virtual method <code>DoBulkFieldExchange</code>.</p>\n\n<p>In general, my overridden methods are called and working just fine. However, I have a situation where the base class <code>DoBulkFieldExchange</code> method is called.</p>\n\n<p>In an unrelated method of my derived <code>CRecordset</code> class, I call <code>AfxThrowDBException</code>. This calls the <code>CRecordset</code> destructor. And, during cleanup, <code>DoBulkFieldExchange</code> is called in the base class and not in my derived class. In this case, it causes an assert as the base class is not expecting the default version to be called with this configuration.</p>\n\n<p>I know my derived class is set up correctly because it gets called. So what are the circumstances where the base class' method is called instead?</p>\n\n<p>Here's my custom <code>CRecordset</code> class:</p>\n\n<pre><code>class CRS : public CRecordset\n{\npublic:\n    int m_nId;\n    TCHAR m_szName[CUSTOMER_NAME_MAXLENGTH + 1];\n\n    int* m_pnIds;\n    long* m_pnIdLengths;\n    LPTSTR m_pszNames;\n    long* m_pnNameLengths;\n\npublic:\n    CRS(CDatabase* pDatabase = NULL)\n        : CRecordset(pDatabase)\n    {\n        m_nFields = 2;\n\n        m_nId = 0;\n        m_szName[0] = '\\0';\n\n        m_pnIds = NULL;\n        m_pnIdLengths = NULL;\n        m_pszNames = NULL;\n        m_pnNameLengths = NULL;\n    }\n\n    CString GetDefaultSQL()\n    {\n        return CCustomerData::m_szTableName;\n    }\n\n    void DoFieldExchange(CFieldExchange* pFX)\n    {\n        pFX-&gt;SetFieldType(CFieldExchange::outputColumn);\n        RFX_Int(pFX, _T(\"Id\"), m_nId);\n        RFX_Text(pFX, _T(\"Name\"), m_szName, CUSTOMER_NAME_MAXLENGTH);\n    }\n\n    void DoBulkFieldExchange(CFieldExchange* pFX)\n    {\n        pFX-&gt;SetFieldType(CFieldExchange::outputColumn);\n        RFX_Int_Bulk(pFX, _T(\"Id\"), &amp;m_pnIds, &amp;m_pnIdLengths);\n        RFX_Text_Bulk(pFX, _T(\"Name\"), &amp;m_pszNames, &amp;m_pnNameLengths, (CUSTOMER_NAME_MAXLENGTH + 1) * 2);\n    }\n};\n</code></pre>\n\n<p>And here's the code that uses it. <code>ExecuteSqlQuery</code> just calls <code>CRS::Open()</code> with the given database.</p>\n\n<pre><code>CRemoteDatabase db;\ndb.Open();\nauto prs = db.ExecuteSqlQuery&lt;CRS&gt;(NULL, CRecordset::forwardOnly, CRecordset::useMultiRowFetch);\n\nwhile (!prs-&gt;IsEOF())\n{\n    // The call to GetFieldValue is producing an 'Invalid cursor position'\n    // error, which causes AfxThrowDBException to be called. This\n    // indirectly calls the destructor, which then calls the base-class\n    // DoBulkFieldExchange method, which in turn ASSERTs. Why doesn't\n    // it call my derived method?\n    CString sValue;\n    prs-&gt;GetFieldValue((short)CUSTOMER_ID, sValue);\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "constructor", "using-declaration"], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1567004193, "last_edit_date": 1567004193, "creation_date": 1567003970, "answer_id": 57695145, "question_id": 57695057, "link": "https://stackoverflow.com/questions/57695057/c-visibility-of-inherited-constructor/57695145#57695145", "title": "C++ visibility of inherited constructor", "body": "<p>According to the C++17 Standard (10.3.3 The using declaration)</p>\n\n<blockquote>\n  <p>19 A synonym created by a <em>using-declaration</em> has the usual\n  accessibility for a <em>member-declaration</em>. <strong>A <em>using-declarator</em> that names a\n  constructor does not create a synonym; instead,</strong> the additional\n  constructors are accessible if they would be accessible when used to\n  construct an object of the corresponding base class, and <strong>the\n  accessibility of the <em>using-declaration</em> is ignored</strong>.</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7475082"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "closed_date": 1567003818, "answer_count": 1, "score": 3, "last_activity_date": 1567004193, "creation_date": 1567003693, "last_edit_date": 1567004056, "question_id": 57695057, "link": "https://stackoverflow.com/questions/57695057/c-visibility-of-inherited-constructor", "closed_reason": "Duplicate", "title": "C++ visibility of inherited constructor", "body": "<p>When I use <code>using</code> like this why is the constructor inherited publicly?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Base {\nint x;\npublic:\n    Base(int x);\n};\n\nclass Derived : public Base {\n    using Base::Base;\n};\n</code></pre>\n\n<p>I can now do:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Derived d (2);\n</code></pre>\n\n<p>I thought that <code>using</code> declarations had the visibility of where they are situated. Here, it should be private.</p>\n\n<p>From <em>The C++ Programming Language</em>:</p>\n\n<blockquote>\n  <p>A name brought into a derived\n  class scope by a using-declaration has its access determined by the placement of the using-declaration;</p>\n</blockquote>\n"}, {"tags": ["java", "c++"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1567003712, "post_id": 57694896, "comment_id": 101834237, "body": "&quot;<i>the data is lost</i>&quot;, and so is the connection. Just reconnect and continue. The data you <i>have</i> received will <i>not</i> be missing any parts."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 4, "creation_date": 1567003760, "post_id": 57694896, "comment_id": 101834269, "body": "What is a &quot;weak connection&quot;. And what exactly do you see when you run a packet capture. Either you see the missing data, which indicate a receiver problem, or you don&#39;t see it, which indicates a sender problem. You cannot figure out anything else until you figure out where the problem is."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1567004494, "post_id": 57694896, "comment_id": 101834678, "body": "@qzfqzfqzf you do understand that long messages are broken up in chunks, don&#39;t you? You should never rely on receiving complete messages in one <code>recv</code> or <code>read</code> operation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11989823"}, "edited": false, "score": 0, "creation_date": 1567004835, "post_id": 57694896, "comment_id": 101834895, "body": "Just when I make the connection in Edge I stay connected but he miss some packets."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11989823"}, "edited": false, "score": 0, "creation_date": 1567004871, "post_id": 57694896, "comment_id": 101834913, "body": "Ted Lyngmo, paacket are not received"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1567004959, "post_id": 57694896, "comment_id": 101834968, "body": "clearly problem is <code>if (bytesRead &gt; 0) .. else break;</code>. <code>bytesRead</code> equal zero doesn&#39;t mean you have read all data it means they didn&#39;t arrived to your machine yet. How did you opened socket (what parameters did you provided)?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11989823"}, "edited": false, "score": 0, "creation_date": 1567006587, "post_id": 57694896, "comment_id": 101835966, "body": "yes but the problem is that when bytesRead not &gt; 0 I break and I got disconnected but not here. It&#39;s the server who give up the send"}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 11945095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a07ec59cceaaa716942bb03953e6cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Elgin", "link": "https://stackoverflow.com/users/11945095/elgin"}, "is_accepted": false, "score": 0, "last_activity_date": 1567004367, "creation_date": 1567004367, "answer_id": 57695262, "question_id": 57694896, "link": "https://stackoverflow.com/questions/57694896/why-tcp-data-send-are-breaked-when-weak-connection/57695262#57695262", "title": "Why tcp data send are breaked when weak connection", "body": "<p>I think that open streams in constructor not good approach.\nAnd stream must been closed (use try with resources in write method):</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>try(out =  new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())) {\n  out.write((event + params + \";\").getBytes(StandardCharsets.UTF_8));\n  out.flush();\n  } catch (final IOException e) {\n        }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11989823"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567004367, "creation_date": 1567003063, "last_edit_date": 1567003880, "question_id": 57694896, "link": "https://stackoverflow.com/questions/57694896/why-tcp-data-send-are-breaked-when-weak-connection", "title": "Why tcp data send are breaked when weak connection", "body": "<p>I have a problem: when my server sends data to a client with a weak connection, the data is lost and never arrive.</p>\n\n<p>Server send code (java)</p>\n\n<pre><code>public Client(Socket socket) {\n    this.socket = socket;\n    timeout = System.currentTimeMillis();\n\n    try {\n        in = socket.getInputStream();\n        out = socket.getOutputStream();\n    } catch (IOException e) {\n    }\n}\n\npublic void write(String event, Object... objs) {\n    String params = \"\";\n    for (final Object obj : objs) {\n        params += \",\" + obj;\n    }\n\n    try {\n        out.write((event + params + \";\").getBytes(StandardCharsets.UTF_8));\n        out.flush();\n    } catch (final IOException e) {\n    }\n}\n</code></pre>\n\n<p>Client receive code (C++):</p>\n\n<pre><code>while (true)\n{\n    char buf[1024];\n    long bytesRead = recv(sock, buf, sizeof(buf), 0);\n    if (bytesRead &gt; 0)\n    {\n        timeout = 0;\n        receive(string(buf, 0, bytesRead));\n    }\n    else\n    {\n        break;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "iterator"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 1, "creation_date": 1567002634, "post_id": 57694713, "comment_id": 101833623, "body": "Can you simply merge <code>m_head_nodes</code> and <code>m_tail_nodes</code> and store a single container instead?"}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 4, "creation_date": 1567002707, "post_id": 57694713, "comment_id": 101833665, "body": "First, decide what you want your iterator to do. Then implement as much of that as you can. Then ask us about a part you&#39;re having trouble with."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1567002948, "post_id": 57694713, "comment_id": 101833818, "body": "Some range libraries (as range-v3) have concat view&#39;s."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 2, "creation_date": 1567003230, "post_id": 57694713, "comment_id": 101833967, "body": "If writing that iterator yourself: You most likely would need a reference to the outer container, an iterator of the latter and an iterator of the inner container. <code>operator++</code> would first increment inner iterator, if that one reaches <code>outer-&gt;end()</code>, it would increment the outer iterator and, if not yet reached outer&#39;s end, set the inner iterator to <code>outer-&gt;begin()</code>. Equality would compare first outer, then, if equal, inner iterators \u2013 with special handling for outer already being at end, of course."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1567003239, "post_id": 57694713, "comment_id": 101833971, "body": "<code>Vector&lt;point*&gt;</code> is a bad idea. Better store simply as <code>vector&lt;point&gt;</code> - requires less memory and much better performance. Second, why not store heads and tails together instead of separate vectors? Like double length <code>vector&lt;point&gt;</code> or <code>vector&lt;pair&lt;point, point&gt; &gt;</code>. With this you have no reason to create odd iterators."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1567003431, "post_id": 57694713, "comment_id": 101834076, "body": "@ALX23z <i>&#39;bad idea&#39;</i> \u2013 not always: <code>std::vector&lt;Point&gt; allPoints; std::vector&lt;Point*&gt; someSubset;</code> <i>can</i> be meaningful, depending on use case..."}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 1, "creation_date": 1567003556, "post_id": 57694713, "comment_id": 101834147, "body": "@vahancho : the whole point of my question is about providing <i>one</i> iterator for a struct that has its contents shared across <i>many</i> containers. The iterator is meant to be a way for clients of &#39;Polyline&#39; to access the contents of &#39;Polyline&#39; without knowing its underlying data structure. I used the &#39;Polyline&#39; as an example, so we can focus on iterating two containers sequentially. Refactoring the data structure is not an option."}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1567004532, "post_id": 57694713, "comment_id": 101834700, "body": "@Beta: I hope my snippet helps in what I am trying to achieve."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1567004628, "post_id": 57694713, "comment_id": 101834756, "body": "@Aconcagua <code>vector&lt;int&gt;</code> or simply copy into another <code>vector&lt;point&gt;</code> to represent a subset depending on usage: former for modification and keeping track of data and latter for usage. These methods are safer (what if you add elements to the vector?) and more efficient. So this &#39;not always&#39; is almost always."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 3, "creation_date": 1567005009, "post_id": 57694713, "comment_id": 101834990, "body": "I find the question pretty darn clear."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1567005049, "post_id": 57694713, "comment_id": 101835014, "body": "@GrimFandango this depends on the order you want. You could either increment one till you reach the end and then increment the other one. Or you could alternate. Either way I do not recommend doing so, since user might add elements to the structure while iterating over it which will lead to odd behavior. Better let user have an access function and figure out on their own how to iterate over it."}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1567005078, "post_id": 57694713, "comment_id": 101835028, "body": "@Aconcagua: you are the only one who has understood what my aim is. Is there a way of achieving it without the iterator carrying so much data? Can the iterator be independent of the parent structure or the containers it iterates ?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 1, "creation_date": 1567005258, "post_id": 57694713, "comment_id": 101835146, "body": "You probably could have a templated custom Iterator, based on the type of the two containers&#39; iterator. Instead of storing a pointer to the Polyline, you could store the (templated) end of the first container and the begin of the second container. But you&#39;d have to address what happens when the user change those"}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1567005346, "post_id": 57694713, "comment_id": 101835198, "body": "@ALX23z, what you&#39;re describing can happen even if you have one container: if you add stuff to the container while iterating, you invalidate the iterator. Also, since <i>I</i> am creating the Iterator, I am setting up the order of iteration. I can even make it behave like a <i>const_iterator</i>."}, {"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1567005509, "post_id": 57694713, "comment_id": 101835298, "body": "@Jeffrey, +1: that is what I am looking for."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 1, "creation_date": 1567007229, "post_id": 57694713, "comment_id": 101836319, "body": "@GrimFandango in C++20 you could write it in a coroutine. Currently, why not simply write a template function <code>ApplyToAll(Lambda)</code>?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 1, "creation_date": 1567011656, "post_id": 57694713, "comment_id": 101838273, "body": "@GrimFandango <i>&#39;without the iterator carrying so much data&#39;</i> \u2013 At very least, you&#39;d need two iterators. <code>++inner; if(inner == outer-&gt;end()) { ++outer; inner = outer-&gt;begin(); }</code> \u2013 solely, the assignment to begin is UB, if outer already reached the container&#39;s end. So you need to detect this somehow. With contiguous memory, you could use a pointer as inner iterator and use <code>nullptr</code> as sentinel value. When reaching inner&#39;s end, you might just set the iterator to the sentinel and delay the assignment to <code>outer-&gt;begin()</code> until <code>operator*</code> is called."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1567011753, "post_id": 57694713, "comment_id": 101838304, "body": "With containers&#39; own iterators, bad luck for sentinels, UB if comparing iterators from different containers, so what would you want to use as sentinel then?"}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1567012418, "post_id": 57694713, "comment_id": 101838588, "body": "@ALX23z <code>std::vector&lt;Point&gt;</code> might be inappropriate if you wanted to track changes to global set within the subset, too, or <code>Point</code> might be that large that you simply don&#39;t want to have copies."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1567012428, "post_id": 57694713, "comment_id": 101838593, "body": "<code>std:vector&lt;int&gt;</code> doesn&#39;t have any advantage over vector to pointer, it will break just the same as a vector of pointers on inserting elements (unless you <i>only</i> <code>push_back</code>, then yes, you are safer). And it is <i>less</i> efficient than pointers as you need indexing: dereference of vector + addition + dereference of pointer wheras a pointer just needs to be dereferenced (for the pointer we don&#39;t even have to know that pointee is stored in a vector...)."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1567012868, "post_id": 57694713, "comment_id": 101838798, "body": "If you wanted to be safe for any change but removal of Points yet pointed to, then <code>std::vector&lt;std::unique_ptr&lt;Point&gt;&gt; allPoints; std::vector&lt;Point*&gt; someSubset;</code> would be safe, <code>std::vector&lt;int&gt;</code> not... Using shared pointers in both subsets would be safe even for removal of points yet pointed to (possibly needing to check if a Point in the subset is still is in global set to prevent use of already semantically &quot;deleted&quot; points (not in global set any more), if use case requires). (All that still assuming I wanted to be able to track changes in global set in the subsets as well.)"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1567014374, "post_id": 57694713, "comment_id": 101839414, "body": "@Aconcagua <code>Point</code> as the name suggests, is a small simple struct. Otherwise, you&#39;d better use <code>shared_ptr</code> for more flexibility (for complicated and/or classes reliability and flexibility are more important than minor boosts to performance). <code>vector&lt;int&gt;</code> ensures safety under copy, reallocation, and serialization. Futhermore, it takes less space than pointers."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "reply_to_user": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1567018129, "post_id": 57694713, "comment_id": 101840814, "body": "@ALX23z Point can be as small as it wants, if subset shall follow changes in global, you need indirection. I didn&#39;t intend to disqualify the vector of indices, it <i>can</i> be superior, but all depends on the use case. Vary these, and the vector of pointers <i>can</i> be totally valid solution as well (with shared pointers sometimes bringing benefit and sometimes not) \u2013 which is all I stated (or tried to at least) right from the start... Sidenote: negative indices would be pretty meaningless for containers, wouldn&#39;t they? So I&#39;d prefer a <code>std::vector&lt;unsigned int&gt;</code>..."}], "answers": [{"tags": [], "owner": {"reputation": 3029, "user_id": 1060004, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/ZOBMa.jpg?s=128&g=1", "display_name": "ustulation", "link": "https://stackoverflow.com/users/1060004/ustulation"}, "is_accepted": false, "score": 3, "last_activity_date": 1567008044, "last_edit_date": 1567008044, "creation_date": 1567007578, "answer_id": 57696140, "question_id": 57694713, "link": "https://stackoverflow.com/questions/57694713/how-to-build-an-iterator-over-two-containers-in-a-chained-fashion/57696140#57696140", "title": "how to build an iterator over two containers in a chained fashion", "body": "<p>Does something like this work for you (obviously it's a bashed out in 10 min kinda solution so don't expect the committee to insta-ship it in c++20 or something lol - it's just to give some ideas):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;vector&gt;\n#include &lt;deque&gt;\n#include &lt;algorithm&gt;\n\n\ntemplate&lt;typename Pointee0, typename Pointee1, typename It0, typename It1&gt; struct ChainedIter;\n\ntemplate&lt;typename Pointee, typename It0, typename It1&gt;\nclass ChainedIter&lt;Pointee, Pointee, It0, It1&gt; {\n    It0 it0, begin0, end0;\n    It1 it1, begin1, end1;\npublic:\n    ChainedIter(It0 begin0, It0 end0, It1 begin1, It1 end1):\n        it0{begin0}, begin0{begin0}, end0{end0},\n        it1{begin1}, begin1{begin1}, end1{end1} {}\n    bool operator==(ChainedIter&amp; rhs) const {\n        return it0 == rhs.it0 &amp;&amp; it1 == rhs.it1;\n    }\n    bool operator!=(ChainedIter&amp; rhs) const {\n        return !(*this == rhs);\n    }\n    ChainedIter* operator++() {\n        if(it0 != end0) ++it0;\n        else ++it1;\n        return this;\n    }\n    Pointee&amp; operator*() {\n        if(it0 != end0) return *it0;\n        else return *it1; // UB if it1 == end1\n    }\n    ChainedIter end() {\n        auto newChainedIter = *this;\n        newChainedIter.it0 = newChainedIter.end0;\n        newChainedIter.it1 = newChainedIter.end1;\n        return newChainedIter;\n\n    }\n    ChainedIter begin() {\n        auto newChainedIter = *this;\n        newChainedIter.it0 = newChainedIter.begin0;\n        newChainedIter.it1 = newChainedIter.begin1;\n        return newChainedIter;\n\n    }\n};\n\ntemplate&lt;typename Cont1, typename Cont0&gt;\ndecltype(auto) createIter(Cont0&amp; cont0, Cont1&amp; cont1) {\n    auto begin0 = cont0.begin();\n    auto end0 = cont0.end();\n    auto begin1 = cont1.begin();\n    auto end1 = cont1.end();\n    return ChainedIter&lt;\n           typename Cont0::value_type,\n           typename Cont1::value_type,\n           typename Cont0::iterator,\n           typename Cont1::iterator&gt; {begin0, end0, begin1, end1};\n}\n\nint main() {\n    std::vector&lt;size_t&gt; v(4, 20);\n    std::deque&lt;size_t&gt; d(3, 200);\n\n    auto iter = createIter(v, d);\n    std::for_each(iter.begin(), iter.end(), [](const auto&amp; elt) {\n        std::cout &lt;&lt; elt &lt;&lt; ' ';\n    });\n    std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I tried to make it work with different container types as long as they both are templated on the same object (which made sense as a kneejerk but maybe it can be enhanced to allow convertible types etc.). As seen in <code>main()</code> it works with <code>vector</code> as well as a <code>deque</code>.</p>\n\n<p>My compiler version is:</p>\n\n<pre><code>$ g++ --version\ng++ (GCC) 9.1.0\nCopyright (C) 2019 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n\n<p>So maybe I could use template guides of C++17 to not depend on that additional function for type deduction convenience, but this itself took more than 10 mins for me to type and then some more to sort out compile bugs; plus I'm sure it's got loads of other horrible-for-production stuff anyway :P</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1567027792, "post_id": 57698050, "comment_id": 101844494, "body": "<a href=\"http://coliru.stacked-crooked.com/a/93ba984a0f61c280\" rel=\"nofollow noreferrer\">Fixed version</a>. Your <code>operator ++</code> is wrong as it allows to point to <code>end()</code> of the intermediate container."}, {"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1567068478, "post_id": 57698050, "comment_id": 101855278, "body": "@Jarod42 Thanks a lot, now that you pointed it out the mistake seems obvious, but I was not able to figure it out myself yesterday."}], "tags": [], "owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "is_accepted": false, "score": 1, "last_activity_date": 1567073057, "last_edit_date": 1567073057, "creation_date": 1567016195, "answer_id": 57698050, "question_id": 57694713, "link": "https://stackoverflow.com/questions/57694713/how-to-build-an-iterator-over-two-containers-in-a-chained-fashion/57698050#57698050", "title": "how to build an iterator over two containers in a chained fashion", "body": "<p>EDIT: Thank you <a href=\"https://stackoverflow.com/users/2684539\">Jarod42</a> for skilfully fixing the bug in my previous code, as indeed the <code>operator++</code> logic was flawed. I also changed the storage of the iterators to <code>std::array</code> to avoid unnecessary heap allocation.</p>\n\n<hr>\n\n<p>This solution requires C++17, it uses a variant iterator type to accommodate for any kind of iterator, and it allows you to chain any number different collections.</p>\n\n<pre><code>#include &lt;variant&gt;\n#include &lt;array&gt;\n#include &lt;vector&gt;\n#include &lt;list&gt;\n#include &lt;deque&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;typename ContainerFirstT, typename ...ContainerRestT&gt;\nstruct Chain\n{\n    // Holds an iterator of any given container\n    typedef typename std::variant&lt;typename ContainerFirstT::iterator,\n                                  typename ContainerRestT::iterator ...&gt; IterT;\n    // Array of variant container iterators\n    typedef typename std::array&lt;IterT, 1 + sizeof...(ContainerRestT)&gt; IterArrayT;\n    // Iterator of array of variant iterators\n    typedef typename IterArrayT::const_iterator IterArrayIterT;\n    // Iterated type\n    typedef typename ContainerFirstT::value_type ValueT;\n\n    // Begin and end iterator of each container\n    IterArrayT begins;\n    IterArrayT ends;\n\n    struct ChainIter\n    {\n        // Begin and end of container being iterated\n        IterArrayIterT beginIt;\n        IterArrayIterT endIt;\n        IterArrayIterT endItSentinel;\n        // Iterator to current element of current container\n        IterT current;\n\n        ChainIter(IterArrayIterT beginIt, IterArrayIterT endIt, IterArrayIterT endItSentinel, IterT current)\n        : beginIt{beginIt}\n        , endIt{endIt}\n        , endItSentinel{endItSentinel}\n        , current{current}\n        {\n        }\n\n        bool operator==(ChainIter&amp; it) const\n        {\n            return (beginIt == it.beginIt &amp;&amp;\n                    endIt == it.endIt &amp;&amp;\n                    current == it.current);\n        }\n        bool operator!=(ChainIter&amp; it) const\n        {\n            return !(*this == it);\n        }\n\n        ChainIter&amp; operator++()\n        {\n            // Go to next element\n            std::visit([](auto&amp; it) { ++it; }, current);\n            // While there are elements to iterate in the current container\n            if (current == *endIt)\n            {\n                // When the container is finished move to the next one\n                ++beginIt;\n                ++endIt;\n                if (endIt != endItSentinel)\n                {\n                    current = *beginIt;\n                }\n            }\n            return *this;\n        }\n\n        ValueT&amp; operator*()\n        {\n            // Get value of current iterator\n            ValueT* value;\n            std::visit([&amp;value](auto it) { value = &amp;(*it); }, current);\n            return *value;\n        }\n    };\n\n    Chain(ContainerFirstT&amp; containerFirst, ContainerRestT&amp; ...containerRest)\n    : begins{containerFirst.begin(), containerRest.begin()...}\n    , ends{containerFirst.end(), containerRest.end()...}\n    {\n    }\n\n    ChainIter begin()\n    {\n        return ChainIter(begins.begin(), ends.begin(), ends.end(), begins.front());\n    }\n\n    ChainIter end()\n    {\n        return ChainIter(begins.end(), ends.end(), ends.end(), ends.back());\n    }\n};\n\n// Convenience factory\ntemplate&lt;typename ...ContainersT&gt;\nChain&lt;ContainersT ...&gt; make_chain(ContainersT&amp; ...containers)\n{\n    return Chain&lt;ContainersT ...&gt;(containers...);\n}\n\n// Example\nint main()\n{\n    std::vector&lt;int&gt; v = {1, 2, 3};\n    std::list&lt;int&gt; l = {4, 5};\n    std::deque&lt;int&gt; d = {6, 7, 8, 9};\n    auto chain = make_chain(v, l, d);\n    for (auto elem : chain)\n    {\n        std::cout &lt;&lt; elem &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1\n2\n3\n4\n5\n6\n7\n8\n9\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "edited": false, "score": 0, "creation_date": 1567073412, "post_id": 57699862, "comment_id": 101857832, "body": "<code>VisitAllPoints</code> has very limited uses, because you can&#39;t use it with STL algorithms.  But +1 for pointing out the <i>range-v3</i> library to me."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 3, "last_activity_date": 1567025882, "last_edit_date": 1567025882, "creation_date": 1567025369, "answer_id": 57699862, "question_id": 57694713, "link": "https://stackoverflow.com/questions/57694713/how-to-build-an-iterator-over-two-containers-in-a-chained-fashion/57699862#57699862", "title": "how to build an iterator over two containers in a chained fashion", "body": "<ul>\n<li>An alternative to implement custom iterator (which is really verbose) is to provide a method to iterate over all elements:</li>\n</ul>\n\n<pre><code>struct PolyLine {\nprivate:\n    vector&lt;Point*&gt; m_head_nodes;\n    vector&lt;Point*&gt; m_tail_nodes;\n\npublic:\n    template &lt;typename F&gt;\n    void VisitAllPoints(F&amp;&amp; f)\n    {\n        for (Point* p : m_head_nodes) {\n            f(p);\n        }\n        for (Point* p : m_tail_nodes) {\n            f(p);\n        }\n    }\n};\n</code></pre>\n\n<p>And call it:</p>\n\n<pre><code>PolyLine pol = /*..*/;\n\npol.VisitAllPoints([](Point* p){ /*..*/});\n</code></pre>\n\n<ul>\n<li>Else, <a href=\"https://github.com/ericniebler/range-v3\" rel=\"nofollow noreferrer\">range-v3</a> library provides <code>concat</code>view (which is lazy):</li>\n</ul>\n\n<pre><code>struct PolyLine {\nprivate:\n    vector&lt;Point*&gt; m_head_nodes;\n    vector&lt;Point*&gt; m_tail_nodes;\n\npublic:\n    auto allPoints() const { return ranges::view::concat(m_head_nodes, m_tail_nodes); }\n    auto allPoints() { return ranges::views::concat(m_head_nodes, m_tail_nodes); }\n};\n</code></pre>\n\n<p>That you can use:</p>\n\n<pre><code>PolyLine pol = /*..*/;\n\nfor (Point* p : pol.allPoints()) {\n    /*..*/\n}\n</code></pre>\n"}], "owner": {"reputation": 2001, "user_id": 383689, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0c2bbd52fe81c4908f89636976ba8712?s=128&d=identicon&r=PG", "display_name": "Grim Fandango", "link": "https://stackoverflow.com/users/383689/grim-fandango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1567073057, "creation_date": 1567002483, "last_edit_date": 1567004825, "question_id": 57694713, "link": "https://stackoverflow.com/questions/57694713/how-to-build-an-iterator-over-two-containers-in-a-chained-fashion", "title": "how to build an iterator over two containers in a chained fashion", "body": "<p>I want to provide an iterator that iterates over contents of 2 containers.</p>\n\n<p>For example, I would like to hide the fact that the nodes of a polyline are stored in two containers (for implementation purposes):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct PolyLine {\nprivate:\n    vector&lt;Point*&gt; m_head_nodes;\n    vector&lt;Point*&gt; m_tail_nodes;\n\npublic:\n    Iterator begin();\n    Iterator end();\n};\n\nPolyline poly; \ncout &lt;&lt; \"contents of poly:\" &lt;&lt; endl;\nfor(Point *p : poly) \n   cout &lt;&lt; p &lt;&lt; endl;\n</code></pre>\n\n<p>The iterator should iterate the m_head_nodes first, then the m_tail_nodes.</p>\n\n<p><strong>Q1:</strong> Could you demonstrate how to set up the Iterator object?</p>\n\n<ul>\n<li>How do you implement the operator++ at the point where you cross from the first container to the second?</li>\n</ul>\n\n<p><strong>Q2:</strong> what if, say the 2nd container was, say,  a <code>std::list</code> ?</p>\n\n<ul>\n<li>What construct do you use to represent the current 'position' iterator?</li>\n<li>How do you represent the <code>end()</code> ?</li>\n</ul>\n\n<hr>\n\n<p>I have tried an implementation like the following,</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Iterator\n{\n    PolyLine &amp;m_parent;\n    vector&lt;Point*&gt;::iterator m_it;\n\n    Iterator(PolyLine &amp;parent_container)\n        : m_parent(parent_container) {\n    }\n\n    Iterator&amp; operator++() {\n        if (m_it == m_parent.m_head_nodes.end())\n            m_it = m_parent.m_tail_nodes.begin();\n        else\n            ++m_it;\n        return *this;\n    }\n\n    Point * operator* () {\n         return *m_it;\n    }\n};\n\nbool operator== (Iterator &amp;one, Iterator &amp;other) {\n    return one.m_it == other.m_it;\n}\n\nIterator Polyline::begin() {\n    Iterator o(this);\n    o.m_it = m_head_nodes.begin();\n    return o;\n}\n\nIterator Polyline::end() {\n    Iterator o(this);\n    o.m_it = m_tail_nodes.end();\n    return o;\n}\n</code></pre>\n\n<p>but I am not keen on keeping a pointer to the <code>PolyLine</code> class.</p>\n\n<p>Plus, I don't know what to keep as an <code>m_it</code> in case the 2nd container is a, say,  <code>std::list</code>.</p>\n"}, {"tags": ["c++", "function", "recursion", "singly-linked-list", "definition"], "comments": [{"owner": {"reputation": 1510, "user_id": 5728157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ed0956efcbacb4f24eb25437fdb856b?s=128&d=identicon&r=PG&f=1", "display_name": "andresantacruz", "link": "https://stackoverflow.com/users/5728157/andresantacruz"}, "edited": false, "score": 1, "creation_date": 1567001734, "post_id": 57694363, "comment_id": 101833026, "body": "Are you considering you are returning a different <code>vector&lt;int&gt;</code> every time this function returns?"}, {"owner": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "edited": false, "score": 0, "creation_date": 1567001742, "post_id": 57694363, "comment_id": 101833032, "body": "Hi, you just want to print it out? Your code just return a vector and do not print nothing. You do not acctually need return a vector."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1567001744, "post_id": 57694363, "comment_id": 101833037, "body": "Iterate through the list recursively and place the print statement AFTER the traversing to the next node in the list. This will cause the program to work it&#39;s way to the end of the list and start printing on the way back. What&#39;s the <code>vector</code> for, by the way?"}, {"owner": {"reputation": 911, "user_id": 2788450, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Cw1q0.jpg?s=128&g=1", "display_name": "Jonas Greitemann", "link": "https://stackoverflow.com/users/2788450/jonas-greitemann"}, "edited": false, "score": 0, "creation_date": 1567001772, "post_id": 57694363, "comment_id": 101833052, "body": "<code>std::vector::push_back</code> returns void. You cannot return it straight away. Bind the vector returned from <code>printListFromTailToHead</code> to a local variable, call <code>push_back</code> on it and return it afterwards."}, {"owner": {"reputation": 911, "user_id": 2788450, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Cw1q0.jpg?s=128&g=1", "display_name": "Jonas Greitemann", "link": "https://stackoverflow.com/users/2788450/jonas-greitemann"}, "reply_to_user": {"reputation": 1510, "user_id": 5728157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ed0956efcbacb4f24eb25437fdb856b?s=128&d=identicon&r=PG&f=1", "display_name": "andresantacruz", "link": "https://stackoverflow.com/users/5728157/andresantacruz"}, "edited": false, "score": 0, "creation_date": 1567001956, "post_id": 57694363, "comment_id": 101833170, "body": "@dedecos It&#39;s a bit unorthodox but RVO should prevent excessive copying."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1567001962, "post_id": 57694363, "comment_id": 101833175, "body": "@wjffffff Your function outputs nothing. And please show your list definition."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1567002868, "post_id": 57694363, "comment_id": 101833768, "body": "<code>vector&lt;int&gt; v = printListFromTailToHead(head -&gt; next); v.push_back(head -&gt; val); return v;</code> Problem with your version is that <code>push_back</code> returns <code>void</code> not the vector being pushed back to."}, {"owner": {"reputation": 1, "user_id": 11989573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655e74e7826ecf2fe6035bebf5060a29?s=128&d=identicon&r=PG&f=1", "display_name": "wjffffff", "link": "https://stackoverflow.com/users/11989573/wjffffff"}, "edited": false, "score": 0, "creation_date": 1567061640, "post_id": 57694363, "comment_id": 101851827, "body": "I&#39;m sorry I didn&#39;t explain the question clearly. I just want to return a vector instead of printing it out."}], "answers": [{"comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1567002665, "post_id": 57694708, "comment_id": 101833643, "body": "Good answer but to the wrong question. The OP want&#39;s a function that prints from tail to head not head to tail. Of course it&#39;s easy to modify this answer to do that, hint, hint."}], "tags": [], "owner": {"reputation": 774, "user_id": 11059346, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eOFhuwfbeLw/AAAAAAAAAAI/AAAAAAAAC5g/I9X1kvk3q24/photo.jpg?sz=128", "display_name": "Esdras Xavier", "link": "https://stackoverflow.com/users/11059346/esdras-xavier"}, "is_accepted": false, "score": 0, "last_activity_date": 1567003082, "last_edit_date": 1567003082, "creation_date": 1567002472, "answer_id": 57694708, "question_id": 57694363, "link": "https://stackoverflow.com/questions/57694363/how-to-print-list-from-tail-to-head-recursively/57694708#57694708", "title": "How to &quot;print list from tail to head&quot; recursively\uff1f", "body": "<p>Check out this solution, maybe isn't the better way to do it, but you maybe can take the idea. The thing is, you do not need return an array, also I did not get it why are you returning an vector, you could just call the function again and then print it like the code bellow.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\n\nusing namespace std;\n\n\nclass ListNode {\n\npublic:\n  ListNode *next;\n  int value;\n\n  ListNode() {\n    this-&gt;next = NULL;\n    this-&gt;value = 0;\n  }\n\n  ListNode(int _v) {\n    this-&gt;next = NULL;\n    this-&gt;value = _v;\n  }\n};\n\nvoid printListNodeFromTailToHead(ListNode *node) {\n  // If the current node is null will\n  // exit the recursive function\n  if (node == NULL) return ;\n\n  // Else will call the function again with next ListNode\n  // and print the current value\n\n  printListNodeFromTailToHead(node-&gt;next);\n  cout &lt;&lt; node-&gt;value &lt;&lt; endl;\n}\n\n\nint main() {\n  ListNode *a = new ListNode(1);\n  ListNode *tmp = a;\n\n  for (int i = 2; i &lt; 10; i++) {\n    a-&gt;next = new ListNode(i);\n    a = a-&gt;next;\n  }\n\n  printListNodeFromTailToHead(tmp);\n  return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 2, "last_activity_date": 1567003172, "last_edit_date": 1567003172, "creation_date": 1567002872, "answer_id": 57694845, "question_id": 57694363, "link": "https://stackoverflow.com/questions/57694363/how-to-print-list-from-tail-to-head-recursively/57694845#57694845", "title": "How to &quot;print list from tail to head&quot; recursively\uff1f", "body": "<p>If you want to print, then print - don't build a vector.</p>\n\n<pre><code>void printListFromTailToHead(ListNode* head) \n{\n    if (head)\n    {\n        printListFromTailToHead(head-&gt;next);\n        std::cout &lt;&lt; head-&gt;val &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>If you actually <em>don't</em> want to print anything but produce a vector, you need to rearrange the code a little bit, because <code>push_back</code> does not return anything:</p>\n\n<pre><code>vector&lt;int&gt; reverse_list(ListNode* head) \n{\n    if (!head)\n    {\n        return vector&lt;int&gt;{};\n    }\n    else // You don't need a special case for a one-element list.\n    {\n        vector&lt;int&gt; ls = reverse_list(head-&gt;next);\n        ls.push_back(head-&gt;val);\n        return ls; \n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1567003010, "creation_date": 1567003010, "answer_id": 57694881, "question_id": 57694363, "link": "https://stackoverflow.com/questions/57694363/how-to-print-list-from-tail-to-head-recursively/57694881#57694881", "title": "How to &quot;print list from tail to head&quot; recursively\uff1f", "body": "<p>Your function outputs nothing. And it is a bad idea to use a vector to output recursively a list.</p>\n\n<p>The function can look for example the following way as it is shown in a demonstrative program below.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct ListNode\n{\n    int value;\n    ListNode *next;\n};\n\nvoid push_front( ListNode * &amp;head, int value )\n{\n    head = new ListNode { value, head };\n}\n\nstd::ostream &amp; printListFromHeadToTail( ListNode * &amp;head, std::ostream &amp;os = std::cout  )\n{\n    return head == nullptr ? os \n                           : ( os &lt;&lt; head-&gt;value &lt;&lt; ' ', printListFromHeadToTail( head-&gt;next, os )  );  \n}\n\nstd::ostream &amp; printListFromTailToHead( ListNode * &amp;head, std::ostream &amp;os = std::cout  )\n{\n    return head == nullptr ? os \n                           : ( printListFromTailToHead( head-&gt;next, os ), os &lt;&lt; head-&gt;value &lt;&lt; ' ' );  \n}\n\nint main() \n{\n    const int N = 10;\n    ListNode *head = nullptr;\n\n    for ( int i = 0; i &lt; N; i++ ) push_front( head, i );\n\n    printListFromHeadToTail( head ) &lt;&lt; '\\n';\n    printListFromTailToHead( head ) &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>9 8 7 6 5 4 3 2 1 0 \n0 1 2 3 4 5 6 7 8 9 \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1567558080, "last_edit_date": 1567558080, "creation_date": 1567539299, "answer_id": 57777776, "question_id": 57694363, "link": "https://stackoverflow.com/questions/57694363/how-to-print-list-from-tail-to-head-recursively/57777776#57777776", "title": "How to &quot;print list from tail to head&quot; recursively\uff1f", "body": "<blockquote>\n  <p>I'm trying to print each node in a linked list from tail to head using\n  recursion</p>\n</blockquote>\n\n<p>Because you provide no info about your list, here I will show you a simple implementation of your desired function(s) using a \"std::list\". Note that the recursion I provide has no function parameters, no global scope vars, and no static vars (and I use cout, not print). </p>\n\n<p>Also, I use a class form known as a Functor.  I recommend them for encapsulating 'small' function(s).  Please review literature on functors ... I consider them 'simpler' than the typical class.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::cout, std::cerr, std::endl, std::flush; // c++17\nusing std::ostream;\n\n#include &lt;list&gt;\nusing std::list;\n\n#include &lt;string&gt;\nusing std::string, std::to_string;\n\n\n\n// typedefs are often simpler to read\n// user typedefs ---------------vvvvvvvvvvv\ntypedef list&lt;string&gt;            StrList_t;\ntypedef list&lt;string&gt;::iterator  StrListIt_t;\n\n\n// Functor\nclass F820_Recursive_t\n{\n   // data attributes of class instance are not global nor static vars\n   StrList_t    m_strList;\n   StrListIt_t  m_it;\n\npublic:\n   int operator()() { return exec();  }  // Functor entry\n\nprivate:\n\n   int exec() // builds and modifies a std::list&lt;string&gt;\n      {\n         // example: using initializer list syntax\n         m_strList = StrList_t { \"111\", \"222\", \"333\", \"444\", \"555\", \"666\", \"777\", \"888\" };\n\n         recurseAndReportSize();\n\n         // example: appending to existing list\n         for (int i=301; i&lt;309; ++i) {\n            string s = \"S\" + to_string(i);\n            m_strList.push_back (s);\n         }\n\n         recurseAndReportSize();\n\n         cout &lt;&lt; \"\\n  version cplusplus: \" &lt;&lt;  __cplusplus  &lt;&lt; \"\\n\\n\" &lt;&lt; endl;\n         return 0;\n      }\n\n   void recurseAndReportSize()\n      {\n         if (0 == m_strList.size()) {\n            cout &lt;&lt; \"\\n  empty  list\" &lt;&lt; flush;\n            return;\n         }\n\n         cout &lt;&lt; \"\\n\\n  recurse over list to count elements ... \" &lt;&lt; flush;\n\n         m_it = m_strList.begin(); // head to tail\n         uint count = recurseCount();\n\n         // report\n         cout &lt;&lt; count &lt;&lt; \" elements\" &lt;&lt; endl;\n\n         // report list contents head to tail\n         m_it = m_strList.begin();\n         cout &lt;&lt; \"\\n  Head to Tail recursive content report \"\n              &lt;&lt; \"\\n  [\" &lt;&lt; coutListFromHeadToTail() &lt;&lt; \"]\" &lt;&lt; endl;\n\n         // report list contents  tail to head\n         m_it = m_strList.end(); m_it--;\n         cout &lt;&lt; \"\\n  Tail to Head recursive content report: \"\n              &lt;&lt; \"\\n  [\" &lt;&lt; coutListFromTailToHead() &lt;&lt; \"]\" &lt;&lt; endl;\n      }\n\n   // recurse with no parameters, no static vars, no global vars\n   uint recurseCount( )\n      {  //        --^-- no parameters\n         if (m_it == m_strList.end()) // RTC (recursion termination clause)\n            return 0;\n\n         m_it++; // step to next element\n\n         return (1 + recurseCount()); // tail recursion\n      }\n\n   // recurse with no parameters, no static vars, no global vars\n   string  coutListFromHeadToTail ( )\n      {                        // --^-- no parameters\n         cout &lt;&lt; *m_it++;\n         if (m_it == m_strList.end()) // RTC (recursion termination clause)\n            return \"\";\n         cout &lt;&lt; \", \";\n         return coutListFromHeadToTail(); // tail recursion\n      }\n\n   // recurse with no parameters, no static vars, no global vars\n   string  coutListFromTailToHead ( )\n      {                       // --^-- no parameters\n         if (m_it == m_strList.begin()) {\n            cout &lt;&lt; *m_it;\n            return \"\";\n         }\n         cout &lt;&lt; *m_it &lt;&lt; \", \";\n         m_it--;\n         return coutListFromTailToHead();  // tail recursion\n      }\n\n}; // class F820_Recursion_t\n\nint main(int, char**) { return F820_Recursive_t()(); }\n</code></pre>\n\n<p>Output on my Lubuntu 19.04, g++ v8.3</p>\n\n<pre><code>  recurse over list to count elements ... 8 elements\n\n  Head to Tail recursive content report \n  [111, 222, 333, 444, 555, 666, 777, 888]\n\n  Tail to Head recursive content report: \n  [888, 777, 666, 555, 444, 333, 222, 111]\n\n\n  recurse over list to count elements ... 16 elements\n\n  Head to Tail recursive content report \n  [111, 222, 333, 444, 555, 666, 777, 888, S301, S302, S303, S304, S305, S306, S307, S308]\n\n  Tail to Head recursive content report: \n  [S308, S307, S306, S305, S304, S303, S302, S301, 888, 777, 666, 555, 444, 333, 222, 111]\n\n  version cplusplus: 201703\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11989573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/655e74e7826ecf2fe6035bebf5060a29?s=128&d=identicon&r=PG&f=1", "display_name": "wjffffff", "link": "https://stackoverflow.com/users/11989573/wjffffff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1567558080, "creation_date": 1567001296, "last_edit_date": 1567003381, "question_id": 57694363, "link": "https://stackoverflow.com/questions/57694363/how-to-print-list-from-tail-to-head-recursively", "title": "How to &quot;print list from tail to head&quot; recursively\uff1f", "body": "<p>I'm trying to print each node in a linked list from tail to head using recursion. But why I can't use the highlighting code to realize a recursion?</p>\n\n<pre><code>class Solution {\npublic:\n    vector&lt;int&gt; printListFromTailToHead(ListNode* head) {\n        if(!head)\n        {\n            vector&lt;int&gt; a(0);\n            return a;\n        }\n        else if(!head -&gt; next)\n        {\n            vector&lt;int&gt; a(1, head -&gt; val);\n            return a;\n        }\n        else\n/*\n            return printListFromTailToHead(head -&gt; next).push_back(head -&gt; val);\n*/\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "depth-first-search"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1567001293, "post_id": 57694313, "comment_id": 101832754, "body": "From the <a href=\"https://stackoverflow.com/tags/dfs/info\"><code>[dfs]</code></a> tag wiki : <i>&quot;DFS is a distributed filesystem from Microsoft. Note: for questions about depth-first search, please use the depth-first-search tag. <b>NOT to be confused</b> with [depth-first-search]&quot;</i>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1567003139, "post_id": 57694313, "comment_id": 101833925, "body": "<i>I am trying to understand what the problem is with my solution</i> -- Debug your code by using a debugger.  Step through the program a line at a time, and see where your program diverges from your expectations."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "edited": false, "score": 0, "creation_date": 1567010561, "post_id": 57695020, "comment_id": 101837844, "body": "Wow, thanks so much that makes sense. But about the std::pair&lt;int,int&gt; part, I have a question. I don&#39;t think c++ unordered_set libary provides a hashfunction for this type of operator. (I tried it with vector and it didnt work). Since I am not working with set but I am working with unordered set its using a hash function to map my values. Do you have an alternative for this?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "edited": false, "score": 1, "creation_date": 1567011100, "post_id": 57695020, "comment_id": 101838059, "body": "@OgiciBumKacar You&#39;re totally right, I never checked whether <code>set</code> actually was a <code>std::set</code> or a <code>std::unordered_set</code>. Yes, to use either <code>std::pair</code> or your own type with <code>std::unordered_set</code> you must provide a hash function, either as specialization of <code>std::hash&lt;T&gt;</code> or as <code>Hash</code> template argument of <code>std::unordered_map</code>. The comments here are not the place to elaborate further on that though. Maybe you could just use <code>std::set</code> though? <code>O(log N)</code> vs <code>O(1)</code> really won&#39;t make a meaningful difference for &lt; 10k entries. Your solution has bad performance compared to the iterative one anyway ;)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "edited": false, "score": 1, "creation_date": 1567011139, "post_id": 57695020, "comment_id": 101838074, "body": "(Adding a specialization of <code>std::hash&lt;T&gt;</code> for <code>std::pair&lt;int, int&gt;</code> is not allowed though, so don&#39;t do that.)"}, {"owner": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "edited": false, "score": 0, "creation_date": 1567024204, "post_id": 57695020, "comment_id": 101843173, "body": "I added a comma to my string to distinguish the edge cases like this: string loco=to_string(x)+&quot;,&quot;+ to_string(y); and it worked. thanks again!"}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 4, "last_activity_date": 1567003959, "last_edit_date": 1567003959, "creation_date": 1567003568, "answer_id": 57695020, "question_id": 57694313, "link": "https://stackoverflow.com/questions/57694313/minor-bug-in-c-dfs-question-in-a-big-test-case/57695020#57695020", "title": "Minor bug in C++ dfs question in a big test case", "body": "<p>You are using <code>string loco=to_string(x)+to_string(y);</code> as the key for your <code>std::set</code>. Clearly, if <code>x = 11</code> and <code>y = 1</code> then the key is <code>111</code>, just as when <code>x = 1</code> and <code>y = 11</code>, which can break your algorithm.</p>\n\n<p>Using a <code>std::string</code> as the set key is an unusual choice in the first place. I would recommend using <code>std::pair&lt;int, int&gt;</code> instead. Using your own type dedicated for this purpose (<code>struct Coordinate { int x, y; };</code>) would be even clearer but would need some additional boilerplate (namely <code>operator&lt;</code>) to work with <code>std::set</code>, whereas <code>std::pair</code> has this out-of-the-box.</p>\n"}], "owner": {"reputation": 181, "user_id": 9974726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3154289e54c0fbf1d9626702d05d96c?s=128&d=identicon&r=PG&f=1", "display_name": "OgiciBumKacar", "link": "https://stackoverflow.com/users/9974726/ogicibumkacar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 57695020, "answer_count": 1, "score": 2, "last_activity_date": 1567003959, "creation_date": 1567001161, "last_edit_date": 1567001285, "question_id": 57694313, "link": "https://stackoverflow.com/questions/57694313/minor-bug-in-c-dfs-question-in-a-big-test-case", "title": "Minor bug in C++ dfs question in a big test case", "body": "<p>I am solving a question on leetcode, my answer passed  123 test cases and failed on one. I can't figure out my problem because the test case is large and my solution works with every small testcase I could think of. The discussion section of leetcode wasn't helpful so I thought id try here.</p>\n\n<p>question is: \"You are given a map in form of a two-dimensional integer grid where 1 represents land and 0 represents water.</p>\n\n<p>Grid cells are connected horizontally/vertically (not diagonally). The grid is completely surrounded by water, and there is exactly one island (i.e., one or more connected land cells).</p>\n\n<p>The island doesn't have \"lakes\" (water inside that isn't connected to the water around the island). One cell is a square with side length 1. The grid is rectangular, width and height don't exceed 100. Determine the perimeter of the island.\"</p>\n\n<pre><code>example test case: [[0,1,0,0],\n [1,1,1,0],\n [0,1,0,0],\n [1,1,0,0]]\n\nOutput: 16\n</code></pre>\n\n<p><a href=\"https://leetcode.com/problems/island-perimeter/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/island-perimeter/</a> </p>\n\n<p>my solution </p>\n\n<pre><code>\n    class Solution {\n    public:\n\n     bool dfs(unordered_set&lt;string&gt; &amp; set, vector&lt;vector&lt;int&gt;&gt; &amp;grid, int x,int y, int&amp; count)\n    {\n        if(x&gt;=grid.size()||y&gt;=grid[0].size()||y&lt;0||x&lt;0) \n        {\n            return false; // false means current coordinate is not an island piece\n        }\n        string loco=to_string(x)+to_string(y);\n        if(grid[x][y]==0)\n            return false;\n        if(set.find(loco)!=set.end())\n        {\n            return true; \n        }\n\n        set.insert(loco); //insert island piece to visited pieces\n        int temp=4-(dfs(set,grid,x+1,y,count)+dfs(set,grid,x-1,y,count)+dfs(set,grid,x,y+1,count)+dfs(set,grid,x,y-1,count)); //subtract the number of adjecent island pieces\n        count+=temp;\n        return true;\n\n    }\n    int islandPerimeter(vector&lt;vector&lt;int&gt;&gt;&amp; grid) {\n        unordered_set&lt;string&gt;set;\n        int count=0;\n        for(int i=0 ;i &lt;grid.size();i++)\n        {\n            for(int j=0;j&lt;grid[0].size();j++)\n            {\n                if(grid[i][j]==1) //find the first piece of island and run DFS\n                {\n                    dfs(set,grid,i,j,count);\n                    return count;\n                }\n\n            }\n        }\n        return count;\n    }\n};\n\n</code></pre>\n\n<p>I have checked the discussion section of leetcode but most of the solutions were iterative and didn't use DFS like i did. I am trying to understand what the problem is with my solution. </p>\n\n<p>The testcase that failed is :</p>\n\n<pre><code>[[0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0], \n[0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0], \n[0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,1,0,1,1,0], \n[0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,0,0,1,0], \n[0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,1,0], \n[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], \n[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], \n[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0], \n[1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0], \n[1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0], \n[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0], \n[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], \n[0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1], \n[0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0], \n[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0], \n[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0], \n[0,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0], \n[0,0,1,1,1,0,1,1,1,1,1,1,0,0,1,1,0,0,0,0], \n[0,0,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0],[0,0,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0]]\n\n</code></pre>\n\n<p>expected output=128\nmy output= 125</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1567000787, "post_id": 57694091, "comment_id": 101832426, "body": "Note that <code>sleep_for(t)</code> will sleep for at least <code>t</code>, but there is no upper limit."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1567000944, "post_id": 57694091, "comment_id": 101832525, "body": "It is possible that the OS has deprioritized these threads that are both spinning for around 3 seconds waiting on <code>starter</code>.  A more fair test might be to use proper signalling such as condition variables for both threads to signal ready, and then the starter can immediately release them.  Either way, a test involving 100 iterations spanning 10 microseconds hardly sounds sufficient.  Do you get the same results if you run the test for say, a minute?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1567000952, "post_id": 57694091, "comment_id": 101832529, "body": "Often times it will be preferred as it is still running unlike the other threads that are waiting/sleeping."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1567006022, "post_id": 57694091, "comment_id": 101835602, "body": "Whether locks are fair or not depends to some degree on the Operating System and for both Linux and Windows has changed over time."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1567012888, "post_id": 57694091, "comment_id": 101838808, "body": "FYI: Your <code>for</code> loop keeps the mutex locked almost 100% of the time. That may be a useful trick if your goal is to demonstrate the properties of mutexes, but it is virtually always a Bad Idea in any real program.  The best multi-threaded programs are designed not to need mutexes very often and, to not keep any mutex locked for more than a tiny fraction of the program&#39;s total run time."}], "answers": [{"comments": [{"owner": {"reputation": 773, "user_id": 11723575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdd33818e5c87485194d597b8bb2cbd?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/11723575/adrian"}, "edited": false, "score": 0, "creation_date": 1567002498, "post_id": 57694312, "comment_id": 101833527, "body": "That makes sense. Thanks a lot. Your sentence &quot;wait, someone else has been waiting longer...&quot; made me wonder about something completely unrelated. Does std::shared_mutex give priority to writer threads,  so that they don&#39;t wait for (presumably large number of) readers to finish? For instance, QReadWriteLock  which is a Qt counterpart of std::shared_mutex does exectly that."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 773, "user_id": 11723575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdd33818e5c87485194d597b8bb2cbd?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/11723575/adrian"}, "edited": false, "score": 0, "creation_date": 1567003508, "post_id": 57694312, "comment_id": 101834122, "body": "@Adrian I don&#39;t know, but that sounds like a reasonable question to ask on SO."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1567004345, "post_id": 57694312, "comment_id": 101834589, "body": "You might also point out that, on a multi-CPU host, a thread awaiting the OP&#39;s <code>SpinLockMutex</code> has a high probablility of also being a running thread, and it it has a high probability of winning the race against any other thread that wants the mutex, but which hasn&#39;t already entered the <code>lock()</code> method. That&#39;s probably the reason why the <code>SpinLockMutex</code> performs so much differently from <code>std::mutex</code>: A thread awaiting <code>std::mutex()</code> for any significant length of time will have been moved out of the run queue."}, {"owner": {"reputation": 773, "user_id": 11723575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdd33818e5c87485194d597b8bb2cbd?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/11723575/adrian"}, "reply_to_user": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1567069338, "post_id": 57694312, "comment_id": 101855710, "body": "@Solomon Slow That also makes sense:) Thanks for both comments."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 6, "last_activity_date": 1567001159, "creation_date": 1567001159, "answer_id": 57694312, "question_id": 57694091, "link": "https://stackoverflow.com/questions/57694091/does-stdmutex-favor-the-thread-that-owns-it/57694312#57694312", "title": "Does std::mutex favor the thread that owns it?", "body": "<p>Mutex makes zero guarantees about fairness.</p>\n\n<p>Unlocking a mutex does not suspend your current thread.  Attempting to lock a mutex does not say \"wait, someone else has been waiting longer, they should get a go at it\".</p>\n\n<p>Blocking on a mutex can sometimes put your thread to sleep.</p>\n\n<p>After you unlock a mutex, you aren't \"the owning thread\".  You are probably a running thread.  And mutex can (and apparently does) favor running threads over threads that are suspended.</p>\n\n<p>Implementing \"fairness\" can be done on top of C++ synchronization primitives, but it isn't free, and C++ aims not to make you pay for anything you don't ask for.</p>\n"}], "owner": {"reputation": 773, "user_id": 11723575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cdd33818e5c87485194d597b8bb2cbd?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/11723575/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 57694312, "answer_count": 1, "score": 4, "last_activity_date": 1567001159, "creation_date": 1567000374, "question_id": 57694091, "link": "https://stackoverflow.com/questions/57694091/does-stdmutex-favor-the-thread-that-owns-it", "title": "Does std::mutex favor the thread that owns it?", "body": "<p>I was trying to understand how <a href=\"https://en.cppreference.com/w/cpp/atomic/atomic_flag\" rel=\"nofollow noreferrer\">spinlock mutex</a> works, \nso I wrote a simple code (shown below) which measures interleaving of instructions from \ndifferent threads under protection of spinlock (or std::) mutex. </p>\n\n<p>Surprisingly, it shows (in gcc at least) that  std::mutex (in contrast to spinlock mutex) \nseems to favor the thread that owns it, leading to very small instruction interleaving (at best 5%), \nunless the instruction in question is very fast (like incrementing a counter). \nIn that case we can get even 50%. Spinlock mutex gives at least 80% (and typically more than 90%).</p>\n\n<p>Is this a well known fact? Or maybe my code below has a bug?</p>\n\n<p>I mean, I know the rule of thumb saying that mutex should be always locked for smallest amount of time. \nBut I was convinced that this is so, because we want to reduce serialization of threads, \nand not because std::mutex favors the owning thread...</p>\n\n<p>Here is the code: </p>\n\n<pre><code>#include&lt;atomic&gt;\n#include&lt;thread&gt;\n#include&lt;iostream&gt;\n#include&lt;chrono&gt;\n#include&lt;mutex&gt;\n\n\nclass SpinLockMutex{\n    std::atomic_flag m_flag = ATOMIC_FLAG_INIT;\npublic:\n    void lock()   { while( m_flag.test_and_set(std::memory_order_acquire) )  /*do nothing*/ ; }\n    void unlock() { m_flag.clear(std::memory_order_release) ; }\n};//class SpinLockMutex\n\n\n// ******************************************\n// // // std::mutex vs SpinLockMutex \n//SpinLockMutex globalMutex;\nstd::mutex globalMutex;\n// ******************************************\n\n\n// This class helps to start threads at the same time : \nclass Starter{\n    mutable std::mutex m_m;\n    bool m_ready = false;\npublic:\n    bool isReady() const {  std::lock_guard&lt;std::mutex&gt; guard(m_m); \n                return m_ready; \n                 }  \n\n    void start() { std::this_thread::sleep_for(std::chrono::seconds(3)); \n                       std::lock_guard&lt;std::mutex&gt; guard(m_m); \n               m_ready = true; \n             }  \n};//class Starter\n\n\nconstexpr std::size_t   LOOP_SIZE                = 100;\nstd::size_t             previous_thread_repeated = 0;\nStarter                 starter;\n\n\nvoid mainFcnForThread ()\n{   \n    static std::thread::id  previous_thread_id = std::this_thread::get_id();\n\n    while(!starter.isReady()) \n        ; //do nothing\n\n    for(std::size_t i = 0; i!=LOOP_SIZE ; ++i){\n        globalMutex.lock();\n        if(previous_thread_id == std::this_thread::get_id() ) {\n            ++previous_thread_repeated;\n            std::this_thread::sleep_for(std::chrono::microseconds(100));\n        }\n        previous_thread_id = std::this_thread::get_id();            \n        globalMutex.unlock();\n    }\n}//void mainFcnForThread\n\n\nint main()\n{\n\n    std::thread t1(mainFcnForThread);\n    std::thread t2(mainFcnForThread);\n\n    starter.start();\n    t1.join();\n    t2.join();  \n\n    std::cout &lt;&lt; double(previous_thread_repeated)/(2*LOOP_SIZE) &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "sorting", "vector", "c++14"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1566999961, "post_id": 57693915, "comment_id": 101831901, "body": "What did you try, and how did it fail?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1567000093, "post_id": 57693915, "comment_id": 101831999, "body": "<code>std::sort</code> both for word and for <code>vector</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1567000276, "post_id": 57693915, "comment_id": 101832111, "body": "How would you do this &quot;by hand&quot;? First rearrange the characters of each word, then rearrange the resulting words, probably. So your first question should be &quot;how do I get sorted-by-character words into the vector?&quot;"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1567001310, "post_id": 57693915, "comment_id": 101832762, "body": "I suspect that you&#39;re assuming this to be complicated and overthinking it. You only need to add one (1) line, and it is almost identical to one of your other lines. (<code>std::string</code> is also a sequence, with <code>begin()</code> and <code>end()</code>.)"}, {"owner": {"reputation": 21, "user_id": 8849138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41787fc656144c1cbd29608811fb9fe?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Julian", "link": "https://stackoverflow.com/users/8849138/andrew-julian"}, "edited": false, "score": 0, "creation_date": 1567001375, "post_id": 57693915, "comment_id": 101832808, "body": "ok, thanks. Now i want to analyse the code from below."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8849138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41787fc656144c1cbd29608811fb9fe?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Julian", "link": "https://stackoverflow.com/users/8849138/andrew-julian"}, "edited": false, "score": 0, "creation_date": 1567001480, "post_id": 57694172, "comment_id": 101832867, "body": "thanks for example. I try to learn more programming every day."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1567000649, "creation_date": 1567000649, "answer_id": 57694172, "question_id": 57693915, "link": "https://stackoverflow.com/questions/57693915/how-to-arrange-every-character-ascending-in-a-vector-with-words/57694172#57694172", "title": "How to arrange every character ascending in a vector with words?", "body": "<p>You need to apply the algorithm <code>std::sort</code> two times. </p>\n\n<p>The first one for each element of the vector and the second one for the vector itself.</p>\n\n<p>Here is a demonstrative program.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\nint main() \n{\n    std::vector&lt;std::string&gt; v =\n    {\n        \"viguo\", \"lkjhg\", \"tyujb\", \"asqwe\", \"cvbfd\"\n    };\n\n    for ( const auto &amp;s : v ) std::cout &lt;&lt; s &lt;&lt; ' ';\n    std::cout &lt;&lt; '\\n';\n\n    for ( auto &amp;s : v ) std::sort( std::begin( s ), std::end( s ) );\n\n    std::sort( std::begin( v ), std::end( v ) );\n\n    for ( const auto &amp;s : v ) std::cout &lt;&lt; s &lt;&lt; ' ';\n    std::cout &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>viguo lkjhg tyujb asqwe cvbfd \naeqsw bcdfv bjtuy ghjkl giouv \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 8849138, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b41787fc656144c1cbd29608811fb9fe?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Julian", "link": "https://stackoverflow.com/users/8849138/andrew-julian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1567001222, "accepted_answer_id": 57694172, "answer_count": 1, "score": -2, "last_activity_date": 1567000754, "creation_date": 1566999856, "last_edit_date": 1567000754, "question_id": 57693915, "link": "https://stackoverflow.com/questions/57693915/how-to-arrange-every-character-ascending-in-a-vector-with-words", "closed_reason": "Needs details or clarity", "title": "How to arrange every character ascending in a vector with words?", "body": "<p>I want to arrange every word like this:</p>\n\n<p>Input</p>\n\n<pre><code>5\nviguo\nlkjhg\ntyujb\nasqwe\ncvbfd\n</code></pre>\n\n<p>OUTPUT</p>\n\n<pre><code>aeqsw\nbcdfv\nbjtuy\nghjkl\ngiouv\n</code></pre>\n\n<p>I want some ideas from you.\nThanks!</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1566999884, "post_id": 57693872, "comment_id": 101831838, "body": "What is <code>ptr</code> ?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1566999887, "post_id": 57693872, "comment_id": 101831840, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 472, "user_id": 4990485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5853eb83d309719afafb211b70725962?s=128&d=identicon&r=PG&f=1", "display_name": "sv90", "link": "https://stackoverflow.com/users/4990485/sv90"}, "edited": false, "score": 0, "creation_date": 1567083003, "post_id": 57693872, "comment_id": 101863241, "body": "All constructuctors of STL containers take as a last argument <code>const Allocator&amp; alloc = Allocator()</code>, see here for <a href=\"https://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>. That can be used if the allocator has no default constructor."}, {"owner": {"reputation": 197, "user_id": 11881401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10538f1f984ee186d2b7579f5a411237?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Wise", "link": "https://stackoverflow.com/users/11881401/henry-wise"}, "reply_to_user": {"reputation": 472, "user_id": 4990485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5853eb83d309719afafb211b70725962?s=128&d=identicon&r=PG&f=1", "display_name": "sv90", "link": "https://stackoverflow.com/users/4990485/sv90"}, "edited": false, "score": 0, "creation_date": 1567089151, "post_id": 57693872, "comment_id": 101867137, "body": "@sv90 so you are suggesting I make my allocator variable const?"}, {"owner": {"reputation": 472, "user_id": 4990485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5853eb83d309719afafb211b70725962?s=128&d=identicon&r=PG&f=1", "display_name": "sv90", "link": "https://stackoverflow.com/users/4990485/sv90"}, "edited": false, "score": 0, "creation_date": 1567147785, "post_id": 57693872, "comment_id": 101884321, "body": "@HenryWise no. It is only passed by const reference and copy-constructed into the container"}, {"owner": {"reputation": 197, "user_id": 11881401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10538f1f984ee186d2b7579f5a411237?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Wise", "link": "https://stackoverflow.com/users/11881401/henry-wise"}, "reply_to_user": {"reputation": 472, "user_id": 4990485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5853eb83d309719afafb211b70725962?s=128&d=identicon&r=PG&f=1", "display_name": "sv90", "link": "https://stackoverflow.com/users/4990485/sv90"}, "edited": false, "score": 0, "creation_date": 1567174383, "post_id": 57693872, "comment_id": 101896953, "body": "@sv90 but that is exactly what I am doing isnt it?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1567917814, "post_id": 57693872, "comment_id": 102106605, "body": "Are you getting this error with or without <code>StlAllocator(const StlAllocator&amp; allocator)</code> constructor? The <code>TODO</code> comment appears to suggest that the error may be going away once it&#39;s added. An allocator is indeed <a href=\"https://en.cppreference.com/w/cpp/named_req/Allocator\" rel=\"nofollow noreferrer\">required</a> to be copyable, so you need that constructor."}, {"owner": {"reputation": 197, "user_id": 11881401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10538f1f984ee186d2b7579f5a411237?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Wise", "link": "https://stackoverflow.com/users/11881401/henry-wise"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1568003487, "post_id": 57693872, "comment_id": 102122693, "body": "@IgorTandetnik I get the same error even if I have copy constructor for StlAllocator"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1568040783, "post_id": 57693872, "comment_id": 102139187, "body": "Ah, I see what&#39;s going on. Not only is <code>Allocator&lt;T&gt;</code> required to be constructible from <code>Allocator&lt;T&gt;</code> - it&#39;s also required to be constructible from <code>Allocator&lt;U&gt;</code> for any type <code>U</code>. The container is allowed to &quot;rebind&quot; the allocator to obtain an allocator for types other than <code>T</code> (e.g. <code>std::list&lt;T&gt;</code> would generally need to allocate some internal type <code>Node&lt;T&gt;</code>, not <code>T</code> itself). In your case, the container rebound <code>StlAllocator&lt;uint64_t&gt;</code> to obtain an instance of the allocator capable of allocating some internal type <code>_Newfirst</code>, then tried to construct the latter from the former."}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 11881401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10538f1f984ee186d2b7579f5a411237?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Wise", "link": "https://stackoverflow.com/users/11881401/henry-wise"}, "edited": false, "score": 0, "creation_date": 1568050469, "post_id": 57839219, "comment_id": 102143612, "body": "How do you suggest I fix this? Should i do something similar to this? &quot;     template &lt;class U&gt; struct rebind { typedef stl_allocator&lt;U&gt; other; };     template &lt;class U&gt; stl_allocator(const stl_allocator&lt;U&gt;&amp;){}&quot; . Cause I see many examples online that dont need this."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 197, "user_id": 11881401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10538f1f984ee186d2b7579f5a411237?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Wise", "link": "https://stackoverflow.com/users/11881401/henry-wise"}, "edited": false, "score": 0, "creation_date": 1568074543, "post_id": 57839219, "comment_id": 102150986, "body": "You don&#39;t need to provide an explicit <code>rebind</code>; modern compilers can rebind implicitly. You do indeed need to provide a templated constructor from <code>StlAllocator&lt;U&gt;</code>. <a href=\"http://www.josuttis.com/libbook/memory/myalloc.hpp.html\" rel=\"nofollow noreferrer\">The example you cite</a> does provide such a constructor."}], "tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": true, "score": 1, "last_activity_date": 1568040984, "last_edit_date": 1568040984, "creation_date": 1567917435, "answer_id": 57839219, "question_id": 57693872, "link": "https://stackoverflow.com/questions/57693872/how-to-use-stl-custom-allocator-that-needs-non-default-constructor/57839219#57839219", "title": "How to use Stl custom allocator that needs non-default constructor", "body": "<p><code>StlAllocator&lt;T&gt;</code> doesn't meet <a href=\"https://en.cppreference.com/w/cpp/named_req/Allocator\" rel=\"nofollow noreferrer\">allocator requirements</a>. In particular, it is required to be constructible from <code>StlAllocator&lt;U&gt;</code> for any type <code>U</code>, not just from <code>StlAllocator&lt;T&gt;</code>.</p>\n\n<p>The error suggests that the container using your <code>StlAllocator&lt;uint64_t&gt;</code> actually needs an allocator for some internal type (named <code>_Newfirst</code>), and so tries and fails to construct the latter from the former.</p>\n"}], "owner": {"reputation": 197, "user_id": 11881401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10538f1f984ee186d2b7579f5a411237?s=128&d=identicon&r=PG&f=1", "display_name": "Henry Wise", "link": "https://stackoverflow.com/users/11881401/henry-wise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 57839219, "answer_count": 1, "score": -1, "last_activity_date": 1568040984, "creation_date": 1566999708, "last_edit_date": 1567000659, "question_id": 57693872, "link": "https://stackoverflow.com/questions/57693872/how-to-use-stl-custom-allocator-that-needs-non-default-constructor", "title": "How to use Stl custom allocator that needs non-default constructor", "body": "<p>I am trying to use stl with a custom allocator that needs to use non-default constructor. I follow the example in this link \n<a href=\"https://stackoverflow.com/questions/18575746/custom-stl-allocator-with-a-custom-constructor\">Custom STL Allocator with a custom constructor</a> and get something like this:</p>\n\n<pre><code>void * start = new uint8_t[100];\nEngine::BlockAllocator block_allocator = Engine::BlockAllocator(start, 100, 8, 8);\nstd::vector&lt;uint64_t, Engine::StlAllocator&lt;uint64_t&gt;&gt; a((Engine::StlAllocator&lt;uint64_t&gt;(&amp;block_allocator)) );\n</code></pre>\n\n<p>My StlAllocator class</p>\n\n<pre><code>template &lt;class T&gt;\nclass StlAllocator {\npublic:\n    using value_type = T;\n\n    StlAllocator(IAllocator * allocator):_allocator(allocator) {}\n\n    StlAllocator(StlAllocator &amp;&amp; allocator): _allocator(allocator._allocator) {\n        allocator._allocator = nullptr;\n    }\n    // need to have this specific signature to work with stl\n    value_type* allocate(std::size_t n) {\n        AllocateArray&lt;value_type&gt;(*_allocator, n);\n    }\n    // need to have this specific signature to work with stl\n    void deallocate(value_type* p, std::size_t) noexcept {\n        DeallocateArray&lt;value_type&gt;(*_allocator, p);\n    }\n\n    //TODO: Delete these constructors after I figured out what wrong with the custom allocator\n    StlAllocator(const StlAllocator&amp; allocator):_allocator(allocator._allocator) {}\n    StlAllocator&amp; operator=(const StlAllocator&amp; allocator) {\n        _allocator = allocator._allocator;\n    }\n\nprivate:\n    // 8 bytes\n    IAllocator * _allocator;\n};\n\ntemplate &lt;class T, class U&gt;\nbool operator==(StlAllocator&lt;T&gt; const&amp;, StlAllocator&lt;U&gt; const&amp;) noexcept {\n    return true;\n}\n\ntemplate &lt;class T, class U&gt;\nbool operator!=(StlAllocator&lt;T&gt; const&amp; x, StlAllocator&lt;U&gt; const&amp; y) noexcept {\n    return !(x == y);\n}\n</code></pre>\n\n<p>IAllocator class</p>\n\n<pre><code>class IAllocator {\n    template &lt;class T&gt; friend T* OperatorNew(IAllocator &amp; allocator);\n    template &lt;class T&gt; friend void OperatorDelete(IAllocator &amp; allocator, T * object);\n    template &lt;class T&gt; friend T* AllocateNew(IAllocator &amp; allocator);\n    template &lt;class T&gt; friend T* AllocateNew(IAllocator &amp; allocator, T &amp; t);\n    template &lt;class T&gt; friend T* AllocateNew(IAllocator &amp; allocator, T &amp;&amp; t);\n    template &lt;class T&gt; friend void DeallocateDelete(IAllocator &amp; allocator, T * object);\n    template &lt;class T&gt; friend T* AllocateArray(IAllocator &amp; allocator, size_t length);\n    template &lt;class T&gt; friend void DeallocateArray(IAllocator &amp; allocator, T * array);\npublic:\n    IAllocator(void * start, uint64_t size);\n    IAllocator(IAllocator&amp;&amp; other);\n    void * GetStart() const;\n    uint64_t GetNumAlloc() const;\n    uint64_t GetUsed() const;\n    uint64_t GetTotalSize() const;\n    uint64_t GetFree() const;\n    void Reset();\n    virtual ~IAllocator();\nprivate:\n    virtual void * Allocate(uint64_t size, uint8_t alignment) = 0;\n    virtual void Deallocate(void * ptr) = 0;\n\nprotected:\n    // virtual pointer table 8 bytes \n    // 8 bytes\n    uint64_t _used;\n    // 8 bytes\n    uint64_t _total_size;\n    // 8 bytes\n    uint64_t _num_alloc;\n    // 8 bytes\n    void * _start;\n};\n\ntemplate &lt;class T&gt; T* OperatorNew(IAllocator &amp; allocator) {\n    void * ptr = allocator.Allocate(sizeof(T), alignof(T));\n    if (ptr == nullptr) {\n        std::cout &lt;&lt; \"Allocator has run out of space\\n\";\n        return nullptr;\n    }\n    return reinterpret_cast&lt;T*&gt;(ptr);\n}\n\ntemplate &lt;class T&gt; void OperatorDelete(IAllocator &amp; allocator, T * object) {\n    assert(object != nullptr);\n    allocator.Deallocate(object);\n}\n\n\n\ntemplate &lt;class T&gt; T* AllocateNew(IAllocator &amp; allocator) {\n    void * ptr = allocator.Allocate(sizeof(T), alignof(T));\n    if (ptr == nullptr) {\n        std::cout &lt;&lt; \"Allocator has run out of space\\n\";\n        return nullptr;\n    }\n    /*std::thread::id this_id = std::this_thread::get_id();\n    std::cout &lt;&lt; \"Allocate in thread \" &lt;&lt; this_id &lt;&lt; \"\\n\";*/\n    return new (ptr) T;\n}\n\ntemplate &lt;class T&gt; T* AllocateNew(IAllocator &amp; allocator, T &amp; t) {\n    void * ptr = allocator.Allocate(sizeof(T), alignof(T));\n    if (ptr == nullptr) {\n        std::cout &lt;&lt; \"Allocator has run out of space\\n\";\n        return nullptr;\n    }\n    /*std::thread::id this_id = std::this_thread::get_id();\n    std::cout &lt;&lt; \"Allocate in thread \" &lt;&lt; this_id &lt;&lt; \"\\n\";*/\n    return new (ptr) T(t);\n}\n\ntemplate &lt;class T&gt; T* AllocateNew(IAllocator &amp; allocator, T &amp;&amp; t) {\n    void * ptr = allocator.Allocate(sizeof(T), alignof(T));\n    if (ptr == nullptr) {\n        std::cout &lt;&lt; \"Allocator has run out of space\\n\";\n        return nullptr;\n    }\n    /*std::thread::id this_id = std::this_thread::get_id();\n    std::cout &lt;&lt; \"Allocate in thread \" &lt;&lt; this_id &lt;&lt; \"\\n\";*/\n    return new (ptr) T(std::move(t));\n}\n\ntemplate &lt;class T&gt; void DeallocateDelete(IAllocator &amp; allocator, T * object) {\n    assert(object != nullptr);\n    object-&gt;~T();\n    /*std::thread::id this_id = std::this_thread::get_id();\n    std::cout &lt;&lt; \"Deallocate in thread \" &lt;&lt; this_id &lt;&lt; \"\\n\";*/\n    allocator.Deallocate(object); \n}\n\ntemplate &lt;class T&gt; T* AllocateArray(IAllocator &amp; allocator, size_t length) {\n    size_t header_size = sizeof(size_t) / sizeof(T); // find header_size as a multiple of T, an array only needs one header\n    if (sizeof(size_t) % sizeof(T) &gt; 0) {\n        header_size += 1;\n    }\n    void * alloc_ptr = allocator.Allocate(sizeof(T)*(header_size + length), alignof(T)); // allocate enough size for an array \n    if (alloc_ptr == nullptr) {\n        std::cout &lt;&lt; \"Allocator has run out of space\\n\";\n        return nullptr;\n    }\n    T* p = reinterpret_cast&lt;T*&gt;(alloc_ptr) + header_size; // the returned ptr is at an offset of headerSize from the address returned by allocator\n    *(reinterpret_cast&lt;size_t*&gt;(p) - 1) = length; // set the header to the length of the array\n    for (size_t i = 0; i &lt; length; i++) {\n        new (p + i) T; // construct objects in the memory \n    }\n    /*std::thread::id this_id = std::this_thread::get_id();\n    std::cout &lt;&lt; \"Allocate in thread \" &lt;&lt; this_id &lt;&lt; \"\\n\";*/\n    return p;\n}\n\ntemplate &lt;class T&gt; void DeallocateArray(IAllocator &amp; allocator, T * array) {\n    assert(array != nullptr);\n    size_t * header_ptr = (reinterpret_cast&lt;size_t*&gt;(array) - 1); // find address of header\n    size_t length = *header_ptr;\n    for (size_t i = 0; i &lt; length; i++) {\n        (array + i)-&gt;~T(); // call destructor of objects\n    }\n    size_t header_size = sizeof(size_t) / sizeof(T); // find header_size as a multiple of T\n    if (sizeof(size_t) % sizeof(T) &gt; 0) {\n        header_size += 1;\n    }\n    /*std::thread::id this_id = std::this_thread::get_id();\n    std::cout &lt;&lt; \"Deallocate in thread \" &lt;&lt; this_id &lt;&lt; \"\\n\";*/\n    allocator.Deallocate(array - header_size); // deallocate using the address returned by allocation, which is computed by array - header_size\n}\n</code></pre>\n\n<p>BlockAllocator.h</p>\n\n<pre><code>class BlockAllocator: public IAllocator {\npublic:\n    BlockAllocator(void * start, uint64_t size, uint64_t block_size, uint8_t block_alignment);\n    BlockAllocator(BlockAllocator&amp;&amp; other);\n    ~BlockAllocator() override;\n    BlockAllocator(const BlockAllocator&amp;) = delete;\n    BlockAllocator&amp; operator=(const BlockAllocator&amp;) = delete;\nprivate: \n    void * Allocate(uint64_t size, uint8_t alignment) override;\n    void Deallocate(void * ptr) override;\nprivate:\n    // 8 bytes virtual table function pointer\n    // 32 bytes IAllocator\n    // 8 bytes\n    uint64_t _block_size;\n    // 8 bytes\n    void ** _free_list;\n    // 1 bytes\n    uint8_t _block_alignment;\n    // 7 bytes\n    uint8_t _padding[7];\n\n};\n</code></pre>\n\n<p>BlockAllocator.cpp (this is a stripped down minimal version)</p>\n\n<pre><code>BlockAllocator::BlockAllocator(void * start, uint64_t size, uint64_t block_size, uint8_t block_alignment): IAllocator(start, size), \n    _block_size(block_size), \n    _block_alignment(block_alignment) {\n}\n\nBlockAllocator::BlockAllocator(BlockAllocator&amp;&amp; other):IAllocator(std::move(other)), \n    _block_size(other._block_size), \n    _free_list(other._free_list), \n    _block_alignment(other._block_alignment) {}\n\nBlockAllocator::~BlockAllocator() {\n    _free_list = nullptr;\n}\n\nvoid * BlockAllocator::Allocate(uint64_t size, uint8_t alignment) {\n    void * ptr = operator new(size);\n    return ptr; \n}\n\nvoid BlockAllocator::Deallocate(void * ptr) {\n    delete ptr;\n}\n</code></pre>\n\n<p>I am using c++17 on visual studio. The error I got is this</p>\n\n<pre><code>Error   C2664   'Engine::StlAllocator&lt;_Newfirst&gt;::StlAllocator(const Engine::StlAllocator&lt;_Newfirst&gt; &amp;)': cannot convert argument 1 from 'Engine::StlAllocator&lt;uint64_t&gt;' to 'Engine::IAllocator *'\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1566999356, "post_id": 57693725, "comment_id": 101831539, "body": "Do you know where the run time error happens?  If not t sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> and <a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">Debugging Guide</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1567000103, "post_id": 57693725, "comment_id": 101832006, "body": "Hi Me.  Please use a debugger and edit your post with the results of your debugging session.  There is no point in other people debugging your program for you.  Make the first attempt, then post a question (after researching the internet)."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1567000196, "post_id": 57693725, "comment_id": 101832062, "body": "You are missing final <code>else</code> statement in your <code>if-then-else</code> ladders."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1567000267, "post_id": 57693725, "comment_id": 101832106, "body": "You can <i>transform</i> an <code>std::string</code> to all lower case by using <code>std::transform</code> and <code>std::tolower</code>.  Search the internet for more details."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1567000528, "post_id": 57693725, "comment_id": 101832270, "body": "It&#39;s a bit hard to tell because you&#39;ve made it complicated so I haven&#39;t checked exhaustively, but I suspect your comparator does not implement a strict-weak ordering.   If that is so, it will cause various operations on your <code>priority_queue</code> to have undefined behaviour."}], "answers": [{"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1567001808, "creation_date": 1567001808, "answer_id": 57694503, "question_id": 57693725, "link": "https://stackoverflow.com/questions/57693725/what-could-be-possible-reason-for-runtime-error-in-my-code/57694503#57694503", "title": "What could be possible reason for runtime error in my code?", "body": "<p>Without any input running this code ends with <a href=\"https://wandbox.org/permlink/lnQuRm0vK4czXLVa\" rel=\"nofollow noreferrer\">std::bad_alloc</a>.</p>\n\n<p>This give me a clue you are reading data incorrectly so I sppoted this line:</p>\n\n<pre><code>while((cin &gt;&gt; str), str != \"#\")\n</code></pre>\n\n<p>This doesn't do what you are expecting. Comma is operator is evaluated to result of expression on the right side. So when there is no reading <code>str</code> is empty <code>str != \"#\"</code> is always true and loop never ends.</p>\n\n<p>Fix it like this:</p>\n\n<pre><code>while((cin &gt;&gt; str) &amp;&amp; str != \"#\")\n</code></pre>\n\n<p>I didn't check if there are other errors in your code.</p>\n"}, {"tags": [], "owner": {"reputation": 179, "user_id": 3392380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406148131387354e43f39c28d8d2ad26?s=128&d=identicon&r=PG&f=1", "display_name": "Sodrul Amin Shaon", "link": "https://stackoverflow.com/users/3392380/sodrul-amin-shaon"}, "is_accepted": false, "score": 0, "last_activity_date": 1567084136, "creation_date": 1567084136, "answer_id": 57710946, "question_id": 57693725, "link": "https://stackoverflow.com/questions/57693725/what-could-be-possible-reason-for-runtime-error-in-my-code/57710946#57710946", "title": "What could be possible reason for runtime error in my code?", "body": "<p>I have solved my problem and i am totally surprised that <code>return 1;</code> could cause this problem. Thank you guys for helping me with this.</p>\n"}], "owner": {"reputation": 179, "user_id": 3392380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406148131387354e43f39c28d8d2ad26?s=128&d=identicon&r=PG&f=1", "display_name": "Sodrul Amin Shaon", "link": "https://stackoverflow.com/users/3392380/sodrul-amin-shaon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567084136, "creation_date": 1566999248, "question_id": 57693725, "link": "https://stackoverflow.com/questions/57693725/what-could-be-possible-reason-for-runtime-error-in-my-code", "title": "What could be possible reason for runtime error in my code?", "body": "<p>Me again. Getting runtime error for my program below. I am running this code in \n<strong>C++ 5.3.0 - GNU C++ Compiler with options: -lm -lcrypt -O2 -pipe -DONLINE_JUDGE</strong></p>\n\n<p>my code is....</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;queue&gt;\n#include &lt;map&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\n\n\nstruct myString{\n    string inputString;\n    string lowerString;\n    string key;\n\n    myString(string str)\n    : inputString(str)\n    {\n        priority_queue&lt;char&gt; q;\n        lowerString = \"\";\n        for(int i=0;i&lt;str.length();i++){\n            char ch = tolower(str[i]);\n            lowerString += ch;\n            q.push(ch);\n        }\n        key = \"\";\n        while(!q.empty()){\n            key += q.top();\n            q.pop();\n        }\n    }\n};\nstruct CompareString {\n    bool operator()(myString const&amp; ms1, myString const&amp; ms2)\n    {\n        string s1 = ms1.inputString;\n        string s2 = ms2.inputString;\n\n        bool result = true;\n        int minLen = s1.length();\n        if(minLen &gt; s2.length())\n            minLen = s2.length();\n\n        for(int i=0;i&lt;minLen;i++){\n            if(isupper(s1[i]) &amp;&amp; isupper(s2[i])){\n                if(s1[i] &lt; s2[i]){\n                    return false;\n                }else if(s1[i] &gt; s2[i]){\n                    return true;\n                }\n            }else if(isupper(s1[i])){\n                return false;\n            }else if(isupper(s2[i])){\n                return true;\n            }else if(s1[i] &lt; s2[i]){\n                return false;\n            }else if(s1[i] &gt; s2[i]){\n                return true;\n            }\n        }\n        return s2.length() &gt; s1.length();\n    }\n};\n\n\nint main(){\n    string str;\n    priority_queue&lt;myString, vector&lt;myString&gt;, CompareString&gt; sortedInput;\n    map&lt;string,int&gt; presenceCount;\n    while((cin &gt;&gt; str), str != \"#\"){\n        myString ms(str);\n        sortedInput.push(ms);\n\n        map&lt;string, int&gt;::iterator it = presenceCount.find(ms.key);\n        if(it == presenceCount.end()){\n            presenceCount.insert(make_pair(ms.key,1));\n        }else {\n            it-&gt;second++;\n        }\n    }\n\n    while(!sortedInput.empty()){\n        myString ms = sortedInput.top();\n        map&lt;string, int&gt;::iterator it = presenceCount.find(ms.key);\n        if(it-&gt;second &lt;= 1)\n            cout &lt;&lt; ms.inputString &lt;&lt; endl;\n        sortedInput.pop();\n    }\n\n    return 1;\n}\n</code></pre>\n\n<p>I am learing c++. And trying solve some uva problems. Right now i am trying the problem number <a href=\"https://onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;category=0&amp;problem=92&amp;mosmsg=Submission%20received%20with%20ID%2023835055\" rel=\"nofollow noreferrer\">156 - Ananagrams</a>\nSomeone please help me to understand why i am getting runtime error here ??</p>\n"}, {"tags": ["c++", "json", "visual-studio", "post", "cpprest-sdk"], "answers": [{"tags": [], "owner": {"reputation": 420, "user_id": 11785852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bccea0854f1cfd89c9281fdf5ed11f02?s=128&d=identicon&r=PG&f=1", "display_name": "Ruchira", "link": "https://stackoverflow.com/users/11785852/ruchira"}, "is_accepted": false, "score": 0, "last_activity_date": 1567586643, "creation_date": 1567586643, "answer_id": 57784686, "question_id": 57693661, "link": "https://stackoverflow.com/questions/57693661/how-to-post-json-data-and-get-responses-from-the-local-server-by-using-cpprestsd/57784686#57784686", "title": "how to POST json data and get responses from the local server by using cpprestsdk in c++", "body": "<p>try</p>\n\n<blockquote>\n  <p>http_client client(L(\"<a href=\"http://localhost:8080/\" rel=\"nofollow noreferrer\">http://localhost:8080/</a>\"));<br>\n  auto receive =\n  client.request(methods::POST, L(\"\"), postData.serialize(),<br>\n       L(\"application/json\")).get().to_string().c_str();</p>\n</blockquote>\n\n<p>instead of</p>\n\n<blockquote>\n  <p>http_client client(L\"<a href=\"http://localhost:8080/\" rel=\"nofollow noreferrer\">http://localhost:8080/</a>\");<br>\n  auto receive =\n  client.request(methods::POST, L\"\", postData.serialize(),<br>\n       L\"application/json\").get().to_string().c_str();</p>\n</blockquote>\n\n<p>please note the use of brackets after \"L\". </p>\n"}], "owner": {"reputation": 1, "user_id": 11989206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c196e2de6a0705d59cc4675d994d5710?s=128&d=identicon&r=PG&f=1", "display_name": "esuty-st", "link": "https://stackoverflow.com/users/11989206/esuty-st"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 857, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1567586643, "creation_date": 1566999051, "question_id": 57693661, "link": "https://stackoverflow.com/questions/57693661/how-to-post-json-data-and-get-responses-from-the-local-server-by-using-cpprestsd", "title": "how to POST json data and get responses from the local server by using cpprestsdk in c++", "body": "<p>Thank you for answering my asking.</p>\n\n<p>About POST request in c++ with cpprestsdk.</p>\n\n<p>I want to send json data to local server and get response from it by POST with cpprestsdk in c++. I made a program but it doesn't work. I can only send data but cannot get response data.\nstring fomrat OK! \nI can convert string and JSON Object mutually.</p>\n\n<p>Please help me. \nI want to do it.</p>\n\n<p>[pseudo source code like c# or Java]  </p>\n\n<pre><code>string POST(string postData){;\n  string receive = sendtoServer(\"http://localhost:8080/\",postData);\n  return receive;\n}\n</code></pre>\n\n<p>[Linux or window command cURL] </p>\n\n<pre><code>curl -X POST http://localhost:8080/ -d '{\"age\":20,\"sex\":male\"}'\n</code></pre>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cpprest/http_client.h&gt;\n\nusing namespace web;  \nusing namespace web::http;  \nusing namespace web::http::client;  \n\nauto POST(json::value postData){  \n  http_client client(L\"http://localhost:8080/\");  \n  auto receive = client.request(methods::POST, L\"\", postData.serialize(),   \n     L\"application/json\").get().to_string().c_str();  \n  printf(\"[DEBUG] receive = \");  \n  std::wprintf(receive);  \n  return  receive;  \n}  \n</code></pre>\n\n<p>Build success but it doesn't work.\nI does't understand deeply Concurrent::task&lt;>\nso tell me my mistakes.\nThank you.<code>enter code here</code></p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 4187, "user_id": 5567382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204353cb4fa94da57ddf180e108cd1b?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Jager", "link": "https://stackoverflow.com/users/5567382/thomas-jager"}, "edited": false, "score": 5, "creation_date": 1566998573, "post_id": 57693470, "comment_id": 101831016, "body": "What makes you think that they&#39;re not compiled? I&#39;d assume that <code>catkin_make</code> does that."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1566998657, "post_id": 57693470, "comment_id": 101831066, "body": "See the section <i>Building your nodes</i>.  That is where it gets compiled (using cmake, a build system)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1566998809, "post_id": 57693470, "comment_id": 101831161, "body": "btw C and C++ are two different languages. &quot;C/C++&quot; is often used to express the ignorance of the differences between the two, just saying..."}, {"owner": {"reputation": 5397, "user_id": 11294831, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M9BL5.png?s=128&g=1", "display_name": "the busybee", "link": "https://stackoverflow.com/users/11294831/the-busybee"}, "edited": false, "score": 0, "creation_date": 1567007624, "post_id": 57693470, "comment_id": 101836516, "body": "Actually there are interpreters for C that read and evaluate source code. Some of them might be embedded in other applications, allowing you to script in C. One famous example is <a href=\"https://en.wikipedia.org/wiki/Tiny_C_Compiler\" rel=\"nofollow noreferrer\">TCC</a> that compiles into memory and executes thereafter."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1566998755, "creation_date": 1566998755, "answer_id": 57693564, "question_id": 57693470, "link": "https://stackoverflow.com/questions/57693470/how-and-why-is-uncompiled-c-c-sometimes-used/57693564#57693564", "title": "How and why is uncompiled C/C++ sometimes used?", "body": "<p>The premise of your question is untrue.</p>\n\n<p>The source code will undergo a translation process just as it always is.</p>\n\n<p>The CMakeLists.txt file tells CMake what to do, with help from some items set up when you followed the build instructions. In examples given on the reference page you linked to, we have the common declaration to build a C++ file into an executable:</p>\n\n<pre><code>add_executable(talker src/talker.cpp)\n</code></pre>\n\n<p>&hellip;along with all the ROS-related business that gets performed.</p>\n"}], "owner": {"reputation": 1, "user_id": 11839376, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gOtbdSzaFRI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re3iXvbpBNrvLjOda4uzNbdivG3Dg/photo.jpg?sz=128", "display_name": "CopiedFromStackoverflow", "link": "https://stackoverflow.com/users/11839376/copiedfromstackoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1566998755, "creation_date": 1566998474, "question_id": 57693470, "link": "https://stackoverflow.com/questions/57693470/how-and-why-is-uncompiled-c-c-sometimes-used", "title": "How and why is uncompiled C/C++ sometimes used?", "body": "<p>I've seen some programs such as ROS use uncompiled C/C++ files (raw code, not yet compiled). In <a href=\"http://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber%28c%2B%2B%29\" rel=\"nofollow noreferrer\">this</a> example, C++ is used but not compiled. Most C/C++ I've learned so far needs to be compiled to run.</p>\n\n<p>My guess here is that either they're compiled by the system every time it runs, or it's interpreted like Python.</p>\n\n<p>How and why exactly are such uncompiled C/C++ files used?</p>\n"}, {"tags": ["java", "c++", "pointers", "strong-typing"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 4, "creation_date": 1566998466, "post_id": 57693390, "comment_id": 101830949, "body": "&quot;that is the properties of a weakly typed language, like the &quot;auto&quot; variable.&quot; It is <b>required</b>, that the actual type of <code>auto</code>, needs to be resolved at <b>compile time</b> (the <code>auto</code> variable type doesn&#39;t persist in compiled code - it&#39;s merely syntactic sugar). Hence, it&#39;s <b>not</b> possible to have code similar to <code>auto var; if (runtimeCondition) var = 1; else var = &quot;test&quot;;</code>, like you may be able to do in weakly typed languages."}, {"owner": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 0, "creation_date": 1566998556, "post_id": 57693390, "comment_id": 101831009, "body": "<a href=\"https://tour.golang.org/moretypes/1\" rel=\"nofollow noreferrer\">Golang</a>."}, {"owner": {"reputation": 15145, "user_id": 4271923, "user_type": "registered", "profile_image": "https://graph.facebook.com/543414580/picture?type=large", "display_name": "Ped7g", "link": "https://stackoverflow.com/users/4271923/ped7g"}, "edited": false, "score": 0, "creation_date": 1567000215, "post_id": 57693390, "comment_id": 101832073, "body": "memory pointer is itself a type, so its existence is IMHO implying strongly typed language. You can have probably very weakly typed pointers (something like <code>void*</code> in C and C++), but I would be surprised if they would be useful for anything without the strong type features, like casting to other type, etc... Seems to me like pointers without type are basically totally useless and pointers with type dynamically deducted/assigned at runtime are far from assembly-like pointer=unsigned num, more like smart reference having extra bits of information somewhere to deduct the correct type at runtime."}, {"owner": {"reputation": 1288, "user_id": 11680056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352e207181e5b85c5ffeef7be921898c?s=128&d=identicon&r=PG&f=1", "display_name": "sklott", "link": "https://stackoverflow.com/users/11680056/sklott"}, "edited": false, "score": 1, "creation_date": 1567000604, "post_id": 57693390, "comment_id": 101832311, "body": "Actually it may be claimed that Java do have pointers, i.e. any Java variable, except for builtin types, is actually work exactly as C++ pointer. It just dereferenced using <code>.</code> instead of <code>-&gt;</code>, that&#39;s all."}], "owner": {"reputation": 1, "user_id": 9312820, "user_type": "registered", "profile_image": "https://graph.facebook.com/1612664422103816/picture?type=large", "display_name": "Bavel Ibrahim", "link": "https://stackoverflow.com/users/9312820/bavel-ibrahim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566998253, "creation_date": 1566998253, "question_id": 57693390, "link": "https://stackoverflow.com/questions/57693390/besides-c-is-there-a-strongly-typed-language-that-has-pointers-and-does-poin", "title": "Besides C++. is there a strongly typed language that has pointers, and does pointers have any influence on strongly typed languages?", "body": "<p>I was working on java, and then i thought about if Java would still be a strongly typed language if pointers would be introduced into it. </p>\n\n<p>C++ is a strongly typed language, but it has a few properties that is the properties of a weakly typed language, like the \"auto\" variable. </p>\n\n<p>When checking C++ i think there's no need for me to discuss whether java would still be a strongly typed language or not when pointers are introduced into it. </p>\n\n<p>One of the biggest differences in java and C++ are pointers, and if both of them are strongly typed, but one of them doesn't have pointers and the other has it, i think it doesnt have any influence. </p>\n\n<p>Hope you can help me with this \"problem\" i have, thank you!</p>\n"}, {"tags": ["c++", "time", "kinect-v2"], "owner": {"reputation": 31, "user_id": 11989383, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-t8mXWsFGX1I/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdO1-jA3r6nYoSz1Gg8EoV0pH4dQQ/photo.jpg?sz=128", "display_name": "yong cheng", "link": "https://stackoverflow.com/users/11989383/yong-cheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1567005280, "creation_date": 1566997963, "last_edit_date": 1567005280, "question_id": 57693288, "link": "https://stackoverflow.com/questions/57693288/kinect-4-windows-cant-get-time-stamp", "title": "Kinect 4 Windows can&#39;t get time stamp", "body": "<p>I want to get time stamp on Kinect4W</p>\n\n<p>I learned some code from a blog, but it doesn't work</p>\n\n<p>I want to get time stamp on Kinect4W</p>\n\n<p>I learned some code from a blog, but it doesn't work</p>\n\n<pre><code>    IBodyFrameArrivedEventArgs* pArgs=nullptr;\n    IBodyFrameReference* pFrameRef = nullptr;\n    HRESULT hr = pArgs-&gt;get_FrameReference(&amp;pFrameRef);\n</code></pre>\n\n<blockquote>\n  <p>0x00007FF748415967 There is an unhandled exception (in CZMK4Wv2.exe): 0xC000041D: An unhandled exception was encountered during the user callback. .</p>\n</blockquote>\n"}, {"tags": ["c++", "qt", "qchart"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1566999011, "post_id": 57693139, "comment_id": 101831286, "body": "Is it an option to batch updates together and execute them once per second? Currently you are redrawing the chart 20 times per second (both append and setRange would trigger a redraw). To do this change <code>MainWindow::onReadValue</code> and have it append to an internal vector. If the internal vector reaches a certain size (10 for 1x/s), add the points to the series and reset the range."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1566999157, "post_id": 57693139, "comment_id": 101831402, "body": "It might also help to remove points that are no longer shown."}, {"owner": {"reputation": 6419, "user_id": 1840146, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/846e219cba64c80b7b0398b239cd4db9?s=128&d=identicon&r=PG", "display_name": "Toerktumlare", "link": "https://stackoverflow.com/users/1840146/toerktumlare"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1566999992, "post_id": 57693139, "comment_id": 101831924, "body": "i have been thinking about batch updating. But i dont want to remove points that are not shown because ultimately i want to be able to scroll back and se things before. What im collecting is gyro data from an arduino and i would like to &quot;record&quot; so to speak gyro data into files and also see the data in real time while its writing to a file."}, {"owner": {"reputation": 6419, "user_id": 1840146, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/846e219cba64c80b7b0398b239cd4db9?s=128&d=identicon&r=PG", "display_name": "Toerktumlare", "link": "https://stackoverflow.com/users/1840146/toerktumlare"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1567007050, "post_id": 57693139, "comment_id": 101836220, "body": "Actually one thing i found out was that turning of antialiasing made it perform a lot better! it makes perfect sense that, that would slow down a lot."}], "answers": [{"comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1567063112, "post_id": 57697049, "comment_id": 101852508, "body": "Reading a bit further, it seems using OpenGL should also help: &quot;Performance gained from using OpenGL to accelerate series drawing depends on the underlying hardware, but in most cases it is significant. For example, on a standard desktop computer, enabling OpenGL acceleration for a series typically allows rendering at least hundred times more points without reduction on the frame rate.&quot; see <code>QAbstractSeries::useOpenGL</code> (default false)"}], "tags": [], "owner": {"reputation": 6419, "user_id": 1840146, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/846e219cba64c80b7b0398b239cd4db9?s=128&d=identicon&r=PG", "display_name": "Toerktumlare", "link": "https://stackoverflow.com/users/1840146/toerktumlare"}, "is_accepted": true, "score": 1, "last_activity_date": 1567011652, "creation_date": 1567011652, "answer_id": 57697049, "question_id": 57693139, "link": "https://stackoverflow.com/questions/57693139/qchart-slows-down-in-qt-application/57697049#57697049", "title": "QChart slows down in QT application", "body": "<p>After tinkering around i found out that the culprit wasn't actually a memory leak it was the:</p>\n\n<pre><code>chartView-&gt;setRenderHint(QPainter::Antialiasing);\n</code></pre>\n\n<p>As more and more data was presented the slower it got to do all the Antialiasing.</p>\n\n<p>When i removed this everything suddenly went very smooth.</p>\n"}], "owner": {"reputation": 6419, "user_id": 1840146, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/846e219cba64c80b7b0398b239cd4db9?s=128&d=identicon&r=PG", "display_name": "Toerktumlare", "link": "https://stackoverflow.com/users/1840146/toerktumlare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "accepted_answer_id": 57697049, "answer_count": 1, "score": 1, "last_activity_date": 1567011652, "creation_date": 1566997529, "last_edit_date": 1567007330, "question_id": 57693139, "link": "https://stackoverflow.com/questions/57693139/qchart-slows-down-in-qt-application", "title": "QChart slows down in QT application", "body": "<p>So im writing a QT application that will read values from a serial port and display them in a graph during runtime. I managed to update my QChart during runtime with just a random generated value to try out updating in real time and it all works fine.</p>\n\n<p><strong>But my application slows down the more and more i append until it gets completely unusable.</strong> </p>\n\n<p>I do understand that the list containing my points grows, but after a 100 points or so it really really slows down, thats really fast, it feels like i have some sort of memory leak?</p>\n\n<p>I know the usual answer is \"Don't use QCharts\" but im a beginner at both C++ and QT so this is what i'm using for simplicity.</p>\n\n<p>MainWindow.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\n#include &lt;QtCharts/QChartView&gt;\n#include &lt;QtCharts/QLineSeries&gt;\n#include &lt;QGridLayout&gt;\n\n#include &lt;QLabel&gt;\n#include &lt;QDebug&gt;\n\nQT_CHARTS_USE_NAMESPACE\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    series = new QLineSeries();\n\n    chart = new QChart();\n    chart-&gt;legend()-&gt;hide();\n    chart-&gt;addSeries(series);\n    chart-&gt;createDefaultAxes();\n    chart-&gt;axes(Qt::Vertical).back()-&gt;setRange(-10, 10);\n    chart-&gt;axes(Qt::Horizontal).back()-&gt;setRange(0, 100);\n\n    chart-&gt;setContentsMargins(0, 0, 0, 0);\n    chart-&gt;setBackgroundRoundness(0);\n\n    QChartView *chartView = new QChartView(chart);\n    chartView-&gt;setRenderHint(QPainter::Antialiasing);\n    ui-&gt;setupUi(this);\n\n    QLabel *label = new QLabel();\n    label-&gt;setText(\"Hello World\");\n\n    QGridLayout *layout = new QGridLayout;\n    QWidget * central = new QWidget();\n    setCentralWidget(central);\n    centralWidget()-&gt;setLayout(layout);\n\n    layout-&gt;addWidget(chartView, 0, 0);\n\n    clock = 0;\n\n    SerialPortReader *reader = new SerialPortReader(this);\n\n    connect(reader, SIGNAL(onReadValue(int)), this, SLOT(onReadValue(int)));\n\n    reader-&gt;run();\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\nvoid MainWindow::onReadValue(int value){\n    ++clock;    \n    series-&gt;append(clock + 30, value);\n    chart-&gt;axes(Qt::Horizontal).back()-&gt;setRange(0 + clock, 100 + clock);    \n}\n</code></pre>\n\n<p>SerialPortReader.cpp</p>\n\n<pre><code>#include \"serialportreader.h\"\n#include \"mainwindow.h\"\n#include &lt;QtCore&gt;\n#include &lt;QRandomGenerator&gt;\n#include &lt;QDebug&gt;\n\nSerialPortReader::SerialPortReader(QObject *parent) : QThread(parent)\n{\n    this-&gt;parent = parent;\n    this-&gt;randomGenerator = QRandomGenerator::global();\n}\n\nvoid SerialPortReader::run() {\n\n    QTimer *timer = new QTimer(this);\n    timer-&gt;start(100);\n    connect(timer, SIGNAL(timeout()), this, SLOT(readValue()));\n}\n\nvoid SerialPortReader::readValue() {\n    int value = randomGenerator-&gt;bounded(-10, 10);\n    emit onReadValue(value);\n}\n</code></pre>\n\n<p>I was just wondering if anyone has any suggestion to what could be wrong? or if there is a anything i can do, except for changing chart-lib.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1566997167, "post_id": 57692987, "comment_id": 101830138, "body": "<code>B</code> needs to store a pointer or reference to <code>Database</code> in order to do this.  What does you <code>B</code> look like?"}, {"owner": {"reputation": 1111, "user_id": 8527313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8815a9f0576bde3d9822a630bc01aec4?s=128&d=identicon&r=PG&f=1", "display_name": "Qubit", "link": "https://stackoverflow.com/users/8527313/qubit"}, "edited": false, "score": 1, "creation_date": 1566997233, "post_id": 57692987, "comment_id": 101830174, "body": "Looking at the code you show your <code>B</code> stores <code>Database</code> as a copy. So clearly when you modify one of the databases you do nothing to the other or the one you started with."}, {"owner": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566997459, "post_id": 57692987, "comment_id": 101830318, "body": "I changed the code to store a pointer object. The code compiles but if I run the program it closes immediately."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1566997519, "post_id": 57692987, "comment_id": 101830361, "body": "@MartinM. We&#39;d need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in order to help with that.  That said, since you already have an answer here, you would need to ask a new question about that."}, {"owner": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566997763, "post_id": 57692987, "comment_id": 101830511, "body": "The above code is my full short example."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566997687, "post_id": 57693116, "comment_id": 101830466, "body": "If I change the code to yours I can&#39;t insert the values to the map."}, {"owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "reply_to_user": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566997838, "post_id": 57693116, "comment_id": 101830552, "body": "You need to use the address operator(&amp;) like this: <code>setDatabase(&amp;database)</code> in your main."}, {"owner": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566998006, "post_id": 57693116, "comment_id": 101830656, "body": "Yes. But I mean the <code>database-&gt;dataMap.insert()</code> isn&#39;t working"}, {"owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "reply_to_user": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566998056, "post_id": 57693116, "comment_id": 101830685, "body": "My fault. it&#39;s called <code>db</code> now, so &#39;db-&gt;dataMap.insert()&#39; of course."}, {"owner": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566998135, "post_id": 57693116, "comment_id": 101830732, "body": "The db was not the problem. It isn&#39;t working anyway."}, {"owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "reply_to_user": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566998265, "post_id": 57693116, "comment_id": 101830822, "body": "Yeah, fixed that i guess. Thanks hegel5000"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566998481, "post_id": 57693116, "comment_id": 101830963, "body": "@MartinM. what is not working? What is the error you get?"}, {"owner": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566998653, "post_id": 57693116, "comment_id": 101831061, "body": "The console is displaying no error. But visual studio shows the following error: Access violation reading location 0x0000000000000019"}, {"owner": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566999474, "post_id": 57693116, "comment_id": 101831612, "body": "But here you are using a struct instead of class. And my classes are placed in different files."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "edited": false, "score": 0, "creation_date": 1566999626, "post_id": 57693116, "comment_id": 101831691, "body": "@MartinM. struct and class are the same, and placing the class in different files should not change a thing. I&#39;ll edit so it&#39;s a class anyway if that helps."}], "tags": [], "owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "is_accepted": false, "score": 4, "last_activity_date": 1566999634, "last_edit_date": 1566999634, "creation_date": 1566997414, "answer_id": 57693116, "question_id": 57692987, "link": "https://stackoverflow.com/questions/57692987/pass-class-object-to-two-objects/57693116#57693116", "title": "Pass class object to two objects", "body": "<p>You are passing a reference. What you are doing is copying yout Database. You need to copy the address (pointer):</p>\n\n<p>Class B.h</p>\n\n<pre><code>class B\n{\nprivate:\n  Database* database; //Pointer to Database instead of actual Database object\n\npublic:\n  void setDatabase(Database* database) //Pass pointer(*) instead of reference(&amp;)\n  { \n    this-&gt;database = database; // Assign pointer instead of calling the implicit copy constructor\n  }\n\n  void insert(string name) { \n    database-&gt;dataMap.insert({ name, 10 }); //Dereferencing and member access(-&gt;) instead of member access only(.)\n\n    cout &lt;&lt; database-&gt;dataMap.size() &lt;&lt; endl;\n  }\n\n}\n</code></pre>\n\n<p>Class A.h:</p>\n\n<pre><code>  Database database; \n  B b1; \n  B b2;\n</code></pre>\n\n<p>Class a.cpp:</p>\n\n<pre><code>b1.setDatabase(&amp;database); \nb2.setDatabase(&amp;database);\n\nb1.insert(\"A\"); \nb2.insert(\"B\");\nb1.insert(\"C\");\nb2.insert(\"D\");\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/84evCd\" rel=\"nofollow noreferrer\">Live example</a></p>\n"}], "owner": {"reputation": 43, "user_id": 11647055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3946c3eaa08785c197c18ccecb93abb7?s=128&d=identicon&r=PG&f=1", "display_name": "Martin M. ", "link": "https://stackoverflow.com/users/11647055/martin-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1566999634, "creation_date": 1566997051, "last_edit_date": 1566999279, "question_id": 57692987, "link": "https://stackoverflow.com/questions/57692987/pass-class-object-to-two-objects", "title": "Pass class object to two objects", "body": "<p>I have a class <code>Database</code>. In my class <code>A</code> I create a new object from the database and two objects of class <code>B</code>. Now I want to access the database object from both class <code>B</code> objects. I tried passing the object as pointer and reference but when I print the adress it's always different.</p>\n\n<p>Class A.h:</p>\n\n<pre><code>Database database; \nB b1; \nB b2;\n</code></pre>\n\n<p>Class A.cpp:</p>\n\n<pre><code>b1.setDatabase(database); \nb2.setDatabase(database);\n\nb1.insert(\"A\"); \nb2.insert(\"B\");\nb1.insert(\"C\");\nb2.insert(\"D\");\n</code></pre>\n\n<p>Class B.h</p>\n\n<pre><code>Database database;\n</code></pre>\n\n<p>Class B.cpp</p>\n\n<pre><code>void setDatabase(Database&amp; database) { \n  this-&gt;database = database; \n}\n\nvoid insert(std::string name) { \n  database.dataMap.insert({ name, 10 }); \n\n  std::cout &lt;&lt; database.dataMap.size() &lt;&lt; std::endl; \n}\n</code></pre>\n\n<p>Class Database.h</p>\n\n<pre><code>std::map&lt;std::string, int&gt; dataMap;\n</code></pre>\n\n<p>The output should be \n1\n2\n3\n4</p>\n\n<p>But it is </p>\n\n<p>1\n1\n2\n2</p>\n\n<p>So I think it's not the same object</p>\n"}, {"tags": ["c++", "stm32"], "comments": [{"owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "edited": false, "score": 0, "creation_date": 1566997806, "post_id": 57692355, "comment_id": 101830534, "body": "Please post your code into your question and format it, so we can read it properly"}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1567001110, "post_id": 57692355, "comment_id": 101832640, "body": "Sounds like a link issue. But impossible to help you without more details. please provide your linker script and (readable) C code."}, {"owner": {"reputation": 1701, "user_id": 5836577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931236857b09c3b0aea0f29fb5a23cbc?s=128&d=identicon&r=PG&f=1", "display_name": "Guillaume Petitjean", "link": "https://stackoverflow.com/users/5836577/guillaume-petitjean"}, "edited": false, "score": 0, "creation_date": 1567001180, "post_id": 57692355, "comment_id": 101832682, "body": "Also your memcpy should use symbols defined in the linker script for code start address and length. there are plenty of examples available online."}, {"owner": {"reputation": 11, "user_id": 11989102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b261fd0fdbd064c7f449ee93423d4301?s=128&d=identicon&r=PG&f=1", "display_name": "lidor", "link": "https://stackoverflow.com/users/11989102/lidor"}, "edited": false, "score": 0, "creation_date": 1567012947, "post_id": 57692355, "comment_id": 101838833, "body": "Sorry it was very hard doing it with my phone... I fixed it now :)"}], "answers": [{"tags": [], "owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "is_accepted": false, "score": 0, "last_activity_date": 1567069490, "last_edit_date": 1592644375, "creation_date": 1567069490, "answer_id": 57706714, "question_id": 57692355, "link": "https://stackoverflow.com/questions/57692355/stm32f4-copy-a-function-from-the-flash-to-the-ram-on-runtime/57706714#57706714", "title": "stm32f4 - copy a function from the flash to the ram on runtime", "body": "<p>Your problem is that you can't <a href=\"https://isocpp.org/wiki/faq/pointers-to-members#cant-cvt-memfnptr-to-voidptr\" rel=\"nofollow noreferrer\"><em>... convert a pointer-to-member-function to a void?</em></a> and can't <a href=\"https://isocpp.org/wiki/faq/pointers-to-members#cant-cvt-fnptr-to-voidptr\" rel=\"nofollow noreferrer\"><em>... convert a pointer-to-function to a void?</em></a></p>\n<blockquote>\n<p>Technical details: void* pointers are pointers to data, and function pointers point to functions. The language does not require functions and data to be in the same address space,...</p>\n</blockquote>\n<p>What you could do is use the linker to place certain functions at certain spots inside your flash memory and write a function to load from that certain memory space. This can be done as shown <a href=\"https://community.arm.com/developer/tools-software/tools/f/keil-forum/38163/function-located-to-a-fixed-address\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://www.silabs.com/community/mcu/32-bit/knowledge-base.entry.html/2016/03/07/using_a_linker_scrip-s5bu\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>It involves creating a new memory region with your custom name. In the example this is <code>MY_MEMORY</code></p>\n<pre><code>MEMORY\n{\n    FLASH (rx) : ORIGIN = 0x0, LENGTH = 128K\n    RAM (rwx) : ORIGIN = 0x20000000, LENGTH = 32k\n    MY_MEMORY (rx) : ORIGIN = 0x20000, LENGTH = 128k\n}\n</code></pre>\n<p>You then declare a section which can be used to place functions (or data) inside of it.</p>\n<pre><code>__etext = .;\n\n.mysection :\n{\n  . = ALIGN(4);\n  __mysection_start__ = .;\n  *(.mysection*)\n  __mysection_end__ = .;\n} &gt; MY_MEMORY\n</code></pre>\n<p>You'll need to add a size check for added safety to your linker script so you won't overflow your memory area.</p>\n<pre><code>/* Check if FLASH usage exceeds FLASH size */\n  ASSERT( LENGTH(FLASH) &gt;= (__etext + SIZEOF(.data)), &quot;FLASH memory overflowed !&quot;)\n  \n  /* Check if MY_MEMORY usage exceeds MY_MEMORY size */\n  ASSERT( LENGTH(MY_MEMORY) &gt;= (__mysection_end__ - __mysection_start__), &quot;MY_MEMORY memory overflowed !&quot;)\n</code></pre>\n<p>And now you can locate a function inside a certain memory section and read the data from it.</p>\n<pre><code>#define LOCATE_FUNC  __attribute__((__section__(&quot;.mysection&quot;)))\n\nvoid LOCATE_FUNC Delay(uint32_t dlyTicks)\n{\n  \n}\n</code></pre>\n<h1>please note that this tutorial was copied from the silabs ChrisM Q/A page and as such isn't my work.</h1>\n"}], "owner": {"reputation": 11, "user_id": 11989102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b261fd0fdbd064c7f449ee93423d4301?s=128&d=identicon&r=PG&f=1", "display_name": "lidor", "link": "https://stackoverflow.com/users/11989102/lidor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1567069490, "creation_date": 1566995047, "last_edit_date": 1567012919, "question_id": 57692355, "link": "https://stackoverflow.com/questions/57692355/stm32f4-copy-a-function-from-the-flash-to-the-ram-on-runtime", "title": "stm32f4 - copy a function from the flash to the ram on runtime", "body": "<p>I\u2019m having an issue with my <em>stm32f4</em>, I\u2019m trying to copy a function from the flash to the ram (kind of POC for something). I\u2019ve managed to make it work when the function was very simple (increasing a counter), however when I'm trying to call a flash function from the function i copied to the ram the controller gets a hardfault </p>\n\n<p>Again this is a pure POC... I also cant use <code>__ramfunc</code> as I need to do it on runtime...</p>\n\n<p>The code is something like this:</p>\n\n<pre><code>void dummy_func2() \n{ \n    var2++;\n} \n\nvoid dummy_func()\n{ \n    var++;\n    dummy_func2(); \n} \n\nvoid copy()\n{ \n    memcpy(buffer, (void*)((uint32_t)&amp;dummy_func &amp; ~1), 100);\n    run_func = (pFunc) &amp;buffer[1];\n}\n\n\nvoid main()\n{ \n    copy();\n    while(1) \n    {   \n        run_func(); \n    }\n}\n</code></pre>\n\n<p>thanks! \ud83d\ude0a</p>\n"}, {"tags": ["c++", "inheritance", "reference"], "comments": [{"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 2, "creation_date": 1566994905, "post_id": 57692250, "comment_id": 101828778, "body": "What <code>base::i</code> refers to? To a temporary object? And why it&#39;s a const reference and not just an integer value?"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 1, "creation_date": 1566994987, "post_id": 57692250, "comment_id": 101828835, "body": "Change the type of <code>base::i</code> to a regular <code>int</code>, not a <code>int&amp;</code>. You stored a reference to stack memory that changed under you."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1566995486, "post_id": 57692250, "comment_id": 101829144, "body": "A reference member is almost always the wrong idea, and a member that is a reference to a constructor parameter always is."}, {"owner": {"reputation": 1, "user_id": 8077546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b1b6190744785645b6034b8c8bdd125?s=128&d=identicon&r=PG&f=1", "display_name": "jigar bhanushali", "link": "https://stackoverflow.com/users/8077546/jigar-bhanushali"}, "edited": false, "score": 0, "creation_date": 1566997436, "post_id": 57692250, "comment_id": 101830305, "body": "Actually i am using sharedptr to create all the object. Even sample object which is declared in base class is created with shared_ptr. But when I first created object for sample and then supplied these object to derived class object, it is getting crashed when it is trying to exit from main as it looks like first derived is deleting all the count for sample object, so when sample object is trying to exit it is showing error. p"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566997550, "post_id": 57692250, "comment_id": 101830385, "body": "@jigarbhanushali If you have a problem you should share code that accurately reflects that problem. Who knows if the code above has the same problem as your real code. It&#39;s very common for people to be completely wrong about the cause of their problem, for instance the problem above has nothing at all to do with derived classes. So post your real code, not made up code which you think has the same issue."}], "answers": [{"comments": [{"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1566998233, "post_id": 57693037, "comment_id": 101830802, "body": "I don&#39;t think OP wanted const references in the first place. Better replace all of them with instances."}], "tags": [], "owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1566997198, "creation_date": 1566997198, "answer_id": 57693037, "question_id": 57692250, "link": "https://stackoverflow.com/questions/57692250/how-do-i-access-reference-member-variable-from-derived-class/57693037#57693037", "title": "How do I access reference member variable from derived class?", "body": "<p>So in this code</p>\n\n<pre><code>base(int i_, sample a_):i(i_), a(a_){}\n</code></pre>\n\n<p><code>i_</code> exists only in the <code>base</code> constructor. But your reference to it <code>i</code> exists as long as the <code>base</code> object exists. This is the fundamental problem, your reference exists for longer than the object it is referring to exists. This is why you see a 'random' number. And note you have exactly the same problem with <code>a_</code> and <code>a</code>. The only way to make this work is to make the parameters to your constructor be references as well. Like this</p>\n\n<pre><code>base(const int&amp; i_, sample a_):i(i_), a(a_){}\n</code></pre>\n\n<p>and this</p>\n\n<pre><code>derived(const int&amp; i, sample a, int jt_): base(i,a), jt(jt_){}\n</code></pre>\n\n<p>and in <code>main</code></p>\n\n<pre><code>int fifty = 50;\nsample ob(20);\nderived *bob = new derived(fifty, ob, 2002);\n</code></pre>\n\n<p>Now all your references refer to <code>fifty</code> which exists for as long as <code>main</code> does. So you avoid the problem.</p>\n\n<p>Hopefully that explains the problem, but as has already been said in the comments above putting references into class is almost always a bad idea precisely because of the lifetime issue. Generally speaking classes should take copies of the objects used to construct them, and if copies are too expensive then use <em>move constructors</em> to move instead of copy.</p>\n"}], "owner": {"reputation": 1, "user_id": 8077546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b1b6190744785645b6034b8c8bdd125?s=128&d=identicon&r=PG&f=1", "display_name": "jigar bhanushali", "link": "https://stackoverflow.com/users/8077546/jigar-bhanushali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566997198, "creation_date": 1566994661, "last_edit_date": 1566995299, "question_id": 57692250, "link": "https://stackoverflow.com/questions/57692250/how-do-i-access-reference-member-variable-from-derived-class", "title": "How do I access reference member variable from derived class?", "body": "<p>When I am printing reference member variable from derived class it is showing error. But from main class it is showing proper result. \nPlease let me know how can I get reference member in derived class.</p>\n\n<p>Thanks</p>\n\n<p>I have sample code as follow:</p>\n\n<pre><code>class sample {\n    int a;\n    public:\n    sample(int a_): a(a_){}\n    int geta(){ return a; }\n};\n\nclass base {\nprotected:\n    const int&amp; i;\n    const sample&amp; a;\npublic:\n    base(int i_, sample a_):i(i_), a(a_){}\n    const int&amp; geti(){ return i; };\n    sample getsample(){ return a; };\n    virtual void samplefunction() = 0;\n};\n\nclass derived : public base {\npublic:\n    const int&amp; jt;\n    derived(int i, sample a, int jt_): base(i,a), jt(jt_){}\n    void samplefunction() { \n        cout&lt;&lt; \"geti from derived. \" &lt;&lt; geti() &lt;&lt; endl;\n    };\n};\n\nint main()\n{\n    sample ob(20);\n    derived *bob = new derived(50, ob, 2002);\n    // bob-&gt;samplefunction();\n    cout &lt;&lt; \"geti from main. \" &lt;&lt; bob-&gt;geti() &lt;&lt; endl;\n    bob-&gt;samplefunction();\n\n    // cout &lt;&lt; \"bob inside samplefunction\";\n    return 0;\n}\n</code></pre>\n\n<p>I am getting output as follow:\ngeti from main. 50\ngeti from derived. 13307456</p>\n\n<p>from the sample function where I am calling geti must print 50, not a random value. Please suggest me solution.</p>\n"}, {"tags": ["c++", "boost", "boost-uuid"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566994807, "post_id": 57692237, "comment_id": 101828725, "body": "Comparing an UUID for equality or inequality makes sense, but not really any relational comparisons. What does it mean for an UUID to be &quot;less&quot; (or &quot;greater&quot;) than another?"}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566995010, "post_id": 57692237, "comment_id": 101828847, "body": "It is only needed for building ordered containers such as <code>std::map</code> (unfortunately, unordered_map is unavailable for me)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1566995292, "post_id": 57692237, "comment_id": 101829024, "body": "Unfortunately UUID ordering is meaningless. Take two UUID&#39;s from somewhere (not artificially constructed like yours). Does it make sense to call one &quot;smaller&quot; than the other? No it doesn&#39;t. If you need a dictionary-like container but have no access to C++11 <code>std::unordered_map</code> then use e.g. <a href=\"https://www.boost.org/doc/libs/1_71_0/doc/html/boost/unordered_map.html\" rel=\"nofollow noreferrer\">Boost <code>unordered_map</code></a> (or any of the million of hash-table implementations available)."}, {"owner": {"reputation": 8115, "user_id": 4636534, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GoTz67GRao8/AAAAAAAAAAI/AAAAAAAAADI/PyDv-i56924/photo.jpg?sz=128", "display_name": "Andrey Semashev", "link": "https://stackoverflow.com/users/4636534/andrey-semashev"}, "edited": false, "score": 0, "creation_date": 1567015169, "post_id": 57692237, "comment_id": 101839752, "body": "Works as expected for me with gcc 8.3 on Ubuntu Disco. Did you inspect the actual values in UUIDs? The compiler may be able to (incorrectly) fill the UUIDs in compile time. You can try moving the strings to a separate translation unit to mitigate that. Did you try different compilers and compiler optimization options?"}], "owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566994631, "creation_date": 1566994631, "question_id": 57692237, "link": "https://stackoverflow.com/questions/57692237/x86-intrinsics-act-weird-in-boostuuidsoperator", "title": "x86 intrinsics act weird in boost::uuids::operator &lt;", "body": "<p>I'm using <code>boost::uuids</code> inside maps (<code>labeled_graph</code>, actually), so I need a properly working <code>operator &lt;</code>. Unfortunately it isn't, if <code>BOOST_UUID_USE_SSE2</code> is enabled (and thus, <code>uuid_x86.hpp</code> is used). </p>\n\n<p>Here is example code:</p>\n\n<pre><code>#include &lt;boost/uuid/nil_generator.hpp&gt;\n#include &lt;boost/uuid/uuid.hpp&gt;\n#include &lt;boost/uuid/uuid_io.hpp&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;iostream&gt;\n\n#include &lt;assert.h&gt;\n\n#define CHECK(x)  do { if(x) { std::cout &lt;&lt; #x &lt;&lt; \"\\n\"; } } while(0)\n\nstatic inline boost::uuids::uuid StringToUuid(const std::string &amp;str)\n{\n    boost::uuids::uuid u = boost::uuids::nil_uuid();\n    std::stringstream uuidstring(str);\n    uuidstring &gt;&gt; u;\n    return u;\n}\n\nint main() {\n    boost::uuids::uuid vmi_uuid = StringToUuid(\"00000000-0000-0000-0000-000000000001\");\n    boost::uuids::uuid vmi2_uuid = StringToUuid(\"00000000-0000-0000-0000-000000000002\");\n\n    CHECK(vmi_uuid != vmi2_uuid);\n    CHECK(vmi_uuid &lt; vmi2_uuid);\n    CHECK(vmi2_uuid &lt; vmi_uuid);\n\n    return 0;\n}\n</code></pre>\n\n<p>When <code>uuid_x86.hpp</code> is used, <code>operator&lt;</code> is incosistent -- returns false in both cases:</p>\n\n<pre><code>vmi_uuid != vmi2_uuid\n</code></pre>\n\n<p>Disabling intrinsic-based header returns things back to normal:</p>\n\n<pre><code>vmi_uuid != vmi2_uuid\nvmi_uuid &lt; vmi2_uuid\n</code></pre>\n\n<p>This is reproducable only with special UUIDs (<code>1</code> and <code>2</code>), having totally random ids doesn't reveal this problem.</p>\n\n<p>I have Ubuntu Xenial with libboost 1.58. CPU is i7-6600U if it matters.\nAm I missing something?</p>\n"}, {"tags": ["c++", "c", "cmake", "compilation"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1566993733, "post_id": 57691811, "comment_id": 101828111, "body": "<code>unrecognised emulation mode: armelf_linux_eabi</code>     <code>Supported emulations: elf_x86_64 elf32_x86_64 elf_i386 elf_iamcu i386linux elf_l1om elf_k1om i386pep i386pe</code>"}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1566993774, "post_id": 57691811, "comment_id": 101828146, "body": "@KamilCuk yes, because <code>&#47;bin&#47;ld</code> is being used. Shouldn&#39;t I use another linker (perhaphs llvm) which supports <code>armelf_linux_eabi</code>?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1566993851, "post_id": 57691811, "comment_id": 101828198, "body": "Is there a clang linker? <code>set(CMAKE_C_LINK_EXECUTABLE ...)</code>"}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1566994165, "post_id": 57691811, "comment_id": 101828361, "body": "@KamilCuk I don&#39;t know. Do you mean llvm?"}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1566994556, "post_id": 57691811, "comment_id": 101828573, "body": "@KamilCuk I used <code>set(CMAKE_C_LINK_EXECUTABLE &#47;usr&#47;bin&#47;llvm-link-8)</code> and I got: <code>&#47;usr&#47;bin&#47;llvm-link-8     llvm-link-8: Not enough positional command line arguments specified! </code>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1566997609, "post_id": 57691811, "comment_id": 101830416, "body": "@LucasZanella try specifying <code>&#47;usr&#47;bin&#47;lld</code>"}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1567005733, "post_id": 57691811, "comment_id": 101835428, "body": "@GuillaumeRacicot <code>&#47;usr&#47;bin&#47;lld     Error running link command: No such file or directory</code>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1567005790, "post_id": 57691811, "comment_id": 101835462, "body": "@LucasZanella you have to install the clang linker then."}], "owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566993712, "creation_date": 1566993224, "last_edit_date": 1566993712, "question_id": 57691811, "link": "https://stackoverflow.com/questions/57691811/cross-compiling-with-clang-on-cmake-linker-does-not-support-armelf-linux-eabi", "title": "Cross compiling with clang on cmake, linker does not support armelf_linux_eabi", "body": "<p>Here's my cmake toolchain file to cross compile for arm linux:</p>\n\n<pre><code>set(CMAKE_SYSTEM_NAME Linux)\nset(CMAKE_SYSTEM_PROCESSOR arm)\n\nset(CLANG_TARGET_TRIPLE arm-linux-gnueabihf)\nset(GCC_ARM_TOOLCHAIN_PREFIX ${CLANG_CLANG_TARGET_TRIPLE})\nset(CMAKE_C_COMPILER clang)\nset(CMAKE_C_COMPILER_TARGET ${CLANG_TARGET_TRIPLE})\nset(CMAKE_CXX_COMPILER clang++)\nset(CMAKE_CXX_COMPILER_TARGET ${CLANG_TARGET_TRIPLE})\nset(CMAKE_ASM_COMPILER clang)\nset(CMAKE_ASM_COMPILER_TARGET ${CLANG_TARGET_TRIPLE})\n</code></pre>\n\n<p>Here's the problem when I execute cmake with it:</p>\n\n<pre><code>CMake Error at /usr/share/cmake-3.10/Modules/CMakeTestCCompiler.cmake:52 (message):\n  The C compiler\n\n    \"/usr/bin/clang\"\n\n  is not able to compile a simple test program.\n\n  It fails with the following output:\n\n    Change Dir: /home/lz/orwell/gtk/build/armlinux/CMakeFiles/CMakeTmp\n\n    Run Build Command:\"/usr/bin/make\" \"cmTC_8132a/fast\"\n    /usr/bin/make -f CMakeFiles/cmTC_8132a.dir/build.make CMakeFiles/cmTC_8132a.dir/build\n    make[1]: Entering directory '/home/lz/orwell/gtk/build/armlinux/CMakeFiles/CMakeTmp'\n    Building C object CMakeFiles/cmTC_8132a.dir/testCCompiler.c.o\n    /usr/bin/clang --target=arm-linux-gnueabihf    -o CMakeFiles/cmTC_8132a.dir/testCCompiler.c.o   -c /home/lz/orwell/gtk/build/armlinux/CMakeFiles/CMakeTmp/testCCompiler.c\n    Linking C executable cmTC_8132a\n    /usr/bin/cmake -E cmake_link_script CMakeFiles/cmTC_8132a.dir/link.txt --verbose=1\n    /usr/bin/clang --target=arm-linux-gnueabihf      -rdynamic CMakeFiles/cmTC_8132a.dir/testCCompiler.c.o  -o cmTC_8132a \n    /usr/bin/ld: unrecognised emulation mode: armelf_linux_eabi\n    Supported emulations: elf_x86_64 elf32_x86_64 elf_i386 elf_iamcu i386linux elf_l1om elf_k1om i386pep i386pe\n    clang: error: linker command failed with exit code 1 (use -v to see invocation)\n    CMakeFiles/cmTC_8132a.dir/build.make:97: recipe for target 'cmTC_8132a' failed\n    make[1]: *** [cmTC_8132a] Error 1\n    make[1]: Leaving directory '/home/lz/orwell/gtk/build/armlinux/CMakeFiles/CMakeTmp'\n    Makefile:126: recipe for target 'cmTC_8132a/fast' failed\n    make: *** [cmTC_8132a/fast] Error 2\n</code></pre>\n\n<p>It looks like it's trying to use <code>/bin/ld</code> instead of clang's linker (is there one?). I know that there exists <a href=\"https://cmake.org/cmake/help/v3.6/variable/CMAKE_LANG_COMPILER_EXTERNAL_TOOLCHAIN.html#variable:CMAKE_%3CLANG%3E_COMPILER_EXTERNAL_TOOLCHAIN\" rel=\"nofollow noreferrer\">CMAKE_LANG_COMPILER_EXTERNAL_TOOLCHAIN</a> but I don't know the path to include and preferably I didn't want to include any paths, I'd like to make it work without path specification.</p>\n\n<p>So, how to specify a compatible linker?</p>\n"}, {"tags": ["c++", "data-structures", "graph-theory", "graph-algorithm", "depth-first-search"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1566994848, "post_id": 57691678, "comment_id": 101828747, "body": "1) Use <code>at()</code> instead of <code>[]</code> when accessing elements in your vectors.  This will check if you are accessing an element out-of-bounds, and if you are, will throw an <code>std::out_of_range</code> exception instead of seg faulting.  2) Check if you&#39;re trying to access an empty <code>std::stack</code> before issuing a <code>pop()</code> call.  3) Please write a <code>main</code> function, calling your <code>Solve</code> with the test data."}, {"owner": {"reputation": 37, "user_id": 11768006, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mb3PKjUnENY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdh8CPTcEmACONIpIhRT5bRhZEaiQ/photo.jpg?sz=128", "display_name": "Ayush Gupta", "link": "https://stackoverflow.com/users/11768006/ayush-gupta"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1566995501, "post_id": 57691678, "comment_id": 101829153, "body": "did all of these three. This was shown :  terminate called after throwing an instance of &#39;std::out_of_range&#39;   what():  vector::_M_range_check Aborted  . Still can&#39;t find the reason for the exception."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1566995682, "post_id": 57691678, "comment_id": 101829270, "body": "The reason is stated in the error message -- you are going out-of-bounds in one of your vectors.  Now figure out which <code>at()</code> call threw that exception by slowly introducing <code>[]</code> back into your code.  Once you get the seg fault again, it was the last <code>at()</code> call you changed back to <code>[]</code> that caused the error."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1566998807, "post_id": 57691678, "comment_id": 101831159, "body": "Or just use a debugger which will stop at the exact point the exception is thrown"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1567150386, "post_id": 57691678, "comment_id": 101885445, "body": "The algorithm works but IMHO it&#39;s not the best way to solve the problem. You build a bidirectional adjacency list and then completely forget that your graph is a tree. In a real tree, DFS from the root is simply a recursive traversal. You don&#39;t really need the second DFS because you can collect the data you need during the first one."}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1567144778, "post_id": 57720662, "comment_id": 101883297, "body": "This is not a very good answer. What is the root cause of the problem? Why does this change solve it?"}, {"owner": {"reputation": 394, "user_id": 7261925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnEFB.png?s=128&g=1", "display_name": "Robur_131", "link": "https://stackoverflow.com/users/7261925/robur-131"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1567146301, "post_id": 57720662, "comment_id": 101883757, "body": "Updated the answer with an explanation @n.m."}], "tags": [], "owner": {"reputation": 394, "user_id": 7261925, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnEFB.png?s=128&g=1", "display_name": "Robur_131", "link": "https://stackoverflow.com/users/7261925/robur-131"}, "is_accepted": true, "score": 3, "last_activity_date": 1567146283, "last_edit_date": 1567146283, "creation_date": 1567140682, "answer_id": 57720662, "question_id": 57691678, "link": "https://stackoverflow.com/questions/57691678/runtime-error-in-largest-distance-between-nodes-of-a-tree/57720662#57720662", "title": "Runtime error in Largest Distance between nodes of a Tree", "body": "<p>Change the line in <code>Solution::solve(vector&lt;int&gt; &amp;A)</code>:</p>\n\n<pre><code>for(int i = 1 ; i &lt; A.size() ; ++i)\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>for(int i = 0; i &lt; A.size() ; ++i)\n</code></pre>\n\n<p>And your problem gets solved.</p>\n\n<p>The problem is you're not fully iterating the given <code>A</code> array. You start iterating from the index <code>1</code>, while the array goes from index <code>0</code> to <code>A.size() - 1</code>. So your adjacency list does not get constructed properly, and the <code>root</code> variable remains uninitialized in some cases. So you run into <code>Runtime error</code>. </p>\n"}], "owner": {"reputation": 37, "user_id": 11768006, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mb3PKjUnENY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdh8CPTcEmACONIpIhRT5bRhZEaiQ/photo.jpg?sz=128", "display_name": "Ayush Gupta", "link": "https://stackoverflow.com/users/11768006/ayush-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 57720662, "answer_count": 1, "score": 1, "last_activity_date": 1567146283, "creation_date": 1566992745, "question_id": 57691678, "link": "https://stackoverflow.com/questions/57691678/runtime-error-in-largest-distance-between-nodes-of-a-tree", "title": "Runtime error in Largest Distance between nodes of a Tree", "body": "<p>This is an interviewbit.com problem : <a href=\"https://www.interviewbit.com/problems/largest-distance-between-nodes-of-a-tree/\" rel=\"nofollow noreferrer\">https://www.interviewbit.com/problems/largest-distance-between-nodes-of-a-tree/</a></p>\n\n<p>Given an arbitrary unweighted rooted tree which consists of N (2 &lt;= N &lt;= 40000) nodes. The goal of the problem is to find largest distance between two nodes in a tree. Distance between two nodes is a number of edges on a path between the nodes (there will be a unique path between any pair of nodes since it is a tree). The nodes will be numbered 0 through N - 1.</p>\n\n<p>I am finding a node which is farthest from root node using dfs. From this node i am doing DFS to find the farthest node. this distance is the required answer. I implemented it, but while calling do_dfs function i am getting segmentation fault. i wrote return statement after every line to find out where i am getting error. I have indicated that line in comment in code.</p>\n\n<pre><code>pair&lt;int,int&gt; do_dfs(vector&lt;vector&lt;int&gt;&gt; &amp;adj, int n, int root)\n{\n    int l1 = 0;\n    stack&lt;pair&lt;int,int&gt;&gt; st;\n    st.push(make_pair(root,0));\n    vector&lt;int&gt; vis(n,-1); \n    vis[root]=1;  //This statement is causing segmentation fault\n    int longest=-1;\n\n    while(!st.empty())\n    {\n        int top=st.top().first , l=st.top().second;\n        int x=-1;\n        for(int i=0;i&lt;adj[top].size();++i)\n        {\n            int node = adj[top][i];\n            if(vis[node] ==-1)\n            {\n                x = node;\n                st.push(make_pair(node,l+1));\n                vis[node]=1;\n                break;\n            }\n        }\n\n        if(x==-1)\n        {\n            if(l&gt;l1)\n            {\n                l1 = l;\n                longest = top;\n\n            }\n            st.pop();\n        }\n    }\n    return make_pair(longest,l1);\n}\n\n\nint Solution::solve(vector&lt;int&gt; &amp;A) \n{\n    if(A.size()&lt;3)return (A.size()-1);\n\n    vector&lt;vector&lt;int&gt;&gt; adj(A.size());\n    int root;\n    for(int i=1;i&lt;A.size();++i)\n    {\n        if(A[i]==-1)\n        {\n            root = i;\n            continue;\n        }\n        adj[i].push_back(A[i]);\n        adj[A[i]].push_back(i);\n    }\n    //adjacent list for graph complete\n\n    pair&lt;int,int&gt; d1=do_dfs(adj,A.size(),root) ;\n    pair&lt;int,int&gt; d2 = do_dfs(adj, A.size(), d1.first);\n    int ans = d2.second;\n    return ans;\n}\n</code></pre>\n\n<p>Tescases :-\nA : [ -1, 0, 0, 1, 2, 1, 5 ]\nexpected output : 5</p>\n\n<p>A : [ -1, 0, 0, 0, 3 ]\nexpected output : 3</p>\n"}, {"tags": ["c++", "benchmarking", "timing"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 3, "creation_date": 1566994327, "post_id": 57691672, "comment_id": 101828444, "body": "In short, the variation is probably because of your approach of measuring timing and capturing results.  Your loop is doing time checks - including as part of the loop condition - and  pushing values into a vector (which does dynamic memory allocation) on every iteration.    Accesses of a clock to check timing will have jitter unless your code is being executed on a hard real time platform.   Dynamic memory allocation and deallocation (which will happen eventually if enough elements are pushed to a vector) is also non-deterministic on most systems, so the time taken will vary."}, {"owner": {"reputation": 911, "user_id": 2788450, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Cw1q0.jpg?s=128&g=1", "display_name": "Jonas Greitemann", "link": "https://stackoverflow.com/users/2788450/jonas-greitemann"}, "edited": false, "score": 1, "creation_date": 1566994826, "post_id": 57691672, "comment_id": 101828737, "body": "I don&#39;t think <code>vector</code>&#39;s memory allocations have anything to do with it. They happen outside the measurement interval (given by the two calls to <code>now()</code>)."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1566995167, "post_id": 57691672, "comment_id": 101828939, "body": "@Peter: on modern x86, (like the OP&#39;s Debian system with an Intel CPU), the timesource for <code>now()</code> should be a RDTSC instruction in user-space (with scale factors exported by the kernel via the VDSO page).  There&#39;s still quite a lot of instructions that have to run if you single-step into it, but nowhere near as slow as a system call.  I wouldn&#39;t really expect jitter in the clock itself, just in the code that accesses it.  The TSC ticks at near the reference frequency (not max turbo) so it does have ~0.25ns precision on a 4GHz CPU. <a href=\"//stackoverflow.com/q/13772567\">related</a>"}, {"owner": {"reputation": 476, "user_id": 11500265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249c8bee3df73f631b724e416b6fee75?s=128&d=identicon&r=PG&f=1", "display_name": "Olaf", "link": "https://stackoverflow.com/users/11500265/olaf"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1566995238, "post_id": 57691672, "comment_id": 101828990, "body": "@Peter Yes, I kept only the function between the measuring intervals <code>a</code> and <code>b</code>. The other timing code just limits the total runtime to 4 seconds."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1566995321, "post_id": 57691672, "comment_id": 101829042, "body": "And yes @Olaf: spikes are totally expected because of interrupts.  Even &quot;hard realtime&quot; doesn&#39;t mean dependable timing down to the clock-cycle.  It just puts a cap on worst-case latency.  50 us still sounds reasonable for most hard-realtime systems."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 911, "user_id": 2788450, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Cw1q0.jpg?s=128&g=1", "display_name": "Jonas Greitemann", "link": "https://stackoverflow.com/users/2788450/jonas-greitemann"}, "edited": false, "score": 1, "creation_date": 1566995891, "post_id": 57691672, "comment_id": 101829376, "body": "@Jonas: a system call to allocate new memory may push this loop and/or the <code>now()</code> function out of uop cache and even L1-instruction cache, and maybe the iTLB.  And also (with Spectre mitigation) make branch-prediction cold.   Although you&#39;d expect most of the cost to be before the <code>rdtsc</code> in the start-the-clock <code>now()</code>, i.e. outside the timed interval."}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1566994801, "post_id": 57692187, "comment_id": 101828723, "body": "More importantly, out-of-order execution can overlap one FP add with the timing overhead.  <b>The <code>return x*y</code> result is also never used, so probably optimized away after <code>func</code> inlines into the timing loop</b>, or at least hoisted out of the loop.  We literally can&#39;t tell from looking at the timing results!  Also the inputs are compile-time constants, so there&#39;s no need to eval it at runtime."}, {"owner": {"reputation": 911, "user_id": 2788450, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Cw1q0.jpg?s=128&g=1", "display_name": "Jonas Greitemann", "link": "https://stackoverflow.com/users/2788450/jonas-greitemann"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1566995131, "post_id": 57692187, "comment_id": 101828922, "body": "@PeterCordes Two very good points. Optimizations should probably be turned off to avoid this. (Or look at the assembly to check work is actually being done). Out-of-order execution should be less of an issue once multiple operations are executed in a loop before taking the time."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1566995492, "post_id": 57692187, "comment_id": 101829148, "body": "No, disabling optimizations would turn this into a microbenchmark of call/ret through a nest of C++ functions, and maybe store-forwarding latency.  Benchmarking with optimizations disabled is useless.  Typically you need to use inline asm to force the compiler to materialize a value in a register repeatedly in a loop, and/or forget what it knows about a variable&#39;s value to make it redo a calculation instead of hoisting it.  e.g. see <a href=\"//stackoverflow.com/q/33975479\">&quot;Escape&quot; and &quot;Clobber&quot; equivalent in MSVC</a> (not the MSVC part, just the part in the question showing useful GNU C inline asm)."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1566995614, "post_id": 57692187, "comment_id": 101829221, "body": "And yes usually you should put stuff in a repeat loop.  You have to choose whether you want to measure throughput or latency (by making the operations dependent on the previous or not).  <b>Microbenchmarking is <i>hard</i></b>, and for this simple an operation doesn&#39;t make any sense at the C++ level, only when you also consider the asm for the specific CPU it will run on."}], "tags": [], "owner": {"reputation": 911, "user_id": 2788450, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Cw1q0.jpg?s=128&g=1", "display_name": "Jonas Greitemann", "link": "https://stackoverflow.com/users/2788450/jonas-greitemann"}, "is_accepted": false, "score": 7, "last_activity_date": 1566994453, "creation_date": 1566994453, "answer_id": 57692187, "question_id": 57691672, "link": "https://stackoverflow.com/questions/57691672/why-is-there-such-a-high-variability-in-runtime-for-adding-two-values/57692187#57692187", "title": "Why is there such a high variability in runtime for adding two values?", "body": "<p>Modern CPUs easily perform on the order of several 10^9 FLOPS, i.e. the expected time for one operation is below 1 ns. This, however refers to peak-performance. For most real-world workloads, the performance is going to be much less, owing to memory and cache effects.</p>\n\n<p>The problem with your benchmark is that <strong>you are timing individual operations</strong>. The overhead of getting the time points <code>a</code> and <code>b</code> likely simply exceeds the time you are actually trying to measure. Additionally, even <code>std::chrono::high_resolution_clock</code> is not going to give you picosecond accuracy (though that's in principle implementation and hardware depended). The obvious fix is to perform the operation <code>N</code> times, time that and then divide the total time by <code>N</code>. At some point, you'll see that your results become consistent. (Feel free to post your results.)</p>\n\n<p>TL;DR: You are trying to time a lightning bolt with a pocket watch.</p>\n"}, {"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 3, "last_activity_date": 1566996663, "creation_date": 1566996663, "answer_id": 57692879, "question_id": 57691672, "link": "https://stackoverflow.com/questions/57691672/why-is-there-such-a-high-variability-in-runtime-for-adding-two-values/57692879#57692879", "title": "Why is there such a high variability in runtime for adding two values?", "body": "<p>TL:DR: Your entire approach is too simplistic to tell you anything useful.  Timing overhead would dominate even if your multiply wasn't optimized away.</p>\n\n<hr>\n\n<p><strong>Microbenchmarking is non-trivial even in hand-written asm.</strong>  It's impossible in C++ if you don't understand how your C++ compiles to asm for your target platform, for an operation as simple / cheap as <code>x * y</code>.</p>\n\n<p>You aren't using the result, so maybe you were trying to measure throughput (instead of latency).  But with only one multiply inside the timed interval, there's no chance for superscalar / pipelined execution to happen.</p>\n\n<p>Even more fundamentally, <strong>you don't use the result</strong> so there's no need for the compiler to even compute it at all.  And even if you did, after inlining from that C++ header <strong>the operands are compile-time constants, so the compiler will do it once at compile time</strong> instead of with a <code>mulsd</code> instruction at run time.  And even if you made the args in <code>main</code> come from <code>atof(argv[1])</code> or something, the compiler could hoist the computation out of the loop.</p>\n\n<p>Any <em>one</em> of those 3 microbenchmark pitfalls would lead to <strong>timing an empty interval</strong> with no work between the two functions, other than saving the first <code>now()</code> result to different registers.  You have all 3 problems.</p>\n\n<p>You're literally timing an empty interval and still getting this much jitter because of the occasional interrupt, and the relatively high overhead of the library function wrapped around <code>clock_gettime</code> which ultimately runs an <code>rdtsc</code> instruction and scales it using values exported by the kernel.  Fortunately it can do this in user-space, without actually using a <code>syscall</code> instruction to enter the kernel.  (The Linux kernel exports code + data in the VDSO pages.)</p>\n\n<p>Directly using <code>rdtsc</code> inside a tight loop does give fairly repeatable timings, but still has pretty high overhead relative to <code>mulsd</code>.  (<a href=\"https://stackoverflow.com/questions/13772567/how-to-get-the-cpu-cycle-count-in-x86-64-from-c\">How to get the CPU cycle count in x86_64 from C++?</a>).</p>\n\n<p>Your mental model of execution cost is probably wrong at this level of detail.  You can't just time individual operations and then add up their costs.  Superscalar pipelined out-of-order execution means you have to consider throughput vs. latency, and lengths of dependency chains.  (And also front-end bottlenecks vs. the throughput of any one kind of instruction, or execution port).</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/9957004/modern-x86-cost-model\">Modern x86 cost model</a></li>\n<li><a href=\"https://stackoverflow.com/questions/692718/how-many-cpu-cycles-are-needed-for-each-assembly-instruction/44980899#44980899\">How many CPU cycles are needed for each assembly instruction?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/51607391/what-considerations-go-into-predicting-latency-for-operations-on-modern-supersca\">What considerations go into predicting latency for operations on modern superscalar processors and how can I calculate them by hand?</a></li>\n</ul>\n\n<hr>\n\n<p><strong>And no, disabling optimizations is not useful.</strong>  That would turn this into a microbenchmark of call/ret through a nest of C++ functions, and maybe store-forwarding latency.</p>\n\n<p>Benchmarking with optimizations disabled is useless.  Typically you need to use inline asm to force the compiler to materialize a value in a register repeatedly in a loop, and/or forget what it knows about a variable's value to make it redo a calculation instead of hoisting it.  e.g. see <a href=\"//stackoverflow.com/q/33975479\">\"Escape\" and \"Clobber\" equivalent in MSVC</a> (not the MSVC part, just the part in the question showing useful GNU C inline asm).</p>\n"}], "owner": {"reputation": 476, "user_id": 11500265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249c8bee3df73f631b724e416b6fee75?s=128&d=identicon&r=PG&f=1", "display_name": "Olaf", "link": "https://stackoverflow.com/users/11500265/olaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1566996663, "creation_date": 1566992721, "question_id": 57691672, "link": "https://stackoverflow.com/questions/57691672/why-is-there-such-a-high-variability-in-runtime-for-adding-two-values", "title": "Why is there such a high variability in runtime for adding two values?", "body": "<p>I wrote a timing function that records the run time of a function and calculates the mean and the standard deviation over multiple runs. I was surprised to find very high standard deviations, even for seemingly simple tasks such as adding two doubles.\nI analysed the data in python (see the plots). The c++ output was <code>19.6171 ns +/- 21.9653ns (82799807 runs)</code> when compiled with:  </p>\n\n<pre><code>gcc version 8.3.0 (Debian 8.3.0-19)\n/usr/bin/c++ -O3 -DNDEBUG -std=gnu++17\n</code></pre>\n\n<p>The whole test was done on my personal computer, which was not idle but running a DE, a browser, my IDE and other processes. There was free RAM available during the test though. My double core CPU with HT was idling below 10% usage.<br>\nIs a spike from an average value of 20 ns to 50 \u00b5s to be expected for this situation?</p>\n\n<p><strong>Plot of run times</strong><br>\nThis is the content of <code>std::vector&lt;double&gt; run_times</code>. I don't see any pattern.\n<a href=\"https://i.stack.imgur.com/0ExHb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0ExHb.png\" alt=\"Plot of runtimes over\"></a></p>\n\n<p><strong>Histogram of run times</strong><br>\nNote log y axis (number of samples in this bin).\n<a href=\"https://i.stack.imgur.com/f72VW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f72VW.png\" alt=\"Histogram of run times\"></a></p>\n\n<p><strong>timing.h</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;cstdint&gt;\n#include &lt;ostream&gt;\n#include &lt;cmath&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;chrono&gt;\n#include &lt;numeric&gt;\n#include &lt;fstream&gt;\n\n\nstruct TimingResults{\n    // all time results are in nanoseconds\n    double mean;\n    double standard_deviation;\n    uint64_t number_of_runs;\n};\n\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const TimingResults&amp; results);\n\n\ntemplate &lt;typename InputIterator&gt;\nstd::pair&lt;typename InputIterator::value_type, typename InputIterator::value_type&gt; \ncalculate_mean_and_standard_deviation(InputIterator first, InputIterator last){\n    double mean = std::accumulate(first, last, 0.) / std::distance(first, last);\n    double sum = 0;\n    std::for_each(first, last, [&amp;](double x){sum += (x - mean) * (x - mean);});\n    return {mean, std::sqrt(sum / (std::distance(first, last) - 1))};\n}\n\n\ntemplate&lt;uint64_t RunTimeMilliSeconds = 4000, typename F, typename... Args&gt;\nTimingResults measure_runtime(F func, Args&amp;&amp;... args){\n    std::vector&lt;double&gt; runtimes;\n    std::chrono::system_clock::time_point b;\n    auto start_time = std::chrono::high_resolution_clock::now();\n    do {\n        auto a = std::chrono::high_resolution_clock::now();\n        func(std::forward&lt;Args&gt;(args)...);\n        b = std::chrono::high_resolution_clock::now();\n        runtimes.push_back(std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;(b - a).count());\n    } while (std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(b-start_time).count() &lt;= RunTimeMilliSeconds);\n    auto [mean, std_deviation] = calculate_mean_and_standard_deviation(runtimes.begin(), runtimes.end());\n    return {mean, std_deviation, runtimes.size()};\n}\n</code></pre>\n\n<p><strong>timing.cpp</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include \"timing.h\"\n\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const TimingResults&amp; results){\n    return os &lt;&lt; results.mean &lt;&lt; \" ns\" &lt;&lt; \" +/- \" &lt;&lt; results.standard_deviation &lt;&lt; \"ns (\"\n    &lt;&lt; results.number_of_runs &lt;&lt; \" runs)\";\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"src/timing/timing.h\"\n#include &lt;iostream&gt;\n\n\nint main(){\n    auto res = measure_runtime([](double x, double y){return x * y;}, 6.9, 9.6);\n    std::cout &lt;&lt; res;\n}\n</code></pre>\n"}, {"tags": ["c++", "struct", "initialization", "new-operator"], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1566992771, "last_edit_date": 1566992771, "creation_date": 1566992333, "answer_id": 57691549, "question_id": 57691485, "link": "https://stackoverflow.com/questions/57691485/c-structs-difference-between-new-type-and-new-type/57691549#57691549", "title": "C++ structs, difference between new type; and new type()", "body": "<p>According to the C++ Standard (11.6 Initializers)</p>\n\n<blockquote>\n  <p>11 An object whose initializer is an empty set of parentheses, i.e.,\n  (), shall be value-initialized.</p>\n</blockquote>\n\n<p>It means that data members of the structure of scalar types are zero-initialized in this statement</p>\n\n<pre><code>point *p = new point();\n</code></pre>\n\n<p>In this case</p>\n\n<pre><code>point *p = new point;\n</code></pre>\n\n<p>the members of the structure are default initialized that is (as the class has no  user-defined constructor and the data members do not have initializers in the class definition) have indeterminate values.</p>\n\n<p>Pay attention to that you could define the structure the following way</p>\n\n<pre><code>typedef struct point {\n    double x = 0, y = 0;\n};\n</code></pre>\n\n<p>In this case the result of the both statements above will be the same.</p>\n"}], "owner": {"reputation": 761, "user_id": 3990094, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8f85dae089a6c11339f051c01387f9f3?s=128&d=identicon&r=PG&f=1", "display_name": "knowledge", "link": "https://stackoverflow.com/users/3990094/knowledge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1566992880, "answer_count": 1, "score": 3, "last_activity_date": 1566992771, "creation_date": 1566992115, "last_edit_date": 1566992490, "question_id": 57691485, "link": "https://stackoverflow.com/questions/57691485/c-structs-difference-between-new-type-and-new-type", "closed_reason": "Duplicate", "title": "C++ structs, difference between new type; and new type()", "body": "<p>for example I have in C++ a struct like</p>\n\n<pre><code>typedef struct point {\n    double x, y;\n};\n</code></pre>\n\n<p>I can use</p>\n\n<pre><code>point *p = new point;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>point *p = new point();\n</code></pre>\n\n<p>To create a point dynamically. </p>\n\n<p>Whats the difference? In the second case x and y are initialized implicit to zero. Why not in the first case?</p>\n"}, {"tags": ["c++", "simd", "biginteger", "avx", "extended-precision"], "comments": [{"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1566994711, "post_id": 57691466, "comment_id": 101828667, "body": "Does it need to be with SIMD? The scalar version could be done in just 3 multiplies (one of them a 64x64-&gt;128 mul) and two additions, AVX is at a disadvantage E: OK I saw you have 256 bits output so it costs a little more, but still."}, {"owner": {"reputation": 51, "user_id": 6718862, "user_type": "registered", "profile_image": "https://graph.facebook.com/1785570891701096/picture?type=large", "display_name": "Ivan Kamynin", "link": "https://stackoverflow.com/users/6718862/ivan-kamynin"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1566996577, "post_id": 57691466, "comment_id": 101829792, "body": "Well i have only avx 1.0,not avx2 instructions.  64x64 is still 3 mul?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1566996952, "post_id": 57691466, "comment_id": 101830031, "body": "Are you running in 32-bit mode?  x86-64 has <code>mul r64</code> which produces a 128-bit output in rdx:rax.  IIRC, gmplib doesn&#39;t use SIMD for extended-precision multiplication.  Intel introduced BMI2 <code>mulx</code> and ADX <code>adcx&#47;adox</code> to speed extended-precision multiply by running two dep chains of additions.  That probably doesn&#39;t help you in C++, unless you can use Intel&#39;s compiler intrinsics for adcx/adox."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1566997250, "post_id": 57691466, "comment_id": 101830190, "body": "In GNU C++ you can use 64x64 =&gt; 128 bit multiply via <code>unsigned __int128</code>, or in MSVC with an intrinsic.  (Only on 64-bit targets, though.)  And no, compilers won&#39;t find this optimization for you."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1566997935, "post_id": 57691466, "comment_id": 101830606, "body": "The linked duplicate explains why scalar is a win.  (Although you do seem to be gimping yourself by not even using 64x64 =&gt; 128-bit hardware support."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1566998059, "post_id": 57691466, "comment_id": 101830687, "body": "BTW, <code>lddqu</code> is basically obsolete, there&#39;s no reason to use it anymore.  It just unnecessarily makes your code require SSE3 to compile."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1567111779, "post_id": 57691466, "comment_id": 101876831, "body": "Turns out the real problem with this code was the microbenchmark itself, which let the pure C version CSE away much of the work, as well as gimping the SIMD version with store-forwarding stalls."}], "owner": {"reputation": 51, "user_id": 6718862, "user_type": "registered", "profile_image": "https://graph.facebook.com/1785570891701096/picture?type=large", "display_name": "Ivan Kamynin", "link": "https://stackoverflow.com/users/6718862/ivan-kamynin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "closed_date": 1566997890, "answer_count": 0, "score": 1, "last_activity_date": 1567111708, "creation_date": 1566992057, "last_edit_date": 1567011905, "question_id": 57691466, "link": "https://stackoverflow.com/questions/57691466/optimize-128x128-to-256-bit-multiply-for-intel-avxsimd", "closed_reason": "Duplicate", "title": "Optimize 128x128 to 256-bit multiply for Intel AVX[SIMD]", "body": "<p>I'm trying to implement multiplication of 128 unsigned int on two 64 unsigned integers by Intel AVX. The problem is that non vectorised version works faster than hand-vectorised version.</p>\n\n<p>Here is my test benchmark. On my laptop i got next results:</p>\n\n<ul>\n<li>AVX    - 5200</li>\n<li>NonAVX - 1600</li>\n</ul>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n\n#include &lt;emmintrin.h&gt;\n#include &lt;immintrin.h&gt;\n\nconstexpr uint32_t N        = 28u;\nconstexpr uint32_t X        = 64u;\nconstexpr uint32_t Y        = 32u;\nconstexpr uint32_t Z        = 128u;\n\nconstexpr uint32_t LOW[4]   = { 4294967295u, 0u, 4294967295u, 0u };\n__m128i L                   = _mm_lddqu_si128( reinterpret_cast&lt; __m128i const* &gt;( LOW ) );\n\ntypedef union\n{\n    __m128i     x;\n    uint32_t    u[4];\n} \n__u128i;\n\nstatic inline __attribute__((always_inline)) void multiply128x128( const uint32_t ABCD[4], const uint32_t EFGH[4], uint32_t OUT[2][4] ) noexcept\n{\n\n    __m128i IN = _mm_lddqu_si128( reinterpret_cast&lt; __m128i const* &gt;( EFGH ) );\n\n    __m128i A  = _mm_set1_epi32( ABCD[0] );\n    __m128i B  = _mm_set1_epi32( ABCD[1] );\n    __m128i C  = _mm_set1_epi32( ABCD[2] );\n    __m128i D  = _mm_set1_epi32( ABCD[3] );\n\n    __m128i ED = _mm_mul_epu32( IN, D );\n    __m128i EC = _mm_mul_epu32( IN, C );\n    __m128i EB = _mm_mul_epu32( IN, B );\n    __m128i EA = _mm_mul_epu32( IN, A );\n\n    IN = _mm_srli_epi64( IN, 32 );\n\n    __m128i FD = _mm_mul_epu32( IN, D );\n    __m128i FC = _mm_mul_epu32( IN, C );\n    __m128i FB = _mm_mul_epu32( IN, B );\n    __m128i FA = _mm_mul_epu32( IN, A );\n\n    __m128i FD_H = _mm_srli_epi64( FD, 32 );\n    __m128i FD_L = _mm_and_si128 ( L, FD );\n\n    __m128i FC_H = _mm_srli_epi64( FC, 32 );\n    __m128i FC_L = _mm_and_si128 ( L, FC );\n\n    __m128i FB_H = _mm_srli_epi64( FB, 32 );\n    __m128i FB_L = _mm_and_si128 ( L, FB );\n\n    __m128i FA_H = _mm_srli_epi64( FA, 32 );\n    __m128i FA_L = _mm_and_si128 ( L, FA );\n\n    __m128i ED_H = _mm_srli_epi64( ED, 32 );\n    __m128i ED_L = _mm_and_si128 ( L, ED );\n\n    __m128i EC_H = _mm_srli_epi64( EC, 32 );\n    __m128i EC_L = _mm_and_si128 ( L, EC );\n\n    __m128i EB_H = _mm_srli_epi64( EB, 32 );\n    __m128i EB_L = _mm_and_si128 ( L, EB );\n\n    __m128i EA_H = _mm_srli_epi64( EA, 32 );\n    __m128i EA_L = _mm_and_si128 ( L, EA );\n\n    __m128i SUM_FC_L_FD_H = _mm_add_epi64( FC_L, FD_H );\n    __m128i SUM_FB_L_FC_H = _mm_add_epi64( FB_L, FC_H );\n    __m128i SUM_FA_L_FB_H = _mm_add_epi64( FA_L, FB_H );\n\n    __m128i SUM_EC_L_ED_H = _mm_add_epi64( EC_L, ED_H );\n    __m128i SUM_EB_L_EC_H = _mm_add_epi64( EB_L, EC_H );\n    __m128i SUM_EA_L_EB_H = _mm_add_epi64( EA_L, EB_H );\n\n    __m128i SUM_FC_L_FD_H_ED_L           = _mm_add_epi64( SUM_FC_L_FD_H, ED_L );\n    __m128i SUM_FB_L_FC_H_EC_L_ED_H      = _mm_add_epi64( SUM_FB_L_FC_H, SUM_EC_L_ED_H );\n    __m128i SUM_FA_L_FB_H_EB_L_EC_H      = _mm_add_epi64( SUM_FA_L_FB_H, SUM_EB_L_EC_H );\n    __m128i SUM_FA_H_EA_L_EB_H           = _mm_add_epi64( FA_H, SUM_EA_L_EB_H );\n\n    __u128i SUM_FC_L_FD_H_ED_L_L;\n            SUM_FC_L_FD_H_ED_L_L.x       = _mm_srli_epi64( SUM_FC_L_FD_H_ED_L, 32 );\n            SUM_FC_L_FD_H_ED_L_L.x       = _mm_add_epi64 ( SUM_FC_L_FD_H_ED_L_L.x, SUM_FB_L_FC_H_EC_L_ED_H );\n\n    __u128i SUM_FC_L_FD_H_ED_L_L_L;\n            SUM_FC_L_FD_H_ED_L_L_L.x     = _mm_srli_epi64( SUM_FC_L_FD_H_ED_L_L.x, 32 );\n            SUM_FC_L_FD_H_ED_L_L_L.x     = _mm_add_epi64 ( SUM_FC_L_FD_H_ED_L_L_L.x, SUM_FA_L_FB_H_EB_L_EC_H );\n\n    __u128i SUM_FC_L_FD_H_ED_L_L_L_L;\n            SUM_FC_L_FD_H_ED_L_L_L_L.x   = _mm_srli_epi64( SUM_FC_L_FD_H_ED_L_L_L.x, 32 );\n            SUM_FC_L_FD_H_ED_L_L_L_L.x   = _mm_add_epi64 ( SUM_FC_L_FD_H_ED_L_L_L_L.x, SUM_FA_H_EA_L_EB_H );\n\n    __u128i SUM_FC_L_FD_H_ED_L_L_L_L_L;\n            SUM_FC_L_FD_H_ED_L_L_L_L_L.x = _mm_srli_epi64( SUM_FC_L_FD_H_ED_L_L_L_L.x, 32 );\n            SUM_FC_L_FD_H_ED_L_L_L_L_L.x = _mm_add_epi64 ( SUM_FC_L_FD_H_ED_L_L_L_L_L.x, EA_H );\n\n    OUT[0][0] = SUM_FC_L_FD_H_ED_L_L_L_L_L.u[0];\n    OUT[0][1] = SUM_FC_L_FD_H_ED_L_L_L_L.u[0];\n    OUT[0][2] = SUM_FC_L_FD_H_ED_L_L_L.u[0];\n    OUT[0][3] = SUM_FC_L_FD_H_ED_L_L.u[0];\n\n    OUT[1][0] = SUM_FC_L_FD_H_ED_L_L_L_L_L.u[2];\n    OUT[1][1] = SUM_FC_L_FD_H_ED_L_L_L_L.u[2];\n    OUT[1][2] = SUM_FC_L_FD_H_ED_L_L_L.u[2];\n    OUT[1][3] = SUM_FC_L_FD_H_ED_L_L.u[2];\n}\n\nstatic inline void multiply128x128_1( const uint32_t ABCD[4], const uint32_t EFGH[4], uint32_t OUT[2][4] ) noexcept\n{\n    uint64_t ED = static_cast&lt;uint64_t&gt;( ABCD[3] ) * static_cast&lt;uint64_t&gt;( EFGH[0] );\n    uint64_t EC = static_cast&lt;uint64_t&gt;( ABCD[2] ) * static_cast&lt;uint64_t&gt;( EFGH[0] );\n    uint64_t EB = static_cast&lt;uint64_t&gt;( ABCD[1] ) * static_cast&lt;uint64_t&gt;( EFGH[0] );\n    uint64_t EA = static_cast&lt;uint64_t&gt;( ABCD[0] ) * static_cast&lt;uint64_t&gt;( EFGH[0] );\n\n    uint64_t FD = static_cast&lt;uint64_t&gt;( ABCD[3] ) * static_cast&lt;uint64_t&gt;( EFGH[1] );\n    uint64_t FC = static_cast&lt;uint64_t&gt;( ABCD[2] ) * static_cast&lt;uint64_t&gt;( EFGH[1] );\n    uint64_t FB = static_cast&lt;uint64_t&gt;( ABCD[1] ) * static_cast&lt;uint64_t&gt;( EFGH[1] );\n    uint64_t FA = static_cast&lt;uint64_t&gt;( ABCD[0] ) * static_cast&lt;uint64_t&gt;( EFGH[1] );\n\n    uint64_t SUM_FC_L_FD_H = ( FC &amp; 0xFFFFFFFF ) + ( FD &gt;&gt; 32u );\n    uint64_t SUM_FB_L_FC_H = ( FB &amp; 0xFFFFFFFF ) + ( FC &gt;&gt; 32u );\n    uint64_t SUM_FA_L_FB_H = ( FA &amp; 0xFFFFFFFF ) + ( FB &gt;&gt; 32u );\n\n    uint64_t SUM_EC_L_ED_H = ( EC &amp; 0xFFFFFFFF ) + ( ED &gt;&gt; 32u );\n    uint64_t SUM_EB_L_EC_H = ( EB &amp; 0xFFFFFFFF ) + ( EC &gt;&gt; 32u );\n    uint64_t SUM_EA_L_EB_H = ( EA &amp; 0xFFFFFFFF ) + ( EB &gt;&gt; 32u );\n\n    uint64_t SUM_FC_L_FD_H_ED_L         = SUM_FC_L_FD_H + ( ED &amp; 0xFFFFFFFF );\n    uint64_t SUM_FB_L_FC_H_EC_L_ED_H    = SUM_FB_L_FC_H + SUM_EC_L_ED_H;\n    uint64_t SUM_FA_L_FB_H_EB_L_EC_H    = SUM_FA_L_FB_H + SUM_EB_L_EC_H;\n    uint64_t SUM_FA_H_EA_L_EB_H         = SUM_EA_L_EB_H + ( FA &gt;&gt; 32u );\n\n    uint64_t SUM_FC_L_FD_H_ED_L_L       = ( SUM_FC_L_FD_H_ED_L       &gt;&gt; 32u ) + SUM_FB_L_FC_H_EC_L_ED_H;\n    uint64_t SUM_FC_L_FD_H_ED_L_L_L     = ( SUM_FC_L_FD_H_ED_L_L     &gt;&gt; 32u ) + SUM_FA_L_FB_H_EB_L_EC_H;\n    uint64_t SUM_FC_L_FD_H_ED_L_L_L_L   = ( SUM_FC_L_FD_H_ED_L_L_L   &gt;&gt; 32u ) + SUM_FA_H_EA_L_EB_H;\n    uint64_t SUM_FC_L_FD_H_ED_L_L_L_L_L = ( SUM_FC_L_FD_H_ED_L_L_L_L &gt;&gt; 32u ) + ( EA &gt;&gt; 32u );\n\n    OUT[0][0] = SUM_FC_L_FD_H_ED_L_L_L_L_L;\n    OUT[0][1] = SUM_FC_L_FD_H_ED_L_L_L_L;\n    OUT[0][2] = SUM_FC_L_FD_H_ED_L_L_L;\n    OUT[0][3] = SUM_FC_L_FD_H_ED_L_L;\n\n\n    uint64_t GD = static_cast&lt;uint64_t&gt;( ABCD[3] ) * static_cast&lt;uint64_t&gt;( EFGH[2] );\n    uint64_t GC = static_cast&lt;uint64_t&gt;( ABCD[2] ) * static_cast&lt;uint64_t&gt;( EFGH[2] );\n    uint64_t GB = static_cast&lt;uint64_t&gt;( ABCD[1] ) * static_cast&lt;uint64_t&gt;( EFGH[2] );\n    uint64_t GA = static_cast&lt;uint64_t&gt;( ABCD[0] ) * static_cast&lt;uint64_t&gt;( EFGH[2] );\n\n    uint64_t HD = static_cast&lt;uint64_t&gt;( ABCD[3] ) * static_cast&lt;uint64_t&gt;( EFGH[3] );\n    uint64_t HC = static_cast&lt;uint64_t&gt;( ABCD[2] ) * static_cast&lt;uint64_t&gt;( EFGH[3] );\n    uint64_t HB = static_cast&lt;uint64_t&gt;( ABCD[1] ) * static_cast&lt;uint64_t&gt;( EFGH[3] );\n    uint64_t HA = static_cast&lt;uint64_t&gt;( ABCD[0] ) * static_cast&lt;uint64_t&gt;( EFGH[3] );\n\n    uint64_t SUM_HC_L_HD_H = ( HC &amp; 0xFFFFFFFF ) + ( HD &gt;&gt; 32u );\n    uint64_t SUM_HB_L_HC_H = ( HB &amp; 0xFFFFFFFF ) + ( HC &gt;&gt; 32u );\n    uint64_t SUM_HA_L_HB_H = ( HA &amp; 0xFFFFFFFF ) + ( HB &gt;&gt; 32u );\n\n    uint64_t SUM_GC_L_GD_H = ( GC &amp; 0xFFFFFFFF ) + ( GD &gt;&gt; 32u );\n    uint64_t SUM_GB_L_GC_H = ( GB &amp; 0xFFFFFFFF ) + ( GC &gt;&gt; 32u );\n    uint64_t SUM_GA_L_GB_H = ( GA &amp; 0xFFFFFFFF ) + ( GB &gt;&gt; 32u );\n\n    uint64_t SUM_HC_L_HD_H_GD_L      = SUM_HC_L_HD_H + ( GD &amp; 0xFFFFFFFF );\n    uint64_t SUM_HB_L_HC_H_GC_L_GD_H = SUM_HB_L_HC_H + SUM_GC_L_GD_H;\n    uint64_t SUM_HA_L_HB_H_GB_L_GC_H = SUM_HA_L_HB_H + SUM_GB_L_GC_H;\n    uint64_t SUM_HA_H_GA_L_GB_H      = SUM_GA_L_GB_H + ( HA &gt;&gt; 32u );\n\n    uint64_t SUM_HC_L_HD_H_GD_L_L       = ( SUM_HC_L_HD_H_GD_L       &gt;&gt; 32u ) + SUM_HB_L_HC_H_GC_L_GD_H;\n    uint64_t SUM_HC_L_HD_H_GD_L_L_L     = ( SUM_HC_L_HD_H_GD_L_L     &gt;&gt; 32u ) + SUM_HA_L_HB_H_GB_L_GC_H;\n    uint64_t SUM_HC_L_HD_H_GD_L_L_L_L   = ( SUM_HC_L_HD_H_GD_L_L_L   &gt;&gt; 32u ) + SUM_HA_H_GA_L_GB_H;\n    uint64_t SUM_HC_L_HD_H_GD_L_L_L_L_L = ( SUM_HC_L_HD_H_GD_L_L_L_L &gt;&gt; 32u ) + ( GA &gt;&gt; 32u );\n\n    OUT[1][0] = SUM_HC_L_HD_H_GD_L_L_L_L_L;\n    OUT[1][1] = SUM_HC_L_HD_H_GD_L_L_L_L;\n    OUT[1][2] = SUM_HC_L_HD_H_GD_L_L_L;\n    OUT[1][3] = SUM_HC_L_HD_H_GD_L_L;\n}\n\nint main()\n{\n    uint32_t OUT[2][4];\n\n    uint32_t ABCD[4] = { 4294967295u, 4294967295u, 4294967295u, 4294967295u };\n    uint32_t EFGH[4] = { 4294967295u, 4294967295u, 4294967295u, 4294967295u };\n\n    multiply128x128_1( ABCD, EFGH, OUT );\n\n    uint64_t S_1 = 0u;\n    uint64_t S_2 = 0u;\n    uint64_t S_3 = 0u;\n    uint64_t S_4 = 0u;\n    uint64_t S_5 = 0u;\n\n    auto start_1 = std::chrono::high_resolution_clock::now();\n\n    for ( uint32_t i = 0; i &lt; ( 1 &lt;&lt; N ); ++i )\n    {\n        EFGH[0] = i;\n        EFGH[1] = i + X;\n        EFGH[2] = i + Y;\n        EFGH[3] = i + Z;\n\n        ABCD[0] = i;\n        ABCD[1] = i + X;\n        ABCD[2] = i + Y;\n        ABCD[3] = i + Z;\n\n        multiply128x128( ABCD, EFGH, OUT );\n\n        S_1 += OUT[0][0] + OUT[0][1] + OUT[0][2] + OUT[0][3];\n        S_4 += OUT[1][0] + OUT[1][1] + OUT[1][2] + OUT[1][3];\n    }\n\n    auto stop_1 = std::chrono::high_resolution_clock::now();\n    std::cout &lt;&lt; \"Test A: \" &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;( stop_1 - start_1 ).count() &lt;&lt; '\\n';\n\n    auto start_3 = std::chrono::high_resolution_clock::now();\n\n    for ( uint32_t i = 0; i &lt; ( 1 &lt;&lt; N ); ++i )\n    {\n        EFGH[0] = i;\n        EFGH[1] = i + X;\n        EFGH[2] = i + Y;\n        EFGH[3] = i + Z;\n\n        ABCD[0] = i;\n        ABCD[1] = i + X;\n        ABCD[2] = i + Y;\n        ABCD[3] = i + Z;\n\n        multiply128x128_1( ABCD, EFGH, OUT );\n\n        S_3 += OUT[0][0] + OUT[0][1] + OUT[0][2] + OUT[0][3];\n        S_5 += OUT[1][0] + OUT[1][1] + OUT[1][2] + OUT[1][3];\n    }\n\n    auto stop_3 = std::chrono::high_resolution_clock::now();\n    std::cout &lt;&lt; \"Test C: \" &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;( stop_3 - start_3 ).count() &lt;&lt; '\\n';\n\n    std::cout &lt;&lt; S_1 &lt;&lt; \" \" &lt;&lt;  S_3 &lt;&lt; \" \" &lt;&lt; S_4 &lt;&lt; \" \" &lt;&lt;  S_5 &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>How can i optimise my SIMD - AVX code?</p>\n"}, {"tags": ["c++", "boost", "network-programming", "boost-asio"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1566991910, "post_id": 57691315, "comment_id": 101827075, "body": "This is more of a design issue and less of a code issue. Since the requirements for the design includes the ability of clients to communicate with each other, I suggest your design your &quot;client&quot; structure to be able to handle some kind of &quot;send message to this client&quot; functionality. To broadcast to all clients then all you need to to in the implementation is to iterate over all clients and use this &quot;send message&quot; of each client. For non-broadcast messages, you need some way yo uniquely identify each client."}, {"owner": {"reputation": 94, "user_id": 9535211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b8e7dd65a80e92a17f29bb15698e0f?s=128&d=identicon&r=PG&f=1", "display_name": "Axel.A", "link": "https://stackoverflow.com/users/9535211/axel-a"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566992408, "post_id": 57691315, "comment_id": 101827348, "body": "So, to achieve that, I have to stock all clients in a container and give it to them ? Is it right ?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566992440, "post_id": 57691315, "comment_id": 101827367, "body": "That&#39;s a good start, implementation-wise."}], "answers": [{"comments": [{"owner": {"reputation": 94, "user_id": 9535211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b8e7dd65a80e92a17f29bb15698e0f?s=128&d=identicon&r=PG&f=1", "display_name": "Axel.A", "link": "https://stackoverflow.com/users/9535211/axel-a"}, "edited": false, "score": 0, "creation_date": 1566993775, "post_id": 57691818, "comment_id": 101828147, "body": "Thats what I tought first, but I wasnt sure if it was a good practice or just an easy way to solve the problem. I\u2019ll do that then."}], "tags": [], "owner": {"reputation": 20402, "user_id": 527987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jiIK.png?s=128&g=1", "display_name": "cosmin", "link": "https://stackoverflow.com/users/527987/cosmin"}, "is_accepted": true, "score": 1, "last_activity_date": 1566993247, "creation_date": 1566993247, "answer_id": 57691818, "question_id": 57691315, "link": "https://stackoverflow.com/questions/57691315/boost-asio-tcp-server-architecture/57691818#57691818", "title": "Boost ASIO TCP server architecture", "body": "<p>Here is a good approach:</p>\n\n<ul>\n<li>server keeps socket list for all connected clients</li>\n<li>each client receives an ID (string or int) that can be easily sent across the network</li>\n<li>client with ID \"1\" sends to server a message for client with ID \"2\"</li>\n<li>server receives message from \"1\" and uses the stored socket to send to \"2\"</li>\n</ul>\n\n<p>This way only the server keeps the sockets. And all clients uses IDs to identify one another.</p>\n"}], "owner": {"reputation": 94, "user_id": 9535211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b8e7dd65a80e92a17f29bb15698e0f?s=128&d=identicon&r=PG&f=1", "display_name": "Axel.A", "link": "https://stackoverflow.com/users/9535211/axel-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 57691818, "answer_count": 1, "score": 2, "last_activity_date": 1566993247, "creation_date": 1566991547, "question_id": 57691315, "link": "https://stackoverflow.com/questions/57691315/boost-asio-tcp-server-architecture", "title": "Boost ASIO TCP server architecture", "body": "<p>Im new to either boost and asio (but not to network programming) and Im currently trying to create a TCP server accepting multiple clients.\nThe primary functionnality of the server with clients is simple :</p>\n\n<p>1- Read a Header with a fixed size;</p>\n\n<p>2- Interpret what kind of request it is, read the rest of the packet;</p>\n\n<p>3- Handle request with all the data;</p>\n\n<p>4- Going back to step 1.</p>\n\n<p>This is working with basic requests like : Checking Credentials, Enabling a FTP protocol, etc...\nBut there is a problem :\nOne request demands to communicate with another connected client through the server.\nBut, if I follow the Boost Asio architecture given <a href=\"https://www.boost.org/doc/libs/1_35_0/doc/html/boost_asio/tutorial/tutdaytime3/src.html\" rel=\"nofollow noreferrer\">in this example of the Boost website</a></p>\n\n<p>Or the one in <a href=\"https://www.youtube.com/watch?v=rwOv_tw2eA4\" rel=\"nofollow noreferrer\">this conference</a></p>\n\n<p>I don't actually have access to the other clients socket, they are not stocked, they live thanks to the behaviour of smart pointers.</p>\n\n<p>I indeed have a solution for this problem, its to keep the connected sockets in list, and to share it with every connected socket, so at every time the client can access to other clients socket.\nBut I really think that this is not a good architecure, and that it could be better.</p>\n\n<p>Is there any known way to resolve this problem ?</p>\n"}, {"tags": ["c++", "qt5", "qtreeview", "qtabwidget"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1566991207, "post_id": 57691156, "comment_id": 101826668, "body": "change to <code>View *v = qobject_cast&lt;View*&gt;(ui-&gt;tabs-&gt;widget(index));</code>"}, {"owner": {"reputation": 83, "user_id": 9406412, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1UqdgPemV9A/AAAAAAAAAAI/AAAAAAAAAGM/LmdcksAyi10/photo.jpg?sz=128", "display_name": "GENKY", "link": "https://stackoverflow.com/users/9406412/genky"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1566991808, "post_id": 57691156, "comment_id": 101827018, "body": "@eyllanesc big thank you, but i have error: &quot;error: cannot convert from pointer to base class \u2018QObject\u2019 to pointer to derived class \u2018View\u2019 via virtual base \u2018QTreeView\u2019&quot;"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1566996610, "post_id": 57691156, "comment_id": 101829811, "body": "Your <code>View</code> class must make use of the <a href=\"https://doc.qt.io/qt-5/qobject.html#qobject_cast\" rel=\"nofollow noreferrer\"><code>Q_OBJECT</code></a> macro to enable its use with <code>qobject_cast</code>."}, {"owner": {"reputation": 83, "user_id": 9406412, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1UqdgPemV9A/AAAAAAAAAAI/AAAAAAAAAGM/LmdcksAyi10/photo.jpg?sz=128", "display_name": "GENKY", "link": "https://stackoverflow.com/users/9406412/genky"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1566998506, "post_id": 57691156, "comment_id": 101830976, "body": "@G.M. i don&#39;t public this, but my class alredy have Q_OBJECT"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1566998664, "post_id": 57691156, "comment_id": 101831072, "body": "Then please edit your question to show the <i>real</i> class definition for <code>View</code>.  Do you really inherit virtually from <code>QTreeView</code> as the error message seems to suggest?"}, {"owner": {"reputation": 83, "user_id": 9406412, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1UqdgPemV9A/AAAAAAAAAAI/AAAAAAAAAGM/LmdcksAyi10/photo.jpg?sz=128", "display_name": "GENKY", "link": "https://stackoverflow.com/users/9406412/genky"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1567057752, "post_id": 57691156, "comment_id": 101850363, "body": "@G.M. no i inherit like in example"}], "owner": {"reputation": 83, "user_id": 9406412, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1UqdgPemV9A/AAAAAAAAAAI/AAAAAAAAAGM/LmdcksAyi10/photo.jpg?sz=128", "display_name": "GENKY", "link": "https://stackoverflow.com/users/9406412/genky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1567057970, "creation_date": 1566991055, "last_edit_date": 1567057970, "question_id": 57691156, "link": "https://stackoverflow.com/questions/57691156/how-i-can-get-the-class-that-inherits-qtreeview-from-current-tab-of-qtabwidget", "title": "How i can get the class that inherits QTreeView from current tab of QTabWidget?", "body": "<p>I write a simple fm with tabs. I need put and get the class what inherits QTreeView thats named \"View\", from current tab in QTreeWidget.</p>\n\n<p>i've tried </p>\n\n<pre><code>View v = qobject_cast&lt;View&gt;(ui-&gt;tabs-&gt;widget(index));\n</code></pre>\n\n<p>but this code return </p>\n\n<pre><code>error: use of deleted function \u2018View::View(View&amp;&amp;)\u2019\n</code></pre>\n\n<p>mainwindow.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) : QMainWindow(parent),\n        ui(new Ui::MainWindow)\n{\n  ui-&gt;setupUi(this);\n        View *view = new View;\n        view-&gt;text = \"hey\";\n        ui-&gt;tabs-&gt;addTab(view, \"new\");\n\n        connect(ui-&gt;tabs, &amp;QTabWidget::currentChanged, this, &amp;MainWindow::curChanged);\n}\n\nvoid MainWindow::curChanged(int index)\n{\n        View v = qobject_cast&lt;View&gt;(ui-&gt;tabs-&gt;widget(index));\n        // some code with View\n}\n\n\nMainWindow::~MainWindow()\n{\n  delete ui;\n}\n</code></pre>\n\n<p>mainwindow.h</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include \"view.h\"\n#include &lt;QMainWindow&gt;\n#include &lt;QDebug&gt;\n\nnamespace Ui {\n  class MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n  Q_OBJECT\n\npublic:\n  explicit MainWindow(QWidget *parent = nullptr);\n  ~MainWindow();\n  void curChanged(int index);\n\nprivate slots:\n\nprivate:\n  Ui::MainWindow *ui;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>view.h</p>\n\n<pre><code>#include &lt;QTreeView&gt;\n#include &lt;QFileSystemModel&gt;\n#include &lt;string.h&gt;\n\nclass View : public QTreeView\n{\n        public:\n                std::string text;\n};\n</code></pre>\n\n<p>error message:</p>\n\n<pre><code>g++ -c -pipe -O2 -Wall -W -D_REENTRANT -fPIC -DQT_DEPRECATED_WARNINGS -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -I. -I. -isystem /usr/include/qt5 -isystem /usr/include/qt5/QtWidgets -isystem /usr/include/qt5/QtGui -isystem /usr/include/qt5/QtCore -I. -I. -I/usr/lib64/qt5/mkspecs/linux-g++ -o main.o main.cpp\ng++ -c -pipe -O2 -Wall -W -D_REENTRANT -fPIC -DQT_DEPRECATED_WARNINGS -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -I. -I. -isystem /usr/include/qt5 -isystem /usr/include/qt5/QtWidgets -isystem /usr/include/qt5/QtGui -isystem /usr/include/qt5/QtCore -I. -I. -I/usr/lib64/qt5/mkspecs/linux-g++ -o mainwindow.o mainwindow.cpp\n/usr/lib64/qt5/bin/moc -DQT_DEPRECATED_WARNINGS -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB --include /home/c63/Projects/C++/QT/sof/moc_predefs.h -I/usr/lib64/qt5/mkspecs/linux-g++ -I/home/c63/Projects/C++/QT/sof -I/home/c63/Projects/C++/QT/sof -I/usr/include/qt5 -I/usr/include/qt5/QtWidgets -I/usr/include/qt5/QtGui -I/usr/include/qt5/QtCore -I/usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/include/g++-v8 -I/usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/include/g++-v8/x86_64-pc-linux-gnu -I/usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/include/g++-v8/backward -I/usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/include -I/usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/include-fixed -I/usr/include mainwindow.h -o moc_mainwindow.cpp\ng++ -c -pipe -O2 -Wall -W -D_REENTRANT -fPIC -DQT_DEPRECATED_WARNINGS -DQT_NO_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -I. -I. -isystem /usr/include/qt5 -isystem /usr/include/qt5/QtWidgets -isystem /usr/include/qt5/QtGui -isystem /usr/include/qt5/QtCore -I. -I. -I/usr/lib64/qt5/mkspecs/linux-g++ -o moc_mainwindow.o moc_mainwindow.cpp\ng++ -Wl,-O1 -o sof main.o mainwindow.o moc_mainwindow.o   -lQt5Widgets -lQt5Gui -lQt5Core /usr/lib64/libGLESv2.so -lpthread\n/usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: mainwindow.o: in function `MainWindow::curChanged(int)':\nmainwindow.cpp:(.text+0x2b): undefined reference to `View::staticMetaObject'\n/usr/lib/gcc/x86_64-pc-linux-gnu/8.3.0/../../../../x86_64-pc-linux-gnu/bin/ld: mainwindow.o: in function `MainWindow::MainWindow(QWidget*)':\nmainwindow.cpp:(.text+0x3aa): undefined reference to `vtable for View'\ncollect2: error: ld returned 1 exit status\nmake: *** [Makefile:171: sof] Error 1\n</code></pre>\n"}, {"tags": ["c++", "memory", "visual-studio-2017", "visual-studio-debugging", "postmortem-debugging"], "comments": [{"owner": {"reputation": 1510, "user_id": 5728157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ed0956efcbacb4f24eb25437fdb856b?s=128&d=identicon&r=PG&f=1", "display_name": "andresantacruz", "link": "https://stackoverflow.com/users/5728157/andresantacruz"}, "edited": false, "score": 1, "creation_date": 1566991002, "post_id": 57691123, "comment_id": 101826577, "body": "<code>but it currently doesn&#39;t have symbol paths set up correctly</code> why don&#39;t you just set it up?"}, {"owner": {"reputation": 512, "user_id": 114197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1337625eb957939720c4acfcb0118?s=128&d=identicon&r=PG", "display_name": "Kees-Jan", "link": "https://stackoverflow.com/users/114197/kees-jan"}, "reply_to_user": {"reputation": 1510, "user_id": 5728157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ed0956efcbacb4f24eb25437fdb856b?s=128&d=identicon&r=PG&f=1", "display_name": "andresantacruz", "link": "https://stackoverflow.com/users/5728157/andresantacruz"}, "edited": false, "score": 0, "creation_date": 1566991356, "post_id": 57691123, "comment_id": 101826772, "body": "I am not familiar with WinDbg at all. So after learning how to set up symbol paths, I&#39;d have to learn how to further use it. I could, of course, but it is more of a last resort thing. If the debugger I am familiar with supports the same functionality, then that would be preferable."}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1566992201, "post_id": 57691123, "comment_id": 101827229, "body": "What you need, I guess, is getting a stack trace of your crash. I would go with WinDbg option + *.pdb files. You might load all in WinDbg and run, for example, <code>!analyze -v</code> command. It may help you to understand the problem better."}, {"owner": {"reputation": 15189, "user_id": 477771, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e1e6012428cc236ed32cf9a13376f0f3?s=128&d=identicon&r=PG", "display_name": "Mark Storer", "link": "https://stackoverflow.com/users/477771/mark-storer"}, "edited": false, "score": 0, "creation_date": 1566993662, "post_id": 57691123, "comment_id": 101828068, "body": "If you have the enterprise version of VS2017, you might give <code>Reverse Debugging</code> a shot.  I believe VS calls it &quot;IntelliTrace&quot;."}, {"owner": {"reputation": 512, "user_id": 114197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1337625eb957939720c4acfcb0118?s=128&d=identicon&r=PG", "display_name": "Kees-Jan", "link": "https://stackoverflow.com/users/114197/kees-jan"}, "edited": false, "score": 0, "creation_date": 1567060825, "post_id": 57691123, "comment_id": 101851483, "body": "Reverse debugging is convenient if you can actually reproduce the problem. I cannot. I am investigating a crashdump created by one of our customers. This problem is hard (if not nearly impossible) to reproduce, yet occurs often enough to annoy our customers. Besides, I &quot;only&quot; have VS professional"}, {"owner": {"reputation": 262, "user_id": 11765721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76d94b32b46de5aef1ad42eff30f2f02?s=128&d=identicon&r=PG&f=1", "display_name": "Pod Mo", "link": "https://stackoverflow.com/users/11765721/pod-mo"}, "edited": false, "score": 0, "creation_date": 1567497781, "post_id": 57691123, "comment_id": 101970092, "body": "Maybe you need to use <a href=\"https://docs.microsoft.com/en-us/windows/win32/dxtecharts/crash-dump-analysis#using-dumpchkexe\" rel=\"nofollow noreferrer\">Dumpchk.exe</a> to check if the dump file is created correctly."}], "answers": [{"comments": [{"owner": {"reputation": 512, "user_id": 114197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1337625eb957939720c4acfcb0118?s=128&d=identicon&r=PG", "display_name": "Kees-Jan", "link": "https://stackoverflow.com/users/114197/kees-jan"}, "edited": false, "score": 0, "creation_date": 1567015961, "post_id": 57692261, "comment_id": 101840000, "body": "Thank you for your answer. I&#39;ve got all of those bases covered. The tutorial is too basic for what I&#39;m trying to do. See also the clarification, above."}, {"owner": {"reputation": 20402, "user_id": 527987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jiIK.png?s=128&g=1", "display_name": "cosmin", "link": "https://stackoverflow.com/users/527987/cosmin"}, "reply_to_user": {"reputation": 512, "user_id": 114197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1337625eb957939720c4acfcb0118?s=128&d=identicon&r=PG", "display_name": "Kees-Jan", "link": "https://stackoverflow.com/users/114197/kees-jan"}, "edited": false, "score": 0, "creation_date": 1567077217, "post_id": 57692261, "comment_id": 101859882, "body": "I updated my answer. You\u2019re looking for live debugging. What you have is what you get with dumps."}, {"owner": {"reputation": 512, "user_id": 114197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1337625eb957939720c4acfcb0118?s=128&d=identicon&r=PG", "display_name": "Kees-Jan", "link": "https://stackoverflow.com/users/114197/kees-jan"}, "edited": false, "score": 0, "creation_date": 1567151845, "post_id": 57692261, "comment_id": 101886124, "body": "As stated in my question, WinDbg can do it (with dumps), and so could VS2010 (alledgedly).  Additionally, in live debugging, there seems to be no searching functionality either. (I get the feeling you&#39;re not understanding me)"}], "tags": [], "owner": {"reputation": 20402, "user_id": 527987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jiIK.png?s=128&g=1", "display_name": "cosmin", "link": "https://stackoverflow.com/users/527987/cosmin"}, "is_accepted": false, "score": 0, "last_activity_date": 1567077082, "last_edit_date": 1567077082, "creation_date": 1566994698, "answer_id": 57692261, "question_id": 57691123, "link": "https://stackoverflow.com/questions/57691123/search-through-memory-in-vs2017/57692261#57692261", "title": "Search through memory in VS2017", "body": "<p>Here is a good tutorial:\n<a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/using-dump-files?view=vs-2019\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/visualstudio/debugger/using-dump-files?view=vs-2019</a></p>\n\n<p>Basically, there are some hard requirements to see the memory in your dump:</p>\n\n<ul>\n<li>minidump must be with heap</li>\n<li>you must give Visual Studio the .exe and its .pdb</li>\n</ul>\n\n<p>If these are not met, you get only the stack trace and maybe some stack variables.</p>\n\n<p><strong>Edit:</strong> The stack trace with watches and variables is the same memory you want to search. There is no live debugging. It\u2019s a snapshot of the crash.</p>\n"}], "owner": {"reputation": 512, "user_id": 114197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2a1337625eb957939720c4acfcb0118?s=128&d=identicon&r=PG", "display_name": "Kees-Jan", "link": "https://stackoverflow.com/users/114197/kees-jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 416, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1567077082, "creation_date": 1566990938, "last_edit_date": 1567015908, "question_id": 57691123, "link": "https://stackoverflow.com/questions/57691123/search-through-memory-in-vs2017", "title": "Search through memory in VS2017", "body": "<p>I have opened a minidump file of my C++ application in Visual Studio 2017. The dump is of a program crashing with an access violation. I am suspecting heap/stack corruption, so I am spending a lot of time in the memory/disassembly window, trying to interpret the stack.</p>\n\n<p>It would be very convenient if I could search the memory for some value (for example the return address of function calls). I know WinDbg can do it, but it currently doesn't have symbol paths set up correctly, and I'd much rather stay in one debugger.</p>\n\n<p>I've found <a href=\"https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/ms171362(v=vs.100)\" rel=\"nofollow noreferrer\">this link</a> that says Visual Studio 2010 supported typing something like <code>.S -D 0x20B4EC L100 0x12EC9275</code> in the immediate window, but when I try in VS2017, I just get <code>expected an expression</code>.</p>\n\n<p>Am I missing something?</p>\n\n<p>(Note, Although I am now analysing a crashdump, it doesn't seem to work while debugging a live program either)</p>\n\n<p><strong>Clarification</strong></p>\n\n<ul>\n<li>I have a minidump with memory included</li>\n<li>Regular analysis works fine: I have pdb files, I can see threads, stacks, watches, you name it. It is just that I suspect <a href=\"https://stackoverflow.com/questions/718503/stack-corruption-in-c\">stack corruption</a>, so those do not make much sense. (Either that, or the optimizer is messing with me)</li>\n<li>Hence, I've opened the memory window (Click Debug->Windows->Memory->Memory 1). In there, I can see (raw) memory. Now, I want to search in that memory for specific values.</li>\n</ul>\n"}, {"tags": ["c++", "gcc", "shared-libraries", "compiler-optimization", "abi"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 7, "creation_date": 1566990968, "post_id": 57691078, "comment_id": 101826562, "body": "You cannot rule out that your code may have bugs that only get exposed when optimizations are used.  Thus unless we have your code, we cannot conclude this has to do with libraries, optimizations, etc."}, {"owner": {"reputation": 93, "user_id": 5807216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225e214884f696a59df31a17b41e4b0d?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5807216/albert"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1566995937, "post_id": 57691078, "comment_id": 101829413, "body": "I do not have code of these direct and indirectly used libs. My part of stack ends 10 levels below."}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1566991241, "creation_date": 1566991241, "answer_id": 57691220, "question_id": 57691078, "link": "https://stackoverflow.com/questions/57691078/shared-library-crash-when-project-compiled-with-o1-optimization-flag/57691220#57691220", "title": "Shared library crash when project compiled with -O1 optimization flag", "body": "<blockquote>\n  <p>What should be next steps in investigation?</p>\n</blockquote>\n\n<p>You should start debugging.  Often bugs \"get away it\" at <code>-O0</code> only to hit hard when optimization is cranked up a bit.</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 5807216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225e214884f696a59df31a17b41e4b0d?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5807216/albert"}, "edited": false, "score": 0, "creation_date": 1566996074, "post_id": 57692023, "comment_id": 101829496, "body": "Shared library crashes when calling an <code>Init()</code> method, without passing anything to it."}], "tags": [], "owner": {"reputation": 1147, "user_id": 8874817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40ae7c9690551846e59d73bb4ed01c7?s=128&d=identicon&r=PG&f=1", "display_name": "Detonar", "link": "https://stackoverflow.com/users/8874817/detonar"}, "is_accepted": false, "score": 0, "last_activity_date": 1566993908, "creation_date": 1566993908, "answer_id": 57692023, "question_id": 57691078, "link": "https://stackoverflow.com/questions/57691078/shared-library-crash-when-project-compiled-with-o1-optimization-flag/57692023#57692023", "title": "Shared library crash when project compiled with -O1 optimization flag", "body": "<p>Because i don't know your code i can only guess.</p>\n\n<p>I assume you created some kind of object used only by your shared library. Probably some kind of boilerplate. You pass that to your shared lib and it does something with it and deletes it afterwards.</p>\n\n<p>Because you never read this variable in your own code there is a high chance the compiler optimizes it away.</p>\n\n<p>To resolve your issue you have to find that specific variable and mark it with <code>volatile</code> to prevent it form being optimized away.</p>\n\n<p>I wish you good luck.</p>\n"}, {"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1568633469, "creation_date": 1568633469, "answer_id": 57955921, "question_id": 57691078, "link": "https://stackoverflow.com/questions/57691078/shared-library-crash-when-project-compiled-with-o1-optimization-flag/57955921#57955921", "title": "Shared library crash when project compiled with -O1 optimization flag", "body": "<pre><code>$ c++filt _ZNSs4_Rep20_S_empty_rep_storageE\nstd::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::_Rep::_S_empty_rep_storage\n</code></pre>\n\n<p><code>_S_empty_rep_storage</code> is declared as:</p>\n\n<pre><code>// The following storage is init'd to 0 by the linker, resulting\n// (carefully) in an empty string with one reference.\nstatic size_type _S_empty_rep_storage[];\n</code></pre>\n\n<p>And defined as:</p>\n\n<pre><code>  // Linker sets _S_empty_rep_storage to all 0s (one reference, empty string)\n  // at static init time (before static ctors are run).\n  template&lt;typename _CharT, typename _Traits, typename _Alloc&gt;\n    typename basic_string&lt;_CharT, _Traits, _Alloc&gt;::size_type\n    basic_string&lt;_CharT, _Traits, _Alloc&gt;::_Rep::_S_empty_rep_storage[\n    (sizeof(_Rep_base) + sizeof(_CharT) + sizeof(size_type) - 1) /\n      sizeof(size_type)];\n</code></pre>\n\n<p>Looks like the shared library you load has another (older) definition of <code>_S_empty_rep_storage</code>. In the older versions of the GNU C++ library <code>_S_empty_rep_storage</code> used to be dynamically allocated and this is why that shared library tries to do <code>delete _S_empty_rep_storage</code> and crashes. </p>\n\n<p>A fix would be to recompile the shared library against the C++ library you use with the same C++ compiler and linker options.</p>\n"}, {"tags": [], "owner": {"reputation": 93, "user_id": 5807216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225e214884f696a59df31a17b41e4b0d?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5807216/albert"}, "is_accepted": true, "score": 0, "last_activity_date": 1571051359, "creation_date": 1571051359, "answer_id": 58375530, "question_id": 57691078, "link": "https://stackoverflow.com/questions/57691078/shared-library-crash-when-project-compiled-with-o1-optimization-flag/58375530#58375530", "title": "Shared library crash when project compiled with -O1 optimization flag", "body": "<p>I got 3-rd pt library source and it turned out that it also does dlopen and following bug occures: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=42679\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=42679</a></p>\n"}], "owner": {"reputation": 93, "user_id": 5807216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/225e214884f696a59df31a17b41e4b0d?s=128&d=identicon&r=PG&f=1", "display_name": "Albert", "link": "https://stackoverflow.com/users/5807216/albert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "accepted_answer_id": 58375530, "answer_count": 4, "score": 0, "last_activity_date": 1604585769, "creation_date": 1566990777, "last_edit_date": 1568632840, "question_id": 57691078, "link": "https://stackoverflow.com/questions/57691078/shared-library-crash-when-project-compiled-with-o1-optimization-flag", "title": "Shared library crash when project compiled with -O1 optimization flag", "body": "<h2>Issue:</h2>\n\n<p>I am connecting new shared library to project. It is loaded with run-time dynamic linking. <br>This new shared library is calling another shared libraries.</p>\n\n<p>If project is compiled with <code>-O0</code> flag - everything works fine.<br>\nIf project is compiled with <code>-O1</code> flag - libraries which are called by this new library are getting </p>\n\n<blockquote>\n  <p>Invalid free() / delete / delete[] / realloc()</p>\n</blockquote>\n\n<p>Crash is always associated with <code>std::string</code>, <code>basic_string</code> or <code>std::basic_stringbuf</code>.</p>\n\n<h2>What was chcecked:</h2>\n\n<p>Valgrind does not show any problems in application before crash.</p>\n\n<p>I have tried to:</p>\n\n<ul>\n<li>Change lib from run-time dynamic linking to load time dynamic linking</li>\n<li>Check if lib was compiled with the same gcc as mine (<code>4.4.7</code>) - it seems that it was, at least grep found GCC 4.4.7 in .so file.</li>\n</ul>\n\n<h2>Backtraces</h2>\n\n<p>From Valgrind run: Core dump stack have various bottom parts, but upper parts typically looks like:</p>\n\n<pre><code>==46601== Invalid free() / delete / delete[] / realloc()\n==46601==    at 0x4C287CA: operator delete(void*) (vg_replace_malloc.c:507)\n==46601==    by 0xF5BE9A6: std::basic_stringbuf&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;::overflow(int) (in /usr/lib64/libstdc++.so.6.0.13)\n==46601==    by 0xF5C2AB4: std::basic_streambuf&lt;char, std::char_traits&lt;char&gt; &gt;::xsputn(char const*, long) (in /usr/lib64/libstdc++.so.6.0.13)\n==46601==    by 0xF5A8C7F: std::ostreambuf_iterator&lt;char, std::char_traits&lt;char&gt; &gt; std::num_put&lt;char, std::ostreambuf_iterator&lt;char, std::char_traits&lt;char&gt; &gt; &gt;::_M_insert_int&lt;long&gt;(std::ostreambuf_iterator&lt;char, std::char_traits&lt;char&gt; &gt;, std::ios_base&amp;, char, long) const (in /usr/lib64/libstdc++.so.6.0.13)\n==46601==    by 0xF5A8E25: std::num_put&lt;char, std::ostreambuf_iterator&lt;char, std::char_traits&lt;char&gt; &gt; &gt;::do_put(std::ostreambuf_iterator&lt;char, std::char_traits&lt;char&gt; &gt;, std::ios_base&amp;, char, long) const (in /usr/lib64/libstdc++.so.6.0.13)\n==46601==    by 0xF5BC43D: std::ostream&amp; std::ostream::_M_insert&lt;long&gt;(long) (in /usr/lib64/libstdc++.so.6.0.13)\n.......\n==46601==  Address 0xf81a2c0 is 0 bytes inside data symbol \"_ZNSs4_Rep20_S_empty_rep_storageE\"\n</code></pre>\n\n<pre><code>==46601== Invalid free() / delete / delete[] / realloc()\n==46601==    at 0x4C287CA: operator delete(void*) (vg_replace_malloc.c:507)\n==46601==    by 0xF5C4564: std::string::assign(std::string const&amp;) (in /usr/lib64/libstdc++.so.6.0.13)\n==46601==    by 0x21632E52: operator= (basic_string.h:511)\n==46601==    by 0x21632E52: str (sstream:129)\n==46601==    by 0x21632E52: str (sstream:557)\n.........\n==46601==  Address 0xf81a2c0 is 0 bytes inside data symbol \"_ZNSs4_Rep20_S_empty_rep_storageE\"\n</code></pre>\n\n<pre><code>==46601== Invalid free() / delete / delete[] / realloc()\n==46601==    at 0x4C287CA: operator delete(void*) (vg_replace_malloc.c:507)\n==46601==    by 0x2308A103: _M_dispose (basic_string.h:236)\n==46601==    by 0x2308A103: ~basic_string (basic_string.h:503)\n.......\n==46601==  Address 0x67b2c0 is 0 bytes inside data symbol \"_ZNSs4_Rep20_S_empty_rep_storageE@@GLIBCXX_3.4\"\n</code></pre>\n\n<p><strong>Edit:</strong>\n<br>\n<code>D_GLIBCXX_FULLY_DYNAMIC_STRING</code> macro helped a bit.\n<br>\nNow \n<br>\n<code>my project -O1</code> : <code>so.file -O0</code> works\n<br>\n<code>my project -O1</code> : <code>so.file -O1</code> fails</p>\n\n<h2>Question</h2>\n\n<p>I don't have code of these libraries.\nI wonder what else can I do to solve this problem.<br>\nWhat should be next steps in investigation?</p>\n"}, {"tags": ["c++", "logging", "log4cxx"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1566990462, "post_id": 57690952, "comment_id": 101826326, "body": "Please provide the code that you use to create these log outputs."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 1164376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74bcd28581e1fbcaedb46160220c4ed?s=128&d=identicon&r=PG", "display_name": "Ramachandran", "link": "https://stackoverflow.com/users/1164376/ramachandran"}, "edited": false, "score": 0, "creation_date": 1566995863, "post_id": 57691551, "comment_id": 101829362, "body": "Ok. Thanks for your quick response and useful answer Aconcagua."}], "tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": true, "score": 1, "last_activity_date": 1566992338, "creation_date": 1566992338, "answer_id": 57691551, "question_id": 57690952, "link": "https://stackoverflow.com/questions/57690952/two-log-lines-are-mixed-with-log4cxx-in-c/57691551#57691551", "title": "Two log lines are mixed with log4Cxx in c++", "body": "<blockquote>\n  <p>I have used the multi-thread and multi-process with my application.</p>\n</blockquote>\n\n<p>And that's the issue. Apparently log4cxx is not thread-safe, at least not the facilities you are currently using. What then happens is that one thread starts writing a log message, gets interrupted by another thread, which again starts writing a message, placing it right within the already started, but not finished one of the first thread.</p>\n\n<p>You could solve the issue e. g. by having separate log files for every thread. Not sure how far supported by log4cxx natively (I'm not too familiar with it), something like thread-local <code>FileAppender</code> might do the trick, though.</p>\n\n<p>Otherwise, you'll need to somehow protect the point log4cxx is writing to a file against race conditions. Please evaluate <a href=\"https://logging.apache.org/log4cxx/latest_stable/apidocs/classlog4cxx_1_1_n_d_c.html#details\" rel=\"nofollow noreferrer\">NDC</a> first, at a first glance, that might fit your needs, though I didn't dig deeper... If not supported natively you might wrap the non-thread-safe <code>FileAppender</code> with some custom, thread-safe Appender class of your own.</p>\n\n<p>If you want to write to one single file from multiple processes, you need to synchronise across different processes as well. Support for relies entirely on OS, not all give you appropriate support for, though.</p>\n\n<p>If logging to database is an option, <code>ODBCFileAppender</code> appears interesting as well. I would assume (but you'd need to verify yourself) that every log message results in its own SQL query, thus write synchronisation would be left to the DBMS. That would work not only for threads, but for processes as well.</p>\n\n<p>Finally: You could write your own logging server, accepting connections (e. g. pipes or sockets) from different threads. It would buffer incoming log messages for every connection and write them one after another to file. That would be safe across different threads as well, similar as the database solution.</p>\n"}], "owner": {"reputation": 103, "user_id": 1164376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c74bcd28581e1fbcaedb46160220c4ed?s=128&d=identicon&r=PG", "display_name": "Ramachandran", "link": "https://stackoverflow.com/users/1164376/ramachandran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57691551, "answer_count": 1, "score": 0, "last_activity_date": 1566992338, "creation_date": 1566990263, "last_edit_date": 1592644375, "question_id": 57690952, "link": "https://stackoverflow.com/questions/57690952/two-log-lines-are-mixed-with-log4cxx-in-c", "title": "Two log lines are mixed with log4Cxx in c++", "body": "<p>I have used the log4cxx in my project for logging purpose. But, recently I noticed that some two different log lines are mixed with each other. I am not sure what was the problem. For example, I am expecting the log lines like below,</p>\n<blockquote>\n<p>Printing the test line one</p>\n<p>Printing the test line two</p>\n<p>Printing the test line three</p>\n</blockquote>\n<p>But, the log is written like below,</p>\n<blockquote>\n<p>Printing the test Printing the test line two</p>\n<p>line one</p>\n<p>Printing the test line one</p>\n</blockquote>\n<p>Note: I have used the multi-thread and multi-process with my application.</p>\n<p>It would be great if anyone provides the right solution for this one.</p>\n<p>Thanks in advance.</p>\n<p>I already tried with setBufferSize and setImmediateFlush option with log4cxx. But, not working.</p>\n"}, {"tags": ["c++", "cuda", "fftw", "cufft"], "comments": [{"owner": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1566994017, "post_id": 57690934, "comment_id": 101828280, "body": "How do you know fftw is the right one? Have you computed ft by hand?"}, {"owner": {"reputation": 47, "user_id": 11988554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c87124ffcefd2b5eec19c529154ced?s=128&d=identicon&r=PG&f=1", "display_name": "aleks", "link": "https://stackoverflow.com/users/11988554/aleks"}, "reply_to_user": {"reputation": 9427, "user_id": 1470092, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/0eeda48676f683d04c1431b2542954af?s=128&d=identicon&r=PG", "display_name": "huseyin tugrul buyukisik", "link": "https://stackoverflow.com/users/1470092/huseyin-tugrul-buyukisik"}, "edited": false, "score": 0, "creation_date": 1566994427, "post_id": 57690934, "comment_id": 101828502, "body": "@huseyin I&#39;ve done it by hand and it was also tested on some examples"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1567000230, "post_id": 57690934, "comment_id": 101832083, "body": "You&#39;ve only printed the real values in the complex domain after the pointwise multiply and scale.  Perhaps your kernel code is broken, which you haven&#39;t shown.  Anyway you should provide a complete code, not just 2 functions.  Provide the data (there isn&#39;t that much of it) as well as a main routine that calls both functions.  Everything someone else needs to run your code.  That is called a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and SO expects it for questions like this, see item 1 <a href=\"https://stackoverflow.com/help/on-topic\">here</a>"}, {"owner": {"reputation": 2086, "user_id": 10543528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3a9d1ea239d645f62babcbb003c5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/10543528/michael"}, "edited": false, "score": 1, "creation_date": 1567028905, "post_id": 57690934, "comment_id": 101844858, "body": "This looks like a precision issue to me; the default fftw precision is 64-bit, whereas you&#39;re using the 32-bit variants of cufft. Try using cufftDoubleComplex (64-bit) instead of cufftComplex (32-bit), and read up on how to perform 64-bit cufft computations (iirc, cufftExecC2C becomes cufftExecZ2Z, there may be other changes as well). Edit: Just noticed that @francis has answered with a similar comment. I concur"}], "answers": [{"tags": [], "owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "is_accepted": false, "score": 1, "last_activity_date": 1567032780, "last_edit_date": 1567032780, "creation_date": 1567017131, "answer_id": 57698265, "question_id": 57690934, "link": "https://stackoverflow.com/questions/57690934/wrong-2d-cufft-inverse-transform-compared-to-fftw3/57698265#57698265", "title": "Wrong 2D CuFFT inverse transform compared to fftw3", "body": "<p>As FFTW is used, the convolved signal features a lot of numbers of about 1e-6 and a few numbers of about 1e-22. It is likely that it should have been zeros, but it is not since these zeros are computed using double precision floating point numbers. Double precision numbers are about 15 digits precise, so errors near 1e(-6-15)=1e-21 could occur. </p>\n\n<p>As cufft is used, these figures that should have been zeros are about 1e-13, as if computations have been performed using single precision floating point number.\n<strong>It is the case: the types <a href=\"http://www.jcuda.org/jcuda/doc/jcuda/cuComplex.html\" rel=\"nofollow noreferrer\"><code>cuComplex</code></a> and <a href=\"https://docs.nvidia.com/cuda/cufft/index.html#cufftcomplex\" rel=\"nofollow noreferrer\"><code>cufftComplex</code></a> are single precision complex, while <a href=\"http://www.fftw.org/fftw3_doc/Complex-numbers.html\" rel=\"nofollow noreferrer\"><code>fftw_complex</code></a> is a double precision complex</strong>. While <a href=\"https://stackoverflow.com/questions/41638105/default-types-for-complex-in-c\"><code>complex</code> likely defaults to double precision</a>, it can be cleary specified as <code>double complex</code>.</p>\n\n<p>To get figures near 1e-22, please try the types <a href=\"https://docs.nvidia.com/cuda/cufft/index.html#cufftdoublecomplex\" rel=\"nofollow noreferrer\"><code>cufftDoubleComplex</code></a> and <a href=\"http://www.jcuda.org/jcuda/doc/jcuda/cuDoubleComplex.html\" rel=\"nofollow noreferrer\"><code>cuDoubleComplex</code></a>. The <code>blockSize</code> introduced to perform many multiplications at once may need to be reduced to 8. However, while it is likely that figures of magnitude 1e-22 could be obtained, it is also likely that these figures still differ from those of FFTW. Indeed, since the algorithms could be different, different operations could have been performed and the precision is such that anything about 1e-22 in the outcome is not significantly different from 0.</p>\n\n<p>Nevertheless, changing for double precision numbers may increase computation time and clearly increases the memory footprint. If a six-digit precision on the outcome of the convolution is good enough for your application, sticking to single precision complex DFT could be the right way to go. </p>\n"}], "owner": {"reputation": 47, "user_id": 11988554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c87124ffcefd2b5eec19c529154ced?s=128&d=identicon&r=PG&f=1", "display_name": "aleks", "link": "https://stackoverflow.com/users/11988554/aleks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "closed_date": 1567019792, "answer_count": 1, "score": 0, "last_activity_date": 1567032780, "creation_date": 1566990195, "question_id": 57690934, "link": "https://stackoverflow.com/questions/57690934/wrong-2d-cufft-inverse-transform-compared-to-fftw3", "closed_reason": "Not suitable for this site", "title": "Wrong 2D CuFFT inverse transform compared to fftw3", "body": "<p>I'm trying to produce some FFT math, in particular it's do two 2D forward transforms, multiply them, and then make  inverse transform. Before inverse transform everything goes great. I've already did it by fftw3, but in CuFFT something goes wrong. Most of the values are similar, but some are wrong, which is significant for the future math. What's the problem with this piece of code?</p>\n\n<pre><code>std::vector&lt;complex&gt; conv2dCUDA(complex *ui_anomaly, double *ds2, \ncomplex *u0, int anx, int any, double factor) {\n    cufftComplex *b1, *b2;\n    int size = 2 * anx * 2 * any;\n    int memsize = size *  sizeof(cufftComplex);\n    b1 = (cufftComplex *)calloc(size, sizeof(cufftComplex));\n    b2 = (cufftComplex *)calloc(size, sizeof(cufftComplex));\n\n    // filling the matrixes    \n\n    cufftHandle plan;\n    cufftComplex *ui, *g;\n    checkCudaErrors(cudaMalloc((void**)&amp;ui, memsize));\n    checkCudaErrors(cudaMalloc((void**)&amp;g,  memsize));\n    checkCudaErrors(cufftPlan2d(&amp;plan, 2 * anx, 2 * any, CUFFT_C2C));\n    checkCudaErrors(cudaMemcpy(ui, (cufftComplex *)&amp;b1[0], memsize, cudaMemcpyHostToDevice));\n    checkCudaErrors(cudaMemcpy(g, (cufftComplex *)&amp;b2[0], memsize, cudaMemcpyHostToDevice));\n    checkCudaErrors(cufftExecC2C(plan, ui, ui, CUFFT_FORWARD));\n    checkCudaErrors(cufftExecC2C(plan, g, g, CUFFT_FORWARD));\n    int blockSize = 16;\n    dim3 dimGrid(int(2 * any / blockSize) + 1, int(2 * anx / blockSize) + 1);\n    dim3 dimBlock(blockSize, blockSize);\n\n    ComplexMulAndScale&lt;&lt;&lt;dimGrid, dimBlock&gt;&gt;&gt;(ui, g, size, 1.0f);\n    getLastCudaError(\"Kernel execution went wrong\");\n\n    checkCudaErrors(cudaMemcpy(b1, ui, memsize, cudaMemcpyDeviceToHost));\n    std::cout &lt;&lt; \"After mult Cuda\" &lt;&lt; std::endl;\n    for (auto i = 0; i &lt; 2 * any; i++) {\n       for (auto j = 0; j &lt; 2 * anx; j++) {\n            std::cout &lt;&lt; b1[i * 2 * anx + j].x &lt;&lt; \" \";\n       }\n       std::cout &lt;&lt; std::endl;\n    }\n\n    checkCudaErrors(cufftExecC2C(plan, ui, ui, CUFFT_INVERSE));\n    cuComplex *inversed;\n    inversed = (cuComplex*)malloc(memsize);\n    checkCudaErrors(cudaMemcpy(inversed, ui, memsize, cudaMemcpyDeviceToHost));\n    std::vector&lt;complex&gt; res(anx * any);\n    for (auto i = 0; i &lt; any; i++) {\n        for (auto j = 0; j &lt; anx; j++) {\n            res[i * anx + j] = complex(inversed[i * anx * 2 + j].x * factor, inversed[i * anx * 2 + j].y * factor);\n        }\n    }\n    std::cout &lt;&lt; \"CUDA\"  &lt;&lt; std::endl;\n    for (auto i = 0; i &lt; 2 * any; i++) {\n        for (auto j = 0; j &lt; 2 * anx; j++) {\n            std::cout &lt;&lt; inversed[i * 2 * anx + j].x &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n    checkCudaErrors(cudaFree(ui));\n    checkCudaErrors(cudaFree(g));\n    checkCudaErrors(cufftDestroy(plan));\n    free(b1);\n    free(b2);\n    free(inversed);\n    return res;\n}\n\nstd::vector&lt;complex&gt; conv2d(complex *ui_anomaly, double *ds2, complex *u0, int anx, int any, double factor) {\n    std::vector&lt;complex&gt; b1(anx * 2 * 2 * any, complex(0., 0.)), b2(anx * 2 * 2 * any, complex(0., 0.));\n\n    // filling matrixes\n\n    // forward fft 1 in-place\n    fftw_plan p;\n    p = fftw_plan_dft_2d(2 * any, 2 * anx, (fftw_complex *) (&amp;b1[0]), (fftw_complex *) (&amp;b1[0]),\n                     FFTW_FORWARD, FFTW_ESTIMATE);\n    fftw_execute(p);\n    fftw_destroy_plan(p);\n    // forward fft 2 in-place\n    p = fftw_plan_dft_2d(2 * any, 2 * anx, (fftw_complex *) (&amp;b2[0]), (fftw_complex *) (&amp;b2[0]),\n                     FFTW_FORWARD, FFTW_ESTIMATE);\n    fftw_execute(p);\n    fftw_destroy_plan(p);\n    std::vector&lt;complex&gt; out(2 * anx * 2 * any, complex(0., 0.));\n\n    for (auto i = 0; i &lt; 2 * any * 2 * anx; i++) {\n        out[i] = b1[i] * b2[i];\n    }\n    std::cout &lt;&lt; \"After mult fftw\" &lt;&lt; std::endl;\n    for (auto i = 0; i &lt; 2 * any; i++) {\n        for (auto j = 0; j &lt; 2 * anx; j++) {\n            std::cout &lt;&lt; out[i * 2 * anx + j].real() &lt;&lt; \" \";\n       }\n       std::cout &lt;&lt; std::endl;\n    }\n    // inverse fft in-place\n    p = fftw_plan_dft_2d(2 * (int) any, 2 * (int) anx, (fftw_complex *) (&amp;out[0]), (fftw_complex *) (&amp;out[0]),FFTW_BACKWARD, FFTW_ESTIMATE);\n    fftw_execute(p);\n    fftw_destroy_plan(p);\n\n    std::vector&lt;complex&gt; res(anx * any);\n    for (auto i = 0; i &lt; any; i++) {\n        for (auto j = 0; j &lt; anx; j++) {\n            res[i * anx + j] = out[i * anx * 2 + j] * factor;\n       }\n    }\n    std::cout &lt;&lt; \"FFTW\" &lt;&lt; std::endl;\n    for (auto i = 0; i &lt; 2 * any; i++) {\n        for (auto j = 0; j &lt; 2 * anx; j++) {\n            std::cout &lt;&lt; out[i * 2 * anx + j].real() &lt;&lt; \" \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n    return res;\n}\n</code></pre>\n\n<p>So, this is my code. Output should be in both functions</p>\n\n<pre><code>After mult fftw\n8.34304e-08 -5.99259e-07 -4.7876e-07 5.30254e-07 9.55877e-07 4.28985e-07 \n-1.56375e-07 1.19699e-07 2.39276e-07 -1.68662e-08 -7.56988e-08 -3.69897e-07 \n-2.66505e-07 -2.33361e-07 -5.21763e-07 -5.29126e-07 1.8915e-07 1.68158e-07 \n-9.01859e-07 -2.37453e-07 -3.50661e-08 -4.11154e-07 4.14802e-07 -7.9879e-07 \n2.09404e-07 6.52034e-08 1.8915e-07 4.97805e-07 3.32612e-07 -2.33361e-07 \n-1.95738e-07 -3.69897e-07 -1.63577e-07 1.07737e-07 2.39276e-07 2.50198e-07 \nFFTW\n-1.57349e-06 -7.5964e-06 -1.57349e-06 1.68876e-06 5.82335e-22 1.68876e-06 \n2.37158e-06 6.35275e-22 2.37158e-06 -1.18579e-06 1.05879e-22 -1.18579e-06 \n-1.57349e-06 -7.5964e-06 -1.57349e-06 1.68876e-06 1.97573e-22 1.68876e-06 \n3.14928e-06 2.37158e-06 3.14928e-06 -4.94164e-07 5.82335e-22 -4.94164e-07 \n2.11758e-22 -8.47033e-22 -1.05879e-22 5.29396e-22 1.41851e-23 1.05879e-22 \n3.14928e-06 2.37158e-06 3.14928e-06 -4.94164e-07 1.05879e-22 -4.94164e-07 \n\nAfter mult Cuda\n8.34303e-08 -5.99259e-07 -4.78761e-07 5.30254e-07 9.55877e-07 4.28985e-07 \n-1.56375e-07 1.19699e-07 2.39276e-07 -1.68662e-08 -7.56988e-08 -3.69897e-07 \n-2.66505e-07 -2.33361e-07 -5.21763e-07 -5.29126e-07 1.8915e-07 1.68158e-07 \n-9.01859e-07 -2.37453e-07 -3.50661e-08 -4.11154e-07 4.14802e-07 -7.9879e-07 \n2.09404e-07 6.52034e-08 1.8915e-07 4.97805e-07 3.32612e-07 -2.33361e-07 \n-1.95738e-07 -3.69897e-07 -1.63577e-07 1.07737e-07 2.39276e-07 2.50198e-07 \nCUDA\n-1.57349e-06 -7.5964e-06 -1.57349e-06 1.68876e-06 3.33981e-13 1.68876e-06 \n2.37158e-06 2.84217e-13 2.37158e-06 -1.18579e-06 1.10294e-13 -1.18579e-06 \n-1.57349e-06 -7.5964e-06 -1.57349e-06 1.68876e-06 -9.03043e-14 1.68876e-06 \n3.14928e-06 2.37158e-06 3.14928e-06 -4.94164e-07 4.62975e-13 -4.94164e-07 \n-3.2685e-13 -1.03562e-13 -3.59548e-13 -2.13163e-13 4.27658e-15 -2.43358e-14 \n3.14928e-06 2.37158e-06 3.14928e-06 -4.94164e-07 3.49288e-13 -4.94164e-07 \n</code></pre>\n\n<p>As it can be seen, both forward fft and multiplication goes right, but in case of inverse fft by cuda smth went wrong.</p>\n\n<p>P.S. Sorry for poor code style</p>\n"}, {"tags": ["c++", "sql", "api", "odbc"], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 3383699, "user_type": "registered", "profile_image": "https://graph.facebook.com/740465868/picture?type=large", "display_name": "Steve Thresher", "link": "https://stackoverflow.com/users/3383699/steve-thresher"}, "is_accepted": true, "score": 0, "last_activity_date": 1567674265, "creation_date": 1567674265, "answer_id": 57802009, "question_id": 57690444, "link": "https://stackoverflow.com/questions/57690444/howto-specify-tablock-with-the-odbc-api/57802009#57802009", "title": "Howto Specify TABLOCK with the ODBC API", "body": "<p>The answer was to call bcp_control() and use the BCPHINTS option to specify \"TABLOCK\".</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/sql/relational-databases/native-client-odbc-extensions-bulk-copy-functions/bcp-control?view=sql-server-2017\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/sql/relational-databases/native-client-odbc-extensions-bulk-copy-functions/bcp-control?view=sql-server-2017</a></p>\n\n<p>All hints listed here:</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/sql/tools/bcp-utility?view=sql-server-2017#h\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/sql/tools/bcp-utility?view=sql-server-2017#h</a></p>\n\n<p>Sample found here:</p>\n\n<p><a href=\"https://github.com/morungos/p5-Win32-ODBC-BulkLoader/blob/master/BulkLoader.xs\" rel=\"nofollow noreferrer\">https://github.com/morungos/p5-Win32-ODBC-BulkLoader/blob/master/BulkLoader.xs</a></p>\n"}], "owner": {"reputation": 35, "user_id": 3383699, "user_type": "registered", "profile_image": "https://graph.facebook.com/740465868/picture?type=large", "display_name": "Steve Thresher", "link": "https://stackoverflow.com/users/3383699/steve-thresher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 57802009, "answer_count": 1, "score": 0, "last_activity_date": 1567674265, "creation_date": 1566988477, "question_id": 57690444, "link": "https://stackoverflow.com/questions/57690444/howto-specify-tablock-with-the-odbc-api", "title": "Howto Specify TABLOCK with the ODBC API", "body": "<p>I'm looking into improving the performance of a bulk copy operation and it's been suggested I should add the TABLOCK option to the bulk insert statement. The question is how to do that when using the ODBC API from C++ code? </p>\n"}, {"tags": ["c++", "cmake", "android-ndk"], "comments": [{"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1566990903, "post_id": 57690377, "comment_id": 101826530, "body": "Perhaps you&#39;ve hit <a href=\"https://gitlab.kitware.com/cmake/cmake/issues/18739\" rel=\"nofollow noreferrer\">this CMake bug</a>."}, {"owner": {"reputation": 781, "user_id": 266253, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4eaf05f2af1bd62b33d6341fb45182a6?s=128&d=identicon&r=PG", "display_name": "Alienpenguin", "link": "https://stackoverflow.com/users/266253/alienpenguin"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1567511668, "post_id": 57690377, "comment_id": 101977398, "body": "@Michael Thanks, with nightly build i managed to compile it. If you want to post an answer i&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 8554, "user_id": 632035, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8ed69ad748c440a055502c1b213757e5?s=128&d=identicon&r=PG", "display_name": "Dan Albert", "link": "https://stackoverflow.com/users/632035/dan-albert"}, "is_accepted": false, "score": 1, "last_activity_date": 1567027876, "creation_date": 1567027876, "answer_id": 57700298, "question_id": 57690377, "link": "https://stackoverflow.com/questions/57690377/how-to-compile-jrtplib-with-android-ndk-20/57700298#57700298", "title": "how to compile jrtplib with android ndk 20", "body": "<p>You'll be better served by using the toolchain file provided by the NDK itself. See the docs: <a href=\"https://developer.android.com/ndk/guides/cmake#the_cmake_toolchain_file\" rel=\"nofollow noreferrer\">https://developer.android.com/ndk/guides/cmake#the_cmake_toolchain_file</a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9891843, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "k han", "link": "https://stackoverflow.com/users/9891843/k-han"}, "is_accepted": false, "score": 0, "last_activity_date": 1587458375, "creation_date": 1587458375, "answer_id": 61339300, "question_id": 57690377, "link": "https://stackoverflow.com/questions/57690377/how-to-compile-jrtplib-with-android-ndk-20/61339300#61339300", "title": "how to compile jrtplib with android ndk 20", "body": "<p>you need  DCMAKE_TOOLCHAIN_FILE ${HOME}/Android/Sdk/ndk-bundle/build/cmake/android.toolchain.cmake</p>\n"}], "owner": {"reputation": 781, "user_id": 266253, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/4eaf05f2af1bd62b33d6341fb45182a6?s=128&d=identicon&r=PG", "display_name": "Alienpenguin", "link": "https://stackoverflow.com/users/266253/alienpenguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1587458375, "creation_date": 1566988267, "question_id": 57690377, "link": "https://stackoverflow.com/questions/57690377/how-to-compile-jrtplib-with-android-ndk-20", "title": "how to compile jrtplib with android ndk 20", "body": "<p>I am trying to compile  <a href=\"https://github.com/j0r1/JRTPLIB\" rel=\"nofollow noreferrer\">https://github.com/j0r1/JRTPLIB</a> with latest NDK (20) but following the instructions that are provided on the github readme (that worked fine to compile jrtplib with NDK 17) fails with the following error:</p>\n\n<p>Build machine is a Gentoo Linux, and tried with either cmake-3.14 and 3.15 (nothing changed)</p>\n\n<pre><code>CMake Deprecation Warning at CMakeLists.txt:5 (cmake_policy):\n   The OLD behavior for policy CMP0026 will be removed from a future version\n   of CMake.\n   The cmake-policies(7) manual explains that the OLD behaviors of all\n   policies are deprecated and that a policy should be set to OLD only under\n   specific short-term circumstances.  Projects should be ported to the NEW\n   behavior and not rely on setting a policy to OLD.\n\n\n\n CMake Error at /home/franci/prog/vdk-deps/android/cmake/share/cmake-3.15/Modules/CMakeTestCCompiler.cmake:60 (message):\n   The C compiler\n\n     \"/home/franci/Apps/android-ndk-r20//toolchains/llvm/prebuilt/linux-x86_64/bin/clang\"\n\n   is not able to compile a simple test program.\n\n   It fails with the following output:\n\n     Change Dir: /home/franci/prog/vdk-deps/android/jrtplib-3.9.1/CMakeFiles/CMakeTmp\n\n     Run Build Command(s):/usr/bin/gmake cmTC_78e13/fast &amp;&amp; /usr/bin/gmake -f CMakeFiles/cmTC_78e13.dir/build.make CMakeFiles/cmTC_78e13.dir/build\n     gmake[1]: Entering directory '/home/franci/prog/vdk-deps/android/jrtplib-3.9.1/CMakeFiles/CMakeTmp'\n     Building C object CMakeFiles/cmTC_78e13.dir/testCCompiler.c.o\n     /home/franci/Apps/android-ndk-r20//toolchains/llvm/prebuilt/linux-x86_64/bin/clang --target=aarch64-none-linux-android --gcc-toolchain=/home/franci/Apps/android-ndk-r20//toolchains//prebuilt/linux-x86_64 --sysroot=/home/franci/Apps/android-ndk-r20//sysroot  -isystem\n /home/franci/Apps/android-ndk-r20/sysroot/usr/include -isystem /home/franci/Apps/android-ndk-r20/sysroot/usr/include/aarch64-linux-android  -funwind-tables -no-canonical-prefixes -D__ANDROID_API__=21 -fexceptions  -g -fPIE   -o CMakeFiles/cmTC_78e13.dir/testCCompiler.c.o   -c\n /home/franci/prog/vdk-deps/android/jrtplib-3.9.1/CMakeFiles/CMakeTmp/testCCompiler.c\n     Linking C executable cmTC_78e13\n     /home/franci/prog/vdk-deps/android/cmake/bin/cmake -E cmake_link_script CMakeFiles/cmTC_78e13.dir/link.txt --verbose=1\n     /home/franci/Apps/android-ndk-r20//toolchains/llvm/prebuilt/linux-x86_64/bin/clang --target=aarch64-none-linux-android --gcc-toolchain=/home/franci/Apps/android-ndk-r20//toolchains//prebuilt/linux-x86_64\n --sysroot=/home/franci/Apps/android-ndk-r20//platforms/android-21/arch-arm64 -funwind-tables -no-canonical-prefixes -D__ANDROID_API__=21 -fexceptions  -g  -Wl,--gc-sections  CMakeFiles/cmTC_78e13.dir/testCCompiler.c.o  -o cmTC_78e13\n     /usr/bin/ld: unrecognised emulation mode: aarch64linux\n     Supported emulations: elf_x86_64 elf32_x86_64 elf_i386 elf_iamcu elf_l1om elf_k1om\n     clang: error: linker command failed with exit code 1 (use -v to see invocation)\n     gmake[1]: *** [CMakeFiles/cmTC_78e13.dir/build.make:87: cmTC_78e13] Error\n</code></pre>\n\n<p>so it seems that cmake is not picking the right LD (in fact it seems to point to /usr/bin/ld)</p>\n\n<p>as suggested on the readme the command i am using compile is:</p>\n\n<pre><code>#!/bin/bash\n\nif [ $# -lt \"2\" ]; then\n    echo \"Usage: ${0} TOOLCHAIN_FILE_FULLPATH INSTALL_PATH\"\n    echo \" i.e. ${0} ./toolchain.cmake.arm64 /opt/android/install\"\n    exit 1\nfi\n\nTOOLCHAIN_FILE=$1\nINSTALL_PATH=$2\nccmake -DCMAKE_TOOLCHAIN_FILE=${TOOLCHAIN_FILE} \\\n       -DCMAKE_INSTALL_PREFIX=${INSTALL_PATH} \\\n       -DCMAKE_FIND_ROOT_PATH=${INSTALL_PATH} \\\n       -DCMAKE_LINKER=/home/franci/Apps/android-ndk-r20/toolchains/aarch64-linux-android-4.9/prebuilt/linux-x86_64/aarch64-linux-android/bin/ld \\\n       ./CMakeLists.txt\n</code></pre>\n\n<p>passing the following toolchain.file to ndk <strong>17</strong> and an installation path\n<strong>works</strong></p>\n\n<pre><code>set(CMAKE_SYSTEM_NAME Android)\nset(CMAKE_SYSTEM_VERSION 23) # API level\nset(CMAKE_ANDROID_ARCH_ABI arm64-v8a)\nset(CMAKE_ANDROID_NDK /home/franci/Apps/android-sdk/ndk-bundle/)\nset(CMAKE_ANDROID_STL_TYPE gnustl_static)\n\nset(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)\nset(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)\nset(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)\nset(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)\n</code></pre>\n\n<p>passing <em>this</em> toolchain.file to ndk <strong>20</strong> and an installation path\n<strong>does not</strong> work</p>\n\n<pre><code>set(CMAKE_SYSTEM_NAME Android)\nset(CMAKE_SYSTEM_VERSION 23) # API level\nset(CMAKE_ANDROID_ARCH_ABI arm64-v8a)\nset(CMAKE_ANDROID_NDK /home/franci/Apps/android-ndk-r20/)\nset(CMAKE_ANDROID_STL_TYPE c++_shared)\n\nset(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)\nset(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)\nset(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)\nset(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)\n</code></pre>\n"}, {"tags": ["c++", "qt", "debugging", "visual-studio-2017", "backtrace"], "comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 1, "creation_date": 1566988582, "post_id": 57690365, "comment_id": 101825310, "body": "An XPL file is basically a DLL. Do you have PDB or MAP files generated when you compile your code? If not, enable that. You can enable it for release build as well."}, {"owner": {"reputation": 12853, "user_id": 356726, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PhH4C.gif?s=128&g=1", "display_name": "Horst Walter", "link": "https://stackoverflow.com/users/356726/horst-walter"}, "reply_to_user": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 0, "creation_date": 1566989513, "post_id": 57690365, "comment_id": 101825832, "body": "For my local build I have a <code>win.pdb</code> - for that release most likely not. My local build should be close to that crashed build, only I build a debug version while the above is a release version. Wonder if my file somehow would help."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1566989570, "post_id": 57690365, "comment_id": 101825853, "body": "Almost for sure problem is in code poinnted by frame <code>7</code> or below it. If this is release build you have to find symbols file for that build to locate actual line of your code. Then you analyze that piece of code"}, {"owner": {"reputation": 12853, "user_id": 356726, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PhH4C.gif?s=128&g=1", "display_name": "Horst Walter", "link": "https://stackoverflow.com/users/356726/horst-walter"}, "edited": false, "score": 0, "creation_date": 1566989638, "post_id": 57690365, "comment_id": 101825898, "body": "For XPlane (commercial software) I do NOT have symbols. My hope was that seeing the stack in my code at least gives a hint."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1566989958, "post_id": 57690365, "comment_id": 101826054, "body": "Do you have a dump file? If yes then just open it in VS2017. Then click frame <code>7</code>. It will complain that it can&#39;t find symbols file (provide it). Then it will complain it can&#39;t find source code then you have to provide location of that source code (remember to checkout code in proper version). Now VS should be able to show you date which will allow you to find the issue."}, {"owner": {"reputation": 12853, "user_id": 356726, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PhH4C.gif?s=128&g=1", "display_name": "Horst Walter", "link": "https://stackoverflow.com/users/356726/horst-walter"}, "edited": false, "score": 0, "creation_date": 1566990141, "post_id": 57690365, "comment_id": 101826159, "body": "Unfortunately no dump file has been generate, we have backtrace.io support in our application, but it did not write one"}, {"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 1, "creation_date": 1566990323, "post_id": 57690365, "comment_id": 101826248, "body": "If you don&#39;t have the original debug symbols you can still just look at the function offsets of the public symbols and try to see the last function that came before it. That obviously can be very misleading. To get more accurate results you can open it in a reverse engineering tool like ghidra or IDA, if you have experience with either it&#39;s the easiest way I know to manually get some correlation between source and binary without dbgsymbols."}], "answers": [{"tags": [], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "is_accepted": true, "score": 1, "last_activity_date": 1567006027, "creation_date": 1567006027, "answer_id": 57695753, "question_id": 57690365, "link": "https://stackoverflow.com/questions/57690365/can-i-find-the-codeline-causing-the-crash-from-this-backtrace/57695753#57695753", "title": "Can I find the codeline causing the crash from this backtrace?", "body": "<ol>\n<li><p>Download and install <a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/debugger-download-tools\" rel=\"nofollow noreferrer\">WinDbg</a>.</p></li>\n<li><p>Get the XPL file that matches the release (if possible, e.g. download that version) and rename it to DLL.</p></li>\n<li><p>Choose \"Start debugging\" and then \"open dump file\", even if you don't have a dump file.</p></li>\n<li><p>Select the renamed DLL file</p></li>\n<li><p>Type <code>.symopt +40</code> in order to allow symbols to be loaded that do not match the binary.</p></li>\n<li><p>Type <code>.symfix</code> to get Microsoft symbols</p></li>\n<li><p>Type <code>.sympath+ &lt;path to your PDB&gt;</code></p></li>\n<li><p>Type <code>ln &lt;address&gt;</code></p></li>\n</ol>\n\n<p>That should give an output like</p>\n\n<pre><code>0:000&gt; ln 10009a9d\n(10009a90)   MNbasic!str_encode_num_str+0xd   |  (10009b80)   MNbasic!str_alpha_num_code\n</code></pre>\n\n<p>So instead of just an offset, you now have a method name and an offset. If the offset is still very large, the symbols may be too far off.</p>\n"}], "owner": {"reputation": 12853, "user_id": 356726, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PhH4C.gif?s=128&g=1", "display_name": "Horst Walter", "link": "https://stackoverflow.com/users/356726/horst-walter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 57695753, "answer_count": 1, "score": 0, "last_activity_date": 1567006027, "creation_date": 1566988245, "question_id": 57690365, "link": "https://stackoverflow.com/questions/57690365/can-i-find-the-codeline-causing-the-crash-from-this-backtrace", "title": "Can I find the codeline causing the crash from this backtrace?", "body": "<p>I have a backtrace like this, And I have the source code for <code>xswiftbus</code>. Is there a way to find out to which codeline the \"numbers\" belong?</p>\n\n<p>So could I figure out my callstack from that. \nEither in QtC or VS2017.</p>\n\n<p>I personally cannot reproduce the crash leading to this backtrace, but maybe I can at least see which functions are involved.</p>\n\n<pre><code>Backtrace is:\n0 00007FF8EE00BE1B E:\\X-Plane 11\\Resources\\plugins\\xswiftbus\\64\\win.xpl+000000000000BE1B ()\n1 00007FF8EE028D1D E:\\X-Plane 11\\Resources\\plugins\\xswiftbus\\64\\win.xpl+0000000000028D1D ()\n2 00007FF8EE00A64D E:\\X-Plane 11\\Resources\\plugins\\xswiftbus\\64\\win.xpl+000000000000A64D ()\n3 00007FF8EE028B19 E:\\X-Plane 11\\Resources\\plugins\\xswiftbus\\64\\win.xpl+0000000000028B19 ()\n4 00007FF8EE00F025 E:\\X-Plane 11\\Resources\\plugins\\xswiftbus\\64\\win.xpl+000000000000F025 ()\n5 00007FF9084E5202 E:\\X-Plane 11\\Resources\\plugins\\XPLM_64.dll+0000000000015202 ()\n6 00007FF9084DB362 E:\\X-Plane 11\\Resources\\plugins\\XPLM_64.dll+000000000000B362 ()\n7 00007FF7802156CA E:\\X-Plane 11\\X-Plane.exe+0000000000A456CA ()\n8 00007FF77F8AA69E E:\\X-Plane 11\\X-Plane.exe+00000000000DA69E ()\n</code></pre>\n"}, {"tags": ["c++", "postgresql", "gdal"], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 12437276, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-snGfDgGoM9w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfLTFIddn3Ml5z3Phz0G7oKQAOOWA/photo.jpg?sz=128", "display_name": "jim frank", "link": "https://stackoverflow.com/users/12437276/jim-frank"}, "is_accepted": true, "score": 0, "last_activity_date": 1574767776, "creation_date": 1574767776, "answer_id": 59049960, "question_id": 57690295, "link": "https://stackoverflow.com/questions/57690295/how-do-i-open-postgis-table-with-gdal-in-c/59049960#59049960", "title": "How do I open postGIS table with gdal in C++?", "body": "<p>I was also puzzled with this question for serveral hours.\nI have used the same kind of connection string.\nThis is enough to connect the postgresql.If this is not useful,Please Check something else.\nEnable the postgresql when you compile the gdal(in the nmake.opt file open PostGIS Libraries colume,set you libpq.lib file and include directory). \ncode:</p>\n\n<pre><code>    GDALAllRegister();\n    const char* path =\"PG:dbname=db host=localhost port=5432 user=postgres \n    password=password\";\n    GDALDataset *pDos =nullptr;\n    pDos = (GDALDataset *)GDALOpenEx(path,GDAL_OF_VECTOR,nullptr,nullptr,nullptr);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11988466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c474e37b39d2017c453d977e7aa51c1a?s=128&d=identicon&r=PG&f=1", "display_name": "cellsManiac", "link": "https://stackoverflow.com/users/11988466/cellsmaniac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 59049960, "answer_count": 1, "score": 0, "last_activity_date": 1574767776, "creation_date": 1566988019, "last_edit_date": 1566989503, "question_id": 57690295, "link": "https://stackoverflow.com/questions/57690295/how-do-i-open-postgis-table-with-gdal-in-c", "title": "How do I open postGIS table with gdal in C++?", "body": "<p>I'm completely new in gdal with C++, and want to open postgreSQL table(with geometry) with gdal API. I cannot find how to do that in tutorial of gdal.org. Below is what i was trying now. How can I do open table with GDALOpenEx for postgreSQL?</p>\n\n<pre><code>GDALAllRegister();\n\nGDALDataset* poDS;\n\n\nstd::string source = \"PG:host=111.111.111.111 port=5432 dbname=db user=user password=password\";\npoDS = (GDALDataset*) GDALOpenEx(source.c_str(), GDAL_OF_VERBOSE_ERROR | GDAL_OF_VECTOR, NULL, NULL, NULL);\n\n</code></pre>\n\n<blockquote>\n  <p><strong>ERROR 4</strong>: PG:host=host port=5432 dbname=db user=user password=XXXX No such file or directory</p>\n</blockquote>\n"}, {"tags": ["c++", "string", "vector", "containers"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1566987480, "post_id": 57690100, "comment_id": 101824718, "body": "why not <code>std::string</code> or <code>std::vector&lt;char&gt;</code> ?"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1566987558, "post_id": 57690100, "comment_id": 101824764, "body": "In your both examples the size of the array is variable - it&#39;s not going to work."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566987563, "post_id": 57690100, "comment_id": 101824765, "body": "you seem to be using a variable lenght array compiler extension, no this is not standard c++, whether inside a function or not"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1566987618, "post_id": 57690100, "comment_id": 101824785, "body": "possible duplicate: <a href=\"https://stackoverflow.com/questions/1887097/why-arent-variable-length-arrays-part-of-the-c-standard\" title=\"why arent variable length arrays part of the c standard\">stackoverflow.com/questions/1887097/&hellip;</a>"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1566987764, "post_id": 57690100, "comment_id": 101824865, "body": "<i>&quot;... does not allow static arrays of variable size...&quot;</i>  corrected: <i>&quot;... does not allow  arrays of variable size...&quot;</i>"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1566988034, "post_id": 57690100, "comment_id": 101825018, "body": "It is not a <i>static</i> array, rather an <i>automatic</i> one. And this is not a <i>declaration</i>, rather both a <i>declaration</i> and <i>definition</i>. Declaration only would be <code>extern char arr[]</code>."}, {"owner": {"reputation": 28085, "user_id": 1025391, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/76a088ae59745a0c4a377f362fec0fc4?s=128&d=identicon&r=PG", "display_name": "moooeeeep", "link": "https://stackoverflow.com/users/1025391/moooeeeep"}, "edited": false, "score": 0, "creation_date": 1566988259, "post_id": 57690100, "comment_id": 101825140, "body": "Related: <a href=\"https://stackoverflow.com/q/32832705/1025391\">stackoverflow.com/q/32832705/1025391</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1566989284, "post_id": 57690100, "comment_id": 101825715, "body": "It may seem like this could be valid because the value is hard-coded in the function calls (and thus &quot;known&quot; at compile time), but the source of the function&#39;s argument is irrelevant."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1566992337, "post_id": 57690100, "comment_id": 101827305, "body": "In your first example, <code>arr</code> has automatic storage duration, not static (assuming all three lines are within a function block - since the first two lines would also not compile otherwise).     Both examples involve a variable length array (VLA) and are therefore not valid C++ although, unfortunately, some C++ compilers support VLA&#39;s as a non-standard extension (e.g. because they are also C99 compilers).    Also, in standard C++, <code>main()</code> returns <code>int</code>, not <code>void</code>."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1566992562, "post_id": 57690100, "comment_id": 101827437, "body": "@MaximEgorushkin - a definition IS a type of declaration.       Not all declarations are definitions."}], "answers": [{"tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": false, "score": 0, "last_activity_date": 1566988332, "creation_date": 1566988332, "answer_id": 57690394, "question_id": 57690100, "link": "https://stackoverflow.com/questions/57690100/c-static-array-declaration-from-function-parameter/57690394#57690394", "title": "c++ static array declaration from function parameter", "body": "<p>This is not a valid C++ code:</p>\n\n<pre><code>char arr [size];\n</code></pre>\n\n<p>It may work on some compilers which has support of variable size array of C as an extension.</p>\n\n<p>The array also is not static it is automatic in your case if <code>size</code> was constant known at compile time.</p>\n\n<p>It is not valid anywhere neither function scope nor anywhere else.</p>\n\n<p>You can use std containers such as <code>vector</code> which has support for variable size or even <code>std::string</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11988480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c4537a723c42ea2bf8c0e71a997b96?s=128&d=identicon&r=PG&f=1", "display_name": "sfgr", "link": "https://stackoverflow.com/users/11988480/sfgr"}, "edited": false, "score": 0, "creation_date": 1566991180, "post_id": 57690431, "comment_id": 101826654, "body": "Using <code>std::string</code>or <code>std::vector</code> does not avoid heap allocation. When declaring array in function based on parameter It should be just simple subtract of that argument from stack pointer in function prolog, right?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 1, "user_id": 11988480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c4537a723c42ea2bf8c0e71a997b96?s=128&d=identicon&r=PG&f=1", "display_name": "sfgr", "link": "https://stackoverflow.com/users/11988480/sfgr"}, "edited": false, "score": 0, "creation_date": 1566991278, "post_id": 57690431, "comment_id": 101826713, "body": "@sfgr The C++ Standard did not include this feature from C."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1566988436, "creation_date": 1566988436, "answer_id": 57690431, "question_id": 57690100, "link": "https://stackoverflow.com/questions/57690100/c-static-array-declaration-from-function-parameter/57690431#57690431", "title": "c++ static array declaration from function parameter", "body": "<p>For starters you have no \"static arrays\". The arrays used in your examples have automatic storage duration. And C where variable length arrays are allowed requires that such arrays had automatic storage duration.</p>\n\n<p>Variable length arrays are not a standard feature of C++.</p>\n\n<p>Instead use the standard container <code>std::vector</code>. Or if you are using strings then use the standard class <code>std::string</code>.</p>\n\n<p>For example</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nvoid foo(int size)\n{\n    std::string s;\n    s.resize( size );\n}\n\nint main()\n{\n   foo(10);\n   foo(20);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 911, "user_id": 2788450, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Cw1q0.jpg?s=128&g=1", "display_name": "Jonas Greitemann", "link": "https://stackoverflow.com/users/2788450/jonas-greitemann"}, "is_accepted": false, "score": 0, "last_activity_date": 1566993262, "creation_date": 1566993262, "answer_id": 57691828, "question_id": 57690100, "link": "https://stackoverflow.com/questions/57690100/c-static-array-declaration-from-function-parameter/57691828#57691828", "title": "c++ static array declaration from function parameter", "body": "<p>When <code>foo</code> is called, a new stack frame is pushed on the stack which reserves just enough space for all the local variables in the scope of <code>foo</code> to fit. If another function <code>bar</code> were to be called from within <code>foo</code>, its stack frame would be pushed on top of <code>foo</code>'s. For this to work (efficiently), the size of the stack frame (by extension all local variables in <code>foo</code>, including the array <code>arr</code>) must be known to the compiler.</p>\n\n<p>When the functions return (first <code>bar</code>, then <code>foo</code>) their stack frames are popped in reverse order of their creation, and thus the stack memory remains defragmented at all times and the location of each and every local variable is determined at compile time, hence the relative efficiency. Heap memory can have a dynamic size but this comes at the cost of  having to allocate a suitably sized spot on the heap.</p>\n\n<p>You can also see this dichotomy in the standard library containers <code>std::vector</code> and <code>std::array</code>. <code>std::array</code> is effectively just a wrapper around C-style arrays and thus its size needs to be known at compile time and is therefore specified as a template parameter, e.g. <code>std::array&lt;char, 42&gt;</code> wraps <code>char[42]</code>. <strong>Unlike in your case, the compiler will (rightly) complain</strong> if you use a runtime variable as the second template parameter. You can however safely use any constant expression (e.g. result of a <code>constexpr</code> function).</p>\n"}], "owner": {"reputation": 1, "user_id": 11988480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c4537a723c42ea2bf8c0e71a997b96?s=128&d=identicon&r=PG&f=1", "display_name": "sfgr", "link": "https://stackoverflow.com/users/11988480/sfgr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 561, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1566993262, "creation_date": 1566987425, "last_edit_date": 1566988689, "question_id": 57690100, "link": "https://stackoverflow.com/questions/57690100/c-static-array-declaration-from-function-parameter", "title": "c++ static array declaration from function parameter", "body": "<p>I know that when I do this</p>\n\n<pre><code>int x;\ncin &gt;&gt; x;\nchar arr [x];\n</code></pre>\n\n<p>it is ill fomed according to c++ standard since c++ does not allow static arrays of variable size.</p>\n\n<p>My question is, if I declare static array in function scope with variable size from function parameter is it still ill formed? Or is it well defined in the standard?</p>\n\n<pre><code>void foo(int size)\n{\n    char arr [size];\n    // do something\n}\n\nvoid main()\n{\n   foo(10);\n   foo(20);\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "gcc", "strip"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 4, "creation_date": 1566987201, "post_id": 57689931, "comment_id": 101824580, "body": "You could try using <code>objdump --all-headers</code> to view the basic section info -- names, sizes etc."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1566987770, "post_id": 57689931, "comment_id": 101824869, "body": "@G.M. so... they are basically the same up until the symbold table, where the stripped version has no symbol table and the release version does... that makes sense since I used strip-all. But this does not show why the stripped one is larger (infact on-its-own it suggests that the release version is larger since it has a complete symbol table). I might try to do a diff on the whole objdump, but I expect that to be quite messy :o"}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1566988085, "post_id": 57689931, "comment_id": 101825047, "body": "I did an <code>objdumg -g</code> for debug symbols - the difference in the release and stripped output file size (of the objdump) was ~0.4Mb... so that tells me that 0.4Mb of debug symbols where not stripped... but ... why?"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1566988423, "post_id": 57689931, "comment_id": 101825225, "body": "Try running <code>strip -S -v testbin_release</code> to see what strip is modifying, and compare the output of <code>strip -v testbin_release_orig</code> to <code>strip -v testbin_release</code>, to see what symbols might be lingering. The main thing, I believe, is that debug symbols may well be stripped, but that doesn&#39;t mean that the debug binary doesn&#39;t contain additional instructions (e.g. <code>assert</code>&#39;s or whatever), which aren&#39;t stripped."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1566989040, "post_id": 57689931, "comment_id": 101825597, "body": "@EliasVanOotegem hmm.. the <code>strip -v ...</code> command just produces a single line of output for both: <code>copy from &#39;testbin_release&#39; [elf32-i386] to &#39;stBQgfVX&#39; [elf32-i386]</code>, except for the hash number the output is the same... is that what you meant?"}, {"owner": {"reputation": 67504, "user_id": 1230836, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/38PFC.jpg?s=128&g=1", "display_name": "Elias Van Ootegem", "link": "https://stackoverflow.com/users/1230836/elias-van-ootegem"}, "edited": false, "score": 0, "creation_date": 1566990137, "post_id": 57689931, "comment_id": 101826156, "body": "TBH, I can&#39;t remember what I was hoping <code>-v</code> to tell you :P... I&#39;m afraid I can&#39;t tell you where that extra .4Mb went to. My guess: the optimiser isn&#39;t performing in the exact same manner because of the debug symbols. Even though, when debugging, the code won&#39;t line up 100% because of the optimisation level, it&#39;s possible the <code>-g</code> flag keeps that to an acceptable minimum"}], "answers": [{"comments": [{"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1567020833, "post_id": 57692959, "comment_id": 101841881, "body": "Ah, I see - that makes a lot of sense : )"}], "tags": [], "owner": {"reputation": 20402, "user_id": 527987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jiIK.png?s=128&g=1", "display_name": "cosmin", "link": "https://stackoverflow.com/users/527987/cosmin"}, "is_accepted": true, "score": 4, "last_activity_date": 1566996932, "creation_date": 1566996932, "answer_id": 57692959, "question_id": 57689931, "link": "https://stackoverflow.com/questions/57689931/gcc-o2-is-smaller-then-gcc-o2-g-followed-by-strip-strip-all/57692959#57692959", "title": "gcc -O2 is smaller then gcc -O2 -g followed by strip --strip-all", "body": "<p>The difference is from the debug code.</p>\n\n<p>For an 1.7 MB executable you are probably using a library or two. Usually they have something like:</p>\n\n<pre><code>#ifdef _DEBUG\n    // some debug code\n#endif\n</code></pre>\n\n<p>Also common practice for big projects, so some of it may be your code as well.</p>\n\n<p><code>strip</code> removes only the symbols. The debug code stays.</p>\n"}], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 57692959, "answer_count": 1, "score": 1, "last_activity_date": 1566996932, "creation_date": 1566986889, "question_id": 57689931, "link": "https://stackoverflow.com/questions/57689931/gcc-o2-is-smaller-then-gcc-o2-g-followed-by-strip-strip-all", "title": "gcc -O2 is smaller then gcc -O2 -g followed by strip --strip-all", "body": "<p>I am building code that I want to produce release versions. However I also want to be able to debug <code>cores</code> if they crash.</p>\n\n<p>So I read that building with debug symbols can be used followed by producing a copy of the binary that you run strip on. Then you can take the core produced by the stripped binary (the released/customer binary) and then gdb this against your copy of the binary with debug symbols... </p>\n\n<p>So step one for me was to generate the binary, I do:</p>\n\n<ul>\n<li><code>gcc -O2 ... -o testbin_release_orig</code> (original release bin without symbols)</li>\n<li><code>gcc -O2 -g ... -o testbin_debug</code> (full debug binary)</li>\n<li><code>cp testbin_debug testbin_release</code></li>\n<li><code>strip --strip-all testbin_release</code> (stripped debug binary)</li>\n</ul>\n\n<p>This produces three files with different sizes:</p>\n\n<ul>\n<li>testbin_release_orig: ~1.7Mb</li>\n<li>testbin_debug: ~13Mb</li>\n<li>testbin_release: ~2.1Mb</li>\n</ul>\n\n<p>My question is, why is <code>testbin_release</code> not exactly the same size as <code>testbin_release_orig</code>? I am guessing that strip can't strip all the debug symbols that gcc adds. But there is about 0.4Mb of \"extra stuff\" - what does that consist of?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 97299, "user_id": 41360, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7bd2e50770e937761cfc3811a332bccc?s=128&d=identicon&r=PG", "display_name": "Vilx-", "link": "https://stackoverflow.com/users/41360/vilx"}, "edited": false, "score": 1, "creation_date": 1566986672, "post_id": 57689778, "comment_id": 101824272, "body": "Are you trying to use this to communicate between processes? Or is this for some sort of embedded device?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1566986693, "post_id": 57689778, "comment_id": 101824285, "body": "title and body are different questions. Title would be <code>int * p = 0x8f820dae</code>. For the body there is an answer given already"}, {"owner": {"reputation": 1812, "user_id": 5945883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f8de79f057abb63afb9ce7bee0ca51?s=128&d=identicon&r=PG&f=1", "display_name": "R2RT", "link": "https://stackoverflow.com/users/5945883/r2rt"}, "edited": false, "score": 1, "creation_date": 1566986966, "post_id": 57689778, "comment_id": 101824450, "body": "How many bytes should be written under <code>0x8f820dae</code>? Just one (<code>0x02</code>), two (<code>0x0002</code>) or more?"}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "edited": false, "score": 2, "creation_date": 1566988084, "post_id": 57689778, "comment_id": 101825046, "body": "What problem are you trying to solve by doing this? Turbo C++ is not C++ btw."}], "answers": [{"comments": [{"owner": {"reputation": 1510, "user_id": 5728157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ed0956efcbacb4f24eb25437fdb856b?s=128&d=identicon&r=PG&f=1", "display_name": "andresantacruz", "link": "https://stackoverflow.com/users/5728157/andresantacruz"}, "edited": false, "score": 0, "creation_date": 1566986654, "post_id": 57689846, "comment_id": 101824265, "body": "C++ tag though."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 1510, "user_id": 5728157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ed0956efcbacb4f24eb25437fdb856b?s=128&d=identicon&r=PG&f=1", "display_name": "andresantacruz", "link": "https://stackoverflow.com/users/5728157/andresantacruz"}, "edited": false, "score": 0, "creation_date": 1566986683, "post_id": 57689846, "comment_id": 101824278, "body": "Nothing wrong with using C-style casts in C++ when using POD types."}, {"owner": {"reputation": 1510, "user_id": 5728157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ed0956efcbacb4f24eb25437fdb856b?s=128&d=identicon&r=PG&f=1", "display_name": "andresantacruz", "link": "https://stackoverflow.com/users/5728157/andresantacruz"}, "edited": false, "score": 0, "creation_date": 1566986732, "post_id": 57689846, "comment_id": 101824308, "body": "Same way as nothing wrong to allocate memory using C allocators, however not recommended."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 1510, "user_id": 5728157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ed0956efcbacb4f24eb25437fdb856b?s=128&d=identicon&r=PG&f=1", "display_name": "andresantacruz", "link": "https://stackoverflow.com/users/5728157/andresantacruz"}, "edited": false, "score": 0, "creation_date": 1566986829, "post_id": 57689846, "comment_id": 101824358, "body": "@dedecos: there I would disagree - for POD casts we&#39;re just talking about syntax; for memory allocation you have two fundamentally different idioms."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11987787"}, "edited": false, "score": 0, "creation_date": 1566986899, "post_id": 57689846, "comment_id": 101824401, "body": "It is showing this error: Cannot cast from &#39;unsigned long&#39; to &#39;int *&#39;"}, {"owner": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 0, "creation_date": 1566986979, "post_id": 57689846, "comment_id": 101824462, "body": "I disagree with this for another reason. there is no mention of the size that is to be written to and <code>int</code> has an ambiguous size in memory. I&#39;d recommend <code>uint&lt;8&#47;16&#47;32&gt;</code> in this example"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 2568, "user_id": 8548828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C4qkl.png?s=128&g=1", "display_name": "Tarick Welling", "link": "https://stackoverflow.com/users/8548828/tarick-welling"}, "edited": false, "score": 1, "creation_date": 1566987059, "post_id": 57689846, "comment_id": 101824507, "body": "@TarickWellin: the OP specifically said &quot;int&quot; in the question - if he had specified a particular size of integer then I would have used the appropriate fixed size type."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1566987207, "post_id": 57689846, "comment_id": 101824585, "body": "@user11988476: what compiler are you using ? It <a href=\"https://godbolt.org/z/Z-_hre\" rel=\"nofollow noreferrer\">compiles for me without warnings or errors with gcc</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11987787"}, "edited": false, "score": 1, "creation_date": 1566987310, "post_id": 57689846, "comment_id": 101824643, "body": "@paul , turbo c++"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1566988160, "post_id": 57689846, "comment_id": 101825088, "body": "@user11988476 Time to upgrade then. There are several modern C++ compilers available at zero cost (to individuals). Turbo C++ dates from the last millennium."}, {"owner": {"reputation": 1995, "user_id": 4850111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26c63534a6d43180d0d0636e5c3a26b8?s=128&d=identicon&r=PG&f=1", "display_name": "nada", "link": "https://stackoverflow.com/users/4850111/nada"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566988675, "post_id": 57689846, "comment_id": 101825360, "body": "@john True, but if OP is developing for DOS, he might be forced to use an old compiler. Hopefully OP is not using Turbo C++ because of other reasons."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1566986932, "last_edit_date": 1566986932, "creation_date": 1566986609, "answer_id": 57689846, "question_id": 57689778, "link": "https://stackoverflow.com/questions/57689778/how-to-assign-a-specific-memory-address-to-a-pointer/57689846#57689846", "title": "How to assign a specific memory address to a pointer?", "body": "<p>Typically like this:</p>\n\n<pre><code>*(int *)0x8f820dae = 2;\n</code></pre>\n\n<p>(Or use a C++-style cast if you prefer.)</p>\n"}, {"tags": [], "owner": {"reputation": 1510, "user_id": 5728157, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6ed0956efcbacb4f24eb25437fdb856b?s=128&d=identicon&r=PG&f=1", "display_name": "andresantacruz", "link": "https://stackoverflow.com/users/5728157/andresantacruz"}, "is_accepted": true, "score": 7, "last_activity_date": 1566987351, "last_edit_date": 1566987351, "creation_date": 1566986617, "answer_id": 57689847, "question_id": 57689778, "link": "https://stackoverflow.com/questions/57689778/how-to-assign-a-specific-memory-address-to-a-pointer/57689847#57689847", "title": "How to assign a specific memory address to a pointer?", "body": "<p>Assuming this is a valid writable on your process memory address and by \"an integer\" you meant an <code>int</code>:</p>\n\n<pre><code>*reinterpret_cast&lt;int*&gt;(0x8f820dae) = 2;\n</code></pre>\n\n<p>Note that this will write the value <code>2</code> (0x00000002) to the address <code>0x8f820dae</code> (considering x86). Change the <code>&lt;int&gt;</code> type-parameter if you want to write a different numbers of bytes (i.e. <code>sizeof(int)</code> bytes will be written at the memory address).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11987787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "closed_date": 1567003505, "accepted_answer_id": 57689847, "answer_count": 2, "score": 1, "last_activity_date": 1566987351, "creation_date": 1566986440, "question_id": 57689778, "link": "https://stackoverflow.com/questions/57689778/how-to-assign-a-specific-memory-address-to-a-pointer", "closed_reason": "Needs details or clarity", "title": "How to assign a specific memory address to a pointer?", "body": "<p>Suppose I have a memory address '0x8f820dae' on my computer\nI want to store an integer value '2' in this specific memory location, how can I do that? </p>\n"}, {"tags": ["c++", "language-lawyer", "c++17", "variadic-templates", "template-argument-deduction"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 3, "creation_date": 1566987186, "post_id": 57689726, "comment_id": 101824567, "body": "<code>msvc</code> reports similar issue (I&#39;ve provided <a href=\"https://godbolt.org/z/V6Gbgk\" rel=\"nofollow noreferrer\">godbolt demo</a>). You need <code>laguage-lawyer</code>."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1566988248, "post_id": 57689726, "comment_id": 101825134, "body": "@MarekR - D&#39;oh! You&#39;re right: <code>language lawyer</code> is needed. Thanks. Anyway, seeing your demo, I see that <code>msvc</code> fail also with first call."}, {"owner": {"reputation": 247, "user_id": 1412788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OJxH4.png?s=128&g=1", "display_name": "camp0", "link": "https://stackoverflow.com/users/1412788/camp0"}, "edited": false, "score": 1, "creation_date": 1566988593, "post_id": 57689726, "comment_id": 101825315, "body": "Looks that with gcc 7.4 is working that code, Not sure if they introduce the issue on 8.1 intentionally or is a bug"}], "answers": [{"comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1567018032, "post_id": 57691972, "comment_id": 101840774, "body": "Interesting. I didn&#39;t know at all that you can&#39;t declare and expand a template pack in the same parameter list. If I understand correctly, you&#39;re citing another C++ standardization version. But I&#39;ve verified with the last C++17 draft and the same phrase (and the same example) are there. Just an objection: given that the point is that  you can&#39;t declare and expand a template pack in the same parameter list, isn&#39;t bugged also g++? Take in count that g++ compile <code>foo(bar&lt;0, 1&gt;{});</code>. If the error is in the declaration of <code>foo()</code>, how can a compiler correctly compile every instantiation of <code>foo()</code>?"}, {"owner": {"reputation": 5201, "user_id": 11638718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a4a973e6a1f850f94f71bf09a47f6?s=128&d=identicon&r=PG&f=1", "display_name": "\u5eb7\u6853\u744b", "link": "https://stackoverflow.com/users/11638718/%e5%ba%b7%e6%a1%93%e7%91%8b"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1567022228, "post_id": 57691972, "comment_id": 101842403, "body": "@max66 When you declare and expand a template pack for <b>function</b> both gcc and clang can compile, but msvc will not compile. When you declare <b>class</b> they all will not compile. <a href=\"https://godbolt.org/z/6_14ne\" rel=\"nofollow noreferrer\">Live demo</a>"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1567026671, "post_id": 57691972, "comment_id": 101844133, "body": "Sorry but I&#39;m highly confused... I&#39;m added <a href=\"https://stackoverflow.com/questions/57700049/g-and-clang-are-both-bugged-with-template-function-parameter-pack-expansion\">another question</a>. It seems to me that, given the statement and the example you&#39;re found, or I misunderstand the statement, or there is a special rule for template functions or both g++ and clang++ are bugged."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 5201, "user_id": 11638718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/359a4a973e6a1f850f94f71bf09a47f6?s=128&d=identicon&r=PG&f=1", "display_name": "\u5eb7\u6853\u744b", "link": "https://stackoverflow.com/users/11638718/%e5%ba%b7%e6%a1%93%e7%91%8b"}, "edited": false, "score": 0, "creation_date": 1567027077, "post_id": 57691972, "comment_id": 101844294, "body": "@\u5eb7\u6853\u744b - Regarding functions, what you observed seems confirmed in my new question. Anyway, I am increasingly confused."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 2, "creation_date": 1567046356, "post_id": 57691972, "comment_id": 101848042, "body": "@max66 Updated the answer. Hope it is helpful now."}], "tags": [], "owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "is_accepted": true, "score": 10, "last_activity_date": 1567046307, "last_edit_date": 1567046307, "creation_date": 1566993725, "answer_id": 57691972, "question_id": 57689726, "link": "https://stackoverflow.com/questions/57689726/g-and-clang-different-behaviour-deducing-variadic-template-auto-values/57691972#57691972", "title": "g++ and clang++ different behaviour deducing variadic template `auto` values", "body": "<p>None of the three compilers is correct.</p>\n\n<p>From <a href=\"https://timsong-cpp.github.io/cppwp/temp.param#17\" rel=\"nofollow noreferrer\">[temp.param]/17</a>:</p>\n\n<blockquote>\n  <p>If a <em>template-parameter</em> is a <em>type-parameter</em> with an ellipsis prior to its optional <em>identifier</em> or is a <em>parameter-declaration</em> that declares a pack ([dcl.fct]), then the <em>template-parameter</em> is a template parameter pack. A template parameter pack that is a <em>parameter-declaration</em> whose type contains one or more unexpanded packs is a pack expansion. ... <strong>A template parameter pack that is a pack expansion shall not expand a template parameter pack declared in the same <em>template-parameter-list</em></strong>. [ Example:</p>\n  \n  <p>...</p>\n\n<pre><code>template &lt;class... T, T... Values&gt;              // error: Values expands template type parameter\n  struct static_array;                          // pack T within the same template parameter list\n</code></pre>\n  \n  <p>\u2014 end example ]</p>\n</blockquote>\n\n<p>So the code is ill-formed, even without the line <code>foo(bar&lt;0, 1L&gt;{});</code>.</p>\n\n<p>There is already a Clang <a href=\"https://bugs.llvm.org/show_bug.cgi?id=24625\" rel=\"nofollow noreferrer\">bug report</a> and a GCC <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=67397\" rel=\"nofollow noreferrer\">bug report</a>. </p>\n"}], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 2, "accepted_answer_id": 57691972, "answer_count": 1, "score": 16, "last_activity_date": 1567046307, "creation_date": 1566986275, "last_edit_date": 1566992027, "question_id": 57689726, "link": "https://stackoverflow.com/questions/57689726/g-and-clang-different-behaviour-deducing-variadic-template-auto-values", "title": "g++ and clang++ different behaviour deducing variadic template `auto` values", "body": "<p>Another \"who's right between g++ and clang++?\" </p>\n\n<p>This time I'm convinced it's a g++ bug, but I ask for a confirm from standard gurus.</p>\n\n<p>Given the following code</p>\n\n<pre><code>template &lt;template &lt;auto...&gt; class Cnt,\n          typename ... Types,\n          Types ... Vals&gt;\nvoid foo (Cnt&lt;Vals...&gt;)\n { }\n\ntemplate &lt;auto ...&gt;\nstruct bar\n { };\n\nint main ()\n {\n   foo(bar&lt;0, 1&gt;{});  // compile both\n   foo(bar&lt;0, 1L&gt;{}); // only clang++ compile; error from g++\n }\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/V6Gbgk\" rel=\"noreferrer\">Live demo</a></p>\n\n<p>clang++ (8.0.0, by example) compile and link without problem where g++ (9.2.0, by example) gives the following error compiling the second <code>foo()</code> (but not the first) call </p>\n\n<pre><code>prog.cc: In function 'int main()':\nprog.cc:16:20: error: no matching function for call to 'foo(bar&lt;0, 1&gt;)'\n   16 |    foo(bar&lt;0, 1L&gt;{}); // only clang++ compile; error from g++\n      |                    ^\nprog.cc:6:6: note: candidate: 'template&lt;template&lt;auto ...&lt;anonymous&gt; &gt; class Cnt, class ... Types, Types ...Vals&gt; void foo(Cnt&lt;Vals ...&gt;)'\n    6 | void foo (Cnt&lt;Vals...&gt;)\n      |      ^~~\nprog.cc:6:6: note:   template argument deduction/substitution failed:\nprog.cc:16:20: note:   mismatched types 'int' and 'long int'\n   16 |    foo(bar&lt;0, 1L&gt;{}); // only clang++ compile; error from g++\n      |                    ^\nprog.cc:16:20: note:   'bar&lt;0, 1&gt;' is not derived from 'Cnt&lt;Vals ...&gt;'\n</code></pre>\n\n<p>If I understand correctly, g++ require that the <code>Types...</code> of the <code>Vals...</code> coincide where clang++ accept that the <code>Vals...</code> are of different <code>Types...</code>.</p>\n\n<p>Who's right? </p>\n\n<p><strong>-- EDIT --</strong></p>\n\n<p>As pointed by Marek R (thanks) also MSVC (v19.22) fail to compile.</p>\n\n<p>But, if I understand correctly, fail also compiling the first <code>foo()</code> call with the following error</p>\n\n<pre><code>&lt;source&gt;(13): error C2672: 'foo': no matching overloaded function found\n&lt;source&gt;(13): error C2893: Failed to specialize function template 'void foo(Cnt&lt;Vals...&gt;)'\n&lt;source&gt;(13): note: With the following template arguments:\n&lt;source&gt;(13): note: 'Cnt=bar'\n&lt;source&gt;(13): note: 'Types={}'\n&lt;source&gt;(13): note: 'Vals={0, 1}'\n</code></pre>\n\n<p><strong>-- EDIT 2 --</strong></p>\n\n<p>camp0 observes (thanks) that g++ compile this code until version 7.4.</p>\n\n<p>A bug introduced from 8.1 or is bugged my code and g++ has corrected his code from 8.1? </p>\n"}, {"tags": ["c++", "c++20"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1566986275, "post_id": 57689696, "comment_id": 101824028, "body": "You can&#39;t use views on rvalues, so this will fail at compile time."}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1566986951, "post_id": 57689696, "comment_id": 101824437, "body": "That&#39;s a curious limitation. I have my own range based library ( company owned so can&#39;t share :( ) but it handles rvalues and lvalues as two seperate cases. lvalues are held using non owning references. rvalues are held by moving the value in and owning it. I was hoping to migrate to std::range at some point."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1566987153, "post_id": 57689696, "comment_id": 101824554, "body": "Tough luck, I&#39;m afraid. Can&#39;t really point you to the exact wording or reasoning behind it, but I remember that during my brief encounter with Eric Niebler (the author of range-v3), he stated that <a href=\"https://stackoverflow.com/questions/57090147/why-cant-i-reverse-a-split-range-using-range-v3?noredirect=1#comment100894827_57090147\">&quot;<i>You can&#39;t pipe a temporary container into a view adaptor because it would create dangling references. Save the vector into a named variable first</i>&quot;</a>, which, well, implies that ranges do not work with rvalue sources :&lt;"}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1566987710, "post_id": 57689696, "comment_id": 101824833, "body": "My trick is that I <i>always</i> store the LHS by value rather than reference. But the pipe operator distinguishes rvalues from lvalues. rvalues are moved in. lvalues are wrapped with <code>boost::make_iterator_range</code> which itself is stored by value. Essentially a ref wrapper."}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1566987918, "post_id": 57689696, "comment_id": 101824963, "body": "This gives an idea of how I did it. <a href=\"https://gist.github.com/bradphelan/80fc63e7051a6bd71c15a6743400f02a\" rel=\"nofollow noreferrer\">gist.github.com/bradphelan/80fc63e7051a6bd71c15a6743400f02a</a>"}], "answers": [{"comments": [{"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1566997931, "post_id": 57689823, "comment_id": 101830604, "body": "Would there be a performance penalty to range-v3 if instead of views storing by reference they always stored by value. It would then be up to the pipe operator to wrap lvalues in a reference wrapper. Would the indirection hurt performance?"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1566998772, "post_id": 57689823, "comment_id": 101831134, "body": "@bradgonesurfing for sure. Why would a <i>view</i> copy something? Forget about performance for a second and focus on the intention. <i>Views</i> never own something."}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1567000143, "post_id": 57689823, "comment_id": 101832026, "body": "If you return a view from a function and that view has a source range that is a local variable with the current implementation of range you are not able to return the view. For example the simple trivial example <a href=\"https://wandbox.org/permlink/BGKVWWYfqakSPnHp\" rel=\"nofollow noreferrer\">wandbox.org/permlink/BGKVWWYfqakSPnHp</a> compiles and then segfaults at runtime. If you try to move the vector into the view it fails to compile."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1567000259, "post_id": 57689823, "comment_id": 101832101, "body": "@bradgonesurfing and what does that have to do with that I said? This is an example of returning local objects by reference. Bad idea. We are all aware of it. Views were chosen to be lightweight and cheap to copy - these are the consequences."}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1567000481, "post_id": 57689823, "comment_id": 101832249, "body": "@fureeish You have stated that &quot;views never own something&quot; The question I asked just above was &quot;why&quot;. I gave an example of a function returning a view and I am aware that it segfaults and know why. The solution would be to use <code>std::move(vi)</code> which would tell the operator to move the local variable. Like <a href=\"https://wandbox.org/permlink/g7DsrM7EnSe5zKNg\" rel=\"nofollow noreferrer\">wandbox.org/permlink/g7DsrM7EnSe5zKNg</a> but this does not compile. My question is <code>why is this not supported</code> It is a usecase that is useful."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1567000569, "post_id": 57689823, "comment_id": 101832294, "body": "@bradgonesurfing you said that <i>The question I asked just above was &quot;why&quot;</i>. And I provided an answer - &quot;<i>Views were chosen to be lightweight and cheap to copy - these are the consequences</i>&quot;. Regarding your second question - <code>why is this not supported</code>, you have to ask the C++ comittee, not me :&gt;"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 5, "last_activity_date": 1566988074, "last_edit_date": 1566988074, "creation_date": 1566986552, "answer_id": 57689823, "question_id": 57689696, "link": "https://stackoverflow.com/questions/57689696/can-you-return-range-based-views-from-functions-in-c2a/57689823#57689823", "title": "Can you return range based views from functions in c++2a?", "body": "<blockquote>\n  <p>Can you return range based views from functions in c++2a?</p>\n</blockquote>\n\n<p>You can.</p>\n\n<p>But returning view to a local variable or temporary would be useless since behaviour of accessing through the view to the destroyed object would be undefined. Same as returning an iterator, pointer or a reference. </p>\n\n<blockquote>\n  <p>I say I want to move a and then wrap it with a view. What is expected to happen?</p>\n</blockquote>\n\n<p>At least going by what ranges-v3 does, it static asserts that the operand is an lvalue, which fails the compilation.</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1567007660, "post_id": 57695367, "comment_id": 101836537, "body": "The defining characteristic of &quot;view&quot; is...actually I&#39;m not sure what it is nowadays - constant-time destruction? But the laziness of views does come with a cost, so if you need to gobble up the underlying container anyway, maybe views is the wrong choice and you want actions instead."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 3, "creation_date": 1567011026, "post_id": 57695367, "comment_id": 101838022, "body": "Copying that type is dangerous though."}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1567074426, "post_id": 57695367, "comment_id": 101858396, "body": "You would want a move constructor so that when this is in a pipeline the vector is not copied."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1567082583, "post_id": 57695367, "comment_id": 101862977, "body": "@bradgonesurfing Yes, Deduplicator already made this comment and I didn&#39;t feel like writing them out so I just left a comment."}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1567083053, "post_id": 57695367, "comment_id": 101863276, "body": "I&#39;m going to mark this as the solution because it looks like the work around required to support my use case. It would be nice if the solution was fleshed out a bit and robustness issues checked. I might drive by later and do that if you don&#39;t mind.  I&#39;m thinking of something now like <code>return std::move(v) | views::own() | views::reverse()</code>"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1567013852, "last_edit_date": 1567013852, "creation_date": 1567004740, "answer_id": 57695367, "question_id": 57689696, "link": "https://stackoverflow.com/questions/57689696/can-you-return-range-based-views-from-functions-in-c2a/57695367#57695367", "title": "Can you return range based views from functions in c++2a?", "body": "<p>Views in range-v3/C++20 ranges are non-owning by design. <code>reverse</code> is always going to be non-owning, so returning that directly to a local range is going to dangle. There's no \"owning view\" concept in the library.</p>\n\n<p>You can do it by hand though, by writing a custom type that has both the container and the view as members:</p>\n\n<pre><code>auto Foo() {\n    std::vector&lt;int&gt; a = {1, 2, 3, 4, 5};\n\n    struct X {\n        std::vector&lt;int&gt; a;\n        decltype(a | views::reverse) view = a | views::reverse;\n\n        // plus copy/move ctor/assignment\n\n        auto begin() { return view.begin(); }\n        auto end()   { return view.end(); }\n    };\n    return X{std::move(a)};\n}\n</code></pre>\n\n<p>This could probably be generalized. </p>\n"}], "owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 57695367, "answer_count": 2, "score": 3, "last_activity_date": 1567013852, "creation_date": 1566986172, "question_id": 57689696, "link": "https://stackoverflow.com/questions/57689696/can-you-return-range-based-views-from-functions-in-c2a", "title": "Can you return range based views from functions in c++2a?", "body": "<p>Now I can't find any compiler yet that has this support for the <a href=\"https://en.cppreference.com/w/cpp/compiler_support\" rel=\"nofollow noreferrer\">\"one ranges proposal\"</a> so this is more of an academic question. I'm curious if the following will work like I expect</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;ranges&gt;\n\nauto Foo (){\n    std::vector&lt;int&gt; a = {1,2,3,4,5};\n    return std::move(a) | std::reverse;\n}\n\n\nint  main(){\n   for(auto a : Foo()){\n       std::cout &lt;&lt; a &lt;&lt; std::endl;\n   }\n}\n</code></pre>\n\n<p>with an expected output of</p>\n\n<pre><code>5\n4\n3\n2\n1\n</code></pre>\n\n<p>The question has to do with the ownership semantics of the range adaptors. I say I want to move <strong>a</strong> and then wrap it with a <strong>view</strong>. What is expected to happen?</p>\n\n<ol>\n<li>Not compile.</li>\n<li>Compile but maybe crash with a memory corruption</li>\n<li>Work as expected</li>\n</ol>\n"}, {"tags": ["c++", "visual-studio", "profiler"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 2, "creation_date": 1566986249, "post_id": 57689460, "comment_id": 101824014, "body": "Change your visual studio configuration to generate pdb files on Release mode too."}, {"owner": {"reputation": 1935, "user_id": 1479628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28786d848d6d02f535c37eb41c9336c4?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/1479628/frank"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1566994028, "post_id": 57689460, "comment_id": 101828286, "body": "Indeed, using Project Properties -&gt; Linker -&gt; Debugging and setting &quot;Generate Debug Info&quot; to &quot;/DEBUG&quot; shows me function names. However, I still get a message &quot;source information is not available&quot; if I click on the function. Do you also know how to turn this on?"}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1566994167, "post_id": 57689460, "comment_id": 101828362, "body": "Normally the source information is embedded in the PDB file, and on the same machine it should automatically find the source. If not you need to set the profiler&#39;s source path somehow. Does it find the source if you just debug?"}, {"owner": {"reputation": 1935, "user_id": 1479628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28786d848d6d02f535c37eb41c9336c4?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/1479628/frank"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1566994217, "post_id": 57689460, "comment_id": 101828390, "body": "Yes it does show it in Debug mode."}, {"owner": {"reputation": 1935, "user_id": 1479628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28786d848d6d02f535c37eb41c9336c4?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/1479628/frank"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1566994724, "post_id": 57689460, "comment_id": 101828676, "body": "It appears that only the source code of the static lib is missing. The test executable code is shown."}, {"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1566994775, "post_id": 57689460, "comment_id": 101828706, "body": "Did you build the lib with debug information as well, then? Common mistake to make."}, {"owner": {"reputation": 1935, "user_id": 1479628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28786d848d6d02f535c37eb41c9336c4?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/1479628/frank"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1566994958, "post_id": 57689460, "comment_id": 101828810, "body": "Yep, that fixed it. Setting Project properties -&gt; C/C++ -&gt; General, and then &quot;Debug Information format&quot; to &quot;Program database&quot; makes it work as expected. Thank you!"}, {"owner": {"reputation": 1935, "user_id": 1479628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28786d848d6d02f535c37eb41c9336c4?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/1479628/frank"}, "reply_to_user": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1567001027, "post_id": 57689460, "comment_id": 101832580, "body": "Also disabling optimizations for speed seems to impact the output. Some functions that were missing are shown when optimizations are disabled"}, {"owner": {"reputation": 1090, "user_id": 1983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bba922326537fd12144b9a2587f742f?s=128&d=identicon&r=PG", "display_name": "ssbssa", "link": "https://stackoverflow.com/users/1983398/ssbssa"}, "edited": false, "score": 0, "creation_date": 1568716083, "post_id": 57689460, "comment_id": 102354533, "body": "Some functions were missing? Do you mean they were inlined?"}], "owner": {"reputation": 1935, "user_id": 1479628, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28786d848d6d02f535c37eb41c9336c4?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/1479628/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 840, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566985516, "creation_date": 1566985516, "question_id": 57689460, "link": "https://stackoverflow.com/questions/57689460/load-symbols-in-release-build-in-visual-studio-performance-profiler", "title": "Load symbols in release build in Visual Studio Performance Profiler", "body": "<p>I have a C++ project that builds a lib and a test executable that calls that lib in Visual studio 2019 community edition. Now I would like to profile the lib to see where the bottlenecks are. When I use the Performance Profiler in debug mode, it shows exactly which functions are being called and where in de code this  but when I use Release mode, all I see are hex adresses of functions like \"Test.exe!0x0000013f216503\". I guess the profiler cannot find the .pdb files.</p>\n\n<p>How do I get this to work?</p>\n"}, {"tags": ["c++", "c", "tcl"], "comments": [{"owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "edited": false, "score": 0, "creation_date": 1566984615, "post_id": 57689172, "comment_id": 101823130, "body": "Please have a quick checkup with the articles in the help section and rephrase and format your question. Your question is unreadable, sry"}], "answers": [{"tags": [], "owner": {"reputation": 119001, "user_id": 301832, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/965220a70d38e6a29466f44cdb4f804e?s=128&d=identicon&r=PG", "display_name": "Donal Fellows", "link": "https://stackoverflow.com/users/301832/donal-fellows"}, "is_accepted": true, "score": 1, "last_activity_date": 1566985451, "creation_date": 1566985451, "answer_id": 57689441, "question_id": 57689172, "link": "https://stackoverflow.com/questions/57689172/when-redirecting-output-of-a-command-in-tcl-to-file-file-is-getting-generated-i/57689441#57689441", "title": "When Redirecting output of a command in Tcl to file, file is getting generated in DOS format", "body": "<p>Tcl lets you control the line ending conversion for a channel (file handle, socket, etc.) using the <code>chan configure</code> command (also called <code>fconfigure</code>). In particular, you want to configure the <code>-translation</code> option to be either <code>lf</code> (for use line-feeds) or <code>binary</code> (which sets a few other things as well). Tcl <em>ignores</em> the setting in C stdio, as it accesses the OS directly to do I/O, and the line ending translation isn't done at that point.</p>\n\n<p>Put one of these in your script, depending on what exactly you're doing:</p>\n\n<pre><code>chan configure stdout -translation lf\n</code></pre>\n\n<pre><code>chan configure stdout -translation binary\n</code></pre>\n\n<p>You can also set the channel translation from C:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>/* Guess what 'chan configure' is a wrapper around? */\nTcl_SetChannelOption(interp, stdoutChannel, \"-translation\", \"binary\");\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 9567390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fa37ec5967b70625137847bb535d566?s=128&d=identicon&r=PG&f=1", "display_name": "mehak", "link": "https://stackoverflow.com/users/9567390/mehak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "closed_date": 1567001059, "accepted_answer_id": 57689441, "answer_count": 1, "score": 0, "last_activity_date": 1566985451, "creation_date": 1566984531, "last_edit_date": 1566984642, "question_id": 57689172, "link": "https://stackoverflow.com/questions/57689172/when-redirecting-output-of-a-command-in-tcl-to-file-file-is-getting-generated-i", "closed_reason": "Needs details or clarity", "title": "When Redirecting output of a command in Tcl to file, file is getting generated in DOS format", "body": "<p>I want to develop a command 'redirect' in Tcl, which takes as an argument command to be executed and redirects output of command to the file provided by the user. I am using below code and it is working well. The only problem with  this code is that the file is getting created in DOS format. How do i get rid of this as the format should be Unix style not DOS?</p>\n\n<p>I tried setting :set binary in VI editor and other workarounds as\nvim +\"argdo setlocal ff=unix\" +wqa \nHowever, it could not find any reason why is this file getting created in DOS format. </p>\n\n<pre><code>Tcl_Channel stdoutChannel = Tcl_GetStdChannel(TCL_STDOUT);\n\nTcl_Channel stderrChannel = Tcl_GetStdChannel(TCL_STDERR);\n\nif(stdoutChannel) {\n\n  Tcl_Flush(stdoutChannel);\n\n}\n\nif(stderrChannel) {\n\n  Tcl_Flush(stderrChannel);\n\n}\n\nFILE* filePtr = fopen(filename, \"wb\");\n\nint pfd = fileno(filePtr);\n\nint saved = dup(1);\n\nclose(1);\n\nTcl_Obj* commandResult = Tcl_NewStringObj(command,strlen(command));\n\ndup2(pfd,STDOUT_FILENO);\n\nTcl_EvalObj(TBXslaveInterp,commandResult);\n\nclose(pfd);\n\nfflush(stdout);\n\n// restore it back\n\ndup2(saved, 1);\n\nclose(saved);\n\nreturn TCL_OK;\n</code></pre>\n\n<h2>OUTPUT</h2>\n\n<pre><code>Command executed : \nredirect myfile {puts \"Inside Tcl\"}\n\nViewing File in VI at the bottom shows:\n\n\"myfile\" [dos] 1L, 12C\n\n\n cat myfile \n\n Inside Tcl^M\n</code></pre>\n\n<p>Notice ^M is printed when cat operation performed. This is because of the DOS style format in which the file is saved.</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1567171792, "post_id": 57689119, "comment_id": 101895520, "body": "Your code seems to works fine whatever it is supposed to do. I bet your absolute path looks like this: <code>&quot;C:\\SomePath\\SomeFile.bmp&quot;</code> when it should look like this: <code>&quot;C:\\\\SomePath\\\\SomeFile.bmp&quot;</code>. Backslashes need to be escaped in C. BTW you don&#39;t check if <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-loadimagea\" rel=\"nofollow noreferrer\"><code>LoadImage</code></a> succeeds. It returns <code>NULL</code> is it was not successful. Read the documentation."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1567175252, "post_id": 57689119, "comment_id": 101897446, "body": "if <code>LoadImage</code> returns <code>NULL</code>, the file could not be loaded for some reason, in that case call <a href=\"https://docs.microsoft.com/windows/win32/api/errhandlingapi/nf-errhandlingapi-getlasterror\" rel=\"nofollow noreferrer\"><code>GetLastError()</code></a> to find out why <code>LoadImage</code> has failed."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1567176668, "post_id": 57689119, "comment_id": 101898262, "body": "Please update the code in the question. I mean the new code that tests if <code>LoadImage</code> was successful."}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "edited": false, "score": 0, "creation_date": 1567176908, "post_id": 57689119, "comment_id": 101898404, "body": "Change another bmp picture and try again."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1567177516, "post_id": 57689119, "comment_id": 101898714, "body": "<a href=\"https://stackoverflow.com/posts/57689119/edit\">edit</a> your question and show your new code with <code>GetLastError</code>."}, {"owner": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1568168472, "post_id": 57689119, "comment_id": 102185712, "body": "I know why it is! It&#39;s l change the .jpg file with a .bmp suffix."}], "answers": [{"comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1566997309, "post_id": 57689864, "comment_id": 101830220, "body": "The code from Microsoft page is very old, from the days of 8-bit (or less) graphics card. New 32-bit graphics cards don&#39;t need to worry about palettes."}], "tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": false, "score": -1, "last_activity_date": 1566986982, "last_edit_date": 1566986982, "creation_date": 1566986657, "answer_id": 57689864, "question_id": 57689119, "link": "https://stackoverflow.com/questions/57689119/why-the-c-code-couldnt-display-bitmapcode-from-textbook/57689864#57689864", "title": "Why the C++ code couldn&#39;t display bitmap?(code from textbook)", "body": "<p>Calling <code>LoadImage</code> is not enough. It is painted black, because EVERY color is black. ALso, you need to repaint the window. You should load palette, content of which which may depend on your context.\nExample from <a href=\"https://support.microsoft.com/en-gb/help/158898/howto-how-to-use-loadimage-to-read-a-bmp-file\" rel=\"nofollow noreferrer\">https://support.microsoft.com/en-gb/help/158898/howto-how-to-use-loadimage-to-read-a-bmp-file</a></p>\n\n<pre><code>BOOL LoadBitmapFromBMPFile( LPTSTR szFileName, HBITMAP *phBitmap,\n   HPALETTE *phPalette )\n   {\n\n   BITMAP  bm;\n\n   *phBitmap = NULL;\n   *phPalette = NULL;\n\n   // Use LoadImage() to get the image loaded into a DIBSection\n   *phBitmap = (HBITMAP)LoadImage( NULL, szFileName, IMAGE_BITMAP, 0, 0,\n               LR_CREATEDIBSECTION | LR_DEFAULTSIZE | LR_LOADFROMFILE );\n   if( *phBitmap == NULL )\n     return FALSE;\n\n   // Get the color depth of the DIBSection\n   GetObject(*phBitmap, sizeof(BITMAP), &amp;bm );\n   // If the DIBSection is 256 color or less, it has a color table\n   if( ( bm.bmBitsPixel * bm.bmPlanes ) &lt;= 8 )\n   {\n   HDC           hMemDC;\n   HBITMAP       hOldBitmap;\n   RGBQUAD       rgb[256];\n   LPLOGPALETTE  pLogPal;\n   WORD          i;\n\n   // Create a memory DC and select the DIBSection into it\n   hMemDC = CreateCompatibleDC( NULL );\n   hOldBitmap = (HBITMAP)SelectObject( hMemDC, *phBitmap );\n   // Get the DIBSection's color table\n   GetDIBColorTable( hMemDC, 0, 256, rgb );\n   // Create a palette from the color tabl\n   pLogPal = (LOGPALETTE *)malloc( sizeof(LOGPALETTE) + (256*sizeof(PALETTEENTRY)) );\n   pLogPal-&gt;palVersion = 0x300;\n   pLogPal-&gt;palNumEntries = 256;\n   for(i=0;i&lt;256;i++)\n   {\n     pLogPal-&gt;palPalEntry[i].peRed = rgb[i].rgbRed;\n     pLogPal-&gt;palPalEntry[i].peGreen = rgb[i].rgbGreen;\n     pLogPal-&gt;palPalEntry[i].peBlue = rgb[i].rgbBlue;\n     pLogPal-&gt;palPalEntry[i].peFlags = 0;\n   }\n   *phPalette = CreatePalette( pLogPal );\n   // Clean up\n   free( pLogPal );\n   SelectObject( hMemDC, hOldBitmap );\n   DeleteDC( hMemDC );\n   }\n   else   // It has no color table, so use a halftone palette\n   {\n   HDC    hRefDC;\n\n   hRefDC = GetDC( NULL );\n   *phPalette = CreateHalftonePalette( hRefDC );\n   ReleaseDC( NULL, hRefDC );\n   }\n   return TRUE;\n\n   }\n</code></pre>\n\n<p>Next, you have to piant it to window:</p>\n\n<pre><code>case WM_PAINT:\n   {\n     PAINTSTRUCT   ps;\n     HBITMAP       hBitmap, hOldBitmap;\n     HPALETTE      hPalette, hOldPalette;\n     HDC           hDC, hMemDC;\n     BITMAP        bm;\n\n   hDC = BeginPaint( hWnd, &amp;ps );\n\n   if( LoadBitmapFromBMPFile( szFileName, &amp;hBitmap, &amp;hPalette ) )\n   {\n      GetObject( hBitmap, sizeof(BITMAP), &amp;bm );\n      hMemDC = CreateCompatibleDC( hDC );\n      hOldBitmap = (HBITMAP)SelectObject( hMemDC, hBitmap );\n      hOldPalette = SelectPalette( hDC, hPalette, FALSE );\n      RealizePalette( hDC );\n\n      BitBlt( hDC, 0, 0, bm.bmWidth, bm.bmHeight,\n              hMemDC, 0, 0, SRCCOPY );\n\n      SelectObject( hMemDC, hOldBitmap );\n      DeleteObject( hBitmap );\n      SelectPalette( hDC, hOldPalette, FALSE );\n      DeleteObject( hPalette );\n   }\n   EndPaint( hWnd, &amp;amp;ps );\n\n   }\n   break;\n</code></pre>\n\n<p>The example there is clumsy, because it loads image every time window is painted. You must want to reorganize code so image will be loaded only once. But it's what you should do - to paint it within window event handler, because every time windows is moved, resized or otherwise invalidated (obscured), it requires repainting.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1567163273, "post_id": 57690101, "comment_id": 101891374, "body": "Thank you a lot! l&#39;m very appreciative to your kindness for my stupid question.l have tried the method but it still only has a window with black background.I speak English terribly!"}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "reply_to_user": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1567393520, "post_id": 57690101, "comment_id": 101939056, "body": "@Cewbie Please see the update of my answer."}, {"owner": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1568168393, "post_id": 57690101, "comment_id": 102185690, "body": "I know why it is! It&#39;s l change the .jpg file with a .bmp suffix."}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "reply_to_user": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1568168511, "post_id": 57690101, "comment_id": 102185719, "body": "@Cewbie You can&#39;t change the suffix directly. You need to use special image conversion tools to convert the image format."}, {"owner": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1568168748, "post_id": 57690101, "comment_id": 102185750, "body": "Yeah, .jpg still be opened as a jpg with .bmp suffix.Thank you a lot."}], "tags": [], "owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "is_accepted": true, "score": 3, "last_activity_date": 1568162401, "last_edit_date": 1568162401, "creation_date": 1566987426, "answer_id": 57690101, "question_id": 57689119, "link": "https://stackoverflow.com/questions/57689119/why-the-c-code-couldnt-display-bitmapcode-from-textbook/57690101#57690101", "title": "Why the C++ code couldn&#39;t display bitmap?(code from textbook)", "body": "<p>Running your code, put aside the code logic first, just to show the BMP image, you did not add the correct image path.</p>\n\n<p>You can try to add the absolute path of the picture.</p>\n\n<p>Like this:</p>\n\n<pre><code>DrawBitmap(\"C:\\\\Users\\\\strives\\\\source\\\\C.bmp\",x,y); //This is my picture path. Please enter your picture path correctly.\n</code></pre>\n\n<p><strong>Updated:</strong> </p>\n\n<p>I retested the code with MinGW, GCC 4.9.2 compiler. It can display the image correctly. Look at my attached GIF picture.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qqAKw.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qqAKw.gif\" alt=\"1\"></a></p>\n\n<p>From the results of your feedback later, <code>Loadimage</code> return NULL, you use <code>GetLasterror</code> to test the return value of 0. In theory, if the image failed to load, it will return 2. Maybe you can use <code>int error = GetLasterror()</code> to retest the return value. At the same time, you need to make sure that the BMP image you added is correct, opened, and in BMP format. picture</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1567163866, "post_id": 57694404, "comment_id": 101891609, "body": "Thanks!Now I have used the absolute path but it&#39;s still not working.The IDE is Dev C++."}, {"owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "reply_to_user": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1567189971, "post_id": 57694404, "comment_id": 101903471, "body": "if you put a breakpoint after the call to LoadImage does image contain a non-zero HBITMAP?"}, {"owner": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1567217154, "post_id": 57694404, "comment_id": 101909104, "body": "the value of image is (HBITMAP)0x0"}, {"owner": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1567217521, "post_id": 57694404, "comment_id": 101909135, "body": "image is zero,GetLastError() is zero too."}, {"owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "reply_to_user": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1567262494, "post_id": 57694404, "comment_id": 101917091, "body": "That means it didn\u2019t load"}, {"owner": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "edited": false, "score": 0, "creation_date": 1568168501, "post_id": 57694404, "comment_id": 102185717, "body": "I know why it is! It&#39;s l change the .jpg file with a .bmp suffix."}], "tags": [], "owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "is_accepted": false, "score": 2, "last_activity_date": 1567001452, "creation_date": 1567001452, "answer_id": 57694404, "question_id": 57689119, "link": "https://stackoverflow.com/questions/57689119/why-the-c-code-couldnt-display-bitmapcode-from-textbook/57694404#57694404", "title": "Why the C++ code couldn&#39;t display bitmap?(code from textbook)", "body": "<p>The reason the bitmap is not being displayed is most likely because you have the bitmap file in the wrong place. Build this code in Release, look in the project directory, find the actual release executable, copy \"C.bmp\" into the directory where the executable is and run the executable by double-clicking on it. You will see that it works.</p>\n\n<p>You do not say which IDE you are using, but, assuming some flavor of Visual Studio, to get this working by launching from the IDE, unless you have changed settings, by default the \"Working Directory\" Visual Studio uses for debugging is the project directory. If you look at where your code is in the file system, find where the solution file is -- the .sln file. You should see a directory that is a sibling of the solution file that is named whatever you named your project. Put \"C.bmp\" in there, at the top-level, and try launching from Visual Studio.</p>\n\n<p>Beyond this issue this code has a lot of problems, by the way. To get you started, it is a bad idea to reload the bitmap from the file system every time you want to paint it.</p>\n"}], "owner": {"reputation": 5, "user_id": 11988068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fc9073efc5f4566ed6c022a3d2461b?s=128&d=identicon&r=PG&f=1", "display_name": "Qian Xin", "link": "https://stackoverflow.com/users/11988068/qian-xin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "closed_date": 1567148538, "accepted_answer_id": 57690101, "answer_count": 3, "score": -5, "last_activity_date": 1568162401, "creation_date": 1566984349, "last_edit_date": 1567224211, "question_id": 57689119, "link": "https://stackoverflow.com/questions/57689119/why-the-c-code-couldnt-display-bitmapcode-from-textbook", "closed_reason": "Needs details or clarity", "title": "Why the C++ code couldn&#39;t display bitmap?(code from textbook)", "body": "<p>I'm trying to accompelish a example in textbook.Although I'm sure l type right code,but there's only a window with black background,no bitmap \"C.bmp\" having been loading.</p>\n\n<p>Cause I don't master the C++ and winAPI,I just try to make the total code correct and no warning.And I surfer the Internet to find a meaningful answer but there's no code like me.I'm puzzled.</p>\n\n<p>I have tried the absolute path,but it still doesn't work.\nimage returns (HBITMAP)0x0 and GetLastError returns zero.\nconst char* filename\uff0cbut the program still happens\nMinGW,gcc 4.9.2 compiler</p>\n\n<pre><code>void DrawBitmap(const char *filename,int x,int y)\n{\n    //load the bitmap image\n    HBITMAP image = (HBITMAP)LoadImage(0,filename,IMAGE_BITMAP,\n    0,0,LR_LOADFROMFILE);\n    GetLastError();\n    //read the bitmap's properties\n    BITMAP bm;\n    GetObject(image,sizeof(BITMAP),&amp;bm);\n    //create a device context for the bitmap\n    HDC hdcImage = CreateCompatibleDC(device);\n    SelectObject(hdcImage,image);\n    //draw the bitmap to the window (bit block transfer)\n    BitBlt(\n        device,                 //destination device context    \n        x,y,                    //x,y location on destination\n        bm.bmWidth,bm.bmHeight, //width,height of source bitmap\n        hdcImage,               //source bitmap device context\n        0,0,                    //start x,y on source bitmap\n        SRCCOPY);               //blit method\n    //delete the device context and bitmap\n    DeleteDC(hdcImage);\n    DeleteObject((HBITMAP)image);\n}\nvoid Game_Run()\n{\n    if(gameover == true) return;\n    //get the drawing surface\n    RECT rect;\n    GetClientRect(window,&amp;rect);\n    //draw bitmap at random location\n    int x = rand() % (rect.right -rect.left);\n    int y = rand() % (rect.bottom -rect.top);\n    const char* filename = \"E:\\\\Study\\\\time\\\\Code\\\\C++\\\\gameloop\\\\bmp.bmp\";\n    DrawBitmap(filename,x,y);\n}\n</code></pre>\n\n<p>I just want to load bitmap and know why it is.</p>\n"}, {"tags": ["c++", "ios", "xcode", "compilation", "linker"], "comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1566984000, "post_id": 57688977, "comment_id": 101822792, "body": "What happens in the constructor of <code>BuiltinOpResolver</code>?"}, {"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1566984138, "post_id": 57688977, "comment_id": 101822870, "body": "There is also <a href=\"https://github.com/tensorflow/tensorflow/issues/28345\" rel=\"nofollow noreferrer\">this</a>."}, {"owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "edited": false, "score": 1, "creation_date": 1566984245, "post_id": 57688977, "comment_id": 101822917, "body": "please consider posting your code here, providing code outside of SO is consider not good practice --&gt; <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a>"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 5, "creation_date": 1566984270, "post_id": 57688977, "comment_id": 101822933, "body": "When your code has undefined behaviour then just moving code around in memory can be the difference between a crash and working."}, {"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566985686, "post_id": 57688977, "comment_id": 101823662, "body": "@john this sounds very valid. When changing code and trying to get closer to the cause i see that it crashes on different threads in different regions of the app. Whats the approach to find out the cause?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566986847, "post_id": 57688977, "comment_id": 101824367, "body": "@MartinMlostek I would try eliminating sections of code. If the errors go away then there&#39;s a good chance that the eliminated code contained the error. Use this approach to try and narrow down to a small a section of code as possible. The problem is that you have multiple threads, so getting consistent results might be tricky."}, {"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566986938, "post_id": 57688977, "comment_id": 101824427, "body": "@john thanks. Can it be the just the fact that another library is linked leads to a problem that was already there (e.g. threading issue) but it was not leading to crashes before?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566987916, "post_id": 57688977, "comment_id": 101824961, "body": "@MartinMlostek It&#39;s possible."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1566990280, "post_id": 57688977, "comment_id": 101826226, "body": "There are many possibilities and, without representative code, nobody can help you.  Undefined behaviour can result in jumps to execute apparently unreachable code - that&#39;s one reason of several that safety-critical development encourages removal of &quot;dead code&quot; (aka code that is not expected to be executed) to ensure no artifacts of it remain in an executable and able to be accidentally executed.    More common, however, is that there is a path of execution in your program that you are not aware of, that causes the code to be executed even though you believe it is unreachable."}, {"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 0, "creation_date": 1567030721, "post_id": 57688977, "comment_id": 101845280, "body": "Whenever you see this sort of unaccountable error, it&#39;s a good idea to try running the same scenario using the Address Sanitizer and the Undefined Behavior sanitizer.  These are available in the Diagnostics tab of the Run Scheme in Xcode.  The Address sanitizer works by instrumenting code, so you&#39;ll probably want to build the tensorflow code locally with ASAN turned on for that build as well."}, {"owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "reply_to_user": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 0, "creation_date": 1567062468, "post_id": 57688977, "comment_id": 101852234, "body": "@JimIngham do you have an idea how to set those flags within a make file?"}, {"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 0, "creation_date": 1567100079, "post_id": 57688977, "comment_id": 101872411, "body": "It&#39;s mostly passing <code>-fsanitize=address</code>, but there are some other options too. I&#39;d just make a simple C++ CommandLine project in Xcode, build it both ways see how the compile &amp; link lines changed.  The simplest way to see the full compiler &amp; linker invocations for a project in Xcode is to use Terminal, cd to the directory with the Xcode project and run <code>xcodebuild -configuration Debug</code>, then run it again like: <code>xcodebuild -configuration Debug ---enableAddressSanitizer YES</code>.  There are also flags for UBSAN&amp; TSAN."}], "owner": {"reputation": 2205, "user_id": 3290623, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/92ac216026ab4480156041a4fb68bff6?s=128&d=identicon&r=PG", "display_name": "Martin Mlostek", "link": "https://stackoverflow.com/users/3290623/martin-mlostek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1567004066, "creation_date": 1566983869, "last_edit_date": 1567003637, "question_id": 57688977, "link": "https://stackoverflow.com/questions/57688977/commenting-line-that-is-never-executed-leads-to-crash", "title": "Commenting line that is never executed leads to crash", "body": "<p>I am a bit lost and have a strange situation. Here some information about the setup</p>\n\n<ul>\n<li>iOS app with several frameworks of static and dynamic nature</li>\n<li>mainThread plus audioThread to process incoming buffer</li>\n</ul>\n\n<p>Then I have a framework that is linked but not used. So the code inside this framework is actually never executed (but supposed to in the future). Now when I comment out a specific line inside the framework (that is never executed) this leads to a crash inside the audio thread.</p>\n\n<p>Thats the crash <code>exc_bad_access (code=2)</code></p>\n\n<p>And maybe it helps, thats the line commented out inside a <code>.cpp</code> file <code>tflite::ops::builtin::BuiltinOpResolver resolver;</code></p>\n\n<p>Now my generic question is. What could a the reasons for this? The simple fact that code is compiled leads to changed behaviour in completely unrelated parts or the app?</p>\n\n<h3>Update 1</h3>\n\n<p>The BuiltinOpResolver seems to be this (i have a prebuilt framework here, not including the source directly) <a href=\"https://github.com/rockchip-linux/tensorflow/blob/e1877bb157a775d76ec8c0b68467aef6d053bbb2/tensorflow/contrib/lite/kernels/register.cc\" rel=\"nofollow noreferrer\">https://github.com/rockchip-linux/tensorflow/blob/e1877bb157a775d76ec8c0b68467aef6d053bbb2/tensorflow/contrib/lite/kernels/register.cc</a></p>\n"}, {"tags": ["c++", "arrays", "iterator", "size", "c++17"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1566984343, "post_id": 57688948, "comment_id": 101822969, "body": "That&#39;s because <code>a</code> in <code>print</code> is not an array, it&#39;s a pointer. There is no such thing in C++ (or C) as a <i>raw array parameter</i>."}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1566984066, "post_id": 57689016, "comment_id": 101822836, "body": "Also, <code>int[]</code> is actually a pointer to an array element, when it is a function parameter."}, {"owner": {"reputation": 2017, "user_id": 141997, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/45e73c6db0f959c3ceb4410d316c5d4b?s=128&d=identicon&r=PG", "display_name": "DuncanACoulter", "link": "https://stackoverflow.com/users/141997/duncanacoulter"}, "edited": false, "score": 0, "creation_date": 1566984098, "post_id": 57689016, "comment_id": 101822848, "body": "So this is one of those cases where are arrays are basically like pointers except when they aren&#39;t?"}, {"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "reply_to_user": {"reputation": 2017, "user_id": 141997, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/45e73c6db0f959c3ceb4410d316c5d4b?s=128&d=identicon&r=PG", "display_name": "DuncanACoulter", "link": "https://stackoverflow.com/users/141997/duncanacoulter"}, "edited": false, "score": 1, "creation_date": 1566984168, "post_id": 57689016, "comment_id": 101822880, "body": "@DuncanACoulter Exactly. See also <a href=\"https://stackoverflow.com/questions/33291624/why-do-arrays-in-c-decay-to-pointers\">here</a> for example."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 2017, "user_id": 141997, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/45e73c6db0f959c3ceb4410d316c5d4b?s=128&d=identicon&r=PG", "display_name": "DuncanACoulter", "link": "https://stackoverflow.com/users/141997/duncanacoulter"}, "edited": false, "score": 0, "creation_date": 1566985765, "post_id": 57689016, "comment_id": 101823708, "body": "@DuncanACoulter I find it best to first memorise that a function parameter may not be an array (reference to an array I possible though). Then that array parameters can be declared, but that declaration is adjusted to be a pointer and not an array at all."}, {"owner": {"reputation": 2017, "user_id": 141997, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/45e73c6db0f959c3ceb4410d316c5d4b?s=128&d=identicon&r=PG", "display_name": "DuncanACoulter", "link": "https://stackoverflow.com/users/141997/duncanacoulter"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1566989144, "post_id": 57689016, "comment_id": 101825642, "body": "@eerorika  I should have suspected it was a pointer-decay thing. As soon as this answer came in I realized what was going on."}], "tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": true, "score": 2, "last_activity_date": 1566984153, "last_edit_date": 1566984153, "creation_date": 1566983985, "answer_id": 57689016, "question_id": 57688948, "link": "https://stackoverflow.com/questions/57688948/why-is-iterators-stdsize-not-working-with-raw-array-parameters/57689016#57689016", "title": "Why is &lt;iterator&gt;&#39;s std::size not working with raw array parameters", "body": "<p>The first invocation of <code>std::size</code> uses this function template signature (#3 in the overload set <a href=\"https://en.cppreference.com/w/cpp/iterator/size\" rel=\"nofollow noreferrer\">here</a>):</p>\n\n<pre><code>template &lt;class T, std::size_t N&gt;\nconstexpr std::size_t size(const T (&amp;array)[N]) noexcept;\n</code></pre>\n\n<p>where the argument <code>array</code> has not decayed into a pointer. It's a raw array with the size encoded in its type. When you pass such an array to a function that accepts an <code>int[]</code> (or <code>int*</code>, that doesn't matter), the array decays into a pointer and the size is no longer part of the type. That's why <code>std::size(a)</code> can't compile. Concisely:</p>\n\n<blockquote>\n  <p>Why is <code>&lt;iterator&gt;</code>'s <code>std::size</code> not working with raw array parameters?</p>\n</blockquote>\n\n<p>It is, but you're trying to use it with a pointer, not an array parameter.</p>\n"}], "owner": {"reputation": 2017, "user_id": 141997, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/45e73c6db0f959c3ceb4410d316c5d4b?s=128&d=identicon&r=PG", "display_name": "DuncanACoulter", "link": "https://stackoverflow.com/users/141997/duncanacoulter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 57689016, "answer_count": 1, "score": 1, "last_activity_date": 1566984153, "creation_date": 1566983765, "question_id": 57688948, "link": "https://stackoverflow.com/questions/57688948/why-is-iterators-stdsize-not-working-with-raw-array-parameters", "title": "Why is &lt;iterator&gt;&#39;s std::size not working with raw array parameters", "body": "<p>I usually work in an environment where the highest supported version of modern C++ is C++14. I was experimenting with <code>std::size</code> from <code>&lt;iterator&gt;</code> in c++17 and came across the following issue / problem / lack of understanding on my part. </p>\n\n<p>In the following code snippet the use of of <code>size(a)</code> in <code>main</code> works correctly but the usage in <code>print</code> refuses to compile stating that <code>no matching function for call to 'size(int*&amp;)'</code> exists.</p>\n\n<p>I know there are other, better ways of doing this but I would like to know why it works in the one context and not the other.</p>\n\n<p>For what its worth I used the following <a href=\"https://www.tutorialspoint.com/compile_cpp11_online.php\" rel=\"nofollow noreferrer\">online compiler</a> and simply turned the <code>-std=c++17</code> flag on.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\n\nusing namespace std;\n\nvoid print(int a[])\n{\n   for(int i = 0; i &lt; size(a); i++)\n        cout &lt;&lt; a[i] &lt;&lt; endl;\n}\n\nint main() \n{\n    int a[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};\n\n    cout &lt;&lt; \"Directly\" &lt;&lt; endl;\n    for(int i = 0; i &lt; size(a); i++)\n        cout &lt;&lt; a[i] &lt;&lt; endl;\n\n    cout &lt;&lt; \"Via function\" &lt;&lt; endl;\n    print(a);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1566985347, "post_id": 57689047, "comment_id": 101823491, "body": "Without using .c_str(), can I declare member variables with std::wstring and also parameters in SetParams with const std::wstring &amp;"}, {"owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1566985408, "post_id": 57689047, "comment_id": 101823524, "body": "Because I got an instruction to not use .c_str(). As we are storing this string into the member variable."}, {"owner": {"reputation": 59, "user_id": 11983682, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vb1aC4kwe_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduZ936GyUEfo--C-HXruOKU38KQA/photo.jpg?sz=128", "display_name": "Alexey Medvedev", "link": "https://stackoverflow.com/users/11983682/alexey-medvedev"}, "reply_to_user": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "edited": false, "score": 0, "creation_date": 1566988732, "post_id": 57689047, "comment_id": 101825391, "body": "Yes, sure, thats a prefferable way."}], "tags": [], "owner": {"reputation": 59, "user_id": 11983682, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vb1aC4kwe_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduZ936GyUEfo--C-HXruOKU38KQA/photo.jpg?sz=128", "display_name": "Alexey Medvedev", "link": "https://stackoverflow.com/users/11983682/alexey-medvedev"}, "is_accepted": false, "score": 0, "last_activity_date": 1566984107, "creation_date": 1566984107, "answer_id": 57689047, "question_id": 57688786, "link": "https://stackoverflow.com/questions/57688786/errorc2664void-iverifysetparamsvoid-cannot-convert-argument-1-from-std/57689047#57689047", "title": "Error\tC2664\t&#39;void IVerify::SetParams(void)&#39;: cannot convert argument 1 from &#39;std::wstring&#39; to &#39;wchar_t *&#39;", "body": "<p>There are two parts of the right answer:\n1. You need to use pReader->SetParams(oemPathKey.<strong>c_str()</strong>, L\"read\");\n2. Your approach is not safe, you trying to keep pointer to string in the class members.\nBut if the original string will go out of scope then you will receive Access Vioalation, if you are lucky :). So in SetParams you need to copy source string to the class members uisng for example wscpy (I recommend something like wscpy_s), also you need correctly handle allocation/deallocation for string copy.</p>\n"}], "owner": {"reputation": 181, "user_id": 11868802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cb315c27582f9a174c79dfc5f59fd5a?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul Coder", "link": "https://stackoverflow.com/users/11868802/john-paul-coder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566984107, "creation_date": 1566983285, "question_id": 57688786, "link": "https://stackoverflow.com/questions/57688786/errorc2664void-iverifysetparamsvoid-cannot-convert-argument-1-from-std", "title": "Error\tC2664\t&#39;void IVerify::SetParams(void)&#39;: cannot convert argument 1 from &#39;std::wstring&#39; to &#39;wchar_t *&#39;", "body": "<p>When I am calling SetParams function from the below function, it is throwing an error \"cannot convert argument 1 from 'std::wstring' to 'wchar_t *'\"</p>\n\n<p>Can anyone please help me on this?</p>\n\n<pre><code>int main()\n{\n\nIVerify* pReader = new BCReader();\nstd::wstring oemPathKey;\n\npReader-&gt;SetParams(oemPathKey, L\"read\");\n\ndelete pReader;\nreturn 0;\n}\n\n\nvoid BCReader::SetParams(wchar_t* wszParams, wchar_t* wszParamType)\n{\n    m_wszParamType = wszParamType;\n    m_wszParams = wszParams;\n}\n\nThe member variables are declared like as shown below:\n\nclass IVerify\n{\nprivate:\n\nwchar_t* m_wszParams;\nwchar_t* m_wszParamType;\n};\n</code></pre>\n"}, {"tags": ["c++", "sockets", "visual-c++", "cursor", "bitmapimage"], "answers": [{"comments": [{"owner": {"reputation": 306, "user_id": 8203729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43645d8f08494a1e7634ce94939975de?s=128&d=identicon&r=PG&f=1", "display_name": "Krish", "link": "https://stackoverflow.com/users/8203729/krish"}, "edited": false, "score": 0, "creation_date": 1566991756, "post_id": 57690157, "comment_id": 101826979, "body": "I tried this way if I copy HICON in to HBITMAP it copy icon image and rest of part will be black color, We cant make mask in HBITMAP."}, {"owner": {"reputation": 20402, "user_id": 527987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jiIK.png?s=128&g=1", "display_name": "cosmin", "link": "https://stackoverflow.com/users/527987/cosmin"}, "reply_to_user": {"reputation": 306, "user_id": 8203729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43645d8f08494a1e7634ce94939975de?s=128&d=identicon&r=PG&f=1", "display_name": "Krish", "link": "https://stackoverflow.com/users/8203729/krish"}, "edited": false, "score": 0, "creation_date": 1566992580, "post_id": 57690157, "comment_id": 101827449, "body": "This is because you need to manipulate the image to extract its data. There is no masking available, you need the raw RGB bytes (the actual image)."}, {"owner": {"reputation": 306, "user_id": 8203729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43645d8f08494a1e7634ce94939975de?s=128&d=identicon&r=PG&f=1", "display_name": "Krish", "link": "https://stackoverflow.com/users/8203729/krish"}, "edited": false, "score": 0, "creation_date": 1566993109, "post_id": 57690157, "comment_id": 101827757, "body": "Yes your right but while reading RGB values of actual image from bitmap it reads RGB(0,0,0) -&gt; black color also, Imagine if I read RGB values of actual image from bitmap and exclude black color this is not a generic right."}, {"owner": {"reputation": 20402, "user_id": 527987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jiIK.png?s=128&g=1", "display_name": "cosmin", "link": "https://stackoverflow.com/users/527987/cosmin"}, "reply_to_user": {"reputation": 306, "user_id": 8203729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43645d8f08494a1e7634ce94939975de?s=128&d=identicon&r=PG&f=1", "display_name": "Krish", "link": "https://stackoverflow.com/users/8203729/krish"}, "edited": false, "score": 0, "creation_date": 1566993565, "post_id": 57690157, "comment_id": 101828010, "body": "Use the GetDIBits() function from my answer. You need to include the transparency information, otherwise it defaults to black."}, {"owner": {"reputation": 20402, "user_id": 527987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jiIK.png?s=128&g=1", "display_name": "cosmin", "link": "https://stackoverflow.com/users/527987/cosmin"}, "reply_to_user": {"reputation": 306, "user_id": 8203729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43645d8f08494a1e7634ce94939975de?s=128&d=identicon&r=PG&f=1", "display_name": "Krish", "link": "https://stackoverflow.com/users/8203729/krish"}, "edited": false, "score": 0, "creation_date": 1566994094, "post_id": 57690157, "comment_id": 101828326, "body": "Please read all the links in my answer. Your current approach gives separate color and mask which cannot be used."}, {"owner": {"reputation": 306, "user_id": 8203729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43645d8f08494a1e7634ce94939975de?s=128&d=identicon&r=PG&f=1", "display_name": "Krish", "link": "https://stackoverflow.com/users/8203729/krish"}, "edited": false, "score": 0, "creation_date": 1566994968, "post_id": 57690157, "comment_id": 101828817, "body": "Yes I didnt fallow this approach but I have my POC with your approach, From your answer using DrawIconEx to get icon in to bitmap added diFlags = DI_MASK and using this link  &quot;<a href=\"https://docs.microsoft.com/en-us/windows/win32/gdi/storing-an-image\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/gdi/storing-an-image</a>&zwnj;&#8203;&quot;   to save BITMAP here they use GetDIBits() but getting white color now no black. .... im almost there pls what property i have to set to make transparent ?"}, {"owner": {"reputation": 20402, "user_id": 527987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jiIK.png?s=128&g=1", "display_name": "cosmin", "link": "https://stackoverflow.com/users/527987/cosmin"}, "reply_to_user": {"reputation": 306, "user_id": 8203729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43645d8f08494a1e7634ce94939975de?s=128&d=identicon&r=PG&f=1", "display_name": "Krish", "link": "https://stackoverflow.com/users/8203729/krish"}, "edited": false, "score": 0, "creation_date": 1566997972, "post_id": 57690157, "comment_id": 101830636, "body": "There is no DrawIconEx in my answer and no mask. The transparency issue seems like a separate question. My answer is for converting HICON / HCURSOR to byte array."}, {"owner": {"reputation": 306, "user_id": 8203729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43645d8f08494a1e7634ce94939975de?s=128&d=identicon&r=PG&f=1", "display_name": "Krish", "link": "https://stackoverflow.com/users/8203729/krish"}, "edited": false, "score": 0, "creation_date": 1566998459, "post_id": 57690157, "comment_id": 101830944, "body": "Im talking about this &quot;<a href=\"https://stackoverflow.com/questions/7375003/how-to-convert-hicon-to-hbitmap-in-vc\" title=\"how to convert hicon to hbitmap in vc\">stackoverflow.com/questions/7375003/&hellip;</a>&quot; in the solution they are using DrawIconEx to take icon to bitmap"}, {"owner": {"reputation": 306, "user_id": 8203729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43645d8f08494a1e7634ce94939975de?s=128&d=identicon&r=PG&f=1", "display_name": "Krish", "link": "https://stackoverflow.com/users/8203729/krish"}, "edited": false, "score": 0, "creation_date": 1566998583, "post_id": 57690157, "comment_id": 101831022, "body": "Thank you Cosmin your solution helps me a lot, I can fix this, by end I will post my answer here so that it helps to others."}], "tags": [], "owner": {"reputation": 20402, "user_id": 527987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9jiIK.png?s=128&g=1", "display_name": "cosmin", "link": "https://stackoverflow.com/users/527987/cosmin"}, "is_accepted": false, "score": 1, "last_activity_date": 1566993590, "last_edit_date": 1566993590, "creation_date": 1566987600, "answer_id": 57690157, "question_id": 57688782, "link": "https://stackoverflow.com/questions/57688782/copy-hicon-hcursor-in-to-byte-array/57690157#57690157", "title": "Copy HICON / HCURSOR in to Byte Array", "body": "<p>HICON and HCURSOR are system handles, so they work only on the current machine.</p>\n\n<p>Over network only the actual data can be sent (bitmap bytes). Then that machine can create its own handles for it.</p>\n\n<p>Using the HBITMAP bytes is the correct approach. You can find some details here:\n<a href=\"https://stackoverflow.com/questions/7375003/how-to-convert-hicon-to-hbitmap-in-vc\">How to convert HICON to HBITMAP in VC++?</a></p>\n\n<p>You can get the raw HBITMAP bits using <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/wingdi/nf-wingdi-getdibits\" rel=\"nofollow noreferrer\">GetDIBits()</a>. More information: <a href=\"https://stackoverflow.com/questions/333559/c-win32-how-to-get-the-alpha-channel-from-an-hbitmap\">C++/Win32: How to get the alpha channel from an HBITMAP?</a></p>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 8203729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43645d8f08494a1e7634ce94939975de?s=128&d=identicon&r=PG&f=1", "display_name": "Krish", "link": "https://stackoverflow.com/users/8203729/krish"}, "is_accepted": false, "score": 0, "last_activity_date": 1568871346, "last_edit_date": 1568871346, "creation_date": 1568359289, "answer_id": 57919028, "question_id": 57688782, "link": "https://stackoverflow.com/questions/57688782/copy-hicon-hcursor-in-to-byte-array/57919028#57919028", "title": "Copy HICON / HCURSOR in to Byte Array", "body": "<blockquote>\n  <p>Below Code works only for color cursor for monochrome cursor use to\n  convert 16bpp bitmap to 32bpp bitmap and use same code its works.</p>\n</blockquote>\n\n<pre><code>    bool saveToMemory(HICON hIcon, BYTE* buffer, DWORD&amp; nSize)\n    {\n        if (hIcon == 0)\n            return FALSE;\n\n        int * pImageOffset;\n        int nNumIcons = 1;\n        nSize = 0;\n        // copy iconheader first of all\n        ICONHEADER iconheader;\n\n        // Setup the icon header\n        iconheader.idReserved = 0; // Must be 0\n        iconheader.idType = 1; // Type 1 = ICON (type 2 = CURSOR)\n        iconheader.idCount = nNumIcons; // number of ICONDIRs\n\n        // save to memory\n        memcpy(buffer, &amp;iconheader, sizeof(iconheader));\n        nSize += sizeof(iconheader); // update\n\n        //\n        // Leave space for the IconDir entries\n        //\n        nSize += sizeof(ICONDIR);\n\n        pImageOffset = (int *)malloc(nNumIcons * sizeof(int));\n\n        ICONINFO iconInfo;\n        BITMAP bmpColor, bmpMask;\n\n        GetIconBitmapInfo(hIcon, &amp;iconInfo, &amp;bmpColor, &amp;bmpMask);\n\n        // record the file-offset of the icon image for when we write the icon directories\n        pImageOffset[0] = nSize;\n\n        // bitmapinfoheader + colortable\n        //WriteIconImageHeader(hFile, &amp;bmpColor, &amp;bmpMask);\n        BITMAPINFOHEADER biHeader;\n        UINT nImageBytes;\n\n        // calculate how much space the COLOR and MASK bitmaps take\n        nImageBytes = NumBitmapBytes(&amp;bmpColor) + NumBitmapBytes(&amp;bmpMask);\n\n        // write the ICONIMAGE to disk (first the BITMAPINFOHEADER)\n        ZeroMemory(&amp;biHeader, sizeof(biHeader));\n\n        // Fill in only those fields that are necessary\n        biHeader.biSize = sizeof(biHeader);\n        biHeader.biWidth = bmpColor.bmWidth;\n        biHeader.biHeight = bmpColor.bmHeight * 2; // height of color+mono  \n        biHeader.biPlanes = bmpColor.bmPlanes;\n        biHeader.biBitCount = bmpColor.bmBitsPixel;\n        biHeader.biSizeImage = nImageBytes;\n\n        // write the BITMAPINFOHEADER\n        //WriteFile(hFile, &amp;biHeader, sizeof(biHeader), &amp;nWritten, 0);\n        memcpy(&amp;buffer[nSize], &amp;biHeader, sizeof(biHeader));\n        nSize += sizeof(biHeader);\n\n        // save color and mask bitmaps\n        saveIconData(buffer, nSize, iconInfo.hbmColor);\n        saveIconData(buffer, nSize, iconInfo.hbmMask);\n\n        DeleteObject(iconInfo.hbmColor);\n        DeleteObject(iconInfo.hbmMask);\n\n        //\n        // Lastly, save the icon directories.\n        //\n\n        DWORD size = saveIconDirectoryEntry(buffer, sizeof(ICONHEADER), pImageOffset[0], hIcon);\n\n        free(pImageOffset);\n\n\n        return TRUE;\n    }\n\n\n    //\n// Return the number of BYTES the bitmap will take ON DISK\n//\nstatic UINT NumBitmapBytes(BITMAP *pBitmap)\n{\n    int nWidthBytes = pBitmap-&gt;bmWidthBytes;\n\n    // bitmap scanlines MUST be a multiple of 4 bytes when stored\n    // inside a bitmap resource, so round up if necessary\n    if (nWidthBytes &amp; 3)\n        nWidthBytes = (nWidthBytes + 4) &amp; ~3;\n\n    return nWidthBytes * pBitmap-&gt;bmHeight;\n}\n\n    // same as WriteIconData but save to memory\nstatic UINT saveIconData(BYTE* buffer, DWORD&amp; nSize, HBITMAP hBitmap)\n{\n    BITMAP bmp;\n    int i;\n    BYTE * pIconData;\n\n    UINT nBitmapBytes;\n    DWORD nWritten = 0;\n\n    GetObject(hBitmap, sizeof(BITMAP), &amp;bmp);\n\n    nBitmapBytes = NumBitmapBytes(&amp;bmp);\n\n    pIconData = (BYTE *)malloc(nBitmapBytes);\n\n    GetBitmapBits(hBitmap, nBitmapBytes, pIconData);\n\n    // bitmaps are stored inverted (vertically) when on disk..\n    // so write out each line in turn, starting at the bottom + working\n    // towards the top of the bitmap. Also, the bitmaps are stored in packed\n    // in memory - scanlines are NOT 32bit aligned, just 1-after-the-other\n    for (i = bmp.bmHeight - 1; i &gt;= 0; i--) \n    {\n        // Write the bitmap scanline\n        // save to memory\n        memcpy(&amp;buffer[nSize], pIconData + (i * bmp.bmWidthBytes), bmp.bmWidthBytes);\n        nSize += bmp.bmWidthBytes;\n        nWritten += bmp.bmWidthBytes;       \n    }\n\n    free(pIconData);\n\n    return nWritten;\n}\n\n\n    //\n// same as WriteIconDirectoryEntry but save to memory\n//\nstatic UINT saveIconDirectoryEntry(BYTE* buffer, DWORD pos, int imageOffset, HICON hIcon)\n{\n    ICONINFO iconInfo;\n    ICONDIR iconDir;\n\n    BITMAP bmpColor;\n    BITMAP bmpMask;\n\n    DWORD nWritten = 0;\n    UINT nColorCount;\n    UINT nImageBytes;\n\n    GetIconBitmapInfo(hIcon, &amp;iconInfo, &amp;bmpColor, &amp;bmpMask);\n\n    nImageBytes = NumBitmapBytes(&amp;bmpColor) + NumBitmapBytes(&amp;bmpMask);\n\n    if (bmpColor.bmBitsPixel &gt;= 8)\n        nColorCount = 0;\n    else\n        nColorCount = 1 &lt;&lt; (bmpColor.bmBitsPixel * bmpColor.bmPlanes);\n\n    // Create the ICONDIR structure\n    iconDir.bWidth = (BYTE)bmpColor.bmWidth;\n    iconDir.bHeight = (BYTE)bmpColor.bmHeight;\n    iconDir.bColorCount = nColorCount;\n    iconDir.bReserved = 0;\n    iconDir.wPlanes = bmpColor.bmPlanes;\n    iconDir.wBitCount = bmpColor.bmBitsPixel;\n    iconDir.dwBytesInRes = sizeof(BITMAPINFOHEADER) + nImageBytes;\n    iconDir.dwImageOffset = imageOffset;\n\n    // save to memory\n    memcpy(&amp;buffer[pos], &amp;iconDir, sizeof(iconDir));\n    nWritten += sizeof(iconDir);\n\n    // Free resources\n    DeleteObject(iconInfo.hbmColor);\n    DeleteObject(iconInfo.hbmMask);\n\n    return nWritten;\n}\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 8203729, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/43645d8f08494a1e7634ce94939975de?s=128&d=identicon&r=PG&f=1", "display_name": "Krish", "link": "https://stackoverflow.com/users/8203729/krish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1568871346, "creation_date": 1566983259, "last_edit_date": 1566984569, "question_id": 57688782, "link": "https://stackoverflow.com/questions/57688782/copy-hicon-hcursor-in-to-byte-array", "title": "Copy HICON / HCURSOR in to Byte Array", "body": "<p>Is any way can we convert <code>HICON</code> or <code>HCURSOR</code> in to Byte array, I googled in all the way I didnt found a single generic solution, below I tried to convert <code>HICON</code> color and mask BITMAP to byte array and sending this through socket and creating my icon using <code>CreateIconIndirect</code> API but instead of doing all this stuff if I can able to send a <code>HICON</code> directly that will be good.  </p>\n\n<pre><code>int ProcessMouse()\n{\n\n   BYTE m_hbmMaskBits[70000];\n   BYTE m_hbmColorBits[70000];\n\n   CURSORINFO CursorInfo;\n   CursorInfo.cbSize = sizeof(CursorInfo);\n   GetCursorInfo(&amp;CursorInfo);\n\n   ICONINFO iconInfo;\n   if (!GetIconInfo(CursorInfo.hCursor, &amp;iconInfo)) \n   {  \n       MessageBox(NULL, _T(\"CreateCursor Failed\"),_T(\"message\"),MB_OK|MB_SYSTEMMODAL);          \n   }\n            bool isColorShape   = (iconInfo.hbmColor != NULL);\n            bool isMaskShape    = (iconInfo.hbmMask != NULL);\n\n            LONG cbSize = 0; int nWidth = 0; int nHeight = 0; int actualHeight = 0; int bmPlanes = 0;\n            int bmBitsPixel = 0; int xHotspot = 0; int yHotspot = 0; int widthBytes = 0;\n            // Return width,height,actualheight,bmplanes,bmbitspixel,hotsopt of cursor.\n            if(!CopyIconInfo(   CursorInfo.hCursor,\n                                        nWidth,\n                                        nHeight,\n                                        actualHeight,\n                                        bmPlanes,\n                                        bmBitsPixel,\n                                        xHotspot,\n                                        yHotspot,\n                                        widthBytes  ))\n            {                               \n                return 0;\n            }       \n\n            std::vector&lt;BYTE&gt; bColor;\n            std::vector&lt;BYTE&gt; bMask;\n\n            int sz_hbmColor         = 0;\n            int sz_hbmMask          = 0;        \n            _tempWidth              = nWidth;\n            _tempHeight             = nHeight;\n\n            //If HCURSOR have both color and mask go with regular approach.\n            if(isColorShape) \n            {\n                                   //Convert iconInfo.hbmColor HBITMAP to Byte array.\n                bColor              = HBIMAPtoBYTE(iconInfo.hbmColor,sz_hbmColor);  \n                                   //Convert iconInfo.hbmMask HBITMAP to Byte array.            \n                bMask               = HBIMAPtoBYTE(iconInfo.hbmMask,sz_hbmMask);\n            }\n            // If HCURSOR have only mask data go with new approach(split mask bitmap to color and mask).\n            else if(isMaskShape) \n            {\n                std::vector&lt;BYTE&gt; bSrcBitmap;\n                int sz_hbmBitmap    = 0;    \n                                   //Convert iconInfo.hbmMask HBITMAP to Byte array.        \n                bSrcBitmap          = HBIMAPtoBYTE(iconInfo.hbmMask,sz_hbmBitmap);\n                sz_hbmColor         = sz_hbmBitmap/2;\n                sz_hbmMask          = sz_hbmBitmap/2;\n\n                bMask.resize(bMask.size() + sz_hbmBitmap/2);\n                memcpy(&amp;bMask[bSrcBitmap.size() - sz_hbmBitmap], &amp;bSrcBitmap[0], sz_hbmBitmap/2 * sizeof(BYTE));\n\n                bColor.resize(bColor.size() + sz_hbmBitmap/2);\n                memcpy(&amp;bColor[bSrcBitmap.size() - sz_hbmBitmap], &amp;bSrcBitmap[sz_hbmBitmap/2], sz_hbmBitmap/2 * sizeof(BYTE));\n\n                //Clear at end.\n                bSrcBitmap.clear();\n\n            }\n\n            try{\n            err = memcpy_s((m_hbmMaskBits), sz_hbmMask, &amp;(bMask[0]), sz_hbmMask );\n            err = memcpy_s((m_hbmColorBits),sz_hbmColor,&amp;(bColor[0]),sz_hbmColor);\n\n            //Clear at end.\n            bMask.clear();\n            bColor.clear();\n\n            return 1;\n\n        }catch(...) {\n            if(err) {                   \n                MessageBox(NULL, _T(\"memcopy failed at mask or color copy\"),_T(\"message\"),MB_OK|MB_SYSTEMMODAL);    \n            }\n        }\n}\n</code></pre>\n\n<p>I tried in below way but it doesn't support for few monochrome cursors.</p>\n\n<pre><code>                PICTDESC pd = {sizeof(pd), PICTYPE_ICON};\n                pd.icon.hicon = CursorInfo.hCursor;\n                CComPtr&lt;IPicture&gt; pPict = NULL;\n                CComPtr&lt;IStream&gt;  pStrm = NULL;\n                BOOL res = FALSE;\n\n                res = SUCCEEDED( ::CreateStreamOnHGlobal(NULL, TRUE, &amp;pStrm) );\n                res = SUCCEEDED( ::OleCreatePictureIndirect(&amp;pd, IID_IPicture, TRUE, (void**)&amp;pPict) );\n                res = SUCCEEDED( pPict-&gt;SaveAsFile( pStrm, TRUE, &amp;cbSize ) );\n\n                if( res )\n                {\n                    // rewind stream to the beginning\n                    LARGE_INTEGER li = {0};\n                    pStrm-&gt;Seek(li, STREAM_SEEK_SET, NULL);\n\n                    // write to file\n                    DWORD dwWritten = 0, dwRead = 0, dwDone = 0;\n                    while( dwDone &lt; cbSize )\n                    {\n                        if( SUCCEEDED(pStrm-&gt;Read(bCursorBuff, sizeof(bCursorBuff), &amp;dwRead)) )\n                        {\n                            dwDone += dwRead;\n                        }\n                    }\n                    _ASSERTE(dwDone == cbSize);\n                }\n                //End of Cursor image\n                pStrm.Release();\n                pPict.Release();            \n</code></pre>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1566982992, "post_id": 57688510, "comment_id": 101822225, "body": "How about if constexpr?"}, {"owner": {"reputation": 750, "user_id": 2350060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf94c7218b74a36b40b1241e5c6649f?s=128&d=identicon&r=PG", "display_name": "Alexander Batischev", "link": "https://stackoverflow.com/users/2350060/alexander-batischev"}, "reply_to_user": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1566983390, "post_id": 57688510, "comment_id": 101822451, "body": "@L.F. I don&#39;t think I can handle the third case with <code>if constexpr</code>, because it requries me to <i>not</i> provide an implementation--which can&#39;t be done with <code>if constexpr</code> I think. Do you see a way to do that?"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1606711223, "post_id": 57688510, "comment_id": 115034180, "body": "Wouldn\u2019t CRTP be a more natural fit than virtual functions here?"}, {"owner": {"reputation": 750, "user_id": 2350060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf94c7218b74a36b40b1241e5c6649f?s=128&d=identicon&r=PG", "display_name": "Alexander Batischev", "link": "https://stackoverflow.com/users/2350060/alexander-batischev"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1606743842, "post_id": 57688510, "comment_id": 115045450, "body": "@DavisHerring I&#39;d say yes: static polymorphism would reflect the intent much better."}], "answers": [{"comments": [{"owner": {"reputation": 750, "user_id": 2350060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf94c7218b74a36b40b1241e5c6649f?s=128&d=identicon&r=PG", "display_name": "Alexander Batischev", "link": "https://stackoverflow.com/users/2350060/alexander-batischev"}, "edited": false, "score": 0, "creation_date": 1566993420, "post_id": 57691142, "comment_id": 101827934, "body": "Thank you! Turns out this technique even has a name: class template SFINAE <a href=\"https://cpppatterns.com/patterns/class-template-sfinae.html\" rel=\"nofollow noreferrer\">cpppatterns.com/patterns/class-template-sfinae.html</a> I ended up flipping this around, and moving <code>toHandlerKey</code> into a class of its own, then inheriting <code>Dispatcher</code> from it. Also, I couldn&#39;t grok the decltype/declval magic, so I used this more obvious trick to check if tuple contains a given type: <a href=\"https://stackoverflow.com/questions/25958259/how-do-i-find-out-if-a-tuple-contains-a-type/41171291#41171291\" title=\"how do i find out if a tuple contains a type\">stackoverflow.com/questions/25958259/&hellip;</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 750, "user_id": 2350060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf94c7218b74a36b40b1241e5c6649f?s=128&d=identicon&r=PG", "display_name": "Alexander Batischev", "link": "https://stackoverflow.com/users/2350060/alexander-batischev"}, "edited": false, "score": 0, "creation_date": 1566994585, "post_id": 57691142, "comment_id": 101828597, "body": "decltype/declval magic is to test if I can call <code>std::get&lt;KeyPortion&gt;(key)</code> (so not necessary only <code>tuple</code>). <code>decltype</code> is to have a non evaluated context, <code>std::declval&lt;T&gt;()</code> is to have a <code>T</code> instance. Alternative <code>T{}</code> would require default constructible type."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1566991000, "creation_date": 1566991000, "answer_id": 57691142, "question_id": 57688510, "link": "https://stackoverflow.com/questions/57688510/provide-default-implementation-for-pure-virtual-function-in-a-template-class/57691142#57691142", "title": "Provide default implementation for pure virtual function in a template class", "body": "<p>You can make the class SFINAE friendly, and then provide specialization:</p>\n\n<pre><code>template&lt;typename Message, typename KeyPortion, typename Handler, typename Enabler = void&gt;\nclass Dispatcher {\npublic:\n    virtual KeyPortion toHandlerKey(typename Message::key_type) = 0;\n\n    /* a bit more stuff which is irrelevant */\n};\n\ntemplate&lt;typename Message, typename KeyPortion, typename Handler&gt;\nclass Dispatcher&lt;Message,\n                 KeyPortion,\n                 Handler,\n                 std::enable_if_t&lt;std::is_same&lt;KeyPortion, typename Message::key_type&gt;&gt;&gt;\n{\npublic:\n    virtual KeyPortion toHandlerKey(typename Message::key_type key)\n    {\n        return key;\n    }\n\n    /* a bit more stuff which is irrelevant */\n};\n\ntemplate&lt;typename Message, typename KeyPortion, typename Handler&gt;\nclass Dispatcher&lt;Message,\n                 KeyPortion,\n                 Handler,\n                 std::void_t&lt;decltype(std::get&lt;KeyPortion&gt;(std::declval&lt;typename Message::key_type&gt;()))&gt;&gt;\n{\npublic:\n    virtual KeyPortion toHandlerKey(typename Message::key_type key)\n    {\n        return std::get&lt;KeyPortion&gt;(key);\n    }\n\n    /* a bit more stuff which is irrelevant */\n};\n</code></pre>\n\n<p>Common part could be factorized with Base class for example.</p>\n"}], "owner": {"reputation": 750, "user_id": 2350060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf94c7218b74a36b40b1241e5c6649f?s=128&d=identicon&r=PG", "display_name": "Alexander Batischev", "link": "https://stackoverflow.com/users/2350060/alexander-batischev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 57691142, "answer_count": 1, "score": 1, "last_activity_date": 1606660777, "creation_date": 1566982406, "last_edit_date": 1606660777, "question_id": 57688510, "link": "https://stackoverflow.com/questions/57688510/provide-default-implementation-for-pure-virtual-function-in-a-template-class", "title": "Provide default implementation for pure virtual function in a template class", "body": "<p>I have a template class that implements a kind of dispatcher: the class processes &quot;messages&quot; which have &quot;keys&quot;, and a part of the key is used to decide what &quot;handler&quot; to pass the message to. The user has to derive from the template class and provide the mapping from &quot;keys&quot; to the part of the key used for dispatch. I thought that a pure virtual function is a natural way to model that:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename Key&gt;\nclass Message {\npublic:\n    using key_type = Key;\n\n    /* more stuff which is irrelevant */\n};\n\ntemplate&lt;typename Message, typename KeyPortion, typename Handler&gt;\nclass Dispatcher {\npublic:\n    virtual KeyPortion toHandlerKey(typename Message::key_type) = 0;\n\n    /* a bit more stuff which is irrelevant */\n};\n</code></pre>\n<p>The user is forced to derive, and is forced to override the function. This is good.</p>\n<p>Now, there are a couple situations where I could provide a default implementation for <code>toHandlerKey</code>:</p>\n<ol>\n<li><p>in the simplest case, <code>KeyPortion</code> is the same as <code>typename Message::key_type</code>, so I could provide:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>virtual KeyPortion toHandlerKey(typename Message::key_type key) {\n    return key;\n}\n</code></pre>\n</li>\n<li><p>most of the time, <code>Message::key_type</code> is a <code>std::tuple</code> containing <code>KeyPortion</code>, so I could provide:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>virtual KeyPortion toHandlerKey(typename Message::key_type key) {\n    return std::get&lt;KeyPortion&gt;(key);\n}\n</code></pre>\n</li>\n</ol>\n<p>But I have no idea how to write that properly. I can't use <code>enable_if</code>, because I'm not trying to overload anything. I can't provide a blanket implementation either, because then the user might forget to override it.</p>\n<p>In summary, I want my template class to provide one of the three:</p>\n<ol>\n<li>a trivial virtual implementation for case (1) above;</li>\n<li>a trivial virtual implementation for case (2) above;</li>\n<li>a pure virtual function which will force the user to define their own implementation.</li>\n</ol>\n<p>Is there a way to achieve that?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1566982080, "post_id": 57688324, "comment_id": 101821706, "body": "<code>void* GetPtr() = 0;</code> is &quot;wrong&quot; design. As all types are known, <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" rel=\"nofollow noreferrer\">Visitor</a> seems appropriated instead."}, {"owner": {"reputation": 1773, "user_id": 8805095, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a4948ba17681551aa212dbc7be9bff40?s=128&d=identicon&r=PG&f=1", "display_name": "Moia", "link": "https://stackoverflow.com/users/8805095/moia"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1566982357, "post_id": 57688324, "comment_id": 101821861, "body": "@Jarod42 could you make an answer with the visitor pattern?"}], "answers": [{"comments": [{"owner": {"reputation": 2591, "user_id": 296642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6fad6da221f7ed37b5b1e9d4df885cbe?s=128&d=identicon&r=PG", "display_name": "Patrik", "link": "https://stackoverflow.com/users/296642/patrik"}, "edited": false, "score": 0, "creation_date": 1567066948, "post_id": 57690482, "comment_id": 101854518, "body": "Great answer, thank you! It&#39;s too bad the IVisitor still needs a list of types it allows, but that seems unavoidable."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 4, "last_activity_date": 1568124544, "last_edit_date": 1568124544, "creation_date": 1566988633, "answer_id": 57690482, "question_id": 57688324, "link": "https://stackoverflow.com/questions/57688324/working-with-raw-pointers-when-the-type-is-an-unknown-template-argument/57690482#57690482", "title": "Working with raw pointers when the type is an unknown template argument", "body": "<p>With visitor pattern, instead of adding methods to interface:</p>\n\n<pre><code>class ComponentInterface{\npublic:\n    virtual ~ComponentInterface() = default;\n\n    virtual void DoStuff() = 0;\n    virtual void Method1() = 0;\n    virtual void Method2() = 0;\n    virtual void Method3() = 0;\n\n    static constexpr size_t Size() { return 10; }\n};\n</code></pre>\n\n<p>Assuming you know each children type, you might do:</p>\n\n<pre><code>template &lt;class T&gt; class Component;\n\nstruct IVisitor\n{\n    virtual ~IVisitor() = default;\n\n    virtual void Visit(Component&lt;int&gt;&amp;) = 0;\n    virtual void Visit(Component&lt;float&gt;&amp;) = 0;\n    virtual void Visit(Component&lt;double&gt;&amp;) = 0;\n};\n\n\nclass ComponentInterface{\npublic:\n    virtual ~ComponentInterface() = default;\n    virtual void DoStuff() = 0;\n    virtual void Accept(IVisitor&amp;) = 0;\n    static constexpr size_t Size() { return 10; }\n};\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>template &lt;class T&gt; class Component : public ComponentInterface {\npublic:\n    Component(const std::array&lt;T, Size()&gt;&amp; arr);\n    void DoStuff() override;\n    void Accept(IVisitor&amp; visitor) override { visitor.Visit(*this); }\n//private:\n    T ptr[Size()];\n};\n</code></pre>\n\n<p>Usage would be:</p>\n\n<pre><code>struct IncreaseByOne : IVisitor\n{\n    template &lt;typename T&gt;\n    void operator() (Component&lt;T&gt;&amp; c)\n    {\n        std::transform(std::begin(c.ptr), std::end(c.ptr),\n                       std::begin(c.ptr),\n                       [](auto e) { return e + 1; });\n    }\n\n    void Visit(Component&lt;int&gt;&amp; c) override { (*this)(c); }\n    void Visit(Component&lt;float&gt;&amp; c) override { (*this)(c); }\n    void Visit(Component&lt;double&gt;&amp; c) override { (*this)(c); }\n};\n</code></pre>\n\n<p>and</p>\n\n<pre><code>    IncreaseByOne visitor;\n    for(int i = 0; i &lt; 3; ++i)\n        components[i].Accept(visitor);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/54095200bb652865\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 2591, "user_id": 296642, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6fad6da221f7ed37b5b1e9d4df885cbe?s=128&d=identicon&r=PG", "display_name": "Patrik", "link": "https://stackoverflow.com/users/296642/patrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 1, "accepted_answer_id": 57690482, "answer_count": 1, "score": 2, "last_activity_date": 1568124544, "creation_date": 1566981793, "question_id": 57688324, "link": "https://stackoverflow.com/questions/57688324/working-with-raw-pointers-when-the-type-is-an-unknown-template-argument", "title": "Working with raw pointers when the type is an unknown template argument", "body": "<p>At the moment, we have a container class with an std array of components. The components are templated  and are derived from a non-templated base class. All goes well when calling member functions. </p>\n\n<p>However, the container class contains raw pointers of the templated type T and we would like to use these pointers outside the component and container classes. </p>\n\n<p>As an example, I give here an std::transform, but we use it in many places in our codebase and on APIs without vector or std support. </p>\n\n<p>For now, we cast the raw pointers, but that's really bad design. We use c++14, and all components and their type are known at compile time.</p>\n\n<p>Any ideas, i.e. what can we put in place of <code>???</code>?</p>\n\n<p>Here is a minimal example: </p>\n\n<p>Runnable and editable code also here: <a href=\"https://rextester.com/QLP97953\" rel=\"nofollow noreferrer\">https://rextester.com/QLP97953</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;array&gt;\n#include &lt;algorithm&gt;\n\nclass ComponentInterface{\npublic:\n    virtual void DoStuff() = 0;\n    virtual void* GetPtr() = 0;\n    static constexpr size_t Size() { return 10; }\n};\n\ntemplate &lt;class T&gt; class Component : public ComponentInterface {\npublic:\n    Component(const std::array&lt;T, Size()&gt;&amp; arr){for(int i = 0; i &lt; Size(); ++i) ptr[i] = arr[i];}\n    void DoStuff() override { std::cout &lt;&lt; ptr[0] &lt;&lt; \" \" &lt;&lt; ptr[1] &lt;&lt; \" \" &lt;&lt; ptr[2] &lt;&lt; \" \" &lt;&lt; std::endl; }\n    void* GetPtr() override { return (void*)(ptr); }\nprivate:\n    T ptr[Size()];\n};\n\nclass Container{\nprivate:\n    std::array&lt;std::unique_ptr&lt;ComponentInterface&gt;, 3&gt; components;\npublic:    \n    Container() {\n        components[0] = std::unique_ptr&lt;Component&lt;int&gt; &gt;(new Component&lt;int&gt;({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}));\n        components[1] = std::unique_ptr&lt;Component&lt;float&gt; &gt;(new Component&lt;float&gt;({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}));\n        components[2] = std::unique_ptr&lt;Component&lt;double&gt; &gt;(new Component&lt;double&gt;({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}));\n    }\n    void DoStuff(int i) { components[i]-&gt;DoStuff(); }\n    void* GetPtr(int i) { return components[i]-&gt;GetPtr(); }\n    const size_t Size(int i) { return components[i]-&gt;Size(); }\n};\n\nint main()\n{\n    Container c;\n    for(int i = 0; i &lt; 3; ++i)\n        c.DoStuff(i);\n\n    //Works, not a good design\n    std::transform((int*)c.GetPtr(0), (int*)c.GetPtr(0) + c.Size(0), (int*)c.GetPtr(0), [](int a) -&gt; int { return a + 1; });\n    std::transform((float*)c.GetPtr(1), (float*)c.GetPtr(1) + c.Size(1), (float*)c.GetPtr(1), [](int a) -&gt; int { return a + 1; });\n    std::transform((double*)c.GetPtr(2), (double*)c.GetPtr(2) + c.Size(2), (double*)c.GetPtr(2), [](int a) -&gt; int { return a + 1; });\n\n    for(int i = 0; i &lt; 3; ++i)\n        ; // ???\n\n    for(int i = 0; i &lt; 3; ++i)\n        c.DoStuff(i);\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "gstreamer"], "owner": {"reputation": 853, "user_id": 6228450, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b68f4daab93c6c862f563845f8bca540?s=128&d=identicon&r=PG&f=1", "display_name": "Curunir", "link": "https://stackoverflow.com/users/6228450/curunir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566981768, "creation_date": 1566981768, "question_id": 57688317, "link": "https://stackoverflow.com/questions/57688317/c-gstreamer-empty-pipeline", "title": "C GStreamer empty pipeline", "body": "<p>I am building my pipeline like this:</p>\n\n<pre><code>gst-launch-1.0 -v filesrc location=\" + video_filename + \" ! qtdemux ! queue max-size-buffers=0 max-size-time=0 ! vpudec frame-drop=0 ! queue ! imxv4l2sink device=/dev/video16\n</code></pre>\n\n<p>This is how I stop video playback</p>\n\n<pre><code>    gst_element_set_state (m_gst_pipeline, GST_STATE_NULL);\n    g_main_loop_quit (m_mainloop);\n    gst_object_unref(m_gst_pipeline);\n</code></pre>\n\n<p>The stopping itsself works fine, only issue is that I get the last video frame displayed even when exiting the program. How do I flush the pipeline before destruction so I have a black screen?</p>\n"}, {"tags": ["c++", "c++11", "organization"], "comments": [{"owner": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "edited": false, "score": 0, "creation_date": 1567081251, "post_id": 57688116, "comment_id": 101862218, "body": "I am not sure what you mean when you say you want to avoid a loop if you wish to print the content from each row? Using a struct you could assign each row a value and whenever you want to print that value use a row variable. For example if you read row 1, 4 and 7 in that order your row array will look like [1,4,7] and your value array will look like [row1value, row4value, row7value]. And when you wish to read value from row x you print structname.value[structname.row[x]]; where X is the row you want to read?"}, {"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "reply_to_user": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "edited": false, "score": 1, "creation_date": 1567082646, "post_id": 57688116, "comment_id": 101863013, "body": "@darclander Actually for loop is what I want to use. I am encouraging to use for loop to decrease number of lines of code used. The function should call the memoRead() function 8 times. Ex: when I call memoDebug(2), it should print row15value, row16value, ... row23value"}, {"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "reply_to_user": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "edited": false, "score": 0, "creation_date": 1567082847, "post_id": 57688116, "comment_id": 101863132, "body": "@darclander In order to be able to print that data, the function should obviously call the memoRead() function 8 times with memoRowNumber values of 15, 16, ... 23"}, {"owner": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "edited": false, "score": 0, "creation_date": 1567083064, "post_id": 57688116, "comment_id": 101863282, "body": "@Adhamzon Shukurov so when you call memoDebug(2), you save each value from memoRead() into an uint32_t such as uint32_t row1 = memoRead(); uint32_t row2 = memoRead(); ... ? Instead of doing a loop and saving each row to the array index? <code>for(int i = 0; i &lt; 8; i++) {array[i] = memoRead();}</code>? (Formatting is weird in comments)"}, {"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "reply_to_user": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "edited": false, "score": 0, "creation_date": 1567083192, "post_id": 57688116, "comment_id": 101863365, "body": "@darclander Yes, exactly. I am doing this to be sure for now. But I want to do it with for loop, as you suggested."}, {"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "reply_to_user": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "edited": false, "score": 0, "creation_date": 1567083510, "post_id": 57688116, "comment_id": 101863580, "body": "@darclander I am just afraid of using wrong method (which can cause memory problem)"}, {"owner": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "edited": false, "score": 0, "creation_date": 1567083976, "post_id": 57688116, "comment_id": 101863903, "body": "do you mean the ARM device might run out of memory or that you might get memory leaks?"}, {"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "reply_to_user": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "edited": false, "score": 0, "creation_date": 1567084046, "post_id": 57688116, "comment_id": 101863951, "body": "@darclander I mean memory leaks"}], "answers": [{"comments": [{"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "edited": false, "score": 0, "creation_date": 1567086555, "post_id": 57711002, "comment_id": 101865518, "body": "Nice answer, but how should I call memoRead? memoRead(&amp;array[i], i) or memoRead(array[i], i)?"}, {"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "edited": false, "score": 0, "creation_date": 1567086629, "post_id": 57711002, "comment_id": 101865561, "body": "Also is it ok if I merge those for loops?"}, {"owner": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "reply_to_user": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "edited": false, "score": 0, "creation_date": 1567087776, "post_id": 57711002, "comment_id": 101866259, "body": "@AdhamzhonShukurov yes of course you can merge those loops! You do not need to store the return value aswell if you do not need it. How do you mean that you would call memoRead? Isn&#39;t the return value of memoRead() the value of the row you are reading? If you read all 8 rows in the memoRead method I would suggest you read about how passing arrays work in c++. <a href=\"https://www.geeksforgeeks.org/pointer-array-array-pointer/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/pointer-array-array-pointer</a>."}, {"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "edited": false, "score": 0, "creation_date": 1567088345, "post_id": 57711002, "comment_id": 101866630, "body": "memoRead() returns bool, but you provided the idea i needed. For me this answer is more than enough to solve the problem, you answered my question, but it would be nice if you could edit your answer accordingly."}, {"owner": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "reply_to_user": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "edited": false, "score": 0, "creation_date": 1567088819, "post_id": 57711002, "comment_id": 101866939, "body": "@AdhamzhonShukurov you mean adding how to pass an array to memoRead()? I am not quite sure what you would like me to edit could you give me a suggestion?"}, {"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "edited": false, "score": 0, "creation_date": 1567089054, "post_id": 57711002, "comment_id": 101867086, "body": "Yes, and merging for loops"}, {"owner": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "reply_to_user": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "edited": false, "score": 0, "creation_date": 1567089374, "post_id": 57711002, "comment_id": 101867270, "body": "@AdhamzhonShukurov I am not quite sure how memoRead() reads the data. Do you send memoRead() a value such as 1 and then it reads row 1, then 2 and it reads row 2? I do not think we should be commenting as much would you rather join a chatroom to discuss?"}, {"owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "reply_to_user": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "edited": false, "score": 0, "creation_date": 1567089434, "post_id": 57711002, "comment_id": 101867316, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/198668/discussion-between-adhamzhon-shukurov-and-darclander\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 787, "user_id": 8204677, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/006b49495435e44fef565f3dcba2ab75?s=128&d=identicon&r=PG&f=1", "display_name": "darclander", "link": "https://stackoverflow.com/users/8204677/darclander"}, "is_accepted": true, "score": 1, "last_activity_date": 1567089469, "last_edit_date": 1567089469, "creation_date": 1567084327, "answer_id": 57711002, "question_id": 57688116, "link": "https://stackoverflow.com/questions/57688116/best-way-of-organizing-data-read-from-memory-for-debugging-c/57711002#57711002", "title": "Best way of organizing data read from memory (for debugging) c++", "body": "<p>If I understood your question correctly by the comments and the information you have provided in the question a solution would be to create a loop of choice and store the return value of memoRead() in an array.</p>\n\n<p>Instead of doing:</p>\n\n<pre><code>uint32_t row1 = memoRead();\nuint32_t row2 = memoRead();\n</code></pre>\n\n<p>You can use a loop as suggested in the comment:</p>\n\n<pre><code>//read the memo values in a loop\n    uint32_t array[8]; //specify size of array or make it dynamic instead of \"8\"\n    for(int i = 0; i &lt; x; i++) {\n        array[i] = memoRead();\n    }\n\n//print the row values in a loop\n    for(int i = 0; i &lt; x; i++) {\n        std::cout &lt;&lt; array[i] &lt;&lt; \"\\n\";\n    }\n</code></pre>\n\n<p>Where X is the value you would like to read to for example if your array size is 100 instead of 8 x would be larger.</p>\n\n<p>Regarding the question about memory leaks we are not allocating or deallocating any memory which should not cause any memory leaks see: <a href=\"https://stackoverflow.com/questions/4447391/reason-for-memory-leakage-in-c-c\">reason for memory leakage in C C++</a>, <a href=\"https://stackoverflow.com/questions/6813636/risk-of-damaging-your-computer-by-altering-memory-in-c\">Risk of damaging your computer by altering memory in C++</a>. If you are unsure what can cause memory leaks I would suggest you look into some articles before you do anything you do not know.</p>\n\n<p>As far as I know this is the easiest way to store data, although this does not keep track of which rows you store where (which can be optimized). </p>\n\n<p>Edit:</p>\n\n<p>For doing everything in one loop you can simply:</p>\n\n<pre><code>uint32_t array[8];\nfor (int i = 0; i &lt; x; i++) {\n    array[i] = memoRead();\n    std::cout &lt;&lt; array[i] &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 663, "user_id": 9490777, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Adhamzhon Shukurov", "link": "https://stackoverflow.com/users/9490777/adhamzhon-shukurov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 57711002, "answer_count": 1, "score": 1, "last_activity_date": 1567089469, "creation_date": 1566981113, "last_edit_date": 1566981986, "question_id": 57688116, "link": "https://stackoverflow.com/questions/57688116/best-way-of-organizing-data-read-from-memory-for-debugging-c", "title": "Best way of organizing data read from memory (for debugging) c++", "body": "<p>I am not a software engineer which means I am not really good at organizing my code, so this task might look very simple for you.</p>\n\n<p>I have a qt c++ application for 32-bit ARM device (with lubuntu). The application contains a window which is used to debug the external custom instruction memory (64 rows of 32-bit instructions) of a different embedded device. I have created a function: </p>\n\n<pre><code>bool memoRead(uint32_t *memoRowData, uint8_t memoRowNumber); \n</code></pre>\n\n<p>This function reads data stored in a given row.</p>\n\n<p><strong>I want to create a different function which uses the given function to read and display content of 8 rows from the memory.</strong> \nExample: When I call</p>\n\n<pre><code>memoDebug(0);\n</code></pre>\n\n<p>The output should be data stored in rows 0 to 7, and when I call</p>\n\n<pre><code>memoDebug(1);\n</code></pre>\n\n<p>The output should be data stored in rows 8 to 15</p>\n\n<p>The obvious way is to create 8 different <code>uint32_t</code> variables, read each row separately and assign their values to the created 8 different variables and display/print them (which I have already done and succeeded). <strong>But I want to use something like array or struct instead and everything inside for loop to improve the code. In the future the memory size might increase significantly (65536 rows, and read 64 rows or more each time instead of 8).</strong> </p>\n\n<p><strong>What is the best and most efficient way of organizing my data and how should I use that?</strong> </p>\n\n<p>EDIT 1: Obviously I will change the data type of the variable <code>memoRowNumber</code> of my <code>memoRead</code> function to <code>uint32_t</code> when my memory size increases</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566980313, "post_id": 57687864, "comment_id": 101820703, "body": "Please take some time to refresh <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the section named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1566980414, "post_id": 57687864, "comment_id": 101820755, "body": "<a href=\"https://www.boost.org/doc/libs/1_71_0/doc/html/boost/algorithm/join.html\" rel=\"nofollow noreferrer\">boost::join</a> ?"}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1566980541, "post_id": 57687864, "comment_id": 101820822, "body": "Maybe this could help you: <a href=\"https://stackoverflow.com/questions/9277906/stdvector-to-string-with-custom-delimiter\" title=\"stdvector to string with custom delimiter\">stackoverflow.com/questions/9277906/&hellip;</a>"}, {"owner": {"reputation": 7476, "user_id": 3415258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100007912508550/picture?type=large", "display_name": "P45 Imminent", "link": "https://stackoverflow.com/users/3415258/p45-imminent"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1566980791, "post_id": 57687864, "comment_id": 101820970, "body": "@Jarod42: Thanks - careless of me to not see that -, do please put as an answer and I&#39;ll vote and accept."}, {"owner": {"reputation": 7476, "user_id": 3415258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100007912508550/picture?type=large", "display_name": "P45 Imminent", "link": "https://stackoverflow.com/users/3415258/p45-imminent"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566981261, "post_id": 57687864, "comment_id": 101821227, "body": "@Someprogrammerdude: Could you please reference the parts of those pages that explicitly makes my question off topic?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1566981801, "post_id": 57687864, "comment_id": 101821529, "body": "@P45Imminent &quot;Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam. Instead, describe the problem and what has been done so far to solve it.&quot; Asking for functions (even in the standard library) is off-topic. If you had <i>tried</i> something, and included an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and explained how your attempt didn&#39;t work (with expected and actual output) then that would be pretty good question."}], "answers": [{"comments": [{"owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "edited": false, "score": 0, "creation_date": 1566981801, "post_id": 57687951, "comment_id": 101821530, "body": "<a href=\"https://stackoverflow.com/a/18703743/10933809.downvote\">stackoverflow.com/a/18703743/10933809.downvote</a> is not mine"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "edited": false, "score": 0, "creation_date": 1566985556, "post_id": 57687951, "comment_id": 101823594, "body": "@Oblivion i stoped caring about votes some time ago... I dont get the <code>O(n^2)</code> argument in the link you posted. Passing around reference instead of values is something I considered already when writing the answer and actually dont remember why I didnt do it. PS: I do care about constructive critisism, so thanks for the link"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": -2, "last_activity_date": 1566985414, "last_edit_date": 1566985414, "creation_date": 1566980534, "answer_id": 57687951, "question_id": 57687864, "link": "https://stackoverflow.com/questions/57687864/is-there-an-out-of-the-box-function-for-performing-the-reverse-a-string-splitter/57687951#57687951", "title": "Is there an out of the box function for performing the reverse a string splitter?", "body": "<p>Yes there is such a function, it is called <a href=\"https://en.cppreference.com/w/cpp/algorithm/accumulate\" rel=\"nofollow noreferrer\"><code>std::accumulate</code></a>:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n\nint main() {\n    std::vector&lt;std::string&gt; v { \"a\", \"b\" };\n    std::string r = std::accumulate( v.begin(), v.end(), std::string(\"\"),[](std::string a,std::string b){ return a + \" | \" + b; });\n    std::cout &lt;&lt; r;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code> | a | b\n</code></pre>\n\n<p>Handling the boundaries correct (no <code>|</code> in the beginning), the code gets a tiny bit more verbose: pass <code>v.begin() + 1</code> and the inital string accordingly, but take care of the edge case of an empty <code>v</code>.</p>\n\n<p>However, not that this naive application of <code>std::accumulate</code> is far from being efficient (see <a href=\"https://stackoverflow.com/a/18703743/4117728\">here</a> for details). </p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 5, "last_activity_date": 1566980934, "creation_date": 1566980934, "answer_id": 57688069, "question_id": 57687864, "link": "https://stackoverflow.com/questions/57687864/is-there-an-out-of-the-box-function-for-performing-the-reverse-a-string-splitter/57688069#57688069", "title": "Is there an out of the box function for performing the reverse a string splitter?", "body": "<p>There is <a href=\"https://www.boost.org/doc/libs/1_71_0/doc/html/boost/algorithm/join.html\" rel=\"noreferrer\"><code>boost::join</code></a>:</p>\n\n<pre><code>std::vector&lt;std::string&gt; v = {\"Hello\", \"world\"};\nconst std::string separator = \" \";\nstd::string s = boost::join(v, separator);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/bd29f908a57d35a9\" rel=\"noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 7476, "user_id": 3415258, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/100007912508550/picture?type=large", "display_name": "P45 Imminent", "link": "https://stackoverflow.com/users/3415258/p45-imminent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1566986514, "accepted_answer_id": 57688069, "answer_count": 2, "score": 2, "last_activity_date": 1566985414, "creation_date": 1566980187, "question_id": 57687864, "link": "https://stackoverflow.com/questions/57687864/is-there-an-out-of-the-box-function-for-performing-the-reverse-a-string-splitter", "closed_reason": "Duplicate", "title": "Is there an out of the box function for performing the reverse a string splitter?", "body": "<p>In order to split a string into a vector I use</p>\n\n<pre><code>std::vector&lt;std::string&gt; v;\nboost::split(v, input, boost::is_any_of(\"|\"));\n</code></pre>\n\n<p>is there a function either in Boost or STL that performs the reverse of this operation, i.e. a join function, of the form</p>\n\n<pre><code>join(v, output, \"|\")\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glm-math"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1566979450, "post_id": 57687602, "comment_id": 101820249, "body": "If you want your top-left to be 0,0 you should pass in <code>0</code> as top and left to your ortho matrix."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1566979605, "post_id": 57687602, "comment_id": 101820333, "body": "Although, I agree with @tkausl - this doesn&#39;t explain fully what you get. <i>B appears in the top-right.</i> sounds like if you don&#39;t apply your projection matrix to rendering of A and B."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1566980021, "post_id": 57687602, "comment_id": 101820555, "body": "The <code>glm::lookAt()</code> makes me suspicious a bit as well. Normally, x points right, y points up, z points <i>out of</i> screen. Remember that the full transformation is model, view, projection (-&gt; projection * view * model * v) i.e. projection is applied after view."}, {"owner": {"reputation": 986, "user_id": 1624459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/74001e30fb9ec314dbfd4697298ad0f8?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1624459/dan"}, "edited": false, "score": 0, "creation_date": 1566980021, "post_id": 57687602, "comment_id": 101820556, "body": "Sorry, poorly-worded question, I have just corrected it."}, {"owner": {"reputation": 986, "user_id": 1624459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/74001e30fb9ec314dbfd4697298ad0f8?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1624459/dan"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1566980089, "post_id": 57687602, "comment_id": 101820583, "body": "@Scheff I am applying the matrix as follows: <code>gl_Position = view_proj_matrix * vec4(in_vertex.x, in_vertex.y, 0, 1);</code>"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1566980301, "post_id": 57687602, "comment_id": 101820697, "body": "In this case, it might be worth to watch the <code>glm::lookAt()</code> again. (Sorry, all the transformations make me always a bit dizzy. Impossible for me to get it correct on paper - mostly it&#39;s not correct before switching the one or other sign in code. And be careful about handedness. A scaling of (1, -1, 1) can switch from RH to LH and vice versa. Though, not an issue if you render front and back...) ;-)"}, {"owner": {"reputation": 986, "user_id": 1624459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/74001e30fb9ec314dbfd4697298ad0f8?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1624459/dan"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1566984512, "post_id": 57687602, "comment_id": 101823076, "body": "@Scheff Using the right-hand rule, when x points right and y points up, then z points out of the screen, as you said. But if you rotate these axes such that y points down, then z is pointing into the screen. At least, that was my reasoning."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1566984684, "post_id": 57687602, "comment_id": 101823165, "body": "So, you turned your view up-side-down (with <code>glm::lookat()</code>). This makes bottom top and top bottom. Now, if you mirror projection on horizontal axis (with <code>glm::ortho()</code>), bottom becomes top and top becomes bottom. So, top is top again and bottom is bottom again. Could you follow? :-)"}, {"owner": {"reputation": 986, "user_id": 1624459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/74001e30fb9ec314dbfd4697298ad0f8?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1624459/dan"}, "edited": false, "score": 0, "creation_date": 1566986414, "post_id": 57687602, "comment_id": 101824113, "body": "That makes sense: the axes are fundamentally x-right, y-up, z-out, and <code>glLookAt</code> only changes the position and orientation of the camera. So, I should use &quot;normal&quot; values for <code>glLookAt</code>, and just swap <code>top</code> and <code>bottom</code> in the call to <code>glOrtho</code>? Won&#39;t this also flip all my textures upside-down?"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1566996261, "post_id": 57687602, "comment_id": 101829607, "body": "Sorry for delay. (You didn&#39;t address me.) <i>just swap top and bottom in the call to glOrtho</i> This seems appropriate to how I understood your question. <i>Won&#39;t this also flip all my textures upside-down?</i> Yepp. (The same if you instead only turn your view.) Textures (i.e. texture coordinates) map vertex coordinates to image coordinates (or vice versa). Imagine textures as wall papers. If you turn your head in the room, walls will move relative to your eyes as well as the wall paper patterns."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1566996497, "post_id": 57687602, "comment_id": 101829742, "body": "Btw. if you just <i>just swap top and bottom in the call to glOrtho</i>, the handedness of your outcome changes. This might be relevant if you enabled front- or backface culling. Otherwise, it might be tolerable. I once investigated a bit deeper into projection with <code>glm::ortho()</code>: <a href=\"https://stackoverflow.com/a/52887566/7478597\">SO: Ortho and Persp are reversing Z depth sign?</a>. Not sure whether it provides added value but you might decide on your own."}], "answers": [{"tags": [], "owner": {"reputation": 986, "user_id": 1624459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/74001e30fb9ec314dbfd4697298ad0f8?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1624459/dan"}, "is_accepted": true, "score": 0, "last_activity_date": 1567083740, "creation_date": 1567083740, "answer_id": 57710827, "question_id": 57687602, "link": "https://stackoverflow.com/questions/57687602/use-top-left-origin-in-opengl/57710827#57710827", "title": "Use top-left origin in OpenGL", "body": "<h1>tl;dr</h1>\n\n<p>My camera was positioned correctly (in a manner of speaking), but I was flipping the y-axis in the call to <code>glOrtho</code>.</p>\n\n<h1>Let's visualize this</h1>\n\n<p>Imagine a right-handed co-ordinate system such as OpenGL uses by convention:</p>\n\n<ul>\n<li>The x-axis points right</li>\n<li>The y-axis points up</li>\n<li>The z-axis points out of the screen</li>\n</ul>\n\n<p>If my objects were positioned in this world and we viewed them from the front, we would see this:</p>\n\n<pre><code>    B\nA\n</code></pre>\n\n<p>This is the same as what I was seeing, but we <em>weren't</em> viewing from the front. As @Scheff pointed out in the comments, my call to <code>glm::lookat</code> was flipping my camera upside-down and positioning it \"behind\" the screen.</p>\n\n<p>Now, if you imagine that you are doing a handstand behind your monitor, A and B would now look like this:</p>\n\n<pre><code>\u2200\n    \ud801\udc12\n</code></pre>\n\n<p>Wait, but isn't this what I wanted - B in the bottom-right?</p>\n\n<p>Right, but in addition to my camera being positioned strangely, my y-axis was being flipped by the call to <code>glm::ortho</code>. Normally the value for <code>bottom</code> should be less than the value for <code>top</code> (as in <a href=\"https://www.khronos.org/opengl/wiki/FAQ#How_to_render_in_pixel_space\" rel=\"nofollow noreferrer\">this example</a>).</p>\n\n<p>Thus producing, once again:</p>\n\n<pre><code>    B\nA\n</code></pre>\n\n<p>So, one solution would have been to swap the <code>top</code> and <code>bottom</code> parameters in <code>glOrtho</code>:</p>\n\n<pre><code>glm::mat4 view = glm::lookAt(\n    glm::vec3(0, 0, -1),    // camera position\n    glm::vec3(0, 0, 0),     // look at\n    glm::vec3(0, -1, 0)     // up vector\n);\nglm::mat4 projection = glm::ortho(\n    -3.0f,      // left\n    3.0f,       // right\n    -3.0f,      // bottom (less than top -&gt; y-axis is not inverted!)\n    3.0f);      // top\n</code></pre>\n\n<h1>How to flip the y-axis \"correctly\"</h1>\n\n<p>The solution above works, but there is a much simpler solution - or at least much simpler to visualize! And that is just to position the camera in front of the scene and flip the y-axis using <code>glOrtho</code> (by keeping <code>bottom</code> greater than <code>top</code>):</p>\n\n<pre><code>glm::mat4 view = glm::lookAt(\n    glm::vec3(0, 0, 1),     // camera position\n    glm::vec3(0, 0, 0),     // look at\n    glm::vec3(0, 1, 0)      // up vector\n);\nglm::mat4 projection = glm::ortho(\n    -3.0f,      // left\n    3.0f,       // right\n    3.0f,       // bottom (greater than top -&gt; y-axis is inverted!)\n    -3.0f);     // top\n</code></pre>\n\n<h1>Potential problems</h1>\n\n<h2>Texture orientation</h2>\n\n<p>Flipping the y-axis may result in upside-down textures, which can be fixed by swapping your top and bottom texture co-ordinates.</p>\n\n<h2>Back-face culling</h2>\n\n<p>Viewing the scene from a different angle may result in faces being culled, if <a href=\"https://www.khronos.org/opengl/wiki/Face_Culling\" rel=\"nofollow noreferrer\">face culling</a> is enabled. This can be fixed by changing the winding order of your vertices, or by changing <em>which</em> faces get culled.</p>\n"}], "owner": {"reputation": 986, "user_id": 1624459, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/74001e30fb9ec314dbfd4697298ad0f8?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1624459/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "accepted_answer_id": 57710827, "answer_count": 1, "score": 0, "last_activity_date": 1567083740, "creation_date": 1566979259, "last_edit_date": 1566990597, "question_id": 57687602, "link": "https://stackoverflow.com/questions/57687602/use-top-left-origin-in-opengl", "title": "Use top-left origin in OpenGL", "body": "<p>I am trying to set my co-ordinate system such that the y-axis points down the screen.</p>\n\n<pre><code>// Determine view-projection matrix\nglm::mat4 projection = glm::ortho(\n    -3.0f,    // left\n    3.0f,     // right\n    3.0f,     // bottom\n    -3.0f);   // top\n\n// Right handed rule:\n// x points right\n// y points down\n// z points into the screen\nglm::mat4 view = glm::lookAt(\n    glm::vec3(0, 0, -1),    // camera position\n    glm::vec3(0, 0, 0),     // look at\n    glm::vec3(0, -1, 0)     // up vector\n);\n\nglm::mat4 viewProjMatrix = projection * view;\n</code></pre>\n\n<p>However, when I try to render 2 objects:</p>\n\n<pre><code>A at (0, 0)\nB at (1, 1)\n</code></pre>\n\n<p>A appears in the centre of the screen, and B appears in the top-right. I would expect it to appear in the bottom-right.</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["c++", "inheritance", "interface", "abstract-class", "pure-virtual"], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 6, "last_activity_date": 1566979120, "creation_date": 1566979120, "answer_id": 57687561, "question_id": 57687497, "link": "https://stackoverflow.com/questions/57687497/declaring-an-interface-in-c-and-not-emmiting-its-vtable-to-every-translation/57687561#57687561", "title": "Declaring an &quot;interface&quot; in C++ and not emmiting its vtable to every translation unit", "body": "<p>You already have a non-pure virtual function: the destructor! Just define it in its own translation unit.</p>\n\n<pre><code>// IDemo.h\n\nclass IDemo\n{\npublic:\n    virtual ~IDemo();\n    virtual void OverrideMe() = 0;\n};\n</code></pre>\n\n<p></p>\n\n<pre><code>// IDemo.cpp\n\nIDemo::~IDemo() = default;\n</code></pre>\n"}], "owner": {"reputation": 395, "user_id": 5214345, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Q1gpl.png?s=128&g=1", "display_name": "Glinka", "link": "https://stackoverflow.com/users/5214345/glinka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1566979439, "accepted_answer_id": 57687561, "answer_count": 1, "score": 3, "last_activity_date": 1566979120, "creation_date": 1566978877, "question_id": 57687497, "link": "https://stackoverflow.com/questions/57687497/declaring-an-interface-in-c-and-not-emmiting-its-vtable-to-every-translation", "closed_reason": "Duplicate", "title": "Declaring an &quot;interface&quot; in C++ and not emmiting its vtable to every translation unit", "body": "<p>According to <a href=\"https://stackoverflow.com/a/318137/5214345\">this</a> answer, the way to declare a class in C++ conceptually analogous to an interface is like this:</p>\n\n<pre><code>class IDemo\n{\npublic:\n    virtual ~IDemo() {}\n    virtual void OverrideMe() = 0;\n};\n</code></pre>\n\n<p>But when I do this, I get the warning: <code>'IDemo' has no out-of-line virtual method definitions; its vtable will be emitted in every translation unit</code>. Is there a proper way to use such interfaces in a project without polluting every translation unit with those vtables?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "edited": false, "score": 0, "creation_date": 1566978928, "post_id": 57687452, "comment_id": 101820002, "body": "Yes, that&#39;s correct. To print the data: <code>cout &lt;&lt; n1.link-&gt;data;</code>."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1566979192, "post_id": 57687452, "comment_id": 101820135, "body": "It correct, but it&#39;s also fairly useless, because the point of a linked list is that you can extend it indefinitely. With a linked list declared that way your list is determined by the number of node variables you declare. You might as well use an array."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1566979552, "post_id": 57687452, "comment_id": 101820298, "body": "I would say incorrect as <code>n2.link</code> is not initialized."}], "answers": [{"comments": [{"owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "edited": false, "score": 2, "creation_date": 1566979139, "post_id": 57687525, "comment_id": 101820112, "body": "It&#39;s C++. it&#39;s better than to use <code>nullptr</code> and <code>cout</code>."}], "tags": [], "owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "is_accepted": true, "score": 0, "last_activity_date": 1566978987, "creation_date": 1566978987, "answer_id": 57687525, "question_id": 57687452, "link": "https://stackoverflow.com/questions/57687452/can-i-create-a-linked-list-in-this-way/57687525#57687525", "title": "Can i create a linked list in this way?", "body": "<blockquote>\n  <p>Is the above code correct?</p>\n</blockquote>\n\n<p>It will compile, and run, but it would make sense to set <code>n2.link = NULL;</code> so that your other code can find where the end of the list is.</p>\n\n<blockquote>\n  <p>What command should I write to print the data of the node whose address is stored in the link of n1.</p>\n</blockquote>\n\n<pre><code>printf(\"%d\\n\", n1.link-&gt;data);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11987787"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 57687525, "answer_count": 1, "score": 0, "last_activity_date": 1566978987, "creation_date": 1566978738, "last_edit_date": 1566978847, "question_id": 57687452, "link": "https://stackoverflow.com/questions/57687452/can-i-create-a-linked-list-in-this-way", "title": "Can i create a linked list in this way?", "body": "<pre><code>struct node\n{\n    int data;\n    node *link;\n} n1, n2;\nn1.data = 1;\nn1.link = &amp;n2;  //in the link pointer of n1 store the address of n2\nn2.data = 2;\n</code></pre>\n\n<p>Is the above code correct?\nWhat command should I write to print the data of the node whose address is stored  in the link of n1.</p>\n"}, {"tags": ["c++", "nuget", "native", "nuget-package"], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 11988063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0d1a93bc4e720b81e06643418949cd?s=128&d=identicon&r=PG&f=1", "display_name": "Lee", "link": "https://stackoverflow.com/users/11988063/lee"}, "is_accepted": false, "score": 1, "last_activity_date": 1566995231, "last_edit_date": 1566995231, "creation_date": 1566984709, "answer_id": 57689214, "question_id": 57687422, "link": "https://stackoverflow.com/questions/57687422/native-nuget-package-installs-in-vs-but-no-reference-added-for-c-native-proj/57689214#57689214", "title": "Native Nuget Package Installs in VS But No Reference Added For C++ (Native) Projects", "body": "<p>It is quite unfortunate, but native Nugets are a thing of the past. VSPkg being developed by Microsoft is still in process and will probably be\nreleased somewhere around 2020. CoApp provides a default way to create native C, C++ Nugets, but a lot of problems come with it. The <code>CoApp</code> project was ended\nin its beta stage, so the support you get is only minimal and only from chat forums or IRCs.</p>\n\n<p>Though <code>CoApp</code> is indeed a good tool to create native libraries/nugets, Nuget Package Manager by default creates a lot of problems for native nugets. The first \nand the foremost is referencing. \nNugets by default use package manager to overcome this problem, but in case of native nugets in native projects, you don't get the choice. <code>ProjectReferences</code> are still a thing of the \nfuture for C++ projects and you are still bound to use the package.config to declare the versioning and references.</p>\n\n<p>The Package Manager/CoApp creates native packages with a \"/Native\" tag also without any versioning. Thus without any versioning there is no way to reference the nugets in native projects.\nThe the only way to use native Nugets are either in <code>.Net Core</code> applications, in <code>Xamarin</code> or <code>C#</code> multitargeted projects that provide the above feature. It is quite unfortunate that C/C++ nugets cannot be used in C/C++ projects in VS.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11988499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5107514daa4f2147e5370602b077ae?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel Jacks", "link": "https://stackoverflow.com/users/11988499/samuel-jacks"}, "is_accepted": false, "score": 0, "last_activity_date": 1566986578, "creation_date": 1566986578, "answer_id": 57689834, "question_id": 57687422, "link": "https://stackoverflow.com/questions/57687422/native-nuget-package-installs-in-vs-but-no-reference-added-for-c-native-proj/57689834#57689834", "title": "Native Nuget Package Installs in VS But No Reference Added For C++ (Native) Projects", "body": "<p>There is no way to directly add an native(C/C++) built nuget to a native (C/C++) project via Visual Studio. Well at\nleast not by default.\nThe only way to incorporate this is to load the Dll(and not nuget) at runtime. This seems to be the only way.\nWell theres no point to add a C++ nuget to a C++ project anyways. It is better to add the references to the DLL.\njust in case you dont want to, you might take the other option to load the DLL during runtime.\nA very similar thing is done here:\n<a href=\"https://github.com/aspnet/KestrelHttpServer/blob/e4b9bd265c75704529409638fd9cdfac504a93ef/src/Microsoft.AspNet.Server.Kestrel/KestrelEngine.cs#L26\" rel=\"nofollow noreferrer\">https://github.com/aspnet/KestrelHttpServer/blob/e4b9bd265c75704529409638fd9cdfac504a93ef/src/Microsoft.AspNet.Server.Kestrel/KestrelEngine.cs#L26</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7852775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fea404f1c4bdcace900f5d51de48e61?s=128&d=identicon&r=PG&f=1", "display_name": "Soham Pal", "link": "https://stackoverflow.com/users/7852775/soham-pal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1566995231, "creation_date": 1566978642, "question_id": 57687422, "link": "https://stackoverflow.com/questions/57687422/native-nuget-package-installs-in-vs-but-no-reference-added-for-c-native-proj", "title": "Native Nuget Package Installs in VS But No Reference Added For C++ (Native) Projects", "body": "<p>I have just create a native Nuget Package(C/C++) and trying to consume it in another Native package in Visual Studio. From Nuget Package Manager, i am able to see that the  nuget gets installed and in package.config i am able to see it. But under project references it is still not referenced. How do i add the reference to the Native Nuget?</p>\n\n<p>I have already tried updating the package.config as per the nuget versions but that didint help.</p>\n"}, {"tags": ["c++", "vector", "placeholder", "c++03"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1566977648, "post_id": 57687076, "comment_id": 101819416, "body": "Do you want to do <code>arr[v[i]]</code> or <code>arr[i]</code> (they do the same thing in your code)? Could you please spell out the equivalent <code>for</code> loop for clarity?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566977682, "post_id": 57687076, "comment_id": 101819427, "body": "What do you want to pass to the function, the values in the array? Or the index of the elements? Both? Something else?"}, {"owner": {"reputation": 1, "user_id": 6122288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38149008adbf7b158425308a10aac0ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lee Jiyong", "link": "https://stackoverflow.com/users/6122288/lee-jiyong"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1566978053, "post_id": 57687076, "comment_id": 101819563, "body": "@MaxLanghof I want arr[v[i]] !!!"}, {"owner": {"reputation": 1, "user_id": 6122288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38149008adbf7b158425308a10aac0ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lee Jiyong", "link": "https://stackoverflow.com/users/6122288/lee-jiyong"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566978073, "post_id": 57687076, "comment_id": 101819576, "body": "@Someprogrammerd pass values in the array!"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1566978225, "post_id": 57687076, "comment_id": 101819656, "body": "Maybe should have used different values in the array, because with the array you show, and the initialization of the vector, then for any valid index <code>i</code> then <code>v[i] == i</code> <i>and</i> <code>arr[i] == i</code> as well, from which follows that <code>arr[v[i]] == i</code>."}, {"owner": {"reputation": 1, "user_id": 6122288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38149008adbf7b158425308a10aac0ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lee Jiyong", "link": "https://stackoverflow.com/users/6122288/lee-jiyong"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1566978259, "post_id": 57687076, "comment_id": 101819672, "body": "@Someprogrammerdude Unfortunately, we are using a compiler that supports gcc c++0x :)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1566978846, "post_id": 57687076, "comment_id": 101819962, "body": "Lambda would be the solution since C++11. Before, you might create extra function to do the equivalent (<code>void function2(int* arr, int i) {function(arr[i]);}</code> and bind this one)."}, {"owner": {"reputation": 1, "user_id": 6122288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38149008adbf7b158425308a10aac0ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lee Jiyong", "link": "https://stackoverflow.com/users/6122288/lee-jiyong"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1567035302, "post_id": 57687076, "comment_id": 101846160, "body": "@Jarod42 Thank you &#39;Jarod42&#39; It was very helpful"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6122288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38149008adbf7b158425308a10aac0ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lee Jiyong", "link": "https://stackoverflow.com/users/6122288/lee-jiyong"}, "edited": false, "score": 0, "creation_date": 1566978487, "post_id": 57687358, "comment_id": 101819790, "body": "Is there any other way than to add a function? Thank you."}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": false, "score": 1, "last_activity_date": 1566978407, "creation_date": 1566978407, "answer_id": 57687358, "question_id": 57687076, "link": "https://stackoverflow.com/questions/57687076/can-i-use-placeholder-as-an-index-for-an-array-in-c/57687358#57687358", "title": "Can i use placeholder as an index for an array in c++?", "body": "<p>If you insist for using <code>boost::bind</code> you can add <code>getValue</code> function which takes index and returns a value of array and make binds combination:</p>\n\n<pre><code> int getValue(int* arr, int index)\n {\n    return arr[index];\n }\n\n\n std::for_each(v.begin(), v.end(), \n          boost::bind(&amp;function, boost::bind(getValue, arr, boost::placeholders::_1) ));\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6122288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38149008adbf7b158425308a10aac0ec?s=128&d=identicon&r=PG&f=1", "display_name": "Lee Jiyong", "link": "https://stackoverflow.com/users/6122288/lee-jiyong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566978718, "creation_date": 1566977386, "last_edit_date": 1566978718, "question_id": 57687076, "link": "https://stackoverflow.com/questions/57687076/can-i-use-placeholder-as-an-index-for-an-array-in-c", "title": "Can i use placeholder as an index for an array in c++?", "body": "<p>I'll show code block.</p>\n\n<pre><code>void function(int n) {}\n\n\nint arr[10] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}\nstd::vector&lt;int&gt; v;\nfor (int i=0; i&lt;10; i++)\n    v.push_back(i);\n\nstd::for_each(v.begin(), v.end(), boost::bind(&amp;function, arr[_1]))\n</code></pre>\n\n<p>Is there a way to use placeholder as an index for an array in the code above?</p>\n\n<p>I am limited to gcc 4.4.7, so I cannot use C++11 and beyond.</p>\n"}, {"tags": ["c++", "linked-list", "singly-linked-list"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 2, "creation_date": 1566977402, "post_id": 57687036, "comment_id": 101819303, "body": "What&#39;s <code>go</code> and <code>go2</code>? Please post all of your code, including the <code>main</code> function."}, {"owner": {"reputation": 61, "user_id": 8092091, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jsDCmPyD9XI/AAAAAAAAAAI/AAAAAAAAAbY/OLvbPTnQKF4/photo.jpg?sz=128", "display_name": "Uday P", "link": "https://stackoverflow.com/users/8092091/uday-p"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1566977784, "post_id": 57687036, "comment_id": 101819460, "body": "@Blaze sorry,updated"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1566977971, "post_id": 57687036, "comment_id": 101819531, "body": "Holy moly, do you have to pay per white space used? ;) In any case, please add the exact inputs you are providing to the program."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 8092091, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jsDCmPyD9XI/AAAAAAAAAAI/AAAAAAAAAbY/OLvbPTnQKF4/photo.jpg?sz=128", "display_name": "Uday P", "link": "https://stackoverflow.com/users/8092091/uday-p"}, "edited": false, "score": 0, "creation_date": 1566978778, "post_id": 57687362, "comment_id": 101819930, "body": "Sorry I missed a line there... Is the problem same now? Because I I&#39;m getting the same error"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 61, "user_id": 8092091, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jsDCmPyD9XI/AAAAAAAAAAI/AAAAAAAAAbY/OLvbPTnQKF4/photo.jpg?sz=128", "display_name": "Uday P", "link": "https://stackoverflow.com/users/8092091/uday-p"}, "edited": false, "score": 0, "creation_date": 1566978937, "post_id": 57687362, "comment_id": 101820007, "body": "I don&#39;t know what you intended to put there, but if I put <code>go = start1;</code> before the <code>cout &lt;&lt; &quot;Resultant Polynomial : &quot;;</code> for instance, the segementation fault is gone and the program terminates properly."}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 0, "last_activity_date": 1566978416, "creation_date": 1566978416, "answer_id": 57687362, "question_id": 57687036, "link": "https://stackoverflow.com/questions/57687036/how-to-fix-the-segmentation-fault-after-entering-the-second-polynomial/57687362#57687362", "title": "How to fix the segmentation fault after entering the second polynomial?", "body": "<p>The reason why the program crashes is because here:</p>\n\n<pre><code>cout &lt;&lt; \"Resultant Polynomial : \";\nfor (i = 0; i &lt;= d1; i++)\n{\n    cout &lt;&lt; go-&gt;coef &lt;&lt; \"^\" &lt;&lt; i + 1 &lt;&lt; \" + \";\n</code></pre>\n\n<p><code>go</code> is a nullpointer. This is because before this snippet, you have this loop:</p>\n\n<pre><code>while (go != NULL)\n    { ... }\n</code></pre>\n\n<p>So when this loop ends, <code>go</code> is a nullpointer as the loop doesn't end otherwise (it doesn't <code>break</code> or terminate otherwise). Did you mean to set <code>go</code> to a different initial value after this loop?</p>\n\n<hr>\n\n<p>On an unrelated note, please read <a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\">Why should I not #include &lt;bits/stdc++.h&gt;?</a> and <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is &quot;using namespace std;&quot; considered bad practice?</a></p>\n"}], "owner": {"reputation": 61, "user_id": 8092091, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jsDCmPyD9XI/AAAAAAAAAAI/AAAAAAAAAbY/OLvbPTnQKF4/photo.jpg?sz=128", "display_name": "Uday P", "link": "https://stackoverflow.com/users/8092091/uday-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566978699, "creation_date": 1566977223, "last_edit_date": 1566978699, "question_id": 57687036, "link": "https://stackoverflow.com/questions/57687036/how-to-fix-the-segmentation-fault-after-entering-the-second-polynomial", "title": "How to fix the segmentation fault after entering the second polynomial?", "body": "<p>I want to add  two polynomials using linked lists. But after entering the second polynomial in 2nd linked list i'm getting a segmentation fault.</p>\n\n<p>when i tried to print the polynomial 1 the powers remain 1 itself but aren't incrementing.\nWas trying for all possible errors , so code might be little clumsy.</p>\n\n<pre><code> #include&lt;bits/stdc++.h&gt;\n using namespace std;\n struct node{\n  int coef;\n  int po;\n  node *next;\n }*start1=NULL,*go,*go2,*start2=NULL;\nint main()\n{\nint d1,d2;\ncout&lt;&lt;\"Enter degree of poly 1 :\";\ncin&gt;&gt;d1;\ncout&lt;&lt;\"Enter degree of poly 2 :\";\ncin&gt;&gt;d2;\nint i,c,p;\ncout&lt;&lt;\"Polynomial 1:\" ;\nfor(i=0;i&lt;=d1;i++)\n{   p=1;\n\n    cout&lt;&lt;\"Enter coeff of po  \"&lt;&lt;i&lt;&lt;\" : \" ;\n    cin&gt;&gt;c;\n    node *temp=new node;\n\n    temp-&gt;po=p;\n    p=p+1;\n    temp-&gt;coef=c;\n    temp-&gt;next=NULL;\n    go=start1;\n    if(start1==NULL)\n    {\n        start1=temp;\n        continue;\n    }\n    while ((go-&gt;next)!=NULL)\n    {\n        go=go-&gt;next;\n    }\n    go-&gt;next=temp;\n    p=p+1;\n}\ncout&lt;&lt;\"Polynomial 2 :\";\nfor(i=0;i&lt;=d2;i++)\n{   p=1;\n    cout&lt;&lt;\"Enter coeff of po \"&lt;&lt;i&lt;&lt;\" :\";\n    cin&gt;&gt;c;\n    node *temp2=new node;\n    temp2-&gt;po=p;\n    temp2-&gt;coef=c;\n    temp2-&gt;next=NULL;\n    go2=start2;\n    if(start2==NULL)\n    {\n        start2=temp2;\n        continue;\n    }\n    while ((go2-&gt;next)!=NULL)\n    {\n        go2=go2-&gt;next;\n        cout&lt;&lt;\"kk\";\n    }\n\n    go2-&gt;next=temp2;\n    p=p+1;\n}       \ngo=start1;\nwhile(go!=NULL)\n{\n    go2=start2;\n    while(go2-&gt;next !=NULL)\n    {\n        if((go-&gt;po)==(go2-&gt;po))\n        {\n            go-&gt;coef = go-&gt;coef + go2-&gt;coef;\n        }\n        go2=go2-&gt;next;\n    }\n    go=go-&gt;next;\n}\n    go=start1;\ncout&lt;&lt;\"Resultant Polynomial : \";\nfor(i=0;i&lt;=d1;i++)\n{\n    cout&lt;&lt;go-&gt;coef&lt;&lt;\"^\"&lt;&lt;i+1&lt;&lt;\" + \";\n    go=go-&gt;next;\n}\n</code></pre>\n\n<p>i expected the powers to be increasing but it is left as 1\nand im getting a segmentation fault</p>\n"}, {"tags": ["c++", "windows", "visual-c++"], "comments": [{"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1566979214, "post_id": 57686960, "comment_id": 101820139, "body": "call heron::Engine::Factory is there. that jle jumps around it to return if variable already initialized. Do you call this function from several threads? it is not thread-safe in this implementation, it possible to have data race. In that case, use initialization on demand holder pattern, lazy initialization in this case isn&#39;t safe"}, {"owner": {"reputation": 417, "user_id": 4133803, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/af9e6457fb6813ee11b13038fde7824f?s=128&d=identicon&r=PG&f=1", "display_name": "wqyfavor", "link": "https://stackoverflow.com/users/4133803/wqyfavor"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1566979519, "post_id": 57686960, "comment_id": 101820277, "body": "I did not call this function in several threads. If the variable is already initialized, why I always got nullptr..  By the way I use this code in a dll. But I don&#39;t think this affects the behavior."}, {"owner": {"reputation": 417, "user_id": 4133803, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/af9e6457fb6813ee11b13038fde7824f?s=128&d=identicon&r=PG&f=1", "display_name": "wqyfavor", "link": "https://stackoverflow.com/users/4133803/wqyfavor"}, "reply_to_user": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1566979713, "post_id": 57686960, "comment_id": 101820381, "body": "My code compiles with c++14 and runs on Win10. According to document thread safety is guaranteed.  <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/zc-threadsafeinit-thread-safe-local-static-initialization?view=vs-2019\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/build/reference/&hellip;</a>"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1566980512, "post_id": 57686960, "comment_id": 101820810, "body": "It called Engine::Factory somewhere then. your architecture is weird. Singletons in DLL aren&#39;t quite canonic case... dlls are loaded before any entry into main program. For it&#39;s Engine::Factory which probably returns 0. Note, you have only one instance of Engine&#39;s descendant for all children. There can be only one <code>Engine::Factory()</code>, only one definition of that function in program. Maybe this is more of CRTP use case. your sharedInstance is inline, it may end with wrong instance within your program (as DLL is technically <i>separate</i> program with own entry point)"}], "answers": [{"comments": [{"owner": {"reputation": 417, "user_id": 4133803, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/af9e6457fb6813ee11b13038fde7824f?s=128&d=identicon&r=PG&f=1", "display_name": "wqyfavor", "link": "https://stackoverflow.com/users/4133803/wqyfavor"}, "edited": false, "score": 0, "creation_date": 1566977993, "post_id": 57687212, "comment_id": 101819544, "body": "In my program, I turn on /GR- /Gw /GA /GL and I got this problem. <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/compiler-options-listed-by-category?view=vs-2019\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/build/reference/&hellip;</a>"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 417, "user_id": 4133803, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/af9e6457fb6813ee11b13038fde7824f?s=128&d=identicon&r=PG&f=1", "display_name": "wqyfavor", "link": "https://stackoverflow.com/users/4133803/wqyfavor"}, "edited": false, "score": 0, "creation_date": 1566978424, "post_id": 57687212, "comment_id": 101819762, "body": "@wqyfavor <a href=\"https://rextester.com/DWG27150\" rel=\"nofollow noreferrer\">rextester.com/DWG27150</a> something else is happening."}, {"owner": {"reputation": 417, "user_id": 4133803, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/af9e6457fb6813ee11b13038fde7824f?s=128&d=identicon&r=PG&f=1", "display_name": "wqyfavor", "link": "https://stackoverflow.com/users/4133803/wqyfavor"}, "edited": false, "score": 0, "creation_date": 1566982702, "post_id": 57687212, "comment_id": 101822043, "body": "Thanks. Finally I have to change compiler flags to solve this issue."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 417, "user_id": 4133803, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/af9e6457fb6813ee11b13038fde7824f?s=128&d=identicon&r=PG&f=1", "display_name": "wqyfavor", "link": "https://stackoverflow.com/users/4133803/wqyfavor"}, "edited": false, "score": 0, "creation_date": 1566985311, "post_id": 57687212, "comment_id": 101823473, "body": "@wqyfavor it&#39;s not clear what did you change."}, {"owner": {"reputation": 417, "user_id": 4133803, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/af9e6457fb6813ee11b13038fde7824f?s=128&d=identicon&r=PG&f=1", "display_name": "wqyfavor", "link": "https://stackoverflow.com/users/4133803/wqyfavor"}, "edited": false, "score": 0, "creation_date": 1566986052, "post_id": 57687212, "comment_id": 101823876, "body": "I removed /Gw /GA /GL flags from my DLL cmake file."}], "tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": true, "score": 0, "last_activity_date": 1566977861, "creation_date": 1566977861, "answer_id": 57687212, "question_id": 57686960, "link": "https://stackoverflow.com/questions/57686960/visual-c-static-initializer-strange-behavior/57687212#57687212", "title": "Visual C++ static initializer strange behavior", "body": "<p>you should check return value, NRVO is likely upsetting your debugging. if result is still 0, it's likely something prevents vtable construction. Working example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n\nclass EngineWindows;\n\nclass Engine {\npublic:\n    static Engine* sharedInstance() {\n        static Engine* instance = Factory();\n        return instance;\n    }\n\n    static Engine* Factory();\n};\n\nclass EngineWindows: public Engine {\n};\n\nEngine* Engine::Factory() {\n    return new EngineWindows();\n}\n\nint main()\n{\n    std::cout &lt;&lt; EngineWindows::sharedInstance() &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1566981072, "post_id": 57687996, "comment_id": 101821134, "body": "use of DLLs might be legit if it&#39;s meant to create a program that can be modified after compilation. But in that case APIs between modules shouldn&#39;t rely on statically-initialized objects. Best case if they are pure-functional, although use of classes are possible, just how MS docs describe."}], "tags": [], "owner": {"reputation": 59, "user_id": 11983682, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-vb1aC4kwe_k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rduZ936GyUEfo--C-HXruOKU38KQA/photo.jpg?sz=128", "display_name": "Alexey Medvedev", "link": "https://stackoverflow.com/users/11983682/alexey-medvedev"}, "is_accepted": false, "score": 2, "last_activity_date": 1566980676, "creation_date": 1566980676, "answer_id": 57687996, "question_id": 57686960, "link": "https://stackoverflow.com/questions/57686960/visual-c-static-initializer-strange-behavior/57687996#57687996", "title": "Visual C++ static initializer strange behavior", "body": "<p>Personally, I think you are trying wrong approach.\nInstead of trying to hack it using replacing .cpp unit, do it by conditional compilation.\nLike here, for example - <a href=\"https://stackoverflow.com/questions/6649936/c-compiling-on-windows-and-linux-ifdef-switch\">C++ compiling on Windows and Linux: ifdef switch</a></p>\n"}], "owner": {"reputation": 417, "user_id": 4133803, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/af9e6457fb6813ee11b13038fde7824f?s=128&d=identicon&r=PG&f=1", "display_name": "wqyfavor", "link": "https://stackoverflow.com/users/4133803/wqyfavor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1567013592, "accepted_answer_id": 57687212, "answer_count": 2, "score": 0, "last_activity_date": 1566980676, "creation_date": 1566976948, "last_edit_date": 1566980039, "question_id": 57686960, "link": "https://stackoverflow.com/questions/57686960/visual-c-static-initializer-strange-behavior", "closed_reason": "Not suitable for this site", "title": "Visual C++ static initializer strange behavior", "body": "<p>I have a code base which run well on iOS and Android using Clang.\nRecently I migrate the code to Windows using Visual C++ 2019. There are several strange behaviors of cl compiler.</p>\n\n<pre><code>class Engine {\npublic:\n    static Engine* sharedInstance() {\n        Engine* aaa = Factory(); // Test code\n        static Engine* instance = Factory();\n        return instance;\n    }\n\n    static Engine* Factory();\n};\n</code></pre>\n\n<p>where Factory is a static function implemented in each platform specific file return platform unique Engine subclass instance.</p>\n\n<pre><code>class EngineWindows: public Engine {\n};\n\nEngine* Engine::Factory() {\n    return new EngineWindows();\n}\n</code></pre>\n\n<p>But when I debug. instance is always nullptr and cannot enter Factory() function. I create another non-static instance using 'Engine* aaa = Factory();'. I can enter Factory() function and aaa has valid pointer.</p>\n\n<p>So strange.</p>\n\n<p><a href=\"https://i.stack.imgur.com/3zISF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3zISF.png\" alt=\"enter image description here\"></a></p>\n\n<p>Assembly code shows that for instance, there is no Factory call and the code jump away at \"jle\".</p>\n\n<p><a href=\"https://i.stack.imgur.com/ipQnQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ipQnQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>By the way, I turned on /Gw /GA /GL for my DLL.\nAfter I removed these flags. Everything goes fine, the instance successfully initialized. And the assembly codes look like this.</p>\n\n<p><a href=\"https://i.stack.imgur.com/49ZJz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/49ZJz.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "pointers", "shared-ptr"], "comments": [{"owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "edited": false, "score": 0, "creation_date": 1566977173, "post_id": 57686944, "comment_id": 101819182, "body": "You never change stepCount. Why do you think it has to increase?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1566977525, "post_id": 57686944, "comment_id": 101819354, "body": "Look closely at <code>std::cout &lt;&lt; &quot;Building plan is now in step &quot; &lt;&lt; stepCount &lt;&lt; std::endl;</code> and explain to yourself where <code>stepCount</code> increases."}, {"owner": {"reputation": 123, "user_id": 11399142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdb7e8963401b5fc314f6709f6e2f36e?s=128&d=identicon&r=PG&f=1", "display_name": "elyptikus", "link": "https://stackoverflow.com/users/11399142/elyptikus"}, "edited": false, "score": 0, "creation_date": 1566977625, "post_id": 57686944, "comment_id": 101819404, "body": "Ah $#%@... Thanks so much. I searched for the misbehavior in the shared_ptr and did not check my functions. Thanks so much!"}], "owner": {"reputation": 123, "user_id": 11399142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdb7e8963401b5fc314f6709f6e2f36e?s=128&d=identicon&r=PG&f=1", "display_name": "elyptikus", "link": "https://stackoverflow.com/users/11399142/elyptikus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1566976891, "creation_date": 1566976891, "question_id": 57686944, "link": "https://stackoverflow.com/questions/57686944/how-can-i-store-a-shared-ptr-dynamically-in-a-shared-ptr", "title": "How can I store a shared_ptr dynamically in a shared_ptr?", "body": "<p>I got a class called <code>BuildingPlan</code> which is holding different values and functions. For minimal code I just use one function <code>step()</code>, which iterates the <code>stepCount</code>.\nI also got a class called <code>Builder</code> which holds building plans for different objects (like garage and house) as shared pointers.\nNow I want to call the right <code>step()</code> function by choice of the user.</p>\n\n<p>I assume that I need to use a pointer for my problem. But when I run the following minimal code the values of <code>stepCount</code> are not changed.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nclass BuildingPlan {\n public:\n  BuildingPlan(int stepCount) : stepCount(stepCount) {};\n  int stepCount;\n  bool step() {\n    std::cout &lt;&lt; \"Building plan is now in step \" &lt;&lt; stepCount &lt;&lt; std::endl;\n    return true;\n  };\n};\n\nclass Builder {\n public:\n  std::shared_ptr&lt;BuildingPlan&gt; house{new BuildingPlan(0)};\n  std::shared_ptr&lt;BuildingPlan&gt; garage{new BuildingPlan(0)};\n\n  std::shared_ptr&lt;BuildingPlan&gt; whatToBuild;\n};\n\nint main() {\n  Builder builder;\n  bool finished = false;\n\n  while (!finished) {\n\n    // now i want to change which shared pointer is used\n    int id;\n    std::cout &lt;&lt; \"What do you want to build? (0 = house, 1 = garage, 2 = finish) \";\n    std::cin &gt;&gt; id;\n    std::cout &lt;&lt; std::endl;\n\n    switch (id) {\n      case 0: {\n        builder.whatToBuild = builder.house;\n        break;\n      }\n      case 1: {\n        builder.whatToBuild = builder.garage;\n        break;\n      }\n      case 2:\n        finished = true;\n        break;\n      default:\n        std::cout &lt;&lt; \"Wrong number!\" &lt;&lt; std::endl;\n        continue;\n    }\n\n    builder.whatToBuild-&gt;step();\n\n    std::cout &lt;&lt; \"House step: \" &lt;&lt; builder.house-&gt;stepCount &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Garage step: \" &lt;&lt; builder.garage-&gt;stepCount &lt;&lt; std::endl &lt;&lt; std::endl;\n\n  }\n  return 0;\n}\n</code></pre>\n\n<p>I expect that the <code>stepCount</code> increases when I call the function <code>builder.whatToBuild-&gt;step()</code>\nCould you please lead me to the right direction in how to use the pointer/shared_ptr properly?</p>\n"}, {"tags": ["c++", "variadic-functions", "compile-time", "compile-time-constant"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1566976591, "post_id": 57686717, "comment_id": 101818900, "body": "This simply seems like a missed optimization by the compiler. If you insist that there is one array with compile-time constants and non-compile constants, then I doubt that you can do anything if the compiler doesn&#39;t track the individual element&#39;s compile-time constness."}, {"owner": {"reputation": 1288, "user_id": 11680056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/352e207181e5b85c5ffeef7be921898c?s=128&d=identicon&r=PG&f=1", "display_name": "sklott", "link": "https://stackoverflow.com/users/11680056/sklott"}, "edited": false, "score": 1, "creation_date": 1566976731, "post_id": 57686717, "comment_id": 101818971, "body": "As far as I understand when you do <code>const int arr[sizeof...(inp)]  = {inp.value...};</code> you lose all information about compile-time &quot;constness&quot; of values. <code>const</code> in this case means that <code>arr</code> can&#39;t be changed after initialization, but doesn&#39;t mean that it&#39;s values is compile-time constants."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1566976955, "post_id": 57686717, "comment_id": 101819068, "body": "If the array is not required, then you could simply refer to the arguments directly at each reference point, maybe via a <code>std::tuple</code>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 3, "creation_date": 1566977074, "post_id": 57686717, "comment_id": 101819128, "body": "If you get rid of the <code>iostream</code> noise in the asm output, you can clearly see that <code>clang</code> fully inlines and constant folds everything in <code>main</code> (it of course has to use <code>idiv</code> in the general case of the non-inlined <code>check</code> function): <a href=\"https://godbolt.org/z/35LRG3\" rel=\"nofollow noreferrer\">godbolt.org/z/35LRG3</a> - and so does <code>gcc</code>: <a href=\"https://godbolt.org/z/K5EAI1\" rel=\"nofollow noreferrer\">godbolt.org/z/K5EAI1</a>"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 1, "creation_date": 1566996021, "post_id": 57686717, "comment_id": 101829461, "body": "What makes you think that you lose the compile-time computation of <code>16 &#47; arr[0]</code>? Both gcc and clang perform this optimization on their latest version."}], "owner": {"reputation": 211, "user_id": 6950658, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nUk4llM81Gw/AAAAAAAAAAI/AAAAAAAAACg/9SA5GorgQ6E/photo.jpg?sz=128", "display_name": "mriera", "link": "https://stackoverflow.com/users/6950658/mriera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1566976724, "creation_date": 1566976031, "last_edit_date": 1566976724, "question_id": 57686717, "link": "https://stackoverflow.com/questions/57686717/how-can-i-use-c11-parameter-packs-to-distinguish-between-compile-time-constant", "title": "How can I use C++11 parameter packs to distinguish between compile time constants and runtime vars?", "body": "<p>I am trying to make an optimal function that would accept compile-time constants and runtime constants, and do optimization at compile-time when the compiler knows the value. The problem is when I try to unpack the parameter pack it has to be moved into a runtime variable causing the compiler not to optimize in the same manner as if the constants was properly propagated. Unfortunately I'm not quite sure how to unpack to a single object while maintaining a mixture of compile-time and runtime variables in the same structure.</p>\n\n<p>I have two working test cases: one that does what it suppose to do (assembly-wise), but is not generic with regards to parameter packs. The other does have a parameter packs, but the compiler loses the compile-time constant through the unpacking.</p>\n\n<pre><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;type_traits&gt;\n#include &lt;functional&gt;\n#include &lt;tuple&gt;\n\nstruct ii{\n    int value;\n};\n\ntemplate&lt;int Val&gt;\nusing tt = std::conditional_t&lt;Val==0, ii, std::integral_constant&lt;int, Val&gt; &gt;;\n\n\ntemplate&lt;int... vals&gt;\nvoid foo( tt&lt;vals&gt;... inp)\n{\n    const int arr[sizeof...(inp)]  = {inp.value...};\n\n    std::cout &lt;&lt; \"parameter \" &lt;&lt; (16 / arr[0]) &lt;&lt; std::endl; //&lt;-incorrect asm\n    std::cout &lt;&lt; \"parameter \" &lt;&lt; (16/ arr[1] ) &lt;&lt; std::endl; //expected asm\n}\n\n\nvoid check(ii i, std::integral_constant&lt;int, 4&gt; a)\n{\n  std::cout &lt;&lt; \"i = \" &lt;&lt; ( 16 / i.value ) &lt;&lt; std::endl; //&lt;--expected asm\n  std::cout &lt;&lt; \"i = \" &lt;&lt; (16 / a.value )  &lt;&lt; std::endl; //&lt;--this is OK in asm\n}\n\n\nint main()\n{\n  std::integral_constant&lt;int, 4&gt; four;\n  check(ii{1},four );\n\n  foo&lt;four.value,0&gt;(four, ii{1});\n}\n</code></pre>\n\n<p>The expected results for \"(16 / arr[0])\" should be calculated at compile time, and it should be a constant 4. </p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "linker-errors", "function-declaration"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1566976013, "post_id": 57686668, "comment_id": 101818663, "body": "When asking questions about build errors (which is what you have) then you should copy-paste (as text!) the full and complete build output into the question itself. And if they happen on specific lines, add comments in the code on those lines. Also please take some time to read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 1894, "user_id": 8473031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4878bfc9d6a80397a8446111fffa4dd?s=128&d=identicon&r=PG&f=1", "display_name": "RoQuOTriX", "link": "https://stackoverflow.com/users/8473031/roquotrix"}, "edited": false, "score": 0, "creation_date": 1566976014, "post_id": 57686668, "comment_id": 101818665, "body": "What are the messages of LNK2019 and LNK1120?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1566976027, "post_id": 57686668, "comment_id": 101818673, "body": "Where&#39;s your <code>main</code> function? Did you get &quot;hello world&quot; to work?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1566976075, "post_id": 57686668, "comment_id": 101818690, "body": "And what do you mean by &quot; transforming it to c#&quot;? The code you show isn&#39;t C#... How is C# involved?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1566976179, "post_id": 57686668, "comment_id": 101818727, "body": "And you should probably invest in <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">a few good books</a> to read, because whatever tutorials you have read clearly isn&#39;t enough (you make some very basic mistakes that good books, or classes, should have taught you not to do)."}, {"owner": {"reputation": 13, "user_id": 11987550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDx0OqLNysIy_Vu9e5wAPUG-C2QlUI8k4PIFpZfQA=k-s128", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11987550/bobby"}, "edited": false, "score": 0, "creation_date": 1566976742, "post_id": 57686668, "comment_id": 101818980, "body": "Thank you guys for feedback. I will try to learn more about coding."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 1, "last_activity_date": 1566976196, "creation_date": 1566976196, "answer_id": 57686763, "question_id": 57686668, "link": "https://stackoverflow.com/questions/57686668/why-doesnt-visual-studio-2019-compile-my-code/57686763#57686763", "title": "Why doesn&#39;t Visual Studio 2019 compile my code?", "body": "<p>If that's all of your code, then you probably get the linking errors because you're missing a <code>main</code> function. I get those exact two linking errors if I omit <code>main</code> on my VS project. Add this to your code:</p>\n\n<pre><code>int main() {\n    question();\n}\n</code></pre>\n\n<p>Also, you're not calling your functions, you're just declaring them:</p>\n\n<pre><code>if (answers == 0) {\n    int biggest();\n}\nif (answers == 1) {\n    int smallest();\n}\n</code></pre>\n\n<p>Remove those <code>int</code> to call the functions. You'll have to put <code>int question()</code> below those two other functions or it won't find them, unless you declare them beforehand, like this:</p>\n\n<pre><code>int biggest(); // declaring them so question() knows their signature\nint smallest();\nint question() { ... }; // question() calls biggest() and smallest()\nint biggest() { ... }; // actual implementation of those functions\nint smallest() { ... };\nint main { ... }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11987550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDx0OqLNysIy_Vu9e5wAPUG-C2QlUI8k4PIFpZfQA=k-s128", "display_name": "Bobby", "link": "https://stackoverflow.com/users/11987550/bobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 666, "favorite_count": 0, "closed_date": 1567009216, "accepted_answer_id": 57686763, "answer_count": 1, "score": 1, "last_activity_date": 1569584917, "creation_date": 1566975817, "last_edit_date": 1569584917, "question_id": 57686668, "link": "https://stackoverflow.com/questions/57686668/why-doesnt-visual-studio-2019-compile-my-code", "closed_reason": "Not suitable for this site", "title": "Why doesn&#39;t Visual Studio 2019 compile my code?", "body": "<p>I have been trying to get this code working. I have made this code mostly myself and google. I am very beginner in this, so I have no idea how to fix this.</p>\n\n<p>I have tried cutting code, transforming it to c#,(modifying it of course) new file and different compiler.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n//suurin_luku.cpp \n\nint question() {\n    double answers;\n    cout &lt;&lt; \"Do you want the biggest number, or smallest number?\\n\";\n    cout &lt;&lt; \"0 for biggers, 1 for smaller.\\n\";\n    cin &gt;&gt; answers;\n\n    if (answers == 0) {\n        int biggest();\n    }\n    if (answers == 1) {\n        int smallest();\n\n    }\n    return 0;\n}\n\n\n\n\n\n\nint biggest()\n{\n    float input1, input2, input3;\n    cout &lt;&lt; \"Please insert three numbers.\\n\";\n    cin &gt;&gt; input1 &gt;&gt; input2 &gt;&gt; input3;\n    if (input1 &gt;= input2 &amp;&amp; input1 &gt;= input3)\n    {\n        cout &lt;&lt; \"The largest number is: \" &lt;&lt; input1;\n    }\n    if (input2 &gt;= input1 &amp;&amp; input2 &gt;= input3)\n    {\n        cout &lt;&lt; \"The largest number is: \" &lt;&lt; input2;\n    }\n    if (input3 &gt;= input1 &amp;&amp; input3 &gt;= input2) {\n        cout &lt;&lt; \"The largest number is: \" &lt;&lt; input3;\n    }\n    return 0;\n}\n\nint smallest()\n{\n    float input11, input22, input33;\n    cout &lt;&lt; \"Insert three numbers.\";\n    cin &gt;&gt; input11 &gt;&gt; input22 &gt;&gt; input33;\n    if (input11 &lt;= input22 &amp;&amp; input11 &lt;= input33)\n    {\n        cout &lt;&lt; \"The smallest number is: \" &lt;&lt; input11;\n    }\n    if (input22 &lt;= input11 &amp;&amp; input22 &lt;= input33)\n    {\n        cout &lt;&lt; \"The smallest number is: \" &lt;&lt; input22;\n    }\n    if (input33 &lt;= input11 &amp;&amp; input33 &lt;= input22) {\n        cout &lt;&lt; \"The smallest number is: \" &lt;&lt; input33;\n    }\n    return 0;\n    }\n</code></pre>\n\n<p>When user inputs 0, it shows the largest inputted number. \nWhen user inputs 1, it shows the smallest inputted number.\nError codes are LNK1120 and LNK2019.</p>\n"}]