[{"tags": ["c++", "ubuntu", "com", "virtualbox"], "comments": [{"owner": {"reputation": 11, "user_id": 5977416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c7a06c802e9a89a34c31167bf9f5f3b?s=128&d=identicon&r=PG&f=1", "display_name": "Parth Desai", "link": "https://stackoverflow.com/users/5977416/parth-desai"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1456359156, "post_id": 35615555, "comment_id": 58915075, "body": "@JonnyHenly Sorry for the left out details. I have added more details. Tell me if this one sounds ok?"}], "owner": {"reputation": 11, "user_id": 5977416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c7a06c802e9a89a34c31167bf9f5f3b?s=128&d=identicon&r=PG&f=1", "display_name": "Parth Desai", "link": "https://stackoverflow.com/users/5977416/parth-desai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1456359088, "creation_date": 1456357722, "last_edit_date": 1456359088, "question_id": 35615555, "link": "https://stackoverflow.com/questions/35615555/how-to-create-a-process-in-foregorund-in-virtualbox-guest-ubuntu-using-virtualbo", "title": "How to create a process in Foregorund in Virtualbox guest Ubuntu using VirtualBox API", "body": "<p>I am using Visual Studio to develop a software which creates a process inside a VirtualBox guest OS Ubuntu. I tried to implement it using C++ with Windows as Host OS.</p>\n\n<p>Using the code below, i am able to create process inside the Ubuntu but The GUI does not run. The process only runs in the background. I can see that when I run</p>\n\n<pre><code> ps -ax\n</code></pre>\n\n<p>inside the Ubuntu terminal.</p>\n\n<p>I even tried using EXPORT $DISPLAY=:0 in the Ubuntu program but it doesn't make any difference.</p>\n\n<p>Following is the code for Windows host</p>\n\n<pre><code>BSTR userName = _com_util::ConvertStringToBSTR(\"root\");\nBSTR password = _com_util::ConvertStringToBSTR(\"saa\");\nBSTR sessionName = _com_util::ConvertStringToBSTR(\"session1\");\nBSTR processName = _com_util::ConvertStringToBSTR(\"/home/parthkumar/p\");\nProcessWaitResult processWaitResult;\nProcessCreateFlag processCreateFlag = ProcessCreateFlag_WaitForStdOut;\n\nlong it = 0;\nULONG pidd = 0L;\n\n\n\ndo {\n    guest-&gt;CreateSession(userName, password, NULL, NULL, &amp;guestSession);\n\n    CComSafeArray&lt;int&gt; flags(1);\n    flags[0] = processCreateFlag;\n\n    resultCode = guestSession-&gt;ProcessCreate(processName, NULL, NULL, flags, 0, &amp;guestProcess);\n    if (!SUCCEEDED(resultCode))\n    {\n        printf(\"\\nThe Guest Process could not be created\\n\");\n        break;\n    }\n    else \n    {\n        guestProcess-&gt;WaitFor(ProcessWaitForFlag_Start, 0, &amp;processWaitResult);\n        printf(\"\\n\\nprocess wait result %d\", processWaitResult);\n\n        resultCode = guestProcess-&gt;get_PID(&amp;pidd);\n        printf(\"\\n\\npid is %d\", pidd);\n    }\n\n} while (0);\n/*SafeArrayDestroy(flags);\nSafeArrayDestroy(arguments);*/\n\n\nreturn 0;\n}\n</code></pre>\n\n<p>The Following is the code in the Ubuntu Process</p>\n\n<pre><code> int main()\n {\n       printf(\"hello world\");\n      system(\"bash parth.sh\");\n      return 0;\n }\n</code></pre>\n\n<p>Following are the contents of parth.sh</p>\n\n<pre><code> export DISPLAY=:0\n gnome-terminal\n</code></pre>\n\n<p>How do I bring this process to foreground or change the code the run it in foreground?</p>\n\n<p>Any Ideas??\nThanks in advance guys.</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 2127883, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3d23aabc13f5412dad0e90580237ff9b?s=128&d=identicon&r=PG", "display_name": "Alex Chapp", "link": "https://stackoverflow.com/users/2127883/alex-chapp"}, "edited": false, "score": 0, "creation_date": 1456359699, "post_id": 35615642, "comment_id": 58915260, "body": "Thanks  for pointing out a future issue ill add a deconstructor to stop the memory leak"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1456359567, "last_edit_date": 1456359567, "creation_date": 1456358159, "answer_id": 35615642, "question_id": 35615549, "link": "https://stackoverflow.com/questions/35615549/confusion-with-c-templates/35615642#35615642", "title": "Confusion with c++ templates", "body": "<p>The proximal issue is that <code>Array</code> isn't fully templated:</p>\n\n<pre><code>int &amp; operator [] (int i)\n</code></pre>\n\n<p>Indexing into an <code>Array&lt;T&gt;</code> shouldn't give you an <code>int&amp;</code>, it should give you a <code>T&amp;</code>!</p>\n\n<hr />\n\n<p>The other issue with your code is that you have a <code>new</code> in your <code>Array</code> constructor - where's the corresponding <code>delete</code>? You're leaking memory! </p>\n\n<p>Same for the <code>Matrix</code> constructor, which additionally has the potential of double deleting memory if you happen to copy it.</p>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow\">Rule of Three</a></p>\n"}, {"comments": [{"owner": {"reputation": 137, "user_id": 2127883, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3d23aabc13f5412dad0e90580237ff9b?s=128&d=identicon&r=PG", "display_name": "Alex Chapp", "link": "https://stackoverflow.com/users/2127883/alex-chapp"}, "edited": false, "score": 0, "creation_date": 1456359550, "post_id": 35615835, "comment_id": 58915193, "body": "Thank you! so obvious now had a hard time seeing it though"}, {"owner": {"reputation": 414, "user_id": 1733277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4dfecdc3ae2923f3ffd8f8e0af5e05d?s=128&d=identicon&r=PG", "display_name": "Brandon Haston", "link": "https://stackoverflow.com/users/1733277/brandon-haston"}, "reply_to_user": {"reputation": 137, "user_id": 2127883, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3d23aabc13f5412dad0e90580237ff9b?s=128&d=identicon&r=PG", "display_name": "Alex Chapp", "link": "https://stackoverflow.com/users/2127883/alex-chapp"}, "edited": false, "score": 0, "creation_date": 1456359733, "post_id": 35615835, "comment_id": 58915266, "body": "No problem. Operator overloads are one of those things that can often catch people off-guard; they&#39;ve certainly bitten me."}], "tags": [], "owner": {"reputation": 414, "user_id": 1733277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4dfecdc3ae2923f3ffd8f8e0af5e05d?s=128&d=identicon&r=PG", "display_name": "Brandon Haston", "link": "https://stackoverflow.com/users/1733277/brandon-haston"}, "is_accepted": false, "score": 2, "last_activity_date": 1456359217, "creation_date": 1456359217, "answer_id": 35615835, "question_id": 35615549, "link": "https://stackoverflow.com/questions/35615549/confusion-with-c-templates/35615835#35615835", "title": "Confusion with c++ templates", "body": "<p>The [] operator overload in the array class is what's messing you up. </p>\n\n<pre><code> int &amp; operator [] (int i)\n{\n    assert(0 &lt;= i &amp;&amp; i &lt; len);\n    return buf[i];\n}\n</code></pre>\n\n<p>It clearly returns an int as its type and when you try to use it such that: <code>m[i] = new Array &lt; Type &gt;(cols);</code></p>\n\n<p>m[i] will return an int type which you're trying to assign a new Array to.</p>\n"}], "owner": {"reputation": 137, "user_id": 2127883, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/3d23aabc13f5412dad0e90580237ff9b?s=128&d=identicon&r=PG", "display_name": "Alex Chapp", "link": "https://stackoverflow.com/users/2127883/alex-chapp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 35615642, "answer_count": 2, "score": 0, "last_activity_date": 1456359567, "creation_date": 1456357697, "question_id": 35615549, "link": "https://stackoverflow.com/questions/35615549/confusion-with-c-templates", "title": "Confusion with c++ templates", "body": "<p>I am working on a homework assignment that involved converting matrix and array classes supplied by my professor into templates.  I am getting an error     '=': cannot convert from 'Array *' to 'int' in my line <code>m[i] = new Array &lt; Type &gt;(cols);</code> \nI would assume this is because m[i] is returning an int but I don't think it should be if I wrote my templates correctly and I can't quite figure out why it is giving back an int instead of a array pointer since m is an array of array pointers here is the code to my array template minus some overloads for &lt;&lt; not used in this code.</p>\n\n<pre><code>template\n&lt; typename Type &gt;\nclass Array\n{\nprivate:\n    int len;\n    Type * buf;\npublic:\n    Array(int newLen)\n        : len(newLen), buf(new Type[newLen])\n    {\n    }\n    Array(const Array &amp; l)\n        : len(l.len), buf(new Type[l.len])\n    {\n        for (int i = 0; i &lt; l.len; i++)\n            buf[i] = l.buf[i]; \n    }\n    int length()\n    {\n        return len;\n    }\n    int &amp; operator [] (int i)\n    {\n        assert(0 &lt;= i &amp;&amp; i &lt; len);\n        return buf[i];\n    }\n}\n</code></pre>\n\n<p>Here is my matrix template the error occurs in minus the same &lt;&lt; overloads</p>\n\n<pre><code>#pragma once\n#include \"Array.h\"\n\ntemplate\n&lt; typename Type &gt;\nclass Matrix\n{\nprivate:\n    int rows, cols;\n    Array&lt; Array&lt;Type&gt; * &gt; m;\npublic:\n    Matrix(int newRows, int newCols)\n        : rows(newRows), cols(newCols), m(rows)\n    {\n        for (int i = 0; i &lt; rows; i++)\n            m[i] = new Array &lt; Type &gt;(cols);\n    }\n    int numRows()\n    {\n        return rows;\n    }\n    int numCols()\n    {\n        return cols;\n    }\n    Array &lt; Type &gt; &amp; operator [] (int row)\n    {\n        return *m[row];\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "ssl", "codeblocks", "libcurl"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1456359624, "post_id": 35615435, "comment_id": 58915227, "body": "1) Find the <code>libcurldll</code> file.  2) Find the folder containing your executable. 3) Copy the <code>libcurldll</code> file into the folder containing your executable."}, {"owner": {"reputation": 543, "user_id": 5590503, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/503748cbc0671122b5489744f500ade8?s=128&d=identicon&r=PG&f=1", "display_name": "MrRobot", "link": "https://stackoverflow.com/users/5590503/mrrobot"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1456420128, "post_id": 35615435, "comment_id": 58949246, "body": "@ThomasMatthews well thanks,it worked fine for me(if you post this comment as an answer i can pick as being the answer to this question). Though,This problems persists when i try to use the programm on other computers,and the solution is still the same as here,and i dont want this to happen,is there any way i could include those dlls into the program?so i could have only one executable at the end? if not,is there any other library that could help me achieve my program(sends emails via smtp using libcurl) without having this dlls problem?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1456420443, "post_id": 35615435, "comment_id": 58949462, "body": "Search the internet for &quot;DLL Hell&quot; as background information.  The solution for other computers is to use an Installer application and have the Installer put the DLLs (that are used by your application) in the same folder as your application, if possible.  You may want to search the documentation of your IDE on how to inform the executable where the DLLs are located.  You can also &quot;delay load&quot; or have the executable load the DLLs."}, {"owner": {"reputation": 543, "user_id": 5590503, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/503748cbc0671122b5489744f500ade8?s=128&d=identicon&r=PG&f=1", "display_name": "MrRobot", "link": "https://stackoverflow.com/users/5590503/mrrobot"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1456421235, "post_id": 35615435, "comment_id": 58949964, "body": "I will look it up,thanks"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 3, "last_activity_date": 1456420296, "creation_date": 1456420296, "answer_id": 35633860, "question_id": 35615435, "link": "https://stackoverflow.com/questions/35615435/executable-error-cant-start-program/35633860#35633860", "title": "Executable error : Can&#39;t start program", "body": "<p>Common issue with DLLs or SOs is that the executable needs to know where they are.  </p>\n\n<p>A common solution is to place the DLL library in the same folder as the executable:  </p>\n\n<ol>\n<li>Find the <code>libcurldll</code> file.</li>\n<li>Find the folder containing your executable.</li>\n<li>Copy the <code>libcurldll</code> file into the folder containing your executable.</li>\n</ol>\n"}], "owner": {"reputation": 543, "user_id": 5590503, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/503748cbc0671122b5489744f500ade8?s=128&d=identicon&r=PG&f=1", "display_name": "MrRobot", "link": "https://stackoverflow.com/users/5590503/mrrobot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 35633860, "answer_count": 1, "score": 1, "last_activity_date": 1456420296, "creation_date": 1456357114, "last_edit_date": 1456384848, "question_id": 35615435, "link": "https://stackoverflow.com/questions/35615435/executable-error-cant-start-program", "title": "Executable error : Can&#39;t start program", "body": "<p>After finishing my C++ program (on windows os using codeblocks)(using libcurl) when i try to launch the program from the executable it displays an error saying that i can't start the program because libcurldll is missing,reinstall program then retry. I don't think any line of code is needed here,it's just a configuration and logics problem,any ideas,would be great !</p>\n\n<p>Please note that,running it from the codeblocks's console works fine.</p>\n"}, {"tags": ["c++", "regex", "c++11", "guideline-support-library"], "answers": [{"tags": [], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "is_accepted": true, "score": 2, "last_activity_date": 1456492522, "last_edit_date": 1456492522, "creation_date": 1456355330, "answer_id": 35615099, "question_id": 35615098, "link": "https://stackoverflow.com/questions/35615098/gslspan-fails-to-compile-with-stdregex/35615099#35615099", "title": "gsl::span fails to compile with std::regex", "body": "<p>The problem is that <code>std::regex_match</code> cannot resolve the function overload when the iterator type is <code>gsl::continuous_span_iterator</code> because <code>std::cmatch</code> uses a <code>const char*</code> as the iterator type. Neither <code>std::smatch</code> or <code>std::cmatch</code> is appropriate in this case, you need your own <code>std::match_results</code> type. Here's how it should be done:</p>\n\n<pre><code>#include &lt;regex&gt;\n#include \"gsl.h\"\n\nusing namespace std;\nusing namespace gsl;\n\nint main(int argc, const char **argv) \n{\n    char lat[8] = { '0', '1', '9', '0', '0', '0', '0', 'E' };\n    span&lt;char&gt; s = lat;\n    std::match_results&lt;decltype(s)::iterator&gt; match;\n    std::regex_match(s.begin(), s.end(), match, std::regex(\".*\"));\n}\n</code></pre>\n\n<p>That said, at the time of this writing, the revised iterator approach still won't compile due to <a href=\"https://github.com/Microsoft/GSL/issues/271\" rel=\"nofollow\">issue #271</a>. </p>\n\n<p>Until that's fixed, another workaround is:</p>\n\n<pre><code>int main(int argc, const char **argv) \n{\n    char lat[8] = { '0', '1', '9', '0', '0', '0', '0', 'E' };\n    span&lt;char&gt; s = lat;\n    std::cmatch match;\n    std::regex_match(&amp;s[0], &amp;s[s.length_bytes()], match, std::regex(\".*\"));\n}\n</code></pre>\n\n<p>The workaround approach cover cases where spans of the same or different extents are passed to the function.</p>\n"}], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 35615099, "answer_count": 1, "score": 0, "last_activity_date": 1456492545, "creation_date": 1456355330, "last_edit_date": 1456492545, "question_id": 35615098, "link": "https://stackoverflow.com/questions/35615098/gslspan-fails-to-compile-with-stdregex", "title": "gsl::span fails to compile with std::regex", "body": "<p>I'm trying to use <code>gsl::span</code> to pass some data from a packed structure of mixed binary/ascii data (hence no <code>vector</code> or <code>string</code>) to a function, where I want to operate on it with a regex, but I get the following errors:</p>\n\n<blockquote>\n  <p>error C2784: 'bool std::regex_match(_BidIt,_BidIt,std::match_results&lt;_BidIt,_Alloc> &amp;,const std::basic_regex&lt;_Elem,_RxTraits> &amp;,std::regex_constants::match_flag_type)' : could not deduce template argument for 'std::match_results>,_Alloc> &amp;' from 'std::cmatch'</p>\n  \n  <p>see declaration of 'std::regex_match'</p>\n</blockquote>\n\n<p>Here's what I'm trying to do:</p>\n\n<pre><code>#include &lt;regex&gt;\n#include \"gsl.h\"\n\nusing namespace std;\nusing namespace gsl;\n\nint main(int argc, const char **argv) \n{\n    char lat[8] = { '0', '1', '9', '0', '0', '0', '0', 'E' };\n    span&lt;char&gt; s = lat;\n\n    // in a complex implementation this would be in a function,\n    // hence the desire for span&lt;&gt;\n    std::cmatch match;\n    std::regex_match(s.begin(), s.end(), match, std::regex(\"[0-9]+\"));\n}\n</code></pre>\n"}, {"tags": ["c++", "cplex"], "comments": [{"owner": {"reputation": 1617, "user_id": 5534859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J7q76.jpg?s=128&g=1", "display_name": "serge_k", "link": "https://stackoverflow.com/users/5534859/serge-k"}, "edited": false, "score": 0, "creation_date": 1456386660, "post_id": 35615015, "comment_id": 58924911, "body": "Can you post the code fragment here or at least upload a decent picture? right now I see nothing but bunch of pixels."}, {"owner": {"reputation": 143, "user_id": 5977234, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1f91a0ce557252122ff698744baae2d8?s=128&d=identicon&r=PG&f=1", "display_name": "rezzz", "link": "https://stackoverflow.com/users/5977234/rezzz"}, "reply_to_user": {"reputation": 1617, "user_id": 5534859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J7q76.jpg?s=128&g=1", "display_name": "serge_k", "link": "https://stackoverflow.com/users/5534859/serge-k"}, "edited": false, "score": 0, "creation_date": 1456410432, "post_id": 35615015, "comment_id": 58941323, "body": "Thank you Serge! The code is not mine! I just use the example of one tutorial:"}, {"owner": {"reputation": 143, "user_id": 5977234, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1f91a0ce557252122ff698744baae2d8?s=128&d=identicon&r=PG&f=1", "display_name": "rezzz", "link": "https://stackoverflow.com/users/5977234/rezzz"}, "reply_to_user": {"reputation": 1617, "user_id": 5534859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J7q76.jpg?s=128&g=1", "display_name": "serge_k", "link": "https://stackoverflow.com/users/5534859/serge-k"}, "edited": false, "score": 0, "creation_date": 1456411788, "post_id": 35615015, "comment_id": 58942469, "body": "@Serge, I changed the question and you can see the source program in the second link as well as the picture of the error that I have in the second one. Thank you again!"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 5977234, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1f91a0ce557252122ff698744baae2d8?s=128&d=identicon&r=PG&f=1", "display_name": "rezzz", "link": "https://stackoverflow.com/users/5977234/rezzz"}, "edited": false, "score": 0, "creation_date": 1456414341, "post_id": 35630838, "comment_id": 58944645, "body": "I changed but still I have this error: &quot;fatal error LNK1112: module machine type &#39;x86&#39; conflicts with target machine type &#39;X64&#39;&quot;."}, {"owner": {"reputation": 143, "user_id": 5977234, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1f91a0ce557252122ff698744baae2d8?s=128&d=identicon&r=PG&f=1", "display_name": "rezzz", "link": "https://stackoverflow.com/users/5977234/rezzz"}, "edited": false, "score": 0, "creation_date": 1456414650, "post_id": 35630838, "comment_id": 58944894, "body": "In the following link, they completely explained the steps, however I checked the steps and could not overcome it. <a href=\"http://stackoverflow.com/questions/3563756/fatal-error-lnk1112-module-machine-type-x64-conflicts-with-target-machine-typ\" title=\"fatal error lnk1112 module machine type x64 conflicts with target machine typ\">stackoverflow.com/questions/3563756/&hellip;</a> .In linker the libraries that I added are as follows, do you think there is something wrong on these libraries?    C:\\Program Files (x86)\\IBM\\ILOG\\CPLEX_Studio1261\\cplex\\lib\\x86_windows_vs2013&zwnj;&#8203;\\stat_mdd; C:\\Program Files (x86)\\IBM\\ILOG\\CPLEX_Studio1261\\concert\\lib\\x86_windows_vs20&zwnj;&#8203;13\\stat_mdd"}], "tags": [], "owner": {"reputation": 1617, "user_id": 5534859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J7q76.jpg?s=128&g=1", "display_name": "serge_k", "link": "https://stackoverflow.com/users/5534859/serge-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1456412309, "creation_date": 1456412309, "answer_id": 35630838, "question_id": 35615015, "link": "https://stackoverflow.com/questions/35615015/cplex-concert-technology-using-c-in-visual-studio-2013/35630838#35630838", "title": "CPLEX Concert Technology using C++ in Visual studio 2013", "body": "<p>Cplex is 32-bit application so you should change <code>x64</code> to <code>x86</code> in the field next to <code>Debug</code> in the VS panel.</p>\n"}, {"tags": [], "owner": {"reputation": 88, "user_id": 4300922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RtuWY.jpg?s=128&g=1", "display_name": "Jacko", "link": "https://stackoverflow.com/users/4300922/jacko"}, "is_accepted": false, "score": 0, "last_activity_date": 1459549507, "last_edit_date": 1459549507, "creation_date": 1459544345, "answer_id": 36365754, "question_id": 35615015, "link": "https://stackoverflow.com/questions/35615015/cplex-concert-technology-using-c-in-visual-studio-2013/36365754#36365754", "title": "CPLEX Concert Technology using C++ in Visual studio 2013", "body": "<p>On page <strong>7/20, step II.(e)</strong>, the authors of the document advise to link with the cplex library: <code>cplex121.lib</code>, since they were using CPLEX 12.1. Please notice you should be entering <code>cplex1261.lib</code> instead. Also, there's no need to indicate the full path to the libraries there, you could use <code>cplex1261.lib</code>, <code>concert.lib</code> and <code>ilocplex.lib</code> instead.</p>\n\n<p>I recommend you <a href=\"http://www.leandro-coelho.com/how-to-configure-ms-visual-studio-to-use-ibm-cplex-concert/\" rel=\"nofollow\">this tutorial</a> on how to setup the C++ with CPLEX link, is simple and quite straightforward:</p>\n"}], "owner": {"reputation": 143, "user_id": 5977234, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1f91a0ce557252122ff698744baae2d8?s=128&d=identicon&r=PG&f=1", "display_name": "rezzz", "link": "https://stackoverflow.com/users/5977234/rezzz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 652, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1459549507, "creation_date": 1456354967, "last_edit_date": 1459548673, "question_id": 35615015, "link": "https://stackoverflow.com/questions/35615015/cplex-concert-technology-using-c-in-visual-studio-2013", "title": "CPLEX Concert Technology using C++ in Visual studio 2013", "body": "<p>I am a beginner in C++. I would like to use C++/Concert technology to code an optimization model. I read some tutorials to set up <code>CPLEX Concert</code> with C++ on Windows. I tried both Release and Debug modes. Finally I settled with the Debug mode. My computer has a 64-bit OS, the installed Cplex version is 12.6.1. I am using Visual Studio 2013. To build solution, I selected Debug in the Active Solution and x64 for the new platform. After compiling, I faced with the following error: </p>\n\n<p><a href=\"https://i.stack.imgur.com/459us.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/459us.png\" alt=\"http://i.stack.imgur.com/459us.png\"></a>))\". </p>\n\n<p>The code is not mine, it is from tutorial file <a href=\"http://people.tamu.edu/~bans1571/CPLEXConcertTutorial/\" rel=\"nofollow noreferrer\">here</a> pages 8-9.</p>\n\n<pre><code>error C2018: unknown character '0x3'\n</code></pre>\n\n<p>Can anyone help me to fix this error?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1456354839, "post_id": 35614935, "comment_id": 58913543, "body": "Give us an example of what the line contains, what values you read, and what values you think you should have read."}], "answers": [{"tags": [], "owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "is_accepted": true, "score": 4, "last_activity_date": 1456355177, "creation_date": 1456355177, "answer_id": 35615062, "question_id": 35614935, "link": "https://stackoverflow.com/questions/35614935/unsigned-char-not-inputting-all-3-digits/35615062#35615062", "title": "unsigned char not inputting all 3 digits", "body": "<p>The input operator is used </p>\n\n<pre><code>std::istream&amp; operator &gt;&gt; (std::istream&amp; stream, unsigned char&amp; value) \n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>std::istream&amp; operator &gt;&gt; (std::istream&amp; stream, short&amp; value)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>std::istream&amp; operator &gt;&gt; (std::istream&amp; stream, int&amp; value)\n</code></pre>\n\n<p>so it reads only 1 character. I suggesrt you to read <code>short</code> or <code>int</code> instread of <code>unsigned char</code>s than assign that values to structure like:</p>\n\n<pre><code>getline(input, line);\nistringstream iss(line);\n\nint iValue = 0;\n\niss &gt;&gt; pictureWidth;\niss &gt;&gt; pictureHeight;\niss &gt;&gt; iValue;\npictureColor.Red = iValue;\niss &gt;&gt; iValue;\npictureColor.Green = iValue;\niss &gt;&gt; iValue;\npictureColor.Blue = iValue;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1456357617, "post_id": 35615249, "comment_id": 58914570, "body": "not sure that will work, because you constructing new temporary objects (variables) in place where reference to actual variables must be used <code>static_cast&lt;int&gt;(c)</code> to create valid reference and return capability of fucntion input value -&gt; temporary object X actual value."}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1456358422, "post_id": 35615249, "comment_id": 58914833, "body": "on MSVC it even not compiles because <code>std::istream</code> must accept references to variables. full error message <code>error C2678: binary &#39;&gt;&gt;&#39; : no operator found which takes a left-hand operand of type &#39;std::istream&#39; (or there is no acceptable conversion)</code>; intellisence info `\t4\tIntelliSense: no operator &quot;&gt;&gt;&quot; matches these operands             operand types are: std::istream &gt;&gt; int\td:\\Projects\\2\\2\\2.cpp\t9 `"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1456358436, "post_id": 35615249, "comment_id": 58914837, "body": "I&#39;m sure it won&#39;t!  What was I thinking!?"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1456358555, "post_id": 35615249, "comment_id": 58914878, "body": "Sometimes it happends with me too!))))"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "reply_to_user": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1456358691, "post_id": 35615249, "comment_id": 58914919, "body": "I was thinking of output streams I guess."}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1456358815, "post_id": 35615249, "comment_id": 58914954, "body": "you may use temporary variable in your input operator overload like i did, than assign it to input result"}, {"owner": {"reputation": 3142, "user_id": 5348281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/0liGa.jpg?s=128&g=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/5348281/mykola"}, "edited": false, "score": 0, "creation_date": 1456358824, "post_id": 35615249, "comment_id": 58914959, "body": "<code>inline std::istream &amp;operator&gt;&gt;(std::istream &amp;is, std::uint8_t&amp; c)  {      int iValue = 0;      is &gt;&gt; iValue;      c = iValue;      return is; }</code>"}], "tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 2, "last_activity_date": 1456359994, "last_edit_date": 1456359994, "creation_date": 1456356127, "answer_id": 35615249, "question_id": 35614935, "link": "https://stackoverflow.com/questions/35614935/unsigned-char-not-inputting-all-3-digits/35615249#35615249", "title": "unsigned char not inputting all 3 digits", "body": "<p>The operator overloads for >> interpret the stream according to the type of the operand.  If the type is a <code>char</code> it will read a character code not an integer, so when presented with \"255\", the '2' will be read and the value will be 0x32.</p>\n\n<p>It would probably be more appropriate to use <code>std::uint8_t</code> rather then <code>char</code> to store the RGB values, in which case another possibility is to explicitly overload the >> operator for <code>std::uint8_t</code>:</p>\n\n<pre><code>inline std::istream &amp;operator &gt;&gt; (std::istream &amp;is, std::uint8_t&amp; c) \n{ \n    int iValue = 0; \n    is &gt;&gt; iValue; \n    c = iValue; \n    return is; \n}\n</code></pre>\n\n<p>But having done that, you are kind of forced to support <code>std::int8_t</code> and &lt;&lt; as well; unless you are performing a lot of such operations, extracting to a numerical integer type and assigning as suggested by Mykola makes more sense.</p>\n"}], "owner": {"reputation": 201, "user_id": 4789766, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6c14ce613f08673104be813351200fc7?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew S.", "link": "https://stackoverflow.com/users/4789766/matthew-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 35615062, "answer_count": 2, "score": 2, "last_activity_date": 1456359994, "creation_date": 1456354624, "last_edit_date": 1456354915, "question_id": 35614935, "link": "https://stackoverflow.com/questions/35614935/unsigned-char-not-inputting-all-3-digits", "title": "unsigned char not inputting all 3 digits", "body": "<p>I am trying to store the RGB values of a color into a struct named RGBTriple which is made up of three unsigned char Red, Green, Blue. I am reading in those values from a file and then parsing the string and assigning the correct value with the correct variable. Whenever I am reading in the unsigned char values the program is only reading in the first number even if the value is 255. After the width, height, and color are read in. I am creating a picture object. I do not have any trouble reading in the width or height.</p>\n\n<p>Here is my RGBTriple</p>\n\n<pre><code>struct RGBTriple\n{\n    unsigned char Blue;\n    unsigned char Green;\n    unsigned char Red;\n\n    RGBTriple();\n    RGBTriple(unsigned char Blue, unsigned char Green, unsigned char Red);\n};\n</code></pre>\n\n<p>and here is my main:</p>\n\n<pre><code>int pictureWidth, pictureHeight;\nRGBTriple pictureColor;\nstring line;\n\n    getline(input, line);\n    istringstream iss(line);\n\n    iss &gt;&gt; pictureWidth;\n    iss &gt;&gt; pictureHeight;\n    iss &gt;&gt; pictureColor.Red;\n    iss &gt;&gt; pictureColor.Green;\n    iss &gt;&gt; pictureColor.Blue;\n\n\n    Picture newPicture(pictureWidth, pictureHeight, pictureColor);\n</code></pre>\n\n<p>Here is an example of my input: the first line is what is read in for the Picture Object.</p>\n\n<pre><code>200 200 255 255 255\nPoint 66 66 000 000 000\nLine 100 150 50 50 255 000 000\nRectangle 50 25 55 33 000 000 000\nRTriangle 10 80 50 30 000 000 000\nStar 29 29 15 000 000 000\nDiamond 120 120 20 000 000 000\nPolygon 150 0 175 0 175 50 150 25 X X 000 000 000\nCircle 40 89 26 000 000 000\n</code></pre>\n"}, {"tags": ["c#", "c++", "templates", "c++-cli"], "answers": [{"comments": [{"owner": {"reputation": 580, "user_id": 1777995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fcd39683c1c5faa6458efd81104b401d?s=128&d=identicon&r=PG", "display_name": "Marco Giordano", "link": "https://stackoverflow.com/users/1777995/marco-giordano"}, "edited": false, "score": 0, "creation_date": 1456356461, "post_id": 35615058, "comment_id": 58914141, "body": "Hi yes, that is similar to solution I have now, I did not inherit from it but just had an instance internally specialized with the type. I don&#39;t have many types to do, around 6 but still quite a bit of boiler plate code. I actually did not think about the macro, I am not a super fan of macro just because are a bit hard to read, but most likely better then copy pasted code and just changed type. Thanks! I will try the interface method from @Chiune, if I wont be able to make it work I will go with the define. Meanwhile, thumb up!"}, {"owner": {"reputation": 994, "user_id": 998012, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/grI2D.jpg?s=128&g=1", "display_name": "Chiune Sugihara", "link": "https://stackoverflow.com/users/998012/chiune-sugihara"}, "edited": false, "score": 0, "creation_date": 1456358541, "post_id": 35615058, "comment_id": 58914872, "body": "Not sure what you preferences are, but in .NET land where there is no macro magic to rely on T4 templates are used instead for this type of task, see <a href=\"https://msdn.microsoft.com/en-us/library/dd820614.aspx\" rel=\"nofollow noreferrer\">Walkthrough: Generating Code by Using Text Templates</a>. Since you are working on C++/CLI you could go either direction, to me though the T4 is cleaner and easier to read than the macros."}], "tags": [], "owner": {"reputation": 25655, "user_id": 480937, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/448470e105833cd4179b24314714360e?s=128&d=identicon&r=PG", "display_name": "David Yaw", "link": "https://stackoverflow.com/users/480937/david-yaw"}, "is_accepted": false, "score": 2, "last_activity_date": 1456355161, "creation_date": 1456355161, "answer_id": 35615058, "question_id": 35614760, "link": "https://stackoverflow.com/questions/35614760/expose-c-cli-templated-wrapper-to-c/35615058#35615058", "title": "expose c++/CLI templated wrapper to c#", "body": "<p>If you implement a full-fledged subclass of your template class, that should do the trick. You will need to implement all the constructors, but just as a pass-through to the base class's constructors; no actual code.</p>\n\n<pre><code>public ref class TestTempFloat : TestTemp&lt;float&gt;\n{\n    TestTempFloat(float val) : TestTemp(val) { };\n};\n</code></pre>\n\n<p>If you have a lot of these, you could make use of the preprocessor:</p>\n\n<pre><code>#define IMPLEMENT_TESTTEMP(namesuffix, type) \\\npublic ref class TestTemp ## namesuffix : TestTemp&lt;type&gt; \\\n{ \\\n    TestTemp ## namesuffix(type val) : TestTemp(val) { }; \\\n};\n\nIMPLEMENT_TESTTEMP(Float, float)\nIMPLEMENT_TESTTEMP(Double, double)\nIMPLEMENT_TESTTEMP(Int, int)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 580, "user_id": 1777995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fcd39683c1c5faa6458efd81104b401d?s=128&d=identicon&r=PG", "display_name": "Marco Giordano", "link": "https://stackoverflow.com/users/1777995/marco-giordano"}, "edited": false, "score": 0, "creation_date": 1456356530, "post_id": 35615217, "comment_id": 58914163, "body": "Hi thanks!, I was not aware of the interface thingy, I am new to c# and completely new to CLI. It looks an interesting approach and I like it a bit better than the macro. I am gonna give it a go tomorrow and let you know how it goes. thank you."}, {"owner": {"reputation": 994, "user_id": 998012, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/grI2D.jpg?s=128&g=1", "display_name": "Chiune Sugihara", "link": "https://stackoverflow.com/users/998012/chiune-sugihara"}, "reply_to_user": {"reputation": 580, "user_id": 1777995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fcd39683c1c5faa6458efd81104b401d?s=128&d=identicon&r=PG", "display_name": "Marco Giordano", "link": "https://stackoverflow.com/users/1777995/marco-giordano"}, "edited": false, "score": 0, "creation_date": 1456358614, "post_id": 35615217, "comment_id": 58914891, "body": "If you are new to C++/CLI I would really recommend picking up &quot;C++/CLI in Action&quot; by Nishant Sivakumar. That is where I learned the trick that I posted and it is the most useful C++/CLI resource that I have come by so far."}, {"owner": {"reputation": 580, "user_id": 1777995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fcd39683c1c5faa6458efd81104b401d?s=128&d=identicon&r=PG", "display_name": "Marco Giordano", "link": "https://stackoverflow.com/users/1777995/marco-giordano"}, "edited": false, "score": 0, "creation_date": 1456443757, "post_id": 35615217, "comment_id": 58962774, "body": "I am trying to understand and implement this approach, roughly everything makes sense, The only thing that I am missing is, where the factory comes into play? I will need to call the factory directly from c# right? I won&#39;t be able to instantiate the generic type directly. Correct?"}], "tags": [], "owner": {"reputation": 994, "user_id": 998012, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/grI2D.jpg?s=128&g=1", "display_name": "Chiune Sugihara", "link": "https://stackoverflow.com/users/998012/chiune-sugihara"}, "is_accepted": true, "score": 1, "last_activity_date": 1456355941, "creation_date": 1456355941, "answer_id": 35615217, "question_id": 35614760, "link": "https://stackoverflow.com/questions/35614760/expose-c-cli-templated-wrapper-to-c/35615217#35615217", "title": "expose c++/CLI templated wrapper to c#", "body": "<p>As you have seen, managed templates aren't accessible outside of the assembly where they are located. Basically the idea is to expose the managed template as a generic  interface which can be sent across assembly boundaries.</p>\n\n<p>So in your case you would want to create a <code>ITestTemp</code>, something like this...</p>\n\n<pre><code>generic&lt;typename T&gt; public interface class ITestTemp\n{\n  public:\n    TestTemp(T val);\n}\n</code></pre>\n\n<p>That is the interface that you will export across assemblies. Now you will have to convert your managed template into that generic interface to do so you can use inheritance, something with the following signature (internals omitted for simplicity)</p>\n\n<p><code>templace&lt;typename T&gt; ref class TestTemp : ITestTemp&lt;T&gt;</code></p>\n\n<p>Once you have that now you will have to do the \"compiler's work\" (what is normally just automagically handled for a regular C++ template) for it to convert between the two so to speak. So you will have to create a factory method that will create the specific instances that you are looking for. It would look like this</p>\n\n<pre><code>public ref class TestTempFactory\n{\n  public:\n    generic&lt;typename T&gt; static ITestTemp&lt;T&gt;^ Create()\n    {\n      if (T::typeid == String::typeid)\n      { return (ITestTemp&lt;T&gt;^) gcnew TestTemp&lt;String&gt;(); }\n      //more cases as needed...\n    }\n}\n</code></pre>\n\n<p>I hope that explains it well enough, if not let me know.</p>\n"}], "owner": {"reputation": 580, "user_id": 1777995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fcd39683c1c5faa6458efd81104b401d?s=128&d=identicon&r=PG", "display_name": "Marco Giordano", "link": "https://stackoverflow.com/users/1777995/marco-giordano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 1, "accepted_answer_id": 35615217, "answer_count": 2, "score": 1, "last_activity_date": 1456355941, "creation_date": 1456353996, "last_edit_date": 1456354467, "question_id": 35614760, "link": "https://stackoverflow.com/questions/35614760/expose-c-cli-templated-wrapper-to-c", "title": "expose c++/CLI templated wrapper to c#", "body": "<p>I am currently working on a visual editor to build Finite State Machines. The core is c++ since the built FSM will run in a game. The editor is c#. I was able to get a CLI wrapper going so I can build everything I need in the c# side.\nThe last thing I am trying to do, is to be able to expose a templated class to c#.</p>\n\n<p>I started by creating a managed class:</p>\n\n<pre><code>template &lt;typename T&gt;\npublic ref class TestTemp\n{\nprivate:\n    ClassToWrap&lt;T&gt;* m_val;\npublic:\n\n    TestTemp(T val) : \n    {\n        m_val = new ClassToWrap&lt;T&gt;();\n    }\n}\n</code></pre>\n\n<p>Then since templates are generated at compile time, I am forcing the generation of the type with template specialization.</p>\n\n<pre><code>template ref class FSMWrapper::TestTemp&lt;float&gt;;\n</code></pre>\n\n<p>I tried to to the specialization in several places, cpp, header, also in main just in case, I even tried specific instantiation in main like this:</p>\n\n<pre><code>FSMWrapper::TestTemp&lt;float&gt; t(10.0f);\n</code></pre>\n\n<p>I even tried to explicitely tell to export the symbol like I would do in regular c++ but compiler complains that I cannot do that with a managed type.</p>\n\n<p>After all this I did not managed to get the symbol appear in the c# namespace, (everything else appears, so yeah, the wrapper works as expected).</p>\n\n<p>Also If I remove the template in the wrapper and just call it TestTempFloat and force internally an instantiation of float it works.</p>\n\n<pre><code>public ref class TestTempFloat\n{\nprivate:\n    ClassToWrap&lt;float&gt; m_val;\npublic:\n\n    TestTempFloat(float val) : \n    {\n        m_val = new ClassToWrap&lt;float&gt;();\n    }\n};\n</code></pre>\n\n<p>What I am trying to do, is it even possible? By googling around looks like it is, but people just say, wrap it in a CLI type and force the symbol generation.\nIf is possible what am I doing wrong? </p>\n\n<p>If is not possible I will just have to do the specialized wraps manually, not pretty but I know it works.</p>\n\n<p>I also tried to wrap it in a generic instead of a template, but then I cannot feed the T generic type as a template type.</p>\n\n<p>PS: I know there is not a destructor to free the memory, this is just a dummy test to keep example short.</p>\n"}, {"tags": ["c++", "multithreading", "visual-studio"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1456353961, "post_id": 35614713, "comment_id": 58913192, "body": "Well, yes. There are three threads (<code>main</code>, <code>t1</code>, <code>t2</code>). None of them do anything particularly interesting, but it&#39;s definitely mutli-threaded..."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 4872746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8bf5fb3186891805c10fdfe504b937?s=128&d=identicon&r=PG&f=1", "display_name": "CyberDude", "link": "https://stackoverflow.com/users/4872746/cyberdude"}, "edited": false, "score": 0, "creation_date": 1456354541, "post_id": 35614838, "comment_id": 58913433, "body": "(Yes I have 8 cores) So what you are saying is that both threads are running at the same time, but the program is held up until both threads are done?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 25, "user_id": 4872746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8bf5fb3186891805c10fdfe504b937?s=128&d=identicon&r=PG&f=1", "display_name": "CyberDude", "link": "https://stackoverflow.com/users/4872746/cyberdude"}, "edited": false, "score": 1, "creation_date": 1456354651, "post_id": 35614838, "comment_id": 58913468, "body": "@CyberDude Yes, that&#39;s what <code>std::thread:join</code> does. In this case it doesn&#39;t matter, they finish together. In your second example, it&#39;s rather clear that the two threads won&#39;t be running at the same time."}, {"owner": {"reputation": 25, "user_id": 4872746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8bf5fb3186891805c10fdfe504b937?s=128&d=identicon&r=PG&f=1", "display_name": "CyberDude", "link": "https://stackoverflow.com/users/4872746/cyberdude"}, "edited": false, "score": 0, "creation_date": 1456355296, "post_id": 35614838, "comment_id": 58913726, "body": "Thanks. Also I know its sloppy and I am just experimenting with it, but if I were to write a real program like this (with multiple threads at a time) would it work?"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 25, "user_id": 4872746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8bf5fb3186891805c10fdfe504b937?s=128&d=identicon&r=PG&f=1", "display_name": "CyberDude", "link": "https://stackoverflow.com/users/4872746/cyberdude"}, "edited": false, "score": 0, "creation_date": 1456397899, "post_id": 35614838, "comment_id": 58932322, "body": "What can I tell you... if you do everything right, it&#39;ll work."}], "tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": true, "score": 3, "last_activity_date": 1457875028, "last_edit_date": 1457875028, "creation_date": 1456354215, "answer_id": 35614838, "question_id": 35614713, "link": "https://stackoverflow.com/questions/35614713/is-this-simple-c-program-multithreaded/35614838#35614838", "title": "Is this simple c++ program multithreaded?", "body": "<p><code>thread t1(math1); thread t2(math2); t1.join(); t2.join();</code> waits for <code>t1</code> to finish while also running <code>t2</code>. The <code>math1</code> and <code>math2</code> functions do the same thing, so they'll finish approx. at once, which is optimal (it could be just one function as well).</p>\n\n<p>To the numbers you're seeing, you clearly have a CPU with 8 logical cores. The multithreaded version uses two hardware threads (2 / 8) = 25%, while single-threaded just one (1 / 8) = 12,5%. It also runs two times slower, simple.</p>\n"}], "owner": {"reputation": 25, "user_id": 4872746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8bf5fb3186891805c10fdfe504b937?s=128&d=identicon&r=PG&f=1", "display_name": "CyberDude", "link": "https://stackoverflow.com/users/4872746/cyberdude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 35614838, "answer_count": 1, "score": 1, "last_activity_date": 1457875028, "creation_date": 1456353800, "last_edit_date": 1456354712, "question_id": 35614713, "link": "https://stackoverflow.com/questions/35614713/is-this-simple-c-program-multithreaded", "title": "Is this simple c++ program multithreaded?", "body": "<p>I am sort of new to C++, but I was wondering if this basic (and possibly sloppy) program is actually running multiple threads at a time or if it its just pooling:</p>\n\n<p>This is a console application running in visual c++ 2015:</p>\n\n<pre><code>#include &lt;string&gt;\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;thread&gt;\nusing namespace std;\n#include &lt;stdio.h&gt;\nint temp1 = 0;\nint num1 = 0;\nint temp2 = 0;\nint num2 = 0;\nvoid math1() {\n    int running_total = 23;\n    for (int i = 0; i &lt; 999999999; i++)\n    {\n        running_total = 58 * running_total + i;\n    }\n}\nint math2() {\n\n    int running_total = 23;\n    for (int i = 0; i &lt; 999999999; i++)\n    {\n        running_total = 58 * running_total + i;\n    }\n    return 0;\n}\nint main()\n{\n    unsigned concurentThreadsSupported = std::thread::hardware_concurrency();\n    cout &lt;&lt; \"Current Number of CPU threads: \" &lt;&lt; concurentThreadsSupported &lt;&lt; endl;\n    thread t1(math1);\n    thread t2(math2);\n    t1.join();\n    t2.join();\n    cout &lt;&lt; \"1: \" &lt;&lt; num1 &lt;&lt; endl;\n    cout &lt;&lt; \"2: \" &lt;&lt; num2 &lt;&lt; endl;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>I notice when I run the code with <code>thread t1(math1);thread t2(math2);t1.join();t2.join();</code>, it uses 25% total of my cpu for 3.5 seconds, but when I use</p>\n\n<pre><code>thread t1(math1);\nt1.join();\nthread t2(math2);\nt2.join();\n</code></pre>\n\n<p>it uses ~13% of the CPU for almost 7 seconds. </p>\n\n<p>Is this actually multithreading?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1456353764, "post_id": 35614676, "comment_id": 58913110, "body": "If you&#39;re just substituting delimiters, why not <code>sed</code> or even <code>tr</code>?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1456354086, "post_id": 35614676, "comment_id": 58913248, "body": "Please provide a <a href=\"http://www.stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. Perhaps one of your lines has something non-integral in it somewhere?"}, {"owner": {"reputation": 71, "user_id": 4926599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691ec2380009ca87feef9e63ad8d9a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Gaze", "link": "https://stackoverflow.com/users/4926599/gaze"}, "edited": false, "score": 0, "creation_date": 1456354105, "post_id": 35614676, "comment_id": 58913258, "body": "I&#39;m adding the line number as well at the beginning of each line and the delimiters vary at certain points, so it was easier for me to just write a small program. Also, I&#39;m not very familiar with all these unix tools, so I might overlook some simple solution."}, {"owner": {"reputation": 729, "user_id": 5942006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1fe054f41dc543395631acc84ac04f60?s=128&d=identicon&r=PG&f=1", "display_name": "systemcpro", "link": "https://stackoverflow.com/users/5942006/systemcpro"}, "edited": false, "score": 0, "creation_date": 1456354263, "post_id": 35614676, "comment_id": 58913328, "body": "was thinking sed too"}, {"owner": {"reputation": 71, "user_id": 4926599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691ec2380009ca87feef9e63ad8d9a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Gaze", "link": "https://stackoverflow.com/users/4926599/gaze"}, "edited": false, "score": 0, "creation_date": 1456354332, "post_id": 35614676, "comment_id": 58913352, "body": "Barry, calling the above code on e.g. the uk-2002 graph from <a href=\"http://www.cc.gatech.edu/dimacs10/archive/clustering.shtml\" rel=\"nofollow noreferrer\">here</a> will cause <code>mMet</code> to be 523113442 instead of 2*261787258 = 523574516 as it should be. The graph files this happens on are all &gt;100MB, however.  If you need code for all, add a main function      int main(int argc, char* argv[]) {         exampleFunc(argv[0]);     } and add a      cout &lt;&lt; mMet; at the end of exampleFunc"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1456354504, "post_id": 35614676, "comment_id": 58913417, "body": "@Gaze Linking to a 100MB file does not a <b>minimal</b> or <b>complete</b> example make."}, {"owner": {"reputation": 71, "user_id": 4926599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691ec2380009ca87feef9e63ad8d9a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Gaze", "link": "https://stackoverflow.com/users/4926599/gaze"}, "edited": false, "score": 1, "creation_date": 1456354861, "post_id": 35614676, "comment_id": 58913548, "body": "The in-2004 graph has the same problem and is only around 11MB. If I knew how to make a minimal graph example that produced this behavior, I&#39;d probably have solved the problem already. (which is also why I did not link it in the first post)"}, {"owner": {"reputation": 231, "user_id": 1039486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74d5f7e33c577ee2f567b46f7ece7dc4?s=128&d=identicon&r=PG", "display_name": "Shooter", "link": "https://stackoverflow.com/users/1039486/shooter"}, "edited": false, "score": 1, "creation_date": 1456356555, "post_id": 35614676, "comment_id": 58914171, "body": "targetMetis seems to be uninitialized, and is used too for byte shift!"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1456359054, "post_id": 35614676, "comment_id": 58915038, "body": "@Gaze Cannot duplicate:  I took the time to download that 100 meg file, and created the following program:  <a href=\"http://ideone.com/U8TLnZ\" rel=\"nofollow noreferrer\">ideone.com/U8TLnZ</a>  The program runs successfully (completes in less than a minute using Visual Studio 2015, release).  An output file is created from reading all the lines from the input file.  Using a diff tool, the original input file and output file are exactly the same, with the only difference being an extra carriage return at the end.  So I don&#39;t see an issue with not reading an entire line, as you claim.  All lines are read correctly."}, {"owner": {"reputation": 71, "user_id": 4926599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691ec2380009ca87feef9e63ad8d9a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Gaze", "link": "https://stackoverflow.com/users/4926599/gaze"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1456362910, "post_id": 35614676, "comment_id": 58916209, "body": "@PaulMcKenzie and whats the value of mMet at the end? 523574516?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1456377891, "post_id": 35614676, "comment_id": 58920754, "body": "The value of mMet is 21,826,136. Where is the proof that mMet should be 523574516?  &quot;<i>Using the following, I do not receive the full lines from the graph</i>&quot; -- This is demonstrably false, given the code I linked to.  If the full lines were not received, why would the input file and output file be exactly the same?  Run the code yourself -- you have the file, and hopefully you have a file difference tool."}, {"owner": {"reputation": 71, "user_id": 4926599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691ec2380009ca87feef9e63ad8d9a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Gaze", "link": "https://stackoverflow.com/users/4926599/gaze"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1456920346, "post_id": 35614676, "comment_id": 59166698, "body": "@PaulMcKenzie sorry for the delay and thanks for your efforts. The graph files store the number of vertices n and the number of edges m in the first line. After that, the i+1th line represents the vertex i and each entry represents an edge to the vertex with the id of the entry. (<a href=\"http://people.sc.fsu.edu/~jburkardt/data/metis_graph/metis_graph.html\" rel=\"nofollow noreferrer\">for a small example check out e.g. the tiny_01.graph here</a> ) The graphs are undirected, meaning if we count each edge entry, we get each edge twice so our m should be 2* the second number in the first line."}, {"owner": {"reputation": 71, "user_id": 4926599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691ec2380009ca87feef9e63ad8d9a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Gaze", "link": "https://stackoverflow.com/users/4926599/gaze"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1456920407, "post_id": 35614676, "comment_id": 59166738, "body": "@PaulMcKenzie Also, I don&#39;t want to print out the whole string but rather do something for each edge (which gives me the loss of some edges with the usage of stringstream. The same construct (     stringstream ss(curLineMetis)  is used in a different tool written by someone else, that does not have my problem). If you want to check some things again and deleted the 100mb graph as I suspect, see my comment above for a 10mb graph that produces the same error for me."}], "answers": [{"tags": [], "owner": {"reputation": 2488, "user_id": 453436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b8e7be51a9257fb1f08a7f01c9c29e3?s=128&d=identicon&r=PG", "display_name": "Bowie Owens", "link": "https://stackoverflow.com/users/453436/bowie-owens"}, "is_accepted": false, "score": 0, "last_activity_date": 1458176842, "creation_date": 1458176842, "answer_id": 36049898, "question_id": 35614676, "link": "https://stackoverflow.com/questions/35614676/string-overflow-in-c/36049898#36049898", "title": "String overflow in C++", "body": "<p>I am not quite sure what is going wrong for you with your code. The standard library functions and types should be able to handle long lines. However, to reduce memory usage and to work around your problem you might want to process a part of a line at a time. Since the file format seemed interesting I wrote this program to read the graph into a <code>vector&lt;vector&lt;int&gt;&gt;</code>. It reproduces the graph file from that representation and produces a file identical to the input. Perhaps something in here will be of use to you. Good luck.</p>\n\n<pre><code>#include &lt;cassert&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n\nint\nmain(int argc, char* argv[])\n{\n    size_t const buf_size = 40; // big enough for a 64bit integer and then some\n    char buf[buf_size]; \n\n    assert(argc &gt;= 2);\n\n    std::ifstream is (argv[1]);\n    assert(is);\n    std::vector&lt;std::vector&lt;int&gt;&gt; graph;\n    std::vector&lt;int&gt; line;\n\n    std::string header;\n    std::getline(is, header);\n    { std::istringstream is_header (header);\n    size_t n;\n    is_header &gt;&gt; n;\n    graph.reserve(n);\n    }\n\n    char delim;\n    for (;;) {\n        is.get(buf, buf_size, ' ');\n        if (!is) break;\n        is.get(delim);\n        line.push_back(std::atoi(buf));\n        while (is.peek() == '\\n') {\n            graph.emplace_back(std::move(line));\n            (void) is.get();\n        }\n    }\n\n    std::cout &lt;&lt; graph.size() &lt;&lt; '\\n';\n    size_t max_row = graph[0].size();\n    size_t row_sum = graph[0].size();\n\n    for (size_t i = 1, I = graph.size(); i &lt; I; ++i) {\n        max_row = std::max(max_row, graph[i].size());\n        row_sum += graph[i].size();\n    }\n    std::cout &lt;&lt; max_row &lt;&lt; '\\n';\n    std::cout &lt;&lt; row_sum &lt;&lt; '\\n';\n\n    std::ofstream os (\"dup.graph\");\n    os &lt;&lt; header &lt;&lt; '\\n';\n    for (size_t i = 0, I = graph.size(); i &lt; I; ++i) {\n        for (size_t j = 0, J = graph[i].size(); j &lt; J; ++j)\n            os &lt;&lt; graph[i][j] &lt;&lt; ' ';\n        os &lt;&lt; '\\n';\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4926599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/691ec2380009ca87feef9e63ad8d9a1c?s=128&d=identicon&r=PG&f=1", "display_name": "Gaze", "link": "https://stackoverflow.com/users/4926599/gaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 668, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1458176842, "creation_date": 1456353626, "last_edit_date": 1456353897, "question_id": 35614676, "link": "https://stackoverflow.com/questions/35614676/string-overflow-in-c", "title": "String overflow in C++", "body": "<p>I'm converting large graph files using a simple C++ program. Basically I mainly want to switch the delimiters used in the file. These graph files contain extremely long lines. My converting works fine for small files, but I lose edges in the output file for the large files. So I checked what the part of my code that reads actually returns and it seems the error is already in there. Using the following, I do not receive the full lines from the graph in <code>curLineMetis</code> or <code>ssMetis</code> (My guess is that there's an overflow somewhere and I lose the last part of the line thats too big for the allocated memory)</p>\n\n<pre><code>using namespace std;\nvoid exampleFunc(const char* inputfileMetis) {\n    ifstream metisFile;\n    metisFile.open(inputfileMetis, ios::in);\n    if(!metisFile.is_open()) {\n        cout &lt;&lt; \"Could not open input file\";\n        return;\n    }\n    long nMet = 0;\n    long mMet = 0;\n    string curLineMetis;\n    // skip first line\n    getline(metisFile, curLineMetis);\n    while(getline(metisFile, curLineMetis)) {\n        nMet++;\n        long targetMetis;\n        stringstream ssMetis(curLineMetis);\n        while(ssMetis &gt;&gt; targetMetis) {\n            mMet++;\n        }\n   }\n}\n</code></pre>\n\n<p>I checked on google and it said std::string managed its own memory and would not overflow? I also tried it without the stringstream, just using an iterator over chars from the string before and the same happened. I'm using c++11 if that makes a difference. (the error expresses itself e.g. in <code>mMet</code> being different from the number of edges stated in the graph file itself, while the number of vertices <code>nMet</code> is the same, and the number of edges is also correct for smaller graphs)</p>\n"}, {"tags": ["c++", "winapi", "unicode"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1456352682, "post_id": 35614386, "comment_id": 58912582, "body": "Perform the conversion yourself, by finding and combining surrogate pairs. Or use a library like iconv."}, {"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 3, "creation_date": 1456352797, "post_id": 35614386, "comment_id": 58912638, "body": "Even with UTF-32, you might still have to deal with combining marks in some way or another."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1456353066, "post_id": 35614386, "comment_id": 58912788, "body": "All Windows compilers use 16-bit <code>wchar_t</code> , right? (even gcc ports)"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1456353071, "post_id": 35614386, "comment_id": 58912791, "body": "Oh dear, really?  That seems crazy..."}, {"owner": {"reputation": 26818, "user_id": 209199, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0b64963e747bf4c8fc20fb379105f204?s=128&d=identicon&r=PG", "display_name": "Cory Nelson", "link": "https://stackoverflow.com/users/209199/cory-nelson"}, "reply_to_user": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1456353128, "post_id": 35614386, "comment_id": 58912817, "body": "To add to what @melak47 said. There are two ways to do Unicode correctly. a) treat it as an opaque sequence of bytes, b) handle grapheme clusters. Case (a) handles 99% of apps, because they do little more than string concat. There is never a case where UTF-32 or UTF-16 better represents your data than UTF-8, and vice-versa."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1456353383, "post_id": 35614386, "comment_id": 58912925, "body": "Let&#39;s say I want to find all of the &quot;tokens&quot; in the string representing date format elements such as &quot;yyyy&quot; or &quot;mmm&quot; or &quot;d&quot;, for example.  Characters around these can be part sequences, so I can&#39;t do a straight up find(L&quot;d&quot;) in the string can I, as the &quot;d&quot; may be 0x64 of a multi-element sequence."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1456353620, "post_id": 35614386, "comment_id": 58913042, "body": "I&#39;ve always been unclear how well Windows supports UTF-16 compared with UCS-2."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1456353632, "post_id": 35614386, "comment_id": 58913050, "body": "Unicode is based on the choices made by  typographers.  Who are very sensible people, you have to be when you move around blocks of lead for a living.  Dates strings appeared in printed text frequently, their glyphs take only a single chunk of lead each.  The odds you&#39;ll ever have to deal with a glyph that could not be represented in a legacy code page or Unicode version 1 or requires a combining character are zero."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1456353842, "post_id": 35614386, "comment_id": 58913144, "body": "Ah, thank you Hans.  That was precisely the reassurance I was looking for.  So to conclude, I will almost certainly be Ok with just the UTF-16 string?"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 1, "creation_date": 1456356609, "post_id": 35614386, "comment_id": 58914191, "body": "I believe locales can be customized, so you might get absolutely anything.  But by the same token, that makes it impossible for parsing them to be sensible, even if we don&#39;t worry about Unicode.  What are you actually trying to achieve here?"}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1456380506, "post_id": 35614386, "comment_id": 58921863, "body": "I want to parse out the format string in order to generate individual UI components for the elements, to make a date/time picker (also rendering any adjoining text in the format)."}], "answers": [{"comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1456353102, "post_id": 35614513, "comment_id": 58912807, "body": "Thanks Nicol.  This is quite disappointing.  So string rendering functions in, say, GDI+ all take this into account too?"}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 3, "creation_date": 1456357059, "post_id": 35614513, "comment_id": 58914374, "body": "GDI+ maybe (I don&#39;t know for sure but I would assume so); DirectWrite yes. This is something usually collectively referred to as &quot;Unicode shaping&quot;; on Windows the low-level Uniscribe library does this directly (but beware that it&#39;s incredibly complicated to use)."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 3, "last_activity_date": 1456352927, "creation_date": 1456352927, "answer_id": 35614513, "question_id": 35614386, "link": "https://stackoverflow.com/questions/35614386/convert-utf-16-wchar-t-on-windows-to-utf32/35614513#35614513", "title": "Convert UTF-16 (wchar_t on Windows) to UTF32", "body": "<blockquote>\n  <p>where I'll be guaranteed (I assume), one array element represents one character?</p>\n</blockquote>\n\n<p>That's not how Unicode works. One codepoint (an array element in UTF-32) does not <em>necessarily</em> map to a single visible character. Multiple codepoints can combine to form a character thanks to features like Unicode combining characters.</p>\n\n<p>You have to do genuine Unicode analysis if you want to be able to know how many visible characters a Unicode string has.</p>\n\n<p>Even with dates (particularly long-form dates as you asked for), you are not safe from such features. The locale can return arbitrary Unicode strings, so you have no way to know from just the number of codepoints how long a Unicode string is.</p>\n"}, {"comments": [{"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 0, "creation_date": 1456572058, "post_id": 35664839, "comment_id": 59017398, "body": "Interesting.  Thanks Harry."}], "tags": [], "owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "is_accepted": false, "score": 1, "last_activity_date": 1456538639, "creation_date": 1456538639, "answer_id": 35664839, "question_id": 35614386, "link": "https://stackoverflow.com/questions/35614386/convert-utf-16-wchar-t-on-windows-to-utf32/35664839#35664839", "title": "Convert UTF-16 (wchar_t on Windows) to UTF32", "body": "<p>Looking at the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd373854(v=vs.85).aspx\" rel=\"nofollow\">documentation for LOCALE_SLONGDATE</a> it is stated that any characters other than the format pictures must be enclosed in single quotes.  So <em>in this particular case</em> converting to UTF-32 should indeed solve your problem (but see proviso below).</p>\n\n<p>By the same token, though, you don't need to.  The only UTF-16 characters that don't represent a single UTF-32 character are the surrogate characters, none of which can be mistaken for a single quote.  So to separate out the format pictures from the surrounding text, you just need to scan the UTF-16 string for single quotes.  (The same is even true of UTF-8; the only byte that looks like a single quote <em>is</em> a single quote.)</p>\n\n<p>Any surrogate pairs, combining characters, or other complications should always be safely tucked away inside the substrings thus delimited.  Provided you never attempt to subdivide the substrings themselves, you should be safe.</p>\n\n<hr>\n\n<p>Proviso: the documentation does not indicate whether it is permissible to combine a single quote mark with a combining character in a locale, and if so, how it will be interpreted.  I interpret that as meaning that such a combination is <em>not</em> allowed.  In any case, it seems unlikely that Windows itself would go to the trouble of dealing with such an unnecessary complication.  So it should be safe enough to ignore this case too, but YMMV.</p>\n"}], "owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1456538639, "creation_date": 1456352480, "question_id": 35614386, "link": "https://stackoverflow.com/questions/35614386/convert-utf-16-wchar-t-on-windows-to-utf32", "title": "Convert UTF-16 (wchar_t on Windows) to UTF32", "body": "<p>I have a string of characters given to me by a Windows API function (GetLocaleInfoEx with LOCALE_SLONGDATE) as wchar_t.  Is it correct to say that the value returned from Windows will be UTF-16, and that therefore it may not be one wchar_t, one \"printable character\"?</p>\n\n<p>To make writing my parser easier, is there a function I can use to convert from UTF-16 to UTF-32, where I'll be guaranteed (I assume), one array element represents one character?</p>\n"}, {"tags": ["c++", "macos", "shell", "terminal", "eof"], "comments": [{"owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1456353044, "post_id": 35614364, "comment_id": 58912768, "body": "If you don&#39;t press return first, you have to hit Ctrl+D twice."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1456356302, "post_id": 35614364, "comment_id": 58914103, "body": "@thatotherguy I noticed that too - is that standard behaviour? Do you know what causes it?"}, {"owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1456362799, "post_id": 35614364, "comment_id": 58916185, "body": "Yes, this is expected. Ctrl-D just makes any pending read call to the terminal return with any currently buffered data, similar to Return (except then you also get a <code>\\n</code>). If you press Ctrl-D after Return or Ctrl-D, the read call will return with 0 bytes, which by convention means end-of-input."}], "answers": [{"tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1456352892, "creation_date": 1456352892, "answer_id": 35614500, "question_id": 35614364, "link": "https://stackoverflow.com/questions/35614364/ctrld-suddenly-stopped-working-in-mac-os-x-terminal-will-not-perform-eol-opera/35614500#35614500", "title": "CTRL+D suddenly stopped working in Mac OS X Terminal, will not perform EOL operation", "body": "<p>You should not loop testing only <code>eof</code>.  There are other ways for the stream to error.  Just loop like this:</p>\n\n<pre><code>while( cin.get(ch) )\n{\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5972039, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9123f7f5bea8b40c574b1674104c47fb?s=128&d=identicon&r=PG&f=1", "display_name": "Sharyar Khan", "link": "https://stackoverflow.com/users/5972039/sharyar-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1000, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456364325, "creation_date": 1456352402, "last_edit_date": 1456364325, "question_id": 35614364, "link": "https://stackoverflow.com/questions/35614364/ctrld-suddenly-stopped-working-in-mac-os-x-terminal-will-not-perform-eol-opera", "title": "CTRL+D suddenly stopped working in Mac OS X Terminal, will not perform EOL operation", "body": "<p>I have basic code that I am trying to run in terminal for a class. I am having trouble ending the code with the ctrl+d command once I am done typing. The code looks for the amount of certain characters, \"e\", vowel as well as counts total characters used. For hours yesterday I was able to use the Ctrl+D command to end my program and continue to edit/add to it but it stopped working suddenly.</p>\n\n<p>I have noticed that when a string of \"d\"'s are inputted into the window, the return key is hit, and then ctrl+d is used, the programming successfully displays the data but otherwise any other input does not seem to give the EOF command that I am looking for.</p>\n\n<p>I have tried resetting my terminal, saved the condition in which the \"d\" string worked and tried again. What is going on? After reading extensively on the topic I think it may be due to something else running in the background?</p>\n\n<pre><code>int main() {\n    char ch;\n    int ecount=0, vowels=0, other=0;\n    cin.get(ch);\n    while(!cin.eof()) {\n        switch(ch) {\n            case 'e':\n                ecount++;\n            case 'a';\n            case 'i':\n            case 'o':\n            case 'u': \n                vowels++;\n                break;\n            default:\n                other++; \n        }\n        cin.get(ch);\n    }\n    cout &lt;&lt; ecount &lt;&lt; \" \"&lt;&lt; vowels &lt;&lt; \" \" &lt;&lt; other &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "linked-list", "queue"], "comments": [{"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 1, "creation_date": 1456352509, "post_id": 35614330, "comment_id": 58912496, "body": "Please don&#39;t paste code without actually saying what&#39;s wrong."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1456353392, "post_id": 35614330, "comment_id": 58912929, "body": "Draw nodes on paper. Draw existing connections between nodes. One by one change the connections until the desired node configuration is reached. Implement in code. If it still doesn&#39;t doesn&#39;t work, five bucks says spotting the problem is trivial if you step through the code with a debugger."}], "answers": [{"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 0, "last_activity_date": 1508016649, "creation_date": 1508016649, "answer_id": 46749529, "question_id": 35614330, "link": "https://stackoverflow.com/questions/35614330/circular-linked-list-c/46749529#46749529", "title": "Circular linked list C++", "body": "<p>I converted this to a class. For a circular list class, only a pointer to last node is needed, as first = last->next. Since no dummy node is used, an empty list is normally indicated by last == NULL;</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nclass circq\n{\n    typedef struct node_\n    {\n        struct node_ *next;\n        int info;\n    }node;\n\n    node *last;                         // ptr to last node of list\n\npublic:\n\n    circq()                             // constructor\n    {\n        last = NULL;                    // reset last\n    }\n\n    bool isempty()\n    {\n        return last == NULL;\n    }\n\n    void enqueue(int q)\n    {\n        node *newNode=new node;         // new node\n        newNode-&gt;info = q;\n        if(last == NULL){               // if empty list\n            last = newNode;             //  create single node list\n            newNode-&gt;next = newNode;\n            return;\n        }                               // else\n        newNode-&gt;next = last-&gt;next;     //  append node to end list\n        last-&gt;next = newNode;\n        last = newNode;\n    }\n\n    int dequeue()\n    {\n        if(last == NULL){               // check for empty list\n            return 0;\n        }\n        node *first = last-&gt;next;       // set ptr to first node\n        int x = first-&gt;info;            // set return value\n        if(last-&gt;next == last)          // if single node\n            last = NULL;                //  set list to empty\n        else                            // else\n            last-&gt;next = first-&gt;next;   //  advance first to next node\n        delete first;                   // delete node\n        return x;\n    }\n\n    ~circq()                            // destructor\n    {\n        while(!isempty())\n            dequeue();\n    }\n};\n\nint main()                              // test circq\n{\ncircq cq;\n    cq.enqueue(0);\n    cq.enqueue(1);\n    cq.enqueue(2);\n    cq.enqueue(3);\n    while(!cq.isempty())\n        std::cout &lt;&lt; cq.dequeue() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 2158092, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ae05206479f121113e286d43bfd1e63?s=128&d=identicon&r=PG", "display_name": "haiku_vi", "link": "https://stackoverflow.com/users/2158092/haiku-vi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1589, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1508016649, "creation_date": 1456352275, "question_id": 35614330, "link": "https://stackoverflow.com/questions/35614330/circular-linked-list-c", "title": "Circular linked list C++", "body": "<p>I'm trying to create a queue using a circular linked list. I just took my existing linked list implementation (which already works) and changed where the nodes pointed but it doesn't seem to be that straightforward. I'm sure it's one small thing that I'm overlooking. </p>\n\n<pre><code>void enqueue(int q){\n    newNode=new node;\n    newNode-&gt;info = q;\n    newNode-&gt;link = first;\n\n    if(first-&gt;link==first){\n        first = last = newNode;\n        last-&gt;link=first;\n    }\n\n    else{\n       last-&gt;link = newNode;\n       last= newNode;\n       last-&gt;link = first;\n    }           \n}\n\nint dequeue(){\n    int x;\n    if(first-&gt;link==first){\n        cout &lt;&lt;\"The Queue is empty\" &lt;&lt;endl;\n        return 0;\n    }\n    else{\n        dummy=first;\n        x=dummy-&gt;info;\n        first=first-&gt;link;\n        delete(dummy);\n        return(x);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "scons"], "comments": [{"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1456352211, "post_id": 35614092, "comment_id": 58912357, "body": "I&#39;ve not observed scons to ever copy files found through CPPPATH - though we generally use it with <code>duplicate=False</code> anyway"}, {"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1456352348, "post_id": 35614092, "comment_id": 58912438, "body": "Also, you&#39;re both adding the include path manually to CCFLAGS to get rid of the warnings, <i>and</i> to CPPPATH? Are you sure that works the way you intend?"}, {"owner": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "edited": false, "score": 0, "creation_date": 1456364863, "post_id": 35614092, "comment_id": 58916749, "body": "Why do you need to copy the entire boost into your variant dir?"}, {"owner": {"reputation": 258, "user_id": 1198184, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbcdb993eea527bd4120f6360b556bc5?s=128&d=identicon&r=PG", "display_name": "rkemp", "link": "https://stackoverflow.com/users/1198184/rkemp"}, "reply_to_user": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1456417067, "post_id": 35614092, "comment_id": 58946886, "body": "@Melak We add the path to -isystem as a CCFLAGS. This disables warnings. This has worked fine for us."}, {"owner": {"reputation": 258, "user_id": 1198184, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbcdb993eea527bd4120f6360b556bc5?s=128&d=identicon&r=PG", "display_name": "rkemp", "link": "https://stackoverflow.com/users/1198184/rkemp"}, "reply_to_user": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "edited": false, "score": 0, "creation_date": 1456417116, "post_id": 35614092, "comment_id": 58946925, "body": "@bdbaddog  We don&#39;t <i>need</i> to copy the entire Boost lib to the variant dir, but because the Scanner isn&#39;t detecting certain include files (because a MACRO is used), they don&#39;t get copied over, so we only get partial copy of the set of header files we need."}, {"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1456421380, "post_id": 35614092, "comment_id": 58950093, "body": "I&#39;m asking if adding it to CCFLAGS <i>and</i> CPPPATH is wise."}, {"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "reply_to_user": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "edited": false, "score": 0, "creation_date": 1456421519, "post_id": 35614092, "comment_id": 58950183, "body": "I think @bdbaddog is asking if you need <i>any</i> boost headers copied to your variant dir at all."}, {"owner": {"reputation": 258, "user_id": 1198184, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbcdb993eea527bd4120f6360b556bc5?s=128&d=identicon&r=PG", "display_name": "rkemp", "link": "https://stackoverflow.com/users/1198184/rkemp"}, "reply_to_user": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1456423469, "post_id": 35614092, "comment_id": 58951407, "body": "@melak  That&#39;s what we&#39;re moving away from. We have strict controls in our organization, so upgrading system libs is a laborious inter-departmental process, let alone upgrading our deployed environment in the remote data center. We are trying to shift towards checking in thirdparty prebuilt libs like boost into our SCM tool. This prevents developers from getting &quot;off track&quot; since it&#39;s baked into our source tree. We even checked in scons into our source tree allowing us to upgrade w/o needing root permissions on each developer workstation (something developers do not have)"}, {"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1456426192, "post_id": 35614092, "comment_id": 58953111, "body": "We also check in some of our toolchains :)  Let&#39;s continue this <a href=\"https://chat.stackoverflow.com/rooms/104567/room-for-melak47-and-rkemp\">in chat</a> maybe?"}, {"owner": {"reputation": 258, "user_id": 1198184, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbcdb993eea527bd4120f6360b556bc5?s=128&d=identicon&r=PG", "display_name": "rkemp", "link": "https://stackoverflow.com/users/1198184/rkemp"}, "reply_to_user": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1456427503, "post_id": 35614092, "comment_id": 58953977, "body": "Hi @melak47, unfortunately our web filtering wont&#39; allow me to access the chat. Let me see if I can get IT to open up the URL."}, {"owner": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "edited": false, "score": 0, "creation_date": 1456628850, "post_id": 35614092, "comment_id": 59034892, "body": "If you&#39;re not packing up and shipping the boost header files, then don&#39;t copy them. Just point to them wherever they are and use them. That should resolve your issue."}, {"owner": {"reputation": 258, "user_id": 1198184, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbcdb993eea527bd4120f6360b556bc5?s=128&d=identicon&r=PG", "display_name": "rkemp", "link": "https://stackoverflow.com/users/1198184/rkemp"}, "reply_to_user": {"reputation": 3006, "user_id": 82681, "user_type": "registered", "accept_rate": 12, "profile_image": "https://i.stack.imgur.com/bsfkb.jpg?s=128&g=1", "display_name": "bdbaddog", "link": "https://stackoverflow.com/users/82681/bdbaddog"}, "edited": false, "score": 0, "creation_date": 1456718107, "post_id": 35614092, "comment_id": 59060885, "body": "@bdbaddog We aren&#39;t shipping boost headers, but we are the libs!"}], "answers": [{"tags": [], "owner": {"reputation": 258, "user_id": 1198184, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbcdb993eea527bd4120f6360b556bc5?s=128&d=identicon&r=PG", "display_name": "rkemp", "link": "https://stackoverflow.com/users/1198184/rkemp"}, "is_accepted": false, "score": 0, "last_activity_date": 1456513185, "creation_date": 1456513185, "answer_id": 35659630, "question_id": 35614092, "link": "https://stackoverflow.com/questions/35614092/scons-building-with-non-standard-location-of-boost-library/35659630#35659630", "title": "SCons building with non-standard location of boost library", "body": "<p>SOLUTION: </p>\n\n<p>Add a 2nd Append to CCFLAGS for 'SRC_ROOT'</p>\n\n<pre><code>env.Append(CCFLAGS = ['-isystem', os.path.join(env['SRC_ROOT'], PATH_INCLUDE)])\n</code></pre>\n\n<p>I could just use the single Append above (for SRC_ROOT) by itself, but I was still seeing warnings (and copying of Boost files into the variant dir), so I needed both -isystem paths to avoid massive warning output. </p>\n\n<p>SRC_ROOT is the root of our src tree.\nBUILD_ROOT is the root of the variant dir.</p>\n\n<p>NOTE: You can remove the CPPPATH, since it's ignored by gcc when the same path in used for -isystem</p>\n"}], "owner": {"reputation": 258, "user_id": 1198184, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dbcdb993eea527bd4120f6360b556bc5?s=128&d=identicon&r=PG", "display_name": "rkemp", "link": "https://stackoverflow.com/users/1198184/rkemp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 545, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456513185, "creation_date": 1456351359, "last_edit_date": 1456353551, "question_id": 35614092, "link": "https://stackoverflow.com/questions/35614092/scons-building-with-non-standard-location-of-boost-library", "title": "SCons building with non-standard location of boost library", "body": "<p>We install various boost versions in a non-standard location.</p>\n\n<p>We then modify <code>CPPPATH</code> and <code>LIBPATH</code> to reflect the selected boost version. However, some boost headers do not get picked up by the scons Scanner and so they do not get copied into the variant output location.</p>\n\n<p>The reason they are not picked up by the scons Scanner is because they use macros like the following:</p>\n\n<pre><code>#include BOOST_ATOMIC_DETAIL_HEADER(boost/atomic/detail/caps_)\n</code></pre>\n\n<p>This leads to file not found errors during compilation.</p>\n\n<p>How do we modify the scons scripts so that they copy the entire boost library over? </p>\n\n<p>I looked into the Depends() routine, but this requires a target node, which we do not have handy at the time we bring in Boost into our build system.\nThis is because all our 3rd party libs are wrapped with a library level SConscript, which basically establishes which version of the 3rd party lib should be used <code>(CPPPATH,LIBPATH)</code>. When that libs <code>SConscript</code> is read, no target nodes are available to it, as this is done very early on in the <code>SConstruct</code> process. </p>\n\n<p>Thoughts on how to solve this?</p>\n\n<p>Here is our <code>SConscript</code> for <code>\"declaring\"</code> Boost to our environment:</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport os\n\nImport('env')\n\nPROJ         = 'boost'\nTARGET       = PROJ\nVERSION      = '1.57.0'\nPATH_INCLUDE = 'cmn/thirdparty/boost/' + VERSION + '/include'\nPATH_LIB     = 'cmn/thirdparty/boost/' + VERSION + '/lib'\n\n\n## extend/modify the imported environment\nif not PROJ in env['THIRDPARTY']:\n  env['THIRDPARTY'][PROJ] = { \n    'TARGET'       : TARGET,\n    'VERSION'      : VERSION,\n    'PATH_INCLUDE' : PATH_INCLUDE,\n    'PATH_LIB'     : PATH_LIB,\n}\n\n  ## because boost emits lots of warnings when compiled under c++11, we use the -isystem flag to disable the warnings\n  env.Append(CCFLAGS = ['-isystem', os.path.join(env['BUILD_ROOT'], PATH_INCLUDE)])\n  env.PrependUnique(CPPPATH = [ os.path.join(env['BUILD_ROOT'], PATH_INCLUDE)])\n  env.PrependUnique(LIBPATH = [os.path.join(env['BUILD_ROOT'], PATH_LIB)]\n</code></pre>\n"}, {"tags": ["c++", "opencv", "photo"], "comments": [{"owner": {"reputation": 473, "user_id": 3663774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t64yX.jpg?s=128&g=1", "display_name": "ikaro", "link": "https://stackoverflow.com/users/3663774/ikaro"}, "edited": false, "score": 0, "creation_date": 1456412735, "post_id": 35613976, "comment_id": 58943316, "body": "Have you tried to change the resolution with CV_CAP_PROP_FRAME_WIDTH and CV_CAP_PROP_FRAME_HEIGHT? <a href=\"http://docs.opencv.org/3.0.0/d8/dfe/classcv_1_1VideoCapture.html#a8c6d8c2d37505b5ca61ffd4bb54e9a7c\" rel=\"nofollow noreferrer\">docu</a>"}, {"owner": {"reputation": 596, "user_id": 4089756, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh6.googleusercontent.com/-1aTM_jDrKgs/AAAAAAAAAAI/AAAAAAAAANQ/gp0BYfHV4SY/photo.jpg?sz=128", "display_name": "kh&#244;i nguy\u1ec5n", "link": "https://stackoverflow.com/users/4089756/kh%c3%b4i-nguy%e1%bb%85n"}, "edited": false, "score": 0, "creation_date": 1478678442, "post_id": 35613976, "comment_id": 68247799, "body": "You should check ffmpeg support or not since OpenCV use ffmpeg to manage video I/O."}, {"owner": {"reputation": 1950, "user_id": 4049851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh5.googleusercontent.com/-C6_hTSEP6Mc/AAAAAAAAAAI/AAAAAAAAAGg/fwUuZ82ifBA/photo.jpg?sz=128", "display_name": "Puck", "link": "https://stackoverflow.com/users/4049851/puck"}, "edited": false, "score": 0, "creation_date": 1596107591, "post_id": 35613976, "comment_id": 111708217, "body": "Where did you get the info that the C920 can take 16Mpx ? The only thing I could find is this thread on sparkbooth mentionning the sensor is actually only 3Mpx <a href=\"http://help.sparkbooth.com/discussions/sparkbooth-dslr-beta/4962-high-resolution-photos-with-logitech-c920#:~:text=The%20Logitech%20C920%20is%20one,picture%20should%20be%20about%204800x3200\" rel=\"nofollow noreferrer\">help.sparkbooth.com/discussions/sparkbooth-dslr-beta/&hellip;</a>."}], "owner": {"reputation": 37, "user_id": 1341695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c691adf8c643fa9d5dd485ad33b05bf8?s=128&d=identicon&r=PG", "display_name": "user1341695", "link": "https://stackoverflow.com/users/1341695/user1341695"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "protected_date": 1604071044, "answer_count": 0, "score": 2, "last_activity_date": 1604070930, "creation_date": 1456350943, "last_edit_date": 1456351445, "question_id": 35613976, "link": "https://stackoverflow.com/questions/35613976/use-opencv-to-photography", "title": "Use openCV to photography", "body": "<p>Many webcams today can take static pictures in high resolution. e.g. Logitech C920 should be able to make <code>16Mpx</code> photography, while in live video mode it can produce frames only in Full HD. Is it possible to use OpenCV to get this <code>16Mpx</code> photo? All examples I found only using <code>VideoCapture</code> or <code>cvCaptureFromCAM</code> which can only access the frames of live video. </p>\n"}, {"tags": ["c++", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "edited": false, "score": 1, "creation_date": 1456353105, "post_id": 35614375, "comment_id": 58912808, "body": "Oh wow I was completely off base, this makes sense though thank you for the response it did solve the issue. I&#39;m finding multi dimensional arrays to be a pain in the ass lol."}], "tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": true, "score": 0, "last_activity_date": 1456353348, "last_edit_date": 1456353348, "creation_date": 1456352456, "answer_id": 35614375, "question_id": 35613960, "link": "https://stackoverflow.com/questions/35613960/issues-initializing-specific-rows-and-columns-in-a-2d-array/35614375#35614375", "title": "Issues initializing specific rows and columns in a 2d array", "body": "<p>Three nested loops is not the way to do this. This might work:</p>\n\n<pre><code>void CopyArrays(int Array1[], int a1_Size, int Array2[], int a2_Size, int Array3[][COLUMNS])\n{\n    int i = 0;\n\n    for ( ; i &lt; a1_Size; i++)\n        // indexing a 2D array with one variable\n        Array3[i / COLUMNS][i % COLUMNS] = Array1[i];\n\n    for (int j = 0; j &lt; a2_Size; j++)\n        Array3[(j + i) / COLUMNS][(j + i) % COLUMNS] = Array2[j];\n}\n</code></pre>\n\n<p>I used <code>(j + i)</code> to continue in writing <code>Array3</code>'s elements after where the first loop left off.</p>\n"}], "owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 35614375, "answer_count": 1, "score": 1, "last_activity_date": 1456353348, "creation_date": 1456350887, "question_id": 35613960, "link": "https://stackoverflow.com/questions/35613960/issues-initializing-specific-rows-and-columns-in-a-2d-array", "title": "Issues initializing specific rows and columns in a 2d array", "body": "<p>I have a two dimensional arra, and two 1d Arrays. </p>\n\n<p>I need to take the elements from the 1st 1d array and store them in the the first 5 rows and columns of the the 2d array. </p>\n\n<p>I then need to take the elements from the second 1d array and store them in the remaining rows and columns of the 2d array. </p>\n\n<p>The issue is that the elements aren't going in correctly, please see the output at the bottom to understand what I mean!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nconst int ROWS = 10; \nconst int COLUMNS = 4;\n\nvoid CopyArrays(int Array1[], int a1_Size, int Array2[], int a2_Size, int Array3[][COLUMNS]);\n\n/* Array1[] refers to array1 a1_Size refers to the size of the first array, \n   Array2 refers to array2 and a2_Size refers to the size of array2, \n   And Array3[][COLUMNS] refers to the 2d array */\n\n\nvoid DisplayArray3(int Array3[][COLUMNS]);\n\nint main()\n{\n  int array1[20] = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20};\n\n  int array2[20] = {2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40};\n\n  int Array3[ROWS][COLUMNS];\n\n  CopyArrays(array1, 20, array2, 20, Array3);\n\n  DisplayArray3(Array3);       \n\n  return 0;\n}\n\nvoid CopyArrays(int Array1[], int a1_Size, int Array2[], int a2_Size, int Array3[][COLUMNS])\n{\n   for (int i = 0; i &lt; a1_Size; i++)\n   {\n       for (int j = 0; j &lt; ROWS; j++)\n       {\n          for (int k = i; k &lt; COLUMNS; k++)\n          {\n             Array3[j][k] = Array1[i];\n          }\n       }\n    } \n\n}\n\n\nvoid DisplayArray3(int Array3[][COLUMNS])\n{ \n      for(int i = 0; i &lt; ROWS; i++)\n      { \n           for(int j = 0; j &lt; COLUMNS; j++)\n           {    \n              cout &lt;&lt; setw(10) &lt;&lt; Array3[i][j];\n           } \n        cout &lt;&lt; \"\\n\" ;\n      } \n} \n</code></pre>\n\n<p>// Output:</p>\n\n<pre><code>     1         2         3         4\n     1         2         3         4\n     1         2         3         4\n     1         2         3         4\n     1         2         3         4\n     1         2         3         4\n     1         2         3         4\n     1         2         3         4\n     1         2         3         4\n     1         2         3         4\n</code></pre>\n\n<p>So as you can see only the first four elements from the array alpha are being put into the Array3 Instead of 1 - 20. Some where my logic is flawed but I'm not sure how to correct it. </p>\n\n<p>Any suggestions? </p>\n\n<p>PS: I realize the for loops can be condensed and I plan on doing so, also I didn't set the for loops to end the processing at row 5 because at this point I'm more concerned with number range being correct.</p>\n"}, {"tags": ["c++", "templates", "c++11", "c++14"], "comments": [{"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 1, "creation_date": 1456350148, "post_id": 35613620, "comment_id": 58911218, "body": "Please note that <code>vector_product</code> is a badly chosen name, cause it might be confused with the cross product between three dimensional vectors."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1456352062, "post_id": 35613620, "comment_id": 58912277, "body": "You could call it <code>scalar_mutliplication</code>? Or <code>scalar_closure</code>."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1456352314, "post_id": 35613620, "comment_id": 58912414, "body": "Why don&#39;t you just overload <code>operator*</code> for your vector class?"}, {"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1456352344, "post_id": 35613620, "comment_id": 58912437, "body": "@erip That would be a name inconsistent to <code>vector_sum</code>."}, {"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1456352714, "post_id": 35613620, "comment_id": 58912592, "body": "@erip Suppose I just overload <code>operator*</code>. Which code would be produced for <code>z = 3 * x + 2 * y</code>? <code>3 * x</code> and <code>2 * y</code> would be of type <code>vector</code> (which is a <code>vector_expression</code>) and then <code>operator+</code> would be called. It seems like that no temporaries would be constructed. Should be fine, shouldn&#39;t it? I thought we would the same technique used for <code>operator+</code> in order to prevent the implementation from producing inefficient code. [I assume you know why I don&#39;t overload <code>operator+</code>]"}], "answers": [{"comments": [{"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 0, "creation_date": 1456353450, "post_id": 35614385, "comment_id": 58912957, "body": "Please note that I want to multiply <code>vector&lt;T&gt;</code> with any type compatible to <code>T</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 0, "creation_date": 1456353824, "post_id": 35614385, "comment_id": 58913139, "body": "@0xbadf00d Where <code>T</code> may as well be <code>double</code> because since that&#39;s what <code>operator[]</code> gives you anyway. Regardless, that&#39;s a minor detail."}, {"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 0, "creation_date": 1456354585, "post_id": 35614385, "comment_id": 58913441, "body": "&quot;if you did <code>a+b+c</code>, you&#39;ll end up keeping a reference to the temporary <code>a+b</code>&quot; Why would that be a problem? &quot;You probably only want to keep a reference to the actual <code>vector</code>&quot; Why would that be a benefit? And how should I do that?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 0, "creation_date": 1456355024, "post_id": 35614385, "comment_id": 58913607, "body": "@0xbadf00d Given <code>auto sum = a+b+c;</code>, <code>sum</code> will be a <code>vector_sum&lt;vector_sum&lt;A,B&gt;,C&gt;</code>. Doing <code>sum[0]</code> would involve calling <code>operator()[0]</code> on the <code>vector_sum&lt;A,B&gt;</code>, but that object has already been destroyed. It was destroyed at the end of the line. That&#39;s undefined behavior/potential segfault/weird random errors downstream/etc."}, {"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 0, "creation_date": 1456355816, "post_id": 35614385, "comment_id": 58913918, "body": "So, how should I fix this?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 0, "creation_date": 1456356015, "post_id": 35614385, "comment_id": 58913983, "body": "@0xbadf00d Try some things. If they don&#39;t work, try to figure out why. If you can&#39;t figure it out, ask a new question."}, {"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 0, "creation_date": 1456403337, "post_id": 35614385, "comment_id": 58936112, "body": "Please take note of my answer to this question. I still got problems to figure out how I should deal with the problem you&#39;ve mentioned and asked another question: <a href=\"http://stackoverflow.com/questions/35627286/handling-references-to-expressions-in-a-vector-binary-operation-class-withou\" title=\"handling references to expressions in a vector binary operation class withou\">stackoverflow.com/questions/35627286/&hellip;</a>"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1456352785, "last_edit_date": 1456352785, "creation_date": 1456352477, "answer_id": 35614385, "question_id": 35613620, "link": "https://stackoverflow.com/questions/35613620/how-should-i-use-expression-templates-in-order-to-implement-scalar-multiplicatio/35614385#35614385", "title": "How should I use expression templates in order to implement scalar multiplication for a mathematical vector class", "body": "<p>I would simply extend <code>vector_sum</code> to allow for <code>E2</code> to be <code>double</code>, and to handle that gracefully if it is. This would involve taking arguments of <code>E1 const&amp;</code> and <code>E2 const&amp;</code> in your constructor, potentially not throwing on size differences (since scalars have no size), and rewriting <code>operator[]</code> to not do indexing. For the last part, something like:</p>\n\n<pre><code>    double operator[](std::size_t i) const {\n        return m_e1[i] + get(m_e2, i);\n    }\n\nprivate:\n    template &lt;class E&gt;\n    double get(E const&amp; rhs, std::size_t i) const {\n        return rhs[i];\n    }\n\n    double get(double scalar, std::size_t ) const {\n        return scalar;\n    }\n</code></pre>\n\n<p>This way, if you're adding two <code>vector_expression</code>s, you'll do the indexing, but if you're adding a <code>vector_expression</code> and a <code>double</code> - you won't even try to index into the <code>double</code>. This switch happens at compile-time, so there's no run-time overhead. </p>\n\n<p>Then, all you just need to add a couple more <code>operator+</code>s:</p>\n\n<pre><code>template &lt;typename E1&gt;\nvector_sum&lt;E1, double&gt; operator+(vector_expression&lt;E1&gt; const&amp; e1, double d) {\n        return {e1, d};\n}\n\ntemplate &lt;typename E1&gt;\nvector_sum&lt;E1, double&gt; operator+(double d, vector_expression&lt;E1&gt; const&amp; e1) {\n        return {e1, d};\n}\n</code></pre>\n\n<p>Which lets you write:</p>\n\n<pre><code>math::vector&lt;int&gt; x = {1, 2, 3, 4};\nmath::vector&lt;int&gt; y = {2, 3, 4, 5};    \nauto sum = 3 + x + 1;\n</code></pre>\n\n<hr />\n\n<p>Keeping references to const probably isn't the right thing to do - if you did <code>a+b+c</code>, you'll end up keeping a reference to the temporary <code>a+b</code>. You probably only want to keep a reference to the actual <code>vector</code>, and keep copies of all the intermediate objects. </p>\n\n<hr />\n\n<p>To support <code>vector_product</code>, you'll probably want <code>vector_sum&lt;E1,E2&gt;</code> to really be <code>vector_binary_op&lt;E1,E2,std::plus&lt;&gt;&gt;</code> and then <code>vector_product&lt;E1,E2&gt;</code> should be <code>vector_binary_op&lt;E1,E2,std::multiplies&lt;&gt;&gt;</code>. That way, you won't have all the duplication.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1456358059, "last_edit_date": 1456358059, "creation_date": 1456354052, "answer_id": 35614783, "question_id": 35613620, "link": "https://stackoverflow.com/questions/35613620/how-should-i-use-expression-templates-in-order-to-implement-scalar-multiplicatio/35614783#35614783", "title": "How should I use expression templates in order to implement scalar multiplication for a mathematical vector class", "body": "<p>Make a specializattion of <code>template&lt;class E&gt; class vector_expression</code> for <code>E=double</code>.</p>\n\n<p>Add in concept of min/max size (as doubles are 0 to infinite dimension), and <em>maybe</em> <code>is_scalar</code> (might not be needed, except cast-to-scalar?).</p>\n\n<p>Kill <code>vector_sum</code> and take its toys.  Make <code>binop_vector</code> that takes a elementop on the elements.</p>\n\n<p>Add</p>\n\n<pre><code>friend binop_vector&lt;vector_expression,R,ElemAdd&gt;\noperator+( vector_expression const&amp; l. R const&amp; r ){\n  return {l,r};\n}\nfriend binop_vector&lt;vector_expression&lt;double&gt;,vector_expression,ElemAdd&gt;\noperator+( double const&amp; l. vector_expression const const&amp; r ){\n  return {l,r};\n}\n</code></pre>\n\n<p>And similar for <code>*</code> with <code>ElemMult</code> to <code>vector_expression</code>.  Ths binop uses the element wise operation to implement <code>[]</code>.</p>\n\n<p>Change asserts to ensure you have overlapping min/max sizes.  Report intersection in <code>binop_vector</code>.</p>\n\n<p>The <code>vector_expression&lt;double&gt;</code> overload has a min 0 max -1 (size_t) and always returns its value.  If you need more than one scalar type, write <code>scalar_expression&lt;T&gt;</code> and inherit <code>vector_expression&lt;double&gt;</code> (etc) from it.</p>\n\n<p>The above is not tested, just written on phone as I sit in garage.</p>\n"}, {"tags": [], "owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "is_accepted": true, "score": 2, "last_activity_date": 1456403252, "last_edit_date": 1495540230, "creation_date": 1456403252, "answer_id": 35627297, "question_id": 35613620, "link": "https://stackoverflow.com/questions/35613620/how-should-i-use-expression-templates-in-order-to-implement-scalar-multiplicatio/35627297#35627297", "title": "How should I use expression templates in order to implement scalar multiplication for a mathematical vector class", "body": "<p>Inspired by Yakk and Barry, I've finally come up with the following:</p>\n\n<pre><code>namespace math\n{\n    template&lt;class E&gt;\n    class expression\n    {\n    public:\n        auto size() const {\n            return static_cast&lt;E const&amp;&gt;(*this).size();\n        }\n\n        auto operator[](std::size_t i) const\n        {\n            if (i &gt;= size())\n                throw std::length_error(\"\");\n            return static_cast&lt;E const&amp;&gt;(*this)[i];\n        }\n\n        operator E&amp;() { return static_cast&lt;E&amp;&gt;(*this); }\n        operator E const&amp;() const { return static_cast&lt;E const&amp;&gt;(*this); }\n    }; // class expression\n\n    template&lt;typename T, class Allocator = std::allocator&lt;T&gt;&gt;\n    class vector\n        : public expression&lt;vector&lt;T&gt;&gt;\n    {\n    private:\n        using data_type = std::vector&lt;T, Allocator&gt;;\n        data_type m_data;\n\n    public:\n        using value_type = T;\n        using allocator_type = Allocator;\n        using size_type = typename data_type::size_type;\n        using difference_type = typename data_type::difference_type;\n        using reference = typename data_type::reference;\n        using const_reference = typename data_type::const_reference;\n        using pointer = typename data_type::pointer ;\n        using const_pointer = typename data_type::const_pointer;\n\n        vector(size_type d)\n            : m_data(d)\n        { }\n        vector(std::initializer_list&lt;value_type&gt; init)\n            : m_data(init)\n        { }\n        template&lt;class E&gt;\n        vector(expression&lt;E&gt; const&amp; expression)\n            : m_data(expression.size())\n        {\n            for (size_type i = 0; i &lt; expression.size(); ++i)\n                m_data[i] = expression[i];\n        }\n\n        size_type size() const {\n            return m_data.size();\n        }\n\n        value_type  operator[](size_type i) const { return m_data[i]; }\n        value_type&amp; operator[](size_type i)       { return m_data[i]; };\n    }; // class vector\n\n    namespace detail\n    {\n        template&lt;typename T&gt;\n        class scalar\n            : public expression&lt;scalar&lt;T&gt;&gt;\n        {\n        public:\n            using value_type = T;\n            using allocator_type = std::allocator&lt;void&gt;;\n            using size_type = typename std::allocator&lt;T&gt;::size_type;\n            using difference_type = typename std::allocator&lt;T&gt;::difference_type;\n            using reference = typename std::allocator&lt;T&gt;::reference;\n            using const_reference = typename std::allocator&lt;T&gt;::const_reference;\n            using pointer = typename std::allocator&lt;T&gt;::pointer;\n            using const_pointer = typename std::allocator&lt;T&gt;::const_pointer;\n\n            scalar(value_type value)\n                : m_value(value)\n            { }\n\n            size_type size() const {\n                return 0;\n            }\n\n            operator value_type&amp;() { return static_cast&lt;value_type&amp;&gt;(*this); }\n            operator value_type const&amp;() const { return static_cast&lt;value_type const&amp;&gt;(*this); }\n\n            value_type  operator[](size_type i) const { return m_value; }\n            value_type&amp; operator[](size_type i) { return m_value; }\n\n        private:\n            value_type m_value;\n        }; // class scalar\n\n        template&lt;class&gt;\n        struct is_scalar : std::false_type { };\n\n        template&lt;class T&gt;\n        struct is_scalar&lt;scalar&lt;T&gt;&gt; : std::true_type { };\n    } // namespace detail\n\n    template&lt;class E1, class E2, class BinaryOperation&gt;\n    class vector_binary_operation\n        : public expression&lt;vector_binary_operation&lt;E1, E2, BinaryOperation&gt;&gt;\n    {\n    public:\n        using value_type = decltype(BinaryOperation()(typename E1::value_type(), typename E2::value_type()));\n        using allocator_type = std::conditional_t&lt;\n            detail::is_scalar&lt;E1&gt;::value,\n            typename E2::allocator_type::template rebind&lt;value_type&gt;::other,\n            typename E1::allocator_type::template rebind&lt;value_type&gt;::other&gt;;\n\n    private:\n        using vector_type = vector&lt;value_type, allocator_type&gt;;\n\n    public:\n        using size_type = typename vector_type::size_type;\n        using difference_type = typename vector_type::difference_type;\n        using reference = typename vector_type::reference;\n        using const_reference = typename vector_type::const_reference;\n        using pointer = typename vector_type::pointer;\n        using const_pointer = typename vector_type::const_pointer;\n\n        vector_binary_operation(expression&lt;E1&gt; const&amp; e1, expression&lt;E2&gt; const&amp; e2, BinaryOperation op)\n            : m_e1(e1), m_e2(e2),\n              m_op(op)\n        {\n            if (e1.size() &gt; 0 &amp;&amp; e2.size() &gt; 0 &amp;&amp; !(e1.size() == e2.size()))\n                throw std::logic_error(\"\");\n        }\n\n        size_type size() const {\n            return m_e1.size(); // == m_e2.size()\n        }\n\n        value_type operator[](size_type i) const {\n            return m_op(m_e1[i], m_e2[i]);\n        }\n\n    private:\n        E1 m_e1;\n        E2 m_e2;\n        //E1 const&amp; m_e1;\n        //E2 const&amp; m_e2;\n        BinaryOperation m_op;\n    }; // class vector_binary_operation\n\n    template&lt;class E1, class E2&gt;\n    vector_binary_operation&lt;E1, E2, std::plus&lt;&gt;&gt;\n    operator+(expression&lt;E1&gt; const&amp; e1, expression&lt;E2&gt; const&amp; e2) {\n        return{ e1, e2, std::plus&lt;&gt;() };\n    }\n    template&lt;class E1, class E2&gt;\n    vector_binary_operation&lt;E1, E2, std::minus&lt;&gt;&gt;\n    operator-(expression&lt;E1&gt; const&amp; e1, expression&lt;E2&gt; const&amp; e2) {\n        return{ e1, e2, std::minus&lt;&gt;() };\n    }\n    template&lt;class E1, class E2&gt;\n    vector_binary_operation&lt;E1, E2, std::multiplies&lt;&gt;&gt;\n    operator*(expression&lt;E1&gt; const&amp; e1, expression&lt;E2&gt; const&amp; e2) {\n        return{ e1, e2, std::multiplies&lt;&gt;() };\n    }\n    template&lt;class E1, class E2&gt;\n    vector_binary_operation&lt;E1, E2, std::divides&lt;&gt;&gt;\n    operator/(expression&lt;E1&gt; const&amp; e1, expression&lt;E2&gt; const&amp; e2) {\n        return{ e1, e2, std::divides&lt;&gt;() };\n    }\n\n    template&lt;class E, typename T&gt;\n    vector_binary_operation&lt;E, detail::scalar&lt;T&gt;, std::divides&lt;&gt;&gt;\n    operator/(expression&lt;E&gt; const&amp; expr, T val) {\n        return{ expr, detail::scalar&lt;T&gt;(val), std::divides&lt;&gt;() };\n    }\n    template&lt;class E, typename T&gt;\n    vector_binary_operation&lt;E, detail::scalar&lt;T&gt;, std::multiplies&lt;&gt;&gt;\n    operator*(T val, expression&lt;E&gt; const&amp; expr) {\n        return{ expr, detail::scalar&lt;T&gt;(val), std::multiplies&lt;&gt;() };\n    }\n    template&lt;class E, typename T&gt;\n    vector_binary_operation&lt;E, detail::scalar&lt;T&gt;, std::multiplies&lt;&gt;&gt;\n    operator*(expression&lt;E&gt; const&amp; expr, T val) {\n        return{ expr, detail::scalar&lt;T&gt;(val), std::multiplies&lt;&gt;() };\n    }\n} // namespace math\n</code></pre>\n\n<p>This allows the operations <code>+, -, /, *</code> for two <code>vector</code>s of the same <code>size</code> as well as the multiplication <code>a * x</code> and <code>x * a</code> of a <code>vector</code> x and a value <code>a</code>. Moreover, we can divide <code>x / a</code>, but not <code>a / x</code> (since that makes no sense). I think that this is the most plausible solution.</p>\n\n<p>However, there are still some issues: I've added an <code>Allocator</code> template parameter to the <code>vector</code> class. In <code>vector_binary_operation</code> I need to know the resulting <code>vector</code> type. It would be possible that both <code>expression</code>s have a different <code>allocator_type</code>. I've decided to choose the <code>allocator_type</code> of the first <code>expression</code> in <code>vector_binary_operation</code>. I don't think that this is a real problem, since I don't think that it would make much sense to use different <code>Allocator</code>s in this scenario.</p>\n\n<p>The bigger issue is that I don't know how I need to deal with the <code>expression</code> member variables in <code>vector_binary_operation</code>. It would make sense to declare them as const references, cause the whole point of the code is to avoid unnecessary copies. However, as Barry pointed out, if we write <code>sum = a + b + c</code>, we will end up keeping a reference to the temporary <code>a + b</code>. Doing <code>sum[0]</code> will call <code>operator()[0]</code> on that temporary. But that object was deleted after the previous line.</p>\n\n<p>I don't know what I need to do here and asked <a href=\"https://stackoverflow.com/questions/35627286/handling-references-to-expressions-in-a-vector-binary-operation-class-withou\">another question</a>.</p>\n"}], "owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 1, "accepted_answer_id": 35627297, "answer_count": 3, "score": 3, "last_activity_date": 1456403252, "creation_date": 1456349710, "question_id": 35613620, "link": "https://stackoverflow.com/questions/35613620/how-should-i-use-expression-templates-in-order-to-implement-scalar-multiplicatio", "title": "How should I use expression templates in order to implement scalar multiplication for a mathematical vector class", "body": "<p>Please consider the following (partial) implementation of a mathematical vector class (which is basically the code you can find in the <a href=\"https://en.wikipedia.org/wiki/Expression_templates\" rel=\"nofollow\">Wikipedia article about expression templates</a>):</p>\n\n<pre><code>namespace math\n{\n    template&lt;class E&gt;\n    class vector_expression\n    {\n    public:\n        std::size_t size() const {\n            return static_cast&lt;E const&amp;&gt;(*this).size();\n        }\n\n        double operator[](size_t i) const\n        {\n            if (i &gt;= size())\n                throw std::length_error(\"\");\n            return static_cast&lt;E const&amp;&gt;(*this)[i];\n        }\n\n        operator E&amp;() { return static_cast&lt;E&amp;&gt;(*this); }\n        operator E const&amp;() const { return static_cast&lt;E const&amp;&gt;(*this); }\n    }; // class vector_expression\n\n    template&lt;class E1, class E2&gt;\n    class vector_sum\n        : public vector_expression&lt;vector_sum&lt;E1, E2&gt;&gt;\n    {\n    public:\n        vector_sum(vector_expression&lt;E1&gt; const&amp; e1, vector_expression&lt;E2&gt; const&amp; e2)\n            : m_e1(e1), m_e2(e2)\n        {\n            if (e1.size() != e2.size())\n                throw std::logic_error(\"\");\n        }\n\n        std::size_t size() const {\n            return m_e1.size(); // == m_e2.size()\n        }\n\n        double operator[](std::size_t i) const {\n            return m_e1[i] + m_e2[i];\n        }\n\n    private:\n        E1 const&amp; m_e1;\n        E2 const&amp; m_e2;\n    }; // class vector_sum\n\n    template&lt;typename E1, typename E2&gt;\n    vector_sum&lt;E1, E2&gt; operator+(vector_expression&lt;E1&gt; const&amp; e1, vector_expression&lt;E2&gt; const&amp; e2) {\n        return { e1, e2 };\n    }\n\n    template&lt;typename T&gt;\n    class vector\n        : public vector_expression&lt;vector&lt;T&gt;&gt;\n    {\n    public:\n        vector(std::size_t d)\n            : m_data(d)\n        { }\n        vector(std::initializer_list&lt;T&gt; init)\n            : m_data(init)\n        { }\n        template&lt;class E&gt;\n        vector(vector_expression&lt;E&gt; const&amp; expression)\n            : m_data(expression.size())\n        {\n            for (std::size_t i = 0; i &lt; expression.size(); ++i)\n                m_data[i] = expression[i];\n        }\n\n        std::size_t size() const {\n            return m_data.size();\n        }\n\n        double  operator[](size_t i) const { return m_data[i]; }\n        double&amp; operator[](size_t i) { return m_data[i]; }\n\n    private:\n        std::vector&lt;T&gt; m_data;\n    }; // class vector    \n} // namespace math\n</code></pre>\n\n<blockquote>\n  <p>How should I extend this implementation to allow the following operations:</p>\n</blockquote>\n\n<pre><code>vector&lt;double&gt; x = { ... };\nauto y = 4711 * x; // or y = x * 4711\nauto z = 1 + x; // or x + 1, which should yield z[i] = x[i] + 1\n</code></pre>\n\n<p>I suppose that I need something like</p>\n\n<pre><code>namespace math\n{\n    template&lt;class E, typename T&gt;\n    class vector_product\n        : public vector_expression&lt;vector_product&lt;E, T&gt;&gt;\n    {\n    public:\n        vector_product(vector_expression&lt;E&gt; const&amp; e, T const&amp; t)\n            : m_e(e), m_t(t)\n        { }\n\n        std::size_t size() const {\n            return m_e.size();\n        }\n\n        double operator[](std::size_t i) const {\n            return m_e[i] * m_t;\n        }\n\n    private:\n        E const&amp; m_e;\n        T const&amp; m_t;\n    }; // class vector_product\n\n    template&lt;class E, typename T&gt;\n    vector_product&lt;E, T&gt; operator*(vector_expression&lt;E&gt; const&amp; e, T const&amp; t) {\n        return { e, t };\n    }\n    template&lt;class E, typename T&gt;\n    vector_product&lt;E, T&gt; operator*(T const&amp; t, vector_expression&lt;E&gt; const&amp; e) {\n        return e * t;\n    }   \n} // namespace math\n</code></pre>\n\n<p>but I don't know whether or not this is a good approach. So, how should I do it? And should I add any copy or move constructor/assignment operator? I guess not, since the implicit ones should do a perfect job, cause the only member variable of <code>vector</code> is a STL type.</p>\n"}, {"tags": ["c++", "arrays", "c++11"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 2, "creation_date": 1456349669, "post_id": 35613587, "comment_id": 58910930, "body": "Um, did you define the constructor or not?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 3, "creation_date": 1456350316, "post_id": 35613587, "comment_id": 58911316, "body": "See <a href=\"http://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\" title=\"why can templates only be implemented in the header file\">stackoverflow.com/questions/495021/&hellip;</a>"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 1, "creation_date": 1456350423, "post_id": 35613587, "comment_id": 58911370, "body": "It might help to <i>also</i> give a) a definition and b) an instantiation, such that all together it is a complete failing example."}, {"owner": {"reputation": 489, "user_id": 3780993, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9ad160badab2c6f405426f4e2a281fe?s=128&d=identicon&r=PG&f=1", "display_name": "ragesalmon", "link": "https://stackoverflow.com/users/3780993/ragesalmon"}, "edited": false, "score": 0, "creation_date": 1456350489, "post_id": 35613587, "comment_id": 58911406, "body": "Looking at what Brian linked I think the problem is that I never instantiated. Once I get back to my desk I will try it out"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1456350761, "post_id": 35613587, "comment_id": 58911553, "body": "Please give the exact error."}, {"owner": {"reputation": 489, "user_id": 3780993, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9ad160badab2c6f405426f4e2a281fe?s=128&d=identicon&r=PG&f=1", "display_name": "ragesalmon", "link": "https://stackoverflow.com/users/3780993/ragesalmon"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1456351032, "post_id": 35613587, "comment_id": 58911717, "body": "@davidbak the problem was that I hadn&#39;t instantiated the template. Thanks for the link."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1456352353, "post_id": 35613587, "comment_id": 58912440, "body": "potential duplicate of <a href=\"http://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\" title=\"why can templates only be implemented in the header file\">stackoverflow.com/questions/495021/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1355, "user_id": 4335909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MrGAW.jpg?s=128&g=1", "display_name": "Rana", "link": "https://stackoverflow.com/users/4335909/rana"}, "is_accepted": false, "score": 3, "last_activity_date": 1456349834, "creation_date": 1456349834, "answer_id": 35613657, "question_id": 35613587, "link": "https://stackoverflow.com/questions/35613587/using-a-template-to-create-arrays-of-varying-length-inside-of-class-in-c11/35613657#35613657", "title": "Using a template to create arrays of varying length inside of class in C++11", "body": "<pre><code>Cont(std::array&lt;int, S1&gt; ns)\n</code></pre>\n\n<p>Is only a declaration, you need to define it as well.</p>\n\n<p>like:</p>\n\n<pre><code>Cont(std::array&lt;int, S1&gt; ns){\n    // code\n}\n</code></pre>\n"}], "owner": {"reputation": 489, "user_id": 3780993, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a9ad160badab2c6f405426f4e2a281fe?s=128&d=identicon&r=PG&f=1", "display_name": "ragesalmon", "link": "https://stackoverflow.com/users/3780993/ragesalmon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "closed_date": 1457008425, "answer_count": 1, "score": -1, "last_activity_date": 1456350230, "creation_date": 1456349613, "last_edit_date": 1456350230, "question_id": 35613587, "link": "https://stackoverflow.com/questions/35613587/using-a-template-to-create-arrays-of-varying-length-inside-of-class-in-c11", "closed_reason": "Not suitable for this site", "title": "Using a template to create arrays of varying length inside of class in C++11", "body": "<p>Say I have a class:</p>\n\n<pre><code>template &lt;int S1&gt;\nclass Cont {\n    private:\n       std::array&lt;int, S1&gt; nums;\n    public:\n       Cont(std::array&lt;int, S1&gt; ns);\n}\n</code></pre>\n\n<p>When trying to link my program, I am getting an error saying that, for example, Cont(std::array ns) is undefined. So am I doing something wrong? Or will this never work due to how arrays work?</p>\n\n<p>EDIT: Sorry, I should have mentioned that the constructor is defined. I was only giving the header to illustrate what I meant. </p>\n"}, {"tags": ["c++", "c", "algorithm", "bit-manipulation", "bytearray"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1456349677, "post_id": 35613555, "comment_id": 58910938, "body": "If I understand correctly, you want to repeat every bit in the original array three times?"}, {"owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1456349814, "post_id": 35613555, "comment_id": 58911019, "body": "Yes, every bit in the original array needs repeated 3 times."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1456349867, "post_id": 35613555, "comment_id": 58911048, "body": "Show us what you tried, as well as input, expected output, and actual output."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1456350008, "post_id": 35613555, "comment_id": 58911137, "body": "Push each bit through a function that writes to output when it has 8, 32 whatever in its buffer. Then flush anything not written. You don&#39;t need a lookup table."}, {"owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "edited": false, "score": 0, "creation_date": 1456350301, "post_id": 35613555, "comment_id": 58911309, "body": "I added my LUT test and its output."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456351203, "post_id": 35613555, "comment_id": 58911799, "body": "On x86 with BMI2 instruction-set extension, a <code>pdep+(shl+or)*2</code> could do this easily."}, {"owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456352040, "post_id": 35613555, "comment_id": 58912264, "body": "@EOF unfortunately I&#39;m on ARM Cortex M4"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456460047, "post_id": 35613555, "comment_id": 58967609, "body": "lets start with defining a string of bits for a byte is by using a leading 0B&lt;thebits&gt;"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1456460235, "post_id": 35613555, "comment_id": 58967667, "body": "you do not need that look up table. a simple loop of shift + and for the 8 bits to select a bit, then output that bit 3 times would do the job very nicely."}], "answers": [{"comments": [{"owner": {"reputation": 16944, "user_id": 1401879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261a5f5af181ba929a5b066b19ae124f?s=128&d=identicon&r=PG", "display_name": "Stefan Haustein", "link": "https://stackoverflow.com/users/1401879/stefan-haustein"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1456352183, "post_id": 35614165, "comment_id": 58912343, "body": "The single bit at the start of <code>b</code> is right when <code>a</code> and <code>c</code> are swapped"}, {"owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "edited": false, "score": 1, "creation_date": 1456352624, "post_id": 35614165, "comment_id": 58912556, "body": "As written that doesn&#39;t work. Reversing the order of appending the bytes does work (16, 8, 0)"}, {"owner": {"reputation": 16944, "user_id": 1401879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261a5f5af181ba929a5b066b19ae124f?s=128&d=identicon&r=PG", "display_name": "Stefan Haustein", "link": "https://stackoverflow.com/users/1401879/stefan-haustein"}, "edited": false, "score": 0, "creation_date": 1456352717, "post_id": 35614165, "comment_id": 58912593, "body": "Yeah sorry I initially had the values swapped, too... Should be fixed now.. Or do you see a different problem?"}, {"owner": {"reputation": 16944, "user_id": 1401879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261a5f5af181ba929a5b066b19ae124f?s=128&d=identicon&r=PG", "display_name": "Stefan Haustein", "link": "https://stackoverflow.com/users/1401879/stefan-haustein"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1456352902, "post_id": 35614165, "comment_id": 58912695, "body": "@WeatherVane 8 bits expand to 24 bits = 3 bytes. The lookup table expands each possible byte value to the corresponding 3 bytes, stored in an int."}, {"owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "edited": false, "score": 0, "creation_date": 1456355179, "post_id": 35614165, "comment_id": 58913683, "body": "Thanks for the help. The system now works as expected."}], "tags": [], "owner": {"reputation": 16944, "user_id": 1401879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/261a5f5af181ba929a5b066b19ae124f?s=128&d=identicon&r=PG", "display_name": "Stefan Haustein", "link": "https://stackoverflow.com/users/1401879/stefan-haustein"}, "is_accepted": true, "score": 4, "last_activity_date": 1456352636, "last_edit_date": 1456352636, "creation_date": 1456351669, "answer_id": 35614165, "question_id": 35613555, "link": "https://stackoverflow.com/questions/35613555/bit-expand-byte-array/35614165#35614165", "title": "Bit expand byte array", "body": "<p>There is a byte order issue with your table (or how you copy the data):</p>\n\n<p>For the first input byte</p>\n\n<pre><code>10101010\n</code></pre>\n\n<p>your output is </p>\n\n<pre><code>a        b        c\n00111000 10001110 11100011\n</code></pre>\n\n<p>but should be</p>\n\n<pre><code>c        b        a\n11100011 10001110 00111000\n</code></pre>\n\n<p>So the 1st and 3rd byte need to be swapped (and so on)</p>\n\n<p>Instead of changing the table to suit memcpy, I'd just do something like</p>\n\n<pre><code>int j = 0;\nfor (int i = 0; i &lt; 21; i++) {\n  lut_val = bitExpandTable[msg[i]];\n  expanded_msg[j++] = (uint8_t) (lut_val &gt;&gt; 16);\n  expanded_msg[j++] = (uint8_t) (lut_val &gt;&gt; 8);\n  expanded_msg[j++] = (uint8_t) lut_val;\n}\n</code></pre>\n"}], "owner": {"reputation": 1531, "user_id": 280980, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7e03bf30d062d843190ca66bd56a752e?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/280980/jared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 35614165, "answer_count": 1, "score": 4, "last_activity_date": 1456352636, "creation_date": 1456349483, "last_edit_date": 1495540232, "question_id": 35613555, "link": "https://stackoverflow.com/questions/35613555/bit-expand-byte-array", "title": "Bit expand byte array", "body": "<p>I have a situation where I need to upscale a dynamic sized byte array by 3.</p>\n\n<p>Example:</p>\n\n<pre><code>10101010 11001100\n</code></pre>\n\n<p>to</p>\n\n<pre><code>11100011 10001110 00111000 11111100 00001111 11000000\n</code></pre>\n\n<p>I've used the algorithm here to generate a lookup table.</p>\n\n<p><a href=\"https://stackoverflow.com/a/9044057/280980\">https://stackoverflow.com/a/9044057/280980</a></p>\n\n<pre><code>static const uint32_t bitExpandTable[256] = {\n00000000, 0x000007, 0x000038, 0x00003f, 0x0001c0, 0x0001c7, 0x0001f8, 0x0001ff,\n0x000e00, 0x000e07, 0x000e38, 0x000e3f, 0x000fc0, 0x000fc7, 0x000ff8, 0x000fff,\n0x007000, 0x007007, 0x007038, 0x00703f, 0x0071c0, 0x0071c7, 0x0071f8, 0x0071ff,\n0x007e00, 0x007e07, 0x007e38, 0x007e3f, 0x007fc0, 0x007fc7, 0x007ff8, 0x007fff,\n0x038000, 0x038007, 0x038038, 0x03803f, 0x0381c0, 0x0381c7, 0x0381f8, 0x0381ff,\n0x038e00, 0x038e07, 0x038e38, 0x038e3f, 0x038fc0, 0x038fc7, 0x038ff8, 0x038fff,\n0x03f000, 0x03f007, 0x03f038, 0x03f03f, 0x03f1c0, 0x03f1c7, 0x03f1f8, 0x03f1ff,\n0x03fe00, 0x03fe07, 0x03fe38, 0x03fe3f, 0x03ffc0, 0x03ffc7, 0x03fff8, 0x03ffff,\n0x1c0000, 0x1c0007, 0x1c0038, 0x1c003f, 0x1c01c0, 0x1c01c7, 0x1c01f8, 0x1c01ff,\n0x1c0e00, 0x1c0e07, 0x1c0e38, 0x1c0e3f, 0x1c0fc0, 0x1c0fc7, 0x1c0ff8, 0x1c0fff,\n0x1c7000, 0x1c7007, 0x1c7038, 0x1c703f, 0x1c71c0, 0x1c71c7, 0x1c71f8, 0x1c71ff,\n0x1c7e00, 0x1c7e07, 0x1c7e38, 0x1c7e3f, 0x1c7fc0, 0x1c7fc7, 0x1c7ff8, 0x1c7fff,\n0x1f8000, 0x1f8007, 0x1f8038, 0x1f803f, 0x1f81c0, 0x1f81c7, 0x1f81f8, 0x1f81ff,\n0x1f8e00, 0x1f8e07, 0x1f8e38, 0x1f8e3f, 0x1f8fc0, 0x1f8fc7, 0x1f8ff8, 0x1f8fff,\n0x1ff000, 0x1ff007, 0x1ff038, 0x1ff03f, 0x1ff1c0, 0x1ff1c7, 0x1ff1f8, 0x1ff1ff,\n0x1ffe00, 0x1ffe07, 0x1ffe38, 0x1ffe3f, 0x1fffc0, 0x1fffc7, 0x1ffff8, 0x1fffff,\n0xe00000, 0xe00007, 0xe00038, 0xe0003f, 0xe001c0, 0xe001c7, 0xe001f8, 0xe001ff,\n0xe00e00, 0xe00e07, 0xe00e38, 0xe00e3f, 0xe00fc0, 0xe00fc7, 0xe00ff8, 0xe00fff,\n0xe07000, 0xe07007, 0xe07038, 0xe0703f, 0xe071c0, 0xe071c7, 0xe071f8, 0xe071ff,\n0xe07e00, 0xe07e07, 0xe07e38, 0xe07e3f, 0xe07fc0, 0xe07fc7, 0xe07ff8, 0xe07fff,\n0xe38000, 0xe38007, 0xe38038, 0xe3803f, 0xe381c0, 0xe381c7, 0xe381f8, 0xe381ff,\n0xe38e00, 0xe38e07, 0xe38e38, 0xe38e3f, 0xe38fc0, 0xe38fc7, 0xe38ff8, 0xe38fff,\n0xe3f000, 0xe3f007, 0xe3f038, 0xe3f03f, 0xe3f1c0, 0xe3f1c7, 0xe3f1f8, 0xe3f1ff,\n0xe3fe00, 0xe3fe07, 0xe3fe38, 0xe3fe3f, 0xe3ffc0, 0xe3ffc7, 0xe3fff8, 0xe3ffff,\n0xfc0000, 0xfc0007, 0xfc0038, 0xfc003f, 0xfc01c0, 0xfc01c7, 0xfc01f8, 0xfc01ff,\n0xfc0e00, 0xfc0e07, 0xfc0e38, 0xfc0e3f, 0xfc0fc0, 0xfc0fc7, 0xfc0ff8, 0xfc0fff,\n0xfc7000, 0xfc7007, 0xfc7038, 0xfc703f, 0xfc71c0, 0xfc71c7, 0xfc71f8, 0xfc71ff,\n0xfc7e00, 0xfc7e07, 0xfc7e38, 0xfc7e3f, 0xfc7fc0, 0xfc7fc7, 0xfc7ff8, 0xfc7fff,\n0xff8000, 0xff8007, 0xff8038, 0xff803f, 0xff81c0, 0xff81c7, 0xff81f8, 0xff81ff,\n0xff8e00, 0xff8e07, 0xff8e38, 0xff8e3f, 0xff8fc0, 0xff8fc7, 0xff8ff8, 0xff8fff,\n0xfff000, 0xfff007, 0xfff038, 0xfff03f, 0xfff1c0, 0xfff1c7, 0xfff1f8, 0xfff1ff,\n0xfffe00, 0xfffe07, 0xfffe38, 0xfffe3f, 0xffffc0, 0xffffc7, 0xfffff8, 0xffffff,\n};\n</code></pre>\n\n<p>I've tried looping through the byte array using the LUT to memcpy the first 3 bytes to the new array. However my output never looks correct.</p>\n\n<p>Does anyone have any suggestions on how to efficiently implement this? This will be running on an embedded ARM processor.</p>\n\n<h2>Edit</h2>\n\n<p>LUT test</p>\n\n<pre><code>uint8_t msg[] = { 0xaa, 0x02, 0x43, 0x5a, 0x8d, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xd0, 0x84, 0xc6, 0x2d, 0x00, 0xb9 };\n\nuint8_t expanded_msg[63] = { 0 };\nuint8_t tmp_val = 0;\nuint32_t lut_val;\nfor (int i = 0; i &lt; 21; i++)\n{\n    tmp_val = *(uint8_t*)(&amp;msg + i);\n    lut_val = bitExpandTable[tmp_val];\n    memcpy(&amp;expanded_msg[(i * 3)], &amp;lut_val, 3);\n}\n\nprint_binary(&amp;msg, 21);\nprint_binary(&amp;expanded_msg, sizeof(expanded_msg));\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>[ 10101010 00000010 01000011 01011010 10001101 00000110 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 11010000 10000100 11000110 00101101 00000000 10111001 ]\n\n[ 00111000 10001110 11100011 00000000 00000000 00000000 11000111 10001111 00000011 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000111 01110000 00011100 00000111 11110000 00000011 11111111 11111111 00011111 11000111 11110001 11100011 00000000 00000000 00000000 11111111 11111111 11111111 11000000 10000001 11100011 00000000 00000000 00000000 00000111 01110000 00011100 00111000 10000000 00011111 11111111 11111111 00011111 11000111 11110001 11100011 00000000 00000000 00000000 11111111 11111111 11111111 ]\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 250, "user_id": 5937424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5870a99ee03e4af8fd990722adfb0149?s=128&d=identicon&r=PG&f=1", "display_name": "Careful Now", "link": "https://stackoverflow.com/users/5937424/careful-now"}, "edited": false, "score": 6, "creation_date": 1456348961, "post_id": 35613359, "comment_id": 58910545, "body": "You could use preprocessor statements like #ifndef for if not defined."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1456349248, "post_id": 35613359, "comment_id": 58910704, "body": "If <code>first_header.h</code> and <code>second_header.h</code> have include guards, there should be no problem.  In the <code>mainfile.cpp</code>, the compiler will open up <code>fileB.h</code> then open <code>first_header.h</code>, realize that the include header definition is defined and ignore everything in the file."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1456360333, "post_id": 35613359, "comment_id": 58915457, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> . You have not shown first_header.h nor second_header.h  nor stated that they have (or not) their own guards."}], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 3230735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d19a26eaa714375b218f4137314a9f?s=128&d=identicon&r=PG&f=1", "display_name": "alduin", "link": "https://stackoverflow.com/users/3230735/alduin"}, "edited": false, "score": 0, "creation_date": 1456417265, "post_id": 35613488, "comment_id": 58947037, "body": "This helped further my understanding of header guards. Thank you."}], "tags": [], "owner": {"reputation": 852, "user_id": 821332, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/839b283006c603d5e7661d0040559fa9?s=128&d=identicon&r=PG", "display_name": "Vikyboss", "link": "https://stackoverflow.com/users/821332/vikyboss"}, "is_accepted": false, "score": 2, "last_activity_date": 1456349682, "last_edit_date": 1456349682, "creation_date": 1456349233, "answer_id": 35613488, "question_id": 35613359, "link": "https://stackoverflow.com/questions/35613359/basic-c-redefinition-error/35613488#35613488", "title": "Basic C++ Redefinition Error", "body": "<p><strong>Logic:</strong>\nCheck if specific macro is defined, if the macro is not defined, define it and include the content of the header file. This will prevent from duplicated inclusion of the header content.</p>\n\n<p>Like this:</p>\n\n<p>file A:</p>\n\n<pre><code>#ifndef fileA_h\n#define fileA_h\n\n#include first_header.h\n#include second_header.h\n\n//code here\n\n#endif\n</code></pre>\n\n<p>file B:</p>\n\n<pre><code>#ifndef fileB_h\n#define fileB_h\n\n#include first_header.h\n#include second_header.h\n\n//code here\n\n#endif\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 307, "user_id": 3230735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d19a26eaa714375b218f4137314a9f?s=128&d=identicon&r=PG&f=1", "display_name": "alduin", "link": "https://stackoverflow.com/users/3230735/alduin"}, "edited": false, "score": 0, "creation_date": 1456417219, "post_id": 35613592, "comment_id": 58946998, "body": "Thank you. This was very informative. I&#39;m still quite new to this."}, {"owner": {"reputation": 796, "user_id": 3124459, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P0T9Y.jpg?s=128&g=1", "display_name": "Dovahkiin", "link": "https://stackoverflow.com/users/3124459/dovahkiin"}, "reply_to_user": {"reputation": 307, "user_id": 3230735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d19a26eaa714375b218f4137314a9f?s=128&d=identicon&r=PG&f=1", "display_name": "alduin", "link": "https://stackoverflow.com/users/3230735/alduin"}, "edited": false, "score": 0, "creation_date": 1456524823, "post_id": 35613592, "comment_id": 59005623, "body": "@alduin Check out this article on cplusplus.com, it&#39;s very informative, and where I learned about include guards when I started out programming: <a href=\"http://www.cplusplus.com/articles/Gw6AC542/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/articles/Gw6AC542/</a> Best of luck!"}], "tags": [], "owner": {"reputation": 796, "user_id": 3124459, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/P0T9Y.jpg?s=128&g=1", "display_name": "Dovahkiin", "link": "https://stackoverflow.com/users/3124459/dovahkiin"}, "is_accepted": true, "score": 2, "last_activity_date": 1456350267, "last_edit_date": 1456350267, "creation_date": 1456349624, "answer_id": 35613592, "question_id": 35613359, "link": "https://stackoverflow.com/questions/35613359/basic-c-redefinition-error/35613592#35613592", "title": "Basic C++ Redefinition Error", "body": "<p>First of all, you need to put either quotes or angle brackets around the filenames, like this:\n<code>#include &lt;fileA.h&gt;</code>\nor\n<code>#include \"fileA.h\"</code></p>\n\n<p>From what you've posted, it looks like you don't really understand how header guards work. So here's the rundown.</p>\n\n<p>Let's say I have a function that I want to be able to call from different c++ files. You first need a header file. (You can do includes from inside your include guard.)</p>\n\n<pre><code>#ifndef MYHEADER_HPP\n#define MYHEADER_HPP\n\n#include \"first_header.h\"\n#include \"second_header.h\"\n\nvoid MyFunction();\n\n#endif\n</code></pre>\n\n<p>The non-include preprocessor lines make up what is called an \"Include Guard,\" and you should always guard your header files.</p>\n\n<p>You then implement said function in a .cpp file, like this:</p>\n\n<pre><code>#include \"MyHeader.hpp\"\n\nvoid MyFunction()\n{\n    // Implementation goes here\n}\n</code></pre>\n\n<p>Now, you can use this function in other code:</p>\n\n<pre><code>#include \"MyHeader.hpp\"\n\nint main()\n{\n    MyFunction();\n}\n</code></pre>\n\n<p>If you're using an IDE compiling and linking is handled for you, but just in case, you can compile and link like this using g++ (assuming a \"main.cpp\" file and a \"MyFunction.cpp\" file):</p>\n\n<pre><code>g++ main.cpp -c\ng++ MyFunction.cpp -c\ng++ main.o MyFunction.o -o MyExecutable\n</code></pre>\n\n<p>I hope this helps and good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1456381852, "post_id": 35614208, "comment_id": 58922482, "body": "Few problems with this answer. 1. It&#39;s more of a comment. 2. #pragma once is an include guard. 3. I can think of several prominent compilers that don&#39;t support #pragma once, and the thing with  pragmas is they  are often silently ignored when not supported. Make certain your compiler supports it before investing much in a pragma."}, {"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1456422874, "post_id": 35614208, "comment_id": 58951042, "body": "1. You are right @user4581301. Completely agree. 2. Just wanted to mention, that &quot;#pragma once&quot; also exists. Because it was not mentioned, yet. It was more to tell the OP what it means if he encounters it in other peoples code than to propose to use it. 3. First wanted to mention it as a comment, but Stackoverflow didn&#39;t allow me to write a comment, therefore I put it into an &quot;answer&quot;."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1456424135, "post_id": 35614208, "comment_id": 58951801, "body": "Much more answer-like. I recommend dropping the last line of the first paragraph because it&#39;s not legacy. <code>once</code> is probably the way of the future, as soon as a few bugs and portability issues are resolved."}, {"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1456431533, "post_id": 35614208, "comment_id": 58956405, "body": "@user4581301 I didn&#39;t say &quot;it&#39;s legacy&quot;, I said it&#39;s used more often &quot;in legacy code&quot; (especially in VS code, maybe because MS supported it earlier than e.g. GCC did), that&#39;s a difference. What do you mean by &quot;answer-like&quot;? What do you miss? I think the other part of the question is already answered in the other answers, so consider mentioning of &quot;#pragma once&quot; just as an addition."}], "tags": [], "owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "is_accepted": false, "score": 1, "last_activity_date": 1456423201, "last_edit_date": 1456423201, "creation_date": 1456351840, "answer_id": 35614208, "question_id": 35613359, "link": "https://stackoverflow.com/questions/35613359/basic-c-redefinition-error/35614208#35614208", "title": "Basic C++ Redefinition Error", "body": "<p>Most compilers (e.g. Visual Studio) also support <strong><code>#pragma once</code></strong> which can be used instead of include guards expressed as \"#ifndef\". You will find that in some legacy code written with MS Visual C++.</p>\n\n<p>However, the </p>\n\n<pre><code>#ifndef MYHEADER_HPP\n#define MYHEADER_HPP\n\n// code here\n\n#endif\n</code></pre>\n\n<p>is more portable.</p>\n"}], "owner": {"reputation": 307, "user_id": 3230735, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d19a26eaa714375b218f4137314a9f?s=128&d=identicon&r=PG&f=1", "display_name": "alduin", "link": "https://stackoverflow.com/users/3230735/alduin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 35613592, "answer_count": 3, "score": 1, "last_activity_date": 1456423201, "creation_date": 1456348819, "question_id": 35613359, "link": "https://stackoverflow.com/questions/35613359/basic-c-redefinition-error", "title": "Basic C++ Redefinition Error", "body": "<p>I've been reading about header guards and and their use to solve redefinition errors, but I'm not quite sure how to implement it properly. Here's an simplified example of what I'm trying to do:</p>\n\n<p><strong>fileA.h</strong></p>\n\n<pre><code>#include first_header.h\n#include second_header.h\n\n// code here\n</code></pre>\n\n<p><strong>fileB.h</strong></p>\n\n<pre><code>#include first_header.h\n#include second_header.h\n\n// code here\n</code></pre>\n\n<p><strong>mainfile.cpp</strong></p>\n\n<pre><code>#include fileA.h\n#include fileB.h\n\n// code here\n</code></pre>\n\n<p>Now the problem comes in the mainfile.cpp since I need to include both the fileA.h and fileB.h headers, but each of these contains the same header references thus giving me the redefinition error. I'm not really sure how to get around it or implement the header guards properly in this scenario.</p>\n"}, {"tags": ["c++", "qt", "qgraphicsscene"], "comments": [{"owner": {"reputation": 2082, "user_id": 5849470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270b9a87f8f1cba83d545b6e601337ea?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jordan", "link": "https://stackoverflow.com/users/5849470/matt-jordan"}, "edited": false, "score": 0, "creation_date": 1456352116, "post_id": 35613183, "comment_id": 58912313, "body": "Freeze for how long?  One second?  One hour?"}, {"owner": {"reputation": 41, "user_id": 3444737, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/a6d197b492d41edd4e01f696b0bab8cb?s=128&d=identicon&r=PG&f=1", "display_name": "user3444737", "link": "https://stackoverflow.com/users/3444737/user3444737"}, "reply_to_user": {"reputation": 2082, "user_id": 5849470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270b9a87f8f1cba83d545b6e601337ea?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jordan", "link": "https://stackoverflow.com/users/5849470/matt-jordan"}, "edited": false, "score": 0, "creation_date": 1456362026, "post_id": 35613183, "comment_id": 58915960, "body": "freeze about 20 seconds for this uploaded pic with no other items on scene. But I need pixmaps about 5000x5000 or even 10000x10000 and more. At least, user have to has this opportunity (yes, if he has enough memory ;) )"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3444737, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/a6d197b492d41edd4e01f696b0bab8cb?s=128&d=identicon&r=PG&f=1", "display_name": "user3444737", "link": "https://stackoverflow.com/users/3444737/user3444737"}, "edited": false, "score": 0, "creation_date": 1456362295, "post_id": 35614505, "comment_id": 58916034, "body": "No, image loads from disk normaly, with usually expected delay.. Not immidiately of course. Depends by size. Problem exactly with adding big but transparent image to QGraphicsScene."}, {"owner": {"reputation": 1237, "user_id": 2809097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18071242822f897e03cde436113a4e85?s=128&d=identicon&r=PG&f=1", "display_name": "Jarra McIntyre", "link": "https://stackoverflow.com/users/2809097/jarra-mcintyre"}, "reply_to_user": {"reputation": 41, "user_id": 3444737, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/a6d197b492d41edd4e01f696b0bab8cb?s=128&d=identicon&r=PG&f=1", "display_name": "user3444737", "link": "https://stackoverflow.com/users/3444737/user3444737"}, "edited": false, "score": 0, "creation_date": 1456363554, "post_id": 35614505, "comment_id": 58916399, "body": "Have you timed the operations to precisely determine where the delays are occurring? In particular I would time: imgOrd.load(), QPixmap::fromImage(imgOrig), itm-&gt;setPixmap(), ui.graphicsView-&gt;scen()-&gt;addItem(itm) and ui.graphicsView-&gt;scene()-&gt;setSceneRect(imgOrig.rect())"}, {"owner": {"reputation": 41, "user_id": 3444737, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/a6d197b492d41edd4e01f696b0bab8cb?s=128&d=identicon&r=PG&f=1", "display_name": "user3444737", "link": "https://stackoverflow.com/users/3444737/user3444737"}, "edited": false, "score": 0, "creation_date": 1456364063, "post_id": 35614505, "comment_id": 58916538, "body": "Delay occuring right after any first click on scene after inserting this strange item. Initially I can click any buttons, resize or do any other things with interface if only not toch aera inside graphicsview. When click there for first time then starts some Qt&#39;s magic. When magic completed all becomes good again."}, {"owner": {"reputation": 1237, "user_id": 2809097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18071242822f897e03cde436113a4e85?s=128&d=identicon&r=PG&f=1", "display_name": "Jarra McIntyre", "link": "https://stackoverflow.com/users/2809097/jarra-mcintyre"}, "reply_to_user": {"reputation": 41, "user_id": 3444737, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/a6d197b492d41edd4e01f696b0bab8cb?s=128&d=identicon&r=PG&f=1", "display_name": "user3444737", "link": "https://stackoverflow.com/users/3444737/user3444737"}, "edited": false, "score": 0, "creation_date": 1456366319, "post_id": 35614505, "comment_id": 58917151, "body": "So the delay doesn&#39;t occur in on_pushButton_clicked()? You can add the image but later on when you click the graphic itself there is a delay?"}, {"owner": {"reputation": 41, "user_id": 3444737, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/a6d197b492d41edd4e01f696b0bab8cb?s=128&d=identicon&r=PG&f=1", "display_name": "user3444737", "link": "https://stackoverflow.com/users/3444737/user3444737"}, "edited": false, "score": 0, "creation_date": 1456385973, "post_id": 35614505, "comment_id": 58924525, "body": "Yes, only after click. I think it is something about indexing items to detect selection. If i add some alpha to transparent areas even image still look transparent but for computer it becomes big solid rectangle, not graph of single dots. I can&#39;t select anything under borders-image but no delays. Well, i invent how to not use separate item only for borders. Thanks for your attention)"}], "tags": [], "owner": {"reputation": 1237, "user_id": 2809097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18071242822f897e03cde436113a4e85?s=128&d=identicon&r=PG&f=1", "display_name": "Jarra McIntyre", "link": "https://stackoverflow.com/users/2809097/jarra-mcintyre"}, "is_accepted": false, "score": 0, "last_activity_date": 1456353216, "last_edit_date": 1456353216, "creation_date": 1456352904, "answer_id": 35614505, "question_id": 35613183, "link": "https://stackoverflow.com/questions/35613183/qgraphicsscene-app-hangs-for-a-long-when-adding-big-transparent-pixmap-with-sm/35614505#35614505", "title": "QGraphicsScene - App hangs for a long when adding big transparent pixmap with small amount of opaque dots", "body": "<p>Can you background load your image? You're reading from disk and then processing the image into whatever format QT uses internally on the UI thread, so it's not particularly surprising that the application becomes unresponsive for larger images.</p>\n"}], "owner": {"reputation": 41, "user_id": 3444737, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/a6d197b492d41edd4e01f696b0bab8cb?s=128&d=identicon&r=PG&f=1", "display_name": "user3444737", "link": "https://stackoverflow.com/users/3444737/user3444737"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456353216, "creation_date": 1456348251, "question_id": 35613183, "link": "https://stackoverflow.com/questions/35613183/qgraphicsscene-app-hangs-for-a-long-when-adding-big-transparent-pixmap-with-sm", "title": "QGraphicsScene - App hangs for a long when adding big transparent pixmap with small amount of opaque dots", "body": "<p>When I add QGraphicsPixmapItem to scene and after first mouse click program freeze for long. Why? Or how i can exclude this from Qt's inner computations (if only i know what happens behind..)</p>\n\n<p>*.h</p>\n\n<pre><code>#include &lt;QtWidgets/QMainWindow&gt;\n#include \"ui_bigqgraphicsscene.h\"\n\nclass BigQGraphicsScene : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    BigQGraphicsScene(QWidget *parent = 0);\n    ~BigQGraphicsScene();\n\nprivate slots:\n    void on_pushButton_clicked();\n\nprivate:\n    Ui::BigQGraphicsSceneClass ui;\n\n    QImage imgOrig;\n};\n</code></pre>\n\n<p>*.cpp</p>\n\n<pre><code>#include \"bigqgraphicsscene.h\"\n#include &lt;QFileDialog&gt;\n#include &lt;QSet&gt;\n#include &lt;QDebug&gt;\n#include &lt;QGraphicsPixmapItem&gt;\n\nBigQGraphicsScene::BigQGraphicsScene(QWidget *parent)\n    : QMainWindow(parent)\n{\n    ui.setupUi(this);\n    ui.graphicsView-&gt;setScene(new QGraphicsScene());\n}\n\nBigQGraphicsScene::~BigQGraphicsScene(){}\n\nvoid BigQGraphicsScene::on_pushButton_clicked()\n{\n    QString s = \"d:/!Qt/ImageNumber/BigQGraphicsScene/TestPic/fastole_bdr.png\";\n\n    if (s.length())\n    {\n        imgOrig.load(s);        \n       QGraphicsPixmapItem *itm = new QGraphicsPixmapItem();\n\n       itm-&gt;setPixmap(QPixmap::fromImage(imgOrig));\n\n        ui.graphicsView-&gt;scene()-&gt;setItemIndexMethod(QGraphicsScene::NoIndex);\n       ui.graphicsView-&gt;scene()-&gt;addItem(itm);\n\n       ui.graphicsView-&gt;scene()-&gt;setSceneRect( imgOrig.rect() );\n    }\n}\n</code></pre>\n\n<p><code>scene()-&gt;setItemIndexMethod(QGraphicsScene::NoIndex);</code> - not help...</p>\n\n<p>almost transparent pix for example - <a href=\"http://i.stack.imgur.com/OnwgR.png\" rel=\"nofollow\">fastole_bdr.png</a></p>\n"}, {"tags": ["c++", "xcode", "macos", "gcc"], "comments": [{"owner": {"reputation": 250, "user_id": 5937424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5870a99ee03e4af8fd990722adfb0149?s=128&d=identicon&r=PG&f=1", "display_name": "Careful Now", "link": "https://stackoverflow.com/users/5937424/careful-now"}, "edited": false, "score": 1, "creation_date": 1456349850, "post_id": 35613114, "comment_id": 58911035, "body": "Well try delete the reference to clang first. Any reference to another compiler is not going to sit well with your compiler."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1456351506, "post_id": 35613114, "comment_id": 58911971, "body": "Looks like the <code>-std=c++11</code> flag is not being passed to the compiler. Is there a place to add compiler flags?"}, {"owner": {"reputation": 2071, "user_id": 1567205, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b992b962d4271e53116da769c84eb4e7?s=128&d=identicon&r=PG", "display_name": "JavaRunner", "link": "https://stackoverflow.com/users/1567205/javarunner"}, "reply_to_user": {"reputation": 250, "user_id": 5937424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5870a99ee03e4af8fd990722adfb0149?s=128&d=identicon&r=PG&f=1", "display_name": "Careful Now", "link": "https://stackoverflow.com/users/5937424/careful-now"}, "edited": false, "score": 0, "creation_date": 1456354401, "post_id": 35613114, "comment_id": 58913374, "body": "@CarefulNow, finally I removed that option but nothing changes. It still doesn&#39;t work."}, {"owner": {"reputation": 2071, "user_id": 1567205, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b992b962d4271e53116da769c84eb4e7?s=128&d=identicon&r=PG", "display_name": "JavaRunner", "link": "https://stackoverflow.com/users/1567205/javarunner"}, "edited": false, "score": 0, "creation_date": 1456358397, "post_id": 35613114, "comment_id": 58914828, "body": "Is there a chance to see the building command and GCC options with which Xcode trying to build my project?"}], "owner": {"reputation": 2071, "user_id": 1567205, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b992b962d4271e53116da769c84eb4e7?s=128&d=identicon&r=PG", "display_name": "JavaRunner", "link": "https://stackoverflow.com/users/1567205/javarunner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456354457, "creation_date": 1456348034, "last_edit_date": 1456354457, "question_id": 35613114, "link": "https://stackoverflow.com/questions/35613114/getting-cxx0x-warning-h-in-xcode-when-i-compile-code-with-gcc-5-3", "title": "Getting _CXX0X_WARNING_H in XCode when I compile code with GCC 5.3", "body": "<p>I use this Plugin in <code>XCode</code> for turning on <code>GCC 5.3</code>: <a href=\"https://github.com/hmazhar/xcode-gcc/blob/master/GCC%205.2.xcplugin/Contents/Resources/GCC%205.2.xcspec\" rel=\"nofollow\">https://github.com/hmazhar/xcode-gcc/blob/master/GCC%205.2.xcplugin/Contents/Resources/GCC%205.2.xcspec</a>\nI've replaced all 5.2 with 5.3 and have installed GCC 5.3 with brew on my OS X.</p>\n\n<p>Then I changed <code>Compiler for C/C++/Objective-C</code> to my <code>GCC 5.3</code> but when I try to compile <code>C++</code> code I get following message. Where should I change settings?</p>\n\n<pre><code>#ifndef _CXX0X_WARNING_H\n#define _CXX0X_WARNING_H 1\n\n#if __cplusplus &lt; 201103L\n#error This file requires compiler and library support for the \\\nISO C++ 2011 standard. This support is currently experimental, and must be \\\nenabled with the -std=c++11 or -std=gnu++11 compiler options.\n#endif\n\n#endif\n</code></pre>\n\n<p>Xcode 7.2, OS X El Captain 10.11.3, GCC 5.3.</p>\n\n<p><strong>Outdated:</strong> \n- it doesn't work.</p>\n\n<p><em>Following some articles to enabling GCC 4.5 I haven't done only this step:</em></p>\n\n<blockquote>\n  <p>2)In the project settings</p>\n  \n  <p>delete \u201cCLANG_CXX_LIBRARY\" row\n  I don't know to remove it. I should empty value of this variable or should I remove it entirely? Can it be the root of my problem?</p>\n</blockquote>\n"}, {"tags": ["c++", "pointers", "eigen"], "comments": [{"owner": {"reputation": 820, "user_id": 4884119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10202965102887716/picture?type=large", "display_name": "AchmadJP", "link": "https://stackoverflow.com/users/4884119/achmadjp"}, "edited": false, "score": 0, "creation_date": 1456347955, "post_id": 35612831, "comment_id": 58909998, "body": "have you tried it? it&#39;s seem right, did you find any error?"}], "answers": [{"comments": [{"owner": {"reputation": 330, "user_id": 5597960, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c1e468a7457760ba33852b0bbf3b326e?s=128&d=identicon&r=PG&f=1", "display_name": "anr", "link": "https://stackoverflow.com/users/5597960/anr"}, "edited": false, "score": 0, "creation_date": 1456414962, "post_id": 35614828, "comment_id": 58945138, "body": "About the edit: So, in the case that one passes a fixed-size matrix to a function taking a constant fixed-size matrix parameter, using Ref&lt;&gt; is really equivalent to a &quot;direct&quot; pass-by-reference, right? There shouldn&#39;t be any temporaries being evaluated (?)"}, {"owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1456426890, "post_id": 35614828, "comment_id": 58953602, "body": "If you use a non const Ref, then no temporary will occur. If one would be needed because of memory layout mismatch, then it won&#39;t compile. A const Ref, is like a c++ const reference, meaning that a temporary will be created if the memory layout don&#39;t match."}, {"owner": {"reputation": 1237, "user_id": 2809097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18071242822f897e03cde436113a4e85?s=128&d=identicon&r=PG&f=1", "display_name": "Jarra McIntyre", "link": "https://stackoverflow.com/users/2809097/jarra-mcintyre"}, "edited": false, "score": 0, "creation_date": 1456435189, "post_id": 35614828, "comment_id": 58958588, "body": "I think things got unclear there. According to the docs if necessary Ref <i>will</i> create a temporary object. A template expression <i>will</i> be evaluated into a temp. If it can though it will transparently reference rather than using a temporary.  const MyType&amp; has different more limited semantics than that. It won&#39;t for example convert a double Matrix into a float Matrix. The compiler <i>is</i> happy to evaluate a template expression to a temporary though (hence the constant reference)."}, {"owner": {"reputation": 1237, "user_id": 2809097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18071242822f897e03cde436113a4e85?s=128&d=identicon&r=PG&f=1", "display_name": "Jarra McIntyre", "link": "https://stackoverflow.com/users/2809097/jarra-mcintyre"}, "edited": false, "score": 0, "creation_date": 1456435327, "post_id": 35614828, "comment_id": 58958671, "body": "I think the takeaway is use templates or Ref for most flexibility. If you understand the caveats though const&amp; is also useable. Pointers are out though unless you want to manually force evaluation into a temporary matching your argument type exactly before taking the address."}, {"owner": {"reputation": 330, "user_id": 5597960, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c1e468a7457760ba33852b0bbf3b326e?s=128&d=identicon&r=PG&f=1", "display_name": "anr", "link": "https://stackoverflow.com/users/5597960/anr"}, "edited": false, "score": 0, "creation_date": 1456498930, "post_id": 35614828, "comment_id": 58990411, "body": "I am wondering if this deserves to be discussed on a separate question. My question has been answered. However, it seems like there are cases where a Ref parameter is equivalent to a &amp; parameter for some specific arguments..."}, {"owner": {"reputation": 330, "user_id": 5597960, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c1e468a7457760ba33852b0bbf3b326e?s=128&d=identicon&r=PG&f=1", "display_name": "anr", "link": "https://stackoverflow.com/users/5597960/anr"}, "edited": false, "score": 1, "creation_date": 1456499499, "post_id": 35614828, "comment_id": 58990798, "body": "For instance, think about a case where the argument WILL always be Matrix2d. It seems to me that the fun parameter can then be (read-only)={const Matrix2d&amp;, const Ref&lt;const Matrix2d&gt;}, (writeable)={ Matrix2d&amp;, Matrix2d*, Ref&lt;Matrix2d&gt;}.  My understanding is that in the cases where &amp; or Ref&lt;&gt; is used, for this particular scenario no temporaries will occur (b/c of what ggael said, there no memory layout mismatch). In such case, there is really no difference between Ref and &amp;."}, {"owner": {"reputation": 1237, "user_id": 2809097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18071242822f897e03cde436113a4e85?s=128&d=identicon&r=PG&f=1", "display_name": "Jarra McIntyre", "link": "https://stackoverflow.com/users/2809097/jarra-mcintyre"}, "edited": false, "score": 0, "creation_date": 1456526638, "post_id": 35614828, "comment_id": 59006345, "body": "I think you&#39;re exactly right there. If you can guarantee you will always have a Matrix2d then you can reference it / take its address without issue."}], "tags": [], "owner": {"reputation": 1237, "user_id": 2809097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18071242822f897e03cde436113a4e85?s=128&d=identicon&r=PG&f=1", "display_name": "Jarra McIntyre", "link": "https://stackoverflow.com/users/2809097/jarra-mcintyre"}, "is_accepted": true, "score": 1, "last_activity_date": 1456354537, "last_edit_date": 1456354537, "creation_date": 1456354187, "answer_id": 35614828, "question_id": 35612831, "link": "https://stackoverflow.com/questions/35612831/eigenref-in-pass-by-pointer/35614828#35614828", "title": "Eigen::Ref in pass-by-pointer", "body": "<p>I think the basic idea is <em>not</em> to use pointers or references directly. Eigen uses template expressions to represent calculations. This means the type changes depending on the expression used to calculate the matrix, and expressions are potentially carried around unevaluated. </p>\n\n<p>If necessary Ref will evaluate the template expression into a temporary object matching the memory layout you requested to pass as an argument. If the memory layout of your argument matches the memory layout required by your parameter, Ref will act as a transparent reference.</p>\n\n<p>Borrowing directly from the documentation: Your input parameters should be declared constant, while non-const parameters can be used as output parameters.</p>\n\n<pre><code>void cov(const Ref&lt;const MatrixXf&gt; x, Ref&lt;MatrixXf&gt; C)\n{\n   ...\n   C = ...; // Your return value here\n}\n</code></pre>\n\n<p>If you read from and write to a matrix, the parameter should also obviously be non-const.</p>\n\n<p>For optional parameters you could use a pointer to a Ref.</p>\n\n<p>Edit: The documentation does note that you can use constant references directly to pass parameters. This only works because the compiler is happy to convert temporary objects to const-references. It will not work for pointers.</p>\n"}], "owner": {"reputation": 330, "user_id": 5597960, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c1e468a7457760ba33852b0bbf3b326e?s=128&d=identicon&r=PG&f=1", "display_name": "anr", "link": "https://stackoverflow.com/users/5597960/anr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2094, "favorite_count": 1, "accepted_answer_id": 35614828, "answer_count": 1, "score": 2, "last_activity_date": 1456354537, "creation_date": 1456347088, "last_edit_date": 1495542204, "question_id": 35612831, "link": "https://stackoverflow.com/questions/35612831/eigenref-in-pass-by-pointer", "title": "Eigen::Ref in pass-by-pointer", "body": "<p>Similar to question <a href=\"https://stackoverflow.com/questions/17030332/pointer-vs-reference-difference-when-passing-eigen-objects-as-arguments\">Pointer vs Reference difference when passing Eigen objects as arguments</a></p>\n\n<p>Let's say we have foo1 and matrix mat2by2:</p>\n\n<pre><code>void foo1(MatrixXd&amp; container){\n    //...container matrix is modified here\n}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>Matrix33d mat2by2;\nmat2by2 &lt;&lt; 1,2,\n           3,4;\n</code></pre>\n\n<p>After reading <a href=\"http://eigen.tuxfamily.org/dox/TopicFunctionTakingEigenTypes.html\" rel=\"nofollow noreferrer\">http://eigen.tuxfamily.org/dox/TopicFunctionTakingEigenTypes.html</a>, it seems like a better alternative to foo1 may be:</p>\n\n<pre><code>void foo2(Ref&lt;MatrixXd&gt; container){\n    //...container matrix is modified here\n}\n</code></pre>\n\n<p>If foo2's parameter is being passed as a reference, \nwhat would be the equivalent to pass-by-pointer using the Eigen::Ref class??</p>\n\n<pre><code>void foo(Eigen::MatrixXd* container){\n    //...container matrix is modified here\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "qt", "cmake", "bundle"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5164080"}, "edited": false, "score": 0, "creation_date": 1485042539, "post_id": 35612687, "comment_id": 70761510, "body": "I&#39;m also looking for the answer. Did you manage to sort this out? Everything I find is either from the previous epoch or poorly described and doesn&#39;t show the thing."}, {"owner": {"reputation": 437, "user_id": 4936966, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-USKRY9PSlj8/AAAAAAAAAAI/AAAAAAAAAKA/bjujPNSYWRg/photo.jpg?sz=128", "display_name": "Oleh Pomazan", "link": "https://stackoverflow.com/users/4936966/oleh-pomazan"}, "edited": false, "score": 0, "creation_date": 1485173962, "post_id": 35612687, "comment_id": 70799936, "body": "@light2yellow no, I don&#39;t use BundleUtilities, instead I use macdeployqt and copy necessary files using cmake on install step and make package using Packages. It works."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5164080"}, "edited": false, "score": 1, "creation_date": 1485181885, "post_id": 35612687, "comment_id": 70805383, "body": "Anyway I&#39;ve found a good example. Take a look at avogadro or other kitware projects."}], "answers": [{"comments": [{"owner": {"reputation": 3189, "user_id": 2397253, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CLLjm.png?s=128&g=1", "display_name": "oarfish", "link": "https://stackoverflow.com/users/2397253/oarfish"}, "edited": false, "score": 0, "creation_date": 1606233364, "post_id": 48035834, "comment_id": 114898352, "body": "This still seems to produce the common error <code>Install or copy the item into the bundle before calling fixup_bundle.</code>  for <code>${PROJECT_NAME}.app&#47;Contents&#47;PlugIns&#47;platforms&#47;libqcocoa.dyl&zwnj;&#8203;ib&#39;</code>."}, {"owner": {"reputation": 3189, "user_id": 2397253, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/CLLjm.png?s=128&g=1", "display_name": "oarfish", "link": "https://stackoverflow.com/users/2397253/oarfish"}, "edited": false, "score": 0, "creation_date": 1606235322, "post_id": 48035834, "comment_id": 114899382, "body": "Is it intentional that the path in <code>qt.conf</code> is empty since <code>_qt_plugin_dir</code> is not defined?"}], "tags": [], "owner": {"reputation": 1743, "user_id": 2192832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2217d886c1805ab7398ffefb379ff71?s=128&d=identicon&r=PG", "display_name": "ivan_onys", "link": "https://stackoverflow.com/users/2192832/ivan-onys"}, "is_accepted": true, "score": 4, "last_activity_date": 1606667105, "last_edit_date": 1606667105, "creation_date": 1514651786, "answer_id": 48035834, "question_id": 35612687, "link": "https://stackoverflow.com/questions/35612687/cmake-macos-x-bundle-with-bundleutiliies-for-qt-application/48035834#48035834", "title": "CMake MacOS X bundle with BundleUtiliies for Qt application", "body": "<p>Add the code below to <code>CMakeLists.txt</code>. The most challenging thing is to figure out, what plugins do you need, find their names and then properly specify paths for BundleUtilities' <code>fixup_bundle()</code>.</p>\n<p><code>install_qt5_plugin()</code> macro locates plugin by name. It will only find plugin for Qt module already found. In this case Qt5::QCocoaIntegrationPlugin is plugin in Qt5Gui module, which is found as dependency for Qt5Widgets by <code>find_package(Qt5 COMPONENTS Widgets REQUIRED)</code>. Macro generates install() command for plugin and calculates full path to installed plugin. The latter we'll pass (see <code>QT_PLUGIN</code> variable) to <code>fixup_bundle()</code>.</p>\n<p>Notes:</p>\n<ol>\n<li>We create and install <code>qt.conf</code> file, so plugin can be found, when application starts.</li>\n<li><code>APPS</code> variable specifies path to bundle, not to executable inside it.</li>\n<li>Filling <code>DIRS</code> is very important. Note, how it uses CMAKE_PREFIX_PATH.</li>\n<li>Printing <code>APPS</code>, <code>QT_PLUGINS</code> and <code>DIRS</code> is optional yet very useful.</li>\n<li>One should manually copy/install only those dynamic libraries (including plugins), that aren't referenced from app. Qt platform plugin is such dynamic library.</li>\n</ol>\n<p>Dependencies lookup and fixing happens on installation. To get relocatable bundle in necessary location one may configure with CMAKE_INSTALL_PREFIX pointing to that location and then build <code>install</code> target.</p>\n<p>I prefer creating .dmg file with</p>\n<pre><code>mkdir build\ncd build\ncmake ..\ncpack -G DragNDrop\n</code></pre>\n<p>Contents to add to CMakeLists.txt is from <a href=\"https://github.com/ionyshch/cmake-qt5widgets-macos/blob/master/CMakeLists.txt\" rel=\"nofollow noreferrer\">here</a>:</p>\n<pre><code>set(prefix &quot;${PROJECT_NAME}.app/Contents&quot;)\nset(INSTALL_RUNTIME_DIR &quot;${prefix}/MacOS&quot;)\nset(INSTALL_CMAKE_DIR &quot;${prefix}/Resources&quot;)\n\n# based on code from CMakes QtDialog/CMakeLists.txt\nmacro(install_qt5_plugin _qt_plugin_name _qt_plugins_var _prefix)\n    get_target_property(_qt_plugin_path &quot;${_qt_plugin_name}&quot; LOCATION)\n    if(EXISTS &quot;${_qt_plugin_path}&quot;)\n        get_filename_component(_qt_plugin_file &quot;${_qt_plugin_path}&quot; NAME)\n        get_filename_component(_qt_plugin_type &quot;${_qt_plugin_path}&quot; PATH)\n        get_filename_component(_qt_plugin_type &quot;${_qt_plugin_type}&quot; NAME)\n        set(_qt_plugin_dest &quot;${_prefix}/PlugIns/${_qt_plugin_type}&quot;)\n        install(FILES &quot;${_qt_plugin_path}&quot;\n            DESTINATION &quot;${_qt_plugin_dest}&quot;)\n        set(${_qt_plugins_var}\n            &quot;${${_qt_plugins_var}};\\$ENV{DEST_DIR}\\${CMAKE_INSTALL_PREFIX}/${_qt_plugin_dest}/${_qt_plugin_file}&quot;)\n    else()\n        message(FATAL_ERROR &quot;QT plugin ${_qt_plugin_name} not found&quot;)\n    endif()\nendmacro()\n\ninstall_qt5_plugin(&quot;Qt5::QCocoaIntegrationPlugin&quot; QT_PLUGINS ${prefix})\nfile(WRITE &quot;${CMAKE_CURRENT_BINARY_DIR}/qt.conf&quot;\n    &quot;[Paths]\\nPlugins = ${_qt_plugin_dir}\\n&quot;)\ninstall(FILES &quot;${CMAKE_CURRENT_BINARY_DIR}/qt.conf&quot;\n    DESTINATION &quot;${INSTALL_CMAKE_DIR}&quot;)\n\n# Destination paths below are relative to ${CMAKE_INSTALL_PREFIX}\ninstall(TARGETS ${PROJECT_NAME}\n    BUNDLE DESTINATION . COMPONENT Runtime\n    RUNTIME DESTINATION ${INSTALL_RUNTIME_DIR} COMPONENT Runtime\n    )\n\n# Note Mac specific extension .app\nset(APPS &quot;\\$ENV{DESTDIR}\\${CMAKE_INSTALL_PREFIX}/${PROJECT_NAME}.app&quot;)\n\n# Directories to look for dependencies\nset(DIRS &quot;${CMAKE_BINARY_DIR}&quot;)\n\n# Path used for searching by FIND_XXX(), with appropriate suffixes added\nif(CMAKE_PREFIX_PATH)\n    foreach(dir ${CMAKE_PREFIX_PATH})\n        list(APPEND DIRS &quot;${dir}/bin&quot; &quot;${dir}/lib&quot;)\n    endforeach()\nendif()\n\n# Append Qt's lib folder which is two levels above Qt5Widgets_DIR\nlist(APPEND DIRS &quot;${Qt5Widgets_DIR}/../..&quot;)\n\ninclude(InstallRequiredSystemLibraries)\n\nmessage(STATUS &quot;APPS: ${APPS}&quot;)\nmessage(STATUS &quot;QT_PLUGINS: ${QT_PLUGINS}&quot;)\nmessage(STATUS &quot;DIRS: ${DIRS}&quot;)\n\ninstall(CODE &quot;include(BundleUtilities)\n    fixup_bundle(\\&quot;${APPS}\\&quot; \\&quot;${QT_PLUGINS}\\&quot; \\&quot;${DIRS}\\&quot;)&quot;)\n\nset(CPACK_GENERATOR &quot;DRAGNDROP&quot;)\ninclude(CPack)\n</code></pre>\n"}], "owner": {"reputation": 437, "user_id": 4936966, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-USKRY9PSlj8/AAAAAAAAAAI/AAAAAAAAAKA/bjujPNSYWRg/photo.jpg?sz=128", "display_name": "Oleh Pomazan", "link": "https://stackoverflow.com/users/4936966/oleh-pomazan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4187, "favorite_count": 3, "accepted_answer_id": 48035834, "answer_count": 1, "score": 7, "last_activity_date": 1606667105, "creation_date": 1456346610, "last_edit_date": 1456346954, "question_id": 35612687, "link": "https://stackoverflow.com/questions/35612687/cmake-macos-x-bundle-with-bundleutiliies-for-qt-application", "title": "CMake MacOS X bundle with BundleUtiliies for Qt application", "body": "<p>I am a CMake beginner and have an issue with creation of an Qt application bundle for MacOS X. Let's consider a simple widget \"helloworld\" app in only one <code>main.cpp</code> file.</p>\n\n<pre><code>// main.cpp\n#include &lt;QApplication&gt;\n#include &lt;QLabel&gt;\n\nint main(int argc, char** argv)\n{\n    QApplication app(argc,argv);\n    QLabel lbl(\"Hello\");\n    lbl.show();\n    return app.exec();\n}\n</code></pre>\n\n<p>The <code>CMakeLists.txt</code> file is also simple.</p>\n\n<pre><code># CMakeLists.txt\ncmake_minimum_required( VERSION 3.0 )\nproject( QtBundle )    \nset( CMAKE_INCLUDE_CURRENT_DIR ON )\nset( CMAKE_AUTOMOC ON )\n\nset( SOURCES main.cpp )    \nfind_package( Qt5Widgets REQUIRED )\n\nadd_executable( ${PROJECT_NAME} MACOSX_BUNDLE ${SOURCES} )    \nqt5_use_modules( ${PROJECT_NAME} Widgets )\n</code></pre>\n\n<p>I run <code>cmake .. -DCMAKE_PREFIX_PATH=/path/to/Qt5.5.1/</code> and it generates <code>Makefile</code> in the <code>build</code> directory. </p>\n\n<p>Then I run <code>make</code> and have <code>QtBundle.app</code> directory as I wanted and <code>QtBundle.app/Contents/MacOS/QtBundle</code> executable, OK. </p>\n\n<p>But when I launch it I get:</p>\n\n<pre><code>This application failed to start because it could not find or load the Qt platform plugin \"cocoa\".\n\nReinstalling the application may fix this problem.\nAbort trap: 6 \n</code></pre>\n\n<p>As far as I understand that error is occurred because application bundle doesn't have any Qt stuffs (Framework libs and plugins), so I run <code>macdeployqt</code> and it populates bundles directory with a lot of files in Framework and PlugIns folders and application is <strong>able to run and relocate to another system.</strong> </p>\n\n<p>It partially solves the problem but <strong>I want to populate bundle with CMake and <a href=\"https://cmake.org/cmake/help/v3.5/module/BundleUtilities.html\" rel=\"noreferrer\">BundleUtilities</a> and without macdeployqt tool.</strong> </p>\n\n<p>Unfortunately I didn't find any good and simple example for Qt5 deployment with BundleUtilities. </p>\n\n<p>Could someone help me to <strong>modify my 'helloworld' example in such way that CMake automatically creates ready-to-deploy bundle?</strong> </p>\n\n<p>Thanks in advance. </p>\n\n<h1>Main question: how to use CMake BundleUtilities to get a relocatable application?</h1>\n"}, {"tags": ["c++", "pointers", "cout"], "comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 13, "creation_date": 1456346566, "post_id": 35612613, "comment_id": 58909217, "body": "This is undefined behavior, so anything can happen."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1456346596, "post_id": 35612613, "comment_id": 58909227, "body": "Since this is a guess I am putting it here: I would have to say the variables are getting optimized away since you are not using them so you invoke undefined behavior as <code>a</code> no longer exists."}, {"owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "edited": false, "score": 0, "creation_date": 1456346843, "post_id": 35612613, "comment_id": 58909357, "body": "I agree with NathanOliver. Are you sure the <code>4</code> is coming from <code>d</code>? You are very likely just grabbing some value off the stack. Try changing the value of <code>d</code> to something else and see if the printed value is still 4. Ultimately, relying too much on the compiler placing things in the stack in a specific order is risky unless you know your compiler very, very well. Especially for something like this, which is undefined, as interjay pointed out."}, {"owner": {"reputation": 1026, "user_id": 5583153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116adeea4dcb2db23e70b696d4949184?s=128&d=identicon&r=PG&f=1", "display_name": "Nacho", "link": "https://stackoverflow.com/users/5583153/nacho"}, "edited": false, "score": 0, "creation_date": 1456346889, "post_id": 35612613, "comment_id": 58909388, "body": "Why on earth would you want to do something like this?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1456347122, "post_id": 35612613, "comment_id": 58909531, "body": "The variables are not guaranteed to be contiguous in memory.  The variables could be in registers and registers on most CPUs don&#39;t have addresses.  Thus some of the undefined behavior."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1456347292, "post_id": 35612613, "comment_id": 58909646, "body": "Even <code>&amp;b - 0x1</code> (without dereferencing) is undefined."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 3, "last_activity_date": 1456346914, "creation_date": 1456346914, "answer_id": 35612772, "question_id": 35612613, "link": "https://stackoverflow.com/questions/35612613/pointer-to-next-address/35612772#35612772", "title": "Pointer to next address", "body": "<p>Without this statement</p>\n\n<pre><code>cout&lt;&lt;&amp;a&lt;&lt;endl;\n</code></pre>\n\n<p>variable <code>a</code> is not used in the program. So the compiler is allowed to generate the object code such a way that the definition of <code>a</code> will not be included in the program.</p>\n\n<p>When you uncomment this statement variable <code>a</code> is present in the object code.</p>\n\n<p>Take into account that in general the program behaviour is undefined.</p>\n\n<p>You may not dereference pointer before a variable if it is not a part of an array.</p>\n\n<pre><code>cout&lt;&lt;*(&amp;b - 0x1);\n</code></pre>\n\n<p>Moreover the order in which the compiler places variables in the memory is unspecified.</p>\n"}, {"tags": [], "owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 0, "last_activity_date": 1456346993, "creation_date": 1456346993, "answer_id": 35612794, "question_id": 35612613, "link": "https://stackoverflow.com/questions/35612613/pointer-to-next-address/35612794#35612794", "title": "Pointer to next address", "body": "<p>You're invoking undefined behaviour.</p>\n\n<p>It isn't valid to perform modify a pointer like this unless it's part of any array and your arithmetic keeps the value within the array (or one past the end of it).</p>\n\n<p>So you're accessing some arbitrary area of memory and there's no definition of what you might get back.</p>\n\n<p>When you comment out those lines the optimizer is probably noticing you don't use <code>a</code>,<code>c</code> or <code>d</code> and so omits them from the code. When you leave them in you get the outcome you expect because you've correctly inferred where your compiler (though by no means all compilers) store <code>a</code> relative to <code>b</code> (if at all).</p>\n\n<p>The optimizer isn't required and generally won't try to infer that your accessing of <code>&amp;b-0x01</code> happens to land on <code>a</code>. It's undefined behaviour and so irrelevant what outcome you get.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5976482, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208069479272401/picture?type=large", "display_name": "Maya Zhekova", "link": "https://stackoverflow.com/users/5976482/maya-zhekova"}, "is_accepted": false, "score": 0, "last_activity_date": 1456475805, "creation_date": 1456475805, "answer_id": 35646988, "question_id": 35612613, "link": "https://stackoverflow.com/questions/35612613/pointer-to-next-address/35646988#35646988", "title": "Pointer to next address", "body": "<p>By definition C++ would allocate all addresses next to each other starting from the last,  unless the memory is used.  In all my experience they are next to each other. The only reason I can see is because of the optimization a is not allocated if it isn't used.\nIt always shows the value of d, which is the strangest part. </p>\n"}], "owner": {"reputation": 11, "user_id": 5976482, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208069479272401/picture?type=large", "display_name": "Maya Zhekova", "link": "https://stackoverflow.com/users/5976482/maya-zhekova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1456475805, "creation_date": 1456346369, "question_id": 35612613, "link": "https://stackoverflow.com/questions/35612613/pointer-to-next-address", "title": "Pointer to next address", "body": "<p>When you run the code like this it shows the value of d -> 4\nIf you uncomment the cout&lt;&lt;&amp;a it shows the proper value of a -> 1</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;math.h&gt;\nusing namespace std;\nint main()\n{\n    int a=1,b=2,c=3,d=4;\n    /*cout&lt;&lt;&amp;a&lt;&lt;endl;\n    cout&lt;&lt;&amp;b&lt;&lt;endl;\n    cout&lt;&lt;&amp;c&lt;&lt;endl;\n    cout&lt;&lt;&amp;d&lt;&lt;endl;*/\n    cout&lt;&lt;*(&amp;b - 0x1);\n}\n</code></pre>\n\n<p>Can somebody help me understand why does the cout changes the returned value?</p>\n"}, {"tags": ["c++", "templates", "typedef", "c++14", "using"], "comments": [{"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 2, "creation_date": 1456346065, "post_id": 35612459, "comment_id": 58908965, "body": "type alias can be only created for <b>types</b>. Function is not a type."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1456346896, "post_id": 35612459, "comment_id": 58909393, "body": "@Dundee, yes you do! :) Look at my answer."}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 2, "creation_date": 1456346955, "post_id": 35612459, "comment_id": 58909424, "body": "You don&#39;t use <code>R</code> anywhere yet... Did you mean to use <code>constexpr R dot(...)</code>?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1456347133, "post_id": 35612459, "comment_id": 58909535, "body": "If you still need type deduction, just add a new function"}, {"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1456347397, "post_id": 35612459, "comment_id": 58909706, "body": "@Simon Kraemer - that&#39;s right. Pasted old code. I&#39;ll fix it. The errors stay, however."}, {"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "edited": false, "score": 0, "creation_date": 1456349711, "post_id": 35612459, "comment_id": 58910957, "body": "@Nasser sorry for that. Although your question didn&#39;t help me, it sorta answered my question. That is true."}, {"owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "reply_to_user": {"reputation": 5466, "user_id": 1803692, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/umD6Q.jpg?s=128&g=1", "display_name": "Vogel612", "link": "https://stackoverflow.com/users/1803692/vogel612"}, "edited": false, "score": 0, "creation_date": 1456349720, "post_id": 35612459, "comment_id": 58910963, "body": "@Vogel612 noted, comment deleted"}, {"owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 0, "creation_date": 1456349773, "post_id": 35612459, "comment_id": 58910999, "body": "@Dundee no problem, I deleted the comment, because I realized I could have provided a better answer. I&#39;ll fix it now."}], "answers": [{"comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1456347035, "post_id": 35612757, "comment_id": 58909481, "body": "Why not a variable template?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1456347164, "post_id": 35612757, "comment_id": 58909557, "body": "@PiotrSkotnicki, because OP needs a specific function, not a templated family of this. (Unless I misunderstand the question)."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 2, "creation_date": 1456347200, "post_id": 35612757, "comment_id": 58909578, "body": "then why not <code>auto food = &amp;foo&lt;double, float&gt;;</code> ?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 1, "creation_date": 1456347278, "post_id": 35612757, "comment_id": 58909631, "body": "@PiotrSkotnicki, no reason whatsoever! I was actually thinking of variable templates, started doing it, than realized it is not needed, but class remained in my brain!!! Will edit. Thanks for pointing this out."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 2, "creation_date": 1456347444, "post_id": 35612757, "comment_id": 58909729, "body": "This does not meet the OP&#39;s requirement- the first argument to <code>food</code> is no longer templated either."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1456347575, "post_id": 35612757, "comment_id": 58909796, "body": "OP is clearly missing that with a variable template or any other alias type deduction won&#39;t work"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 1, "creation_date": 1456347585, "post_id": 35612757, "comment_id": 58909801, "body": "@Puppy, true. Back to the helper with variable template. However, I feel like you are a bit trigger-happy with your downvotes."}, {"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "edited": false, "score": 0, "creation_date": 1456382187, "post_id": 35612757, "comment_id": 58922644, "body": "@SergeyA: I wonder too. It&#39;s an alternative to the Barry&#39;s answer (which, I just realized, solves my problem a bit easier), but since when are alternative solutions downvoted? I am really sorry you got the downvotes, SergeyA."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": -1, "last_activity_date": 1456347570, "last_edit_date": 1456347570, "creation_date": 1456346868, "answer_id": 35612757, "question_id": 35612459, "link": "https://stackoverflow.com/questions/35612459/partial-typedef-using-of-a-templated-function/35612757#35612757", "title": "Partial typedef (`using`) of a templated function", "body": "<p>The answer is very simple:</p>\n\n<pre><code>template &lt;class T1, class T2&gt; void foo();\n\ntemplate &lt;class T1, class T2&gt; struct FooHelper {\n   static constexpr auto foo = &amp;foo&lt;T1, T2&gt;;\n};\n\ntemplate &lt;class T&gt;\nauto food = FooHelper&lt;T, float&gt;::foo;\n\nvoid g() {\n  food&lt;float&gt;();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "edited": false, "score": 0, "creation_date": 1456349766, "post_id": 35613501, "comment_id": 58910991, "body": "Yes, I am aware of that. I just thought I could shorten it further to dotd()."}, {"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "edited": false, "score": 0, "creation_date": 1456349992, "post_id": 35613501, "comment_id": 58911125, "body": "The problem with auto is, it doesn&#39;t handle all the types gracefully. Let&#39;s say the vectors passed in are of type int. In this case, the dot() function won&#39;t return any meaningful value."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "edited": false, "score": 1, "creation_date": 1456350148, "post_id": 35613501, "comment_id": 58911219, "body": "@Dundee Why would the return type not be meaningful? If the <code>x</code>s and <code>y</code>s are <code>int</code>, you&#39;d get <code>int</code>. How is that worse than <code>float</code>?"}, {"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "edited": false, "score": 0, "creation_date": 1456382021, "post_id": 35613501, "comment_id": 58922557, "body": "Hell, I just realized, there&#39;s no division in the whole thing. LOL, my brain was too tired yesterday, I guess. Thank you for pointing that out, Barry :)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1456384707, "post_id": 35613501, "comment_id": 58923908, "body": "You don&#39;t need a default for <code>T</code> at all."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1456409789, "post_id": 35613501, "comment_id": 58940842, "body": "@T.C. Wow. I... never knew that."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1456409838, "last_edit_date": 1456409838, "creation_date": 1456349285, "answer_id": 35613501, "question_id": 35612459, "link": "https://stackoverflow.com/questions/35612459/partial-typedef-using-of-a-templated-function/35613501#35613501", "title": "Partial typedef (`using`) of a templated function", "body": "<p>You could just flip the ordering of the template arguments. If you place <code>R</code> first, it's easy for the user to simply provide a different type for it if that's what they want:</p>\n\n<pre><code>template &lt;\n  typename R = float,\n  typename T,\n  typename = \n    std::enable_if_t&lt;std::is_arithmetic&lt;decltype(std::declval&lt;T&gt;().x)&gt;{}&gt;,\n  typename = \n    std::enable_if_t&lt;std::is_arithmetic&lt;decltype(std::declval&lt;T&gt;().y)&gt;{}&gt;&gt;\nconstexpr R dot(const T a_vector, const T b_vector)\n{\n    return a_vector.x * b_vector.x + a_vector.y * b_vector.y;\n}\n</code></pre>\n\n<p>And then <code>dot(a, b)</code> gives you a <code>float</code> vs <code>dot&lt;double&gt;(a, b)</code> gives you a <code>double</code>. I find <code>dot&lt;double&gt;</code> a lot clearer than having to look up what <code>dotd</code> means. </p>\n\n<p>Though if you're using C++14, better to simply drop the <code>R</code> template argument completely and return <code>auto</code>. </p>\n"}], "owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 35613501, "answer_count": 2, "score": 0, "last_activity_date": 1456409838, "creation_date": 1456345818, "last_edit_date": 1456347214, "question_id": 35612459, "link": "https://stackoverflow.com/questions/35612459/partial-typedef-using-of-a-templated-function", "title": "Partial typedef (`using`) of a templated function", "body": "<p>Trying to implement a dot product function using templates, I have written the following templated function.</p>\n\n<pre><code>template &lt;typename T, typename R = float,\n  typename = \n    std::enable_if_t&lt;std::is_arithmetic&lt;decltype(std::declval&lt;T&gt;().x)&gt;{}&gt;,\n  typename = \n    std::enable_if_t&lt;std::is_arithmetic&lt;decltype(std::declval&lt;T&gt;().y)&gt;{}&gt;&gt;\nconstexpr R dot(const T a_vector, const T b_vector)\n{\n    return a_vector.x * b_vector.x + a_vector.y * b_vector.y;\n}\n</code></pre>\n\n<p>I want my users to also easily use the <code>dot</code> function returning a <code>double</code> instead of the default <code>float</code>. That's why I am using a <code>using</code> to \"typedef\" the <code>dot()</code>.</p>\n\n<pre><code>template&lt;typename T, typename R, typename ... &gt;\nusing dotd = dot&lt;T, double&gt;;\n</code></pre>\n\n<p>This code yields</p>\n\n<ul>\n<li>in g++ <em><code>error: \u2018dot&lt;T, float&gt;\u2019 does not name a type</code></em></li>\n<li>in clang++ <em><code>error: expected a type</code></em> and  <em><code>error: expected ';' after alias declaration</code></em></li>\n</ul>\n\n<p>Do I have an option to use an alternative for functions?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1456347892, "post_id": 35612369, "comment_id": 58909966, "body": "What are you trying do with this: <code>line.erase(std::remove(line.begin(), line.end(), &#39;\\r&#39;), line.end());</code>?"}, {"owner": {"reputation": 1, "user_id": 5326671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02258e8cc812014a08eff39b6b9f9c0?s=128&d=identicon&r=PG&f=1", "display_name": "GSD", "link": "https://stackoverflow.com/users/5326671/gsd"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1456348183, "post_id": 35612369, "comment_id": 58910105, "body": "Trying to remove the \\r carriage return"}, {"owner": {"reputation": 1, "user_id": 5326671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02258e8cc812014a08eff39b6b9f9c0?s=128&d=identicon&r=PG&f=1", "display_name": "GSD", "link": "https://stackoverflow.com/users/5326671/gsd"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1456348201, "post_id": 35612369, "comment_id": 58910119, "body": "line.erase(std::remove(line.begin(), line.end(), &#39;\\r&#39;), line.end()); \t\tline.erase(std::remove(line.begin(), line.end(), &#39;\\n&#39;), line.end()); \t\tline.erase(std::remove(line.begin(), line.end(), &#39;\\t&#39;), line.end()); \t\tline.erase(std::remove(line.begin(), line.end(), &#39;\\f&#39;), line.end()); \t\tline.erase(std::remove(line.begin(), line.end(), &#39;\\v&#39;), line.end()); \t\tline.erase(line.begin(), std::find_if(line.begin(), line.end(), std::bind1st(std::not_equal_to&lt;char&gt;(), &#39; &#39;))); \t\tline.erase(std::find_if(line.rbegin(), line.rend(), std::bind1st(std::not_equal_to&lt;char&gt;(), &#39; &#39;)).base(), line.end());"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1456348512, "post_id": 35612369, "comment_id": 58910279, "body": "Hint:  read up on the return value from <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow noreferrer\">std::remove</a>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1456348562, "post_id": 35612369, "comment_id": 58910306, "body": "Hint 2:  Refactor code without nested function calls, use temporary variables."}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1456348900, "post_id": 35612369, "comment_id": 58910503, "body": "not sure what your issue is, code seems to work fine, see <a href=\"http://coliru.stacked-crooked.com/a/98966298b87ba6ca\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 1, "user_id": 5326671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02258e8cc812014a08eff39b6b9f9c0?s=128&d=identicon&r=PG&f=1", "display_name": "GSD", "link": "https://stackoverflow.com/users/5326671/gsd"}, "edited": false, "score": 0, "creation_date": 1456349211, "post_id": 35612369, "comment_id": 58910680, "body": "Guess the issue is with the input file i am using."}, {"owner": {"reputation": 1, "user_id": 5326671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02258e8cc812014a08eff39b6b9f9c0?s=128&d=identicon&r=PG&f=1", "display_name": "GSD", "link": "https://stackoverflow.com/users/5326671/gsd"}, "edited": false, "score": 0, "creation_date": 1456349230, "post_id": 35612369, "comment_id": 58910691, "body": "i just tried with line.erase(std::remove(line.begin(), line.end(), &#39;\\r\\n&#39;), line.end()); This is reading the token properly now. But i still see some issue though"}, {"owner": {"reputation": 1, "user_id": 5326671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02258e8cc812014a08eff39b6b9f9c0?s=128&d=identicon&r=PG&f=1", "display_name": "GSD", "link": "https://stackoverflow.com/users/5326671/gsd"}, "edited": false, "score": 0, "creation_date": 1456349424, "post_id": 35612369, "comment_id": 58910791, "body": ".ot Request3 getOrder Now my first letter is replaced with a ."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1456348348, "creation_date": 1456348348, "answer_id": 35613211, "question_id": 35612369, "link": "https://stackoverflow.com/questions/35612369/not-able-to-read-a-file-with-getline-properly/35613211#35613211", "title": "not able to read a file with getline() properly", "body": "<p>Here is a fragment for parsing the data file:</p>\n\n<pre><code>std::string token_1_line_1;\nstd::string token_1_line_2;\nstd::string token_2_line_2;\nstd::string token_3_line_2;\nstd::string text_line;\n\nwhile (inFile &gt;&gt; token_1_line_1) // Read text w/o line ending\n{\n  getline(inFile, token_1_line_2, ',');\n  getline(inFile, token_2_line_2, ',');\n  getline(inFile, token_3_line_3);\n}\n</code></pre>\n\n<p><em>Note: the above code has not been tested.</em>  </p>\n"}], "owner": {"reputation": 1, "user_id": 5326671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02258e8cc812014a08eff39b6b9f9c0?s=128&d=identicon&r=PG&f=1", "display_name": "GSD", "link": "https://stackoverflow.com/users/5326671/gsd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1456354391, "creation_date": 1456345555, "last_edit_date": 1456354391, "question_id": 35612369, "link": "https://stackoverflow.com/questions/35612369/not-able-to-read-a-file-with-getline-properly", "title": "not able to read a file with getline() properly", "body": "<p>I have read many posts but whatever i do, i cant get rid of the problem.\nMy input file is like below</p>\n\n<blockquote>\n<pre><code>getData\ngetData,value1,value2\n</code></pre>\n</blockquote>\n\n<pre><code>string value, line;\nwhile (getline(inFile, line)) {\nline.erase(std::remove(line.begin(), line.end(), '\\r'), line.end());\nstringstream linestream(line);\ngetline(linestream, value, ',');\nLogging::PrintInfo(\"Got Request3 %s.\\n\",value.c_str());\n}\n</code></pre>\n\n<p>I get the print as </p>\n\n<blockquote>\n<pre><code>Got Request3 getData --&gt; first loop\nGot Request3 ta  --&gt;second loop.\n</code></pre>\n</blockquote>\n\n<p>The initial characters are being cut from the string. </p>\n\n<p>I have tried the below also for trimming the \\r, but still the problem exists.</p>\n\n<pre><code>if ( line.size() &amp;&amp; line[line.size()-1] == '\\r' ) {\n            //line1 = line.substr( 0, line.size() - 1 );}\n\n        line.erase(0, line.find_first_not_of(\"\\r\"));\n        line.erase(line.find_last_not_of(\"\\r\")+1);\n</code></pre>\n\n<p>Tried doing  </p>\n\n<pre><code>    line.erase(std::remove(line.begin(), line.end(), '\\r'), line.end());\n    line.erase(std::remove(line.begin(), line.end(), '\\n'), line.end());\n    line.erase(std::remove(line.begin(), line.end(), '\\t'), line.end());\n    line.erase(std::remove(line.begin(), line.end(), '\\f'), line.end());\n    line.erase(std::remove(line.begin(), line.end(), '\\v'), line.end());\n    line.erase(line.begin(), std::find_if(line.begin(), line.end(), std::bind1st(std::not_equal_to&lt;char&gt;(), ' ')));\n    line.erase(std::find_if(line.rbegin(), line.rend(), std::bind1st(std::not_equal_to&lt;char&gt;(), ' ')).base(), line.end());\n</code></pre>\n\n<p>But my issue is not resolved. First few characters are still lost. After multiple tries I found that the issue is with \\r. But I still have a problem.</p>\n\n<p>As soon as I remove the \\r, my next line string gets cut. But if I do not cut it, my first line has a \\r and that's not being processed.</p>\n"}, {"tags": ["android", "c++", "qt"], "comments": [{"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1456352342, "post_id": 35612232, "comment_id": 58912435, "body": "Which Qt version are you using? <a href=\"http://stackoverflow.com/questions/3773914/why-isnt-qstringlocaleawarecompare-working-correctly\">This SO post</a> shows that some Qt versions appear to be broken. I tested your example with Qt 4.8.6 as well as Qt 5.2.1, and got different results."}, {"owner": {"reputation": 95, "user_id": 3448037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8a71180432375bee4ce93538b5645a?s=128&d=identicon&r=PG&f=1", "display_name": "NRiesterer", "link": "https://stackoverflow.com/users/3448037/nriesterer"}, "reply_to_user": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1456411637, "post_id": 35612232, "comment_id": 58942332, "body": "I am using Qt 5.5.1. What do you mean with &quot;different results&quot;? Do you get the correct result \u0100 &lt; O?"}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1456413308, "post_id": 35612232, "comment_id": 58943788, "body": "Hm, to be fair I always seem to get \u22121 on Qt5, but I get \u221279 on Qt4 unless I add a <code>QLocale::setDefault()</code> statement. If I add that, I get \u22121 on Qt4 as well. But my code is probably also different from yours. Can you post a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete and verifiable example</a>?"}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1456413386, "post_id": 35612232, "comment_id": 58943857, "body": "Some websites which may be useful: <a href=\"https://wiki.qt.io/Locale_Support_in_Qt_5#Android\" rel=\"nofollow noreferrer\">wiki.qt.io/Locale_Support_in_Qt_5#Android</a> and <a href=\"http://developer.android.com/reference/java/util/Locale.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/java/util/Locale.html</a>"}, {"owner": {"reputation": 95, "user_id": 3448037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8a71180432375bee4ce93538b5645a?s=128&d=identicon&r=PG&f=1", "display_name": "NRiesterer", "link": "https://stackoverflow.com/users/3448037/nriesterer"}, "reply_to_user": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1456414323, "post_id": 35612232, "comment_id": 58944626, "body": "The question now contains an example."}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1456419837, "post_id": 35612232, "comment_id": 58949042, "body": "thanks. In Ubuntu Linux, see the correct result with all Qt versions I have (A &lt; \u0100 &lt; O). So unfortunately I cannot tell you anything except that I can confirm it works on Ubuntu."}, {"owner": {"reputation": 95, "user_id": 3448037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8a71180432375bee4ce93538b5645a?s=128&d=identicon&r=PG&f=1", "display_name": "NRiesterer", "link": "https://stackoverflow.com/users/3448037/nriesterer"}, "reply_to_user": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1456433222, "post_id": 35612232, "comment_id": 58957374, "body": "Did you run it on android as well?"}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1456433885, "post_id": 35612232, "comment_id": 58957798, "body": "Only Ubuntu. Sorry if that was not clear. But that at least confirms that your code is working in principle. to me, that looks like your problem is definitely Android-specific."}], "answers": [{"tags": [], "owner": {"reputation": 1246, "user_id": 167664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuCUB.jpg?s=128&g=1", "display_name": "Georgy Pashkov", "link": "https://stackoverflow.com/users/167664/georgy-pashkov"}, "is_accepted": true, "score": 0, "last_activity_date": 1456351663, "last_edit_date": 1456351663, "creation_date": 1456351104, "answer_id": 35614025, "question_id": 35612232, "link": "https://stackoverflow.com/questions/35612232/different-results-of-localeawarecompare/35614025#35614025", "title": "Different results of localeAwareCompare", "body": "<p>You can remove the macrons by de-composing the string:</p>\n\n<pre><code>QString a = QString::fromUtf8(\"\u0100\");\nQString norm = a.normalized(QString::NormalizationForm_D);\nQString aOut;\n// Remove all marks\nQ_FOREACH(QChar ch, norm){\n    QChar::Category c = ch.category();\n    if (c != QChar::Mark_Enclosing &amp;&amp;\n        c != QChar::Mark_NonSpacing &amp;&amp;\n        c != QChar::Mark_SpacingCombining){\n            aOut.append(ch);\n    }\n}\nqDebug() &lt;&lt; aOut; // prints \"A\"\n</code></pre>\n\n<p>Then compare the strings normally. However, this will also break graphemes such as \u00c6. A more sophisticated algorithm will be needed to avoid that.</p>\n\n<p>For reference: \n<a href=\"http://doc.qt.io/qt-5/qstring.html#normalized\" rel=\"nofollow\">http://doc.qt.io/qt-5/qstring.html#normalized</a></p>\n"}], "owner": {"reputation": 95, "user_id": 3448037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd8a71180432375bee4ce93538b5645a?s=128&d=identicon&r=PG&f=1", "display_name": "NRiesterer", "link": "https://stackoverflow.com/users/3448037/nriesterer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 1, "accepted_answer_id": 35614025, "answer_count": 1, "score": 2, "last_activity_date": 1456414264, "creation_date": 1456345130, "last_edit_date": 1456414264, "question_id": 35612232, "link": "https://stackoverflow.com/questions/35612232/different-results-of-localeawarecompare", "title": "Different results of localeAwareCompare", "body": "<p>I need to compare two UTF-8 encoded strings containing macron characters (\u0100, \u014c, \u016a). The order should be A &lt; \u0100 &lt; O &lt; \u014c &lt; U &lt; \u016a meaning that the macron characters should not be compared based on their numeric value (A &lt; O &lt; U &lt; \u0100 &lt; \u014c &lt; \u016a), but lexicographically.</p>\n\n<p>In order to achieve this, I tried using <a href=\"http://doc.qt.io/qt-5/qstring.html#localeAwareCompare-1\" rel=\"nofollow\">localeAwareCompare</a>:</p>\n\n<pre><code>QString a = QString::fromUtf8(\"\u0100\");\nQString b = QString::fromUtf8(\"O\");\nint result = QString::localeAwareCompare(a, b);\n</code></pre>\n\n<p>With this piece of code I am encountering different behavior on my desktop computer running Mac OS and android. On the desktop computer, the result is -1 (which is correct, because \u0100 &lt; O) while android yields 117 (which is incorrect).</p>\n\n<p>The Qt documentation for <a href=\"http://doc.qt.io/qt-5/qstring.html#localeAwareCompare-1\" rel=\"nofollow\">localeAwareCompare</a> contains the following remark:</p>\n\n<pre><code>The comparison is performed in a locale- and also platform-dependent manner.\n</code></pre>\n\n<p>The default locales on the devices I am using are:</p>\n\n<ul>\n<li>Mac OS:\n\n<ul>\n<li>Name: en_US</li>\n<li>Script: 7</li>\n<li>Country: UnitedStates</li>\n</ul></li>\n<li>Android:\n\n<ul>\n<li>Name: \"\"</li>\n<li>Script: 0</li>\n<li>Country: AnyCountry</li>\n</ul></li>\n</ul>\n\n<p>Manually setting the default locale to en_US does not help. My only guess is that this is due to the platform dependency.</p>\n\n<p>I am at a loss here. Is this behaviour supposed to be correct? If so, is there another option to compute the desired comparison?</p>\n\n<hr>\n\n<p><strong>Example</strong></p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QString&gt;\n#include &lt;QDebug&gt;\n\nint main(int argc, char** argv) {\n    QApplication app(argc, argv);\n\n    QString a = QString::fromUtf8(\"A\");\n    QString a_m = QString::fromUtf8(\"\u0100\");\n    QString o = QString::fromUtf8(\"O\");\n\n    qDebug() &lt;&lt; (QString::localeAwareCompare(a, a_m) &lt; 0 ? \"A &lt; \u0100\" : \"\u0100 &lt; A\");\n    qDebug() &lt;&lt; (QString::localeAwareCompare(a_m, o) &lt; 0 ? \"\u0100 &lt; O\" : \"O &lt; \u0100\");\n\n    return app.exec();\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "stl", "linked-list"], "comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 18, "creation_date": 1456345402, "post_id": 35612220, "comment_id": 58908567, "body": "I do not understand why people are downvoting this question. It is a perfectly reasonable question to ask.  Reversing a doubly linked list should take O(1) time."}, {"owner": {"reputation": 76644, "user_id": 330057, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/i6yM6.png?s=128&g=1", "display_name": "corsiKa", "link": "https://stackoverflow.com/users/330057/corsika"}, "edited": false, "score": 46, "creation_date": 1456353079, "post_id": 35612220, "comment_id": 58912797, "body": "unfortunately, some folks confuse the concepts of &quot;the question is good&quot; with &quot;the question has a good idea&quot;. I love questions like  this, where basically &quot;my understanding seems different than a commonly accepted practice, please help resolve this conflict&quot;, because expanding how you think helps you solve a lot more problems down the road! It would appear others take the approach of &quot;that&#39;s a waste of processing in 99.9999% of cases, don&#39;t even think about it&quot;. If it&#39;s any consolation, I&#39;ve been downvoted for much, much less!"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 4, "creation_date": 1456390406, "post_id": 35612220, "comment_id": 58927049, "body": "Yeah this question got an inordinate amount of downvotes for its quality. Probably it&#39;s the same as who upvoted Blindy&#39;s answer. In fairness, &quot;reversing a doubly linked list should just involve switching the head and tail pointers&quot; is generally not true for the standard linked list impl that everyone learns in highschool, or for many implementations that people use. A lot of times in SO people&#39;s immediate gut reaction to the question or answer drives upvote / downvote decision. If you had been more clear in that sentence or omitted it, I think you would have gotten less downvotes."}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1456397096, "post_id": 35612220, "comment_id": 58931773, "body": "Do you mean you expect this to work? <a href=\"http://ideone.com/L15SjI\" rel=\"nofollow noreferrer\">ideone.com/L15SjI</a>"}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 3, "creation_date": 1456397917, "post_id": 35612220, "comment_id": 58932338, "body": "Or let me put the burden of proof with you, @Curious: I have whipped up a doubly linked list implementation here: <a href=\"http://ideone.com/c1HebO\" rel=\"nofollow noreferrer\">ideone.com/c1HebO</a>. Can you indicate how you would expect the <code>Reverse</code> function to be implemented in O(1)?"}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1456404912, "post_id": 35612220, "comment_id": 58937245, "body": "@CompuChip: Please read the current top answers to understand how it would be achieved: <a href=\"http://stackoverflow.com/a/35612350/147192\">Ami Tavory&#39;s</a> or <a href=\"http://stackoverflow.com/a/35612583/147192\">5gon12eder&#39;s</a>."}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1456405814, "post_id": 35612220, "comment_id": 58937940, "body": "@MatthieuM. that involves more than just &quot;switching the head and the tail pointers&quot;. I just wanted to make sure that the OP didn&#39;t have anything else in mind given their apparently strong opinion on some of the answers."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 2, "creation_date": 1456407181, "post_id": 35612220, "comment_id": 58938894, "body": "@CompuChip: Actually, depending on the implementation, it may not. You do not need an extra boolean to know which pointer to use: just use the one not pointing back to you... which could well be automatic with a XOR&#39;ed linked list by the way. So yes, it depends on how the list is implemented, and the OP statement could be clarified."}, {"owner": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "reply_to_user": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "edited": false, "score": 0, "creation_date": 1456472116, "post_id": 35612220, "comment_id": 58972399, "body": "Saying that you can test the links (even for an XOR list) rather than checking a boolean does not contradict the point made by Avi Tavory&#39;s answer, @MatthieuM.: there is an extra comparison being made."}, {"owner": {"reputation": 249985, "user_id": 147192, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/E78Vj.png?s=128&g=1", "display_name": "Matthieu M.", "link": "https://stackoverflow.com/users/147192/matthieu-m"}, "reply_to_user": {"reputation": 62027, "user_id": 603977, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/myasv.jpg?s=128&g=1", "display_name": "jscs", "link": "https://stackoverflow.com/users/603977/jscs"}, "edited": false, "score": 0, "creation_date": 1456472941, "post_id": 35612220, "comment_id": 58972830, "body": "@JoshCaswell: Sure... and I certainly never tried to imply otherwise (and apologize if it was confusing). To be fully honest, I am actually unclear on whether a XOR&#39;ed list could be reverse in O(1) and would need a test; it might, it might not, I have not fully worked it out... because it seems pointless to. Who cares, really? ;)"}], "answers": [{"comments": [{"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 27, "creation_date": 1456345439, "post_id": 35612278, "comment_id": 58908584, "body": "Because you need to update the links between every item too. Take out a piece of paper and draw it out instead of downvoting."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 1, "creation_date": 1456345505, "post_id": 35612278, "comment_id": 58908622, "body": "no you don&#39;t.  It is a doubly linked list.  I downvoted and provided an explanation of my downvote.  your answer is not exhaustive and does not answer my question."}, {"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 11, "creation_date": 1456345565, "post_id": 35612278, "comment_id": 58908667, "body": "Why ask if you&#39;re so sure then? You&#39;re wasting both our time."}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 28, "creation_date": 1456345580, "post_id": 35612278, "comment_id": 58908675, "body": "@Curious Doubly linked list&#39;s nodes have a sense of direction. Reason from there."}, {"owner": {"reputation": 2920, "user_id": 3022952, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b62f68f2f334d828423b8706fc88c56e?s=128&d=identicon&r=PG&f=1", "display_name": "R.M.", "link": "https://stackoverflow.com/users/3022952/r-m"}, "edited": false, "score": 11, "creation_date": 1456358843, "post_id": 35612278, "comment_id": 58914965, "body": "@Blindy A good answer should be complete. &quot;Take out a piece of paper and draw it out&quot; thus should not be a requisite component of a good answer. Answers which are not good answers are subject to downvotes."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "edited": false, "score": 7, "creation_date": 1456363429, "post_id": 35612278, "comment_id": 58916368, "body": "@Shoe: Do they have to? Please research XOR-linked-list and the like."}, {"owner": {"reputation": 680, "user_id": 3762339, "user_type": "registered", "profile_image": "https://graph.facebook.com/737912315/picture?type=large", "display_name": "Snowhawk", "link": "https://stackoverflow.com/users/3762339/snowhawk"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1456383865, "post_id": 35612278, "comment_id": 58923486, "body": "@Deduplicator Wouldn&#39;t the need for a history to determine the address to an adjacent node classify the XOR approach as a queue instead of a list? Removing a node would be a linear operation instead of a constant operation with XOR addressing."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 680, "user_id": 3762339, "user_type": "registered", "profile_image": "https://graph.facebook.com/737912315/picture?type=large", "display_name": "Snowhawk", "link": "https://stackoverflow.com/users/3762339/snowhawk"}, "edited": false, "score": 3, "creation_date": 1456393931, "post_id": 35612278, "comment_id": 58929498, "body": "@Snowhawk04: no. please research XOR-linked list, that&#39;s not how it works. The point is that when you iterate, your &quot;iterator&quot; is actually a pair of pointers to adjacent nodes. There is no need for a history, and XOR linked list is definitely not a queue."}, {"owner": {"reputation": 51182, "user_id": 1468366, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e313135581cf6ceaad355580af931f8?s=128&d=identicon&r=PG", "display_name": "MvG", "link": "https://stackoverflow.com/users/1468366/mvg"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 3, "creation_date": 1456410881, "post_id": 35612278, "comment_id": 58941687, "body": "@ChrisBeck: I assume that it would be difficult to <a href=\"http://en.cppreference.com/w/cpp/container/list/insert\" rel=\"nofollow noreferrer\">insert</a> items without invalidating iterators in such an iterator-is-a-pair XOR-list setup."}], "tags": [], "owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "is_accepted": false, "score": 18, "last_activity_date": 1456345252, "creation_date": 1456345252, "answer_id": 35612278, "question_id": 35612220, "link": "https://stackoverflow.com/questions/35612220/why-does-stdlistreverse-have-on-complexity/35612278#35612278", "title": "Why does std::list::reverse have O(n) complexity?", "body": "<p>Because it has to traverse every node (<code>n</code> total) and update their data (the update step is indeed <code>O(1)</code>). This makes the whole operation <code>O(n*1) = O(n)</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 1, "creation_date": 1456348285, "post_id": 35612350, "comment_id": 58910157, "body": "I&#39;m not satisfied with this answer. Couldn&#39;t the same argument be made to any operation on any container? For example, theoretically, <code>sort</code> could be <i>O(1)</i> as well if you keep a boolean member indicating whether operations should return the value corresponding to the sorted position. Of course, operations on the iterator will be <i>O(nlog(n))</i> at least once, but that&#39;s just an implementation detail. Basically, you can use the same argument to arbitrarily defer complexity. Am I missing something?"}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 2, "creation_date": 1456348762, "post_id": 35612350, "comment_id": 58910428, "body": "@MooseBoys I think what you wrote here - with which I completely agree - is exactly the point. You could hypothetically take the most common operation on a container, e.g., iteration, and say that it is not more <i>O(1)</i>, but rather <i>O(n log(n))</i>, because it might require, say, sorting, while sorting could be <i>O(1)</i> due to &quot;lazy&quot; sorts. I guess the art of defining standards is deciding if this makes sense or not."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 29, "creation_date": 1456354167, "post_id": 35612350, "comment_id": 58913289, "body": "@MooseBoys: I don&#39;t agree with your analogy. The difference is that, in the case of a list,the implementation could provide <code>reverse</code> with <code>O(1)</code> complexity <b>without affecting the big-o of any other operation</b>, by using this boolean flag trick. But, in practice an extra branch in every operation is costly, even if it is technically O(1). By contrast, you cannot make a list structure in which <code>sort</code> is O(1) and all the other operations are the same cost. The point of the question is that, seemingly, you can get <code>O(1)</code> reverse for free if you only care about big O, so why didn&#39;t they do that."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 1, "creation_date": 1456359037, "post_id": 35612350, "comment_id": 58915031, "body": "Actually, it&#39;s more than that. Every node would also need a pointer to the list object itself (to have access to the direction flag), making every node larger. This, in turn, would make splice operations O(n) instead of O(1) (because you&#39;ll have to update that pointer in all the nodes in the subsequence)."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 9, "creation_date": 1456363582, "post_id": 35612350, "comment_id": 58916410, "body": "If you used an XOR-linked-list, reversing would become constant time. An iterator would be bigger though, and incrementing/decrementing it would be slightly more computationally expensive. That might be dwarfed by the unavoidable memory-accesses though for <i>any</i> kind of linked list."}, {"owner": {"reputation": 1181, "user_id": 465887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb2b92acde44d370853bd3fdbfca6fda?s=128&d=identicon&r=PG", "display_name": "Dave Ceddia", "link": "https://stackoverflow.com/users/465887/dave-ceddia"}, "edited": false, "score": 0, "creation_date": 1456368572, "post_id": 35612350, "comment_id": 58917802, "body": "It seems to me that adding that boolean flag to every node would be a questionable decision from an architectural/design point of view, too. Every operation would &quot;know&quot; something about how <code>reverse</code> works, coupling them together and making change more difficult."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 3, "creation_date": 1456372067, "post_id": 35612350, "comment_id": 58918781, "body": "@IlyaPopov: Does every node actually need this? The user never asks any questions of the list node itself, only the main list body. So accessing the boolean is easy for any method that the user calls. You could make the rule that the iterators are invalidated if the list is reversed, and/or store a copy of the boolean with the iterator, for example. So I think it would not affect the big O, necessarily. I&#39;ll admit, I didn&#39;t go line-by-line through the spec. :)"}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1456374695, "post_id": 35612350, "comment_id": 58919595, "body": "@Deduplicator: You can&#39;t make an XOR linked list under C++, unless you&#39;re willing to sacrifice generality.  Pointers can have trap representations, so just calculating the XOR of two pointers is not guaranteed to be legal."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 4, "creation_date": 1456378812, "post_id": 35612350, "comment_id": 58921125, "body": "@Kevin: Hm, what? You cannot xor two pointers directly anyway, you need to convert them to integers first (obviously of type <code>std::uintptr_t</code>. <i>Then</i> you can xor them."}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1456378899, "post_id": 35612350, "comment_id": 58921157, "body": "@Deduplicator: Like I said, you have to sacrifice generality.  <code>std::uintptr_t</code> is an optional type.  The implementation is not required to provide it."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 1181, "user_id": 465887, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bb2b92acde44d370853bd3fdbfca6fda?s=128&d=identicon&r=PG", "display_name": "Dave Ceddia", "link": "https://stackoverflow.com/users/465887/dave-ceddia"}, "edited": false, "score": 0, "creation_date": 1456381030, "post_id": 35612350, "comment_id": 58922078, "body": "@Dave: If you did add the boolean flag to every node, then to reverse the list, you&#39;d have to invert the flag in every node, so the reversal would be back to O(n). Likewise, if you put it into each iterator, then reversing would become O(M), (linear on the number of active iterators) <i>and</i> the list would need to store an ancillary list of all currently active iterators, so when you reverse the list, you can go find all the iterators and change the flag in each."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 3, "creation_date": 1456382461, "post_id": 35612350, "comment_id": 58922762, "body": "@Kevin, you definitely could make an XOR linked list in C++, it&#39;s practically the poster-child language for this kind of thing. Nothing says you have to use <code>std::uintptr_t</code>, you could cast to a <code>char</code> array and then XOR the components. It would be slower but 100% portable. Likely you could make it select between these two implementations and only use the second as a fallback if <code>uintptr_t</code> is missing. Some if it is described in this answer: <a href=\"http://stackoverflow.com/questions/14243971/can-an-xor-linked-list-be-implemented-in-c-without-causing-undefined-behavior\" title=\"can an xor linked list be implemented in c without causing undefined behavior\">stackoverflow.com/questions/14243971/&hellip;</a>"}, {"owner": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 1, "creation_date": 1456386237, "post_id": 35612350, "comment_id": 58924685, "body": "@ChrisBeck: It&#39;s not legal to subtract pointers to unrelated objects.  Pointers can be segmented, or arbitrary structs.  Subtraction is only required to work for pointers into the same array and other such things."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 1, "creation_date": 1456390563, "post_id": 35612350, "comment_id": 58927143, "body": "@Kevin Yes, user code is limited by portability etc. However, we&#39;re talking standard library (part of implementation) here. They can use all the platform-specifics, undefined behaviour etc. they want - they know it."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 25103, "user_id": 1340389, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/5d0e5b16679b92b24c8262e1e6aa2aa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1340389/kevin"}, "edited": false, "score": 0, "creation_date": 1456422378, "post_id": 35612350, "comment_id": 58950708, "body": "@Kevin: Subtle difference: I think it&#39;s totally legal to subtract pointers to unrelated objects. It&#39;s just illegal to dereference said pointer.  But I <i>think</i> <code>*(&amp;x- &amp;y+&amp;y)</code> is legal."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1456600879, "post_id": 35612350, "comment_id": 59027429, "body": "@MooingDuck: Nope, see 5.7/7: &quot;For addition or subtraction, if the expressions P or Q have type \u201cpointer to cv T\u201d, where T is different from the cv-unqualified array element type, the behavior is undefined.&quot; The two different objects could be stored in two different types of memory, where subtraction just doesn&#39;t make sense."}, {"owner": {"reputation": 94195, "user_id": 410767, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c1dd4727d07c7dbb6ff8c3a83e400b5?s=128&d=identicon&r=PG", "display_name": "Tony Delroy", "link": "https://stackoverflow.com/users/410767/tony-delroy"}, "edited": false, "score": 1, "creation_date": 1458813430, "post_id": 35612350, "comment_id": 60028170, "body": "It&#39;s noteworthy that a direction boolean can be trivially wrapped around the simpler <code>std::list</code> if this O(1) reverse is wanted, but if the standard implementation always provided such a boolean then the cost is there wanted or not (unless provided by e.g. a template policy, but then interfaces wanting to handle <code>std::list&lt;&gt;</code> instantiations would need two overloads or to themselves be made polymorphic etc....)"}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1566858926, "post_id": 35612350, "comment_id": 101780082, "body": "This is the case where you should revert to a traditional C."}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": true, "score": 188, "last_activity_date": 1456345507, "creation_date": 1456345507, "answer_id": 35612350, "question_id": 35612220, "link": "https://stackoverflow.com/questions/35612220/why-does-stdlistreverse-have-on-complexity/35612350#35612350", "title": "Why does std::list::reverse have O(n) complexity?", "body": "<p>Hypothetically, <code>reverse</code> could have been <em>O(1)</em>. There (again hypothetically) could have been a boolean list member indicating whether the direction of the linked list is currently the same or opposite as the original one where the list was created.</p>\n\n<p>Unfortunately, that would reduce the performance of basically any other operation (albeit without changing the asymptotic runtime). In each operation, a boolean would need to be consulted to consider whether to follow a \"next\" or \"prev\" pointer of a link.</p>\n\n<p>Since this was presumably considered a relatively infrequent operation, the standard (which does not dictate implementations, only complexity), specified that the complexity could be linear. This allows \"next\" pointers to always mean the same direction unambiguously, speeding up common-case operations.</p>\n"}, {"comments": [{"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1456346523, "post_id": 35612583, "comment_id": 58909186, "body": "Do you really need a flag per node? It seems that if you have a flag per list, this is OK. Since reversing the list invalidates iterators anyway"}, {"owner": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1456346713, "post_id": 35612583, "comment_id": 58909290, "body": "The test would behave very well with branch prediction, so I&#39;m not sure they would be any noticeable overhead anyway."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 0, "creation_date": 1456346867, "post_id": 35612583, "comment_id": 58909373, "body": "If you have a flag per list, you need a pointer in the iterator back to its list. Besides the fact that this would mean a doubly indirect load, a pointer costs even more memory than a boolean. As for the branch prediction: Under lucky circumstances, it could probably mitigate a good deal of the cost, but I wouldn&#39;t assume it can make the check gratis."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 7, "creation_date": 1456348081, "post_id": 35612583, "comment_id": 58910053, "body": "@galinette: <code>std::list::reverse</code> does not invalidate iterators."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1456349246, "post_id": 35612583, "comment_id": 58910701, "body": "@BenjaminLindley Good point, so you&#39;d actually <i>have</i> to take the double indirection approach."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 7908, "user_id": 2042388, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Qz7YO.jpg?s=128&g=1", "display_name": "galinette", "link": "https://stackoverflow.com/users/2042388/galinette"}, "edited": false, "score": 1, "creation_date": 1456349424, "post_id": 35612583, "comment_id": 58910790, "body": "@galinette Sorry, I mis-read your earlier comment as \u201cflag per <i>iterator</i>\u201d as opposed to \u201cflag per <i>node</i>\u201d as you wrote it. Of course, a flag per <i>node</i> would be counter-productive as you would, again, have to do a linear traversal to flip them all."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 3, "creation_date": 1456381370, "post_id": 35612583, "comment_id": 58922253, "body": "@5gon12eder: You could eliminate the branching at very lost cost: store the <code>next</code> and <code>prev</code> pointers in an array, and store the direction as a <code>0</code> or <code>1</code>. To iterate forward, you&#39;d follow <code>pointers[direction]</code> and to iterate in reverse <code>pointers[1-direction]</code> (or vice versa). This would still add a tiny bit of overhead, but <i>probably</i> less than a branch."}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 4, "creation_date": 1456427605, "post_id": 35612583, "comment_id": 58954035, "body": "You probably can&#39;t store a pointer to the list inside the iterators.  <code>swap()</code> is specified to be constant time and not invalidate any iterators."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "reply_to_user": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "edited": false, "score": 1, "creation_date": 1456441752, "post_id": 35612583, "comment_id": 58962025, "body": "@TavianBarnes Damn it! Well, triple indirection then\u2026 (I mean, not actually triple. You&#39;d have to store the flag in a dynamically allocated object but the pointer in the iterator can of course point directly to that object instead of indirecting over the list.)"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1502265881, "post_id": 35612583, "comment_id": 78128721, "body": "The iterator invalidation thing is probably the main point here. Iterator stability is pretty much the number 1 reason to pick a list over a vector."}], "tags": [], "owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "is_accepted": false, "score": 61, "last_activity_date": 1456357257, "last_edit_date": 1456357257, "creation_date": 1456346263, "answer_id": 35612583, "question_id": 35612220, "link": "https://stackoverflow.com/questions/35612220/why-does-stdlistreverse-have-on-complexity/35612583#35612583", "title": "Why does std::list::reverse have O(n) complexity?", "body": "<p>It <em>could</em> be <i>O</i>(1) if the list would store a flag that allows swapping the meaning of the \u201c<code>prev</code>\u201d and \u201c<code>next</code>\u201d pointers each node has. If reversing the list would be a frequent operation, such an addition might be in fact useful and I don't know of any reason why implementing it would be <em>prohibited</em> by the current standard. However, having such a flag would make ordinary <em>traversal</em> of the list more expensive (if only by a constant factor) because instead of</p>\n\n<pre><code>current = current-&gt;next;\n</code></pre>\n\n<p>in the <code>operator++</code> of the list iterator, you would get</p>\n\n<pre><code>if (reversed)\n  current = current-&gt;prev;\nelse\n  current = current-&gt;next;\n</code></pre>\n\n<p>which is not something you'd decide to add easily. Given that lists are usually traversed much more often than they are reversed, it would be very unwise for the standard to <em>mandate</em> this technique. Therefore, the reverse operation is allowed to have linear complexity. Do note, however, that <i>t</i> &isin; <i>O</i>(1) &rArr; <i>t</i> &isin; <i>O</i>(<i>n</i>) so, as mentioned earlier, implementing your \u201coptimization\u201d technically would be permitted.</p>\n\n<p>If you come from a Java or similar background, you might wonder why the iterator has to check the flag each time. Couldn't we instead have two distinct iterator types, both derived from a common base type, and have <code>std::list::begin</code> and <code>std::list::rbegin</code> polymorphically return the appropriate iterator? While possible, this would make the whole thing even worse because advancing the iterator would be an indirect (hard to inline) function call now. In Java, you're paying this price routinely anyway, but then again, this is one of the reasons many people reach for C++ when performance is critical.</p>\n\n<p>As pointed out by <a href=\"https://stackoverflow.com/users/440119/benjamin-lindley\">Benjamin Lindley</a> in the comments, since <code>reverse</code> is not allowed to invalidate iterators, the only approach permitted by the standard seems to be to store a pointer back to the list inside the iterator which causes a double-indirect memory access.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 37, "last_activity_date": 1456346555, "creation_date": 1456346555, "answer_id": 35612668, "question_id": 35612220, "link": "https://stackoverflow.com/questions/35612220/why-does-stdlistreverse-have-on-complexity/35612668#35612668", "title": "Why does std::list::reverse have O(n) complexity?", "body": "<p>Surely since all containers that support bidirectional iterators have the concept of rbegin() and rend(), this question is moot? </p>\n\n<p>It's trivial to build a proxy that reverses the iterators and access the container through that. </p>\n\n<p>This non-operation is indeed O(1).</p>\n\n<p>such as:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;string&gt;\n#include &lt;iterator&gt;\n\ntemplate&lt;class Container&gt;\nstruct reverse_proxy\n{\n    reverse_proxy(Container&amp; c)\n    : _c(c)\n    {}\n\n    auto begin() { return std::make_reverse_iterator(std::end(_c)); }\n    auto end() { return std::make_reverse_iterator(std::begin(_c)); }\n\n    auto begin() const { return std::make_reverse_iterator(std::end(_c)); }\n    auto end() const { return std::make_reverse_iterator(std::begin(_c)); }\n\n    Container&amp; _c;\n};\n\ntemplate&lt;class Container&gt;\nauto reversed(Container&amp; c)\n{\n    return reverse_proxy&lt;Container&gt;(c);\n}\n\nint main()\n{\n    using namespace std;\n    list&lt;string&gt; l { \"the\", \"cat\", \"sat\", \"on\", \"the\", \"mat\" };\n\n    auto r = reversed(l);\n    copy(begin(r), end(r), ostream_iterator&lt;string&gt;(cout, \"\\n\"));\n\n    return 0;\n}\n</code></pre>\n\n<p>expected output:</p>\n\n<pre><code>mat\nthe\non\nsat\ncat\nthe\n</code></pre>\n\n<p>Given this, it seems to me that the standards committee have not taken time to mandate O(1) reverse-ordering of the container because it's not necessary, and the standard library is largely built on the principle of mandating only what is strictly necessary while avoiding duplication.</p>\n\n<p>Just my 2c.</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 3102370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9de093c0f4613dcf51716756a7c5a31?s=128&d=identicon&r=PG&f=1", "display_name": "danilobraga", "link": "https://stackoverflow.com/users/3102370/danilobraga"}, "is_accepted": false, "score": 1, "last_activity_date": 1456487231, "creation_date": 1456487231, "answer_id": 35650903, "question_id": 35612220, "link": "https://stackoverflow.com/questions/35612220/why-does-stdlistreverse-have-on-complexity/35650903#35650903", "title": "Why does std::list::reverse have O(n) complexity?", "body": "<p>Only an algorithm explanation. \nImagine you have an array with elements, then you need to inverted it.\nThe basic idea is to iterate on each element changing the element on the\nfirst position to the last position, the element on second position to penultimate position, and so on. When you reach at the middle of the array you'll have all elements changed, thus in (n/2) iterations, which is considered O(n).</p>\n"}, {"tags": [], "owner": {"reputation": 1741, "user_id": 5093068, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2pAGF.png?s=128&g=1", "display_name": "SDsolar", "link": "https://stackoverflow.com/users/5093068/sdsolar"}, "is_accepted": false, "score": 1, "last_activity_date": 1458172451, "last_edit_date": 1458172451, "creation_date": 1456861099, "answer_id": 35731915, "question_id": 35612220, "link": "https://stackoverflow.com/questions/35612220/why-does-stdlistreverse-have-on-complexity/35731915#35731915", "title": "Why does std::list::reverse have O(n) complexity?", "body": "<p>It is O(n) simply because it needs to copy the list in reverse order.  Each individual item operation is O(1) but there are n of them in the entire list.  </p>\n\n<p>Of course there are some constant-time operations involved in setting up the space for the new list, and changing pointers afterwards, etc.  The O notation doesn't consider individual constants once you include a first-order n factor.  </p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 3921632, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/Tsqjc.jpg?s=128&g=1", "display_name": "techcomp", "link": "https://stackoverflow.com/users/3921632/techcomp"}, "is_accepted": false, "score": 2, "last_activity_date": 1456893833, "creation_date": 1456893833, "answer_id": 35738691, "question_id": 35612220, "link": "https://stackoverflow.com/questions/35612220/why-does-stdlistreverse-have-on-complexity/35738691#35738691", "title": "Why does std::list::reverse have O(n) complexity?", "body": "<p>It also swaps previous and next pointer for every node. Thats why it takes Linear. Although it can be done in O(1) if the function using this LL also takes information about LL as input like whether it is accessing normally or reverse.  </p>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9818, "favorite_count": 14, "protected_date": 1457585253, "accepted_answer_id": 35612350, "answer_count": 7, "score": 193, "last_activity_date": 1458172451, "creation_date": 1456345080, "last_edit_date": 1456571737, "question_id": 35612220, "link": "https://stackoverflow.com/questions/35612220/why-does-stdlistreverse-have-on-complexity", "title": "Why does std::list::reverse have O(n) complexity?", "body": "<p>Why does the reverse function for the <code>std::list</code> class in the C++ standard library have linear runtime? I would think that for doubly-linked lists the reverse function should have been O(1).  </p>\n\n<p>Reversing a doubly-linked list should just involve switching the head and the tail pointers.</p>\n"}, {"tags": ["c++", "debugging", "windows-store-apps", "windows-10-universal"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1456348638, "post_id": 35612194, "comment_id": 58910353, "body": "Couldn&#39;t you just ask for a User Prompt to confirm that the debugger is attached before continuing initialization? As long as it&#39;s not part of a public release, I see no issue doing that."}], "answers": [{"comments": [{"owner": {"reputation": 757, "user_id": 1220338, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/78cb6dfe63d03ee7196863e9822bce3e?s=128&d=identicon&r=PG", "display_name": "jocopa3", "link": "https://stackoverflow.com/users/1220338/jocopa3"}, "edited": false, "score": 0, "creation_date": 1456449754, "post_id": 35622029, "comment_id": 58964691, "body": "Not exactly. The apps themselves are already compiled and deployed, the tool that I&#39;m writing will launch the apps and inject a custom written debugger as a DLL before the app initializes."}, {"owner": {"reputation": 464, "user_id": 1396617, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb9c56f969ac279dc7f29109a1ae35d3?s=128&d=identicon&r=PG", "display_name": "Kris Morness", "link": "https://stackoverflow.com/users/1396617/kris-morness"}, "edited": false, "score": 0, "creation_date": 1511557680, "post_id": 35622029, "comment_id": 81914809, "body": "Can you share details of what was included? Mine barfs on CLSID_PackageDebugSettings with identifier SHGDNF and no GUID has been associated with this object. I&#39;d type out the full error, but apparently no way to format comments with whitespace..."}], "tags": [], "owner": {"reputation": 3, "user_id": 1618976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69a764fc13909d2eda645cbc65fa088?s=128&d=identicon&r=PG", "display_name": "user1618976", "link": "https://stackoverflow.com/users/1618976/user1618976"}, "is_accepted": false, "score": 0, "last_activity_date": 1456388973, "creation_date": 1456388973, "answer_id": 35622029, "question_id": 35612194, "link": "https://stackoverflow.com/questions/35612194/suspend-windows-10-store-app-on-launch/35622029#35622029", "title": "Suspend Windows 10 Store App on launch", "body": "<p>In Visual Studio go to the properties of your project. Then go into the Debug tab and select 'Do not launch, but debug my code when it starts'. </p>\n\n<p>Is this what you're looking for?</p>\n"}, {"tags": [], "owner": {"reputation": 757, "user_id": 1220338, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/78cb6dfe63d03ee7196863e9822bce3e?s=128&d=identicon&r=PG", "display_name": "jocopa3", "link": "https://stackoverflow.com/users/1220338/jocopa3"}, "is_accepted": true, "score": 1, "last_activity_date": 1457790071, "last_edit_date": 1457790071, "creation_date": 1457787269, "answer_id": 35957872, "question_id": 35612194, "link": "https://stackoverflow.com/questions/35612194/suspend-windows-10-store-app-on-launch/35957872#35957872", "title": "Suspend Windows 10 Store App on launch", "body": "<p>Looking back, I nearly answered my own question within the question itself. To launch a Windows 10 Store app in a suspended state, use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/hh707022(v=vs.85).aspx\" rel=\"nofollow\"><code>IPackageDebugSettings::EnableDebugging</code></a> method to set an executable as a debugger. The app being debugged will launch suspended automatically; it's then the debugger's responsibility to resume the app.</p>\n\n<p>What I ended up doing in my project is something akin to this: </p>\n\n<pre><code>// Gets the current application's UserModelId and PackageId from the registry\nstd::wstring appName = AppUtils::GetApplicationUserModelId();\nstd::wstring appFullName = AppUtils::GetApplicationPackageId();\n\nHRESULT hResult = S_OK;\n\n// Create a new instance of IPackageDebugSettings\nATL::CComQIPtr&lt;IPackageDebugSettings&gt; debugSettings;\nhResult = debugSettings.CoCreateInstance(CLSID_PackageDebugSettings, NULL, CLSCTX_ALL);\nif(hResult != S_OK) return hResult;\n\n// Enable debugging and use a custom debugger\nhResult = debugSettings-&gt;EnableDebugging(appFullName.c_str(), pathToDebugger.c_str(), NULL);\nif(hResult != S_OK) return hResult;\n\n// Launch the application\nDWORD dwProcessId = 0;\nhResult = AppUtils::LaunchApplication(appName, &amp;dwProcessId);\nif(hResult != S_OK) return hResult;\n\n/* Do more stuff after the app has been resumed by the debugger */\n\n// Stop debugging the application so it can run as normal\nhResult = debugSettings-&gt;DisableDebugging(appFullName.c_str());\nif(hResult != S_OK) return hResult;\n</code></pre>\n\n<p>I wrote a basic wrapper for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/hh707019(v=vs.85).aspx\" rel=\"nofollow\"><code>IPackageDebugSettings</code></a> as well as a few utility functions for dealing with Windows 10 Store apps to make the overall process easier.</p>\n"}], "owner": {"reputation": 757, "user_id": 1220338, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/78cb6dfe63d03ee7196863e9822bce3e?s=128&d=identicon&r=PG", "display_name": "jocopa3", "link": "https://stackoverflow.com/users/1220338/jocopa3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 35957872, "answer_count": 2, "score": 0, "last_activity_date": 1457790071, "creation_date": 1456345000, "last_edit_date": 1457787315, "question_id": 35612194, "link": "https://stackoverflow.com/questions/35612194/suspend-windows-10-store-app-on-launch", "title": "Suspend Windows 10 Store App on launch", "body": "<p>I am writing a tool in C++ to help debug and test deployed Windows 10 Store Apps. One of the problems I've run into is that I need a way to launch a Store App in a suspended state so I can attach a debugger before the app initializes. The usual way I know of to do something like this would be to set a hook on process creation in the parent process and forcibly flag the created process to start in a suspended state; however, for Store Apps, the parent process that creates the actual app process is svchost.exe which runs at a system level and can't be hooked without a kernel-mode driver of some sort.</p>\n\n<p>I am using the <code>IApplicationActivationManager</code> interface to launch applications, and am using the <code>IPackageDebugSettings</code> interface to control/debug them after launch. Is there a way I can suspend a Windows 10 Store App when it launches so that it isn't allowed to first initialize?</p>\n"}, {"tags": ["c++", "msvc12"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1456344869, "post_id": 35612005, "comment_id": 58908223, "body": "Note, the same issue also applies to the destructor as well.  A parent class constructor cannot call virtual methods in the child class because the child class is not constructed until after the parent is constructed, and a parent class destructor cannot call virtual methods in the child class because the child has already been destructed before the parent is destructed."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1456344601, "creation_date": 1456344601, "answer_id": 35612050, "question_id": 35612005, "link": "https://stackoverflow.com/questions/35612005/why-do-constructors-ignore-overriden-virtual-functions/35612050#35612050", "title": "Why do constructors ignore overriden virtual functions?", "body": "<p>An instance of child cannot exist unless an instance of parent already exists. So in the constructor of parent, no instance of child can exist. So how could you call <code>child::stuff</code> if no child exists?</p>\n"}], "owner": {"reputation": 5189, "user_id": 4049658, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cc923cb7c9b2d8add8f2f373a8ffe0f5?s=128&d=identicon&r=PG&f=1", "display_name": "user81993", "link": "https://stackoverflow.com/users/4049658/user81993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "closed_date": 1456344581, "answer_count": 1, "score": 0, "last_activity_date": 1456344601, "creation_date": 1456344430, "question_id": 35612005, "link": "https://stackoverflow.com/questions/35612005/why-do-constructors-ignore-overriden-virtual-functions", "closed_reason": "Duplicate", "title": "Why do constructors ignore overriden virtual functions?", "body": "<p>Heres an example:</p>\n\n<pre><code>struct parent {\n    int a;\n\n    virtual void stuff() { a = 5; } //variant A\n    void roundabout() { stuff(); }\n    parent() { stuff(); }\n};\n\nstruct child : parent {\n    void stuff() override { a = 6; } //variant B\n    child() : parent() {}\n};\n</code></pre>\n\n<p>and usage</p>\n\n<pre><code>child c;  //calls variant A\nauto p = reinterpret_cast&lt;parent*&gt;(&amp;c);\n\nc.stuff(); //calls variant B\nc.roundabout(); //calls variant B\np-&gt;stuff(); //calls variant B\np-&gt;roundabout() //calls variant B\n</code></pre>\n\n<p>so after construction, any which way I call stuff() from inside or outside the class, without explicitly stating parent::stuff() I get child::stuff(), as expected. </p>\n\n<p>The one exception is the constructor of parent that still calls parent::stuff() even though its triggered by the child constructor. This is really rather annoying since I have to include extra logic in the functions that the constructors call to make them behave as they should. Why is it like this?</p>\n"}, {"tags": ["c++", "loops", "series", "approximation"], "comments": [{"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 4, "creation_date": 1456344273, "post_id": 35611947, "comment_id": 58907881, "body": "Integer division.<code>x &#47; y</code> is <code>0</code> for pair of integral numbers with <code>x &lt; y</code>. Only <code>i = 0</code> actually contributes to <code>pi</code>."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1456344417, "post_id": 35611947, "comment_id": 58907966, "body": "Some code stuff: a) Don&#39;t get used to that <code>_t</code> stuff, better forget about it completely. b) Indentation."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1456345327, "post_id": 35611947, "comment_id": 58908524, "body": "Based on the example series shown, the for loop should be | for (i = 0; i &lt;= n; i++) | . It would be a bit more accurate if you did the smaller numbers first: | for(i = n; i &gt;= 0; i--) | ."}, {"owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1456346140, "post_id": 35611947, "comment_id": 58909003, "body": "@DavidHeffernan, this is not really a dupp, because integer division was not part of the question. This is a code analysis/debug question."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "edited": false, "score": 0, "creation_date": 1456346552, "post_id": 35611947, "comment_id": 58909206, "body": "@ThomasMcLeod I can see integer division in the question"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1456348189, "post_id": 35611947, "comment_id": 58910112, "body": "@DavidHeffernan I also don&#39;t think its an <i>exact</i> duplicate. While it is similar, I am not sure this is the right dupe to close this on."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1456348342, "post_id": 35611947, "comment_id": 58910187, "body": "@Ben It&#39;s an exact dupe, and there are probably thousands to choose from."}, {"owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1456350838, "post_id": 35611947, "comment_id": 58911594, "body": "@DavidHeffernan, you and I may immediately recognize integer division, but OP only knew that his loop result was repeating without apparent progress. So while the answer is relates to integer division, the question was about language semantics and code analysis."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "edited": false, "score": 0, "creation_date": 1456351196, "post_id": 35611947, "comment_id": 58911796, "body": "@Thomas Your argument is that the asker has to know the answer beforehand, which makes no sense to me"}, {"owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1456351873, "post_id": 35611947, "comment_id": 58912160, "body": "@DavidHeffernan, actually I&#39;m saying the exact opposite. Since the OP didn&#39;t know and could not have known it was an integer division issue, the question cannot be a duplicate of a question that was explicitly about integer division."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "edited": false, "score": 0, "creation_date": 1456352258, "post_id": 35611947, "comment_id": 58912382, "body": "@Thomas You&#39;ve misread the other question. The asker of that question expected real division rather then integer division."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2378106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d56edbabefd564f9027f837d313cdf2?s=128&d=identicon&r=PG", "display_name": "ryan carter", "link": "https://stackoverflow.com/users/2378106/ryan-carter"}, "edited": false, "score": 0, "creation_date": 1456346189, "post_id": 35612043, "comment_id": 58909023, "body": "Thank you so much!! That was killing me."}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 0, "last_activity_date": 1456344925, "last_edit_date": 1495540768, "creation_date": 1456344582, "answer_id": 35612043, "question_id": 35611947, "link": "https://stackoverflow.com/questions/35611947/estimating-pi-with-c-for-loop/35612043#35612043", "title": "Estimating pi with c++ for loop", "body": "<p>The problem is you are using <code>ints</code> when calculating a floating point number. Read about this here: <a href=\"https://stackoverflow.com/questions/7571326/why-cant-i-return-a-double-from-two-ints-being-divided\">Why can&#39;t I return a double from two ints being divided</a></p>\n\n<p>So to avoid this you need to do the math with floating point numbers:</p>\n\n<pre><code>pi = pi + (1.0 / (2.0 * i + 1.0));\n</code></pre>\n\n<p>In fact it is a good idea to always explicitly specify when you intend to use floating point, even if it is unnecessary:</p>\n\n<pre><code>const float pi_real = 3.14159;\nconst float one = 1.0;\n</code></pre>\n\n<p>This makes your intention clear and avoids mistakes like this. <a href=\"http://ideone.com/6fWhWT\" rel=\"nofollow noreferrer\">Here is a live example.</a> </p>\n"}], "owner": {"reputation": 13, "user_id": 2378106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d56edbabefd564f9027f837d313cdf2?s=128&d=identicon&r=PG", "display_name": "ryan carter", "link": "https://stackoverflow.com/users/2378106/ryan-carter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1865, "favorite_count": 0, "closed_date": 1456345035, "accepted_answer_id": 35612043, "answer_count": 1, "score": 0, "last_activity_date": 1456344925, "creation_date": 1456344200, "last_edit_date": 1456344275, "question_id": 35611947, "link": "https://stackoverflow.com/questions/35611947/estimating-pi-with-c-for-loop", "closed_reason": "Duplicate", "title": "Estimating pi with c++ for loop", "body": "<p>I am trying to approximate pi using a for loop. The user inputs the number of iterations n, and the program is supposed to get an increasingly accruate value for pi with each additional iteration. I have a nested \"if\" control structure that checks if \"i\" is even or odd. However when my loop repeats after the first run, my value for pi is not changing. Pi is staying at 1 in the loop and the final output is 4. I have to use the approximation series: </p>\n\n<p>pi = 4[ 1 - 1/3 + 1/5 +...+  1/(2n-1) + 1/(2n+1) ]. </p>\n\n<p>What am I doing wrong?</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n{\n\ndouble pi = 0;\nlong i;\nint n;\n\ncout &lt;&lt; \"Enter the value of n: \";   //prompt for input\ncin &gt;&gt; n;                           //store input in \"n\"\ncout &lt;&lt; endl;                       //end line\n\nfor (i = 0; i &lt; n; i++)\n{\n    if (i % 2 == 0)                     //if even\n        pi = pi + (1 / (2 * i + 1));\n    else                                //if odd\n        pi = pi - (1 / (2 * i + 1));\n}\n\npi = 4 * pi;                            //multiply by 4\n\ncout &lt;&lt; endl &lt;&lt; \"pi = \" &lt;&lt; pi &lt;&lt; endl;  //display result\n\nsystem(\"Pause\");    //pause program\nreturn 0;           //close program\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "xor"], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5929408, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/A8FNr.jpg?s=128&g=1", "display_name": "satyajeet jha", "link": "https://stackoverflow.com/users/5929408/satyajeet-jha"}, "edited": false, "score": 0, "creation_date": 1456346360, "post_id": 35612406, "comment_id": 58909096, "body": "can u explain it more clearly with an example ,taking two numbers say 8 and 16"}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": false, "score": 1, "last_activity_date": 1456345663, "creation_date": 1456345663, "answer_id": 35612406, "question_id": 35611921, "link": "https://stackoverflow.com/questions/35611921/maximum-value-of-a-xor-b-for-all-pairs-of-integers-a-b-l-%e2%89%a4-a-%e2%89%a4-b-%e2%89%a4-r/35612406#35612406", "title": "maximum value of a xor b for all pairs of integers a, b (l\u2009\u2264\u2009a\u2009\u2264\u2009b\u2009\u2264\u2009r)", "body": "<p>Well, I can crash that code easily. By entering the same number twice. If l = r then the algorithm crashes, but the largest value for a xor b is obviously 0, since l = a = b = r. </p>\n\n<p>Assume l &lt; r, and that for some n we have (l / (2^n)) = (r / (2^n)). There is such an n because we can just pick n making 2^n > r. And n > 0 because l &lt; r. Pick the smallest such n. </p>\n\n<p>In that case, a / (2^n) has the same value for all a, l \u2264 a \u2264 r. This means that all bits in a^b starting with bit n are zero. Therefore a xor b &lt; 2^n, and we can replace l, r with l modulo (2^n), r modulo (2^n). </p>\n\n<p>On the other hand, n was chosen as small as possible. Therefore bit n-1 is set in r, while bit n-1 is cleared in l. Therefore l &lt; 2^(n-1), r \u2265 2^(n-1). We can pick a = 2^(n-1) - 1, b = 2^(n-1). Then l \u2264 a \u2264 b \u2264 r, and a xor b = 2^n - 1. Since we showed that a xor b is always less than 2^n, but can be 2^n - 1, it follows that 2^n - 1 is the largest value. </p>\n\n<p>Exactly what the algorithm calculates, except that l = r isn't handled correctly. </p>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1456346930, "last_edit_date": 1456346930, "creation_date": 1456346623, "answer_id": 35612688, "question_id": 35611921, "link": "https://stackoverflow.com/questions/35611921/maximum-value-of-a-xor-b-for-all-pairs-of-integers-a-b-l-%e2%89%a4-a-%e2%89%a4-b-%e2%89%a4-r/35612688#35612688", "title": "maximum value of a xor b for all pairs of integers a, b (l\u2009\u2264\u2009a\u2009\u2264\u2009b\u2009\u2264\u2009r)", "body": "<p>Lets take the example with l = 8 and r = 16, or</p>\n\n<pre><code>l = 00010\nr = 00001\n</code></pre>\n\n<p>what the code does, is shifting the bits until the numbers are the same:</p>\n\n<pre><code>num=2  num=4  num=8  num=16   num=32\n\n00100  01000  10000   00000  00000   \n00010  00100  01000   10000  00000   -&gt; done : max xor is 32-1\n</code></pre>\n\n<p>this works, because the biggest xor you can get is the number with as many bits set to 1 as possible, and in general, if you have</p>\n\n<pre><code>l = 0001010101010101011111111111110000001010101010...\nr = 0010101010101010101101010101010100001010101010...\n                                    ^...starting from here they are\n                                        the same (no matter what) \n</code></pre>\n\n<p>the biggest result you can get from an a xor b with l &lt; a &lt; b &lt; r  is </p>\n\n<pre><code>    111111111111111111111111111111110000000000000000000...\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 5929408, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/A8FNr.jpg?s=128&g=1", "display_name": "satyajeet jha", "link": "https://stackoverflow.com/users/5929408/satyajeet-jha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "closed_date": 1457008510, "answer_count": 2, "score": -1, "last_activity_date": 1456346930, "creation_date": 1456344119, "last_edit_date": 1456345073, "question_id": 35611921, "link": "https://stackoverflow.com/questions/35611921/maximum-value-of-a-xor-b-for-all-pairs-of-integers-a-b-l-%e2%89%a4-a-%e2%89%a4-b-%e2%89%a4-r", "closed_reason": "Needs details or clarity", "title": "maximum value of a xor b for all pairs of integers a, b (l\u2009\u2264\u2009a\u2009\u2264\u2009b\u2009\u2264\u2009r)", "body": "<p>The problem asks to find the maximum of a xor b for all pair of integers\npairs of integers a, b (l\u2009\u2264\u2009a\u2009\u2264\u2009b\u2009\u2264\u2009r).If l and R are 8 and 16 ,answer is 31 which is actually 15 xor 16.I came across this piece of code and it gives correct output but the logic part is not clear .</p>\n\n<pre><code>int main() {\n    cin &gt;&gt; A &gt;&gt; B;\n    ll num = 1;\n    while (A / num != B / num) {\n        num *= 2;\n    }\n    cout &lt;&lt; num - 1 &lt;&lt; \"\\n\";\n    return 0;\n}                                         \n</code></pre>\n"}, {"tags": ["c++", "c++11", "boost", "boost-asio", "variadic-templates"], "answers": [{"comments": [{"owner": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "edited": false, "score": 0, "creation_date": 1456345794, "post_id": 35612306, "comment_id": 58908792, "body": "Even if I call the <code>post()</code> function directly with the <code>std::packaged_task</code>, I get the same error... That is -- <code>auto task = std::packaged_task&lt;rType()&gt;(std::bind(std::forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...));</code> and <code>service_.post(std::move(task));</code>"}, {"owner": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "edited": false, "score": 0, "creation_date": 1456346002, "post_id": 35612306, "comment_id": 58908929, "body": "I guess the problem now is that the <code>operator()</code> has a non-<code>void</code> return type"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "edited": false, "score": 0, "creation_date": 1456346670, "post_id": 35612306, "comment_id": 58909265, "body": "@subzero <code>packaged_task::operator()</code> is definitely <code>void</code>, I&#39;m wondering if there&#39;s something fishy with the concept check that they&#39;re doing (like it requires the type to be copyable somewhere)."}, {"owner": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "edited": false, "score": 0, "creation_date": 1456346821, "post_id": 35612306, "comment_id": 58909341, "body": "Wrapping the task in a <code>void</code> return type lambda seems to work... <code>auto task = std::make_shared&lt;std::packaged_task&lt;rType()&gt;&gt;(std::bind(std:&zwnj;&#8203;:forward&lt;F&gt;(f), std::forward&lt;Args&gt;(args)...));   std::future&lt;rType&gt; res = task-&gt;get_future();   service_.post([=] () {     task-&gt;operator()();   });</code>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "edited": false, "score": 0, "creation_date": 1456347377, "post_id": 35612306, "comment_id": 58909697, "body": "@subzero Updated my answer. I guess you could wrap a <code>shared_ptr&lt;packaged_task&gt;</code> too, but that seems unnecessary when you just need to wrap the promise."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "edited": false, "score": 0, "creation_date": 1456347491, "post_id": 35612306, "comment_id": 58909755, "body": "Wow, &quot;<code>io_service</code> will make a copy of the handler&quot; -- I can&#39;t read."}, {"owner": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "edited": false, "score": 0, "creation_date": 1456351602, "post_id": 35612306, "comment_id": 58912026, "body": "Part of the reason for doing this was to allow for void functions to be passed in as well"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "edited": false, "score": 0, "creation_date": 1456353435, "post_id": 35612306, "comment_id": 58912949, "body": "@subzero Then yeah, lambda holding a  <code>shared_ptr&lt;packaged_task&lt;R()&gt;&gt;</code> is probably your best option."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1456347321, "last_edit_date": 1456347321, "creation_date": 1456345343, "answer_id": 35612306, "question_id": 35611846, "link": "https://stackoverflow.com/questions/35611846/boostasio-and-stdpackaged-task/35612306#35612306", "title": "Boost::ASIO and std::packaged_task", "body": "<p>From the documentation for <a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/boost_asio/reference/io_service/post.html\" rel=\"nofollow\"><code>post()</code></a>:</p>\n\n<blockquote>\n  <p><strong>handler</strong></p>\n  \n  <p>The handler to be called. The io_service will make a <strong>copy</strong> of the handler object as required. The function signature of the handler must be: <code>void handler();</code></p>\n</blockquote>\n\n<p>You are passing in a <code>std::shared_ptr&lt;std::packaged_task&lt;int()&gt;&gt;</code>. A <code>shared_ptr</code> doesn't have <code>operator()</code> defined. And <code>packaged_task</code> unwrapped isn't copyable. </p>\n\n<p>So in order to make this work, you'll have to make a <code>shared_ptr&lt;promise&gt;</code>:</p>\n\n<pre><code>using R = std::result_of_t&lt;F(Args&amp;&amp;...)&gt;;\nauto promise = std::make_shared&lt;std::promise&lt;R&gt;&gt;();\nstd::future&lt;R&gt; res = promise-&gt;get_future();\n\nservice.post([promise = std::move(promise),\n    f = std::forward&lt;F&gt;(f),\n    args = std::make_tuple(std::forward&lt;Args&gt;(args)...)]{\n        promise-&gt;set_value(std::experimental::apply(f, args));    \n    });\nreturn res;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1456347002, "creation_date": 1456347002, "answer_id": 35612796, "question_id": 35611846, "link": "https://stackoverflow.com/questions/35611846/boostasio-and-stdpackaged-task/35612796#35612796", "title": "Boost::ASIO and std::packaged_task", "body": "<p>I seem to remember having been bitten by this myself. It's because <code>std::packaged_task</code> is not copyable (the copy constructor is explicitly deleted).</p>\n\n<p>This is because it contains a promise, which is also not copyable - only moveable.</p>\n\n<p><code>asio::io_service</code> demands that handler objects are copyable.</p>\n\n<p>You may want to consider building your own packaged-task-like function object which keeps a shared_ptr to the promise. That would be copyable.</p>\n\n<p>The non-void return type is a red herring - don't waste your time with that.</p>\n\n<p>documentation of packaged task here:  <a href=\"http://en.cppreference.com/w/cpp/thread/packaged_task/packaged_task\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/thread/packaged_task/packaged_task</a></p>\n"}], "owner": {"reputation": 6960, "user_id": 1611307, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/aac7f9a85388beb45df5ee4366240473?s=128&d=identicon&r=PG", "display_name": "ssb", "link": "https://stackoverflow.com/users/1611307/ssb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1001, "favorite_count": 0, "accepted_answer_id": 35612306, "answer_count": 2, "score": 1, "last_activity_date": 1456347321, "creation_date": 1456343929, "question_id": 35611846, "link": "https://stackoverflow.com/questions/35611846/boostasio-and-stdpackaged-task", "title": "Boost::ASIO and std::packaged_task", "body": "<p>I have the following pieces of C++14 code</p>\n\n<pre><code>boost::asio::io_service service_;\n</code></pre>\n\n<p>I want to submit pieces of work into the <code>io_service</code>, using the following code that takes any function, it's input arguments and returns me a <code>std::future</code> to the return value.</p>\n\n<pre><code>template &lt;typename F, typename... Args&gt;\nauto enqueue(F &amp;&amp;f, Args &amp;&amp;... args) -&gt; std::future&lt;typename std::result_of&lt;F(Args...)&gt;::type&gt; {\n  typedef typename std::result_of&lt;F(Args...)&gt;::type rType;\n  auto task = std::make_shared&lt;std::packaged_task&lt;rType()&gt;&gt;(std::bind(std::forward&lt;F&gt;(f),\n                                                                       std::forward&lt;Args&gt;(args)...));\n  std::future&lt;rType&gt; res = task-&gt;get_future();\n  service_.post(task);\n  return res;\n}\n</code></pre>\n\n<p>This was then called using</p>\n\n<pre><code>enqueue([] (int i) {\n  return i+1;\n}, 100);\n</code></pre>\n\n<p>This doesnt seem to be working. I get an error saying that <code>service_.post()</code> was not expecting this input.</p>\n\n<pre><code>xxxxxxxxxxxxxx:49:3:   required from \u2018std::future&lt;typename std::result_of&lt;_Functor(_ArgTypes ...)&gt;::type&gt; enqueue(F&amp;&amp;, Args&amp;&amp; ...) [with F = main()::&lt;lambda()&gt;::&lt;lambda()&gt;; Args = {int}; typename std::result_of&lt;_Functor(_ArgTypes ...)&gt;::type = int]\u2019\nxxxxxxxxxxxxxx:44:6:   required from here\n/usr/include/boost/asio/impl/io_service.hpp:102:3: error: static assertion failed: CompletionHandler type requirements not met\n   BOOST_ASIO_COMPLETION_HANDLER_CHECK(CompletionHandler, handler) type_check;\n   ^\n/usr/include/boost/asio/impl/io_service.hpp:85:3: error: no match for call to \u2018(std::shared_ptr&lt;std::packaged_task&lt;void()&gt; &gt;) ()\u2019\n   BOOST_ASIO_COMPLETION_HANDLER_CHECK(CompletionHandler, handler) type_check;\n   ^\n</code></pre>\n\n<p>As far as I understand the <code>boost::asio</code> documentation, this can be done. Any ideas?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1118, "user_id": 1362085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6108844429ce59a569a369bda74be6e5?s=128&d=identicon&r=PG", "display_name": "Thesane", "link": "https://stackoverflow.com/users/1362085/thesane"}, "edited": false, "score": 0, "creation_date": 1456347751, "post_id": 35611793, "comment_id": 58909891, "body": "check max values for <code>int</code> type"}], "answers": [{"tags": [], "owner": {"reputation": 1118, "user_id": 1362085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6108844429ce59a569a369bda74be6e5?s=128&d=identicon&r=PG", "display_name": "Thesane", "link": "https://stackoverflow.com/users/1362085/thesane"}, "is_accepted": false, "score": 0, "last_activity_date": 1456347990, "creation_date": 1456347990, "answer_id": 35613102, "question_id": 35611793, "link": "https://stackoverflow.com/questions/35611793/returning-nanind-when-m-is-big/35613102#35613102", "title": "Returning nan(ind) when M is big", "body": "<p>your counter <code>i</code> is of type <code>int</code> which can only hold up to certain range <a href=\"http://www.tutorialspoint.com/cplusplus/cpp_data_types.htm\" rel=\"nofollow\">Datatypes ranges</a>, if <code>M</code> is bigger than this range, the value of <code>i</code> won't make sense and you may get negative values which will mess up the whole loop.</p>\n\n<p>Also when you assign a value larger the datatype range, it will get truncated. \nfor example </p>\n\n<pre><code>int M = 99999999999;\nstd::cout&lt;&lt;M; // it won't be 99999999999\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2082, "user_id": 5849470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270b9a87f8f1cba83d545b6e601337ea?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jordan", "link": "https://stackoverflow.com/users/5849470/matt-jordan"}, "is_accepted": false, "score": 0, "last_activity_date": 1456351355, "creation_date": 1456351355, "answer_id": 35614090, "question_id": 35611793, "link": "https://stackoverflow.com/questions/35611793/returning-nanind-when-m-is-big/35614090#35614090", "title": "Returning nan(ind) when M is big", "body": "<p>Assuming that</p>\n\n<pre><code>int M = 50000;\n</code></pre>\n\n<p>represents your definition of a big number, I'd say you have a bug in rand_normal or are not using the max() that you expect, or have failed to initialize S and your compiler isn't defaulting it to zero.</p>\n\n<p>If rand_normal() is correct and S is a valid value, sum_payoff should be about 10% higher than 50000 * S, based on the code you have.</p>\n\n<p>Reasoning: all of the terms within exp(...) except rand_normal() are constant, reducing the assignment line in your loop to</p>\n\n<pre><code>double S_T = S*exp(0.004166 + 0.129099*rand_normal());\n</code></pre>\n\n<p>This gives an input range of 0.004166 to 0.133265, with corresponding exp() output range of 1.004175 to 1.142553.  Since S is not modified by the loop, the result will on average be about 10% higher than 50000 * S, whatever S is (assuming it is > 0).</p>\n\n<p>Check to verify that it is calling the max() function you expect to be called; there could be multiple max() definitions in different namespaces, depending on what you are using to build this.  If the wrong max() is being called, the results could be unpredictable.</p>\n\n<p>Check the definition of rand_normal, since unexpected results such as a divide-by-zero error stored as a nan(ind) could carry through the computation if you have floating point exceptions turned off (or are using a compiler that doesn't support them).</p>\n\n<p>If neither of those are the problem, double-check your definition of S (whatever data type it is) and make sure it is initialized correctly and that 50000*S is not big enough to overflow a double data type.</p>\n"}], "owner": {"reputation": 1, "user_id": 5976616, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZoLISKMYkoQ/AAAAAAAAAAI/AAAAAAAAAC4/JHwdWplJTiQ/photo.jpg?sz=128", "display_name": "Sadi Aoun", "link": "https://stackoverflow.com/users/5976616/sadi-aoun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1456351355, "creation_date": 1456343760, "last_edit_date": 1456344057, "question_id": 35611793, "link": "https://stackoverflow.com/questions/35611793/returning-nanind-when-m-is-big", "title": "Returning nan(ind) when M is big", "body": "<p>When <code>M</code> is big it returns <code>sum_payoff = nan(ind)</code>. I don't understand why and this only when <code>M</code> is really big.</p>\n\n<pre><code>int M = 50000;\n\ndouble K = 32; // Strike price\n\ndouble r = 0.05; // Interest Rate\n\ndouble sigma = 0.2; // Underlying's volatility\n\ndouble T = 5.0 / 12.0; // 5 Months Maturity\n\ndouble sum_payoff(0.0);\n\nfor (int i(0); i &lt; M; i++) {\n\ndouble S_T = S*exp((r - pow(sigma, 2))*T + sigma * sqrt(T)*rand_normal());\n\nsum_payoff += max(S_T - K, 0.0);\n\ncout &lt;&lt; sum_payoff &lt;&lt; endl;\n\n}\n\ncout &lt;&lt; \"Sum payoff : \" &lt;&lt; sum_payoff &lt;&lt; endl;\n</code></pre>\n\n<p>PS : <code>rand_normal()</code> return a random number following a standard normal law N(0,1).</p>\n"}, {"tags": ["c++", "multithreading", "for-loop", "memory-leaks", "unique-ptr"], "comments": [{"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1456344031, "post_id": 35611780, "comment_id": 58907729, "body": "<code>RunSimulation</code> takes a pointer but never assigns it anywhere... what&#39;s the purpose of that function ? Also if it would assign the pointer, the <code>get</code> of std::unique_ptr only GETS the pointer, meaning the pointer would be deleted at the end of the scope. You might want to use the function <code>release</code> to pass the ownership of the pointer to the class <code>RunSimulation</code>. (Which still does absolutely nothing...)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1456344176, "post_id": 35611780, "comment_id": 58907810, "body": "<code>get</code> does not move the ownership \u2013 <code>r</code> still owns the object and will destroy the object when assigned to. And the capture by reference means that <code>RunSimulation</code>&#39;s pointer will be to the object that <code>r</code> owns when the thread runs, which may be a lot later. (I also doubt that the assignment and <code>get</code> are thread-safe.)"}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1456344179, "post_id": 35611780, "comment_id": 58907812, "body": "And by the way, regarding the usage of <code>_CrtDumpMemoryLeaks();</code>. You might want to check out <code>atexit</code> and place the call to the memory leaks inside of a <code>void xxx(void)</code> function, or ensure that the call is in the most outer scope after all destruction has finished."}, {"owner": {"reputation": 541, "user_id": 5640500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70c9d4c203aade9d20777b8e78ce05fd?s=128&d=identicon&r=PG&f=1", "display_name": "Tims", "link": "https://stackoverflow.com/users/5640500/tims"}, "reply_to_user": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1456344227, "post_id": 35611780, "comment_id": 58907847, "body": "Thanks @Blacktempel. The example is to support <a href=\"http://stackoverflow.com/help/mcve\">link</a>."}, {"owner": {"reputation": 541, "user_id": 5640500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70c9d4c203aade9d20777b8e78ce05fd?s=128&d=identicon&r=PG&f=1", "display_name": "Tims", "link": "https://stackoverflow.com/users/5640500/tims"}, "edited": false, "score": 0, "creation_date": 1456344783, "post_id": 35611780, "comment_id": 58908166, "body": "By using release, I would have to explicitly free up the pointer. Is there a way to pass on the unique_ptr to RunSimulation as unique_ptr itself where it can end its life? using std::move ends in a runtime crash."}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1456345214, "post_id": 35611780, "comment_id": 58908462, "body": "@Tims You can <code>std::move</code> a <code>std::unique_ptr</code> without any problem. If it does end in a runtime crash, then you did something horribly wrong. Another option would be a <code>std::shared_ptr</code>, though it may not fit the purpose for the usage of the pointer (Nobody knows what you do with it)."}, {"owner": {"reputation": 541, "user_id": 5640500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70c9d4c203aade9d20777b8e78ce05fd?s=128&d=identicon&r=PG&f=1", "display_name": "Tims", "link": "https://stackoverflow.com/users/5640500/tims"}, "reply_to_user": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1456345407, "post_id": 35611780, "comment_id": 58908569, "body": "Thanks @Blacktempel. Edited my post to add the std::move() option. It crashes"}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1456345897, "post_id": 35611780, "comment_id": 58908869, "body": "@Tims The object gets deleted, you still have to take over ownership of it, else it may crash anytime."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1456349113, "post_id": 35611780, "comment_id": 58910624, "body": "@Tims you edited it improperly, remove lambda and it will work (as on example from Nasser)"}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 5640500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70c9d4c203aade9d20777b8e78ce05fd?s=128&d=identicon&r=PG&f=1", "display_name": "Tims", "link": "https://stackoverflow.com/users/5640500/tims"}, "edited": false, "score": 0, "creation_date": 1456345043, "post_id": 35612137, "comment_id": 58908337, "body": "Thanks @Nasser. What is an alternative to pass on the ownership completely to RunSimulation? std::move() crashes"}, {"owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "reply_to_user": {"reputation": 541, "user_id": 5640500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70c9d4c203aade9d20777b8e78ce05fd?s=128&d=identicon&r=PG&f=1", "display_name": "Tims", "link": "https://stackoverflow.com/users/5640500/tims"}, "edited": false, "score": 0, "creation_date": 1456345994, "post_id": 35612137, "comment_id": 58908924, "body": "It doesn&#39;t work because RunSimulation() takes a pointer, when it should take a unique_ptr. I&#39;ve attached an example with std::thread (compiles with c++14 compiler), but it should work with thread_group as well"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 541, "user_id": 5640500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70c9d4c203aade9d20777b8e78ce05fd?s=128&d=identicon&r=PG&f=1", "display_name": "Tims", "link": "https://stackoverflow.com/users/5640500/tims"}, "edited": false, "score": 0, "creation_date": 1456349373, "post_id": 35612137, "comment_id": 58910761, "body": "@Tims it crashes because you use lambda, as you can see Nasser does not"}, {"owner": {"reputation": 541, "user_id": 5640500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70c9d4c203aade9d20777b8e78ce05fd?s=128&d=identicon&r=PG&f=1", "display_name": "Tims", "link": "https://stackoverflow.com/users/5640500/tims"}, "edited": false, "score": 0, "creation_date": 1456351898, "post_id": 35612137, "comment_id": 58912182, "body": "Example does not involve a loop. I added lambda in response to :<a href=\"http://stackoverflow.com/questions/35591510/boost-thread-group-move-ownership-of-unique-ptr-to-thread\" title=\"boost thread group move ownership of unique ptr to thread\">stackoverflow.com/questions/35591510/&hellip;</a>       .... where another reference to unbique_ptr needs to be passed in addition to the one being moved here"}, {"owner": {"reputation": 541, "user_id": 5640500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70c9d4c203aade9d20777b8e78ce05fd?s=128&d=identicon&r=PG&f=1", "display_name": "Tims", "link": "https://stackoverflow.com/users/5640500/tims"}, "edited": false, "score": 0, "creation_date": 1456354925, "post_id": 35612137, "comment_id": 58913573, "body": "@Nasser .. could you please add a loop and put RunSimulation() inside a class .. that would be closer to the problem i have Thanks!"}, {"owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "edited": false, "score": 0, "creation_date": 1456355236, "post_id": 35612137, "comment_id": 58913705, "body": "Making RunSimulation a member function will incur several changes in the answer. Could you please post your actual code, so we can fix it?"}, {"owner": {"reputation": 541, "user_id": 5640500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70c9d4c203aade9d20777b8e78ce05fd?s=128&d=identicon&r=PG&f=1", "display_name": "Tims", "link": "https://stackoverflow.com/users/5640500/tims"}, "edited": false, "score": 0, "creation_date": 1456358019, "post_id": 35612137, "comment_id": 58914691, "body": "Thanks for the consideration @Nasser  .. please find the edited code needing a fix"}], "tags": [], "owner": {"reputation": 3343, "user_id": 2718864, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3qOW3.png?s=128&g=1", "display_name": "nasser-sh", "link": "https://stackoverflow.com/users/2718864/nasser-sh"}, "is_accepted": false, "score": 2, "last_activity_date": 1456345943, "last_edit_date": 1456345943, "creation_date": 1456344876, "answer_id": 35612137, "question_id": 35611780, "link": "https://stackoverflow.com/questions/35611780/stdunique-ptr-in-a-loop-memory-leaks/35612137#35612137", "title": "std::unique_ptr in a loop - memory leaks", "body": "<p>You don't have a memory leak, but that's not to say that your code is correct. Take a look at your loop:</p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++)\n{\n    r = std::unique_ptr&lt;Result&gt;(new Result);\n    threads.create_thread([&amp;] { RunSimulation(r.get()); });\n}\n</code></pre>\n\n<p>Every time you assign a new Result instance to r, the old one gets deleted by the unique_ptr. This could happen before the thread that takes its pointer uses it, in which case you are trying to dereference deleted memory. This is undefined behaviour.</p>\n\n<p><strong>Update</strong> \nHere's an example</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\nclass Result\n{\npublic:\n    Result() : x(0) { }\n    int x;\n};\n\n\nvoid RunSimulation(std::unique_ptr&lt;Result&gt; result)\n{\n    result-&gt;x = 10;\n    std::cout &lt;&lt; result-&gt;x &lt;&lt; std::endl;\n}\n\n\nint main()\n{\n    std::unique_ptr&lt;Result&gt; result = std::make_unique&lt;Result&gt;();\n    std::thread t(RunSimulation, std::move(result));\n    t.join();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 541, "user_id": 5640500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70c9d4c203aade9d20777b8e78ce05fd?s=128&d=identicon&r=PG&f=1", "display_name": "Tims", "link": "https://stackoverflow.com/users/5640500/tims"}, "edited": false, "score": 0, "creation_date": 1456345757, "post_id": 35612217, "comment_id": 58908772, "body": "Edited my post to add code that crashes .. whats an alternative?"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1456348394, "last_edit_date": 1456348394, "creation_date": 1456345068, "answer_id": 35612217, "question_id": 35611780, "link": "https://stackoverflow.com/questions/35611780/stdunique-ptr-in-a-loop-memory-leaks/35612217#35612217", "title": "std::unique_ptr in a loop - memory leaks", "body": "<blockquote>\n  <p>Is unique_ptr being properly used below</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>The object pointed by <code>r</code> is destoyed in successive iterations while it may still be used in the thread where the pointer was copied, resulting in undefined behaviour.</p>\n\n<blockquote>\n  <p>The code ends with some memory leaks (possibly false positives? </p>\n</blockquote>\n\n<p>Probably. You call <code>_CrtDumpMemoryLeaks</code> before <code>r</code> is destroyed, so that memory hasn't yet been deallocated.</p>\n\n<blockquote>\n  <p>I thought moving the ownership to RunSimulation where life of unique_ptr would end</p>\n</blockquote>\n\n<p>That's a sensible idea. I recommend doing that.</p>\n\n<blockquote>\n  <p>however, that ends in an access violation.</p>\n</blockquote>\n\n<p>Then that program probably had a bug in it also.</p>\n\n<hr>\n\n<pre><code>    for (int i = 0; i &lt; 10; i++)\n    {\n        r = std::unique_ptr&lt;Result&gt;(new Result);\n        threads.create_thread([&amp;] { RunGridSimulation(std::move(r)); });\n    }\n</code></pre>\n\n<p>The problem with this alternative (ok, the same problem is also in the original alternative) is that you capture a reference to a local variable, but use the lambda in a thread that lives beyond the scope of the local variable. All threads will be pointing to the same variable and if the threads don't happen to interleave perfectly with the loop, then one thread will be moving from the unique pointer that another thread had already moved from, resulting in undefined behaviour when the pointer is dereferenced.</p>\n\n<p>You must move the unique pointer into the lambda, rather than capture it by reference.</p>\n"}], "owner": {"reputation": 541, "user_id": 5640500, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/70c9d4c203aade9d20777b8e78ce05fd?s=128&d=identicon&r=PG&f=1", "display_name": "Tims", "link": "https://stackoverflow.com/users/5640500/tims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1622, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1456447547, "creation_date": 1456343725, "last_edit_date": 1456447547, "question_id": 35611780, "link": "https://stackoverflow.com/questions/35611780/stdunique-ptr-in-a-loop-memory-leaks", "title": "std::unique_ptr in a loop - memory leaks", "body": "<p>Is unique_ptr being properly used below as intended? The code ends with some memory leaks (possibly false positives? or real leaks?). I thought moving the ownership to RunSimulation where life of unique_ptr would end and newer ones would be created in the loop, however, that ends in an access violation.</p>\n\n<p>Ideally, I would like one of the unique_ptr objects in main() to expire within main() and the other one sent outside main to free up in RunSimulation().</p>\n\n<pre><code>class Result { public: int n; };\n\nvoid RunSimulation(std::unique_ptr&lt;Result&gt; result) {result-&gt;n = 0;}\n\nvoid main()\n{\n        boost::thread_group threads;\n\n        std::unique_ptr&lt;Result&gt; r;\n        std::unique_ptr&lt;Simulation&gt; sim = std::make_unique&lt;Simulation&gt;();\n\n        for (int i = 0; i &lt; 10; i++)\n        {\n            r = std::unique_ptr&lt;Result&gt;(new Result);\n\n            //Erroneous lines:\n            //threads.create_thread(boost::bind(&amp;RunSimulation, std::move(r)));\n            //threads.create_thread([&amp;] {RunSimulation(std::move(r));  });\n        }\n\n        threads.join_all();\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "smart-pointers"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1456343871, "post_id": 35611673, "comment_id": 58907632, "body": "1. Those functions are free floating. They aren&#39;t members of the class. They are tagged as friends so that they and only they can operate on the private data of RefCounter."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1456343935, "post_id": 35611673, "comment_id": 58907665, "body": "2. It is unportable compiler specific atomic variable."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 2, "creation_date": 1456344307, "post_id": 35611673, "comment_id": 58907894, "body": "Others have stated <b>what the code is doing</b> and <b>why it works that way</b> (e.g., the free functions and why their implementation requires the <code>friend</code> keyword). However, I don&#39;t think anyone, except the author of the code, can explain the rationale for doing it that way versus an alternative method (e.g., private member functions)."}, {"owner": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1456344810, "post_id": 35611673, "comment_id": 58908182, "body": "@JamesAdkison The free functions are required by the <code>boost::intrusive_ptr&lt;&gt;</code>. Why he switched from using private methods and instead adjusting the <code>m_refCount</code> directly is harder to explain. I suspect he decided the <code>virtual</code> functions were not needed and since he had to make the free functions friends anyway (to prevent public access to the refcount), he could just change the variable directly."}], "answers": [{"comments": [{"owner": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1456344654, "post_id": 35611870, "comment_id": 58908101, "body": "@Revolver_Ocelot You&#39;re right I missed that. I removed the part about the old version."}], "tags": [], "owner": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "is_accepted": true, "score": 3, "last_activity_date": 1456344629, "last_edit_date": 1456344629, "creation_date": 1456343993, "answer_id": 35611870, "question_id": 35611673, "link": "https://stackoverflow.com/questions/35611673/reference-counter-for-intrusive-smart-pointers/35611870#35611870", "title": "Reference counter for intrusive smart pointers", "body": "<p>The functions are marked <code>friend</code> so that they can edit the <code>m_refCount</code> member variable of the class even though it's private and the functions are not part of the class itself.</p>\n\n<p>The <code>volatile</code> keyword as well as why it's using the <code>__sync_</code> functions is to allow this implementation to work in a multi-threaded environment without using a mutex.</p>\n"}], "owner": {"reputation": 3079, "user_id": 1226655, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Yyz1i.png?s=128&g=1", "display_name": "IDDQD", "link": "https://stackoverflow.com/users/1226655/iddqd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 35611870, "answer_count": 1, "score": 1, "last_activity_date": 1456344629, "creation_date": 1456343387, "question_id": 35611673, "link": "https://stackoverflow.com/questions/35611673/reference-counter-for-intrusive-smart-pointers", "title": "Reference counter for intrusive smart pointers", "body": "<p>The following is a code excerpt written by a colleague that is no longer working with us. I have questions as to why this code was written in this way and not any other. My impression of the colleague is a very good one, he was one of the few people capable of compiling C++ code in his head.</p>\n\n<pre><code>#include &lt;boost/smart_ptr.hpp&gt;\n\nnamespace boost\n{\n\n/*****************************************\nclass RefCounter\n{\nprotected:\n    RefCounter() : m_refCount(0) {}\n    virtual ~RefCounter() { }\n\nprivate:\n    friend void intrusive_ptr_release(RefCounter * p);\n    friend void intrusive_ptr_add_ref(RefCounter * p);\n\n    volatile long m_refCount;\n\n    virtual void incRef() {__sync_add_and_fetch(&amp;m_refCount, 1);}\n    virtual void decRef() {if (__sync_sub_and_fetch(&amp;m_refCount, 1) == 0) delete this;}\n};\n\ninline void intrusive_ptr_add_ref(RefCounter * p)\n{\n    p-&gt;incRef();\n}\n\ninline void intrusive_ptr_release(RefCounter * p)\n{\n    p-&gt;decRef();\n}\n************************************************/\n\nclass RefCounter\n{\nprotected:\n    RefCounter() : m_refCount(0) {}\n    RefCounter(const RefCounter&amp;) : m_refCount(0) {}\n    virtual ~RefCounter() {}\n\n    long getRefCount() const {return m_refCount;}\n\nprivate:\n    friend void intrusive_ptr_release(RefCounter * p);\n    friend void intrusive_ptr_add_ref(RefCounter * p);\n    volatile long m_refCount;\n};\n\ninline void intrusive_ptr_add_ref(RefCounter * p)\n{\n    __sync_add_and_fetch(&amp;p-&gt;m_refCount, 1);\n}\n\ninline void intrusive_ptr_release(RefCounter * p)\n{\n    if (__sync_sub_and_fetch(&amp;p-&gt;m_refCount, 1) == 0) delete p;\n}\n\n} // namespace boost\n</code></pre>\n\n<p>Example of use:</p>\n\n<pre><code>struct Foo : public boost::RefCounter\n{\n    int a;\n};\n\ntypedef boost::intrusive_ptr&lt;Foo&gt; FooIntrusivePtr;\nFooIntrusivePtr fooPtr;\n</code></pre>\n\n<p>My questions are the following:</p>\n\n<ol>\n<li><p>Why use <code>friend</code> keywords? Why not declare the functions public?</p></li>\n<li><p>Why use <code>volative</code> keyword? Where and why could the compiler aggressively optimize this value? Or was this keyword merely used as a precaution?</p></li>\n</ol>\n\n<p>And as a bonus, why was the previous approach (commented out) replaced with the existing code? Was something wrong with the previous approach, a bug or special scenario which did not work as intended?</p>\n\n<p>Much appreciated.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "edited": false, "score": 0, "creation_date": 1456343352, "post_id": 35611589, "comment_id": 58907311, "body": "Your question is not clear to me, do you want to insert 2 integers into a vector in each iteration?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 3, "creation_date": 1456343370, "post_id": 35611589, "comment_id": 58907330, "body": "<code>Will this one work</code> - putting that in your question makes it sound like you haven&#39;t tried your own suggestion, which will discourage people from responding."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1456343401, "post_id": 35611589, "comment_id": 58907352, "body": "what did your compiler say? will it work? Just do it! ...but vectors of vectors is generally not a good idea but you should rethink if you really need the possibility to have rows of different size (Thats what a vector of vectors offers you and if you dont need it you still have to pay for it)"}, {"owner": {"reputation": 107, "user_id": 5168204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ee1e55433c358291c311739fac76c11?s=128&d=identicon&r=PG&f=1", "display_name": "paxie", "link": "https://stackoverflow.com/users/5168204/paxie"}, "edited": false, "score": 0, "creation_date": 1456343457, "post_id": 35611589, "comment_id": 58907390, "body": "I wrote it  - compilator didnt say anything but i have never used vectors so i haven&#39;t figured out how to print it yet"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1456343505, "post_id": 35611589, "comment_id": 58907424, "body": "At first glance, it looks like you may really want something more like <code>struct pointer { int x, y; }; std::vector&lt;point&gt; points;</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1456343554, "post_id": 35611589, "comment_id": 58907453, "body": "<code>std::cout &lt;&lt; v[0][0] &lt;&lt; std::endl;</code> prints the first element"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1456343680, "post_id": 35611589, "comment_id": 58907515, "body": "Unclear. Do you want an <code>x</code> by <code>y</code> rectangular matrix or a 2 by N matrix containing the values read as <code>x</code> and <code>y</code>?"}, {"owner": {"reputation": 107, "user_id": 5168204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ee1e55433c358291c311739fac76c11?s=128&d=identicon&r=PG&f=1", "display_name": "paxie", "link": "https://stackoverflow.com/users/5168204/paxie"}, "edited": false, "score": 0, "creation_date": 1456343750, "post_id": 35611589, "comment_id": 58907566, "body": "@I want to make 2D vector of 2 integers ( x , y ) which i enter each iteration"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1456343953, "post_id": 35611589, "comment_id": 58907674, "body": "@paxie -  Why not test this with a small program first before asking on SO?  The computer won&#39;t explode if you get something wrong."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1456345597, "post_id": 35611589, "comment_id": 58908683, "body": "Go with the 1D vector of XY structures if possible. vector of vectors has hidden performance costs (each vector is a different block of memory leading to increased cache misses) and in this case you pick up the overhead of a data structure designed to hold a variable number of items with iteration support etc... just to store two integers."}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 3, "last_activity_date": 1456344169, "creation_date": 1456344169, "answer_id": 35611933, "question_id": 35611589, "link": "https://stackoverflow.com/questions/35611589/2d-vector-of-unknown-size/35611933#35611933", "title": "2D vector of unknown size", "body": "<p>As pointed out by JerryCoffin, you probably better use a :</p>\n\n<pre><code>struct Point {\n    int x;\n    int y;\n};\n</code></pre>\n\n<p>and then you might overload the output operator</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt; (std::ostream&amp; o,const Point&amp; xy){\n    o &lt;&lt; xy.x &lt;&lt; \" \" &lt;&lt; xy.y;\n    return o;\n}\n</code></pre>\n\n<p>and similar the input operator (see e.g. <a href=\"http://www.tutorialspoint.com/cplusplus/input_output_operators_overloading.htm\" rel=\"nofollow\">here</a>). And then you can use it like this:</p>\n\n<pre><code>int main() {\n    Point xy;\n    std::vector&lt;Point&gt; v;\n    v.push_back(xy);\n    std::cout &lt;&lt; v[0] &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "is_accepted": false, "score": 0, "last_activity_date": 1456344178, "creation_date": 1456344178, "answer_id": 35611934, "question_id": 35611589, "link": "https://stackoverflow.com/questions/35611589/2d-vector-of-unknown-size/35611934#35611934", "title": "2D vector of unknown size", "body": "<blockquote>\n  <p>I wrote it - compilator didnt say anything but i have never used vectors so i haven't figured out how to print it yet</p>\n</blockquote>\n\n<p>You can print using for example a range based for loop (C++11):</p>\n\n<pre><code>for (const auto &amp;vec : v) {     // for every vector in v\n    for (const auto &amp;num : vec) // print the numbers\n        cout &lt;&lt; num &lt;&lt; \" \";\n    cout &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>And regular for loop:</p>\n\n<pre><code>for (unsigned int i = 0; i != v.size(); ++i) {\n    for (unsigned int j = 0; j != v[i].size(); ++j) {\n        cout &lt;&lt; v[i][j] &lt;&lt; \" \";   \n    }\n    cout &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 60, "user_id": 10826362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jPLAc.jpg?s=128&g=1", "display_name": "Rohit Kumar Shrivastava", "link": "https://stackoverflow.com/users/10826362/rohit-kumar-shrivastava"}, "is_accepted": false, "score": 1, "last_activity_date": 1592162823, "creation_date": 1592162823, "answer_id": 62377251, "question_id": 35611589, "link": "https://stackoverflow.com/questions/35611589/2d-vector-of-unknown-size/62377251#62377251", "title": "2D vector of unknown size", "body": "<p>The another way of doing so is to push the value in a 1-D vector and then push that 1-D vector in 2-D vector. I have also printed the values as a test. </p>\n\n<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nint main()\n{\n    int t,n,temp;\n    cin&gt;&gt;t;\n    vector&lt;vector&lt;int&gt;&gt; value;\n    for(int i=0;i&lt;t;i++)\n    {\n        cin&gt;&gt;n;\n        vector&lt;int&gt; x;\n        for(int j=0;j&lt;n;j++)\n        {\n            cin&gt;&gt;temp;\n            x.push_back(temp);\n        }\n        value.push_back(x);\n    }\n    for(int i=0;i&lt;t;i++)\n    {\n        for(int j=0;j&lt;value[i].size();j++)\n        {\n            cout&lt;&lt;value[i][j]&lt;&lt;\" \";\n        }\n        cout&lt;&lt;endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Hope it helps!!</p>\n"}], "owner": {"reputation": 107, "user_id": 5168204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5ee1e55433c358291c311739fac76c11?s=128&d=identicon&r=PG&f=1", "display_name": "paxie", "link": "https://stackoverflow.com/users/5168204/paxie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2742, "favorite_count": 0, "accepted_answer_id": 35611933, "answer_count": 3, "score": 0, "last_activity_date": 1592162823, "creation_date": 1456343164, "question_id": 35611589, "link": "https://stackoverflow.com/questions/35611589/2d-vector-of-unknown-size", "title": "2D vector of unknown size", "body": "<p>I defined an empty vector of vectors :</p>\n\n<pre><code>vector&lt; vector&lt;int&gt; &gt; v;\n</code></pre>\n\n<p>How do i fill that empty vector with vector of size 2 integers ( from input )  each iteration of while loop?</p>\n\n<pre><code>while ( cin &gt;&gt; x &gt;&gt; y ) {\n  //....\n}\n</code></pre>\n\n<p>Will this one work? Or what's the best and most elegant / effective way of doing it? </p>\n\n<pre><code>while ( cin &gt;&gt; x &gt;&gt; y )\n{\n   vector&lt;int&gt; row;\n   row.push_back( x );\n   row.push_back( y );\n   v.push_back( row );\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "hotkeys", "global-hotkey"], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 2593209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/CybVs.jpg?s=128&g=1", "display_name": "calmandniceperson", "link": "https://stackoverflow.com/users/2593209/calmandniceperson"}, "edited": false, "score": 0, "creation_date": 1456347012, "post_id": 35611749, "comment_id": 58909464, "body": "Yes, this is what I was looking for. I should really start reading documentation. Unfortunately, it still doesn&#39;t work. new_screenshot() never gets called. <a href=\"https://gist.github.com/mkocs/26045dc924391a8e4166\" rel=\"nofollow noreferrer\">This</a> is what I currently have."}, {"owner": {"reputation": 1246, "user_id": 167664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuCUB.jpg?s=128&g=1", "display_name": "Georgy Pashkov", "link": "https://stackoverflow.com/users/167664/georgy-pashkov"}, "reply_to_user": {"reputation": 229, "user_id": 2593209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/CybVs.jpg?s=128&g=1", "display_name": "calmandniceperson", "link": "https://stackoverflow.com/users/2593209/calmandniceperson"}, "edited": false, "score": 0, "creation_date": 1456347609, "post_id": 35611749, "comment_id": 58909813, "body": "I see that you don&#39;t set the <code>eventKind</code> member of the <code>EventTypeSpec</code>. Should be <code>kEventHotKeyPressed</code>."}, {"owner": {"reputation": 229, "user_id": 2593209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/CybVs.jpg?s=128&g=1", "display_name": "calmandniceperson", "link": "https://stackoverflow.com/users/2593209/calmandniceperson"}, "edited": false, "score": 0, "creation_date": 1456348063, "post_id": 35611749, "comment_id": 58910042, "body": "That did the trick! Thank you very much. May I ask where you found about how this works? I&#39;m actually just trying to learn how to do some more complicated stuff and couldn&#39;t find any documentation about Carbon at all, since it seems to be deprecated."}, {"owner": {"reputation": 1246, "user_id": 167664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuCUB.jpg?s=128&g=1", "display_name": "Georgy Pashkov", "link": "https://stackoverflow.com/users/167664/georgy-pashkov"}, "reply_to_user": {"reputation": 229, "user_id": 2593209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/CybVs.jpg?s=128&g=1", "display_name": "calmandniceperson", "link": "https://stackoverflow.com/users/2593209/calmandniceperson"}, "edited": false, "score": 0, "creation_date": 1456351347, "post_id": 35611749, "comment_id": 58911896, "body": "I&#39;m using <code>JFHotkeyManager</code> in my app. It&#39;s in Objective C, but should not be too hard to understand: <a href=\"https://github.com/jaz303/JFHotkeyManager\" rel=\"nofollow noreferrer\">github.com/jaz303/JFHotkeyManager</a>"}], "tags": [], "owner": {"reputation": 1246, "user_id": 167664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuCUB.jpg?s=128&g=1", "display_name": "Georgy Pashkov", "link": "https://stackoverflow.com/users/167664/georgy-pashkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1456344665, "last_edit_date": 1456344665, "creation_date": 1456343610, "answer_id": 35611749, "question_id": 35611493, "link": "https://stackoverflow.com/questions/35611493/c-global-hotkeys-with-platform-apis/35611749#35611749", "title": "C++ Global Hotkeys with platform APIs", "body": "<p>Do I understand correctly that you want  to call <code>new_screenshot</code> from the hot key event handler? If so, <code>InstallApplicationEventHandler</code> lets you pass a pointer to user data in 4th argument. Pass a pointer to your <code>MainWindow</code> instance (based on code from the tutorial):</p>\n\n<pre><code>MainWindow *mainWindow = ... // get main window somehow\nInstallApplicationEventHandler(&amp;MyHotKeyHandler,1,&amp;eventType,mainWindow,NULL);\n</code></pre>\n\n<p>Then you can use it in the event handler.</p>\n\n<pre><code>OSStatus MyHotKeyHandler(EventHandlerCallRef nextHandler,EventRef theEvent, void *userData)\n{\n//Do something once the key is pressed\nstatic_cast&lt;MainWindow*&gt;(userData)-&gt;new_screenshot();\nreturn noErr;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 229, "user_id": 2593209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/CybVs.jpg?s=128&g=1", "display_name": "calmandniceperson", "link": "https://stackoverflow.com/users/2593209/calmandniceperson"}, "edited": false, "score": 0, "creation_date": 1456348944, "post_id": 35613265, "comment_id": 58910534, "body": "Thank you for your reply. I think this will be very helpful, since I want to enable this feature on Windows, OSX and Linux. I already read about the RegisterHotkey function in windows API. But how does this-&gt;GetSafeHwnd() work? How would I get the HWND to pass?"}, {"owner": {"reputation": 55, "user_id": 2058604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a93f8a6e376baae03830567518463558?s=128&d=identicon&r=PG", "display_name": "Ram Shmider", "link": "https://stackoverflow.com/users/2058604/ram-shmider"}, "reply_to_user": {"reputation": 229, "user_id": 2593209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/CybVs.jpg?s=128&g=1", "display_name": "calmandniceperson", "link": "https://stackoverflow.com/users/2593209/calmandniceperson"}, "edited": false, "score": 0, "creation_date": 1456349768, "post_id": 35613265, "comment_id": 58910994, "body": "this may give you the hwnd: [link]<a href=\"http://stackoverflow.com/questions/14048565/get-hwnd-on-windows-with-qt5-from-wid[/link]\" title=\"get hwnd on windows with qt5 from wid%5b\">stackoverflow.com/questions/14048565/&hellip;</a>"}, {"owner": {"reputation": 229, "user_id": 2593209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/CybVs.jpg?s=128&g=1", "display_name": "calmandniceperson", "link": "https://stackoverflow.com/users/2593209/calmandniceperson"}, "edited": false, "score": 0, "creation_date": 1456350229, "post_id": 35613265, "comment_id": 58911260, "body": "Thanks a lot! Seems to be just what I needed for Windows."}, {"owner": {"reputation": 55, "user_id": 2058604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a93f8a6e376baae03830567518463558?s=128&d=identicon&r=PG", "display_name": "Ram Shmider", "link": "https://stackoverflow.com/users/2058604/ram-shmider"}, "reply_to_user": {"reputation": 229, "user_id": 2593209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/CybVs.jpg?s=128&g=1", "display_name": "calmandniceperson", "link": "https://stackoverflow.com/users/2593209/calmandniceperson"}, "edited": false, "score": 0, "creation_date": 1456350336, "post_id": 35613265, "comment_id": 58911325, "body": "Great, Good Luck with your project."}, {"owner": {"reputation": 229, "user_id": 2593209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/CybVs.jpg?s=128&g=1", "display_name": "calmandniceperson", "link": "https://stackoverflow.com/users/2593209/calmandniceperson"}, "edited": false, "score": 0, "creation_date": 1456435220, "post_id": 35613265, "comment_id": 58958599, "body": "Could you point me in the right direction here? You seem to know a lot about this and I think my <a href=\"https://gist.github.com/mkocs/dc0a5a122be4df593210\" rel=\"nofollow noreferrer\">code</a> now works because it prints 0x16171fc0 every time I press my exact key combination, but my window never shows up. I guess this is because of the loop? How would I listen for the key combination without blocking the rest? Running it in a separate thread doesn&#39;t seem to work because it doesn&#39;t detect the hotkey combination anymore."}], "tags": [], "owner": {"reputation": 55, "user_id": 2058604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a93f8a6e376baae03830567518463558?s=128&d=identicon&r=PG", "display_name": "Ram Shmider", "link": "https://stackoverflow.com/users/2058604/ram-shmider"}, "is_accepted": false, "score": 1, "last_activity_date": 1456407023, "last_edit_date": 1456407023, "creation_date": 1456348523, "answer_id": 35613265, "question_id": 35611493, "link": "https://stackoverflow.com/questions/35611493/c-global-hotkeys-with-platform-apis/35613265#35613265", "title": "C++ Global Hotkeys with platform APIs", "body": "<p>I did something in the past with MFC and WIN32 API....so it only works on Windows...but pressing <code>ALT+F10</code> was able to hide/show a window...</p>\n\n<pre><code>void CWinHideDlg::OnButtonActive() \n{\n    CString tmp;\n    GetDlgItemText(IDC_BUTTON_ACTIVE,tmp);\n    if(0 == strcmp(tmp.GetBuffer(tmp.GetLength()),\"Activate\"))\n    {\n        m_myAtom=GlobalAddAtom(\"MY_GLOBAL_HOT_HIDE_KEY\");\n        int err=RegisterHotKey(this-&gt;GetSafeHwnd(),m_myAtom,MOD_ALT,VK_F10);\n        SetDlgItemText(IDC_BUTTON_ACTIVE,\"Stop\");\n        CButton *pBtn = (CButton *)GetDlgItem(IDC_BUTTON_UNHIDE);\n        pBtn-&gt;EnableWindow(TRUE);\n        SetDlgItemText(IDC_STATIC_INFO,\"Set the mouse over the window \\nand press ALT + F10 to hide it...\");\n    }\n    else\n    {\n        UnregisterHotKey(this-&gt;GetSafeHwnd(),m_myAtom);\n        GlobalDeleteAtom(m_myAtom);     \n        CButton *pBtn = (CButton *)GetDlgItem(IDC_BUTTON_UNHIDE);\n        pBtn-&gt;EnableWindow(FALSE);\n        SetDlgItemText(IDC_BUTTON_ACTIVE,\"Activate\");\n\n    }   \n}\n</code></pre>\n\n<p>Basically this code activates/deactivates the hot key <code>ALT+F10</code>, once it activates you can hide/unhide a running window on the system by setting the mouse pointer over the window and press <code>ALT+F10</code>...</p>\n\n<p>This is from the <code>WindowProc</code> function:</p>\n\n<pre><code>if(message == WM_HOTKEY)\n    {\n        CString tmp;\n        POINT pc;\n        GetCursorPos(&amp;pc);\n\n\n        if(GetAsyncKeyState(VK_F10))\n        {\n            HWND hwnd=::WindowFromPoint(pc);            \n            if(hwnd)\n            {\n                tmp.Format(\"%08Xh\",hwnd);\n                m_HideWins.InsertString(m_HideWins.GetCount(),tmp);\n                ::ShowWindow(hwnd,SW_HIDE);\n            }\n        }\n    } \n</code></pre>\n\n<p>You can use the code to register your own HOT Key and use it to take a screenshot...</p>\n\n<p>Hope it helps... </p>\n"}], "owner": {"reputation": 229, "user_id": 2593209, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/CybVs.jpg?s=128&g=1", "display_name": "calmandniceperson", "link": "https://stackoverflow.com/users/2593209/calmandniceperson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 35611749, "answer_count": 2, "score": 2, "last_activity_date": 1456407023, "creation_date": 1456342860, "question_id": 35611493, "link": "https://stackoverflow.com/questions/35611493/c-global-hotkeys-with-platform-apis", "title": "C++ Global Hotkeys with platform APIs", "body": "<p>I'm working on an application for taking screenshots on Windows, OSX and Linux in C++/Qt. Now I need to set global hotkeys, so the user can take screenshots when the application is running in the background. I tried with Qxt and UGlobalHotkey, which are both Qt libraries, but neither of them seemed to work.</p>\n\n<p>I tried to implement it for OSX with Carbon <a href=\"http://dbachrach.com/blog/2005/11/program-global-hotkeys-in-cocoa-easily/\" rel=\"nofollow\">(tutorial)</a>, but I need to call a class member function, which just doesn't work. Could someone provide me with an example? You can find my code <a href=\"https://github.com/mkocs/pixmate-client/blob/master/src/mainwindow.cpp\" rel=\"nofollow\">here</a>. The function i need to call is new_screenshot().</p>\n\n<p>Or is there any other way to achieve something like this? I really need my application to take a screenshot from the background, otherwise it's pretty useless (yes, I should probably have implemented it at the very beginning to see if it even works). Would it maybe be better to have a separate client for every platform (Cocoa Swift for OSX, GTK for Linux, C# client for Windows)? I have often thought about this the past few days.</p>\n"}, {"tags": ["c++", "dicom", "dcmtk"], "comments": [{"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1456376685, "post_id": 35611403, "comment_id": 58920273, "body": "what did you do at the end?  where it says;     / Do something useful with pixData..  How did you process it next to see an image?"}], "answers": [{"tags": [], "owner": {"reputation": 3245, "user_id": 5575382, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/057515498825ff836584c58442d8d99c?s=128&d=identicon&r=PG&f=1", "display_name": "kritzel_sw", "link": "https://stackoverflow.com/users/5575382/kritzel-sw"}, "is_accepted": false, "score": 1, "last_activity_date": 1456384392, "creation_date": 1456384392, "answer_id": 35620678, "question_id": 35611403, "link": "https://stackoverflow.com/questions/35611403/get-pixel-data-from-dicom-file-dcm/35620678#35620678", "title": "Get pixel data from DICOM file .dcm", "body": "<p>The code you referenced just extracts the pixel data from the corresponding attribute. But there is much more to this. Different header elements determine how the pixel data is to be interpreted. For this, the class <a href=\"http://support.dcmtk.org/docs/classDicomImage.html\" rel=\"nofollow\">DicomImage</a> can be used. You can either use it to normalize the data to an array of (signed|unsigned) (char|short|int) using getInterData() or for rendering purposes using getOutputData().</p>\n"}], "owner": {"reputation": 21, "user_id": 5976449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bcf29e252f6226377e59356d6f54071?s=128&d=identicon&r=PG&f=1", "display_name": "Some Student", "link": "https://stackoverflow.com/users/5976449/some-student"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1276, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456384392, "creation_date": 1456342544, "last_edit_date": 1456342649, "question_id": 35611403, "link": "https://stackoverflow.com/questions/35611403/get-pixel-data-from-dicom-file-dcm", "title": "Get pixel data from DICOM file .dcm", "body": "<p>How can i get the pixel data from .dcm file as an array variable using DCMTK library? \nI'm using <a href=\"http://support.dcmtk.org/redmine/projects/dcmtk/wiki/Howto_AccessingCompressedData\" rel=\"nofollow\">this</a> site for preference and it didn't work, the data result is very different from the original picture.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015", "code-coverage"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1456342822, "post_id": 35611255, "comment_id": 58907003, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would help. Are you using templated functions?"}, {"owner": {"reputation": 1230, "user_id": 616827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d3b91a916958b97bcfe4b63ef95be1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/616827/jeff"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1456343149, "post_id": 35611255, "comment_id": 58907196, "body": "I agree. No templated functions."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1456343374, "post_id": 35611255, "comment_id": 58907334, "body": "Is the project x64 or x86? I recall that there are issues with x64."}], "answers": [{"tags": [], "owner": {"reputation": 1230, "user_id": 616827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d3b91a916958b97bcfe4b63ef95be1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/616827/jeff"}, "is_accepted": true, "score": 0, "last_activity_date": 1456435979, "creation_date": 1456435979, "answer_id": 35638788, "question_id": 35611255, "link": "https://stackoverflow.com/questions/35611255/visual-studio-2015-code-coverage-wrong-file/35638788#35638788", "title": "Visual Studio 2015 Code Coverage Wrong File", "body": "<p>Apparently, even though VS 2015 supports the C++11 feature <a href=\"https://msdn.microsoft.com/en-us/library/hh567368.aspx\" rel=\"nofollow\">non-static data member initializers</a> (it does compile correctly), the coverage tool chokes on this feature. Here's the MCVE. I'm using VS 14.0.24720.00 Update 1. To reproduce, compile this program then get code coverage by running it using a <a href=\"https://msdn.microsoft.com/en-us/library/ms182626.aspx\" rel=\"nofollow\">Generic Test</a>. If <code>x</code> is initialized, the coverage tool looks for the code for the constructor in the .h file. If you take out  <code>= 0</code>, it correctly identifies the constructor definition as in the .cpp. In my product code, it wasn't the constructor, but seemingly random functions that the coverage tool thought were defined in the .h file. The fix, in my case, was just to move data member initialization to the constructor initialization list.</p>\n\n<pre><code>//.h\nclass Test\n{\npublic:\n    Test();\n    ~Test();\n\n    void Func1();\n\n    void Func2();\n\n    void Func3();\n\n    int x = 0;\n};\n</code></pre>\n\n<p>.</p>\n\n<pre><code>// .cpp\n#include \"Test.h\"\n\n#include &lt;iostream&gt;\n\nTest::Test()\n{\n    std::cout &lt;&lt; \"in Test()\" &lt;&lt; std::endl;\n}\n\nTest::~Test()\n{\n}\n\nvoid Test::Func1()\n{\n    std::cout &lt;&lt; \"in Func1\" &lt;&lt; std::endl;\n\n    Func2();\n\n    Func3();\n}\n\nvoid Test::Func2()\n{\n    std::cout &lt;&lt; \"in Func2\" &lt;&lt; std::endl;\n}\n\nvoid Test::Func3()\n{\n    std::cout &lt;&lt; \"in Func3\" &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 1230, "user_id": 616827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7d3b91a916958b97bcfe4b63ef95be1d?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/616827/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 35638788, "answer_count": 1, "score": 5, "last_activity_date": 1456435979, "creation_date": 1456342066, "question_id": 35611255, "link": "https://stackoverflow.com/questions/35611255/visual-studio-2015-code-coverage-wrong-file", "title": "Visual Studio 2015 Code Coverage Wrong File", "body": "<p>I am using VS 2015 Enterprise, and I ran a generic unit test to analyze code coverage. I am looking at the list of covered blocks per function, and they generally seem correct. However, when I right-click a method -> \"Go to source code\", on some functions it goes to the correct place in the source code (the relevant .cpp file), but on others it tries to open the header file (the source line number is correct, but the code is in the .cpp file--not the .h file). This affects the source code highlighting--the functions which VS thinks are in .h aren't highlighted in the .cpp. I can't determine any difference in the functions (same visibility, same header and source files), except maybe which thread they're called on. Any idea why VS thinks some code is in .h rather than .cpp?</p>\n"}, {"tags": ["c++", "c-preprocessor"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 6, "creation_date": 1456342081, "post_id": 35611213, "comment_id": 58906585, "body": "Do not do it, avoid code obfuscation."}, {"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1456342091, "post_id": 35611213, "comment_id": 58906588, "body": "In short, this is not how the pre-processor works. All the values need to be known ahead of time, otherwise known as <code>const</code>. It seems more like you maybe just want an array?"}, {"owner": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "edited": false, "score": 0, "creation_date": 1456342265, "post_id": 35611213, "comment_id": 58906706, "body": "Sounds like you want an array instead."}, {"owner": {"reputation": 15, "user_id": 5976478, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CoY65bYHDYQ/AAAAAAAAAAI/AAAAAAAAABE/7TJgNIFvE1w/photo.jpg?sz=128", "display_name": "Adrian", "link": "https://stackoverflow.com/users/5976478/adrian"}, "edited": false, "score": 0, "creation_date": 1456342318, "post_id": 35611213, "comment_id": 58906729, "body": "Of course array is a solution, I&#39;m just wondering if there is any other :)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1456343136, "post_id": 35611213, "comment_id": 58907187, "body": "@Adrian What is your actual use case for such macro definition? Sounds like a XY-problem is asked. You should be aware that the peprocessor only does text replacement, and you end up with <code>ct++;</code>and not <code>c1++;</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1456343344, "post_id": 35611213, "comment_id": 58907303, "body": "@Adrian, why <code>std::array</code>, of course! :)"}], "answers": [{"tags": [], "owner": {"reputation": 8149, "user_id": 616644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wVwGC.png?s=128&g=1", "display_name": "Rick Smith", "link": "https://stackoverflow.com/users/616644/rick-smith"}, "is_accepted": true, "score": 2, "last_activity_date": 1456342465, "creation_date": 1456342465, "answer_id": 35611379, "question_id": 35611213, "link": "https://stackoverflow.com/questions/35611213/how-to-use-int-value-in-define-function/35611379#35611379", "title": "How to use int value in define function", "body": "<p>You probably don't want to do this.  Consider using an array:</p>\n\n<pre><code>int word[6];  // Declares 6 int variables\nword[0] = 1;  // Access them with an index, 0 is the first one\nword[5] = 42; // Access the last one.\n</code></pre>\n\n<p>This uses less characters and is how others will expect you to do this.  This is probably what you want.</p>\n"}], "owner": {"reputation": 15, "user_id": 5976478, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CoY65bYHDYQ/AAAAAAAAAAI/AAAAAAAAABE/7TJgNIFvE1w/photo.jpg?sz=128", "display_name": "Adrian", "link": "https://stackoverflow.com/users/5976478/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 35611379, "answer_count": 1, "score": -3, "last_activity_date": 1464851878, "creation_date": 1456341940, "last_edit_date": 1464851878, "question_id": 35611213, "link": "https://stackoverflow.com/questions/35611213/how-to-use-int-value-in-define-function", "title": "How to use int value in define function", "body": "<p>In my program I've a lot of variables which names consist of: word+number.\nFor example if I <code>rand()</code> number 6 - I have to iterate word6.\nI tried to make a define function to make it easier for me, but I don't know how to parse the value of an argument.</p>\n\n<pre><code>#define it(c,t) c ## t\n\n*in main:*\nint c1=0 ,t=1;\nit(c , t)++;\ncout&lt;&lt;c1;\n</code></pre>\n\n<p>Can you tell me how to make it work please?</p>\n"}, {"tags": ["javascript", "c++", "qt", "ember.js"], "comments": [{"owner": {"reputation": 7970, "user_id": 227322, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9df8e10b1e84522c5a3afd056ead0712?s=128&d=identicon&r=PG", "display_name": "villintehaspam", "link": "https://stackoverflow.com/users/227322/villintehaspam"}, "edited": false, "score": 1, "creation_date": 1456342503, "post_id": 35611153, "comment_id": 58906837, "body": "Are you loading from files/embedded resources or from a web site?"}, {"owner": {"reputation": 1519, "user_id": 2214345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eb9d06082d3d6d9c9f769560e361f339?s=128&d=identicon&r=PG", "display_name": "jhammond", "link": "https://stackoverflow.com/users/2214345/jhammond"}, "reply_to_user": {"reputation": 7970, "user_id": 227322, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9df8e10b1e84522c5a3afd056ead0712?s=128&d=identicon&r=PG", "display_name": "villintehaspam", "link": "https://stackoverflow.com/users/227322/villintehaspam"}, "edited": false, "score": 0, "creation_date": 1456343064, "post_id": 35611153, "comment_id": 58907140, "body": "I am going directly to a website.  The vendor provided us with a URL that we can navigate to to preview their work."}], "owner": {"reputation": 1519, "user_id": 2214345, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eb9d06082d3d6d9c9f769560e361f339?s=128&d=identicon&r=PG", "display_name": "jhammond", "link": "https://stackoverflow.com/users/2214345/jhammond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456341751, "creation_date": 1456341751, "question_id": 35611153, "link": "https://stackoverflow.com/questions/35611153/qwebengineview-and-ember-js-es6", "title": "QWebEngineView and Ember.js ES6", "body": "<p>Before I begin, I know almost nothing about JavaScript. I'm just a lowly C++ developer being tasked to do something that <em>should</em> be easy.</p>\n\n<p>In essence, I need to configure a QWebEngineView to show a webpage that is being developed for us by an outside UI vendor.  Whenever I load the page in my QWebEngineView, I get a ton of errors in the JavaScript Console (<a href=\"http://imgur.com/vAapTZW\" rel=\"nofollow\">http://imgur.com/vAapTZW</a>).  However, if I go to the page directly through Chrome, everything looks exactly like it should (<a href=\"http://imgur.com/M58umll\" rel=\"nofollow\">http://imgur.com/M58umll</a>).</p>\n\n<p>I have checked that other webpages can load correctly within my view, but, for whatever reason, not the page that is being developed for us.  I have also scoured the Qt documentation for references to any JavaScripts limitations and have also found none.</p>\n\n<p>For reference, they are using Ember.js with JavaScript version ES6 and I am using the latest version 5.5.1 of the Qt framework, but have also tried 5.3.2. I have also tried using the now deprecated QtWebKit instead of QtWebEngine hoping it was simply a design oversight in the new widget.</p>\n\n<p>Any help either solving this issue or coming up with a strategy to figure out how to debug this would be amazing!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "std"], "comments": [{"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "edited": false, "score": 0, "creation_date": 1456341878, "post_id": 35611069, "comment_id": 58906462, "body": "I&#39;d guess it has something to do with <code>logfile</code> getting destroyed when <code>main()</code> returns and <code>clog</code> getting used and/or destroyed after that."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1456342165, "post_id": 35611069, "comment_id": 58906644, "body": "Did you try attaching a debugger and looking at the backtrace?"}, {"owner": {"reputation": 13, "user_id": 5976463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6035bf102bebc0232f47b750ea6c4f?s=128&d=identicon&r=PG&f=1", "display_name": "cppquestionguy", "link": "https://stackoverflow.com/users/5976463/cppquestionguy"}, "edited": false, "score": 0, "creation_date": 1456342640, "post_id": 35611069, "comment_id": 58906904, "body": "I did, and the segv happens in a flush in exit_(). I don&#39;t get a segv if I change the program save the clog buffer and reassign it back before exit, but I don&#39;t understand why."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1456343012, "post_id": 35611069, "comment_id": 58907113, "body": "<code>logfile</code> destroys its buffer on main end. As <code>clog</code> now shares its buffer, when it tries to flush its content as part of its own destruction, it accesses destroyed object."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1456343055, "post_id": 35611069, "comment_id": 58907132, "body": "See, you have the solution! At the end of <code>main</code> the logfile and its buffer get destroyed. And then <code>clog</code> holds a dangling pointer."}, {"owner": {"reputation": 13, "user_id": 5976463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6035bf102bebc0232f47b750ea6c4f?s=128&d=identicon&r=PG&f=1", "display_name": "cppquestionguy", "link": "https://stackoverflow.com/users/5976463/cppquestionguy"}, "edited": false, "score": 0, "creation_date": 1456343281, "post_id": 35611069, "comment_id": 58907256, "body": "The reason I care is that I am doing the reassignment of clog down in the depths of a subroutine, and I never plan to send output the the previous clog assignment. Saving the old buffer and then making sure that it is reassigned before exit is very inconvenient and unintuitive. I&#39;d rather clean up the old clog locally."}, {"owner": {"reputation": 13, "user_id": 5976463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6035bf102bebc0232f47b750ea6c4f?s=128&d=identicon&r=PG&f=1", "display_name": "cppquestionguy", "link": "https://stackoverflow.com/users/5976463/cppquestionguy"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1456343485, "post_id": 35611069, "comment_id": 58907408, "body": "@Bo Persson     So the problem is that I had logfile on the stack.  Yay!  solved."}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1456343516, "post_id": 35611069, "comment_id": 58907430, "body": "You can circumvent it by making sure that buffer used by clog is not destroyed before clog. Good luck with that."}], "answers": [{"tags": [], "owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "is_accepted": true, "score": 3, "last_activity_date": 1456343283, "creation_date": 1456343283, "answer_id": 35611635, "question_id": 35611069, "link": "https://stackoverflow.com/questions/35611069/segv-on-exit-when-reassigning-stdclog/35611635#35611635", "title": "segv on exit when reassigning std::clog", "body": "<p>The lifetime of <code>std::clog</code> and friends are managed by a static object of type <code>std::ios_base::Init</code> (C++11 27.5.3.1.6 Class ios_base::Init).  When that object is destroyed (after <code>main()</code> returns), it performs the following actions being destroying <code>std::clog</code> and related <code>iostream</code> objects (C++11 27.5.3.1.6/4 Class ios_base::Init):</p>\n\n<blockquote>\n  <p>calls cout.flush(), cerr.flush(), clog.flush(), wcout.flush(), wcerr.flush(), wclog.flush()</p>\n</blockquote>\n\n<p>The call to <code>flush()</code> will use the <code>rdbuf()</code> object in <code>clog</code>, and since the <code>logfile.rdbuf()</code> passed earlier to <code>clog</code> has been destroyed you get undefined behavior.</p>\n"}], "owner": {"reputation": 13, "user_id": 5976463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce6035bf102bebc0232f47b750ea6c4f?s=128&d=identicon&r=PG&f=1", "display_name": "cppquestionguy", "link": "https://stackoverflow.com/users/5976463/cppquestionguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 35611635, "answer_count": 1, "score": 1, "last_activity_date": 1456343283, "creation_date": 1456341457, "question_id": 35611069, "link": "https://stackoverflow.com/questions/35611069/segv-on-exit-when-reassigning-stdclog", "title": "segv on exit when reassigning std::clog", "body": "<p>I get a segmentation fault after exit with g++ for the following program:</p>\n\n<pre><code>#include &lt;iostream&gt;                                                         \n#include &lt;fstream&gt;                                                          \n\nint                                                                         \nmain()                                                                      \n    {                                                                       \n    std::ofstream logfile( \"logfile\" ) ;                                    \n    if( !logfile.is_open() )                                                \n        {                                                                   \n        std::cerr &lt;&lt; \"oops ofstream\\n\" ;                                    \n        return -1 ;                                                         \n        }                                                                   \n    std::clog.flush() ;                                                     \n    std::clog.rdbuf( logfile.rdbuf() ) ;                                    \n\n    std::clog &lt;&lt; \"test output\\n\" ;                                          \n    std::clog.flush() ;                                                     \n    std::cerr &lt;&lt; \"all done\\n\" ;                                             \n\n    return 0 ;                                                              \n    }                                                                       \n</code></pre>\n\n<p>Any clue why?</p>\n"}, {"tags": ["c#", "c++", "sql-server", "serialization", "boost"], "comments": [{"owner": {"reputation": 2287, "user_id": 3697604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ba861fd9c4a0282daf790ff90b75bfe?s=128&d=identicon&r=PG&f=1", "display_name": "willaien", "link": "https://stackoverflow.com/users/3697604/willaien"}, "edited": false, "score": 0, "creation_date": 1456342135, "post_id": 35610993, "comment_id": 58906618, "body": "What are you trying to do, exactly, that you feel this is the best solution?"}, {"owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "reply_to_user": {"reputation": 2287, "user_id": 3697604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ba861fd9c4a0282daf790ff90b75bfe?s=128&d=identicon&r=PG&f=1", "display_name": "willaien", "link": "https://stackoverflow.com/users/3697604/willaien"}, "edited": false, "score": 0, "creation_date": 1456342398, "post_id": 35610993, "comment_id": 58906781, "body": "will update the question"}], "owner": {"reputation": 2257, "user_id": 1530018, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/bcbc00a1cd813900aedb1eebd7113d90?s=128&d=identicon&r=PG&f=1", "display_name": "kreuzerkrieg", "link": "https://stackoverflow.com/users/1530018/kreuzerkrieg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1456343228, "creation_date": 1456341168, "last_edit_date": 1456343228, "question_id": 35610993, "link": "https://stackoverflow.com/questions/35610993/boost-binary-serialization-format-specification", "title": "Boost binary serialization format specification", "body": "<p>Yes, I know, serialized data produced by boost is intended only for the library internal use and not to be read by third parties. However I find myself in a position that I have to mimic binary serialized data originated from .NET (std::vector of tiny PODs) which would be deserialized later by boost (C++ native). CLI/C++ interop with native boost is not possible since the assembly have to be CLR pure.\nIs it feasible? just to write the right sequence of bytes? Is there any binary format spec? I didnt find any.</p>\n\n<p>EDIT001: Some background: I have a table in a database, hundreds of millions of rows. each row consists of two IDs - entity ID, parent entity ID and additional column for entity data (all entity data in the form of JSON, but it doesnt matter, I cant change it). Now, in the native C++ I have to select entities by parent ID to get all entities it has, it would yield (sometimes) 5M rows, as one can guess it will take ages to query, receive, iterate, parse and load into vector of C++ structs. So I've tested what if I have my own table with parent ID as PK and a column with all entities belonging to that ID binary serialized. The result (aside data transfer over network, etc) I can parse (actually, boost can) it in ~400ms which is not blazing fast but good enough for me. Now, how do I get my table populated with binary data? Obviously DBA team cant help here, they know nothing about boost binary format, so I resorted to CLR user defined function which MUST be implemented as \"pure\" CLR. this UDF is supposed to be called from stored procedure which populates table with individual entities and in the end will run over these and create binary bulk. But how I can mimic the boost binary format if I cant call boost (CLI/C++) in my assembly???</p>\n"}, {"tags": ["c++", "templates", "static", "inline", "specialization"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 2, "creation_date": 1456341158, "post_id": 35610939, "comment_id": 58906050, "body": "<code>template &lt;typename Foo, bar&gt;</code> is surely wrong"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 2, "creation_date": 1456341508, "post_id": 35610939, "comment_id": 58906240, "body": "Use <a href=\"http://coliru.stacked-crooked.com/a/dfee575c1fb47b37\" rel=\"nofollow noreferrer\">tag-dispatching</a> if you want to avoid specializing the entire class template"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 3341871, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YkAJo.png?s=128&g=1", "display_name": "Monir Hadji", "link": "https://stackoverflow.com/users/3341871/monir-hadji"}, "edited": false, "score": 0, "creation_date": 1456341522, "post_id": 35611008, "comment_id": 58906248, "body": "Yes, if I want to implement <code>function</code> outside the class, in class.tpp, how to do that properly ? Because I know <code>function</code> is not a template function, but i don&#39;t know the good syntax for the prototype outside the template definition"}], "tags": [], "owner": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "is_accepted": true, "score": 5, "last_activity_date": 1456341992, "last_edit_date": 1495540765, "creation_date": 1456341231, "answer_id": 35611008, "question_id": 35610939, "link": "https://stackoverflow.com/questions/35610939/c-template-static-function-specialization/35611008#35611008", "title": "C++ template, static function specialization", "body": "<p>The function is not a template itself, it is only inside a class template. You can specialize the class for those cases, but not the function itself.</p>\n\n<pre><code>template &lt;class Foo&gt;\nclass MyClass&lt;Foo, 26&gt;\n{\n    static void function() { ... }\n};\n</code></pre>\n\n<p>Provided you have specialized the class like so, you can only declare the function inside the class, and define it outside like so:</p>\n\n<pre><code>template &lt;class Foo&gt;\nvoid MyClass&lt;Foo, 26&gt;::function() { ... }\n</code></pre>\n\n<p>If you don't specialize it beforehand, you'll get a compilation error for using an incomplete type.</p>\n\n<p>You might also find <a href=\"https://stackoverflow.com/questions/12875187/partial-template-specialization-outside-class-definition\">this</a> question and answer on specializing a single function inside a class template relevant. </p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1456344839, "creation_date": 1456344839, "answer_id": 35612120, "question_id": 35610939, "link": "https://stackoverflow.com/questions/35610939/c-template-static-function-specialization/35612120#35612120", "title": "C++ template, static function specialization", "body": "<p>You cannot partial specialize method like that.</p>\n\n<p>You may partial specialize the whole class.</p>\n\n<p>or as alternative, you may forward the implementation to some helper:</p>\n\n<ul>\n<li>struct that you may specialize as you want.</li>\n<li><p>overload (using some dispatching):</p>\n\n<pre><code>namespace detail\n{\n    template &lt;typename Foo, std::size_t bar&gt;\n    void function_impl(MyClass&lt;Foo, bar&gt;&amp; that)\n    {\n        // Generic case.\n    }\n\n    template &lt;typename Foo&gt;\n    void function_impl(MyClass&lt;Foo, 6&gt;&amp; that)\n    {\n        // special case &lt;Foo, 6&gt;.\n    }\n\n    template &lt;typename Foo&gt;\n    void function_impl(MyClass&lt;Foo, 26&gt;&amp; that)\n    {\n        // special case &lt;Foo, 26&gt;.\n    }\n}\n    template &lt;typename Foo, std::size_t bar&gt;\n    inline\n    void\n    MyClass&lt;Foo, bar&gt;::function()\n    {\n        detail::function_impl(*this);\n    }\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": 1, "last_activity_date": 1456349987, "creation_date": 1456349987, "answer_id": 35613712, "question_id": 35610939, "link": "https://stackoverflow.com/questions/35610939/c-template-static-function-specialization/35613712#35613712", "title": "C++ template, static function specialization", "body": "<p>After doing some research; Partial Specialization for member functions of a class template are not allowed, so one would have to specialize the whole class which can be a problem if the actual class is quite large. If you are trying to separate the implementation from the declaration having a wrapper or helper will work, but you must defined that and the partial specialization first. Check out this code here for it compiles, builds and outputs the appropriate values using MSVC 2015 CE.</p>\n\n<p><strong>MyClass.h</strong></p>\n\n<pre><code>#ifndef MY_CLASS_H\n#define MY_CLASS_H\n\n#include &lt;iostream&gt;\n\n// Helper - Wrapper Class\ntemplate&lt;typename Foo, size_t Bar&gt;\nclass specialized {\npublic:\n    inline static void function();\n};\n\n// Partial Specialization\ntemplate&lt;typename Foo&gt;\nclass specialization&lt;Foo, 6&gt; {\npublic:\n    inline static void function();\n};\n\n// Actual Class\ntemplate&lt;typename Foo, size_t Bar = 26&gt;\nclass MyClass {\nprivate:\n    specialized&lt;Foo, Bar&gt; func;\npublic:\n    MyClass();\n\n    inline void function(); // Works\n    // inline static void function(); // Compiler Error\n}; // MyClass\n\n#include \"MyClass.inl\"\n\n#endif // MY_CLASS_H\n</code></pre>\n\n<p><strong>MyClass.inl</strong></p>\n\n<pre><code>// Helper - Wrapper\ntemplate&lt;typename Foo, size_t Bar&gt;\ninline void specialized&lt;Foo, Bar&gt;::function() {\n    std::cout &lt;&lt; \"26\" &lt;&lt; std::endl;\n} // function\n\n// Specialized\ntemplate&lt;typename Foo&gt;\ninline void specialized&lt;Foo, 6&gt;::function() {\n    std::cout &lt;&lt; \"6\" &lt;&lt; std::endl;\n} // function\n\n// Constructor\ntemplate&lt;typename Foo, size_t Bar&gt;\nMyClass&lt;Foo, Bar&gt;::MyClass() {\n} // MyClass\n\n// Class Member Function\ntemplate&lt;typename Foo, size_t Bar&gt;\ninline void MyClass&lt;Foo, Bar&gt;::function() {\n    func.function();\n} // function\n</code></pre>\n\n<p><strong>MyClass.cpp</strong></p>\n\n<pre><code>#include \"MyClass.h\"\n</code></pre>\n\n<p><strong>Main.cpp</strong></p>\n\n<pre><code>#include \"MyClass.h\"\n\nint main() {\n    MyClass&lt;float, 6&gt; a;\n    a.function(); // Prints Out 6\n\n    MyClass&lt;float, 26&gt; b;\n    b.function(); // Prints Out 26\n\n    MyClass&lt;float&gt; c;\n    c.function(); // Prints Out 26\n\n    MyClass&lt;float, x != 6&gt; d;\n    d.function(); // Prints Out 26\n\n    return 0;\n} // Main\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 3341871, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YkAJo.png?s=128&g=1", "display_name": "Monir Hadji", "link": "https://stackoverflow.com/users/3341871/monir-hadji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1506, "favorite_count": 0, "accepted_answer_id": 35611008, "answer_count": 3, "score": 1, "last_activity_date": 1456349987, "creation_date": 1456341012, "question_id": 35610939, "link": "https://stackoverflow.com/questions/35610939/c-template-static-function-specialization", "title": "C++ template, static function specialization", "body": "<p>I have a syntax error with my template</p>\n\n<p>I would like to partial specialize a static function of my template class</p>\n\n<h2>class.hpp</h2>\n\n\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename Foo, size_t bar = 26&gt;\nclass MyClass\n{\n    MyClass();\n    static void function();\n};\n\n#include \"class.tpp\"\n</code></pre>\n\n<h2>class.tpp</h2>\n\n\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename Foo, bar&gt;\nMyClass&lt;Foo, bar&gt;::MyClass()\n{ }\n\ntemplate &lt;typename Foo&gt;\ninline\nvoid\nMyClass&lt;Foo, 6&gt;::function()\n{\n    // ...\n}\n\ntemplate &lt;typename Foo&gt;\ninline\nvoid\nMyClass&lt;Foo, 26&gt;::function()\n{\n    // ...\n}\n</code></pre>\n\n<p><code>error: template definition of non-template</code></p>\n\n<p>I just want to implement <code>MyClass&lt;Foo, bar&gt;::function</code> for bar == 26 and bar == 6</p>\n\n<p>How to do that properly ?\nThanks</p>\n"}, {"tags": ["c++", "http", "post", "encryption"], "comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1456340414, "post_id": 35610606, "comment_id": 58905643, "body": "Use SSL to make life easy. Does your website support the <code>https:&#47;&#47;</code>?"}, {"owner": {"reputation": 1355, "user_id": 4335909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MrGAW.jpg?s=128&g=1", "display_name": "Rana", "link": "https://stackoverflow.com/users/4335909/rana"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1456340509, "post_id": 35610606, "comment_id": 58905694, "body": "not <code>https</code>, it&#39;s <code>http</code>"}], "answers": [{"tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 1, "last_activity_date": 1456342006, "creation_date": 1456342006, "answer_id": 35611232, "question_id": 35610606, "link": "https://stackoverflow.com/questions/35610606/is-cinternetsession-secure-is-it-being-encrypted/35611232#35611232", "title": "Is CInternetSession secure? Is it being encrypted?", "body": "<p><code>GetHttpConnection</code> just calls WinAPI's <code>InternetConnect</code> from WinInet library. It is not secure unless it goes through secure port with <code>INTERNET_DEFAULT_HTTPS_PORT</code> option for \"https://\" URLs.</p>\n\n<p>Lets say the password is \"blue-cheese\". If I tell you the password then everybody else will see it. I could encrypt the password with another password, then I have to tell you the other password, everybody else will see that too. So there is no way I can send you a password over open channel, unless using methods like Diffie-Hellman key exchange.</p>\n\n<p>If the program is for yourself only, or you can protect its method, then you can make a response challenge systems between your software and your website.</p>\n\n<p>If you are making a program for public release then basically this is not possible without SSL, because hackers can monitor what your code does.</p>\n"}], "owner": {"reputation": 1355, "user_id": 4335909, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MrGAW.jpg?s=128&g=1", "display_name": "Rana", "link": "https://stackoverflow.com/users/4335909/rana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 35611232, "answer_count": 1, "score": 1, "last_activity_date": 1456785484, "creation_date": 1456340005, "last_edit_date": 1456785484, "question_id": 35610606, "link": "https://stackoverflow.com/questions/35610606/is-cinternetsession-secure-is-it-being-encrypted", "title": "Is CInternetSession secure? Is it being encrypted?", "body": "<p>I make an <code>HTTP POST</code> request to a SharePoint website which requires the user's <code>credential</code>.</p>\n\n<p>I want to make sure that the <code>username</code> and <code>password</code> that are being used are secure and cannot be easily sniffed. </p>\n\n<p>I have looked around to see if <code>CInternetSession</code> encrypts the data but I haven't found any reliable information.</p>\n\n<p><strong>Is it secure for me to use this code?</strong></p>\n\n<p>I am passing these credential as following:</p>\n\n<pre><code>void CUserPassDiag::Connect(){\n\nCString username;\nCString password;\nm_UsernameCEditControl.GetWindowText(username); // get username\nm_passwordCEditControl.GetWindowText(password); // get password\n\nCInternetSession session(_T(\"session\"));\nCHttpConnection* pServer = NULL;\nCHttpFile* pFile = NULL;\nconst int szBuffSize = 20000; \nchar *szBuff = new char[szBuffSize]; // needed to store the html file\n\ntry\n{\n    /*\n     * First Request - Retrieve the HTML page\n     */\n\n    CString strServerName = _T(\"SPsite\");\n\n    // Physyical Location Widget URL\n    CString strObject = _T(\"/somepage.aspx\");\n\n    // Headers for the POST Request\n    CString headers = _T(\"Content-Type: application/x-www-form-urlencoded\\r\\n\");\n    headers += _T(\"Host: SPsite\\r\\n\");\n    headers += _T(\"Pragma: no-cache\\r\\n\");\n    headers += _T(\"Accept: application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, *//*\\r\\n\");\n    headers += _T(\"Accept-Language: en-CA\\r\\n\");\\\n    headers += _T(\"Referer: SPsite/somepage.aspx\\r\\n\");\n\n    // Headers Ready\n    CString szHeaders = _T(headers);\n\n    // This will store the POST request return value\n    DWORD dwRet;\n\n    // Get connection with username and password\n    pServer = session.GetHttpConnection(strServerName, INTERNET_DEFAULT_HTTP_PORT, _T(username), _T(password));\n\n    // open request\n    pFile = pServer-&gt;OpenRequest(CHttpConnection::HTTP_VERB_POST, strObject);\n    pFile-&gt;AddRequestHeaders(szHeaders);\n    pFile-&gt;SendRequest();\n    }catch(){\n     }\n  }\n</code></pre>\n"}, {"tags": ["c++", "functional-programming", "range-v3", "c++-experimental"], "answers": [{"tags": [], "owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "is_accepted": false, "score": 2, "last_activity_date": 1457545978, "creation_date": 1457545978, "answer_id": 35898990, "question_id": 35610599, "link": "https://stackoverflow.com/questions/35610599/what-is-range-v3-for-makestreamiterate/35898990#35898990", "title": "What is Range V3 for MakeStream::iterate()?", "body": "<p>In range-v3 you would create such a range with <code>view::generate</code>:</p>\n\n<pre><code>auto stream = ranges::view::generate([x=1245]() mutable {\n    auto old = x;\n    if(x % 2 == 0)\n        x /= 2;\n    else\n        x = 3 * x + 1;\n    return old;\n});\n</code></pre>\n\n<p><strong><a href=\"http://coliru.stacked-crooked.com/a/9c4e6fc0aabe328d\" rel=\"nofollow\">DEMO</a></strong></p>\n"}], "owner": {"reputation": 3999, "user_id": 101954, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/37gU2.jpg?s=128&g=1", "display_name": "CW Holeman II", "link": "https://stackoverflow.com/users/101954/cw-holeman-ii"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1504363757, "creation_date": 1456339984, "last_edit_date": 1504363757, "question_id": 35610599, "link": "https://stackoverflow.com/questions/35610599/what-is-range-v3-for-makestreamiterate", "title": "What is Range V3 for MakeStream::iterate()?", "body": "<p><a href=\"http://jscheiny.github.io/Streams/index.html\" rel=\"nofollow\">C++ Streams</a> has <code>iterate()</code> which takes an initial value, <code>n</code> and a function, <code>f()</code> then produces first <code>n</code> followed by <code>f(n)</code>, <code>f(f(n))</code>...</p>\n\n<pre><code>auto stream = MakeStream::iterate(1245, [](int x) {\n    if(x % 2 == 0) {\n        return x / 2;\n    } else {\n        return 3 * x + 1;\n    }\n});\n</code></pre>\n\n<p>What does <a href=\"https://ericniebler.github.io/range-v3/\" rel=\"nofollow\">Range V3</a> have for this?</p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1456340381, "post_id": 35610536, "comment_id": 58905629, "body": "take your pick of online tools to help you get there: <a href=\"https://www.google.com/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=online%20regex%20builder\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"}, {"owner": {"reputation": 352, "user_id": 1601104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Irvqd.jpg?s=128&g=1", "display_name": "Shahid Siddique", "link": "https://stackoverflow.com/users/1601104/shahid-siddique"}, "edited": false, "score": 0, "creation_date": 1456340673, "post_id": 35610536, "comment_id": 58905766, "body": "@KenWite looks like that one asking to parse out function name from the source code. Here my question is more complex. I need to parse out function name from the different function calls."}], "answers": [{"comments": [{"owner": {"reputation": 352, "user_id": 1601104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Irvqd.jpg?s=128&g=1", "display_name": "Shahid Siddique", "link": "https://stackoverflow.com/users/1601104/shahid-siddique"}, "edited": false, "score": 0, "creation_date": 1456346257, "post_id": 35611021, "comment_id": 58909059, "body": "I think there is no easy way. I don&#39;t want to use a parser for this as it is a simple project with a complex issue, though. The regex I use gives me 90% accurate results. I think I&#39;ll be fine with that."}], "tags": [], "owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "is_accepted": false, "score": 3, "last_activity_date": 1456341283, "creation_date": 1456341283, "answer_id": 35611021, "question_id": 35610536, "link": "https://stackoverflow.com/questions/35610536/regex-to-extract-function-from-c-function-calls/35611021#35611021", "title": "Regex to extract function from c++ function calls", "body": "<p>The grammar of C++ is not only not regular, it's actually highly context-sensitive (especially near templates). Even a proper CFG parser won't help you, let alone a plain old regex\u2026 Rather than trying to approximate the impossible using ugly and fragile hacks, why not use an actual tool for the job? If you want to parse C++, then use a C++ parser, such as <a href=\"http://clang.llvm.org/doxygen/group__CINDEX.html\" rel=\"nofollow\">libclang</a>.</p>\n"}], "owner": {"reputation": 352, "user_id": 1601104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Irvqd.jpg?s=128&g=1", "display_name": "Shahid Siddique", "link": "https://stackoverflow.com/users/1601104/shahid-siddique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "closed_date": 1456342498, "answer_count": 1, "score": 3, "last_activity_date": 1456341283, "creation_date": 1456339770, "last_edit_date": 1456341280, "question_id": 35610536, "link": "https://stackoverflow.com/questions/35610536/regex-to-extract-function-from-c-function-calls", "closed_reason": "Duplicate", "title": "Regex to extract function from c++ function calls", "body": "<p>I have to extract a function name from various c++ function calls. Following are some of the function calls examples and extracted function names highlighted.</p>\n\n<ul>\n<li><code>std::basic_fstream&lt;char,std::char_traits&lt;char&gt; &gt;::~basic_fstream&lt;char,std::char_traits&lt;char&gt; &gt;</code>\n~basic_fstream</li>\n<li><code>CSocket::Send</code> send</li>\n<li><p><code>CMap&lt;unsigned int,unsigned int &amp;,tagLAUNCHOBJECT,tagLAUNCHOBJECT &amp;&gt;::RemoveAll\nCerner::Foundations::String::Rep::~Rep</code>~Rep</p></li>\n<li><p><code>CCMessage::~CCMessage</code> ~CCMessage</p></li>\n<li><code>std::_Tree&lt;std::_Tmap_traits&lt;std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt;,u</code>_Tree</li>\n<li><code>Lib::DispatcherCache::~DispatcherCache</code>~DispatcherCache</li>\n<li><p><code>CPrefDataObjectLoader&lt;CPrefManagerKey,CPrefManagerValue,CGetPrefManager,PrefManagerKeyFunctor&gt;::Get</code> Get</p>\n\n<p>The following Regex works for most of the functions </p></li>\n<li><code>/((?:[^:]*))$';/</code> This regex get the string from the last :</li>\n<li><code>/+?(?=&lt;)';/</code> This one removes string that starts with &lt;</li>\n</ul>\n\n<p>But for <code>std::basic_fstream&lt;char,std::char_traits&lt;char&gt; &gt;::~basic_fstream&lt;char,std::char_traits&lt;char&gt; &gt;</code>  the output I get is <code>char_traits</code> because this string is after last ':' but the result should be <code>~basic_fstream</code>. Is there a way I can combine both regex and ignore everything that is within <code>&lt;&gt;</code>?</p>\n"}, {"tags": ["c++", "opengl"], "answers": [{"comments": [{"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1456520930, "post_id": 35610901, "comment_id": 59003729, "body": "That&#39;s only needed for the legacy fixed pipeline. It&#39;s invalid for shader based rendering, which the OP appears to be using."}, {"owner": {"reputation": 93, "user_id": 5976226, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-MH3tnEaWOGs/AAAAAAAAAAI/AAAAAAAABeg/HM2MiQOZIuQ/photo.jpg?sz=128", "display_name": "Uncle Fungus", "link": "https://stackoverflow.com/users/5976226/uncle-fungus"}, "reply_to_user": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1456528493, "post_id": 35610901, "comment_id": 59007082, "body": "@RetoKoradi Thank you for the correction. I&#39;m not terribly experienced with OpenGL yet. One question though; I thought that <code>glEnable(GL_TEXTURE_2D);</code> was required to use any texture function, such as <code>glBindTexture()</code>. Is that just a legacy feature that is no longer necessary, or is it that shaders automatically enable it?"}], "tags": [], "owner": {"reputation": 93, "user_id": 5976226, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-MH3tnEaWOGs/AAAAAAAAAAI/AAAAAAAABeg/HM2MiQOZIuQ/photo.jpg?sz=128", "display_name": "Uncle Fungus", "link": "https://stackoverflow.com/users/5976226/uncle-fungus"}, "is_accepted": false, "score": 0, "last_activity_date": 1456340883, "creation_date": 1456340883, "answer_id": 35610901, "question_id": 35610317, "link": "https://stackoverflow.com/questions/35610317/opengl-not-drawing-my-textured-sprite/35610901#35610901", "title": "OpenGL not drawing my textured sprite", "body": "<p>You need to call <code>glEnable(GL_TEXTURE_2D);</code> to enable use of textures. It would also be preferable to disable it as soon as you are done using that utility, simply by putting <code>glDisable(GL_TEXTURE2D);</code> as soon as you have finished drawing, or whenever you are done working with textures. Hope this helps! I had this problem as well, and it took me a good 3 days of staring at a blinking cursor to figure out.</p>\n"}], "owner": {"reputation": 258, "user_id": 2981488, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/0d3792d4ae54085257f43aeea252c1be?s=128&d=identicon&r=PG&f=1", "display_name": "lefti", "link": "https://stackoverflow.com/users/2981488/lefti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456340883, "creation_date": 1456339068, "question_id": 35610317, "link": "https://stackoverflow.com/questions/35610317/opengl-not-drawing-my-textured-sprite", "title": "OpenGL not drawing my textured sprite", "body": "<p>I'm using shaders and modern OpenGL. I tried glGetError() checks but no error is returned, I also tried debugging with apitrace, but I couldn't find anything. I'm not even sure if the problem is initialization or drawing code.</p>\n\n<p><strong>Sprite init:</strong></p>\n\n<pre><code>void Sprite::init(float _x, float _y, float _width, float _height, const char* texture_path) {\n    x = _x;\n    y = _y;\n    width = _width;\n    height = _height;\n\n    texture.init(texture_path);\n\n    glGenBuffers(1, &amp;vbo);\n    glGenBuffers(1, &amp;ebo);\n\n    // This array will hold our vertex data\n    // We need 4 vertices, and each vertex has 2 floats for X and Y\n    Vertex vertexData[4];\n\n    // Top right\n    vertexData[0].set_position(x + width, y + height);\n    vertexData[0].set_uv(1.0f, 1.0f);\n    // Bottom right\n    vertexData[1].set_position(x + width, y);\n    vertexData[1].set_uv(1.0f, 0.0f);\n    // Bottom left\n    vertexData[2].set_position(x, y);\n    vertexData[2].set_uv(0.0f, 0.0f);\n    // Top left\n    vertexData[3].set_position(x, y + height);\n    vertexData[3].set_uv(0.0f, 1.0f);\n\n    for (int i = 0; i &lt; 4; i++) {\n    vertexData[i].set_color(255, 255, 255, 255);\n    }\n\n    GLuint indices[] = {  // Note that we start from 0!\n        0, 1, 3, // First Triangle\n        1, 2, 3  // Second Triangle\n    };\n    // Bind the vertex buffer object (active buffer)\n    glBindBuffer(GL_ARRAY_BUFFER, vbo);\n    // Upload the buffer data to GPU\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertexData), vertexData, GL_STATIC_DRAW);\n\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ebo);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);\n    // Unbind the buffer\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);\n}\n</code></pre>\n\n<p><strong>Sprite draw:</strong></p>\n\n<pre><code>void Sprite::draw() {\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, texture.id);\n    // Bind the buffer object\n    glBindBuffer(GL_ARRAY_BUFFER, vbo);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, ebo);\n\n    // Tell OpenGL that we want to use the first attribute array\n    glEnableVertexAttribArray(0);\n    glEnableVertexAttribArray(1);\n    glEnableVertexAttribArray(2);\n\n    // This is the position attribute pointer\n    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (void*)offsetof(Vertex, position));\n    // This is the color attribute pointer\n    glVertexAttribPointer(1, 4, GL_UNSIGNED_BYTE, GL_TRUE, sizeof(Vertex), (void*)offsetof(Vertex, color));\n    // This is the UV attribute pointer\n    glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (void*)offsetof(Vertex, uv));\n\n    // Draw the 4 vertices to the screen\n    glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);\n\n    // Disable the vertex attrib array\n    glDisableVertexAttribArray(0);\n    glDisableVertexAttribArray(1);\n    glDisableVertexAttribArray(2);\n\n    // Unbind the VBO and EBO\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);\n}\n</code></pre>\n\n<p><strong>Rendering code:</strong></p>\n\n<pre><code>Sprite sprite;\nsprite.init(0, 0, 500, 500, \"assets/textures/awesomeface.png\");\n\nglClearColor(0.0f, 0.0f, 0.0f, 0.0f);\nglClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n// Enable shader\nshader_program.enable();\n\nsprite.draw();\n\n// Disable shader\nshader_program.disable();\n// Swap buffers\nwindow.swap_window();\n</code></pre>\n"}, {"tags": ["c++", "windows", "driver", "mouse"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1456338971, "post_id": 35610073, "comment_id": 58904736, "body": "<i>&quot;without running a .exe ?&quot;</i> What do you actually mean? If you can hook it from a <code>.dll</code>?"}, {"owner": {"reputation": 609, "user_id": 5063478, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ae9e3e3395ee8c117fc5389ce1c6a735?s=128&d=identicon&r=PG&f=1", "display_name": "iouvxz", "link": "https://stackoverflow.com/users/5063478/iouvxz"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1456366082, "post_id": 35610073, "comment_id": 58917079, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Sorry ,my bad .I edited the question ."}], "owner": {"reputation": 609, "user_id": 5063478, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ae9e3e3395ee8c117fc5389ce1c6a735?s=128&d=identicon&r=PG&f=1", "display_name": "iouvxz", "link": "https://stackoverflow.com/users/5063478/iouvxz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456366116, "creation_date": 1456338269, "last_edit_date": 1456366116, "question_id": 35610073, "link": "https://stackoverflow.com/questions/35610073/is-it-possible-to-get-the-cursor-position-at-driver-level-on-windows", "title": "Is it possible to get the cursor position at driver level on windows?", "body": "<p>Can a mouse diver use a driver level solution to retrieve the current cursor position ? </p>\n\n<p>I'm now developing a virtual mouse project .It's a virtual hid driver .By installing this driver ,it simulates a mouse on my computer ,I can found it in the device manager (it's a virtual device ,don't actually exists).</p>\n\n<p>Then I can use the writefile() function to tell this driver to do driver level operations for me, like move the mouse to (0,0) .This driver would produce an irp and complete it ,then the mouse moved .</p>\n\n<p>I wonder if I can use a readfile() function to tell this driver to retrieve the current cursor position to me.I don't want to use the GetCursorPos() function ,I want the driver do this job on my behalf ,is that possible ?</p>\n\n<p>Let's say I already have a real mouse that I sometimes use it ;a program constantly use SendInput() functions to send mouse moves on the application layer; and a virtual mouse driver trying to figure out the actual position of the mouse .</p>\n\n<p>Can I achieve that? Isn't there a global variable somewhere in the windows system which stores the current position of the mouse that I can just read it on driver level ?</p>\n"}, {"tags": ["c++", "c", "performance", "sockets", "udp"], "comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1456337274, "post_id": 35609536, "comment_id": 58903747, "body": "Why count = 67?  Probably related to minimum ethernet packet size.  from WireShark: &quot;Ethernet packets with less than the minimum 64 bytes for an Ethernet packet (header + user data + FCS) are padded to 64 bytes, which means that if there&#39;s less than 64-(14+4) = 46 bytes of user data, extra padding data is added to the packet.&quot;"}, {"owner": {"reputation": 155, "user_id": 3212185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e975e7ce59b139131ac96f937faa8fa5?s=128&d=identicon&r=PG&f=1", "display_name": "Shaci", "link": "https://stackoverflow.com/users/3212185/shaci"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1456393254, "post_id": 35609536, "comment_id": 58928994, "body": "Maybee when DGLEN = 10 bytes, padding begins to be applied and this leads to 67 datagrams on receive side? I mean this padding fast on fast PC (client UDP), and slow on Galileo(server UDP).. But what about another result data.."}], "owner": {"reputation": 155, "user_id": 3212185, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e975e7ce59b139131ac96f937faa8fa5?s=128&d=identicon&r=PG&f=1", "display_name": "Shaci", "link": "https://stackoverflow.com/users/3212185/shaci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456396010, "creation_date": 1456336589, "last_edit_date": 1456396010, "question_id": 35609536, "link": "https://stackoverflow.com/questions/35609536/testing-udp-performance", "title": "Testing udp performance", "body": "<p>I have Intel Galileo Board (\"low\" performance pc) and PC (\"fast\" performance) linked with Ethernet.\nI wrote UDP server on Galileo and UDP client on PC. Server receives udp packets and accumulates their amount in variable count.\nPart of code:   </p>\n\n<pre><code>static void recvfrom_int(int);\nstatic long count;\nunsigned long long received = 0;     \n\nstatic void recvfrom_int(int signo) {\n    printf(\"\\nreceived %d datagrams\\n\", count);\n    printf(\"\\nreceived bytes: %d\\n\", received);\n    exit(0);\n} \n\nint main () {  \n    signal(SIGINT, recvfrom_int);        \n    int sockfd;\n    struct sockaddr_in servaddr, cliaddr;    \n    char mesg[MAXLINE];        \n    ...\n    ...\n    sockfd = socket (AF_INET, SOCK_DGRAM, 0); \n    ...\n    ...\n    count = 0;     \n    for ( ; ; ) {    \n        received += recvfrom(sockfd, mesg, MAXLINE, 0, (struct sockaddr *)&amp;cliaddr, &amp;len);\n        count++;        \n    }        \n}\n</code></pre>\n\n<p>And i have client code, which send NDG(50000) datagrams, each datagram has size DGLEN.\nPart of client:</p>\n\n<pre><code>#define MAXLINE 90000\n#define NDG 50000 /* datagrams to send */    \n#define DGLEN 3100 /* each datagram size */\n\nint main () {\n    int sockfd;\n    struct sockaddr_in servaddr;\n    char sendline[MAXLINE];   \n    int i;\n    int n = 0;\n    ...\n    ...\n    sockfd = socket(AF_INET, SOCK_DGRAM, 0);\n    connect(sockfd, (struct sockaddr *)&amp;servaddr, sizeof(servaddr));\n    ...\n    //SENDING DATAGRAMS\n    for (i = 0; i &lt; NDG; i++) {\n        n = write(sockfd, sendline, DGLEN);\n    }\n\n}\n</code></pre>\n\n<p>Similar code can be seen Stevens book, chapter 8.13.\n<a href=\"https://rads.stackoverflow.com/amzn/click/com/0139498761\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">http://www.amazon.com/UNIX-Network-Programming-Richard-Stevens/dp/0139498761</a></p>\n\n<p>My results:</p>\n\n<pre><code>DGLEN (DATAGRAM SIZE in bytes)     COUNT (amount of datagrams, RECEIVED ON SERVER)\n   10                                 67\n   50                                 67\n   100                                67\n   200                                68\n   300                                68\n   400                                69\n   500                                94\n   600                              1067\n   700                             12799  \n   800                             25884\n   900                             35542\n  1000                             49957\n  1200                        near 50000\n  1300                        near 50000\n  1400                        near 50000\n  1472                             48338\n  1473                                71\n</code></pre>\n\n<p>I don't undertstand what it means.\nI think, that small count with DGLEN = 1473, it is because ethernet MTU = 1500, and maximum size of datagram without fragmentation is 1472 (1500 Ethernet MTU - 20 for IP header without options - 8 UDP header = 1472). With size 1473 we obtain fragmentation, which leads to small count of received datagrams on server (if i understand correctly, maybee speed of fragmentation on PC more than on Galileo). \nAnd I don't understand, why count = 67 with DGLEN = 10/50/100/.../500 and why it<br>\nthen begins to rise (count = 12799 DGLEN = 700, count = 49957 DGLEN = 1000, etc.)</p>\n\n<p>Rest of data:</p>\n\n<pre><code>1600 70\n2000 72\n2100 1125\n2200 6021\n2300 10404\n2500 20370\n2800 30046\n2900 37729\n2944 39052\n2950 39610\n2952 42907\n2953 15540\n3000 15587\n3100 21373\n</code></pre>\n"}, {"tags": ["c++", "tic-tac-toe"], "comments": [{"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 3, "creation_date": 1456336443, "post_id": 35609458, "comment_id": 58903246, "body": "You&#39;re going to have to define what &quot;having trouble&quot; means. SO is not a code writing service. What specifically are you stuck on?"}, {"owner": {"reputation": 1, "user_id": 5481666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1140872122607859/picture?type=large", "display_name": "sharp_edges", "link": "https://stackoverflow.com/users/5481666/sharp-edges"}, "reply_to_user": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1456336698, "post_id": 35609458, "comment_id": 58903415, "body": "Apologies, I totally understand that SO is not for having someone write your code for you... I have been having issues with the generateCoomputerChoice function. I am unable to get this to work in that the &#39;smartAI&#39; variable is saying it is undefined and also &#39;choice&#39; is saying the same within the second if statement. I am asking for pointers or suggestions as opposed to someone providing the answer"}, {"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1456336861, "post_id": 35609458, "comment_id": 58903506, "body": "<code>smartAI</code> is defined in the scope of <code>main</code>, which your <code>generateComputerChoice</code> can&#39;t access. You need to make <code>smartAI</code> globally accessible somehow or pass the value to <code>generateComputerChoice</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1456362936, "post_id": 35609574, "comment_id": 58916218, "body": "If <code>j</code> is 3 when executing the second <code>if(matrix[i][j]==&#39; &#39;) break;</code> line in <code>get_computer_move()</code>, its index is out of bounds, and when <code>i</code> is 2 here, this will access memory beyond the array&#39;s allocation (this case ends up testing as the &quot;draw&quot; condition, where both <code>i</code> and <code>j</code> are 3 after the outermost loop ends).  This line only exists as a way to allow the inner <code>break</code> to break out of both loops, so it could safely be replaced with <code>if(j &lt; 3) break;</code>"}], "tags": [], "owner": {"reputation": 971, "user_id": 5935366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6dfca29890919ec6ab874cf49b92041?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Gardener", "link": "https://stackoverflow.com/users/5935366/martin-gardener"}, "is_accepted": false, "score": 0, "last_activity_date": 1456336715, "creation_date": 1456336715, "answer_id": 35609574, "question_id": 35609458, "link": "https://stackoverflow.com/questions/35609458/c-tic-tac-toe-ai-woes-not-minmax/35609574#35609574", "title": "C++ Tic Tac Toe AI Woes... Not MINMAX", "body": "<p>AI is basically an agent that can be categorized in several types, you can implement and create a simple reflex agent that basis its move on the best current marker it can place or it can use a utility based agent whose goal is to win with min moves, or stopping using from reaching its goal state.</p>\n\n<p>You must use some kind of a searching agent that uses BFS/DFS/Heuristic etc to check what could be your agents best possible move. For increasing your AI's difficulty you can check provide it with a tree data structure that can search for future moves according to how the game can carry out.</p>\n\n<p>A possible code could be (its copied but provides a basic example of how AI works). </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nchar matrix[3][3];  //intitial matrix declaration\n\nchar check(void); // declaration of functions\nvoid init_matrix(void);\nvoid get_player_move(void);\nvoid get_computer_move(void);\nvoid disp_matrix(void);\n\nint main(void)\n{\n  char done;\n\n  cout&lt;&lt;\"Human vs. AI Tic Tac Toe.\"&lt;&lt;endl;\n  cout&lt;&lt;\"You will be playing against the computer as 'X'\"&lt;&lt;endl;\n\n  done =  ' ';\n  init_matrix();\n\n  do {\n    disp_matrix();\n    get_player_move();\n    done = check(); /* check winner */\n    if(done!= ' ') break; /* if winner found...*/\n    get_computer_move();\n    done = check(); /* check for winner again */\n  } while(done== ' ');\n\n  if(done=='X')\n  cout&lt;&lt;\"Human won! (but AI very dumb anyway)\\n\";\n  else\n  cout&lt;&lt;\"AI so stupid still can win against you...\"&lt;&lt;endl;\n  disp_matrix(); /* show final positions */\n\n  return 0;\n}\n\n/*Functions and function prototypes below\n==============================================================================*/\n\nvoid init_matrix(void) //matrix intitialisation\n{\n  int i, j;\n\n  for(i=0; i&lt;3; i++)\n    for(j=0; j&lt;3; j++) matrix[i][j] =  ' ';\n}\n\n\nvoid get_player_move(void) //call function for player input\n{\n  int x, y;\n\n  cout&lt;&lt;\"Enter X,Y coordinates for your move: \";\n  scanf(\"%d%*c%d\", &amp;x, &amp;y);\n\n  x--; y--;\n\n  if(matrix[x][y]!= ' '){\n    cout&lt;&lt;\"Invalid move, try again.\\n\";\n    get_player_move();\n  }\n  else matrix[x][y] = 'X';\n}\n\nvoid get_computer_move(void) //AI move input\n{\n  int i, j;\n  for(i=0; i&lt;3; i++){\n    for(j=0; j&lt;3; j++)\n      if(matrix[i][j]==' ') break;\n    if(matrix[i][j]==' ') break;\n  }\n\n  if(i*j==9)  {\n    cout&lt;&lt;\"draw\\n\";\n    exit(0);\n  }\n  else\n    matrix[i][j] = 'O';\n}\n\nvoid disp_matrix(void) //matrix display\n{\n  int t;\n\n  for(t=0; t&lt;3; t++)\n{\n    printf(\" %c | %c | %c \",matrix[t][0],\n            matrix[t][1], matrix [t][2]);\n    if(t!=2)\n    printf(\"\\n---|---|---\\n\");\n  }\n  printf(\"\\n\");\n}\n\n\nchar check(void) //used for identifying winner\n{\n  int i;\n\n  for(i=0; i&lt;3; i++)  /* check rows */\n    if(matrix[i][0]==matrix[i][1] &amp;&amp;\n       matrix[i][0]==matrix[i][2]) return matrix[i][0];\n\n  for(i=0; i&lt;3; i++)  /* check columns */\n    if(matrix[0][i]==matrix[1][i] &amp;&amp;\n       matrix[0][i]==matrix[2][i]) return matrix[0][i];\n\n  /* test diagonals */\n  if(matrix[0][0]==matrix[1][1] &amp;&amp;\n     matrix[1][1]==matrix[2][2])\n       return matrix[0][0];\n\n  if(matrix[0][2]==matrix[1][1] &amp;&amp;\n     matrix[1][1]==matrix[2][0])\n       return matrix[0][2];\n\n  return ' ';\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5481666, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1140872122607859/picture?type=large", "display_name": "sharp_edges", "link": "https://stackoverflow.com/users/5481666/sharp-edges"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 585, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1456336715, "creation_date": 1456336316, "question_id": 35609458, "link": "https://stackoverflow.com/questions/35609458/c-tic-tac-toe-ai-woes-not-minmax", "title": "C++ Tic Tac Toe AI Woes... Not MINMAX", "body": "<p>I have been attempting to make a simple Tic Tac Toe AI program with two separate \"modes\". One in which the user will play the computer which will choose a purely random number and another in which the computer's choice will be somewhat educated.</p>\n\n<p>I am having trouble implementing this AI part to the program... I can get it to work fine with just the random tile selection. Any help on this would be greatly appreciated</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n\nusing namespace std;\n\nconst char userMark = 'X';\nconst char computerMark = 'O';\n\nenum gameStatus { gameOnGoing, gameFinished, userWins, computerWins };\n\nclass tictactoe {\n\nprivate:\n    char square[9] = { '0','1','2','3','4','5','6','7','8' };\n    unsigned int delay_ms = 100;\n\npublic:\n    bool active = true;\n    void DrawBoard(void);\n    bool updateBoard(int choice, char playerMark);\n    int generateComputerChoice(void);\n    gameStatus checkGame(void);\n    bool checkforWinningLines(char playerMark);\n    int numberOfAvailableSpaces(void);\n    void delay(void);\n\n    //bool checkforPitfalls(char playerMark);\n\n};\n\nint main()\n{\n    tictactoe game;\n    int choice = 0;\n    char smartAI;\n        cout &lt;&lt; \"Would you like to play on 'hard mode'? (Y/N): \";\n        cin &gt;&gt; smartAI;\n\n    game.DrawBoard();\n\n    while (game.active) {\n        cout &lt;&lt; \"Please enter your available move :\";\n        cin &gt;&gt; choice;\n        if (game.updateBoard(choice, userMark))\n        {\n            game.DrawBoard();\n            game.delay();\n\n            int computerChoice = game.generateComputerChoice();\n            game.updateBoard(computerChoice, computerMark);\n            game.DrawBoard();\n\n            switch (game.checkGame()) {\n            case gameOnGoing:\n                // We just need to around again - game still on\n                break;\n            case gameFinished:\n                cout &lt;&lt; \"Game is over: No winner\" &lt;&lt; endl;\n                game.active = false;\n                break;\n            case userWins:\n                cout &lt;&lt; \"User wins\" &lt;&lt; endl;\n                game.active = false;\n                break;\n            case computerWins:\n                cout &lt;&lt; \"Computer wins\" &lt;&lt; endl;\n                game.active = false;\n                break;\n            }\n        }\n        else\n        {\n            cout &lt;&lt; \"Error: Please select another space\" &lt;&lt; endl;\n            // go around again\n        }\n    }\n    return 0;\n}\n\nbool tictactoe::checkforWinningLines(char playerMark)\n{\n    // Horizontal\n    if ((square[0] == playerMark &amp;&amp;square[1] == playerMark &amp;&amp; square[2] == playerMark) ||\n        (square[3] == playerMark &amp;&amp;square[4] == playerMark &amp;&amp; square[5] == playerMark) ||\n        (square[6] == playerMark &amp;&amp;square[7] == playerMark &amp;&amp; square[8] == playerMark) ||\n        (square[0] == playerMark &amp;&amp;square[3] == playerMark &amp;&amp; square[6] == playerMark) ||\n        (square[1] == playerMark &amp;&amp;square[4] == playerMark &amp;&amp; square[7] == playerMark) ||\n        (square[2] == playerMark &amp;&amp;square[5] == playerMark &amp;&amp; square[8] == playerMark) ||\n        (square[0] == playerMark &amp;&amp;square[4] == playerMark &amp;&amp; square[8] == playerMark) ||\n        (square[2] == playerMark &amp;&amp;square[4] == playerMark &amp;&amp; square[6] == playerMark))\n\n    {\n        return true;\n    }\n\n\n    return false;\n}\nvoid tictactoe::DrawBoard()\n{\n    system(\"cls\");\n    cout &lt;&lt; \"     |     |     \" &lt;&lt; endl;\n    cout &lt;&lt; \"  \" &lt;&lt; square[0] &lt;&lt; \"  |  \" &lt;&lt; square[1] &lt;&lt; \"  |  \" &lt;&lt; square[2] &lt;&lt; endl;\n    cout &lt;&lt; \"_____|_____|_____\" &lt;&lt; endl;\n    cout &lt;&lt; \"     |     |     \" &lt;&lt; endl;\n    cout &lt;&lt; \"  \" &lt;&lt; square[3] &lt;&lt; \"  |  \" &lt;&lt; square[4] &lt;&lt; \"  |  \" &lt;&lt; square[5] &lt;&lt; endl;\n    cout &lt;&lt; \"_____|_____|_____\" &lt;&lt; endl;\n    cout &lt;&lt; \"     |     |     \" &lt;&lt; endl;\n    cout &lt;&lt; \"  \" &lt;&lt; square[6] &lt;&lt; \"  |  \" &lt;&lt; square[7] &lt;&lt; \"  |  \" &lt;&lt; square[8] &lt;&lt; endl;\n    cout &lt;&lt; \"     |     |     \" &lt;&lt; endl &lt;&lt; endl;\n}\n\nvoid tictactoe::delay()\n{\n    //Introduces a delay.\n    //sleep(delay_ms);\n}\n\nbool tictactoe::updateBoard(int choice, char playerMark)\n{\n    bool updated = false;\n    if (choice &lt; 9 &amp;&amp; choice &gt;= 0)\n    {\n        if (square[choice] != userMark &amp;&amp;\n            square[choice] != computerMark)\n        {\n            square[choice] = playerMark;\n            updated = true;\n        }\n        else\n        {\n            //Already chosen - Pick another\n            updated = false;\n        }\n    }\n    else\n    {\n        //Invalid number - not in range.\n        updated = false;\n    }\n\n    return updated;\n}\n\ngameStatus tictactoe::checkGame(void)\n{\n    gameStatus status;\n\n    if (checkforWinningLines(computerMark))\n    {\n        status = computerWins;\n    }\n    else if (checkforWinningLines(userMark))\n    {\n        status = userWins;\n\n    }\n    else    if (numberOfAvailableSpaces() &gt; 0)\n    {\n        status = gameOnGoing;\n    }\n    else\n    {\n        status = gameFinished;\n    }\n\n    return status;\n}\n\nint tictactoe::numberOfAvailableSpaces(void)\n{\n    int count = 9;\n    for (int i = 0; i &lt; 9; i++)\n    {\n        if (square[i] == userMark ||\n            square[i] == computerMark)\n        {\n            count--;                     //count-- = count -1\n        }\n    }\n    return count;\n}\n\n\n    int tictactoe::generateComputerChoice(void)\n{\n    if (smartAI == 'N' || 'n')\n    {\n    srand((unsigned int)time(0));\n    unsigned int choice;\n\n        do {\n            choice = rand() % 8;\n\n        } while ((square[choice] == userMark ||\n            square[choice] == computerMark) &amp;&amp; numberOfAvailableSpaces() &gt;= 0);\n        return choice;\n    }\n    else if (smartAI == 'Y' || 'y')\n    {\n        do {\n            if (square[0] == square[1] == userMark || square[5] == square[8] == userMark || square[4] == square[6] == userMark)\n            {\n                square[2] = choice;\n            }\n            else if (square[1] == sqaure[2] == userMark || square[3] == square[6] == userMark || square[4] == square[8] == userMark)\n            {\n                square[0] = choice;\n            }\n            else if (square[0] == sqaure[2] == userMark || square[4] == square[7] == userMark)\n            {\n                square[1] = choice;\n            }\n            else if (square[3] == sqaure[4] == userMark || square[2] == square[8] == userMark)\n            {\n                square[5] = choice;\n            }\n            else if (square[4] == sqaure[5] == userMark || square[0] == square[6] == userMark)\n            {\n                square[3] = choice;\n            }\n            else if (square[3] == sqaure[5] == userMark || square[1] == square[7] == userMark || square[0] == square[8] == userMark || square[6] == square[2] == userMark)\n            {\n                square[4] = choice;\n            }\n            else if (square[6] == sqaure[7] == userMark || square[2] == square[5] == userMark || square[0] == square[4] == userMark)\n            {\n                square[8] = choice;\n            }\n            else if (square[7] == sqaure[8] == userMark || square[0] == square[3] == userMark || square[2] == square[4] == userMark)\n            {\n                square[6] = choice;\n            }\n            else if (square[6] == sqaure[8] == userMark || square[1] == square[4] == userMark)\n            {\n                square[7] = choice;\n            }\n            while ((square[choice] == userMark ||\n                square[choice] == computerMark) &amp;&amp; numberOfAvailableSpaces() &gt;= 0);\n            return choice;\n        }\n    }\n\n}\n\n\n//bool tictactoe::checkforPitfalls(char playermark)\n/*\n                                                 {\n                                                 if (square[4] == computerMark &amp;&amp; ((square[0] == userMark &amp;&amp; square[8] == userMark ) || (square[2] == userMark &amp;&amp; square[6] == userMark)) &amp;&amp; (square[1]==0 &amp;&amp; square[3]==0  &amp;&amp; square[5]==0 &amp;&amp; square[7]==0))\n                                                 return true;\n                                                 else if (square[4] == computerMark &amp;&amp; square[8] == userMark &amp;&amp; square[2] == userMark &amp;&amp; square[3] == userMark)\n                                                 return true;\n                                                 else if (square[4] == computerMark &amp;&amp; square[6] == userMark &amp;&amp; square[0] == userMark &amp;&amp; square[5] == userMark)\n                                                 return true;\n                                                 else if (square[4] == computerMark &amp;&amp; square[6] == userMark &amp;&amp; square[1] == userMark &amp;&amp; square[8] == userMark)\n                                                 return true;\n                                                 else if (square[4] == computerMark &amp;&amp; square[8] == userMark &amp;&amp; square[1] == userMark &amp;&amp; square[6] == userMark)\n                                                 return true;\n                                                 else if (square[4] == computerMark &amp;&amp; square[8] == userMark &amp;&amp; square[1] == userMark &amp;&amp; square[3] == userMark)\n                                                 return true;\n                                                 else if (square[4] == computerMark &amp;&amp; square[0] == userMark &amp;&amp; square[6] == computerMark &amp;&amp; square[7] == computerMark &amp;&amp; square[1] == userMark &amp;&amp; square[2] == userMark &amp;&amp; square[3] == userMark &amp;&amp; square[8] == userMark)\n                                                 return true;\n                                                 else\n                                                 return false;\n                                                 }*/\n</code></pre>\n"}, {"tags": ["c++", "ios", "xcode", "opengl-es"], "comments": [{"owner": {"reputation": 1445, "user_id": 823966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db2421491138fe5b1baf8726f394cc9c?s=128&d=identicon&r=PG", "display_name": "Steve O&#39;Connor", "link": "https://stackoverflow.com/users/823966/steve-oconnor"}, "edited": false, "score": 1, "creation_date": 1456393692, "post_id": 35609335, "comment_id": 58929315, "body": "OpenGL is cross platform - so you can use it with many programming languages. IOS supports OpenGL ES directly - you can use GLKit to make programming easier. You can mix C++ and IOS in Xcode - see <a href=\"http://stackoverflow.com/questions/2710507/mixing-objective-c-and-c\" title=\"mixing objective c and c\">stackoverflow.com/questions/2710507/mixing-objective-c-and-c</a>"}], "answers": [{"tags": [], "owner": {"reputation": 14257, "user_id": 526828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8y7Ru.png?s=128&g=1", "display_name": "Matic Oblak", "link": "https://stackoverflow.com/users/526828/matic-oblak"}, "is_accepted": true, "score": 1, "last_activity_date": 1456408964, "creation_date": 1456408964, "answer_id": 35629484, "question_id": 35609335, "link": "https://stackoverflow.com/questions/35609335/mixing-open-gl-es-with-ios/35629484#35629484", "title": "Mixing Open GL ES with iOS", "body": "<p>It makes no difference for you what language is \"OpenGL ES mainly programmed in\". What matters is what the API is like. The API differs on iOS depending on the language you are using. ObjectiveC will have almost all of the API in C (Not C++) where the rest is in ObjectiveC (context wrapping and hooking to <code>UIView</code>). Swift on the other hand uses Swift wrapper around the API which is generally a complete pain and with a combination of data and buffer structuring in Swift I would (for now) discourage you on using Swift. Your application may still be in Swift but I suggest at least the openGL part is in ObjectiveC and then bridged to Swift for usage.</p>\n\n<p>When using ObjectiveC you may use all of the functionality of standard C out of the box. If you want to use the C++ you need to set the certain flags but there is a very simple way to make the Xcode do that for you by simply renaming the \".m\" files to \".mm\". These will use C++ by default.</p>\n\n<p>No matter the language I suggest you to use Xcode for the openGL part. Next to the friendly autocompletion you have a variety of nice tools to debug and analyze your product.</p>\n\n<p>You have some libraries designed by Apple as well mostly in GLKit. Some of them are useful such as working with matrices but more or less everything else boils down to \"Don't use it\" once you get to a certain point of development.</p>\n\n<p>But since you say you are starting to only learn I suggest you to simply see some examples from tutorials and documentation. The Apple raw openGL ES documentation is actually quite impressive with all the snippets and explanations (comparing to the rest of the documentation). So you may use any of these and probably some StackOverflow and you should be on your way in no time.</p>\n"}], "owner": {"reputation": 611, "user_id": 5909396, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f6c28d2fed6a5f01ddfe26cda6568c0c?s=128&d=identicon&r=PG&f=1", "display_name": "Harshil.Chokshi", "link": "https://stackoverflow.com/users/5909396/harshil-chokshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 35629484, "answer_count": 1, "score": 1, "last_activity_date": 1456408964, "creation_date": 1456335908, "question_id": 35609335, "link": "https://stackoverflow.com/questions/35609335/mixing-open-gl-es-with-ios", "title": "Mixing Open GL ES with iOS", "body": "<p>I want to learn Open GL ES for iOS. I heard Open GL ES is mainly programmed in C++ or C. And iOS apps are done in Objective-C or Swift. Is it possible for me to render images and objects with Open GL ES in C++ and combine it with the iOS part in Objective-C.</p>\n\n<p>Also if that is is possible, would I do the Open GL ES part in Xcode with C++ or use another IDE? And then obviously use Xcode for the iOS part. </p>\n"}, {"tags": ["c++", "opengl", "glsl", "shader"], "answers": [{"comments": [{"owner": {"reputation": 7866, "user_id": 531840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02a5c102e4b3adced1096222d2997e5a?s=128&d=identicon&r=PG", "display_name": "Constantin", "link": "https://stackoverflow.com/users/531840/constantin"}, "edited": false, "score": 0, "creation_date": 1456386111, "post_id": 35620617, "comment_id": 58924606, "body": "Usually I&#39;m using colors per-vertex, but there is also the case that all vertexes shall have same color so I call <code>glDisableVertexAttribArray()</code> to disable the VertexAttributePointer and setting the constant value using <code>glVertexAttrib4fv()</code> to it. Otherwise I would need to build a giant color array with all values identical, which seems to be a memory waste to me. Using a uniform would only be applicable, when always a constant value for the color is used - here I used constant values to better illustrate the problem with a more compact mcve which can reproduce the problem."}], "tags": [], "owner": {"reputation": 1237, "user_id": 2809097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18071242822f897e03cde436113a4e85?s=128&d=identicon&r=PG&f=1", "display_name": "Jarra McIntyre", "link": "https://stackoverflow.com/users/2809097/jarra-mcintyre"}, "is_accepted": false, "score": 0, "last_activity_date": 1456384187, "creation_date": 1456384187, "answer_id": 35620617, "question_id": 35609211, "link": "https://stackoverflow.com/questions/35609211/only-setting-the-attribute-in-wrong-shader-program-affects-attribute-value/35620617#35620617", "title": "Only setting the attribute in wrong shader program affects attribute value", "body": "<p>If you do not want to set a per-vertex color then use a uniform to pass the value.</p>\n\n<p>Also why call glDisableVertexAttribArray(pos) in setAttribValue4f?</p>\n"}, {"tags": [], "owner": {"reputation": 7866, "user_id": 531840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02a5c102e4b3adced1096222d2997e5a?s=128&d=identicon&r=PG", "display_name": "Constantin", "link": "https://stackoverflow.com/users/531840/constantin"}, "is_accepted": true, "score": 0, "last_activity_date": 1456418861, "creation_date": 1456418861, "answer_id": 35633355, "question_id": 35609211, "link": "https://stackoverflow.com/questions/35609211/only-setting-the-attribute-in-wrong-shader-program-affects-attribute-value/35633355#35633355", "title": "Only setting the attribute in wrong shader program affects attribute value", "body": "<p>I found my problem in a simple typing mistake. As first parameter I'm passing the program object to <code>glVertexAttrib4fv()</code> instead of the location:</p>\n\n<pre><code>glVertexAttrib4fv(program, pointer);\n</code></pre>\n\n<p>should've been:</p>\n\n<pre><code>glVertexAttrib4fv(pos, pointer);\n</code></pre>\n\n<p>The fact that OpenGL is using weak-typing (the same type <code>GLuint</code> for completly different objects), made it hard to find this mistake. Coincidentally the location of my attribute was the value as the first program (<code>GLuint</code> with value 1), which causes to use always the attributes I've set in the first program (because ther eprogram was equal to the location I wanted to set). Fixing this, solved the issue for me.</p>\n\n<p>It's important to keep in mind, that \nthere is no direct relationship between VertexAttributes and Shader programs - the <a href=\"https://www.khronos.org/opengles/sdk/docs/man/xhtml/glVertexAttrib.xml\" rel=\"nofollow\">the specification</a> says:</p>\n\n<blockquote>\n  <p>The binding between a generic vertex attribute index and a\n  user-defined attribute variable in a vertex shader is part of the\n  state of a program object, but the current value of the generic vertex\n  attribute is not. The value of each generic   vertex attribute is part\n  of current state and it is maintained even if a different program\n  object is used.</p>\n</blockquote>\n"}], "owner": {"reputation": 7866, "user_id": 531840, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02a5c102e4b3adced1096222d2997e5a?s=128&d=identicon&r=PG", "display_name": "Constantin", "link": "https://stackoverflow.com/users/531840/constantin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 35633355, "answer_count": 2, "score": 0, "last_activity_date": 1456418861, "creation_date": 1456335505, "last_edit_date": 1456383313, "question_id": 35609211, "link": "https://stackoverflow.com/questions/35609211/only-setting-the-attribute-in-wrong-shader-program-affects-attribute-value", "title": "Only setting the attribute in wrong shader program affects attribute value", "body": "<p>I'm running always into problems, as soon as I try to use more than one shader program in OpenGL. For some reason, setting the attribute of my shader2 program in use is not reflecting at all - but setting the attribute in the currently not used shader1, affects rendering in shader2. I'm sure, that my shader2 is used (setting the attribute inside shader to a constant value reflects on objects drawn with shader2), and that I'm setting the attribute value in shader2.</p>\n\n<p>I encapsuled the ShaderPrograms into a class like:</p>\n\n<pre><code>class ShaderProgram{\npublic:\nShaderProgram(const std::string&amp; vertexSource, const std::string&amp; fragmentSource){\n  vertexShader = glCreateShader(GL_VERTEX_SHADER);\n  const GLchar *source = (const GLchar *)vertexSource.c_str();\n  glShaderSource(vertexShader, 1, &amp;source, 0);\n  glCompileShader(vertexShader);\n  fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);\n  source = (const GLchar *)fragmentSource.c_str();\n  glShaderSource(fragmentShader, 1, &amp;source, 0);\n  glCompileShader(fragmentShader);\n  program = glCreateProgram();\n  glAttachShader(program, vertexShader);\n  glAttachShader(program, fragmentShader);\n  glLinkProgram(program);\n}\nvoid use(){\n  glUseProgram(program);\n}\nvoid setAttribPointer(const char* name, GLint size, GLenum type, GLboolean normalized, GLsizei stride, const void* pointer) {\n  GLuint pos = glGetAttribLocation(program, name);\n  glEnableVertexAttribArray(pos);\n  glVertexAttribPointer(pos, size, type, normalized, stride, pointer);\n}\nvoid setAttribValue4f(const char* name, float x, float y, float z, float w) {\n  GLuint pos = glGetAttribLocation(program, name);\n  glDisableVertexAttribArray(pos);\n  const GLfloat pointer[] = { x, y, z, w };\n  glVertexAttrib4fv(program, pointer);\n}\n~ShaderProgram() {\n  glDeleteShader(vertexShader);\n  glDeleteShader(fragmentShader);\n  glDeleteProgram(program);\n}\nprivate:\n GLuint vertexShader, fragmentShader, program;\n};\n</code></pre>\n\n<p>And the renderloop in my application looks like:</p>\n\n<pre><code>program1.use();\nprogram1.setAttribValue4f(\"color\", 1.0f, 0.0f, 0.0f, 1.0f);\nprogram1.setAttribPointer(\"positions\", 3, GL_FLOAT, GL_FALSE, 0, vertices.data());\nglDrawElements(GL_TRIANGLES, indices.size(), GL_UNSIGNED_INT, indices.data());\nprogram2.use();\nprogram2.setAttribValue4f(\"color\", 0.0f, 0.0f, 1.0f, 1.0f);\nprogram2.setAttribPointer(\"positions\", 3, GL_FLOAT, GL_FALSE, 0, vertices.data());\nglDrawElements(GL_TRIANGLES, indices.size(), GL_UNSIGNED_INT, indices.data());\n</code></pre>\n\n<p>In this case, both objects are drawn in red - while the second should be blue (color attribute is set to blue in second shader program). I can reproduce this problem with any simple GLSL shader. However, if I change the above code to:</p>\n\n<pre><code>program1.use();\nprogram1.setAttribValue4f(\"color\", 1.0f, 0.0f, 0.0f, 1.0f);\nprogram1.setAttribPointer(\"positions\", 3, GL_FLOAT, GL_FALSE, 0, vertices.data());\nglDrawElements(GL_TRIANGLES, indices.size(), GL_UNSIGNED_INT, indices.data());\nprogram2.use();\nprogram1.setAttribValue4f(\"color\", 0.0f, 0.0f, 1.0f, 1.0f);\nprogram2.setAttribPointer(\"positions\", 3, GL_FLOAT, GL_FALSE, 0, vertices.data());\nglDrawElements(GL_TRIANGLES, indices.size(), GL_UNSIGNED_INT, indices.data());\n</code></pre>\n\n<p>the second object is drawn in blue (which is what I want to accomplish). But whats confussing is, that <code>glVertexAttrib4fv(program, pointer);</code> is called on the wrong program object (which is not used), but color is changed - while it's not changing, if I'm using the correct program object (program2). I checked <code>glGetError()</code> after <code>glUseProgram()</code> and after <code>glGetAttribLocation()</code>/<code>glVertexAttrib4fv()</code> - always returning 0. The location returned by <code>glGetAttribLocation()</code> is also correct.\nGLSL is <code>#version 330</code></p>\n\n<p>Any idea what could cause this problem?</p>\n"}, {"tags": ["c++", "stl", "stdvector", "allocation", "stdmap"], "comments": [{"owner": {"reputation": 15898, "user_id": 1155000, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8213d9cd920e864ce8ff1fdeefe4db5?s=128&d=identicon&r=PG", "display_name": "Daniel Kamil Kozar", "link": "https://stackoverflow.com/users/1155000/daniel-kamil-kozar"}, "edited": false, "score": 2, "creation_date": 1456335522, "post_id": 35609162, "comment_id": 58902633, "body": "I doubt whether the standard defines something like this. You can check what your implementation does by making a container with a custom allocator."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1456335598, "post_id": 35609162, "comment_id": 58902689, "body": "Standard doesn&#39;t say anything about it, but most implementation will do some pre-alocations for <code>vector</code>, and will not pre-allocate anything for <code>map</code>."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1456336421, "post_id": 35609162, "comment_id": 58903234, "body": "FYI -  in ubuntu 15.10, with g++5.2.1:  sizeof(std::vector&lt;void*&gt;) with no elements reports 24 bytes  and  sizeof(std::map(std::string, int64_t) with no elements reports 48 bytes."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 4, "creation_date": 1456336675, "post_id": 35609162, "comment_id": 58903392, "body": "@DOUGLASO.MOEN that is the size of the object, not the size of the inner buffer."}, {"owner": {"reputation": 1832, "user_id": 1370536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/440bcf7001875bacfa774245efbe7d56?s=128&d=identicon&r=PG", "display_name": "silentorb", "link": "https://stackoverflow.com/users/1370536/silentorb"}, "edited": false, "score": 0, "creation_date": 1456336840, "post_id": 35609162, "comment_id": 58903491, "body": "Aww, &quot;buffer&quot;, that&#39;s the word I should have been using.  Updating my post."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1456336917, "post_id": 35609162, "comment_id": 58903533, "body": "@DavidHaim - agreed.  and merely an implementation detail on my 64 bit os. vector capacity growth is also an interesting implementation detail."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1456337558, "post_id": 35609162, "comment_id": 58903913, "body": "I would be surprised if an implementation actually allocated any memory on initialization as I can&#39;t seeing it making ergonomic sense to waste that time for potential code paths where nothing gets added. I see no benefits to doing it but there are definite drawbacks. What I can see is implementations allocating rather more than they immediately need when they do allocate."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1456337791, "post_id": 35609162, "comment_id": 58904040, "body": "@Galik I think the opposit. have you seen any production code which creates a std::vector <i>without</i> adding any elements to it? an anacdote: C# <code>ArrayList</code> do preallocate. if your array gorws by 2 each time, preallocating 10 elements for example, will save you <i>4~5</i> allocations if you starts with 0, then 1,2,4,8,16.."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1456338004, "post_id": 35609162, "comment_id": 58904160, "body": "@DavidHaim I don&#39;t see a scenario when not allocating is less efficient than allocating but the opposite is not true. Also, yes I do see code when no elements get added."}, {"owner": {"reputation": 1832, "user_id": 1370536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/440bcf7001875bacfa774245efbe7d56?s=128&d=identicon&r=PG", "display_name": "silentorb", "link": "https://stackoverflow.com/users/1370536/silentorb"}, "edited": false, "score": 1, "creation_date": 1456338282, "post_id": 35609162, "comment_id": 58904311, "body": "One of the use cases that prompted this question was where I have a hierarchy of nodes, and deciding whether in the long run it would be better for every node in the hierarchy to have a children vector or have special group nodes that have the children vectors.  If every node has a children vector, then all end nodes would have empty vectors.  It would be nice if those end nodes did not allocate a children buffer."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 2, "creation_date": 1456338743, "post_id": 35609162, "comment_id": 58904590, "body": "@DavidHaim: Nothing forbids to have capacity grows as <code>0, 8, 16, 32, 64</code> (skip the first small value). No preallocation allows to reserve the right size with only 1 allocation instead of 2. The change of capacity growing add just one test by allocation."}, {"owner": {"reputation": 11569, "user_id": 502399, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ccf39757e9c47ae99df42bdb286c6e5c?s=128&d=identicon&r=PG", "display_name": "Tavian Barnes", "link": "https://stackoverflow.com/users/502399/tavian-barnes"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 1, "creation_date": 1456346140, "post_id": 35609162, "comment_id": 58909004, "body": "@DavidHaim C# ArrayList <a href=\"http://referencesource.microsoft.com/#mscorlib/system/collections/arraylist.cs,61\" rel=\"nofollow noreferrer\">does not pre-allocate</a>.  Neither does <code>List&lt;T&gt;</code>."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1456347448, "post_id": 35609162, "comment_id": 58909730, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12271017/initial-capacity-of-vector-in-c\">Initial capacity of vector in C++</a>"}, {"owner": {"reputation": 1832, "user_id": 1370536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/440bcf7001875bacfa774245efbe7d56?s=128&d=identicon&r=PG", "display_name": "silentorb", "link": "https://stackoverflow.com/users/1370536/silentorb"}, "edited": false, "score": 0, "creation_date": 1456357476, "post_id": 35609162, "comment_id": 58914527, "body": "First, That question/answer says nothing about containers other than vector.  Second, in this page the main focus is whether allocation always occurs, while with that page the question of whether allocation always occurs is mostly incidental.  Also, that page has 1/10 the useful feedback pertaining to allocation factors and options."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1456336463, "post_id": 35609268, "comment_id": 58903256, "body": "Why is pre-allocation needed for &quot;linearized constant push_back complexity&quot; ?"}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 1, "creation_date": 1456336464, "post_id": 35609268, "comment_id": 58903259, "body": "FWIW, and as an example, <code>std::vector&lt;int&gt;</code> in GCC 4.8.4 and 4.9.2, starts out with a <code>capacity()</code> of 0 and then grows 1,2,4,8,16,\u2026; same for clang-3.5."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1456337453, "post_id": 35609268, "comment_id": 58903860, "body": "@DieterL&#252;cking, tried to calculate complexity, found it too boring and decided to remove that statement altogether."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 2, "creation_date": 1456338277, "post_id": 35609268, "comment_id": 58904307, "body": "Which implementation was this? To be honest this sounds like incredibly stupid behavior of the implementation."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1456339844, "post_id": 35609268, "comment_id": 58905290, "body": "@Zulan, STLPort on Solaris :)"}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 2, "creation_date": 1456352205, "post_id": 35609268, "comment_id": 58912355, "body": "It seems unlikely that a <code>std::vector</code> with an initial capacity greater than zero would be representative of most of the implementations out there.  I&#39;d certainly consider any such implementation to be buggy, even if the standard allows it.  I could be more forgiving of some other containers (e.g., <code>std::unordered_map</code>), but vectors and strings shouldn&#39;t be doing unnecessary dynamic allocations."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 6, "last_activity_date": 1456337420, "last_edit_date": 1456337420, "creation_date": 1456335695, "answer_id": 35609268, "question_id": 35609162, "link": "https://stackoverflow.com/questions/35609162/does-an-unused-stl-container-allocate-memory/35609268#35609268", "title": "Does an unused STL container allocate memory?", "body": "<p>Standard doesn't say anything about it, but the implementation I've looked specifically at will do some pre-alocations for <code>std::vector</code>, and will not pre-allocate anything for <code>std::map</code>.</p>\n\n<p>This actually once hit me prety hard, when I hade a huge container, which elements had a miniscule - no more than 10 elements, most entries had 0-sized vectors - vector in it. Default vector capacity in this implementation was 32, and '32 * sizeof(vector_element) * number_of_elements' happened to be extremely big. </p>\n"}, {"comments": [{"owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "edited": false, "score": 0, "creation_date": 1456350352, "post_id": 35609332, "comment_id": 58911335, "body": "@knivil&#39;s answer points out that it <i>is</i> indirectly specified in the updated standard work-in-progress, being constrained by other features."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1456335906, "creation_date": 1456335906, "answer_id": 35609332, "question_id": 35609162, "link": "https://stackoverflow.com/questions/35609162/does-an-unused-stl-container-allocate-memory/35609332#35609332", "title": "Does an unused STL container allocate memory?", "body": "<blockquote>\n  <ol>\n  <li>If nothing is ever added to the above vector or map, will either still allocate a block of memory for potential entries? (In other words, does entry allocation always happen during container creation or can it be deferred until calls to functions like push_back?)</li>\n  </ol>\n</blockquote>\n\n<p>That can happen, yes. It's actually a detail of the container implementation and not specified in the standard.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Is there a standard for handling the timing of initial STL container allocation or is that behavior allowed to vary between STL containers and compilers?</li>\n  </ol>\n</blockquote>\n\n<p>You can defer the creation using e.g. a <code>std::unique_ptr</code> for the members, and create them with a call to a getter function. </p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1456336060, "post_id": 35609369, "comment_id": 58902984, "body": "What does it have to do with the question?"}, {"owner": {"reputation": 1832, "user_id": 1370536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/440bcf7001875bacfa774245efbe7d56?s=128&d=identicon&r=PG", "display_name": "silentorb", "link": "https://stackoverflow.com/users/1370536/silentorb"}, "edited": false, "score": 0, "creation_date": 1456336159, "post_id": 35609369, "comment_id": 58903059, "body": "Part of the question was &quot;can it be deferred until calls to functions like push_back?&quot;  I hadn&#39;t thought about using different allocators, which is a useful factor."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 3, "creation_date": 1456336206, "post_id": 35609369, "comment_id": 58903084, "body": "If the allocator would allocate a block of memory per default then the constructor of the allocator could not be <code>noexcept</code> because memory allocation can fail with an exception."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456336216, "post_id": 35609369, "comment_id": 58903091, "body": "Still I do not see how exceptions came to the answer. Original question doesn&#39;t ask a thing about exceptions."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 1, "creation_date": 1456336299, "post_id": 35609369, "comment_id": 58903148, "body": "It means that if the allocator is no <code>noexcept</code> then no block of memory is allocated. And that is the first question."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 6, "creation_date": 1456336463, "post_id": 35609369, "comment_id": 58903258, "body": "@SergeyA - actually he has a point. if the default constructor is <code>noexcept</code>, and the <code>allocator::allocate</code> throws - that means that the container cannot ask for memory when its constructed. hence the vector/map cannot preallocate memory , because the allcoation can throw, violating the <code>noexcept</code>"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1456336839, "post_id": 35609369, "comment_id": 58903490, "body": "although, when I think of it again, the allocator can use some stack allocated block of memory to preallocate small initial buffer. that cannot fail, as <code>char[buffer_size]</code> never throws. but I dought any compiler actually implement this. non the less, it&#39;s still &quot;preallocation&quot; , although not heap allocation, but still &quot;theoretically&quot; possible. or from the thread local storage, for that manner"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1456337119, "post_id": 35609369, "comment_id": 58903669, "body": "@DavidHaim Related: May std::vector make use of small buffer optimization? (<a href=\"http://stackoverflow.com/questions/8190950/may-stdvector-make-use-of-small-buffer-optimization\" title=\"may stdvector make use of small buffer optimization\">stackoverflow.com/questions/8190950/&hellip;</a>)"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 3, "creation_date": 1456337179, "post_id": 35609369, "comment_id": 58903699, "body": "when I re-rethink about this, the <code>noexcept</code> has nothing to do with that. the vector can <b>try</b> to allocate memory and just catch any exception from the allocator , and just pass the pre-allocation. having noexcept constructor doesn&#39;t say anything for preallcoation , as the vector can at least try and pass, without propegating the allocator exception"}, {"owner": {"reputation": 3521, "user_id": 658087, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/hvS4q.png?s=128&g=1", "display_name": "JD\u0142ugosz", "link": "https://stackoverflow.com/users/658087/jd%c5%82ugosz"}, "reply_to_user": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1456350211, "post_id": 35609369, "comment_id": 58911248, "body": "@DavidHaim basic_string commonly works that way, though vector does  not."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1456355767, "post_id": 35609369, "comment_id": 58913904, "body": "I have to admit that <code>noexcept</code> will not prevent memory allocation while catching possible exceptions. I just tried to follow common sense (which can be degraded to an opinion), implementers may choose another route."}], "tags": [], "owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "is_accepted": true, "score": 9, "last_activity_date": 1456336490, "last_edit_date": 1456336490, "creation_date": 1456336009, "answer_id": 35609369, "question_id": 35609162, "link": "https://stackoverflow.com/questions/35609162/does-an-unused-stl-container-allocate-memory/35609369#35609369", "title": "Does an unused STL container allocate memory?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/container/vector/vector\">C++ Reference</a> With C++17 the default constructor is <code>noexcept</code> iff the allocator construction is <code>noexcept</code>. So it depends on the used allocator. In VS 2015 the standard constructor is <code>noexcept</code>.</p>\n\n<p>Clarification: It means that if the allocator is no <code>noexcept</code> then no block of memory is allocated.</p>\n\n<p>And for your second question: Same reference, its is O(1).</p>\n"}, {"comments": [{"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 3, "creation_date": 1456340295, "post_id": 35610049, "comment_id": 58905568, "body": "Setting a breakpoint on <code>malloc</code> assumes that the allocator uses <code>malloc</code>.  It&#39;s not hard to imagine allocators that rely on something lower level to allocate dynamic memory.  A better way to test would be to substitute your own allocator and then see if container calls it."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1456432277, "post_id": 35610049, "comment_id": 58956840, "body": "I did mention that it might not be <code>malloc</code>, and of course it would be more generic to use your own allocator for the test. But this is about testing a specific implementation - being pragmatic and using what is already there seems like the best approach. Also consider that a <code>vector</code> <i>could</i> be implemented differently for the default and your custom allocator."}], "tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 3, "last_activity_date": 1456338534, "last_edit_date": 1456338534, "creation_date": 1456338222, "answer_id": 35610049, "question_id": 35609162, "link": "https://stackoverflow.com/questions/35609162/does-an-unused-stl-container-allocate-memory/35610049#35610049", "title": "Does an unused STL container allocate memory?", "body": "<p>As mentioned before, this is not well defined. However, you can just test it.</p>\n\n<p>For example with gcc/linux. Make a simple program, compile it with <code>-O0 -g</code> and run it in gdb. Then</p>\n\n<pre><code>break main\nrun\nbreak malloc\ncont\n</code></pre>\n\n<p>Now simply run a <code>backtrace</code> on every malloc and you will see dynamic allocation. With my gcc 5.3.0, <strong>both empty containers do not allocate heap memory</strong>, this is done on the first <code>push_back</code> / <code>operator[]</code>.</p>\n\n<p>Of course you should use your preferred debugger and break on your allocators underlying function, if that is not <code>gdb</code> / <code>malloc</code>.</p>\n\n<p>Now if you think about the two cases. Would it make sense to pre-allocate memory in that case?</p>\n\n<pre><code>std::vector&lt;int&gt; foo;\nfoo.push_back(13);\n</code></pre>\n\n<p>Well, technically you might save a check for <code>nullptr</code>, but with the usual way to implement vectors as 3 pointers there is no need for an extra check.</p>\n\n<p>But consider</p>\n\n<pre><code>std::vector&lt;int&gt; foo;\nfoo.reserve(100);\n</code></pre>\n\n<p>In this case it would be harmful to performance to pre-allocate.</p>\n\n<p>I can find no argument for pre-allocation for a tree-structure such as map.</p>\n\n<p>Please remember, this is a very specific optimization. Optimize for this only with good reason (benchmark!).</p>\n\n<p>Note: You may want to read about small string optimization, a very common technique that is related but different.</p>\n"}, {"tags": [], "owner": {"reputation": 1326, "user_id": 90036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ecog3.png?s=128&g=1", "display_name": "dhaffey", "link": "https://stackoverflow.com/users/90036/dhaffey"}, "is_accepted": false, "score": 1, "last_activity_date": 1580257855, "creation_date": 1580257855, "answer_id": 59959060, "question_id": 35609162, "link": "https://stackoverflow.com/questions/35609162/does-an-unused-stl-container-allocate-memory/59959060#59959060", "title": "Does an unused STL container allocate memory?", "body": "<p>It's worth noting that Microsoft's STL implementation currently <em>does</em> allocate in the default constructor for <code>std::map</code> and <code>std::set</code>. <a href=\"https://godbolt.org/z/LN8jep\" rel=\"nofollow noreferrer\">Godbolt example</a> - note the call to <code>operator new</code> on line 8 of the assembly output.</p>\n\n<p>And yes, this can absolutely impact performance. I only became aware of it after profiling some mysteriously slow code, when it turned out that the default constructor of a class with a rarely-used <code>map</code> member was dominating the run-time of the loop in question.</p>\n\n<p>If, like me, you're not entirely thrilled by this implementation decision, I'll point out that <a href=\"https://www.boost.org/doc/libs/1_72_0/doc/html/container.html\" rel=\"nofollow noreferrer\">Boost.Container</a>'s counterparts <a href=\"https://www.boost.org/doc/libs/1_72_0/doc/html/container/main_features.html#container.main_features.other_features\" rel=\"nofollow noreferrer\">do guarantee</a> zero-allocation default construction.</p>\n"}], "owner": {"reputation": 1832, "user_id": 1370536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/440bcf7001875bacfa774245efbe7d56?s=128&d=identicon&r=PG", "display_name": "silentorb", "link": "https://stackoverflow.com/users/1370536/silentorb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2050, "favorite_count": 3, "accepted_answer_id": 35609369, "answer_count": 5, "score": 15, "last_activity_date": 1580257855, "creation_date": 1456335380, "last_edit_date": 1495540906, "question_id": 35609162, "link": "https://stackoverflow.com/questions/35609162/does-an-unused-stl-container-allocate-memory", "title": "Does an unused STL container allocate memory?", "body": "<p>Given the code:</p>\n\n<pre><code>class Foo {\n  std::vector&lt;int&gt; items;\n  std::map&lt;int, int&gt; dictionary;\n};\n</code></pre>\n\n<ol>\n<li><p>If nothing is ever added to the above vector or map, will either still allocate a block of buffer memory?  (In other words, does buffer allocation always happen during container creation or can it be deferred until calls to functions like push_back?)</p></li>\n<li><p>Is there a standard for handling the timing of initial STL container buffer allocation or is that behavior allowed to vary between STL containers and compilers?</p></li>\n</ol>\n\n<p>Note: This question is not about the extra bytes such containers would add to the size of class Foo.</p>\n\n<p>(A related subset of this question with an emphasis on allocation size is <a href=\"https://stackoverflow.com/questions/12271017/initial-capacity-of-vector-in-c\">Initial capacity of vector in C++</a>.)</p>\n"}, {"tags": ["c++", "recursion", "functional-programming", "c++14", "y-combinator"], "answers": [{"comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1456336686, "post_id": 35609226, "comment_id": 58903403, "body": "Thanks, I get it now! It &quot;clicked&quot; when I realized that what I wanted to do was get the <code>*this</code> of a lambda, which is not possible at the moment."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1456336734, "post_id": 35609226, "comment_id": 58903437, "body": "@VittorioRomeo As an aside, self should be taken as <code>auto&amp;&amp; self</code> not <code>auto self</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1456342686, "post_id": 35609226, "comment_id": 58906934, "body": "Why <code>std::decay_t&lt;F&gt;</code>? Is it important to copy <code>f</code>?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1456342944, "post_id": 35609226, "comment_id": 58907072, "body": "@Barry Because I&#39;m storing it and returning it?  Storing and returning a reference deduced from a function argument in generic code is a bad idea, in my experience.  Imagine <code>auto fib(){ auto internal = [](auto&amp;&amp; self, int x){ if (x&lt;2) return 1; return self(x-1)+self(x-2); }; return y_combinate(internal); }</code> -- we want the lambda to live as long as the return type, not only as long as <code>internal</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1456343196, "post_id": 35609226, "comment_id": 58907216, "body": "@Yakk Maybe that&#39;s just a general language limitation then. On the one hand, sometimes you make unnecessary copies. On the other hand, sometimes you dangle references?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1456343559, "post_id": 35609226, "comment_id": 58907457, "body": "@Barry Yes.  If we could add in a &quot;return value lifetime depends upon lifetime of argument&quot; it would help; but even then, it doesn&#39;t solve the <code>fib()</code> code above (where the returned object needs to be <i>bigger</i> and carry the lambda with it!) other than possibly generating a warning (returning value whose lifetime depends on a temporary).  However, if a caller wants to avoid creating that copy, they can <code>y_combinate(std::cref(f))</code>, and the returned function object will only hold a (constant reference to) <code>f</code>, not a copy, and it will work."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 5, "last_activity_date": 1456335541, "creation_date": 1456335541, "answer_id": 35609226, "question_id": 35608977, "link": "https://stackoverflow.com/questions/35608977/understanding-y-combinator-through-generic-lambdas/35609226#35609226", "title": "Understanding Y Combinator through generic lambdas", "body": "<p>Here is a y combinate where the lambda is passed a recurs that doesn't need to be passed recurs:</p>\n\n<pre><code>template&lt;class F&gt;\nstruct y_combinate_t {\n  F f;\n  template&lt;class...Args&gt;\n  decltype(auto) operator()(Args&amp;&amp;...args)const {\n    return f(*this, std::forward&lt;Args&gt;(args)...);\n  }\n};\ntemplate&lt;class F&gt;\ny_combinate_t&lt;std::decay_t&lt;F&gt;&gt; y_combinate( F&amp;&amp; f ) {\n  return {std::forward&lt;F&gt;(f)};\n};\n</code></pre>\n\n<p>then you do:</p>\n\n<pre><code>  return y_combinate(step)(acc, xs...);\n</code></pre>\n\n<p>and change</p>\n\n<pre><code>                   return self(self)(next, y_xs...);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>                   return self(next, y_xs...);\n</code></pre>\n\n<p>the trick here is I used a non-lambda function object that has access to its own <code>this</code>, which I pass to <code>f</code> as its first parameter.</p>\n"}], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1372, "favorite_count": 4, "accepted_answer_id": 35609226, "answer_count": 1, "score": 5, "last_activity_date": 1456335541, "creation_date": 1456334816, "last_edit_date": 1495542275, "question_id": 35608977, "link": "https://stackoverflow.com/questions/35608977/understanding-y-combinator-through-generic-lambdas", "title": "Understanding Y Combinator through generic lambdas", "body": "<p>While building a small lambda-based metaprogramming library, I had the necessity of using recursion in a C++14 generic lambda, to implement a <a href=\"https://en.wikipedia.org/wiki/Fold_(higher-order_function)\" rel=\"nofollow noreferrer\">left-fold</a>.</p>\n\n<p>My own solution was passing the lambda itself as one of its parameters, like this:</p>\n\n<pre><code>template &lt;typename TAcc, typename TF, typename... Ts&gt;\nconstexpr auto fold_l_impl(TAcc acc, TF f, Ts... xs)\n{\n    // Folding step.\n    auto step([=](auto self)\n    {\n        return [=](auto y_acc, auto y_x, auto... y_xs)\n        {\n            // Compute next folding step.\n            auto next(f(y_acc, y_x));\n\n            // Recurse if required.\n            return static_if(not_empty(y_xs...))\n                .then([=]\n                    {\n                        // Recursive case.\n                        return self(self)(next, y_xs...);\n                    })\n                .else_([=]\n                    {\n                        // Base case.\n                        return next;\n                    })();\n        };\n    });\n\n    // Start the left-fold.\n    return step(step)(acc, xs...);\n}\n</code></pre>\n\n<p><code>step</code> is the \"main\" lambda that starts off the recursion. It returns a function with the desired left-fold signature <em>(accumulator, current item, remaining items...)</em>.</p>\n\n<p>The function calls itself recursively by using <code>self(self)(next, y_xs...)</code>.</p>\n\n<p>I've recently come across <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0200r0.html\" rel=\"nofollow noreferrer\">this proposal</a> that wants to add a <strong>Y Combinator</strong> to the Standard Library, and after reading it, it seems extremely similar to what I am doing here.</p>\n\n<p>Unfortunately, the concept of the Y Combinator still doesn't \"click\" for me - I am missing something and I cannot visualize how to generalize what I did with the <code>self</code> parameter for any function, avoiding the <code>step</code> boilerplate.</p>\n\n<p>I've read <a href=\"https://stackoverflow.com/questions/93526/what-is-a-y-combinator\">this excellent StackOverflow answer</a> regarding the matter, but it still didn't \"click\" for me.</p>\n\n<p><em>(From that answer)</em> a recursive factorial is defined this way:</p>\n\n<pre><code>fact =\n  (recurs) =&gt;\n    (x) =&gt;\n      x == 0 ? 1 : x * recurs(x - 1);\n</code></pre>\n\n<p>The <code>recurs</code> parameter seems to have the same role as my <code>self</code> parameter. What I do not understand is how <code>recurs</code> is called without passing <code>recurs</code> into itself again.</p>\n\n<p>I have to call <code>self</code> like this: <code>self(self)(params...)</code>. </p>\n\n<p><code>recurs</code>, however, is called like <code>recurs(params...)</code>.</p>\n\n<p>Attempting to call <code>self(params...)</code> results in a compiler error informing me that <code>self</code> requires only a single parameter <em>(which is the <code>auto self</code> lambda parameter)</em>.</p>\n\n<p>What am I missing here? How could I rewrite my <code>fold_l_impl</code> lambda in such a way that its recursion could be generalized through the use of a Y Combinator?</p>\n"}, {"tags": ["c++", "qt", "data-modeling", "qtreeview", "qstandarditem"], "answers": [{"comments": [{"owner": {"reputation": 1046, "user_id": 2738748, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/f1e01dda2f60d48b1ac3a6e6125723fe?s=128&d=identicon&r=PG&f=1", "display_name": "user2738748", "link": "https://stackoverflow.com/users/2738748/user2738748"}, "edited": false, "score": 0, "creation_date": 1456337995, "post_id": 35609906, "comment_id": 58904155, "body": "I didn&#39;t make myself clear: the problem is that every time I click on the QTreeView, I can access only the items. I checked if an item has a parent or if it has children, but it didn&#39;t help."}], "tags": [], "owner": {"reputation": 2765, "user_id": 206750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/86J1B.jpg?s=128&g=1", "display_name": "JvO", "link": "https://stackoverflow.com/users/206750/jvo"}, "is_accepted": false, "score": 0, "last_activity_date": 1456337729, "creation_date": 1456337729, "answer_id": 35609906, "question_id": 35608894, "link": "https://stackoverflow.com/questions/35608894/how-to-access-childwidgets-in-a-qtreeview-using-qmodelindex/35609906#35609906", "title": "How to access childWidgets in a QTreeView using QModelIndex?", "body": "<p>You can't disable the signal for the subitems. However, you can check if an item has a parent. It it doesn't, it is an item and if it does, it's a subitem. </p>\n\n<pre><code>if (item-&gt;parent() != 0)\n   .. //subitem\nelse\n   .. //item\n</code></pre>\n\n<p>An alternative would be to use the data() function to set some special value to distinguish between the two.</p>\n\n<pre><code>item1-&gt;setData(QVariant(\"item\"));\nsubitem1-&gt;setData(QVariant(\"subitem\"));\n</code></pre>\n\n<p>Then query the value in your doubleclick handler:</p>\n\n<pre><code>QVariant var = item-&gt;data();\nif (var.toString() == \"item\")\n  ...\nelse if (var.toString() == \"subitem\")\n  ...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1046, "user_id": 2738748, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/f1e01dda2f60d48b1ac3a6e6125723fe?s=128&d=identicon&r=PG&f=1", "display_name": "user2738748", "link": "https://stackoverflow.com/users/2738748/user2738748"}, "edited": false, "score": 0, "creation_date": 1456383401, "post_id": 35612727, "comment_id": 58923249, "body": "The <i>QStandardItemModel</i> class has not function <i>itemFromIndex</i>."}, {"owner": {"reputation": 1246, "user_id": 167664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuCUB.jpg?s=128&g=1", "display_name": "Georgy Pashkov", "link": "https://stackoverflow.com/users/167664/georgy-pashkov"}, "reply_to_user": {"reputation": 1046, "user_id": 2738748, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/f1e01dda2f60d48b1ac3a6e6125723fe?s=128&d=identicon&r=PG&f=1", "display_name": "user2738748", "link": "https://stackoverflow.com/users/2738748/user2738748"}, "edited": false, "score": 0, "creation_date": 1456387568, "post_id": 35612727, "comment_id": 58925362, "body": "In 5.x: <a href=\"http://doc.qt.io/qt-5/qstandarditemmodel.html#itemFromIndex\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qstandarditemmodel.html#itemFromIndex</a>. See also my edit to the original answer."}], "tags": [], "owner": {"reputation": 1246, "user_id": 167664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuCUB.jpg?s=128&g=1", "display_name": "Georgy Pashkov", "link": "https://stackoverflow.com/users/167664/georgy-pashkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1456387736, "last_edit_date": 1456387736, "creation_date": 1456346783, "answer_id": 35612727, "question_id": 35608894, "link": "https://stackoverflow.com/questions/35608894/how-to-access-childwidgets-in-a-qtreeview-using-qmodelindex/35612727#35612727", "title": "How to access childWidgets in a QTreeView using QModelIndex?", "body": "<p>When you are trying to access model items by row index, the model returns top-level item at that row. Use <code>itemFromIndex</code> instead:</p>\n\n<pre><code>auto item = index.model()-&gt;itemFromIndex(index);\nif (item &amp;&amp; item-&gt;hasChildren()){\n    // item is not a leaf\n}\n</code></pre>\n\n<p><strong>EDIT</strong> <code>index.model()</code> returns <code>QAbstractItemModel*</code>, so a cast is also necessary here (or, better, storing a pointer to the standard model somehwere in the code).</p>\n"}, {"tags": [], "owner": {"reputation": 2040, "user_id": 3820479, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a1xUx.jpg?s=128&g=1", "display_name": "Tomas", "link": "https://stackoverflow.com/users/3820479/tomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1456388040, "creation_date": 1456388040, "answer_id": 35621721, "question_id": 35608894, "link": "https://stackoverflow.com/questions/35608894/how-to-access-childwidgets-in-a-qtreeview-using-qmodelindex/35621721#35621721", "title": "How to access childWidgets in a QTreeView using QModelIndex?", "body": "<p>I would do it like this:</p>\n\n<pre><code>// Define your custom role to store item type.\nenum MyRoles\n{\n    ItemTypeRole = Qt::UserRole + 1\n};\n\n// Define item types.\nenum ItemType\n{\n    Primary,\n    Secondary\n};\n</code></pre>\n\n<p>Than set the proper <em>item type</em> for all your items:</p>\n\n<pre><code>QStandardItem* item = new QStandardItem(\"Item1\");\nitem-&gt;setData(Primary, ItemTypeRole);\n\nQStandardItem* subItem = new QStandardItem(\"SubItem1\");\nsubItem-&gt;setData(Secondary, ItemTypeRole);\n</code></pre>\n\n<p>And in your slot connected to the <em>doubleClicked</em> signal acces the type like this:</p>\n\n<pre><code>ItemType type = static_cast&lt;ItemType&gt;(index.data(ItemTypeRole).toInt());\nif (type == Primary)\n    std::cout &lt;&lt; \"It's a Primary item!\" &lt;&lt; std::endl;\nelse if (type == Secondary)\n    std::cout &lt;&lt; \"It's a Secondary item!\" &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 1046, "user_id": 2738748, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/f1e01dda2f60d48b1ac3a6e6125723fe?s=128&d=identicon&r=PG&f=1", "display_name": "user2738748", "link": "https://stackoverflow.com/users/2738748/user2738748"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 976, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1456388040, "creation_date": 1456334593, "last_edit_date": 1456345519, "question_id": 35608894, "link": "https://stackoverflow.com/questions/35608894/how-to-access-childwidgets-in-a-qtreeview-using-qmodelindex", "title": "How to access childWidgets in a QTreeView using QModelIndex?", "body": "<p>I'm working on an application using the Qt library (version 4.8).</p>\n\n<p>I have a QTreeView with a QStandardItemModel. My widget looks like that:</p>\n\n<blockquote>\n  <p>Item1</p>\n  \n  <p>subitem11</p>\n  \n  <p>subitem12</p>\n  \n  <p>Item2</p>\n  \n  <p>subitem21</p>\n  \n  <p>subitem22</p>\n  \n  <p>Item3</p>\n  \n  <p>subitem31</p>\n  \n  <p>subitem32</p>\n</blockquote>\n\n<p>Here is how I add the items to my QTreeView:</p>\n\n<pre><code> model-&gt;setItem(0, 0, item1); \n item1-&gt;setChild(0, 0, subitem12);\n</code></pre>\n\n<p>I want to take an action only when the user double cliked an item (and do nothing when he clicked a subitem). So I use the  <em>doubleClicked(const QModelIndex &amp; index)</em> signal. </p>\n\n<p>I want to process the information about the item/subitem which was double cliked by the user. So I get the row of my item/subitem:</p>\n\n<pre><code>index.row();\n</code></pre>\n\n<p>But every time I try to reference to the item/subitem to display its name or check if it has children, I can only access the items:</p>\n\n<pre><code>index.model()-&gt;item(row)-&gt;text();\n</code></pre>\n\n<p>My question is: how can I acces the subitems (vbetween items abd subitems) in my slot? Or how can I prevent them from emitting the signal? I can't disable them - it would be too confusing for the user. </p>\n\n<p><strong>Edit:</strong> The problem is that every time I click on an item or subitem and execute:</p>\n\n<pre><code>index.model()-&gt;item(row)-&gt;hasChildren();\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>index.model()-&gt;item(row)-&gt;parent() == 0;\n</code></pre>\n\n<p>I get <em>true</em> as result. So I can reference only the items. </p>\n\n<p>My question is: <strong>What is the correct way to reference to subitems?</strong></p>\n"}, {"tags": ["c++", "class", "nested"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1456334790, "post_id": 35608864, "comment_id": 58902138, "body": "You probably just need <i>forward declarations</i>. BTW you are posting bogus code, that already fails elsewhere when compiling."}], "answers": [{"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1456335143, "creation_date": 1456335143, "answer_id": 35609080, "question_id": 35608864, "link": "https://stackoverflow.com/questions/35608864/accessing-public-variable-of-parent-class-from-child-sort-of-nested-classes-in/35609080#35609080", "title": "Accessing public variable of parent class from child (sort of nested classes in c++)", "body": "<p>Can't you simply pass to the child a pointer to the parent, like in the following na\u00efve example?</p>\n\n<pre><code>#include&lt;memory&gt;\n#include&lt;iostream&gt;\n\nstruct P {\n    struct C {\n        C(P *parent): p{parent} { }\n        void foo() {\n            std::cout &lt;&lt; p-&gt;i &lt;&lt; std::endl;\n        }\n        P *p;\n    };\n\n    int i;\n    C c{this};\n};\n\nint main() {\n    P p;\n    p.i = 42;\n    p.c.foo();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "is_accepted": true, "score": 0, "last_activity_date": 1456339148, "creation_date": 1456339148, "answer_id": 35610339, "question_id": 35608864, "link": "https://stackoverflow.com/questions/35608864/accessing-public-variable-of-parent-class-from-child-sort-of-nested-classes-in/35610339#35610339", "title": "Accessing public variable of parent class from child (sort of nested classes in c++)", "body": "<p>You could use inheritance.</p>\n\n<p>Local2 inherits from Local1.\nLocal1 inherits from Global.</p>\n\n<pre><code>class Global\n{\npublic:\n  int getA() {\n    return a;\n  }\n\n  virtual void doStuff() {\n    // do stuff\n  }\n\nprivate:\n  int a;\n};\n\nclass Local1 : public Global\n{\npublic:\n  Local1(){\n    printf(\"%i\", getA());\n  }\n\n  int getB() {\n    return b;\n  }\n\nprivate:\n  int b;\n};\n\nclass Local2 : public Local1\n{\npublic:\n  Local2(){\n    printf(\"%i, %i\", getA(), getB());\n  }\n\n  virtual void doStuff() override {\n    // do specific stuff\n  }\n};\n\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n  auto g = std::unique_ptr&lt;Global&gt;(new Local2());\n  g-&gt;doStuff(); // will call Local2::doStuff\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4521165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48dfa45eeab5938be5061b11f94917e?s=128&d=identicon&r=PG&f=1", "display_name": "SSV", "link": "https://stackoverflow.com/users/4521165/ssv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 35610339, "answer_count": 2, "score": -2, "last_activity_date": 1456339148, "creation_date": 1456334523, "last_edit_date": 1456334670, "question_id": 35608864, "link": "https://stackoverflow.com/questions/35608864/accessing-public-variable-of-parent-class-from-child-sort-of-nested-classes-in", "title": "Accessing public variable of parent class from child (sort of nested classes in c++)", "body": "<p>I would like to create an hierarchy of classes in c++ so public variables of higher level classes were visible within lower level classes.  Here is an example, the desired action is in \"printf\" of two constructors. As is now, variable a cannot be seen within class Local1. How to fix it? In general, classes will be defined in different files. Thank you.</p>\n\n<pre><code>class Global\n    {\n        int a;\n        Local1 l1;\n    }\n\n    class Local1\n    {\n        int b;\n        Local2 l2;\n        Local1(){printf(\"%i\", a);}; #constructor\n\n    }\n\n    class Local2\n    {\n        Local2(){printf(\"%i, %i\", a, b);}; #constructor\n    }\n\n    main()\n    {\n        Global g;\n        # want to create objects g, l1, l2, and print values of a and a,b \n    }\n</code></pre>\n"}, {"tags": ["c++", "class", "object", "vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1456334876, "post_id": 35608848, "comment_id": 58902206, "body": "You have not defined the ownership. You may use <code>std::shared_ptr&lt;Flow*&gt;</code> and share the polymorph objects (Note: you deep copy is totally wrong - it copies into random memory (uninitialized pointer))"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1456335113, "post_id": 35608848, "comment_id": 58902368, "body": "&quot;I can&#39;t initialize a empty Flow object at this point, because the execute() method is pure virtual&quot;. If it weren&#39;t pure virtual, an empty Flow object wouldn&#39;t do you any good anyway. Do you understand why?"}, {"owner": {"reputation": 103, "user_id": 5701498, "user_type": "registered", "profile_image": "https://graph.facebook.com/1101529833199636/picture?type=large", "display_name": "Dk Ribeiro", "link": "https://stackoverflow.com/users/5701498/dk-ribeiro"}, "edited": false, "score": 0, "creation_date": 1456335402, "post_id": 35608848, "comment_id": 58902561, "body": "@n-m Yes, I was just preventing this suggestion"}, {"owner": {"reputation": 103, "user_id": 5701498, "user_type": "registered", "profile_image": "https://graph.facebook.com/1101529833199636/picture?type=large", "display_name": "Dk Ribeiro", "link": "https://stackoverflow.com/users/5701498/dk-ribeiro"}, "edited": false, "score": 0, "creation_date": 1456335753, "post_id": 35608848, "comment_id": 58902791, "body": "@DieterL&#252;cking But I can&#39;t initialize the Flow object to use shared_ptr"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1456337036, "post_id": 35608848, "comment_id": 58903610, "body": "@DkRibeiro What is the reason why <code>Model</code> needs to be copyable?  If it doesn&#39;t make sense for <code>Model</code> to be copied, disable it.  You really need to determine  *&quot;what does it mean to make a copy of a Model?&quot;  It isn&#39;t just about blindly copying a container of Flow pointers and some member variables -- you have to make a choice based on design and real-case uses.  Sometimes classes just aren&#39;t made to be copyable -- a good example are stream classes."}, {"owner": {"reputation": 103, "user_id": 5701498, "user_type": "registered", "profile_image": "https://graph.facebook.com/1101529833199636/picture?type=large", "display_name": "Dk Ribeiro", "link": "https://stackoverflow.com/users/5701498/dk-ribeiro"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1456337377, "post_id": 35608848, "comment_id": 58903818, "body": "@PaulMcKenzie Actually this doesn&#39;t have any utility, but it&#39;s required by my teacher on this assignment."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1456337710, "post_id": 35608848, "comment_id": 58903988, "body": "@DkRibeiro Well, your teacher needs to answer the questions I asked.  What does it mean to &quot;copy a Model&quot;?  Not just a syntax-based answer, but a conceptual answer.   Does it mean that each Model shares the pointers that are in the Flow vectors?  Does it mean that each Model has totally distinct Flow objects in a vector?  Again, there are scenarios where copying an object makes very little sense, I give you the C++ <code>stream</code> classes.  You cannot copy stream classes, because copying is turned off.  Why?  Because it made no conceptual sense to copy a stream object."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 5701498, "user_type": "registered", "profile_image": "https://graph.facebook.com/1101529833199636/picture?type=large", "display_name": "Dk Ribeiro", "link": "https://stackoverflow.com/users/5701498/dk-ribeiro"}, "edited": false, "score": 0, "creation_date": 1456335089, "post_id": 35608968, "comment_id": 58902347, "body": "I can&#39;t do that, my final user have to only implement the execute method."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 103, "user_id": 5701498, "user_type": "registered", "profile_image": "https://graph.facebook.com/1101529833199636/picture?type=large", "display_name": "Dk Ribeiro", "link": "https://stackoverflow.com/users/5701498/dk-ribeiro"}, "edited": false, "score": 3, "creation_date": 1456335119, "post_id": 35608968, "comment_id": 58902374, "body": "Then you cannot deep copy objects"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1456337562, "last_edit_date": 1495542224, "creation_date": 1456334785, "answer_id": 35608968, "question_id": 35608848, "link": "https://stackoverflow.com/questions/35608848/how-to-copy-itens-from-a-vectorclass-to-another-vectorclass-when-the-class/35608968#35608968", "title": "How to copy itens from a vector&lt;Class*&gt; to another vector&lt;Class*&gt; when the Class have virtual methods", "body": "<p>One of the solutions is to add pure virtual method <code>clone</code> and implement it in each derived class:</p>\n\n<pre><code>class Flow {\npublic:\n    ...\n    Flow *clone() const = 0;\n};\n\nclass Foobar : public Flow {\npublic:\n    ...\n    Flow *clone() const { return new Foobar(*this); }\n};\n</code></pre>\n\n<p>and your loop will be this:</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; mdl.flows.size(); i++) {\n    this-&gt;flows[i] = mdl.flows[i]-&gt;clone();\n</code></pre>\n\n<p>you should consider using smart pointers for proper memory control though.</p>\n\n<p>If you cannot add a virtual method then you cannot deep copy your objects, so you either need to change your ownership to shared (through std::shared_ptr) or prohibit copying <code>Model</code> objects (if you use c++11 you may allow move assignmennt though)</p>\n\n<p>Note: even if you make your current statement compile, making your virtual method not pure, it will not work as you expect it because of <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">What is object slicing?</a></p>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1456337332, "post_id": 35609594, "comment_id": 58903787, "body": "Even if you can you will not get proper object, it would be sliced"}], "tags": [], "owner": {"reputation": 51, "user_id": 5931651, "user_type": "registered", "profile_image": "https://graph.facebook.com/963686230345450/picture?type=large", "display_name": "Filipe Bento", "link": "https://stackoverflow.com/users/5931651/filipe-bento"}, "is_accepted": false, "score": 1, "last_activity_date": 1456336774, "creation_date": 1456336774, "answer_id": 35609594, "question_id": 35608848, "link": "https://stackoverflow.com/questions/35608848/how-to-copy-itens-from-a-vectorclass-to-another-vectorclass-when-the-class/35609594#35609594", "title": "How to copy itens from a vector&lt;Class*&gt; to another vector&lt;Class*&gt; when the Class have virtual methods", "body": "<p>You can only  make a item copy at this way, if you can initialize the object. I'm having the same issue! </p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 5701498, "user_type": "registered", "profile_image": "https://graph.facebook.com/1101529833199636/picture?type=large", "display_name": "Dk Ribeiro", "link": "https://stackoverflow.com/users/5701498/dk-ribeiro"}, "is_accepted": true, "score": 0, "last_activity_date": 1456346880, "creation_date": 1456346880, "answer_id": 35612762, "question_id": 35608848, "link": "https://stackoverflow.com/questions/35608848/how-to-copy-itens-from-a-vectorclass-to-another-vectorclass-when-the-class/35612762#35612762", "title": "How to copy itens from a vector&lt;Class*&gt; to another vector&lt;Class*&gt; when the Class have virtual methods", "body": "<p>After try many things, I finally came to this solution, that's works:</p>\n\n<pre><code>Model&amp; Model::operator =(const Model&amp; mdl) {\n    this-&gt;name = mdl.name;\n\n    for (unsigned int i = 0; i &lt; mdl.flows.size(); i++) {\n        Flow *cp = (Flow*) malloc(sizeof(mdl.flows[i]));\n        this-&gt;flows.push_back(cp);\n    }\n\n    return *this;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 5931651, "user_type": "registered", "profile_image": "https://graph.facebook.com/963686230345450/picture?type=large", "display_name": "Filipe Bento", "link": "https://stackoverflow.com/users/5931651/filipe-bento"}, "is_accepted": false, "score": 0, "last_activity_date": 1456925880, "creation_date": 1456925880, "answer_id": 35748807, "question_id": 35608848, "link": "https://stackoverflow.com/questions/35608848/how-to-copy-itens-from-a-vectorclass-to-another-vectorclass-when-the-class/35748807#35748807", "title": "How to copy itens from a vector&lt;Class*&gt; to another vector&lt;Class*&gt; when the Class have virtual methods", "body": "<p>Your code is almost correct, but you need to copy the content to the new pointer</p>\n\n<pre><code>Model&amp; Model::operator =(const Model&amp; mdl) {\n    this-&gt;name = mdl.name;\n\n    for (unsigned int i = 0; i &lt; mdl.flows.size(); i++) {\n        Flow *cp = (Flow*) malloc(sizeof(mdl.flows[i]));\n        *cp = * mdl.flows[i]; //The content is copied here\n        this-&gt;flows.push_back(cp);\n    }\n\nreturn *this;\n}\n</code></pre>\n\n<p>you can also use interator like this:</p>\n\n<pre><code>Model&amp; Model::operator =(const Model&amp; mdl) {\n    this-&gt;name = mdl.name;\n\n    vector&lt;Flow*&gt;::iterator it;\n    for(*it = mdl.flowBegin() ; *it!=mdl.flowEnd(); it++){\n        Flow *cp = (Flow*) malloc (sizeof(it));\n        *cp=**it; //The content is copied here\n        Flows.push_back(cp);\n    }\n\nreturn *this;\n}   \n</code></pre>\n\n<p>but in this case you need to create a method in your class Flow that return a pointer to the beggin and the end of the vector. </p>\n"}], "owner": {"reputation": 103, "user_id": 5701498, "user_type": "registered", "profile_image": "https://graph.facebook.com/1101529833199636/picture?type=large", "display_name": "Dk Ribeiro", "link": "https://stackoverflow.com/users/5701498/dk-ribeiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 2, "accepted_answer_id": 35612762, "answer_count": 4, "score": 1, "last_activity_date": 1456925880, "creation_date": 1456334475, "last_edit_date": 1456346983, "question_id": 35608848, "link": "https://stackoverflow.com/questions/35608848/how-to-copy-itens-from-a-vectorclass-to-another-vectorclass-when-the-class", "title": "How to copy itens from a vector&lt;Class*&gt; to another vector&lt;Class*&gt; when the Class have virtual methods", "body": "<p>I'm stock on this problem and all the solutions that I found here doesn't work for me.</p>\n\n<p>First, I have this class:</p>\n\n<pre><code>class Flow {\npublic:\n    Flow();\n    ...\n    virtual double execute() = 0;\n    ...\nprivate:\n    ...\n};\n</code></pre>\n\n<p>That's working fine in my subclass tests. And I also have this Class:</p>\n\n<pre><code>class Model {\npublic:\n    Model();\n    ...\n    Model(const Model&amp; mdl);\n    Model&amp; operator=(const Model&amp; mdl);\n    ...\nprivate:\n    string name;\n    vector&lt;Flow*&gt; flows;\n    ...\n};\n</code></pre>\n\n<p>And in the copy constructor, i have to copy the Flow* vector to another Flow* vector, and I'm doing this:</p>\n\n<pre><code>Model&amp; Model::operator =(const Model&amp; mdl) {\n    this-&gt;name = mdl.name;\n    this-&gt;flows.resize(mdl.flows.size());\n    for (unsigned int i = 0; i &lt; mdl.flows.size(); i++) {\n        *this-&gt;flows[i] = *mdl.flows[i];\n    }\n    return *this;\n}\n</code></pre>\n\n<p>But isn't working.\nI can't initialize a empty Flow object at this point, because the execute() method is pure virtual;</p>\n\n<p>I tried to use transform(), but the clone() method needs to implement the Flow();</p>\n\n<p>What I'm doing wrong? </p>\n\n<p><strong>UPDATE:</strong>\nThis way works:</p>\n\n<pre><code>Model&amp; Model::operator =(const Model&amp; mdl) {\n    this-&gt;name = mdl.name;\n\n    for (unsigned int i = 0; i &lt; mdl.flows.size(); i++) {\n        Flow *cp = (Flow*) malloc(sizeof(mdl.flows[i]));\n        this-&gt;flows.push_back(cp);\n    }\n\n    return *this;\n}\n</code></pre>\n"}, {"tags": ["c++", "process", "segmentation-fault", "crontab"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1456334570, "post_id": 35608815, "comment_id": 58901975, "body": "Well, that probably means that one of the new unit tests caused a segmentation fault.  Check which new tests were added, or what was changed in the codebase, that could cause such error."}], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 3561463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fbea714baa4e40d1900f19d80c85041?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Negrete", "link": "https://stackoverflow.com/users/3561463/luis-negrete"}, "is_accepted": true, "score": 0, "last_activity_date": 1456434073, "creation_date": 1456434073, "answer_id": 35638244, "question_id": 35608815, "link": "https://stackoverflow.com/questions/35608815/process-ending-with-using-crontab/35638244#35638244", "title": "Process ending with using crontab", "body": "<p>The answer was to initialize the pointer member variables of the new class. Thanks for the input!</p>\n"}], "owner": {"reputation": 43, "user_id": 3561463, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7fbea714baa4e40d1900f19d80c85041?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Negrete", "link": "https://stackoverflow.com/users/3561463/luis-negrete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 35638244, "answer_count": 1, "score": -1, "last_activity_date": 1456434073, "creation_date": 1456334388, "question_id": 35608815, "link": "https://stackoverflow.com/questions/35608815/process-ending-with-using-crontab", "title": "Process ending with using crontab", "body": "<p>For our group's code, I run our unit tests overnight on my work PC using crontab. For each unit test, the script checks out a fresh version of the code from the repository, compiles it, runs the tests, and send emails to everyone in the group, depending on what happens.</p>\n\n<p>Lately, when the tests get testing our wrapper around Snopt, I get the following messages:</p>\n\n<pre><code>[myPC:32591] *** Process received signal ***\n[myPC:32591] Signal: Segmentation fault (11)\n[myPC:32591] Signal code: Address not mapped (1)\n[myPC:32591] Failing at address: 0x20e6000\n</code></pre>\n\n<p>I've replaced the name of my PC with \"myPC\". I'm not sure what this means tho. From the searches I've done, these errors typically occur with mpi, but the code being used is serial.</p>\n\n<p>Any thoughts would be greatly appreciated; I can't be the only one with this issue, so I hope this can be a resource for others that might run into this problem.</p>\n"}, {"tags": ["c++", "regex", "c++11"], "comments": [{"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "edited": false, "score": 4, "creation_date": 1456334582, "post_id": 35608813, "comment_id": 58901988, "body": "It looks like you try to accomplish something, using regular expressions, that should be accomplished by a parser. Having said that, it is not at all clear from your question what you actually want to match."}, {"owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "edited": false, "score": 0, "creation_date": 1456334825, "post_id": 35608813, "comment_id": 58902164, "body": "What do you mean by &quot;skip all descriptions&quot;? Are you trying not to match comments?"}, {"owner": {"reputation": 13, "user_id": 5975923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a56001e43ad34535c53d4c285ae900?s=128&d=identicon&r=PG&f=1", "display_name": "BasicYard", "link": "https://stackoverflow.com/users/5975923/basicyard"}, "edited": false, "score": 0, "creation_date": 1456334924, "post_id": 35608813, "comment_id": 58902246, "body": "yes try to not match comments"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1456334977, "post_id": 35608813, "comment_id": 58902279, "body": "You can skip the comments, but a note that <code>; Block3 { hi }</code> is invalid C++ if nothing exists before the first comment."}, {"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "edited": false, "score": 0, "creation_date": 1456335066, "post_id": 35608813, "comment_id": 58902333, "body": "Do your language allow nested comments? Will the comment character inside strings count as comments (e.g. &quot;tets/*test*/&quot;)? can block name and opening bracket be on each line?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1456335072, "post_id": 35608813, "comment_id": 58902336, "body": "Actually you have to not only parse comments, but parse strings outside of comments as well, if for example your strings could span lines."}, {"owner": {"reputation": 13, "user_id": 5975923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a56001e43ad34535c53d4c285ae900?s=128&d=identicon&r=PG&f=1", "display_name": "BasicYard", "link": "https://stackoverflow.com/users/5975923/basicyard"}, "edited": false, "score": 0, "creation_date": 1456335137, "post_id": 35608813, "comment_id": 58902387, "body": "could you edit my regex with what you said?"}, {"owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "edited": false, "score": 0, "creation_date": 1456335250, "post_id": 35608813, "comment_id": 58902452, "body": "Be careful. In c++, <code>;</code> does not start a comment and neither does <code>#</code>. The <code>;</code> ends statements and <code>#</code> signals the preprocessor (as in <code>#include</code> statements). Comments in c++ either start with <code>&#47;&#47;</code> or are surrounded by <code>&#47;*</code> and <code>*&#47;</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 1, "creation_date": 1456335668, "post_id": 35608813, "comment_id": 58902735, "body": "<i>You can</i> parse the blocks, <i>but</i> the part between <code>{ ...}</code> can be subtly masked within a string like <code>{ ...&quot;}&quot;;....}</code>. The way you would have to do it is match comments or strings or your block as a single expression, i.e. <code>comments|strings|(block{(?:comments|strings|.)*})</code> then look for capture group 1 to match. I could give you the regex, but it&#39;s very big."}, {"owner": {"reputation": 13, "user_id": 5975923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a56001e43ad34535c53d4c285ae900?s=128&d=identicon&r=PG&f=1", "display_name": "BasicYard", "link": "https://stackoverflow.com/users/5975923/basicyard"}, "edited": false, "score": 0, "creation_date": 1456336676, "post_id": 35608813, "comment_id": 58903396, "body": "please give me the full regex i&#39;m confounded"}], "answers": [{"tags": [], "owner": {"reputation": 1854, "user_id": 224935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/59h0o.jpg?s=128&g=1", "display_name": "Jay Elston", "link": "https://stackoverflow.com/users/224935/jay-elston"}, "is_accepted": false, "score": 1, "last_activity_date": 1456340371, "last_edit_date": 1495539917, "creation_date": 1456340371, "answer_id": 35610722, "question_id": 35608813, "link": "https://stackoverflow.com/questions/35608813/regex-skip-in-c/35610722#35610722", "title": "Regex skip in C++", "body": "<p>Tl;DR: <a href=\"http://blog.codinghorror.com/parsing-beyond-regex/\" rel=\"nofollow noreferrer\">Regular expressions cannot be used to parse full blown computer languages</a>. What you want to do cannot be done with regular expressions. You need to develop a mini-C++ parser to filter out comments. <a href=\"https://stackoverflow.com/questions/503871/best-way-to-automatically-remove-comments-from-php-code\">The answer to this related question might point you in the right direction</a>.</p>\n\n<p>Regex can be used to process <a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">regular expressions</a>, but computer languages such as C++, PHP, Java, C#, HTML, etc. have a more complex syntax that includes a property named \"middle recursion\". Middle recursion includes complications such as an arbitrary number of matching parenthesis, begin / end quotes, and comments that can contain symbols </p>\n\n<p>If you want to understand this in more detail, <a href=\"https://stackoverflow.com/questions/559763/regular-vs-context-free-grammars\">read the answers to this question about the difference between regular expressions and context free grammars</a>. If you are really curious, enroll in a <a href=\"https://en.wikipedia.org/wiki/Formal_language\" rel=\"nofollow noreferrer\">Formal Language Theory</a> class. </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": true, "score": 1, "last_activity_date": 1456434391, "creation_date": 1456434391, "answer_id": 35638334, "question_id": 35608813, "link": "https://stackoverflow.com/questions/35608813/regex-skip-in-c/35638334#35638334", "title": "Regex skip in C++", "body": "<p>Since you requested this long regex, here it is.  </p>\n\n<p>This will not handle <em>nested</em> Blocks like <code>block{ block{ } }</code><br>\nit would match <code>block{ block{ }</code> } only.  </p>\n\n<p>Since you specified you are using C++11 as the engine, I didn't use<br>\nrecursion. This is easily changed to use recursion say if you were to use<br>\nPCRE or Perl, or even BOOST::Regex. Let me know if you'd want to see that.    </p>\n\n<p>As it is it's flawed, but works for your sample.<br>\nAnother thing it won't do is parse <em>Preprocessor Directives '#...'</em>  because<br>\nI forgot the rules for that (thought I did it recently, but can't find a record).  </p>\n\n<p>To use it, sit in a <code>while ( regex_search() )</code> loop looking for a match on<br>\ncapture group 1, <code>if (m[1].success)</code> etc.. That will be your block.<br>\nThe rest of the matches are for comments, quotes, or non-comments, unrelated<br>\nto the block. These have to be matched to progress the match position.  </p>\n\n<p>The code is <em>long</em> and redundant because there is no function calls (recursion)  in the C++11 EMCAscript. Like I said, use boost::regex or something.  </p>\n\n<p><strong>Benchmark</strong>  </p>\n\n<p>Sample:  </p>\n\n<pre><code>/*\n  Block1 {\n\n    anythinghere\n  }\n*/\n\n// Block2 { }\n\nBlock4 {\n\n   // CommentedBlock{ asdfasdf }\n    anyth\"}\"ing here\n}\n\nBlock5 {\n\n   /* CommentedBlock{ asdfasdf }\n    anyth}\"ing here\n   */\n}\n</code></pre>\n\n<p>Results:  </p>\n\n<pre><code>Regex1:   (?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/|//(?:[^\\\\]|\\\\\\n?)*?\\n)|(?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|(\\w+\\s*\\{(?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/|//(?:[^\\\\]|\\\\\\n?)*?\\n)|(?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|(?!\\})[\\S\\s][^}/\"'\\\\]*))*\\})|[\\S\\s](?:(?!\\w+\\s*\\{(?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/|//(?:[^\\\\]|\\\\\\n?)*?\\n)|(?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|(?!\\})[\\S\\s][^}/\"'\\\\]*))*\\})[^/\"'\\\\])*)\nOptions:  &lt; none &gt;\nCompleted iterations:   50  /  50     ( x 1000 )\nMatches found per iteration:   8\nElapsed Time:    1.95 s,   1947.26 ms,   1947261 \u00b5s\n</code></pre>\n\n<p>Regex Explained:   </p>\n\n<pre><code>    # Raw:        (?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/|//(?:[^\\\\]|\\\\\\n?)*?\\n)|(?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|(\\w+\\s*\\{(?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/|//(?:[^\\\\]|\\\\\\n?)*?\\n)|(?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|(?!\\})[\\S\\s][^}/\"'\\\\]*))*\\})|[\\S\\s](?:(?!\\w+\\s*\\{(?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/|//(?:[^\\\\]|\\\\\\n?)*?\\n)|(?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|(?!\\})[\\S\\s][^}/\"'\\\\]*))*\\})[^/\"'\\\\])*)\n    # Stringed:  \"(?:/\\\\*[^*]*\\\\*+(?:[^/*][^*]*\\\\*+)*/|//(?:[^\\\\\\\\]|\\\\\\\\\\\\n?)*?\\\\n)|(?:\\\"[^\\\"\\\\\\\\]*(?:\\\\\\\\[\\\\S\\\\s][^\\\"\\\\\\\\]*)*\\\"|'[^'\\\\\\\\]*(?:\\\\\\\\[\\\\S\\\\s][^'\\\\\\\\]*)*'|(\\\\w+\\\\s*\\\\{(?:(?:/\\\\*[^*]*\\\\*+(?:[^/*][^*]*\\\\*+)*/|//(?:[^\\\\\\\\]|\\\\\\\\\\\\n?)*?\\\\n)|(?:\\\"[^\\\"\\\\\\\\]*(?:\\\\\\\\[\\\\S\\\\s][^\\\"\\\\\\\\]*)*\\\"|'[^'\\\\\\\\]*(?:\\\\\\\\[\\\\S\\\\s][^'\\\\\\\\]*)*'|(?!\\\\})[\\\\S\\\\s][^}/\\\"'\\\\\\\\]*))*\\\\})|[\\\\S\\\\s](?:(?!\\\\w+\\\\s*\\\\{(?:(?:/\\\\*[^*]*\\\\*+(?:[^/*][^*]*\\\\*+)*/|//(?:[^\\\\\\\\]|\\\\\\\\\\\\n?)*?\\\\n)|(?:\\\"[^\\\"\\\\\\\\]*(?:\\\\\\\\[\\\\S\\\\s][^\\\"\\\\\\\\]*)*\\\"|'[^'\\\\\\\\]*(?:\\\\\\\\[\\\\S\\\\s][^'\\\\\\\\]*)*'|(?!\\\\})[\\\\S\\\\s][^}/\\\"'\\\\\\\\]*))*\\\\})[^/\\\"'\\\\\\\\])*)\"     \n\n\n    (?:                              # Comments \n         /\\*                              # Start /* .. */ comment\n         [^*]* \\*+\n         (?: [^/*] [^*]* \\*+ )*\n         /                                # End /* .. */ comment\n      |  \n         //                               # Start // comment\n         (?: [^\\\\] | \\\\ \\n? )*?           # Possible line-continuation\n         \\n                               # End // comment\n    )\n |                                 # OR,\n\n    (?:                              # Non - comments \n         \"\n         [^\"\\\\]*                          # Double quoted text\n         (?: \\\\ [\\S\\s] [^\"\\\\]* )*\n         \"\n      |  '\n         [^'\\\\]*                          # Single quoted text\n         (?: \\\\ [\\S\\s] [^'\\\\]* )*\n         ' \n      |  \n         (                                # (1 start), BLOCK\n              \\w+ \\s* \\{               \n              ####################\n              (?:                              # ------------------------\n                   (?:                              # Comments  inside a block\n                        /\\*                             \n                        [^*]* \\*+\n                        (?: [^/*] [^*]* \\*+ )*\n                        /                                \n                     |  \n                        //                               \n                        (?: [^\\\\] | \\\\ \\n? )*?\n                        \\n                               \n                   )\n                |  \n                   (?:                              # Non - comments inside a block\n                        \"\n                        [^\"\\\\]*                          \n                        (?: \\\\ [\\S\\s] [^\"\\\\]* )*\n                        \"\n                     |  '\n                        [^'\\\\]*                          \n                        (?: \\\\ [\\S\\s] [^'\\\\]* )*\n                        ' \n                     |  \n                        (?! \\} )\n                        [\\S\\s]                          \n                        [^}/\"'\\\\]*                      \n                   )\n              )*                               # ------------------------\n              #####################          \n              \\}                               \n         )                                # (1 end), BLOCK\n\n      |                                 # OR,\n\n         [\\S\\s]                           # Any other char\n         (?:                              # -------------------------\n              (?!                              # ASSERT: Here, cannot be a BLOCK{ }\n                   \\w+ \\s* \\{                      \n                   (?:                              # ==============================\n                        (?:                              # Comments inside a block\n                             /\\*                              \n                             [^*]* \\*+\n                             (?: [^/*] [^*]* \\*+ )*\n                             /                                \n                          |  \n                             //                               \n                             (?: [^\\\\] | \\\\ \\n? )*?\n                             \\n                               \n                        )\n                     |  \n                        (?:                              # Non - comments inside a block\n                             \"\n                             [^\"\\\\]*                          \n                             (?: \\\\ [\\S\\s] [^\"\\\\]* )*\n                             \"\n                          |  \n                             '\n                             [^'\\\\]*                          \n                             (?: \\\\ [\\S\\s] [^'\\\\]* )*\n                             ' \n                          |  \n                             (?! \\} )\n                             [\\S\\s]                          \n                             [^}/\"'\\\\]*                       \n                        )\n                   )*                               # ==============================\n                   \\}                               \n              )                                # ASSERT End\n\n              [^/\"'\\\\]                         # Char which doesn't start a comment, string, escape,\n                                               # or line continuation (escape + newline)\n         )*                               # -------------------------\n    )                                # Done Non - comments \n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5975923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a56001e43ad34535c53d4c285ae900?s=128&d=identicon&r=PG&f=1", "display_name": "BasicYard", "link": "https://stackoverflow.com/users/5975923/basicyard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 35638334, "answer_count": 2, "score": 0, "last_activity_date": 1456434391, "creation_date": 1456334386, "last_edit_date": 1456335874, "question_id": 35608813, "link": "https://stackoverflow.com/questions/35608813/regex-skip-in-c", "title": "Regex skip in C++", "body": "<p>This is my string:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>/*\n  Block1 {\n\n    anythinghere\n  }\n*/\n\n// Block2 { }\n# Block3 { }\n\nBlock4 {\n\n    anything here\n}\n</code></pre>\n\n<p>I am using this regex to get each block name and inside content.</p>\n\n<pre><code>regex e(R\"~((\\w+)\\s+\\{([^}]+)\\})~\", std::regex::optimize);\n</code></pre>\n\n<p>But this regex gets all inside of description too. There is a \u201cskip\u201d option in PHP that you can use to skip all descriptions.</p>\n\n<pre><code>What_I_want_to_avoid(*SKIP)(*FAIL)|What_I_want_to_match\n</code></pre>\n\n<p>But this is C++ and I cannot use this skip method. What should I do to skip all descriptions and just get Block4 in C++ regex?</p>\n\n<p>This regex detects <code>Block1</code>, <code>Block2</code>, <code>Block3</code> and <code>Block4</code> but I want to skip <code>Block1</code>, <code>Block2</code>, <code>Block3</code> and just get <code>Block4</code> (skip descriptions). How do I have to edit my regex to get just <code>Block4</code> (everything outside the descriptions)?</p>\n"}, {"tags": ["c++", "string", "struct"], "comments": [{"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 3, "creation_date": 1456334550, "post_id": 35608710, "comment_id": 58901962, "body": "What is <code>string</code>? Are you sure that it is C and not C++?"}, {"owner": {"reputation": 919, "user_id": 3095460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utTEO.jpg?s=128&g=1", "display_name": "Sridhar Nagarajan", "link": "https://stackoverflow.com/users/3095460/sridhar-nagarajan"}, "edited": false, "score": 0, "creation_date": 1456335095, "post_id": 35608710, "comment_id": 58902349, "body": "I think you must be confusing with C syntax in C++.. Use c compiler for c code. This will throw compilation error itself."}, {"owner": {"reputation": 1, "user_id": 5814059, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0vFEvnHLs80/AAAAAAAAAAI/AAAAAAAAACs/h8FhrBpabfA/photo.jpg?sz=128", "display_name": "Abhishek Tiwari", "link": "https://stackoverflow.com/users/5814059/abhishek-tiwari"}, "edited": false, "score": 0, "creation_date": 1456335705, "post_id": 35608710, "comment_id": 58902762, "body": "sorry ..its c++ ..compiled using g++ not gcc and no compile error was there.."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1456335819, "post_id": 35608710, "comment_id": 58902823, "body": "If so, then you shouldn&#39;t be using malloc() to allocate space for objects. Use new() instead."}, {"owner": {"reputation": 1, "user_id": 5814059, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0vFEvnHLs80/AAAAAAAAAAI/AAAAAAAAACs/h8FhrBpabfA/photo.jpg?sz=128", "display_name": "Abhishek Tiwari", "link": "https://stackoverflow.com/users/5814059/abhishek-tiwari"}, "edited": false, "score": 0, "creation_date": 1456335946, "post_id": 35608710, "comment_id": 58902912, "body": "why..what&#39;s wrong with malloc..??"}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1456336031, "post_id": 35608710, "comment_id": 58902966, "body": "It does not actually create objects, only allocates memory."}, {"owner": {"reputation": 1541, "user_id": 21255, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/k7ePO.png?s=128&g=1", "display_name": "RobH", "link": "https://stackoverflow.com/users/21255/robh"}, "edited": false, "score": 0, "creation_date": 1456336172, "post_id": 35608710, "comment_id": 58903064, "body": "malloc()/free() is the way C allocates and frees memory. new/delete is how C++ does it, and it handles all of the necessary things that have to be done if what you&#39;re allocating/freeing is an object (i.e., calling the object&#39;s constructor/destructor functions). (BTW, new and delete are not functions; they work the same way as a return statement---no parens necessary.)"}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "reply_to_user": {"reputation": 1541, "user_id": 21255, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/k7ePO.png?s=128&g=1", "display_name": "RobH", "link": "https://stackoverflow.com/users/21255/robh"}, "edited": false, "score": 0, "creation_date": 1456336277, "post_id": 35608710, "comment_id": 58903136, "body": "@RobH <code>new-expression</code> does more than just allocates memory. You can use <code>malloc</code> with C++ object, but you will need to handle all that extra stuff yourself."}, {"owner": {"reputation": 1, "user_id": 5814059, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0vFEvnHLs80/AAAAAAAAAAI/AAAAAAAAACs/h8FhrBpabfA/photo.jpg?sz=128", "display_name": "Abhishek Tiwari", "link": "https://stackoverflow.com/users/5814059/abhishek-tiwari"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1456336650, "post_id": 35608710, "comment_id": 58903377, "body": "thank you for explanation..@RobH and @Revolver_Ocelot ...I understood..:)"}, {"owner": {"reputation": 1541, "user_id": 21255, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/k7ePO.png?s=128&g=1", "display_name": "RobH", "link": "https://stackoverflow.com/users/21255/robh"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1456336671, "post_id": 35608710, "comment_id": 58903389, "body": "@Revolver_Ocelot That&#39;s pretty much what I said in my comment. new/delete allocates/frees memory and does the necessary object stuff, such as calling the constructor/destructor."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1456338142, "post_id": 35608710, "comment_id": 58904236, "body": "A std::string is a container ... and you do not know how it is implemented, and it might be implemented differently on different systems.  On ubuntu 15.10 (64 bit), g++ 5.2.1, for example,  sizeof(emptyString) reports 32 bytes, which does not change when you add characters.  I infer from this that the characters are stored somewhere else.  Then you can conclude that std::string contains pointers to where the data resides, and thus malloc (and free) won&#39;t know how to handle this split of location."}], "owner": {"reputation": 1, "user_id": 5814059, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0vFEvnHLs80/AAAAAAAAAAI/AAAAAAAAACs/h8FhrBpabfA/photo.jpg?sz=128", "display_name": "Abhishek Tiwari", "link": "https://stackoverflow.com/users/5814059/abhishek-tiwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1456337473, "answer_count": 0, "score": 0, "last_activity_date": 1456335877, "creation_date": 1456334110, "last_edit_date": 1456335877, "question_id": 35608710, "link": "https://stackoverflow.com/questions/35608710/why-can-i-not-add-string-in-a-structure", "closed_reason": "Duplicate", "title": "why can i not add string in a structure", "body": "<p>I was trying to define structure having an int and string type members.  </p>\n\n<pre><code>typedef struct emp{\n    int sno;\n    string name;\n}\n</code></pre>\n\n<p>When I allocated space using <code>malloc</code> and modified the name variable, it gives <code>Segmentation Fault</code>.  <br/>  I searched on stackoverflow and found solution to use <code>char*</code> instead of <code>string</code> type. Is it because <code>char*</code> has a fixed size (pointer size)?\nAlso how does <code>sizeof</code> treats a string variable since its length is not known before allocation?</p>\n"}, {"tags": ["c++", "build", "cmake", "makefile", "nmake"], "answers": [{"comments": [{"owner": {"reputation": 1748, "user_id": 17315, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e70d6a10e779d77b290891386147702?s=128&d=identicon&r=PG", "display_name": "Sqeaky", "link": "https://stackoverflow.com/users/17315/sqeaky"}, "edited": false, "score": 0, "creation_date": 1456340888, "post_id": 35610897, "comment_id": 58905876, "body": "I will not mark my own answer as the answer for at least 24 hours because the community often comes up with something better than I do and I would rather choose an answer that explains why and not just what happened."}], "tags": [], "owner": {"reputation": 1748, "user_id": 17315, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e70d6a10e779d77b290891386147702?s=128&d=identicon&r=PG", "display_name": "Sqeaky", "link": "https://stackoverflow.com/users/17315/sqeaky"}, "is_accepted": false, "score": 0, "last_activity_date": 1456340872, "creation_date": 1456340872, "answer_id": 35610897, "question_id": 35608587, "link": "https://stackoverflow.com/questions/35608587/cmake-externalproject-add-with-pcre-library-does-not-work-with-nmake-generator/35610897#35610897", "title": "Cmake ExternalProject_Add with PCRE library does not work with NMake Generator", "body": "<p>I was manually tinkering around with the PCRE build and discovered that it emits binaries with slightly different names during different builds. I looked in my output directories again and on my msvc builds I noticed that the PCRE static libraries had an extra \"d\" in the name. So they were \"pcrecppd.lib\", \"pcred.lib\" and \"pcreposixd.lib\". </p>\n\n<p>I know that some build processes do this to allow debug and release builds to co-exist in the same build directory. So I check if this was a debug build by looking in the <em>CMakeCache.txt</em></p>\n\n<p>Working builds - line 17 to 20 of CMakeCache:</p>\n\n<pre><code>//Choose the type of build, options are: None(CMAKE_CXX_FLAGS or\n// CMAKE_C_FLAGS used) Debug Release RelWithDebInfo MinSizeRel.\nCMAKE_BUILD_TYPE:STRING=RELEASE\n</code></pre>\n\n<p>Failing build - line 17 to 20 of CMakeCache:</p>\n\n<pre><code>//Choose the type of build, options are: None(CMAKE_CXX_FLAGS or\n// CMAKE_C_FLAGS used) Debug Release RelWithDebInfo MinSizeRel.\nCMAKE_BUILD_TYPE:STRING=DEBUG\n</code></pre>\n\n<p>On the assumption this was my problem I decided to set the external project only to build in release mode. We can set it to debug manually in the unlikely event we need to debug the regex library. I used the CMAKE_ARGS as described on the <a href=\"https://cmake.org/cmake/help/v3.2/module/ExternalProject.html\" rel=\"nofollow\">ExternalProject cmake documentation</a> page.</p>\n\n<pre><code>include(ExternalProject)\nExternalProject_Add(\n  PCRE\n  SOURCE_DIR \"${PcreSrcDir}\"\n  INSTALL_COMMAND \"\"\n  BUILD_BYPRODUCTS \"${PcreLibs}\"\n  *CMAKE_ARGS \"-DCMAKE_BUILD_TYPE:STRING=Release\"*\n)\n</code></pre>\n\n<p>I deleted my whole build folder (to insure a clean state and avoid contamination with my manual tinkering) and reconfigured with cmake and rebuilt the software. This time it built and linked without error.</p>\n\n<p>I still don't know why vs and nmake chose to build debug and the other toolchains defaulted to release, I also do not know how much of the \"D\" was the fault of PCRE, vs or nmake or CMake.</p>\n"}], "owner": {"reputation": 1748, "user_id": 17315, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e70d6a10e779d77b290891386147702?s=128&d=identicon&r=PG", "display_name": "Sqeaky", "link": "https://stackoverflow.com/users/17315/sqeaky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 709, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456340872, "creation_date": 1456333778, "question_id": 35608587, "link": "https://stackoverflow.com/questions/35608587/cmake-externalproject-add-with-pcre-library-does-not-work-with-nmake-generator", "title": "Cmake ExternalProject_Add with PCRE library does not work with NMake Generator", "body": "<p>I am trying to build the <a href=\"http://pcre.org/original/doc/html/\" rel=\"nofollow\">PCRE</a> library as part of a larger build. The setup I have works find on Ubuntu with CMake 3.2.2 with ninja or make, CMake 3.3.2 on windows with TDM-GCC using Mingw32-make or ninja, but fails when using NMake with the visual studio 2015 compiler. The build work on all these platforms before adding the code I describe below.</p>\n\n<p>I used \"ExternalProject_Add\" to create a target for this build. Following is the section were I set some variables and setup the external project. I have removed several message statements for brevity. <em>LibFolder</em> is a folder in my source tree with and <em>ProjectBinaryDir</em> is out my output folder.</p>\n\n<pre><code>set(PcreSrcDir \"${LibFolder}pcre-8.38/\")\nset(PcreLibDir \"${ProjectBinaryDir}PCRE-prefix/src/PCRE-build/\")\n\nset(PcreCppLib \"${CMAKE_STATIC_LIBRARY_PREFIX}pcrecpp${CMAKE_STATIC_LIBRARY_SUFFIX}\")\n#set(PcreLib \"${CMAKE_STATIC_LIBRARY_PREFIX}pcre${CMAKE_STATIC_LIBRARY_SUFFIX}\")\n#set(PcrePosixLib \"${CMAKE_STATIC_LIBRARY_PREFIX}pcre${CMAKE_STATIC_LIBRARY_SUFFIX}\")\nset(PcreLibs \"${PcreLibDir}${PcreCppLib}\")\n\nset(PcreIncludeDirs \"${PcreSrcDir}\" \"${PcreLibDir}\")\n\ninclude(ExternalProject)\nExternalProject_Add(\n  PCRE\n  SOURCE_DIR \"${PcreSrcDir}\"\n  INSTALL_COMMAND \"\"\n  BUILD_BYPRODUCTS \"${PcreLibs}\"\n)\n</code></pre>\n\n<p>I use <em>PcreIncludeDirs</em> later to with the <em>include_directories</em> command and this appears to work I get no warnings or errors related to finding headers during any of the builds.</p>\n\n<p>I use <em>PcreLibs</em> and the target name <em>PCRE</em> to set up the dependency between the PCRE library and the other libraries and executables in my built. Here is an example, <em>LibrarySource</em> is and an array of source files for the library in this example and <em>ProjectDynamicLib</em> is the name of the So/Dll being built:</p>\n\n<pre><code>add_library(${ProjectDynamicLib} SHARED \"${LibrarySource}\")\ntarget_link_libraries(${ProjectDynamicLib} \"${PcreLibs}\")\nadd_dependencies(${ProjectDynamicLib} PCRE)\n</code></pre>\n\n<p>This works great with Make and Ninja again, but fails with NMake. The build compiles PCRE and most of my C++ code, then when it comes time to link to the it fails with the following error:</p>\n\n<pre><code>NMAKE : fatal error U1073: don't know how to make 'PCRE-prefix\\src\\PCRE-build\\pcrecpp.lib'\nStop.\nNMAKE : fatal error U1077: '\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\nmake.exe\"' : return code '0x2'\nStop.\nNMAKE : fatal error U1077: '\"C:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\BIN\\nmake.exe\"' : return code '0x2'\nStop.\n</code></pre>\n\n<p>At first I was concerned that the library name ommited the absolute PATH to my build directory. So I tried adjusting the name several ways including reversing all the slashes to make them more windows friendly and passing the library name as a relative path to <em>target_link_libraries</em>. I output every related variable so I could manually check them and I checked that the libraries were build and I found them in the folder they belonged windows explorer. I tried a few other silly things that didn't work.</p>\n\n<p>Why does this break using NMake and msvc, but work Using Make, Ninja, Mingw32-make when using Mingw and GCC ?</p>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1456333461, "post_id": 35608479, "comment_id": 58901204, "body": "Should be <code>int main()</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1456333480, "post_id": 35608479, "comment_id": 58901214, "body": "You forgot the return type on main."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1456333524, "post_id": 35608479, "comment_id": 58901243, "body": "BTW, show your <code>Makefile</code> or at least the compilation command"}, {"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 1, "creation_date": 1456333793, "post_id": 35608479, "comment_id": 58901408, "body": "<code>#include &quot;list.cpp&quot;</code> - including a <code>cpp</code> inside a function? Really?"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1456334764, "post_id": 35608479, "comment_id": 58902118, "body": "BTW it seems like your header file doesn&#39;t have <a href=\"https://stackoverflow.com/questions/21090041/why-include-guards\">include guards</a>. If so, add them before you try anything else."}], "answers": [{"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 4, "creation_date": 1456334175, "post_id": 35608591, "comment_id": 58901680, "body": "On the other hand, you should probably never <code>#include</code> a .cpp file."}], "tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": true, "score": 0, "last_activity_date": 1456333784, "creation_date": 1456333784, "answer_id": 35608591, "question_id": 35608479, "link": "https://stackoverflow.com/questions/35608479/c-error-with-makefile-compile-could-not-convert-main/35608591#35608591", "title": "c++ error with makefile compile, could not convert main()::", "body": "<p><code>main()::Student</code> means your <code>Student</code> structure is declared inside <code>main</code>. <code>struct</code> declarations inside functions are very uncommonly used, and in your case it's a mistake. It is caused by</p>\n\n<pre><code>#include \"list.cpp\"\n</code></pre>\n\n<p>in your <code>main</code> function.</p>\n\n<p>You should declare the <code>struct</code> outside your function. To do so, move your <code>#include</code> directive so it's before <code>main</code>:</p>\n\n<pre><code>#include \"function.h\"\n#include \"list.cpp\"\n...\nint main()\n{\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 74, "user_id": 5828425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WVF1MzRgKP8/AAAAAAAAAAI/AAAAAAAARmk/AaN976pUuyM/photo.jpg?sz=128", "display_name": "meet thakkar", "link": "https://stackoverflow.com/users/5828425/meet-thakkar"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1456334277, "post_id": 35608592, "comment_id": 58901756, "body": "all the functions must have return type in c/c++ ( if nothing is being returned then it should be void ) , and main function must return an integer so that, OS can read the returned number and determine whether program executed successfully or not. ( if you return non 0 number as return in main function OS thinks that program did not execute normally )"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1456334339, "post_id": 35608592, "comment_id": 58901814, "body": "It would be useful if you explicitly state the error that exists in the original code."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1456334356, "post_id": 35608592, "comment_id": 58901825, "body": "@meetthakkar You should add to the answer in text what you did."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1456334373, "post_id": 35608592, "comment_id": 58901840, "body": "@meetthakkar That really needs to be in your answer"}], "tags": [], "owner": {"reputation": 74, "user_id": 5828425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WVF1MzRgKP8/AAAAAAAAAAI/AAAAAAAARmk/AaN976pUuyM/photo.jpg?sz=128", "display_name": "meet thakkar", "link": "https://stackoverflow.com/users/5828425/meet-thakkar"}, "is_accepted": false, "score": -1, "last_activity_date": 1456356473, "last_edit_date": 1456356473, "creation_date": 1456333792, "answer_id": 35608592, "question_id": 35608479, "link": "https://stackoverflow.com/questions/35608479/c-error-with-makefile-compile-could-not-convert-main/35608592#35608592", "title": "c++ error with makefile compile, could not convert main()::", "body": "<p>all the functions must have return type in c/c++ ( if nothing is being returned then it should be void ) , and main function must return an integer so that, OS can read the returned number and determine whether program executed successfully or not. ( if you return non 0 number as return in main function OS thinks that program did not execute normally ) </p>\n\n<p>So the code should be as following </p>\n\n<pre><code>#include \"header.h\"\n#include \"function.h\"\n\nint main()\n{\n\n    int input = 0;\n    bool loop = 1;\n\n    #include \"list.cpp\"\n\n    ResetArray(arrayCou, arrayStu);\n\n    while (loop)\n    {\n        cout &lt;&lt; \"cmd&gt; \";\n        cin &gt;&gt; input;\n        switch (input)\n        {\n            case 1:\n                AddCourse(&amp;Course1, arrayCou);\n                break;\n            case 2:\n                AddStudent(&amp;Student1, arrayStu);\n                break;\n            case 3:\n                AddStuCourse(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 4:\n                AddGrade(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 5:\n                PrintCourse(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 6:\n                PrintStudent(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 7:\n                PrintStuCourse(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 8:\n                AvgStuCourse(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 9:\n                loop = 0;\n                break;\n            default:\n                break;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5975815, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208924219686584/picture?type=large", "display_name": "Drew Erwin", "link": "https://stackoverflow.com/users/5975815/drew-erwin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 35608591, "answer_count": 2, "score": -1, "last_activity_date": 1456356473, "creation_date": 1456333423, "last_edit_date": 1456333624, "question_id": 35608479, "link": "https://stackoverflow.com/questions/35608479/c-error-with-makefile-compile-could-not-convert-main", "title": "c++ error with makefile compile, could not convert main()::", "body": "<p>I am working on this project right now and this is my first time with a makefile. </p>\n\n<p>The error that I get is:</p>\n\n<pre>\nHW1.cpp:45:55: error: could not convert \u2018Student1\u2019 from \u2018main()::Student\u2019 to \u2018Student\u2019\n</pre>\n\n<p>Main File:</p>\n\n<pre><code>#include \"header.h\"\n#include \"function.h\"\n\nmain()\n{\n\n    int input = 0;\n    bool loop = 1;\n\n    #include \"list.cpp\"\n\n    ResetArray(arrayCou, arrayStu);\n\n    while (loop)\n    {\n        cout &lt;&lt; \"cmd&gt; \";\n        cin &gt;&gt; input;\n        switch (input)\n        {\n            case 1:\n                AddCourse(&amp;Course1, arrayCou);\n                break;\n            case 2:\n                AddStudent(&amp;Student1, arrayStu);\n                break;\n            case 3:\n                AddStuCourse(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 4:\n                AddGrade(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 5:\n                PrintCourse(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 6:\n                PrintStudent(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 7:\n                PrintStuCourse(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 8:\n                AvgStuCourse(&amp;Student1, &amp;Course1, arrayStu, arrayCou);\n                break;\n            case 9:\n                loop = 0;\n                break;\n            default:\n                break;\n        }\n    }\n}\n</code></pre>\n\n<p>Function Declaration:</p>\n\n<pre><code>#include \"header.h\"\n\nvoid ResetArray(Course arrayCou[][101][5], Student arrayStu[][3]);\nvoid AddCourse(Course Course1, Course arrayCou[][101][5]);\nvoid AddStudent(Student Student1, Student arrayStu[][3]);\nvoid AddStuCourse(Student Student1, Course Course1, Student arrayStu[][3], Course arrayCou[][101][5]);\nvoid AddGrade(Student Student1, Course Course1, Student arrayStu[][3], Course arrayCou[][101][5]);\nvoid PrintCourse(Student Student1, Course Course1, Student arrayStu[][3], Course arrayCou[][101][5]);\nvoid PrintStudent(Student Student1, Course Course1, Student arrayStu[][3], Course arrayCou[][101][5]);\nvoid PrintStuCourse(Student Student1, Course Course1, Student arrayStu[][3], Course arrayCou[][101][5]);\nvoid AvgStuCourse(Student Student1, Course Course1, Student arrayStu[][3], Course arrayCou[][101][5]);\n</code></pre>\n\n<p>Header File: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;cstring&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nconst int MAXSIZE = 101;\n\nstruct Student\n{\n    string ID;\n    string name;\n    string majors;\n};\n\nstruct Course\n{\n    string ID;\n    string title;\n    string department;\n    double grade;\n};\n\nStudent arrayStu[101][3];\nCourse arrayCou[101][101][5];\n\nCourse Course1;\nStudent Student1;\n</code></pre>\n\n<p>The function definitions are really long so I didn't want to include all of it, but is there any way to fix the makefile? It says the same error for every use of Student1 or Course1 in the main function.</p>\n"}, {"tags": ["c++", "string", "datetime", "int", "itoa"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1456333039, "post_id": 35608291, "comment_id": 58900858, "body": "Your first cout statement works?  it doesn&#39;t here: <a href=\"http://coliru.stacked-crooked.com/a/47f11bcdd5421c21\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/47f11bcdd5421c21</a>"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456333084, "post_id": 35608291, "comment_id": 58900895, "body": "would it be easier if you convert the values to time_t first?"}, {"owner": {"reputation": 680, "user_id": 4590499, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RBwCU.jpg?s=128&g=1", "display_name": "Daqs", "link": "https://stackoverflow.com/users/4590499/daqs"}, "edited": false, "score": 0, "creation_date": 1456333222, "post_id": 35608291, "comment_id": 58901004, "body": "I assumed, using %02 was a standard c/c++ practice. Am I wrong? I&#39;m using CryEngine and this statement works there, but instead of cout, CryEngine has a different function. For referece, this works in CryEngine: CryLog(&quot;time remaining: %02d::%02d::%02&quot;, hr, min, sec);"}, {"owner": {"reputation": 611, "user_id": 5050926, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CI6b8.jpg?s=128&g=1", "display_name": "styko", "link": "https://stackoverflow.com/users/5050926/styko"}, "edited": false, "score": 0, "creation_date": 1456333260, "post_id": 35608291, "comment_id": 58901039, "body": "I love good old <code>std::printf</code>\u2026"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1456333280, "post_id": 35608291, "comment_id": 58901056, "body": "Ah.  No that is not the same.  It is like <code>printf</code>.  <code>printf</code> and <code>cout</code> are completely different beast."}, {"owner": {"reputation": 611, "user_id": 5050926, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CI6b8.jpg?s=128&g=1", "display_name": "styko", "link": "https://stackoverflow.com/users/5050926/styko"}, "edited": false, "score": 0, "creation_date": 1456333330, "post_id": 35608291, "comment_id": 58901099, "body": "NathanOliver: I know, that&#39;s why I am posting a (perhaps) useless comment and not an answer."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 611, "user_id": 5050926, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CI6b8.jpg?s=128&g=1", "display_name": "styko", "link": "https://stackoverflow.com/users/5050926/styko"}, "edited": false, "score": 0, "creation_date": 1456333826, "post_id": 35608291, "comment_id": 58901433, "body": "@styko My comment was direct to the OP&#39;s comment before your.  We posted at just about the exact same time so your comment was there."}, {"owner": {"reputation": 2568, "user_id": 2660282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6c66cd2b6bda52c5ff72783ef727d907?s=128&d=identicon&r=PG", "display_name": "Quest", "link": "https://stackoverflow.com/users/2660282/quest"}, "edited": false, "score": 0, "creation_date": 1456337353, "post_id": 35608291, "comment_id": 58903799, "body": "Since you are using C++ it would be much better using <code>std::string</code> and <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\"><code>std::stoi</code></a> or <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\"><code>std::to_string</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 691399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf32f1d995e00af4f0dd23680b4574e?s=128&d=identicon&r=PG&f=1", "display_name": "RichN", "link": "https://stackoverflow.com/users/691399/richn"}, "edited": false, "score": 1, "creation_date": 1456333950, "post_id": 35608398, "comment_id": 58901525, "body": "I would change your opening sentence to: &quot;&quot;Use a &#39;std::stringstream&#39;&quot;. Performance should only be a concern once the software works correctly but doesn&#39;t meet its timing constraints."}, {"owner": {"reputation": 8131, "user_id": 991425, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/31fd767c0343a06af0f15c3521ce2166?s=128&d=identicon&r=PG", "display_name": "Haatschii", "link": "https://stackoverflow.com/users/991425/haatschii"}, "reply_to_user": {"reputation": 373, "user_id": 691399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caf32f1d995e00af4f0dd23680b4574e?s=128&d=identicon&r=PG&f=1", "display_name": "RichN", "link": "https://stackoverflow.com/users/691399/richn"}, "edited": false, "score": 0, "creation_date": 1456334626, "post_id": 35608398, "comment_id": 58902020, "body": "@RichN Feel free to edit my post. Although to me the OP suggested that a rather low level implementation is used/wanted, which is why I added the performance hint. Nevertheless I completely agree to your argument."}], "tags": [], "owner": {"reputation": 8131, "user_id": 991425, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/31fd767c0343a06af0f15c3521ce2166?s=128&d=identicon&r=PG", "display_name": "Haatschii", "link": "https://stackoverflow.com/users/991425/haatschii"}, "is_accepted": true, "score": 7, "last_activity_date": 1456359107, "last_edit_date": 1456359107, "creation_date": 1456333188, "answer_id": 35608398, "question_id": 35608291, "link": "https://stackoverflow.com/questions/35608291/formatting-how-to-convert-1-to-01-2-to-02-3-to-03-and-so-on/35608398#35608398", "title": "Formatting: how to convert 1 to \u201c01\u201d, 2 to \u201c02\u201d, 3 to &quot;03&quot;, and so on", "body": "<p>If you don't mind the overhead you can use a <code>std::stringstream</code></p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\n\nstd::string to_format(const int number) {\n    std::stringstream ss;\n    ss &lt;&lt; std::setw(2) &lt;&lt; std::setfill('0') &lt;&lt; number;\n    return ss.str();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 3, "last_activity_date": 1456810335, "last_edit_date": 1495542756, "creation_date": 1456333280, "answer_id": 35608437, "question_id": 35608291, "link": "https://stackoverflow.com/questions/35608291/formatting-how-to-convert-1-to-01-2-to-02-3-to-03-and-so-on/35608437#35608437", "title": "Formatting: how to convert 1 to \u201c01\u201d, 2 to \u201c02\u201d, 3 to &quot;03&quot;, and so on", "body": "<p>As from your <a href=\"https://stackoverflow.com/questions/35608291/formatting-how-to-convert-1-to-01-2-to-02-3-to-03-and-so-on#comment58901004_35608291\">comment</a>: </p>\n\n<blockquote>\n  <p><em>\"I assumed, using %02 was a standard c/c++ practice. Am I wrong?\"</em></p>\n</blockquote>\n\n<p>Yes, you are wrong. Also c/c++ isn't a thing, these are different languages.</p>\n\n<p>C++ <code>std::cout</code> doesn't support <code>printf()</code> like formatting strings. What you need is <a href=\"http://en.cppreference.com/w/cpp/io/manip/setw\" rel=\"nofollow noreferrer\"><code>setw()</code></a> and <a href=\"http://en.cppreference.com/w/cpp/io/manip/setfill\" rel=\"nofollow noreferrer\"><code>setfill()</code></a>:</p>\n\n<pre><code>cout &lt;&lt; \"time remaining: \" &lt;&lt; setfill('0')\n     &lt;&lt; setw(2) &lt;&lt;  hr &lt;&lt; ':' &lt;&lt; setw(2) &lt;&lt; mins &lt;&lt; ':' &lt;&lt; setw(2) &lt;&lt; secs;\n</code></pre>\n\n<hr>\n\n<p>If you want a <code>std::string</code> as result, you can use a <code>std::ostringstream</code> in the same manner:</p>\n\n<pre><code>std::ostringstream oss;\noss &lt;&lt; setfill('0')\n     &lt;&lt; setw(2) &lt;&lt;  hr &lt;&lt; ':' &lt;&lt; setw(2) &lt;&lt; mins &lt;&lt; ':' &lt;&lt; setw(2) &lt;&lt; secs;\ncout &lt;&lt; \"time remaining: \" &lt;&lt; oss.str();\n</code></pre>\n\n<hr>\n\n<p>Also there's a boost library <a href=\"http://www.boost.org/doc/libs/1_58_0/libs/format/doc/format.html\" rel=\"nofollow noreferrer\"><code>boost::format</code></a> available, that resembles the format string/place holder syntax.</p>\n"}, {"tags": [], "owner": {"reputation": 36538, "user_id": 471164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/45d4a7ba0fb8e789356f5da87536444d?s=128&d=identicon&r=PG", "display_name": "vitaut", "link": "https://stackoverflow.com/users/471164/vitaut"}, "is_accepted": false, "score": 0, "last_activity_date": 1513440774, "last_edit_date": 1513440774, "creation_date": 1456778461, "answer_id": 35709200, "question_id": 35608291, "link": "https://stackoverflow.com/questions/35608291/formatting-how-to-convert-1-to-01-2-to-02-3-to-03-and-so-on/35709200#35709200", "title": "Formatting: how to convert 1 to \u201c01\u201d, 2 to \u201c02\u201d, 3 to &quot;03&quot;, and so on", "body": "<p>As an alternative to IOStreams suggested in other answers, you can also use a safe printf implementation such as the <a href=\"https://github.com/fmtlib/fmt\" rel=\"nofollow noreferrer\">fmt library</a>:</p>\n\n<pre><code>fmt::printf(\"time remaining: %02d::%02d::%02d\", hr, mins, secs);\n</code></pre>\n\n<p>It supports both printf and Python-like format string syntax where type specifiers can be omitted:</p>\n\n<pre><code>fmt::printf(\"time remaining: {:02}::{:02}::{:02}\", hr, mins, secs);\n</code></pre>\n\n<p><strong>Disclaimer</strong>: I'm the author of fmt.</p>\n"}], "owner": {"reputation": 680, "user_id": 4590499, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/RBwCU.jpg?s=128&g=1", "display_name": "Daqs", "link": "https://stackoverflow.com/users/4590499/daqs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14081, "favorite_count": 3, "accepted_answer_id": 35608398, "answer_count": 3, "score": 2, "last_activity_date": 1513440774, "creation_date": 1456332899, "question_id": 35608291, "link": "https://stackoverflow.com/questions/35608291/formatting-how-to-convert-1-to-01-2-to-02-3-to-03-and-so-on", "title": "Formatting: how to convert 1 to \u201c01\u201d, 2 to \u201c02\u201d, 3 to &quot;03&quot;, and so on", "body": "<p>Following code outputs the values in time format, i.e. if it's 1:50pm and 8 seconds, it would output it as 01:50:08</p>\n\n<pre><code>cout &lt;&lt; \"time remaining: %02d::%02d::%02\" &lt;&lt; hr &lt;&lt; mins &lt;&lt; secs;\n</code></pre>\n\n<p>But what I want to do is (a) convert these ints to char/string (b) and then add the same time format to its corresponding char/string value.</p>\n\n<p>I have already achieved (a), I just want to achieve (b).</p>\n\n<p>e.g. </p>\n\n<pre><code>    char currenthour[10] = { 0 }, currentmins[10] = { 0 }, currentsecs[10] = { 0 };\n\n    itoa(hr, currenthour, 10);\n    itoa(mins, currentmins, 10);\n    itoa(secs, currentsecs, 10);\n</code></pre>\n\n<p>Now if I output 'currenthour', 'currentmins' and 'currentsecs', it will output the same example time as, 1:50:8, instead of 01:50:08.</p>\n\n<p>Ideas?</p>\n"}, {"tags": ["c++", "unix", "fork", "multiple-processes"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456332968, "post_id": 35608279, "comment_id": 58900800, "body": "There is no language C or C++, but the two distinct languages C and C++. Pick the one you compile as (hint: This looks like C)."}, {"owner": {"reputation": 934, "user_id": 3491770, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f7b59753e81a7b35f32105b0f627f1?s=128&d=identicon&r=PG", "display_name": "LumberSzquatch", "link": "https://stackoverflow.com/users/3491770/lumberszquatch"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456333142, "post_id": 35608279, "comment_id": 58900936, "body": "@Olaf yeah, I don&#39;t know why I tagged both, I&#39;m actually compiling as .cpp. I&#39;ll remove the c++ tag as this is mainly c as you pointed out. EDIT: I actually removed the C tag since I&#39;m compiling and running as .cpp with no problems"}, {"owner": {"reputation": 934, "user_id": 3491770, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f7b59753e81a7b35f32105b0f627f1?s=128&d=identicon&r=PG", "display_name": "LumberSzquatch", "link": "https://stackoverflow.com/users/3491770/lumberszquatch"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456333361, "post_id": 35608279, "comment_id": 58901123, "body": "@Olaf or would you suggest I compile and run as C file?"}], "owner": {"reputation": 934, "user_id": 3491770, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a4f7b59753e81a7b35f32105b0f627f1?s=128&d=identicon&r=PG", "display_name": "LumberSzquatch", "link": "https://stackoverflow.com/users/3491770/lumberszquatch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1456333159, "creation_date": 1456332877, "last_edit_date": 1456333159, "question_id": 35608279, "link": "https://stackoverflow.com/questions/35608279/understanding-unix-child-processes-that-use-semaphore-and-shared-memory", "title": "Understanding unix child processes that use semaphore and shared memory", "body": "<p>I'm going to do my best to ask this question with the understanding that I have.</p>\n\n<p>I'm doing a programming assignment (let's just get that out of the way now) that uses C or C++ on a Unix server to fork four children and use semaphore and shared memory to update a global variable. I'm not sure I have an issue yet, but my lack of understanding has me questioning my structure. Here it is:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/sem.h&gt;\n#include &lt;sys/ipc.h&gt;\n#include &lt;sys/shm.h&gt;\n\n#define NUM_REPEATS 10\n#define SEM_KEY  1111\n#define SHM_KEY  2222\n\nint globalCounter = 0;\n\n/***** Test function for confriming a process type ******/\nint checkProcessType(const char *whoami)\n{\n  printf(\"I am a %s.  My pid is:%d  my ppid is %d\\n\",\n  whoami, getpid(), getppid() );\n  for(int i = 1; i&lt;=3; i++){\n    printf(\"%s counting %d\\n\", whoami, i);\n  }\n  return 1;\n}\n\nvoid \n\nint main (void) {\n\n  pid_t process_id;       // PID (child or zero)\n  int sharedMemID;        // Shared memory ID\n  int sharedMemSize;      // shared memory size\n  struct my_mem * sharedMemPointer;   // pointer to the attached shared memory\n\n  // Definition of shared memory  //\n  struct my_mem {\n    long counter;\n    int parent;\n    int child;\n  };\n\n  // Gathering size of shared memory in bytes //\n  sharedMemSize = sizeof(my_mem);\n  if(sharedMemSize &lt;= 0){\n    perror(\"error collection shared memory size: Exiting...\\n\");\n    exit(0);\n  }\n\n  // Creating Shared Memory //\n  sharedMemID = shmget(SHM_KEY, sharedMemSize, 0666 | IPC_CREAT);\n  if (sharedMemID &lt; 0) {\n    perror(\"Creating shared memory has failed: Exiting...\");\n    exit(0);\n  }\n\n  // Attaching Shared Memory //\n  sharedMemPointer = (struct my_mem *)shmat(sharedMemID, NULL, 0);\n  if (sharedMemPointer == (struct my_mem*) -1) {\n    perror(\"Attaching shared memory has failed. Exiting...\\n\");\n    exit(0);\n  }\n\n  // Initializing Shared Memory //\n  sharedMemPointer-&gt;counter = 0;\n  sharedMemPointer-&gt;parent = 0;\n  sharedMemPointer-&gt;child = 0;\n\n  pid_t adder, reader1, reader2, reader3;\n  adder = fork();\n  if(adder &gt; 0)\n  {\n    // In parent\n\n    reader1 = fork();\n    if(reader1 &gt; 0)\n    {\n      // In parent\n\n      reader2 = fork();\n      if(reader2 &gt; 0)\n      {\n        //In parent\n\n        reader3 = fork();\n        if (reader3 &gt; 0)\n        {\n          //In parent\n\n        }\n        else if (reader3 &lt; 0)\n        {\n          // Error\n          perror(\"fork() error\");\n        }\n        else\n        {\n          // In reader3\n\n        }\n      }\n      else if(reader2 &lt; 0)\n      {\n        //Error\n        perror(\"fork() error\");\n      }\n      else\n      {\n        // In reader2\n\n      }\n    }\n    else if(reader1 &lt; 0)\n    {\n      // Error\n      perror(\"fork() error\");\n    }\n    else\n    {\n      // In reader1\n\n    }\n  }\n  else if(adder &lt; 0 )\n  {\n    // Error\n    perror(\"fork() error\");\n  }\n  else\n  {\n    // In adder\n    //LOOP here for global var in critical section\n  }\n\n\n}\n</code></pre>\n\n<p>Just some info of what I'm doing (I think), I'm creating a hunk of shared memory that will contain a variable, lets call it <code>counter</code> that will strictly be updated by <code>adder</code> and by the parent which becomes a subtractor after all child processes are active. I'm still trying to figure out the semaphore stuff that I will be using so adder and subtractor execute in critical section, but my main question is this.</p>\n\n<p>How can I know where I am in this structure? My adder should have a loop that will do some job (update global var), and the parent/subtractor should have a loop for its job (also update global var). And all the <code>readers</code> can look at any time. Does the loop placement for parent/subtractor matter? I basically have 3 locations I know I'll be in parent. But since all children need to be created first does it have to be in the last conditional after my third fork where I know I'm in parent? When I use my test method I get scattered outputs, meaning child one can be after parent's output, then child three, etc. It's never in any order, and from what I understand of fork that's expected.</p>\n\n<p>I really have like three questions going on, but I need to first wrap my head around the structure. So let me just try to say this again concisely without any junk cause I'm hung up on loop and critical section placement that isn't even written up yet.</p>\n\n<p>More directly, when does parent know the existence of all children and with this structure can one child do a task and somehow come back to it (i.e. adder/first child adding to global variable once, exits, and some other child can do its thing etc).</p>\n\n<p>I still feel like I'm not asking the right thing, and I believe this is due to still trying to grasp concepts. Hopefully my stammering will kind of show what I'm stuck on conceptually. If not I can clarify.</p>\n"}, {"tags": ["c++", "c++11", "stl", "visual-studio-2015", "template-specialization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1456332501, "post_id": 35608092, "comment_id": 58900418, "body": "Did you add a std::less specialization?"}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 3, "creation_date": 1456332843, "post_id": 35608092, "comment_id": 58900700, "body": "Don&#39;t specialize just the <code>operator ()</code> of <code>std::less</code>, specialize the entire struct."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1456333441, "post_id": 35608092, "comment_id": 58901189, "body": "<a href=\"http://eel.is/c++draft/requirements#namespace.std-2\" rel=\"nofollow noreferrer\">&quot;The behavior of a C++ program is undefined if it declares ... an explicit specialization of any member function of a standard library class template&quot;</a>."}, {"owner": {"reputation": 167, "user_id": 5975749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bc40da8ac7abfeaf554031744c8b26f1?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/5975749/james"}, "edited": false, "score": 0, "creation_date": 1456334604, "post_id": 35608092, "comment_id": 58902007, "body": "Well i thought they were already specialized, worked just fine with vs2010, all i did was upgrade the compiler, no code changes, I&#39;ve added another example just for clarity."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1456340030, "post_id": 35608092, "comment_id": 58905406, "body": "@James When your code is ill-formed, your code can work.  And compiler upgrades can break your code.  This has happened.  Replace your ill-formed code with code that isn&#39;t ill-formed is the right solution.  Making your ill-formed code compile using minimal changes where it &quot;works&quot; but remains ill-formed is the wrong solution."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1456342156, "post_id": 35608092, "comment_id": 58906635, "body": "@T.C. - you&#39;re correct - but this is also kind of useless to actually understanding what&#39;s going on, given that the compiler doesn&#39;t warn about this kind of undefined usage.  The real answer is: In VC++ 2015 the <code>operator()</code> is declared (in <code>&lt;xstddef&gt;</code> with the <code>CONST_FUN</code> macro which in <code>&lt;yyvals.h&gt;</code> is defined to expand to <code>constexpr</code> - as required by C++ 14.  Thus the user&#39;s specialization doesn&#39;t match the template.  Which <i>is</i> what the compiler complained about.  @Yakk is right that the <i>correct</i> fix is <i>not</i> to add <code>constexpr</code> to his specialization of <code>operator()</code> but to do it right."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1456342531, "post_id": 35608092, "comment_id": 58906851, "body": "IOW, the <i>language definition</i> changed between the default language supported by VC++ 2010 and the one supported by VC++ 2015, and the OP&#39;s code, incorrectly written to be depending on undefined behavior of the language (though not diagnosed as such by either the earlier or later compiler), thus now fails to compile (which is kind of lucky for him, because it <i>could</i> have just failed to <i>run</i> correctly, by definition of &quot;undefined&quot;!)"}, {"owner": {"reputation": 167, "user_id": 5975749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bc40da8ac7abfeaf554031744c8b26f1?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/5975749/james"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1456345138, "post_id": 35608092, "comment_id": 58908401, "body": "@davidbak thanks for the feedback, unfortunately this is a monster code base that I&#39;ve inherited so its going to take some time for me to get to this section and fix it right, have more pressing issues to fix, just wanted to make sure i wasn&#39;t missing something obvious. Thanks again."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1456348279, "post_id": 35608092, "comment_id": 58910154, "body": "@James so just add a <code>constexpr</code> to the definition of <code>operator()</code>, leave a <code>&#47;&#47; TODO</code> next to it, and be on your way ...."}, {"owner": {"reputation": 167, "user_id": 5975749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bc40da8ac7abfeaf554031744c8b26f1?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/5975749/james"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1456420957, "post_id": 35608092, "comment_id": 58949792, "body": "@davidbak well, i was going to but it doesn&#39;t even look like there is a specialization for this, or there is and i just haven&#39;t come across it yet, I&#39;m digging through 200k plus lines of very unorganized, un-managed code"}], "answers": [{"tags": [], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "is_accepted": false, "score": 1, "last_activity_date": 1456340809, "last_edit_date": 1456340809, "creation_date": 1456339861, "answer_id": 35610567, "question_id": 35608092, "link": "https://stackoverflow.com/questions/35608092/vc-compiler-upgrade-2010-2015-redefinition-constexpr-specifier-mismatch/35610567#35610567", "title": "VC++ compiler upgrade 2010-&gt;2015 redefinition; &#39;constexpr&#39; specifier mismatch", "body": "<p>Have you tried with the usual pattern of specializing the <code>std::less&lt;&gt;</code> class (<em>functor</em>) with its <code>operator()</code>?</p>\n\n<p>E.g.:</p>\n\n<pre><code>namespace std \n{\n\ntemplate&lt;&gt;\nstruct less&lt;sp&lt;ref::db::string&gt;&gt; \n{\n    bool operator()(const sp&lt;ref::db::string&gt;&amp; first, \n                    const sp&lt;ref::db::string&gt;&amp; second) const \n    {\n        // Your custom std::less implementation code ...\n\n        return first-&gt;cpp() &lt; second-&gt;cpp();    \n    }\n};\n\n} // namespace std\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 5975749, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/bc40da8ac7abfeaf554031744c8b26f1?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/5975749/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1456340809, "creation_date": 1456332380, "last_edit_date": 1456340765, "question_id": 35608092, "link": "https://stackoverflow.com/questions/35608092/vc-compiler-upgrade-2010-2015-redefinition-constexpr-specifier-mismatch", "title": "VC++ compiler upgrade 2010-&gt;2015 redefinition; &#39;constexpr&#39; specifier mismatch", "body": "<p>Working on upgrading a VC++ project from the VS2010 compiler to the VS2015 compiler and I've run into this error, any help would be appreciated.</p>\n\n<pre><code>C2475 'std::less&lt;_Kty&gt;::operator ()': redefinition; 'constexpr' specifier mismatch\n</code></pre>\n\n<p>This is the code generating the error:</p>\n\n<pre><code>bool std::less &lt; sp &lt; ref::db::string &gt; &gt;::operator()( \n    const sp &lt; ref::db::string &gt;&amp; first, \n    const sp &lt; ref::db::string &gt;&amp; second ) const \n{\n    return first-&gt;cpp() &lt; second-&gt;cpp();\n}\n</code></pre>\n\n<p>Second example error:</p>\n\n<pre><code>'std::less&lt;sp&lt;ref::ifile&gt;&gt;::operator ()': redefinition; 'constexpr' specifier mismatch\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>template &lt;&gt;\nbool std::less &lt; sp &lt; ref::ifile &gt; &gt;::operator()(\n    const sp &lt; ref::ifile &gt;&amp; x, \n    const sp &lt; ref::ifile &gt;&amp; y ) const \n{\n    if( std::tolower( x-&gt;name()-&gt;cpp() ) \n        == std::tolower( y-&gt;name()-&gt;cpp() ) )\n    {\n        return std::tolower( x-&gt;extention()-&gt;cpp() ) \n               &lt; std::tolower( y-&gt;extention()-&gt;cpp() );\n    }\n\n    return std::tolower( x-&gt;name()-&gt;cpp() ) &lt; std::tolower( y-&gt;name()-&gt;cpp() );\n}\n</code></pre>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1456332775, "post_id": 35607986, "comment_id": 58900634, "body": "This: <code>while (!mySource.eof())</code> is potentially corrupting your files: <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\" title=\"why is iostreameof inside a loop condition considered wrong\">stackoverflow.com/questions/5605125/&hellip;</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1456333316, "post_id": 35607986, "comment_id": 58901085, "body": "What are the parameters for <code>sendFilePacket()</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 807, "user_id": 2983173, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/015af0dee8e6c512c9e451fe8008fc85?s=128&d=identicon&r=PG&f=1", "display_name": "norisknofun", "link": "https://stackoverflow.com/users/2983173/norisknofun"}, "is_accepted": false, "score": -1, "last_activity_date": 1456332501, "creation_date": 1456332501, "answer_id": 35608133, "question_id": 35607986, "link": "https://stackoverflow.com/questions/35607986/binary-open-and-copy-image-file-c/35608133#35608133", "title": "Binary open and copy image file c++", "body": "<p>Instead of using \"manual\" copy, try using <a href=\"http://www.cplusplus.com/reference/istream/istream/read/\" rel=\"nofollow\">ifstream::read</a> method </p>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 2, "last_activity_date": 1456339876, "last_edit_date": 1456339876, "creation_date": 1456333738, "answer_id": 35608576, "question_id": 35607986, "link": "https://stackoverflow.com/questions/35607986/binary-open-and-copy-image-file-c/35608576#35608576", "title": "Binary open and copy image file c++", "body": "<p>You have an error in your original file copy algorithm in that you should never loop using <code>eof()</code> as the end flag.</p>\n\n<p>See: <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a></p>\n\n<p>Copying files can be a simple as this:</p>\n\n<pre><code>    std::ofstream(\"output.jpg\", std::ios::binary) &lt;&lt; std::ifstream(\"input.jpg\", std::ios::binary).rdbuf();\n</code></pre>\n\n<p>It uses a special overload of the output operator when passing an <code>std::istream</code> buffer (using <code>rdbuf()</code>). It copies the whole stream.</p>\n\n<p>When reading a whole buffer you should use <code>std::istream::read</code>:</p>\n\n<pre><code>    std::ifstream ifs(\"input.jpg\", std::ios::binary)\n\n    char buffer[1025]; // create a buffer\n\n    // keep going as long as the reading succeeds\n    while(ifs.read(buffer, sizeof(buffer)))\n    {\n        // ifs.gcount() is the number of chars read successfully\n        client-&gt;sendFilePacket(buffer, ifs.gcount()); // send all bytes\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1456339449, "post_id": 35608958, "comment_id": 58905040, "body": "Solves part of the problem, but you want to detail this and fill it out a bit more to go from correct comment to correct answer."}], "tags": [], "owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "is_accepted": false, "score": 0, "last_activity_date": 1456334757, "creation_date": 1456334757, "answer_id": 35608958, "question_id": 35607986, "link": "https://stackoverflow.com/questions/35607986/binary-open-and-copy-image-file-c/35608958#35608958", "title": "Binary open and copy image file c++", "body": "<p><a href=\"https://isocpp.org/wiki/faq/serialization#serialize-binary-format\" rel=\"nofollow\">C++ FAQ</a>:</p>\n\n<blockquote>\n  <p>You probably want to use iostream\u2019s read() and write() methods instead of its >> and &lt;&lt; operators. read() and write() are better for binary mode; >> and &lt;&lt; are better for text mode.</p>\n</blockquote>\n\n<p>You can specify how much you want to <code>read</code>. With <code>gcount</code> you can ask, how much characters are read successfully. Same goes for <code>write</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 307, "user_id": 4921511, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9110061205dce750757a629c1979ba3f?s=128&d=identicon&r=PG&f=1", "display_name": "dawcza94", "link": "https://stackoverflow.com/users/4921511/dawcza94"}, "is_accepted": false, "score": 0, "last_activity_date": 1456353352, "creation_date": 1456353352, "answer_id": 35614604, "question_id": 35607986, "link": "https://stackoverflow.com/questions/35607986/binary-open-and-copy-image-file-c/35614604#35614604", "title": "Binary open and copy image file c++", "body": "<p>I try with this code: </p>\n\n<pre><code>    std::ifstream ifs(ofn.lpstrFile, std::ios::binary);\n    std::ofstream myOutpue;\n    char buffer[1024]; // create a buffer\n    myOutpue.open(\"output.jpg\", std::ios::binary);\n    //client-&gt;sendFilePacket(FileStates::START_SAVE, buffer, false, i);\n    while (ifs.read(buffer, sizeof(buffer)))\n    {\n        //client-&gt;sendFilePacket(FileStates::CONTINUE_SAVE, buffer, false, ifs.gcount());\n        myOutpue.write(buffer, ifs.gcount());\n    }\n    //client-&gt;sendFilePacket(FileStates::END_SAVE, buffer, true, i);\n    myOutpue.close();\n</code></pre>\n\n<p>But when i doing this like that, in my copy of image i got only half of original image and half of black screen( number of kb is the same like in original file), so i don't know what's a problem with that ?</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 10615747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HNsb5.jpg?s=128&g=1", "display_name": "Lincoln Schreiber", "link": "https://stackoverflow.com/users/10615747/lincoln-schreiber"}, "is_accepted": false, "score": 1, "last_activity_date": 1544564181, "creation_date": 1544564181, "answer_id": 53732689, "question_id": 35607986, "link": "https://stackoverflow.com/questions/35607986/binary-open-and-copy-image-file-c/53732689#53732689", "title": "Binary open and copy image file c++", "body": "<p>I know it's been a long time, but reading the topic I found the solution ...</p>\n\n<pre><code>std::ifstream ifs(ofn.lpstrFile, std::ios::binary);\nstd::ofstream myOutpue;\nchar buffer[1024]; // create a buffer\nmyOutpue.open(\"output.jpg\", std::ios::binary);\n//client-&gt;sendFilePacket(FileStates::START_SAVE, buffer, false, i);\nwhile (ifs.read(buffer, sizeof(buffer)))\n{\n    myOutpue.write(buffer, ifs.gcount());\n}\n//\nmyOutpue.write(buffer, ifs.gcount());\nmyOutpue.close();\n</code></pre>\n\n<p>Note: After the loop, you had to save the rest of the reading, because at the loop you save only what fits on buffer, and the rest you do nothing. Sometimes happens that the remainder can be few character, and it looks like the images are the same size, but they aren't.</p>\n\n<p>Note2: I posted here to help those who are still in trouble as I was!!</p>\n"}], "owner": {"reputation": 307, "user_id": 4921511, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9110061205dce750757a629c1979ba3f?s=128&d=identicon&r=PG&f=1", "display_name": "dawcza94", "link": "https://stackoverflow.com/users/4921511/dawcza94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6325, "favorite_count": 0, "answer_count": 5, "score": 3, "last_activity_date": 1544564181, "creation_date": 1456332165, "question_id": 35607986, "link": "https://stackoverflow.com/questions/35607986/binary-open-and-copy-image-file-c", "title": "Binary open and copy image file c++", "body": "<p>I want to copy one image file to another new file. This is my method to do this:</p>\n\n<pre><code>    std::ofstream myOutpue;\n    std::ifstream mySource;\n    //int i = 0;\n    mySource.open(ofn.lpstrFile, std::ios::binary);\n    myOutpue.open(\"im4.jpg\", std::ios::binary);\n    char buffer;\n    char bufferToSave[100];\n    if (mySource.is_open())\n    {\n        //client-&gt;sendFilePacket(FileStates::START_SAVE, buffer, false,i);\n        i++;\n        while (!mySource.eof())\n        {\n            mySource &gt;&gt; std::noskipws &gt;&gt; buffer;\n            myOutpue &lt;&lt; buffer;\n            //client-&gt;sendFilePacket(FileStates::CONTINUE_SAVE, buffer, false,i);\n            i++;\n        }\n    }\n    i++;\n    //client-&gt;sendFilePacket(FileStates::END_SAVE, buffer, true,i);\n    mySource.close();\n    //myOutpue.close();\n</code></pre>\n\n<p>This method work correctly, but my problem is that i want to copy char/bit's and send it to another client. When i doing this by each char , that not work correctly so i want to make a bigger buffor(for example char t[512]) or something like that and copy them to new file.</p>\n\n<p>I try to doing this like that:</p>\n\n<pre><code>    std::ofstream myOutpue;\n    std::ifstream mySource;\n    mySource.open(ofn.lpstrFile, std::ios::binary);\n    myOutpue.open(\"im4.jpg\", std::ios::binary);\n    char buffer;\n    char bufferToSave[100];\n    if (mySource.is_open())\n    {\n        //client-&gt;sendFilePacket(FileStates::START_SAVE, buffer, false,i);\n        i++;\n        while (!mySource.eof())\n        {\n            if (i == 100)\n            {\n                for (int i = 0; i &lt; 100; i++)myOutpue &lt;&lt; bufferToSave[i];\n                i = 0;\n            }\n            mySource &gt;&gt; std::noskipws &gt;&gt; buffer;\n            bufferToSave[i] = buffer;\n            //myOutpue &lt;&lt; buffer;\n            //client-&gt;sendFilePacket(FileStates::CONTINUE_SAVE, buffer, false,i);\n            i++;\n        }\n    }\n    i++;\n    //client-&gt;sendFilePacket(FileStates::END_SAVE, buffer, true,i);\n    mySource.close();\n    myOutpue.close();\n</code></pre>\n\n<p>But i get image that i can't open. </p>\n\n<p>So my question is how to read file to get more bits from it and that create me the same image as original. </p>\n"}, {"tags": ["c++", "boost", "boost-bind", "boost-range"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1456332167, "post_id": 35607868, "comment_id": 58900160, "body": "Please define &quot;doesn&#39;t work&quot;, crash? doesnt compile? if you have an error message please give it."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1456332186, "post_id": 35607868, "comment_id": 58900177, "body": "It &#39;doesn&#39;t work&#39; because there is &#39;some error&#39; in it. Uless you are more specific, you won&#39;t get better answer."}, {"owner": {"reputation": 475, "user_id": 4886377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae3fa32305df27032f29740ee06accd?s=128&d=identicon&r=PG&f=1", "display_name": "lars", "link": "https://stackoverflow.com/users/4886377/lars"}, "edited": false, "score": 0, "creation_date": 1456332321, "post_id": 35607868, "comment_id": 58900275, "body": "Sorry, added more information"}], "answers": [{"tags": [], "owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "is_accepted": true, "score": 1, "last_activity_date": 1456335421, "last_edit_date": 1495540769, "creation_date": 1456335421, "answer_id": 35609180, "question_id": 35607868, "link": "https://stackoverflow.com/questions/35607868/combination-of-boost-range-for-each-bind-copy-and-a-back-inserter-fails/35609180#35609180", "title": "Combination of boost range for_each, bind, copy and a back_inserter fails", "body": "<p>There is a directly related question here: <a href=\"https://stackoverflow.com/questions/7039474/can-i-use-boost-bind-with-a-function-template\">Can I use (boost) bind with a function template?</a>. The error message in that question is identical, and the problem differs in that their template function is not a library one.</p>\n\n<p>The trick here is that you are intending to bind a template function <code>boost::copy&lt;&gt;()</code>, which, according to the linked question, isn't possible because the template function must be instantiated in order to be passed as a function pointer. This is also indicated <a href=\"http://www.radmangames.com/programming/how-to-use-boost-bind\" rel=\"nofollow noreferrer\">here</a>, section \"<em>Binding a template function</em>\". So, unfortunately, you need to resort to a rather long construct, which can be slightly shortened with the use of <code>typedef</code> (since you're in C++98, no <code>decltype</code> is available either):</p>\n\n<pre><code>int main()\n{\n        typedef std::vector&lt;int&gt; IntVec;\n        std::vector&lt;IntVec&gt; a;\n        IntVec b;\n        boost::for_each(a,\n            boost::bind(boost::copy&lt;IntVec,\n            std::back_insert_iterator&lt;IntVec&gt; &gt;, _1, std::back_inserter(b)));\n}\n</code></pre>\n"}], "owner": {"reputation": 475, "user_id": 4886377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae3fa32305df27032f29740ee06accd?s=128&d=identicon&r=PG&f=1", "display_name": "lars", "link": "https://stackoverflow.com/users/4886377/lars"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 35609180, "answer_count": 1, "score": 1, "last_activity_date": 1456336108, "creation_date": 1456331878, "last_edit_date": 1456336108, "question_id": 35607868, "link": "https://stackoverflow.com/questions/35607868/combination-of-boost-range-for-each-bind-copy-and-a-back-inserter-fails", "title": "Combination of boost range for_each, bind, copy and a back_inserter fails", "body": "<p>I want to copy all the integers contained in <code>a</code> into <code>b</code>.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iterator&gt;\n#include &lt;boost/bind.hpp&gt;\n#include &lt;boost/range/algorithm/for_each.hpp&gt;\n#include &lt;boost/range/algorithm/copy.hpp&gt;\nvoid test()\n{\n        std::vector&lt;std::vector&lt;int&gt; &gt; a;\n        std::vector&lt;int&gt; b;\n        boost::for_each(a, boost::bind(boost::copy, _1, std::back_inserter(b)));\n}\n</code></pre>\n\n<p>It looks so simple. I'd like to have a C++ 98 compatible one liner.</p>\n\n<p>Why doesn't this compile? \nI have a long list of error regarding <code>boost::bind</code>, which I don't understand, moreover, it is multiple pages long.</p>\n\n<p>The error starts with :</p>\n\n<blockquote>\n  <p>error C2780: 'boost::_bi::bind_t&lt;_bi::dm_result::type,boost::_mfi::dm,_bi::list_av_1::type> boost::bind(M T::* ,A1)' : expects 2 arguments - 3 provided</p>\n</blockquote>\n"}, {"tags": ["c++", "templates", "inheritance"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1456331915, "post_id": 35607819, "comment_id": 58899944, "body": "The <code>callMethods()</code> part looks pretty wrong. You should solve this rather with specializations and sfinae."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1456332106, "post_id": 35607819, "comment_id": 58900099, "body": "As @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 points out the <code>callMethods</code> function is the problem. When you instantiate the <code>myderived</code> class with a type (e.g., <code>mybase_1</code>) and have it use the <code>callMethods</code> function the compiler has to compile it and obviously <code>mybase_1</code> doesn&#39;t have a <code>boo</code> function. You still have to write valid code to satisfy the compiler."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1456332320, "post_id": 35607819, "comment_id": 58900274, "body": "I&#39;ve once written a blog post to memorize this technique. <a href=\"http://dev-jungle.blogspot.de/2014/02/conditional-type-selection-using-c.html\" rel=\"nofollow noreferrer\">Conditional type selection using C++ template specializations</a>"}, {"owner": {"reputation": 1885, "user_id": 2711672, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XZH0c.jpg?s=128&g=1", "display_name": "pasha", "link": "https://stackoverflow.com/users/2711672/pasha"}, "edited": false, "score": 0, "creation_date": 1456335694, "post_id": 35607819, "comment_id": 58902749, "body": "@jeet ...Can you specify what you are trying to do."}, {"owner": {"reputation": 955, "user_id": 4416792, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Zhpnk.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/4416792/jeet"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1456339020, "post_id": 35607819, "comment_id": 58904763, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6. Thanks for sharing the concept name. I will look in to it."}], "answers": [{"comments": [{"owner": {"reputation": 955, "user_id": 4416792, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Zhpnk.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/4416792/jeet"}, "edited": false, "score": 0, "creation_date": 1456338760, "post_id": 35608408, "comment_id": 58904596, "body": "This is the solution what i wanted :) . C++ is always flexible. Thanks for your time."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1456333209, "creation_date": 1456333209, "answer_id": 35608408, "question_id": 35607819, "link": "https://stackoverflow.com/questions/35607819/c-function-call-compile-time-error-from-a-template-class-using-typename-as-b/35608408#35608408", "title": "C++ : Function call Compile-Time Error from a Template Class using Typename as Base", "body": "<blockquote>\n  <p>1) In this condition, is it possible to use both the function call in the derived class?</p>\n</blockquote>\n\n<p>In your implementation, only if the derived or the base class implements both functions.</p>\n\n<blockquote>\n  <p>i am getting error and no idea to solve it.</p>\n</blockquote>\n\n<p>The type is known at compile time, so the simplest solution is to specialize the template:</p>\n\n<pre><code>template&lt;&gt;\nvoid myderived&lt;mybase_1&gt;::callMethods(){\n    foo();\n}\ntemplate&lt;&gt;\nvoid myderived&lt;mybase_2&gt;::callMethods(){\n    boo();\n}\n</code></pre>\n\n<p>If you don't need the enum for anything else, then you can throw it away along with the switch statement.</p>\n"}, {"tags": [], "owner": {"reputation": 1885, "user_id": 2711672, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/XZH0c.jpg?s=128&g=1", "display_name": "pasha", "link": "https://stackoverflow.com/users/2711672/pasha"}, "is_accepted": false, "score": 1, "last_activity_date": 1456335583, "last_edit_date": 1456335583, "creation_date": 1456335005, "answer_id": 35609036, "question_id": 35607819, "link": "https://stackoverflow.com/questions/35607819/c-function-call-compile-time-error-from-a-template-class-using-typename-as-b/35609036#35609036", "title": "C++ : Function call Compile-Time Error from a Template Class using Typename as Base", "body": "<p>1) Just to rectify your errors\u2014 Your switch case is </p>\n\n<pre><code>switch(enm){\ncase myenum::one:\n    T::foo();\n    break;\ncase myenum::two:\n    T::boo();\n    break;\n}\n</code></pre>\n\n<p>which assumes that T has both foo() and boo(). Define these two functions in both the base classes(it doesn't matter if they are empty.)</p>\n\n<p>What I guess you are trying to do is call a function of base from derived type, which is inheritance has been created I guess.</p>\n\n<pre><code>enum class myenum : int {one, two};\n\nclass mybase_1{\nprotected:\n    void foo(){\n        qDebug() &lt;&lt; \"foo in mybase_1 is called \\n\";\n    }\n};\n\nclass mybase_2{\nprotected:\n    void foo(){\n        qDebug() &lt;&lt; \"foo in mybase_2 is called\\n\";\n    }\n};\n\ntemplate &lt;typename T&gt;\nclass myderived : public T{\npublic:\n    myderived(myenum _enm);\n    void callMethods();\nprivate:\n    myenum enm;\n};\n\ntemplate &lt;typename T&gt; myderived&lt;T&gt;::myderived(myenum _enm):enm{_enm}{\n    qDebug() &lt;&lt; \"derived constructor\\n\";\n}\ntemplate &lt;typename T&gt; void myderived&lt;T&gt;::callMethods(){\n    foo(); // the foo called depends on the parameter supplied to template, which determines from which class your derived class has been derived.\n}\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    myderived&lt;mybase_1&gt; tmp1(myenum::one);\n    tmp1.callMethods();\n    myderived&lt;mybase_2&gt; tmp2(myenum::two);\n    tmp2.callMethods();\n\n    return a.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 955, "user_id": 4416792, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Zhpnk.png?s=128&g=1", "display_name": "Jeet", "link": "https://stackoverflow.com/users/4416792/jeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 35608408, "answer_count": 2, "score": 0, "last_activity_date": 1456373009, "creation_date": 1456331735, "last_edit_date": 1456373009, "question_id": 35607819, "link": "https://stackoverflow.com/questions/35607819/c-function-call-compile-time-error-from-a-template-class-using-typename-as-b", "title": "C++ : Function call Compile-Time Error from a Template Class using Typename as Base", "body": "<p>I don't know and unable to find the concept name to form my question simple (And also the title too). So i posted the entire code. Below is the code, with two base classes. And one derived class created using class template. Derive class inherits the two base class using typename T. Each base class are having unique function called foo() &amp; boo(). </p>\n\n<p><strong>My questions are:</strong><br>\n1) In this condition, is it possible to use both the function call in the derived class (in callMethods())? i am getting error and no idea to solve it.<br>\n2) Or do i need to change the class design if the existing design is wrong?<br>\n3) Is it a good practice to design the class like this if the design is correct?      </p>\n\n<p><strong>Error Message:</strong>     </p>\n\n<pre><code>error: 'boo' is not a member of 'mybase_1'\n         T::boo();     \nerror: 'foo' is not a member of 'mybase_2'\n         T::foo();      \n                ^                ^\n</code></pre>\n\n<p><strong>Test code:</strong>      </p>\n\n<pre><code>enum class myenum : int {one, two};\n\nclass mybase_1{\nprotected:\n    void foo(){\n        qDebug() &lt;&lt; \"foo called\\n\";\n    }\n};\n\nclass mybase_2{\nprotected:\n    void boo(){\n        qDebug() &lt;&lt; \"boo called\\n\";\n    }\n};\n\ntemplate &lt;typename T&gt;\nclass myderived : public T{\npublic:\n    myderived(myenum _enm);\n    void callMethods();\nprivate:\n    myenum enm;\n};\n\ntemplate &lt;typename T&gt; myderived&lt;T&gt;::myderived(myenum _enm):enm{_enm}{\n    qDebug() &lt;&lt; \"derived constructor\\n\";\n}\ntemplate &lt;typename T&gt; void myderived&lt;T&gt;::callMethods(){\n    switch(enm){\n    case myenum::one:\n        T::foo();\n        break;\n    case myenum::two:\n        T::boo();\n        break;\n    }\n}\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    myderived&lt;mybase_1&gt; tmp1(myenum::one);\n    tmp1.callMethods();\n    myderived&lt;mybase_2&gt; tmp2(myenum::two);\n    tmp2.callMethods();\n\n    return a.exec();\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1456331889, "post_id": 35607716, "comment_id": 58899924, "body": "Debugging is a very useful tool for finding answers to these kind of questions. Step through the code and watch what happens."}], "answers": [{"tags": [], "owner": {"reputation": 7638, "user_id": 2986116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f1444d1687fdda5fc2f039ccb0c4c?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/2986116/j%c3%a9r%c3%b4me"}, "is_accepted": false, "score": 3, "last_activity_date": 1456332204, "last_edit_date": 1456332204, "creation_date": 1456331645, "answer_id": 35607792, "question_id": 35607716, "link": "https://stackoverflow.com/questions/35607716/why-am-i-getting-an-access-violation-runtime-error/35607792#35607792", "title": "Why am I getting an access violation runtime error?", "body": "<p>Your <code>root</code> pointer is not initialized and you are trying to dereference it when doing the following in your constructor:</p>\n\n<pre><code>root-&gt;value = key;\nroot-&gt;left = LT-&gt;root;\nroot-&gt;right = RT-&gt;root;\n</code></pre>\n\n<p>Dereferencing this pointer which is not initialize is causing the segmentation fault.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1456332179, "last_edit_date": 1492087236, "creation_date": 1456331806, "answer_id": 35607844, "question_id": 35607716, "link": "https://stackoverflow.com/questions/35607716/why-am-i-getting-an-access-violation-runtime-error/35607844#35607844", "title": "Why am I getting an access violation runtime error?", "body": "<p>One of your issues with this code is that when you construct</p>\n\n<pre><code>BTree&lt;T&gt; tree(key);\n</code></pre>\n\n<p>in <code>void BTree&lt;T&gt;::insert(T key)</code> you call</p>\n\n<pre><code>template &lt;typename T&gt;\nBTree&lt;T&gt;::BTree(T key) \n{\n    root-&gt;value = key;\n}\n</code></pre>\n\n<p>Since <code>root</code> was never initialized you are dereferencing a garbage pointer which is undefined behavior.</p>\n\n<p>I would also like to point out that your <code>insert</code> function is doing nothing but creating a node that is going to be destroyed.  You actually need to add the node into the list.  You can see how a binary tree would be implemented at <a href=\"https://codereview.stackexchange.com/questions/61671/binary-search-tree-c-implementation\">Binary Search Tree C++ Implementation</a></p>\n"}], "owner": {"reputation": 57, "user_id": 5932842, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6994004b55f13ff5d48409f29782740b?s=128&d=identicon&r=PG&f=1", "display_name": "user5932842", "link": "https://stackoverflow.com/users/5932842/user5932842"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 35607844, "answer_count": 2, "score": -1, "last_activity_date": 1456332204, "creation_date": 1456331488, "last_edit_date": 1456331719, "question_id": 35607716, "link": "https://stackoverflow.com/questions/35607716/why-am-i-getting-an-access-violation-runtime-error", "title": "Why am I getting an access violation runtime error?", "body": "<p>The problem occurs when I call the <code>insert(T)</code> member function of <code>BTree</code> from <code>main()</code>, which calls the <code>BTree(T)</code> constructor. The constructor uses the <code>BTree</code> member <code>BNode</code> pointer (root) and should set the value of the the <code>BNode</code> object to the parameter that is passed to the constructor using <code>root-&gt;value = key</code> (key is the constructor parameter of type T). I don't understand why <code>root-&gt;value = key;</code> is causing a memory access violation. </p>\n\n<pre><code>template &lt;typename T&gt;\nclass BNode\n{\n  public:\n      BNode(T key, BNode&lt;T&gt; *lptr, BNode&lt;T&gt; *rptr);\n      T value;\n      BNode&lt;T&gt; *left, *right;\n};\n\ntemplate &lt;typename T&gt;\nclass BTree\n{\n  public:\n      BTree();\n      BTree(T&amp; key, BTree&lt;T&gt;* LT, BTree&lt;T&gt;* RT);\n      BTree(T key);\n      ~BTree();\n      void remove(BNode&lt;T&gt; *rt);\n      void insert(T key);\n\n  private:\n      BNode&lt;T&gt; *root;\n\n};\n\n\ntemplate&lt;typename T&gt;\nBNode&lt;T&gt;::BNode(T val, BNode&lt;T&gt; *lptr, BNode&lt;T&gt; *rptr)\n{\n    value = val;\n    left = lptr;\n    right = rptr;\n}\n\n\ntemplate&lt;typename T&gt;\nBTree&lt;T&gt;::BTree()\n{\n    root = NULL;\n}\n\ntemplate&lt;typename T&gt;\nBTree&lt;T&gt;::BTree(T&amp; key, BTree&lt;T&gt; *LT, BTree&lt;T&gt; *RT)\n{\n    root-&gt;value = key;\n    root-&gt;left = LT-&gt;root;\n    root-&gt;right = RT-&gt;root;\n}\n\ntemplate &lt;typename T&gt;\nBTree&lt;T&gt;::BTree(T key) \n{\n    root-&gt;value = key;\n}\n\ntemplate&lt;typename T&gt;\nBTree&lt;T&gt;::~BTree()\n{\n    remove(root);\n}\n\ntemplate&lt;typename T&gt;\nvoid BTree&lt;T&gt;::remove(BNode&lt;T&gt; *rt)\n{\n    if (rt != NULL)\n    {\n        remove(rt-&gt;left);\n        remove(rt-&gt;right);\n        delete rt;\n    }\n}\n\ntemplate&lt;typename T&gt;\nvoid BTree&lt;T&gt;::insert(T key) //takes postfix expression onto tree\n{\n        BTree&lt;T&gt; tree(key);\n\n}\n\nint main()\n{\n    BTree&lt;int&gt; tree;\n    tree.insert(5);\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "multi-index", "boost-multi-index"], "comments": [{"owner": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1456338308, "post_id": 35607610, "comment_id": 58904330, "body": "Could you please elaborate on the &quot;stack object&quot; concern? For all purposes, passing a comparison <i>functor</i> (a <code>struct</code> with appropriately overloaded <code>operator()</code>) is maximally efficient, i.e. there&#39;s no difference vs. passing a comparison <i>function</i> in terms of memory consumption."}, {"owner": {"reputation": 2673, "user_id": 4558644, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b6c0ca1e65b6c1e58eae9dc635702243?s=128&d=identicon&r=PG&f=1", "display_name": "mkmostafa", "link": "https://stackoverflow.com/users/4558644/mkmostafa"}, "reply_to_user": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "edited": false, "score": 0, "creation_date": 1456395084, "post_id": 35607610, "comment_id": 58930359, "body": "I dont mean memory I mean time concerns. As far as I know that per comparing two items an object functor must be constructed then comparing function called then object destroyed and this will happen for each compare or Is there something I&#39;m missing??"}, {"owner": {"reputation": 4756, "user_id": 213114, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wWib4.jpg?s=128&g=1", "display_name": "Joaqu&#237;n M L&#243;pez Mu&#241;oz", "link": "https://stackoverflow.com/users/213114/joaqu%c3%adn-m-l%c3%b3pez-mu%c3%b1oz"}, "edited": false, "score": 1, "creation_date": 1456399007, "post_id": 35607610, "comment_id": 58933083, "body": "This is not the case, and even if it were it wouldn&#39;t have any impact on execution time, since this is the kind of things that compilers optimize away. In fact, providing a functor rather than a function gives the compiler more opportunities for optimization, so I&#39;d bet a functor is actually faster."}], "owner": {"reputation": 2673, "user_id": 4558644, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b6c0ca1e65b6c1e58eae9dc635702243?s=128&d=identicon&r=PG&f=1", "display_name": "mkmostafa", "link": "https://stackoverflow.com/users/4558644/mkmostafa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456331242, "creation_date": 1456331242, "last_edit_date": 1495542664, "question_id": 35607610, "link": "https://stackoverflow.com/questions/35607610/boost-multi-index-composite-keys-with-static-comparator-function", "title": "Boost multi index composite keys with static comparator function", "body": "<p>I would like to have a composite key for a multi index container of boost and would like to have a static comparator function passed to it (something like the code below). I also would like to avoid the solution given  <a href=\"https://stackoverflow.com/questions/1324800/boost-multi-index-custom-composite-key-comparer\">here</a> to avoid the overhead of creating stack objects upon comparing every two elements as I'm working with a huge amounts of data. </p>\n\n<pre><code>bool func(const foo&amp; lhs, const foo&amp; rhs) {\n    if (lhs.count &gt;= lhs.threshold &amp;&amp; rhs.count &lt; rhs.threshold ||\n        lhs.count &lt; lhs.threshold &amp;&amp; rhs.count &gt;= rhs.threshold) {\n        return lhs.count &lt; lhs.threshold;\n    } else if (lhs.time != rhs.time) {\n        return lhs.time &lt; rhs.time;\n    } else {\n        return lhs.count &lt; rhs.count;\n    }\n}\n\ntypedef boost::multi_index_container&lt;\n    foo,\n    boost::multi_index::indexed_by&lt;\n        boost::multi_index::ordered_unique&lt;\n            boost::multi_index::composite_key&lt;foo, member, member&gt;,\n            func\n        &gt; \n    &gt; \n&gt; MultiIndexSet;\n</code></pre>\n"}, {"tags": ["c++", "templates", "generic-programming"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 2, "creation_date": 1456331858, "post_id": 35607562, "comment_id": 58899904, "body": "The code is invalid at least due to this operator definition because it returns reference to temporary onject      T &amp; operator / (const T &amp; divisor) {         return m_first/divisor;     }"}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 1, "creation_date": 1456332156, "post_id": 35607562, "comment_id": 58900146, "body": "<code>operator+=()</code> and <code>operator=()</code> should return a reference tho <code>*this</code> to allow for operator chaining. Also, a correct implementation of <code>operator=()</code> should check for equality to <code>this</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1456332226, "post_id": 35607562, "comment_id": 58900213, "body": "are you aware, that once the solution is online, in principle it is worth zero credit points?"}, {"owner": {"reputation": 1015, "user_id": 4307142, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/480ce7b5b419c3821fb3655818d2229b?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Rebello", "link": "https://stackoverflow.com/users/4307142/gabriel-rebello"}, "edited": false, "score": 0, "creation_date": 1456334041, "post_id": 35607562, "comment_id": 58901589, "body": "Yeah, I guess I shouldn&#39;t use <code>void</code>. And yes, I&#39;m aware of it but I&#39;m just reviewing this as an exercise. It&#39;s not worth any points anyway."}], "answers": [{"comments": [{"owner": {"reputation": 1015, "user_id": 4307142, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/480ce7b5b419c3821fb3655818d2229b?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Rebello", "link": "https://stackoverflow.com/users/4307142/gabriel-rebello"}, "edited": false, "score": 0, "creation_date": 1456333694, "post_id": 35607927, "comment_id": 58901349, "body": "That&#39;s it. I got the implied part all wrong. I should also return a reference value to <code>*this</code> instead of using <code>void</code> I guess. Thanks!"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1456333134, "last_edit_date": 1456333134, "creation_date": 1456332011, "answer_id": 35607927, "question_id": 35607562, "link": "https://stackoverflow.com/questions/35607562/conversion-to-non-scalar-type-requested/35607927#35607927", "title": "Conversion to non-scalar type requested", "body": "<p>The code that needs to run generically for <code>TripleData&lt;double&gt;</code> is:</p>\n\n<pre><code>T sum = 0;                // (A)\nsum += m_data[i];         // (B)\nT ret = sum / (double)N;  // (C)\n</code></pre>\n\n<p>Just work backwards from the implicit interface that this code implies.</p>\n\n<pre><code>// (A) implies non-explicit construction from an int\nTripleData(int ); \n\n// (B) implies operator+=, you have this one almost right\nTripleData&amp; operator+=(const TripleData&amp; rhs);\n\n// (C) implies division by a **scalar** - this should NOT modify the object\nTripleData operator/(double ) const;\n</code></pre>\n\n<p>You're missing <code>(A)</code> completely - you wrote an assignment operator, but <code>T x = y;</code> isn't assignment, it's <a href=\"http://en.cppreference.com/w/cpp/language/copy_initialization\" rel=\"nofollow\">copy-initialization</a>. <code>(B)</code> is basically fine, and <code>(C)</code> you're taking the wrong type of operand. We're dividing by a <code>double</code>, not by a <code>TripleData&lt;double&gt;</code>.</p>\n"}], "owner": {"reputation": 1015, "user_id": 4307142, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/480ce7b5b419c3821fb3655818d2229b?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Rebello", "link": "https://stackoverflow.com/users/4307142/gabriel-rebello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3015, "favorite_count": 0, "accepted_answer_id": 35607927, "answer_count": 1, "score": 2, "last_activity_date": 1456333134, "creation_date": 1456331151, "last_edit_date": 1456331700, "question_id": 35607562, "link": "https://stackoverflow.com/questions/35607562/conversion-to-non-scalar-type-requested", "title": "Conversion to non-scalar type requested", "body": "<p>In a homework assignment on generic programming, a program is not compiling. I'm supposed to fix this by inserting code only to the specified location and changing nothing else. I've attempted to do so by overloading operators to make the compiler understand what they mean for that custom type, but I still get the same errors. I'm now at a loss.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate &lt;typename T&gt;\nstruct TripleData {\n    T m_first;\n    T m_second;\n    T m_third;  \n    T getMean() {\n        return (m_first + m_second + m_third)/3;\n    }\n\n    // INSERT CODE HERE\n    void operator = (const T &amp; value) {\n        m_first = m_second = m_third = value;  \n    }\n\n    void operator += (const TripleData &amp; tridata) {\n        m_first += tridata.m_first;\n        m_second += tridata.m_second;\n        m_third += tridata.m_third;\n    }\n\n    T &amp; operator / (const T &amp; divisor) {\n        return m_first/divisor;\n    }\n    //END OF INSERTED CODE\n};\n\ntemplate &lt;typename T, int N&gt;\nclass GenericStaticMatrix {\n    T m_data[N];\npublic:\n    T &amp; operator()(int i) {\n        return m_data[i];\n    }\n    int getSize() const {\n        return N;\n    }\n    T getMean() const {\n        T sum = 0;                            //Error: conversion from 'int' to non-scalar type 'TripleData&lt;double&gt;' requested\n        for (int i=0;i&lt;N;i++) sum+=m_data[i]; \n        T ret = sum/(double)N;                //Error: conversion from 'double' to non-scalar type 'TripleData&lt;double&gt;' requested\n        return ret;\n    }\n};\n\n\nint main() {\n\n    const int size = 10;\n    int i;     \n    GenericStaticMatrix&lt;TripleData&lt;double&gt;,size&gt; gsm_tdd;\n\n    for (i=0;i&lt;size;i++) {\n        gsm_tdd(i).m_first = 1.1 + i;\n        gsm_tdd(i).m_second = 2.2 + i;\n        gsm_tdd(i).m_third = 3.3 + i;\n    }\n\n    cout &lt;&lt; gsm_tdd.getMean().m_first &lt;&lt;endl;\n    cout &lt;&lt; gsm_tdd.getMean().m_second &lt;&lt;endl;\n    cout &lt;&lt; gsm_tdd.getMean().m_third &lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "qt", "show", "qt4.8", "qmessagebox"], "comments": [{"owner": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "edited": false, "score": 0, "creation_date": 1456331865, "post_id": 35607412, "comment_id": 58899912, "body": "The commented last line says the <code>show()</code> call does nothing without this, but your question says the you don&#39;t see anything... can you clarify?  That seems like a contradiction.  Regardless, relevant semi-dupe:  <a href=\"http://comments.gmane.org/gmane.comp.lib.qt.general/30706\" rel=\"nofollow noreferrer\">comments.gmane.org/gmane.comp.lib.qt.general/30706</a>"}, {"owner": {"reputation": 683, "user_id": 2359593, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/xJJPi.jpg?s=128&g=1", "display_name": "Megasa3", "link": "https://stackoverflow.com/users/2359593/megasa3"}, "reply_to_user": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "edited": false, "score": 0, "creation_date": 1456332347, "post_id": 35607412, "comment_id": 58900298, "body": "@eclarkso Yes sorry, maybe I wxplained wrong... If I dont use the processEvents line then the pop up never shows up, its the same as if I haven&#39;t made that code... while if I put that line I can see the pop up, but this pop up is empty.. no message, no title no icon shown (And its well initialized I think as if I change the show for a exe then I see it as it should (but then it wait someone to closes it before continuing) Hope its clearer now :D"}], "answers": [{"tags": [], "owner": {"reputation": 1077, "user_id": 1296734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a73bfb57e420ceb78bfcd6e705c508b?s=128&d=identicon&r=PG&f=1", "display_name": "eclarkso", "link": "https://stackoverflow.com/users/1296734/eclarkso"}, "is_accepted": false, "score": 3, "last_activity_date": 1456406161, "last_edit_date": 1456406161, "creation_date": 1456334821, "answer_id": 35608979, "question_id": 35607412, "link": "https://stackoverflow.com/questions/35607412/qt-4-8-5-understanding-qmessagebox-exec-and-show/35608979#35608979", "title": "Qt 4.8.5 Understanding QMessagebox .exec() and .show()", "body": "<p>Relevant:  <a href=\"http://comments.gmane.org/gmane.comp.lib.qt.general/30706\" rel=\"nofollow\">http://comments.gmane.org/gmane.comp.lib.qt.general/30706</a></p>\n\n<p>In summary, <code>QDialog::exec()</code> creates a modal dialog (regardless of your <code>Qt::NonModal</code> setting) with its own event loop, and <code>::show()</code> does not.</p>\n\n<p>So in your case, <code>::exec()</code> will fully render the dialog but it's blocking the rest of your background processing.  <code>::show()</code> won't block, but since it's sharing the event loop with your other code it isn't getting around to emptying the event queue (which has all of the show/layout/render events from your dialog) because of your background code.</p>\n\n<p>I would try the following:</p>\n\n<ul>\n<li>use <code>::show()</code> not <code>::exec()</code></li>\n<li>force your dialog to the front using <code>QDialog::raise()</code> and <code>Dialog::activateWindow()</code></li>\n<li>(the important part) <em>either</em> \n\n<ul>\n<li>call <code>QApplication::processEvents()</code> within your background processing tasks (e.g., within long-running loops).</li>\n<li>spawn your background processing into a thread (this may or may not be easy depending on how your code is structured) to allow the main event loop to process your dialog events. </li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 683, "user_id": 2359593, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/xJJPi.jpg?s=128&g=1", "display_name": "Megasa3", "link": "https://stackoverflow.com/users/2359593/megasa3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1980, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1456406161, "creation_date": 1456330781, "question_id": 35607412, "link": "https://stackoverflow.com/questions/35607412/qt-4-8-5-understanding-qmessagebox-exec-and-show", "title": "Qt 4.8.5 Understanding QMessagebox .exec() and .show()", "body": "<p>I'm doing a QWizard with QT 4.8.5 and in some pages I have to close some other applications and exit my program. This works fine but now I want to show a pop up message that tells the user that the programs are restarting (There are others a part of mine and mine is the last one to be closed always). The code I use to show the pop up is the next one and I place it in the validatepage of a QWizardpage:</p>\n\n<pre><code>  QMessageBox *msgBox1 = new QMessageBox;\n    msgBox1-&gt;setWindowTitle(\"Title...\");\n    msgBox1-&gt;setIcon(QMessageBox::Information);\n    msgBox1-&gt;setText(\" blablablalbal bla bla bla.\");\n    msgBox1-&gt;setWindowModality(Qt::NonModal);\n    msgBox1-&gt;show();\n    QCoreApplication::processEvents(); // without this line, the show does nothing and I can't see my pop up window\n</code></pre>\n\n<p>So the thing is: With that code, When I am in that wizardpage and click to finish, it launches the QMessageBox while (behind) the program is restarting the other applications and then closes itself (with a QApplication::quit(); ) which is exactly what I want... BUT no message is shown in the pop up... I can't see the icon, the title or the text... :S I don't know why :(</p>\n\n<p>Whereas when use ->exec(); instead of show, the icon, title and text are shown BUT when the pop up appears, nothing is done behind until the user closes that pop up... :S</p>\n\n<p>I understand that .exec() freezes all until user closes the pop up while show doesn't...</p>\n\n<p>So... how can I see the text with the show() behaviour?? I don't want the user to interact with that pop up, I just need the pop up to show up while closing all until my program closes too...</p>\n\n<p>Thank you so much!</p>\n"}, {"tags": ["c++", "qsort"], "comments": [{"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 2, "creation_date": 1456331306, "post_id": 35607354, "comment_id": 58899465, "body": "Why are you using this in C++?! Switch to using the standard library and apply <code>std::sort</code> with a custom criterion."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 1, "creation_date": 1456331521, "post_id": 35607354, "comment_id": 58899642, "body": "Please read <a href=\"http://en.cppreference.com/w/cpp/algorithm/qsort\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/qsort</a>. The first argument of <code>qsort</code> is the array to sort, you&#39;re passing a struct instead. What you want to do is to switch from a struct of arrays to an array of structs, and sort those."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1456332040, "post_id": 35607354, "comment_id": 58900046, "body": "@iksemyonov though for some classes, <code>qsort</code> might be too &#39;raw&#39; and invoke undefined behaviour by doing things it shouldn&#39;t. this is c++; using the stl is usually the best recommendation."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1456332067, "post_id": 35607354, "comment_id": 58900067, "body": "Also: Welcome to stackoverflow. The preferred way of saying thanks here is by upvoting or and/ or accepting answers to your questions. You might consider accepting some of the answers to your previous questions, which also gives you some reputation points."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1456332392, "post_id": 35607354, "comment_id": 58900339, "body": "The only C++ I can see is in the tag...... (apart form that, I agree to your comments regarding usage of standard library)"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1456333168, "post_id": 35607354, "comment_id": 58900967, "body": "Is there any chance that your actual task is to sort an array (or better a vector) of 10 structs each one containing an int and a string, ordering the result by the int?"}, {"owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456334090, "post_id": 35607354, "comment_id": 58901622, "body": "Bob, correct I simply wanted to sort the struct (int, string)"}], "answers": [{"comments": [{"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 1, "creation_date": 1456331890, "post_id": 35607839, "comment_id": 58899926, "body": "This is not enough, since given your code this is going to fail: <code>int compare(struct ABCSort *elem1, struct ABCSort *elem2)</code> and <code>if (elem1-&gt;svSort&lt; elem2-&gt;svSort)</code>. The answer is incomplete."}, {"owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456332376, "post_id": 35607839, "comment_id": 58900322, "body": "tofro: thanks but qsort ((void*)&amp;(abcSort.svSort), 10, sizeof (int), (compfn)compare); is also not sorting both arrays. iksemyonov: if it&#39;s not complete what could I change ?"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1456332577, "post_id": 35607839, "comment_id": 58900473, "body": "If you want to sort two arrays, you have to call qsort twice, once for each array. We have shown you how to do this for one of them and left the other one as exercise to you ;) Note you will be sorting C-strings for the other array. The comparison function and also the qsort call needs to be different for those."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1456332844, "post_id": 35607839, "comment_id": 58900701, "body": "@tofro sorry, but the second array contains <code>std::string</code> (this is partly an assumption because we don&#39;t see a <code>using std::string;</code> or a <code>using namespace std;</code> anywhere in the code), and the comparison operator is defined for <code>std::string</code>."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1456333095, "post_id": 35607839, "comment_id": 58900905, "body": "right again. But instead of assuming an std::string somewhere, we could just as well assume a typedef char [80] string ;) - Both is not there"}, {"owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456333330, "post_id": 35607839, "comment_id": 58901098, "body": "Actually, I took this from a similar case which work. typedef int(<i>compfn)(const void</i>, const void*); \ttypedef int(<i>compfn)(const void</i>, const void*); \tstruct animal { \t\tint  number; \t\tchar name[15]; \t};  struct animal arrayAAA[3] = { { 1, &quot;Ana&quot; }, { 5, &quot;Elep&quot; }, { 8, &quot;Hum&quot; }} int  compare(struct animal *, struct animal *); void mainSort(void) { \tqsort((void *)&amp;arrayAAA, 5,sizeof(struct animal),(compfn)compare); } int compare(struct animal *elem1, struct animal *elem2) { \tif (elem1-&gt;number &lt; elem2-&gt;number) \t\treturn -1; \telse if (elem1-&gt;number &gt; elem2-&gt;number) \t\treturn 1; \telse }"}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456334025, "post_id": 35607839, "comment_id": 58901570, "body": "@Joe That example sorts an array of structs (but only based on the number), not an array of integers. I think you should first tell us what exactly you want to sort...."}, {"owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456334533, "post_id": 35607839, "comment_id": 58901949, "body": "tofro: the basic idea is to sort existing double array values and link the related strings. Simply like (4.5, &quot;VW&quot;), ((2.4, Skoda), (... Therefore, I craeted the struct .."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "reply_to_user": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456335943, "post_id": 35607839, "comment_id": 58902911, "body": "@joe, you created the struct on the wrong dimension, so to say. Think well, you will see that the value pairs should be structs themselves, since they&#39;re the objects you operate on."}, {"owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456336784, "post_id": 35607839, "comment_id": 58903462, "body": "iksemyonov: thanks for your feedback. Maybe, I was not clear enough. I have a 1D int array (svSort[10]) and a related string array (itemSort[10]) and combined them in the struct ABCSort. The idea is to only sort the struct (effectively the int and use the linked strings). This code perfectly works, when using struct ABCSort abcSort[3] = { { 1, &quot;Ana&quot; }, { 5, &quot;Elep&quot; }, { 8, &quot;Hum&quot; }}. Obviously there is something wrong filling the struct  data."}, {"owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456341948, "post_id": 35607839, "comment_id": 58906512, "body": "tofro: Thanks for the code example. Actually, that&#39;s exactly were I came from right at the beginning and which works well. My issue is still how to correctly feed the two arrays in the struct (what I tried with the for loop)."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "edited": false, "score": 0, "creation_date": 1456346713, "post_id": 35607839, "comment_id": 58909291, "body": "I don&#39;t get what you mean with &quot;feed the two arrays in the struct&quot;. Initialising the values? Above you said &quot;&quot;the basic idea is to sort existing double array values and link the related strings&quot; - I think that&#39;s what happens now...."}, {"owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456348213, "post_id": 35607839, "comment_id": 58910123, "body": "In your example you used 5 data sets which works. In my code I used struct ABCSort abcSort;  int compare(struct ABCSort*, struct ABCSort*);  void mainSort() {        for (int i = 0; i &lt; 10; i++)     {         abcSort.svSort[i] = 100 - i;         abcSort.itemSort[i] = arrayREAD[i][2];     }"}, {"owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456348432, "post_id": 35607839, "comment_id": 58910236, "body": "Sorry, this was too fast .. Actually, I filled the struct abcSort with values from the arrays using the &quot;for&quot; loop (abcSort.svSort[i] = 100 - i; and abcSort.itemSort[i] = arrayREAD[i][2];. This new data could not be sorted."}, {"owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456349150, "post_id": 35607839, "comment_id": 58910648, "body": "tofro: Have you tried my code (similiar to yours except the for loop). It has no compiling or debugging issues but don&#39;t sort."}, {"owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "reply_to_user": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456352088, "post_id": 35607839, "comment_id": 58912298, "body": "@Joe: Another modification. Should do what you want"}], "tags": [], "owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "is_accepted": false, "score": -1, "last_activity_date": 1456352010, "last_edit_date": 1456352010, "creation_date": 1456331782, "answer_id": 35607839, "question_id": 35607354, "link": "https://stackoverflow.com/questions/35607354/not-sorting-of-struct-using-arrays/35607839#35607839", "title": "Not sorting of struct using arrays", "body": "<p>You seem to intend to sort an array of integers (your compare function looks like that). But what you are actually handing over to qsort for sorting is a pointer to a structure that holds, among other stuff, an array.</p>\n\n<p>So what you are actually trying to sort is one single struct ABCSort which is initialized and 9 other, uninitialized structures. This must fail.</p>\n\n<p>Your qsort line should look like so:</p>\n\n<pre><code>qsort ((void*)&amp;(abcsort.svsort), 10, sizeof (int), (compfn)compare);\n</code></pre>\n\n<p>Also, you should change the compare function so that it takes and works on  two pointers to integers:</p>\n\n<pre><code>int compare (int * e1, int * e2) {\n   return *e1 - *e2;\n}\n</code></pre>\n\n<p>EDIT:\nAfter you have explained a bit better what you want, have a look at the following:</p>\n\n<pre><code>typedef int(compfn)(const void, const void*); \n\n#define MAXCARS 5\n\nstruct car { \n   int sortKey;\n   double displacement; \n   char name[15];  /* Note I have decided this should be C */\n}; \n\n/* This time we have an array of structs */\nstruct car cars [MAXCARS] = { \n   { 0, 1.9, \"BMW\" }, \n   { 0, 6.3, \"Audi\" }, \n   { 0, 0.5, \"Fiat\" },\n   { 0, 25.0, \"Humvee\" },\n   { 0, 0.05, \"Minibike\" }\n};\n\nint compare(struct car*, struct car*); \n\nvoid main(int argc, char *argv []) { \n   int i;\n\n   for (i = 0; i &lt; MAXCARS; i++)\n       cars[i].sortKey = 100 - i;\n\n   qsort((void *)&amp;cars, MAXCARS, sizeof(struct car), (compfn)compare); \n} \n\n/* Note we are comparing struct car-s in here, based on their displacement */\nint compare(struct car *elem1, struct car *elem2) { \n   return elem1-&gt;sortKey - elem2-&gt;sortKey;\n} \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456401009, "post_id": 35615646, "comment_id": 58934422, "body": "Bob, these are really great solution, which work perfectly. I guess it should also work instead of &lt;int&lt; with &lt;double&gt;. How to get the sorted values (c++) in my_set out into a 1D array .. ? For instance int AY [i] = my_set.num [i] does not work. Many thanks for your ideas and help."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456407009, "post_id": 35615646, "comment_id": 58938774, "body": "@joe well, in the last loop, instead of print the values, use them to fill any array you need. Later I&#39;ll update the answer."}, {"owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "edited": false, "score": 0, "creation_date": 1456436090, "post_id": 35615646, "comment_id": 58959089, "body": "Hi Bob,It looks like have to work hard to get on track with your ideas.The first C++ solution (set ..) worked well, but this last option (sort ..) looks almost perfect for me. Many thanks for your comprehensive views !"}], "tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": -1, "last_activity_date": 1456429643, "last_edit_date": 1456429643, "creation_date": 1456358165, "answer_id": 35615646, "question_id": 35607354, "link": "https://stackoverflow.com/questions/35607354/not-sorting-of-struct-using-arrays/35615646#35615646", "title": "Not sorting of struct using arrays", "body": "<p>You have build two arrays of integer and strings and you want to sort them by the numbers, keeping the initial pairing. That's the first problem, you should have created <em>one</em> array of structs, each struct containg a number and a string and a function that compares the integer member of that struct to obtain the sort order.</p>\n\n<p>You also tagged this question as C++ but you are using <code>qsort</code>, arrays and function pointers like C, so I'll present two complete C programs that solve your problem.</p>\n\n<hr>\n\n<p>Let's see, using an <strong>array of structs</strong>, what your code could be like:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX 6\n#define CMAX 15\n\ntypedef int(*cmp_fn)(const void*, const void*);\n\ntypedef struct {\n    int num;\n    char str[CMAX];\n} numABC;\n\nint comp_struct(const numABC *lhs, const numABC *rhs ) { \n    if ( lhs-&gt;num &lt; rhs-&gt;num ) \n        return -1; \n    if ( lhs-&gt;num &gt; rhs-&gt;num ) \n        return 1; \n    return 0;\n} \n\nint main(void) {\n\n    numABC myArray[MAX] = { {6, \"cat\"}, {4, \"dog\"}, {8, \"panter\"},\n                         {2, \"red fish\"}, {1, \"hawk\"}, {6, \"snake\"} };\n    int i;\n\n    // sort the array of structs by int member\n    qsort(myArray, MAX, sizeof(numABC), (cmp_fn)comp_struct);\n\n    // print out the sorted array\n    printf(\"\\nSort by numbers:\\n\");\n    for ( i = 0; i &lt; MAX; ++i ) {\n        printf(\"%d %s\\n\",myArray[i].num,myArray[i].str);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If you want to use this code, but you have a couple of arrays instead, one option is to convert those arrays:</p>\n\n<pre><code>int nums[MAX] = {6,4,8,2,1,3};\nchar str[MAX][CMAX] = {\"cat\",\"dog\",\"panter\",\"red fish\",\"hawk\",\"snake\"};\nint i;\n\n// create the array of structs from the two arrays\nnumABC myArray[MAX];\nfor ( i = 0; i &lt; MAX; ++i ) {\n    myArray[i].num = nums[i];\n    strcpy(myArray[i].str, str[i]);\n}\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<p>Another option to sort <strong>two different arrays</strong> (mantaining the pairing or alignment between the two) is to use a more complicated method which consists in sorting an array of indeces instead. to keep the relationships between the two original arrays I'll have to use global variables which can be accessed inside the compare function(s). Once the indeces are sorted, the original arrays are changed accordingly.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#define MAX 6\n#define CMAX 15\n\nconst size_t I_DIM = MAX * sizeof(int);\nconst size_t SS_DIM = MAX * sizeof(char*);\nconst size_t S_DIM = MAX * CMAX;\n\n// global variables needed to perform comparisons   \nint *pg_int;\nchar **pg_str;\n\ntypedef int(*cmp_fn)(const void*, const void*);\n\nint comp_num(const int *lhs, const int *rhs ) { \n    if (pg_int[*lhs] &lt; pg_int[*rhs]) \n        return -1; \n    if (pg_int[*lhs] &gt; pg_int[*rhs]) \n        return 1; \n    return 0;\n} \n\nint comp_str(const int *lhs, const int *rhs ) { \n    return strcmp(pg_str[*lhs],pg_str[*rhs]);\n} \n\nint main(void) {\n    int nums[MAX] = {6,4,8,2,1,3};\n    char str[MAX][CMAX] = {\"cat\",\"dog\",\"panter\",\"red fish\",\"hawk\",\"snake\"};\n    int i;\n\n    // create an array of indeces \n    int index[MAX];\n    for ( i = 0; i &lt; MAX; ++i ) {\n        index[i] = i;\n    }\n\n    // set global copies\n    pg_int = malloc(I_DIM);\n    memcpy(pg_int,nums,I_DIM);\n    pg_str = malloc(SS_DIM);\n    pg_str[0] = malloc(S_DIM);\n    memcpy(pg_str[0],str[0],S_DIM);\n    for ( i = 1; i &lt; MAX; i++ ) {\n        pg_str[i] = pg_str[0] + i * CMAX;\n    }\n\n    // sort the indeces ordering by ints\n    qsort(index, MAX, sizeof(int), (cmp_fn)comp_num);\n\n    //update the two arrays\n    for ( i = 0; i &lt; MAX; ++i ) {\n        nums[i] = pg_int[index[i]];\n        strcpy(str[i],pg_str[index[i]]);\n    }\n\n    // print out sorted couples\n    printf(\"Sort by numbers:\\n\");\n    for ( i = 0; i &lt; MAX; ++i ) {\n        printf(\"%d %s\\n\",nums[i],str[i]);\n    }\n\n    // sort the indeces ordering by strings\n    qsort(index, MAX, sizeof(int), (cmp_fn)comp_str);\n\n    //update the two arrays\n    for ( i = 0; i &lt; MAX; ++i ) {\n        nums[i] = pg_int[index[i]];\n        strcpy(str[i],pg_str[index[i]]);\n    }\n\n    // print out sorted couples\n    printf(\"\\nSort by strings:\\n\");\n    for ( i = 0; i &lt; MAX; ++i ) {\n        printf(\"%d %s\\n\",nums[i],str[i]);\n    }\n\n    free(pg_int);\n    free(pg_str[0]);\n    free(pg_str);\n    return 0;\n}\n</code></pre>\n\n<p>The output (sorry for the silly example) is:</p>\n\n<pre><code>Sort by numbers:\n1 hawk\n2 red fish\n3 snake\n4 dog\n6 cat\n8 panter\n\nSort by strings:\n6 cat\n4 dog\n1 hawk\n8 panter\n2 red fish\n3 snake\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<p><br/>\nIf you want to accomplish the same task in C++ you should take advantage of the Standard Library and use <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>std::vector</code></a> as a container and <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow\"><code>std::sort</code></a> as algorithm:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nusing std::vector;\nusing std::string;\nusing std::cout;\n\nstruct numABC {\n    double num;\n    string str;\n\n    // instead of a compare function I can overload operator &lt;\n    friend bool operator&lt;( const numABC &amp;lhs, const numABC &amp;rhs ) {\n        return lhs.num &lt; rhs.num;\n    }\n};\n\n// or use a lambda\nauto cmp_str = []( const numABC &amp;lhs, const numABC &amp;rhs ) -&gt; bool {\n    return lhs.str &lt; rhs.str;\n};\n\nint main() {\n\n    vector&lt;numABC&gt; my_data = { {3.6, \"cat\"}, {5.7, \"dog\"}, {7.1, \"panter\"},\n                         {0.2, \"red fish\"}, {1.8, \"hawk\"}, {1.1, \"snake\"}};\n\n    std::sort(my_data.begin(), my_data.end());\n\n    std::cout &lt;&lt; \"Sort by numbers:\\n\";\n    for ( auto &amp; s : my_data ) {\n        std::cout &lt;&lt; s.num &lt;&lt; ' ' &lt;&lt; s.str &lt;&lt; '\\n';\n    }\n\n    std::sort(my_data.begin(), my_data.end(), cmp_str);\n    // passing a lambda to specify how to compare ^^\n\n    std::cout &lt;&lt; \"Sort by strings:\\n\";\n    // if you don't like c++11 range for:\n    for ( int i = 0; i &lt; my_data.size(); ++i ) {\n        std::cout &lt;&lt; my_data[i].num &lt;&lt; ' ' &lt;&lt; my_data[i].str &lt;&lt; '\\n';\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><br/>\nNote that I have initialized <code>my_data</code> as a <strong>vector of objects</strong> of type numABC. If you have to start from two arrays, you can create the vector like this:</p>\n\n<pre><code>vector&lt;double&gt; nums = {3.6, 5.7, 7.1, 0.2, 1.8, 1.1};\nvector&lt;string&gt; str = {\"cat\", \"dog\", \"panter\", \"red fish\", \"hawk\", \"snake\"};\nvector&lt;numABC&gt; my_data;\n\nfor ( int i = 0; i &lt; nums.size(); ++i ) {\n    my_data.push_back(numABC{nums[i],str[i]});\n}\n</code></pre>\n\n<p>After sorting, if you have to extract the two vectors again (instead of simply looping through my_data) you can do something like this:</p>\n\n<pre><code>for ( int i = 0; i &lt; my_data.size(); ++i ) {\n    nums[i] = my_data[i].num;\n    str[i] = my_data[i].str;\n}\n</code></pre>\n\n<p><br/></p>\n\n<hr>\n\n<p><br/>\nAlternatively you could implement an algorithm similar to the one I used before and <strong>sort the two vectors</strong> <code>nums</code> and <code>srt</code> <em>using an auxiliary vector of indeces</em>:</p>\n\n<pre><code>vector&lt;double&gt; nums = {3.6, 5.7, 7.1, 0.2, 1.8, 1.1};\nvector&lt;string&gt; str = {\"cat\", \"dog\", \"panter\", \"red fish\", \"hawk\", \"snake\"};\n\n// create the vector of indeces\nvector&lt;int&gt; idx(nums.size());\nstd::iota(idx.begin(),idx.end(),0); // fill the vector, require #include &lt;numeric&gt;\n\n// thanks to the lambda variable capture you don't need globals\nauto cmp_ind = [ &amp;nums ]\n           ( const int &amp;lhs, const int &amp;rhs ) -&gt; bool {\n    return nums[lhs] &lt; nums[rhs];\n};\n\n// sort indeces \nstd::sort(idx.begin(), idx.end(),cmp_ind);\n\n// create sorted arrays. It could be done in place but it's more difficult\nvector&lt;double&gt; sorted_nums(nums.size());\nvector&lt;string&gt; sorted_str(str.size());\nfor ( int i = 0; i &lt; nums.size(); ++i ) {\n    sorted_nums[i] = nums[idx[i]];\n    sorted_str[i] = str[idx[i]];\n}\n\nstd::cout &lt;&lt; \"Sort by numbers:\\n\";\nfor ( int i = 0; i &lt; nums.size(); ++i ) {\n    std::cout &lt;&lt; sorted_nums[i] &lt;&lt; ' ' &lt;&lt; sorted_str[i] &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5279257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/88f7eb8218cf3aae93a0841413cf74fd?s=128&d=identicon&r=PG&f=1", "display_name": "joe", "link": "https://stackoverflow.com/users/5279257/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 35615646, "answer_count": 2, "score": 0, "last_activity_date": 1456429643, "creation_date": 1456330667, "last_edit_date": 1456330700, "question_id": 35607354, "link": "https://stackoverflow.com/questions/35607354/not-sorting-of-struct-using-arrays", "title": "Not sorting of struct using arrays", "body": "<p>It seems to be a simply exercise, but something doesn't work with the following qsort algorithmus. The <code>struct abcSort</code> correctly shows all assigned values. Unfortunately, the <code>qsort</code> is not sorting anything.</p>\n\n<pre><code>typedef int(*compfn)(const void*, const void*);\n\nstruct ABCSort\n{\n    int svSort[10];\n    string itemSort[10];\n};\n\nstruct ABCSort abcSort;\n\nint compare(struct ABCSort*, struct ABCSort*);\n\nvoid mainSort()\n{   \n    for (int i = 0; i &lt; 10; i++)\n    {\n        abcSort.svSort[i] = 100 - i;\n        abcSort.itemSort[i] = arrayREAD[i][2];\n    }\n\n    qsort( (void*)&amp;abcSort, 10, sizeof(struct ABCSort), (compfn)compare );\n}\n\nint compare(struct ABCSort *elem1, struct ABCSort *elem2)\n{\n    if (elem1-&gt;svSort&lt; elem2-&gt;svSort)\n        return -1;\n    else if (elem1-&gt;svSort &gt; elem2-&gt;svSort)\n        return 1;\n    else\n        return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "visual-studio", "linker-errors", "visual-studio-2015"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1456330653, "post_id": 35607238, "comment_id": 58898929, "body": "I just started an empty C++  Console Application project, added a c++ file, put <code>void main() { }</code> in it, and it works fine (you did select <i>Console Application</i>, right?)"}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1456330813, "post_id": 35607238, "comment_id": 58899043, "body": "Yes I did select <i>Console Application</i>."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1456330944, "post_id": 35607238, "comment_id": 58899145, "body": "Related, possibly duplicate: <a href=\"http://stackoverflow.com/questions/33577341/visual-studio-2015-c-and-assembly-not-building\">Visual studio 2015 c++ and assembly not building</a>"}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1456332220, "post_id": 35607238, "comment_id": 58900208, "body": "@crashmstr - thanks that helped but now &lt;string&gt; is throwing issues."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1456332309, "post_id": 35607238, "comment_id": 58900266, "body": "Looks like you are still missing library or other project configuration settings."}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1456332689, "post_id": 35607238, "comment_id": 58900568, "body": "Yeah I don&#39;t disagree but I am baffled at how this isn&#39;t possible right out of the gate. It&#39;s as if VSC was crippled. It&#39;s not like I&#39;m doing some new revolutionary thing here. This is effectively the hello world test. I could do this exact thing back on VS2013 without fussing in the properties."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1456332801, "post_id": 35607238, "comment_id": 58900660, "body": "I&#39;m not able to reproduce your problem, but perhaps try creating the project again without the &quot;empty&quot; selection?"}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1456333039, "post_id": 35607238, "comment_id": 58900856, "body": "Yup, Ok. I made another console application without empty checked off and sure enough, it builds with <code>&lt;string&gt;</code> and without having to twerk the properties."}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1456337978, "post_id": 35607238, "comment_id": 58904143, "body": "This may or may not have to do with the pre-compiled header being in a non-empty project. I&#39;d like to be able to do what I&#39;m trying to do without any PCHs."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 3, "creation_date": 1456346262, "post_id": 35607238, "comment_id": 58909062, "body": "Side note: <code>void main</code> is wrong."}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1456346351, "post_id": 35607238, "comment_id": 58909094, "body": "@deviantfan What makes it wrong?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 3, "creation_date": 1456346512, "post_id": 35607238, "comment_id": 58909178, "body": "@Enigma The C++ standard allows only <code>int</code> as return type for main. Microsoft is notorious for not caring much (especially in older versions of it&#39;s software), but if you want C++ code which runs on other compilers (and/or future versions of VS if they get better), don&#39;t do it."}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "edited": false, "score": 0, "creation_date": 1456346676, "post_id": 35607238, "comment_id": 58909271, "body": "Thanks good tip. May migrate it to eclipse someday."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1456346996, "post_id": 35607238, "comment_id": 58909455, "body": "@Enigma ...and the void/int problem is only the tip of the iceberg :) If you like VS but want compatible code, it helps much to make occasional builds with some other compiler while developing, every few days or so, just to check if there are errors not shown in VS. (at the same time, you&#39;ll get a good &quot;feeling&quot; what code to avoid in VS)"}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1456347109, "post_id": 35607238, "comment_id": 58909523, "body": "@deviantfan Yeah great idea. I was actually thinking of doing something like that soon."}], "answers": [{"tags": [], "owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "is_accepted": true, "score": 2, "last_activity_date": 1456504652, "last_edit_date": 1456504652, "creation_date": 1456346146, "answer_id": 35612548, "question_id": 35607238, "link": "https://stackoverflow.com/questions/35607238/cant-compile-bare-minimum-void-main-in-visual-studio-community-2015-lnk20/35612548#35612548", "title": "Can&#39;t compile bare minimum void main() {} in Visual Studio Community 2015 (LNK2019 - MSVCRTD.lib)", "body": "<p>Ok I figured it out but it leads to another question.</p>\n\n<p>The problem was both <em>that</em> I was defining <code>/ENTRY:Main</code> in <kbd>Linker</kbd> > <kbd>Advanced</kbd> > <kbd>Entry Point</kbd> <em>in addition to</em> the entry point being <code>Main</code> and not <code>main</code>.</p>\n\n<p><strong>All the paths/libraries were all in order, surprisingly.</strong> I undid the changes to the configuration mentioned under the \"Update:\" line in the question - that wasn't the issue.</p>\n\n<p>What makes this really weird is that I absolutely <em>could</em> do exactly that above in Visual Studio 2013 (from which I migrated the project). Perhaps even weirder.. I have another project that I also migrated in the same fashion that <em>also</em> has <code>Main</code> specifically declared as the entry point and yet it gets no complaints from the linker.</p>\n"}], "owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2950, "favorite_count": 0, "accepted_answer_id": 35612548, "answer_count": 1, "score": 1, "last_activity_date": 1456504652, "creation_date": 1456330378, "last_edit_date": 1456332188, "question_id": 35607238, "link": "https://stackoverflow.com/questions/35607238/cant-compile-bare-minimum-void-main-in-visual-studio-community-2015-lnk20", "title": "Can&#39;t compile bare minimum void main() {} in Visual Studio Community 2015 (LNK2019 - MSVCRTD.lib)", "body": "<p>I installed Visual Studio Community 2015 on a fairly fresh Win10 install that never had any IDEs/dev tools installed on it.</p>\n\n<p>I made an empty c++ project, added <code>main.cpp</code>, set the entry point to <code>main</code> and added the bare minimum:</p>\n\n<pre><code>void main()\n{\n\n}\n</code></pre>\n\n<p>On <code>VS2013</code> I could do this without any issues. I am getting linker errors with this that I haven't been able to figure out:</p>\n\n<pre><code>Severity    Code    Description File    Line\nError   LNK2019 unresolved external symbol __CrtDbgReport referenced in function __CRT_RTC_INIT C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\MSVCRTD.lib(_init_.obj) 1\nError   LNK2019 unresolved external symbol __CrtDbgReportW referenced in function __CRT_RTC_INITW   C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\MSVCRTD.lib(_init_.obj) 1\nError   LNK2019 unresolved external symbol ___stdio_common_vsprintf_s referenced in function __vsprintf_s_l C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\MSVCRTD.lib(_error_.obj)    1\nError   LNK2019 unresolved external symbol __wmakepath_s referenced in function \"int __cdecl GetPdbDllPathFromFilePath(wchar_t const *,wchar_t *,unsigned int)\" (?GetPdbDllPathFromFilePath@@YAHPB_WPA_WI@Z)    C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\MSVCRTD.lib(_pdblkup_.obj)  1\nError   LNK2019 unresolved external symbol __wsplitpath_s referenced in function \"int __cdecl GetPdbDllPathFromFilePath(wchar_t const *,wchar_t *,unsigned int)\" (?GetPdbDllPathFromFilePath@@YAHPB_WPA_WI@Z)   C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\MSVCRTD.lib(_pdblkup_.obj)  1\nError   LNK2019 unresolved external symbol _wcscpy_s referenced in function \"int __cdecl GetPdbDllPathFromFilePath(wchar_t const *,wchar_t *,unsigned int)\" (?GetPdbDllPathFromFilePath@@YAHPB_WPA_WI@Z)    C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\MSVCRTD.lib(_pdblkup_.obj)  1\nError   LNK2019 unresolved external symbol ___vcrt_GetModuleFileNameW referenced in function \"struct HINSTANCE__ * __cdecl GetPdbDll(void)\" (?GetPdbDll@@YAPAUHINSTANCE__@@XZ)  C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\MSVCRTD.lib(_pdblkup_.obj)  1\nError   LNK2019 unresolved external symbol ___vcrt_GetModuleHandleW referenced in function \"struct HINSTANCE__ * __cdecl GetPdbDll(void)\" (?GetPdbDll@@YAPAUHINSTANCE__@@XZ)    C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\MSVCRTD.lib(_pdblkup_.obj)  1\nError   LNK2019 unresolved external symbol ___vcrt_LoadLibraryExW referenced in function \"struct HINSTANCE__ * __cdecl GetPdbDll(void)\" (?GetPdbDll@@YAPAUHINSTANCE__@@XZ)  C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\MSVCRTD.lib(_pdblkup_.obj)  1\nError   LNK2019 unresolved external symbol __except_handler4_common referenced in function __except_handler4    C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\MSVCRTD.lib(_chandler4gs_.obj)  1\nError   LNK1120 10 unresolved externals C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\Debug\\ConsoleApplication1.exe   1\n</code></pre>\n\n<hr>\n\n<p><strong>Update:</strong></p>\n\n<p>I changed two configuration properties:</p>\n\n<ul>\n<li><kbd>Linker</kbd> > <kbd>Input</kbd> > <kbd>Ignore All Default Libraries</kbd> > <code>Yes (/NODEFAULTLIB)</code></li>\n<li><kbd>C/C++</kbd> > <kbd>Code Generation</kbd> > <kbd>Basic Runtime Checks</kbd> > <code>Default</code></li>\n</ul>\n\n<p>This let me build the above bare minimum code however after adding some other trivial code, I am getting a slew of other issues. I can't fathom why VSC15 would be this messed up out of the box:</p>\n\n<pre><code>#include &lt;string&gt;\n\nusing namespace std;\n\nvoid main()\n{\n    string blah = \"string\";\n}\n</code></pre>\n\n<p>It should be trivial to include a standard library and yet:</p>\n\n<pre><code>Severity    Code    Description File    Line\nError   LNK2019 unresolved external symbol \"void * __cdecl operator new(unsigned int)\" (??2@YAPAXI@Z) referenced in function \"void * __cdecl std::_Allocate(unsigned int,unsigned int,bool)\" (?_Allocate@std@@YAPAXII_N@Z)  C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol \"void __cdecl operator delete(void *)\" (??3@YAXPAX@Z) referenced in function \"void __cdecl std::_Deallocate(void *,unsigned int,unsigned int)\" (?_Deallocate@std@@YAXPAXII@Z)    C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol __imp___invalid_parameter referenced in function \"void * __cdecl std::_Allocate(unsigned int,unsigned int,bool)\" (?_Allocate@std@@YAPAXII_N@Z)   C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol \"__declspec(dllimport) public: __thiscall std::_Lockit::_Lockit(int)\" (__imp_??0_Lockit@std@@QAE@H@Z) referenced in function \"public: void __thiscall std::_Container_base12::_Orphan_all(void)\" (?_Orphan_all@_Container_base12@std@@QAEXXZ)    C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol \"__declspec(dllimport) public: __thiscall std::_Lockit::~_Lockit(void)\" (__imp_??1_Lockit@std@@QAE@XZ) referenced in function \"public: void __thiscall std::_Container_base12::_Orphan_all(void)\" (?_Orphan_all@_Container_base12@std@@QAEXXZ)   C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol _memcpy referenced in function \"public: static char * __cdecl std::char_traits&lt;char&gt;::copy(char *,char const *,unsigned int)\" (?copy@?$char_traits@D@std@@SAPADPADPBDI@Z)    C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol __imp__memmove referenced in function \"public: static char * __cdecl std::char_traits&lt;char&gt;::move(char *,char const *,unsigned int)\" (?move@?$char_traits@D@std@@SAPADPADPBDI@Z) C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol _strlen referenced in function \"public: static unsigned int __cdecl std::char_traits&lt;char&gt;::length(char const *)\" (?length@?$char_traits@D@std@@SAIPBD@Z)    C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol __imp___CrtDbgReportW referenced in function \"void * __cdecl std::_Allocate(unsigned int,unsigned int,bool)\" (?_Allocate@std@@YAPAXII_N@Z)   C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol \"__declspec(dllimport) void __cdecl std::_Debug_message(wchar_t const *,wchar_t const *,unsigned int)\" (__imp_?_Debug_message@std@@YAXPB_W0I@Z) referenced in function \"void __cdecl std::_Debug_pointer&lt;char const &gt;(char const *,wchar_t const *,unsigned int)\" (??$_Debug_pointer@$$CBD@std@@YAXPBDPB_WI@Z)   C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol \"__declspec(dllimport) void __cdecl std::_Xbad_alloc(void)\" (__imp_?_Xbad_alloc@std@@YAXXZ) referenced in function \"void * __cdecl std::_Allocate(unsigned int,unsigned int,bool)\" (?_Allocate@std@@YAPAXII_N@Z) C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol \"__declspec(dllimport) void __cdecl std::_Xlength_error(char const *)\" (__imp_?_Xlength_error@std@@YAXPBD@Z) referenced in function \"public: void __thiscall std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;::_Xlen(void)const \" (?_Xlen@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QBEXXZ)  C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol \"__declspec(dllimport) void __cdecl std::_Xout_of_range(char const *)\" (__imp_?_Xout_of_range@std@@YAXPBD@Z) referenced in function \"public: void __thiscall std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt;::_Xran(void)const \" (?_Xran@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QBEXXZ)  C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol @__security_check_cookie@4 referenced in function __unwindfunclet$??0?$_String_alloc@U?$_String_base_types@DV?$allocator@D@std@@@std@@@std@@QAE@ABV?$allocator@D@1@@Z$0  C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol __CxxThrowException@8 referenced in function __catch$?_Copy@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QAEXII@Z$1  C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol ___CxxFrameHandler3 referenced in function __unwindfunclet$??0?$_String_alloc@U?$_String_base_types@DV?$allocator@D@std@@@std@@@std@@QAE@ABV?$allocator@D@1@@Z$0 C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2019 unresolved external symbol ___security_cookie referenced in function \"public: __thiscall std::_String_alloc&lt;struct std::_String_base_types&lt;char,class std::allocator&lt;char&gt; &gt; &gt;::_String_alloc&lt;struct std::_String_base_types&lt;char,class std::allocator&lt;char&gt; &gt; &gt;(class std::allocator&lt;char&gt; const &amp;)\" (??0?$_String_alloc@U?$_String_base_types@DV?$allocator@D@std@@@std@@@std@@QAE@ABV?$allocator@D@1@@Z) C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\main.obj    1\nError   LNK2001 unresolved external symbol __load_config_used   C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\ConsoleApplication1\\LINK    1\nError   LNK1120 18 unresolved externals C:\\Users\\[user]\\Desktop\\VS_TEST\\ConsoleApplication1\\Debug\\ConsoleApplication1.exe   1\n</code></pre>\n"}, {"tags": ["c++", "sorting", "vector", "std"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1456330826, "post_id": 35607233, "comment_id": 58899052, "body": "Are you using a C++11 compiler?  If so, I would suggest you change to using <code>lambda</code> functions instead of functors and utilize this feature.  You more than likely will be able to more easily achieve what you&#39;re trying to achieve doing things that way.  Also, it isn&#39;t a good thing to start your names with underscores."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1456330894, "post_id": 35607233, "comment_id": 58899108, "body": "This <code>std::sort(vec.begin(), vec.end(), _compare(i));</code> shouldn&#39;t compile since <code>_compare::operator()</code> takes <code>vector&lt;double&gt;</code>, not a <code>Descriptor</code>! Or is there an operator to convert <code>Descriptor</code> to <code>vector&lt;double&gt;</code>? You seem to not be showing the whole code."}, {"owner": {"reputation": 3913, "user_id": 342384, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MRRvI.jpg?s=128&g=1", "display_name": "iksemyonov", "link": "https://stackoverflow.com/users/342384/iksemyonov"}, "edited": false, "score": 0, "creation_date": 1456331157, "post_id": 35607233, "comment_id": 58899339, "body": "See here: [cppreference[(<a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/sort</a>) &quot;<i>The types <code>Type1</code> and <code>Type2</code> must be such that an object of type <code>RandomIt</code> can be dereferenced and then implicitly converted to both of them.</i>&quot;"}, {"owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "edited": false, "score": 0, "creation_date": 1456385843, "post_id": 35607233, "comment_id": 58924470, "body": "PaulMcKenzie I use underscore when it&#39;s a function that will be used only in other functions :) I&#39;m not sure that lambda could help me this time ^^  Iksemyonov My problem was actually there, but I&#39;m pretty stupid i think, because the solution was easy. I&#39;m on it for 6 days now, and i&#39;m probably tired :p Thanks to you!"}], "answers": [{"comments": [{"owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "edited": false, "score": 0, "creation_date": 1456385890, "post_id": 35607543, "comment_id": 58924487, "body": "Oooooh yes! I&#39;m kinda stupid, the solution was obvious!  Thanks a lot ! :)"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 1, "last_activity_date": 1456331103, "creation_date": 1456331103, "answer_id": 35607543, "question_id": 35607233, "link": "https://stackoverflow.com/questions/35607233/stdsort-on-vector-of-vector/35607543#35607543", "title": "std::sort on vector of vector", "body": "<p>Your comparator is incorrect - since you are sorting <code>vector&lt;Descriptor&gt;</code> it has to compare two instances of <code>Descriptor</code> not <code>vector&lt;double&gt;</code>:</p>\n\n<pre><code>class _compare {\n    int step;\npublic: \n     _compare(int s) : step(s) {}\n\n    bool operator()(const Descriptor&amp; d1, const Descriptor&amp; d2) const {\n        return d1.fv[step] &lt; d2.fv[step];\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 35607543, "answer_count": 1, "score": 1, "last_activity_date": 1508427984, "creation_date": 1456330354, "last_edit_date": 1508427984, "question_id": 35607233, "link": "https://stackoverflow.com/questions/35607233/stdsort-on-vector-of-vector", "title": "std::sort on vector of vector", "body": "<p>I'm actually trying to sort a vector of Descriptor basing on a vector included in the Descriptor</p>\n\n<pre><code>float           xi, yi;     // Descriptor location\nvector&lt;double&gt;  fv;         // The feature vector\n</code></pre>\n\n<p>(here the vector named fv)\nWhat I want to do is to search in the vector of Descriptor (I will name it Vec_Desc for more clarity from now) the dimension that have the most variance\nto do so, I use :</p>\n\n<pre><code>double Tree::_get_mean(vector&lt;Descriptor&gt;&amp; vec, int indice)\n{\n    double sum = 0;\n    int size = vec.size();\n    for (int i = 0; i &lt; size; i++) {\n        sum += vec[i].fv[indice];\n    }\n    sum /= size;\n    return sum;\n}\n\ndouble Tree::_get_variance(vector&lt;Descriptor&gt;&amp; vec, int indice)\n{\nint size = vec.size();\ndouble var = 0;\ndouble mean = _get_mean(vec, indice);\n    for (int i = 0; i &lt; size; i++) {\n        var += ((vec[i].fv[indice] - mean) *  (vec[i].fv[indice] - mean)) / size;\n    }\n    return var;\n}\n\nint Tree::choose_dimension(vector&lt;Descriptor&gt;&amp; vec)\n{\n    double var = _get_variance(vec, 0);\n    int indice = 0;\n    for (int i = 1; i &lt; vec[0].fv.size(); i++) {\n         if (var &gt; _get_variance(vec, i)) {\n            var = _get_variance(vec, i);\n            indice = i;\n        }\n    }\n}\n</code></pre>\n\n<p>Then I want to sort the vec_desc based on the dim I found.\nTried to do like this :</p>\n\n<pre><code>class _compare {\n    int step;\npublic: \n     _compare(int s) : step(s) {}\n\n    bool operator()(const vector&lt;double&gt;&amp; p1, const vector&lt;double&gt;&amp; p2) {\n        return p1[step] &lt; p2[step];\n    }\n};\n\nvoid Tree::_sort_vector(vector&lt;Descriptor&gt;&amp; vec, int i)\n{\n    std::sort(vec.begin(), vec.end(), _compare(i));\n}\n\nvoid Tree::sort_vector(vector&lt;Descriptor&gt;&amp; vec)\n{\n    _sort_vector(vec, choose_dimension(vec));\n}\n</code></pre>\n\n<p>But with this, I will sort vec_desc using his own values, and not the values contained in the fv's...\nHow can I do this?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1456332303, "post_id": 35607167, "comment_id": 58900262, "body": "Check <a href=\"http://stackoverflow.com/a/12464545/5008845\">this</a>"}, {"owner": {"reputation": 366, "user_id": 5371284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207419166266593/picture?type=large", "display_name": "Marco Ferro", "link": "https://stackoverflow.com/users/5371284/marco-ferro"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1456332704, "post_id": 35607167, "comment_id": 58900577, "body": "Still better than nothing :) Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 5371284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207419166266593/picture?type=large", "display_name": "Marco Ferro", "link": "https://stackoverflow.com/users/5371284/marco-ferro"}, "edited": false, "score": 0, "creation_date": 1456331348, "post_id": 35607376, "comment_id": 58899499, "body": "<code>error: &#39;getBuildInformation&#39; is not a member of &#39;cv&#39;</code>. Since which version have this method been made available? Here there should be a 2.3.1"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 366, "user_id": 5371284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207419166266593/picture?type=large", "display_name": "Marco Ferro", "link": "https://stackoverflow.com/users/5371284/marco-ferro"}, "edited": false, "score": 1, "creation_date": 1456331524, "post_id": 35607376, "comment_id": 58899644, "body": "Mine is 3.0.0. I know it was in 2.4.12. Maybe it&#39;s time to update your package."}, {"owner": {"reputation": 366, "user_id": 5371284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207419166266593/picture?type=large", "display_name": "Marco Ferro", "link": "https://stackoverflow.com/users/5371284/marco-ferro"}, "edited": false, "score": 0, "creation_date": 1456331883, "post_id": 35607376, "comment_id": 58899920, "body": "I&#39;m working on an older pc and I have to assume its configuration as a ground truth, so I cannot update. Thanks anyway :)"}, {"owner": {"reputation": 2315, "user_id": 6327658, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/H7mTI.jpg?s=128&g=1", "display_name": "fabda01", "link": "https://stackoverflow.com/users/6327658/fabda01"}, "edited": false, "score": 0, "creation_date": 1573792275, "post_id": 35607376, "comment_id": 104009260, "body": "@MarkSetchell Why doesnt it say which BLAS it was compiled with? (eg Atlas or OpenBlas)"}], "tags": [], "owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 6, "last_activity_date": 1456331044, "last_edit_date": 1456331044, "creation_date": 1456330729, "answer_id": 35607376, "question_id": 35607167, "link": "https://stackoverflow.com/questions/35607167/how-to-know-which-flags-have-been-set-for-opencv-2-3-1-built-on-ubuntu-12-04/35607376#35607376", "title": "How to know which flags have been set for OpenCV 2.3.1 built on Ubuntu 12.04?", "body": "<p>Just run this:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    // Get build information\n    std::cout &lt;&lt; cv::getBuildInformation();\n}\n</code></pre>\n\n<p>It produces output like this:</p>\n\n<pre><code>General configuration for OpenCV 3.0.0 =====================================\nVersion control:               unknown\n\nPlatform:\nHost:                        Darwin 15.0.0 x86_64\nCMake:                       3.3.2\nCMake generator:             Unix Makefiles\nCMake build tool:            /usr/local/Library/ENV/4.3/gmake\nConfiguration:               Release\n\nC/C++:\nBuilt as dynamic libs?:      YES\nC++ Compiler:                /usr/local/Library/ENV/4.3/clang++  (ver 7.0.0.7000176)\nC++ flags (Release):         -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -Wno-long-long -Qunused-arguments -Wno-semicolon-before-method-body -fno-omit-frame-pointer -msse -msse2 -mavx -fvisibility=hidden -fvisibility-inlines-hidden   -DNDEBUG\nC++ flags (Debug):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -Wno-long-long -Qunused-arguments -Wno-semicolon-before-method-body -fno-omit-frame-pointer -msse -msse2 -mavx -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG\nC Compiler:                  /usr/local/Library/ENV/4.3/clang\nC flags (Release):           -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -Wno-long-long -Qunused-arguments -Wno-semicolon-before-method-body -fno-omit-frame-pointer -msse -msse2 -mavx -fvisibility=hidden -fvisibility-inlines-hidden   -DNDEBUG\nC flags (Debug):             -fsigned-char -W -Wall -Werror=return-type -Werror=non-virtual-dtor -Werror=address -Werror=sequence-point -Wformat -Werror=format-security -Wmissing-declarations -Wmissing-prototypes -Wstrict-prototypes -Wundef -Winit-self -Wpointer-arith -Wshadow -Wsign-promo -Wno-narrowing -Wno-delete-non-virtual-dtor -Wno-unnamed-type-template-args -fdiagnostics-show-option -Wno-long-long -Qunused-arguments -Wno-semicolon-before-method-body -fno-omit-frame-pointer -msse -msse2 -mavx -fvisibility=hidden -fvisibility-inlines-hidden -g  -O0 -DDEBUG -D_DEBUG\nLinker flags (Release):\nLinker flags (Debug):\nPrecompiled headers:         NO\nExtra dependencies:          -framework OpenCL -framework Cocoa /usr/local/opt/jpeg/lib/libjpeg.dylib /usr/local/lib/libwebp.dylib /usr/local/lib/libpng.dylib /usr/local/lib/libtiff.dylib /usr/local/lib/libImath.dylib /usr/local/lib/libIlmImf.dylib /usr/local/lib/libIex.dylib /usr/local/lib/libHalf.dylib /usr/local/lib/libIlmThread.dylib /usr/lib/libz.dylib -framework QTKit -framework QuartzCore -framework AppKit\n3rdparty dependencies:       ippicv\n\nOpenCV modules:\nTo be built:                 hal core flann imgproc ml photo video imgcodecs shape videoio highgui objdetect superres ts features2d calib3d stitching videostab python2\nDisabled:                    world\nDisabled by dependency:      -\nUnavailable:                 cudaarithm cudabgsegm cudacodec cudafeatures2d cudafilters cudaimgproc cudalegacy cudaobjdetect cudaoptflow cudastereo cudawarping cudev java python3 viz\n\nGUI:\nQT:                          NO\nCocoa:                       YES\nOpenGL support:              NO\nVTK support:                 NO\n\nMedia I/O:\nZLib:                        /usr/lib/libz.dylib (ver 1.2.5)\nJPEG:                        /usr/local/opt/jpeg/lib/libjpeg.dylib (ver 80)\nWEBP:                        /usr/local/lib/libwebp.dylib (ver encoder: 0x0202)\nPNG:                         /usr/local/lib/libpng.dylib (ver 1.6.18)\nTIFF:                        /usr/local/lib/libtiff.dylib (ver 42 - 4.0.6)\nJPEG 2000:                   NO\nOpenEXR:                     /usr/local/lib/libImath.dylib /usr/local/lib/libIlmImf.dylib /usr/local/lib/libIex.dylib /usr/local/lib/libHalf.dylib /usr/local/lib/libIlmThread.dylib (ver 2.2.0)\nGDAL:                        NO\n\nVideo I/O:\nDC1394 1.x:                  NO\nDC1394 2.x:                  NO\nFFMPEG:                      NO\ncodec:                     NO\nformat:                    NO\nutil:                      NO\nswscale:                   NO\nresample:                  NO\ngentoo-style:              NO\nGStreamer:                   NO\nOpenNI:                      NO\nOpenNI PrimeSensor Modules:  NO\nOpenNI2:                     NO\nPvAPI:                       NO\nGigEVisionSDK:               NO\nQuickTime:                   NO\nQTKit:                       YES\nV4L/V4L2:                    NO/NO\nXIMEA:                       NO\ngPhoto2:                     NO\n\nOther third-party libraries:\nUse IPP:                     8.2.1 [8.2.1]\nat:                     /tmp/opencv320151102-4718-8kzykk/opencv-3.0.0/3rdparty/ippicv/unpack/ippicv_osx\nUse IPP Async:               NO\nUse Eigen:                   YES (ver 3.2.6)\nUse TBB:                     NO\nUse OpenMP:                  NO\nUse GCD                      YES\nUse Concurrency              NO\nUse C=:                      NO\nUse pthreads for parallel for:\nNO\nUse Cuda:                    NO\nUse OpenCL:                  YES\n\nOpenCL:\nVersion:                     static\nlibraries:                   -framework OpenCL\nUse AMDFFT:                  NO\nUse AMDBLAS:                 NO\n\nPython 2:\nInterpreter:                 /usr/bin/python (ver 2.7.10)\nLibraries:                   /System/Library/Frameworks/Python.framework/Versions/2.7/lib/libpython2.7.dylib (ver 2.7.10)\nnumpy:                       /System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include (ver 1.8.0rc1)\npackages path:               lib/python2.7/site-packages\n\nPython 3:\nInterpreter:                 NO\n\nPython (for build):            /usr/bin/python\n\nJava:\nant:                         NO\nJNI:                         /System/Library/Frameworks/JavaVM.framework/Headers /System/Library/Frameworks/JavaVM.framework/Headers /System/Library/Frameworks/JavaVM.framework/Headers\nJava wrappers:               NO\nJava tests:                  NO\n\nMatlab:\nmex:                         NO\n\nDocumentation:\nDoxygen:                     NO\nPlantUML:                    NO\n\nTests and samples:\nTests:                       YES\nPerformance tests:           YES\nC/C++ Examples:              NO\n\nInstall path:                  /usr/local/Cellar/opencv3/3.0.0\n\ncvconfig.h is in:              /tmp/opencv320151102-4718-8kzykk/opencv-3.0.0/macbuild\n-----------------------------------------------------------------\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 5371284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207419166266593/picture?type=large", "display_name": "Marco Ferro", "link": "https://stackoverflow.com/users/5371284/marco-ferro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1050, "favorite_count": 1, "accepted_answer_id": 35607376, "answer_count": 1, "score": 1, "last_activity_date": 1456331983, "creation_date": 1456330156, "last_edit_date": 1456331983, "question_id": 35607167, "link": "https://stackoverflow.com/questions/35607167/how-to-know-which-flags-have-been-set-for-opencv-2-3-1-built-on-ubuntu-12-04", "title": "How to know which flags have been set for OpenCV 2.3.1 built on Ubuntu 12.04?", "body": "<p>I need to work on a computer, not mine, where OpenCV is already built. However, I would like to know which flags have been set when it was built, e.g. WITH_TBB= , WITH_CUDA= , and so on. Is there a way to get this information from some file?</p>\n"}, {"tags": ["c++", "templates", "constructor", "initializer-list"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 2, "creation_date": 1456330154, "post_id": 35607092, "comment_id": 58898545, "body": "So <code>T</code> is some fixed type, that must be constructible from <code>U</code>?"}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "edited": false, "score": 1, "creation_date": 1456330266, "post_id": 35607092, "comment_id": 58898636, "body": "Made example clearer."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1456330633, "post_id": 35607092, "comment_id": 58898911, "body": "Geez. How is this not possible. :)"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1456330765, "post_id": 35607092, "comment_id": 58899015, "body": "@Danra It <i>is</i> possible - you just pass a dummy argument template. That&#39;s not a huge burden really."}, {"owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1456331230, "post_id": 35607092, "comment_id": 58899396, "body": "@Barry Just feels like there should be syntax for this without a workaround."}], "owner": {"reputation": 8741, "user_id": 125997, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sjHUr.png?s=128&g=1", "display_name": "Danra", "link": "https://stackoverflow.com/users/125997/danra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1456330632, "answer_count": 0, "score": 4, "last_activity_date": 1456330340, "creation_date": 1456329954, "last_edit_date": 1456330340, "question_id": 35607092, "link": "https://stackoverflow.com/questions/35607092/syntax-for-specifying-template-argument-for-constructor-in-initializer-list", "closed_reason": "Duplicate", "title": "Syntax for specifying template argument for constructor in initializer list", "body": "<p>What's the syntax for specifying a template argument for a constructor in an initializer list? Note just the constructor is templated, not the entire class.</p>\n\n<p>For example:</p>\n\n<pre><code>class Member {\n    ...\n};\n\nclass SpecializedMember : public Member {\n    ...\n};\n\nclass C {\npublic:\n    template&lt;class U&gt; C() {\n        m_member = std::make_unique&lt;U&gt;();\n    }\n\n    Member&amp; getMember() { return *m_member; }\n\nprivate:\n    std::unique_ptr&lt;Member&gt; m_member;\n};\n\nclass User {\npublic:\n   User() : m_c{} // Doesn't compile; How can the template class (e.g. SpecializedMember) be specified here?\n   {\n       // ...\n   } \n\nprivate:\n   C m_c;\n};\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "geometry"], "comments": [{"owner": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "edited": false, "score": 0, "creation_date": 1456330696, "post_id": 35607088, "comment_id": 58898967, "body": "If you are good at algebra, than just go through all 6 planes of the box and check if the <a href=\"http://stackoverflow.com/questions/15688232/check-which-side-of-a-plane-points-are-on\">point in front of the plane</a> (or back of the plane.. depending on how you get the plane information)."}, {"owner": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "edited": false, "score": 0, "creation_date": 1456331173, "post_id": 35607088, "comment_id": 58899353, "body": "BTW, If you have the transformation matrix, transform the box back to the origin (so the box is aligned with the axis).. transform the point the same way and  than check if the point is inside the box with a <a href=\"http://www.miguelcasillas.com/?p=24\" rel=\"nofollow noreferrer\">simple if</a>."}, {"owner": {"reputation": 139, "user_id": 5938726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e52f976b719d2887661aeae943f00d?s=128&d=identicon&r=PG&f=1", "display_name": "Lawrence Wu", "link": "https://stackoverflow.com/users/5938726/lawrence-wu"}, "edited": false, "score": 0, "creation_date": 1456332280, "post_id": 35607088, "comment_id": 58900245, "body": "If the box is defined by OX, OY, OZ and your point is P, you can check 0 &lt;= OX dot OP &lt;= |OX|, 0 &lt;= OY dot OP &lt;= |OY|, 0 &lt;= OZ dot OP &lt;= |OZ|, or equivalently [OX OY OZ]^T OP in [0, |OX|] x [0, |OY|] x [0, |OZ|]]. As mentioned above if you already have a matrix you can use that. The dot products are just projecting onto each axis."}, {"owner": {"reputation": 31937, "user_id": 2642204, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/AIjBF.jpg?s=128&g=1", "display_name": "BartoszKP", "link": "https://stackoverflow.com/users/2642204/bartoszkp"}, "edited": false, "score": 0, "creation_date": 1456332457, "post_id": 35607088, "comment_id": 58900382, "body": "I&#39;m voting to close this question as off-topic because it&#39;s about geometry."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5693402, "user_type": "registered", "profile_image": "https://graph.facebook.com/1093964230644499/picture?type=large", "display_name": "Farshad Ghodrati", "link": "https://stackoverflow.com/users/5693402/farshad-ghodrati"}, "is_accepted": false, "score": 0, "last_activity_date": 1456345082, "creation_date": 1456345082, "answer_id": 35612221, "question_id": 35607088, "link": "https://stackoverflow.com/questions/35607088/check-if-point-inside-a-rotated-box-c/35612221#35612221", "title": "Check if point inside a rotated box C++", "body": "<p>Best way to approach this is to grab a paper and pencil and draw your rectangle with your lower_X,upper_X and your lower_Y, upper_Y. Then chose a random point in the box. Check to see what conditions make this case true. For example if your point is in the box then your point is located somewhere between your lower_X and upper_x, if that is true then check if point is also between your lower_Y and upper_y. If both cases are true then you know your point is located in the box. Hope I made it little more clear for you.</p>\n"}], "owner": {"reputation": 27, "user_id": 3813522, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f831846f3d3b1f7ff3de90f51ea5e242?s=128&d=identicon&r=PG&f=1", "display_name": "user3813522", "link": "https://stackoverflow.com/users/3813522/user3813522"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 764, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1456345082, "creation_date": 1456329950, "last_edit_date": 1456331877, "question_id": 35607088, "link": "https://stackoverflow.com/questions/35607088/check-if-point-inside-a-rotated-box-c", "title": "Check if point inside a rotated box C++", "body": "<p>I've been looking around for an algorithm that could tell me if a point is inside a box, but I still haven't found what I'm looking for.</p>\n\n<p>Basically I have a 2D rectangle <code>[Upper_X, Lower_X, Upper_Y and Lower_Y]</code> which is translated and rotated in a 3D world (I've got both world and orientation matrixes), I want to build up a box from this rectangle (in order to considerate some kind of epsilon margin while checking) and check if a point P is inside it. </p>\n\n<p>How can I accomplish this? I'm really sorry, please be patient I'm not very good in algebra and geometry stuff so just write a c++ example code it would be easier for me to understand it.</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1456330058, "post_id": 35607051, "comment_id": 58898469, "body": "This is C++. Why not limit the scope of your loop variables? <code>for(int i = 0; ...)</code>"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456330108, "post_id": 35607051, "comment_id": 58898516, "body": "<code>arr[i][j]</code> is type <code>int</code>. so the system is reading an (possibly multi-digit) integer, not only single digit (character)."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1456330337, "post_id": 35607051, "comment_id": 58898683, "body": "You need to put spaces between 0&#39;s in your text file."}, {"owner": {"reputation": 960, "user_id": 4825104, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/480331ec37c1e54c075db36b5bf80324?s=128&d=identicon&r=PG&f=1", "display_name": "Farrukh Faizy", "link": "https://stackoverflow.com/users/4825104/farrukh-faizy"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1456330772, "post_id": 35607051, "comment_id": 58899019, "body": "I edit the question , and there is a space between 0&#39;s in my file @erip"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1456331025, "post_id": 35607051, "comment_id": 58899217, "body": "So it&#39;s a <code>5x5</code> and not a <code>10x5</code>? You&#39;re either not giving us real code or not giving us a real input file."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1456331699, "post_id": 35607051, "comment_id": 58899786, "body": "Cannot reproduce. Above code with input files 5x5 of 0 and spaces give 5 lines of 5 0 before 5 lines of 5 <code>-858993460</code> without any space (which is what I expected). Are you sure you are not reading an empty file???"}, {"owner": {"reputation": 960, "user_id": 4825104, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/480331ec37c1e54c075db36b5bf80324?s=128&d=identicon&r=PG&f=1", "display_name": "Farrukh Faizy", "link": "https://stackoverflow.com/users/4825104/farrukh-faizy"}, "edited": false, "score": 0, "creation_date": 1456332359, "post_id": 35607051, "comment_id": 58900307, "body": "yes i am sure, file is not empty"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1456333083, "post_id": 35607051, "comment_id": 58900894, "body": "Are you executing the executable in the same directory that contains <code>example.txt</code>? If you see <code>a.out</code> and <code>example.txt</code> in the same directory and execute in that directory, it should work..."}, {"owner": {"reputation": 960, "user_id": 4825104, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/480331ec37c1e54c075db36b5bf80324?s=128&d=identicon&r=PG&f=1", "display_name": "Farrukh Faizy", "link": "https://stackoverflow.com/users/4825104/farrukh-faizy"}, "edited": false, "score": 0, "creation_date": 1456333623, "post_id": 35607051, "comment_id": 58901316, "body": "I solved it! Thankyou all , some file error"}], "owner": {"reputation": 960, "user_id": 4825104, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/480331ec37c1e54c075db36b5bf80324?s=128&d=identicon&r=PG&f=1", "display_name": "Farrukh Faizy", "link": "https://stackoverflow.com/users/4825104/farrukh-faizy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1456330730, "creation_date": 1456329846, "last_edit_date": 1456330730, "question_id": 35607051, "link": "https://stackoverflow.com/questions/35607051/why-file-contents-not-saving-in-2d-array", "title": "why file contents not saving in 2D array", "body": "<p>I have a file example.txt who look like this </p>\n\n<pre><code>0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n</code></pre>\n\n<p>but i am unable to read and save file contents in my array.</p>\n\n<p>Here is my code which i am trying for almost 1 hour </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cstdlib&gt;\n#include&lt;stdio.h&gt;\n#include&lt;fstream&gt;\nusing namespace std;\nint main()\n{\n    int arr[10][5];\n    int i=0,j=0;\n    ifstream in(\"example.txt\",ios::in);\n\n    if(!in)\n        {\n            cout&lt;&lt;\"File not Found\";\n        }\n    else\n    {\n        for (i = 0; i &lt; 10; i++) \n        {\n            for( j = 0;j&lt;5;j++)\n            {\n                 in &gt;&gt; arr[i][j];\n            }\n        }\n\n    }\n\n    int x=0,y=0;\n    for(x=0;x&lt;10;x++)\n    {\n        for(y=0;y&lt;5;y++)\n        {\n            cout&lt;&lt;arr[x][y];\n        }\n        cout&lt;&lt;endl;\n    }\n\n    system(\"pause\");\n    return 0;\n\n}\n</code></pre>\n\n<p>Is anything i am doing wrong , cant find out the error! </p>\n\n<p>I am getting these raw values </p>\n\n<p><a href=\"https://i.stack.imgur.com/RvdZU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RvdZU.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "pointers", "runtime-error"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1456329388, "post_id": 35606814, "comment_id": 58897941, "body": "Is this schoolwork? Because you really better use standard containers instead of raw pointer arrays."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1456329402, "post_id": 35606814, "comment_id": 58897950, "body": "Why are you using a double pointer?  From the way you are using it you should just have <code>Student* studs;</code>"}, {"owner": {"reputation": 178, "user_id": 5483301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/RmIZk.jpg?s=128&g=1", "display_name": "Isan Rivkin", "link": "https://stackoverflow.com/users/5483301/isan-rivkin"}, "edited": false, "score": 0, "creation_date": 1456329461, "post_id": 35606814, "comment_id": 58897990, "body": "It is a school work actually. I have decided to use studs** because later on deleting/adding new students will be easier :)"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 1, "creation_date": 1456329469, "post_id": 35606814, "comment_id": 58897997, "body": "You allocated an array of <code>Student*</code> with <code>new Student*[numofstuds]</code>, but those pointers are not valid."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456329510, "post_id": 35606814, "comment_id": 58898032, "body": "Be careful not to cause memory leak!"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1456329729, "post_id": 35606814, "comment_id": 58898211, "body": "This would be a good exercise to use a debugger."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1456329929, "post_id": 35606814, "comment_id": 58898365, "body": "@IsanRivkin <code>because later on..</code> Later on, you should get the chance to learn how to use containers and not double stars."}, {"owner": {"reputation": 178, "user_id": 5483301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/RmIZk.jpg?s=128&g=1", "display_name": "Isan Rivkin", "link": "https://stackoverflow.com/users/5483301/isan-rivkin"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1456330086, "post_id": 35606814, "comment_id": 58898499, "body": "@ThomasMatthews can you give me more info so I can research that ?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1456332148, "post_id": 35606814, "comment_id": 58900137, "body": "Your IDE may have a debugger for C++, so you should search the documentation of your IDE.  Otherwise search the internet for &quot;C++ debugger&quot; and also insert your platform."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1456329661, "post_id": 35606889, "comment_id": 58898146, "body": "Why even do that?  We can just change it to <code>Student* studs;</code> in the class and now we do not have to levels of pointers and two level of deletions to have to maintain."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1456329779, "post_id": 35606889, "comment_id": 58898245, "body": "@NathanOliver, well it&#39;s schoolwork, and the professor already decided that torturous use of raw <code>new</code> and <code>delete</code> is better than using standard containers. So may as well suffer on two levels."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1456330431, "post_id": 35606889, "comment_id": 58898754, "body": "But you&#39;re using <code>new</code> incorrectly in this case.  It&#39;s one thing to teach <code>new</code>, its another when you&#39;re told to use it like this.  A <i>much</i> more better use of <code>new</code> would have you build a <i>real</i> dynamic array class.  You learn <code>new</code> / <code>delete</code>, copy construction, assignment, etc. Much more educative than throwing <code>new</code> anywhere in code and hoping it works."}, {"owner": {"reputation": 1177, "user_id": 2810883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0213619d1eb8766bcc43ac24d55dcc?s=128&d=identicon&r=PG", "display_name": "John Bargman", "link": "https://stackoverflow.com/users/2810883/john-bargman"}, "edited": false, "score": 0, "creation_date": 1456330474, "post_id": 35606889, "comment_id": 58898797, "body": "Your professor needs education.  If he wants you to learn Pointers however - you may want to brush up on the fundamentals. I&#39;m about to post an answer myself that may help"}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 2, "last_activity_date": 1456329466, "creation_date": 1456329466, "answer_id": 35606889, "question_id": 35606814, "link": "https://stackoverflow.com/questions/35606814/why-do-i-have-a-run-time-error-inserting-values-into-classes-in-c/35606889#35606889", "title": "Why do I have a run-time Error inserting values into classes in C++", "body": "<p>You created only \"boxes\" to store pointers to <code>Student</code>, but you didn't store valid pointers.</p>\n\n<p>You have to create Students before using.</p>\n\n<pre><code>void Grades::insertgrades() {\n    int i;\n    cout &lt;&lt; \"How many students ?\" &lt;&lt; endl;\n    cin &gt;&gt; numofstuds;\n    studs = new Student*[numofstuds];\n    for (i = 0; i &lt; numofstuds; i++) {\n        studs[i] = new Student(); // add this line\n        studs[i]-&gt;getId();\n        studs[i]-&gt;getGrade();\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1456330121, "post_id": 35607103, "comment_id": 58898528, "body": "Read up <a href=\"http://stackoverflow.com/questions/6462985/c-stl-vector-vs-array-in-the-real-world\" title=\"c stl vector vs array in the real world\">stackoverflow.com/questions/6462985/&hellip;</a>"}, {"owner": {"reputation": 1177, "user_id": 2810883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0213619d1eb8766bcc43ac24d55dcc?s=128&d=identicon&r=PG", "display_name": "John Bargman", "link": "https://stackoverflow.com/users/2810883/john-bargman"}, "edited": false, "score": 0, "creation_date": 1456330680, "post_id": 35607103, "comment_id": 58898954, "body": "Please do also take care to delete ALL allocated memory (see my answer).  And take a look into std::shared_ptr, and the other new managed pointer-types."}], "tags": [], "owner": {"reputation": 178, "user_id": 5483301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/RmIZk.jpg?s=128&g=1", "display_name": "Isan Rivkin", "link": "https://stackoverflow.com/users/5483301/isan-rivkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1456329993, "creation_date": 1456329993, "answer_id": 35607103, "question_id": 35606814, "link": "https://stackoverflow.com/questions/35606814/why-do-i-have-a-run-time-error-inserting-values-into-classes-in-c/35607103#35607103", "title": "Why do I have a run-time Error inserting values into classes in C++", "body": "<p>Thanks for the immediate response!\nI have solved this thanks to @MikeCAT.\nI added another func to actually create a student:</p>\n\n<pre><code>Student* createstud() {\n    Student* News = new Student;\n    return News;\n}\n</code></pre>\n\n<p>And then I change my func like that:</p>\n\n<pre><code>void Grades::insertgrades() {\n    int i;\n    cout &lt;&lt; \"How many students ?\" &lt;&lt; endl;\n    cin &gt;&gt; numofstuds;\n    studs = new Student*[numofstuds];\n    for (i = 0; i &lt; numofstuds; i++) {\n        **studs[i] = createstud();**\n        studs[i]-&gt;getId();\n        studs[i]-&gt;getGrade();\n    }\n}\n</code></pre>\n\n<p>Not sure why is it bad idea to create Students** array, since I am planning to delete students in the future so it is easier to change pointers inside the array, no ?</p>\n"}, {"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1456330743, "post_id": 35607308, "comment_id": 58899000, "body": "I&#39;d postulate the <code>std::unique_ptr</code> is a better fit here. There is no sharing of ownership."}, {"owner": {"reputation": 178, "user_id": 5483301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/RmIZk.jpg?s=128&g=1", "display_name": "Isan Rivkin", "link": "https://stackoverflow.com/users/5483301/isan-rivkin"}, "edited": false, "score": 0, "creation_date": 1456330747, "post_id": 35607308, "comment_id": 58899007, "body": "I still don&#39;t know what &lt;vector&gt; is or how to use that library, I did forget to delete the pointers thanks for reminding me that, also thanks for the code snippets I am going to study right now that code."}, {"owner": {"reputation": 1177, "user_id": 2810883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0213619d1eb8766bcc43ac24d55dcc?s=128&d=identicon&r=PG", "display_name": "John Bargman", "link": "https://stackoverflow.com/users/2810883/john-bargman"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1456331321, "post_id": 35607308, "comment_id": 58899478, "body": "@StoryTeller using a unique_ptr in this situation isn&#39;t easily done - Remember that unique_ptr isn&#39;t copyable. As such it cannot be stored in a stl container!"}, {"owner": {"reputation": 1177, "user_id": 2810883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0213619d1eb8766bcc43ac24d55dcc?s=128&d=identicon&r=PG", "display_name": "John Bargman", "link": "https://stackoverflow.com/users/2810883/john-bargman"}, "reply_to_user": {"reputation": 178, "user_id": 5483301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/RmIZk.jpg?s=128&g=1", "display_name": "Isan Rivkin", "link": "https://stackoverflow.com/users/5483301/isan-rivkin"}, "edited": false, "score": 0, "creation_date": 1456331425, "post_id": 35607308, "comment_id": 58899568, "body": "@IsanRivkin The vector is basically an array that can be resized! Something c++ without the STL doesn&#39;t have.   What your tutor is trying to do is teach you how to dynamically allocate memory (I&#39;m actually going to amend my answer about that in a moment). Allocating memory with raw pointers is how you dynamically-create an array without the use of std::vector."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1456331428, "post_id": 35607308, "comment_id": 58899571, "body": "@JohnBargman, actually it can. You just have to remember to move it when inserting. STL containers can handle <code>std::unique_ptr</code> quite well nowadays. It&#39;s not c++03 with <code>boost::unique_ptr</code> anymore :)"}, {"owner": {"reputation": 1177, "user_id": 2810883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0213619d1eb8766bcc43ac24d55dcc?s=128&d=identicon&r=PG", "display_name": "John Bargman", "link": "https://stackoverflow.com/users/2810883/john-bargman"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1456331928, "post_id": 35607308, "comment_id": 58899955, "body": "@StoryTeller Surely it doesn&#39;t matter if I std::move it into the container. As if the container resizes, or moves it will use the copy-constructor?"}, {"owner": {"reputation": 1177, "user_id": 2810883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0213619d1eb8766bcc43ac24d55dcc?s=128&d=identicon&r=PG", "display_name": "John Bargman", "link": "https://stackoverflow.com/users/2810883/john-bargman"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1456332055, "post_id": 35607308, "comment_id": 58900060, "body": "@StoryTeller I stand corrected! I hadn&#39;t taken note that STL containers now handle movable objects. Thank you for the update."}], "tags": [], "owner": {"reputation": 1177, "user_id": 2810883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0213619d1eb8766bcc43ac24d55dcc?s=128&d=identicon&r=PG", "display_name": "John Bargman", "link": "https://stackoverflow.com/users/2810883/john-bargman"}, "is_accepted": true, "score": 2, "last_activity_date": 1456331861, "last_edit_date": 1456331861, "creation_date": 1456330558, "answer_id": 35607308, "question_id": 35606814, "link": "https://stackoverflow.com/questions/35606814/why-do-i-have-a-run-time-error-inserting-values-into-classes-in-c/35607308#35607308", "title": "Why do I have a run-time Error inserting values into classes in C++", "body": "<p>MikeCAT's answer is correct, however please take note that what you are doing is VERY likely to cause memory leaks.\nObviously I haven't seen your class destructor - However unless you are carefully iterating over every pointer in Studs, calling delete [], then calling delete [] on Studs - You will end up in a big pile of leaked memory.</p>\n\n<p>I'm going to assume from your use of the language you are more familair with reference counted languages like VisualBasic - in C++ allocating Memory with New provides no assurance of garbage collection.\nAs your not storing <code>numberofstuds</code> you will never be able to free the memory allocated in MikeCAT's answer.</p>\n\n<p>If you can make use of C++11, consider the following code snippet for a memory-safe way to handle this problem.</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;vector&gt;\nclass Student;\nclass Grades {\n    int numofstuds;\n    std::vector&lt;std::shared_ptr&lt;Student&gt; &gt; studs;\npublic:\n    void insertgrades();\n    void printgrades();\n};\n</code></pre>\n\n<p>and the insert grades routine:</p>\n\n<pre><code>void Grades::insertgrades() {\n    int i;\n    std::cout &lt;&lt; \"How many students ?\" &lt;&lt; std::endl;\n    std::cin &gt;&gt; numofstuds;\n    studs.resize(numofstuds);\n    for (auto Each_Student : studs) \n    {\n        Each_Student.reset(new student())\n        Each_Student-&gt;getId();\n        Each_Student-&gt;getGrade();\n    }\n}\n</code></pre>\n\n<p>If however you <em>must</em> use raw pointers (older compiler, or <em>poor grading body</em>), please consider the following destructor in addition to MadCat's answer</p>\n\n<pre><code>~Grades()\n{\n    for (i = 0; i &lt; numofstuds; i++) \n    {\n        delete studs[i];\n    }\ndelete [] studs;\n}\n</code></pre>\n\n<h1>[/edit]</h1>\n\n<p>I'd like to add that your approach to storing the data isn't <em>wrong</em> however you can do it much more simply.\nRather than creating an array of pointers to store the data - you can allocate an array of the objects instead.</p>\n\n<pre><code>class Grades \n{\n    //snipped out everything else\n    Student* studs;\n}\nvoid Grades::insertgrades() \n{\n    int i;\n    cout &lt;&lt; \"How many students ?\" &lt;&lt; endl;\n    cin &gt;&gt; numofstuds;\n    studs = new Student[numofstuds];\n    for (i = 0; i &lt; numofstuds; i++) {\n        studs[i].getId();\n        studs[i].getGrade();\n    }\n}\n</code></pre>\n\n<p>In C++ a pointer is \"The address in memory of data\", an array is \"the address in memory of a <em>set</em> of data\", as such the following code should help you comprehend why the above works.</p>\n\n<pre><code>char A;\n//the following pointer will *point to the location of A*\nchar * A_p = &amp; A;\nchar Array[100];\n//this pointer will *point to the data set Array*\nchar * Array_p = Array;\n//this pointer *points to a newly allocated set of data*\nchar * B_p = new char [100];\n//indeed, we can also do this \n\n//Set A to first character of array\nA = *Array_p\nA = Array_P[0]\nA = *Array\nA = Array[0]\n//all of these do the same thing, as *when using an array, you're really using a pointer\n\ndelete [] B_P;\n</code></pre>\n"}], "owner": {"reputation": 178, "user_id": 5483301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/RmIZk.jpg?s=128&g=1", "display_name": "Isan Rivkin", "link": "https://stackoverflow.com/users/5483301/isan-rivkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 35607308, "answer_count": 3, "score": 0, "last_activity_date": 1456331861, "creation_date": 1456329308, "question_id": 35606814, "link": "https://stackoverflow.com/questions/35606814/why-do-i-have-a-run-time-error-inserting-values-into-classes-in-c", "title": "Why do I have a run-time Error inserting values into classes in C++", "body": "<p>I would like some help in getting this sorted out.\nI have a class named Grades that contains a pointer to class Student.</p>\n\n<pre><code>class Grades {\n    int numofstuds;\n    Student** studs;\npublic:\n    void insertgrades();\n    void printgrades();\n};\n\nclass Student {\n    int id;\n    int grade;\npublic:\n    void getId();\n    void getGrade();\n    void printgrade();\n};\n</code></pre>\n\n<p>I am trying to insert students into the array studs:</p>\n\n<pre><code>void Grades::insertgrades() {\n    int i;\n    cout &lt;&lt; \"How many students ?\" &lt;&lt; endl;\n    cin &gt;&gt; numofstuds;\n    studs = new Student*[numofstuds];\n    for (i = 0; i &lt; numofstuds; i++) {\n        studs[i]-&gt;getId();\n        studs[i]-&gt;getGrade();\n    }\n}\n</code></pre>\n\n<p>'insertgrades' is an inner function inside the class Grades.\ngetId and getGrade are inner functions inside the class 'Student', they work well I have checked them:</p>\n\n<pre><code>void Student::getId() {\n    do {\n        cout &lt;&lt; \"Enter id\" &lt;&lt; endl;\n        cin &gt;&gt; id;\n    } while (id&lt;0);\n}\nvoid Student::getGrade() {\n    cout &lt;&lt; \"Enter grade:\" &lt;&lt; endl;\n    cin &gt;&gt; grade;\n}\n</code></pre>\n\n<p>this is the main:</p>\n\n<pre><code>int main() {\n    Grades a;\n    a.insertgrades();\n    return 0;\n}\n</code></pre>\n\n<p>As soon as I am trying to insert values into Id or grades I immediately have a run-time error.\nPlease help!\nIsan.</p>\n"}, {"tags": ["c++", "c++11", "move", "stdvector", "move-semantics"], "comments": [{"owner": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "edited": false, "score": 0, "creation_date": 1456329615, "post_id": 35606813, "comment_id": 58898107, "body": "What do you want to achieve? Omit a copy of the appended elements? That&#39;s not possible as each vector uses its own internal, continuous storage on the heap."}, {"owner": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "edited": false, "score": 4, "creation_date": 1456329678, "post_id": 35606813, "comment_id": 58898161, "body": "Is this what you mean? <a href=\"http://stackoverflow.com/questions/10720122/is-there-a-standard-way-of-moving-a-range-into-a-vector\" title=\"is there a standard way of moving a range into a vector\">stackoverflow.com/questions/10720122/&hellip;</a>"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 45749, "user_id": 21974, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61d62f97373c96dea8ad1e774b127cdd?s=128&d=identicon&r=PG", "display_name": "ypnos", "link": "https://stackoverflow.com/users/21974/ypnos"}, "edited": false, "score": 0, "creation_date": 1456329683, "post_id": 35606813, "comment_id": 58898164, "body": "@ypnos sometimes objects are movable but not copiable"}], "owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 503, "favorite_count": 0, "closed_date": 1456329783, "answer_count": 0, "score": 0, "last_activity_date": 1456329306, "creation_date": 1456329306, "question_id": 35606813, "link": "https://stackoverflow.com/questions/35606813/stdvector-append-with-stdmove", "closed_reason": "Duplicate", "title": "std::vector append with std::move", "body": "<p>Is it possible to append to an <code>std::vector</code> another <code>std::vector</code> by moving the second into the first?\nIf so, how?</p>\n\n<p>I'm only aware of this syntax to perform the append operation:</p>\n\n<pre><code>vec_a.insert( vec_a.end(), vec_b.begin( ), vec_b.end( ) );\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++14", "type-deduction"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1456330722, "post_id": 35606753, "comment_id": 58898985, "body": "The syntax <code>std::declval&lt;T&gt;.x</code> can be used only with an object, not with a type."}, {"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1456330880, "post_id": 35606753, "comment_id": 58899097, "body": "@RSahu: That&#39;s right. I didn&#39;t notice that. Thanks. Is it possible, by any means, to find out the type of a member of a passed object at compile time then?"}, {"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1456331100, "post_id": 35606753, "comment_id": 58899294, "body": "I tried to use <code>std::is_arithmetic&lt;typename T::x&gt;::value</code>, it compiles, but it doesn&#39;t seem to do the work."}, {"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1456331991, "post_id": 35606753, "comment_id": 58900000, "body": "ofc <code>typename T::x</code> refers to a type, not an object. Still haven&#39;t solved this."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1456332157, "post_id": 35606753, "comment_id": 58900149, "body": "<code>decltype(std::declval&lt;T&gt;().x)</code>, or <code>decltype(T::x)</code>."}, {"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1456332594, "post_id": 35606753, "comment_id": 58900484, "body": "nice, it works @T.C. !"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1456332949, "post_id": 35606753, "comment_id": 58900783, "body": "@T.C. The latter may unintentionally give false negatives for C++17 classes with operator dot overloaded. :o)"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1456334309, "post_id": 35606753, "comment_id": 58901782, "body": "Well that&#39;s the first time I&#39;ve seen that error. o_O"}], "answers": [{"comments": [{"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "edited": false, "score": 0, "creation_date": 1456333105, "post_id": 35608139, "comment_id": 58900918, "body": "I actually do want to ensure that they&#39;re arithemtic. I need to negate their values. It doesn&#39;t make sense if they are not arithemtic. Or am I missing something here?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "edited": false, "score": 0, "creation_date": 1456333806, "post_id": 35608139, "comment_id": 58901415, "body": "@Dundee: complex/rational numbers are not <i>arithmetic</i>, but negate them makes sense."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "edited": false, "score": 0, "creation_date": 1456333824, "post_id": 35608139, "comment_id": 58901430, "body": "@Dundee The unary operator <code>-</code> can be overloaded."}, {"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1456334299, "post_id": 35608139, "comment_id": 58901775, "body": "@Jarod42: You&#39;re right. Fortunately, these do not fit into my use case."}, {"owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "edited": false, "score": 0, "creation_date": 1456334369, "post_id": 35608139, "comment_id": 58901836, "body": "@Columbo: Yes, I know. It has more to do with how I want the library to be used. Anyway, thanks for providing both options. You&#39;re amazing :)"}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 3, "last_activity_date": 1456334924, "last_edit_date": 1456334924, "creation_date": 1456332519, "answer_id": 35608139, "question_id": 35606753, "link": "https://stackoverflow.com/questions/35606753/deduce-type-of-a-member-of-a-template-argument-object/35608139#35608139", "title": "Deduce type of a member of a template argument object", "body": "<p>I take it that you don't actually want to enforce that they're arithmetic. You want that the crucial expressions in the function template's body are well-formed. In that case, go for something along the lines of </p>\n\n<pre><code>template &lt;typename T&gt;\nauto operator-(const T&amp; vector)\n  -&gt; decltype(void(x - vector.x), void(y - vector.y), vector)\n{/* ... */}\n</code></pre>\n\n<p>If you'd rather stick to a correct version of your code, substituting <code>decltype(std::declval&lt;T&gt;().x)</code> or <code>decltype(T::x)</code> for <code>std::declval&lt;T&gt;.x</code> (ditto for <code>y</code>) is sufficient:</p>\n\n<pre><code>template &lt;typename T,\n  typename = std::enable_if_t&lt;std::is_arithmetic&lt;decltype(T::x)&gt;{}&gt;,\n  typename = std::enable_if_t&lt;std::is_arithmetic&lt;decltype(T::x)&gt;{}&gt;&gt;\nT operator-(const T vector)\n{}\n</code></pre>\n"}], "owner": {"reputation": 2147, "user_id": 1312522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3eb4062852caa6aa3d9bd70fd44c5f8?s=128&d=identicon&r=PG&f=1", "display_name": "sjaustirni", "link": "https://stackoverflow.com/users/1312522/sjaustirni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 35608139, "answer_count": 1, "score": 3, "last_activity_date": 1456334924, "creation_date": 1456329178, "last_edit_date": 1456334649, "question_id": 35606753, "link": "https://stackoverflow.com/questions/35606753/deduce-type-of-a-member-of-a-template-argument-object", "title": "Deduce type of a member of a template argument object", "body": "<p>Having this function:</p>\n\n<pre><code>template &lt;typename T&gt;\nT operator-(const T vector)\n{}\n</code></pre>\n\n<p>I want to enforce that T has <code>x</code> and <code>y</code> members, and that they are arithmetic.\nI was trying to do it via <code>std::declval&lt;T&gt;</code>:</p>\n\n<pre><code>template &lt;typename T,\n  typename = typename \n    std::enable_if&lt;std::is_arithmetic&lt;std::declval&lt;T&gt;.x&gt;::value&gt;::type,\n  typename = typename \n    std::enable_if&lt;std::is_arithmetic&lt;std::declval&lt;T&gt;.y&gt;::value&gt;::type&gt;\nT operator-(const T vector)\n{}\n</code></pre>\n\n<p>But all I get is, that the type cannot be deduced: <em><code>error: insufficient contextual information to determine type</code></em>. Can the type of a member of template parameter object be deduced at all?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1456329139, "post_id": 35606721, "comment_id": 58897735, "body": "How do you use your compiler? Please show us the command line."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1456329185, "post_id": 35606721, "comment_id": 58897765, "body": "If you&#39;re building a DLL, why is the name of the output file <code>collect2.exe</code>?"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1456329256, "post_id": 35606721, "comment_id": 58897832, "body": "@PaulMcKenzie I guess <code>collect2.exe</code> is not the name of the output file but the name of the tool."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1456329261, "post_id": 35606721, "comment_id": 58897838, "body": "Also, library generally refers to code you statically link to vs. shared library/DLL which is loaded dynamically at runtime and the necessary code may be different as well as the file extension."}, {"owner": {"reputation": 1, "user_id": 5975461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92aeee3e56c72715e4633e2f53d1c0f6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Cros.", "link": "https://stackoverflow.com/users/5975461/sam-cros"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456329869, "post_id": 35606721, "comment_id": 58898311, "body": "@MikeCAT Updated the post with the full logs from the attempted compile. Also, if it&#39;s at all important, I&#39;m using the NetBeans IDE."}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1456329927, "post_id": 35606721, "comment_id": 58898363, "body": "I guess you should set the &quot;project option&quot; of your IDE to have it build a DLL."}], "owner": {"reputation": 1, "user_id": 5975461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92aeee3e56c72715e4633e2f53d1c0f6?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Cros.", "link": "https://stackoverflow.com/users/5975461/sam-cros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1456329383, "answer_count": 0, "score": 0, "last_activity_date": 1456331064, "creation_date": 1456329109, "last_edit_date": 1495541736, "question_id": 35606721, "link": "https://stackoverflow.com/questions/35606721/undefined-reference-to-winmain16-mingw", "closed_reason": "Duplicate", "title": "undefined reference to `WinMain@16&#39; MinGW", "body": "<p>Recently started trying to create DLLs in C++ and have been trying to create a generic user prompt class for command line input. When I try to compile the code I get the following error in the .cpp:   </p>\n\n<pre><code>c:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../libmingw32.a(main.o):(.text.startup+0xa7): undefined reference to `WinMain@16'\ncollect2.exe: error: ld returned 1 exit status\nmake.exe\": *** [userPrompt] Error 1\n</code></pre>\n\n<p>Doing some reading on the error led me to believe that this occurs when there's no main function in the file -- If this is the case how do I avoid this when trying to make a .cpp file for the purpose of putting it in a library?</p>\n\n<p>My current compiler is MinGW and my current IDE is NetBeans.</p>\n\n<p><strong>EDIT:</strong> As requested, full command line logs for the compile\nAdditionally, <a href=\"https://stackoverflow.com/questions/5259714/undefined-reference-to-winmain16/5260237#5260237\">undefined reference to `WinMain@16'</a> (As linked in the answer posted as a duplicate) implies in the answer that a main or WinMain is required somewhere in a .cpp file for it to compile, a part of the question asked above (And I'm sorry if this was unclear) is if that is actually the case, and if it is not how do I circumvent this restriction?</p>\n\n<pre><code>g++     userPrompt.cpp   -o userPrompt\nuserPrompt.cpp:33:54: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11 [enabled by default]\n         const string strCommands[2] = {\"HELP\", \"QUIT\"}; // Array of all valid commands.\n                                                      ^\nuserPrompt.cpp:34:92: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11 [enabled by default]\n         const string strHelpText[2] = {\"to re-list these commands.\", \"to exit this prompt.\"}; // Parallel array of help texts for valid commands.\n                                                                                            ^\nuserPrompt.cpp:38:17: warning: non-static data member initializers only available with -std=c++11 or -std=gnu++11 [enabled by default]\n                 \"==================================================\\n\";\n                 ^\nuserPrompt.cpp:33:54: warning: extended initializer lists only available with -std=c++11 or -std=gnu++11 [enabled by default]\n         const string strCommands[2] = {\"HELP\", \"QUIT\"}; // Array of all valid commands.\n                                                      ^\nuserPrompt.cpp:34:92: warning: extended initializer lists only available with -std=c++11 or -std=gnu++11 [enabled by default]\n         const string strHelpText[2] = {\"to re-list these commands.\", \"to exit this prompt.\"}; // Parallel array of help texts for valid commands.\n                                                                                            ^\nc:/mingw/bin/../lib/gcc/mingw32/4.8.1/../../../libmingw32.a(main.o):(.text.startup+0xa7): undefined reference to `WinMain@16'\ncollect2.exe: error: ld returned 1 exit status\nmake.exe\": *** [userPrompt] Error 1\n\nBUILD FAILED (exit value 2, total time: 504ms)\n</code></pre>\n"}, {"tags": ["c++", "arrays", "char", "strncpy"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456329069, "post_id": 35606670, "comment_id": 58897669, "body": "Characters like <code>\u020d</code> should be represented as multiple bytes and it will be broken with simple byte-by-byte reverse."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1456329249, "post_id": 35606670, "comment_id": 58897825, "body": "It&#39;s impossible to say anything for certain without seeing the actual <code>reverse</code> function, but doing <code>strncpy(text, text2, 80)</code> will most certainly lead to <i>undefined behavior</i> in some edge cases."}, {"owner": {"reputation": 4352, "user_id": 2483038, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cdaf35803110c235e3122cb85c113131?s=128&d=identicon&r=PG&f=1", "display_name": "blazs", "link": "https://stackoverflow.com/users/2483038/blazs"}, "edited": false, "score": 0, "creation_date": 1456329363, "post_id": 35606670, "comment_id": 58897920, "body": "It seems you&#39;re using <code>strncpy</code> in a wrong way: you probably want to copy <code>text</code> into <code>text2</code>, not the other way around."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1456329374, "post_id": 35606670, "comment_id": 58897932, "body": "Talking about your <code>strncpy</code> call, I think you need to <a href=\"http://en.cppreference.com/w/cpp/string/byte/strncpy\" rel=\"nofollow noreferrer\">read more about it</a>."}, {"owner": {"reputation": 93, "user_id": 1670112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c6f0b6d2b2a51e3dd42ee13185d5e6cf?s=128&d=identicon&r=PG", "display_name": "Caleb Lawrence", "link": "https://stackoverflow.com/users/1670112/caleb-lawrence"}, "edited": false, "score": 0, "creation_date": 1456329407, "post_id": 35606670, "comment_id": 58897953, "body": "Oh, for some reason I thought that was something c++ did. Weird, okay thanks."}, {"owner": {"reputation": 93, "user_id": 1670112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c6f0b6d2b2a51e3dd42ee13185d5e6cf?s=128&d=identicon&r=PG", "display_name": "Caleb Lawrence", "link": "https://stackoverflow.com/users/1670112/caleb-lawrence"}, "edited": false, "score": 0, "creation_date": 1456329522, "post_id": 35606670, "comment_id": 58898036, "body": "Oh yeah I switched the order of text and text2 with the strncpy and it worked! Thanks a lot guys. :)"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 1670112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c6f0b6d2b2a51e3dd42ee13185d5e6cf?s=128&d=identicon&r=PG", "display_name": "Caleb Lawrence", "link": "https://stackoverflow.com/users/1670112/caleb-lawrence"}, "edited": false, "score": 0, "creation_date": 1456329652, "post_id": 35606926, "comment_id": 58898136, "body": "Yeah, I&#39;m not supposed to use a function. Thanks so much for the help!"}, {"owner": {"reputation": 93, "user_id": 1670112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c6f0b6d2b2a51e3dd42ee13185d5e6cf?s=128&d=identicon&r=PG", "display_name": "Caleb Lawrence", "link": "https://stackoverflow.com/users/1670112/caleb-lawrence"}, "edited": false, "score": 0, "creation_date": 1456329703, "post_id": 35606926, "comment_id": 58898175, "body": "At least I think that&#39;s a function you gave."}, {"owner": {"reputation": 4352, "user_id": 2483038, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cdaf35803110c235e3122cb85c113131?s=128&d=identicon&r=PG&f=1", "display_name": "blazs", "link": "https://stackoverflow.com/users/2483038/blazs"}, "reply_to_user": {"reputation": 93, "user_id": 1670112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c6f0b6d2b2a51e3dd42ee13185d5e6cf?s=128&d=identicon&r=PG", "display_name": "Caleb Lawrence", "link": "https://stackoverflow.com/users/1670112/caleb-lawrence"}, "edited": false, "score": 0, "creation_date": 1456330935, "post_id": 35606926, "comment_id": 58899137, "body": "It&#39;s a function but you can use similar code inside the main as well."}], "tags": [], "owner": {"reputation": 4352, "user_id": 2483038, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/cdaf35803110c235e3122cb85c113131?s=128&d=identicon&r=PG&f=1", "display_name": "blazs", "link": "https://stackoverflow.com/users/2483038/blazs"}, "is_accepted": true, "score": 2, "last_activity_date": 1456329552, "creation_date": 1456329552, "answer_id": 35606926, "question_id": 35606670, "link": "https://stackoverflow.com/questions/35606670/reversing-char-array/35606926#35606926", "title": "Reversing char array", "body": "<p>It seems you're using <code>strncpy</code> in a wrong way: you probably want to copy <code>text</code> into <code>text2</code>, not the other way around.</p>\n\n<p>There's a much simpler way to test whether a string is a palindrome, namely:</p>\n\n<pre><code>bool is_palindrome(const char* s, size_t n) {\n  size_t i, j;\n\n  i = 0, j = n-1;\n  while (i &lt; j &amp;&amp; s[i++] == s[j--])\n    ;\n  return i &gt;= j;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "is_accepted": false, "score": 0, "last_activity_date": 1456329858, "last_edit_date": 1456329858, "creation_date": 1456329735, "answer_id": 35606998, "question_id": 35606670, "link": "https://stackoverflow.com/questions/35606670/reversing-char-array/35606998#35606998", "title": "Reversing char array", "body": "<p>Typically you'll see this reversal technique for <code>char*</code>:</p>\n\n<pre><code>void reverse(char* s) {\n    if(!s) return;\n    size_t n = strlen(s);\n    for(size_t i = 0; i &lt; n/2; ++i) {\n      char tmp = s[i];\n      s[i] = s[n - i - 1];\n      s[n - i - 1] = tmp;\n    }\n}\n</code></pre>\n\n<p>This will not work, however, with non-ASCII characters. The reason is that non-ASCII characters require multiple bytes to represent.</p>\n\n<p>You will need to use <a href=\"https://en.wikipedia.org/wiki/Wide_character\" rel=\"nofollow\">wide characters</a> to handle multi-byte codepoints, but the logic should follow above.</p>\n"}, {"tags": [], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "is_accepted": false, "score": 1, "last_activity_date": 1456331442, "creation_date": 1456331442, "answer_id": 35607686, "question_id": 35606670, "link": "https://stackoverflow.com/questions/35606670/reversing-char-array/35607686#35607686", "title": "Reversing char array", "body": "<p>Why not use <code>std::vector&lt;char&gt;</code> and <code>std::reverse</code> from <code>&lt;algorithm&gt;</code> to handle your problem?<br></p>\n\n<p>I would do something like below: <br>(note that I'm using C++11 range-based for loop and <code>auto</code> which you can change to a regular for loop and use <code>std::string line</code> if you don't have a compiler supporting this).</p>\n\n<pre><code>int main()\n{\n    cout &lt;&lt; \"Please give me a line of text to examine: \";\n    auto line = \"\"s;\n    getline(cin, line);\n\n    // Push back every character to the vector\n    vector&lt;char&gt; vtext;\n    for (const auto &amp;elem : line)\n        vtext.push_back(elem);\n\n    // Create a copy of the vector&lt;char&gt; and reverse the copy\n    vector&lt;char&gt; vtext_reversed{vtext};\n    reverse(begin(vtext_reversed), end(vtext_reversed));\n\n    // Print the line reversed\n    cout &lt;&lt; \"\\nThis is the line reversed: \";\n    for (const auto &amp;elem : vtext_reversed)\n        cout &lt;&lt; elem;\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 1670112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c6f0b6d2b2a51e3dd42ee13185d5e6cf?s=128&d=identicon&r=PG", "display_name": "Caleb Lawrence", "link": "https://stackoverflow.com/users/1670112/caleb-lawrence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 35606926, "answer_count": 3, "score": -3, "last_activity_date": 1456331442, "creation_date": 1456328988, "last_edit_date": 1456329371, "question_id": 35606670, "link": "https://stackoverflow.com/questions/35606670/reversing-char-array", "title": "Reversing char array", "body": "<p>When I print out text2 I see that it is definitely not the reverse of the string I gave it and I'm not sure why that is. When I put in \"test\" I get stuff like \"\u020d\\2200+\". Can I use strncpy on char arrays? Maybe it needs to be done with a loop - not sure. Any help would be appreciated. :)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n\nusing namespace std;\n\nint main()\n{\n    char text[79], text2[79];\n    bool input = true;\n\n    while (input) {\n        cout &lt;&lt; \"Please give me a line of text to examine: \";\n        cin.getline(text, 79);\n\n        for(int i = 0; i &lt; strlen(text); i++ )\n            cout &lt;&lt; text[i];\n\n        // test to see if it is a palindrome\n        strncpy(text, text2, 80);\n\n        reverse(text2, text2 + strlen(text2));\n\n        printf(\"%s\", text2);  `// when I print this out I get something odd`\n\n        if (strcmp(text, text2) == 0)\n            cout &lt;&lt; \" is a palindrome!\" &lt;&lt; endl;\n        else\n            cout &lt;&lt; \" is not a palindrome.\" &lt;&lt; endl;\n\n        if (strcmp(text, \"END\") == 0)\n            input = false;\n         else\n            cout &lt;&lt; \"\\ntype END to exit the program\" &lt;&lt; endl;\n\n    } // end while loop\n} // end main\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers", "initialization", "operators"], "comments": [{"owner": {"reputation": 656, "user_id": 5573683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58e322915baddd645b3ca4c9205f25ba?s=128&d=identicon&r=PG&f=1", "display_name": "Yuriy Orlov", "link": "https://stackoverflow.com/users/5573683/yuriy-orlov"}, "edited": false, "score": 1, "creation_date": 1456329152, "post_id": 35606590, "comment_id": 58897744, "body": "note, <code>*(x++1)</code> invalid because <code>++</code> is a increment operator, expression parsed as <code>*((x++)1)</code>"}, {"owner": {"reputation": 900, "user_id": 1423320, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cf5fd7800794cb4934ffd7174dda7fd7?s=128&d=identicon&r=PG", "display_name": "rahul.deshmukhpatil", "link": "https://stackoverflow.com/users/1423320/rahul-deshmukhpatil"}, "edited": false, "score": 0, "creation_date": 1456329324, "post_id": 35606590, "comment_id": 58897885, "body": "@utkarsh867: what is use of specifying array capacity explicitly to be +ve?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1456329464, "post_id": 35606590, "comment_id": 58897991, "body": "Note that <code>*(x + + 1)</code> <b>is</b> valid. The important rule here is that the transformation works at the <b>token</b> level, not the <b>character</b> level."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 900, "user_id": 1423320, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cf5fd7800794cb4934ffd7174dda7fd7?s=128&d=identicon&r=PG", "display_name": "rahul.deshmukhpatil", "link": "https://stackoverflow.com/users/1423320/rahul-deshmukhpatil"}, "edited": false, "score": 0, "creation_date": 1456329504, "post_id": 35606590, "comment_id": 58898024, "body": "@rahul.deshmukhpatil As I explained in my answer, the extraneous <code>+</code> is simply acting as the Unary <code>+</code> operator."}, {"owner": {"reputation": 900, "user_id": 1423320, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/cf5fd7800794cb4934ffd7174dda7fd7?s=128&d=identicon&r=PG", "display_name": "rahul.deshmukhpatil", "link": "https://stackoverflow.com/users/1423320/rahul-deshmukhpatil"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1456329606, "post_id": 35606590, "comment_id": 58898102, "body": "@xirema: sorry, what I want to say is , array capacity is always going to be +ve at the time of definition."}], "answers": [{"comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 2, "creation_date": 1456329124, "post_id": 35606629, "comment_id": 58897722, "body": "Very fine blackets. I almost got the same ones."}, {"owner": {"reputation": 87, "user_id": 5863494, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-csfG2PXhvNs/AAAAAAAAAAI/AAAAAAAABNI/PcNvjzKY-Sc/photo.jpg?sz=128", "display_name": "utkarsh867", "link": "https://stackoverflow.com/users/5863494/utkarsh867"}, "edited": false, "score": 0, "creation_date": 1456329580, "post_id": 35606629, "comment_id": 58898085, "body": "Thanks a lot @MikeCAT."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 10, "last_activity_date": 1456346763, "last_edit_date": 1456346763, "creation_date": 1456328882, "answer_id": 35606629, "question_id": 35606590, "link": "https://stackoverflow.com/questions/35606590/c-int-x30-is-a-valid-declaration/35606629#35606629", "title": "C++: int x[+30] is a valid declaration?", "body": "<p><code>x[n]</code> means <code>*((x)+(n))</code> (note the blackets) and <code>x[+1]</code> means <code>*((x)+(+1))</code>. This is valid.</p>\n\n<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf\" rel=\"nofollow\">N3337</a> 5.2.1 Subscripting</p>\n\n<blockquote>\n  <p>The expression E1[E2] is identical (by definition) to *((E1)+(E2))</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 1, "creation_date": 1456329223, "post_id": 35606637, "comment_id": 58897803, "body": "I don&#39;t think unary plus is converted to <code>operator+</code> for an <code>int</code> argument, it&#39;s a built-in operator."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1456329310, "post_id": 35606637, "comment_id": 58897873, "body": "@TartanLlama For all intents and purposes, it&#39;s treated as such. You can write expressions like <code>int n = 8 + +9;</code> and the compiler will accept it and parse it as <code>8 + 9</code>."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 1, "creation_date": 1456329564, "post_id": 35606637, "comment_id": 58898067, "body": "But it has nothing to do with <code>operator+</code>, which is only considered if the argument is a class or enumeration type. The <code>+</code> operator is not the same thing as <code>operator+</code>."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 7, "last_activity_date": 1456329225, "last_edit_date": 1456329225, "creation_date": 1456328901, "answer_id": 35606637, "question_id": 35606590, "link": "https://stackoverflow.com/questions/35606590/c-int-x30-is-a-valid-declaration/35606637#35606637", "title": "C++: int x[+30] is a valid declaration?", "body": "<p>The <code>+</code> Plus symbol can act as a Unary Operator. It usually has no effect, but the consequence is that it gets removed before the number is resolved. For example:</p>\n\n<pre><code>int x[+30];\n</code></pre>\n\n<p>Is converted to</p>\n\n<pre><code>int x[operator+(30)];\n</code></pre>\n\n<p>Which then becomes</p>\n\n<pre><code>int x[30];\n</code></pre>\n\n<p>Thus, this expression</p>\n\n<pre><code>x[+1] = 0;\n</code></pre>\n\n<p>Would simply resolve as </p>\n\n<pre><code>x[1] = 0;\n</code></pre>\n\n<p>It wouldn't resolve as *(x++1), especially since that's not valid syntax in c++.</p>\n"}], "owner": {"reputation": 87, "user_id": 5863494, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-csfG2PXhvNs/AAAAAAAAAAI/AAAAAAAABNI/PcNvjzKY-Sc/photo.jpg?sz=128", "display_name": "utkarsh867", "link": "https://stackoverflow.com/users/5863494/utkarsh867"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 35606629, "answer_count": 2, "score": 5, "last_activity_date": 1456346763, "creation_date": 1456328780, "question_id": 35606590, "link": "https://stackoverflow.com/questions/35606590/c-int-x30-is-a-valid-declaration", "title": "C++: int x[+30] is a valid declaration?", "body": "<p>I have been studying arrays these days. I have come across a declaration of an array and initialization of its element in this manner :</p>\n\n<pre><code>int x[+30];\nx[+1]=0;\n</code></pre>\n\n<p>This is confusing me a little. I have the concept in mind that when we write:</p>\n\n<pre><code>x[n]=0;\n</code></pre>\n\n<p>Then it means:</p>\n\n<pre><code>*(x+n)=0;\n</code></pre>\n\n<p>Then writing <code>x[+1]</code> would mean <code>*(x++1)</code> and this seems invalid. Please correct me for the mistake I am making in understanding this concept.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1456328590, "post_id": 35606505, "comment_id": 58897303, "body": "What is the full error message?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1456328655, "post_id": 35606505, "comment_id": 58897356, "body": "<code>int ** readDurations= NULL;</code> isn&#39;t a function in that scope."}], "answers": [{"tags": [], "owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "is_accepted": false, "score": 4, "last_activity_date": 1456328756, "creation_date": 1456328756, "answer_id": 35606581, "question_id": 35606505, "link": "https://stackoverflow.com/questions/35606505/i-am-getting-cannot-be-used-as-a-function-error/35606581#35606581", "title": "i am getting cannot be used as a function error?", "body": "<p>in <code>main()</code>:</p>\n\n<pre><code>int ** readDurations= NULL;\n// ...\nreadDurations(duration, rows, cols); // it thinks this is an int**\n</code></pre>\n\n<p>You are using the same name for two different things.\nPut your function in a namespace, then call it fully qualified: <code>myNameSpace::readDurations(...);</code></p>\n\n<p>But you aren't using the <code>readDurations</code> variable declared here anyway. Get rid of it.</p>\n"}], "owner": {"reputation": 5, "user_id": 5975250, "user_type": "registered", "profile_image": "https://graph.facebook.com/1526962530933201/picture?type=large", "display_name": "Omer Saleem", "link": "https://stackoverflow.com/users/5975250/omer-saleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1456328951, "creation_date": 1456328554, "last_edit_date": 1456328951, "question_id": 35606505, "link": "https://stackoverflow.com/questions/35606505/i-am-getting-cannot-be-used-as-a-function-error", "title": "i am getting cannot be used as a function error?", "body": "<p>I am not getting my desired result, help me around this thing. What is the error ? \nWhat functions should go into the header file?\nWhat functions shouldn't?\nmy main file --></p>\n\n<pre><code>#include &lt;iostream&gt; \n#include &lt;string&gt;\n#include \"flight.h\"\nusing namespace std;\n\nint main ()\n{\nint rows=0,cols=0;\nint ** readDurations= NULL;\nint * cities = NULL;\nstring duration = \"durations.txt\";\nreadDurations(duration, rows, cols);\n}\n</code></pre>\n\n<p>my flight.cpp file --></p>\n\n<pre><code>#ifndef FLIGHT_H    \n#define FLIGHT_H\n\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\n// inputs the file fileName, creates a dynamic 2D array, and returns it\nint** readDurations(string filename, int&amp; rows, int&amp; cols)\n{\n    ifstream myfile(\"durations.txt\");\n    if (myfile)\n    cout &lt;&lt; \"Error in opening file!\";\n    myfile &gt;&gt; rows;\n    cols=rows;\n\n    int **readDurations = new int *[rows];\n    for (int i=0;i&lt;rows;i++){\n        readDurations[i] = new int [cols];\n    }\n\n\n    for (int i=0;i&lt;rows;i++){\n        for (int j=0;j&lt;cols;j++){\n            myfile &gt;&gt; readDurations[i][j];\n        }\n    }\n\n    return readDurations;\n\n}\n</code></pre>\n\n<p>my header file</p>\n\n<pre><code>#ifndef FLIGHT_H\n#define FLIGHT_H\n\n#include &lt;string&gt;\nusing namespace std;\n\n// inputs the file fileName, creates a dynamic 2D array, and returns it\nint** readDurations(string fileName, int&amp; rows, int&amp; cols);\n#endif\n</code></pre>\n"}, {"tags": ["c++", "database", "sqlite", "sql-delete"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 2044640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2570207c777432d52b985300410fc0be?s=128&d=identicon&r=PG", "display_name": "Nocs", "link": "https://stackoverflow.com/users/2044640/nocs"}, "edited": false, "score": 1, "creation_date": 1456329616, "post_id": 35606853, "comment_id": 58898109, "body": "I have used sqlite long enough through a ready c++ app and my file was full of trash value that was deleted from time to time.It never removed that values from the file and yes for sensitive data that may be a problem, is there any solution around it ? what is this vacuum you are mentioning ?"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "reply_to_user": {"reputation": 71, "user_id": 2044640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2570207c777432d52b985300410fc0be?s=128&d=identicon&r=PG", "display_name": "Nocs", "link": "https://stackoverflow.com/users/2044640/nocs"}, "edited": false, "score": 0, "creation_date": 1456329987, "post_id": 35606853, "comment_id": 58898410, "body": "@Nocs Check the link for it, it rebuilds the database and throws out everything that&#39;s not needed. It may be a time consuming task if the database is big, so shouldn&#39;t be run all the time. But from time to time it may be of use. For sensitive data it will be useful."}, {"owner": {"reputation": 71, "user_id": 2044640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2570207c777432d52b985300410fc0be?s=128&d=identicon&r=PG", "display_name": "Nocs", "link": "https://stackoverflow.com/users/2044640/nocs"}, "edited": false, "score": 0, "creation_date": 1456330062, "post_id": 35606853, "comment_id": 58898476, "body": "i`ve read the <a href=\"https://www.sqlite.org/lang_vacuum.html\" rel=\"nofollow noreferrer\">sqlite.org/lang_vacuum.html</a> which yes in someway is a small solution but does it happen to understand what it means with &quot;VACUUM only works on the main database. It is not possible to VACUUM an attached database file. &quot; ?? is it my database file that created by sqlite the main database or is it an attached one ?"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "reply_to_user": {"reputation": 71, "user_id": 2044640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2570207c777432d52b985300410fc0be?s=128&d=identicon&r=PG", "display_name": "Nocs", "link": "https://stackoverflow.com/users/2044640/nocs"}, "edited": false, "score": 0, "creation_date": 1456330613, "post_id": 35606853, "comment_id": 58898898, "body": "@Nocs It is the main database. Attached databases are separately joined to the main database with ATTACH DATABASE <a href=\"https://www.sqlite.org/lang_attach.html\" rel=\"nofollow noreferrer\">sqlite.org/lang_attach.html</a>"}], "tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": false, "score": 0, "last_activity_date": 1456329396, "creation_date": 1456329396, "answer_id": 35606853, "question_id": 35606496, "link": "https://stackoverflow.com/questions/35606496/c-and-sqlite-delete-query-doesnt-actually-delete-the-value-from-the-database/35606853#35606853", "title": "C++ and Sqlite DELETE query doesn`t actually delete the value from the database file", "body": "<p>Basically all databases only mark rows active or inactive, they won't delete the actual data from the file immediately. It would be a huge waste of time and resources, since that part of the file can just be reused.</p>\n\n<p>Since your queries show that the row isn't active in results, is this in some way an issue? You can always run a <a href=\"https://www.sqlite.org/lang_vacuum.html\" rel=\"nofollow\"><code>VACUUM</code></a> on the database if you want to reclaim the space, but I would just let the database engine handle everything by itself. It won't \"keep collecting all the trash inside it\", don't worry.</p>\n\n<p>If you see that the file size is growing and the space is not reused, then you can issue vacuums from time to time.</p>\n\n<p>You can also test this by just inserting other rows after deleting old ones. The engine should reuse those parts of the file at some point.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 2044640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2570207c777432d52b985300410fc0be?s=128&d=identicon&r=PG", "display_name": "Nocs", "link": "https://stackoverflow.com/users/2044640/nocs"}, "edited": false, "score": 0, "creation_date": 1456331226, "post_id": 35607366, "comment_id": 58899392, "body": "Thank you Richard not that is a perfect solution but i can see that is the way SQlite it works just to avoid extra CPU cycles and be quick enough."}], "tags": [], "owner": {"reputation": 141, "user_id": 5975636, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Rm478Ulfn8g/AAAAAAAAAAI/AAAAAAAAAMQ/jQgq8ErgHhg/photo.jpg?sz=128", "display_name": "Richard Hipp", "link": "https://stackoverflow.com/users/5975636/richard-hipp"}, "is_accepted": true, "score": 4, "last_activity_date": 1456330701, "creation_date": 1456330701, "answer_id": 35607366, "question_id": 35606496, "link": "https://stackoverflow.com/questions/35606496/c-and-sqlite-delete-query-doesnt-actually-delete-the-value-from-the-database/35607366#35607366", "title": "C++ and Sqlite DELETE query doesn`t actually delete the value from the database file", "body": "<p>If you use \"PRAGMA secure_delete=ON;\" then SQLite overwrites deleted content with zeros.  See <a href=\"https://www.sqlite.org/pragma.html#pragma_secure_delete\" rel=\"nofollow\">https://www.sqlite.org/pragma.html#pragma_secure_delete</a></p>\n\n<p>Even with secure_delete=OFF, the deleted space will be reused (and overwritten) to store new content the next time you INSERT.  SQLite does not leak disk space, nor is it necessary to VACUUM in order to reclaim space.  But normally, deleted content is not overwritten as that uses extra CPU cycles and disk I/O.</p>\n"}], "owner": {"reputation": 71, "user_id": 2044640, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2570207c777432d52b985300410fc0be?s=128&d=identicon&r=PG", "display_name": "Nocs", "link": "https://stackoverflow.com/users/2044640/nocs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1114, "favorite_count": 0, "accepted_answer_id": 35607366, "answer_count": 2, "score": 2, "last_activity_date": 1456330701, "creation_date": 1456328526, "question_id": 35606496, "link": "https://stackoverflow.com/questions/35606496/c-and-sqlite-delete-query-doesnt-actually-delete-the-value-from-the-database", "title": "C++ and Sqlite DELETE query doesn`t actually delete the value from the database file", "body": "<p>I`ve came accross this issue on SQlite and c++ and i can't find any answer on it.</p>\n\n<p>Everything is working fine in SQlite and c++ all queries all outputs all functions but i have this question that can`t find any solution around it.</p>\n\n<p>I create a database MyTest.db \nI create a table test with an id and a name as fields\nI enter 2 values to each id=1 name=Name1 and id=2 name=Name2\nI delete the 2nd value</p>\n\n<p>The data inside table now says that i have only the id=1 with name=Name1</p>\n\n<p>When i open my Mytest.db with notepad.exe the values that i have deleted such as id=2 name=Name2 are still inside the database file though that it doesn`t come to the data results of this table but still exists though.</p>\n\n<p>What i like to ask from anyone that knows about it is this :\nIs there any other way that the value has to be deleted also from the database file or is it my mistake with the DELETE option of SQLITE (that i doubt it)</p>\n\n<p>Its like the database file keeps collecting all the trash inside it without removing DELETED values from its tables...</p>\n\n<p>Any help or suggestion is much appreciated</p>\n"}, {"tags": ["c++", "mbed"], "answers": [{"tags": [], "owner": {"reputation": 4888, "user_id": 5785362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a786fd81952576dc07942023bf8830b?s=128&d=identicon&r=PG", "display_name": "tofro", "link": "https://stackoverflow.com/users/5785362/tofro"}, "is_accepted": false, "score": 0, "last_activity_date": 1456329763, "creation_date": 1456329763, "answer_id": 35607014, "question_id": 35606420, "link": "https://stackoverflow.com/questions/35606420/how-to-slow-the-tempo-down-for-different-frequencies-on-a-mbed-device-using-c/35607014#35607014", "title": "How to slow the tempo down for different frequencies on a mbed device using C++", "body": "<p>I'm neither very familiar with the mbed nor with the environment you are using - But some things seem obvious:</p>\n\n<ul>\n<li>You are talking to a PWM generator and setting up frequencies</li>\n<li>You seem to be waiting (pausing) between groups of notes - At least you want to. You're not telling the PWM to be silent (frequency = 0) for those periods.</li>\n<li>You also seem to have set the PWM duty cycle (I assume the \"spkr = 0.5\" line does that)</li>\n</ul>\n\n<p>All O.K, but:\n - You do not seem to be waiting for the PWM to actually <em>play</em> the note depending on how long you want the tone to be present (there should be a delay after the PWM frequency is set for each note - That is like placing your fingers on the holes in a tin whistle and not blowing...)</p>\n\n<p>You should definitely spread some wait()s between the spkr.period () lines depending on how long you want each note to play.</p>\n\n<p>You should also set the PWM frequency to 0 if you want a period of silence.</p>\n\n<p>What I don't know is whether the mbed requires you to actually \"start\" the PWM or if it is free-running.</p>\n"}, {"comments": [{"owner": {"reputation": 537, "user_id": 5647516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7f2c9a9b3384a9f3d5aa6b0fc98ee647?s=128&d=identicon&r=PG&f=1", "display_name": "user5647516", "link": "https://stackoverflow.com/users/5647516/user5647516"}, "edited": false, "score": 0, "creation_date": 1456339470, "post_id": 35610112, "comment_id": 58905054, "body": "omg yes it works thank you, I need to add a few more notes but might not have enough memory. Thanks again!"}], "tags": [], "owner": {"reputation": 24757, "user_id": 107642, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/672b033bf66f18d40cff3278f12f8f90?s=128&d=identicon&r=PG", "display_name": "Jan Jongboom", "link": "https://stackoverflow.com/users/107642/jan-jongboom"}, "is_accepted": true, "score": 2, "last_activity_date": 1456338417, "creation_date": 1456338417, "answer_id": 35610112, "question_id": 35606420, "link": "https://stackoverflow.com/questions/35606420/how-to-slow-the-tempo-down-for-different-frequencies-on-a-mbed-device-using-c/35610112#35610112", "title": "How to slow the tempo down for different frequencies on a mbed device using C++", "body": "<p>You need to set the value of the PWM pin to something to play, can also control volume that way. Second thing is that you need to wait between setting the <code>period</code> otherwise there's no time for the note to actual do anything on that frequency. Try this:</p>\n\n<pre><code>#include \"mbed.h\"\n\nPwmOut spkr(D3);\n\nfloat c = 262.0; //These are the different frequencies\nfloat d = 294.0;\nfloat e = 330.0;\nfloat f = 349.0;\nfloat g = 392.0;\nfloat a = 440.0;\nfloat b = 494.0;\nfloat C = 523.0;\nfloat _ = 0.0;\n\nvoid hotLineBling() {\n    float notes[] = { e, e, e, _, C, a, e, _, d, a, d, _, _,\n                      C, a, e, _, d, a, d, c, _, _, C, a, e,\n                      _, d, a, d };\n\n    for (int i = 0; i &lt; sizeof(notes) / sizeof(float); i++) {\n        if (notes[i] == _) {\n            spkr = 0.0f;\n        }\n        else {\n            spkr = 0.3f;\n            spkr.period(1 / notes[i]);\n        }\n        wait(0.5f);\n    }\n\n    spkr = 0.0f;\n}\n\nint main() {\n    hotLineBling();\n}\n</code></pre>\n\n<p>Although I don't know if this sounds anything like you want it to sound :-)</p>\n"}], "owner": {"reputation": 537, "user_id": 5647516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7f2c9a9b3384a9f3d5aa6b0fc98ee647?s=128&d=identicon&r=PG&f=1", "display_name": "user5647516", "link": "https://stackoverflow.com/users/5647516/user5647516"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 2, "accepted_answer_id": 35610112, "answer_count": 2, "score": 3, "last_activity_date": 1544271198, "creation_date": 1456328334, "question_id": 35606420, "link": "https://stackoverflow.com/questions/35606420/how-to-slow-the-tempo-down-for-different-frequencies-on-a-mbed-device-using-c", "title": "How to slow the tempo down for different frequencies on a mbed device using C++", "body": "<p>Hi I am trying to using different sound frequencies on an mbed application shield to create a tone from a song. Although I have gotten all the frequencies I cannot seem to slow the tempo down, as it just cycles through all of the frequencies really fast. I have tried to use the wait(); function but that does not seem to be working correctly. I would appreciate some ideas on how to correct this or alternative solutions.</p>\n\n<p>Here is my code</p>\n\n<pre><code>#include \"mbed.h\"\n#include \"C12832.h\"   // for the LCD\n#include \"LM75B.h\"   //for the temperature sensor\n#include \"MMA7660.h\" //For the accelerometer\n\n/***************************************************************************\nGlobal Variables\n***************************************************************************/\n\nC12832 shld_lcd (D11, D13, D12, D7, D10);   // LCD on the application shield\nPwmOut spkr(D6); //speaker\n\nfloat c = 262.0; //These are the different frequencies\nfloat d = 294.0;\nfloat e = 330.0;\nfloat f = 349.0;\nfloat g = 392.0;\nfloat a = 440.0;\nfloat b = 494.0;\nfloat C = 523.0;\n\n\nvoid hotLineBling() {\n\n    //Here I am trying to use the frequencies to play the tone\n\n    spkr.period(1/e);\n    spkr.period(1/e);\n    spkr.period(1/e);\n    wait(0.5f);\n    spkr.period(1/C);\n    spkr.period(1/a);\n    spkr.period(1/e);\n    wait(0.5f);\n    spkr.period(1/d);\n    spkr.period(1/a);\n    spkr.period(1/d);\n    wait(1.0);\n    spkr.period(1/C);\n    spkr.period(1/a);\n    spkr.period(1/e);\n    wait(0.5f);\n    spkr.period(1/d);\n    spkr.period(1/a);\n    spkr.period(1/d);\n    spkr.period(1/c);\n    wait(1.0);\n    spkr.period(1/C);\n    spkr.period(1/a);\n    spkr.period(1/e);\n    wait(0.5f);\n    spkr.period(1/d);\n    spkr.period(1/a);\n    spkr.period(1/d);\n    wait(5.0);\n\n}\n\nint main()\n{\n\n    hotLineBling();\n\n    while (1) {\n\n        spkr = 0.5;\n        wait(0.2f); //wait a little\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "compilation", "bison", "flex-lexer"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456328442, "post_id": 35606354, "comment_id": 58897202, "body": "C is not C++ is not C!"}, {"owner": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456330735, "post_id": 35606354, "comment_id": 58898997, "body": "Yes I know, but on every example I have seen on using flex/bison, they use this weird mix of the two"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456330789, "post_id": 35606354, "comment_id": 58899032, "body": "Typically they use C only. Buit your code defintively is not C."}, {"owner": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456331216, "post_id": 35606354, "comment_id": 58899386, "body": "Yes, because my whole project is built in C++. Flex / Bison is supposed to support C++, and there are many examples of this. However, they do not feature multiple parsers."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456491307, "post_id": 35643608, "comment_id": 58984704, "body": "Yes, I also tried that, which seems to be the most natural way to do it. However, the include is oddly conflicting with the lexer cpp file generated by flex, and I get the error in the last grey frame of my question. I&#39;m obliged to alternate between the two versions (with and without yyFlexLexerOnce) to be able to compile."}, {"owner": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456492044, "post_id": 35643608, "comment_id": 58985212, "body": "I can give you the github link to help you see the problem, if you want :)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456494860, "post_id": 35643608, "comment_id": 58987255, "body": "@pvallet: that sounds more like your header files lack include guards ( or you are doing something like #include a source file). A minimal compilable example would be useful."}, {"owner": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456495718, "post_id": 35643608, "comment_id": 58987897, "body": "Here is the repository, I think it is simpler than creating a minimal example: <a href=\"https://github.com/pvallet/CGA-_interpreter\" rel=\"nofollow noreferrer\">github.com/pvallet/CGA-_interpreter</a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456496452, "post_id": 35643608, "comment_id": 58988481, "body": "@pvallet: it might be easier for you, but what about the rest of us? But then again, it might not be, because creating minimal examples is a good learning/debugging technique, so not doing so might complicate your life, too. Anyway, if I have time to trawl through all that code later on, I&#39;ll let you know."}, {"owner": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456497118, "post_id": 35643608, "comment_id": 58989017, "body": "Yes you&#39;re right, creating minimal examples is usually a good technique to debug, and even to add features to a project. I will provide a simple example so that it is easier for you to read, I&#39;m sorry I didn&#39;t do that earlier :/"}, {"owner": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456498366, "post_id": 35643608, "comment_id": 58989978, "body": "There you go, I created a minimal example : <a href=\"https://github.com/pvallet/minimal_example\" rel=\"nofollow noreferrer\">github.com/pvallet/minimal_example</a>  Thank you so much for your time"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456503116, "post_id": 35643608, "comment_id": 58993454, "body": "Thanks, that&#39;s helpful. I&#39;m not at a keyboard right now, but I think the problem is that you #include scanner.h from within the scanner.l file. That will cause yyFlexLexer to bevincludef twice, because the generated scanner also includes it. I&#39;ll update the answer when I get to a machine."}, {"owner": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456504519, "post_id": 35643608, "comment_id": 58994457, "body": "Ah ok that explains the conflict with lexer.cpp. However, I need to know about the class scanner in the lexer file, otherwise I get a &quot;invalid use of incomplete type&quot; error :/"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456516381, "post_id": 35643608, "comment_id": 59001157, "body": "@pvallet: Yes. You need to separate what <i>you</i> define from what flex defines for you. (I&#39;m not saying this is at all a good design. Personally, I refuse to use the C++ flex interface; I don&#39;t believe it produces good C++ code, and I prefer to just use a C scanner.) I&#39;ll edit the answer in a few minutes; I just need to produce a minimal compilable answer."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456543337, "post_id": 35643608, "comment_id": 59010708, "body": "@pvallet: I updated the answer, finally. Hope it helps. I <i>never</i> use the C++ code generators; for C++, I prefer to generate the C API (even if I compile it as C++ in order to be able to use the C++ standard library), and then wrap my own classes around the generated global symbols. It&#39;s a bit more pollution of the global namespace, but it has the advantage of actually letting me write a decent C++ class without having to jump through hoops because of the idiotic and incompatible bison and flex C++ generated interfaces. But that&#39;s all opinion so it doesn&#39;t belong in an answer."}, {"owner": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "edited": false, "score": 0, "creation_date": 1456572294, "post_id": 35643608, "comment_id": 59017480, "body": "Thank you so much for your help ! It&#39;s working now. I felt really stuck on this topic, I needed someone&#39;s help. I don&#39;t really have an opinion on using C or C++, this is the first time I&#39;m using flex/bison, I naturally tried to put the C++ implementation on a C++ project. Well, thanks again, have a good day !"}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 3, "last_activity_date": 1582258319, "last_edit_date": 1582258319, "creation_date": 1456461530, "answer_id": 35643608, "question_id": 35606354, "link": "https://stackoverflow.com/questions/35606354/multiple-parsers-in-flex-bison-include-fails/35643608#35643608", "title": "Multiple parsers in flex/bison : include fails", "body": "<p>You shouldn't be fooling around with <code>yyFlexLexerOnce</code>. That's internal to the implementation of Flex.</p>\n\n<p>You need to declare every variety of <code>FlexLexer</code> which you use, ideally precisely once. You also need to declare <code>FlexLexer</code> itself precisely once. The <code>yyFlexLexerOnce</code> macro is the way whoever put together the C++ interface for flex scanners chose to make this possible. (Multiple header files would have been my choice, but I'm sure they had their reasons.)</p>\n\n<p>So just forget ever having seen <code>yyFlexLexerOnce</code>, and do it the way the manual tells you to:</p>\n\n<pre><code>#define yyFlexLexer spFlexLexer\n#include \"FlexLexer.h\"\n#undef yyFlexLexer\n\n// This will not normally be in the same header file, but it could be.\n\n#define yyFlexLexer actFlexLexer\n#include \"FlexLexer.h\"\n#undef yyFlexLexer\n</code></pre>\n\n<p>There are two important issues with <code>FlexLexer.h</code>.</p>\n\n<p>The first one, as illustrated above, is that it is designed to be <code>#include</code>d more than once, so it does not have a header guard. That means that you have to ensure that it is never included twice with the same preprocessor define of <code>yyFlexLexer</code>. A good idiom is probably to create a little wrapper:</p>\n\n<pre><code>/*** File: sp_scanner.h ***/\n\n#pragma once\n#define yyFlexLexer spFlexLexer\n#include \"FlexLexer.h\"\n#undef yyFlexLexer\n</code></pre>\n\n<p>But that runs into the second issue: <code>yyFlexLexer</code> is automatically <code>#include</code>d in the generated scanner implementation file, with an appropriate <code>#define</code> of <code>yyFlexLexer</code>. So you <em>must not</em> <code>#include</code> it (even indirectly) in any inserted code in your <code>.l</code> scanner definition file. </p>\n\n<p>This creates an annoyance in the not-uncommon case where you have other declarations which are required for the implementation of the scanner. The temptation would be to put these declarations in the <code>sp_lexer.h</code> header file (as above), but that won't work because you can't <code>#include \"sp_lexer.h\"</code> in your scanner definition file. Instead, you need to create yet another header file, and <code>#include</code> it from both the <code>scanner.l</code> file and in the <code>sp_lexer.h</code> file.</p>\n\n<p>Concretely, suppose that you are using the <code>yyclass</code> option to insert the scanner implementation method in a derived class. Obviously, you need to declare this derived class before the generated scanner, and you will also want to declare this derived class in any consumer of the generated scanner. So you will end up with something like this:</p>\n\n<pre><code>/*** File: sp_scanner_internal.h ***/\n#pragma once\nnamespace sp {\n  class Scanner : public spFlexLexer {\n    /* ... */\n  };\n}\n\n/*** File: sp_scanner.h ***/\n#pragma once\n#define yyFlexLexer spFlexLexer\n#include \"FlexLexer.h\"\n#undef yyFlexLexer\n#include \"sp_scanner_internal.h\"\n\n/*** File: sp_scanner.l ***/\n%option prefix=\"sp\"\n%option outfile=\"sp_scanner.cpp\"\n%option yyclass=\"sp::Scanner\"\n\n%{\n  #include \"sp_scanner_internal.h\"\n  #include \"sp_parser.h\"\n%}\n</code></pre>\n\n<p>I removed the <code>%option header-file</code> from your example files, because that header file should not be used in C++ projects. See the <a href=\"http://westes.github.io/flex/manual/Options-for-Specifying-Filenames.html\" rel=\"nofollow noreferrer\">Flex manual</a>:</p>\n\n<blockquote>\n  <p>The <code>--header-file</code> option is not compatible with the <code>--c++</code> option, since the C++ scanner provides its own header in <code>yyFlexLexer.h</code>.</p>\n</blockquote>\n\n<p>I also removed <code>#include &lt;iostream&gt;</code>, since it is included from <code>FlexLexer.h</code>, but of course it is not a problem if you prefer to keep it.</p>\n\n<hr>\n"}], "owner": {"reputation": 113, "user_id": 5975338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fhqt1.png?s=128&g=1", "display_name": "pvallet", "link": "https://stackoverflow.com/users/5975338/pvallet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 998, "favorite_count": 2, "accepted_answer_id": 35643608, "answer_count": 1, "score": 1, "last_activity_date": 1582258319, "creation_date": 1456328163, "last_edit_date": 1456329177, "question_id": 35606354, "link": "https://stackoverflow.com/questions/35606354/multiple-parsers-in-flex-bison-include-fails", "title": "Multiple parsers in flex/bison : include fails", "body": "<p>I am trying to build a program using multiple parsers. I have put the flex / bison files of the different parsers in separate folders to avoid conflicts.</p>\n\n<p>I have used different prefixes to be able to use them. However, my program won't build from scratch, the scanner classes produce errors:</p>\n\n<pre><code>#pragma once\n\n#if ! defined(yyFlexLexerOnce)\n#define yyFlexLexer spFlexLexer\n#include &lt;FlexLexer.h&gt;\n#undef yyFlexLexer\n#endif\n\n#include \"split_pattern_parser.h\"\n\nnamespace SP {\n\nclass SP_Scanner : public spFlexLexer {\n...\n}\n</code></pre>\n\n<p>I get this error :</p>\n\n<pre><code>error: expected class-name before \u2018{\u2019 token\n class SP_Scanner : public spFlexLexer {\n</code></pre>\n\n<p>I manage to compile by removing the <code>#if ! defined(yyFlexLexerOnce)</code> condition several times, and putting it again when I get this error :</p>\n\n<pre><code>src/actions/actions_scanner.h:4:21: error: redefinition of \u2018class actFlexLexer\u2019\n#define yyFlexLexer actFlexLexer\n                 ^\nactions_lexer.cpp:32:25: error: previous definition of \u2018class actFlexLexer\u2019\n</code></pre>\n\n<p>(actions is just another lexer)</p>\n\n<p>Even if it is not so big a problem for me (I can continue to work on my project), it gets really problematic when I have to hand out my project: it is not neat to have to explain this procedure to build the code. </p>\n\n<p>Thanks in advance for your help</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 0, "creation_date": 1456328595, "post_id": 35606323, "comment_id": 58897309, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2610151/qt-no-such-signal-error\">Qt - no such signal error</a>"}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 4, "creation_date": 1456328714, "post_id": 35606323, "comment_id": 58897393, "body": "Note the signal is <a href=\"http://doc.qt.io/qt-5/qabstractbutton.html#clicked\" rel=\"nofollow noreferrer\">clicked</a> not <code>click</code>"}, {"owner": {"reputation": 2202, "user_id": 3770506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a1AGW.jpg?s=128&g=1", "display_name": "Fabio", "link": "https://stackoverflow.com/users/3770506/fabio"}, "edited": false, "score": 2, "creation_date": 1456329188, "post_id": 35606323, "comment_id": 58897770, "body": "Also add the Q_OBJECT macro"}], "answers": [{"tags": [], "owner": {"reputation": 26196, "user_id": 1841194, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e65b668131c96399c25c6fae3fff8da5?s=128&d=identicon&r=PG&f=1", "display_name": "frogatto", "link": "https://stackoverflow.com/users/1841194/frogatto"}, "is_accepted": false, "score": 2, "last_activity_date": 1456331764, "creation_date": 1456331764, "answer_id": 35607830, "question_id": 35606323, "link": "https://stackoverflow.com/questions/35606323/opening-a-window-with-a-qpushbutton-c/35607830#35607830", "title": "Opening a Window with a QPushButton C++", "body": "<ul>\n<li><p>Replace</p>\n\n<pre><code>connect(m_NewJob, SIGNAL(click()), this, SLOT(openNew()));\n</code></pre>\n\n<p>with</p>\n\n<pre><code>connect(m_NewJob, SIGNAL(clicked()), this, SLOT(openNew()));\n</code></pre></li>\n<li><p>Add <code>Q_OBJECT</code> macro in the beginning of your both classes.</p>\n\n<pre><code>class MainWindow : public QWidget // On h\u00e9rite de QWidget (IMPORTANT)\n{\n    Q_OBJECT\n    ...\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class NewJobWindow : public QWidget // On h\u00e9rite de QWidget (IMPORTANT)\n{\n    Q_OBJECT\n    ...\n</code></pre></li>\n<li><p>Run <code>qmake</code> via <em>Build -> run qmake</em>.</p></li>\n</ul>\n"}], "owner": {"reputation": 384, "user_id": 5369506, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZdecgATTpWs/AAAAAAAAAAI/AAAAAAAAADY/cVFIaWRkhRg/photo.jpg?sz=128", "display_name": "Gleyak", "link": "https://stackoverflow.com/users/5369506/gleyak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1522645372, "creation_date": 1456328081, "question_id": 35606323, "link": "https://stackoverflow.com/questions/35606323/opening-a-window-with-a-qpushbutton-c", "title": "Opening a Window with a QPushButton C++", "body": "<p>I'm new to Qt Creator and I'm trying to build a first window with a button that open a new window. I've followed many tutorial that ended up with the same problem:</p>\n\n<p>QObject::connect: No such signal QPushButton::click() in ../Gestion_Travaux/MainWindow.cpp:23</p>\n\n<p>So there is my code:</p>\n\n<p>Main.cpp</p>\n\n<pre><code>   #include &lt;QApplication&gt;\n   #include \"MainWindow.h\"\n\n\n    int main(int argc, char *argv[])\n    {\n        QApplication app(argc, argv);\n\n        MainWindow frame;\n        frame.show();\n\n        return app.exec();\n    }\n</code></pre>\n\n<p>MainWindow.h</p>\n\n<pre><code>  #ifndef MAINWINDOW_H\n  #define MAINWINDOW_H\n  #include &lt;QApplication&gt;\n  #include &lt;QWidget&gt;\n  #include &lt;QPushButton&gt;\n  #include \"NewJobWindow.h\"\n\n  class MainWindow : public QWidget // On h\u00e9rite de QWidget (IMPORTANT)\n  {\n      public:\n      MainWindow(); //Fenetre principale\n\n      public slots:\n      void OpenNew();\n\n\n      private:\n      QPushButton *m_NewJob; \n      QPushButton *m_OldJob; \n      NewJobWindow *m_NewJobWindow;\n    };\n\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>MainWindow.cpp</p>\n\n<pre><code>#include \"MainWindow.h\"\n#include \"NewJobWindow.h\"\n#include &lt;QApplication&gt;\n#include &lt;QWidget&gt;\n#include &lt;QPushButton&gt;\n#include &lt;QLCDNumber&gt;\n#include &lt;QSlider&gt;\n\nMainWindow::MainWindow() : QWidget()\n{\n    setFixedSize(500, 500);\n\n    // Construction du bouton nouveau travail\n    m_NewJob = new QPushButton(\"Nouveau Travail\", this);\n    m_NewJob-&gt;setCursor(Qt::PointingHandCursor);\n    m_NewJob-&gt;setGeometry(30,30,140,30);\n\n    // Construction du bouton nouveau travail\n    m_OldJob = new QPushButton(\"Travail archive\", this);\n    m_OldJob-&gt;setCursor(Qt::PointingHandCursor);\n    m_OldJob-&gt;setGeometry(30,70,140,30);\n\n    connect(m_NewJob, SIGNAL(click()), this, SLOT(openNew()));\n}\n\nvoid MainWindow::OpenNew()\n{\n    m_NewJobWindow= new NewJobWindow(); // Be sure to destroy you window somewhere\n    m_NewJobWindow-&gt;show();\n\n}\n</code></pre>\n\n<p>NewJobWindow.h</p>\n\n<pre><code>#ifndef NEWJOBWINDOW_H\n#define NEWJOBWINDOW_H\n\n\n#include &lt;QApplication&gt;\n#include &lt;QWidget&gt;\n#include &lt;QPushButton&gt;\n\nclass NewJobWindow : public QWidget // On h\u00e9rite de QWidget (IMPORTANT)\n{\n    public:\n    NewJobWindow(); //Fenetre de nouveau travail\n\n    public slots:\n\n\n    private:\n};\n\n\n#endif // NEWJOBWINDOW_H\n</code></pre>\n\n<p>NewJobWindow.cpp</p>\n\n<pre><code>#include \"NewJobWindow.h\"\n\nNewJobWindow::NewJobWindow() : QWidget()\n{\n    setFixedSize(500, 500);\n\n};\n</code></pre>\n\n<p>I am sill looking for my error ... \nAny idea?\nThanks</p>\n"}, {"tags": ["c++", "c", "multithreading"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 4, "creation_date": 1456328042, "post_id": 35606291, "comment_id": 58896936, "body": "Please select <i>one</i> of either C or C++."}, {"owner": {"reputation": 653, "user_id": 1786323, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/112975361af2f98ffb8d7f6efdd9c7ef?s=128&d=identicon&r=PG", "display_name": "blackball", "link": "https://stackoverflow.com/users/1786323/blackball"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456328188, "post_id": 35606291, "comment_id": 58897029, "body": "@MikeCAT Why ? I could accept answers in either C or C++."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1456328280, "post_id": 35606291, "comment_id": 58897095, "body": "Is that just me, or the question is completely unclear without context?"}, {"owner": {"reputation": 653, "user_id": 1786323, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/112975361af2f98ffb8d7f6efdd9c7ef?s=128&d=identicon&r=PG", "display_name": "blackball", "link": "https://stackoverflow.com/users/1786323/blackball"}, "reply_to_user": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 0, "creation_date": 1456328312, "post_id": 35606291, "comment_id": 58897110, "body": "@Jeff The arrow here is only about the execution order, not data flow."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456328314, "post_id": 35606291, "comment_id": 58897113, "body": "@blackball: Because C and C++ are different languages. Your question is already too broad for one language. But it might be narrowed down if you pick one of them."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1456328360, "post_id": 35606291, "comment_id": 58897139, "body": "@EugeneSh.: I picked too broad, but I could have flipped a coin."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456328463, "post_id": 35606291, "comment_id": 58897221, "body": "(one of) the easiest way(s) is openmp."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456328478, "post_id": 35606291, "comment_id": 58897227, "body": "@Olaf, Mike, I think it&#39;s legit to tag a question with multiple languages if the question is about algorithm in either of them..."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456328575, "post_id": 35606291, "comment_id": 58897297, "body": "It&#39;s umm.. broad, I think, its unclear too:(  &#39;while (keep_running)&#39; what keep running?  Makes no sense."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456328600, "post_id": 35606291, "comment_id": 58897312, "body": "Ironically if this question is asked twice with C and C++ tags respectively then it definitely would be marked as duplicate of each other."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456328613, "post_id": 35606291, "comment_id": 58897322, "body": "@Olaf it&#39;s code for C/C++"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456328642, "post_id": 35606291, "comment_id": 58897343, "body": "@Olaf That&#39;s a typo, but <code>C+=</code> is indeed another language."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456328643, "post_id": 35606291, "comment_id": 58897345, "body": "There is a language-agnostic tag, IIRC."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456328764, "post_id": 35606291, "comment_id": 58897422, "body": "@user3528438: No kidding? Link?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1456328795, "post_id": 35606291, "comment_id": 58897444, "body": "@Olaf <a href=\"https://github.com/ErisBlastar/cplusequality\" rel=\"nofollow noreferrer\">github.com/ErisBlastar/cplusequality</a>"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1456328882, "post_id": 35606291, "comment_id": 58897516, "body": "@user3528438: Reminds me of Vatical (not sure if there is an English description somewhere)."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456328883, "post_id": 35606291, "comment_id": 58897519, "body": "@Olaf postfix operator has higher precedence than multiplicative operator."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456329063, "post_id": 35606291, "comment_id": 58897668, "body": "@Olaf: But it would never be interpreted as <code>1&#47;++</code>."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456329138, "post_id": 35606291, "comment_id": 58897733, "body": "@Olaf <i>which</i> language?"}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1456329263, "post_id": 35606291, "comment_id": 58897840, "body": "@Olaf, no <code>C&#47;C++</code>, according to precedence rules, would be evaluated as <code>C&#47;(C++)</code>. Didn&#39;t we already cover this?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1456330171, "post_id": 35606291, "comment_id": 58898559, "body": "@EOF: Hmm, then it would be <code>C&#47;C++</code> -&gt; <code>1&#47;C(++ - 1)</code>? - too complicated, I&#39;ll stick with the UB. Let&#39;s clean this up."}], "answers": [{"tags": [], "owner": {"reputation": 128, "user_id": 3040351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a955087f2c572813046770eb0a2abd?s=128&d=identicon&r=PG&f=1", "display_name": "idler1515", "link": "https://stackoverflow.com/users/3040351/idler1515"}, "is_accepted": false, "score": 0, "last_activity_date": 1456328351, "creation_date": 1456328351, "answer_id": 35606424, "question_id": 35606291, "link": "https://stackoverflow.com/questions/35606291/task-parallelization-and-data-synchronization-in-a-pipeline/35606424#35606424", "title": "Task parallelization and data synchronization in a pipeline", "body": "<p>Create two thread for A and B, put a barrier after them so that you don't run into conflict.\nCreate two thread for C &amp;&amp;D, process, put barrier\nFinish E. L</p>\n"}], "owner": {"reputation": 653, "user_id": 1786323, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/112975361af2f98ffb8d7f6efdd9c7ef?s=128&d=identicon&r=PG", "display_name": "blackball", "link": "https://stackoverflow.com/users/1786323/blackball"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1456330144, "creation_date": 1456328001, "last_edit_date": 1456330144, "question_id": 35606291, "link": "https://stackoverflow.com/questions/35606291/task-parallelization-and-data-synchronization-in-a-pipeline", "title": "Task parallelization and data synchronization in a pipeline", "body": "<p>I have 5 independent components A, B, C, D, E, where A and B are producing data, C and D are processing both of the data from A and B, E will visualize the results from C and D.</p>\n\n<p>The most straightforward way to implement this pipeline is put them all in one thread:</p>\n\n<pre><code>while (keep_running)\n    A-&gt;B-&gt;C-&gt;D-&gt;E\n</code></pre>\n\n<p>But C and D could be in parallel to be more efficient. And So may be the components A and B.  </p>\n\n<pre><code>while (keep_running)\n    {A &amp;&amp; B could be in parallel} -&gt; {C &amp;&amp; D in parallel} -&gt; E\n</code></pre>\n\n<p>I wonder what is the efficient way to implement this.  </p>\n\n<p>Thanks!</p>\n\n<p>Update: Sorry for the unclearence. </p>\n\n<p>Let me just formulate my question in a pseudo codes manner. </p>\n\n<pre><code>// keep_running is just a bool, could be updated to terminate the loop \nwhile (keep_running) \n      run A; // produce data\n      run B; // produce data \n      run C; // processing data from A and B \n      run D; // processing data from A and B\n      run E; // visualize results from B and C\n\nwhile (keep_running)\n      create_thread ta to run A;\n      create thread tb to run B;\n      ta.run();\n      tb.run();\n      join ta and tb;\n      create thread tc to C;\n      create thread td for D;\n      tc.run();\n      td.run();\n      join tc and td;\n      run E; \n      destroy ta,tb,tc,td;\n\n// I think above implementation is not efficient, because create and destroy threads every time\n// I wonder if there're some efficient implementation like:\ncreate thread ta,tb,tc,td;\nwhile (keep_running)\n      ta.run_once();\n      tb.run_once();\n      wait ta and tb; // A and B finish a round and go to sleep.\n      tc.run_once();\n      td.run_once();\n      wait tc and td;\n      run E;\ndestroy ta, tb, tc, td\n\n// Or other more efficient way ?\n</code></pre>\n\n<p>I don't have much experience in threading, apologize for the unclear issue, and hope someone could give me some hints that I could figure this out. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "multithreading", "server", "client", "chat"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1456327343, "post_id": 35605956, "comment_id": 58896435, "body": "Oh my... That code is unreadable, it&#39;s just an undecipherable wall of noise! Please add some spacing and newlines in there. The comments in Italian(?) doesn&#39;t help much either, at least not for us who don&#39;t understand Italian (which is most of the people here)."}, {"owner": {"reputation": 19, "user_id": 5975278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a24979e6802eb24229b796ed4a23a5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/5975278/alex"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1456382465, "post_id": 35605956, "comment_id": 58922766, "body": "Sorry my bad, i translated the codes :)"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5975278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a24979e6802eb24229b796ed4a23a5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/5975278/alex"}, "edited": false, "score": 0, "creation_date": 1456382965, "post_id": 35620240, "comment_id": 58923027, "body": "I don&#39;t understand, what do you mean?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 19, "user_id": 5975278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a24979e6802eb24229b796ed4a23a5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/5975278/alex"}, "edited": false, "score": 0, "creation_date": 1456383048, "post_id": 35620240, "comment_id": 58923082, "body": "What don&#39;t you understand?"}, {"owner": {"reputation": 19, "user_id": 5975278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a24979e6802eb24229b796ed4a23a5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/5975278/alex"}, "edited": false, "score": 0, "creation_date": 1456383095, "post_id": 35620240, "comment_id": 58923107, "body": "I didn&#39;t get what do you mean for sensibile value"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 19, "user_id": 5975278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a24979e6802eb24229b796ed4a23a5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/5975278/alex"}, "edited": false, "score": 0, "creation_date": 1456383140, "post_id": 35620240, "comment_id": 58923130, "body": "I mean a value that corresponds to an actual connection. You never set it at all. Check out my updates."}, {"owner": {"reputation": 19, "user_id": 5975278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a24979e6802eb24229b796ed4a23a5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/5975278/alex"}, "edited": false, "score": 0, "creation_date": 1456391418, "post_id": 35620240, "comment_id": 58927670, "body": "Which type of variabile i have to use? And how i should use it?"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1456383202, "last_edit_date": 1456383202, "creation_date": 1456382782, "answer_id": 35620240, "question_id": 35605956, "link": "https://stackoverflow.com/questions/35605956/multithreaded-chat-in-windows-c/35620240#35620240", "title": "Multithreaded chat in windows C++", "body": "<p>Your <code>receive</code> function never sets <code>client</code> to a sensible value. You have a lot of other issues, but that's the most obvious.</p>\n\n<pre><code>void *receive(void *)\n{\n    SOCKET client; // ** Create variable\n    long app;\n    char buff[256];\n    memset(&amp;buff,0,sizeof(buff));\n    while(1)\n    {\n        memset(&amp;buff,0,sizeof(buff));\n        app=recv(client,buff,sizeof(buff), 0); // ** Use variable\n        if(app&lt;0) cout&lt;&lt;\" Can't get message\"&lt;&lt;endl;\n        else cout&lt;&lt;\"Client: \"&lt;&lt;buff&lt;&lt;endl;  \n    }\n}\n</code></pre>\n\n<p>Where is it set to a sensible value?</p>\n\n<p>You also seem to have the mistaken understanding that calling <code>recv</code> on a TCP connection will receive a message. That's not true. If you want a function that receives a message, you have to write one.</p>\n"}], "owner": {"reputation": 19, "user_id": 5975278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71a24979e6802eb24229b796ed4a23a5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/5975278/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 577, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1561801359, "creation_date": 1456327170, "last_edit_date": 1561801359, "question_id": 35605956, "link": "https://stackoverflow.com/questions/35605956/multithreaded-chat-in-windows-c", "title": "Multithreaded chat in windows C++", "body": "<p>I'm trying to do a simple multithreaded client/server chat but I have a problem, the program go in a loop without show any message, all I have is the message \"Received: \" and nothing more.\nHere the codes\nServer code:</p>\n\n<pre><code>#pragma comment(lib, \"WS2_32.lib\") // link with Ws2_32.lib\n#include &lt;Winsock2.h&gt;\n#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;pthread.h&gt;\n\n#define DEFAULT_PORT 54345\n\nusing namespace std;\n\nvoid *receive(void *)\n{\n    SOCKET client;\n    long app;\n    char buff[256];\n    memset(&amp;buff,0,sizeof(buff));\n    while(1)\n   {\n        memset(&amp;buff,0,sizeof(buff));\n        app=recv(client,buff,sizeof(buff), 0);\n        if(app&lt;0) cout&lt;&lt;\" Can't get message\"&lt;&lt;endl;\n        else cout&lt;&lt;\"Client: \"&lt;&lt;buff&lt;&lt;endl;  \n    }\n}\n\nint main() \n{\n    pthread_t threadA[5];\n    cout&lt;&lt;\"Server TCP/IP\"&lt;&lt;endl; \n    char recvbuf[256]; //buff ti get message\n    char serverAddrStr[256]={'\\0'}; //Contain the IP address\n   #ifdef WIN32       \n   WSADATA wsaData;\n   WSAStartup (0x0101,&amp;wsaData);\n   #endif\n   long res; \n   WSADATA wsadata; \n   res = WSAStartup(MAKEWORD(2, 1), &amp;wsadata); //Initialize winsock\n   if(res==0) cout&lt;&lt;\"Winsocket initialized!\"&lt;&lt;endl;   \n   else cout&lt;&lt;\"Error initializing winsocket\"&lt;&lt;endl;\n   SOCKET slisten,client; //Socket Descriptor\n   cout&lt;&lt;\"IP address to connect: \";\n   cin.getline(serverAddrStr,256);\n   slisten=socket(AF_INET,SOCK_STREAM,0); \n   if(slisten!=INVALID_SOCKET) cout&lt;&lt;\"Socket created!\"&lt;&lt;endl;\n   else cout&lt;&lt;\"Error creating socket\"&lt;&lt;endl;\n   //info of the socket\n   sockaddr_in info; //sockaddr\n   info.sin_addr.s_addr=INADDR_ANY; //accept anyone\n   info.sin_family=AF_INET; \n   info.sin_port=htons(54345); //Convert the porta in the order (big-endian) of TCP/IP \n   int infolen=sizeof(info); //Contain dimension ofsockaddr\n   res=bind(slisten,(struct sockaddr*)&amp;info, infolen); \n   if(res!=SOCKET_ERROR) cout&lt;&lt;\"Connessione estabilished!\"&lt;&lt;endl; \n   else cout&lt;&lt;\"Connection error...\"&lt;&lt;endl;\n   res=listen(slisten,SOMAXCONN); \n   if(res!=SOCKET_ERROR) cout&lt;&lt;\"I'm on the port 54345\"&lt;&lt;endl; \n   else cout&lt;&lt;\"Can't listen on port 54345\"&lt;&lt;endl;\n   sockaddr_in clientinfo; //Info of the client\n   int clientinfolen=sizeof(clientinfo); \nint nthread=0;\n   while(nthread&lt;5) \n   {\n       clientinfolen= sizeof(clientinfo);\n       cout&lt;&lt;\"I'm waiting a client\"&lt;&lt;endl;\n       client=accept(slisten,(struct sockaddr*)&amp;clientinfo,&amp;clientinfolen); \n       if(client&lt;0) \n       {\n           cout&lt;&lt;\"Can't accept connection\"&lt;&lt;endl;\n           return 0;\n       }\n       cout&lt;&lt;\"Connection estabilished\"&lt;&lt;endl;\n       res=pthread_create(&amp;threadA[nthread],NULL,receive,NULL);\n       if(res!=0) cout&lt;&lt;\"Error creating thread\"&lt;&lt;endl;\n       nthread++;\n   }\n   for(int i=0;i&lt;5;i++) pthread_join(threadA[i],NULL);\n   closesocket(client); \n   closesocket(slisten); \n   WSACleanup(); \n\n   system(\"PAUSE\");\n   return 0;\n}\n</code></pre>\n\n<p>And here the client code:</p>\n\n<pre><code>#pragma comment(lib,\"ws2_32.lib\")\n#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n#include &lt;WinSock2.h&gt;\n#include &lt;Windows.h&gt;\n\nusing namespace std;\n\nint main() \n{\n     cout&lt;&lt;\"Client TCP/IP\"&lt;&lt;endl;\n     char sendbuf[256]; //Buffer to send\n     long res; \n     WSADATA wsadata; \n     SOCKET sConnect; \n     sockaddr_in conpar;\n     res=WSAStartup(MAKEWORD(2,0),&amp;wsadata); \n     if(res==0) cout&lt;&lt;\"Winsock initialized!\"&lt;&lt;endl; \n     else cout&lt;&lt;\"Winsock initializing failed\"&lt;&lt;endl;\n     sConnect=socket(AF_INET,SOCK_STREAM,0); //Create the socket\n     if(sConnect!=INVALID_SOCKET) cout&lt;&lt;\"Socket created!\"&lt;&lt;endl; \n     else cout&lt;&lt;\"Errore creating socket, error: \"&lt;&lt;WSAGetLastError()&lt;&lt;endl;\n     hostent *serverInfo; //Info of the host\n     char serverAddrStr[256]; //IP address\n     cout&lt;&lt;\"IP address: \";\n     cin.getline(serverAddrStr,256); \n\n     conpar.sin_addr.S_un.S_addr=inet_addr(serverAddrStr); //IP address to connect\n     conpar.sin_family=AF_INET; \n     conpar.sin_port=htons(54345); //Port to connect in big endian format\n     int conparlen=sizeof(conpar); \n     res=connect(sConnect,(struct sockaddr*)&amp;conpar,conparlen); //Connection\n     if(res!=SOCKET_ERROR) cout&lt;&lt;\"Connessione estabilished!\"&lt;&lt;endl; \n     else cout&lt;&lt;\"Connection failed, error: \"&lt;&lt;WSAGetLastError()&lt;&lt;endl;\n     while(1) \n     {\n         memset(&amp;sendbuf,0,sizeof(sendbuf)); \n         cout&lt;&lt;\"Send: \";\n         cin.getline(sendbuf,256);; //Get message\n         res=send(sConnect,sendbuf,strlen(sendbuf),0); \n     }\n     closesocket(sConnect); \n     WSACleanup(); \n\n     system(\"PAUSE\");\n     return 0;\n }\n</code></pre>\n\n<p>I'm using posix thread in windows system with the package installated.</p>\n"}, {"tags": ["c++", "vector", "rotation", "glm-math"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user719662"}, "edited": false, "score": 0, "creation_date": 1456327589, "post_id": 35605765, "comment_id": 58896611, "body": "from <a href=\"http://glm.g-truc.net/0.9.5/updates.html\" rel=\"nofollow noreferrer\">glm.g-truc.net/0.9.5/updates.html</a> <code>Finally, here is a list of all the functions that could use degrees in GLM 0.9.5.4 that requires radians in GLM 0.9.6: rotate (matrices and quaternions), [etc.]</code>"}, {"owner": {"reputation": 190, "user_id": 5818372, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9c26ff9864197f7460148cb62ca7635?s=128&d=identicon&r=PG&f=1", "display_name": "Gykonik", "link": "https://stackoverflow.com/users/5818372/gykonik"}, "edited": false, "score": 1, "creation_date": 1456328136, "post_id": 35605765, "comment_id": 58896999, "body": "the <i>randRotate(randomEngine))</i> part returns a degrees and glm::rotate needs a radian. Thats the solution! Thank you! :)"}], "answers": [{"comments": [{"owner": {"reputation": 190, "user_id": 5818372, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9c26ff9864197f7460148cb62ca7635?s=128&d=identicon&r=PG&f=1", "display_name": "Gykonik", "link": "https://stackoverflow.com/users/5818372/gykonik"}, "edited": false, "score": 0, "creation_date": 1456327197, "post_id": 35605930, "comment_id": 58896340, "body": "I looked it up, GLM does use Degrees to calculate rotation"}, {"owner": {"user_type": "does_not_exist", "display_name": "user719662"}, "reply_to_user": {"reputation": 190, "user_id": 5818372, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9c26ff9864197f7460148cb62ca7635?s=128&d=identicon&r=PG&f=1", "display_name": "Gykonik", "link": "https://stackoverflow.com/users/5818372/gykonik"}, "edited": false, "score": 0, "creation_date": 1456327261, "post_id": 35605930, "comment_id": 58896389, "body": "@Gykonik AFAIR, <a href=\"http://stackoverflow.com/questions/23945139/glm-function-taking-degrees-as-a-parameter-is-deprecated-when-using-radians\" title=\"glm function taking degrees as a parameter is deprecated when using radians\">stackoverflow.com/questions/23945139/&hellip;</a> - GLM can actually use both. Did you check with the value converted passed as angle converted degree-to-radians manually?"}, {"owner": {"reputation": 190, "user_id": 5818372, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9c26ff9864197f7460148cb62ca7635?s=128&d=identicon&r=PG&f=1", "display_name": "Gykonik", "link": "https://stackoverflow.com/users/5818372/gykonik"}, "edited": false, "score": 0, "creation_date": 1456327881, "post_id": 35605930, "comment_id": 58896815, "body": "Oh, you&#39;re right. But it must be degrees, right? How can I do this? I read, that you can use  <code>glm::degrees() &#47;&#47;from radians to degrees. </code>  to convert radians to degrees. Where I should pass it in in the line <code>glm::rotate(direction, randRotate(randomEngine))</code>?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 190, "user_id": 5818372, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9c26ff9864197f7460148cb62ca7635?s=128&d=identicon&r=PG&f=1", "display_name": "Gykonik", "link": "https://stackoverflow.com/users/5818372/gykonik"}, "edited": false, "score": 0, "creation_date": 1456328048, "post_id": 35605930, "comment_id": 58896941, "body": "@Gykonik I&#39;ve just added an edit. As for how to convert, you can either do it manually (<code>radians = degrees * PI &#47; 180</code> &amp; <code>degrees = radians &#47; PI * 180</code>) or use the built-in functions provided by GLM."}, {"owner": {"reputation": 190, "user_id": 5818372, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9c26ff9864197f7460148cb62ca7635?s=128&d=identicon&r=PG&f=1", "display_name": "Gykonik", "link": "https://stackoverflow.com/users/5818372/gykonik"}, "edited": false, "score": 0, "creation_date": 1456328050, "post_id": 35605930, "comment_id": 58896944, "body": "Ok, I solved it by my self. I don&#39;t know why and I also don&#39;t know, why noone else had this problem before but randRotate(XYZ) returns degrees and glm::rotate needs radians... So I converted it and now it works proper! Thank you for your help! :)"}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 1, "last_activity_date": 1456327971, "last_edit_date": 1456327971, "creation_date": 1456327085, "answer_id": 35605930, "question_id": 35605765, "link": "https://stackoverflow.com/questions/35605765/rotate-2d-vector-with-glm-proper/35605930#35605930", "title": "Rotate 2D vector with glm proper", "body": "<p>I don't recall if GLM uses Radians or Degrees for calculating rotation, but <code>2 Radians</code> is nearly a third of a full circle, which means that bullets will vary in direction by as much as 2 thirds of a whole circle. You may wish to test with smaller numbers, or else verify that GLM does indeed use Degrees to calculate rotation.</p>\n\n<p>EDIT: In the most recent version of GLM, I looked through the source code. There's a commented out version of Rotate that explicitly converts Degrees to Radians, but the accessible source code has no such explicit conversion. So I'm left to presume that it is expecting Radians, not Degrees, as your inputs for Rotation.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pTw1S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pTw1S.png\" alt=\"GLM Source Code\"></a></p>\n"}], "owner": {"reputation": 190, "user_id": 5818372, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f9c26ff9864197f7460148cb62ca7635?s=128&d=identicon&r=PG&f=1", "display_name": "Gykonik", "link": "https://stackoverflow.com/users/5818372/gykonik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1519, "favorite_count": 0, "accepted_answer_id": 35605930, "answer_count": 1, "score": 0, "last_activity_date": 1497201278, "creation_date": 1456326387, "last_edit_date": 1497201278, "question_id": 35605765, "link": "https://stackoverflow.com/questions/35605765/rotate-2d-vector-with-glm-proper", "title": "Rotate 2D vector with glm proper", "body": "<p>In a game I'm making, guns have a spread (float) and I want to give each bullet's angle a random value from range [-spread, spread]. For this I thought I could use <code>glm::rotate</code>, but the problem is that the bullets spread in almost every direction.</p>\n\n<p>The code I use is:</p>\n\n<pre><code>void Gun::fire(const glm::vec2&amp; direction, const glm::vec2&amp; position, std::vector&lt;Bullet&gt;&amp; bullets) {\n    static std::mt19937 randomEngine(time(nullptr));\n    // For offsetting the accuracy\n    std::uniform_real_distribution&lt;float&gt; randRotate(-_spread, _spread);\n\n\n    for (int i = 0; i &lt; _bulletsPerShot; i++) {\n        // Add a new bullet\n        bullets.emplace_back(position, \n                             glm::rotate(direction, randRotate(randomEngine)),\n                             _bulletDamage, \n                             _bulletSpeed);\n    }   \n}\n</code></pre>\n\n<p>(At the top I included <code>vector</code> and <code>glm/gtx/rotate_vector.hpp</code>)</p>\n"}, {"tags": ["c++", "opengl", "unicode", "combinations", "ftgl"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1456327667, "post_id": 35605714, "comment_id": 58896678, "body": "FTGL has no support for complex scripts, of which Tamil is one example."}], "answers": [{"comments": [{"owner": {"reputation": 26, "user_id": 4049242, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VszDaoPWn3Y/AAAAAAAAAAI/AAAAAAAACRQ/4YLdkGlG9Hs/photo.jpg?sz=128", "display_name": "karunanidhi mahendran", "link": "https://stackoverflow.com/users/4049242/karunanidhi-mahendran"}, "edited": false, "score": 0, "creation_date": 1456327976, "post_id": 35606173, "comment_id": 58896887, "body": "Thank you Nicol for a quick one. I will try Harbuzz."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 2, "last_activity_date": 1456327721, "creation_date": 1456327721, "answer_id": 35606173, "question_id": 35605714, "link": "https://stackoverflow.com/questions/35605714/issue-with-compound-character-font-rendering-in-opengl-using-ftgl/35606173#35606173", "title": "Issue with compound character font rendering in openGL using FTGL", "body": "<p>Welcome to the wonderful world of \"<a href=\"https://en.wikipedia.org/wiki/Complex_text_layout\" rel=\"nofollow\">complex text layout</a>\". Enjoy your stay ;)</p>\n\n<p>To put it simply, a script that uses complex text layout does not have a simple 1:1 mapping between Unicode codepoints and the glyph to be rendered. And Tamil is such a script.</p>\n\n<p>FTGL only handles scripts that have simple layout, because complex text layout is <em>complex</em> (very much so). So it's not going to be able to reproduce Tamil script correctly.</p>\n\n<p>You will need to use a layout engine like <a href=\"https://www.freedesktop.org/wiki/Software/HarfBuzz/\" rel=\"nofollow\">Harfbuzz</a> to layout your text. FTGL can still render the script, but you'll need Harfbuzz to tell you which glyphs in the font to render.</p>\n"}], "owner": {"reputation": 26, "user_id": 4049242, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VszDaoPWn3Y/AAAAAAAAAAI/AAAAAAAACRQ/4YLdkGlG9Hs/photo.jpg?sz=128", "display_name": "karunanidhi mahendran", "link": "https://stackoverflow.com/users/4049242/karunanidhi-mahendran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456327721, "creation_date": 1456326277, "question_id": 35605714, "link": "https://stackoverflow.com/questions/35605714/issue-with-compound-character-font-rendering-in-opengl-using-ftgl", "title": "Issue with compound character font rendering in openGL using FTGL", "body": "<p>In my application, FTGL renders unicode characters of <em>true type fonts</em> well <strong>except compound characters</strong>. Compound character is a combination of unicode consonant and vowel sounds. </p>\n\n<p>For example, in an indic language Tamil,  the following string input</p>\n\n<p><strong>\"\u0b95\u0bbe \u0b95\u0bbf \u0b95\u0bc0 \u0b95\u0bc1 \u0b95\u0bc2 \u0b95\u0bc6 \u0b95\u0bc7 \u0b95\u0bc8 \u0b95\u0bca \u0b95\u0bcb  \u0b95\u0bcc\"</strong></p>\n\n<p>is displayed as</p>\n\n<p><a href=\"https://i.stack.imgur.com/X2WLc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X2WLc.png\" alt=\"&quot;tamil compound characters in openGL&quot;\"></a></p>\n\n<p>in the <strong>openGL viewer</strong>.</p>\n\n<p><strong><em>output of some characters is not same as input.</em></strong></p>\n\n<p>Can anybody help on this?</p>\n\n<p>my code snippet,</p>\n\n<pre><code>    std::ifstream fontFile(\"latha.ttf\", std::ios::binary);//tamil unicode font\n    if (fontFile.fail())\n        return NULL;\n    fontFile.seekg(0, std::ios::end);\n    std::fstream::pos_type fontFileSize = fontFile.tellg();\n    fontFile.seekg(0);\n    unsigned char *fontBuffer = new unsigned char[fontFileSize];\n    fontFile.read((char *)fontBuffer, fontFileSize);        \n\n    FTBitmapFont* m_pFTFont = new FTBitmapFont(fontBuffer, fontFileSize);\n    m_pFTFont-&gt;Render(\"\u0b95\u0bbe \u0b95\u0bbf \u0b95\u0bc0 \u0b95\u0bc1 \u0b95\u0bc2 \u0b95\u0bc6 \u0b95\u0bc7 \u0b95\u0bc8 \u0b95\u0bca \u0b95\u0bcb  \u0b95\u0bcc\");\n</code></pre>\n"}, {"tags": ["c++", "lz4"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456326026, "post_id": 35605592, "comment_id": 58895678, "body": "You shouldn&#39;t print binary data as text."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1456326037, "post_id": 35605592, "comment_id": 58895687, "body": "Shouldn&#39;t a compressed string not be readable?"}, {"owner": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "edited": false, "score": 1, "creation_date": 1456326068, "post_id": 35605592, "comment_id": 58895707, "body": "I shouldn&#39;t; but when decompressing data, only the &#39;Hi&#39; part is correct"}, {"owner": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "edited": false, "score": 0, "creation_date": 1456326080, "post_id": 35605592, "comment_id": 58895719, "body": "The rest is random/ no characters"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1456326185, "post_id": 35605592, "comment_id": 58895807, "body": "@MattMatt Did you try running your code under a debugger?"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1456326186, "post_id": 35605592, "comment_id": 58895809, "body": "Why don&#39;t you check the decompressed data?"}, {"owner": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "edited": false, "score": 0, "creation_date": 1456326207, "post_id": 35605592, "comment_id": 58895831, "body": "I did try running it under a debugger  (VS15)"}, {"owner": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "edited": false, "score": 0, "creation_date": 1456326226, "post_id": 35605592, "comment_id": 58895844, "body": "The decompressed data is wrong (written into a file using binary format)"}, {"owner": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "edited": false, "score": 0, "creation_date": 1456326246, "post_id": 35605592, "comment_id": 58895856, "body": "I&#39;ll make another edit and post the binaries obtained"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1456326261, "post_id": 35605592, "comment_id": 58895864, "body": "How do you decompress the data? I&#39;m not familiar to the library, but aren&#39;t there any functions to finalize the compression?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1456326283, "post_id": 35605592, "comment_id": 58895886, "body": "@MattMatt And.. Did you step through your code, to see, if all the values of the variables, are what you expect them to be?"}, {"owner": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "edited": false, "score": 0, "creation_date": 1456326339, "post_id": 35605592, "comment_id": 58895922, "body": "I don&#39;t think there are; I just started to use the library, so I&#39;m using documentation"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 5, "creation_date": 1456326353, "post_id": 35605592, "comment_id": 58895938, "body": "I don&#39;t think that <code>const int dstBufferSize = LZ4_compressBound(sizeof(srcData));</code> is correct. <code>sizeof(srcData)</code> is most probably 4 or 8."}, {"owner": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1456326702, "post_id": 35605592, "comment_id": 58895988, "body": "@SimonKraemer Kraemer LZ4_compressBound is a LZ4 function that gives the max size of the compressed data, according to the source&#39;s size; why not use sizeof(srcData) ? dstBuffer&#39;s value is 20, so there should be enough space"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1456326809, "post_id": 35605592, "comment_id": 58896055, "body": "@SimonKraemer That should be an answer."}, {"owner": {"reputation": 2606, "user_id": 2807083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5243f429132252828f081c61979aa614?s=128&d=identicon&r=PG&f=1", "display_name": "user2807083", "link": "https://stackoverflow.com/users/2807083/user2807083"}, "edited": false, "score": 1, "creation_date": 1456326839, "post_id": 35605592, "comment_id": 58896070, "body": "Because <code>sizeof(srcData)</code> is size of pointer to your string, and is not string length."}, {"owner": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "edited": false, "score": 0, "creation_date": 1456326896, "post_id": 35605592, "comment_id": 58896099, "body": "so what should I write instead ? The char count ?"}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "edited": false, "score": 0, "creation_date": 1456327074, "post_id": 35605866, "comment_id": 58896237, "body": "Ok; but now I obtain this:  @Hi !\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550&zwnj;&#8203;\u2550\u2550\u2550\u2550\u2550\u2550\u2550&#178;&#178;&#178;&#178;"}, {"owner": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "edited": false, "score": 0, "creation_date": 1456327380, "post_id": 35605866, "comment_id": 58896457, "body": "after decompressing the string, I obtain : Hi ! without the rest of the string"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "reply_to_user": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "edited": false, "score": 0, "creation_date": 1456327452, "post_id": 35605866, "comment_id": 58896510, "body": "You know that you used the wrong size at 2 positions in your code? <code>LZ4_compressBound</code> and <code>LZ4_compress_default</code>"}], "tags": [], "owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "is_accepted": true, "score": 3, "last_activity_date": 1456326893, "creation_date": 1456326893, "answer_id": 35605866, "question_id": 35605592, "link": "https://stackoverflow.com/questions/35605592/lz4-not-compressing-strings-correctly/35605866#35605866", "title": "LZ4 not compressing strings correctly", "body": "<p>You are using <code>sizeof(srcData)</code> which will give you the size of the pointer and not of the data it points to.</p>\n\n<p>You should use <code>strlen(srcData)+1</code> instead (+1 for the <code>\\0</code>).</p>\n\n<p>Or use <code>std::string</code> and <code>std::string::size()</code> (Also with +1 for the null terminator).</p>\n"}], "owner": {"reputation": 349, "user_id": 4807452, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/287a3f25a1116d0454209eff845ec50a?s=128&d=identicon&r=PG&f=1", "display_name": "MattMatt", "link": "https://stackoverflow.com/users/4807452/mattmatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "accepted_answer_id": 35605866, "answer_count": 1, "score": 0, "last_activity_date": 1456327553, "creation_date": 1456325968, "last_edit_date": 1456327553, "question_id": 35605592, "link": "https://stackoverflow.com/questions/35605592/lz4-not-compressing-strings-correctly", "title": "LZ4 not compressing strings correctly", "body": "<p>Recently, I made an attempt to integrate <strong><em>loss less data compression</em></strong> to my game engine for loading assets; but this simple compression example <strong>does not seem to work correctly</strong>. Any suggestions ? Here is my code : </p>\n\n<pre><code> const char *srcData = \"Hi ! This is a really really really long test string !\";\n const int dstBufferSize = LZ4_compressBound(sizeof(srcData));\n char *dstData = new char[dstBufferSize];\n int bytesPassed = LZ4_compress_default(srcData, dstData,  \n                                       sizeof(srcData), \n                                       dstBufferSize); // compress data\n BOOST_LOG_TRIVIAL(info) &lt;&lt; dstData &lt;&lt; std::endl; // print compressed data\n\n delete[] dstData;\n</code></pre>\n\n<p>This is the output. Obviously, you can see it's wrong (<strong>part of the string is missing</strong>) : </p>\n\n<pre><code>[2016-02-24 15:56:47.986366] [0x00000b0c] [info]    @Hi !\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u00b2\u00b2\u00b2\u00b2\u00c0\u2580W\u00cf\u00c70\n</code></pre>\n\n<p><strong>EDIT</strong> \nWhen decompressing data, only the 'Hi' part is appearing : the rest are random characters/ no characters</p>\n\n<p><strong>EDIT 2</strong> After Simon's suggestion, I changed the code; but after decompressing the code; i only get Hi ! (nothing after it); Here is the updated code : </p>\n\n<pre><code> const char *srcData = \"Hi ! This is a really really really long test string !\";\n  const int dstBufferSize = LZ4_compressBound(strlen(srcData) + 1);\n  char *dstData = new char[dstBufferSize];\n  int bytesPassed = LZ4_compress_default(srcData, dstData,  \n                                       sizeof(srcData), \n                                       dstBufferSize);\n  BOOST_LOG_TRIVIAL(info) &lt;&lt; dstData &lt;&lt; std::endl;\n\n  std::ofstream fWriter(\"test.bin\", std::ofstream::binary);\n  fWriter &lt;&lt; dstData;\n  fWriter.close();\n\n  char* decStr = new char[strlen(srcData) + 1];\n\n  LZ4_decompress_fast(dstData, decStr, strlen(srcData) + 1);\n\n  std::cout &lt;&lt; decStr &lt;&lt; std::endl; // only Hi appearing\n\n  delete[] dstData;\n</code></pre>\n"}, {"tags": ["c++", "pointers", "casting"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 1, "creation_date": 1456325805, "post_id": 35605496, "comment_id": 58895505, "body": "What is the CPU on your machine to run this code? Are you sure the CPU uses big endian?"}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1456325851, "post_id": 35605496, "comment_id": 58895541, "body": "You are running on a little-endian machine, and to do such conversions, use type-punning through a union. Otherwise you will break strict aliasing optimizations."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1456325941, "post_id": 35605496, "comment_id": 58895606, "body": "@MikeCAT, of course, he runs on little-endian. My crystal balls says &#39;Intel&#39; :)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 1, "creation_date": 1456325955, "post_id": 35605496, "comment_id": 58895613, "body": "@ErikAlap&#228;&#228;, union&#39;s no good either :)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1456326002, "post_id": 35605496, "comment_id": 58895655, "body": "@ErikAlap&#228;&#228; Type-punning through a union is undefined in C++."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1456326080, "post_id": 35605496, "comment_id": 58895720, "body": "@molbdnilo Does not matter, all sane compilers and platform support it, it is essential for C and C++ as systems and kernel programming languages."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 2, "creation_date": 1456326140, "post_id": 35605496, "comment_id": 58895772, "body": "@ErikAlap&#228;&#228;, post it as an answer so that I can downvote ;)"}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456326147, "post_id": 35605496, "comment_id": 58895776, "body": "@SergeyA: Depends on what you do. For pointer punning, does not work."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 1, "creation_date": 1456326168, "post_id": 35605496, "comment_id": 58895791, "body": "@ErikAlap&#228;&#228;: That&#39;s your definition of a sane compiler. It ain&#39;t mine. My definition is one that implements the standard."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1456326220, "post_id": 35605496, "comment_id": 58895840, "body": "@Bathsheba The standard is the foundation, but the real world requires more than that."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1456326259, "post_id": 35605496, "comment_id": 58895863, "body": "Bull. The <code>memcpy</code> idiom is correct and no more complicated."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1456327134, "post_id": 35605496, "comment_id": 58896281, "body": "@Bathsheba Look at real-world code instead of downvoting, maybe you will learn something."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1456325814, "creation_date": 1456325814, "answer_id": 35605536, "question_id": 35605496, "link": "https://stackoverflow.com/questions/35605496/casing-pointer-unit8-t-to-uint16-t-return-reversed-representation-of-the-bytes/35605536#35605536", "title": "Casing pointer (unit8_t to uint16_t) return reversed representation of the bytes", "body": "<p>You are violating strict aliasing rule. You can't do this. As for little-endian Intel CPU, this is the least of your worries.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456326092, "post_id": 35605601, "comment_id": 58895729, "body": "Yup. So close, yet so far!"}, {"owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "edited": false, "score": 0, "creation_date": 1456326329, "post_id": 35605601, "comment_id": 58895916, "body": "Thanks..(std::uint16_t*)ptr8 . This is the UB. Right?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1456326689, "post_id": 35605601, "comment_id": 58895979, "body": "Yup. The compiler reserves the right to eat your cat if you write that then attempt to deference the pointer. (The data might have different alignment requirements on a particular platform which is a good reason why the language does not define the behaviour)."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1456326748, "post_id": 35605601, "comment_id": 58896013, "body": "@Bathsheba, not exactly. The conversion itself can not lead to cat eating -  - this is just a pointer cast. An access through it (<code>std::cout &lt;&lt; *ptr16</code>) is cat-eating UB."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456326802, "post_id": 35605601, "comment_id": 58896048, "body": "@SergeyA: Indeed you&#39;re correct. Amended, but I would still recommend putting your cat in a safe place."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456327514, "post_id": 35605601, "comment_id": 58896555, "body": "@Bathsheba, I do not have a cat. Such is life :)"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1456326078, "last_edit_date": 1456326078, "creation_date": 1456325983, "answer_id": 35605601, "question_id": 35605496, "link": "https://stackoverflow.com/questions/35605496/casing-pointer-unit8-t-to-uint16-t-return-reversed-representation-of-the-bytes/35605601#35605601", "title": "Casing pointer (unit8_t to uint16_t) return reversed representation of the bytes", "body": "<p>The behaviour of your casts are <em>undefined</em>: this is because the types are unrelated.</p>\n\n<p>If you want to coalesce two <code>uint8_t</code> into a single <code>uint16_t</code> then create an <em>array</em> of the former with 2 elements, and <code>memcpy</code> that into the <code>uint16_t</code>.</p>\n\n<p>(<strong>Don't</strong> consider a <code>union</code> of <code>uint16_t</code> and an array of <code>uint8_t</code> as the behaviour of reading back a union member that wasn't the one you used to set the union's data is <em>undefined</em> too.)</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456327488, "post_id": 35605897, "comment_id": 58896534, "body": "Eric, what is the point of using unsupported tool instead of using a supported (<code>memcpy</code>)?"}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456327701, "post_id": 35605897, "comment_id": 58896704, "body": "@SergeyA For some uses, memcpy is more natural. But the pun-through-union idiom is so common that it has to be supported by compilers, otherwise a LOT of existing code will break. Linus Torvalds himself has quarreled with the gcc people over this, and over strict aliasing optimization."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456328168, "post_id": 35605897, "comment_id": 58897020, "body": "Erik, I do not recommend invoking Linus as an authority when discussing with me. I have very little esteem of the Linux as an OS. )) On any rate, what&#39;s the benefit?"}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456385675, "post_id": 35605897, "comment_id": 58924380, "body": "@SergeyA AFAIK, unions were designed for this very thing, and it is a clear way of telling a compiler &#39;these values are of different type but may alias&#39;. Also, AFAIK, type-punning through unions is used in every major OS kernel, and a lot of other mission-critical code. As for quality of Linux - every time I read kernel code, I am impressed at how many good coders work on the kernel, and that they manage to keep up with the breakneck speed Linux evolves. But as for Torvalds, his most creative and cool invention is not Linux, it is Git."}], "tags": [], "owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "is_accepted": false, "score": 0, "last_activity_date": 1456326968, "creation_date": 1456326968, "answer_id": 35605897, "question_id": 35605496, "link": "https://stackoverflow.com/questions/35605496/casing-pointer-unit8-t-to-uint16-t-return-reversed-representation-of-the-bytes/35605897#35605897", "title": "Casing pointer (unit8_t to uint16_t) return reversed representation of the bytes", "body": "<p>To do similar conversions, you type-pun through a union, in order to avoid breaking strict aliasing optimizations. See <a href=\"http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html\" rel=\"nofollow\">strict aliasing and type punning</a></p>\n\n<p>The important quote is this: 'Strictly speaking, reading a member of a union different from the one written to is undefined in ANSI/ISO C99 except in the special case of type-punning to a char*, similar to the example below: Casting to char*. However, it is an extremely common idiom and is well-supported by all major compilers. As a practical matter, reading and writing to any member of a union, in any order, is acceptable practice.'</p>\n\n<p>Those who talk about UB can sit in their ivory towers for all I care, read the info I linked and learn something instead.</p>\n"}, {"tags": [], "owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "is_accepted": false, "score": 1, "last_activity_date": 1456331866, "last_edit_date": 1495540232, "creation_date": 1456331460, "answer_id": 35607695, "question_id": 35605496, "link": "https://stackoverflow.com/questions/35605496/casing-pointer-unit8-t-to-uint16-t-return-reversed-representation-of-the-bytes/35607695#35607695", "title": "Casing pointer (unit8_t to uint16_t) return reversed representation of the bytes", "body": "<p>As other answers and comments already mentioned: casting pointers for integral representation is undefined behavior, but what you witnessed has to do with host endianess, which is how the host interprets a series of bytes to form longer words.</p>\n\n<p>Going from a byte buffer (<code>std::array&lt;std::uint8_t, 2&gt;</code> in this case) to actual data is called <a href=\"https://en.wikipedia.org/wiki/Serialization\" rel=\"nofollow noreferrer\">deserialization</a> and the easiest way to do this host endianess unaware (assuming buffer is big endian) is to shift the bytes into integrals. For portable serialization of floats, see <a href=\"https://stackoverflow.com/questions/4733147/portability-of-binary-serialization-of-double-float-type-in-c\">this answer</a></p>\n\n<pre><code>std::array&lt;std::uint8_t, 2&gt; one_byte_array;\none_byte_array[0] = 0xff;\none_byte_array[1] = 0x00;\nuint16_t data = one_byte_array[0] &lt;&lt; 8 | one_byte_array[1];\n</code></pre>\n\n<p>Actually, <a href=\"https://stackoverflow.com/a/7180025/104774\">this answer</a> already explains it even better.</p>\n\n<p>Another way is to use <a href=\"http://beej.us/guide/bgnet/output/html/multipage/htonsman.html\" rel=\"nofollow noreferrer\">ntohs</a>.</p>\n\n<pre><code>std::array&lt;std::uint8_t, 2&gt; one_byte_array;\none_byte_array[0] = 0xff;\none_byte_array[1] = 0x00;\nuint16_t data;\nstd::memcpy(&amp;data, one_byte_array.data(), 2);\ndata = ntohs(data);\n</code></pre>\n"}], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 35605601, "answer_count": 4, "score": 1, "last_activity_date": 1456331866, "creation_date": 1456325701, "question_id": 35605496, "link": "https://stackoverflow.com/questions/35605496/casing-pointer-unit8-t-to-uint16-t-return-reversed-representation-of-the-bytes", "title": "Casing pointer (unit8_t to uint16_t) return reversed representation of the bytes", "body": "<p>I am trying to run this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstdint&gt;\n#include &lt;array&gt;\n\nint main()\n{\n    std::array&lt;std::uint8_t, 2&gt; one_byte_array;\n    one_byte_array[0] = 0xff;\n    one_byte_array[1] = 0x00;\n    auto ptr8 = one_byte_array.data();\n    std::uint16_t* ptr16 = (std::uint16_t*)ptr8;\n    std::cout &lt;&lt; *ptr16;\n    return 0\n}\n</code></pre>\n\n<p><a href=\"http://cpp.sh/8j2u6\" rel=\"nofollow\">Live Demo</a></p>\n\n<p>It outputs :</p>\n\n<blockquote>\n  <p>255 </p>\n</blockquote>\n\n<p>I think it should output:</p>\n\n<blockquote>\n  <p>65280</p>\n</blockquote>\n\n<p>Because <code>0xff</code> represent the <code>MSBs</code> of the new <code>word</code> and <code>0x00</code> represents the <code>LSBs</code> of the new <code>word</code>. What did I miss?</p>\n"}, {"tags": ["c++", "multithreading", "boost", "callback"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1456324325, "post_id": 35604748, "comment_id": 58894344, "body": "There is no callback defined on <code>boost::thread</code> finishing. Instead, you could join the thread and than call whatever callback you want yourself."}, {"owner": {"reputation": 772, "user_id": 868972, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/13527d91c8243c3f58bb293edf50cd78?s=128&d=identicon&r=PG", "display_name": "gilgamash", "link": "https://stackoverflow.com/users/868972/gilgamash"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1456324540, "post_id": 35604748, "comment_id": 58894518, "body": "Thanks for the reply. I guessed so. I think I will finally go with that or either create a conditional variable. Thanks!"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1456325839, "post_id": 35604748, "comment_id": 58895527, "body": "I don&#39;t understand the problem?  If you want to know when a thread is finishing by callback, have it call your callback thing as its last line before exiting."}, {"owner": {"reputation": 772, "user_id": 868972, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/13527d91c8243c3f58bb293edf50cd78?s=128&d=identicon&r=PG", "display_name": "gilgamash", "link": "https://stackoverflow.com/users/868972/gilgamash"}, "edited": false, "score": 0, "creation_date": 1456389957, "post_id": 35604748, "comment_id": 58926780, "body": "Two other threads are waiting for an intermediate result, that is the situation. I decided for the condVar solution. Easy to implement and works fine."}], "answers": [{"tags": [], "owner": {"reputation": 11072, "user_id": 269943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcbe123598711f40c4c7905d2d6219a4?s=128&d=identicon&r=PG", "display_name": "hkaiser", "link": "https://stackoverflow.com/users/269943/hkaiser"}, "is_accepted": false, "score": 2, "last_activity_date": 1456363007, "creation_date": 1456363007, "answer_id": 35616458, "question_id": 35604748, "link": "https://stackoverflow.com/questions/35604748/boost-thread-finished-callback-available/35616458#35616458", "title": "Boost thread finished callback available", "body": "<p>The simplest solution would be to wrap your original thread function:</p>\n\n<pre><code>#include &lt;boost/thread.hpp&gt;\n#include &lt;iostream&gt;\n\nvoid callback()\n{\n    std::cout &lt;&lt; \"callback invoked\" &lt;&lt; std::endl;\n}\n\nvoid orig_thread_func()\n{\n    std::cout &lt;&lt; \"thread function invoked\" &lt;&lt; std::endl;\n}\n\nvoid wrapper(void (*func)())\n{\n    func();        // invoke your original thread function\n    callback();    // invoke callback\n}\n\nint main()\n{\n    boost::thread t(&amp;wrapper, &amp;orig_thread_func);\n    t.join();\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 772, "user_id": 868972, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/13527d91c8243c3f58bb293edf50cd78?s=128&d=identicon&r=PG", "display_name": "gilgamash", "link": "https://stackoverflow.com/users/868972/gilgamash"}, "edited": false, "score": 0, "creation_date": 1544515782, "post_id": 53699398, "comment_id": 94292991, "body": "Seriously? Answering this question nearly three years after it was posted? Meanwhile I won&#39;t even use Boost any longer for threads, considering c++ 17 features..."}, {"owner": {"reputation": 168, "user_id": 5393174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ml1Pk.jpg?s=128&g=1", "display_name": "kgbook", "link": "https://stackoverflow.com/users/5393174/kgbook"}, "reply_to_user": {"reputation": 772, "user_id": 868972, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/13527d91c8243c3f58bb293edf50cd78?s=128&d=identicon&r=PG", "display_name": "gilgamash", "link": "https://stackoverflow.com/users/868972/gilgamash"}, "edited": false, "score": 2, "creation_date": 1544521283, "post_id": 53699398, "comment_id": 94296012, "body": "You didn&#39;t update your question that you no longer use <code>boost::thread</code>. Perhaps someone else has the same question."}], "tags": [], "owner": {"reputation": 168, "user_id": 5393174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ml1Pk.jpg?s=128&g=1", "display_name": "kgbook", "link": "https://stackoverflow.com/users/5393174/kgbook"}, "is_accepted": false, "score": 2, "last_activity_date": 1544415767, "last_edit_date": 1544415767, "creation_date": 1544415066, "answer_id": 53699398, "question_id": 35604748, "link": "https://stackoverflow.com/questions/35604748/boost-thread-finished-callback-available/53699398#53699398", "title": "Boost thread finished callback available", "body": "<p>Maybe you need a interface like <code>atexit</code> which register callback on process exit.</p>\n\n<p>So Using <code>at_thread_exit</code>, see <a href=\"https://www.boost.org/doc/libs/1_66_0/doc/html/thread/thread_management.html#thread.thread_management.this_thread.atthreadexit\" rel=\"nofollow noreferrer\">this_thread.atthreadexit</a></p>\n\n<p>Usage:</p>\n\n<pre><code>void thread_exit_callback(){\n  std::cout &lt;&lt;\"thread exit now!\" &lt;&lt;std::endl;\n}\n\nvoid thread_func(){  \n  boost::this_thread::at_thread_exit(thread_exit_callback);\n}\n\nint main() {\n  boost::thread t(thread_func);\n  ...\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 772, "user_id": 868972, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/13527d91c8243c3f58bb293edf50cd78?s=128&d=identicon&r=PG", "display_name": "gilgamash", "link": "https://stackoverflow.com/users/868972/gilgamash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1007, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544415767, "creation_date": 1456323814, "last_edit_date": 1495541960, "question_id": 35604748, "link": "https://stackoverflow.com/questions/35604748/boost-thread-finished-callback-available", "title": "Boost thread finished callback available", "body": "<p>I am looking for a way to call a callback function when a boost thread (boost version 1.60, ordinary thread, no thread group or pool) finishes. I have read this</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1667420/how-can-i-tell-reliably-if-a-boost-thread-has-exited-its-run-method\">How can I tell reliably if a boost thread has exited its run method?</a></p>\n\n<p>but I need some kind of callback. Any idea how to do this? Do I have to create some kind of a conditional variable?</p>\n\n<p>Thanks for help!</p>\n"}, {"tags": ["c++", "templates", "c++11", "lambda", "c++14"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 7, "creation_date": 1456324198, "post_id": 35604714, "comment_id": 58894243, "body": "<code>char* ret_str; strcpy(ret_str, duk_require_string(ctx, i));</code> I perceive the problem"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1456324227, "post_id": 35604714, "comment_id": 58894268, "body": "Please provide a <a href=\"http://www.stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>"}, {"owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1456324417, "post_id": 35604714, "comment_id": 58894412, "body": "the thing, is my answer cant be minimal AND complete. I think this is as minimal as it can get, and as i said, the binding works fine, and i just checked if the values contained within the lambda the moment it is executed are fine aswell. they are. So the problem solely lies within my implementation of <code>duk_get_args</code>. @PiotrSkotnicki what do you mean, am i doing something wrong here? i am copying a const <code>char*</code> to a <code>char*</code>."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1456324464, "post_id": 35604714, "comment_id": 58894450, "body": "@calcyss <code>ret_str</code> is uninitialized, you are invoking UB trying to copy something to a memory space pointed by an uninitizlied pointer"}, {"owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1456324501, "post_id": 35604714, "comment_id": 58894490, "body": "@PiotrSkotnicki really? i was under the impression that strcpy() also allocates memory. Is that not the case?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1456324552, "post_id": 35604714, "comment_id": 58894524, "body": "@calcyss <i>&quot;strcpy() also allocates memory&quot;</i> where did you learn this from ?"}, {"owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1456324663, "post_id": 35604714, "comment_id": 58894601, "body": "@PiotrSkotnicki As i said, i was <i>under the impression</i> that it does that. Guess i should read the documentation next time :D"}, {"owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "edited": false, "score": 0, "creation_date": 1456324683, "post_id": 35604714, "comment_id": 58894623, "body": "i&#39;ll answer my own question then. Thanks very much."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1456324776, "post_id": 35604714, "comment_id": 58894699, "body": "Classic <code>char*</code> problem."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1456324885, "post_id": 35604714, "comment_id": 58894779, "body": "@calcyss Your question can definitely be minimal and complete. Just keep deleting things until you can produce something that&#39;s self-sufficient that still reproduces the error. Chances are, just by doing that, you&#39;ll find the problem yourself. As-is, this is just a blob of code, which many functions undefined, that Piotr happened to notice a problem in. Not a good way to actually get help."}, {"owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "edited": false, "score": 0, "creation_date": 1456325015, "post_id": 35604714, "comment_id": 58894886, "body": "thanks. ill try to trim this question a bit and will keep what you said in mind :)"}, {"owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "edited": false, "score": 0, "creation_date": 1456325283, "post_id": 35604714, "comment_id": 58895093, "body": "are the downvotes only because my question was badly structured, or because the answer was so obvious it made the question obsolete? :D"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1456325987, "post_id": 35604714, "comment_id": 58895637, "body": "@calcyss this problem could be made minimal.  For each line, if you remove it, does the bug still happen?  <code>std::cout &lt;&lt; &quot;wrong number of arguments! retreating!&quot; &lt;&lt; std::endl;</code> I bet deleting that line would still make the code crash, and that took me 5 seconds to find.  Either you aren&#39;t able to delete lines of code, or you didn&#39;t try?  After you have finished that process, you can then work on the logic -- can you reproduce the problem skipping entire layers of your logic?  Work out where the crash happens, reproduce just that line of code and reproduce the crash?  Yes, this takes work."}, {"owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1456326092, "post_id": 35604714, "comment_id": 58895730, "body": "@Yakk, oh you meant minimal as in removing fundamentally unnecessary code parts like debug couts. ok then, sorry i didn&#39;t read the guidelines thoroughly."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1456326279, "post_id": 35604714, "comment_id": 58895879, "body": "@calcyss no, that was just an example of something that was clearly not minimal.  Piles of the rest of your code are also not required to reproduce the crash.  The end result of my above process is <code>char* ret_str; strcpy(ret_str, &quot;hello&quot;);</code> crashing, and you posting &quot;why is this <code>strcpy</code> crashing?&quot;  Or maybe you&#39;d figure it out yourself when you got to that point: finding the point where your code crashed, reproduce a sketch of the state and testing that to see if you can reproduce it is one of the steps you should go through to generate a MCVE."}, {"owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1456327064, "post_id": 35604714, "comment_id": 58896226, "body": "@Yakk. absolutely. i will keep that in mind in the future, but as to narrowing that down, i expected the problem to be with how i used template specialization, not with the specialized functions at all. I&#39;ll make sure to do better next time."}], "answers": [{"tags": [], "owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "is_accepted": true, "score": 0, "last_activity_date": 1456326943, "last_edit_date": 1456326943, "creation_date": 1456324937, "answer_id": 35605180, "question_id": 35604714, "link": "https://stackoverflow.com/questions/35604714/template-specialization-crash/35605180#35605180", "title": "Template specialization crash", "body": "<p>Turns out the problem was just my misunderstanding/me being too lazy to look up the documentation of <code>strcpy()</code>. It does not allocate memory for the target string, i had to do that. Changing the <code>get_arg&lt;std::string&gt;</code> method a bit did the trick,  with </p>\n\n<pre><code>template&lt;&gt;\ninline std::string duk_get_arg&lt;std::string&gt;(duk_context* ctx, int i)\n{\n    std::string ret(duk_require_string(ctx, i));\n    return ret;\n}\n</code></pre>\n\n<p>i now get the following output:    </p>\n\n<pre><code>&gt;&gt; var x = cnum(\"3\");\n\"3\"\n&gt;&gt; print(x);\n6\n&gt;&gt;\n</code></pre>\n\n<p>Thanks again for the quick (and obvious) answers! Made me learn a lesson too :P</p>\n"}], "owner": {"reputation": 482, "user_id": 2580799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ffa425dbeaa33b125985a1e27970c2c6?s=128&d=identicon&r=PG", "display_name": "tubberd", "link": "https://stackoverflow.com/users/2580799/tubberd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "closed_date": 1457084925, "accepted_answer_id": 35605180, "answer_count": 1, "score": -3, "last_activity_date": 1456326943, "creation_date": 1456323736, "last_edit_date": 1456326326, "question_id": 35604714, "link": "https://stackoverflow.com/questions/35604714/template-specialization-crash", "closed_reason": "Not suitable for this site", "title": "Template specialization crash", "body": "<p>Fellow SOers,</p>\n\n<p>Im using (trying to use) a combination of template specialization, integer sequences and tuples to use variadic templates to retrieve parameters from an \nAPI, depending on the method signature. My program crashes when executing the function that does just this. Can anybody give me a hint as to why this could happen? Im trying to bind a function of the signature <code>int(*)(std::string)</code>.\nHere is where the function is used/where the lambda used for binding is created:</p>\n\n<pre><code>template&lt;typename T_Return, typename ... T_Params&gt;\nvoid bindFunction(T_Return(*function_item)(T_Params ...))\n{\n    std::function&lt;T_Return(T_Params ...)&gt; proxy_func(function_item);\n    duk_function_t func = [proxy_func] (duk_context* ctx) mutable -&gt;   duk_ret_t {\n        const int n_Args = sizeof...(T_Params);\n        if(duk_get_top(ctx)==n_Args)\n        {\n            if(std::is_same&lt;T_Return, void&gt;::value)\n            {\n                detail::duk_get_args&lt;T_Return, T_Params ...&gt;(ctx, proxy_func);\n                return 0;\n            }\n            else\n            {\n                detail::duk_return(ctx, detail::duk_get_args(ctx, proxy_func)); //Program crashes in this line\n                return 1;\n            }\n            }\n            else\n            {\n                return 0;\n            }\n        };\n    m_Function = func;\n}\n</code></pre>\n\n<p>The program crashes at that specific point in code.</p>\n\n<p>And lastly, here is how i retrieve data from the API via template specialization:</p>\n\n<pre><code>template&lt;typename T&gt;\ninline T duk_get_arg(duk_context* ctx, int i);\n\ntemplate&lt;&gt;\ninline std::string duk_get_arg&lt;std::string&gt;(duk_context* ctx, int i)\n{\n    char* ret_str;\n    strcpy(ret_str, duk_require_string(ctx, i));\n    std::string ret(ret_str);\n    return ret;\n}\n\ntemplate&lt;&gt;\ninline int duk_get_arg&lt;int&gt;(duk_context* ctx, int i)\n{\n    int ret = duk_require_int(ctx, i);\n    return ret;\n}\n\ntemplate&lt;&gt;\ninline unsigned int duk_get_arg&lt;unsigned int&gt;(duk_context* ctx, int i)\n{\n    unsigned int ret = duk_require_int(ctx, i);\n    return ret;\n}\n\ntemplate&lt;&gt;\ninline float duk_get_arg&lt;float&gt;(duk_context* ctx, int i)\n{\n    float ret = (float)duk_require_number(ctx, i);\n    return ret;\n}\n\ntemplate&lt;&gt;\ninline double duk_get_arg&lt;double&gt;(duk_context* ctx, int i)\n{\n    double ret = duk_require_number(ctx, i);\n    return ret;\n}\n\ntemplate&lt;typename T_Return, typename ... T_Params, size_t ... T_Is&gt;\ninline T_Return duk_get_args_impl(duk_context* ctx, std::function&lt;T_Return(T_Params ...)&gt;&amp; function_item, std::index_sequence&lt;T_Is ...&gt;)\n{\n    using tuple_type = std::tuple&lt;T_Params ...&gt;;\n    T_Return ret;\n    ret = function_item(duk_get_arg&lt;std::tuple_element_t&lt;T_Is, tuple_type&gt;&gt;(ctx, T_Is) ...);\n    return ret;\n}\ntemplate&lt;typename T_Return, typename ... T_Params&gt;\ninline T_Return duk_get_args(duk_context* context, std::function&lt;T_Return(T_Params ...)&gt;&amp; function_item)\n{\n    T_Return ret;\n    ret = duk_get_args_impl&lt;T_Return, T_Params ...&gt;(context, function_item, std::index_sequence_for&lt;T_Params ...&gt;());\n    return ret;\n}\n</code></pre>\n\n<p>Is there anything i am missing/doing fundamentally wrong? Except for using lambdas this way? I really do hope for an answer, since i cant make out what is causing the error! Thanks in advance :)</p>\n"}]