[{"tags": ["c++", "c++11", "atomic", "abi", "memory-layout"], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556751438, "post_id": 55943712, "comment_id": 98540478, "body": "Do note that what you quoted is a note and those are non-normative.  Since this isn&#39;t a language lawyer Q though it should be fine."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556752500, "post_id": 55943712, "comment_id": 98540677, "body": "@NathanOliver But the note just emphasizes what is the case anyway, just to exclude the wrong idea people might have that <code>atomic</code> is guaranteed to be just an extraneous tag or so. I don&#39;t think that the standard  makes any assumptions of the layout of different types (with some exceptions for aggregates). The note states nothing new."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1559087663, "post_id": 55943712, "comment_id": 99307705, "body": "@NathanOliver What normativity can exist for a non-requirement?"}], "tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": false, "score": 4, "last_activity_date": 1556751352, "creation_date": 1556751352, "answer_id": 55943712, "question_id": 55943556, "link": "https://stackoverflow.com/questions/55943556/if-atomict-is-lock-free-and-has-the-same-size-as-t-will-the-memory-layout/55943712#55943712", "title": "If `atomic&lt;T&gt;` is lock free and has the same size as `T`, will the memory layout be the same?", "body": "<p><a href=\"http://eel.is/c++draft/atomics.types.generic#3\" rel=\"nofollow noreferrer\">From the standard</a>:</p>\n\n<blockquote>\n  <p>The representation of an atomic specialization need not have the same size and alignment requirement as its corresponding argument type.</p>\n</blockquote>\n\n<p>So the answer, at least for now, is no, it is not guaranteed to be the same size, nor have same alignment. But it might have, unless it doesn't and then it won't. </p>\n"}, {"comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1556751588, "post_id": 55943717, "comment_id": 98540512, "body": "The paragraph was updated with <a href=\"https://github.com/cplusplus/draft/commit/3ba8b56c0ffa84cf8fe7bf78234fb8694d4d1498\" rel=\"nofollow noreferrer\">this commit</a>."}], "tags": [], "owner": {"reputation": 35849, "user_id": 1424875, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HFA9w.png?s=128&g=1", "display_name": "nanofarad", "link": "https://stackoverflow.com/users/1424875/nanofarad"}, "is_accepted": false, "score": 5, "last_activity_date": 1556751803, "last_edit_date": 1556751803, "creation_date": 1556751387, "answer_id": 55943717, "question_id": 55943556, "link": "https://stackoverflow.com/questions/55943556/if-atomict-is-lock-free-and-has-the-same-size-as-t-will-the-memory-layout/55943717#55943717", "title": "If `atomic&lt;T&gt;` is lock free and has the same size as `T`, will the memory layout be the same?", "body": "<p>Upon reviewing <em>[atomics.types.generic]</em>, which the answer you linked quotes in part, the only remark regarding alignment is the note which you saw before:</p>\n\n<blockquote>\n  <p>Note: The representation of an atomic specialization need not have the same size as its corresponding argument type. Specializations should have the same size whenever possible, as this reduces the effort required to port existing code</p>\n</blockquote>\n\n<p>In a newer version:</p>\n\n<blockquote>\n  <p>The representation of an atomic specialization\n  need not have the same size and alignment requirement as\n  its corresponding argument type.</p>\n</blockquote>\n\n<p>Moreover, at least one architecture, IA64, <a href=\"https://stackoverflow.com/a/1800550/1424875\">gives a requirement</a> for atomic behavior of instructions such as <code>cmpxchg.acq</code>, which indicates that it's likely that a compiler targeting IA64 may need to align atomic types differently than non-atomic types, even in the absence of a lock.</p>\n\n<p>Furthermore, the use of a compiler feature such as packed structs will cause alignment to differ between atomic and non-atomic variants. Consider the following example:</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;iostream&gt;\nstruct __attribute__ ((packed)) atom{\n    char a;\n    std::atomic_long b;\n};\nstruct __attribute__ ((packed)) nonatom{\n    char a;\n    long b;\n};\n\natom atom1;\nnonatom nonatom1;\nint disp_aligns(int num) {\n    std::cout&lt;&lt; alignof(atom1.b) &lt;&lt; std::endl;\n    std::cout&lt;&lt; alignof(nonatom1.b) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>On <a href=\"https://godbolt.org/z/s60T6a\" rel=\"nofollow noreferrer\">at least one configuration</a>, the alignment of <code>atom1.b</code> will be on an 8-byte boundary, while the alignment of <code>nonatom1.b</code> will be on a 1-byte boundary. However, this is under the supposition that we requested that the structs be packed; it's not clear whether you are interested in this case.</p>\n"}], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1559086383, "creation_date": 1556750136, "last_edit_date": 1559086383, "question_id": 55943556, "link": "https://stackoverflow.com/questions/55943556/if-atomict-is-lock-free-and-has-the-same-size-as-t-will-the-memory-layout", "title": "If `atomic&lt;T&gt;` is lock free and has the same size as `T`, will the memory layout be the same?", "body": "<p><a href=\"https://stackoverflow.com/q/26164094/4967403\">This question here</a> indicates that <code>std::atomic&lt;T&gt;</code> is <em>generally</em> supposed to have the same size as <code>T</code>, and indeed that seems to be the case for gcc, clang, and msvc on x86, x64, and ARM. </p>\n\n<p>In an implementation where <code>std::atomic&lt;T&gt;</code> is always lock free for some type <code>T</code>, is it's memory layout guaranteed to be the same as the memory layout of <code>T</code>? Are there any additional special requirements imposed by <code>std::atomic</code>, such as alignment?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1556749586, "post_id": 55943453, "comment_id": 98540058, "body": "You want to <a href=\"https://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>find</code></a> an item in a container?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1556750344, "post_id": 55943453, "comment_id": 98540241, "body": "Unless your exercise or assignment requires you to use plain arrays and pointers, use <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a> (or <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> if the size of the array isn&#39;t known at compile-time) and <a href=\"https://en.cppreference.com/w/cpp/string/basic_string\" rel=\"nofollow noreferrer\"><code>std::string</code></a>. Then it would be <i>very</i> easy to <a href=\"https://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\">find</a> a specific string in the array (or vector)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9871833"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1556751045, "post_id": 55943453, "comment_id": 98540385, "body": "@Someprogrammerdude Yes for this assignment they handicapped us but I will keep that in mind for future reference thank you!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1556756717, "post_id": 55943453, "comment_id": 98541375, "body": "Perhaps you mean a <code>char**</code>?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9871833"}, "edited": false, "score": 0, "creation_date": 1556750614, "post_id": 55943490, "comment_id": 98540300, "body": "That&#39;s exactly what I needed, apologies for the vagueness. Thank you so much!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": true, "score": 1, "last_activity_date": 1556749649, "creation_date": 1556749649, "answer_id": 55943490, "question_id": 55943453, "link": "https://stackoverflow.com/questions/55943453/comparing-array-of-char-pointers-to-string/55943490#55943490", "title": "Comparing array of char pointers to string", "body": "<p>Not really clear what your problem is here. But something like:</p>\n\n<pre><code> for ( int i = 0; i &lt; 20; i++ ) {\n    if ( strcmp( input[i], \"keyword\" ) == 0 ) {\n       // found - do something\n    }\n }\n</code></pre>\n\n<p>But in C++ you would be better off using std::string and std::vector rather than messing around with C-style arrays and pointers.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9871833"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 1, "accepted_answer_id": 55943490, "answer_count": 1, "score": -1, "last_activity_date": 1556749649, "creation_date": 1556749389, "question_id": 55943453, "link": "https://stackoverflow.com/questions/55943453/comparing-array-of-char-pointers-to-string", "title": "Comparing array of char pointers to string", "body": "<p>I was wondering if and how one would compare an array of char pointers to a string.</p>\n\n<p>So say I have this array of char pointers:</p>\n\n<pre><code>char *input[20];\n</code></pre>\n\n<p>And each index of input contained a string, for example, <code>input[0]</code> contained <code>hello</code>. What would I use if I needed to do a comparison to find a keyword contained within the <code>input</code> array?</p>\n"}, {"tags": ["c++", "operator-overloading", "friend", "template-specialization"], "comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1556753815, "post_id": 55943386, "comment_id": 98540909, "body": "Well, it is not common, nor recommended, to specialize a function template."}], "answers": [{"comments": [{"owner": {"reputation": 237, "user_id": 6901555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f21f290d1767035d21e77b74b09c52?s=128&d=identicon&r=PG&f=1", "display_name": "SmileyCraft", "link": "https://stackoverflow.com/users/6901555/smileycraft"}, "edited": false, "score": 0, "creation_date": 1556807406, "post_id": 55945142, "comment_id": 98561191, "body": "I think the reason I tend to like SFINAE more is because it keeps the implementations more separate. Also because the code becomes less nested. And am I wrong to assume that SFINAE is handled at compile time as well? But I must admit that in this case, I think I like if constexpr more. The SFINAE looks very overkill with such a simple method. Although I am very new to both if constexpr and SFINAE, so I&#39;m still trying to figure out what&#39;s best."}], "tags": [], "owner": {"reputation": 4465, "user_id": 4093378, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh3.googleusercontent.com/-fQvO8M4nxAQ/AAAAAAAAAAI/AAAAAAAAB-E/YauVVLfKB5U/photo.jpg?sz=128", "display_name": "Indiana Kernick", "link": "https://stackoverflow.com/users/4093378/indiana-kernick"}, "is_accepted": true, "score": 2, "last_activity_date": 1556766138, "creation_date": 1556766138, "answer_id": 55945142, "question_id": 55943386, "link": "https://stackoverflow.com/questions/55943386/c-friend-operator-template-specialization/55945142#55945142", "title": "c++ friend operator template specialization", "body": "<blockquote>\n  <p>I tend to personally like template specialization more than branching on type traits.</p>\n</blockquote>\n\n<p>Why? <code>if constexpr</code> is a <strong>compile-time branch</strong>. The equivalent SFINAE is far less readable.</p>\n\n<pre><code>template &lt;typename R = long long&gt;\nstruct quotient_ring{\n    using Q = quotient_ring;\n    R x, m;\n\n    template &lt;typename Char&gt;\n    friend constexpr std::enable_if_t&lt;\n        std::is_arithmetic_v&lt;R&gt;,\n        std::basic_ostream&lt;Char&gt; &amp;\n    &gt;\n    operator&lt;&lt; (std::basic_ostream&lt;Char&gt; &amp;str, const Q &amp;q){\n        return str &lt;&lt; q.x &lt;&lt; '%' &lt;&lt; q.m;;\n    }\n\n    template &lt;typename Char&gt;\n    friend constexpr std::enable_if_t&lt;\n        !std::is_arithmetic_v&lt;R&gt;,\n        std::basic_ostream&lt;Char&gt; &amp;\n    &gt;\n    operator&lt;&lt; (std::basic_ostream&lt;Char&gt; &amp;str, const Q &amp;q){\n        return str &lt;&lt; '(' &lt;&lt; q.x &lt;&lt; \")%(\" &lt;&lt; q.m &lt;&lt; ')';\n    }\n};\n\nint main() {\n    quotient_ring&lt;quotient_ring&lt;&gt;&gt; ring{\n        {1, 2},\n        {3, 4}\n    };\n    std::cout &lt;&lt; ring &lt;&lt; '\\n'; // (1%2)%(3%4)\n}\n</code></pre>\n\n<p>Might I suggest putting some spaces in the output (like <code>(1 % 2) % (3 % 4)</code>) to make it more readable?</p>\n"}], "owner": {"reputation": 237, "user_id": 6901555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28f21f290d1767035d21e77b74b09c52?s=128&d=identicon&r=PG&f=1", "display_name": "SmileyCraft", "link": "https://stackoverflow.com/users/6901555/smileycraft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 2, "accepted_answer_id": 55945142, "answer_count": 1, "score": 2, "last_activity_date": 1556766138, "creation_date": 1556748918, "question_id": 55943386, "link": "https://stackoverflow.com/questions/55943386/c-friend-operator-template-specialization", "title": "c++ friend operator template specialization", "body": "<p>I have a generalized modulo struct called <code>quotient_ring</code>. The relevant bits are shown below.</p>\n\n<pre><code>template &lt;typename R = long long&gt;\nstruct quotient_ring{\n    using Q = quotient_ring;\n    R x, m;\n\n    ...\n\n    template &lt;typename T&gt;\n    friend constexpr std::basic_ostream&lt;T&gt; &amp;operator&lt;&lt; (std::basic_ostream&lt;T&gt; &amp;str, const Q &amp;q){\n        return str &lt;&lt; '(' &lt;&lt; q.x &lt;&lt; \")%(\" &lt;&lt; q.m &lt;&lt; ')';\n    }\n};\n</code></pre>\n\n<p>This operator <code>&lt;&lt;</code> would print something like <code>2</code> mod <code>7</code> as <code>(2)%(7)</code>. The reason I need the brackets is because the type <code>R</code> can become very nested. However, if <code>R</code> is only an arithmetic type, such as <code>long long</code>, I would like to print without the brackets. I found that one way to accomplish this is as follows.</p>\n\n<pre><code>template &lt;typename T&gt;\nfriend constexpr std::basic_ostream&lt;T&gt; &amp;operator&lt;&lt; (std::basic_ostream&lt;T&gt; &amp;str, const Q &amp;q){\n    if constexpr (std::is_arithmetic&lt;R&gt;::value) return str &lt;&lt; q.x &lt;&lt; '%' &lt;&lt; q.m;\n    else return str &lt;&lt; '(' &lt;&lt; q.x &lt;&lt; \")%(\" &lt;&lt; q.m &lt;&lt; ')';\n}\n</code></pre>\n\n<p>I think this is a fine solution. However, I would like to know if the same can be achieved by means of template specialization. I tend to personally like template specialization more than branching on type traits.</p>\n"}, {"tags": ["c++", "cgal"], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 11439083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eda46d05b616a7b8ca07bfd69342055?s=128&d=identicon&r=PG&f=1", "display_name": "Simone Costi", "link": "https://stackoverflow.com/users/11439083/simone-costi"}, "is_accepted": true, "score": 0, "last_activity_date": 1558077383, "creation_date": 1558077383, "answer_id": 56181424, "question_id": 55943321, "link": "https://stackoverflow.com/questions/55943321/circle-2-and-line-2-intersection-with-cgal/56181424#56181424", "title": "Circle_2 and Line_2 intersection with CGAL", "body": "<p>Solved.\nChanged my code to:</p>\n\n<pre><code>using boostRetVal = std::pair&lt;CGAL::Circular_arc_point_2&lt; CGAL::Filtered_bbox_circular_kernel_2&lt;CGAL::Circular_kernel_2&lt;CGAL::Cartesian&lt;CGAL::Gmpq&gt;, CGAL::Algebraic_kernel_for_circles_2_2&lt;CGAL::Gmpq&gt;&gt;&gt;&gt; , unsigned &gt;;\nstd::vector&lt;Intersection_cl_result&gt; out1s;\nintersection(cir,r2,back_inserter(out1s));\nconst auto v1_s =std::get&lt;0&gt;( boost::get&lt;boostRetVal&gt;(out1s[0]));\nconst auto v1s =Point_2(to_double(v1_s.x()), to_double(v1_s.y()));  \n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 11439083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eda46d05b616a7b8ca07bfd69342055?s=128&d=identicon&r=PG&f=1", "display_name": "Simone Costi", "link": "https://stackoverflow.com/users/11439083/simone-costi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 56181424, "answer_count": 1, "score": 0, "last_activity_date": 1558077383, "creation_date": 1556748595, "last_edit_date": 1556789405, "question_id": 55943321, "link": "https://stackoverflow.com/questions/55943321/circle-2-and-line-2-intersection-with-cgal", "title": "Circle_2 and Line_2 intersection with CGAL", "body": "<p>I'm trying to use CGAL to find the intersection between two objects: a Circle_2 and a Line_2. The code compiles but the result is not correct.</p>\n\n<p>This is my code:</p>\n\n<pre><code>typedef CGAL::Exact_circular_kernel_2                  Circular_k;\ntypedef CGAL::Point_2&lt;Circular_k&gt;                      Point_2;\ntypedef CGAL::Circular_arc_point_2&lt;Circular_k&gt;         CircularArcPoint_2;\ntypedef CGAL::Direction_2&lt;Circular_k&gt;                  Direction_2;\ntypedef CGAL::Line_2&lt;Circular_k&gt;                       Line_2;\ntypedef CGAL::Circle_2&lt;Circular_k&gt;                     Circle_2;\ntypedef CGAL::CK2_Intersection_traits&lt;Circular_k, Circle_2, Circle_2&gt;::type Intersection_cc_result;\ntypedef CGAL::CK2_Intersection_traits&lt;Circular_k, Circle_2, Line_2&gt;::type Intersection_cl_result;\nint main() {\n    Point_2 a(0.15, 0.15), b(-0.15, -0.15), c(-0.15, 0.15), d(0.15, -0.15);\n    double u = 0.5;\n    double theta = atan(u);\n    Line_2 r2(b, Direction_2(sin(-1.5708+theta),cos(-1.5708+theta)));\n    Circle_2 cir(Point_2 (0,0), 4);\n    std::vector&lt;Intersection_cl_result&gt; out1s;\n    intersection(cir,r2,back_inserter(out1s));\n    std::cout&lt;&lt;\"size intersection: \"&lt;&lt;out1s.size()&lt;&lt;std::endl;\n    CircularArcPoint_2 v1s;   \n    assign(v1s, out1s[0]);                                                \n    std::cout &lt;&lt;\"v1s = \"&lt;&lt; v1s &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>This is my output:</p>\n\n<blockquote>\n  <p>size intersection: 2</p>\n  \n  <p>v1s = EXT[0/1,0/1,0/1] EXT[0/1,0/1,0/1]</p>\n</blockquote>\n\n<p>I don't understand why i get this: \"v1s = EXT[0/1,0/1,0/1] EXT[0/1,0/1,0/1]\n\". The point \"v1s\" should be the first result from the intersection of the\nCircle_2: \"cir\" and the Line_2: \"r2\".</p>\n\n<p>What could i do to define this intersection point?</p>\n"}, {"tags": ["c++", "c++11", "reference"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 5, "creation_date": 1556748124, "post_id": 55943188, "comment_id": 98539660, "body": "What do you think <code>ri = i2;</code> does?"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1556748302, "post_id": 55943188, "comment_id": 98539715, "body": "What would <code>ri = 7;</code> do? Same thing."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1556748838, "post_id": 55943188, "comment_id": 98539871, "body": "<code>ri</code> <i>refers</i> to <code>i1</code>, meaning that when you write <code>ri = i2;</code>, you effectively achieve <code>i1 = i2;</code>."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1556753084, "post_id": 55943188, "comment_id": 98540775, "body": "A reference in C++ is more like an alias.  When an argument is passed to a function by reference, it is <i>as if</i> the function was working directly on the argument.  (The details of how a reference does its magic is an implementation detail.  Most likely done as a pointer, under-the-covers, but that implementation detail is not exposed or part of the standard.)"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1556757122, "last_edit_date": 1556757122, "creation_date": 1556748575, "answer_id": 55943316, "question_id": 55943188, "link": "https://stackoverflow.com/questions/55943188/why-a-reference-is-said-to-be-unchanged-in-c-primer-5th-how-ever-this-followi/55943316#55943316", "title": "Why a reference is said to be unchanged in C++ primer 5th, how ever this following code works?", "body": "<blockquote>\n  <p>Why a reference is said to be unchanged in C++ primer 5th, how ever this following code works?</p>\n</blockquote>\n\n<p>Because it is possible to change the value of an integer. And that is what <code>ri = i2</code> does. The reference is unaffected; it still refers to the same object. The value of the referred object is affected. The result is same as if you had written <code>i1 = i2</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "is_accepted": false, "score": 5, "last_activity_date": 1556748712, "creation_date": 1556748712, "answer_id": 55943340, "question_id": 55943188, "link": "https://stackoverflow.com/questions/55943188/why-a-reference-is-said-to-be-unchanged-in-c-primer-5th-how-ever-this-followi/55943340#55943340", "title": "Why a reference is said to be unchanged in C++ primer 5th, how ever this following code works?", "body": "<p><code>ri</code> doesn't change what it's pointing to, it changes the value of what it's pointing to. So if you print the value if <code>i1</code> you will see it is now equal to <code>0</code>, and if you change the value of <code>i2</code> you will see it doesn't affect <code>ri</code>:</p>\n\n<pre><code>int main() {\n    int i1 = 1, i2 = 0;\n    int&amp; ri = i1;\n    ri = i2; // i1 == 0\n    std::cout &lt;&lt; \"i1 \" &lt;&lt; i1 &lt;&lt; \"\\n\";\n    i2 = 5;\n    std::cout &lt;&lt; \"i2 \" &lt;&lt; i2 &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>And the output is </p>\n\n<blockquote>\n  <p>i1 0<br>\n  i2 5</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 2, "last_activity_date": 1556748724, "creation_date": 1556748724, "answer_id": 55943343, "question_id": 55943188, "link": "https://stackoverflow.com/questions/55943188/why-a-reference-is-said-to-be-unchanged-in-c-primer-5th-how-ever-this-followi/55943343#55943343", "title": "Why a reference is said to be unchanged in C++ primer 5th, how ever this following code works?", "body": "<p>To get a better understanding,  try this: </p>\n\n<pre><code>int i1 = 1, i2 = 0;\n\nint &amp;ri = i1;          // ri refers to i1 and this won't change afterwards\ncout &lt;&lt; ri &lt;&lt;endl;     // same value as i1, so 1\ni1 = 3; \ncout &lt;&lt; ri &lt;&lt;endl;     // still same value as i1, but now it's 3\nri = 5; \ncout &lt;&lt; i1 &lt;&lt;endl;     // same value as ri since both name refer to the same variable, so 5\n\nri = i2;               // ri still refers to i1, but copies value of i2 in it\ncout &lt;&lt; i1&lt;&lt;endl;      // i1 was overwritten through ri\nri = 7;  \ncout &lt;&lt; i1 &lt;&lt; endl     // i1 was overwritten again through ri\n     &lt;&lt;i2 &lt;&lt;endl;      // but i2 stays unchanged, since ri does not refer to it.  \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2594482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45bcd5d9991971de6486b8a014141e80?s=128&d=identicon&r=PG", "display_name": "LEI1ZH", "link": "https://stackoverflow.com/users/2594482/lei1zh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1556757122, "creation_date": 1556747797, "last_edit_date": 1556748305, "question_id": 55943188, "link": "https://stackoverflow.com/questions/55943188/why-a-reference-is-said-to-be-unchanged-in-c-primer-5th-how-ever-this-followi", "title": "Why a reference is said to be unchanged in C++ primer 5th, how ever this following code works?", "body": "<p>In the book, we explain that there is no way to make a reference refer to different object, how ever the following code works for c++ 11.</p>\n\n<pre><code>int i1 = 1, i2 = 0;\nint &amp;ri = i1;\nri = i2;\n</code></pre>\n"}, {"tags": ["c++", "ostringstream", "log4cpp", "heap-fragmentation"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1556748196, "post_id": 55943170, "comment_id": 98539689, "body": "Why did yours fragment? Custom allocator with a pool could easily allow you to fix that."}, {"owner": {"reputation": 12607, "user_id": 573082, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b497db0e7109deccad7e124f120024ad?s=128&d=identicon&r=PG", "display_name": "theateist", "link": "https://stackoverflow.com/users/573082/theateist"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556748277, "post_id": 55943170, "comment_id": 98539709, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6, I updated my title. I think my main question is, from people experience can I use log4cpp safely and not worry about heap fragmentations when build with VS2015 on windows?"}, {"owner": {"reputation": 12607, "user_id": 573082, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b497db0e7109deccad7e124f120024ad?s=128&d=identicon&r=PG", "display_name": "theateist", "link": "https://stackoverflow.com/users/573082/theateist"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1556748431, "post_id": 55943170, "comment_id": 98539748, "body": "@RetiredNinja, you&#39;re probably right, but without getting to the details, I would like to use log4cpp library for logging and just want to be sure that I won&#39;t get heap fragmentations."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556748783, "post_id": 55943170, "comment_id": 98539858, "body": "How much logging are you doing that fragmentation is a problem? Fragmentation is normally only a problem with long-lived allocations and I&#39;m not sure how a logger would have many of those."}, {"owner": {"reputation": 12607, "user_id": 573082, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b497db0e7109deccad7e124f120024ad?s=128&d=identicon&r=PG", "display_name": "theateist", "link": "https://stackoverflow.com/users/573082/theateist"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556749343, "post_id": 55943170, "comment_id": 98540006, "body": "@tadman, my application runs for several hours and havily uses logging framework. You might argue that I need a different design then, but it&#39;s not my code. So, my question is, based on your/someone&#39;s experience can I use <code>log4cpp</code> and not worry about the frag?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1556749542, "post_id": 55943170, "comment_id": 98540052, "body": "In C++, there are no guarantees about fragmentation.  You could tell <code>std::ostringstream</code> to use a fixed length string.  Allocate the string first, then pass to <code>std::ostringstream</code> (see constructor).  Note:  you&#39;ll have to ensure that the logging text does not exceed the length of the string."}, {"owner": {"reputation": 12607, "user_id": 573082, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b497db0e7109deccad7e124f120024ad?s=128&d=identicon&r=PG", "display_name": "theateist", "link": "https://stackoverflow.com/users/573082/theateist"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1556749648, "post_id": 55943170, "comment_id": 98540071, "body": "@ThomasMatthews, I want to use <code>log4cpp</code> framework! I don&#39;t think I need to deal with all that fixed length since it&#39;s a framework. So, my question is, based on someone&#39;s experience can I use log4cpp and not worry about the frag?"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1556750076, "post_id": 55943170, "comment_id": 98540179, "body": "I can&#39;t speak for fragmentation because I didn&#39;t have an issue so I didn&#39;t care. That said, I used it in an app that&#39;s part of the backend for a huge game and had no issues. I&#39;m having a hard time imagining a way a logger could cause a fragmentation problem too, logs are ephemeral."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1556750471, "post_id": 55943170, "comment_id": 98540261, "body": "It&#39;s not the run-time of the process that matters, but the lifetime of the individual allocations. Fragmentation normally occurs when you have a pathologically abusive allocation strategy, often unintentionally, where the heap can&#39;t be cleaned up because there&#39;s inconvenient and long-lived allocations in it. Loggers should be using very few allocations, just the usual file-streaming ones, and everything should be short-lived."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1556750518, "post_id": 55943170, "comment_id": 98540269, "body": "I&#39;d test your logger under the most demanding conditions possible, like hammer it as hard as you can for 20+ hours, to see if it causes any fragmentation. My guess is it won&#39;t. This is usually the fault of other code that has lots of awkward, long-lived allocations. If you need to implement a logger, use a <a href=\"https://en.wikipedia.org/wiki/Circular_buffer\" rel=\"nofollow noreferrer\">ring buffer</a> so you allocate once and use that for everything. This is how a lot of &quot;zero allocation&quot; libraries do it."}], "owner": {"reputation": 12607, "user_id": 573082, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b497db0e7109deccad7e124f120024ad?s=128&d=identicon&r=PG", "display_name": "theateist", "link": "https://stackoverflow.com/users/573082/theateist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556748474, "creation_date": 1556747704, "last_edit_date": 1556748474, "question_id": 55943170, "link": "https://stackoverflow.com/questions/55943170/does-log4cpp-takes-care-of-heap-fragmentations-issue", "title": "Does log4cpp takes care of heap fragmentations issue?", "body": "<p>I develop on windows 64bit with VS2015.</p>\n\n<p>I used a custom logger but it suffered from heap fragmentations.\nI found <code>log4cpp</code> library. According to the source code it uses <code>std::ostringstream</code> internally. \nMy questions:</p>\n\n<ul>\n<li>I think my main question is can I use <code>log4cpp</code> safely and not worry about heap fragmentations?</li>\n<li>The first question probably leads to the questions how does <code>std::ostringstream</code> work internally to prevent heap fragmentations? Does it have multiple buffers in stack for small strings or does it always allocates a new string in heap?</li>\n</ul>\n"}, {"tags": ["c++", "cmake", "ninja"], "owner": {"reputation": 940, "user_id": 2808783, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/66lPY.png?s=128&g=1", "display_name": "Ivan Romanov", "link": "https://stackoverflow.com/users/2808783/ivan-romanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556752663, "creation_date": 1556747073, "last_edit_date": 1556752663, "question_id": 55943079, "link": "https://stackoverflow.com/questions/55943079/why-object-depends-leads-cycly-error-with-ninja-generator", "title": "Why OBJECT_DEPENDS leads cycly error with Ninja generator?", "body": "<p>I need to make a hack in my CMake project. With this hack one of sources files must be compiled before any other files. It works with Makefile generator. But with Ninja generator I get error <code>ninja: error: dependency cycle:</code>. I tried to find any info how to fix this but no success. </p>\n\n<p><strong>Simplified <code>CMakeLists.txt</code>:</strong></p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0)\n\nset(CMAKE_VERBOSE_MAKEFILE ON)\n\nproject(pchtest CXX)\nset(CMAKE_VERBOSE_MAKEFILE ON)\n\nset(CMAKE_INCLUDE_CURRENT_DIR ON)\n\nadd_executable(${PROJECT_NAME} \"main.cpp\" \"pch.cpp\" \"pch.h\" \"pch_dummy.cpp\")\n\nset_source_files_properties(pch.cpp PROPERTIES OBJECT_DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/CMakeFiles/pchtest.dir/pch_dummy.cpp.o)\n\nadd_custom_command(OUTPUT ${CMAKE_CURRENT_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/pch.h.gch\n    COMMAND mv ${CMAKE_CURRENT_BINARY_DIR}/CMakeFiles/pchtest.dir/pch.cpp.o ${CMAKE_CURRENT_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/pch.h.gch\n    COMMAND cp ${CMAKE_CURRENT_BINARY_DIR}/CMakeFiles/pchtest.dir/pch_dummy.cpp.o ${CMAKE_CURRENT_BINARY_DIR}/CMakeFiles/pchtest.dir/pch.cpp.o\n    COMMAND touch ${CMAKE_CURRENT_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/pch.h.gch\n\n    DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/CMakeFiles/pchtest.dir/pch.cpp.o\n    COMMENT \"Copy PCH\"\n)\n\nset_source_files_properties(main.cpp PROPERTIES OBJECT_DEPENDS ${CMAKE_CURRENT_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/pch.h.gch)\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>ninja: error: dependency cycle: CMakeFiles/pch.h.gch -&gt; CMakeFiles/pchtest.dir/pch.cpp.o -&gt; CMakeFiles/pchtest.dir/pch_dummy.cpp.o -&gt; cmake_object_order_depends_target_pchtest -&gt; CMakeFiles/pch.h.gch\n</code></pre>\n\n<p>So how to fix this?</p>\n"}, {"tags": ["c++", "templates", "template-meta-programming", "stdarray"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1556772879, "post_id": 55943023, "comment_id": 98544274, "body": "What&#39;s wrong with iterating over the array?"}, {"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1556781107, "post_id": 55943023, "comment_id": 98547229, "body": "@PasserBy. How can I construct a fixed-size <code>std::array</code> compile-time in a loop?"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1556784373, "post_id": 55943023, "comment_id": 98548831, "body": "<code>std::array&lt;int, N&gt; arr; for(int i = 0; i &lt; N; i++) arr[i] = ranges[i].second - ranges[i].first; return arr;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 3, "last_activity_date": 1556750041, "creation_date": 1556750041, "answer_id": 55943544, "question_id": 55943023, "link": "https://stackoverflow.com/questions/55943023/compute-differences-of-pair-elements-in-array-of-pairs-compile-time/55943544#55943544", "title": "Compute differences of pair elements in array of pairs compile time", "body": "<p>If you can use C++14 (so <code>std::make_index_sequence</code>/<code>std::index_sequence</code>) it's easy </p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;utility&gt;\n\ntemplate &lt;std::size_t N, std::size_t ... Is&gt;\nconstexpr std::array&lt;int, N&gt;  makeArrayHelper\n    (std::array&lt;std::pair&lt;int, int&gt;, N&gt; const &amp; r,\n     std::index_sequence&lt;Is...&gt; const)\n { return {{ r[Is].second - r[Is].first ... }}; }\n\ntemplate &lt;std::size_t N&gt;\nconstexpr auto makeArray (std::array&lt;std::pair&lt;int, int&gt;, N&gt; const &amp; r)\n { return makeArrayHelper(r, std::make_index_sequence&lt;N&gt;{}); }\n\nint main ()\n {\n   constexpr std::array&lt;int, 2&gt; a\n      = makeArray&lt;2&gt;({{ {1,3}, {2,9} }}); // a = {2, 7}\n\n   constexpr std::array&lt;int, 1&gt; b\n      = makeArray&lt;1&gt;({{ {5,6} }}); // b = {1}\n\n   static_assert( a[0] == 2, \"!\" );\n   static_assert( a[1] == 7, \"!\" );\n   static_assert( b[0] == 1, \"!\" );\n }\n</code></pre>\n\n<p>P.s.: I've renamed <code>makeArray()</code> the function to reduce the risk of name collision with the <code>make_array()</code> in <code>std::experimental</code></p>\n"}, {"comments": [{"owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "edited": false, "score": 0, "creation_date": 1557132867, "post_id": 55948188, "comment_id": 98649865, "body": "I completely overlooked the loop being <code>constexpr</code>. Elegant and simple. Thanks."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1556784744, "creation_date": 1556784744, "answer_id": 55948188, "question_id": 55943023, "link": "https://stackoverflow.com/questions/55943023/compute-differences-of-pair-elements-in-array-of-pairs-compile-time/55948188#55948188", "title": "Compute differences of pair elements in array of pairs compile time", "body": "<p>You can simply do the loop:</p>\n\n<pre><code>template &lt;std::size_t N&gt;\nconstexpr std::array&lt;int, N&gt; make_array(\n        const std::array&lt;std::pair&lt;int, int&gt;, N&gt;&amp; ranges)\n{\n    std::array&lt;int, N&gt; res{};\n\n    for (std::size_t i = 0; i != N; ++i) {\n        res[i] = ranges[i].second - ranges[i].first;\n    }\n    return res;\n}\n</code></pre>\n\n<p>It might be <code>constexpr</code> since C++17.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/1b8fb4f2ac42510b\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 4940, "user_id": 1673574, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/ubyAU.png?s=128&g=1", "display_name": "Chiel", "link": "https://stackoverflow.com/users/1673574/chiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 55948188, "answer_count": 2, "score": 2, "last_activity_date": 1556784744, "creation_date": 1556746742, "last_edit_date": 1556750130, "question_id": 55943023, "link": "https://stackoverflow.com/questions/55943023/compute-differences-of-pair-elements-in-array-of-pairs-compile-time", "title": "Compute differences of pair elements in array of pairs compile time", "body": "<p>In the code below, I aim to construct an array of <code>N</code> elements that contains the differences between two <code>std::pair</code> elements compile time. Is there a way to achieve this using templates, as it has to work for arbitrary size <code>N</code>?</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;utility&gt;\n\ntemplate&lt;int N&gt;\nstd::array&lt;int, N&gt; make_array(\n        const std::array&lt;std::pair&lt;int, int&gt;, N&gt;&amp; ranges)\n{\n    // Need to construct array compile time with difference between pair elements.\n}\n\nint main()\n{\n    std::array&lt;int, 2&gt; a = make_array&lt;2&gt;({{ {1,3}, {2,9} }}); // a = {2, 7}\n    std::array&lt;int, 1&gt; b = make_array&lt;1&gt;({{ {5,6} }}); // b = {1}\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 6, "creation_date": 1556746474, "post_id": 55942970, "comment_id": 98539217, "body": "How do you think <code>johnmayer</code> should be splitted into <code>name</code> and <code>last_name</code>?"}, {"owner": {"reputation": 367, "user_id": 10930163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a82a32b93373e472ee666e96b00d1b5?s=128&d=identicon&r=PG&f=1", "display_name": "anonmess", "link": "https://stackoverflow.com/users/10930163/anonmess"}, "edited": false, "score": 1, "creation_date": 1556746739, "post_id": 55942970, "comment_id": 98539282, "body": "Also, how does the compiler know how the data you&#39;re reading should be stored in <code>test_struct</code>?"}, {"owner": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 1, "creation_date": 1556746979, "post_id": 55942970, "comment_id": 98539342, "body": "Seems like you&#39;re expecting a lot of magic here."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1556747333, "post_id": 55942970, "comment_id": 98539434, "body": "This might help: <a href=\"https://stackoverflow.com/questions/23399931/c-reading-string-from-binary-file-using-fstream\" title=\"c reading string from binary file using fstream\">stackoverflow.com/questions/23399931/&hellip;</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556747365, "post_id": 55942970, "comment_id": 98539444, "body": "Important note: You cannot write a <code>std::string</code> to a file. A <code>std::string</code> often points to a dynamic buffer containing the character data. Writing the <code>string</code> only writes the pointer to the file, and that pointer is worthless outside of the program that spawned it. If you read the file in later you will either have a <code>string</code> pointing to memory it does not own or two <code>string</code>s  both pointing to the same buffer. Either will bring your program to an ill doom."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1556748456, "post_id": 55943261, "comment_id": 98539755, "body": "Splitting the name into first name and surname would be easier if there was some kind of sentinel character, like tab, comma or space, to indicate where the first name ends and the surname begins."}, {"owner": {"reputation": 95, "user_id": 10942161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2O-mNIkuoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca4uC1fQh5VPyzO_iJz1V4SCHJlPg/mo/photo.jpg?sz=128", "display_name": "Tiago Bachiega de Almeida", "link": "https://stackoverflow.com/users/10942161/tiago-bachiega-de-almeida"}, "edited": false, "score": 0, "creation_date": 1556760052, "post_id": 55943261, "comment_id": 98541946, "body": "Thanks for the help! It&#39;s indeed an interesting aproach. Will try something like this. Best regards"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1556748282, "creation_date": 1556748282, "answer_id": 55943261, "question_id": 55942970, "link": "https://stackoverflow.com/questions/55942970/how-to-save-text-file-to-struct-with-string-in-c/55943261#55943261", "title": "How to save text file to struct with string in C++", "body": "<p>You'll have to develop a specific algorithm, since there is no separator character between the \"fields\".</p>\n\n<pre><code>static const std::string input_text = \"johnmayer24ericclapton32\";\nstatic const std::string alphabet = \"abcdefghijklmnopqrstuvwxyz\";\nstatic const std::string decimal_digit = \"0123456789\";\n\nstd::string::size_type position = 0;\nstd::string            artist_name;\nposition = input_text.find_first_not_of(alphabet);\nif (position != std::string::npos)\n{\n   artist_name = input_text.substr(0, position - 1);\n}\nelse\n{\n   cerr &lt;&lt; \"Artist name not found.\";\n   return EXIT_FAILURE;\n}\n</code></pre>\n\n<p>Similarly, you can extract out the number, then use <code>std::stoi</code> to convert the numeric string to internal representation number.</p>\n\n<p><strong>Edit 1:  Splitting the name</strong><br>\nSince there is no separator character between the first and last name, you may want to have a list of possible first names and use that to find out where the first name ends and the surname starts.</p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 10942161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2O-mNIkuoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca4uC1fQh5VPyzO_iJz1V4SCHJlPg/mo/photo.jpg?sz=128", "display_name": "Tiago Bachiega de Almeida", "link": "https://stackoverflow.com/users/10942161/tiago-bachiega-de-almeida"}, "edited": false, "score": 0, "creation_date": 1556759596, "post_id": 55944090, "comment_id": 98541864, "body": "Thank you for the help! I will reformulate my application basead on theses informations. Ps: Wished every stackoverflow user was open minded as you was on answering questions. What may be trivial to some, may be not so trivial to others. Thanks again"}], "tags": [], "owner": {"reputation": 8345, "user_id": 421178, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9fa51d322613d477fd82330340c46ff3?s=128&d=identicon&r=PG", "display_name": "Casey", "link": "https://stackoverflow.com/users/421178/casey"}, "is_accepted": true, "score": 1, "last_activity_date": 1556755394, "last_edit_date": 1556755394, "creation_date": 1556755013, "answer_id": 55944090, "question_id": 55942970, "link": "https://stackoverflow.com/questions/55942970/how-to-save-text-file-to-struct-with-string-in-c/55944090#55944090", "title": "How to save text file to struct with string in C++", "body": "<p>Serialization/Deserialization of strings is tricky.</p>\n\n<p>As binary data the convention is to output the length of the string first, then the string data.</p>\n\n<p><a href=\"https://isocpp.org/wiki/faq/serialization#serialize-binary-format\" rel=\"nofollow noreferrer\">https://isocpp.org/wiki/faq/serialization#serialize-binary-format</a></p>\n\n<blockquote>\n  <ul>\n  <li>String data is tricky because you have to unambiguously know when the string\u2019s body stops. You can\u2019t unambiguously terminate all strings with a '\\0' if some string might contain that character; recall that std::string can store '\\0'. The easiest solution is to write the integer length just before the string data. Make sure the integer length is written in \u201cnetwork format\u201d to avoid sizeof and endian problems (see the solutions in earlier bullets).</li>\n  </ul>\n</blockquote>\n\n<p>That way when reading the data back in you know the length of the string to expect and can preallocate the size of the string then just read that much data from the stream.</p>\n\n<p>If your data is a non-binary (text) format it's a little trickier:</p>\n\n<p><a href=\"https://isocpp.org/wiki/faq/serialization#serialize-text-format\" rel=\"nofollow noreferrer\">https://isocpp.org/wiki/faq/serialization#serialize-text-format</a></p>\n\n<blockquote>\n  <ul>\n  <li>String data is tricky because you have to unambiguously know when the string\u2019s body stops. You can\u2019t unambiguously terminate all strings with a '\\n' or '\"' or even '\\0' if some string might contain those characters. You might want to use C++ source-code escape-sequences, e.g., writing '\\' followed by 'n' when you see a newline, etc. After this transformation, you can either make strings go until end-of-line (meaning they are deliminated by '\\n') or you can delimit them with '\"'.</li>\n  <li>If you use C++-like escape-sequences for your string data, be sure to always use the same number of hex digits after '\\x' and '\\u'. I typically use 2 and 4 digits respectively. Reason: if you write a smaller number of hex digits, e.g., if you simply use stream &lt;&lt; \"\\x\" &lt;&lt; hex &lt;&lt; unsigned(theChar), you\u2019ll get errors when the next character in the string happens to be a hex digit. E.g., if the string contains '\\xF' followed by 'A', you should write \"\\x0FA\", not \"\\xFA\".</li>\n  <li>If you don\u2019t use some sort of escape sequence for characters like '\\n', be careful that the operating system doesn\u2019t mess up your string data. In particular, if you open a std::fstream without std::ios::binary, some operating systems translate end-of-line characters.\n  Another approach for string data is to prefix the string\u2019s data with an integer length, e.g., to write \"now is the time\" as 15:now is the time. Note that this can make it hard for people to read/write the file, since the value just after that might not have a visible separator, but you still might find it useful.</li>\n  </ul>\n</blockquote>\n\n<p>Text-based serialization/deserialization convention varies but one field per line is an accepted practice.</p>\n"}], "owner": {"reputation": 95, "user_id": 10942161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2O-mNIkuoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca4uC1fQh5VPyzO_iJz1V4SCHJlPg/mo/photo.jpg?sz=128", "display_name": "Tiago Bachiega de Almeida", "link": "https://stackoverflow.com/users/10942161/tiago-bachiega-de-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 55944090, "answer_count": 2, "score": -2, "last_activity_date": 1556755394, "creation_date": 1556746321, "question_id": 55942970, "link": "https://stackoverflow.com/questions/55942970/how-to-save-text-file-to-struct-with-string-in-c", "title": "How to save text file to struct with string in C++", "body": "<p>I'm wanting to save the content of a file to a struct. I've tried to use seekg and read to write to it but it isn't working.</p>\n\n<p>My file is something like:</p>\n\n<pre><code>johnmayer24ericclapton32\n</code></pre>\n\n<p>I want to store the name, the last name and the age in a struct like that</p>\n\n<pre><code>typedef struct test_struct{\n    string name;\n    string last_name;\n    int age;\n} test_struct;\n\n</code></pre>\n\n<p>Here is my code</p>\n\n<pre><code>int main(){\n\n    test_struct ts;\n    ifstream data_base;\n\n    data_base.open(\"test_file.txt\");\n\n    data_base.seekg(0, ios_base::beg);\n    data_base.read(ts, sizeof(test_struct));\n\n    data_base.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>It doesn't compile as it don't want me to use ts on the read function. Is there another way - or a way - of doing it?</p>\n"}, {"tags": ["c++", "multithreading", "destructor"], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 8, "last_activity_date": 1556746989, "creation_date": 1556746989, "answer_id": 55943065, "question_id": 55942966, "link": "https://stackoverflow.com/questions/55942966/is-it-safe-to-hold-a-stdlock-guard-in-the-destructor/55943065#55943065", "title": "Is it safe to hold a std::lock_guard in the destructor?", "body": "<p>According to the standard in [class.dtor]/9,</p>\n\n<blockquote>\n  <p>After executing the body of the destructor and destroying any automatic objects allocated within the body, a\n  destructor for class <code>X</code> calls the destructors for <code>X</code>\u2019s direct non-variant non-static data members, the destructors\n  for <code>X</code>\u2019s non-virtual direct base classes and, if <code>X</code> is the type of the most derived class (15.6.2), its destructor\n  calls the destructors for <code>X</code>\u2019s virtual base classes. ...</p>\n</blockquote>\n\n<p>This answers your question in the affirmative.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556799140, "post_id": 55952053, "comment_id": 98556212, "body": "And perhaps that&#39;s exactly what this class is doing - managing a subobject that requires synchronisation."}, {"owner": {"reputation": 71, "user_id": 10309079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/756ec2f9c01bd18b4ec78d3de3031a03?s=128&d=identicon&r=PG&f=1", "display_name": "shpc", "link": "https://stackoverflow.com/users/10309079/shpc"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556803051, "post_id": 55952053, "comment_id": 98558583, "body": "@Lightness Races in Orbit: A subobject is never accessed except from its parent object. So it is not needed to hold the object&#39;s mutex because it must be assured that at constructrion or desctruction only one thread does access the object."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556803088, "post_id": 55952053, "comment_id": 98558612, "body": "The subobject could have been externally exposed and, even if it weren&#39;t, holding a mutex could be important for managing the shutdown of the encapsulated subobject."}, {"owner": {"reputation": 71, "user_id": 10309079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/756ec2f9c01bd18b4ec78d3de3031a03?s=128&d=identicon&r=PG&f=1", "display_name": "shpc", "link": "https://stackoverflow.com/users/10309079/shpc"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556866681, "post_id": 55952053, "comment_id": 98580212, "body": "@Lightness Races in Orbit: Accessing an exposed subobject that is protected by a mutex that is being destructed is suspicious. From a practical stand point of view I would reject it on a code review."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556875388, "post_id": 55952053, "comment_id": 98584470, "body": "It isn&#39;t being destructed. Not yet."}, {"owner": {"reputation": 71, "user_id": 10309079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/756ec2f9c01bd18b4ec78d3de3031a03?s=128&d=identicon&r=PG&f=1", "display_name": "shpc", "link": "https://stackoverflow.com/users/10309079/shpc"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556878731, "post_id": 55952053, "comment_id": 98586365, "body": "@Lightness Races in Orbit: If another thread would access the mutex during execution of the the body of the destructor (while the mutex is still valid) how could another thread be prevented from acccessing the mutex when it is destructed?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556879159, "post_id": 55952053, "comment_id": 98586579, "body": "Because if the thread is owned by the subobject then you are currently performing cleanup operations and telling it to close that thread and cease operation. That would literally be the purpose of this code."}, {"owner": {"reputation": 71, "user_id": 10309079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/756ec2f9c01bd18b4ec78d3de3031a03?s=128&d=identicon&r=PG&f=1", "display_name": "shpc", "link": "https://stackoverflow.com/users/10309079/shpc"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556889153, "post_id": 55952053, "comment_id": 98591767, "body": "@Lightness Races in Orbit: In a clean design this communication would be done via a mutex of the subobject: The subobject would have a state that is finally going to <i>Terminated</i>. This state would be protected by the subobject&#39;s mutex."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556891738, "post_id": 55952053, "comment_id": 98593308, "body": "And if two subobjects, that use threading, share access to a third subobject? That needs protection. I reckon you&#39;re overthinking it. A lock in a destructor is not mad."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556893056, "post_id": 55952053, "comment_id": 98594053, "body": "Not, you don&#39;t want a global mutex. The mutex should be owned by the thing that&#39;s responsible for the protected objects."}, {"owner": {"reputation": 71, "user_id": 10309079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/756ec2f9c01bd18b4ec78d3de3031a03?s=128&d=identicon&r=PG&f=1", "display_name": "shpc", "link": "https://stackoverflow.com/users/10309079/shpc"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556894102, "post_id": 55952053, "comment_id": 98594666, "body": "@Lightness Races in Orbit: Then the third object would have a mutex to protect its data. If you for some reason want one global mutex for everything you can do it. But then this global mutex is certainly wrongly located in an object that is destructed. You would use a mutex at global scope. I don&#39;t overthink things I just keep things simple and avoid .suspicious code."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556894575, "post_id": 55952053, "comment_id": 98594959, "body": "Again, nobody&#39;s suggesting a &quot;global mutex&quot;. But a thing is responsible for protecting the things it owns."}, {"owner": {"reputation": 71, "user_id": 10309079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/756ec2f9c01bd18b4ec78d3de3031a03?s=128&d=identicon&r=PG&f=1", "display_name": "shpc", "link": "https://stackoverflow.com/users/10309079/shpc"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556898737, "post_id": 55952053, "comment_id": 98597347, "body": "If the object would have a method shutdown that takes the mutex and that shutdown method is also called from the desctructor (without taking the mutex) then ok.  And in general it should be avoided that a subobject accesses the parent&#39;s members or calls the parent&#39;s methods. If this is done from the subobjects destructors it gets even more dangerous."}], "tags": [], "owner": {"reputation": 71, "user_id": 10309079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/756ec2f9c01bd18b4ec78d3de3031a03?s=128&d=identicon&r=PG&f=1", "display_name": "shpc", "link": "https://stackoverflow.com/users/10309079/shpc"}, "is_accepted": false, "score": 1, "last_activity_date": 1556798594, "creation_date": 1556798594, "answer_id": 55952053, "question_id": 55942966, "link": "https://stackoverflow.com/questions/55942966/is-it-safe-to-hold-a-stdlock-guard-in-the-destructor/55952053#55952053", "title": "Is it safe to hold a std::lock_guard in the destructor?", "body": "<p>The destructor's body is executed before any member is destructed. In this sense it's safe.</p>\n\n<p>But prior to the question if it is safe the question if there is any sensible use case to hold the mutex in the destructor (as well as the constructor) must be asked.</p>\n\n<p>Only one thread can construct or destruct an object. This must be assured by a mutex <strong>outside</strong> of the object, e.g. at construction in the factory or at destruction in the shared pointer.</p>\n"}], "owner": {"reputation": 1438, "user_id": 4714742, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-Dwa9zxapmSo/AAAAAAAAAAI/AAAAAAAAALs/3hWYYMrST1I/photo.jpg?sz=128", "display_name": "Jon McClung", "link": "https://stackoverflow.com/users/4714742/jon-mcclung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 909, "favorite_count": 0, "accepted_answer_id": 55943065, "answer_count": 2, "score": 5, "last_activity_date": 1556798594, "creation_date": 1556746287, "question_id": 55942966, "link": "https://stackoverflow.com/questions/55942966/is-it-safe-to-hold-a-stdlock-guard-in-the-destructor", "title": "Is it safe to hold a std::lock_guard in the destructor?", "body": "<p>I'm trying to decide if the following code is safe, or if it is UB and only happens to work well in this case (run it <a href=\"https://repl.it/repls/ConcernedElderlyDevice\" rel=\"noreferrer\">here</a>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n\nstruct Foo\n{\n  std::mutex mutex;\n  ~Foo()\n  {\n    std::lock_guard&lt;std::mutex&gt; lock(mutex);\n  }\n};\n\nint main() \n{\n  {\n    Foo foo;\n  }\n  std::cout &lt;&lt; \"everything seems to work fine...?\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Specifically, are we guaranteed anywhere that local variables defined inside the destructor will be destructed before the member variables are?</p>\n\n<p>I found the following from <a href=\"https://en.cppreference.com/w/cpp/language/destructor\" rel=\"noreferrer\">cppreference.com</a>, but it doesn't seem to fully answer my question:</p>\n\n<blockquote>\n  <h2>Destruction sequence</h2>\n  \n  <p>For both user-defined or implicitly-defined destructors, after the body of the destructor is executed, the compiler calls the destructors for all non-static non-variant members of the class, in reverse order of declaration, then it calls the destructors of all direct non-virtual base classes in reverse order of construction (which in turn call the destructors of their members and their base classes, etc), and then, if this object is of most-derived class, it calls the destructors of all virtual bases.</p>\n</blockquote>\n"}, {"tags": ["c++", "opencv", "video", "crop", "darknet"], "comments": [{"owner": {"reputation": 400, "user_id": 5565839, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh4.googleusercontent.com/-KY5on1vONsM/AAAAAAAAAAI/AAAAAAAAAU4/SJAhHZa8J_I/photo.jpg?sz=128", "display_name": "Pierre-Luc BLOT", "link": "https://stackoverflow.com/users/5565839/pierre-luc-blot"}, "edited": false, "score": 0, "creation_date": 1556833004, "post_id": 55942962, "comment_id": 98572699, "body": "Maybe you can check here: <a href=\"https://stackoverflow.com/questions/15468437/opencv-error-bad-argument-unknown-array-type-in-unknown-function-file\" title=\"opencv error bad argument unknown array type in unknown function file\">stackoverflow.com/questions/15468437/&hellip;</a>"}, {"owner": {"reputation": 93, "user_id": 8279003, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/872471696235889/picture?type=large", "display_name": "Maryem Samet", "link": "https://stackoverflow.com/users/8279003/maryem-samet"}, "reply_to_user": {"reputation": 400, "user_id": 5565839, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh4.googleusercontent.com/-KY5on1vONsM/AAAAAAAAAAI/AAAAAAAAAU4/SJAhHZa8J_I/photo.jpg?sz=128", "display_name": "Pierre-Luc BLOT", "link": "https://stackoverflow.com/users/5565839/pierre-luc-blot"}, "edited": false, "score": 0, "creation_date": 1556835212, "post_id": 55942962, "comment_id": 98573316, "body": "mat_cv and CvMat aren&#39;t compatible , is the problem concerned the version of opencv that i&#39;m using ?"}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 8279003, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/872471696235889/picture?type=large", "display_name": "Maryem Samet", "link": "https://stackoverflow.com/users/8279003/maryem-samet"}, "is_accepted": true, "score": 1, "last_activity_date": 1556902110, "creation_date": 1556902110, "answer_id": 55974128, "question_id": 55942962, "link": "https://stackoverflow.com/questions/55942962/my-video-flow-has-been-crashed-while-running-darknet-exe-for-detection-object/55974128#55974128", "title": "my video flow has been crashed while running darknet.exe for detection object", "body": "<p>The problem was the type of the show_img which is \"cv::Mat\" , however the cvCopy function need a \"Iplimage\" type \nSo finally we should replace the old code with that one: </p>\n\n<pre><code>                static int copied_frame_id = -1;\n                static IplImage* copy_img = NULL;\n                if (copied_frame_id != frame_id) {\n                    copied_frame_id = frame_id;\n                    if(copy_img == NULL) copy_img = cvCreateImage(cvSize(ipl_im-&gt;width, ipl_im-&gt;height), ipl_im-&gt;depth, ipl_im-&gt;nChannels);\n                    cvCopy(ipl_im, copy_img, 0);\n\n                }\n                static int img_id = 0;\n                img_id++;\n                char image_name[1024];\n                sprintf(image_name, \"result_img/predicition_video\", frame_id, img_id, class_id, names[class_id]);\n                CvRect rect = cvRect(pt1.x, pt1.y, pt2.x - pt1.x, pt2.y - pt1.y);\n                cvSetImageROI(copy_img, rect);\n                cv::Mat imco = ipl_to_mat(copy_img);\n                image imCopy = mat_to_image(imco);\n\n               save_image(imCopy, image_name);\n\n                cvResetImageROI(copy_img);\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 8279003, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/872471696235889/picture?type=large", "display_name": "Maryem Samet", "link": "https://stackoverflow.com/users/8279003/maryem-samet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 55974128, "answer_count": 1, "score": 1, "last_activity_date": 1556902110, "creation_date": 1556746265, "last_edit_date": 1556832538, "question_id": 55942962, "link": "https://stackoverflow.com/questions/55942962/my-video-flow-has-been-crashed-while-running-darknet-exe-for-detection-object", "title": "my video flow has been crashed while running darknet.exe for detection object", "body": "<p>I'm working on a deap learning project to detect license plate from a video flow , so I'm using darknet (yolov3) , opencv 4.1.0 and OCR </p>\n\n<p>Right now the project is able to detect license plate from image and crop the license then send it to an OCR program to recognize the text </p>\n\n<p>But when the input is a video or when i open the webcam camera ,I got an error when  first it detect the license plate . </p>\n\n<p>this is the error I've got : </p>\n\n<pre><code>Webcam index: 0\nVideo stream: 640 x 480\nObjects:\n\n\nFPS:0.0\nObjects:\n\n\nFPS:0.0\nObjects:\n\n\nFPS:8.6\nObjects:\n\n\nFPS:9.7\nObjects:\n\n\nFPS:9.7\nObjects:\n\n\nFPS:8.7\nObjects:\n\n\nFPS:8.6\nObjects:\n\n\nFPS:8.7\nObjects:\n\n\nFPS:9.5\nObjects:\n\n\nFPS:9.1\nObjects:\n\n\nFPS:9.6\nObjects:\n\n\nFPS:9.5\nObjects:\n\n\nFPS:8.7\nObjects:\n\n\nFPS:8.8\nObjects:\n\n\nFPS:9.7\nObjects:\n\n\nFPS:8.8\nObjects:\n\n\nFPS:8.7\nObjects:\n\n\nFPS:8.4\nObjects:\n\n\nFPS:8.9\nObjects:\n\n\nFPS:9.9\nObjects:\n\n\nFPS:9.4\nObjects:\n\n\nFPS:8.6\nObjects:\n\n\nFPS:8.9\nObjects:\n\n\nFPS:9.8\nObjects:\n\n\nFPS:10.1\nObjects:\n\n\nFPS:8.9\nObjects:\n\n\nFPS:9.2\nObjects:\n\n\nFPS:10.0\nObjects:\n\n\nFPS:8.7\nObjects:\n\n\nFPS:9.0\nObjects:\n\n\nFPS:8.6\nObjects:\n\n\nFPS:9.3\nObjects:\n\n\nFPS:8.5\nObjects:\n\n\nFPS:9.8\nObjects:\n\n\nFPS:9.0\nObjects:\n\n\nFPS:10.0\nObjects:\n\n\nFPS:8.9\nObjects:\n\n\nFPS:9.7\nObjects:\n\n\nFPS:9.9\nObjects:\n\n\nFPS:9.2\nObjects:\n\n\nFPS:9.6\nObjects:\n\n\nFPS:8.8\nObjects:\n\n\nFPS:9.2\nObjects:\n\n\nFPS:9.0\nObjects:\n\n\nFPS:9.6\nObjects:\n\n\nFPS:9.8\nObjects:\n\n\nFPS:9.0\nObjects:\n\n\nFPS:8.5\nObjects:\n\n\nFPS:9.0\nObjects:\n\n\nFPS:8.3\nObjects:\n\n\nFPS:8.8\nObjects:\n\n\nFPS:9.4\nObjects:\n\n\nFPS:9.0\nObjects:\n\n\nFPS:9.9\nObjects:\n\n\nFPS:9.7\nObjects:\n\n\nFPS:8.9\nObjects:\n\n\nFPS:9.5\nObjects:\n\n\nFPS:9.2\nObjects:\n\n\nFPS:9.0\nObjects:\n\n\nFPS:10.1\nObjects:\n\n\nFPS:9.0\nObjects:\n\n\nFPS:8.9\nObjects:\n\n\nFPS:9.0\nObjects:\n\n\nFPS:10.4\nObjects:\n\n\nFPS:8.9\nObjects:\n\n\nFPS:8.6\nObjects:\n\n\nFPS:9.1\nObjects:\n\n\nFPS:9.1\nObjects:\n\n\nFPS:10.1\nObjects:\n\n\nFPS:9.0\nObjects:\n\n\nFPS:10.0\nObjects:\n\n\nFPS:9.2\nObjects:\n\n\nFPS:8.8\nObjects:\n\n\nmatricule: 31%\n\nopenCV: terminate handler is called! The last OpenCV error is:\nOpenCV(4.1.0) Error: Bad argument (Unknown array type) in cv::cvarrToMat, file C:\\build\\master_winpack-build-win64-vc14\\opencv\\modules\\core\\src\\matrix_c.cpp, line 185\n</code></pre>\n\n<p>This is the code of matrix_c.cpp  that cause an error </p>\n\n<pre><code>Mat cvarrToMat(const CvArr* arr, bool copyData,\n               bool /*allowND*/, int coiMode, AutoBuffer&lt;double&gt;* abuf )\n{\n    if( !arr )\n        return Mat();\n    if( CV_IS_MAT_HDR_Z(arr) )\n        return cvMatToMat((const CvMat*)arr, copyData);\n    if( CV_IS_MATND(arr) )\n        return cvMatNDToMat((const CvMatND*)arr, copyData );\n    if( CV_IS_IMAGE(arr) )\n    {\n        const IplImage* iplimg = (const IplImage*)arr;\n        if( coiMode == 0 &amp;&amp; iplimg-&gt;roi &amp;&amp; iplimg-&gt;roi-&gt;coi &gt; 0 )\n            CV_Error(CV_BadCOI, \"COI is not supported by the function\");\n        return iplImageToMat(iplimg, copyData);\n    }\n    if( CV_IS_SEQ(arr) )\n    {\n        CvSeq* seq = (CvSeq*)arr;\n        int total = seq-&gt;total, type = CV_MAT_TYPE(seq-&gt;flags), esz = seq-&gt;elem_size;\n        if( total == 0 )\n            return Mat();\n        CV_Assert(total &gt; 0 &amp;&amp; CV_ELEM_SIZE(seq-&gt;flags) == esz);\n        if(!copyData &amp;&amp; seq-&gt;first-&gt;next == seq-&gt;first)\n            return Mat(total, 1, type, seq-&gt;first-&gt;data);\n        if( abuf )\n        {\n            abuf-&gt;allocate(((size_t)total*esz + sizeof(double)-1)/sizeof(double));\n            double* bufdata = abuf-&gt;data();\n            cvCvtSeqToArray(seq, bufdata, CV_WHOLE_SEQ);\n            return Mat(total, 1, type, bufdata);\n        }\n\n        Mat buf(total, 1, type);\n        cvCvtSeqToArray(seq, buf.ptr(), CV_WHOLE_SEQ);\n        return buf;\n    }\n    CV_Error(CV_StsBadArg, \"Unknown array type\");\n}\n</code></pre>\n\n<p>This is the code of the function draw_detections_cv_v3  to Draw detection , and I realised that it blocks every time it reach this code :</p>\n\n<pre><code> if(copy_img == NULL) copy_img = cvCreateImage(cvSize(b_width,b_height), ipl_im-depth, ipl_im-&gt;nChannels);\n              cvCopy(show_img, copy_img, 0);\n\n</code></pre>\n\n<pre><code>void draw_detections_cv_v3(mat_cv* mat, detection *dets, int num, float thresh, char **names, image **alphabet, int classes, int ext_output)\n{\n    cv::Mat *show_img = mat;\n    int i, j;\n    if (!show_img) return;\n    static int frame_id = 0;\n    frame_id++;\n\n    for (i = 0; i &lt; num; ++i) {\n        char labelstr[4096] = { 0 };\n        int class_id = -1;\n        for (j = 0; j &lt; classes; ++j) {\n            int show = strncmp(names[j], \"dont_show\", 9);\n            if (dets[i].prob[j] &gt; thresh &amp;&amp; show) {\n                if (class_id &lt; 0) {\n                    strcat(labelstr, names[j]);\n                    class_id = j;\n                    char buff[10];\n                    sprintf(buff, \" (%2.0f%%)\", dets[i].prob[j]*100);\n                    strcat(labelstr, buff);\n                }\n                else {\n                    strcat(labelstr, \", \");\n                    strcat(labelstr, names[j]);\n                }\n                printf(\"%s: %.0f%% \", names[j], dets[i].prob[j] * 100);\n            }\n        }\n        if (class_id &gt;= 0) {\n            int width = std::max(1.0f, show_img-&gt;rows * .002f);\n\n            //if(0){\n            //width = pow(prob, 1./2.)*10+1;\n            //alphabet = 0;\n            //}\n\n            //printf(\"%d %s: %.0f%%\\n\", i, names[class_id], prob*100);\n            int offset = class_id * 123457 % classes;\n            float red = get_color(2, offset, classes);\n            float green = get_color(1, offset, classes);\n            float blue = get_color(0, offset, classes);\n            float rgb[3];\n\n            //width = prob*20+2;\n\n            rgb[0] = red;\n            rgb[1] = green;\n            rgb[2] = blue;\n            box b = dets[i].bbox;\n            if (std::isnan(b.w) || std::isinf(b.w)) b.w = 0.5;\n            if (std::isnan(b.h) || std::isinf(b.h)) b.h = 0.5;\n            if (std::isnan(b.x) || std::isinf(b.x)) b.x = 0.5;\n            if (std::isnan(b.y) || std::isinf(b.y)) b.y = 0.5;\n            b.w = (b.w &lt; 1) ? b.w : 1;\n            b.h = (b.h &lt; 1) ? b.h : 1;\n            b.x = (b.x &lt; 1) ? b.x : 1;\n            b.y = (b.y &lt; 1) ? b.y : 1;\n            printf(\"%f %f %f %f\\n\", b.x, b.y, b.w, b.h);\n\n            int left = (b.x - b.w / 2.)*show_img-&gt;cols;\n            int right = (b.x + b.w / 2.)*show_img-&gt;cols;\n            int top = (b.y - b.h / 2.)*show_img-&gt;rows;\n            int bot = (b.y + b.h / 2.)*show_img-&gt;rows;\n\n            if (left &lt; 0) left = 0;\n            if (right &gt; show_img-&gt;cols - 1) right = show_img-&gt;cols - 1;\n            if (top &lt; 0) top = 0;\n            if (bot &gt; show_img-&gt;rows - 1) bot = show_img-&gt;rows - 1;\n\n            int b_x_center = (left + right) / 2;\n            int b_y_center = (top + bot) / 2;\n            int b_width = right - left;\n            int b_height = bot - top;\n            sprintf(labelstr, \"%d x %d - w: %d, h: %d\", b_x_center, b_y_center, b_width, b_height);\n\n            float const font_size = show_img-&gt;rows / 1000.F;\n            cv::Size const text_size = cv::getTextSize(labelstr, cv::FONT_HERSHEY_COMPLEX_SMALL, font_size, 1, 0);\n            cv::Point pt1, pt2, pt_text, pt_text_bg1, pt_text_bg2;\n            pt1.x = left;\n            pt1.y = top;\n            pt2.x = right;\n            pt2.y = bot;\n            pt_text.x = left;\n            pt_text.y = top - 4;// 12;\n            pt_text_bg1.x = left;\n            pt_text_bg1.y = top - (1 + 18 * font_size);\n            pt_text_bg2.x = right;\n            if ((right - left) &lt; text_size.width) pt_text_bg2.x = left + text_size.width;\n            pt_text_bg2.y = top;\n            cv::Scalar color;\n            color.val[0] = red * 256;\n            color.val[1] = green * 256;\n            color.val[2] = blue * 256;\n            IplImage * ipl_im = mat_to_ipl(*show_img);\n\n            // you should create directory: result_img\n            static int copied_frame_id = -1;\n            static IplImage* copy_img = NULL;\n            if (copied_frame_id != frame_id) {\n                copied_frame_id = frame_id;\n                if(copy_img == NULL) copy_img = cvCreateImage(cvSize(b_width,b_height), ipl_im-&gt;depth, ipl_im-&gt;nChannels);\n                cvCopy(show_img, copy_img, 0);\n            }\n            static int img_id = 0;\n            img_id++;\n\n            char image_name[1024];\n            sprintf(image_name, \"result_img/img_%d_%d_%d_%s.jpg\", frame_id, img_id, class_id, names[class_id]);\n            CvRect rect = cvRect(pt1.x, pt1.y, pt2.x - pt1.x, pt2.y - pt1.y);\n            cvSetImageROI(copy_img, rect);\n           // cvSaveImage(image_name, copy_img, 0);\n            cvResetImageROI(copy_img);\n\n            cv::rectangle(*show_img, pt1, pt2, color, width, 8, 0);\n            if (ext_output)\n                printf(\"\\t(left_x: %4.0f   top_y: %4.0f   width: %4.0f   height: %4.0f)\\n\",\n                (float)left, (float)top, b.w*show_img-&gt;cols, b.h*show_img-&gt;rows);\n            else\n                printf(\"\\n\");\n\n            cv::rectangle(*show_img, pt_text_bg1, pt_text_bg2, color, width, 8, 0);\n            cv::rectangle(*show_img, pt_text_bg1, pt_text_bg2, color, CV_FILLED, 8, 0);    // filled\n            cv::Scalar black_color = CV_RGB(0,0,0);\n            cv::putText(*show_img, labelstr, pt_text, cv::FONT_HERSHEY_COMPLEX_SMALL, font_size, black_color, 2*font_size, CV_AA);\n            // cv::FONT_HERSHEY_COMPLEX_SMALL, cv::FONT_HERSHEY_SIMPLEX\n        }\n    }\n    if (ext_output) {\n        fflush(stdout);\n    }\n}\n</code></pre>\n\n<p>I'd appreciate any help ,thank you</p>\n"}, {"tags": ["c++", "ios", "xcode", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7597092, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kT3OePOIxuc/AAAAAAAAAAI/AAAAAAAAACU/ZlSMu4JPCb4/photo.jpg?sz=128", "display_name": "egeola", "link": "https://stackoverflow.com/users/7597092/egeola"}, "is_accepted": false, "score": 0, "last_activity_date": 1556755199, "creation_date": 1556755199, "answer_id": 55944104, "question_id": 55942949, "link": "https://stackoverflow.com/questions/55942949/parsing-issues-opencv-with-xcode/55944104#55944104", "title": "Parsing issues - Opencv with Xcode", "body": "<p>Ok so... I don't have a clue what caused the error. I opened another ios project that uses opencv and it gave the same errors. Then I created a new project and added #include iostream, ostream and got the same error. So its was not isolated to opencv. So I deleted and reinstalled Xcode and now it works!! Bizarre!  </p>\n"}], "owner": {"reputation": 1, "user_id": 7597092, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kT3OePOIxuc/AAAAAAAAAAI/AAAAAAAAACU/ZlSMu4JPCb4/photo.jpg?sz=128", "display_name": "egeola", "link": "https://stackoverflow.com/users/7597092/egeola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556755199, "creation_date": 1556746189, "last_edit_date": 1556748868, "question_id": 55942949, "link": "https://stackoverflow.com/questions/55942949/parsing-issues-opencv-with-xcode", "title": "Parsing issues - Opencv with Xcode", "body": "<p>All of a sudden, I'm getting \"Expected unqualified-id\" and \"Type name declared as a reference to a reference\"  parsing issues from importing opencv2/opencv.hpp  I tried relinking opencv3, upgraded from opencv 3 to 4 and restarted Xcode.  How can this be resolved? \nUsed prebuilt opencv from here: <a href=\"https://opencv.org/releases/\" rel=\"nofollow noreferrer\">https://opencv.org/releases/</a> and Xcode 10.2</p>\n\n<p><a href=\"https://i.stack.imgur.com/3nGzY.png\" rel=\"nofollow noreferrer\">See All Parsing Errors</a></p>\n\n<p>Expected unqualified-id:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UoJtP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UoJtP.png\" alt=\"Expected unqualified-id\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/WgVRd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WgVRd.png\" alt=\"Expected unqualified-id\"></a></p>\n\n<pre><code>CODE - Removed everything and left with this, but it still has parsing errors. \n-------\n.mm\n------\n\n#import &lt;opencv2/opencv.hpp&gt;\n#import &lt;opencv2/imgcodecs/ios.h&gt;\n#import &lt;Foundation/Foundation.h&gt;\n#import \"OpenCVWrapper3.h\"\n#include &lt;vector&gt;\n\nusing namespace std;\n\n\n@implementation OpenCVWrapper3\n\n+ (NSString *) openCVVersionString\n{\n    return [NSString stringWithFormat:@\"OpenCV Version %s\", CV_VERSION];\n}\n\n@end\n\n----\n.h\n----\n#import &lt;Foundation/Foundation.h&gt;\n#import &lt;UIKit/UIKit.h&gt;\n\n\n@interface OpenCVWrapper3 : NSObject\n\n+ (NSString *) openCVVersionString;\n\n@end\n</code></pre>\n"}, {"tags": ["c++", "codeblocks"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11438841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7a65435767f95f61596f180174c6879?s=128&d=identicon&r=PG&f=1", "display_name": "NoviceDeveloper", "link": "https://stackoverflow.com/users/11438841/novicedeveloper"}, "edited": false, "score": 0, "creation_date": 1556746628, "post_id": 55942973, "comment_id": 98539265, "body": "I can display <code>You pressed: Space</code> for space?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556746637, "post_id": 55942973, "comment_id": 98539267, "body": "Recommend replacing 27 and 32 with meaningful identifiers. ASCII, while the most common encoding by far, is not the only encoding. It is worth adding a few lines to the answer explaining why <code>cin &gt;&gt; keypress</code> does not work. Note to those who follow: conio.h is a Windows header. To do this on another operating system you will need <a href=\"https://en.wikipedia.org/wiki/Curses_(programming_library)\" rel=\"nofollow noreferrer\">a curses library</a>."}, {"owner": {"reputation": 51, "user_id": 11391826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SX7Y6.png?s=128&g=1", "display_name": "AmicuLL", "link": "https://stackoverflow.com/users/11391826/amicull"}, "reply_to_user": {"reputation": 1, "user_id": 11438841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7a65435767f95f61596f180174c6879?s=128&d=identicon&r=PG&f=1", "display_name": "NoviceDeveloper", "link": "https://stackoverflow.com/users/11438841/novicedeveloper"}, "edited": false, "score": 0, "creation_date": 1556747059, "post_id": 55942973, "comment_id": 98539354, "body": "@NoviceDeveloper yeah. You can do it. Just delete space button(32 ascii) from if statement and put a new if condtition like this: <code>if(keyPress==32){ printf(&quot;You pressed: Space.&quot;); }</code>  @user4581301 What you mean? Replacing ASCII with another &quot;encoding&quot;? And he said that he don&#39;t want to press enter every user input. std::cin wait for enter to pe pressed."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556753761, "post_id": 55942973, "comment_id": 98540898, "body": "The encoding is the mapping of numbers to characters. The most common encoding is ASCII, but not all computers use ASCII. Space is character 64 on some computers I&#39;ve run across and there are probably others that I haven&#39;t run across. But the really important part is which is easier to infer the programmers intent from: <code>32</code> or <code>&#39; &#39;</code>. I&#39;ll grant you the esc character, it&#39;s not guaranteed to be represented as `&#39;\\e&#39;, so you can&#39;t be 100% certain what code is in use."}], "tags": [], "owner": {"reputation": 51, "user_id": 11391826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SX7Y6.png?s=128&g=1", "display_name": "AmicuLL", "link": "https://stackoverflow.com/users/11391826/amicull"}, "is_accepted": true, "score": 0, "last_activity_date": 1556746340, "creation_date": 1556746340, "answer_id": 55942973, "question_id": 55942935, "link": "https://stackoverflow.com/questions/55942935/how-i-can-get-what-key-was-pressed-in-codeblocks/55942973#55942973", "title": "How i can get what key was pressed in codeblocks?", "body": "<p>I think you want to display the character what are you pressing (like in your example). So, it's pretty simple. Here's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\n\nint main()\n{\n    char keyPress;\n    while(1)\n        {\n            keyPress=_getch();\n            if((keyPress==27)||(keyPress==32))\n            {\n                printf(\"You decided to stop the execution of this code.\");\n                return 0;\n            }\n            printf(\"You pressed:%c\\n\",keyPress);\n        }\n}\n</code></pre>\n\n<p>If you let the code how it is, the program will finish the execution on esc or space pressed. If you want to change this, you can replace the numbers in: <code>if((keyPress==27)||(keyPress==32))</code> with anothers ascii codes of your button. Here's all the ascii codes: <a href=\"https://ascii.cl/\" rel=\"nofollow noreferrer\">https://ascii.cl/</a> . If you want to end the program only on one button, just modify from <code>if((keyPress==27)||(keyPress==32))</code> into <code>if(keyPress==27)</code> and now the program will stop only on ESC.</p>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 8167481, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PRrQFfcnYpg/AAAAAAAAAAI/AAAAAAAAACA/x8gnP-c2aQo/photo.jpg?sz=128", "display_name": "Nathan Krone", "link": "https://stackoverflow.com/users/8167481/nathan-krone"}, "is_accepted": false, "score": 1, "last_activity_date": 1570499108, "last_edit_date": 1570499108, "creation_date": 1557172875, "answer_id": 56011661, "question_id": 55942935, "link": "https://stackoverflow.com/questions/55942935/how-i-can-get-what-key-was-pressed-in-codeblocks/56011661#56011661", "title": "How i can get what key was pressed in codeblocks?", "body": "<p>I have a Windows only solution using the windows api.\n<code>#include &lt;wInDoWs.h&gt;</code>.</p>\n\n<p>you can use <code>GetAsyncKeyState()</code> and pass the ASCII value for the key to it. It will return a short indicating the status of the button. To the best of my knowledge, the value -32767 is returned when the button is pressed. Wrap that in a function and you can tell if the button is pressed. (below will run with copy/paste.)</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n\nbool pressed(const short&amp; _key)\n{\n short state = 0;\n short pressed= -32767;\n state = GetAsyncKeyState( _key);\n\n return ( state == pressed );\n}\n\nint main()\n{\n //see if J is pressed\n while(1)\n {\n   if(pressed( 0x4a ) )// 'J'\n    std::cout &lt;&lt; \"J\";\n }\n}\n</code></pre>\n\n<p>To make that work with all characters, I'm afraid I can't think of an easier way than storing all the ASCII values, and what you want to print out if the key is pressed, in a container and checking their pressed status every frame.(below is just pseudo code.)</p>\n\n<pre><code>//the container         this short is the 'key'\nstd::vector&lt; std::pair&lt; short , std::string &gt; &gt; chars;\n\n//to check the status\nfor(auto&amp; c : chars)\n   if( pressed( c.first ) ) std::cout &lt;&lt; c.second;\n</code></pre>\n\n<p>I would put that in some sort of loop.</p>\n\n<p>Adding the 'you pressed space' wouldn't be difficult this way.\njust do </p>\n\n<p><code>chars.push_back( std::pair&lt;int,std::string&gt;(0x20 , \"Spacebar\") );</code></p>\n"}], "owner": {"reputation": 1, "user_id": 11438841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7a65435767f95f61596f180174c6879?s=128&d=identicon&r=PG&f=1", "display_name": "NoviceDeveloper", "link": "https://stackoverflow.com/users/11438841/novicedeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 55942973, "answer_count": 2, "score": -1, "last_activity_date": 1570499108, "creation_date": 1556746121, "last_edit_date": 1556776891, "question_id": 55942935, "link": "https://stackoverflow.com/questions/55942935/how-i-can-get-what-key-was-pressed-in-codeblocks", "title": "How i can get what key was pressed in codeblocks?", "body": "<p>How to display what key was pressed?</p>\n\n<p>I mean, like if you press A, on screen will display: You pressed A.</p>\n\n<pre><code>cin&gt;&gt;keypress;\ncout&lt;&lt;\"You pressed:\"&lt;&lt;keypress;\n</code></pre>\n\n<p>I want to show directly what key I am pressing. Without waiting to press enter and finishing the execution.</p>\n"}, {"tags": ["c++", "grouping"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1556745371, "post_id": 55942713, "comment_id": 98538807, "body": "It might be faster to sort it (say, with <code>std::sort</code>) than to do the kind of grouping you suggest."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1556745616, "post_id": 55942713, "comment_id": 98538908, "body": "What is the range of your numbers?"}, {"owner": {"reputation": 1000, "user_id": 340851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48ced4682d3b1f4dd2d5004bef0be3ac?s=128&d=identicon&r=PG", "display_name": "cow", "link": "https://stackoverflow.com/users/340851/cow"}, "edited": false, "score": 0, "creation_date": 1556745760, "post_id": 55942713, "comment_id": 98538962, "body": "The ranges can be wide as the numbers can 8/16/32/64 bits. Actually i need the algorithm to be generalized for float/double or even strings."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1556745994, "post_id": 55942713, "comment_id": 98539047, "body": "It might worth checking out a hash table based solution. But maybe it will be slower than quicksort because of bad cache utilization."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556746207, "post_id": 55942713, "comment_id": 98539120, "body": "@cow This sounds like the n-way partition problem.  If so, <a href=\"https://stackoverflow.com/questions/51904592/r-g-b-element-array-swap/51905357#51905357\">see this</a>.   Applying that algorithm on multiple passes gives you <code>O(n * m)</code>, where <code>m</code> is the number of data items, and <code>n</code> is the number of unique items."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1556746667, "post_id": 55942713, "comment_id": 98539270, "body": "Why the downvotes? &quot;Unclear what you&#39;re asking?&quot; This question is pretty clear to me."}, {"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 1, "creation_date": 1556746959, "post_id": 55942713, "comment_id": 98539339, "body": "why bother optimizing with such a small dataset? just stick to std::sort"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556747459, "post_id": 55942713, "comment_id": 98539469, "body": "@cow -- What does you data set really consist of?  If there are a lot of numbers, but only a few groups, (3, 4, 5, for example), then grouping them using an algorithm designed to group things will usually be faster than sorting the items."}, {"owner": {"reputation": 1000, "user_id": 340851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48ced4682d3b1f4dd2d5004bef0be3ac?s=128&d=identicon&r=PG", "display_name": "cow", "link": "https://stackoverflow.com/users/340851/cow"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556747532, "post_id": 55942713, "comment_id": 98539490, "body": "@PaulMcKenzie My data set can be integers, floating numbers or strings. And their cardinalities can vary wildly, ie. they can be all unique, all identical and any combination between :)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556747567, "post_id": 55942713, "comment_id": 98539496, "body": "@cow No.  What I mean is how many different groups are you expecting?  Your example shows 4 unique group of numbers.  So are you expecting a million numbers and only a few unique groups?"}, {"owner": {"reputation": 1000, "user_id": 340851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48ced4682d3b1f4dd2d5004bef0be3ac?s=128&d=identicon&r=PG", "display_name": "cow", "link": "https://stackoverflow.com/users/340851/cow"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556747694, "post_id": 55942713, "comment_id": 98539531, "body": "@PaulMcKenzie Doesn&#39;t the number of different groups depend on cardinality of the data sets? For example, the data set in my question is 4."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556747866, "post_id": 55942713, "comment_id": 98539575, "body": "@cow You have 4 unique numbers, and you want all the same numbers to be in a certain order.   That does not require a sort to be done -- is that what you are trying to achieve?  If so, then you want a partitioning algorithm, not sorting (that is, if you want to achieve this without having to allocate extra space)."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1556747939, "post_id": 55942713, "comment_id": 98539598, "body": "same problem, but without the c++ tag: <a href=\"https://stackoverflow.com/questions/37579149/can-an-array-be-grouped-more-efficiently-than-sorted\" title=\"can an array be grouped more efficiently than sorted\">stackoverflow.com/questions/37579149/&hellip;</a>"}, {"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 0, "creation_date": 1556748119, "post_id": 55942713, "comment_id": 98539659, "body": "don&#39;t bother optimizing, 1 million numbers can be sorted in &lt;100ms using std::sort"}, {"owner": {"reputation": 1000, "user_id": 340851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48ced4682d3b1f4dd2d5004bef0be3ac?s=128&d=identicon&r=PG", "display_name": "cow", "link": "https://stackoverflow.com/users/340851/cow"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556748259, "post_id": 55942713, "comment_id": 98539703, "body": "@PaulMcKenzie i just need the same numbers to sit next to each other in the array. No specific order is necessary. Thanks for suggesting std::partition, though i&#39;m not sure how it fits my use case. i need to look into it..."}, {"owner": {"reputation": 1000, "user_id": 340851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48ced4682d3b1f4dd2d5004bef0be3ac?s=128&d=identicon&r=PG", "display_name": "cow", "link": "https://stackoverflow.com/users/340851/cow"}, "reply_to_user": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 0, "creation_date": 1556748344, "post_id": 55942713, "comment_id": 98539728, "body": "@skeller Agreed, but i&#39;m just wondering if there is any other algorithms that need not sort the numbers and can be (much) faster :)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556748401, "post_id": 55942713, "comment_id": 98539740, "body": "@skellar -- The problem is that <code>std::sort</code> won&#39;t be nearly enough, since the numbers have to be grouped in a certain order.  That&#39;s the wrinkle to the problem."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556748551, "post_id": 55942713, "comment_id": 98539781, "body": "@cow -- Looking at your example, you specified a non-sorted grouping.  So should the numbers be grouped in a specific order?  I think that is not clear in what you&#39;re asking.  If it is something like what you posted, that is clearly not going to be solved by just a single call to <code>std::sort</code>."}, {"owner": {"reputation": 1000, "user_id": 340851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48ced4682d3b1f4dd2d5004bef0be3ac?s=128&d=identicon&r=PG", "display_name": "cow", "link": "https://stackoverflow.com/users/340851/cow"}, "reply_to_user": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1556748762, "post_id": 55942713, "comment_id": 98539851, "body": "@geza Yeah. My question seems a dup of that. Closing mine."}, {"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 0, "creation_date": 1556749305, "post_id": 55942713, "comment_id": 98539995, "body": "alternative/faster algorithm might be bucket-sort, but the improvement depends on the structure of your data."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556750451, "post_id": 55942713, "comment_id": 98540259, "body": "<a href=\"https://ideone.com/KJPAzP\" rel=\"nofollow noreferrer\">Example of partitioning</a>.  As pointed out, this all depends on the data you have and whether you require a certain grouping."}, {"owner": {"reputation": 1000, "user_id": 340851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48ced4682d3b1f4dd2d5004bef0be3ac?s=128&d=identicon&r=PG", "display_name": "cow", "link": "https://stackoverflow.com/users/340851/cow"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556750882, "post_id": 55942713, "comment_id": 98540355, "body": "@PaulMcKenzie Thanks for the example, but i doubt that i can know the <code>order</code> vector in advance."}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556746549, "post_id": 55942943, "comment_id": 98539235, "body": "Grouping can be done in basically O(n) using partitioning and using no extra space."}, {"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 0, "creation_date": 1556746650, "post_id": 55942943, "comment_id": 98539268, "body": "worth a try but i&#39;d expect this to be slower because of overhead of hashing, the missing memory alignment of map and the copies"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556746871, "post_id": 55942943, "comment_id": 98539312, "body": "@PaulMcKenzie: How? Here you say O(n), under the question you say O(n*m). O(n*m) seems OK, but O(n) is not (Note: this solution is O(n) as well, but with a much larger constant factor than qsort likely has)."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556747155, "post_id": 55942943, "comment_id": 98539377, "body": "It depends on the number of unique groups.  If there are a million numbers and only a few unique groups, then the complexity is <code>O(n*(m-2))</code>.  We don&#39;t really know what the OP&#39;s dataset looks like, but if it&#39;s where there are a lot of numbers and only 3 or 4 groups, a grouping algorithm will beat a sorting algorithm."}, {"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 2, "creation_date": 1556749149, "post_id": 55942943, "comment_id": 98539945, "body": "did measurement, this takes about 1.5 times longer than std::sort for 1 mio and about 2.5 times longer for 10 mio numbers."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 0, "creation_date": 1556764588, "post_id": 55942943, "comment_id": 98542723, "body": "@skeller Make sure you&#39;re testing an optimized (release) build and not an unoptimized (debug) build."}, {"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556816786, "post_id": 55942943, "comment_id": 98565983, "body": "@PaulMcKenzie i did, release, /O2"}], "tags": [], "owner": {"reputation": 23, "user_id": 11438386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001de81727b896af7c78d9b6130dc167?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/11438386/tom"}, "is_accepted": false, "score": 2, "last_activity_date": 1556746145, "creation_date": 1556746145, "answer_id": 55942943, "question_id": 55942713, "link": "https://stackoverflow.com/questions/55942713/how-can-i-group-a-million-numbers-faster-than-using-qsort-in-c/55942943#55942943", "title": "How can I group a million numbers faster than using qsort in C++?", "body": "<p>This should work if you don't care too much about using extra space. It first stores the number of occurrences of each number in an <code>unordered_map</code> and then creates a vector that contains each value in the map, repeated the number of times it was seen in the original <code>vector</code>. See the documentation for <a href=\"http://www.cplusplus.com/reference/vector/vector/insert/\" rel=\"nofollow noreferrer\">insert</a> for how this works. The <code>[]</code> operator for an <code>unordered_map</code> works in <code>O(1)</code> on average. So creating the <code>unordered_map</code> takes <code>O(N)</code> time. Iterating through the map and populating the return vector again takes <code>O(N)</code> time, so this whole thing should run in <code>O(N)</code>. Note that this creates two extra copies of the data.</p>\n\n<p>In the worst case, the <code>[]</code> operator takes <code>O(N)</code> time, so the only way to really know if this is faster than <code>qsort</code> would be to measure it.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;unordered_map&gt;\n#include &lt;iostream&gt;\n\nstd::vector&lt;int&gt; groupNumbers(const std::vector&lt;int&gt; &amp;input)\n{\n    std::vector&lt;int&gt; grouped;\n\n    std::unordered_map&lt;int, int&gt; counts;\n    for (auto &amp;x: input)\n    {\n        ++counts[x];\n    }\n\n    for (auto &amp;x: counts)\n    {\n        grouped.insert(grouped.end(), x.second, x.first);\n    }\n    return grouped;\n}\n\n// example\nint main()\n{\n    std::vector&lt;int&gt; test{1,2,3,4,3,2,3,2,3,4,1,2,3,2,3,4,3,2};\n    std::vector&lt;int&gt; result(groupNumbers(test));\n\n    for (auto &amp;x: result)\n    {\n        std::cout &lt;&lt; x &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1000, "user_id": 340851, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48ced4682d3b1f4dd2d5004bef0be3ac?s=128&d=identicon&r=PG", "display_name": "cow", "link": "https://stackoverflow.com/users/340851/cow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "closed_date": 1556927885, "answer_count": 1, "score": -5, "last_activity_date": 1556748490, "creation_date": 1556744810, "last_edit_date": 1556744927, "question_id": 55942713, "link": "https://stackoverflow.com/questions/55942713/how-can-i-group-a-million-numbers-faster-than-using-qsort-in-c", "closed_reason": "Duplicate", "title": "How can I group a million numbers faster than using qsort in C++?", "body": "<p>How can i group a series of integer numbers, eg., [4, 2, 3, 3, 2, 4, 1, 2, 4] to become [4, 4, 4, 2, 2, 2, 3, 3, 1] without using any sorting algorithm. </p>\n\n<p>Note that i don't need the result to be in any sorted order, but i do need the suggested algorithm to group a million of numbers faster than qsort.</p>\n"}, {"tags": ["c++", "opengl", "textures", "opengl-compat"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1556744903, "post_id": 55942683, "comment_id": 98538650, "body": "<i>&quot;... each quad ... is clearly visible when the texture is applied. How do I make it look like one smooth texture?&quot;</i> - So the texture is not seamless?"}, {"owner": {"reputation": 27, "user_id": 11010889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1O4-jF45Qlk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPnR4hyUvU2mUY9n_OfZSmqLNQqzQ/mo/photo.jpg?sz=128", "display_name": "zombunny", "link": "https://stackoverflow.com/users/11010889/zombunny"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1556745030, "post_id": 55942683, "comment_id": 98538692, "body": "I added an image link to better show what I mean into the post"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1556745246, "post_id": 55942683, "comment_id": 98538765, "body": "Texture coordinates have to be in range [0, 1] (0, 0) is the lower left and (1, 1) is the upper right of the texture. See <a href=\"https://stackoverflow.com/questions/5532595/how-do-opengl-texture-coordinates-work\">How do opengl texture coordinates work?</a>."}, {"owner": {"reputation": 27, "user_id": 11010889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1O4-jF45Qlk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPnR4hyUvU2mUY9n_OfZSmqLNQqzQ/mo/photo.jpg?sz=128", "display_name": "zombunny", "link": "https://stackoverflow.com/users/11010889/zombunny"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1556745426, "post_id": 55942683, "comment_id": 98538831, "body": "As far as I can tell my texture coordinates are in that range"}], "answers": [{"tags": [], "owner": {"reputation": 60686, "user_id": 277176, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2678da280c230bccef9781b8e5fbaf80?s=128&d=identicon&r=PG", "display_name": "Yakov Galka", "link": "https://stackoverflow.com/users/277176/yakov-galka"}, "is_accepted": false, "score": 1, "last_activity_date": 1556746742, "last_edit_date": 1556746742, "creation_date": 1556745700, "answer_id": 55942854, "question_id": 55942683, "link": "https://stackoverflow.com/questions/55942683/how-to-smooth-texture-across-multiple-quads-in-opengl/55942854#55942854", "title": "How to smooth texture across multiple quads in opengl", "body": "<p>You messed up with the second texture coordinate. You set it to <code>j + 20</code> when the vertex position has <code>+ scale[0]</code>, and to <code>j + 20 + 1</code> when the vertex position does not have <code>+ scale[0]</code>. As a result all your strips are 'inverted'.</p>\n\n<p>To fix it use:</p>\n\n<pre><code>if (tex) glTexCoord2f(unitx * static_cast&lt;float&gt;(i + 20 + 1), unity * static_cast&lt;float&gt;(j + 10 + 1));\nglVertex3f(scale[0] * static_cast&lt;float&gt;(i) + scale[0], 0, scale[2] * static_cast&lt;float&gt;(j) + scale[2]);\nif (tex) glTexCoord2f(unitx * static_cast&lt;float&gt;(i + 20 + 1), unity * static_cast&lt;float&gt;(j + 10));\nglVertex3f(scale[0] * static_cast&lt;float&gt;(i) + scale[0], 0, scale[2] * static_cast&lt;float&gt;(j));\nif (tex) glTexCoord2f(unitx * static_cast&lt;float&gt;(i + 20), unity * static_cast&lt;float&gt;(j + 10));\nglVertex3f(scale[0] * static_cast&lt;float&gt;(i), 0, scale[2] * static_cast&lt;float&gt;(j));\nif (tex) glTexCoord2f(unitx * static_cast&lt;float&gt;(i + 20 ), unity * static_cast&lt;float&gt;(j + 10 + 1));\nglVertex3f(scale[0] * static_cast&lt;float&gt;(i), 0, scale[2] * static_cast&lt;float&gt;(j) + scale[2]);\n</code></pre>\n\n<p>However, a better way, is to extract the vertex position calculation as follows:</p>\n\n<pre><code>struct Vertex {\n    float texcoord[2];\n    float position[3];\n};\n\nVertex vertex_at(float scale[3], float unitx, float unity, int i, int j)\n{\n    Vertex ret;\n    ret.texcoord[0] = unitx*(i + 20);\n    ret.texcoord[1] = unity*(j + 10);\n    ret.position[0] = scale[0]*i;\n    ret.position[1] = 0;\n    ret.position[2] = scale[2]*j;\n    return ret;\n}\n</code></pre>\n\n<p>And use it like that:</p>\n\n<pre><code>for (int i = -xsize; i &lt;= xsize; i++)\n{\n    for (int j = -zsize; j &lt;= zsize; j++)\n    {\n        glMaterialfv(GL_FRONT, GL_AMBIENT_AND_DIFFUSE, static_cast&lt;GLfloat*&gt;(wDiffuse));\n        //top\n        glNormal3f(0.0f, 1.0f, 0.0f);\n        Vertex v[4] = {\n            vertex_at(scale, unitx, unity, i + 1, j + 1),\n            vertex_at(scale, unitx, unity, i + 1, j),\n            vertex_at(scale, unitx, unity, i, j),\n            vertex_at(scale, unitx, unity, i, j + 1),\n        };\n        for(int k = 0; k &lt; 4; ++k) {\n            if (tex) glTexCoord2fv(v[k].texcoord);\n            glVertex3fv(v[k].position);\n        }\n    }\n}\n</code></pre>\n\n<p>This way it's easier to follow what's hapenning, and you are one step closer to using VAOs: just bundle all those <code>Vertex</code> structs into a buffer and set up the attrib pointers.</p>\n"}, {"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1556745709, "creation_date": 1556745709, "answer_id": 55942855, "question_id": 55942683, "link": "https://stackoverflow.com/questions/55942683/how-to-smooth-texture-across-multiple-quads-in-opengl/55942855#55942855", "title": "How to smooth texture across multiple quads in opengl", "body": "<p>The textures on the tiles are flipped along the y-axis. Change the texture coordinates:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>if (tex) \n    glTexCoord2f(\n        unitx * static_cast&lt;float&gt;(i + 20 + 1),\n        unity * static_cast&lt;float&gt;(j + 10 + 1));\nglVertex3f(scale[0] * static_cast&lt;float&gt;(i) + scale[0], 0, scale[2] * static_cast&lt;float&gt;(j) + scale[2]);\n\nif (tex) \n    glTexCoord2f(\n        unitx * static_cast&lt;float&gt;(i + 20 + 1),\n        unity * static_cast&lt;float&gt;(j + 10));\nglVertex3f(scale[0] * static_cast&lt;float&gt;(i) + scale[0], 0, scale[2] * static_cast&lt;float&gt;(j));\n\nif (tex)\n    glTexCoord2f(\n        unitx * static_cast&lt;float&gt;(i + 20),\n        unity * static_cast&lt;float&gt;(j + 10));\nglVertex3f(scale[0] * static_cast&lt;float&gt;(i), 0, scale[2] * static_cast&lt;float&gt;(j));\n\nif (tex)\n    glTexCoord2f(\n        unitx * static_cast&lt;float&gt;(i + 20 ),\n        unity * static_cast&lt;float&gt;(j + 10 + 1));\nglVertex3f(scale[0] * static_cast&lt;float&gt;(i), 0, scale[2] * static_cast&lt;float&gt;(j) + scale[2]);\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11010889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1O4-jF45Qlk/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPnR4hyUvU2mUY9n_OfZSmqLNQqzQ/mo/photo.jpg?sz=128", "display_name": "zombunny", "link": "https://stackoverflow.com/users/11010889/zombunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 55942855, "answer_count": 2, "score": 1, "last_activity_date": 1556746894, "creation_date": 1556744611, "last_edit_date": 1556746894, "question_id": 55942683, "link": "https://stackoverflow.com/questions/55942683/how-to-smooth-texture-across-multiple-quads-in-opengl", "title": "How to smooth texture across multiple quads in opengl", "body": "<p>I'm attempting to texture a model of a wooden table with a wood bitmap i've found and resized, however the issue I have encountered is that each quad making up the surface of the table is clearly visible when the texture is applied. How do I make it look like one smooth texture?</p>\n\n<pre><code>void Table::DrawTableTop()\n{\n    glPushMatrix();\n    //draw tabletop\n\n    glEnable(GL_TEXTURE_2D);\n    glBindTexture(GL_TEXTURE_2D, texid);\n\n    glBegin(GL_QUADS);\n    glMaterialfv(GL_FRONT, GL_SPECULAR, static_cast&lt;GLfloat*&gt;(specular));\n    glMaterialf(GL_FRONT, GL_SHININESS, static_cast&lt;GLfloat&gt;(shininess));\n\n    float unitx = 1.0f / (float)(xsize * 2 + 1);\n    float unity = 1.0f / (float)(zsize * 2 + 1);\n\n    for (int i = -xsize; i &lt;= xsize; i++)\n    {\n        for (int j = -zsize; j &lt;= zsize; j++)\n        {\n            glMaterialfv(GL_FRONT, GL_AMBIENT_AND_DIFFUSE, static_cast&lt;GLfloat*&gt;(wDiffuse));\n            //top\n            glNormal3f(0.0f, 1.0f, 0.0f);\n            if (tex) glTexCoord2f(unitx * static_cast&lt;float&gt;(i + 20 + 1), unity * static_cast&lt;float&gt;(j + 10));\n            glVertex3f(scale[0] * static_cast&lt;float&gt;(i) + scale[0], 0, scale[2] * static_cast&lt;float&gt;(j) + scale[2]);\n            if (tex) glTexCoord2f(unitx * static_cast&lt;float&gt;(i + 20 + 1), unity * static_cast&lt;float&gt;(j + 10 + 1));\n            glVertex3f(scale[0] * static_cast&lt;float&gt;(i) + scale[0], 0, scale[2] * static_cast&lt;float&gt;(j));\n            if (tex) glTexCoord2f(unitx * static_cast&lt;float&gt;(i + 20), unity * static_cast&lt;float&gt;(j + 10 + 1));\n            glVertex3f(scale[0] * static_cast&lt;float&gt;(i), 0, scale[2] * static_cast&lt;float&gt;(j));\n            if (tex) glTexCoord2f(unitx * static_cast&lt;float&gt;(i + 20 ), unity * static_cast&lt;float&gt;(j + 10));\n            glVertex3f(scale[0] * static_cast&lt;float&gt;(i), 0, scale[2] * static_cast&lt;float&gt;(j) + scale[2]);\n        }\n    }\n\n    glEnd();\n\n    glBindTexture(GL_TEXTURE_2D, 0);\n    glDisable(GL_TEXTURE_2D);\n\n    glPopMatrix();\n</code></pre>\n\n<p>The values of xsize and zsize are 20 and 10, respectively</p>\n\n<p>I would like the texture to appear as if it was loaded on to one large quad, but obviously using multiple quads for improved lighting etc..</p>\n\n<p>This is what the textured image looks like: </p>\n\n<p><a href=\"https://i.imgur.com/JXBcCXm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.imgur.com/JXBcCXm.png\" alt=\"\"></a></p>\n"}, {"tags": ["c++", "sockets", "tcp", "pthreads", "beagleboneblack"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556745910, "post_id": 55942551, "comment_id": 98539017, "body": "Connection refused is the result of the server (or something betwween the server and the client) responding to a connection attempt, SYN packet, with a RST packet. Make sure both sides agree on the port to use and that there are no firewalls in the way (though usually a firewall ignores the connection request and doesn&#39;t respond)."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1556745985, "post_id": 55942551, "comment_id": 98539044, "body": "I&#39;m not reading all that, but how to fix &#39;connection refused&#39; is simply to make sure the server&#39;s socket is listening before you try to connect."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1556746094, "post_id": 55942551, "comment_id": 98539083, "body": "Use <code>sudo netstat -tnlp | grep :10001</code> on the server to make sure the port is open. Another handy tool to have on hand at the client side is Wireshark. It&#39;s fairly easy to use."}, {"owner": {"reputation": 133, "user_id": 5137526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a0a0d5d12d1d58cb5753d04508217f?s=128&d=identicon&r=PG&f=1", "display_name": "haxonek", "link": "https://stackoverflow.com/users/5137526/haxonek"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556747323, "post_id": 55942551, "comment_id": 98539430, "body": "@user4581301 I couldn&#39;t get your netstat command to work as written but I was able to run &#39;lsof -nP -i4TCP:10001 | grep LISTEN&#39; which I think does a similar thing, and it gave me &#39;master  69540 Thomas    3u  IPv4 0xce53c41035f69957      0t0  TCP *:10001 (LISTEN)&#39;, so I think this means the server port is listening. I&#39;ve also disabled my firewall on my mac and there isn&#39;t a firewall on the microcontroller"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1556748303, "post_id": 55942551, "comment_id": 98539716, "body": "Looks good assuming &quot;master&quot; is the name of your server program and not a Doctor Who villain hacking your computer. Either way it sure looks like the port is open and being attended to. Recommendation: make a new program that does nothing but open and listen on this one port. This gives you a smaller, easier-to-manage test case you can use and abuse until you crack the case. Also gives you something closer to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. If the little program doesn&#39;t reproduce the problem, the bug is somewhere else."}, {"owner": {"reputation": 133, "user_id": 5137526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a0a0d5d12d1d58cb5753d04508217f?s=128&d=identicon&r=PG&f=1", "display_name": "haxonek", "link": "https://stackoverflow.com/users/5137526/haxonek"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556756226, "post_id": 55942551, "comment_id": 98541313, "body": "@user4581301 So I did set up a simpler version of the code, which just establishes the connection and sends one char array. This works fine when it&#39;s on just my computer but it fails when it&#39;s going between the two hosts (my mac and the beaglebone). I&#39;ve been reconfiguring the network over and over but it always fails, do you have any recommendations for setting up the network so it can communicate over TCP? I&#39;m at a loss (I&#39;ve already disabled my firewall and I&#39;ve been trying connections where I plug it directly into my laptop and going through the router)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556761899, "post_id": 55942551, "comment_id": 98542222, "body": "Quick tests: Can the beaglebone send to itself? Are you absolutely certain you&#39;re getting the correct address out of <code>gethostbyname</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 5137526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a0a0d5d12d1d58cb5753d04508217f?s=128&d=identicon&r=PG&f=1", "display_name": "haxonek", "link": "https://stackoverflow.com/users/5137526/haxonek"}, "is_accepted": false, "score": 0, "last_activity_date": 1556842729, "creation_date": 1556842729, "answer_id": 55961782, "question_id": 55942551, "link": "https://stackoverflow.com/questions/55942551/how-to-fix-error-connection-refused-when-communicating-with-tcp-between-two-de/55961782#55961782", "title": "How to fix error &#39;Connection Refused&#39; when communicating with TCP between two devices", "body": "<p>So I sort of figured out the problem, thanks in large part to @user4581301</p>\n\n<p>I ended up trying to rebuild the simplest version I could, and what I found was that the original source I based a lot of my code off of was the issue(I can't find the link but it was just a tutorial). It worked on either machine independently but if you tried to send data between two machines it wouldn't work (possibly something to do with different libraries between the debian os on the beaglebone and mac os on my laptop, or just some of the functions were depreciated).</p>\n\n<p>I ended up rebuilding the TCP connection from this site (<a href=\"http://man7.org/linux/man-pages/man3/getaddrinfo.3.html\" rel=\"nofollow noreferrer\">http://man7.org/linux/man-pages/man3/getaddrinfo.3.html</a>) which used newer techniques and was able to work across platform without issue. So I guess I'm not totally sure what the issue is but if you ever have an issue communicating cross-platform I'd recommend taking a look at the man7 link.</p>\n\n<p>Thanks to everyone for the help!</p>\n"}], "owner": {"reputation": 133, "user_id": 5137526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14a0a0d5d12d1d58cb5753d04508217f?s=128&d=identicon&r=PG&f=1", "display_name": "haxonek", "link": "https://stackoverflow.com/users/5137526/haxonek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1120, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556842729, "creation_date": 1556743805, "question_id": 55942551, "link": "https://stackoverflow.com/questions/55942551/how-to-fix-error-connection-refused-when-communicating-with-tcp-between-two-de", "title": "How to fix error &#39;Connection Refused&#39; when communicating with TCP between two devices", "body": "<p>So I'm currently attempting to communicate over TCP from a beaglebone black running debian to a mac. I want to communicate from the beaglebone to the mac and send text messages between the two. The way my code is set up is I have a main connection where I'm streaming a video over port 1000 using a UDP connection, and this works fine by itself, but I've set up a basic TCP connection to send text over port 10001 in a separate pthread, and when connecting between the two devices it gives me the output</p>\n\n<pre><code>ERROR connecting -1 Connection refused 111\n</code></pre>\n\n<p>Where if I print out the values it says</p>\n\n<pre><code>Port: 10001, name: 192.168.1.37\n</code></pre>\n\n<p>What's particularly interesting to me is that I know the IP address is right because I can stream video using the IP address and port 10000.</p>\n\n<p>The overall setup is I have a beaglebone microcontroller (basically a raspberry pi) wired up to a router, and my mac connected by ethernet to the same router. I'm using the library \"sys/socket.h\"</p>\n\n<p>TCPClient code (macbook side)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;netdb.h&gt;\n\nclass TCPClient {\n\nprivate:\n    int sockfd;\n    struct sockaddr_in serv_addr;\n    struct hostent *server;\n    char buffer[512];\n\n    void createSocket() {\n\n        sockfd = socket(AF_INET, SOCK_STREAM, 0);\n\n        if (sockfd &lt; 0) {\n            printf(\"ERROR opening socket\\n\");\n            exit(0);\n        }\n    }\n\n    void createConnection() {\n\n        memcpy((char *)server-&gt;h_addr_list[0],\n               (char *)&amp;serv_addr.sin_addr.s_addr,\n               server-&gt;h_length);\n\n        int er = connect(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof(serv_addr));\n        if (er &lt; 0) {\n            printf(\"ERROR connecting %i %s\\n\", er, strerror(errno));\n            exit(0);\n        }\n    }\n\npublic:\n    TCPClient(int port, char* name) {\n\n        memset((char *) &amp;serv_addr, 0, sizeof(serv_addr));\n\n        printf(\"Port: %i, name: %s\\n\", port, name);\n\n        serv_addr.sin_port = htons(port);\n\n        server = gethostbyname(name);\n        if (server == NULL) {\n            fprintf(stderr,\"ERROR, no such host\\n\");\n            exit(0);\n        }\n\n        serv_addr.sin_family = AF_INET;\n\n        createSocket();\n\n        createConnection();\n\n    }\n\n    ~TCPClient() {\n        close(sockfd);\n    }\n\n    void transmitData(char data[]) {\n\n        int n = write(sockfd, data, strlen(data));\n        if (n &lt; 0) {\n            printf(\"ERROR writing to socket\\n\");\n            exit(0);\n        }\n    }\n\n    char* receiveData() {\n        memset(buffer, 0, sizeof(buffer));\n\n        int n = read(sockfd, buffer, sizeof(buffer));\n        if (n &lt; 0) {\n            printf(\"ERROR reading from socket\\n\");\n            exit(0);\n        }\n\n        return buffer;\n    }\n\n};\n</code></pre>\n\n<p>TCPServer code (microcontroller)</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\nclass TCPServer {\n\nprivate:\n    // struct for data\n    int sockfd, newsockfd;\n    socklen_t clilen;\n    char buffer[512];\n    struct sockaddr_in serv_addr, cli_addr;\n\npublic:\n    TCPServer(int port) {\n\n        // clear address structure\n        memset((char *) &amp;serv_addr, 0, sizeof(serv_addr));\n\n        // setup the host_addr structure for use in bind call\n        // server byte order\n        serv_addr.sin_family = AF_INET;\n        serv_addr.sin_port = htons(port);\n        // automatically be filled with current host's IP address\n        serv_addr.sin_addr.s_addr = INADDR_ANY;\n\n        // Create socket\n        // socket(int domain, int type, int protocol)\n        // i.e. IPV_4, TCP, default\n        sockfd = socket(AF_INET, SOCK_STREAM, 0);\n\n        if (sockfd &lt; 0) {\n            printf(\"ERROR opening socket\\n\");\n            exit(0);\n        }\n\n        // Create bind\n        if (bind(sockfd, (struct sockaddr *) &amp;serv_addr, sizeof(serv_addr)) &lt; 0) {\n            printf(\"ERROR on binding\\n\");\n            exit(0);\n        }\n\n        // start listening\n        // This listen() call tells the socket to listen to the incoming connections.\n        // The listen() function places all incoming connection into a backlog queue\n        // until `() call accepts the connection.\n        // Here, we set the maximum size for the backlog queue to 5.\n        listen(sockfd, 5);\n\n        // The accept() call actually accepts an incoming connection\n        clilen = sizeof(cli_addr);\n\n        // This accept() function will write the connecting client's address info\n        // into the the address structure and the size of that structure is clilen.\n        // The accept() returns a new socket file descriptor for the accepted connection.\n        // So, the original socket file descriptor can continue to be used\n        // for accepting new connections while the new socker file descriptor is used for\n        // communicating with the connected client.\n        newsockfd = accept(sockfd, (struct sockaddr *) &amp;cli_addr, &amp;clilen);\n        printf(\"Ending accept function\\n\");\n\n        if (newsockfd &lt; 0) {\n            printf(\"ERROR on accept\");\n            exit(0);\n        }\n\n        printf(\"server: got connection from %s port %d\\n\",\n               inet_ntoa(cli_addr.sin_addr), ntohs(cli_addr.sin_port));\n\n    }\n\n    ~TCPServer() {\n        close(newsockfd);\n        close(sockfd);\n    }\n\n    void createSocket() {\n        // create a socket\n        // socket(int domain, int type, int protocol)\n        // i.e. IPV_4, TCP, default\n        sockfd = socket(AF_INET, SOCK_STREAM, 0);\n\n        if (sockfd &lt; 0) {\n            printf(\"ERROR opening socket\\n\");\n            exit(0);\n        }\n\n    }\n\n    void transmitData(char data[]) {\n        // This send() function sends the 13 bytes of the string to the new socket\n        send(newsockfd, data, strlen(data), 0);\n\n    }\n\n    char* receiveData() {\n\n        memset(buffer, 0, sizeof(buffer));\n\n        int n = read(newsockfd, buffer, sizeof(buffer));\n        if (n &lt; 0) {\n            printf(\"ERROR reading from socket\\n\");\n            exit(0);\n        }\n\n        return buffer;\n\n    }\n\n};\n</code></pre>\n\n<p>And here is the code I used to create the connection; this is the portion that runs on my desktop computer (receives connection and displays output code)</p>\n\n<pre><code>void* sensor_com(void* conn_data_void) {\n    struct conn *conn_data = (struct conn*)conn_data_void;\n\n    printf(\"printing from pthread\\n\");\n    printf(\"port: %d \\n\", (*conn_data).port);\n\n    TCPServer *sensor_com = new TCPServer(conn_data-&gt;port);\n\n    char *buf = (char*) malloc(sizeof(char)*256);\n\n    while(1) {\n\n        // receive data from ROV and translate json\n        char *buffer = (*sensor_com).receiveData();\n        std::string json(buffer);\n\n        picojson::value v;\n\n        std::string err = picojson::parse(v, json);\n        if (! err.empty()) {\n        std:cerr &lt;&lt; err &lt;&lt; std::endl;\n        }\n\n        // check if the type of the value is \"object\"\n        if (! v.is&lt;picojson::object&gt;()) {\n            std::cerr &lt;&lt; \"JSON is not an object\" &lt;&lt; std::endl;\n            exit(2);\n        }\n\n        std::map&lt;std::string, string&gt; data;\n\n        // obtain a const reference to the map, and print the contents\n        const picojson::value::object&amp; obj = v.get&lt;picojson::object&gt;();\n        for (picojson::value::object::const_iterator i = obj.begin();\n             i != obj.end();\n             ++i) {\n            data[i-&gt;first] = i-&gt;second.to_str();\n        }\n\n        cout &lt;&lt; \"accel_x of rov: \" &lt;&lt; data[\"accel_x\"] &lt;&lt; endl;\n        cout &lt;&lt; \"accel_y of rov: \" &lt;&lt; data[\"accel_y\"] &lt;&lt; endl;\n        cout &lt;&lt; \"accel_z of rov: \" &lt;&lt; data[\"accel_z\"] &lt;&lt; endl;\n        cout &lt;&lt; \"gyro_x of rov: \" &lt;&lt; data[\"gyro_x\"] &lt;&lt; endl;\n        cout &lt;&lt; \"gyro_y of rov: \" &lt;&lt; data[\"gyro_y\"] &lt;&lt; endl;\n        cout &lt;&lt; \"gyro_z of rov: \" &lt;&lt; data[\"gyro_z\"] &lt;&lt; endl;\n\n    }\n\n    free(buf);\n\n    return NULL;\n\n}\n</code></pre>\n\n<p>And this is the portion on the microcontroller/beaglebone</p>\n\n<p>void* sensor_com(void* conn_data_void) {</p>\n\n<pre><code>struct conn *conn_data = (struct conn*)conn_data_void;\nunsigned int port = (*conn_data).port;\n\nprintf(\"printing from pthread\\n\");\nprintf(\"port: %d \\n\", port);\n\n// create TCP connection includeing socket and connection call\nTCPClient *sensor_com = new TCPClient(conn_data-&gt;port, conn_data-&gt;host);\n\nchar* val;\n\n// Data from MPU6050\nstruct sensor_data movement;\n\nif (RUNNING_ON_BEAGLEBONE) {\n    initialize_i2c();\n}\n\n// send data to master forever\nwhile (1) {\n\n    if (RUNNING_ON_BEAGLEBONE) {\n        // collect data from I2C_interface\n        get_data(&amp;movement);\n    } else {\n        // get data here\n        movement.accel_x = 10;\n        movement.accel_y = 10;\n        movement.accel_z = 10;\n        movement.gyro_x = 10;\n        movement.gyro_y = 10;\n        movement.gyro_z = 10;\n    }\n    // Create json for data to be stored\n    string data = \"{\";\n\n    // Add accelleration data\n    data += \"\\\"accel_x\\\": \\\"\" + std::to_string(movement.accel_x) + \"\\\",\";\n    data += \"\\\"accel_y\\\": \\\"\" + std::to_string(movement.accel_y) + \"\\\",\";\n    data += \"\\\"accel_z\\\": \\\"\" + std::to_string(movement.accel_z) + \"\\\",\";\n\n    // Add gyroscopic dataa\n    data += \"\\\"gyro_x\\\": \\\"\" + std::to_string(movement.gyro_x) + \"\\\",\";\n    data += \"\\\"gyro_y\\\": \\\"\" + std::to_string(movement.gyro_y) + \"\\\",\";\n    data += \"\\\"gyro_z\\\": \\\"\" + std::to_string(movement.gyro_z) + \"\\\"}\";\n\n    // convert to char array\n    char *charData = new char [data.length()+1];\n    strcpy(charData, data.c_str());\n\n    (*sensor_com).transmitData(charData);\n\n    // delay for readability\n    sleep(2);\n\n}\n\nfree(val);\n\nreturn NULL;\n</code></pre>\n\n<p>}</p>\n\n<p>I apologize for the wall of code, though frankly I think the issue has to do with the connection in between so I don't know if it'll be useful. The code works fine when it's on the same machine (it's only communicating between machines that there's an issue). I've also tried using tcpdump but I can't figure out how to use it to send packets to another server, I'm starting to think it's just for listening to packets in which case it isn't very helpful.</p>\n\n<p>Any guidance would be greatly appreciated, thanks!</p>\n"}, {"tags": ["c++", "sorting", "c++11", "boost", "parallel-processing"], "comments": [{"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 1, "creation_date": 1556744096, "post_id": 55942533, "comment_id": 98538377, "body": "Are you setting the number of threads with an additional argument to <code>block_indirect_sort</code>? Do you need the OMP directive if so?"}, {"owner": {"reputation": 1831, "user_id": 4178510, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b5a159088e6454c73cc2b805ba92afa7?s=128&d=identicon&r=PG&f=1", "display_name": "letsBeePolite", "link": "https://stackoverflow.com/users/4178510/letsbeepolite"}, "reply_to_user": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 0, "creation_date": 1556749391, "post_id": 55942533, "comment_id": 98540017, "body": "I tried so with no effect. <code>#pragma omp parallel</code> so should expose all threads to be used."}], "owner": {"reputation": 1831, "user_id": 4178510, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b5a159088e6454c73cc2b805ba92afa7?s=128&d=identicon&r=PG&f=1", "display_name": "letsBeePolite", "link": "https://stackoverflow.com/users/4178510/letsbeepolite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556743674, "creation_date": 1556743674, "question_id": 55942533, "link": "https://stackoverflow.com/questions/55942533/boost-block-indirect-sort-segmentation-fault", "title": "Boost block indirect sort segmentation fault", "body": "<p>Following is the code:</p>\n\n<pre><code>template&lt;int N&gt;\nvoid para_sort(std::vector&lt;bfs_node&lt;N&gt;&gt;&amp; res) {\n    #pragma omp parallel\n    {\n        boost::sort::block_indirect_sort(res.begin(), res.end(), compare_node&lt;N&gt;);\n    }\n}\n</code></pre>\n\n<p>The code runs without any exception when running with only one OMP thread.\nHowever, the code throws in an exception on running with multiple threads.</p>\n\n<p>The code works fine with multiple threads when <code>Boost::Parallel_stable_sort</code> used.</p>\n\n<p>I suspected it would be the strict weak ordering requirement that caused it raise exception. But in that case it should be raised with <code>parallel_stable_sort</code> and <code>std::sort</code> (sequential version).</p>\n\n<p>Does <code>boost::block_indirect_sort</code> demands more stricter or weaker ordering constraint?</p>\n\n<pre><code>template&lt;int N&gt;\nbool compare_node(const bfs_node&lt;N&gt;&amp; lhs, const bfs_node&lt;N&gt;&amp; rhs) {\n    if (lhs.id == rhs.id) return false;\n    for (int i = 0; i &lt; N * 64; ++i) {\n        bool lflag = in_set(lhs.id, i);\n        bool rflag = in_set(rhs.id, i);\n        if (lflag == rflag ) { continue; }\n        if (lflag) return true;\n        return false;\n    }\n    return false;\n} // \n</code></pre>\n\n<p>where <code>id</code> field here represents a <code>unordered_set</code> type data structure.\nFor ex: <code>id</code> represents the set <code>{1,2,3}</code>\nand <code>in_set(id, 1)</code>  will return <code>true</code> and otherwise <code>false</code> </p>\n\n<p>Exception raised:\n<code>Invalid read of size 16\n==2125==    at 0x46C59F: void boost::sort::pdqsort_detail::pdqsort_loop&lt;__gnu_cxx::__normal_iterator&lt;bfs_node&lt;1&gt;*, std::vector&lt;bfs_node&lt;1&gt;, std::allocator&lt;bfs_node&lt;1&gt; &gt; &gt; &gt;, std::less&lt;bfs_node&lt;1&gt; &gt;, false&gt;(__gnu_cxx::__normal_iterator&lt;bfs_node&lt;1&gt;*, std::vector&lt;bfs_node&lt;1&gt;, std::allocator&lt;bfs_node&lt;1&gt; &gt; &gt; &gt;, __gnu_cxx::__normal_iterator&lt;bfs_node&lt;1&gt;*, std::vector&lt;bfs_node&lt;1&gt;, std::allocator&lt;bfs_node&lt;1&gt; &gt; &gt; &gt;, std::less&lt;bfs_node&lt;1&gt; &gt;, int, bool)</code></p>\n"}, {"tags": ["c++", "g++"], "comments": [{"owner": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 0, "creation_date": 1556741829, "post_id": 55942183, "comment_id": 98537597, "body": "What&#39;s your compiler command line?"}, {"owner": {"reputation": 2041, "user_id": 7316365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/84de9f27708456d85bf1078aa51155b2?s=128&d=identicon&r=PG&f=1", "display_name": "Vivick", "link": "https://stackoverflow.com/users/7316365/vivick"}, "edited": false, "score": 0, "creation_date": 1556741847, "post_id": 55942183, "comment_id": 98537604, "body": "Do you compile <code>log.cpp</code> then link against it?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 3, "creation_date": 1556741863, "post_id": 55942183, "comment_id": 98537610, "body": "@Etienne ^ More specifically what&#39;s your linker command"}, {"owner": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1556741895, "post_id": 55942183, "comment_id": 98537627, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I&#39;m fairly sure he doesn&#39;t compile and link separately, but yes, that&#39;s what I meant ;)"}, {"owner": {"reputation": 384, "user_id": 11173556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C1PHs.png?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/11173556/adam"}, "edited": false, "score": 0, "creation_date": 1556741975, "post_id": 55942183, "comment_id": 98537655, "body": "You need  <code>#include &quot;log.h&quot;</code> in each of the files. You need a log.h file and you need to compile with <code>g++ main.cpp log.cpp</code>"}, {"owner": {"reputation": 384, "user_id": 11173556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C1PHs.png?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/11173556/adam"}, "edited": false, "score": 1, "creation_date": 1556742191, "post_id": 55942183, "comment_id": 98537744, "body": "This article talks about what you are asking <a href=\"https://www.cs.fsu.edu/~myers/c++/notes/compilation.html\" rel=\"nofollow noreferrer\">cs.fsu.edu/~myers/c++/notes/compilation.html</a>"}], "owner": {"reputation": 1397, "user_id": 6147182, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/8ACnl.png?s=128&g=1", "display_name": "Mohamed Benkedadra", "link": "https://stackoverflow.com/users/6147182/mohamed-benkedadra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1556741809, "answer_count": 0, "score": 0, "last_activity_date": 1556741730, "creation_date": 1556741730, "question_id": 55942183, "link": "https://stackoverflow.com/questions/55942183/cant-get-forward-declaration-to-work-in-c", "closed_reason": "Duplicate", "title": "can&#39;t get forward declaration to work in c++", "body": "<p>I'm learning <strong>C++</strong>, using <strong>g++ (Ubuntu 7.4.0-1ubuntu1~18.04) 7.4.0</strong></p>\n\n<p>I have the following code :</p>\n\n<ul>\n<li>main.cpp :</li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nvoid log(std::string message);\n\nint main() {\n    log(\"HI\");\n}\n</code></pre>\n\n<ul>\n<li>log.cpp :</li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nvoid log(std::string message) \n{\n    std::cout &lt;&lt; message &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>When i compile and run, i get the following error :</p>\n\n<pre><code>/tmp/ccYckYXk.o: In function `main':\nmain.cpp:(.text+0x43): undefined reference to `log(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Can i please know what's wrong with my code ?</p>\n"}, {"tags": ["c++", "unit-testing", "googletest", "googlemock"], "answers": [{"tags": [], "owner": {"reputation": 2434, "user_id": 2118271, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/292878529647e590d35206075ee622a5?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Olsen", "link": "https://stackoverflow.com/users/2118271/chris-olsen"}, "is_accepted": false, "score": -1, "last_activity_date": 1556823285, "last_edit_date": 1556823285, "creation_date": 1556755873, "answer_id": 55944154, "question_id": 55942091, "link": "https://stackoverflow.com/questions/55942091/google-mock-how-do-i-return-a-different-value-using-expect-call-to-exit-a-loop/55944154#55944154", "title": "Google Mock - how do I return a different value using EXPECT_CALL to exit a loop", "body": "<p>You might want to look into the <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#delegating-calls-to-a-fake\" rel=\"nofollow noreferrer\">Delegating Calls to Fake</a> pattern for this type of test.</p>\n\n<p>I think if I needed to implement a suite of tests that dealt with reading various data streams, I would probably write a hybrid Mock/Fake class that allows me to control the actual stream to be read. For example:</p>\n\n<pre><code>// Example reader class to be tested\nclass Reader\n{\npublic:\n    static const unsigned int statusAddress = 0;\n    static const unsigned int dataAddress   = 1;\n    static const unsigned int maxData       = 8;\n\n    // Returns data sequence that was read\n    vector&lt;unsigned int&gt; ReadFromDevice()\n    {\n        // Stream-reading code from your example goes here\n    }\n\n    virtual unsigned int Read(unsigned int address)\n    {\n        // Read from address code here\n    }\n};\n\n// Mock reader class with some faking ability\nclass MockReader : public Reader\n{\npublic:\n    // Set up normal mock definition\n    MOCK_METHOD1(Read, unsigned int(unsigned int address));\n\n    // Optionally enable use of delegation to fake method\n    void EnableFakeReader()\n    {\n        ON_CALL(*this, Read(_))\n            .WillByDefault(Invoke(this, &amp;MockReader::FakeRead));\n    }\n\n    // Set up a fake data sequence to be returned by Read()\n    void SetFakeData(const vector&lt;unsigned int&gt; &amp;data)\n    {\n        m_fakeData = data;\n        m_fakeDataIndex = 0;\n        EnableFakeReader();\n    }\n\n    // Read from fake data sequence\n    unsigned int FakeRead(unsigned int address)\n    {\n        if (address == statusAddress)\n            return m_fakeDataIndex &lt; m_fakeData.size() ? 1 : 0;\n        if (address == dataAddress)\n            if (m_fakeDataIndex &lt; m_fakeData.size())\n                return m_fakeData[m_fakeDataIndex++];\n        return 0;\n    }\n\n    vector&lt;unsigned int&gt; m_fakeData;\n    size_t m_fakeDataIndex = 0;\n};\n\nTEST(ReaderTests, Test1)\n{\n    // Set up a fake data sequence to be read\n    vector&lt;unsigned int&gt; testData ={ 1,2,3,4,5,6,7,8 };\n    MockReader mock;\n    mock.SetFakeData(testData);\n\n    // Set any desired expectations about mocked functions\n    EXPECT_CALL(mock, Read(Reader::statusAddress)).Times(9);\n    EXPECT_CALL(mock, Read(Reader::dataAddress)).Times(8);\n\n    // Data read should be the same as the test data\n    EXPECT_EQ(testData, mock.ReadFromDevice());\n}\n</code></pre>\n\n<p>Note that this example does not follow the Google Mock cookbook pattern linked above. The complete cookbook pattern would have you create a <code>FakeReader</code> class as well as a <code>MockReader</code>. The <code>MockReader</code> would own and delegate to a private instance of the <code>FakeReader</code> class.</p>\n\n<p>You could also consider putting the fake into a fixture class.</p>\n"}, {"tags": [], "owner": {"reputation": 1622, "user_id": 7343388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0dc7456b14b1a70bd862e8495d36a6?s=128&d=identicon&r=PG", "display_name": "Soeren", "link": "https://stackoverflow.com/users/7343388/soeren"}, "is_accepted": false, "score": 0, "last_activity_date": 1557747017, "creation_date": 1557747017, "answer_id": 56111416, "question_id": 55942091, "link": "https://stackoverflow.com/questions/55942091/google-mock-how-do-i-return-a-different-value-using-expect-call-to-exit-a-loop/56111416#56111416", "title": "Google Mock - how do I return a different value using EXPECT_CALL to exit a loop", "body": "<p>There is a simple solution to your problem. Create an instance of InSequence before your expectations. This will guarantee that the written expectations are called in the same order. </p>\n\n<pre><code>InSequence s;\nEXPECT_CALL(mock, Read(address)).Times(4).WillRepeatedly(Return(1));\nEXPECT_CALL(mock, Read(address)).Times(1).WillOnce(Return(0));\n</code></pre>\n\n<p>Furher Informations: <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/CookBook.md#expecting-ordered-calls\" rel=\"nofollow noreferrer\">click</a></p>\n"}], "owner": {"reputation": 41, "user_id": 5968287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b10023e89b1230aafc08bdd69a294234?s=128&d=identicon&r=PG&f=1", "display_name": "electronpygmy", "link": "https://stackoverflow.com/users/5968287/electronpygmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1454, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1557747017, "creation_date": 1556741312, "question_id": 55942091, "link": "https://stackoverflow.com/questions/55942091/google-mock-how-do-i-return-a-different-value-using-expect-call-to-exit-a-loop", "title": "Google Mock - how do I return a different value using EXPECT_CALL to exit a loop", "body": "<p>Using google mock, how do I specify an EXPECT_CALL with a return value N times, and then a different value N+1? </p>\n\n<p>The only way I can get my test to pass is if I manually specify each iteration e.g.</p>\n\n<pre><code>EXPECT_CALL(mock, Read(address)).Times(5)\n.WillOnce(Return(0))\n.WillOnce(Return(0))\n.WillOnce(Return(0))\n.WillOnce(Return(0))\n.WillOnce(Return(1));\n</code></pre>\n\n<p><strong>Test Description</strong></p>\n\n<p>The code under test uses a status word to determine if a loop reading data should exit. EXPECT_CALL should set an expectation to return 1 from the mocked method Read() N times, and on the Nth cycle return 0 to indicate no more data. </p>\n\n<p>Unfortunately the code in question is on a separate machine but here's a representative example.</p>\n\n<pre><code>const unsigned int statusAddress = 0;\nconst unsigned int dataAddress   = 1;\nconst unsigned int maxData       = 8;\n\nunsigned int dataBuffer[maxData] = {0};\nint readIndex = 0;\n\n// Check if data is available (read returns 1). \nunsigned int dataIsAvailable = Read(statusAddress);\n\n// Keep reading data until no more is available or the buffer is full.\nwhile ((dataIsAvailable == 1) &amp;&amp; (readIndex &lt; maxData))\n{\n    // Read data word.\n    dataBuffer[readIndex++] = Read(dataAddress);\n\n    // Read status to determine if more data is available.\n    dataIsAvailable = Read(statusAddress);\n}\n</code></pre>\n\n<p>The Read method is mocked.</p>\n\n<p>If I add expectations in order, the latter EXPECT_CALL is used ( I presume the WillOnce overwrites WillRepeatedly in google code ). Obviously Im misunderstanding how multiple EXPECT_CALLs is ordered.</p>\n\n<pre><code>EXPECT_CALL(mock, Read(address)).Times(4).WillRepeatedly(Return(1));\nEXPECT_CALL(mock, Read(address)).Times(1).WillOnce(Return(0));\n</code></pre>\n\n<pre><code>Expected: to be called 4 times\n Actual: never called - unsatisfied and active\n</code></pre>\n\n<p>As there is no method...</p>\n\n<pre><code>WillN(Return(1), 4)\n</code></pre>\n\n<p>... I presume there is a less fixed way of structuring an EXPECT_CALL for more complex and/or longer sequences of data?</p>\n"}, {"tags": ["c++", "file", "read-write"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556741703, "post_id": 55942046, "comment_id": 98537547, "body": "Does the file size also change to <code>0</code>?  IIRC opening in binary mode will still truncate wipe out the existing file if it exists."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556741751, "post_id": 55942046, "comment_id": 98537572, "body": "You opened the file for writing.  Of course the file will disappear on you."}, {"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556741872, "post_id": 55942046, "comment_id": 98537614, "body": "@NathanOliver: No, the file size stays as is."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556741981, "post_id": 55942046, "comment_id": 98537657, "body": "Try using <code>std::ofstream sggFileObj_w(this-&gt;sggFilePath, std::ios::binary | std::ios::app)</code> and then seek to the beginning and then to where you need to be."}, {"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556742828, "post_id": 55942046, "comment_id": 98537939, "body": "@NathanOliver: After insert <code>std::ios::app</code> the problem solved but unfortunately, the specific binary data (2 Bytes) is not updated as I want."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556742910, "post_id": 55942046, "comment_id": 98537969, "body": "Could you update your post with the new code that doesn&#39;t zero out the file?  Could just be a seeking issue since you start at the end of the file so you need to get back to where you want to write the data."}, {"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556743864, "post_id": 55942046, "comment_id": 98538300, "body": "@NathanOliver: this <code>sggFileObj_w.seekp(4)</code> will make the file pointer get back to the target data position."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556743945, "post_id": 55942046, "comment_id": 98538326, "body": "@LionKing Yep.  I&#39;ve added an answer that tells you why that doesn&#39;t work.  Let me know if you have any further issues."}], "answers": [{"comments": [{"owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "edited": false, "score": 0, "creation_date": 1556744628, "post_id": 55942558, "comment_id": 98538548, "body": "I was using the last way In the beginning but some problems occurred with that way so, I decided to use each one (read, write) separately."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1556743838, "creation_date": 1556743838, "answer_id": 55942558, "question_id": 55942046, "link": "https://stackoverflow.com/questions/55942046/reads-data-correctly-but-writes-incorrectly/55942558#55942558", "title": "Reads data correctly but writes incorrectly", "body": "<p>Using </p>\n\n<pre><code>std::ofstream sggFileObj_w(this-&gt;sggFilePath, std::ios::binary)\n</code></pre>\n\n<p>will wipe out the data in the file since that is what <code>ofstream</code> does by default.  You can use</p>\n\n<pre><code>std::ofstream sggFileObj_w(this-&gt;sggFilePath, std::ios::binary | std::ios::app);\n</code></pre>\n\n<p>to stop the data from being overridden but the issue with this is that file stream starts at the end of the file and pretends like the rest of the file doesn't exist, so you can seek back to the beggining and overwrite its contents.</p>\n\n<p>What you can do instead is use a <code>fstream</code> like</p>\n\n<pre><code>std::fstream sggFileObj_w(this-&gt;sggFilePath, std::ios::binary | std::ios::out | std::ios::in);\n</code></pre>\n\n<p>To open the file in binary mode from the beginning without losing any contents.  Then you can seek to where you want to write into the file.</p>\n"}], "owner": {"reputation": 28522, "user_id": 459943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1820b3c909a14f78a3b8c5aa46f9759f?s=128&d=identicon&r=PG", "display_name": "Lion King", "link": "https://stackoverflow.com/users/459943/lion-king"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556743838, "creation_date": 1556741094, "last_edit_date": 1556743467, "question_id": 55942046, "link": "https://stackoverflow.com/questions/55942046/reads-data-correctly-but-writes-incorrectly", "title": "Reads data correctly but writes incorrectly", "body": "<p>I am trying to read specific binary data (2 Bytes) of a file and this mission works well, the problem when rewriting that (2 Bytes) again in the same place. Unfortunately, it changes the entire file data to zeros.</p>\n\n<p>Look at the following two screenshots:</p>\n\n<p><strong>Data before writing:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/V0AMw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/V0AMw.jpg\" alt=\"\"></a></p>\n\n<p><strong>Data after writing:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/2qCx2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2qCx2.jpg\" alt=\"\"></a></p>\n\n<p><strong>The code:</strong></p>\n\n<pre><code>bool myClass::countChanger() {\n    std::ifstream sggFileObj_r(this-&gt;sggFilePath, std::ios::binary);   \n    if (!sggFileObj_r.is_open()) {\n        std::cerr &lt;&lt; strerror(errno) &lt;&lt; std::endl;\n        return false;\n    }\n    // Buffer variable\n    unsigned short count;\n    // Move the file pointer to offset 4\n    sggFileObj_r.seekg(4);\n    // Reading data \n    sggFileObj_r.read((char*)&amp;count, sizeof(unsigned short));\n    sggFileObj_r.close();\n    //// ---------------------- ////\n    std::ofstream sggFileObj_w(this-&gt;sggFilePath, std::ios::binary | std::ios::app);\n    // Increase the buffer variable by one\n    count += 1;\n    // Move the file pointer again to offset 4\n    sggFileObj_w.seekp(4);\n    // Rewriting data again to the file after modification\n    sggFileObj_w.write((char*)&amp;count, sizeof(unsigned short));\n    sggFileObj_w.close();\n    return true;\n}\n</code></pre>\n\n<p><strong>Why did that happen and how to resolve?</strong></p>\n\n<hr>\n\n<p><strong>UPDATE</strong>:</p>\n\n<p>I have appended <code>std::ios::app</code> to file mode, and zeros problem solved but the specific data that I want to update is not updated.</p>\n"}, {"tags": ["c++", "tuples", "metaprogramming"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 2, "creation_date": 1556740819, "post_id": 55941964, "comment_id": 98537233, "body": "Do you also need to filter out duplicates if they aren&#39;t consecutive? E.g. should <code>without_duplicates&lt;std::tuple&lt;int, char, int&gt;&gt;&gt;</code> be <code>std::tuple&lt;int, char&gt;</code>, or <code>std::tuple&lt;int, char, int&gt;</code>? The latter would likely be easier to accomplish."}, {"owner": {"reputation": 1561, "user_id": 7568175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154469655422476/picture?type=large", "display_name": "Andreas Loanjoe", "link": "https://stackoverflow.com/users/7568175/andreas-loanjoe"}, "reply_to_user": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 0, "creation_date": 1556740862, "post_id": 55941964, "comment_id": 98537250, "body": "Yes srry ill change the example to include that problem"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556740950, "post_id": 55941964, "comment_id": 98537284, "body": "@AndreasLoanjoe What&#39;s the actual use case you wan&#39;t to resolve with this? Sounds like a XY-problem for me."}, {"owner": {"reputation": 1561, "user_id": 7568175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154469655422476/picture?type=large", "display_name": "Andreas Loanjoe", "link": "https://stackoverflow.com/users/7568175/andreas-loanjoe"}, "edited": false, "score": 0, "creation_date": 1556740994, "post_id": 55941964, "comment_id": 98537301, "body": "I want to construct a vector of variants from a variadic template argument pack. But first I need to determine the variant type without duplicates. The problem above is just the minimal example of what I am struggling with."}], "answers": [{"comments": [{"owner": {"reputation": 1561, "user_id": 7568175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154469655422476/picture?type=large", "display_name": "Andreas Loanjoe", "link": "https://stackoverflow.com/users/7568175/andreas-loanjoe"}, "edited": false, "score": 0, "creation_date": 1556741825, "post_id": 55942130, "comment_id": 98537594, "body": "For everybody else interested here is a link to a test: <a href=\"https://godbolt.org/z/zb01q5\" rel=\"nofollow noreferrer\">godbolt.org/z/zb01q5</a>"}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 1561, "user_id": 7568175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154469655422476/picture?type=large", "display_name": "Andreas Loanjoe", "link": "https://stackoverflow.com/users/7568175/andreas-loanjoe"}, "edited": false, "score": 0, "creation_date": 1556741943, "post_id": 55942130, "comment_id": 98537647, "body": "@AndreasLoanjoe Happy to help, it&#39;s fun to wrestle such a challenge every once in a while and put my Prolog/Lisp lectures to use (as logical/functional programming is essentially what template metaprogramming is, albeit with weird syntax)."}, {"owner": {"reputation": 1561, "user_id": 7568175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154469655422476/picture?type=large", "display_name": "Andreas Loanjoe", "link": "https://stackoverflow.com/users/7568175/andreas-loanjoe"}, "edited": false, "score": 0, "creation_date": 1556742056, "post_id": 55942130, "comment_id": 98537693, "body": "Yeah I have done some scheme in the past but the syntax can still be dazzling for these kind of operations in C++, passing on the Out argument was the aha moment for me in this one."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1576747749, "post_id": 55942130, "comment_id": 105001424, "body": "Small variant to delay instantiation in <code>conditional</code> to reduce number of instantiations: <a href=\"https://cppinsights.io/s/edc7678b\" rel=\"nofollow noreferrer\">Demo</a> (274 lines) versus <a href=\"https://cppinsights.io/s/2124944b\" rel=\"nofollow noreferrer\">your</a> (782 lines)"}], "tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 12, "last_activity_date": 1556741466, "creation_date": 1556741466, "answer_id": 55942130, "question_id": 55941964, "link": "https://stackoverflow.com/questions/55941964/how-to-filter-duplicate-types-from-tuple-c/55942130#55942130", "title": "How to filter duplicate types from tuple C++", "body": "<p>This shoudld work:</p>\n\n<pre><code>template &lt;class Haystack, class Needle&gt;\nstruct contains;\n\ntemplate &lt;class Car, class... Cdr, class Needle&gt;\nstruct contains&lt;std::tuple&lt;Car, Cdr...&gt;, Needle&gt; : contains&lt;std::tuple&lt;Cdr...&gt;, Needle&gt;\n{};\n\ntemplate &lt;class... Cdr, class Needle&gt;\nstruct contains&lt;std::tuple&lt;Needle, Cdr...&gt;, Needle&gt; : std::true_type\n{};\n\ntemplate &lt;class Needle&gt;\nstruct contains&lt;std::tuple&lt;&gt;, Needle&gt; : std::false_type\n{};\n\n\n\ntemplate &lt;class Out, class In&gt;\nstruct filter;\n\ntemplate &lt;class... Out, class InCar, class... InCdr&gt;\nstruct filter&lt;std::tuple&lt;Out...&gt;, std::tuple&lt;InCar, InCdr...&gt;&gt;\n{\n  using type = typename std::conditional&lt;\n    contains&lt;std::tuple&lt;Out...&gt;, InCar&gt;::value\n    , typename filter&lt;std::tuple&lt;Out...&gt;, std::tuple&lt;InCdr...&gt;&gt;::type\n    , typename filter&lt;std::tuple&lt;Out..., InCar&gt;, std::tuple&lt;InCdr...&gt;&gt;::type\n  &gt;::type;\n};\n\ntemplate &lt;class Out&gt;\nstruct filter&lt;Out, std::tuple&lt;&gt;&gt;\n{\n  using type = Out;\n};\n\n\ntemplate &lt;class T&gt;\nusing without_duplicates = typename filter&lt;std::tuple&lt;&gt;, T&gt;::type;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/8e17799d0ffaa0ac\" rel=\"noreferrer\">[Live example]</a></p>\n\n<p>It works by iteratively constructing the output tuple. Before each type is added, check (using the predicate <code>contains</code>) whether it's already in the output tuple or not. If not, it's added (the \"else\" branch of <code>std::conditional</code>), otherwise it's not added (the \"then\" branch of <code>std::conditional</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 1289140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jbHXi.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/1289140/joe"}, "is_accepted": false, "score": 3, "last_activity_date": 1559422789, "creation_date": 1559422789, "answer_id": 56410366, "question_id": 55941964, "link": "https://stackoverflow.com/questions/55941964/how-to-filter-duplicate-types-from-tuple-c/56410366#56410366", "title": "How to filter duplicate types from tuple C++", "body": "<p>If you have access to Boost, then this can be done directly using <code>boost::mp11::mp_unique&lt;your_tuple_type&gt;</code>.</p>\n\n<p>For example:</p>\n\n<pre><code>{\n  using not_unique = std::tuple&lt;int, int, char, std::string, double, int&gt;;\n  using filtered = boost::mp11::mp_unique&lt;not_unique&gt;;\n  static_assert(std::is_same_v&lt;std::tuple&lt;int, char, std::string, double&gt;, filtered&gt;);\n}\n{\n  using already_unique = std::tuple&lt;int, char, std::string, double&gt;;\n  using filtered = boost::mp11::mp_unique&lt;already_unique&gt;;\n  static_assert(std::is_same_v&lt;std::tuple&lt;int, char, std::string, double&gt;, filtered&gt;);\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/pbRqp0kx2qS57jkL\" rel=\"nofollow noreferrer\">Live example</a></p>\n"}, {"tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": false, "score": 8, "last_activity_date": 1565973383, "creation_date": 1565973383, "answer_id": 57528226, "question_id": 55941964, "link": "https://stackoverflow.com/questions/55941964/how-to-filter-duplicate-types-from-tuple-c/57528226#57528226", "title": "How to filter duplicate types from tuple C++", "body": "<pre><code>#include &lt;type_traits&gt;\n#include &lt;tuple&gt;\n\ntemplate &lt;typename T, typename... Ts&gt;\nstruct unique : std::type_identity&lt;T&gt; {};\n\ntemplate &lt;typename... Ts, typename U, typename... Us&gt;\nstruct unique&lt;std::tuple&lt;Ts...&gt;, U, Us...&gt;\n    : std::conditional_t&lt;(std::is_same_v&lt;U, Ts&gt; || ...)\n                       , unique&lt;std::tuple&lt;Ts...&gt;, Us...&gt;\n                       , unique&lt;std::tuple&lt;Ts..., U&gt;, Us...&gt;&gt; {};\n\ntemplate &lt;typename... Ts&gt;\nusing unique_tuple = typename unique&lt;std::tuple&lt;&gt;, Ts...&gt;::type;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/d0352fe0deb35adf\" rel=\"noreferrer\"><strong>DEMO</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5741551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JY61W.jpg?s=128&g=1", "display_name": "SoilRos", "link": "https://stackoverflow.com/users/5741551/soilros"}, "is_accepted": false, "score": 0, "last_activity_date": 1590905956, "last_edit_date": 1590905956, "creation_date": 1590767006, "answer_id": 62089731, "question_id": 55941964, "link": "https://stackoverflow.com/questions/55941964/how-to-filter-duplicate-types-from-tuple-c/62089731#62089731", "title": "How to filter duplicate types from tuple C++", "body": "<p>Piotr's code is very concise and should be prefered. Here an extended version for general variadic templated classes which works on C++17 (e.g. <code>std::variant</code> or custom containers):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;type_traits&gt;\n\n// end of recursive call: tuple is forwared using `type`\ntemplate &lt;typename T, typename... Ts&gt;\nstruct unique_impl {using type = T;};\n\n// recursive call: 1. Consumes the first type of the variadic arguments, \n//                    if not repeated add it to the tuple.  \n//                 2. Call this again with the rest of arguments\ntemplate &lt;template&lt;class...&gt; class Tuple, typename... Ts, typename U, typename... Us&gt;\nstruct unique_impl&lt;Tuple&lt;Ts...&gt;, U, Us...&gt;\n    : std::conditional_t&lt;(std::is_same_v&lt;U, Ts&gt; || ...)\n                       , unique_impl&lt;Tuple&lt;Ts...&gt;, Us...&gt;\n                       , unique_impl&lt;Tuple&lt;Ts..., U&gt;, Us...&gt;&gt; {};\n\n// forward definition\ntemplate &lt;class Tuple&gt;\nstruct unique_tuple;\n\n// class specialization so that tuple arguments can be extracted from type\ntemplate &lt;template&lt;class...&gt;class Tuple, typename... Ts&gt;\nstruct unique_tuple&lt;Tuple&lt;Ts...&gt;&gt; : public unique_impl&lt;Tuple&lt;&gt;, Ts...&gt; {};\n</code></pre>\n\n<h1><a href=\"https://godbolt.org/z/syrzq9\" rel=\"nofollow noreferrer\">Live Demo</a></h1>\n\n<p>If you need C++11 you just need to replace the fold expression <code>(std::is_same_v&lt;U, Ts&gt; || ...)</code> to use a self-made <code>disjunction&lt;...&gt;</code> (see <a href=\"https://en.cppreference.com/w/cpp/types/disjunction\" rel=\"nofollow noreferrer\">cppreference possible implementation</a>).</p>\n"}], "owner": {"reputation": 1561, "user_id": 7568175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154469655422476/picture?type=large", "display_name": "Andreas Loanjoe", "link": "https://stackoverflow.com/users/7568175/andreas-loanjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1483, "favorite_count": 3, "accepted_answer_id": 55942130, "answer_count": 4, "score": 11, "last_activity_date": 1590905956, "creation_date": 1556740644, "last_edit_date": 1556740871, "question_id": 55941964, "link": "https://stackoverflow.com/questions/55941964/how-to-filter-duplicate-types-from-tuple-c", "title": "How to filter duplicate types from tuple C++", "body": "<p>How does one filter duplicate types from a tuple?</p>\n\n<p>For example:</p>\n\n<pre><code>using Tuple = std::tuple&lt;int, double, int, double, std::string, std::string&gt;\nusing FilteredTuple = without_duplicates&lt;Tuple&gt;;\n</code></pre>\n\n<p>In which without_duplicates is implemented in such a way that it generates the following FilteredTuple type: </p>\n\n<pre><code>std::tuple&lt;int, double, std::string&gt;\n</code></pre>\n"}, {"tags": ["c++", "c++17"], "answers": [{"tags": [], "owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "is_accepted": false, "score": 2, "last_activity_date": 1556754371, "creation_date": 1556754371, "answer_id": 55944015, "question_id": 55941814, "link": "https://stackoverflow.com/questions/55941814/c17-how-to-control-number-of-threads-in-execution-policy/55944015#55944015", "title": "C++17: how to control number of threads in execution policy?", "body": "<p>This is a good question. That said, unfortunately, I don't think it's possible. <a href=\"http://eel.is/c++draft/execpol.general#1\" rel=\"nofollow noreferrer\">[execpol.general]/1</a> says:</p>\n\n<blockquote>\n  <p>This subclause describes classes that are <em>execution policy</em> types. An\n  object of an execution policy type indicates <strong>the kinds of\n  parallelism allowed in the execution of an algorithm</strong> and <strong>expresses\n  the consequent requirements on the element access functions</strong>.</p>\n</blockquote>\n\n<p><sup><sup>(emphasis mine)</sup></sup></p>\n\n<p>Moreover, after that, the whole <a href=\"http://eel.is/c++draft/execpol\" rel=\"nofollow noreferrer\">[execpol]</a> is dealing about <code>is_execution_policy</code>, (disambiguator) policy types, and the execution policy objects.</p>\n\n<p>In other words, execution policies only bring the possibility of parallelism at  the cost of constrained element access functions. It is not really specified how these policies are carried out. To me, it seems even less possible to control the details of parallelism, with the number of threads being an example.</p>\n"}], "owner": {"reputation": 624, "user_id": 5941695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3338291825ed895ec010db9e6c2bb4a9?s=128&d=identicon&r=PG&f=1", "display_name": "anymous.asker", "link": "https://stackoverflow.com/users/5941695/anymous-asker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1563042143, "creation_date": 1556739902, "last_edit_date": 1563042143, "question_id": 55941814, "link": "https://stackoverflow.com/questions/55941814/c17-how-to-control-number-of-threads-in-execution-policy", "title": "C++17: how to control number of threads in execution policy?", "body": "<p>The C++17 standard introduced an execution policy parameter (e.g. <code>std::execution::par_unseq</code>) which can be passed to some of the functions in the <code>std</code> library to make them execute in parallel, e.g.:</p>\n\n<pre><code>std::copy(std::execution::par_unseq, obj1.begin(), obj1.end(), obj2.begin())\n</code></pre>\n\n<p>In other frameworks like OpenMP, it\u2019s possible to set the maximum number of threads that it will use, e.g. <code>#pragma omp parallel num_threads(&lt;desired_numer&gt;)</code> to set it locally within the section, or <code>omp_set_num_threads(&lt;desired_number&gt;)</code> to set it within the calling scope.</p>\n\n<p>I\u2019m wondering how can this be achieved in standard C++ for the execution policies.</p>\n"}, {"tags": ["c++", "multithreading", "random"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1556739263, "post_id": 55941655, "comment_id": 98536568, "body": "<code>rand</code> is not thread-safe."}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 0, "creation_date": 1556739309, "post_id": 55941655, "comment_id": 98536593, "body": "Don&#39;t use rand. Use one of c++11 <a href=\"https://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">random generators</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1556739486, "post_id": 55941655, "comment_id": 98536648, "body": "Ladies and gentlemen! Boys and girls of all ages! May I introduce you to the amazing! The astounding! <a href=\"https://en.cppreference.com/w/cpp/numeric/random\" rel=\"nofollow noreferrer\">The astronomical &lt;random&gt; library</a>, a library capable of providing random numbers of all shapes and sizes and, most importantly, <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\">isn&#39;t considered harmful!</a>"}], "owner": {"reputation": 1, "user_id": 11438666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8y0K9NVBsZA/AAAAAAAAAAI/AAAAAAAABXQ/jNo7nFH2j8w/photo.jpg?sz=128", "display_name": "Brandon Pina", "link": "https://stackoverflow.com/users/11438666/brandon-pina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1556739250, "answer_count": 0, "score": 0, "last_activity_date": 1556739281, "creation_date": 1556739125, "last_edit_date": 1556739281, "question_id": 55941655, "link": "https://stackoverflow.com/questions/55941655/random-number-generator-in-a-thread-keeps-returning-the-same-value", "closed_reason": "Duplicate", "title": "Random number generator in a thread keeps returning the same value", "body": "<p>I'm trying to thread a monte carlo simulation to calculate pi.\nI need each thread to generate 2 random numbers (x and y values between 1 and 0) to sample the simulation, as of now, i'm trying to get one thread to work, but it keeps generating the same number.</p>\n\n<pre><code>#include \"pch.h\"\n\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\n\n\nlong double sampleCount = 0;\nlong double circleSamples = 0;\nlong double proportion;\nmutex m;\n\nvoid simulate()\n{\n    long double sampleX;\n    long double sampleY;\n    long double sampleHypotenuse;\n\n    //Generate Random values for x and y\n    sampleX = (long double)std::rand() / RAND_MAX;\n    sampleY = (long double)std::rand() / RAND_MAX;\n\n    // Find the distance from the center of the sample area\n    sampleHypotenuse = sqrt(pow(sampleX - .5, 2) + pow(sampleY - .5, 2));\n\n\n    m.lock();\n\n    //Find if sample is within a radius of .5 from the center of the sample area\n    sampleCount++;\n    if (sampleHypotenuse &lt;= .5)\n    {\n\n        circleSamples++;\n    }\n    m.unlock();\n\n\n\n}\n\nint main()\n{\n\n\n\n    int c = 0;\n    while (true)\n    {\n        thread th1(simulate);\n\n        th1.join();\n        proportion = circleSamples / sampleCount;\n        cout &lt;&lt; setprecision(15) &lt;&lt; proportion / pow(.5, 2) &lt;&lt; endl;\n\n\n    }\n\n}\n</code></pre>\n\n<p>Removing the thread and executing simulate directly from the main thread, the code works perfectly fine, albeit single threaded and slow</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2017", "template-specialization", "function-templates"], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1556799134, "post_id": 55941766, "comment_id": 98556206, "body": "I&#39;ve tried just about everything I can think of short of adding a return parameter :( I wanted to avoid adding template parameters... but this does seem to be the only viable solution."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1556739679, "creation_date": 1556739679, "answer_id": 55941766, "question_id": 55941641, "link": "https://stackoverflow.com/questions/55941641/specializing-a-template-with-a-return-type-derived-by-decltype-in-visual-studio/55941766#55941766", "title": "Specializing a Template With a Return Type Derived by decltype in Visual Studio", "body": "<p>Purely to appease VC++, you may extract the return type as another template argument.</p>\n\n<pre><code>template&lt;typename ValueType, typename RetType = decltype(ValueType{} == ValueType{})&gt;\nRetType Compare(const ValueType&amp; value, const ValueType&amp; expected)\n{\n    return value == expected;\n}\n\ntemplate&lt;&gt;\ndecltype(float{} == float{}) Compare&lt;float&gt;(const float&amp; value, const float&amp; expected)\n{\n    return std::abs(value - expected) &lt; 1e-4F;\n}\n</code></pre>\n\n<p>That makes VC++ accept the code.</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 55941766, "answer_count": 1, "score": 3, "last_activity_date": 1556739679, "creation_date": 1556739046, "question_id": 55941641, "link": "https://stackoverflow.com/questions/55941641/specializing-a-template-with-a-return-type-derived-by-decltype-in-visual-studio", "title": "Specializing a Template With a Return Type Derived by decltype in Visual Studio", "body": "<p>Given the following code:</p>\n\n<pre><code>template&lt;typename ValueType&gt;\ndecltype(ValueType{} == ValueType{}) Compare(const ValueType&amp; value, const ValueType&amp; expected)\n{\n    return value == expected;\n}\n\ntemplate&lt;&gt;\ndecltype(float{} == float{}) Compare&lt;float&gt;(const float&amp; value, const float&amp; expected)\n{\n    return std::abs(value - expected) &lt; 1e-4F;\n}\n</code></pre>\n\n<p>I would expect the call <code>Compare(13.0F, 42.0F)</code> to correctly call the specialization, <a href=\"https://ideone.com/1ToJon\" rel=\"nofollow noreferrer\">which it does on gcc</a>. But it fails to on <a href=\"/questions/tagged/visual-studio-2017\" class=\"post-tag\" title=\"show questions tagged &#39;visual-studio-2017&#39;\" rel=\"tag\">visual-studio-2017</a>. I get the error:</p>\n\n<blockquote>\n  <p>error C2912: explicit specialization <code>bool Compare&lt;float&gt;(const float &amp;,const float &amp;)</code> is not a specialization of a function template</p>\n</blockquote>\n\n<p>Is there something I can do to help guide <a href=\"/questions/tagged/visual-studio\" class=\"post-tag\" title=\"show questions tagged &#39;visual-studio&#39;\" rel=\"tag\">visual-studio</a>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 5, "creation_date": 1556738788, "post_id": 55941570, "comment_id": 98536368, "body": "There are no elements in your vector v so v[i] doesn&#39;t exist and accessing it gives a segfault."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1556738866, "post_id": 55941570, "comment_id": 98536397, "body": "If you want to get picky, <code>v[i]</code> is undefined behavior, which you are seeing manifest as a segfault."}], "answers": [{"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1556739017, "post_id": 55941608, "comment_id": 98536466, "body": "Either that or declare the vector with five entries: <code>vector&lt;vector&lt;int&gt;&gt; v(5);</code>."}, {"owner": {"reputation": 95, "user_id": 10942161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2O-mNIkuoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca4uC1fQh5VPyzO_iJz1V4SCHJlPg/mo/photo.jpg?sz=128", "display_name": "Tiago Bachiega de Almeida", "link": "https://stackoverflow.com/users/10942161/tiago-bachiega-de-almeida"}, "edited": false, "score": 0, "creation_date": 1556739022, "post_id": 55941608, "comment_id": 98536470, "body": "Thanks for the help, but still getting the segfault :/ Copy-pasted your for."}, {"owner": {"reputation": 95, "user_id": 10942161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2O-mNIkuoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca4uC1fQh5VPyzO_iJz1V4SCHJlPg/mo/photo.jpg?sz=128", "display_name": "Tiago Bachiega de Almeida", "link": "https://stackoverflow.com/users/10942161/tiago-bachiega-de-almeida"}, "edited": false, "score": 0, "creation_date": 1556739101, "post_id": 55941608, "comment_id": 98536496, "body": "I need that both the parent and the nested vector to be initialized with push backs, without me specifying values."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1556739208, "post_id": 55941608, "comment_id": 98536540, "body": "We could also use the more cryptic <code>v.push_back({});</code>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1556739223, "post_id": 55941608, "comment_id": 98536547, "body": "No, the increment in the inner <code>for</code> loop is incrementing <code>i</code> instead of <code>j</code>. Typo in the original code."}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 4, "last_activity_date": 1556755689, "last_edit_date": 1556755689, "creation_date": 1556738877, "answer_id": 55941608, "question_id": 55941570, "link": "https://stackoverflow.com/questions/55941570/segfault-when-pushing-back-to-vector-of-vector-in-loop/55941608#55941608", "title": "Segfault when pushing back to vector of vector in loop", "body": "<p><code>v</code> has no elements in it so trying to index it through <code>v[i]</code> gives you the segfault because its undefined behavior to index an element that doesn't exist.</p>\n\n<p>Try adding a vector on each iteration:</p>\n\n<pre><code>for (int i = 0; i &lt; 5; ++i)\n{\n    v.push_back(std::vector&lt;int&gt;{});\n    for (int j = 0; j &lt; i; ++j)\n    {\n        v[i].push_back(j);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1556739213, "last_edit_date": 1556739213, "creation_date": 1556738896, "answer_id": 55941615, "question_id": 55941570, "link": "https://stackoverflow.com/questions/55941570/segfault-when-pushing-back-to-vector-of-vector-in-loop/55941615#55941615", "title": "Segfault when pushing back to vector of vector in loop", "body": "<p>You need to add a <code>vector&lt;int&gt;</code> to <code>v</code> before you can add elements to the nested vector.</p>\n\n<p>Also, you have a typo in the inner loop. You are using <code>++i</code> instead of <code>++j</code>.</p>\n\n<pre><code>for (int i = 0; i &lt; 5; ++i)\n{\n    v.push_back(std::vector&lt;int&gt;());\n    for (int j = 0; j &lt; i; ++j)\n    {\n        v[i].push_back(j);\n    }\n}\n</code></pre>\n\n<p>Another way to do this would be to resize <code>v</code> before the outer loop.</p>\n\n<pre><code>int size = 5;\nv.resize(size);\nfor (int i = 0; i &lt; size; ++i)\n{\n    for (int j = 0; j &lt; i; ++j)\n    {\n        v[i].push_back(j);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 10942161, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P2O-mNIkuoM/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca4uC1fQh5VPyzO_iJz1V4SCHJlPg/mo/photo.jpg?sz=128", "display_name": "Tiago Bachiega de Almeida", "link": "https://stackoverflow.com/users/10942161/tiago-bachiega-de-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "closed_date": 1556738954, "accepted_answer_id": 55941608, "answer_count": 2, "score": 0, "last_activity_date": 1556755689, "creation_date": 1556738707, "question_id": 55941570, "link": "https://stackoverflow.com/questions/55941570/segfault-when-pushing-back-to-vector-of-vector-in-loop", "closed_reason": "Duplicate", "title": "Segfault when pushing back to vector of vector in loop", "body": "<p>I'm trying to write a code that pushes back data into a vector of vector, but I keep getting segmentation fault when I try to do this inside a loop.</p>\n\n<p>I tried the following. I have two loops, one to count up to 5 and another that counts up to where the first loop is. I'm experimenting trying to create an variable size 2d vector in C++. My goal is that every subvector has a different size.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(){\n\n    vector&lt;vector&lt;int&gt;&gt; v;\n\n    for (int i = 0; i &lt; 5; ++i)\n    {\n\n        for (int j = 0; j &lt; i; ++i)\n        {\n            v[i].push_back(j);\n        }\n    }\n}\n</code></pre>\n\n<p>When I try the pushback I get segmentation error. What am I doing wrong?</p>\n\n<p>Thanks in advance, Tiago</p>\n"}, {"tags": ["c++", "function", "object", "pointers", "set"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 6, "creation_date": 1556737896, "post_id": 55941345, "comment_id": 98536054, "body": "It&#39;s hard to tell where the problem could be with bits and pieces of code. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11422543, "user_type": "registered", "profile_image": "https://graph.facebook.com/2419612428073056/picture?type=large", "display_name": "Stanislav Stoichev", "link": "https://stackoverflow.com/users/11422543/stanislav-stoichev"}, "edited": false, "score": 0, "creation_date": 1556739465, "post_id": 55941496, "comment_id": 98536642, "body": "Thank you very much this worked for me!Changed only calcUnionColl"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1556738342, "creation_date": 1556738342, "answer_id": 55941496, "question_id": 55941345, "link": "https://stackoverflow.com/questions/55941345/how-to-avoid-creating-of-empty-object/55941496#55941496", "title": "How to avoid creating of empty object?", "body": "<p>You are not union'ing all of the <code>Rectangle</code>s together that are in the collection.  You are union'ing each individual <code>Rectangle</code> only with the one <code>Rectangle</code> that <code>calcUnionColl()</code> is called on, and then you return the result of just the last union that was performed.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>class Rectangle {\npublic:\n    ...\n    Rectangle unionRect(const Rectangle&amp; rec) const;\n    ...\n}\n\nRectangle Rectangle::unionRect(const Rectangle&amp; rec) const {\n    int ux1, ux2, uy1, uy2;\n    ux1 = std::min(ix1, rec.ix1);\n    uy1 = std::min(iy1, rec.iy1);\n    ux2 = std::max(ix2, rec.ix2);\n    uy2 = std::max(iy2, rec.iy2);\n    return Rectangle(ux1, ux2, uy1, uy2);\n}\n\n...\n\nclass RectangleCollection {\npublic:\n    ...\n    Rectangle calcUnionColl() const;\n    ...\n}\n\nRectangle RectangleCollection::calcUnionColl() const {\n    Rectangle a;\n    if (!oColl.empty()) {\n        std::set&lt;Rectangle&gt;::iterator it = oColl.begin();\n        a = *it++;\n        while (it != oColl.end()) {\n            a = a.unionRect(*it++);\n        }\n    }\n    return a;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1599, "user_id": 9948091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JANyt.png?s=128&g=1", "display_name": "HAL9000", "link": "https://stackoverflow.com/users/9948091/hal9000"}, "is_accepted": false, "score": 0, "last_activity_date": 1556807450, "creation_date": 1556807450, "answer_id": 55954667, "question_id": 55941345, "link": "https://stackoverflow.com/questions/55941345/how-to-avoid-creating-of-empty-object/55954667#55954667", "title": "How to avoid creating of empty object?", "body": "<p>The answer from Remy Lebeau has a minor issue. If <code>oColl</code> is empty, <code>calcUnionColl</code> will return the the default-constructed value of <code>a</code>. So if the default-constructed value of <code>a</code> is <code>x1:0, x2:0, y1:0, y2:0</code> then if <code>calcUnionColl</code> returns that value, it is impossible to know if that is the actual union of the values in <code>oColl</code>, or if \n<code>oColl</code> was empty.</p>\n\n<p>A common trick when finding the the maximum value of multiple <code>int</code>s is to initialize the running maximum with <code>INT_MIN</code>. And in the same way, when finding a minimum value, we initialize the the running minimum with <code>INT_MAX</code>.</p>\n\n<p>Finding the union of rectagles is nothing more than finding the min/max value of the rectangles corner coordinates, so we can use the above trick.</p>\n\n<p>For instance if <code>a = {x1:INT_MAX, x2:INT_MIN, y1:INT_MAX, y2:INT_MIN}</code>, then when calculating the union of <code>a</code> and any rectangle <code>b</code>, we will have:</p>\n\n<pre><code>b.x1 &lt;= a.x1  // a.x1 == INT_MAX\nb.y1 &lt;= a.y1  // a.y1 == INT_MAX\nb.x2 &gt;= a.x1  // a.x1 == INT_MIN\nb.y2 &gt;= a.y2  // a.y2 == INT_MIN\n</code></pre>\n\n<p>So the union of <code>a</code> and <code>b</code> in this case will be <code>b</code></p>\n\n<p>Making use of this in <code>calcUnionColl()</code>:</p>\n\n<pre><code>// I assume the data-type for your rectangle coordinates is `int`.\n// If you use another datatype, change this accoringly.\n\nRectangle RectangleCollection::calcUnionColl() const {\n    int i_min = std::numeric_limit&lt;int&gt;::min(); // c++ way of getting INT_MIN\n    int i_max = std::numeric_limit&lt;int&gt;::max(); // c++ way of getting INT_MAX\n\n    set&lt;Rectangle&gt;::iterator it;\n    Rectangle a(i_max, i_min, i_max, i_min);\n\n    for (it = oColl.begin(); it != oColl.end(); ++it) {\n        a = a.unionRect(*it);\n    }\n    return a;\n}\n</code></pre>\n\n<p>Now, if <code>oColl</code> is empty, <code>calcUnionColl()</code> will return <code>x1:INT_MAX, x2:INT_MIN, y1:INT_MAX, y2:INT_MIN</code>. This should be an invalid value for a rectangle since <code>x1&gt;x2</code> and <code>y1&gt;y2</code>, and should be easy to test for.</p>\n\n<p>Sometimes you don't even have to test for it, since it often is an invalid value \"that makes sense\" for further calculations.</p>\n"}], "owner": {"reputation": 1, "user_id": 11422543, "user_type": "registered", "profile_image": "https://graph.facebook.com/2419612428073056/picture?type=large", "display_name": "Stanislav Stoichev", "link": "https://stackoverflow.com/users/11422543/stanislav-stoichev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1556807450, "creation_date": 1556737681, "last_edit_date": 1556756719, "question_id": 55941345, "link": "https://stackoverflow.com/questions/55941345/how-to-avoid-creating-of-empty-object", "title": "How to avoid creating of empty object?", "body": "<p>I am making my homework and I have 2 functions unionRect and intersectRect.I am creating a set of my first class Rectangle from a file. I have to return the union and intersect rectangle of that oColl.I am having a problem with returning the values because the object returns two 0 values.</p>\n\n<p>I have tried to return different things but I couldn't do it.</p>\n\n<p>This is from the first class Rectangle</p>\n\n<pre><code>Rectangle unionRect(const Rectangle&amp; rec) const {\n            int ux1, ux2, uy1, uy2;\n            ux1 = min(ix1, rec.ix1);\n            uy1 = min(iy1, rec.iy1);\n            ux2 = max(ix2, rec.ix2);\n            uy2 = max(iy2, rec.iy2);\n            Rectangle a(ux1, ux2, uy1, uy2);\n            return a;\n    }\n\n</code></pre>\n\n<p>This is second class RectangleCollection function to read from file</p>\n\n<pre><code>RectangleCollection(const string&amp; strFileName) {\n        ifstream ifile(strFileName.data());\n        copy(istream_iterator&lt;Rectangle&gt;(ifile), istream_iterator&lt;Rectangle&gt;(), inserter(oColl,oColl.begin()));\n    };\n</code></pre>\n\n<p>this is my RectangleCollection class function for union Rect</p>\n\n<pre><code>Rectangle calcUnionColl() {\n        set&lt;Rectangle&gt;::iterator it;\n        Rectangle a;\n        for (it = oColl.begin(); it != oColl.end(); ++it) {\n         a = unionRect(*it);\n        }\n        return a;\n\n    }\n</code></pre>\n\n<p>and the .txt file is </p>\n\n<pre><code>5 5 10 10\n6 6 12 12\n</code></pre>\n\n<p>but when i call calcUnionColl it returns me </p>\n\n<pre><code>x1:0 x2:6 y1:0 y2:12\n</code></pre>\n\n<p>I expect the output to be x1:5 x2:6 y1:5 y2:12.\nThank you in advance!</p>\n"}, {"tags": ["c++", "r", "rcpp"], "answers": [{"comments": [{"owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "reply_to_user": {"reputation": 23, "user_id": 11438386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001de81727b896af7c78d9b6130dc167?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/11438386/tom"}, "edited": false, "score": 1, "creation_date": 1556745575, "post_id": 55941317, "comment_id": 98538891, "body": "That is the standard way to cast from <code>SEXP</code> types -- have a look around some of the Rcpp documentation."}], "tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": true, "score": 3, "last_activity_date": 1556737521, "creation_date": 1556737521, "answer_id": 55941317, "question_id": 55941085, "link": "https://stackoverflow.com/questions/55941085/rcpp-error-when-passing-a-boolean-value-in-a-list-from-r-to-a-c-function-that/55941317#55941317", "title": "Rcpp: error when passing a boolean value in a list from R to a C++ function that takes an Rcpp::List", "body": "<p>Works here on Ubuntu 18.10:</p>\n\n<pre><code>R&gt; source(\"~/git/stackoverflow/55941085/question.R\")\n[1] \"R value: FALSE\"\nC++ Value: FALSE\n[1] \"R value: TRUE\"\nC++ Value: TRUE\n[1] \"R value: FALSE\"\nC++ Value: FALSE\nLinux rob 4.18.0-16-generic #17-Ubuntu SMP Fri Feb 8 00:06:57 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux\nR&gt;\n</code></pre>\n\n<p>But I suggest to change the code on one important line to</p>\n\n<pre><code>MyStruct myStruct(Rcpp::as&lt;bool&gt;(myList[\"boolVar\"]));\n</code></pre>\n\n<p>See if that helps you.</p>\n"}], "owner": {"reputation": 23, "user_id": 11438386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001de81727b896af7c78d9b6130dc167?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/11438386/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 55941317, "answer_count": 1, "score": 0, "last_activity_date": 1556737521, "creation_date": 1556736230, "question_id": 55941085, "link": "https://stackoverflow.com/questions/55941085/rcpp-error-when-passing-a-boolean-value-in-a-list-from-r-to-a-c-function-that", "title": "Rcpp: error when passing a boolean value in a list from R to a C++ function that takes an Rcpp::List", "body": "<p>This issue has shown up in an R package I maintain when run on certain systems. I've reproduced the error below. Am I doing something wrong in this code? I'd appreciate any help since I'm having trouble identifying the source of the error.</p>\n\n<pre><code>library(Rcpp)\n\nsourceCpp(code='\n#include &lt;Rcpp.h&gt;\n#include &lt;cstdio&gt;\n\nstruct MyStruct {\npublic:\n\n    bool boolVar;\n\n    explicit MyStruct(bool t_boolVar=false) : boolVar(t_boolVar) {}\n\n    void print() const {\n        printf(\"C++ Value: %s\\\\n\", boolVar ? \"TRUE\" : \"FALSE\");\n    }\n};\n\n// [[Rcpp::export]]\nint myFunc(const Rcpp::List &amp;myList) {\n    MyStruct myStruct(static_cast&lt;bool&gt;(myList[\"boolVar\"]));\n    myStruct.print();\n    return 0;\n}\n')\n\ntestFunc &lt;- function(boolVar=FALSE) {\n    print(paste(\"R value:\", boolVar))\n    myList &lt;- list(\"boolVar\"=boolVar)\n    myFunc(myList)\n}\n\ntestFunc()\ntestFunc(TRUE)\ntestFunc(FALSE)\n\nsessionInfo()\nsystem('uname -a')\n</code></pre>\n\n<p>This gives me the following output when run on the problematic machine. The issue is that the value passed in to <code>MyStruct</code> doesn't match the value set in R.</p>\n\n<pre><code>&gt; testFunc()\n[1] \"R value: FALSE\"\nC++ Value: TRUE\n[1] 0\n&gt; testFunc(TRUE)\n[1] \"R value: TRUE\"\nC++ Value: TRUE\n[1] 0\n&gt; testFunc(FALSE)\n[1] \"R value: FALSE\"\nC++ Value: TRUE\n[1] 0\n&gt; \n&gt; sessionInfo()\nR version 3.5.3 (2019-03-11)\nPlatform: x86_64-pc-linux-gnu (64-bit)\nRunning under: CentOS release 6.10 (Final)\n\nMatrix products: default\nBLAS/LAPACK: /export/intel/compilers_and_libraries_2017.6.256/linux/mkl/lib/intel64_lin/libmkl_intel_lp64.so\n\nlocale:\n [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C              \n [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8    \n [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   \n [7] LC_PAPER=en_US.UTF-8       LC_NAME=C                 \n [9] LC_ADDRESS=C               LC_TELEPHONE=C            \n[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n[1] Rcpp_1.0.1\n\nloaded via a namespace (and not attached):\n[1] compiler_3.5.3 tools_3.5.3   \n&gt; system('uname -a')\nLinux login02.cluster 2.6.32-696.18.7.el6.x86_64 #1 SMP Thu Jan 4 17:31:22 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\n</code></pre>\n"}, {"tags": ["c++", "templates", "language-lawyer", "c++20"], "answers": [{"comments": [{"owner": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 0, "creation_date": 1556736789, "post_id": 55941124, "comment_id": 98535613, "body": "We could totally remove <code>template</code> keyword and replace with auto since autos are translated as template in the backend anyway"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1556736816, "post_id": 55941124, "comment_id": 98535624, "body": "I expect you to now make this proposal"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1556736901, "post_id": 55941124, "comment_id": 98535676, "body": "@SombreroChicken Don&#39;t hold your breath."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1556737127, "post_id": 55941124, "comment_id": 98535765, "body": "I am now dead ."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 13757, "user_id": 1270003, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d5ed9123b92a6e4dffa75f9f6dd9e382?s=128&d=identicon&r=PG&f=1", "display_name": "texasbruce", "link": "https://stackoverflow.com/users/1270003/texasbruce"}, "edited": false, "score": 2, "creation_date": 1556741679, "post_id": 55941124, "comment_id": 98537529, "body": "@texasbruce: The correct syntax would be <code>auto &lt;auto&gt; auto { auto };</code>. I believe, however, we should work at making C++ less verbose by using: <code>car &lt;car&gt; car { car };</code> instead. Won&#39;t somebody think of the keyboards?"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1556736915, "last_edit_date": 1556736915, "creation_date": 1556736506, "answer_id": 55941124, "question_id": 55941023, "link": "https://stackoverflow.com/questions/55941023/c-auto-for-type-and-nontype-templates/55941124#55941124", "title": "c++ auto for type and nontype templates", "body": "<blockquote>\n  <p>Are there plans for such an extension in the next c++20 release? </p>\n</blockquote>\n\n<p>No.</p>\n\n<blockquote>\n  <p>Is there some fundamental problem in having a syntax like <code>template&lt;auto... X&gt;</code>, with <code>X</code> any type or nontype template parameter?</p>\n</blockquote>\n\n<p>It would be a totally new concept in the language - having a name refer to <em>either</em> a type <em>or</em> a value in the same place. So it'd come with all sorts of additional questions - and probably additional language features to check if <code>X</code> is a type or not.</p>\n\n<p>The syntax likely <em>cannot</em> be <code>template &lt;auto... X&gt; struct Y { };</code> since that syntax already has meaning and means a bunch of values and <code>Y&lt;int&gt;{}</code> is ill-formed. </p>\n\n<p>There are definitely places where such a thing would be useful though. A proposal would just have to address these issues. </p>\n"}, {"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556737472, "post_id": 55941263, "comment_id": 98535889, "body": "I have to admit that I can&#39;t think of a complete use case. But considering that there exists contexts where both a type or a value would be valid (<code>sizeof</code> comes to mind) I can imagine that someone somewhere would have liked this feature at some point."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1556791227, "post_id": 55941263, "comment_id": 98552240, "body": "@PasserBy Hmm, but asking the question &quot;Is this a specialisation for that&quot; can be answered much more simply by the compiler that already knows, surely?"}], "tags": [], "owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "is_accepted": false, "score": -1, "last_activity_date": 1556738588, "last_edit_date": 1556738588, "creation_date": 1556737213, "answer_id": 55941263, "question_id": 55941023, "link": "https://stackoverflow.com/questions/55941023/c-auto-for-type-and-nontype-templates/55941263#55941263", "title": "c++ auto for type and nontype templates", "body": "<p>I can't see how it would be useful that a template argument could be dynamically either a type or a value? The code statements that use types are very different to those that which use constant values introduced through the template argument.</p>\n\n<p>The only way would be a big \"if constexpr\" which would make it pointless in my view.</p>\n\n<p>Ok, having looked more closely at the referenced question, I guess there is room there for generically pass-through wrapping the various explicit base template implementations that use different parameter orderings. I still fail to see a huge benefit. The compiler errors when it goes wrong are going to be unfathomable, if nothing else!</p>\n\n<p>I remember being told that overloading and templates were going to rid the world of the unfathomable error messages generated from macros. I have yet to see it!</p>\n"}, {"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 1, "last_activity_date": 1556738136, "creation_date": 1556738136, "answer_id": 55941443, "question_id": 55941023, "link": "https://stackoverflow.com/questions/55941023/c-auto-for-type-and-nontype-templates/55941443#55941443", "title": "c++ auto for type and nontype templates", "body": "<p>The big issue with trying to do something like that is grammar. Template parameters state up-front whether they are templates, types, or values, and the most important reason for this is grammatical.</p>\n\n<p>C++ is a context-sensitive grammar. That means that you cannot know, just from a sequence of tokens, what a particular sequence of tokens means. For example, <code>IDENTIFIER LEFT_PAREN RIGHT_PAREN SEMICOLON</code>. What does that mean?</p>\n\n<p>It could mean to call a function named by <code>IDENTIFIER</code> with no parameters. It could mean to default initialize a prvalue of a class named by <code>IDENTIFIER</code>. These are rather different things; you might conceptually see them as similar, but C++'s grammar does not.</p>\n\n<p>Templates are not macros; they're not doing token pasting. There is some understanding that a piece of code in a template is supposed to mean a specific thing. And you can only do that if you at least know what kind of thing a template parameter is.</p>\n\n<p>In order to retain this ability, these \"omni template parameters\" cannot be utilized until you actually know what they mean. So in order to create such a feature in C++, you would need to:</p>\n\n<ol>\n<li>Create a new syntax to declare omni template parameters (<code>auto</code> isn't going to fly, as it already has a specific meaning).</li>\n<li>Provide a syntax for determining what kind of thing an omni template parameter is.</li>\n<li>Require the user to invoke that syntax before they can use such parameter names in most ways. This would typically be via some form of specialized <code>if constexpr</code> block, but pattern matching proposals represent an interesting alternative/additional way to handle them (since they can be expressions as well as statements). And expansion statements represent a possible way to access all of the omni parameters in a parameter pack.</li>\n</ol>\n"}], "owner": {"reputation": 3980, "user_id": 8769985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72402fe064285d9e3e85fd3ca5900e5a?s=128&d=identicon&r=PG&f=1", "display_name": "francesco", "link": "https://stackoverflow.com/users/8769985/francesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 55941124, "answer_count": 3, "score": 1, "last_activity_date": 1556738588, "creation_date": 1556735974, "last_edit_date": 1556736512, "question_id": 55941023, "link": "https://stackoverflow.com/questions/55941023/c-auto-for-type-and-nontype-templates", "title": "c++ auto for type and nontype templates", "body": "<p>In c++17 <code>template &lt;auto&gt;</code> allows to declare templates with arbitrary type parameters. Partially inspired by <a href=\"https://stackoverflow.com/q/51056414/8769985\">this</a> question, it would be useful to have an extension of <code>template &lt;auto&gt;</code> that captures both type and nontype template parameters, and also allows for a variadic version of it.</p>\n\n<p>Are there plans for such an extension in the next c++20 release? Is there some fundamental problem in having a syntax like <code>template&lt;auto... X&gt;</code>, with <code>X</code> any type or nontype template parameter? </p>\n"}, {"tags": ["c++", "regex"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 3, "creation_date": 1556736039, "post_id": 55941005, "comment_id": 98535310, "body": "Should it be <code>&quot;&#39;[\\\\x00-\\\\x7F]&#39;&quot;</code>?"}, {"owner": {"reputation": 379, "user_id": 5388264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/532b3145726c36fb8e0e102bd89cfd16?s=128&d=identicon&r=PG&f=1", "display_name": "303", "link": "https://stackoverflow.com/users/5388264/303"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1556736115, "post_id": 55941005, "comment_id": 98535335, "body": "Yes. That&#39;s it! Thank you so much. If you write an answer, I&#39;d accept it."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 3, "creation_date": 1556737364, "post_id": 55941005, "comment_id": 98535853, "body": "The reason for the crash is the <code>\\x00</code> is causing an end of string to be injected, and the parser is ignoring the rest. It would <i>generally</i> work with any other character code"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1556737765, "post_id": 55941005, "comment_id": 98536001, "body": "Or you could use raw literal strings where you don&#39;t need to escape your escape. <a href=\"https://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/string_literal</a>  <code>std::regex(R(&quot;&#39;[\\x00-\\x7F]&#39;&quot;))</code>"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1556755064, "post_id": 55941005, "comment_id": 98541128, "body": "@MartinYork I think you mean <code>R&quot;(...)&quot;</code> right?"}], "answers": [{"tags": [], "owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "is_accepted": true, "score": 1, "last_activity_date": 1556755084, "creation_date": 1556755084, "answer_id": 55944098, "question_id": 55941005, "link": "https://stackoverflow.com/questions/55941005/in-what-way-are-the-brackets-of-this-regex-mismatched/55944098#55944098", "title": "In what way are the brackets of this regex &quot;mismatched&quot;?", "body": "<p>The correct answer is already mentioned in the comments several hours ago. Since the commenters don't seem to be coming back, I will summarize the point here. </p>\n\n<p>Here, <code>\\x00</code> is just <code>\\0</code>, which denotes the end of a C-style string. A <code>regex</code> is constructed with a C-style string, so what the constructor sees is really <code>\"'[\"</code> instead of the desired <code>\"'[\\x00-\\x7F]'\"</code>. In other words, C-style strings cannot contain the <code>\\0</code> character. This explains why the library complains that your brackets are mismatched.</p>\n\n<p>Since regex allows direct use of escaping, you can let the constructor see the characters <code>\\x00</code>. The <code>\\</code> itself needs to be escaped, so it is <code>\"\\\\x00\"</code>. Note that you are passing four characters to the constructor in this case, instead of one. Same for <code>\\x7F</code>. </p>\n\n<pre><code>std::regex(\"'[\\\\x00-\\\\x7F]'\")\n</code></pre>\n\n<p>Alternatively, you can use raw strings, so you don't have to escape the backslashes.</p>\n\n<pre><code>std::regex(R\"('[\\x00-\\x7F]')\")\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 5388264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/532b3145726c36fb8e0e102bd89cfd16?s=128&d=identicon&r=PG&f=1", "display_name": "303", "link": "https://stackoverflow.com/users/5388264/303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 55944098, "answer_count": 1, "score": 3, "last_activity_date": 1556755084, "creation_date": 1556735882, "question_id": 55941005, "link": "https://stackoverflow.com/questions/55941005/in-what-way-are-the-brackets-of-this-regex-mismatched", "title": "In what way are the brackets of this regex &quot;mismatched&quot;?", "body": "<p>Consider this C++ code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    regex_match(\"'c'\", std::regex(\"'[\\x00-\\x7F]'\"));\n    std::cout &lt;&lt; \"Reached!\";\n}\n</code></pre>\n\n<p>When I compile it with clang++ 8.0.0, it crashes at runtime with the following error:</p>\n\n<pre><code>libc++abi.dylib: terminating with uncaught exception of type std::__1::regex_error: The expression contained mismatched [ and ].\nAbort trap: 6\n</code></pre>\n\n<p>But in how far are the brackets mismatched? I have an opening bracket and it is closed by a closing bracket. What is my error?</p>\n"}, {"tags": ["c++", "windows", "cryptography", "cryptoapi", "wincrypt"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1556743356, "post_id": 55940910, "comment_id": 98538144, "body": "This is going back a ways and my memory is foggy... Those session keys are stored in a container. They are not intended to be returned to the user. To export one you need to supply an RSA key with an exponent of 1, which is effectively &quot;no encryption&quot;. WinCrypt will encrypt the session key with the RSA key and then return it to you."}, {"owner": {"reputation": 253, "user_id": 4968642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/737e71a4440f9774ef3f660df3e50af7?s=128&d=identicon&r=PG&f=1", "display_name": "droidnoob", "link": "https://stackoverflow.com/users/4968642/droidnoob"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1556772396, "post_id": 55940910, "comment_id": 98544150, "body": "could you please explain this further? I&#39;ve been using your statement to try and find answers and I haven&#39;t found a thing"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1556774945, "post_id": 55940910, "comment_id": 98544888, "body": "See this old Microsoft KB article: Q228786, <a href=\"https://web.archive.org/web/20000603131602/http://support.microsoft.com/support/kb/articles/Q228/7/86.ASP\" rel=\"nofollow noreferrer\">Export/Import Plain Text Session Key Using CryptoAPI</a>. Here&#39;s another old article about it: <a href=\"https://www.phdcc.com/cryptorc4.htm\" rel=\"nofollow noreferrer\">Setting the RC4 key in Windows CryptoAPI</a>. Once you know to search for Q228786, you can find lots of hits."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1556795930, "post_id": 55940910, "comment_id": 98554607, "body": "I think this is the closest duplicate, but I think it misses some important points, like a session key cannot be easily exported: <a href=\"https://stackoverflow.com/q/29586097/608639\">How to export AES key derived using CryptoAPI</a>."}, {"owner": {"reputation": 253, "user_id": 4968642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/737e71a4440f9774ef3f660df3e50af7?s=128&d=identicon&r=PG&f=1", "display_name": "droidnoob", "link": "https://stackoverflow.com/users/4968642/droidnoob"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1556804188, "post_id": 55940910, "comment_id": 98559287, "body": "Could you take a look at what I have ? This STILL does not work. I&#39;ve been up all night trying to figure it out and I got nowhere"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1556812517, "post_id": 55940910, "comment_id": 98564088, "body": "The code you provided does not do what the knowledge base article tells you to do. You should do what the kb article tells you to do."}, {"owner": {"reputation": 253, "user_id": 4968642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/737e71a4440f9774ef3f660df3e50af7?s=128&d=identicon&r=PG&f=1", "display_name": "droidnoob", "link": "https://stackoverflow.com/users/4968642/droidnoob"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1556817162, "post_id": 55940910, "comment_id": 98566144, "body": "I don&#39;t think you understand what I am trying to achieve. I have updated the code with the article you sent but it does not answer my question. It does encrypt and decrypt correctly. But the encrypted data changes. I need to be able to pass a name and password already generated and check that it matches and although it encrypts and decrypts, it does not work"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1556817838, "post_id": 55940910, "comment_id": 98566428, "body": "I believe you are generating a random key with <code>CryptGenKey(hProv, CALG_RC4, CRYPT_EXPORTABLE, &amp;hSessionKey)</code>. I don&#39;t see calls to <code>CryptDeriveKey</code> to derive the session key you formerly discussed. At this point I should probably step out of this conversation."}, {"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1556921304, "post_id": 55940910, "comment_id": 98605727, "body": "RC4 and a private key with an exponent of ... one? What&#39;s the point of the code?"}], "owner": {"reputation": 253, "user_id": 4968642, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/737e71a4440f9774ef3f660df3e50af7?s=128&d=identicon&r=PG&f=1", "display_name": "droidnoob", "link": "https://stackoverflow.com/users/4968642/droidnoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 345, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556816898, "creation_date": 1556735439, "last_edit_date": 1556816898, "question_id": 55940910, "link": "https://stackoverflow.com/questions/55940910/get-session-key-generated-from-cryptderivekey", "title": "Get session key generated from CryptDeriveKey()", "body": "<p>I am working with the crypto libraries and I am trying to create a simple password algorithm with the libraries. I used MSDN's <a href=\"https://docs.microsoft.com/en-us/windows/desktop/seccrypto/example-c-program-deriving-a-session-key-from-a-password\" rel=\"nofollow noreferrer\">Deriving a Session Key from a Password</a> to generate keys by passing in a \"username\", but I'm not sure how to get the key back to test against my algorithm. The algorithm takes the username passed above and the key generated. I attempted using <code>CryptDeriveKey</code> and <code>CryptGetKeyParam</code> but it does not return the key.</p>\n\n<p>How else could this be achieved ?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;Wincrypt.h&gt;\n\n#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#pragma comment( lib, \"Advapi32.lib\" )\n#pragma comment( lib, \"Rpcrt4.lib\" )\n#pragma comment( lib, \"Ole32.lib\" )\n#pragma comment( lib, \"Winhttp.lib\" )\n#pragma comment( lib, \"Crypt32.lib\" )\n\n#include &lt;tchar.h&gt;\n#include &lt;stdio.h&gt;\n\n#pragma comment(lib, \"crypt32.lib\")\n\n\n// Data to be encrypted.\n// \n#define PLAIN_TEXT   TEXT(\"Michael Scott\")\n\n// \n// Private key with exponent of one.\n// \nstatic BYTE PrivateKeyWithExponentOfOne[] =\n{\n   0x07, 0x02, 0x00, 0x00, 0x00, 0xA4, 0x00, 0x00,\n   0x52, 0x53, 0x41, 0x32, 0x00, 0x02, 0x00, 0x00,\n   0x01, 0x00, 0x00, 0x00, 0xAB, 0xEF, 0xFA, 0xC6,\n   0x7D, 0xE8, 0xDE, 0xFB, 0x68, 0x38, 0x09, 0x92,\n   0xD9, 0x42, 0x7E, 0x6B, 0x89, 0x9E, 0x21, 0xD7,\n   0x52, 0x1C, 0x99, 0x3C, 0x17, 0x48, 0x4E, 0x3A,\n   0x44, 0x02, 0xF2, 0xFA, 0x74, 0x57, 0xDA, 0xE4,\n   0xD3, 0xC0, 0x35, 0x67, 0xFA, 0x6E, 0xDF, 0x78,\n   0x4C, 0x75, 0x35, 0x1C, 0xA0, 0x74, 0x49, 0xE3,\n   0x20, 0x13, 0x71, 0x35, 0x65, 0xDF, 0x12, 0x20,\n   0xF5, 0xF5, 0xF5, 0xC1, 0xED, 0x5C, 0x91, 0x36,\n   0x75, 0xB0, 0xA9, 0x9C, 0x04, 0xDB, 0x0C, 0x8C,\n   0xBF, 0x99, 0x75, 0x13, 0x7E, 0x87, 0x80, 0x4B,\n   0x71, 0x94, 0xB8, 0x00, 0xA0, 0x7D, 0xB7, 0x53,\n   0xDD, 0x20, 0x63, 0xEE, 0xF7, 0x83, 0x41, 0xFE,\n   0x16, 0xA7, 0x6E, 0xDF, 0x21, 0x7D, 0x76, 0xC0,\n   0x85, 0xD5, 0x65, 0x7F, 0x00, 0x23, 0x57, 0x45,\n   0x52, 0x02, 0x9D, 0xEA, 0x69, 0xAC, 0x1F, 0xFD,\n   0x3F, 0x8C, 0x4A, 0xD0,\n\n   0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n   0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n\n   0x64, 0xD5, 0xAA, 0xB1,\n   0xA6, 0x03, 0x18, 0x92, 0x03, 0xAA, 0x31, 0x2E,\n   0x48, 0x4B, 0x65, 0x20, 0x99, 0xCD, 0xC6, 0x0C,\n   0x15, 0x0C, 0xBF, 0x3E, 0xFF, 0x78, 0x95, 0x67,\n   0xB1, 0x74, 0x5B, 0x60,\n\n   0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,\n};\n\nextern \"C\" int __cdecl _tmain(int argc, _TCHAR* argv[])\n{\nDWORD       dwResult = 0;\nHCRYPTPROV  hProv = 0;\nHCRYPTKEY   hKey = 0;\nHCRYPTKEY   hSessionKey = 0;\nBYTE* pbBlob = NULL;\nDWORD       cbBlob;\nBYTE        byData[] = PLAIN_TEXT;\nDWORD       cbData = sizeof(byData);\nDWORD       dwIndex;\n\n__try\n{\n    // \n    // Acquire context for default user.\n    // \n    if (!CryptAcquireContext(&amp;hProv, NULL, MS_DEF_PROV, PROV_RSA_FULL, 0))\n    {\n        dwResult = GetLastError();\n        if (dwResult == NTE_BAD_KEYSET)\n        {\n            if (!CryptAcquireContext(&amp;hProv, NULL, MS_DEF_PROV, PROV_RSA_FULL, CRYPT_NEWKEYSET))\n            {\n                dwResult = GetLastError();\n                _tprintf(TEXT(\"Error [0x%x]: CryptAcquireContext() failed.\\n\"), dwResult);\n                __leave;\n            }\n        }\n        else\n        {\n            dwResult = GetLastError();\n            __leave;\n        }\n    }\n\n    // \n    // Import the exponent-of-one private key.\n    // \n    if (!CryptImportKey(hProv,\n        PrivateKeyWithExponentOfOne,\n        sizeof(PrivateKeyWithExponentOfOne),\n        0, 0, &amp;hKey))\n    {\n        dwResult = GetLastError();\n        _tprintf(TEXT(\"Error [0x%x]: CryptImportKey() failed.\\n\"), dwResult);\n        __leave;\n    }\n    _tprintf(TEXT(\"%p\\n\"), &amp;hKey);\n\n    // \n    // Generate exportable session key.\n    // \n    if (!CryptGenKey(hProv, CALG_RC4, CRYPT_EXPORTABLE, &amp;hSessionKey))\n    {\n        dwResult = GetLastError();\n        _tprintf(TEXT(\"Error [0x%x]: CryptGenKey() failed.\\n\"), dwResult);\n        __leave;\n    }\n    //printf(\"%04x\\n\", &amp;hSessionKey);\n    // \n    // Display plain text.\n    // \n    _tprintf(TEXT(\"Original text = [%s]\\n\"), byData);\n\n    // \n    // Encrypt the data.\n    // \n    if (!CryptEncrypt(hSessionKey, 0, TRUE, 0, byData, &amp;cbData, cbData))\n    {\n        dwResult = GetLastError();\n        _tprintf(TEXT(\"Error [0x%x]: CryptEncrypt() failed.\\n\"), dwResult);\n        __leave;\n    }\n\n    // \n    // Display encrypted text.\n    // \n    _tprintf(TEXT(\"Encrypted text = [\"));\n    for (dwIndex = 0; dwIndex &lt; cbData; dwIndex++)\n    {\n        _tprintf(TEXT(\"%hhx\"), byData[dwIndex]);\n    }\n    _tprintf(TEXT(\"]\\n\"));\n\n    // \n    // Determine key blob size.\n    // \n    if (!CryptExportKey(hSessionKey, hKey, SIMPLEBLOB, 0, NULL, &amp;cbBlob))\n    {\n        dwResult = GetLastError();\n        _tprintf(TEXT(\"Error [0x%x]: CryptExportKey() failed.\\n\"), dwResult);\n        __leave;\n    }\n\n    // \n    // Allocate memory for key blob.\n    // \n    if ((pbBlob = (BYTE*)LocalAlloc(LMEM_ZEROINIT, cbBlob)) == NULL)\n    {\n        dwResult = ERROR_NOT_ENOUGH_MEMORY;\n        _tprintf(TEXT(\"Error [0x%x]: LocalAlloc() failed.\\n\"), dwResult);\n        __leave;\n    }\n\n    // \n    // Export the session key. Resultant blob is the raw session key.\n    // \n    if (!CryptExportKey(hSessionKey, hKey, SIMPLEBLOB, 0, pbBlob, &amp;cbBlob))\n    {\n        dwResult = GetLastError();\n        _tprintf(TEXT(\"Error [0x%x]: CryptExportKey() failed.\\n\"), dwResult);\n        __leave;\n    }\n\n    // \n    // Destroy the session key.\n    // \n    CryptDestroyKey(hSessionKey);\n    hSessionKey = 0;\n\n    // \n    // Import the session key back to decrypt the data.\n    // \n    if (!CryptImportKey(hProv, pbBlob, cbBlob, 0, 0, &amp;hSessionKey))\n    {\n        dwResult = GetLastError();\n        _tprintf(TEXT(\"Error [0x%x]: CryptImportKey() failed.\\n\"), dwResult);\n        __leave;\n    }\n\n    // \n    // Decrypt the data.\n    // \n    if (!CryptDecrypt(hSessionKey, 0, TRUE, 0, byData, &amp;cbData))\n    {\n        dwResult = GetLastError();\n        _tprintf(TEXT(\"Error [0x%x]: CryptDecrypt() failed.\\n\"), dwResult);\n        __leave;\n    }\n\n    // \n    // Make sure we got all the data back.\n    // \n    if (cbData != sizeof(byData) || _tcscmp((const char*)byData, PLAIN_TEXT) != 0)\n    {\n        _tprintf(TEXT(\"Error: Data was not decrypted correctly.\\n\"));\n        __leave;\n    }\n\n    // \n    // Display decrypted text.\n    // \n    _tprintf(TEXT(\"Decrypted text = [%s]\\n\"), byData);\n}\n\n__finally\n{\n    // \n    // Release all allocated resources.\n    // \n    if (pbBlob)\n        LocalFree(pbBlob);\n\n    if (hSessionKey)\n        CryptDestroyKey(hSessionKey);\n\n    if (hKey)\n        CryptDestroyKey(hKey);\n\n    if (hProv)\n        CryptReleaseContext(hProv, 0);\n}\n\nreturn (int)dwResult;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 5, "creation_date": 1556735169, "post_id": 55940777, "comment_id": 98534980, "body": "<code>+</code> snd <code>-</code> should take an integer on the right side, not another iterator. Adding iterators makes no more sense than adding pointers."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1556735297, "post_id": 55940777, "comment_id": 98535030, "body": "For <code>std::sort</code>, your iterator must meet the requirements of random access iterator: <a href=\"https://en.cppreference.com/w/cpp/named_req/RandomAccessIterator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/named_req/RandomAccessIterator</a> As @molbdnilo mentioned, your <code>+</code> operator is wrong, but you also need <code>+=</code> and <code>-=</code>, and &quot;index&quot; operator <code>[]</code> (for the iterator, not the test vector)."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1556735412, "post_id": 55940777, "comment_id": 98535068, "body": "@molbdnilo <code>-</code> makes sense for iterator, it gives you the distance between two random access iterator."}], "answers": [{"tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": true, "score": 4, "last_activity_date": 1589141687, "last_edit_date": 1589141687, "creation_date": 1556736142, "answer_id": 55941066, "question_id": 55940777, "link": "https://stackoverflow.com/questions/55940777/custom-iterator-for-use-in-stdsort/55941066#55941066", "title": "Custom iterator for use in `std::sort`", "body": "<p>In order to use <a href=\"https://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\"><code>std::sort</code></a>, your iterators must meet the requirements of <a href=\"https://en.cppreference.com/w/cpp/named_req/RandomAccessIterator\" rel=\"nofollow noreferrer\">LegacyRandomAccessIterator</a>, which implies <a href=\"https://en.cppreference.com/w/cpp/named_req/BidirectionalIterator\" rel=\"nofollow noreferrer\">LegacyBidirectionalIterator</a>, <a href=\"https://en.cppreference.com/w/cpp/named_req/ForwardIterator\" rel=\"nofollow noreferrer\">LegacyForwardIterator</a> and <a href=\"https://en.cppreference.com/w/cpp/named_req/Iterator\" rel=\"nofollow noreferrer\">LegacyIterator</a>.</p>\n\n<p>Your <code>TestVectorIterator</code> is lacking a bunch of overloads to meet such requirements. In particular:</p>\n\n<ul>\n<li><code>operator+(TestVectorIterator const&amp;, TestVectorIterator const&amp;)</code> makes no sense, you need <code>operator+(TestVectorIterator const&amp;, int)</code> and <code>operator+(int, TestVectorIterator const&amp;)</code>;</li>\n<li>you need <code>TestVectorIterator operator-(TestVectorIterator const&amp;, int)</code>;</li>\n<li>you need compound operators: <code>+=</code>, <code>-=</code>;</li>\n<li>you need postfix increment and decrement <code>TestVectorIterator operator++(int)</code> and <code>TestVectorIterator operator--(int)</code>;</li>\n<li>you need a subscript operator <code>int&amp; operator[](int)</code>.</li>\n</ul>\n"}], "owner": {"reputation": 8321, "user_id": 1213006, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/utGQE.jpg?s=128&g=1", "display_name": "rhughes", "link": "https://stackoverflow.com/users/1213006/rhughes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 55941066, "answer_count": 1, "score": 1, "last_activity_date": 1589141687, "creation_date": 1556734827, "last_edit_date": 1556738417, "question_id": 55940777, "link": "https://stackoverflow.com/questions/55940777/custom-iterator-for-use-in-stdsort", "title": "Custom iterator for use in `std::sort`", "body": "<p>I am trying to create a custom container and iterator.</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>std::array&lt;int, 1000&gt; global_data;\n\nclass TestVectorIterator\n{\npublic:\n    TestVectorIterator()\n        : index(0)\n    {\n    }\n\n    TestVectorIterator(int index)\n        : index(index)\n    {\n    }\n\n    int&amp; operator*()\n    {\n        return global_data[index];\n    }\n\n    const int&amp; operator*() const\n    {\n        return global_data[index];\n    }\n\n    TestVectorIterator&amp; operator++()\n    {\n        index++;\n        return *this;\n    }\n\n    TestVectorIterator&amp; operator--()\n    {\n        index--;\n        return *this;\n    }\n\n    friend int operator- (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        return lhs.index - rhs.index;\n    }\n\n    friend int operator+ (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        return lhs.index + rhs.index;\n    }\n\n    friend bool operator== (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        if (rhs.index &gt;= global_data.size())\n        {\n            return lhs.index == rhs.index;\n        }\n\n        return (*lhs) == (*rhs);\n    }\n\n    friend bool operator!= (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        if (rhs.index &gt;= global_data.size())\n        {\n            return lhs.index != rhs.index;\n        }\n\n        return (*lhs) != (*rhs);\n    }\n\n    friend bool operator&lt;= (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        if (rhs.index &gt;= global_data.size())\n        {\n            return lhs.index &lt;= rhs.index;\n        }\n\n        return (*lhs) &lt;= (*rhs);\n    }\n\n    friend bool operator&gt;= (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        if (rhs.index &gt;= global_data.size())\n        {\n            return lhs.index &gt;= rhs.index;\n        }\n\n        return (*lhs) &gt;= (*rhs);\n    }\n\n    friend bool operator&lt; (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        if (rhs.index &gt;= global_data.size())\n        {\n            return lhs.index &lt; rhs.index;\n        }\n\n        return (*lhs) &lt; (*rhs);\n    }\n\n    using difference_type = int;\n    using value_type = int;\n    using pointer = int*;\n    using reference = int&amp;;\n    using iterator_category = std::random_access_iterator_tag;\n\nprivate:\n    int index = 0;\n};\n\nclass TestVector\n{\npublic:\n\n    typedef TestVectorIterator iterator;\n    typedef const TestVectorIterator const_iterator;\n\n    TestVector()\n    {\n    }\n\n    int size()\n    {\n        return global_data.size();\n    }\n\n    TestVector::iterator begin()\n    {\n        return TestVectorIterator(0);\n    }\n\n    TestVector::iterator end()\n    {\n        return TestVectorIterator(size());\n    }\n\n    TestVector::const_iterator cbegin()\n    {\n        return TestVectorIterator(0);\n    }\n\n    TestVector::const_iterator cend()\n    {\n        return TestVectorIterator(size());\n    }\n\n    int&amp; operator[](int i)\n    {\n        return global_data[i];\n    }\n};\n</code></pre>\n\n<p>It is working fine with range <code>for</code> loops, but gives compile time error when used with <code>std::sort</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2BXbA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2BXbA.png\" alt=\"enter image description here\"></a></p>\n\n<p>I haven't used C++ in a while, so I'm guessing I'm missing something simple (or doing something just plain wrong).</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>After taking <code>Holt</code>'s answer, here is compiling code:</p>\n\n<pre><code>std::array&lt;int, 1000&gt; global_data;\n\nclass TestVectorIterator\n{\npublic:\n    TestVectorIterator()\n        : index(0)\n    {\n    }\n\n    TestVectorIterator(int index)\n        : index(index)\n    {\n    }\n\n    int&amp; operator*()\n    {\n        return global_data[index];\n    }\n\n    const int&amp; operator*() const\n    {\n        return global_data[index];\n    }\n\n    TestVectorIterator&amp; operator++()\n    {\n        index++;\n        return *this;\n    }\n\n    TestVectorIterator&amp; operator--()\n    {\n        index--;\n        return *this;\n    }\n\n    friend int operator- (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        return lhs.index - rhs.index;\n    }\n\n    friend TestVectorIterator operator-(TestVectorIterator const&amp; lhs, int rhs)\n    {\n        return TestVectorIterator(lhs.index - rhs);\n    }\n\n    friend TestVectorIterator operator+(TestVectorIterator const&amp; lhs, int rhs)\n    {\n        return TestVectorIterator(lhs.index + rhs);\n    }\n\n    friend TestVectorIterator operator+(int lhs, TestVectorIterator const&amp; rhs)\n    {\n        return TestVectorIterator(lhs + rhs.index);\n    }\n\n    friend TestVectorIterator&amp; operator+= (TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        lhs.index += rhs.index;\n        return lhs;\n    }\n\n    friend TestVectorIterator&amp; operator-= (TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        lhs.index -= rhs.index;\n        return lhs;\n    }\n\n    friend bool operator== (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        if (rhs.index &gt;= global_data.size())\n        {\n            return lhs.index == rhs.index;\n        }\n\n        return (*lhs) == (*rhs);\n    }\n\n    friend bool operator!= (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        if (rhs.index &gt;= global_data.size())\n        {\n            return lhs.index != rhs.index;\n        }\n\n        return (*lhs) != (*rhs);\n    }\n\n    friend bool operator&lt;= (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        if (rhs.index &gt;= global_data.size())\n        {\n            return lhs.index &lt;= rhs.index;\n        }\n\n        return (*lhs) &lt;= (*rhs);\n    }\n\n    friend bool operator&gt;= (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        if (rhs.index &gt;= global_data.size())\n        {\n            return lhs.index &gt;= rhs.index;\n        }\n\n        return (*lhs) &gt;= (*rhs);\n    }\n\n    friend bool operator&lt; (const TestVectorIterator&amp; lhs, const TestVectorIterator&amp; rhs)\n    {\n        if (rhs.index &gt;= global_data.size())\n        {\n            return lhs.index &lt; rhs.index;\n        }\n\n        return (*lhs) &lt; (*rhs);\n    }\n\n    using difference_type = int;\n    using value_type = int;\n    using pointer = int*;\n    using reference = int&amp;;\n    using iterator_category = std::random_access_iterator_tag;\n\nprivate:\n    int index = 0;\n};\n</code></pre>\n"}, {"tags": ["c++", "point-cloud-library", "training-data", "object-recognition"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10821050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-99znxwUo_PU/AAAAAAAAAAI/AAAAAAAAAEY/ahE6MYuo76w/photo.jpg?sz=128", "display_name": "Kevin I Apriandy", "link": "https://stackoverflow.com/users/10821050/kevin-i-apriandy"}, "edited": false, "score": 1, "creation_date": 1556761492, "post_id": 55944232, "comment_id": 98542159, "body": "it is nice of you to helping"}], "tags": [], "owner": {"reputation": 1229, "user_id": 9226753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28247b27eef49240c767833514e2ab50?s=128&d=identicon&r=PG&f=1", "display_name": "kanstar", "link": "https://stackoverflow.com/users/9226753/kanstar"}, "is_accepted": false, "score": 2, "last_activity_date": 1556756688, "creation_date": 1556756688, "answer_id": 55944232, "question_id": 55940756, "link": "https://stackoverflow.com/questions/55940756/how-to-do-a-training-and-matching-for-3d-object-recognition-from-viewpoint-featu/55944232#55944232", "title": "How to do a training and matching for 3D object recognition from Viewpoint Feature Histogram?", "body": "<p>On <a href=\"http://pointclouds.org\" rel=\"nofollow noreferrer\">pointclouds.org</a> you can find a <a href=\"http://pointclouds.org/documentation/tutorials/vfh_recognition.php#vfh-recognition\" rel=\"nofollow noreferrer\">tutorial</a> explaining exactly what you are asking for.</p>\n"}], "owner": {"reputation": 1, "user_id": 10821050, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-99znxwUo_PU/AAAAAAAAAAI/AAAAAAAAAEY/ahE6MYuo76w/photo.jpg?sz=128", "display_name": "Kevin I Apriandy", "link": "https://stackoverflow.com/users/10821050/kevin-i-apriandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556756688, "creation_date": 1556734732, "question_id": 55940756, "link": "https://stackoverflow.com/questions/55940756/how-to-do-a-training-and-matching-for-3d-object-recognition-from-viewpoint-featu", "title": "How to do a training and matching for 3D object recognition from Viewpoint Feature Histogram?", "body": "<p>I would like to build a 3D object recognition for my project reaserch, I have clustered for each object that I will recognize, and I have also calculated the VFH. My question is, after that what should I do?, how to make training data to make the recognition?, and how do I match the object to the scene?</p>\n\n<p>I am using ROS C++ and Pointcloud library</p>\n\n<p>Thank you very much for your answer</p>\n"}, {"tags": ["c++", "console-application"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1556733990, "post_id": 55940596, "comment_id": 98534507, "body": "You need to move your <code>if &#47; else</code> logic inside the loop."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1556734026, "post_id": 55940596, "comment_id": 98534533, "body": "See this question about why <code>cin</code> only reads one word: <a href=\"https://stackoverflow.com/questions/9469264/c-cin-only-reads-the-first-word\" title=\"c cin only reads the first word\">stackoverflow.com/questions/9469264/&hellip;</a> (and also note that <code>std::string</code> is much better and safer to use than a raw <code>char</code> array)"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556734133, "post_id": 55940596, "comment_id": 98534578, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Are you going to create an answer?"}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1556734188, "post_id": 55940596, "comment_id": 98534604, "body": "Please only ask one question. Cramming two questions in makes this too broad. Start with the loop logic and the desired output. Aks about multiple word misbehaviour later."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1556734204, "post_id": 55940596, "comment_id": 98534612, "body": "Moving <code>&quot;cout &lt;&lt; &quot;Access granted!&quot;;</code> to after the loop would be the simplest change."}, {"owner": {"reputation": 340, "user_id": 9106271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c03562eab50a5cd318f0f0529294834?s=128&d=identicon&r=PG&f=1", "display_name": "CelticTree", "link": "https://stackoverflow.com/users/9106271/celtictree"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556734399, "post_id": 55940596, "comment_id": 98534678, "body": "@Fran&#231;oisAndrieux This does work, but is there a more cleaner solution? As you said, this is the simplest, but I am up for a challenge."}, {"owner": {"reputation": 340, "user_id": 9106271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c03562eab50a5cd318f0f0529294834?s=128&d=identicon&r=PG&f=1", "display_name": "CelticTree", "link": "https://stackoverflow.com/users/9106271/celtictree"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556734423, "post_id": 55940596, "comment_id": 98534689, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 This unfortunately did not change the outcome of the loop."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556734526, "post_id": 55940596, "comment_id": 98534723, "body": "@CelticTree Well, that was only a nudge (thus a comment), never said it would fully solve your problems."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1556734634, "post_id": 55940596, "comment_id": 98534770, "body": "@CelticTree It&#39;s quite a simple project with simple goals and no apparent constraints. So the solution is also likely to be simple. It&#39;s not likely to be challenging. In addition, simpler is usually cleaner. Asking for a cleaner solution is usually contrary, in principal, to asking for a more challenging solution."}, {"owner": {"reputation": 340, "user_id": 9106271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c03562eab50a5cd318f0f0529294834?s=128&d=identicon&r=PG&f=1", "display_name": "CelticTree", "link": "https://stackoverflow.com/users/9106271/celtictree"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556735055, "post_id": 55940596, "comment_id": 98534932, "body": "@Fran&#231;oisAndrieux Ah, well this makes sense. I&#39;m just fairly new to C++ and going in, I expected everything to be hard. It&#39;s all coming together quite nicely though."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556735624, "post_id": 55940596, "comment_id": 98535146, "body": "@CelticTree The basic rules and syntax of c++ aren&#39;t very easy, but they aren&#39;t as hard as people make them out to be. The <i>real</i> challenge is that, unlike most other languages, c++ has Undefined Behavior. It&#39;s possible (and easy) to accidentally write code that is illegal but that the compiler won&#39;t warn you about. In that case, your code can do anything at all. As such, it&#39;s not possible to learn c++ by trial-and-error. Observing that code has a certain behavior isn&#39;t enough to prove that the behavior is required or that it will be consistent. You need to know and internalize the rules."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556735804, "post_id": 55940596, "comment_id": 98535217, "body": "@CelticTree I&#39;ll congratulate because it doesn&#39;t appear that you&#39;ve picked up many of the bad habits new c++ developers usually pick up (though you might have used <code>using namespace std;</code> here, can&#39;t tell). Be sure that, to continue on this promising trend, you make sure any material you use to further learn c++ is <i>actually</i> for c++ and not for c. A lot of new developers learn from c and c++ resources, but best practices in c are often considered bad behavior in c++. In addition, try to focus on more recent resources, as the language has changed <b>drastically</b>, specially since 2011."}, {"owner": {"reputation": 340, "user_id": 9106271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c03562eab50a5cd318f0f0529294834?s=128&d=identicon&r=PG&f=1", "display_name": "CelticTree", "link": "https://stackoverflow.com/users/9106271/celtictree"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556736871, "post_id": 55940596, "comment_id": 98535653, "body": "@Fran&#231;oisAndrieux Thank you for your wisdom. And unfortunately, I was using <code>namespace std</code> when I first started (yesterday), but I&#39;ve read about why it&#39;s bad practice. It can lead to conflicting elements in the future. Do you have any sources you&#39;d recommend? I&#39;ve been learning from a basic site that pretty much teaches syntax, functions, loops, etc. I know all of these things from my knowledge in PHP though."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556737155, "post_id": 55940596, "comment_id": 98535779, "body": "@CelticTree Sorry to say I haven&#39;t kept up to date on the best self-teaching material. Anything I would have used is surely out of date by now. Be on the lookup for terms such as c++17 (or c++11 and c++14). There&#39;s a new version every 3 years since c++11. You&#39;ll be sure that the content is relevant. For reference purposes, use <a href=\"https://en.cppreference.com\" rel=\"nofollow noreferrer\">en.cppreference.com</a>. It&#39;s very complete and widely considered to be reliable and correct. Though, it isn&#39;t simplified like some other sites, so some topics can be tricky to look up at first. But, it may be best to get used to it early."}], "answers": [{"comments": [{"owner": {"reputation": 340, "user_id": 9106271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c03562eab50a5cd318f0f0529294834?s=128&d=identicon&r=PG&f=1", "display_name": "CelticTree", "link": "https://stackoverflow.com/users/9106271/celtictree"}, "edited": false, "score": 0, "creation_date": 1556734901, "post_id": 55940690, "comment_id": 98534881, "body": "Thank you! This simultaneously answered both of my questions. And the solution was quite simple indeed, but I&#39;m not sure if I ever would&#39;ve figured it out. A side error is that if &quot;test&quot; is the first word in the string, it still accepts it even if other things follow. But I will figure this one out on my own, thank you for the help!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 340, "user_id": 9106271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c03562eab50a5cd318f0f0529294834?s=128&d=identicon&r=PG&f=1", "display_name": "CelticTree", "link": "https://stackoverflow.com/users/9106271/celtictree"}, "edited": false, "score": 1, "creation_date": 1556736172, "post_id": 55940690, "comment_id": 98535358, "body": "That is because <code>operator&gt;&gt;</code> only reads one word at a time.  Use <code>std::getline()</code> instead to read a line at a time instead."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1556736249, "last_edit_date": 1556736249, "creation_date": 1556734418, "answer_id": 55940690, "question_id": 55940596, "link": "https://stackoverflow.com/questions/55940596/output-a-value-to-console-after-do-while-statement-is-satisfied/55940690#55940690", "title": "Output a value to console after do...while statement is satisfied?", "body": "<p>You need to output your <code>\"Access granted\"</code> message after the loop exits, and you also need to clear the stdin input after each failed attempt to discard any  words that are still waiting to be read:</p>\n\n<pre><code>#include &lt;limits&gt;\n\nstring password;\n\ncout &lt;&lt; \"Please enter the password!\" &lt;&lt; endl;\ncin &gt;&gt; password;\n\nif (password == \"test\") {\n    cout &lt;&lt; \"Access granted!\";\n} else {\n    do {\n        cin.clear();\n        cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n        cout &lt;&lt; \"Access denied! Try again.\" &lt;&lt; endl;\n        cin &gt;&gt; password;\n    } while (password != \"test\");\n    cout &lt;&lt; \"Access granted!\";\n}\n\nreturn 0;\n</code></pre>\n\n<p><a href=\"https://ideone.com/pa2QCM\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p>Which would be better written like this instead:</p>\n\n<pre><code>#include &lt;limits&gt;\n\nstring password;\n\ncout &lt;&lt; \"Please enter the password!\" &lt;&lt; endl;\ndo {\n    cin &gt;&gt; password;\n    cin.clear();\n    cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n    if (password == \"test\") break;\n    cout &lt;&lt; \"Access denied! Try again.\" &lt;&lt; endl;\n}\nwhile (true);\n\ncout &lt;&lt; \"Access granted!\";\nreturn 0;\n</code></pre>\n\n<p><a href=\"https://ideone.com/DYBwST\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p>However, note that <code>operator&gt;&gt;</code> reads only 1 word at a time, so something like <code>\"test I GOT IN!\"</code> will also be accepted.  You should use <code>std::getline()</code> instead to read an entire line at a time, instead of reading a word at a time:</p>\n\n<pre><code>#include &lt;limits&gt;\n\nstring password;\n\ncout &lt;&lt; \"Please enter the password!\" &lt;&lt; endl;\ndo {\n    getline(cin, password);\n    if (password == \"test\") break;\n    cout &lt;&lt; \"Access denied! Try again.\" &lt;&lt; endl;\n}\nwhile (true);\n\ncout &lt;&lt; \"Access granted!\";\nreturn 0;\n</code></pre>\n\n<p><a href=\"https://ideone.com/j6fnnJ\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 340, "user_id": 9106271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c03562eab50a5cd318f0f0529294834?s=128&d=identicon&r=PG&f=1", "display_name": "CelticTree", "link": "https://stackoverflow.com/users/9106271/celtictree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 55940690, "answer_count": 1, "score": 0, "last_activity_date": 1556736249, "creation_date": 1556733879, "last_edit_date": 1556734781, "question_id": 55940596, "link": "https://stackoverflow.com/questions/55940596/output-a-value-to-console-after-do-while-statement-is-satisfied", "title": "Output a value to console after do...while statement is satisfied?", "body": "<p>I'm extremely new to C++, and can't really figure this out. I've tried a couple things, but I feel like I'm just missing something simple.</p>\n\n<p>I have this console application where a user inputs a pre-defined password. If the password is incorrect, it prompts them to re-enter the password. If the password is correct, is simply ends the program, but I want it to say \"Access granted!\" then end.</p>\n\n<p>A side issue I'm having is when more than word is entered as the password, \"Access Denied\" is printed for each word.</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>string password;\n\ncout &lt;&lt; \"Please enter the password!\" &lt;&lt; endl;\ncin &gt;&gt; password;\n\nif (password == \"test\") {\n    cout &lt;&lt; \"Access granted!\";\n} else {\n    do {\n        cout &lt;&lt; \"Access denied! Try again.\" &lt;&lt; endl;\n        cin &gt;&gt; password;\n    } while (password != \"test\");\n}\n\nreturn 0;\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 174103, "user_id": 23528, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1595024881f1df4af9e2280926fb6272?s=128&d=identicon&r=PG", "display_name": "Daniel A. White", "link": "https://stackoverflow.com/users/23528/daniel-a-white"}, "edited": false, "score": 3, "creation_date": 1556732542, "post_id": 55940308, "comment_id": 98533813, "body": "you need to allocate space for <code>r</code>, its length is 0."}, {"owner": {"reputation": 8101, "user_id": 7691729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2568514188dfa24ecc3c1884e481834?s=128&d=identicon&r=PG&f=1", "display_name": "Quimby", "link": "https://stackoverflow.com/users/7691729/quimby"}, "edited": false, "score": 2, "creation_date": 1556732662, "post_id": 55940308, "comment_id": 98533870, "body": "Why <code>&lt;bits&#47;basic_string.h&gt;</code> instead of <code>&lt;string&gt;</code>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556732812, "post_id": 55940308, "comment_id": 98533962, "body": "<i>&quot;no compilation errors ... <code>r[str.length() - i] = str[i];</code>&quot;</i> is <i>undefined behavior</i>."}, {"owner": {"reputation": 97, "user_id": 11438271, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qDMoSxG5FFI/AAAAAAAAAAI/AAAAAAAAALw/EI4-iCrjhsg/photo.jpg?sz=128", "display_name": "Shiv C Kushawah", "link": "https://stackoverflow.com/users/11438271/shiv-c-kushawah"}, "edited": false, "score": 0, "creation_date": 1556733218, "post_id": 55940308, "comment_id": 98534164, "body": "It works fine after allocating length.   Do I always need to declare length for a string? Will string behave differently in c++ than it behaves in php or javascript?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556733416, "post_id": 55940308, "comment_id": 98534256, "body": "@ShivCKushawah <i>&quot;Will string behave differently in c++ than it behaves in php or javascript?&quot;</i> Yes. None of the c++ containers supports automatic resizing."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556733509, "post_id": 55940308, "comment_id": 98534295, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 None of the standard sequential containers support automatically inserting for out of bounds accesses, but associative containers (like <code>std::map</code>) do."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556733523, "post_id": 55940308, "comment_id": 98534306, "body": "At last not automated in that fashion. Various push and remove functions and assignments will resize the underlying buffer. <code>std::back_inserter</code> is another useful tool."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556733566, "post_id": 55940308, "comment_id": 98534321, "body": "@Fran&#231;oisAndrieux OK, good nitpick :)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1556733687, "post_id": 55940308, "comment_id": 98534385, "body": "I&#39;m going a bit further than Quimby. Don&#39;t include anything from the bits folder. Everything in bits is implementation-specific and intended to be included from a higher-level header. The implementation details can change without warning and are not the same, likely they don&#39;t even exist, across all C++ implementations. Without being included by the higher-level header, the headers in bits may malfunction because some set-up that&#39;s assumed to have been performed by the higher-level header may not have been performed."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1556734865, "post_id": 55940308, "comment_id": 98534862, "body": "Why don&#39;t you just use <a href=\"https://en.cppreference.com/w/cpp/algorithm/reverse\" rel=\"nofollow noreferrer\">std::reverse</a>?"}, {"owner": {"reputation": 97, "user_id": 11438271, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qDMoSxG5FFI/AAAAAAAAAAI/AAAAAAAAALw/EI4-iCrjhsg/photo.jpg?sz=128", "display_name": "Shiv C Kushawah", "link": "https://stackoverflow.com/users/11438271/shiv-c-kushawah"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1556735011, "post_id": 55940308, "comment_id": 98534917, "body": "@Jesper Juhl Tried to do it myself"}], "answers": [{"comments": [{"owner": {"reputation": 2581, "user_id": 5141304, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dH8FwSGAMts/AAAAAAAAAAI/AAAAAAAAABY/L6D_xatTkV4/photo.jpg?sz=128", "display_name": "Cruz Jean", "link": "https://stackoverflow.com/users/5141304/cruz-jean"}, "edited": false, "score": 1, "creation_date": 1556732743, "post_id": 55940377, "comment_id": 98533920, "body": "Well this is pass by value, so you don&#39;t even need to make a copy - you already have one."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1556734572, "post_id": 55940377, "comment_id": 98534742, "body": "You do not even need <code>std::reverse()</code> just one liner <code>return std::string( str.rbegin(), str.rend() );</code> will do"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 10, "last_activity_date": 1556737589, "last_edit_date": 1556737589, "creation_date": 1556732694, "answer_id": 55940377, "question_id": 55940308, "link": "https://stackoverflow.com/questions/55940308/the-function-returns-empty-string/55940377#55940377", "title": "The function returns empty string", "body": "<p>Your function is invoking UNDEFINED BEHAVIOR, as you are not allocating any memory for the <code>r</code> string before using its <code>[]</code> operator to assign characters to <code>r</code>.  <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator_at\" rel=\"noreferrer\"><code>std::string::operator[]</code></a> does not perform any bounds checking, so you are actually trashing surrounding memory.  Also, you are not indexing into <code>r</code> correctly, too (your indexing is off by 1).</p>\n\n<p>Had you used the <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/at\" rel=\"noreferrer\"><code>std::string::at()</code></a> method instead of the <code>operator[]</code>, it would have raised a runtime exception complaining about you accessing characters out of bounds.</p>\n\n<p>You need to make a <em>copy</em> of the input <code>str</code> first, and then you can reverse the characters of that copy, eg:</p>\n\n<pre><code>std::string reverse(std::string str) { \n    std::string r = str; // &lt;-- COPY HERE\n\n    for (int i = str.length()-1, j = 0; i &gt;= 0; --i, ++j) {\n        r[j] = str[i];  \n    }\n\n    return r;\n} \n</code></pre>\n\n<p>Alternatively, you can use the <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/resize\" rel=\"noreferrer\"><code>std::string::resize()</code></a> method to pre-allocate the <code>r</code> string, then use of <code>operator[]</code> will be valid:</p>\n\n<pre><code>std::string reverse(std::string str) { \n    std::string r;\n    r.resize(str.length()); // &lt;-- ALLOCATE HERE\n\n    for (int i = str.length()-1, j = 0; i &gt;= 0; --i, ++j) {\n        r[j] = str[i];  \n    }\n\n    return r;\n} \n</code></pre>\n\n<p>Or, you can use the <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/push_back\" rel=\"noreferrer\"><code>std::string::push_back()</code></a> method instead (optionally with the <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/reserve\" rel=\"noreferrer\"><code>std::string::reserve()</code></a> method to avoid re-allocations while pushing):</p>\n\n<pre><code>std::string reverse(std::string str) { \n    std::string r;\n    r.reserve(str.length()); // &lt;-- OPTIONAL\n\n    for (int i = str.length()-1; i &gt;= 0; --i) {\n        r.push_back(str[i]);  \n    }\n\n    return r;\n} \n</code></pre>\n\n<p>Or, have a look at replacing your manual loop with the <a href=\"https://en.cppreference.com/w/cpp/algorithm/reverse_copy\" rel=\"noreferrer\"><code>std::reverse_copy()</code></a> algorithm instead:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\nstd::string reverse(std::string str) { \n    std::string r;\n    r.resize(str.length());\n    std::reverse_copy(str.begin(), str.end(), r.begin());\n    return r;\n} \n</code></pre>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nstd::string reverse(std::string str) { \n    std::string r;\n    r.reserve(str.length()); // &lt;-- OPTIONAL\n    std::reverse_copy(str.begin(), str.end(), std::back_inserter(r));\n    return r;\n} \n</code></pre>\n\n<p>However, that being said, since the input <code>str</code> is being passed <em>by value</em>, it is ALREADY a copy of whatever string you pass to your function, so you don't actually need the local <code>r</code> string at all.  You can reverse the characters of the input <code>str</code> in-place, just be use to take into account that the source and destination strings are the same string, so adjust your loop accordingly:</p>\n\n<pre><code>std::string reverse(std::string str) { \n    int count = str.length() / 2;\n    for (int i = 0, j = str.length()-1; i &lt; count; ++i, --j) {\n        char ch = str[i];\n        str[i] = str[j];\n        str[j] = ch;\n\n        // alternatively:\n        // std::swap(str[i], str[j]);\n    }\n\n    return str;\n} \n</code></pre>\n\n<p>Or, have a look at the <a href=\"https://en.cppreference.com/w/cpp/algorithm/reverse\" rel=\"noreferrer\"><code>std::reverse()</code></a> algorithm instead:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\nstd::string reverse(std::string str) { \n    std::reverse(str.begin(), str.end());\n    return str;\n} \n</code></pre>\n\n<p>Or, you can use the <code>std::string</code> constructor that takes 2 iterators as input, as <code>std::string</code> has <a href=\"https://en.cppreference.com/w/cpp/iterator/reverse_iterator\" rel=\"noreferrer\">reverse iterators</a> available:</p>\n\n<pre><code>std::string reverse(std::string str) { \n    return std::string(str.rbegin(), str.rend());\n} \n\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 11438271, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qDMoSxG5FFI/AAAAAAAAAAI/AAAAAAAAALw/EI4-iCrjhsg/photo.jpg?sz=128", "display_name": "Shiv C Kushawah", "link": "https://stackoverflow.com/users/11438271/shiv-c-kushawah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 55940377, "answer_count": 1, "score": 2, "last_activity_date": 1556737589, "creation_date": 1556732412, "last_edit_date": 1556734905, "question_id": 55940308, "link": "https://stackoverflow.com/questions/55940308/the-function-returns-empty-string", "title": "The function returns empty string", "body": "<p>in the following code <code>reverse</code> function rerturns an empty string. no compilation errors.</p>\n\n<p>what can cause the problem here?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;bits/basic_string.h&gt;\nusing namespace std;\n\nstring reverse(string str) { \n    string r;\n\n    for (int i=str.length()-1; i&gt;=0; i--) {\n        r[str.length() - 1 - i] = str[i];  \n    }\n\n    return r;\n} \n\nint main() {\n    string str = \"ABCDefgh\";\n\n    cout&lt;&lt;\"Reverse string is : \"&lt;&lt;reverse(str)&lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Edit:\n<strike>r[str.length() - i] = str[i];  </strike><br>\nr[str.length() - 1 - i] = str[i];  </p>\n"}, {"tags": ["c++", "security", "gcc", "include"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1556732487, "post_id": 55940263, "comment_id": 98533792, "body": "How are you going to guarantee that those <code>#include</code> files will not include files you do not want?  For example, many compilers include <code>&lt;string&gt;</code> by simply including <code>&lt;iostream&gt;</code>.  Also, how is a solution &quot;damaging your system&quot; if the solver comes up with perfectly valid, C++ way of solving the problem?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1556732985, "post_id": 55940263, "comment_id": 98534048, "body": "Why aren&#39;t you using a chroot jail or container to isolate the users from your host system?"}, {"owner": {"reputation": 167, "user_id": 10267522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f221d2f71d790ec599cfa9201897e41?s=128&d=identicon&r=PG&f=1", "display_name": "R Xy", "link": "https://stackoverflow.com/users/10267522/r-xy"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556733443, "post_id": 55940263, "comment_id": 98534270, "body": "@PaulMcKenzie For the first question: I only want to specify the files users can include directly. If other files are included indirectly, that&#39;s OK; For the second: besides the C++ standard library, users may include other libraries that comes with the compiler; they may also read files on the machine, etc."}, {"owner": {"reputation": 167, "user_id": 10267522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f221d2f71d790ec599cfa9201897e41?s=128&d=identicon&r=PG&f=1", "display_name": "R Xy", "link": "https://stackoverflow.com/users/10267522/r-xy"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1556733585, "post_id": 55940263, "comment_id": 98534334, "body": "@drescherjm I&#39;m sorry that I didn&#39;t mention in the question - I also need to prevent them from including non-standard libraries."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1556733824, "post_id": 55940263, "comment_id": 98534445, "body": "My point is in a chroot jail or container you can remove any headers and libraries you want."}, {"owner": {"reputation": 167, "user_id": 10267522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f221d2f71d790ec599cfa9201897e41?s=128&d=identicon&r=PG&f=1", "display_name": "R Xy", "link": "https://stackoverflow.com/users/10267522/r-xy"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1556734032, "post_id": 55940263, "comment_id": 98534536, "body": "@drescherjm Sounds worth a try, thanks."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1556734295, "post_id": 55940263, "comment_id": 98534645, "body": "If you can banish &lt;bits/stdc++.h&gt; you may have a solution to a particularly stupid problem."}, {"owner": {"reputation": 167, "user_id": 10267522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f221d2f71d790ec599cfa9201897e41?s=128&d=identicon&r=PG&f=1", "display_name": "R Xy", "link": "https://stackoverflow.com/users/10267522/r-xy"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556734806, "post_id": 55940263, "comment_id": 98534832, "body": "@user4581301 Actually I need to remove everything not in the C++ standard and even some in the standard, such as <code>&lt;thread&gt;</code>."}], "owner": {"reputation": 167, "user_id": 10267522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f221d2f71d790ec599cfa9201897e41?s=128&d=identicon&r=PG&f=1", "display_name": "R Xy", "link": "https://stackoverflow.com/users/10267522/r-xy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1556734089, "creation_date": 1556732225, "last_edit_date": 1556734089, "question_id": 55940263, "link": "https://stackoverflow.com/questions/55940263/how-to-specify-a-range-of-files-that-can-be-included-when-compiling-c-code", "title": "How to specify a range of files that can be included when compiling C++ code?", "body": "<p>I've been making an online judge system, and need to prevent users from damaging it, or including non-standard libraries - so I want to limit the files can be included in a specific range (e.g. <code>iostream</code> and STL only). Is there a compiler option or other way to get this done?</p>\n\n<p>I found the <code>-include</code> option, but it just adds <code>#include &lt;xxx&gt;</code> to the code; the <code>-l</code> option seems useless too.</p>\n"}, {"tags": ["c++", "oop", "inheritance"], "comments": [{"owner": {"reputation": 3276, "user_id": 746547, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/6iL90.jpg?s=128&g=1", "display_name": "Louen", "link": "https://stackoverflow.com/users/746547/louen"}, "edited": false, "score": 0, "creation_date": 1556732468, "post_id": 55940260, "comment_id": 98533783, "body": "How about using virtual functions ?  <a href=\"https://en.cppreference.com/w/cpp/language/virtual\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/virtual</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1556734414, "post_id": 55940260, "comment_id": 98534684, "body": "Side note: <code>vector&lt; vector&lt;double&gt; &gt; matrix;</code> can have horrifyingly bad cache behaviour. Consider using a single <code>vector</code> and performing the 2D&lt;-&gt;1D math yourself."}], "answers": [{"tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": true, "score": 1, "last_activity_date": 1556732759, "creation_date": 1556732759, "answer_id": 55940391, "question_id": 55940260, "link": "https://stackoverflow.com/questions/55940260/c-advanced-class-model-for-matrix-calculator/55940391#55940391", "title": "C++: advanced class model for matrix calculator", "body": "<p>Implement all binary operators using non-member functions. Either global functions, or functions inside an unrelated class:</p>\n\n<pre><code>// Option 1\nvoid add(\n    MatrixWrapper&amp; result,\n    const MatrixWrapper&amp; operand1,\n    const MatrixWrapper&amp; operand2);\n\n// Option 2\nstruct WrapperForMatrixOperations // I don't know why you might want this class to exist\n{\n    static // or maybe not static\n    void add(\n        MatrixWrapper&amp; result,\n        const MatrixWrapper&amp; operand1,\n        const MatrixWrapper&amp; operand2);\n};\n</code></pre>\n\n<p>The reason is, your algorithm will probably return a \"dense\" matrix when adding a dense and a sparse matrix:</p>\n\n<pre><code>dense + sparse = dense\nsparse + sparse = sparse\nsparse + dense = dense &lt;- problem!\ndense + dense = dense\n</code></pre>\n\n<p>This cannot work if it is implemented as a non-<code>const</code> member function.</p>\n\n<p>You should also decide how you want to create your matrices - maybe each binary operation should allocate a new matrix and return it by <code>shared_ptr</code>?</p>\n"}], "owner": {"reputation": 39, "user_id": 10571344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d552a0c852d3922f260fe382b879126?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/10571344/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 55940391, "answer_count": 1, "score": 0, "last_activity_date": 1556732759, "creation_date": 1556732219, "question_id": 55940260, "link": "https://stackoverflow.com/questions/55940260/c-advanced-class-model-for-matrix-calculator", "title": "C++: advanced class model for matrix calculator", "body": "<p>I'm making a matrix calculator as a project for my C++ class in college and I'm not sure how to design the classes for it. My problem is that one of the traits of this program has to be that sparse and dense matrices should be stored in different ways for memory efficiency (dense as typical 2D array or vector, sparse in CSR format for example), but I need to handle both of the types in same way. </p>\n\n<p>So far I was thinking of something like have abstract class 'MatrixWrapper', which should contain all the shared algorithms for adding, multiplying, GEM, and so on. And then have classes 'MatrixDense' and 'MatrixSparse', which would both inherit from 'MatrixWrapper' and therefor have same interface (shown in code below). But that's where I got stuck, because with this approach when I tried implementing the algorithms in 'MatrixWrapper' I didn't know with which of the two matrices I'd be working. I'm just not sure how to solve this or even may approach is correct.</p>\n\n<pre><code>class MatrixWrapper {\n  public:\n    // shared algorithms\n    /* for example\n\n      void addMatrix ( const ??? &amp;x ) {\n        ...\n      }\n\n    */\n}\n\nclass MatrixDense : public MatrixWrapper {\n  public:\n    //constructor, destructor, ...\n  private:\n    vector&lt; vector&lt;double&gt; &gt; matrix;\n}\n\nclass MatrixSparse : public MatrixWrapper {\n  public:\n    //constructor, destructor, ...\n  private:\n    struct CSR {\n      ...\n    };\n    CSR matrix;\n}\n</code></pre>\n\n<p>I was maybe thinking about adding 2D array to the 'MatrixWrapper' along side with abstract method setValue() and then in 'MatrixSparse' and 'MatrixDense' every time just setting the values of this array using this method and then just working with that 2D array in 'MatrixWrapper', but I'm not sure how to implement that or even if that's the right approach.</p>\n"}, {"tags": ["c++", "c", "posix", "semaphore"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1556732122, "post_id": 55940188, "comment_id": 98533605, "body": "You are aware that the two threads run in different process contexts, are you? They are not using the same semaphore instances anymore."}, {"owner": {"reputation": 11, "user_id": 7435950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4740d4e4c7b21c2656d5d9f171540ed2?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Hassnain", "link": "https://stackoverflow.com/users/7435950/muhammad-hassnain"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556732217, "post_id": 55940188, "comment_id": 98533650, "body": "Ok i got the point.  I want child process thread to wake up parent process thread. What is the other method to do it."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1556732283, "post_id": 55940188, "comment_id": 98533694, "body": "You need to use a named semaphore or other IPC mechanism"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556732315, "post_id": 55940188, "comment_id": 98533702, "body": "You&#39;ll need some IPC mechanism. Maybe a pipe or ZMQ sockets can help to solve your problem."}, {"owner": {"reputation": 11, "user_id": 7435950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4740d4e4c7b21c2656d5d9f171540ed2?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Hassnain", "link": "https://stackoverflow.com/users/7435950/muhammad-hassnain"}, "edited": false, "score": 0, "creation_date": 1556732331, "post_id": 55940188, "comment_id": 98533715, "body": "ok. Thanks you."}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1556732700, "post_id": 55940188, "comment_id": 98533891, "body": "another semaphore option to consider are the Sys V semaphores."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1556736037, "post_id": 55940188, "comment_id": 98535308, "body": "From &quot;man sem_overview&quot; on Lubuntu 18.04 - &quot;POSIX semaphores come in two forms: named semaphores and unnamed semaphores.&quot;   also   &quot;Two processes can operate  on  the  same  named  semaphore  by  passing the  same  name  to sem_open(3) (in each process). Note: the sem_open must be performed in each process."}], "owner": {"reputation": 11, "user_id": 7435950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4740d4e4c7b21c2656d5d9f171540ed2?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Hassnain", "link": "https://stackoverflow.com/users/7435950/muhammad-hassnain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556733352, "creation_date": 1556731921, "last_edit_date": 1556733352, "question_id": 55940188, "link": "https://stackoverflow.com/questions/55940188/posix-semaphores-function-sem-post-doesnt-wake-sem-wait-problem", "title": "POSIX semaphores function sem_post() doesn&#39;t wake sem_wait() problem", "body": "<p>I am creating a Process P and Process P has child C. Both Process create one thread each. And i want to synchronize both thread using semaphore.\nProblem is that sem_post from child process thread doesn't wake up sem_wait of parent process thread. </p>\n\n<pre><code>sem_t sem;\nvoid* th(void* arg){\n    sem_wait(&amp;sem);\n    printf(\"DONE\");\n}\nvoid* th1(void* arg){\n    printf(\"%d\",sem_post(&amp;sem));\n}\npthread_t id[2];\nint main(){\n    sem_init(&amp;sem,2,1);\n    sem_wait(&amp;sem);\n    pid_t id1 = fork();\n    if(id1==0){\n        pthread_create(&amp;id[0],NULL,th,NULL);\n        pthread_join(id[0],NULL);\n    }\n    else if(id1&gt;0){ \n        pthread_create(&amp;id[1],NULL,th1,NULL);\n        pthread_join(id[1],NULL);\n        wait(NULL);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "g++", "c++17"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1556732413, "post_id": 55940127, "comment_id": 98533752, "body": "as it works in 7.4 and trunk its likely just a bug"}, {"owner": {"reputation": 2298, "user_id": 6427477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYQ8Y.png?s=128&g=1", "display_name": "C.M.", "link": "https://stackoverflow.com/users/6427477/c-m"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1556732494, "post_id": 55940127, "comment_id": 98533795, "body": "@AlanBirtles what&#39;s a &quot;trunk&quot; -- latest version?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1556732547, "post_id": 55940127, "comment_id": 98533817, "body": "yes, trunk is a term in source control, similar to master"}, {"owner": {"reputation": 2298, "user_id": 6427477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYQ8Y.png?s=128&g=1", "display_name": "C.M.", "link": "https://stackoverflow.com/users/6427477/c-m"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1556732578, "post_id": 55940127, "comment_id": 98533832, "body": "@AlanBirtles Thank you. Nevermind then, I&#39;ll delete the question"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1556732819, "post_id": 55940127, "comment_id": 98533965, "body": "@C.M. Please don&#39;t."}, {"owner": {"reputation": 2298, "user_id": 6427477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYQ8Y.png?s=128&g=1", "display_name": "C.M.", "link": "https://stackoverflow.com/users/6427477/c-m"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1556733640, "post_id": 55940127, "comment_id": 98534363, "body": "@Barry OK, I&#39;ll leave it"}], "owner": {"reputation": 2298, "user_id": 6427477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYQ8Y.png?s=128&g=1", "display_name": "C.M.", "link": "https://stackoverflow.com/users/6427477/c-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1556732808, "answer_count": 0, "score": 0, "last_activity_date": 1556732428, "creation_date": 1556731637, "last_edit_date": 1556732428, "question_id": 55940127, "link": "https://stackoverflow.com/questions/55940127/why-g-8-x-fails-to-compile-this-code-sfinae-doesnt-work-as-expected", "closed_reason": "Duplicate", "title": "Why g++ 8.x fails to compile this code? (SFINAE doesn&#39;t work as expected)", "body": "<p>(I apologize for the title, but I couldn't come up with anything more descriptive)</p>\n\n<p><a href=\"https://godbolt.org/z/qU1CJH\" rel=\"nofollow noreferrer\">This code</a> fails to compile in g++ 8.x, but compiles in every other C++17-capable compiler (including g++ 7.x):</p>\n\n<pre><code>#include &lt;variant&gt;\n#include &lt;type_traits&gt;\n\ntemplate&lt;class... Ts&gt; struct S\n{\n    template&lt;std::size_t idx&gt; using vtype = \n        std::variant_alternative_t&lt;idx, std::variant&lt;Ts...&gt;&gt;;\n    template&lt;bool B, class T = void&gt; using enable_if = std::enable_if_t&lt;B, T&gt;;\n    template&lt;class T, class U&gt; static constexpr bool is_same = std::is_same&lt;T, U&gt;::value;\n\n    template&lt;std::size_t idx, enable_if&lt; is_same&lt;vtype&lt;idx&gt;, int&gt;&gt;...&gt;\n    static bool foo() { return true ; }\n\n    template&lt;std::size_t idx, enable_if&lt;!is_same&lt;vtype&lt;idx&gt;, int&gt;&gt;...&gt;\n    static bool foo() { return false; }\n};\n\nauto x = S&lt;int, char, float&gt;::foo&lt;1&gt;();\n</code></pre>\n\n<p>Why it fails to compile?</p>\n\n<p>(I assume workaround would be to replace SFINAE+overloading with <code>if constexpr</code>)</p>\n"}, {"tags": ["c++", "c", "glut"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1556731050, "post_id": 55939984, "comment_id": 98533103, "body": "First you need the bounds of the object."}], "answers": [{"tags": [], "owner": {"reputation": 768, "user_id": 5032541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb5ebe3503f96f4e000715c50b35367?s=128&d=identicon&r=PG", "display_name": "Erwan Daniel", "link": "https://stackoverflow.com/users/5032541/erwan-daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1557330431, "last_edit_date": 1557330431, "creation_date": 1556734380, "answer_id": 55940685, "question_id": 55939984, "link": "https://stackoverflow.com/questions/55939984/how-to-check-if-the-mouse-is-on-one-side-of-the-screen-in-opengl/55940685#55940685", "title": "How to check if the mouse is on one side of the screen in OpenGl?", "body": "<p>I guess that you want to retrieve which object is under your mouse or under the clicked pixel.\nThere is a method called 3d picking. It consist of drawing your scene on a texture created specifically for this purpose. It must have same dimension as your window.\nYou will draw your scene with a special shader that will draw the id of your objects on the texture. After what you just need to read the pixel where the mouse is to know which object is selected. </p>\n\n<p>There is my fragment shader, it takes the id of the current object:</p>\n\n<pre><code>#version 330 core\n\nuniform uint id;\n\nlayout(location = 0) out uvec4 out_color;\n\nvoid main()\n{\n    uvec4 color;\n    color.x = (id &amp; 0xff0000u) &gt;&gt; 16;\n    color.y = (id &amp; 0x00ff00u) &gt;&gt;  8;\n    color.z = (id &amp; 0x0000ffu) &gt;&gt;  0;\n    color.w = uint(255);\n\n    out_color = color;\n    return;\n}\n</code></pre>\n\n<p>You can check out this tutorial also : <a href=\"http://ogldev.atspace.co.uk/www/tutorial29/tutorial29.html\" rel=\"nofollow noreferrer\">http://ogldev.atspace.co.uk/www/tutorial29/tutorial29.html</a></p>\n"}], "owner": {"reputation": 51, "user_id": 11295496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5b4f9d44030db5ecf9576c90d84f1a9?s=128&d=identicon&r=PG&f=1", "display_name": "anaksky2k19", "link": "https://stackoverflow.com/users/11295496/anaksky2k19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557330431, "creation_date": 1556730985, "last_edit_date": 1556731619, "question_id": 55939984, "link": "https://stackoverflow.com/questions/55939984/how-to-check-if-the-mouse-is-on-one-side-of-the-screen-in-opengl", "title": "How to check if the mouse is on one side of the screen in OpenGl?", "body": "<p>In opengl, how would I be able to check if the mouse pointer is inside an object. So far, I can only check if its inside the screen, using <code>glutPassiveMotionFunc</code>.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1556729365, "post_id": 55939628, "comment_id": 98532442, "body": "Ask yourself: How many elements are in <code>B</code> that you can write to."}, {"owner": {"reputation": 2652, "user_id": 5445670, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xrwS2.png?s=128&g=1", "display_name": "Solomon Ucko", "link": "https://stackoverflow.com/users/5445670/solomon-ucko"}, "edited": false, "score": 1, "creation_date": 1556758493, "post_id": 55939628, "comment_id": 98541693, "body": "FWIW, I think you missed a closing parenthesis on the third line."}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 9, "last_activity_date": 1556729465, "creation_date": 1556729465, "answer_id": 55939682, "question_id": 55939628, "link": "https://stackoverflow.com/questions/55939628/string-wont-reverse-using-reverse-copy/55939682#55939682", "title": "String won&#39;t reverse using reverse_copy", "body": "<p><code>std::reverse_copy</code> expects there to be pre-allocated space in the destination, so you want something like:</p>\n\n<pre><code>std::string a = \"abc\";\nstd::string b(a.size(), ' ');\nstd::reverse_copy(std::begin(a), std::end(a), std::begin(b);\nstd::cout &lt;&lt; b &lt;&lt; \"\\n\";\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 13, "creation_date": 1556731328, "post_id": 55939696, "comment_id": 98533224, "body": "Of course for this application (create a new string <code>B</code> that&#39;s the reverse of <code>A</code>), a simpler approach is to use <code>A</code>&#39;s reverse iterators: <code>const std::string B(A.crbegin(), A.crend());</code>"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 13, "creation_date": 1556731831, "post_id": 55939696, "comment_id": 98533470, "body": "Another caution is that these operations act on <code>char</code> units, not Unicode graphemes (assuming, say, UTF-8).  So if your string data contains &quot;funny&quot; characters, it may not work as desired."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1556737492, "post_id": 55939696, "comment_id": 98535903, "body": "<a href=\"https://stackoverflow.com/a/55940377/65863\">Various ways to reverse a <code>std::string</code></a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1556780343, "post_id": 55939696, "comment_id": 98546902, "body": "@Eljay Thanks, I added your caution to the answer."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": true, "score": 57, "last_activity_date": 1556780216, "last_edit_date": 1556780216, "creation_date": 1556729517, "answer_id": 55939696, "question_id": 55939628, "link": "https://stackoverflow.com/questions/55939628/string-wont-reverse-using-reverse-copy/55939696#55939696", "title": "String won&#39;t reverse using reverse_copy", "body": "<p>The <code>string</code> you are trying to copy into is too short (zero length). You have to make it long enough to accept the copied data:</p>\n\n<pre><code>std::string A = \"abc\";\nstd::string B;\nB.resize(A.size()); // make B big enough\n\nstd::reverse_copy(A.begin(), A.end(), B.begin());\n\nstd::cout &lt;&lt; B &lt;&lt; '\\n';\n</code></pre>\n\n<p>Currently you are writing <em>past the end</em> of <code>B</code> causing <em>undefined behavior</em>.</p>\n\n<p>Another way to do this is to use a special iterator called <a href=\"https://en.cppreference.com/w/cpp/iterator/back_insert_iterator\" rel=\"noreferrer\"><code>std::back_insert_iterator</code></a>, which pushes characters to the back of the target string:</p>\n\n<pre><code>std::string A = \"abc\";\nstd::string B;\n\nstd::reverse_copy(A.begin(), A.end(), std::back_inserter(B));\n</code></pre>\n\n<p>The <a href=\"https://en.cppreference.com/w/cpp/iterator/back_inserter\" rel=\"noreferrer\"><code>std::back_inserter()</code></a> function returns a <a href=\"https://en.cppreference.com/w/cpp/iterator/back_insert_iterator\" rel=\"noreferrer\"><code>std::back_insert_iterator</code></a> for the string you provide as a parameter (or any container that implements <code>push_back()</code>, such as <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/push_back\" rel=\"noreferrer\"><code>std::string::push_back()</code></a>).</p>\n\n<p><strong>Note:</strong> <a href=\"https://en.cppreference.com/w/cpp/algorithm/reverse_copy\" rel=\"noreferrer\">std::reverse_copy</a> invoked with standard <code>std::string</code> iterators (as in this example) will simply reverse the <em>code units</em> of a string and not <em>necessarily</em> the characters (depending on the encoding). For example a <code>UTF-8</code> encoded string that contains multibyte characters would not be reversed correctly by this function as the multibyte sequences would also be reversed making them invalid.</p>\n"}, {"tags": [], "owner": {"reputation": 2151, "user_id": 5902079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4df4530b8e41c66ac12d17f96cd70c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitry Gordon", "link": "https://stackoverflow.com/users/5902079/dmitry-gordon"}, "is_accepted": false, "score": 18, "last_activity_date": 1556846403, "last_edit_date": 1556846403, "creation_date": 1556729569, "answer_id": 55939704, "question_id": 55939628, "link": "https://stackoverflow.com/questions/55939628/string-wont-reverse-using-reverse-copy/55939704#55939704", "title": "String won&#39;t reverse using reverse_copy", "body": "<p><code>std::reverse_copy</code> doesn't allocate space, so your code leads to undefined behavior. Either allocate space beforehand:</p>\n\n<pre><code>string A = \"abc\";\nstring B;\nB.resize(A.size());\nreverse_copy(A.begin(),A.end(),B.begin());\ncout&lt;&lt;B&lt;&lt;endl;\n</code></pre>\n\n<p>or use <code>std::back_inserter</code>:</p>\n\n<pre><code>string A = \"abc\";\nstring B;\nreverse_copy(A.begin(),A.end(),std::back_inserter(B));\ncout&lt;&lt;B&lt;&lt;endl;\n</code></pre>\n"}], "owner": {"reputation": 679, "user_id": 10039830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/539c202090038a3650a5937be9a055ac?s=128&d=identicon&r=PG&f=1", "display_name": "SomeName", "link": "https://stackoverflow.com/users/10039830/somename"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2688, "favorite_count": 1, "accepted_answer_id": 55939696, "answer_count": 3, "score": 41, "last_activity_date": 1556846403, "creation_date": 1556729198, "last_edit_date": 1556779564, "question_id": 55939628, "link": "https://stackoverflow.com/questions/55939628/string-wont-reverse-using-reverse-copy", "title": "String won&#39;t reverse using reverse_copy", "body": "<p>If I have a string <code>A</code> that equals <code>\"abc\"</code> and I want to have string <code>B</code> that is the reversed form of string <code>A</code>, why can't I use <code>reverse_copy()</code> to do this ?</p>\n\n<pre><code>std::string A = \"abc\";\nstd::string B;\n\nstd::reverse_copy(A.begin(), A.end(), B.begin());\n\nstd::cout &lt;&lt; B &lt;&lt; std::endl;  // no output\n</code></pre>\n\n<p>Is <code>reverse_copy()</code> usable with strings? <code>reverse()</code> seems to work.</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1556729829, "post_id": 55939581, "comment_id": 98532641, "body": "<code>someSpace::Foo</code> doesn&#39;t contain a function called <code>create</code>"}, {"owner": {"reputation": 139, "user_id": 6655839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0c2a41d2799fc08395a88ce8c1b001?s=128&d=identicon&r=PG&f=1", "display_name": "Garret Gang", "link": "https://stackoverflow.com/users/6655839/garret-gang"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1556730205, "post_id": 55939581, "comment_id": 98532796, "body": "create is a static method for class Foo, doesn&#39;t that mean that create is a function someSpace::Foo?"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1556738589, "post_id": 55939581, "comment_id": 98536297, "body": "Your code is incomplete and will not compile as-is (for starters, <code>IFoo</code> is not declared -- and is inheritance needed in this case?). When I added placeholders to make it complete enough to compile, I did not get the message you mentioned. I conclude that you have not provided enough information. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 139, "user_id": 6655839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0c2a41d2799fc08395a88ce8c1b001?s=128&d=identicon&r=PG&f=1", "display_name": "Garret Gang", "link": "https://stackoverflow.com/users/6655839/garret-gang"}, "edited": false, "score": 0, "creation_date": 1556739978, "post_id": 55939581, "comment_id": 98536883, "body": "I modified it, giving more data. IFoo is an interface, as this is for creating a DLL, IFoo is the interface that tells other programs how to interact with the module when they are using it. This is following the way the boost tutorial did it."}], "answers": [{"tags": [], "owner": {"reputation": 7970, "user_id": 4117097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lrdeC.jpg?s=128&g=1", "display_name": "Anton Malyshev", "link": "https://stackoverflow.com/users/4117097/anton-malyshev"}, "is_accepted": false, "score": 0, "last_activity_date": 1556744046, "creation_date": 1556744046, "answer_id": 55942602, "question_id": 55939581, "link": "https://stackoverflow.com/questions/55939581/understanding-and-fixing-this-error-message-when-using-boost-dll-alias/55942602#55942602", "title": "Understanding and fixing this error Message when using BOOST_DLL_ALIAS", "body": "<p>Just move it outside the namespace, it seems not to work with demangling:</p>\n\n<pre><code>#include &lt;boost/dll/alias.hpp&gt;\n#include &lt;boost/make_shared.hpp&gt; \n#include \"IFoo.h\"\n\nnamespace someSpace{\nclass Foo: public IFoo\n{\n    size_t FooSize;\n    unsigned char * someData;\n    Foo(std::string someString);\npublic:\n    ~Foo();\n    size_t Size();\n    unsigned char getByte(unsigned long byteLoc);\n\n    //Factory method\n    static boost::shared_ptr&lt;IFoo&gt; create(std::string fooName);\n};\n}\n\nBOOST_DLL_ALIAS(\n    someSpace::Foo::create, //&lt;-- this function is exported with...\n    load_foo                 //&lt;-- this alias\n)\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 6655839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c0c2a41d2799fc08395a88ce8c1b001?s=128&d=identicon&r=PG&f=1", "display_name": "Garret Gang", "link": "https://stackoverflow.com/users/6655839/garret-gang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556744046, "creation_date": 1556728981, "last_edit_date": 1556740592, "question_id": 55939581, "link": "https://stackoverflow.com/questions/55939581/understanding-and-fixing-this-error-message-when-using-boost-dll-alias", "title": "Understanding and fixing this error Message when using BOOST_DLL_ALIAS", "body": "<p>I am trying to create plugins using boost and am having some difficulty getting it to work, I am following <a href=\"https://www.boost.org/doc/libs/1_65_1/doc/html/boost_dll/tutorial.html#boost_dll.tutorial.plugin_basics\" rel=\"nofollow noreferrer\">this tutorial</a> from boost.org.\nI am using boost 1_70 compiled with Visual Studio 2015.\nThis is my code for the interface IFoo.h:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;boost/config.hpp&gt;\n//Pluggin Interface for Puffs\nclass BOOST_SYMBOL_VISIBLE IFoo {\n    public:\n    //returns size of Foo\n    virtual size_t Size() = 0;\n    //get single byte from foo\n    virtual unsigned char getByte(unsigned long loc) = 0;\n};\n</code></pre>\n\n<p>This is my code for Foo.h:</p>\n\n<pre><code>#include &lt;boost/dll/alias.hpp&gt;\n#include &lt;boost/make_shared.hpp&gt; \n#include \"IFoo.h\"\n\nnamespace someSpace{\nclass Foo: public IFoo\n{\n    size_t FooSize;\n    unsigned char * someData;\n    Foo(std::string someString);\npublic:\n    ~Foo();\n    size_t Size();\n    unsigned char getByte(unsigned long byteLoc);\n\n    //Factory method\n    static boost::shared_ptr&lt;IFoo&gt; create(std::string fooName);\n};\n\nBOOST_DLL_ALIAS(\n    someSpace::Foo::create, //&lt;-- this function is exported with...\n    load_foo                 //&lt;-- this alias\n)\n}\n</code></pre>\n\n<p>And here is the code for foo.cpp if it is needed:</p>\n\n<pre><code>#include \"Foo.h\"\nnamespace someSpace {\n     Foo::Foo()std::string fooData)\n     {\n         strcpy(someData, fooData.c_str());\n     }\n     size_t Foo::size()\n     {\n         return FooSize;\n     }\n     unsigned char Foo::getByte(unsigned long byteLoc)\n     {\n          return someData[byteLoc % FooSize); \n     }\n\n     static boost::shared_ptr&lt;IFoo&gt; Foo::create(std::string fooName)\n     {\n          return boost::shared_ptr&lt;IFoo&gt; ( new Foo(fooName) );\n     }\n}\n</code></pre>\n\n<p>I am getting an error from BOOST_DLL_ALIAS() which reads</p>\n\n<blockquote>\n  <p>#define BOOST_DLL_ALIAS(FunctionOrVar, AliasName) this declaration has no storage class or type specifier</p>\n</blockquote>\n\n<p>Why am I getting this message from boost and how can I fix it?</p>\n"}, {"tags": ["c++", "shared-libraries", "undefined-reference"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1556728695, "post_id": 55939491, "comment_id": 98532148, "body": "<code>0004b751 T LSDisconnect</code> The symbol isn&#39;t mangled (i.e. was compiled with a c-compiler). Just try <code>extern &quot;C&quot; { int LSDisconnect(short hConnect, HWND   hWnd); }</code>, Or wrap the whole header include in such <code>extern &quot;C&quot;</code> declaration. See <a href=\"https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix/12574420#12574420\">this specific answer</a> in the duplicate."}, {"owner": {"reputation": 43, "user_id": 2980823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoeLk.jpg?s=128&g=1", "display_name": "jerego", "link": "https://stackoverflow.com/users/2980823/jerego"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556729440, "post_id": 55939491, "comment_id": 98532476, "body": "THANK YOU!!!! That solved it!   I didnt think y had to mess with the &quot;original&quot; .h"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1556729690, "post_id": 55939491, "comment_id": 98532572, "body": "I upvoted your question because it&#39;s very well written, and serves as an excellent signpost for the duplicate."}], "owner": {"reputation": 43, "user_id": 2980823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoeLk.jpg?s=128&g=1", "display_name": "jerego", "link": "https://stackoverflow.com/users/2980823/jerego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 1, "closed_date": 1556728849, "answer_count": 0, "score": 2, "last_activity_date": 1556730006, "creation_date": 1556728550, "last_edit_date": 1556730006, "question_id": 55939491, "link": "https://stackoverflow.com/questions/55939491/undefined-reference-but-ld-finds-shared-lib-and-lib-has-symbols", "closed_reason": "Duplicate", "title": "Undefined reference but ld finds shared lib and lib has symbols", "body": "<p>I am trying to use some functions defined in a header file provided to me but keep getting undefined reference error.</p>\n\n<p>First time asking, tried really hard to comply with the format and google every topic i found.</p>\n\n<h1>I've been given LsApi.so and LsApi.h</h1>\n\n<h1>LsApi.h:</h1>\n\n<pre><code>...\n\n// Linux porting\ntypedef int HWND, BOOL;\n\nextern int LSDisconnect(short hConnect, HWND   hWnd);\n\n...\n</code></pre>\n\n<h1>main.cpp:</h1>\n\n<pre><code>#include \"LsApi.h\"\n\n\nint main(int argc, char** argv) {\n\n    int retVal = 0;\n    HWND b = 0;\n    short devID;   \n\n    retVal= LSDisconnect (devID,b);\n\n    return 0;\n}\n</code></pre>\n\n<h1>Tried with clang++ to see ld command</h1>\n\n<pre><code>clang++ -O3 -v -m32 -g -Wall -I. -L/usr/lib -L/usr/local/lib/ -lLsApi main.cpp\n</code></pre>\n\n<p>(sorry i have ubuntu in spanish will try to translate errors)</p>\n\n<pre><code>...\n...\n/tmp/main-bfde60.o: in function `main':\n/home/jere/LSAPI/main.cpp:11: undefined reference to `LSDisconnect(short, int)'\n</code></pre>\n\n<h1>Lib is there</h1>\n\n<pre><code>locate libLsApi.so\n\n/usr/local/lib/libLsApi.so\n</code></pre>\n\n<h1>ld --verbose shows me that ld can find library:</h1>\n\n<p>(didnt paste full ld command because its generated by clang so really large)</p>\n\n<pre><code>...\nattempt to open /usr/local/lib//libLsApi.so succeeded\n-lLsApi (/usr/local/lib//libLsApi.so)\n...\n</code></pre>\n\n<h1>nm shows me that the symbol is there:</h1>\n\n<pre><code>nm /usr/local/lib//libLsApi.so | grep LSDisconnect\n0004b751 T LSDisconnect\n</code></pre>\n\n<h1>There seems to be no problem with the .so format:</h1>\n\n<pre><code>file /usr/local/lib/libLsApi.so\n/usr/local/lib/libLsApi.so: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), dynamically linked, with debug_info, not stripped\n</code></pre>\n\n<h1>libLsApi.so dependencies looks good</h1>\n\n<p>(i dont think thats important, given that the symbol is in the library according to nm)</p>\n\n<pre><code>ldd /usr/local/lib/libLsApi.so\n    linux-gate.so.1 (0xf7f0b000)\n    libpthread.so.0 =&gt; /lib32/libpthread.so.0 (0xf492b000)\n    libdl.so.2 =&gt; /lib32/libdl.so.2 (0xf4926000)\n    libz.so.1 =&gt; /usr/lib32/libz.so.1 (0xf4907000)\n    librt.so.1 =&gt; /lib32/librt.so.1 (0xf48fd000)\n    libstdc++.so.6 =&gt; /usr/lib32/libstdc++.so.6 (0xf4777000)\n    libm.so.6 =&gt; /lib32/libm.so.6 (0xf46ac000)\n    libgcc_s.so.1 =&gt; /usr/lib32/libgcc_s.so.1 (0xf468e000)\n    libc.so.6 =&gt; /lib32/libc.so.6 (0xf44b5000)\n    /lib/ld-linux.so.2 (0xf7f0d000)\n</code></pre>\n\n<h1>Observations:</h1>\n\n<p>There is one thing that seems weird to me, I've been given: LsApi.h and LsApi.so, installed using provided shell script, but i had to change LsApi.so name to libLsApi.so for the linker to find it.</p>\n\n<p>Tried using gcc because its and old library, and tried all the same things in Ubuntu Jaunty with same results.</p>\n"}, {"tags": ["c++", "encryption", "benchmarking", "chrono"], "comments": [{"owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 3, "creation_date": 1556727468, "post_id": 55939235, "comment_id": 98531647, "body": "The steady-clock does not support nanoseconds on all systems. Use the <a href=\"http://www.cplusplus.com/reference/chrono/high_resolution_clock/\" rel=\"nofollow noreferrer\">high_resolution_clock</a> for timing functions."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1556728372, "post_id": 55939235, "comment_id": 98532005, "body": "If you are not actually using the results of your computations, I suspect the compiler is just optimizing them out entirely. Check the generated assembly."}, {"owner": {"reputation": 29, "user_id": 3418069, "user_type": "registered", "profile_image": "https://graph.facebook.com/1757016111/picture?type=large", "display_name": "George Hodgkins", "link": "https://stackoverflow.com/users/3418069/george-hodgkins"}, "edited": false, "score": 0, "creation_date": 1556736326, "post_id": 55939235, "comment_id": 98535415, "body": "The functions are not being optimized out; breakpoints placed in them get hit when the code is run (also verified via disassembly)."}, {"owner": {"reputation": 6510, "user_id": 2196561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac22ef3edb7836c3af11f5511f7942f8?s=128&d=identicon&r=PG", "display_name": "Ebbe M. Pedersen", "link": "https://stackoverflow.com/users/2196561/ebbe-m-pedersen"}, "edited": false, "score": 0, "creation_date": 1556796815, "post_id": 55939235, "comment_id": 98555031, "body": "Depending on implementation, steady_clock() can have a resolution of e.g 10 ms ..  making it unreliable to measure in the 10-15 ms range .. Use high_resolution_clock() or measure several calls and calculate an average."}, {"owner": {"reputation": 29, "user_id": 3418069, "user_type": "registered", "profile_image": "https://graph.facebook.com/1757016111/picture?type=large", "display_name": "George Hodgkins", "link": "https://stackoverflow.com/users/3418069/george-hodgkins"}, "edited": false, "score": 0, "creation_date": 1556907876, "post_id": 55939235, "comment_id": 98601191, "body": "Changing to high_resolution_clock does not fix the problem."}], "owner": {"reputation": 29, "user_id": 3418069, "user_type": "registered", "profile_image": "https://graph.facebook.com/1757016111/picture?type=large", "display_name": "George Hodgkins", "link": "https://stackoverflow.com/users/3418069/george-hodgkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556727190, "creation_date": 1556727190, "question_id": 55939235, "link": "https://stackoverflow.com/questions/55939235/encryption-functions-do-not-seem-to-be-executing-consistently-during-benchmarkin", "title": "Encryption functions do not seem to be executing consistently during benchmarking; chrono records no time elapsed", "body": "<p>So, I'm benchmarking my own implementations of the AES and 3DES ciphers and CBC and OFB modes of operation for a class project, using the std::chrono library. The basic setup is:</p>\n\n<pre><code>chrono::steady_clock::time_point t0 = chrono::steady_clock::now();\nMODECALL_E (ptext, key);\nchrono::steady_clock::time_point t1 = chrono::steady_clock::now();\nMODECALL_D (ptext, key);\nchrono::steady_clock::time_point t2 = chrono::steady_clock::now();\n</code></pre>\n\n<p>where MODECALL_E/D are macros that I change to whatever function I am benchmarking at compile time (specifically, the mode of operation function, which takes the cipher function as a template argument and then calls it internally). I then loop this code and record the times taken for encryption and decryption by a cast to chrono::microseconds: </p>\n\n<pre><code>timing_return ret;\nret.etime = chrono::duration_cast&lt;chrono::microseconds&gt; (t1 - t0);\nret.dtime = chrono::duration_cast&lt;chrono::microseconds&gt; (t2 - t1);\n</code></pre>\n\n<p>and then I store etime.count() and dtime.count() in an output file.</p>\n\n<p>However, considerable numbers of runs for the AES cipher on both modes of operation are being recorded with zero time elapsed, sometimes for encryption and sometimes for decryption. I also tried casting to nanoseconds to make sure that it wasn't just a resolution issue, and there were still lots of zero entries, so clearly something is not functioning correctly. FYI, a typical time (varying for different key sizes) is in the 10-15 ms range for encrypting a 4 KB text file.</p>\n\n<p>I ran the code in GDB and put an ignored breakpoint inside the called functions to count the number of hits, and...all the zero entries went away (and the functions were hit the correct number of times). This definitely seemed to be a result of the breakpoints, since I initially just set a breakpoint in the encryption function, and there were still zero entries for decryption, which then went away when I added a breakpoint to the decryption function. Unfortunately, GDB also adds noticeable overhead to the running time, so I can't just run the benchmark inside it.</p>\n\n<p>I'm really stumped by this, does anyone have an idea what's going on? I compiled the code using -O3; could it be some optimization is skipping runs of the functions somehow? Note that this is only happening with the AES cipher, not 3DES, but it is happening with both CBC and OFB modes.</p>\n\n<p>Complete code for the implementation (fairly extensive), including the benchmarking code, can be found at <a href=\"https://github.com/georgehodgkins/ECE5397project\" rel=\"nofollow noreferrer\">https://github.com/georgehodgkins/ECE5397project</a> if there's anything else you'd like to see.</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1556741895, "post_id": 55938300, "comment_id": 98537626, "body": "use this solution: <a href=\"https://stackoverflow.com/a/40764480/6622587\">stackoverflow.com/a/40764480/6622587</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8128659, "user_type": "registered", "profile_image": "https://graph.facebook.com/1852874241699912/picture?type=large", "display_name": "WSL", "link": "https://stackoverflow.com/users/8128659/wsl"}, "edited": false, "score": 0, "creation_date": 1556736503, "post_id": 55939726, "comment_id": 98535494, "body": "I tried with another similar property, the weird thing was it worked at first but failed later, e.g. If I started with box_A and kept changing the property in Box_A, the property in Box_B could change accordingly, however if then I started to change that in Box_B, the &quot;sync&quot; between 2 boxes lost.  What confused me more was that I used the above approach exactly the same for &quot;another similar property&quot;, it worked well for me, but theProperty which I showed above didn&#39;t work with the approach"}, {"owner": {"reputation": 772, "user_id": 1453027, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/637c59872b0f9c05621abb04830a8309?s=128&d=identicon&r=PG", "display_name": "bardao", "link": "https://stackoverflow.com/users/1453027/bardao"}, "reply_to_user": {"reputation": 1, "user_id": 8128659, "user_type": "registered", "profile_image": "https://graph.facebook.com/1852874241699912/picture?type=large", "display_name": "WSL", "link": "https://stackoverflow.com/users/8128659/wsl"}, "edited": false, "score": 0, "creation_date": 1556741015, "post_id": 55939726, "comment_id": 98537310, "body": "@WSL a quick hack for this is to emit a signal from <code>BOX_A</code> and <code>BOX_B</code> when that property changes, different than <code>onThePropertyChanged</code>, for example <code>signal propChanged(var prop)</code> and do <code>onPropChanged: model.CppModel.theProperty = prop</code> this will avoid a binding loop since it&#39;s not the property&#39;s default onChanged signal that is being called"}], "tags": [], "owner": {"reputation": 772, "user_id": 1453027, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/637c59872b0f9c05621abb04830a8309?s=128&d=identicon&r=PG", "display_name": "bardao", "link": "https://stackoverflow.com/users/1453027/bardao"}, "is_accepted": false, "score": 0, "last_activity_date": 1556729680, "creation_date": 1556729680, "answer_id": 55939726, "question_id": 55938300, "link": "https://stackoverflow.com/questions/55938300/binding-loop-problem-in-an-application-with-qmlc/55939726#55939726", "title": "Binding loop problem in an application with QML&amp;C++", "body": "<p>Why don't you just do:<br></p>\n\n<pre><code>Box_A {\n    id: box_A\n    // sth\n    theProperty:model.CppModel.theProperty  \n}\n</code></pre>\n\n<p>Did that not work for you?</p>\n"}], "owner": {"reputation": 1, "user_id": 8128659, "user_type": "registered", "profile_image": "https://graph.facebook.com/1852874241699912/picture?type=large", "display_name": "WSL", "link": "https://stackoverflow.com/users/8128659/wsl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556736730, "creation_date": 1556722902, "last_edit_date": 1556736730, "question_id": 55938300, "link": "https://stackoverflow.com/questions/55938300/binding-loop-problem-in-an-application-with-qmlc", "title": "Binding loop problem in an application with QML&amp;C++", "body": "<p>I am doing a project, basically what I want to do is to synchronize a property <code>theProperty</code> between 2 boxes in 2 QML files(2 boxes both own that property), I bind <code>theProperty</code> to a C++ Q_PROPERTY, so by binding the 2 boxes to the same C++ Q_PROPERTY, the synchronization can be achieved.\nHere are my codes in Box A and B. <code>theProperty</code> can be independently changed by Box A and B</p>\n\n<pre><code>Box_A {\n    id: box_A\n    // sth\n    Binding { target:box_A; property: \"theProperty\"; value:model.CppModel.theProperty } \n    onThePropertyChanged: {\n        model.CppModel.theProperty = theProperty\n    }\n}\nBox_B {\n    id: box_B\n    // sth\n    Binding { target:box_B; property: \"theProperty\"; value:model.CppModel.theProperty } \n    onThePropertyChanged: {\n        model.CppModel.theProperty = theProperty\n    }\n}\n</code></pre>\n\n<p>In cpp:</p>\n\n<pre><code>    Class Item: QObject{\n        Q_OBJECT\n        Q_PROPERTY(bool theProperty READ theProperty WRITE theProperty NOTIFY theProperty Changed)\n  //sth\n        }\n</code></pre>\n\n<p>Within Box_A and B, there is a mouse area by which the <code>theProperty</code> can be changed:</p>\n\n<pre><code>MouseArea{\n\n  onClicked: theProperty=!theProperty\n}\n</code></pre>\n\n<p>The problem is that once I change <code>theProperty</code> in either box A or B, the qt creator complains that loop binding detected for value: <code>model.CppModel.theProperty</code> at the other side, is there a way of walking around this problem? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 1, "creation_date": 1556722306, "post_id": 55938121, "comment_id": 98529122, "body": "<code>std::cout</code>? Or did I misunderstand something...?"}, {"owner": {"reputation": 39159, "user_id": 1541563, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4EOh.png?s=128&g=1", "display_name": "Patrick Roberts", "link": "https://stackoverflow.com/users/1541563/patrick-roberts"}, "edited": false, "score": 1, "creation_date": 1556722351, "post_id": 55938121, "comment_id": 98529143, "body": "Have you tried <code>std::cout&lt;&lt;&quot;to ja&quot;;</code>?"}, {"owner": {"reputation": 27, "user_id": 11299830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N4cc7RFhm9w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfAA6SMu1QPSihP61vmCqgNcv8wTg/mo/photo.jpg?sz=128", "display_name": "Patryk Wer", "link": "https://stackoverflow.com/users/11299830/patryk-wer"}, "edited": false, "score": 0, "creation_date": 1556722611, "post_id": 55938121, "comment_id": 98529278, "body": "no I don&#39;t want to use cout"}, {"owner": {"reputation": 27, "user_id": 11299830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N4cc7RFhm9w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfAA6SMu1QPSihP61vmCqgNcv8wTg/mo/photo.jpg?sz=128", "display_name": "Patryk Wer", "link": "https://stackoverflow.com/users/11299830/patryk-wer"}, "edited": false, "score": 0, "creation_date": 1556722633, "post_id": 55938121, "comment_id": 98529296, "body": "I&#39;d like own cout as if."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1556722962, "post_id": 55938121, "comment_id": 98529456, "body": "@PatrykWer what you are asking for makes no sense. Please clarify what your actual goal is"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1556723545, "post_id": 55938121, "comment_id": 98529767, "body": "The fact that it isn&#39;t nameable should be a very strong hint that you shouldn&#39;t be trying to use it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1556723839, "post_id": 55938121, "comment_id": 98529912, "body": "Guys, instead of repeatedly saying that it &quot;makes no sense&quot;, and suggesting approaches that the OP has already rejected, maybe try politely asking for clarification."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1556724635, "post_id": 55938121, "comment_id": 98530337, "body": "What <i>specific</i> feature of <code>std::cout</code> is there that you <i>don&#39;t want</i>? All you have said is that you want somethink &quot;as if <code>cout</code>&quot;, which naturally points to just using it."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1556725196, "post_id": 55938121, "comment_id": 98530622, "body": "I have no idea what is unclear about this question. It even contains code examples illustrating exactly what it means. So I am voting to reopen."}, {"owner": {"reputation": 8455, "user_id": 850326, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cd6f8a1a0f5957695e1d9625868d2642?s=128&d=identicon&r=PG", "display_name": "djhaskin987", "link": "https://stackoverflow.com/users/850326/djhaskin987"}, "edited": false, "score": 1, "creation_date": 1556732922, "post_id": 55938121, "comment_id": 98534020, "body": "Hello, Patryk. Please tell me <i>why</i> you want to know this. If I knew what your end goal was, I&#39;d be able to help you much easier and with a clearer answer."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11299830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N4cc7RFhm9w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfAA6SMu1QPSihP61vmCqgNcv8wTg/mo/photo.jpg?sz=128", "display_name": "Patryk Wer", "link": "https://stackoverflow.com/users/11299830/patryk-wer"}, "edited": false, "score": 0, "creation_date": 1556722743, "post_id": 55938242, "comment_id": 98529355, "body": "I don&#39;t want to use cout"}, {"owner": {"reputation": 27, "user_id": 11299830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N4cc7RFhm9w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfAA6SMu1QPSihP61vmCqgNcv8wTg/mo/photo.jpg?sz=128", "display_name": "Patryk Wer", "link": "https://stackoverflow.com/users/11299830/patryk-wer"}, "edited": false, "score": 0, "creation_date": 1556722791, "post_id": 55938242, "comment_id": 98529376, "body": "In constructor ostream I want to add stream for standard stream"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 27, "user_id": 11299830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N4cc7RFhm9w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfAA6SMu1QPSihP61vmCqgNcv8wTg/mo/photo.jpg?sz=128", "display_name": "Patryk Wer", "link": "https://stackoverflow.com/users/11299830/patryk-wer"}, "edited": false, "score": 3, "creation_date": 1556722802, "post_id": 55938242, "comment_id": 98529383, "body": "@PatrykWer why? You are not making yourself clear at all. What are you really trying to accomplish? There is no <i>standard</i> class that represents the stdout buffer, like there is a <i>standard</i> class to represent a file. The default buffer used by <code>std::cout</code> is an internal detail of the library implementation on each platform."}, {"owner": {"reputation": 27, "user_id": 11299830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N4cc7RFhm9w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfAA6SMu1QPSihP61vmCqgNcv8wTg/mo/photo.jpg?sz=128", "display_name": "Patryk Wer", "link": "https://stackoverflow.com/users/11299830/patryk-wer"}, "edited": false, "score": 0, "creation_date": 1556723002, "post_id": 55938242, "comment_id": 98529480, "body": "cout is created object I&#39;d like to create own object of ostream class"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1556723057, "post_id": 55938242, "comment_id": 98529515, "body": "There is no standard class to represent <code>std::cout</code> buffer, the same way there is no standard class to represent <code>std::cout</code> itself. This question makes 0 sense."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1556723453, "post_id": 55938242, "comment_id": 98529714, "body": "@SergeyA isn&#39;t <code>std::cout</code> an instance of <i>exactly</i> <code>std::ostream</code>, having been constructed with an implementation defined <code>rdbuf</code>?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1556724111, "post_id": 55938242, "comment_id": 98530067, "body": "@SergeyA <i>&quot;There is no standard class&quot;</i> That&#39;s the answer. But if the answer is &quot;it&#39;s impossible&quot;, it doesn&#39;t mean that the question makes no sense."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1556725791, "post_id": 55938242, "comment_id": 98530900, "body": "@Caleth this is true! I was under impression that the stream is also implementation defined, but I was wrong. Thx for correcting me"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1556722781, "last_edit_date": 1556722781, "creation_date": 1556722660, "answer_id": 55938242, "question_id": 55938121, "link": "https://stackoverflow.com/questions/55938121/what-is-the-standard-output-buffer-called/55938242#55938242", "title": "What is the standard output buffer called?", "body": "<p>In both examples, there is no need to use <code>std::ostream</code> the way you are.</p>\n\n<p>In the first example, use <code>std::ofstream</code> instead of <code>std::filebuf</code>:</p>\n\n<pre><code>ofstream out(\"/home/patryk/untitled6/text.txt\");\nout &lt;&lt; \"to ja\";\n</code></pre>\n\n<p>In the second example, <code>std::cout</code> is already a <code>std::ostream</code> so just write to it directly:</p>\n\n<pre><code>cout &lt;&lt; \"to ja\";\n</code></pre>\n\n<p>In both cases, this abstracts away how the actual buffers are implemented. Just focus on the higher level stream interface by itself.  The buffers used are just implementation details.</p>\n"}, {"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1556723162, "post_id": 55938331, "comment_id": 98529563, "body": "<i>&quot;an implementation defined type&quot;</i> In other words, there is no way around <code>std::cout.rdbuf()</code> other than writing a custom streambuf."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1556724354, "post_id": 55938331, "comment_id": 98530195, "body": "@SergeyA Well I suppose years of referring to <code>C</code>, <code>POSIX C</code> &amp; <code>Linux C</code>  library reference documentation as the &quot;manual&quot; as they are referred to on <code>POSIX</code> systems (man pages) has colored my terminology somewhat. But I am more than happy with the term &quot;reference&quot; as edited by Lightness. In future I will try to remember to RTFR instead of RTFM. ;-)"}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 2, "last_activity_date": 1556723701, "last_edit_date": 1556723701, "creation_date": 1556723019, "answer_id": 55938331, "question_id": 55938121, "link": "https://stackoverflow.com/questions/55938121/what-is-the-standard-output-buffer-called/55938331#55938331", "title": "What is the standard output buffer called?", "body": "<p>It is an implementation defined type derived from <code>std::streambuf</code> Here is <a href=\"https://en.cppreference.com/w/cpp/io/cout\" rel=\"nofollow noreferrer\">what a popular C++ reference says</a>:</p>\n\n<blockquote>\n  <p>The global objects std::cout and std::wcout control output to a stream buffer of implementation-defined type (derived from std::streambuf), associated with the standard C output stream stdout.</p>\n</blockquote>\n\n<p>This means you can only realistically access the instance currently inside <code>std::cout</code>using <code>std::cout.rdbuf()</code> - unless your compiler vendor provides non-standard access to its relevant internals.</p>\n\n<p>For example, GCC provides <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.8.5/libstdc++/api/a01237_source.html\" rel=\"nofollow noreferrer\"><code>stdio_filebuf</code></a>, an instance of which could be \"wrapped around\" the standard output file descriptor.</p>\n"}], "owner": {"reputation": 27, "user_id": 11299830, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-N4cc7RFhm9w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfAA6SMu1QPSihP61vmCqgNcv8wTg/mo/photo.jpg?sz=128", "display_name": "Patryk Wer", "link": "https://stackoverflow.com/users/11299830/patryk-wer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1556732558, "creation_date": 1556722188, "question_id": 55938121, "link": "https://stackoverflow.com/questions/55938121/what-is-the-standard-output-buffer-called", "title": "What is the standard output buffer called?", "body": "<p>When I write a filebuf, everything is ok.\nI'd like to know what is called a buffer for standard output.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\nint main()\n{\n  filebuf m;\n  m.open(\"/home/patryk/untitled6/text.txt\", ios::out);\n  ostream out(&amp;m);\n  out&lt;&lt;\"to ja\";\n}\n</code></pre>\n\n<p>I don't want use e.g cout.rdbuf.\nOnly as above</p>\n\n<p>The name of the output stream</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n\n  ostream out(cout.rdbuf());\n  out&lt;&lt;\"to ja\";\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 1, "creation_date": 1556722542, "post_id": 55937937, "comment_id": 98529245, "body": "You&#39;re missing the qualification <code>TileWidget::</code> in the definition of <code>mousePressEvent</code>."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11437439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b008073fb224072e5501200b450a3f?s=128&d=identicon&r=PG&f=1", "display_name": "faker67", "link": "https://stackoverflow.com/users/11437439/faker67"}, "edited": false, "score": 0, "creation_date": 1556723352, "post_id": 55938265, "comment_id": 98529649, "body": "Thank you for the answer, I see I was missing TileWidget in my function declaration. However I am still getting this error:   Undefined symbols for architecture x86_64:   &quot;TileWidget::Tile_Mouse_Action()&quot;, referenced from:       TileWidget::mousePressEvent(QMouseEvent*) in tilewidget.o   &quot;vtable for TileWidget&quot;, referenced from:       TileWidget::TileWidget(QWidget*) in tilewidget.o"}, {"owner": {"reputation": 50, "user_id": 5062770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd9718e8c3915721dda3fc9860b3f41?s=128&d=identicon&r=PG&f=1", "display_name": "J.Sunderland", "link": "https://stackoverflow.com/users/5062770/j-sunderland"}, "reply_to_user": {"reputation": 3, "user_id": 11437439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b008073fb224072e5501200b450a3f?s=128&d=identicon&r=PG&f=1", "display_name": "faker67", "link": "https://stackoverflow.com/users/11437439/faker67"}, "edited": false, "score": 0, "creation_date": 1556723938, "post_id": 55938265, "comment_id": 98529953, "body": "Try deleting the tilewidget.o file, or just clean, and then rebuild. Some changes don&#39;t force .o files to update; sorry, I don&#39;t have much insight beyond that."}, {"owner": {"reputation": 3, "user_id": 11437439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b008073fb224072e5501200b450a3f?s=128&d=identicon&r=PG&f=1", "display_name": "faker67", "link": "https://stackoverflow.com/users/11437439/faker67"}, "edited": false, "score": 0, "creation_date": 1556726099, "post_id": 55938265, "comment_id": 98531051, "body": "Its working! You were right just had to delete the .o files. Thanks again"}], "tags": [], "owner": {"reputation": 50, "user_id": 5062770, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abd9718e8c3915721dda3fc9860b3f41?s=128&d=identicon&r=PG&f=1", "display_name": "J.Sunderland", "link": "https://stackoverflow.com/users/5062770/j-sunderland"}, "is_accepted": true, "score": 0, "last_activity_date": 1556722781, "creation_date": 1556722781, "answer_id": 55938265, "question_id": 55937937, "link": "https://stackoverflow.com/questions/55937937/qt-c-issue-with-inheritance-and-undeclared-signal/55938265#55938265", "title": "qt/c++ issue with inheritance and undeclared signal", "body": "<p>I'll try to provide guidance without giving away the answer. </p>\n\n<p>Try making sure your functions are in the same namespace. Look at your constructor and the mousePressEvent() function in your subclass. You'll need to tell the compiler they are part of the same class.</p>\n\n<p>I run into this problem a lot when I write my own classes in Qt. </p>\n"}], "owner": {"reputation": 3, "user_id": 11437439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31b008073fb224072e5501200b450a3f?s=128&d=identicon&r=PG&f=1", "display_name": "faker67", "link": "https://stackoverflow.com/users/11437439/faker67"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "closed_date": 1556727917, "accepted_answer_id": 55938265, "answer_count": 1, "score": -1, "last_activity_date": 1556722781, "creation_date": 1556721363, "question_id": 55937937, "link": "https://stackoverflow.com/questions/55937937/qt-c-issue-with-inheritance-and-undeclared-signal", "closed_reason": "Not suitable for this site", "title": "qt/c++ issue with inheritance and undeclared signal", "body": "<p>I am messing around with qt and have created a custom label object that I am inheriting to another class. I have this issue where I am emitting a signal that is undeclared but I am not sure why since I declare the signal in the header file. The issue is in the subclass cpp file.</p>\n\n<pre><code>error: undeclared identifier 'Tile_Mouse_Action'\n    emit Tile_Mouse_Action(QString(\"Clicked\"), \"test\")\n         ^\n    dsf\n\ncompile output: ../Signals/tilewidget.cpp:13:10: error: use of undeclared identifier 'Tile_Mouse_Action'\n    emit Tile_Mouse_Action(QString(\"Clicked\"), \"test\")\n         ^\n../Signals/tilewidget.cpp:12:35: warning: unused parameter 'ev' [-Wunused-parameter]\nvoid mousePressEvent(QMouseEvent *ev) {\n                                  ^\n1 warning and 1 error generated.\nmake: *** [tilewidget.o] Error 1\n10:16:32: The process \"/usr/bin/make\" exited with code 2.\nError while building/deploying project Signals (kit: Desktop Qt 5.12.3 clang 64bit)\nWhen executing step \"Make\"\n</code></pre>\n\n<p>Even if I try commenting out the emit line, I get other issues which leads me to believe there is something else wrong with my code. Any help is appreciated, thank you.</p>\n\n<pre><code>error: symbol(s) not found for architecture x86_64\nerror: linker command failed with exit code 1 (use -v to see invocation) \n\nUndefined symbols for architecture x86_64:\n  \"vtable for TileWidget\", referenced from:\n      TileWidget::TileWidget(QWidget*) in tilewidget.o\n  NOTE: a missing vtable usually means the first non-inline virtual member function has no definition.\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [Signals.app/Contents/MacOS/Signals] Error 1\n10:26:28: The process \"/usr/bin/make\" exited with code 2.\nError while building/deploying project Signals (kit: Desktop Qt 5.12.3 clang 64bit)\nWhen executing step \"Make\"\n</code></pre>\n\n<p>base class header file</p>\n\n<pre><code>class MyLabel : public QLabel\n{\n    Q_OBJECT\npublic:\n    explicit MyLabel(QWidget *parent = nullptr);\n    void mouseMoveEvent(QMouseEvent *ev);\n    void mousePressEvent(QMouseEvent *ev);\n    void mouseDoubleClickEvent(QMouseEvent *ev);\n\n    int x, y;\n    char action[20];\n    QString mouseAction;\n\nsignals:\n    void Mouse_Pos();\n    void Mouse_Press();\n    void Mouse_DoubleClick();\n    void Mouse_Action(QString, std::string);\n\npublic slots:\n};\n</code></pre>\n\n<p>base class cpp file</p>\n\n<pre><code>MyLabel::MyLabel(QWidget *parent) : QLabel(parent)\n{\n\n}\n\nvoid MyLabel::mouseMoveEvent(QMouseEvent *ev) {...\n\nvoid MyLabel::mousePressEvent(QMouseEvent *ev) {...\n\nvoid MyLabel::mouseDoubleClickEvent(QMouseEvent *ev) {...\n</code></pre>\n\n<p>subclass header file</p>\n\n<pre><code>class TileWidget : public MyLabel\n{\n    Q_OBJECT\n\npublic:\n    TileWidget(QWidget *parent = nullptr);\n    void mousePressEvent(QMouseEvent *ev);\n\n\nsignals:\n    void Tile_Mouse_Action(QString, std::string); \n\nprivate slots:\n\n};\n</code></pre>\n\n<p>subclass cpp file</p>\n\n<pre><code>TileWidget::TileWidget(QWidget *parent) :\n    MyLabel(parent)\n{\n\n}\n\nvoid mousePressEvent(QMouseEvent *ev) {\n    emit Tile_Mouse_Action(QString(\"Clicked\"), \"test\"); // issue here\n};\n\n</code></pre>\n"}, {"tags": ["c++", "matrix", "operator-overloading", "matrix-multiplication"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1556721700, "post_id": 55937882, "comment_id": 98528790, "body": "Apparently, your <code>Matrix</code> class does not provide <code>operator[]</code>. What part of the error message do you find unclear?"}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1556722626, "post_id": 55937882, "comment_id": 98529291, "body": "Does the class <code>Matrix</code> has a member containing the values? For example, if you have a member <code>vector&lt;vector&lt;double&gt;&gt; cell</code>, you can access it using <code>res.cell[i][j]</code>. If you write <code>res[i][j]</code>, the compiler expect to find an operator [] declared in the class Matrix itself."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11169871"}, "edited": false, "score": 0, "creation_date": 1556722826, "post_id": 55937882, "comment_id": 98529392, "body": "ok, ill try this..."}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1556722914, "post_id": 55937882, "comment_id": 98529437, "body": "Also, the function is not a member of a class. If <code>cell</code> is part of the object <code>res</code>, you always need to write <code>res.cell</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11169871"}, "edited": false, "score": 0, "creation_date": 1556722977, "post_id": 55937882, "comment_id": 98529465, "body": "Ok know it works, but here is the second problem, the matrix goes out of scope..."}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1556723147, "post_id": 55937882, "comment_id": 98529554, "body": "What do you mean by &quot;out of scope&quot;?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556730994, "post_id": 55937882, "comment_id": 98533082, "body": "@ZainAhmed -- <i>the matrix goes out of scope</i> -- You really need to post what your <code>Matrix</code> class consists of.  Is it based on pointers and dynamically allocated memory?  Does it use <code>std::vector</code>?  All of this information is important, as you are returning a <code>Matrix</code> by value in your <code>operator *</code>, and if <code>Matrix</code> does not have the correct copy semantics, none of this will work correctly."}], "answers": [{"comments": [{"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1556735770, "post_id": 55938438, "comment_id": 98535200, "body": "When you solve your problem, please put it as an answer. It tells people that they don&#39;t have to solve the problem again when they don&#39;t have to."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11169871"}, "edited": false, "score": 0, "creation_date": 1556736197, "post_id": 55938438, "comment_id": 98535370, "body": "where do i put it?"}], "tags": [], "owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "is_accepted": true, "score": 0, "last_activity_date": 1556723521, "creation_date": 1556723521, "answer_id": 55938438, "question_id": 55937882, "link": "https://stackoverflow.com/questions/55937882/how-can-i-multiply-matrices-by-overloading-the-operator-when-the-operator-doe/55938438#55938438", "title": "How can I multiply matrices by overloading the * operator, when the operator doesn&#39;t match the operands?", "body": "<p>Assuming that the class matrix has a member <code>vector&lt;vector&lt;double&gt;&gt; cell</code>, here is a sample that multiply matrices:</p>\n\n<pre><code>Matrix operator*(const Matrix &amp;matrix1, const Matrix &amp;matrix2)\n  {\n    if (matrix1.Cols != matrix2.Rows) {\n        throw(\"Error\");\n    }\n    Matrix res(matrix1.Rows, matrix2.Cols, 1.0);\n    for (int i = 0; i &lt; matrix1.Rows; i++) {\n        for (int j = 0; j &lt; matrix2.Cols; j++) {\n            double value_of_elements=0;\n            for (int k = 0; k = matrix1.Cols; k++)\n                value_of_elements += matrix1.cell[i][k] * matrix2.cell[k][j];\n            res.cell[i][j]=value_of_elements;\n        }\n    }\n    return res;\n}\n</code></pre>\n\n<p>There was three problems. First the class <code>Matrix</code> doesn't have an operator[]. The problem was solved by accessing the member <code>cell</code> directly. Second, the variable <code>value_of_elements</code> was not initialized, making the result undefined. Third, the matrix multiplication was not done correctly. You multiply one column from <code>matrix1</code> with one column from <code>matrix2</code>, whereas you should multiply a row by a column.</p>\n"}, {"comments": [{"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1556736414, "post_id": 55941089, "comment_id": 98535453, "body": "There is a mistake in the indices, as explained in my answer. Instead of &quot;m1[i][k]*m2[i][j]&quot;, it should be &quot;m1[i][k]*m2[k][j]&quot;."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1556814751, "post_id": 55941089, "comment_id": 98565184, "body": "This answer does not explain what the problem was, so it will be very difficult for the next person with this problem to use this answer. Please add some text to explain what changed and why."}, {"owner": {"reputation": 2673, "user_id": 11292489, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cucr6.jpg?s=128&g=1", "display_name": "Gilles-Philippe Paill&#233;", "link": "https://stackoverflow.com/users/11292489/gilles-philippe-paill%c3%a9"}, "edited": false, "score": 0, "creation_date": 1556884267, "post_id": 55941089, "comment_id": 98589115, "body": "@ZainAhmed StackOverflow questions comes from individual problems, but also serves as a Question&amp;Answer database to help other people to solve similar problem. This is why it is important to answer your own question when you find the solution yourself, but also to answer with all the necessary details needed for others to understand how you solved it."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11169871"}, "is_accepted": false, "score": 0, "last_activity_date": 1556736251, "creation_date": 1556736251, "answer_id": 55941089, "question_id": 55937882, "link": "https://stackoverflow.com/questions/55937882/how-can-i-multiply-matrices-by-overloading-the-operator-when-the-operator-doe/55941089#55941089", "title": "How can I multiply matrices by overloading the * operator, when the operator doesn&#39;t match the operands?", "body": "<p>Got my answer here:</p>\n\n<pre><code>Matrix operator*(const Matrix &amp;matrix1, const Matrix &amp;matrix2)\n{\n    if (matrix1.Cols != matrix2.Rows) {\n        throw(\"Error\");\n    }\n    Matrix res(matrix1.Rows, matrix2.Cols, 0.0);\n    for (int i = 0; i &lt; matrix1.Rows; i++) {\n        for (int j = 0; j &lt; matrix2.Cols; j++) {\n            double value_of_elements;\n            for (int k = 0; k &lt; matrix1.Cols; k++) {\n                res.cell[i][j] += matrix1.cell[i][k] * matrix2.cell[i][j];\n            }\n        }\n    }\n    return res;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11169871"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 55938438, "answer_count": 2, "score": 0, "last_activity_date": 1556736251, "creation_date": 1556721141, "last_edit_date": 1556725420, "question_id": 55937882, "link": "https://stackoverflow.com/questions/55937882/how-can-i-multiply-matrices-by-overloading-the-operator-when-the-operator-doe", "title": "How can I multiply matrices by overloading the * operator, when the operator doesn&#39;t match the operands?", "body": "<p>I have two matrices which should multiply together by overloading * operator in the constructor class, but the problem here is that no <code>operator []</code> matches these operands. Why? </p>\n\n<p>I saw videos and asked my classmates multiple times and tried my own way, but I can't make it work. I only get this error!</p>\n\n<p>This is the code I have a problem with:</p>\n\n<h1>The Constructor Code:</h1>\n\n<p>I made two ways to make this code works. The result should store at cell matrix or the new matrix:</p>\n\n<pre><code>Matrix operator*(const Matrix &amp;matrix1, const Matrix &amp;matrix2)\n  {\n    if (matrix1.Cols != matrix2.Rows) {\n        throw(\"Error\");\n    }\n    cell.resize(matrix2.Cols); // one way to call \n    Matrix res(matrix1.Rows, matrix2.Cols, 1.0); // second way to call\n    for (int i = 0; i &lt; matrix1.Rows; i++) {\n        cell[i].resize(matrix1.Rows);\n        for (int j = 0; j &lt; matrix2.Cols; j++) {\n            double value_of_elements;\n            for (int k = 0; k = matrix1.Cols; k++) {\n                res[i][j] += matrix1[i][k] * matrix2[i][j];// \n   1. metod\n                value_of_elements += matrix1[i][k] * \n    matrix2[i][j];// 2. metod\n            }\n            cell[i][j]+=value_of_elements;\n        }\n    }\n    return res;\n   }\n</code></pre>\n\n<h1>The Header Code:</h1>\n\n<p>The header code normally I don't have unless some modification should be made.</p>\n\n<pre><code>friend Matrix operator*(const Matrix &amp;matrix1, const Matrix &amp;matrix2);\n</code></pre>\n\n<h1>The source Code:</h1>\n\n<p>This is where the code is tested:</p>\n\n<pre><code>try {\n\n        Matrix m1(3, 3, 1.0);\n        Matrix m2(3, 4, 1.0);\n\n        std::cout &lt;&lt; \"m1*m2:\" &lt;&lt; m1 * m2 &lt;&lt; std::endl;// this si where the matrix should be multiplied here;\n\n    }\n    catch (std::exception &amp;e) {\n        std::cout &lt;&lt; \"Exception: \" &lt;&lt; e.what() &lt;&lt; \"!\" &lt;&lt; std::endl;\n    }\n    catch (...) {\n        std::cout &lt;&lt; \"Unknown exception caught!\" &lt;&lt; std::endl;\n    }\n   system(\"pause\");\n   return 0;\n}\n</code></pre>\n\n<h1>The result:</h1>\n\n<p>The result should be this:</p>\n\n<pre><code>m1*m2:[3, 3, 3, 3\n3, 3, 3, 3\n3, 3, 3, 3]\n</code></pre>\n\n<p>What I get is an error; the cause of error are that <code>res[i][j]</code>, <code>matrix1[i][k]</code> etc. have operators [] wont work on these operands:</p>\n\n<pre><code>Error   C2065   'cell': undeclared identifier 71  matrix.cpp\nError   C2065   'cell': undeclared identifier 74  matrix.cpp\nError   C2065   'cell': undeclared identifier 81  matrix.cpp\nError   C2088   '[': illegal for class 79   matrix.cpp \nError   C2088   '[': illegal for class 78   matrix.cpp  \nError   C2676   binary '[': 'Matrix' does not define this operator or a conversion to a type acceptable to the predefined operator  78  matrix.cpp\nError   C2676   binary '[': 'const Matrix' does not define this operator or a conversion to a type acceptable to the predefined operator    78  matrix.cpp\nError   C2676   binary '[': 'const Matrix' does not define this operator or a conversion to a type acceptable to the predefined operator    79  matrix.cpp\nError (active)  E0020   identifier \"cell\" is undefined  71  Matrix.cpp\nError (active)  E0349   no operator \"[]\" matches these operands 78  Matrix.cpp\nError (active)  E0349   no operator \"[]\" matches these operands 78  Matrix.cpp\nError (active)  E0349   no operator \"[]\" matches these operands 78  Matrix.cpp\nError (active)  E0349   no operator \"[]\" matches these operands 79  Matrix.cpp\nError (active)  E0349   no operator \"[]\" matches these operands 79  Matrix.cpp  \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1556721337, "post_id": 55937858, "comment_id": 98528597, "body": "You&#39;ve linked to a question with a C# tag, but tagged yours C++. The lab problem you have posted doesn&#39;t say &quot;overloading operators of a class in another one&quot;; it says mathematics has operators AND is a friend with the repository."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1556721427, "post_id": 55937858, "comment_id": 98528647, "body": "<code>Is it possible to overload operator of class A in a friend class B?</code> - no. The rest of the question is a mystery to me."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1556722166, "post_id": 55937858, "comment_id": 98529039, "body": "That sounds like some terrible instruction. C++ functions need not be chaperoned by classes"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10930609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RFAij.jpg?s=128&g=1", "display_name": "Sofran Geo", "link": "https://stackoverflow.com/users/10930609/sofran-geo"}, "edited": false, "score": 0, "creation_date": 1556722455, "post_id": 55938070, "comment_id": 98529206, "body": "Thanks for clarifying things, I missthought this one !"}], "tags": [], "owner": {"reputation": 623, "user_id": 2491350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/21b00afe3f3ab6235649f62a35132ac7?s=128&d=identicon&r=PG", "display_name": "SilverTear", "link": "https://stackoverflow.com/users/2491350/silvertear"}, "is_accepted": true, "score": 0, "last_activity_date": 1556721983, "creation_date": 1556721983, "answer_id": 55938070, "question_id": 55937858, "link": "https://stackoverflow.com/questions/55937858/is-it-possible-to-overload-operator-of-class-a-in-a-friend-class-b/55938070#55938070", "title": "Is it possible to overload operator of class A in a friend class B?", "body": "<p>All that is asked is to implement the arithmetical operations. Not that you have to overload them: </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Mathematics;\n\nclass Repository\n{\n    friend Mathematics;\n  private:\n    int a;\n    int b;\n\n  public:\n    Repository(int _a, int _b)\n        :a(_a), b(_b) { }\n};\n\nclass Mathematics\n{\n\npublic:\n    static int add(const Repository &amp;rep)\n    {\n        return rep.a + rep.b;\n    }\n};\n\nint main()\n{\n    Repository rep(1, 2);\n    std::cout &lt;&lt; Mathematics::add(rep);    \n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10930609, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RFAij.jpg?s=128&g=1", "display_name": "Sofran Geo", "link": "https://stackoverflow.com/users/10930609/sofran-geo"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1556730561, "accepted_answer_id": 55938070, "answer_count": 1, "score": -3, "last_activity_date": 1556721983, "creation_date": 1556720999, "question_id": 55937858, "link": "https://stackoverflow.com/questions/55937858/is-it-possible-to-overload-operator-of-class-a-in-a-friend-class-b", "closed_reason": "Duplicate", "title": "Is it possible to overload operator of class A in a friend class B?", "body": "<p>I'm trying to solve the following problem from the lab where it says:</p>\n\n<blockquote>\n  <p>Define a class called Repository that has 2 integer private variables. The >class contains an empty constructor and another one with 2 parameters. An >accesor method that displays the variables values is also included in the >class. Write another class called Mathematics which is friend to the first >one. This class contains the implementation of the elementary arithmetical >operations (+, -, *, /) applied to the values stored in the first class. Each >arithmetical method receives as parameter an object instantiated from the >first class.</p>\n</blockquote>\n\n<p>I have been searching all over the internet for a couple of hours already but I haven't found anything about overloading operators of a class in another one. I understand the overloading mechanism, I solved the problem using friend functions but I'm still asking myself if it is possible to do as above mentioned and if yes, I wish to know how to do it. Thanks in advance !</p>\n\n<p>I have tried the solution mentioned <a href=\"https://stackoverflow.com/questions/3981911/operators-overloading-in-other-classes\">here</a></p>\n\n<pre><code>//friend Repository operator + (Repository &amp;, Repository &amp;);\n    friend Mathematics;\n};\n/*\nRepository operator + (Repository &amp;rep1, Repository &amp;rep2)\n{\n    Repository obToRet;\n    obToRet.val1 = rep1.val1 + rep2.val1;\n    obToRet.val2 = rep1.val2 + rep2.val2;\n    return obToRet;\n}*/\n\nclass Mathematics\n{\npublic:\n    friend Repository;\n    public static Repository operator+(Repository &amp;rep1, Repository &amp;rep2)\n    {\n        Repository objtoret;\n        objtoret.val1 = rep1.val1 + rep2.val1;\n        objtoret.val2 = rep1.val2 + rep2.val2;\n        return objtoret;\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "edge-detection", "sobel"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7340499"}, "is_accepted": true, "score": 0, "last_activity_date": 1556723369, "creation_date": 1556723369, "answer_id": 55938405, "question_id": 55937780, "link": "https://stackoverflow.com/questions/55937780/how-to-treat-the-ouput-values-after-convolution-with-sobel-kernel/55938405#55938405", "title": "How to treat the ouput-values after convolution with sobel-kernel", "body": "<p>Try something like this:</p>\n\n<pre><code>int MIN_SOBEL_VAL = minValue(sobelMatrix[][]);\nint MAX_SOBEL_VAL = maxValue(sobelMatrix[][]);\n\nint outputMatrix[][];\n\nvoid normalizer(sobelMatrix, MIN_SOBEL_VAL, MAX_SOBEL_VAL, outputMatrix, 0, 255) {\n    for(i = 0 -&gt; N)\n        for(j = 0 -&gt; M)\n            outputMatrix[i][j] = g(sobelMatrix[i][j],MIN_SOBEL_VAL, MAX_SOBEL_VAL, 0, 255);\n}\n</code></pre>\n\n<p>where g(n, a, b, x, y) is a function that maps an interval a,b => x,y linearly.</p>\n\n<p>For your case; </p>\n\n<pre><code>g(...) = (n - MIN_SOBEL_VAL)/(MAX_SOBEL_VAL - MIN_SOBEL_VAL) * (255 - 0)\n</code></pre>\n\n<p>This will map your sobelMatrix into and outputMatrix with values in between 255-0. </p>\n"}], "owner": {"reputation": 5, "user_id": 9854588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de2e1197d9bfcbe9053335140637230?s=128&d=identicon&r=PG&f=1", "display_name": "Ecko", "link": "https://stackoverflow.com/users/9854588/ecko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 55938405, "answer_count": 1, "score": 0, "last_activity_date": 1556723563, "creation_date": 1556720578, "last_edit_date": 1556723563, "question_id": 55937780, "link": "https://stackoverflow.com/questions/55937780/how-to-treat-the-ouput-values-after-convolution-with-sobel-kernel", "title": "How to treat the ouput-values after convolution with sobel-kernel", "body": "<p>I'm trying to write a program (to practice C++) which can detect the edges of an image. I'm using SFML to load in the image. </p>\n\n<p>I tried the Sobel-operation and got confused with the output values.\nI'm getting the intensity value from the pixels around my current pixel, and I multiply those with the appropriate value of the Sobel-kernel. Those values get added together.</p>\n\n<p>My Problem is, that the input intensity values range from 0 to 255, but my output value can range from some negative value (can be smaller than -255) to some positive value (can be bigger than 255).</p>\n\n<p>I couldn't find any hint on how to convert them into greyscale values; my InputImage is Greyscale, meaning r,g,b are similar.\nAs a the Sobel-matrix/kernel I used a custom Matrix Class.</p>\n\n<pre><code>// The Sobel-kernel-x looks like that\nint kernel_x[] = { 1, 0, -1,\n                  2, 0, -2,\n                  1, 0, -1 }\n\n\n\nfor (int y = 1; y &lt; height - 1; y++)\n{\n    for (int x = 1; x &lt; width - 1; x++)\n    {\n        int sum = 0;\n        for (int i = -1; i &lt;= 1; i++)\n        {\n            for (int j = -1; j &lt;= 1; j++)\n            {\n                sum += img.getPixel(x + j, y + i).r * sobelkernel_x.at(j + 1, i + 1);\n            }\n        }\n        //std::cout &lt;&lt; sum &lt;&lt; std::endl;\n        cur_img-&gt;setPixel(x, y, sf::Color(sum, sum, sum));\n    }\n}\n</code></pre>\n"}, {"tags": ["java", "android", "c++", "android-ndk"], "comments": [{"owner": {"reputation": 674, "user_id": 3843123, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7083cf8cf8c1db704df3fc5b8fb00fa7?s=128&d=identicon&r=PG&f=1", "display_name": "isJulian00", "link": "https://stackoverflow.com/users/3843123/isjulian00"}, "edited": false, "score": 0, "creation_date": 1556724272, "post_id": 55937721, "comment_id": 98530155, "body": "when I move the string with base64 to inside the onCreate method everything works fine, still would like to know why it doesn&#39;t work declaring it with my other global variables"}], "answers": [{"comments": [{"owner": {"reputation": 674, "user_id": 3843123, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7083cf8cf8c1db704df3fc5b8fb00fa7?s=128&d=identicon&r=PG&f=1", "display_name": "isJulian00", "link": "https://stackoverflow.com/users/3843123/isjulian00"}, "edited": false, "score": 0, "creation_date": 1556721326, "post_id": 55937893, "comment_id": 98528593, "body": "but it works when I call &quot;private native String invokeNativeString();&quot; and I put this declaration &quot;String ami = new String(Base64.decode(invokeNativeString(),Base64.DEFAULT));&quot; in the same spot so I don&#39;t think that is the problem"}], "tags": [], "owner": {"reputation": 930, "user_id": 1792865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hPbEy.jpg?s=128&g=1", "display_name": "Dmytro", "link": "https://stackoverflow.com/users/1792865/dmytro"}, "is_accepted": false, "score": 1, "last_activity_date": 1556721180, "creation_date": 1556721180, "answer_id": 55937893, "question_id": 55937721, "link": "https://stackoverflow.com/questions/55937721/system-loadlibrary-not-working-in-some-instances/55937893#55937893", "title": "System.loadLibrary() not working in some instances", "body": "<p>It seems you tried to call native function while native library is not yet loaded.</p>\n"}, {"comments": [{"owner": {"reputation": 674, "user_id": 3843123, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7083cf8cf8c1db704df3fc5b8fb00fa7?s=128&d=identicon&r=PG&f=1", "display_name": "isJulian00", "link": "https://stackoverflow.com/users/3843123/isjulian00"}, "edited": false, "score": 1, "creation_date": 1556735668, "post_id": 55939061, "comment_id": 98535160, "body": "Thanks very much for your detailed answer , now it all makes sense"}], "tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 3, "last_activity_date": 1556726274, "creation_date": 1556726274, "answer_id": 55939061, "question_id": 55937721, "link": "https://stackoverflow.com/questions/55937721/system-loadlibrary-not-working-in-some-instances/55939061#55939061", "title": "System.loadLibrary() not working in some instances", "body": "<p>That's because your activity calls <code>super.onCreate()</code> early in its <code>onCreate()</code>. <em>Just to make it clear:</em> This is how it should be called, you made no mistake.</p>\n\n<p><strong><em>But.</em></strong> Cocos2dxActivity authors chose to load the native library during <code>onCreate()</code>. They had a good reason to make this decision: it allowed them to extract <strong>android.app.lib_name</strong> from your package, and this way to choose the correct library.</p>\n\n<p>The JNI tutorials usually recommend to load the native libraries in <code>static {}</code> block. The latter is a safer practice (e.g. it resolves your problem with field initialization), but it has its own drawbacks, too. </p>\n\n<p>The bottom line, you can move initialization of the <strong>ami</strong> field into <code>AppActivity.onCreate()</code>, if you like this way, or you can use the <code>static</code> block in your <strong>AppActivity</strong>, if you prefer. The end user will not really notice the difference.</p>\n"}], "owner": {"reputation": 674, "user_id": 3843123, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7083cf8cf8c1db704df3fc5b8fb00fa7?s=128&d=identicon&r=PG&f=1", "display_name": "isJulian00", "link": "https://stackoverflow.com/users/3843123/isjulian00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 55939061, "answer_count": 2, "score": 3, "last_activity_date": 1556909878, "creation_date": 1556720364, "last_edit_date": 1556909878, "question_id": 55937721, "link": "https://stackoverflow.com/questions/55937721/system-loadlibrary-not-working-in-some-instances", "title": "System.loadLibrary() not working in some instances", "body": "<p>I am making a cocos2d-x game and I was experiencing some weird behavior im not sure if its normal or whats going on but this is whats happening, so the <code>AppActivity.java</code> class extends <code>Cocos2dxActivity.java</code> class. I did not have to call <code>System.loadLibrary(\"MyGame\");</code> in my <code>AppActivity.java</code> class since it is being called in <code>Cocos2dxActivity.java</code>.  But this is what happens if I do a normal declaration like this</p>\n\n<pre><code>private native String invokeNativeString();\n</code></pre>\n\n<p>everything works fine, but then I try to declare this directly underneath and I receive this error</p>\n\n<pre><code>String ami = new String(invokeNativeString());\n</code></pre>\n\n<p>And got errors:</p>\n\n<pre><code>05-01 09:11:27.250 10135-10135/com.izzyjmachado.spaceball E/AndroidRuntime: FATAL EXCEPTION: main\n        Process: com.izzyjmachado.spaceball, PID: 10135\n        java.lang.UnsatisfiedLinkError: No implementation found for java.lang.String org.cocos2dx.cpp.AppActivity.invokeNativeString() (tried Java_org_cocos2dx_cpp_AppActivity_invokeNativeString and Java_org_cocos2dx_cpp_AppActivity_invokeNativeString__)\n</code></pre>\n\n<p>Why is it working when I declare a normal native string but when I use the method inside the declaration of a string its not finding the method ?</p>\n\n<p>I was able to resolve this by calling this in my <code>AppActivity</code> class but I feel like it should be working with out having to call <code>loadLibrary</code> in my <code>appActivity</code> class since its already being called in <code>Cocos2dxActivity</code> and <code>appActivity extends Cocos2dxActivity</code> ? thanks to any help you guys can give me</p>\n\n<pre><code>static {\n    System.loadLibrary(\"MyGame\");\n}\n</code></pre>\n"}, {"tags": ["c++", "search", "ifstream", "ofstream"], "comments": [{"owner": {"reputation": 1178, "user_id": 11385808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/321f8b770bfd0099048493cebba39edd?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/11385808/dmitry"}, "edited": false, "score": 0, "creation_date": 1556721264, "post_id": 55937695, "comment_id": 98528565, "body": "and what stops you from using for example <code>std::map&lt;size_t, std::string&gt;</code> as a container?"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1556721541, "post_id": 55937695, "comment_id": 98528712, "body": "Which bit is problematic? Saving the file? reading it back? Deciding what data structure to use to store these so that the id is <code>map</code>ped to the name?"}, {"owner": {"reputation": 313, "user_id": 10608487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245c953415d2e39d1ff5a484e42ce38c?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/10608487/richard"}, "edited": false, "score": 0, "creation_date": 1556721575, "post_id": 55937695, "comment_id": 98528727, "body": "What have you tried so far? What issues did you run into? You&#39;ve presented a problem statement, not a specific question."}], "answers": [{"comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1556723240, "post_id": 55937977, "comment_id": 98529591, "body": "The question is asking how to search. This answer doesn&#39;t mention how to search."}], "tags": [], "owner": {"reputation": 59, "user_id": 9956378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9cb32b7b8e58dd5030e827bfe6c31d3?s=128&d=identicon&r=PG&f=1", "display_name": "abc", "link": "https://stackoverflow.com/users/9956378/abc"}, "is_accepted": false, "score": 0, "last_activity_date": 1556721564, "creation_date": 1556721564, "answer_id": 55937977, "question_id": 55937695, "link": "https://stackoverflow.com/questions/55937695/how-to-search-record-using-an-id/55937977#55937977", "title": "How to search record using an id", "body": "<p>Probably your are looking for a struct or class.\nMake a Student class I would say.</p>\n\n<pre><code>class Student{\n     public:\n         int id;\n         char *name;\n};\n\nStudent s;\n</code></pre>\n\n<p>Give a go through the link [1] to understand how you can read or write a Student object from or to a file respectively.</p>\n\n<p>[1] <a href=\"https://www.geeksforgeeks.org/readwrite-class-objects-fromto-file-c/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/readwrite-class-objects-fromto-file-c/</a></p>\n"}, {"tags": [], "owner": {"reputation": 1178, "user_id": 11385808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/321f8b770bfd0099048493cebba39edd?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/11385808/dmitry"}, "is_accepted": false, "score": 0, "last_activity_date": 1556814308, "last_edit_date": 1556814308, "creation_date": 1556808689, "answer_id": 55955047, "question_id": 55937695, "link": "https://stackoverflow.com/questions/55937695/how-to-search-record-using-an-id/55955047#55955047", "title": "How to search record using an id", "body": "<p>Hang on, here I have compiled a working example covering all your posted questions. </p>\n\n<p>The below solution though is written in a very idiomatic <code>c++</code> way (the solution sports a usage of <code>stream_iterators</code> when writing/reading files for a non-trivial container data type (i.e. <code>std::map</code>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;sstream&gt;\n#include &lt;algorithm&gt;    // copy, ...\n#include &lt;utility&gt;      // pair, ...    \n#include &lt;fstream&gt;\n#include &lt;iterator&gt;\nusing namespace std;\n\n\ntypedef map&lt;size_t, string&gt; directory;\ntypedef pair&lt;size_t, string&gt; dir_kv_pair;\n\nstruct kv_dir : public dir_kv_pair {\n                        kv_dir(void) = default;\n                        kv_dir(directory::value_type kv):       // type conversion helper\n                         dir_kv_pair{kv} {}                     // pair &lt;-&gt; kv_dir\n    friend ostream &amp;    operator&lt;&lt;(ostream &amp; os, const kv_dir &amp;kv)\n                         { return os &lt;&lt; kv.first &lt;&lt; \" \" &lt;&lt; kv.second &lt;&lt; endl; }\n    friend istream &amp;    operator&gt;&gt;(istream &amp; is, kv_dir&amp; kv) {\n                         if((is &gt;&gt; kv.second).eof()) return is;\n                         kv.first = stol(kv.second);\n                         return is &gt;&gt; kv.second;\n                        }\n};\n\n\nint main()\n{ \n string fname = \"dir.txt\";\n\n {  // write into file\n  directory dir;\n\n  // filling the container\n  dir[123] = \"Michael\";\n  dir[412] = \"Voker\";\n  dir[512] = \"Karl\";\n  dir[143] = \"Riki\";\n\n  // writing to file:\n  ofstream fout{fname};\n  copy(dir.begin(), dir.end(), ostream_iterator&lt;kv_dir&gt; {fout});\n }\n\n // reading from file:\n directory dir{ istream_iterator&lt;kv_dir&gt;{ ifstream{fname} &gt;&gt; skipws }, \n                istream_iterator&lt;kv_dir&gt;{} };\n\n // finding by ID\n size_t id = 512;\n cout &lt;&lt; \"Pupil id [\" &lt;&lt; id &lt;&lt; \"]: \" &lt;&lt; (dir.count(id) == 1? dir[id]: \"not found\") &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>Pupil id [512]: Karl\nbash $\nbash $ cat dir.txt \n123 Michael\n143 Riki\n412 Voker\n512 Karl\nbash $ \n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9633596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdde5bf2f0def5d739033df341f06c0d?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/9633596/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1556814308, "creation_date": 1556720244, "last_edit_date": 1556720734, "question_id": 55937695, "link": "https://stackoverflow.com/questions/55937695/how-to-search-record-using-an-id", "title": "How to search record using an id", "body": "<p>I am creating the system that outputs all the registered student in one of my textfile e.g</p>\n\n<pre><code>123 Michael\n412 Voker\n512 Karl\n143 Riki\n</code></pre>\n\n<p>I need to use their ID to search for the student\nMeans i need to read this register student file.</p>\n\n<p>The system will only ask for the ID.\ne.g</p>\n\n<pre><code>Type ID num: 123\n</code></pre>\n\n<p>OUTPUT: </p>\n\n<pre><code>Hello Michael your ID number is 123.\n</code></pre>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556720043, "post_id": 55937632, "comment_id": 98527956, "body": "<code>&#39;1&#39;</code> is not the same as <code>1</code>. For example, in ASCII, <code>&#39;1&#39; == 49</code>. Edit : Notice your output are sequential 2 digit numbers. 49, 50, 51 and 52."}, {"owner": {"reputation": 41, "user_id": 6660390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b741d80fc6d098d20a97cdf8c24c3ce?s=128&d=identicon&r=PG&f=1", "display_name": "TheMightyBarbarian", "link": "https://stackoverflow.com/users/6660390/themightybarbarian"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556720117, "post_id": 55937632, "comment_id": 98527984, "body": "Well, that explains a lot. Is there anyway to force fix this, i.e to retain the integer without converting it into ASCII values?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556720145, "post_id": 55937632, "comment_id": 98527996, "body": "Brian has posted an answer including how to do that."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1556720463, "post_id": 55937632, "comment_id": 98528147, "body": "Close voters: It&#39;s not really a dupe, this is C++ and the dupe is C#"}, {"owner": {"reputation": 41, "user_id": 6660390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b741d80fc6d098d20a97cdf8c24c3ce?s=128&d=identicon&r=PG&f=1", "display_name": "TheMightyBarbarian", "link": "https://stackoverflow.com/users/6660390/themightybarbarian"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1556720621, "post_id": 55937632, "comment_id": 98528225, "body": "Yes please have a look into that, and thanks @Jabberwocky for the help."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1556720635, "post_id": 55937632, "comment_id": 98528232, "body": "@Jabberwocky Found a better dup"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1556720772, "post_id": 55937632, "comment_id": 98528303, "body": "@NeelMishra You are right that the previous duplicate close was not exact. But nonetheless, it does have several actual duplicates on this site. I&#39;ve updated the question to point to one of them. Note that having your question closed as a duplicate is not a bad thing. It happens all the time. Duplicates act as guide posts for others to find and participate in a single question."}, {"owner": {"reputation": 41, "user_id": 6660390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b741d80fc6d098d20a97cdf8c24c3ce?s=128&d=identicon&r=PG&f=1", "display_name": "TheMightyBarbarian", "link": "https://stackoverflow.com/users/6660390/themightybarbarian"}, "edited": false, "score": 0, "creation_date": 1556720820, "post_id": 55937632, "comment_id": 98528327, "body": "Ya, no worries."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6660390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b741d80fc6d098d20a97cdf8c24c3ce?s=128&d=identicon&r=PG&f=1", "display_name": "TheMightyBarbarian", "link": "https://stackoverflow.com/users/6660390/themightybarbarian"}, "edited": false, "score": 0, "creation_date": 1556720224, "post_id": 55937663, "comment_id": 98528039, "body": "Hi thanks for the answer! Is there any alternative, won&#39;t subtracting zero every-time in my code make my code look ugly?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 41, "user_id": 6660390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b741d80fc6d098d20a97cdf8c24c3ce?s=128&d=identicon&r=PG&f=1", "display_name": "TheMightyBarbarian", "link": "https://stackoverflow.com/users/6660390/themightybarbarian"}, "edited": false, "score": 0, "creation_date": 1556720344, "post_id": 55937663, "comment_id": 98528096, "body": "@NeelMishra what are you <i>actually</i> trying to achieve? If you have a string <code>&quot;1234&quot;</code> and you want to transform this into a <code>vector&lt;int&gt;</code> containing the <code>int</code> values 1,2,3 and 4, then you need to substract <code>&#39;0&#39;</code>"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 41, "user_id": 6660390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b741d80fc6d098d20a97cdf8c24c3ce?s=128&d=identicon&r=PG&f=1", "display_name": "TheMightyBarbarian", "link": "https://stackoverflow.com/users/6660390/themightybarbarian"}, "edited": false, "score": 0, "creation_date": 1556720361, "post_id": 55937663, "comment_id": 98528106, "body": "@NeelMishra I don&#39;t know what you mean by &quot;ugly&quot;, but normally, your code should not be littered with this conversion since you should only perform it at the point where &quot;input&quot; is converted into an internal representation."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 41, "user_id": 6660390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b741d80fc6d098d20a97cdf8c24c3ce?s=128&d=identicon&r=PG&f=1", "display_name": "TheMightyBarbarian", "link": "https://stackoverflow.com/users/6660390/themightybarbarian"}, "edited": false, "score": 0, "creation_date": 1556720956, "post_id": 55937663, "comment_id": 98528391, "body": "@NeelMishra This answers how to actually implement the behavior you want. There&#39;s a general consensus that it is the best way of doing it for the general case. If you find it ugly, feel free to hide it in a function. Then you can do, for example <code>vec.push_back(char_to_int(*itr));</code>. But <code>x - &#39;0&#39;</code> is a well known idiom in c++. Experienced developers will immediately recognize the pattern for what it is."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 2, "last_activity_date": 1556720088, "creation_date": 1556720088, "answer_id": 55937663, "question_id": 55937632, "link": "https://stackoverflow.com/questions/55937632/how-to-fix-garbage-values-that-are-being-pushed-back-into-a-vectorint-when-i/55937663#55937663", "title": "How to fix garbage values that are being pushed back into a vector&lt;int&gt;, when I push a string containing integers", "body": "<p>You are not seeing \"garbage values\", but rather the numerical values of the characters in the string. That is, because you are using an ASCII system like the vast majority of people, the value of the character <code>'1'</code> is 49, and so on. If you want to convert a digit character, such as <code>'1'</code>, to the <em>integer</em>, such as <code>1</code>, you need to subtract <code>'0'</code> (which would be 48 on your system).</p>\n"}], "owner": {"reputation": 41, "user_id": 6660390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b741d80fc6d098d20a97cdf8c24c3ce?s=128&d=identicon&r=PG&f=1", "display_name": "TheMightyBarbarian", "link": "https://stackoverflow.com/users/6660390/themightybarbarian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "closed_date": 1556720608, "accepted_answer_id": 55937663, "answer_count": 1, "score": 0, "last_activity_date": 1556720531, "creation_date": 1556719924, "last_edit_date": 1556720478, "question_id": 55937632, "link": "https://stackoverflow.com/questions/55937632/how-to-fix-garbage-values-that-are-being-pushed-back-into-a-vectorint-when-i", "closed_reason": "Duplicate", "title": "How to fix garbage values that are being pushed back into a vector&lt;int&gt;, when I push a string containing integers", "body": "<p>EDIT :- How his question is different than <a href=\"https://stackoverflow.com/questions/37560073/getting-a-character-from-a-string-is-returning-an-unexpected-number\">Getting a character from a string is returning an unexpected number?</a></p>\n\n<ol>\n<li>The technology specified there is C#, not c++.</li>\n<li>The question associates list box, while mine was associating a vector, and string.</li>\n</ol>\n\n<hr>\n\n<p>I am trying to push a string full of integers with the help of string iterator in my c++ integer vector (vector), but unfortunately when I push the de-referenced string, all I get are some garbage value being pushed in my vector.</p>\n\n<p>I tried searching google for days. Alongside that, I've tried looking documentations, and I've also tried to force convert the de referenced string iterator using (int).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n\n\n\nint main() {\n    string str = \"1234\";\n    vector&lt;int&gt; vec;\n\n    for (string::iterator itr = str.begin(); itr != str.end(); ++itr){         \n        vec.push_back(*itr);\n\n    }\n    for (vector&lt;int&gt;::iterator itr = vec.begin(); itr != vec.end();      \n    ++itr) {\n         cout &lt;&lt; *itr;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Expected output : 1234</p>\n\n<hr>\n\n<p>Actual output : 49505152</p>\n"}, {"tags": ["c++", "glib", "event-loop", "networkmanager"], "answers": [{"comments": [{"owner": {"reputation": 8903, "user_id": 96140, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/57371bcaddaa3fc46e2095bf947b2cb4?s=128&d=identicon&r=PG", "display_name": "Paul Knopf", "link": "https://stackoverflow.com/users/96140/paul-knopf"}, "edited": false, "score": 0, "creation_date": 1556759914, "post_id": 55943518, "comment_id": 98541923, "body": "I am aware of the threading concerns. I am developing a C# wrapper for libnm and I want to hide the threading concerns from the implementations and internally dispatch operations onto a single internal thread.  If I use <code>g_main_context_push_thread_default</code> and process iterations for <code>g_main_context_default</code>, it also doesn&#39;t work. This tells me that maybe libnm is internally inconsistent with the <code>GMainContext*</code> is uses. Maybe a bug in libnm?"}, {"owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "reply_to_user": {"reputation": 8903, "user_id": 96140, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/57371bcaddaa3fc46e2095bf947b2cb4?s=128&d=identicon&r=PG", "display_name": "Paul Knopf", "link": "https://stackoverflow.com/users/96140/paul-knopf"}, "edited": false, "score": 0, "creation_date": 1556874600, "post_id": 55943518, "comment_id": 98584031, "body": "Your best bet for debugging is to find all the <code>GMainContext</code> instances in the process\u2019 address space (break on <code>g_main_context_new()</code> in <code>gdb</code>) and check what <code>GSource</code>s are attached to each of them. I am guessing you will find some <code>GSource</code>s attached to a <code>GMainContext</code> which is not being iterated."}, {"owner": {"reputation": 1153, "user_id": 354393, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9035cc5875f5550c4ab9e77dd3b9683?s=128&d=identicon&r=PG", "display_name": "thaller", "link": "https://stackoverflow.com/users/354393/thaller"}, "edited": false, "score": 1, "creation_date": 1576657325, "post_id": 55943518, "comment_id": 104966555, "body": "As Philip says. Until recently, NMClient did not correctly handle multiple GMainContexts and was not working. This got fixed with 1.22.0 release. See commit <a href=\"https://gitlab.freedesktop.org/NetworkManager/NetworkManager/commit/ce0e898fb476df740a1c337ac9910f504251c466\" rel=\"nofollow noreferrer\">gitlab.freedesktop.org/NetworkManager/NetworkManager/commit/&zwnj;&#8203;&hellip;</a>"}], "tags": [], "owner": {"reputation": 4022, "user_id": 2931197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31e3379958588750196bc49f6925ab62?s=128&d=identicon&r=PG&f=1", "display_name": "Philip Withnall", "link": "https://stackoverflow.com/users/2931197/philip-withnall"}, "is_accepted": false, "score": 0, "last_activity_date": 1556749914, "creation_date": 1556749914, "answer_id": 55943518, "question_id": 55937592, "link": "https://stackoverflow.com/questions/55937592/glib-processing-custom-gmaincontext-loop-on-another-thread-not-raising-signal/55943518#55943518", "title": "glib: Processing custom GMainContext* loop on another thread, not raising signal handlers", "body": "<p>I suspect this is because at least some of the underlying libnm <code>GSource</code>s are still being added to the global default <code>GMainContext</code> (the one always returned by <code>g_main_context_default()</code>). If you\u2019re going to run a custom <code>GMainContext</code> in another thread, you need to ensure that all <code>GSource</code>s are attached to it; or you need to also run the global default <code>GMainContext</code> in the main thread.</p>\n\n<p>If you are trying to run the <code>GMainContext</code> in one thread and a Qt main loop in the main thread, you are going to have to do a lot of thinking about the thread safety of data which is touched by both of them. It may be easier in the long run to chain the global default <code>GMainContext</code> to the Qt main loop (or vice versa) so that you only have one event loop running (in one thread). Then you don\u2019t have to think about thread safety.</p>\n"}], "owner": {"reputation": 8903, "user_id": 96140, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/57371bcaddaa3fc46e2095bf947b2cb4?s=128&d=identicon&r=PG", "display_name": "Paul Knopf", "link": "https://stackoverflow.com/users/96140/paul-knopf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 359, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556749914, "creation_date": 1556719734, "last_edit_date": 1556735854, "question_id": 55937592, "link": "https://stackoverflow.com/questions/55937592/glib-processing-custom-gmaincontext-loop-on-another-thread-not-raising-signal", "title": "glib: Processing custom GMainContext* loop on another thread, not raising signal handlers", "body": "<p>I am trying to create a custom <code>GMainContext*</code> (so not to conflict with Qt/etc) and process the loop on a custom thread.</p>\n\n<p>I am using <code>libnm</code> (for NetworkManager), but I don't think it is relevant.</p>\n\n<p>The signal handlers aren't raised/processed when using a custom <code>GMainContext*</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;NetworkManager.h&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\n// Uncomment this for it to not work.\n#define WORKING\n\nstatic void test_callback ()\n{\n    std::cerr &lt;&lt; \"test callback\";\n}\n\nstatic int thread(GMainContext *mainContext)\n{\n    GMainLoop* mainLoop = g_main_loop_new(mainContext, FALSE);\n    g_main_loop_run(mainLoop);\n}\n\nint main(int argc, char *argv[])\n{\n#ifdef WORKING\n    GMainContext* mainContext = g_main_context_default();\n#else\n    GMainContext* mainContext = g_main_context_new();\n    g_main_context_push_thread_default(mainContext);\n#endif\n\n    GError* error = nullptr;\n    NMClient* client = nm_client_new(nullptr, &amp;error);\n\n    g_signal_connect(client, NM_CLIENT_ACTIVE_CONNECTION_ADDED, G_CALLBACK(test_callback), nullptr);\n    g_signal_connect(client, NM_CLIENT_ACTIVE_CONNECTION_REMOVED, G_CALLBACK(test_callback), nullptr);\n\n    std::thread thread_obj(thread, mainContext);\n    thread_obj.join();\n\n    return 0;\n}\n\n</code></pre>\n\n<p>The signal handlers are properly raised with <code>WORKING</code> defined, using <code>g_main_context_default()</code>. </p>\n"}, {"tags": ["c++", "parameters", "lua", "stack"], "comments": [{"owner": {"reputation": 1476, "user_id": 9383219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fabe5d903589acb1dfdf17fe4e405e?s=128&d=identicon&r=PG&f=1", "display_name": "cyclaminist", "link": "https://stackoverflow.com/users/9383219/cyclaminist"}, "edited": false, "score": 0, "creation_date": 1556937358, "post_id": 55937475, "comment_id": 98608041, "body": "I&#39;m not an expert on all the internals of Lua, but I don&#39;t see why popping arguments would cause problems. As far as I know, a Lua C function can do almost anything it likes to its portion of the stack."}, {"owner": {"reputation": 342, "user_id": 2047576, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001881388753/picture?type=large", "display_name": "Bas Groothedde", "link": "https://stackoverflow.com/users/2047576/bas-groothedde"}, "reply_to_user": {"reputation": 1476, "user_id": 9383219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fabe5d903589acb1dfdf17fe4e405e?s=128&d=identicon&r=PG&f=1", "display_name": "cyclaminist", "link": "https://stackoverflow.com/users/9383219/cyclaminist"}, "edited": false, "score": 0, "creation_date": 1556972612, "post_id": 55937475, "comment_id": 98614236, "body": "I agree, that&#39;s what I would think too, however popping too many values might cause an issue - that&#39;s not the case here though. I just don&#39;t like making assumptions about these things, even though I have not encountered any problems in doing this yet."}], "owner": {"reputation": 342, "user_id": 2047576, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001881388753/picture?type=large", "display_name": "Bas Groothedde", "link": "https://stackoverflow.com/users/2047576/bas-groothedde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1566862352, "creation_date": 1556719225, "last_edit_date": 1566862352, "question_id": 55937475, "link": "https://stackoverflow.com/questions/55937475/can-you-pop-function-arguments-in-a-lua-cfunction-safely", "title": "Can you pop function arguments in a Lua CFunction safely?", "body": "<p>I'm working on a very large framework exposing many algorithms, functions and features from C/C++ to Lua. This framework also exposes some functionality that works with tables, indexers, and often is merely a proxy for default behaviour if a certain condition is not true.</p>\n\n<p>My question is very basic; Is it safe to pop function arguments from a C function in i.e. a newindex implementation in C? I currently implement it by getting an object which should hold the key and value and insert it before the key and value provided to the <code>__newindex</code> metamethod. I then use <code>lua_rawset</code> to set it to the object I placed in front, popping off two of the function arguments. Is this safe?</p>\n\n<p>I ran extensive tests, including checkstack tests, and monitoring the top of the Lua stack. None of these tests are conclusive enough for me though, I would like to have the opinion of other Lua developers.</p>\n\n<p>I've read many parts of the Lua documentation, however there does not seem to be a clear statement about this (or I have not found it). The manual (<a href=\"https://www.lua.org/manual/5.3/manual.html#lua_CFunction\" rel=\"nofollow noreferrer\">https://www.lua.org/manual/5.3/manual.html#lua_CFunction</a>) does state:</p>\n\n<blockquote>\n  <p>Any other value in the stack below the results will be properly discarded by Lua.</p>\n</blockquote>\n\n<p>However this doesn't answer my question if discarding these values myself can cause problems.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// An example, is this safe to do? My guts say yes\nint lm_entity__newindex(lua_State* L) {\n    luaL_checkany(L, 1); // udata\n    luaL_checkany(L, 2); // key\n    luaL_checkany(L, 3); // value \n\n    // does not manipulate the stack, merely casts lua_touserdata\n    auto entity = lm_entity(L, 1);\n\n    // get the members table \n    lua_rawgeti(L, LUA_REGISTRYINDEX, entity-&gt;members_ref);\n\n    // place before key and value (lua_rotate)\n    lua_insert(L, -3);\n\n    // store, in turn popping the two function arguments\n    lua_rawset(L, -3);\n\n    // pop members table\n    lua_pop(L, 1);\n\n    return 0;\n}\n</code></pre>\n\n<p>I expect this to work safely, because in a function call the stack is restored afterwards based on the number of parameters passed on to the function and the number of return values pushed onto the stack. I'm not certain, though, that popping two of the arguments off the stack will cause issues in that regard, even though my testing seems to prove otherwise.</p>\n"}, {"tags": ["c++", "initialization", "c++17", "stdvector"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1556719355, "post_id": 55937402, "comment_id": 98527650, "body": "The short answer is no. This question has been asked here before though tracking it down might not be easy."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 5, "creation_date": 1556719425, "post_id": 55937402, "comment_id": 98527685, "body": "Can we take a moment to appreciate &quot;uniform&quot; initialization?"}, {"owner": {"reputation": 533, "user_id": 2146414, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6aa31bda323666c4a65f4f03a07420d9?s=128&d=identicon&r=PG", "display_name": "user2146414", "link": "https://stackoverflow.com/users/2146414/user2146414"}, "edited": false, "score": 0, "creation_date": 1556721036, "post_id": 55937402, "comment_id": 98528442, "body": "Does it mean that we need to mix: use uniform and old-way initialization?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1556734107, "post_id": 55937402, "comment_id": 98534568, "body": "@RSahu The short answer is yes, the longer answer is don&#39;t. :-)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1556734405, "post_id": 55937402, "comment_id": 98534680, "body": "@Barry, good call."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1607187787, "post_id": 55937402, "comment_id": 115195921, "body": "@StoryTeller-UnslanderMonica: I love it. Now I can, regardless of type, use <code>{}</code> to construct an object from a list of data, and <code>()</code> for a non-data constructor. Nice and consistent.  I merely find the fact that <code>{}</code> <i>can</i> call other constructors to be a flaw in C++."}], "answers": [{"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1556755450, "post_id": 55940517, "comment_id": 98541193, "body": "what will <code>std::vector&lt;std::size_t&gt; vi {size_type{10}, 4};</code> do? (assuming that <code>std::vector&lt;std::size_t&gt;::size_type</code> is <code>std::size_t</code>)"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1556757866, "post_id": 55940517, "comment_id": 98541581, "body": "it looks like it calls the initializer list ctor (<code>std::vector&lt;std::size_t&gt;</code> version) <a href=\"https://godbolt.org/z/2RKg4C\" rel=\"nofollow noreferrer\">godbolt.org/z/2RKg4C</a>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1556758804, "post_id": 55940517, "comment_id": 98541737, "body": "@bolov Yes, hence the caveat. Note that the question only asked about <code>vector&lt;int&gt;</code>."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1556759604, "post_id": 55940517, "comment_id": 98541866, "body": "I was just curious"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 4, "last_activity_date": 1556733447, "creation_date": 1556733447, "answer_id": 55940517, "question_id": 55937402, "link": "https://stackoverflow.com/questions/55937402/universal-initialization-vectors-fill-constructor/55940517#55940517", "title": "Universal initialization - vector&#39;s fill constructor", "body": "<p>Is it possible? Sure.</p>\n\n<pre><code>struct size_type {\n    template&lt;class T, std::enable_if_t&lt;std::is_same_v&lt;T, std::vector&lt;int&gt;::size_type&gt;&gt;* = nullptr&gt;\n    operator T() const {\n        return val;\n    }\n    std::vector&lt;int&gt;::size_type val;\n};\n\nstd::vector&lt;int&gt; vi {size_type{10}, 4}; // vector of 10 ints with value 4\n</code></pre>\n\n<p>This works as long as <code>value_type</code> is not the same type as <code>size_type</code>.</p>\n\n<p>Should you do it? No.</p>\n"}, {"comments": [{"owner": {"reputation": 533, "user_id": 2146414, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6aa31bda323666c4a65f4f03a07420d9?s=128&d=identicon&r=PG", "display_name": "user2146414", "link": "https://stackoverflow.com/users/2146414/user2146414"}, "edited": false, "score": 0, "creation_date": 1557223702, "post_id": 55940625, "comment_id": 98684190, "body": "It seems that using uniform initialization lets you avoid some errors. Thus I hoped to use it all over the place instead of parentheses. BTW good workaround:)"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 4, "last_activity_date": 1556734064, "creation_date": 1556734064, "answer_id": 55940625, "question_id": 55937402, "link": "https://stackoverflow.com/questions/55937402/universal-initialization-vectors-fill-constructor/55940625#55940625", "title": "Universal initialization - vector&#39;s fill constructor", "body": "<p>Sure:</p>\n\n<pre><code>std::vector&lt;int&gt; vi{10, 4, std::allocator&lt;int&gt;()};\n</code></pre>\n\n<p>But there's nothing inherently wrong with parentheses.</p>\n"}], "owner": {"reputation": 533, "user_id": 2146414, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/6aa31bda323666c4a65f4f03a07420d9?s=128&d=identicon&r=PG", "display_name": "user2146414", "link": "https://stackoverflow.com/users/2146414/user2146414"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556734064, "creation_date": 1556718969, "last_edit_date": 1556720492, "question_id": 55937402, "link": "https://stackoverflow.com/questions/55937402/universal-initialization-vectors-fill-constructor", "title": "Universal initialization - vector&#39;s fill constructor", "body": "<p>Is it possible in c++17 to call this constructor</p>\n\n<pre><code> vector( size_type count, const T&amp; value, const Allocator&amp; alloc = Allocator());\n</code></pre>\n\n<p>using uniform initialization for <code>vector&lt;int&gt;</code>? It seems that <code>std::vector&lt;int&gt; data{10, 20}</code> creates a vector of size two.</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1556718983, "post_id": 55937353, "comment_id": 98527459, "body": "You can&#39;t have different nodes that have the same path cost in a set if that is what you are sorting on."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1556719156, "post_id": 55937353, "comment_id": 98527549, "body": "Can you give us some example <code>node</code>&#39;s and how you&#39;d want them sorted?"}, {"owner": {"reputation": 68, "user_id": 11260919, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZqR_HsQekU0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJDTYxd3etdl0fkyHQwFS9K5RTeg/mo/photo.jpg?sz=128", "display_name": "Yunhao Lin", "link": "https://stackoverflow.com/users/11260919/yunhao-lin"}, "edited": false, "score": 0, "creation_date": 1556719308, "post_id": 55937353, "comment_id": 98527621, "body": "for example,(3,2,3)  (3,2,2) (4,3,2) (7,2,3) will be sorted like (3,2,2) (4,3,2) (7,2,3)"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1556720525, "post_id": 55937353, "comment_id": 98528176, "body": "@YunhaoLin So <code>(3,2,3)</code> and <code>(3,2,2)</code> are evaluated as the same Node there, but how did you decide which came first between <code>(3,2,2)</code> and <code>(4,3,2)</code>?"}, {"owner": {"reputation": 68, "user_id": 11260919, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZqR_HsQekU0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJDTYxd3etdl0fkyHQwFS9K5RTeg/mo/photo.jpg?sz=128", "display_name": "Yunhao Lin", "link": "https://stackoverflow.com/users/11260919/yunhao-lin"}, "edited": false, "score": 0, "creation_date": 1556721102, "post_id": 55937353, "comment_id": 98528479, "body": "depend on the insert order"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1556728320, "post_id": 55937353, "comment_id": 98531983, "body": "@YunhaoLin &quot;a==b only if row and cols are equal&quot; means you cannot at all consider the value of <i>cost</i>, see my answer"}], "answers": [{"comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1556726788, "post_id": 55937791, "comment_id": 98531339, "body": "Hmm this was my first thought too, but it only works if the similar nodes are next to each other. For example, adding node <code>(3,2,9)</code> to the end of your array won&#39;t see it&#39;s the same node as <code>(3,2,3)</code>: <a href=\"https://ideone.com/OAxAmL\" rel=\"nofollow noreferrer\">ideone.com/OAxAmL</a>"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1556727140, "post_id": 55937791, "comment_id": 98531504, "body": "@scohe001 ah yes, in fact that means the operator &lt; is not ok, I was afraid of that, but without trying that example to confirm"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1556727935, "post_id": 55937791, "comment_id": 98531842, "body": "@scohe001 thank you, I edited my answer ... and come back to the very first version I given even I changed it ... because of you ^^"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1556730460, "post_id": 55937791, "comment_id": 98532889, "body": "@bruno <code>return (row &lt; rhs.row) || ((row == rhs.row) &amp;&amp; (cols &lt; rhs.cols));</code> -- Using <code>std::tie</code> removes having to figure out the logic and automatically does the cascading logic for you.  <code>return std::tie(row, cols) &lt; std::tie(rhs.row, rhs.col);</code>"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1556730931, "post_id": 55937791, "comment_id": 98533058, "body": "@PaulMcKenzie yes you are right, one of the C++11 gifts, thank you for the remark, I edited my answer"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1556732394, "last_edit_date": 1556732394, "creation_date": 1556720647, "answer_id": 55937791, "question_id": 55937353, "link": "https://stackoverflow.com/questions/55937353/overloading-set-operator/55937791#55937791", "title": "Overloading set &lt; operator", "body": "<blockquote>\n  <p>if a==b save the one with lest cost</p>\n</blockquote>\n\n<p>You cannot have that using a <em>std::set</em> : <code>a==b</code> means <code>a&lt;b</code> and <code>b&lt;a</code> are false, so when <em>a</em> and <em>b</em> have the same <em>row</em> and <em>cols</em> <code>operator&lt;</code> has to return false and that without considering <em>cost</em></p>\n\n<p>To have the expected behavior you have to implement your own <em>set</em> without just using an <code>operator&lt;</code> to sort/insert.</p>\n\n<blockquote>\n  <p>ordered by path cost</p>\n</blockquote>\n\n<p>I suppose you mean <em>ordered on cost</em></p>\n\n<p>Using <em>std::set</em> and <code>operator&lt;</code> we could think of having :</p>\n\n<pre><code>  bool operator &lt;(const node &amp; rhs) const {\n    // to satisfy a==b only if row and cols are equal\n    if ((row == rhs.row) &amp;&amp; (cols == rhs.cols))\n      return false;\n\n    return (cost &lt; rhs.cost) ||\n      ((cost == rhs.cost) &amp;&amp;\n       ((row &lt; rhs.row) || ((row == rhs.row) &amp;&amp; (cols &lt; rhs.cols))));\n  }\n</code></pre>\n\n<p>but this is wrong, for instance</p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;iostream&gt;\n\nstruct node{\n  int row;\n  int cols;\n  int cost;\n\n  bool operator &lt;(const node &amp; rhs) const {\n    // to satisfy a==b only if row and cols are equal\n    if ((row == rhs.row) &amp;&amp; (cols == rhs.cols))\n      return false;\n\n    return (cost &lt; rhs.cost) ||\n      ((cost == rhs.cost) &amp;&amp;\n       ((row &lt; rhs.row) || ((row == rhs.row) &amp;&amp; (cols &lt; rhs.cols))));\n  }\n};\n\nint main()\n{\n  const node a[] = { {3,2,3} , {3,2,2}, {4,3,2}, {7,2,3}, {3, 2, 9} };\n  std::set&lt;node&gt; s;\n\n  for (size_t i = 0; i != sizeof(a)/sizeof(*a); ++i)\n    s.insert(a[i]);\n\n  for (auto x : s)\n    std::cout &lt;&lt; '(' &lt;&lt; x.row &lt;&lt; ' ' &lt;&lt; x.cols &lt;&lt; ' ' &lt;&lt; x.cost &lt;&lt; ')' &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>compilation and execution :</p>\n\n<pre><code>pi@raspberrypi:/tmp $ g++ -pedantic -Wextra -Wall s.cc\npi@raspberrypi:/tmp $ ./a.out\n(4 3 2)\n(3 2 3)\n(7 2 3)\n(3 2 9)\n</code></pre>\n\n<p>the <em>set</em> contains <code>3 2 3</code> and <code>3 2 9</code> even they must be considered equals.</p>\n\n<p>The <code>operator&lt;</code> is wrong because it is not consistent when comparing <code>3 2 3</code> and <code>3 2 9</code> to the other values : <code>7 2 3</code> is less than <code>3 2 9</code> but it is not less than <code>3 2 3</code></p>\n\n<blockquote>\n  <p>a==b only if row and cols are equal</p>\n</blockquote>\n\n<p>implies the sort must only take into account <em>row</em> and <em>cols</em> but <em>cost</em> must <em>not</em> be used</p>\n\n<p>So for instance</p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;iostream&gt;\n\nstruct node{\n  int row;\n  int cols;\n  int cost;\n\n  bool operator &lt;(const node &amp; rhs) const {\n    return (row &lt; rhs.row) || ((row == rhs.row) &amp;&amp; (cols &lt; rhs.cols));\n  }\n};\n\nint main()\n{\n  const node a[] = { {3,2,3} , {3,2,2}, {4,3,2}, {7,2,3}, {3, 2, 9} };\n  std::set&lt;node&gt; s;\n\n  for (size_t i = 0; i != sizeof(a)/sizeof(*a); ++i)\n    s.insert(a[i]);\n\n  for (auto x : s)\n    std::cout &lt;&lt; '(' &lt;&lt; x.row &lt;&lt; ' ' &lt;&lt; x.cols &lt;&lt; ' ' &lt;&lt; x.cost &lt;&lt; ')' &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>Compilation and execution:</p>\n\n<pre><code>pi@raspberrypi:/tmp $ g++ -pedantic -Wextra -Wall s.cc\npi@raspberrypi:/tmp $ ./a.out\n(3 2 3)\n(4 3 2)\n(7 2 3)\npi@raspberrypi:/tmp $ \n</code></pre>\n\n<p>respects the expected equality, but nothing concerning <em>cost</em></p>\n\n<hr>\n\n<p>From C++11 (thank you @PaulMcKenzie for the remark) :</p>\n\n<pre><code>  bool operator &lt;(const node &amp; rhs) const {\n    return std::tie(row, cols) &lt; std::tie(rhs.row, rhs.col);\n  }\n</code></pre>\n\n<p>very practical when there are a lot of fields to take into account</p>\n"}], "owner": {"reputation": 68, "user_id": 11260919, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZqR_HsQekU0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcJDTYxd3etdl0fkyHQwFS9K5RTeg/mo/photo.jpg?sz=128", "display_name": "Yunhao Lin", "link": "https://stackoverflow.com/users/11260919/yunhao-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556732394, "creation_date": 1556718760, "last_edit_date": 1556719771, "question_id": 55937353, "link": "https://stackoverflow.com/questions/55937353/overloading-set-operator", "title": "Overloading set &lt; operator", "body": "<p>Given </p>\n\n<pre><code>struct node{\n    int row;\n    int cols;\n    int cost;\n}\n</code></pre>\n\n<p>I need an node's set ordered by path cost, a==b only if row and cols are equal. My question is how can I overload the operator&lt; so the set can save diferent nodes but with same path cost? And also if a==b save the one with lest cost</p>\n"}, {"tags": ["c++", "matrix", "multidimensional-array"], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 0, "last_activity_date": 1556719603, "last_edit_date": 1592644375, "creation_date": 1556718867, "answer_id": 55937378, "question_id": 55937041, "link": "https://stackoverflow.com/questions/55937041/how-to-add-a-column-and-row-at-the-end-of-2d-array/55937378#55937378", "title": "How to add a column and row at the end of 2d array?", "body": "<h2>What you try to do</h2>\n<p>You intend to grow an <code>n*n</code> adjacency matrix to an <code>(n+1)*(n+1)</code>, where <code>n</code> is <code>vertices.size()-1</code>,  after your initial <code>push_back()</code> in the <code>vertices</code> vector.</p>\n<p>This looks (almost) fine:</p>\n<ul>\n<li>Your first <code>for</code>-loop resizes the <code>n</code> existing inner vectors, adding de facto the missing column.</li>\n<li>You then resize the outer vector, which adds a default constructed (empty) vector at the end.</li>\n<li>Then in the second <code>for</code>-loop, you try to initialize the new inner vector by directly assigning a value to its elements.</li>\n</ul>\n<h2>What's wrong here ?</h2>\n<p>Unfortunately when you do this last step,  the last inner vector is still empty. So your second for loop uses an out-of-range subscript <code>i</code>, which causes UB (possible symptom: seg fault).</p>\n<h2>How to solve it ?</h2>\n<p>All you need to do, is to resize the last inner vector before your second loop:</p>\n<pre><code>...\nadj_matrix.resize(vertices.size());\nadj_matrix[vertices.size()-1].resize(vertices.size());  //&lt;&lt;-- this is missing !\nfor (unsigned i = 0; i &lt; vertices.size(); i ++) \n...\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11437207, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kZWXazyQgng/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSrVk2hqHsIpE-Tqg65kIYsi9JHA/mo/photo.jpg?sz=128", "display_name": "The Trung Phan", "link": "https://stackoverflow.com/users/11437207/the-trung-phan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 55937378, "answer_count": 1, "score": 0, "last_activity_date": 1556719603, "creation_date": 1556717358, "last_edit_date": 1556718062, "question_id": 55937041, "link": "https://stackoverflow.com/questions/55937041/how-to-add-a-column-and-row-at-the-end-of-2d-array", "title": "How to add a column and row at the end of 2d array?", "body": "<p>I want to add a row and column at the end of my 2D array whenever the function is called.</p>\n\n<pre><code>template &lt;typename vertex&gt; void directed_graph&lt;vertex&gt;::add_vertex(const vertex&amp; u) \n{\n    if (!directed_graph&lt;vertex&gt;::contains(u))\n    {\n        vertices.push_back(u);\n        for (unsigned i = 0; i &lt; vertices.size()-1; i ++)\n            {\n                adj_matrix[i].resize(vertices.size());\n                adj_matrix[i][vertices.size()-1] = false;\n            }\n\n        adj_matrix.resize(vertices.size());\n        for (unsigned i = 0; i &lt; vertices.size(); i ++)\n        {\n            adj_matrix[vertices.size()-1][i] = false;\n        }   \n    }\n}\n</code></pre>\n\n<p>I tried this code as above and I received is the SegFault.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1556716595, "post_id": 55936803, "comment_id": 98526358, "body": "I don&#39;t think this is possible :("}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1556716667, "post_id": 55936803, "comment_id": 98526402, "body": "Looks like there are a couple options in <a href=\"https://stackoverflow.com/questions/8936549/constexpr-overloading\">here</a>.  Not really sure if this should be a dupe though."}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1556732200, "post_id": 55936803, "comment_id": 98533643, "body": "This is similar to <code>is_constexpr</code>. There is <a href=\"https://stackoverflow.com/questions/13299394/is-is-constexpr-possible-in-c11\">this question</a> but it concluded there is no standards-compliant way to do it"}], "answers": [{"comments": [{"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 1, "creation_date": 1556736466, "post_id": 55936967, "comment_id": 98535472, "body": "Here&#39;s a version heavily inspired by this one that uses a <code>static_assert</code> so there is a message: <a href=\"https://godbolt.org/z/IaP0cr\" rel=\"nofollow noreferrer\">godbolt.org/z/IaP0cr</a> . It also has some of the issues (The difference between &quot;<code>constexpr</code>&quot; and &quot;compile time constant&quot;)"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1556736707, "post_id": 55936967, "comment_id": 98535576, "body": "@Artyer - Not bad at all!"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 7, "last_activity_date": 1556864798, "last_edit_date": 1556864798, "creation_date": 1556717048, "answer_id": 55936967, "question_id": 55936803, "link": "https://stackoverflow.com/questions/55936803/static-assert-that-passes-if-expression-is-not-known-at-compile-time/55936967#55936967", "title": "Static assert that passes if expression is not known at compile time", "body": "<p>If you are willing to commit to a compiler with GNU extensions, it's possible. So be warned.</p>\n\n<p>It takes two overloads and a helper macro:</p>\n\n<pre><code>template&lt;std::size_t N&gt;\nconstexpr void assert_helpr(int(&amp;)[N]) = delete;\n\nvoid assert_helpr(...) {}\n\n#define my_static_assert(...) do {               \\\n    __extension__ int _tmp [(__VA_ARGS__) + 1];  \\\n    assert_helpr(_tmp);                          \\\n} while(0)\n</code></pre>\n\n<p>It works as follows:</p>\n\n<ol>\n<li>The macro grabs your token soup and treats it like an integral expression. +1 is to avoid pathological zero cases.</li>\n<li>If the expression is a constant expression, we get a standard array. Otherwise we get a VLA.</li>\n<li>Now we call one of two overloaded functions. Overload resolution will always choose a c var-arg function last. If what we got was a regular array, the first, deleted overload is chosen, and the assertion fails.</li>\n<li>If we got a VLA, the second overload is chosen and the assertion passes.</li>\n</ol>\n\n<p>I haven't tested it thoroughly, but it seems to work on both Clang and GCC. <a href=\"http://coliru.stacked-crooked.com/a/f203b95ea12bd138\" rel=\"nofollow noreferrer\">See it live</a>.</p>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/users/5754656/artyer\">@Artyer</a> was kind enough to share a solution based on this approach on <a href=\"https://godbolt.org/z/IaP0cr\" rel=\"nofollow noreferrer\">godbolt</a>.</p>\n\n<p>Here's a <a href=\"http://coliru.stacked-crooked.com/a/c1f35d8172f2cdbd\" rel=\"nofollow noreferrer\">reduction</a> of that code to this problem:</p>\n\n<pre><code>template&lt;std::size_t N&gt;\nconstexpr std::false_type assert_helpr(int(&amp;)[N]);\nconstexpr std::true_type  assert_helpr(...);\n\n#define my_static_assert(...) do {                               \\\n    __extension__ int _tmp[(__VA_ARGS__) + 1];                   \\\n    static_assert(decltype(assert_helpr(_tmp)){}, #__VA_ARGS__); \\\n} while(0)\n</code></pre>\n\n<p>Same use of overloading, except this time we grab an actual result type from the call via <code>decltype</code>, and proceed to create a true compile time Boolean constant out of it.</p>\n\n<p>This allows direct use of <code>static_assert</code>, and as a nice to have feature, we can pass it the stringified token soup to get an indication in the error of the expression that failed.</p>\n"}], "owner": {"reputation": 1292, "user_id": 8044236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b25c9e70d1b4bb2bde0254c9c82fc75e?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/8044236/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": 11, "last_activity_date": 1556864798, "creation_date": 1556716280, "question_id": 55936803, "link": "https://stackoverflow.com/questions/55936803/static-assert-that-passes-if-expression-is-not-known-at-compile-time", "title": "Static assert that passes if expression is not known at compile time", "body": "<p>I want to implement <code>my_static_assert</code> that slightly differs from c++17 single-parametric <code>static_assert</code>: if condition inside <code>my_static_assert</code> <strong>is not known</strong> at compile time, it should <strong>pass</strong>.</p>\n\n<p>The second <code>my_static_assert</code> in the following example should pass but if I would use <code>static_assert</code> it will fail.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint x, y;\nconstexpr int f1() { return 0; }\nconstexpr int f2() { return 0; }\nint f3() { return x; }\nint f4() { return y; }\nconstexpr int sum(int a, int b) { return a + b; }\n\nint main() {\n    std::cin &gt;&gt; x &gt;&gt; y;\n\n    // it should fail \n    my_static_assert(sum(sum(f1(), f2()), sum(f1(), f1())) != 0);\n\n    // it should pass\n    my_static_assert(sum(sum(f1(), f2()), sum(f4(), sum(f3(), f1()))) != 0);\n}\n</code></pre>\n\n<p>If you want to know why this question arised:</p>\n\n<p>I am building expressions using leaf functions f1,f2,f3,f4 and operations on the expression nodes: sum,mul,div,sub. Leafs that are known at compile time contain value that is always 0.</p>\n\n<p>I am trying to check that my expressions contain at least one element that is not known at compile time.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1556741732, "post_id": 55936161, "comment_id": 98537563, "body": "How do these CPU usage measurements compare to e.g. <code>wget</code> on the same devices?"}, {"owner": {"reputation": 23, "user_id": 11436760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06c3e05aecbae4541648a2243a17b558?s=128&d=identicon&r=PG&f=1", "display_name": "kungfu", "link": "https://stackoverflow.com/users/11436760/kungfu"}, "reply_to_user": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1556785055, "post_id": 55936161, "comment_id": 98549167, "body": "@Mike with <code>wget</code> cpu usages are pretty same. :O On desktop: 1%-5%, avg: 4%. On ARM device: 3%-45%, avg: 35%. Thanks @Mike."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 11436760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06c3e05aecbae4541648a2243a17b558?s=128&d=identicon&r=PG&f=1", "display_name": "kungfu", "link": "https://stackoverflow.com/users/11436760/kungfu"}, "is_accepted": false, "score": 0, "last_activity_date": 1556794854, "creation_date": 1556794854, "answer_id": 55950984, "question_id": 55936161, "link": "https://stackoverflow.com/questions/55936161/qnetworkreply-qnetworkaccessmanager-download-file-by-https-high-cpu-usage/55950984#55950984", "title": "QNetworkReply, QNetworkAccessManager - download file by HTTPS - high cpu usage", "body": "<p>CPU usages with <code>wget</code> and downloading by Qt are pretty same. Therefore I think theses CPU usages are normal.</p>\n"}], "owner": {"reputation": 23, "user_id": 11436760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06c3e05aecbae4541648a2243a17b558?s=128&d=identicon&r=PG&f=1", "display_name": "kungfu", "link": "https://stackoverflow.com/users/11436760/kungfu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556794854, "creation_date": 1556713093, "last_edit_date": 1556716549, "question_id": 55936161, "link": "https://stackoverflow.com/questions/55936161/qnetworkreply-qnetworkaccessmanager-download-file-by-https-high-cpu-usage", "title": "QNetworkReply, QNetworkAccessManager - download file by HTTPS - high cpu usage", "body": "<p>I created file downloader with QNetworkReply and QNetworkAccessManager in C++ with <strong>Qt 5.12.3</strong>.\nWhen download file starts cpu usage rises to high values (especially on ARM device).</p>\n\n<ul>\n<li><p>Desktop - cpu i7@4GHz - Linux operating system:\ncpu usage is 2%-7% depending on download speed. Average cpu usage is 5% with max download speed which is 20 Mb/s. Cpu usage is same both on debug and release builds.</p></li>\n<li><p>SBC - ARM cpu @1,53Ghz - Linux operating system:\ncpu usage is 5%-50% depending on download speed. Average cpu usage is 40% with max download speed which is 20 Mb/s. Cpu usage checked with release build.</p></li>\n</ul>\n\n<p>It is normal to have such high CPU usage when downloading files by HTTPS in Qt or I missing something?</p>\n\n<p>Code:\nStarting file download:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>  qDebug() &lt;&lt; \"HTTP: starting download FILE\" &lt;&lt; file_name &lt;&lt; \"from\" &lt;&lt; url.toString();\n  QNetworkRequest req(url);\n  req.setMaximumRedirectsAllowed(3);\n  req.setHeader(QNetworkRequest::UserAgentHeader, http_user_agent);\n  req.setRawHeader(\"Accept-Encoding\", \"identity\");\n  req.setAttribute(QNetworkRequest::HttpPipeliningAllowedAttribute, true);\n  const QByteArray range_header_value = \"bytes=\" + QByteArray::number(curr_file_size) + \"-\";\n  req.setRawHeader(\"Range\", range_header_value);\n\n  net_reply = nam-&gt;get(req);\n  net_reply-&gt;setReadBufferSize(10 * 1024 * 1024);\n  connect(net_reply, &amp;QNetworkReply::finished, this, &amp;file_downloader::operation_finished);\n  connect(net_reply, &amp;QNetworkReply::metaDataChanged, this, &amp;file_downloader::metadata_changed);\n  connect(net_reply, &amp;QNetworkReply::downloadProgress, this, &amp;file_downloader::download_progress);\n</code></pre>\n\n<p>I reading content from <code>net_reply</code> every 250 msecs:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>read_buffer.append(net_reply-&gt;read(read_buffer_size));\nif(read_buffer.size() &gt;= read_buffer_size)\n{\n  const qint64 bytes_written = file-&gt;write(read_buffer);\n  read_buffer.clear();\n  if(bytes_written == -1)\n  {\n    qDebug() &lt;&lt; \"Error write to FILE:\" &lt;&lt; file-&gt;fileName() &lt;&lt; \". Aborting download\";\n    QTimer::singleShot(0, net_reply, &amp;QNetworkReply::abort);\n  }\n}\n</code></pre>\n\n<p>To minimize CPU usage I have tried to:</p>\n\n<ul>\n<li>read net_reply in <code>ReadyRead</code> signal with/without buffer,</li>\n<li>read net_reply only without save to file,</li>\n<li>read net_reply with <code>read</code> function and <code>readAll</code> function,</li>\n<li>use Callgrind and perf profiler in QtCreator - but both showing me high costs at not my code (eg.: q_SSL_read, __tpstrtab_dax_pte_fault_done)</li>\n</ul>\n\n<p>Any advises or maybe these CPU usages are normal when downloading files by HTTPS?</p>\n"}, {"tags": ["c++", "boost", "lexical-cast"], "comments": [{"owner": {"reputation": 748, "user_id": 5835431, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7b4b4de71c3ae7cdc87459fc2b67833b?s=128&d=identicon&r=PG&f=1", "display_name": "Deedee Megadoodoo", "link": "https://stackoverflow.com/users/5835431/deedee-megadoodoo"}, "edited": false, "score": 0, "creation_date": 1556711869, "post_id": 55935576, "comment_id": 98524298, "body": "You probably could use <code>boost::conversion::try_lexical_convert</code> function to of avoid throwing <code>bad_lexical_cast</code> exception."}], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 3, "creation_date": 1556712104, "post_id": 55935882, "comment_id": 98524393, "body": "I always get <code>bad_weather_cast</code> whenever I go outside."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1556712236, "post_id": 55935882, "comment_id": 98524449, "body": "@SombreroChicken Switch to <code>overcast</code> for expected behaviour"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1556712387, "post_id": 55935882, "comment_id": 98524511, "body": "Since there is a <code>catch</code>, adding <code>noexcept</code> specifier to the function can make the calling code smaller/faster."}, {"owner": {"reputation": 733, "user_id": 101039, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/88oCA.png?s=128&g=1", "display_name": "JPhi1618", "link": "https://stackoverflow.com/users/101039/jphi1618"}, "edited": false, "score": 0, "creation_date": 1556736466, "post_id": 55935882, "comment_id": 98535471, "body": "Indeed, looking at the boost source where <code>bad_lexical_cast</code> is an expected result as in the file <code>lexical_cast_empty_input_test.cpp</code> - when converting to a string an empty string is expected.  Couldn&#39;t find an instance of to-string conversion throwing."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 10, "last_activity_date": 1556715448, "last_edit_date": 1556715448, "creation_date": 1556711775, "answer_id": 55935882, "question_id": 55935576, "link": "https://stackoverflow.com/questions/55935576/when-does-boostlexical-cast-to-stdstring-fail/55935882#55935882", "title": "When does boost::lexical_cast to std::string fail?", "body": "<p>I can't think of any reason for lexical cast to string to throw <code>bad_lexical_cast</code>, except with user-defined types. If the <code>ValueType</code> stream insertion operator can set an error flag on the stream then that's going to result in a <code>bad_lexical_cast</code>. Otherwise, not.</p>\n\n<p>Personally I'd keep the <code>catch</code> in, even if you're just converting built-ins like <code>int</code>s; it doesn't hurt, and may catch bugs if you change the <code>lexical_cast</code> in some manner, or if there's some edge case that neither you nor I has considered; if you're not handling the resulting exception, you'll get an abort at runtime!</p>\n\n<p>If you're concerned about the overhead of an exception, you can use <a href=\"https://www.boost.org/doc/libs/1_70_0/doc/html/boost_lexical_cast/synopsis.html#boost_lexical_cast.synopsis.try_lexical_convert\" rel=\"noreferrer\"><code>try_lexical_cast</code></a> instead and check that it returns <code>true</code> rather than catching. However, if the <code>ValueType</code> stream insertion operator can throw then you'd still need to be able to catch that exception anyway.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556715530, "post_id": 55936096, "comment_id": 98525906, "body": "Not valid syntax"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1556780222, "post_id": 55936096, "comment_id": 98546852, "body": "true, it was mostly the concept i was aiming at."}], "tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": false, "score": 1, "last_activity_date": 1556789440, "last_edit_date": 1556789440, "creation_date": 1556712772, "answer_id": 55936096, "question_id": 55935576, "link": "https://stackoverflow.com/questions/55935576/when-does-boostlexical-cast-to-stdstring-fail/55936096#55936096", "title": "When does boost::lexical_cast to std::string fail?", "body": "<p>The only safe and <strong>futureproof</strong> (eg. no nasty surprises after an update of <a href=\"/questions/tagged/boost\" class=\"post-tag\" title=\"show questions tagged &#39;boost&#39;\" rel=\"tag\">boost</a>) is to impair your code with something (ugly) like this:</p>\n\n<pre><code>template&lt;typename ValueType&gt;\nstd::string ConvertToStringUsingBoost(ValueType const&amp; v)\n{\n    try \n    {\n\n#ifdef UNITTEST\n      if (unittest == case_fail) {\n        throw boost::bad_lexical_cast();\n      }\n#endif\n        return boost::lexical_cast&lt;std::string, ValueType&gt;(v);\n    }\n    catch(boost::bad_lexical_cast const&amp; e)\n    {\n        LOG_ERR(\"Fail to cast %s to string\", e.source_type().name);\n        return std::string();\n    }\n}\n</code></pre>\n\n<p>Now you should be able to get to that ~100% code coverage !</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1556715265, "post_id": 55936223, "comment_id": 98525786, "body": "mmm I read the question as being about bad_lexical_cast specifically but this is a good point"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1556780166, "post_id": 55936223, "comment_id": 98546824, "body": "In the OPs code, he specificly only catches <code>boost::bad_lexical_cast</code>"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1556784770, "post_id": 55936223, "comment_id": 98549010, "body": "@darune Question title and description are generic though: &quot;when boost::lexical_cast to std::string can throw an exception&quot;. OP didn&#39;t ask when it can throw <code>boost::bad_lexical_cast</code>. A code sample only accompanies a question and it can be wrong."}], "tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": true, "score": 7, "last_activity_date": 1556713390, "creation_date": 1556713390, "answer_id": 55936223, "question_id": 55935576, "link": "https://stackoverflow.com/questions/55935576/when-does-boostlexical-cast-to-stdstring-fail/55936223#55936223", "title": "When does boost::lexical_cast to std::string fail?", "body": "<p>It can fail for example if a <strong>user-defined</strong> conversion throws:</p>\n\n<pre><code>enum class MyType {};\n\nstd::ostream&amp; operator&lt;&lt;( std::ostream&amp;, MyType const&amp; )\n{\n    throw \"error\";\n}\n\nint main()\n{\n    try \n    {\n        boost::lexical_cast&lt; std::string &gt;( MyType{} );\n    }\n    catch(...)\n    {\n        std::cout &lt;&lt; \"lexical_cast exception\";\n    }\n}\n</code></pre>\n\n<p>As you have no control about the type of exceptions thrown by user-defined conversions, catching <code>boost::bad_lexical_cast</code> won't even be enough. Your unit test has to catch all exceptions.</p>\n\n<p><a href=\"https://wandbox.org/permlink/a9T5A3vmgc201nv2\" rel=\"noreferrer\"><strong>Live Demo</strong></a></p>\n"}], "owner": {"reputation": 167, "user_id": 6361537, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-IQ8bt_bPPlE/AAAAAAAAAAI/AAAAAAAAABI/37pRDRZFI9g/photo.jpg?sz=128", "display_name": "Grigorii Alekseev", "link": "https://stackoverflow.com/users/6361537/grigorii-alekseev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1338, "favorite_count": 0, "accepted_answer_id": 55936223, "answer_count": 3, "score": 9, "last_activity_date": 1556789440, "creation_date": 1556710242, "last_edit_date": 1556738486, "question_id": 55935576, "link": "https://stackoverflow.com/questions/55935576/when-does-boostlexical-cast-to-stdstring-fail", "title": "When does boost::lexical_cast to std::string fail?", "body": "<p>I'm writing unit tests and trying to have all my code covered.</p>\n\n<p>I have in my code something like this:</p>\n\n<pre><code>template&lt;typename ValueType&gt;\nstd::string ConvertToStringUsingBoost(ValueType const&amp; v)\n{\n    try \n    {\n        return boost::lexical_cast&lt;std::string, ValueType&gt;(v);\n    }\n    catch(boost::bad_lexical_cast const&amp; e)\n    {\n        LOG_ERR(\"Fail to cast %s to string\", e.source_type().name);\n        return std::string();\n    }\n}\n</code></pre>\n\n<p>I was reading <a href=\"https://www.boost.org/doc/libs/1_55_0/doc/html/boost_lexical_cast/\" rel=\"nofollow noreferrer\">these docs</a> and couldn't find any information about when <code>boost::lexical_cast</code> to <code>std::string</code> can throw an exception.</p>\n\n<p>Can you please help me with that?</p>\n\n<p>If it's impossible I'll simply delete this try-catch. If it's possible, I'd prefer to cover this in unit testing.</p>\n"}, {"tags": ["c++", "stringstream"], "comments": [{"owner": {"reputation": 27055, "user_id": 5923139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dvoYw.png?s=128&g=1", "display_name": "Aplet123", "link": "https://stackoverflow.com/users/5923139/aplet123"}, "edited": false, "score": 2, "creation_date": 1556710623, "post_id": 55935554, "comment_id": 98523806, "body": "Is <a href=\"https://stackoverflow.com/a/20792/5923139\">this answer</a> of any help?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1556710868, "post_id": 55935554, "comment_id": 98523903, "body": "<code>ss &lt;&lt; line;</code> <b><i>adds</i></b> to the string stream."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1556711515, "post_id": 55935554, "comment_id": 98524150, "body": "And the <a href=\"https://en.cppreference.com/w/cpp/io/basic_ios/clear\" rel=\"nofollow noreferrer\"><code>clear</code></a> function doesn&#39;t do what you might think it does."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1556723892, "creation_date": 1556723892, "answer_id": 55938529, "question_id": 55935554, "link": "https://stackoverflow.com/questions/55935554/extra-character-from-stringstream-to-string-in-c/55938529#55938529", "title": "Extra character from StringStream to String in C++", "body": "<p><code>ss.clear()</code> does not clear the existing content of the stream, like you are expecting. It resets the stream's error state instead. You need to use the <code>str()</code> method to replace the existing content:</p>\n\n<pre><code>while (getline(cin, line)) {\n    ss.str(line);\n    ss.clear();\n    ss &gt;&gt; word;\n    cout &lt;&lt; word &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Otherwise, simply create a new stream on each iteration:</p>\n\n<pre><code>while (getline(cin, line)) {\n    istringstream iss(line);\n    iss &gt;&gt; word;\n    cout &lt;&lt; word &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 340, "user_id": 3761305, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7qKk0.jpg?s=128&g=1", "display_name": "Ahsan Tarique", "link": "https://stackoverflow.com/users/3761305/ahsan-tarique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "closed_date": 1556723923, "accepted_answer_id": 55938529, "answer_count": 1, "score": 3, "last_activity_date": 1556770287, "creation_date": 1556710121, "last_edit_date": 1556770287, "question_id": 55935554, "link": "https://stackoverflow.com/questions/55935554/extra-character-from-stringstream-to-string-in-c", "closed_reason": "Duplicate", "title": "Extra character from StringStream to String in C++", "body": "<p>I was writing a code in C++ 11 that would read some lines and print the first word of each line. I decided to use getline and stringstream.</p>\n\n<pre><code>string line, word;\n\nstringstream ss;\n\nwhile(somecondition){\n    getline(cin, line);\n    ss &lt;&lt; line;\n    ss &gt;&gt; word;\n\n    cout &lt;&lt; word &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I tried testing this piece of code with the following input:</p>\n\n<pre><code>a x\nb y\nc z\n</code></pre>\n\n<p>The expected output would be:</p>\n\n<pre><code>a\nb\nc\n</code></pre>\n\n<p>But the actual output is:</p>\n\n<pre><code>a\nxb\nyc\n</code></pre>\n\n<p>Could someone please explain why this is happening?</p>\n\n<p>Things I have tried:</p>\n\n<ol>\n<li><p><code>ss.clear();</code> inside the while loop</p></li>\n<li><p>initializing the strings to empty inside the while loop: <code>word = \"\";</code></p></li>\n</ol>\n\n<p>Nothing seems to work, and all produce the same output.</p>\n\n<ol start=\"3\">\n<li>However, when I declared the <code>stringstream ss;</code> inside the while loop, it worked perfectly.</li>\n</ol>\n\n<p>I would be very glad if someone could explain why putting the stringstream declaration outside the while loop may cause the occurance of extra character.</p>\n\n<p>Also I used <code>g++</code> compiler with <code>--std=c++11</code>.</p>\n"}, {"tags": ["c++", "data-structures", "runtime"], "answers": [{"comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1556715492, "post_id": 55936066, "comment_id": 98525888, "body": "Good point.  Not related, but for the same reason, in <code>bullpgia::SmartGuesser::All()</code>  there should be a <code>AllPoss.reserve(pow(10,length));</code> in order to avoid that the array is moved several time due to its growth."}, {"owner": {"reputation": 6556, "user_id": 874660, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/45a7738c334183bff552bcf73c4dcd65?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/874660/ben"}, "reply_to_user": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1556715662, "post_id": 55936066, "comment_id": 98525964, "body": "Sure, but that\u2019s not a big-O improvement since <code>push_back</code> is amortized O(1)."}, {"owner": {"reputation": 53, "user_id": 9848852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/795542a2713277d0a492fb86b0af40a6?s=128&d=identicon&r=PG&f=1", "display_name": "Escaban", "link": "https://stackoverflow.com/users/9848852/escaban"}, "edited": false, "score": 0, "creation_date": 1556729706, "post_id": 55936066, "comment_id": 98532583, "body": "i tried to implement this part in my code but the linker went mad for it (pic) <a href=\"https://www.photobox.co.uk/my/photo/full?photo_id=501831081680\" rel=\"nofollow noreferrer\">photobox.co.uk/my/photo/full?photo_id=501831081680</a> thank you for the help!"}, {"owner": {"reputation": 53, "user_id": 9848852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/795542a2713277d0a492fb86b0af40a6?s=128&d=identicon&r=PG&f=1", "display_name": "Escaban", "link": "https://stackoverflow.com/users/9848852/escaban"}, "edited": false, "score": 0, "creation_date": 1556731725, "post_id": 55936066, "comment_id": 98533412, "body": "@Ben what if i use a list will that improve my O(n^3) or some other data structure?"}, {"owner": {"reputation": 6556, "user_id": 874660, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/45a7738c334183bff552bcf73c4dcd65?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/874660/ben"}, "edited": false, "score": 1, "creation_date": 1556765154, "post_id": 55936066, "comment_id": 98542818, "body": "I can\u2019t see that link. My suggestions shouldn\u2019t affect linking because they are all header-only libraries. As for <code>std::list</code>, that should work too although my approach will be faster (but the same big O)."}], "tags": [], "owner": {"reputation": 6556, "user_id": 874660, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/45a7738c334183bff552bcf73c4dcd65?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/874660/ben"}, "is_accepted": true, "score": 3, "last_activity_date": 1556715258, "last_edit_date": 1556715258, "creation_date": 1556712617, "answer_id": 55936066, "question_id": 55935496, "link": "https://stackoverflow.com/questions/55935496/looking-for-a-faster-way-to-help-reduce-create-a-huge-list-of-strings/55936066#55936066", "title": "looking for a faster way to help reduce/create a huge list of strings", "body": "<p>Erasing a single element in the middle of a vector is O(n). My guess is that you wind up doing it O(n) times per call to <code>SmartGuesser::remove</code>. Then you loop over that so you probably have a O(n^3) algorithm. You instead could use <code>std::remove_if</code>, which is O(n), to move all the to-be-erased elements to the end of the vector where they can be cheaply erased.:</p>\n\n<pre><code>AllPoss.erase(std::remove_if(AllPos.begin(), AllPos.end(), [&amp;](const std::string&amp; token, const std::string&amp; guess) { return calculateBullAndPgia(token, guess) != answer; }), AllPos.end());\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 9848852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/795542a2713277d0a492fb86b0af40a6?s=128&d=identicon&r=PG&f=1", "display_name": "Escaban", "link": "https://stackoverflow.com/users/9848852/escaban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 55936066, "answer_count": 1, "score": 2, "last_activity_date": 1556715258, "creation_date": 1556709886, "last_edit_date": 1556711852, "question_id": 55935496, "link": "https://stackoverflow.com/questions/55935496/looking-for-a-faster-way-to-help-reduce-create-a-huge-list-of-strings", "title": "looking for a faster way to help reduce/create a huge list of strings", "body": "<p>I tried to write an algorithm to guess correctly in the game \"Masterminds\",<br>\nit works the average number of guesses is 6, but it takes a lot of time to calculate the best guess.</p>\n\n<p>I used the idea of Knuth the algorithm works as follows:</p>\n\n<blockquote>\n  <ol>\n  <li>Create the set S of 1296 possible codes (1111, 1112 ... 6665, 6666).</li>\n  <li>Start with initial guess 1122 (Knuth gives examples showing that other first guesses such as 1123, 1234 do not win in five tries on\n  every code).</li>\n  <li>Play the guess to get a response of colored and white pegs.</li>\n  <li>If the response is four colored pegs, the game is won, the algorithm     terminates.</li>\n  <li>Otherwise, remove from S any code that would not give the same response if the current guess were the code.</li>\n  </ol>\n</blockquote>\n\n<p>In my code step 2 is to take random number.</p>\n\n<p>I used <code>vector&lt;string&gt;</code> for this.</p>\n\n<p><code>AllPoss</code> is the vector full of strings, I guess is the last guess that was used. <code>answer</code> is the count of bulls and cows looks like \"x,y\" (where x and y are numbers)</p>\n\n<pre><code>void bullpgia::SmartGuesser::remove(string guess, string answer)\n{\n    for (auto i= AllPoss.begin();i != AllPoss.end();i++){\n        string token = *i;\n        if (calculateBullAndPgia(token, guess) != answer)\n        AllPoss.erase(i--);\n    }\n}\n</code></pre>\n\n<p>this is the part it take a lot of time to calculate is there any way of improvement?</p>\n\n<p>to creating the list i used :</p>\n\n<pre><code>void bullpgia::SmartGuesser::All() {\n    /**\n     * creates a pool of all the possibilities strings\n     * we then delete the ones we dont need\n     * @param length is the length of the word we need to guess\n     */\n    for(int i=0;i&lt;pow(10,length);i++){\n        stringstream ss;\n        ss &lt;&lt; setw(length) &lt;&lt; setfill('0') &lt;&lt; i;\n        string s = ss.str();\n        AllPoss.push_back(s);\n    }\n}\n</code></pre>\n\n<p>the function calculateBullAndPgia(string , string) is:</p>\n\n<pre><code>string calculateBullAndPgia(const string &amp;choice, const string &amp;guess) {\n    string temp = choice;\n    string temp2 = guess;\n    unsigned int bull = 0;\n    unsigned int pgia = 0;\n    for (int i = 0; i &lt; temp.length(); i++) {\n        if (temp[i] == temp2[i]) {\n            bull++;\n            temp[i] = 'a';\n            temp2[i] = 'z';\n        }\n    }\n    for (int i = 0; i &lt; temp.length(); i++) {\n        for (int j = 0; j &lt; temp2.length(); j++) {\n            if (i != j &amp;&amp; temp[i] == temp2[j]) {\n                pgia++;\n                temp[i] = 'a';\n                temp2[j] = 'z';\n            }\n        }\n    }\n    return to_string(bull) + \",\" + to_string(pgia);\n}\n</code></pre>\n"}, {"tags": ["c++", "function", "vector", "stdvector", "strtok"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1556709895, "post_id": 55935459, "comment_id": 98523518, "body": "You&#39;re calling <code>strtok</code> on a temporary string - all the pointers inside your vector end up dangling after the <code>return</code>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 4, "creation_date": 1556710001, "post_id": 55935459, "comment_id": 98523561, "body": "Use a <code>std::vector&lt;std::string&gt;</code> so all the undefined behaviour goes away."}, {"owner": {"reputation": 43, "user_id": 11428003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae280adc06035217659b91e03222e6b2?s=128&d=identicon&r=PG&f=1", "display_name": "yrmy", "link": "https://stackoverflow.com/users/11428003/yrmy"}, "edited": false, "score": 0, "creation_date": 1556710571, "post_id": 55935459, "comment_id": 98523784, "body": "Thank you for pointing that one out, UnholySheep. I fixed the program with this on my mind."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1556725995, "post_id": 55935459, "comment_id": 98531002, "body": "<a href=\"https://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\"><code>c_str()</code></a> returns a <code>const char *</code>, and writing to this pointer is Undefined Behavior."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 11428003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae280adc06035217659b91e03222e6b2?s=128&d=identicon&r=PG&f=1", "display_name": "yrmy", "link": "https://stackoverflow.com/users/11428003/yrmy"}, "edited": false, "score": 0, "creation_date": 1556710636, "post_id": 55935589, "comment_id": 98523811, "body": "Thank you, but sorry, I forgot to mention in the initial post that I do prefer having the output as char* as opposed to std::string because this code will be used a lot with old C functions. I already fixed the program with UnholySheep&#39;s suggestion."}, {"owner": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "edited": false, "score": 1, "creation_date": 1556719465, "post_id": 55935589, "comment_id": 98527702, "body": "That doesn&#39;t preclude using a vector of std::string.  Just call .c_str() when you want to pass it to C functions."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": true, "score": 3, "last_activity_date": 1556710295, "creation_date": 1556710295, "answer_id": 55935589, "question_id": 55935459, "link": "https://stackoverflow.com/questions/55935459/missing-elements-when-returning-a-stdvector/55935589#55935589", "title": "Missing elements when returning a std::vector", "body": "<p>You don't want to be using raw pointers like <code>char*</code>, use <code>std::string</code> instead.</p>\n\n<p>Something like:</p>\n\n<pre><code>std::vector&lt;std::string&gt; tokenize(std::string input_, const std:string delims=\" \\t\\r\\n\\a\")\n{\n    std::string input = input_;\n    std::vector&lt;std::string&gt; tk_stream;\n    // ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 762, "user_id": 1987633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7cc5084e895540051a920e541ab9b8c?s=128&d=identicon&r=PG", "display_name": "Andre Kostur", "link": "https://stackoverflow.com/users/1987633/andre-kostur"}, "is_accepted": false, "score": 1, "last_activity_date": 1556719325, "creation_date": 1556719325, "answer_id": 55937507, "question_id": 55935459, "link": "https://stackoverflow.com/questions/55935459/missing-elements-when-returning-a-stdvector/55937507#55937507", "title": "Missing elements when returning a std::vector", "body": "<p>You're passing your string by value into your tokenize function.  You then call c_str() on that local string object and store pointers into that space into your vector.  Your function then returns, and with it the storage in the local string object.  Which now means that all of the pointers that you've stored into the vector are now all dangling pointers.  Deferencing any of them is Undefined Behaviour.</p>\n\n<p>It \"appears to work\" for short strings (likely string &lt; 16 characters long) due to something called the Short String Optimization.  Many implementations of std::string has a small buffer (a common size is 16 bytes, but it is not defined by Standard) inside the std::string object itself.  Once the string gets longer than that, std::string will dynamically allocate a buffer to hold the string.  When you use the short string, your dangling pointers are pointing into your stack, and your data has not yet been overwritten there.  When you use a long string, your pointers are pointing into some arbitrary place in memory, which may have been overwritten by something else.</p>\n\n<p>Oh, to fix, pass your std::string by reference: <code>const std::string &amp; input_</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 11428003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ae280adc06035217659b91e03222e6b2?s=128&d=identicon&r=PG&f=1", "display_name": "yrmy", "link": "https://stackoverflow.com/users/11428003/yrmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 0, "accepted_answer_id": 55935589, "answer_count": 2, "score": 4, "last_activity_date": 1556719325, "creation_date": 1556709725, "question_id": 55935459, "link": "https://stackoverflow.com/questions/55935459/missing-elements-when-returning-a-stdvector", "title": "Missing elements when returning a std::vector", "body": "<p>I am writing a function in C++ which should, in theory, take user input and splice this input into segments according to whitespace and return these segments as a vector.  </p>\n\n<p>What I am currently doing is by using strtok() on the input string in order to separate the words by whitespace. For each \"word\", I push it on the buffer vector. After iterating over each word, I return the vector.</p>\n\n<p>So this is the code I have thus far:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstring&gt;\n#include &lt;vector&gt;\n\nstd::vector&lt;char*&gt; tokenize(std::string input_, char const* delims=\" \\t\\r\\n\\a\")\n{\n    char* input = (char*)input_.c_str();\n    std::vector&lt;char*&gt; tk_stream;\n    char* tk = strtok(input, delims);\n\n    while(tk != NULL) {\n        tk_stream.push_back(tk);\n        tk = strtok(NULL, delims);\n    }\n\n    return tk_stream;\n}\n\nint main(int argc, char** argv)\n{\n    while (true) {\n        std::string input;\n        std::getline(std::cin, input);\n\n        if (input.empty()) {\n            continue;\n        }\n\n        std::vector&lt;char*&gt; tks = tokenize(input);\n        for (char* el : tks) {\n            std::cout &lt;&lt; el &lt;&lt; std::endl;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>So what is supposed to happen? well, if I have an input of \"1 2 3 4\" it should print each of those numbers on separate lines. This actually works with that input. But when the length of the input string is greater, for example, \"1 2 3 4 5 6 7 8 9\", the output is different:</p>\n\n<pre><code>1 2 3 4 5 6 7 8 9\n\n\n\n\n5 \n6 \n7 \n8 \n9\n</code></pre>\n\n<p>It is missing the first 4 numbers! This also happens for any string with a greater length above this and the number of missing numbers is constant. I also noticed this happens with longers sentences. For example \"hello everyone this is a test\" gives:</p>\n\n<pre><code>hello everyone this is a test\n0\ufffd\ufffd\n\nthis\nis\na\ntest\n</code></pre>\n\n<p>I have already done some digging with gdb and found something that is interesting. With the input of \"1 2 3 4 5 6 7 8 9\", I set up a breakpoint before the 'tk_stream' is returned and checked the value of it:</p>\n\n<pre><code>(gdb) print tk_stream\n$1 = std::vector of length 9, capacity 16 = {0x6176c0 \"1\", 0x6176c2 \"2\", 0x6176c4 \"3\", 0x6176c6 \"4\", 0x6176c8 \"5\", 0x6176ca \"6\", 0x6176cc \"7\", 0x6176ce \"8\", 0x6176d0 \"9\"}\n</code></pre>\n\n<p>This seems correct. But after I step a few lines when this is returned from the function and check the value of 'tks' (the vector which should contain the returned value of the 'tokenize' function); I receive this:</p>\n\n<pre><code>(gdb) print tks\n$2 = std::vector of length 9, capacity 16 = {0x6176c0 \"\", 0x6176c2 \"a\", 0x6176c4 \"\", 0x6176c6 \"\", 0x6176c8 \"5\", 0x6176ca \"6\", 0x6176cc \"7\", 0x6176ce \"8\", 0x6176d0 \"9\"}\n</code></pre>\n\n<p>which is missing the first 4 entries with a garbled 2nd entry. </p>\n\n<p>So something must happen in the returning of the 'tk_stream' vector. </p>\n\n<p>What is the reason for this abnormal behavior? How can I fix this so no elements of the vector are deleted?</p>\n"}, {"tags": ["c++", "visual-studio", "parallel-processing", "openmp", "intel"], "comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1556709536, "post_id": 55935147, "comment_id": 98523396, "body": "Whats wrong with this answer: <a href=\"https://stackoverflow.com/a/26038269/2261538\">stackoverflow.com/a/26038269/2261538</a> ?"}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1556711288, "post_id": 55935147, "comment_id": 98524053, "body": "Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and describe how you compile it, the system you execute it on, how you measure performance, and the specific performance results."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1556756026, "post_id": 55935147, "comment_id": 98541292, "body": "If you&#39;re <i>modifying</i> two <code>Cluster</code> objects in the same cache line from different threads, that will create false sharing (cache-line ping pong).  But if all the shared / nearby data is read-only, you should be fine for performance.  As long as you don&#39;t modify the container itself, you should also be fine for correctness; it&#39;s not a thread-safe container, but modifying e.g. 2 adjacent elements of a <code>char[]</code> array from different threads is always fine according to C++11"}, {"owner": {"reputation": 11, "user_id": 8912585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8c878e9ff5e5cd5ac5e102883bdde?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Reddy", "link": "https://stackoverflow.com/users/8912585/abhinav-reddy"}, "edited": false, "score": 0, "creation_date": 1557241630, "post_id": 55935147, "comment_id": 98694844, "body": "Update: My initial suspicion was right. The problem is with visual studio. The code runs about 3 times faster in parallel as compared to serial on a GCC compiler in Linux whereas there is hardly any difference in Visual Studio"}], "answers": [{"tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": false, "score": 0, "last_activity_date": 1556710121, "last_edit_date": 1556710121, "creation_date": 1556709810, "answer_id": 55935482, "question_id": 55935147, "link": "https://stackoverflow.com/questions/55935147/correct-way-to-parallelise-for-loops-on-openmp-on-visual-studio-when-parallel-th/55935482#55935482", "title": "Correct way to parallelise for loops on OpenMP on Visual Studio when parallel threads access a different member of the same data structure?", "body": "<p>You could just restructure the code into using a container that supports random access:</p>\n\n<pre><code>std::unordered_map &lt;int, Cluster*&gt; cluster_map;\nwhile(true)\n{\n\n   std::vector&lt; std::pair&lt;int, Cluster*&gt; &gt; cluster_vec(cluster_map.begin(), cluster_map.end());\n   #pragma omp parallel for\n   for(int i = 0; i &lt; cluster_vec.size(); ++i)\n   {\n     //Computations involving the current cluster\n   }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8912585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c8c878e9ff5e5cd5ac5e102883bdde?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Reddy", "link": "https://stackoverflow.com/users/8912585/abhinav-reddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556710121, "creation_date": 1556708235, "question_id": 55935147, "link": "https://stackoverflow.com/questions/55935147/correct-way-to-parallelise-for-loops-on-openmp-on-visual-studio-when-parallel-th", "title": "Correct way to parallelise for loops on OpenMP on Visual Studio when parallel threads access a different member of the same data structure?", "body": "<p>I have written a computationally intensive program that is running serially on an ordinary terminal, but is taking about 30 s per iteration of my loop. I decided to run my code with OpenMP on Visual Studio with the Intel Compiler to parallelise the for loops in it.<br/>\nFirstly, the same serial code that takes 30s per iteration is taking 600s per iteration on Visual Studio with the Intel Compiler as compared to the ordinary G++ compiler on a normal terminal.<br/>\nSecondly, even on implementing parallel for loops, the code takes approximately the same time to perform one iteration. I have attached a simplistic version of the code below.  <br/>\nI am worried about race conditions as the parallelised loops access the same unordered map and read and write from it, but no two threads ever access the same element.  <br/></p>\n\n<p>I've tried using both solutions mentioned in this SO thread, buckets for the unordered map as well as using #pragma omp task. Both give me similar times of execution. <a href=\"https://stackoverflow.com/questions/26034642/openmp-gnu-parallel-for-an-unordered-map\">OpenMP/__gnu_parallel for an unordered_map</a>  </p>\n\n<pre><code>unordered_map &lt;int, Cluster*&gt; cluster_map;\nwhile(true)\n{\n   #pragma omp parallel\n   {\n      #pragma omp for schedule(dynamic, bc/4)\n      for (unsigned b = 0; b&lt;bc; ++b)\n      {\n     for (auto c = clusters.begin(b); c != clusters.end(b); ++c)\n     {\n         //Computations involving the current cluster\n         }\n      }\n   }\n}\n</code></pre>\n\n<p>Overall I'm guessing the issue is with Visual Studio, but since I'm new to OpenMP it could also be with my code. My project properties are set to use the Intel Compiler and OpenMP Support is enabled.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1556707761, "post_id": 55935015, "comment_id": 98522737, "body": "Why should it? The leading 0 is not relevant to the number"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1556707761, "post_id": 55935015, "comment_id": 98522738, "body": "Integers don&#39;t have leading zeroes."}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1556708350, "post_id": 55935015, "comment_id": 98522925, "body": "@KamilCuk That&#39;s the wrong question to ask, the real question is &quot;Is the <i>base 10 numerical value of the string</i> <code>&quot;000123&quot;</code> greater, equal to or lower then the number <code>123</code>?&quot;. <code>000123</code> is 83 because it&#39;s octal, <code>&quot;000123&quot;</code> represents <code>123</code> in decimal though"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 10371985, "user_type": "registered", "profile_image": "https://graph.facebook.com/989576324459526/picture?type=large", "display_name": "Sushmita Mallick", "link": "https://stackoverflow.com/users/10371985/sushmita-mallick"}, "is_accepted": false, "score": 3, "last_activity_date": 1557208431, "last_edit_date": 1557208431, "creation_date": 1556708132, "answer_id": 55935119, "question_id": 55935015, "link": "https://stackoverflow.com/questions/55935015/why-doesnt-this-function-print-all-the-char-array-as-it-takes-it/55935119#55935119", "title": "Why doesn&#39;t this function print all the char array as it takes it?", "body": "<p>I think inside the atoi function you have typecasted the string to integer because of which the 0 gets removed. You can never get a 0 printed before a number since it doesn't make sense.\n000001 will always be represented as 1.\nI hope this clears your doubt.</p>\n"}, {"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1556708264, "creation_date": 1556708264, "answer_id": 55935150, "question_id": 55935015, "link": "https://stackoverflow.com/questions/55935015/why-doesnt-this-function-print-all-the-char-array-as-it-takes-it/55935150#55935150", "title": "Why doesn&#39;t this function print all the char array as it takes it?", "body": "<p>Binary number representations (such as <code>int</code>) do not store leading 0s because there is an infinite number of them. Rather they store a fixed number of bits which may have some leading 0 bits.</p>\n\n<p>You can still print the leading 0s if necessary:</p>\n\n<pre><code>std::cout &lt;&lt; std::setw(4) &lt;&lt; std::setfill('0') &lt;&lt; 1 &lt;&lt; '\\n';\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0001\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1556711600, "last_edit_date": 1556711600, "creation_date": 1556710065, "answer_id": 55935537, "question_id": 55935015, "link": "https://stackoverflow.com/questions/55935015/why-doesnt-this-function-print-all-the-char-array-as-it-takes-it/55935537#55935537", "title": "Why doesn&#39;t this function print all the char array as it takes it?", "body": "<p>You're confusing two ideas:</p>\n\n<p><strong>Numbers:</strong> These are abstract things. They're quantities. Your computer stores the number in a manner that you should not care about (though it's probably binary).</p>\n\n<p><strong>Representations:</strong> These are ways we display numbers to humans, like <em>\"150234\"</em>, or <em>\"0x24ADA\"</em>, or <em>\"one hundred and fifty thousand, two hundred and thirty four\"</em>. You pick a representation when you convert to a string. When streaming to <code>std::cout</code> a representation is picked for you by default, but you can choose your own representation using I/O manipulators, as <a href=\"https://stackoverflow.com/a/55935150/560648\">Maxim shows</a>.</p>\n\n<p>The variable <code>num</code> is a <em>number</em>, not a representation of a number. It does not contain the information <em>&laquo;display this as \"0150234\"&raquo;</em>. That's what <code>arr</code> provides, because it is a string, containing a representation of a number. So, if that leading zero in the original representation is important to you, when you print <code>num</code>, you have to reproduce that representation yourself.</p>\n\n<hr>\n\n<h3>By the way&hellip;</h3>\n\n<p><em>Usually</em>, in the programming world, and particularly in C-like source code:</p>\n\n<ul>\n<li>When we see a string like <em>\"150234\"</em> we assume that it is the decimal (base-10) representation of a number;</li>\n<li>When we see a string like <em>\"0x24ADA\"</em> (with a leading <code>0x</code>) we assume that it is the hexadecimal (base-16) representation of a number;</li>\n<li>When we see a string like <em>\"0150234\"</em> (with a leading <code>0</code>) we assume that it is the octal (base-8) representation of a number.</li>\n</ul>\n\n<p>So, if you do add a leading zero, you may confuse your users.</p>\n\n<p>FYI the conventional base-8 representation of your number is <em>\"0445332\"</em>.</p>\n"}], "owner": {"reputation": 1, "user_id": 9560780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deceae4f34bd68aaa7cd57900bdf0f95?s=128&d=identicon&r=PG&f=1", "display_name": "Maria Emil", "link": "https://stackoverflow.com/users/9560780/maria-emil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1557208431, "creation_date": 1556707679, "question_id": 55935015, "link": "https://stackoverflow.com/questions/55935015/why-doesnt-this-function-print-all-the-char-array-as-it-takes-it", "title": "Why doesn&#39;t this function print all the char array as it takes it?", "body": "<p>i was trying to convert from a char array to integers and the atoi function is working properly except when i put a zero in the first index...it didn't print it</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    char arr[]= \"0150234\";\n    int num;\n    num=atoi(arr);\n    cout &lt;&lt; num;\n    return 0;\n}\n</code></pre>\n\n<p>I expect the output of 0150234 but the actual output is 150234</p>\n"}, {"tags": ["c++", "c++11", "stl"], "comments": [{"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 2, "creation_date": 1556709199, "post_id": 55934965, "comment_id": 98523260, "body": "Modifying an <code>std::vector</code> invalidates all iterators into that vector. Thus, you cannot modify <code>nonterminals_</code> while iterating over it via a range-based for loop (which just maps to a normal for loop from <code>.begin()</code> to <code>.end()</code>). The same thing is true for <code>productions_[nonterminal]</code> which is a vector as well. What exactly are you trying to achieve here? This looks like it should completely be rewritten in a more readable form\u2026"}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1556709407, "post_id": 55934965, "comment_id": 98523337, "body": "And based on what logic exactly should elements be removed and added?"}], "answers": [{"tags": [], "owner": {"reputation": 1178, "user_id": 11385808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/321f8b770bfd0099048493cebba39edd?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/11385808/dmitry"}, "is_accepted": false, "score": 1, "last_activity_date": 1556716081, "last_edit_date": 1556716081, "creation_date": 1556714624, "answer_id": 55936497, "question_id": 55934965, "link": "https://stackoverflow.com/questions/55934965/unordered-map-acts-strange-when-i-add-a-new-element/55936497#55936497", "title": "Unordered_map acts strange when I add a new element", "body": "<p>problem with the iterator <code>productionNonterm</code> and it's getting invalidated during the loop:</p>\n\n<p>once you start your loop</p>\n\n<pre><code>    for (auto prod : productions_[*productionNonterm])\n        productions_[nonterminal].push_back(prod);\n</code></pre>\n\n<p>you'll get into with with a valid iterator (<code>productionNonterm</code>) pointing to a one (first) element in the <code>productions_[nonterminal]</code>.</p>\n\n<p>but after loop's body gets executed the first time - vector <code>productions_[nonterminal]</code> will reallocate its elements (due to growing) and your pointer (iterator) will be invalidated...</p>\n"}, {"tags": [], "owner": {"reputation": 6924, "user_id": 14143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7fb64856eda5af7f46b4996ab8fd37b?s=128&d=identicon&r=PG", "display_name": "simon", "link": "https://stackoverflow.com/users/14143/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1556740745, "last_edit_date": 1556740745, "creation_date": 1556740001, "answer_id": 55941835, "question_id": 55934965, "link": "https://stackoverflow.com/questions/55934965/unordered-map-acts-strange-when-i-add-a-new-element/55941835#55941835", "title": "Unordered_map acts strange when I add a new element", "body": "<p>It is tricky modifying a collection while iterating it, and usually not worth the overhead to support it in the container.  In this case (vector) you are invalidating the iterator (i.e. a pointer to vector storage) as soon as the vector re-allocates when you grow it.  </p>\n\n<p>Have a look at <a href=\"http://www.cplusplus.com/reference/vector/vector/push_back/\" rel=\"nofollow noreferrer\">vector::push_back</a>, particularly the discussion of iterator validity.</p>\n\n<p>In practice you can avoid this particular problem by sizing the vector but there are also issues keeping track of where you are putting new elements relative to the iterator, etc.  In general it leads to difficult-to-follow code, even when it is correct (or worse, looks it but has subtle issues).</p>\n\n<p>I suggest you rewrite to a two-pass approach, collect up the elements to add or remove in one pass, then remove them etc.  Unless you have very good (and measured!) performance reasons to not do this, it's going to be easier to understand and maintain.  Recall that vector::erase can take a range.</p>\n\n<p>It's also worth asking: does order matter here?  Should you be using std::unordered_set, in which case you wouldn't have this particular problem.</p>\n\n<p>See what you think of that approach before \"fixing\" this one.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9236635"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1556740745, "creation_date": 1556707386, "question_id": 55934965, "link": "https://stackoverflow.com/questions/55934965/unordered-map-acts-strange-when-i-add-a-new-element", "title": "Unordered_map acts strange when I add a new element", "body": "<p>This lines are not working properly:</p>\n\n<pre><code>for (auto prod : productions_[*productionNonterm])\n                productions_[nonterminal].push_back(prod);\n</code></pre>\n\n<p>If productions_[*productionNonterm] has only 1 element, everything is good. But if it has at least 2 elements, productionNonterm is modified and I have no idea why.</p>\n\n<pre><code>vector&lt;string&gt; nonterminals_;\nunordered_map&lt;string, vector&lt;string&gt;&gt; productions_;\n\nfor (const auto &amp;nonterminal : nonterminals_) {\n    for (auto productionNonterm = productions_[nonterminal].begin(); productionNonterm != productions_[nonterminal].end(); ++productionNonterm) {\n        if (cntNonterminalsInProduction(*productionNonterm) == 1 &amp;&amp; cntTerminalsInProduction(*productionNonterm) == 0) {\n            nonterminals_.erase(find(nonterminals_.begin(), nonterminals_.end(), *productionNonterm));\n\n            for (auto prod : productions_[*productionNonterm])\n                productions_[nonterminal].push_back(prod);\n\n            productions_[*productionNonterm].erase(productions_[*productionNonterm].begin(), productions_[*productionNonterm].end());\n\n            productions_[nonterminal].erase(productionNonterm);\n            --productionNonterm;\n\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "visual-studio-2015", "visual-studio-2013", "variadic-templates"], "answers": [{"comments": [{"owner": {"reputation": 388, "user_id": 7862129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb28f831b8bce590615e7adfd8d1c70d?s=128&d=identicon&r=PG&f=1", "display_name": "PVRT", "link": "https://stackoverflow.com/users/7862129/pvrt"}, "edited": false, "score": 0, "creation_date": 1556732618, "post_id": 55936557, "comment_id": 98533848, "body": "Thank you for the answer. You are correct, the code doesn&#39;t compile. I will update my sample code too."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 388, "user_id": 7862129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb28f831b8bce590615e7adfd8d1c70d?s=128&d=identicon&r=PG&f=1", "display_name": "PVRT", "link": "https://stackoverflow.com/users/7862129/pvrt"}, "edited": false, "score": 0, "creation_date": 1556733015, "post_id": 55936557, "comment_id": 98534066, "body": "@PVRT - and with correction you get the error about <code>sizeof...(Args)</code> evaluated 1?"}, {"owner": {"reputation": 388, "user_id": 7862129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb28f831b8bce590615e7adfd8d1c70d?s=128&d=identicon&r=PG&f=1", "display_name": "PVRT", "link": "https://stackoverflow.com/users/7862129/pvrt"}, "edited": false, "score": 0, "creation_date": 1556733434, "post_id": 55936557, "comment_id": 98534266, "body": "Yes. Still the same error. From the second error message posted in the question you can see, the compiler is trying to specialize print() for N==1."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1556715763, "last_edit_date": 1556715763, "creation_date": 1556714949, "answer_id": 55936557, "question_id": 55934868, "link": "https://stackoverflow.com/questions/55934868/variadic-template-with-explicit-arguments-and-sizeof-visual-studio-2013/55936557#55936557", "title": "Variadic template with explicit arguments and sizeof... Visual Studio 2013", "body": "<blockquote>\n  <p>Could anyone please explain me why sizeof...(Args) was deduced to 1, even though a tuple with 3 arguments have been passed? </p>\n</blockquote>\n\n<p>I can't.</p>\n\n<p>Maybe a compiler bug?</p>\n\n<p>Or an inadequate C++11 support?</p>\n\n<blockquote>\n  <p>Also why is this an error in VS2013 and not on VS2015?</p>\n</blockquote>\n\n<p>I don't understand how can VS2015 compile your code because there is an error: your <code>print()</code> and <code>printTuple()</code> functions are receiving a <strong>not-const</strong> l-value reference but you call <code>printTuple()</code> in <code>main()</code></p>\n\n<pre><code>printTuples(std::make_tuple(1, 2.,3.));\n</code></pre>\n\n<p>with a r-value (that is incompatible with a not-const l-value reference).</p>\n\n<p>Suggestion: modify your functions to receive a <strong>const</strong> l-value reference</p>\n\n<pre><code>template &lt;std::size_t N, typename ...Args&gt;\ntypename std::enable_if&lt;N == sizeof...(Args)&gt;::type\n   print (std::tuple&lt;Args...&gt; const &amp; tuples)\n { } // ......................^^^^^\n\ntemplate &lt;std::size_t N, typename ...Args&gt;\ntypename std::enable_if&lt;(N &lt; sizeof...(Args))&gt;::type\n   print (std::tuple&lt;Args...&gt; const &amp; tuples)\n { // ........................^^^^^\n   std::cout &lt;&lt; std::get&lt;N&gt;(tuples);\n   print&lt;N + 1u&gt;(tuples);\n }\n\ntemplate &lt;typename ...Args&gt;\nvoid printTuples (std::tuple&lt;Args...&gt; const &amp; tuples)\n { print&lt;0u&gt;(tuples); } // ...........^^^^^\n</code></pre>\n"}], "owner": {"reputation": 388, "user_id": 7862129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb28f831b8bce590615e7adfd8d1c70d?s=128&d=identicon&r=PG&f=1", "display_name": "PVRT", "link": "https://stackoverflow.com/users/7862129/pvrt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1556732708, "creation_date": 1556706836, "last_edit_date": 1556732708, "question_id": 55934868, "link": "https://stackoverflow.com/questions/55934868/variadic-template-with-explicit-arguments-and-sizeof-visual-studio-2013", "title": "Variadic template with explicit arguments and sizeof... Visual Studio 2013", "body": "<p>I was trying to enumerate a variadic tuple, so that i can perform certain operations on each of its elements.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;utility&gt;\n\ntemplate &lt;size_t N, typename ...Args&gt;\ntypename std::enable_if&lt;N == sizeof...(Args), void&gt;::type\nprint(std::tuple&lt;Args...&gt; const&amp; tuples)\n{ }\n\ntemplate &lt;size_t N, typename ...Args&gt;\ntypename std::enable_if&lt;(N &lt; sizeof...(Args)), void&gt;::type\nprint(std::tuple&lt;Args...&gt; const&amp; tuples)\n{\n    std::cout &lt;&lt; std::get&lt;N&gt;(tuples);\n    print&lt;N + 1&gt;(tuples);\n}\n\ntemplate &lt;typename ...Args&gt;\nvoid printTuples(std::tuple&lt;Args...&gt; const&amp; tuples)\n{\n    print&lt;0&gt;(tuples);\n}\n\nint main(int argc, char** argv)\n{\n    printTuples(std::make_tuple(1, 2.,3.));\n    return 0;\n}\n</code></pre>\n\n<p>In visual studio 2013 this results in following error:</p>\n\n<pre><code>1&gt;main.cpp(15): error C2770: invalid explicit template argument(s) for 'std::enable_if&lt;N&lt;1,void&gt;::type print(std::tuple&lt;_Types1...&gt; &amp;)'\n1&gt;main.cpp(15): error C2893: Failed to specialize function template 'std::enable_if&lt;N==1,void&gt;::type print(std::tuple&lt;_Types1...&gt; &amp;)'\n</code></pre>\n\n<p>This compiles fine in VS2015.\nCould anyone please explain me why sizeof...(Args) was deduced to 1, even though a tuple with 3 arguments have been passed?\nAlso why is this an error in VS2013 and not on VS2015?</p>\n\n<p>Note: I built a work-around (for VS2013) by enumerating the tuple backwards (starting at the end)</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1556708178, "post_id": 55934775, "comment_id": 98522863, "body": "Usually by standard escape sequence i.e <i>backslash</i> \\"}], "answers": [{"tags": [], "owner": {"reputation": 3447, "user_id": 4297146, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/Zl9y3.jpg?s=128&g=1", "display_name": "mohabouje", "link": "https://stackoverflow.com/users/4297146/mohabouje"}, "is_accepted": false, "score": 0, "last_activity_date": 1556709424, "creation_date": 1556709424, "answer_id": 55935403, "question_id": 55934775, "link": "https://stackoverflow.com/questions/55934775/how-to-properly-escape-single-and-double-quotes-in-qt/55935403#55935403", "title": "How to properly escape single and double quotes in QT?", "body": "<p>Escape the quotes with backslashes:</p>\n\n<pre><code>const auto example = QString(\"He said \\\"awesome\\\"\");\nqDebug() &lt;&lt; example;\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>He said: \"awesome\"\n</code></pre>\n\n<p>The same applies to a single quote. See this <a href=\"http://gillius.org/ctut/app_a.htm\" rel=\"nofollow noreferrer\">table</a> for more details.</p>\n\n<p>If you are using C++11, you can use raw <a href=\"https://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">string literals</a>:</p>\n\n<pre><code>const auto example = R\"He said \"awesome\"\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14632, "user_id": 399908, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/56ea829e87b7772e36a35782dde9fb94?s=128&d=identicon&r=PG", "display_name": "Martin Hennings", "link": "https://stackoverflow.com/users/399908/martin-hennings"}, "is_accepted": false, "score": 0, "last_activity_date": 1557135301, "last_edit_date": 1557135301, "creation_date": 1557134346, "answer_id": 56002213, "question_id": 55934775, "link": "https://stackoverflow.com/questions/55934775/how-to-properly-escape-single-and-double-quotes-in-qt/56002213#56002213", "title": "How to properly escape single and double quotes in QT?", "body": "<p>You only need to escape to prevent a premature end of your string.</p>\n\n<p>So in regular double quoted strings you only need to escape the backslash (always), double quote (and the newline):</p>\n\n<pre><code>QString str = \"A string with a \\\\ backslask, \\\"double\\\" and 'single' quotes\";\n\n// stackoverflow's code highlighting isn't sophisticated enough for this:\nQString str = \"A string \\\nspanning two code lines\";\n</code></pre>\n\n<p>In C++ single quotes always represent a single char, so the only time you need to escape a single quote is if you mean the <em>character</em>:</p>\n\n<pre><code>char singleQuote = '\\'';\n</code></pre>\n"}], "owner": {"reputation": 577, "user_id": 5184406, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b8e0dc1a1eafdd911e28df622f4f0375?s=128&d=identicon&r=PG&f=1", "display_name": "CodeZila", "link": "https://stackoverflow.com/users/5184406/codezila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1673, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1557135301, "creation_date": 1556706185, "last_edit_date": 1556710623, "question_id": 55934775, "link": "https://stackoverflow.com/questions/55934775/how-to-properly-escape-single-and-double-quotes-in-qt", "title": "How to properly escape single and double quotes in QT?", "body": "<p>I am trying to customize the scrollbar in QT as below:</p>\n\n<pre><code>const QString name = \"scrollbarIssue\";\nfloat btn_dimension = 8;\nQString source = \"::-webkit-scrollbar-button {height:\"+ QString::number(btn_dimension) +\"px; background: black; display: block;}\"\n                       \"::-webkit-scrollbar-button:vertical:decrement { background-image: url(\\\"data:image/svg+xml;utf8,&lt;svg xmlns=''http://www.w3.org/2000/svg'' width=''\"+ QString::number(btn_dimension) +\"'' height=''\"+ QString::number(btn_dimension) +\"'' fill=''%235a6268''&gt;&lt;polygon points=''0,50 100,50 50,0''/&gt;&lt;/svg&gt;\\\"); }\"\n                       \"::-webkit-scrollbar-button:vertical:increment { background-image: url(\\\"data:image/svg+xml;utf8,&lt;svg xmlns=''http://www.w3.org/2000/svg'' width=''\"+ QString::number(btn_dimension) +\"'' height=''\"+ QString::number(btn_dimension) +\"'' fill=''%235a6268''&gt;&lt;polygon points=''0,0 100,0 50,50''/&gt;&lt;/svg&gt;\\\"); }\";\n\n\nQString myFuncStr = \"(function() {\"\n            \"    css = document.createElement('style');\"\n            \"    css.type = 'text/css';\"\n            \"    css.id = '\" + name + \"';\"\n            \"    document.head.appendChild(css);\"\n            \"    css.innerText = \"+ '\"'+ source +'\"' + \";\"\n            \"})()\";\n</code></pre>\n\n<p>In <strong>source</strong> variable, I escaped single quote by using two single quotes and I think this might be causing issue.</p>\n\n<p><strong>myFuncStr</strong> contains the value:</p>\n\n<pre><code>\"(function() {    css = document.createElement('style');    css.type = 'text/css';    css.id = 'scrollbarIssue';    document.head.appendChild(css);    css.innerText = \\\"::-webkit-scrollbar-button {height:8px; background: black; display: block;}::-webkit-scrollbar-button:vertical:decrement { background-image: url(\\\"data:image/svg+xml;utf8,&lt;svg xmlns=''http://www.w3.org/2000/svg'' width=''8'' height=''8'' fill=''%235a6268''&gt;&lt;polygon points=''0,50 100,50 50,0''/&gt;&lt;/svg&gt;\\\"); }::-webkit-scrollbar-button:vertical:increment { background-image: url(\\\"data:image/svg+xml;utf8,&lt;svg xmlns=''http://www.w3.org/2000/svg'' width=''8'' height=''8'' fill=''%235a6268''&gt;&lt;polygon points=''0,0 100,0 50,50''/&gt;&lt;/svg&gt;\\\"); }\\\";})()\"\n</code></pre>\n\n<p>So, if the function inside the string above is run in browser console, it give below error: </p>\n\n<blockquote>\n  <p>Uncaught SyntaxError: Invalid or unexpected token</p>\n</blockquote>\n\n<p>Can anyone please help how to properly escape the single/double quotes in QT C++?</p>\n"}, {"tags": ["c++", "linux", "ssh"], "comments": [{"owner": {"reputation": 1178, "user_id": 11385808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/321f8b770bfd0099048493cebba39edd?s=128&d=identicon&r=PG", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/11385808/dmitry"}, "edited": false, "score": 0, "creation_date": 1556705838, "post_id": 55934403, "comment_id": 98522031, "body": "Not enough privilege for the closing command? try setting root&#39;s setuid to your closing command"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8240565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa45a98a78d60395671b364104cd5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Neodym", "link": "https://stackoverflow.com/users/8240565/neodym"}, "is_accepted": true, "score": 0, "last_activity_date": 1556715619, "creation_date": 1556715619, "answer_id": 55936679, "question_id": 55934403, "link": "https://stackoverflow.com/questions/55934403/execute-ssh-command-with-system/55936679#55936679", "title": "Execute ssh command with system()", "body": "<p>Found the problem. It looks that i have to use a  tmpfs path for the  Control Path....\nI changed the configuration to:</p>\n\n<pre><code>Host sshService\n    HostName www.addressOfServer.com\n    User sshUser\n    ControlPersist 4h\n    ControlPath /tmp/sshService.ctl\n    IdentityFile /home/user/sshUser\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8240565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa45a98a78d60395671b364104cd5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Neodym", "link": "https://stackoverflow.com/users/8240565/neodym"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 55936679, "answer_count": 1, "score": 0, "last_activity_date": 1556715619, "creation_date": 1556704144, "question_id": 55934403, "link": "https://stackoverflow.com/questions/55934403/execute-ssh-command-with-system", "title": "Execute ssh command with system()", "body": "<p>I have a C++ application (under linux) which open a ssh reverse tunnel. This works well. But i have some trouble to close the connection. \nThe close command will work like it should when i start the application from the command line, but when i start the application from a cron job in background, the connection will not be closed.</p>\n\n<p>Here my code:</p>\n\n<p>Open connection:</p>\n\n<pre><code>std::string cmd = \"ssh -o StrictHostKeyChecking=no -f -N -T -M -R 8003:192.168.0.1:8001 -R 8007:192.168.0.1:8005 -R 22222:localhost:22 sshService\";\nsystem(cmd.c_str());\n</code></pre>\n\n<p>To close the connection i use:</p>\n\n<pre><code>std::string cmd = \"ssh -T -O exit sshService\";\nsystem(cmd.c_str());\n</code></pre>\n\n<p>My host configuration is:</p>\n\n<pre><code>Host sshService\n    HostName www.addressOfServer.com\n    User sshUser\n    ControlPersist 4h\n    ControlPath ~/.ssh/sshService.ctl\n    IdentityFile /home/user/sshUser\n</code></pre>\n\n<p>Are there some ideas, what i make wrong? Or some ideas how i can find out the problem?</p>\n"}, {"tags": ["c++", "std-function", "stdbind"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1556704805, "post_id": 55934396, "comment_id": 98521657, "body": "&quot;I need to know the type of the return from <code>std::bind()</code> in order to pass as a parameter to <code>action_widgets()</code>&quot; but you&#39;re not passing any type information to <code>action_widgets</code>. And please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1556705230, "post_id": 55934396, "comment_id": 98521799, "body": "Sorry I don&#39;t understand your point. This is a MCVE, though I will add <code>main()</code> if that helps. The fourth parameter of <code>action_widgets()</code> is the bound function. This doesn&#39;t compile because the type I&#39;m currently using, <code>WidgetActionWrapper</code> does not match what <code>std::bind()</code> is returning. I need to understand what it&#39;s returning so I can alter the type of the 4th parameter accordingly."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1556706582, "post_id": 55934396, "comment_id": 98522291, "body": "Use lambdas instead of <code>std::bind</code>. With that said, you&#39;re only passing one placeholder to bind, so the function object you get out will have the signature <code>bool(int)</code> and then you try to call (and pass) it with all four parameters."}], "answers": [{"tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": true, "score": 3, "last_activity_date": 1556706965, "creation_date": 1556706965, "answer_id": 55934886, "question_id": 55934396, "link": "https://stackoverflow.com/questions/55934396/c-binding-overloaded-member-function-and-passing-as-parameter/55934886#55934886", "title": "C++ binding overloaded member function and passing as parameter", "body": "<p>You can think of <code>std::bind</code> as taking off the first few arguments when you assign to a <code>std::function</code>.</p>\n\n<p>For example, this:</p>\n\n<pre><code>bool(Processor::*)(const std::string&amp;, bool, bool);\n\n// Which is this:\nclass Processor { bool f(const std::string&amp;, bool, bool); }\ndecltype(&amp;Processor::f)\n</code></pre>\n\n<p>is assigned to a <code>std::function&lt;bool(Processor&amp;, const std::string&amp;, bool, bool)&gt;</code>.</p>\n\n<p>When you bind it to a <code>Processor&amp;</code> (in your case, <code>*this</code>, like <code>std::bind(&amp;Processor::f, *this)</code>), it should now be assigned to a <code>std::function&lt;bool(const std::string&amp;, bool, bool)&gt;</code> (Because the <code>bind</code> gets rid of the <code>Processor&amp;</code> argument).</p>\n\n<p>There are two fixes here. Don't bind:</p>\n\n<pre><code>WidgetActionWrapper func =\n    std::bind(static_cast&lt;WidgetActionFunction&gt;(&amp;Processor::start_widget),\n              *this, std::placeholders::_1, a, b); // compilation fails here.\n// becomes\nWidgetActionWrapper func = &amp;Processor::start_widget;\n</code></pre>\n\n<p>Or change <code>WidgetActionWrapper</code> to be correct after binding:</p>\n\n<pre><code>// *this and the two bool parameters have been bound, so you only need a string to call\nusing WidgetActionWrapper = std::function&lt;bool(const std::string&amp;)&gt;;\n// (And then `func(*this, widget, a, b)` to `func(widget)`)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1556707749, "post_id": 55934922, "comment_id": 98522733, "body": "Using the template argument to pass a lambda would make the code less verbose. Do you think that would be worse for performance? I don&#39;t."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1556707811, "post_id": 55934922, "comment_id": 98522752, "body": "@super performance would almost certainly be exactly the same. I&#39;m not sure how exactly it would be less verbose, however\u2026"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1556707911, "post_id": 55934922, "comment_id": 98522784, "body": "You could remove <code>a</code> and <code>b</code> completely, and <code>bool (Processor::* func)(const std::string&amp;, bool, bool)</code> =&gt; <code>typename F</code>."}, {"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1556708110, "post_id": 55934922, "comment_id": 98522842, "body": "@super well, you could do that indeed. This would then allow basically anything to be used in <code>action_widgets</code>, not just suitable methods of <code>Processor</code>. I&#39;m not sure whether that would still align with the intended purpose or not. If that&#39;s fine, it&#39;s probably an even better approach. I find the whole construction of this <code>Processor</code> class rather strange to be honest. Once we get to a point where <code>action_widgets</code> should work with any arbitrary callable, I think we do have to start asking the question of why this is a method of a class rather than just a generic algorithm to begin with\u2026"}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 4, "last_activity_date": 1556707473, "last_edit_date": 1556707473, "creation_date": 1556707167, "answer_id": 55934922, "question_id": 55934396, "link": "https://stackoverflow.com/questions/55934396/c-binding-overloaded-member-function-and-passing-as-parameter/55934922#55934922", "title": "C++ binding overloaded member function and passing as parameter", "body": "<p>I don't think there is a need here for lambdas or <code>std::bind</code>, and especially not <code>std::function</code> and all the overhead it would introduce. You could simply use a member function template that is given a pointer to the actual member function to call on each widget as a template argument, for example:</p>\n\n<pre><code>struct Processor\n{\n    bool stop_widget(const std::string&amp; key, bool a, bool b) { return true; }\n    bool start_widget(const std::string&amp; key, bool a, bool b) { return true; }\n\n    bool stop_widget(int event, bool a, bool b) { return true; }\n    bool start_widget(int event, bool a, bool b) { return true; }\n\n    template &lt;bool (Processor::* func)(const std::string&amp;, bool, bool)&gt;\n    void action_widgets(std::vector&lt;std::string&gt;&amp; widgets, bool a, bool b)\n    {\n        std::vector&lt;std::string&gt; valid_widgets;\n        valid_widgets.reserve(widgets.size());\n        for (const auto&amp; widget : widgets)\n        {\n            if ((this-&gt;*func)(widget, a, b))\n            {\n                valid_widgets.push_back(widget);\n            }\n        }\n        std::swap(widgets, valid_widgets);\n    }\n};\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>processor.action_widgets&lt;&amp;Processor::start_widget&gt;(widgets, true, false);\nprocessor.action_widgets&lt;&amp;Processor::stop_widget&gt;(widgets, true, false);\n</code></pre>\n\n<p><a href=\"https://godbolt.org/#z:OYLghAFBqd5TKALEBjA9gEwKYFFMCWALugE4A0BIEAViAIzkA2AhgHaioCkATAEK8%2B5AM7oArqVTYQAcl4BmAm1RMxOANRd5AYWFFSS4FtxcADAEEFSlWuyadAN2yoSpY2cs9Fy1Rq3aAMzFlIgJ0NhYmdwsPPVIxF3UABVJ0KWFRNxiAdgELdQL1ACN0dCZ1PXQABwB9AHcCTGBsIggMNj0KokwQEDjDXgA2dQBrbABPcmLS8pYpkrLigEpNXPVSFok2dX0xbC0%2BVYARD0Lpxb0WUiJ6xubW9s69Hr79AZ5hscnz2fmZ5dWhw2RC2O3i%2B3khy42ROMXyhQW5UqtQaTRaECURHU2CcbCIf0Wcx%2BAOhQM2pG2uwhUJhpwR/0u11uaNamOxuPxxKJiJJa2BoKpB2OHjpBSI2AAtlVWOL7NoeRAUmlsBkyL0AFTqILKJZtcJPbq9focIYEphmpbRcxnBzoRrqFguMJsZn3YQQZ69JwuMj%2BT2vAwm%2BQmD7qVFus0OyNFS3wgqk0VnLovb2uP2GgMDYPqByRRqulrCA6Jm15zAFojCAB0G2E2FITgg4cLVeEBAAXtgIEtLZCS4UAmR1HqOliWGISEMw3cWuoQNOWcJY9ak/Hcv3VwQAsOIEQkARhABaYzq7WoXXNzncnsbpMJuOrx%2B5pj5y/VqpiYRIGpFR0jJszkQvZ5Cuj6FNCsKgXetIPmc/rCHULBVABi5TM%2Br6AUuxYPhBIq0n2cLmGyEosEo3Z4SBZxKukmTqFU2FQf6qa%2Bjo8FvEGuALm6DGJlUVaOqE4QVkWOhDNRKqZEaRBXDcl7GChEZgnsUwBJEdbASKD78hS6imDxMIyEszCyAArDI5BsLIpjmegsjaIIggVOIkh2Ao9DmUQVmGUZIwgIMAAsVbyKYACc8jZDw/n0KF8gmSZ2TGTI/nmRKfkmUF2QABwhaYpj%2Bf58WDCZXgWV55C2TI5nCCApjkJ5MjWUZcCwCg4hEB%2B%2BJUHqUoEEw9YMOQ2CEK4A11KQSGyO5RlMKZ5mWQ1NmyG5057uoAAemWDIeAXqCo7DAMOuxsCMSweV5PbkEg2AsDgpDUNNsjJeQqXyIFgw8NFIUhXF/leP52QJfN1nlbIVU1XV50%2BX5gXBWFEVRTFcUJTNMjyHNZUVWdC1NYgEAoBgPV9RQXUE1UvX9XtHA1EdIzkAEvXiqQ1UQEUZVFEoVzjJN5kExK2B4gA8mwTBcwt5A4CRHB9WVhAbE6TjVWL2Brc4E7SDI7mUHi2Ao8DL5FONpDjNoWDq5rbypRrhnMPtaAOfwzAEEU1WQEZ1SCR0siHs8WhHNw/CCPQ2TqIeAtoyIzlSAwD0yGZpVixVG1bTtlMHbu8THSsED4MQQ5uVMJuE/WmhePQKz2QH/BY41UOxVWgw5e92QmdlpgBfliVPal0W1UDi2VSI4P1TXiU8OjCegxD2NGU4TPOiA/lAA%3D%3D%3D\" rel=\"nofollow noreferrer\">live example here</a></p>\n\n<p>This will basically just cause the compiler to generate your original <code>start_widgets</code> and <code>stop_widgets</code> functions for you, just as if you had written them by hand, no additional runtime overhead. Since the template argument asks for the function of the proper type, the compiler should correctly figure out which of the overloaded functions to use&hellip;</p>\n"}], "owner": {"reputation": 9631, "user_id": 258009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1ccdf76b2fb6a2c5e3c64e686b092ff0?s=128&d=identicon&r=PG", "display_name": "Component 10", "link": "https://stackoverflow.com/users/258009/component-10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 55934886, "answer_count": 2, "score": 2, "last_activity_date": 1556707473, "creation_date": 1556704105, "last_edit_date": 1556705315, "question_id": 55934396, "link": "https://stackoverflow.com/questions/55934396/c-binding-overloaded-member-function-and-passing-as-parameter", "title": "C++ binding overloaded member function and passing as parameter", "body": "<p>I have a class with two functions which start and stop a collection of things. As the two functions are identical except that they ultimately call a start or stop function on each thing respectively, I would like to refactor the code so that I move the body of the code to general function and my start and stop collections call this passing in an extra parameter which is a the function they must call to start or stop.</p>\n\n<p>Naturally, there are lots of <code>std::bind()</code> tutorials and examples online, but I have not found any article or question/answer here that covers <em>all</em> the following specific constraints that I face:</p>\n\n<ul>\n<li>The function being bound is a member which complicates things; it is also non-const</li>\n<li>The function being bound is also overloaded so must be distinguished properly</li>\n<li>Most of the <code>std::bind()</code> examples use <code>auto</code> but in this case I need to know the type of the return from <code>std::bind()</code> in order to pass as a parameter to <code>action_widgets()</code></li>\n<li>There are two bools, <code>a</code> &amp; <code>b</code>, which are effectively constant and could be bound into the function though I've not yet done that here. One thing at a time.</li>\n</ul>\n\n<p>Here's an example of what I'm trying to achieve:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;functional&gt;\n\nstruct Processor {\n\n    using WidgetActionFunction = bool(Processor::*)(const std::string&amp;,\n                                                    bool, bool);\n\n    // Function wrapper \n    using WidgetActionWrapper = std::function&lt;bool(Processor&amp;,\n                                                   const std::string&amp;, bool, bool)&gt;;\n\n    // These functions in reality are tied heavily to the class and are quite\n    // large. They cannot easily be made static or free.\n    bool stop_widget(const std::string&amp; key, bool a, bool b) { return true; }\n    bool start_widget(const std::string&amp; key, bool a, bool b) { return true; }\n\n    // Just to make life difficult, there are some overloads, which we're not\n    // interested in.\n    bool stop_widget(int event, bool a, bool b) { return true; }\n    bool start_widget(int event, bool a, bool b) { return true; }\n\n    // I created this function because start_widgets() and stop_widgets() were\n    // identical except that internally they call start_widget() and stop_widget()\n    // respectively. I want the main body of the code to be here and for the\n    // appropriate function to be passed in.\n    void action_widgets(std::vector&lt;std::string&gt;&amp; widgets,\n            bool a, bool b, WidgetActionWrapper&amp; func) {\n        std::vector&lt;std::string&gt; valid_widgets;\n        valid_widgets.reserve(widgets.size());\n        for (const auto&amp; widget : widgets) {\n            if (func(*this, widget, a, b)) {  // This is where func() gets invoked.\n                valid_widgets.push_back(widget);\n            }\n        }\n        std::swap(widgets, valid_widgets);\n    }\n\n    void start_widgets(std::vector&lt;std::string&gt;&amp; widgets, bool a, bool b) {\n        WidgetActionWrapper func =\n            std::bind(static_cast&lt;WidgetActionFunction&gt;(&amp;Processor::start_widget),\n                      this, std::placeholders::_1, a, b); // compilation fails here.\n        action_widgets(widgets, a, b, func);\n    }\n\n    void stop_widgets(std::vector&lt;std::string&gt;&amp; widgets, bool a, bool b) {\n        // Very similar to start_widgets() but calls with bound stop_widget()\n        // instead.\n    }\n};\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>When compiled I get the following error:</p>\n\n<pre><code>error: conversion from \u2018std::_Bind_helper&lt;false, bool (Processor::*)(const std::basic_string&lt;char&gt;&amp;, bool, bool), Processor* const, const std::_Placeholder&lt;1&gt;&amp;, bool&amp;, bool&amp;&gt;::type {aka std::_Bind&lt;std::_Mem_fn&lt;bool (Processor::*)(const std::basic_string&lt;char&gt;&amp;, bool, bool)&gt;(Processor*, std::_Placeholder&lt;1&gt;, bool, bool)&gt;}\u2019 to non-scalar type \u2018Processor::WidgetActionFunctor {aka std::function&lt;bool(Processor&amp;, const std::basic_string&lt;char&gt;&amp;, bool, bool)&gt;}\u2019 requested\n</code></pre>\n\n<p>So clearly, my function wrapper alias down't match what <code>std::bind()</code> is returning but where did I go wrong?</p>\n\n<p>One last caveat or two: Because this is for a corporate client, I am restricted to C++11 solutions (although solutions for the benefit of others are appreciated) and also, though I'm keen on a simpler solution using lambdas, I'm lead to believe by colleagues that this may be equally tricky and in any case, from a technical perspective, I'm keen to know what I've got wrong.</p>\n"}, {"tags": ["c++", "arrays", "math"], "comments": [{"owner": {"reputation": 8870, "user_id": 4206079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g2oZC.jpg?s=128&g=1", "display_name": "Banzay", "link": "https://stackoverflow.com/users/4206079/banzay"}, "edited": false, "score": 0, "creation_date": 1556704117, "post_id": 55934365, "comment_id": 98521415, "body": "Here: <code>cout &lt;&lt; &quot;thanks guys :) &lt;&lt;endl;</code> you missed closing double quotes"}, {"owner": {"reputation": 11, "user_id": 11436395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dbzXupJ-YVo/AAAAAAAAAAI/AAAAAAAAAqQ/9KfR1hltXO8/photo.jpg?sz=128", "display_name": "Tech Wz", "link": "https://stackoverflow.com/users/11436395/tech-wz"}, "reply_to_user": {"reputation": 8870, "user_id": 4206079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g2oZC.jpg?s=128&g=1", "display_name": "Banzay", "link": "https://stackoverflow.com/users/4206079/banzay"}, "edited": false, "score": 0, "creation_date": 1556704202, "post_id": 55934365, "comment_id": 98521442, "body": "Woops, i justed added that though, it isn&#39;t in my original code."}, {"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "edited": false, "score": 0, "creation_date": 1556704372, "post_id": 55934365, "comment_id": 98521503, "body": "Please post a compiling code snippet, otherwise it is hard to tell what is the issue. <code>tryAgain</code> is not defined in your code"}, {"owner": {"reputation": 11, "user_id": 11436395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dbzXupJ-YVo/AAAAAAAAAAI/AAAAAAAAAqQ/9KfR1hltXO8/photo.jpg?sz=128", "display_name": "Tech Wz", "link": "https://stackoverflow.com/users/11436395/tech-wz"}, "edited": false, "score": 0, "creation_date": 1556704892, "post_id": 55934365, "comment_id": 98521680, "body": "how do i do that? i&#39;ve fixed the second one, for the purposes of the question i changed the name to make more sense but forgot to replace all of them."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11436395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dbzXupJ-YVo/AAAAAAAAAAI/AAAAAAAAAqQ/9KfR1hltXO8/photo.jpg?sz=128", "display_name": "Tech Wz", "link": "https://stackoverflow.com/users/11436395/tech-wz"}, "edited": false, "score": 0, "creation_date": 1556704732, "post_id": 55934429, "comment_id": 98521639, "body": "How can i do that with a mix of integers and characters, as I need to receive input(a whole date) and add the two first digits."}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "reply_to_user": {"reputation": 11, "user_id": 11436395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dbzXupJ-YVo/AAAAAAAAAAI/AAAAAAAAAqQ/9KfR1hltXO8/photo.jpg?sz=128", "display_name": "Tech Wz", "link": "https://stackoverflow.com/users/11436395/tech-wz"}, "edited": false, "score": 0, "creation_date": 1556712296, "post_id": 55934429, "comment_id": 98524477, "body": "Mixing integers and characters is another topic, which is significantly different. You might want to ask a separate question for that. Make sure you describe exactly what you are trying to do and why, and what went wrong. See also <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "tags": [], "owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "is_accepted": false, "score": 1, "last_activity_date": 1556704303, "creation_date": 1556704303, "answer_id": 55934429, "question_id": 55934365, "link": "https://stackoverflow.com/questions/55934365/how-do-i-add-or-subtract-parts-of-an-array/55934429#55934429", "title": "How do I add or subtract parts of an array?", "body": "<p>Use <code>std::vector&lt;int&gt;</code> for an array of integers. I see that the code in the question uses <code>string</code>; this is incorrect - <code>string</code> is for strings of characters.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nstd::vector&lt;int&gt; firstArray = {3, 4, 42, 69};\n\nint main(){\n\n  std::cout &lt;&lt; firstArray[0] &lt;&lt; '\\n';\n  std::cout &lt;&lt; firstArray[1] &lt;&lt; '\\n';\n  firstArray[1] = firstArray[0]; //this works\n  std::cout &lt;&lt; firstArray[0] &lt;&lt; '\\n';\n  std::cout &lt;&lt; firstArray[1] &lt;&lt; '\\n';\n  firstArray[1] = firstArray[0] + firstArray[1]; //this works\n  std::cout &lt;&lt; firstArray[0] &lt;&lt; '\\n';\n  std::cout &lt;&lt; firstArray[1] &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 623, "user_id": 2491350, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/21b00afe3f3ab6235649f62a35132ac7?s=128&d=identicon&r=PG", "display_name": "SilverTear", "link": "https://stackoverflow.com/users/2491350/silvertear"}, "is_accepted": false, "score": 1, "last_activity_date": 1556705400, "creation_date": 1556705400, "answer_id": 55934630, "question_id": 55934365, "link": "https://stackoverflow.com/questions/55934365/how-do-i-add-or-subtract-parts-of-an-array/55934630#55934630", "title": "How do I add or subtract parts of an array?", "body": "<p>If you receive the input as a string you can convert the first 2 digits to integers and then add them up. </p>\n\n<pre><code>std::string str = \"00/00/00\";\n\nint n1 = std::stoi(str.substr(0, 1));\nint n2 = std::stoi(str.substr(1, 2));\n\nint s = n1 + n2;\n\nstd::cout &lt;&lt; s;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 6912992, "user_type": "registered", "profile_image": "https://graph.facebook.com/1206757472716647/picture?type=large", "display_name": "Afraz Salim", "link": "https://stackoverflow.com/users/6912992/afraz-salim"}, "is_accepted": false, "score": 1, "last_activity_date": 1556706113, "creation_date": 1556706113, "answer_id": 55934757, "question_id": 55934365, "link": "https://stackoverflow.com/questions/55934365/how-do-i-add-or-subtract-parts-of-an-array/55934757#55934757", "title": "How do I add or subtract parts of an array?", "body": "<p>Characters in C++ are internally represented as integers but those have range. I think the confusion for you is that if you write  integers in double quotes then you can't use that as integer rather you should think that it is a character. </p>\n\n<p>However,If you want to work with integers then you need an array of integers and if you want the input as strings then you have to parse those strings to make them integers.</p>\n\n<p>To do that you can use <code>stoi</code> to convert to integers and <code>stod</code> for converting them to double and both of these functions can be used by including <code>&lt;string&gt;</code> and the <code>namespace</code> <code>std</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 11436395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dbzXupJ-YVo/AAAAAAAAAAI/AAAAAAAAAqQ/9KfR1hltXO8/photo.jpg?sz=128", "display_name": "Tech Wz", "link": "https://stackoverflow.com/users/11436395/tech-wz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1556706113, "creation_date": 1556703899, "last_edit_date": 1556704877, "question_id": 55934365, "link": "https://stackoverflow.com/questions/55934365/how-do-i-add-or-subtract-parts-of-an-array", "title": "How do I add or subtract parts of an array?", "body": "<p>I've been trying to add the first integer in my array to the second, however all I keep getting is random letters. What do I do?</p>\n\n<p>I've tried.</p>\n\n<pre><code>firstArray[1] = firstArray[1] + firstArray[0];\n</code></pre>\n\n<pre><code>firstArray[1] = FirstArray[0];\n</code></pre>\n\n<p>This works fine but I can't seem to add or subtract the two numbers.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;vector&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n\nstring firstArray = {0,0, '/', 0, 0, '/', 0, 0};\nint main(){\n\n  cout &lt;&lt; firstArray &lt;&lt;endl;\n  firstArray[1] = firstArray[0]; //this works\n  cout &lt;&lt; firstArray &lt;&lt; endl;\n  cout &lt;&lt; firstArray &lt;&lt;endl;\n  firstArray[1] = firstArray[0] + firstArray[1]; //this is the bit that doesn't work\n    firstArray[1] = firstArray[1] + firstArray[0]; //neither does this\n\n  cout &lt;&lt; \"thanks guys :)\" &lt;&lt;endl;\n\n  return 0;\n}\n\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "is_accepted": false, "score": 5, "last_activity_date": 1556702710, "last_edit_date": 1556702710, "creation_date": 1556702053, "answer_id": 55933997, "question_id": 55933959, "link": "https://stackoverflow.com/questions/55933959/how-to-tell-which-derived-class-object-called-a-base-class-function/55933997#55933997", "title": "How to tell which derived class object called a base class function", "body": "<p>What you need is a <a href=\"https://en.cppreference.com/w/cpp/language/virtual\" rel=\"nofollow noreferrer\">virtual function</a> to override the behavior in each specific class. For example:</p>\n\n<pre><code>class Person\n{\npublic:\n    //pure virtual function, i.e a function that doesn't have an implementation\n    virtual int registrationFee() = 0;\n};\n\nclass Student : public Person\n{\npublic:\n    int registrationFee() override\n    {\n        //whatever logic implements this function\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11436267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a761734325153ed5b5630b68b545ac08?s=128&d=identicon&r=PG&f=1", "display_name": "xash", "link": "https://stackoverflow.com/users/11436267/xash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556702710, "creation_date": 1556701813, "question_id": 55933959, "link": "https://stackoverflow.com/questions/55933959/how-to-tell-which-derived-class-object-called-a-base-class-function", "title": "How to tell which derived class object called a base class function", "body": "<p>i have a base class called Person and 2 derived classes called Student and Teacher. the base class has a data member called RegistrationFee, which both derived classes use it. and there's a function in the base class which do something on this data member (registrationFee) but the task that the function does, depends on the type of the object that called the func. so i have to know that by which class object the function got called.\nsorry for bad english :)</p>\n"}, {"tags": ["c++", "oop", "inheritance"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1556701932, "post_id": 55933926, "comment_id": 98520605, "body": "If you want all the fields in the object, then how&#39;s that any different from just having the object? It seems like what you want is to assemble a string with those contents for easy printing."}], "answers": [{"tags": [], "owner": {"reputation": 1535, "user_id": 3713927, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Vy5vM.jpg?s=128&g=1", "display_name": "TuanDT", "link": "https://stackoverflow.com/users/3713927/tuandt"}, "is_accepted": false, "score": 3, "last_activity_date": 1556702654, "last_edit_date": 1556702654, "creation_date": 1556702357, "answer_id": 55934056, "question_id": 55933926, "link": "https://stackoverflow.com/questions/55933926/returning-different-types-of-variables/55934056#55934056", "title": "Returning different types of variables", "body": "<p>It looks like you only need to return a string as the output from the function <code>GetParameters</code>. Note that currently your return type is <code>void</code> (returns nothing).</p>\n\n<p>Example code:</p>\n\n<pre><code>std::string Text::GetParameters() {\n    std::string stringToReturn = \"\";\n    stringToReturn += \"Font = \" + font + \"\\n\";\n    stringToReturn += \"Size = \" + std::to_string(size) + \"\\n\";\n    // leave it to you to figure out the rest of the function\n    return stringToReturn;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1556702640, "creation_date": 1556702640, "answer_id": 55934116, "question_id": 55933926, "link": "https://stackoverflow.com/questions/55933926/returning-different-types-of-variables/55934116#55934116", "title": "Returning different types of variables", "body": "<p>Just print out the data members:</p>\n\n<pre><code>void Text::PrintText()\n{\n    cout &lt;&lt; \"font: \" &lt;&lt; font &lt;&lt; \", size: \" &lt;&lt; size &lt;&lt; \", color: \" &lt;&lt; color\n         &lt;&lt; \", data: \" &lt;&lt; data &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>If you want to access these members from non-member functions, then add public getter member functions:</p>\n\n<pre><code>class Text {\npublic:\n    // ...\n\n    const std::string&amp; getFont() const { return font; }\n    int getSize() const { return size; }\n    const std::string&amp; getColor() const { return color; }\n    const std::string&amp; getData() const { return data; }\n};\n</code></pre>\n\n<p>I recommend renaming the private member variables to clearly distinguish them from public members. A popular way is to just append an underscore to their name:</p>\n\n<pre><code>class Text {\n    // ...\n\nprivate:\n    std::string font_;\n    int size_;\n    std::string color_;\n    std::string data_;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 2, "last_activity_date": 1556702929, "creation_date": 1556702929, "answer_id": 55934178, "question_id": 55933926, "link": "https://stackoverflow.com/questions/55933926/returning-different-types-of-variables/55934178#55934178", "title": "Returning different types of variables", "body": "<p>The <code>std::string Text::GetParameters()</code> function is already covered by the other answers, but I'd like to point out a bug with your <code>void Text::SetText</code> implementation:</p>\n\n<pre><code>void Text::SetText(std::string font, int size,  std::string color, std::string data){\n    font = font;\n    size = size;\n    color = color;\n    data = data;\n}\n</code></pre>\n\n<p>This doesn't do anything because <code>font = font;</code> just sets the <code>font</code> parameter to what it already is, and likewise for the other parameters. Instead, try this:</p>\n\n<pre><code>void Text::SetText(std::string font, int size, std::string color, std::string data) {\n    this-&gt;font = font;\n    this-&gt;size = size;\n    this-&gt;color = color;\n    this-&gt;data = data;\n}\n</code></pre>\n\n<p>By saying <code>this-&gt;font</code> you are telling it that you don't mean the <code>font</code> parameter, but the <code>font</code> field of the object. Now it's correctly setting the fields to the respective parameters.</p>\n"}], "owner": {"reputation": 123, "user_id": 10798307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7880a2e807f2baed8c27cb5854139a?s=128&d=identicon&r=PG&f=1", "display_name": "B. Baxter", "link": "https://stackoverflow.com/users/10798307/b-baxter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 55934116, "answer_count": 3, "score": 2, "last_activity_date": 1556702929, "creation_date": 1556701666, "question_id": 55933926, "link": "https://stackoverflow.com/questions/55933926/returning-different-types-of-variables", "title": "Returning different types of variables", "body": "<p>Sorry if my title is a bit misleading, not sure how to summarize the issue Im having at this point.</p>\n\n<p>Basically my assignment is to use Inheritances.\nBut my issue at the moment is that Im not sure how to return int and strings in the same function to be displayed in another function.</p>\n\n<p>Below is the example, hope it makes more sense.</p>\n\n<p>I've tried using references, but clearly Im doing it wrong as Im unable to get it to work. </p>\n\n<p>Main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Text.h\"\n\nint main(){\n\n    Text text1;\n    text1.SetText(\"Arial\", 12, \"Black\", \"This is a sample text\"); //String, int, string, string\n    text1.PrintText();\n\n    return 0;\n}\n</code></pre>\n\n<p>Text.h:</p>\n\n<pre><code>#ifndef TEXT_H\n#define TEXT_H\n\nclass Text{\n\n    public:\n        Text();\n        void SetText(std::string font, int size,  std::string color, std::string data);\n        void GetParameters(); /*This is the problem area. I have setText that will set it, but how do I return these values to use in PrintText if it has different variable types?*/\n        void PrintText();\n\n    private:\n        std::string font;\n        int size;\n        std::string color;\n        std::string data;\n};\n\n#endif // TEXT_H \n</code></pre>\n\n<p>Text.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Text.h\"\n\nText::Text(){\n}\n\nvoid Text::SetText(std::string font, int size,  std::string color, std::string data){\n    font = font;\n    size = size;\n    color = color;\n    data = data;\n}\n\nvoid Text::GetParameters (){//Any pointers in this would be much appreciated.\n}\n\nvoid Text::PrintText(){\n    cout &lt;&lt;\"Text parameters are: \"  &lt;&lt;GetParameters() &lt;&lt;endl;//this is where Im trying to simply display the font, size, color and data values.\n}\n</code></pre>\n\n<p>Im sorry if its a bit lengthy, I wasnt sure how much to include to properly illustrate the issue Im having.</p>\n\n<p>The result Im trying to achieve is something very basic:</p>\n\n<pre><code>Text parameters are:\nFont = Arial\nSize = 12\nColor = Black\nData = This is a sample text\n</code></pre>\n\n<p>Worth mentioning that I cant use structs in this assignment.</p>\n"}, {"tags": ["c++", "vector", "addition"], "comments": [{"owner": {"reputation": 149, "user_id": 9150520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4086717739e671900fec134b0833b039?s=128&d=identicon&r=PG&f=1", "display_name": "eok", "link": "https://stackoverflow.com/users/9150520/eok"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1556701533, "post_id": 55933886, "comment_id": 98520482, "body": "I tried that also, but oddly enough that yields <code>3 3 2</code> instead of <code>2 3 3</code>"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1556701859, "post_id": 55933886, "comment_id": 98520583, "body": "Sorry, you&#39;d need to add to both the begin iterators."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1556706556, "post_id": 55933886, "comment_id": 98522281, "body": "How do you think your for loop is not optimal, ie. in what way do you want to make it better? Easier to understand for you later? Easier to understand for future developer reading your code? Just less code? More efficient after compiler optimizations?"}, {"owner": {"reputation": 149, "user_id": 9150520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4086717739e671900fec134b0833b039?s=128&d=identicon&r=PG&f=1", "display_name": "eok", "link": "https://stackoverflow.com/users/9150520/eok"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1556706689, "post_id": 55933886, "comment_id": 98522330, "body": "I don&#39;t know, I&#39;m not very familiar with C++ and I read one should use the <code>&lt;vector&gt;</code> library... not sure if that then includes using <code>transform</code> as well @hyde"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1556712686, "post_id": 55933886, "comment_id": 98524631, "body": "@eok It doesn&#39;t, the point of the std algorithms is that they&#39;re generic. They can use iterators of many different list types including but not limited to <code>std::vector</code>, <code>std::list</code>, <code>std::array</code> etc..."}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1556718244, "post_id": 55933886, "comment_id": 98527080, "body": "<code>bind2nd</code> is deprecated in C++11 and removed in C++17."}], "answers": [{"tags": [], "owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "is_accepted": true, "score": 2, "last_activity_date": 1556703318, "last_edit_date": 1556703318, "creation_date": 1556703001, "answer_id": 55934192, "question_id": 55933886, "link": "https://stackoverflow.com/questions/55933886/c-add-constant-to-slice-of-vector/55934192#55934192", "title": "C++ add constant to slice of vector", "body": "<p>Just the last <code>N</code> elements? Use a reverse iterator:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;vector&gt;\n\nint main() {\n  std::vector&lt;int&gt; a(3, 2);\n  std::transform(a.rbegin(), std::next(a.rbegin(), 2), a.rbegin(),\n                 [](auto n) { return n + 1; });\n\n  for (auto n : a) {\n    std::cout &lt;&lt; n &lt;&lt; '\\n';\n  }\n  return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>(Using <code>std::next()</code> instead of just <code>a.rbegin() + 2</code> makes it easier if you for some reason need to change <code>a</code> to a container type that doesn't have random iterators.)</p>\n"}, {"tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1556708693, "last_edit_date": 1556708693, "creation_date": 1556708067, "answer_id": 55935106, "question_id": 55933886, "link": "https://stackoverflow.com/questions/55933886/c-add-constant-to-slice-of-vector/55935106#55935106", "title": "C++ add constant to slice of vector", "body": "<p>The same code after a small refactor:</p>\n\n<pre><code>std::vector&lt; int &gt; a(3, 2);\n\nauto start = a.begin();\nauto end   = a.end();\nauto func  = [](auto val) {\n    return val + 1;\n};\n\nstd::transform(start, end, start, func);\n</code></pre>\n\n<p>Now by modifying the values of <code>start</code> and <code>end</code>, only the slice can be modified.</p>\n\n<p>For this <a href=\"https://en.cppreference.com/w/cpp/iterator/advance\" rel=\"nofollow noreferrer\"><code>std::advance</code></a> can be used:</p>\n\n<pre><code>std::advance(start, 1);\nstd::advance(end, -1);\n</code></pre>\n\n<p>In the above code:</p>\n\n<ul>\n<li><code>start</code> is 1 element after the beginning (2nd element - element with index of 1).</li>\n<li><code>end</code> is 1 element from the end.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1556718713, "post_id": 55935429, "comment_id": 98527320, "body": "With deduction guides, I think <code>make... </code> functions are not needed anymore."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 1, "last_activity_date": 1556717428, "last_edit_date": 1556717428, "creation_date": 1556709585, "answer_id": 55935429, "question_id": 55933886, "link": "https://stackoverflow.com/questions/55933886/c-add-constant-to-slice-of-vector/55935429#55935429", "title": "C++ add constant to slice of vector", "body": "<p>You could use a span (<code>std::span</code> in C++20, <code>gsl::span</code> earlier) to represent your slice. If you don't know about spans, have a look at:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/45723819/what-is-a-span-and-when-should-i-use-one\">What is a &quot;span&quot; and when should I use one?</a></p>\n\n<p>So if you write,</p>\n\n<pre><code>// ... vector a gets defined\nauto slice = std::span(a).subspan(some_index);\n</code></pre>\n\n<p>The slice now behaves just like any standard library container. Specifically, you could write:</p>\n\n<pre><code>std::transform(slice.begin(), slice.end(), slice.begin(), [](auto v) { return v + 1; });\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1556718275, "post_id": 55935638, "comment_id": 98527094, "body": "<code>bind2nd</code> is deprecated in C++11 and removed in C++17."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 2, "last_activity_date": 1556710930, "last_edit_date": 1556710930, "creation_date": 1556710565, "answer_id": 55935638, "question_id": 55933886, "link": "https://stackoverflow.com/questions/55933886/c-add-constant-to-slice-of-vector/55935638#55935638", "title": "C++ add constant to slice of vector", "body": "<p>The reason algorithms take iterators, not containers, is exactly for cases like this. </p>\n\n<p>The general method to adapt a Python style slice is to add <code>+ve</code> values to <code>begin</code> and <code>-ve</code> to <code>end</code>. Assuming there are at least two elements, incrementing last two elements would be</p>\n\n<pre><code>auto start = a.end() - 2;\nauto finish = a.end();\nstd::transform( start, finish , start, std::bind2nd( std::plus&lt;double&gt;(), 1 ) );\n</code></pre>\n"}], "owner": {"reputation": 149, "user_id": 9150520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4086717739e671900fec134b0833b039?s=128&d=identicon&r=PG&f=1", "display_name": "eok", "link": "https://stackoverflow.com/users/9150520/eok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 55934192, "answer_count": 4, "score": 0, "last_activity_date": 1556717428, "creation_date": 1556701393, "question_id": 55933886, "link": "https://stackoverflow.com/questions/55933886/c-add-constant-to-slice-of-vector", "title": "C++ add constant to slice of vector", "body": "<p>I know with <code>transform</code> I can add a constant to some vector like so:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::vector&lt;int&gt; a(3, 2);\nstd::transform( a.begin(), a.end(), a.begin(), std::bind2nd( std::plus&lt;double&gt;(), 1 ) );\n</code></pre>\n\n<p>I was wondering how I could modify <code>transform</code> to add a constant to some slice <code>[index:end]</code> of the vector, e.g. the last two elements.</p>\n\n<p>I can do it with a loop e.g.:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>for (int i=1; i &lt; a.size(); i++) {\n    a.at(i) += 1;\n}\n</code></pre>\n\n<p>but maybe there's a better option</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 390, "user_id": 5822464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b882b93c5aa0359dfdab6adc5e40a932?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/5822464/dan"}, "edited": false, "score": 0, "creation_date": 1556700549, "post_id": 55933716, "comment_id": 98520146, "body": "Indeed. Usually people would define all caps markers to keep track of includes, like this: <code>#define _DAYTIME_H</code>"}, {"owner": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "edited": false, "score": 0, "creation_date": 1556700586, "post_id": 55933716, "comment_id": 98520158, "body": "<code>#pragma once</code> is a widely accepted alternative guard."}, {"owner": {"reputation": 9545, "user_id": 242814, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fabed09b67201710f4cc958b4e668cb1?s=128&d=identicon&r=PG", "display_name": "Brennan Vincent", "link": "https://stackoverflow.com/users/242814/brennan-vincent"}, "reply_to_user": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "edited": false, "score": 1, "creation_date": 1556700763, "post_id": 55933716, "comment_id": 98520229, "body": "@AndyBrown I thought about suggesting <code>#pragma once</code>, but felt that it didn&#39;t illustrate the real point of my answer which is how <code>#define Foo</code> causes future uses of <code>Foo</code> to disappear. So I left it off in order to not be confusing."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 8565, "user_id": 1763035, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wpk6X.jpg?s=128&g=1", "display_name": "Andy Brown", "link": "https://stackoverflow.com/users/1763035/andy-brown"}, "edited": false, "score": 0, "creation_date": 1556700765, "post_id": 55933716, "comment_id": 98520231, "body": "@AndyBrown: Widely supported, but non-standard."}, {"owner": {"reputation": 147, "user_id": 6307697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40bf10d658a45ff8c173e6c3abd50344?s=128&d=identicon&r=PG&f=1", "display_name": "G&#225;briel", "link": "https://stackoverflow.com/users/6307697/g%c3%a1briel"}, "edited": false, "score": 0, "creation_date": 1556710170, "post_id": 55933716, "comment_id": 98523632, "body": "Thanks to all of you for your answers; both solutions worked fine (and I&#39;ll remember that #pragma is non-standard)."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 390, "user_id": 5822464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b882b93c5aa0359dfdab6adc5e40a932?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/5822464/dan"}, "edited": false, "score": 2, "creation_date": 1556712409, "post_id": 55933716, "comment_id": 98524518, "body": "@Dan -- names that begin with an underscore followed by a capital letter (<code>_DAYTIME_H</code>) and names that contain two consecutive underscores are reserved for use by the implementation. Don&#39;t use them in your code. This is <b>not</b> a standard convention for include guard names. You may well see it in the implementation of the standard library, which uses reserved identifiers in many places. Those identifiers are reserved so that the standard library doesn&#39;t step on user code and so that user code doesn&#39;t step on the standard library."}], "tags": [], "owner": {"reputation": 9545, "user_id": 242814, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fabed09b67201710f4cc958b4e668cb1?s=128&d=identicon&r=PG", "display_name": "Brennan Vincent", "link": "https://stackoverflow.com/users/242814/brennan-vincent"}, "is_accepted": true, "score": 3, "last_activity_date": 1556700784, "last_edit_date": 1556700784, "creation_date": 1556700352, "answer_id": 55933716, "question_id": 55933664, "link": "https://stackoverflow.com/questions/55933664/why-could-a-define-be-causing-problems-in-a-header/55933716#55933716", "title": "Why could a #define be causing problems in a header?", "body": "<p><code>#define DayTime</code> causes any future occurrences of <code>DayTime</code> to be replaced with the empty string.</p>\n\n<p>So the name of your class in <code>class DayTime</code> (and its constructor) are getting deleted, causing issues: the compiler effectively sees:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class\n{\n    int min;\n\n    public:\n        (int min);\n        int getMin();\n        int getHour();\n};\n</code></pre>\n\n<hr>\n\n<p>Usually for this exact reason, when people make these include guards, they use something that is unlikely to show up as a real identifier. For example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef DAYTIME_H\n#define DAYTIME_H\n\nclass DayTime {\n  // blah blah blah\n};\n\n#endif\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 6307697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40bf10d658a45ff8c173e6c3abd50344?s=128&d=identicon&r=PG&f=1", "display_name": "G&#225;briel", "link": "https://stackoverflow.com/users/6307697/g%c3%a1briel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 55933716, "answer_count": 1, "score": -1, "last_activity_date": 1556700784, "creation_date": 1556700139, "question_id": 55933664, "link": "https://stackoverflow.com/questions/55933664/why-could-a-define-be-causing-problems-in-a-header", "title": "Why could a #define be causing problems in a header?", "body": "<p>I've only recently got started with C++ and tried to build a simple class using different files (main, header and implementation). While doing that, I ran into a very strange (well, for me, at least) problem with #ifndef / #define. I'll show the code first:</p>\n\n<pre><code>// main.cpp :\n#include &lt;iostream&gt;\n#include \"daytime.h\"\n\nusing namespace std;\n\nint main(int argc, char** argv) {\n    DayTime sT = DayTime(75);\n    cout &lt;&lt; sT.getMin();\n\n    return 0;\n}\n\n// daytime.h :\n#ifndef DayTime\n#define Daytime\n\nclass DayTime\n{\n    int min;\n\n    public:\n        DayTime(int min);\n        int getMin();\n        int getHour();\n};\n\n#endif\n\n// daytime.cpp :\n#include \"daytime.h\"\n\nDayTime::DayTime(int min)\n    : min(min) {}\n\nDayTime::getMin()\n{\n    return this-&gt;min;\n}\n\nDayTime::getHour()\n{\n    return int (this-&gt;min / 60);\n}\n</code></pre>\n\n<p>As you can see, there is a typo in <code>#define Daytime</code> in <code>daytime.h</code> - 'time' is written with a lowercase 't'. And here comes the strange part: as long as that typo is <strong>there</strong>, the program compiles and runs without problems. But the moment I correct it to <code>#define DayTime</code>, with uppercase 'T', it no longer complies and I get a multitude of errors:</p>\n\n<pre><code>2   0   main.cpp    In file included from main.cpp\n9   11  daytime.h   [Error] expected unqualified-id before 'int'\n9   11  daytime.h   [Error] expected ')' before 'int'\n5   1   daytime.h   [Error] an anonymous struct cannot have function members\n12  1   daytime.h   [Error] abstract declarator '&lt;anonymous class&gt;' used as declaration\nD:\\Dokumentumok\\Prog\\C++\\Test\\main.cpp  In function 'int main(int, char**)':\n7   10  main.cpp    [Error] 'sT' was not declared in this scope\n28      Makefile.win    recipe for target 'main.o' failed\n</code></pre>\n\n<p>I've been wasting hours on this by now, but I've always got back to this same issue: typo there, it works, typo gone, it doesn't - and I just don't get it. So I'd be very grateful for some assistance here.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556699949, "post_id": 55933618, "comment_id": 98519938, "body": "The expected result is at the end of output.And my apologies for all the mistakes"}, {"owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 0, "creation_date": 1556700371, "post_id": 55933618, "comment_id": 98520084, "body": "First fix the errors in your and make the test code which means if some copies it it shall compile.... And please indent your code."}, {"owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 0, "creation_date": 1556700515, "post_id": 55933618, "comment_id": 98520128, "body": "Second: What exactly is your problem? You can output a single matrix so where is the problem to output three of them?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1556701927, "post_id": 55933618, "comment_id": 98520602, "body": "Don&#39;t try to print the matrices one by one (it&#39;s possible but much harder), instead print <i>whole lines</i>."}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "reply_to_user": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 0, "creation_date": 1556701946, "post_id": 55933618, "comment_id": 98520610, "body": "@user6556709 i did fix the code. sorry for all of that. and thanks for the repluy. but it isnt giving me the required output"}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1556702322, "post_id": 55933618, "comment_id": 98520744, "body": "@Someprogrammerdude which is harder. Becuz i didnt understand by which you meant is harder. One by one or whole lines. I know i ask a lot of unneccesary question"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1556702465, "post_id": 55933618, "comment_id": 98520786, "body": "Take a piece of paper and a pen. Write down the first full line of the output you want. If you can do that, then you can do that in a program as well."}, {"owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 0, "creation_date": 1556703225, "post_id": 55933618, "comment_id": 98521065, "body": "@ZackRaez You didn&#39;t fix the code (includes missing, using namespace missing, first line &quot;,&quot; -&gt; &quot;;&quot; and you didn&#39;t correct the indentation.). You should really draw it first on a squared paper and look what should go where."}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1556703288, "post_id": 55933618, "comment_id": 98521094, "body": "@Someprogrammerdude i tried but its giving me an ouput like                           thisSum of Arrays: [2+4]=:[6][2+4]=:[6][2+55]=:[57] [2+6]=:[8][2+6]=:[8][2+5]=:[7] [2+4]=:[6][2+5]=:[7][3+5]=:[8]  becuz of the loop."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1556703442, "post_id": 55933618, "comment_id": 98521154, "body": "Try to print the line <code>&quot;[2 3 5]   [2 5 0]   [4 8 5]&quot;</code>. Then try to print the line <code>&quot;[1 2 3]   [4 8 1]   [5 10 4]&quot;</code>. Then try to print the line <code>&quot;[1 4 2]   [4 1 2]   [5 5 4]&quot;</code>. Don&#39;t bother with anything else for the moment."}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1556704200, "post_id": 55933618, "comment_id": 98521440, "body": "@Someprogrammerdude not trying to ask personal question but can i know when you started programming at what age and how many years are you programming for. and for the reply im will try to do what you say"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1556704475, "post_id": 55933618, "comment_id": 98521542, "body": "I wrote my first program (a simple &quot;hello world&quot; type program in BASIC on a Commodore VIC20) before I was ten. I bought my own first &quot;real&quot; computer (an Amiga 500) in 1989, in my mid-teens, and started programming in C within a year of that. Been programming non-stop (just about :)) since that."}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1556705303, "post_id": 55933618, "comment_id": 98521826, "body": "@Someprogrammerdude i tried this but i got this output:      Sum of Arrays: [2][2]=[4][3][3]=[6][4][4]=[8] [5][5]=[10][6][6]=[12][7][7]=[14] [8][8]=[16][9][9]=[18][0][0]=[0]                                                                                            this is the code for (c = 0; c &lt; Sizer; c++) {  \t\t\tfor (d = 0; d &lt; Sizec; d++) \t\t\t{ \t\t\t\tsum[c][d] = first[c][d] + second[c][d]; \t\t\t\tcout &lt;&lt; &quot;[&quot; &lt;&lt; first[c][d] &lt;&lt; &quot;]&quot;; \t\t\t\tcout &lt;&lt; &quot;[&quot; &lt;&lt; second[c][d] &lt;&lt; &quot;]&quot;; \t\t\t\tcout &lt;&lt;&quot;=&quot;&lt;&lt; &quot;[&quot; &lt;&lt; sum[c][d] &lt;&lt; &quot;]&quot;; \t\t\t} \t\t\tcout &lt;&lt; endl;"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556704752, "post_id": 55934404, "comment_id": 98521641, "body": "thanks but they didnt teach me setw so i cant use it. and for the output     [2 3 5] 2 is the first element of first array . so when using the loop im confused of how to make them appear in same line"}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556705224, "post_id": 55934404, "comment_id": 98521798, "body": "i tried this but i got this output:      Sum of Arrays: [2][2]=[4][3][3]=[6][4][4]=[8] [5][5]=[10][6][6]=[12][7][7]=[14] [8][8]=[16][9][9]=[18][0][0]=[0]                                                                                            this is the code for (c = 0; c &lt; Sizer; c++) {  \t\t\tfor (d = 0; d &lt; Sizec; d++) \t\t\t{ \t\t\t\tsum[c][d] = first[c][d] + second[c][d]; \t\t\t\tcout &lt;&lt; &quot;[&quot; &lt;&lt; first[c][d] &lt;&lt; &quot;]&quot;; \t\t\t\tcout &lt;&lt; &quot;[&quot; &lt;&lt; second[c][d] &lt;&lt; &quot;]&quot;; \t\t\t\tcout &lt;&lt;&quot;=&quot;&lt;&lt; &quot;[&quot; &lt;&lt; sum[c][d] &lt;&lt; &quot;]&quot;; \t\t\t} \t\t\tcout &lt;&lt; endl;"}, {"owner": {"reputation": 31, "user_id": 10730835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AisSg.jpg?s=128&g=1", "display_name": "Tropping", "link": "https://stackoverflow.com/users/10730835/tropping"}, "reply_to_user": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556705789, "post_id": 55934404, "comment_id": 98522009, "body": "Sure you&#39;ll get such wrong output since your current output order is a[0][0]b[0][0]c[0][0], a[0][1]..... Please try to write down the output you want and you&#39;ll find out the order should be a[0][0]a[0][1]a[0][2]  as shown in the answer above."}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556708191, "post_id": 55934404, "comment_id": 98522868, "body": "this is the code but my output is wrong can you plz explain:                       \tfor (c = 0; c &lt; Sizer; c++)  \t\t{ \t\t\tcout &lt;&lt; &quot;[&quot;;  \t\t\tfor (d = 0; d &lt; Sizec; d++) \t\t\t\tcout &lt;&lt; first[c][d] &lt;&lt; &quot; &quot;; \t\t\tcout &lt;&lt; &quot;]\\t&quot;; \t\t\tcout &lt;&lt; &quot;[&quot;; \t\t\tfor (int d = 0; d &lt; Sizec;d++) \t\t\t\tcout &lt;&lt; second[c][d] &lt;&lt; &quot; &quot;; \t\t\tcout &lt;&lt; &quot;]\\t&quot;; \t\t\t// output sum \t\t\tcout &lt;&lt; &quot;[&quot;; \t\t\tfor (int d = 0; d &lt; Sizec; d++) \t\t\t\tsum[c][d]=first[c][d]+second[c][d]; \t\t\t\tcout &lt;&lt; sum[c][d] &lt;&lt; &quot; &quot;; \t\t\tcout &lt;&lt; &quot;]\\n&quot;; \t\t\tcout &lt;&lt; endl; \t\t} \t}"}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556708209, "post_id": 55934404, "comment_id": 98522881, "body": "this is the output                   Sum of Arrays: [4 5 6 ]        [4 5 6 ]        [-858993460 ]  [7 8 9 ]        [7 8 9 ]        [-858993460 ]  [0 2 3 ]        [0 6 5 ]        [-858993460 ]"}, {"owner": {"reputation": 31, "user_id": 10730835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AisSg.jpg?s=128&g=1", "display_name": "Tropping", "link": "https://stackoverflow.com/users/10730835/tropping"}, "reply_to_user": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556717046, "post_id": 55934404, "comment_id": 98526578, "body": "Well this is due to your missing <code>{}</code> of <code>for</code> loop. Without <code>{</code>and<code>}</code>, the <code>for</code> statement will only effect the exact following sentence, which is <code>sum[c][d]=first[c][d]+second[c][d];</code> in your code. Therefore when <code>for</code> statement is done, the variable <code>d</code> is added up to 3, and following code is <code>cout&lt;&lt;sum[c][d]</code> equaling to <code>cout&lt;&lt;sum[c][4]</code>. But the variable sum[c][4] do not have a value, and is set default by -858993460 so you&#39;ve got <b>one</b> strange negative output."}, {"owner": {"reputation": 31, "user_id": 10730835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AisSg.jpg?s=128&g=1", "display_name": "Tropping", "link": "https://stackoverflow.com/users/10730835/tropping"}, "reply_to_user": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556717536, "post_id": 55934404, "comment_id": 98526791, "body": "It is uncomfortable to read codes without formatting. If you still have questions, feel free to email me at <code>troppingz@gmail.com</code>. Please paste your code with formatting and right indents next time maybe in email:)"}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556731754, "post_id": 55934404, "comment_id": 98533428, "body": "thanks you really help me out. I will contact you. Thanks again"}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556731780, "post_id": 55934404, "comment_id": 98533440, "body": "can i now how long you have been coding"}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556737419, "post_id": 55934404, "comment_id": 98535869, "body": "sorry for nit contacting you through email. I had a bug where i couldn&#39;t message you so i came here.Thanks to you i have fixed the code. but now i&#39;m just having problems with the adding the + = between the []: something like this                    [1 1 1]   [0 0 0]   [1 1 1] [1 1 1] + [0 0 0] = [1 1 1] [2 2 2]   [1 1 1]   [3 3 3] like shown in the question    some one told me to divide the number of rows by two and add this two in between. like in middle. sorry if now im just being annoying. Thanks for all the help anyways."}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556737742, "post_id": 55934404, "comment_id": 98535993, "body": "can anyone please provide with a link to learn multi dimensional arrays or the concept behind it. I have visited some websites but none helped me by much"}, {"owner": {"reputation": 31, "user_id": 10730835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AisSg.jpg?s=128&g=1", "display_name": "Tropping", "link": "https://stackoverflow.com/users/10730835/tropping"}, "reply_to_user": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556764925, "post_id": 55934404, "comment_id": 98542780, "body": "1. I wrote my first code before 10 and the first useful code using Pascal when I was 12."}, {"owner": {"reputation": 31, "user_id": 10730835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AisSg.jpg?s=128&g=1", "display_name": "Tropping", "link": "https://stackoverflow.com/users/10730835/tropping"}, "reply_to_user": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556765196, "post_id": 55934404, "comment_id": 98542823, "body": "3. Try to imitate the computer to output <b>line by line</b>. If you must write the output down line by line then when would you write the <code>+</code> and <code>=</code>? Hints: you may want them to be in the middle line of the output. But define <code>middle</code> by yourself."}, {"owner": {"reputation": 31, "user_id": 10730835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AisSg.jpg?s=128&g=1", "display_name": "Tropping", "link": "https://stackoverflow.com/users/10730835/tropping"}, "reply_to_user": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556765506, "post_id": 55934404, "comment_id": 98542866, "body": "To make it clear, when writing line by line, you have to watch out <code>is this the middle line?</code> So this is what the program should do -- if (this is the middle line) cout&lt;&lt;+; And 2 is your <code>middle</code> of 3, 2.5 is your <code>middle</code> of 4, 3 is your <code>middle</code> of 5(when you output 5 lines, <code>+</code>should be in the 3rd line), find the pattern and fill the expression of <code>if</code>"}, {"owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "edited": false, "score": 0, "creation_date": 1556885113, "post_id": 55934404, "comment_id": 98589534, "body": "i did update the code and can you help me with the + = and sign."}], "tags": [], "owner": {"reputation": 31, "user_id": 10730835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AisSg.jpg?s=128&g=1", "display_name": "Tropping", "link": "https://stackoverflow.com/users/10730835/tropping"}, "is_accepted": false, "score": 2, "last_activity_date": 1556705158, "last_edit_date": 1556705158, "creation_date": 1556704149, "answer_id": 55934404, "question_id": 55933618, "link": "https://stackoverflow.com/questions/55933618/the-final-output-is-supposed-to-be-within-and-the-is-supposed-to-be-in-m/55934404#55934404", "title": "The final output is supposed to be within [ ] and the + = is supposed to be in middle", "body": "<p>You may adjust the output order and use <a href=\"https://www.tutorialspoint.com/cpp_standard_library/cpp_setw.htm\" rel=\"nofollow noreferrer\">std::setw()</a> to organize the output.</p>\n\n<ol>\n<li><strong>Adjust the output order.</strong> Try to write down what you want <strong>line by line</strong> and that is how <code>cout</code> works. In your example, the first output should be</li>\n</ol>\n\n<pre><code>[2 3 5]   [2 5 0]   [4 8 5]\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>  [2 3 5]\n  [1 2 3]\n  [1 4 2]\n</code></pre>\n\n<p>By acting this way, the output order shouldbe</p>\n\n<pre><code>1: [a[0][0] a[0][1] a[0][2]]   [b[0][0] b[0][1] b[0][2]]   [c[0][0] c[0][1] c[0][2]]\n</code></pre>\n\n<p>To make it clear, the output code should be</p>\n\n<pre><code>    for (int i = 0; i &lt; Sizer; i++)\n    {\n        // output first matrix\n        cout &lt;&lt; \"[\";\n        for (int j = 0; j &lt; Sizec; j++)\n            cout &lt;&lt; first[i][j] &lt;&lt; \" \";\n        cout &lt;&lt; \"]\\t\";\n        // output the second\n        cout &lt;&lt; \"[\";\n        for (int j = 0; j &lt; Sizec; j++)\n            cout &lt;&lt; second[i][j] &lt;&lt; \" \";\n        cout &lt;&lt; \"]\\t\";\n        // output sum\n        cout &lt;&lt; \"[\";\n        for (int j = 0; j &lt; Sizec; j++)\n            cout &lt;&lt; sum[i][j] &lt;&lt; \" \";\n        cout &lt;&lt; \"]\\n\";\n    }\n</code></pre>\n\n<p>Add the code above to the end of your code, and we could get outputs below</p>\n\n<pre><code>[1 2 3 ]        [1 1 1 ]        [2 3 4 ]\n[4 5 6 ]        [1 1 1 ]        [5 6 7 ]\n[7 8 9 ]        [1 1 1 ]        [8 9 10 ]\n</code></pre>\n\n<p>You may want to do a calculation to decide when to <code>cout</code> the <code>+</code> and <code>=</code>.</p>\n\n<ol start=\"2\">\n<li><strong>Use setw() to align your output.</strong> As we can see, number <code>10</code> occupies more space than number &lt; 10, and also you may also get an output like this</li>\n</ol>\n\n<pre><code>[1 2 3 ]        [1 1 1 ]        [2 3 4 ]\n[4 50 6 ]    +    [1 1 1 ]    =    [5 6 7 ]\n[7 8000 9 ]        [1 1 1 ]        [8 9 10 ]\n</code></pre>\n\n<p>To avoid this, we could preset some space for each number, for example, add a <code>setw(4)</code> before <code>cout</code> a number</p>\n\n<pre><code>cout &lt;&lt; setw(4) &lt;&lt; first[i][j];\n</code></pre>\n\n<p>would get output below</p>\n\n<pre><code>[   1   2 232]  [ 1002301  21]  [ 1012303 253]\n[  12   1   1]  [   2 343   1]  [  14 344   2]\n[   1   1   1]  [   2   3   1]  [   3   4   2]\n</code></pre>\n\n<p>This may be useful to you.</p>\n"}], "owner": {"reputation": 9, "user_id": 11390675, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2zEztysYRpY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf4ribQ0OcOP8LctlITICgXCgOswA/mo/photo.jpg?sz=128", "display_name": "Zack Raez", "link": "https://stackoverflow.com/users/11390675/zack-raez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1557924333, "creation_date": 1556699851, "last_edit_date": 1557924333, "question_id": 55933618, "link": "https://stackoverflow.com/questions/55933618/the-final-output-is-supposed-to-be-within-and-the-is-supposed-to-be-in-m", "title": "The final output is supposed to be within [ ] and the + = is supposed to be in middle", "body": "<p>The output for sum part should be detailed. But I don't know to to do it.</p>\n\n<pre><code>int main()\n    {\n    cout &lt;&lt; \"This program is to find the sum of two Different arrays\";\n    cout &lt;&lt; endl;\n\n    // variable declaration\n    int Sizer = 0, Sizec = 0, first[10][10], second[10][10], sum[10][10];\n    cout &lt;&lt; \"Enter the number of rows for array: \";\n\n    // input\n    cin &gt;&gt; Sizer;\n    cout &lt;&lt; \"Enter the number of columns for an array: \";\n    cin &gt;&gt; Sizec;\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter the elements of first Array\";\n    cout &lt;&lt; endl;\n\n    // nested loop execution and input\n    for (int c = 0; c &lt; Sizer; c++)\n    {\n        for (int d = 0; d &lt; Sizec; d++)\n        {\n            cout &lt;&lt; \"Enter elements of array [\" &lt;&lt; c + 1 &lt;&lt; \"]\" &lt;&lt; \"[\" &lt;&lt; d + 1 &lt;&lt; \"]: \";\n            cin &gt;&gt; first[c][d];\n        }\n    }\n\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Enter the elements of second Array\";\n    cout &lt;&lt; endl;\n\n    // nested loop and execution\n    for (int c = 0; c &lt; Sizer; c++)\n    {\n        for (int d = 0; d &lt; Sizec; d++)\n        {\n            cout &lt;&lt; \"Enter elements of array [\" &lt;&lt; c + 1 &lt;&lt; \"]\" &lt;&lt; \"[\" &lt;&lt; d + 1 &lt;&lt; \"]: \";\n            cin &gt;&gt; second[c][d];\n        }\n    }\n\n    // outputting a sum\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Sum of Arrays: \";\n    cout &lt;&lt; endl;\n\n    // loop execution and sum\n    for (int c = 0; c &lt; Sizer; c++)\n    {\n        cout &lt;&lt; \"[\";\n\n        for (int d = 0; d &lt; Sizec; d++)\n        {\n            cout &lt;&lt; first[c][d];\n\n            if (d != Sizec - 1)\n                cout &lt;&lt; \" \";\n        }\n        cout &lt;&lt; \"]\";\n\n        if ( Sizer== Sizer / 2)\n        {\n            cout &lt;&lt; \"+\";\n        }\n        else \n        {\n            cout &lt;&lt; \"   \";\n        }\n\n        cout &lt;&lt; \"[\";\n        for (int d = 0; d &lt; Sizec; d++)\n        {\n            cout &lt;&lt; second[c][d];\n            if (d != Sizec - 1)\n                cout &lt;&lt; \" \";\n        }\n        cout &lt;&lt; \"]   \";\n        // output sum\n        cout &lt;&lt; \"[\";\n        for (int d = 0; d &lt; Sizec; d++)\n        {\n            sum[c][d] = first[c][d] + second[c][d];\n            cout &lt;&lt; sum[c][d];\n            if (d != Sizec - 1)\n                cout &lt;&lt; \" \";\n        }\n        cout &lt;&lt; \"]\";\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>I need the some to be as shown. Can anyone help me with the code.</p>\n\n<pre><code>  [2 3 5]   [2 5 0]   [4 8 5]\n  [1 2 3] + [4 8 1] = [5 10 4]\n  [1 4 2]   [4 1 2]   [5 5 4]\n</code></pre>\n\n<p>I just corrected it. But i do not know how to represent it in above form\nso know can you help me out with it\nI have added some lines. so this is my new code and i fix some parts and only have problems with adding the + and = sign and i know it has to do something with no of rows or size of rows</p>\n"}, {"tags": ["c++", "vector", "directx"], "comments": [{"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1556729495, "post_id": 55933388, "comment_id": 98532499, "body": "Note that <code>XMVectorSetByIndex</code> is probably the slowest way to do this operation. If you aren&#39;t overly concerned with performance, you should look at the <a href=\"https://github.com/Microsoft/DirectXTK/wiki/SimpleMath\" rel=\"nofollow noreferrer\">SimpleMath</a> wrapper for DirectXMath."}, {"owner": {"reputation": 687, "user_id": 1707828, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/9h7iz.png?s=128&g=1", "display_name": "nat1707828", "link": "https://stackoverflow.com/users/1707828/nat1707828"}, "reply_to_user": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1556751207, "post_id": 55933388, "comment_id": 98540425, "body": "Interesting, I didn&#39;t know of this wrapper. I assume you mean slow in terms of programming efficiency? Since using the DirectXMath API directly should be faster performance wise (as you suggest)."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 0, "creation_date": 1556815910, "post_id": 55933388, "comment_id": 98565655, "body": "The key to SIMD performance is to keep the data in the SIMD registers as much as possible. That means working with <code>XMVECTOR</code> and <code>XMMATRIX</code> as local (stack) variables. Anytime you &#39;spill to memory&#39; it is slower. That said, the usage of SIMD registers is a little restricted particular for per component access so some people find it more difficult to use. The SimpleMath wrapper uses &quot;C++ magic&quot; to make it work like you can access the individual components by converting to and from <code>XMVECTOR</code> and <code>XMMATRIX</code> automatically on each operation."}], "answers": [{"tags": [], "owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "is_accepted": true, "score": 3, "last_activity_date": 1556699321, "creation_date": 1556699321, "answer_id": 55933531, "question_id": 55933388, "link": "https://stackoverflow.com/questions/55933388/directxxmvector-function-xmvectorsetbyindex-not-setting-float-c/55933531#55933531", "title": "DirectX::XMVECTOR function XMVectorSetByIndex() not setting float (C++)", "body": "<p><code>XMVectorSetByIndex</code> function returns new vector with modified content, it does not modify input vector inplace. So you should overwrite <code>test</code>:</p>\n\n<pre><code>test = XMVectorSetByIndex(test, new_y, 1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "is_accepted": false, "score": 2, "last_activity_date": 1556699321, "creation_date": 1556699321, "answer_id": 55933532, "question_id": 55933388, "link": "https://stackoverflow.com/questions/55933388/directxxmvector-function-xmvectorsetbyindex-not-setting-float-c/55933532#55933532", "title": "DirectX::XMVECTOR function XMVectorSetByIndex() not setting float (C++)", "body": "<p>XMVectorSetByIndex does not modify the vector you pass in, it returns the new result instead. </p>\n\n<pre><code>XMVECTOR test = { 0.0f, 1.5f, 2.0f, 0.0f };\nfloat new_y = XMVectorGetByIndex(test, 1) + 0.2;\ntest = XMVectorSetByIndex(test, new_y, 1);\n</code></pre>\n"}], "owner": {"reputation": 687, "user_id": 1707828, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/9h7iz.png?s=128&g=1", "display_name": "nat1707828", "link": "https://stackoverflow.com/users/1707828/nat1707828"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 55933531, "answer_count": 2, "score": 1, "last_activity_date": 1557488615, "creation_date": 1556698683, "last_edit_date": 1557488615, "question_id": 55933388, "link": "https://stackoverflow.com/questions/55933388/directxxmvector-function-xmvectorsetbyindex-not-setting-float-c", "title": "DirectX::XMVECTOR function XMVectorSetByIndex() not setting float (C++)", "body": "<p>I am having some trouble performing what seems like it should be a simple task in C++, where I am trying to change the values inside a vector (DirectX::XMVECTOR) using the command XMVectorSetByIndex(). </p>\n\n<p>In the code below, the command XMVectorGetByIndex() works fine, with new_y being set to 1.7 (after adding 0.2). However, XMVectorSetByIndex() does not lead to test becoming {0.0f, 1.7f, 2.0f, 0.0f} as I would expect (rather it remains unchanged).</p>\n\n<pre><code>    XMVECTOR test = { 0.0f, 1.5f, 2.0f, 0.0f };\n    float new_y = XMVectorGetByIndex(test, 1) + 0.2;\n    XMVectorSetByIndex(test, new_y, 1);\n</code></pre>\n\n<p>I've tried a few different things but had no luck getting the function to work. I just can't see what the issue is (especially given XMVectorGetByIndex() works with no issues.</p>\n\n<p>Any help would be greatly appreciated :)</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/hh404810(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/hh404810(v=vs.85).aspx</a> (XMVectorSetByIndex)\n<a href=\"https://msdn.microsoft.com/en-us/library/Hh404786(v=VS.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/Hh404786(v=VS.85).aspx</a> (XMVectorGetByIndex)</p>\n"}, {"tags": ["c++", "qt", "opengl", "glsl", "shader"], "comments": [{"owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "edited": false, "score": 2, "creation_date": 1556699551, "post_id": 55933334, "comment_id": 98519785, "body": "The problem is in your GLSL shader code (and not the C++ listed above). It would be helpful to see that code (FWIW: the error is saying that your vertex shader code does not write to the gl_Position attribute, which is required as per the GLSL spec)"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "edited": false, "score": 0, "creation_date": 1556702641, "post_id": 55933334, "comment_id": 98520847, "body": "@robthebloke May be that there is an issue in the glsl code, but with this code no shader program will be linked successfully."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11436108, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tgbiOmMF_48/AAAAAAAAAAI/AAAAAAAAsLo/jGLq6cvc8hM/photo.jpg?sz=128", "display_name": "Jesus Moreno", "link": "https://stackoverflow.com/users/11436108/jesus-moreno"}, "edited": false, "score": 1, "creation_date": 1556720994, "post_id": 55933631, "comment_id": 98528417, "body": "That was the solution. Thanks!"}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1556702061, "last_edit_date": 1556702061, "creation_date": 1556699932, "answer_id": 55933631, "question_id": 55933334, "link": "https://stackoverflow.com/questions/55933334/vertex-shader-error-c5145-must-write-to-gl-position-using-qshaderprogram/55933631#55933631", "title": "Vertex shader error C5145: must write to gl_Position using QShaderProgram", "body": "<p>There are some issues in your code.</p>\n\n<p>First of all I recommend to us <a href=\"https://doc.qt.io/qt-5/qopenglshader.html#compileSourceFile\" rel=\"nofollow noreferrer\"><code>QOpenGLShader::compileSourceFile</code></a>:</p>\n\n<p>e.g.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>QOpenGLShader* vertex = new QOpenGLShader(QOpenGLShader::Vertex);\nvertex-&gt;compileSourceFile( fileNameComplete );\n</code></pre>\n\n<hr>\n\n<p>In the function <code>shaderProgram::compileShader</code> a local variable <code>shader</code> is used:</p>\n\n<blockquote>\n<pre><code>QOpenGLShader shader(type);\n</code></pre>\n</blockquote>\n\n<p>but then a pointer to this variable is assigned to the output parameter <code>shaderComp</code>.</p>\n\n<blockquote>\n<pre><code>shaderComp = &amp;shader;\n</code></pre>\n</blockquote>\n\n<p>When the function has terminated, the local object <code>shader</code> is destructed and the pointer finally goes to nowhere.</p>\n\n<p>The parameter has to be an input parameter. Get rid of the local variable and use the existing object to compile the shader.<br>\nYou can create a new <code>QOpenGLShader</code> object in the <code>shaderProgram::compileShader</code> and return that object by the return value:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>QOpenGLShader* shaderProgram::compileShader(\n    const char *filename, \n    QOpenGLShader::ShaderTypeBit type)\n{\n    // Comprobamos si en la soluci\u00f3n existe alg\u00fan archivo de recursos con el\n    // nombre que se pasa como argumento\n    if (!fileExists(filename)) {\n        fprintf(stderr, \"Shader source file %s not found.\\n\", filename);\n        return nullptr;\n    }\n    // Si existe se lee en una cadena de caracteres que contiene el listado\n    // completo del shader source\n    std::ifstream shaderSourceFile;\n    shaderSourceFile.open(filename);\n    if (!shaderSourceFile) {\n        fprintf(stderr, \"Cannot open shader source file.\\n\");\n        return nullptr;\n    }\n    std::stringstream shaderSourceStream;\n    shaderSourceStream &lt;&lt; shaderSourceFile.rdbuf();\n    std::string shaderSourceString = shaderSourceStream.str();\n    shaderSourceFile.close();\n\n    // - Creamos un shader object para ese archivo que se ha le\u00eddo\n    QString code(QString::fromStdString(shaderSourceString));\n\n    QOpenGLShader* shader = new QOpenGLShader(QOpenGLShader::Vertex);\n    bool result = shader-&gt;compileSourceCode(code);\n\n    if(!result){\n        const QString qs = shader-&gt;log();\n        std::cout &lt;&lt; qs.toStdString();\n        this-&gt;logString = qs.toStdString();\n        delete shader;\n        return nullptr;\n    }\n    //si ha compilado bien, creamos el shader\n    return shader;\n}\n</code></pre>\n\n<p>Call the method like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::string vertFileName = std::string(fileName) + \"-vert.glsl\";\nQOpenGLShader* vertex = compileShader(vertFileName.c_str(), QOpenGLShader::Vertex);\nif (!vertex) {\n    return 0;\n}\n\nstd::string fragFileName = std::string(fileName) + \"-frag.glsl\";\nQOpenGLShader* fragment = compileShader(fragFileName.c_str(), QOpenGLShader::Fragment);\nif (!fragment) {\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11436108, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tgbiOmMF_48/AAAAAAAAAAI/AAAAAAAAsLo/jGLq6cvc8hM/photo.jpg?sz=128", "display_name": "Jesus Moreno", "link": "https://stackoverflow.com/users/11436108/jesus-moreno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 1, "accepted_answer_id": 55933631, "answer_count": 1, "score": 1, "last_activity_date": 1557572029, "creation_date": 1556698449, "last_edit_date": 1557572029, "question_id": 55933334, "link": "https://stackoverflow.com/questions/55933334/vertex-shader-error-c5145-must-write-to-gl-position-using-qshaderprogram", "title": "Vertex shader error C5145: must write to gl_Position using QShaderProgram", "body": "<p>I am translating a Visual Studio C++ <code>OpenGL</code> project to a Qt project to implement a <code>UI</code>. </p>\n\n<p>I have all the code translated and I am using Qt classes to implement <code>OpenGL</code> part.</p>\n\n<p>The problem I am having now is that when I link the <code>shaderProgram</code> it throws me an error that says: </p>\n\n<blockquote>\n  <p>Vertex info (0) : error C5145: must write to gl_Position</p>\n</blockquote>\n\n<p>I am implementing <code>QOpenGLFunctions_4_1_Core</code> and I debug the compile function to see if the code was well read and yes</p>\n\n<p>All the code is read and the compile function returns a true (well compiled).</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>GLuint shaderProgram::createShaderProgram(const char *fileName) {\n    // Creamos el shader program y almacenamos su identificador\n    if (handler) {\n        shaderP = new QOpenGLShaderProgram();\n        handler = shaderP-&gt;create();\n        if (!handler) {\n            fprintf(stderr, \"Cannot create shader program: %s.\\n\", fileName);\n            return 0;\n        }\n    }\n    // Cargamos y compilamos cada uno de los shader objects que componen este\n    // shader program\n    char fileNameComplete[256];\n    strcpy_s(fileNameComplete, fileName);\n    strcat_s(fileNameComplete, \"-vert.glsl\");\n    QOpenGLShader* vertex = new QOpenGLShader(QOpenGLShader::Vertex);\n    GLuint vertexShaderObject = compileShader(fileNameComplete, QOpenGLShader::Vertex,vertex);\n    if (vertexShaderObject == 0) {\n        return 0;\n    }\n    strcpy_s(fileNameComplete, fileName);\n    strcat_s(fileNameComplete, \"-frag.glsl\");\n    QOpenGLShader* fragment = new QOpenGLShader(QOpenGLShader::Fragment);\n    GLuint fragmentShaderObject = compileShader(fileNameComplete, QOpenGLShader::Fragment, fragment);\n    if (fragmentShaderObject == 0) {\n        return 0;\n    }\n    // Asociamos los shader objects compilados sin errores al shader program\n    shaderP-&gt;addShader(vertex);\n    shaderP-&gt;addShader(fragment);\n\n    // Enlazamos el shader program y comprobamos si hay errores\n    handler = shaderP-&gt;link(); //Here is where the error is thrown\n    if(!handler)\n    {\n        QString error = shaderP-&gt;log();\n        std::cout&lt;&lt; error.toStdString()&lt;&lt;std::endl;\n        return 0;\n    }\n    else {\n        linked = true;\n    }\n    return handler;\n}\n\nbool shaderProgram::compileShader(const char *filename, QOpenGLShader::ShaderTypeBit type,QOpenGLShader* shaderComp) {\n    // Comprobamos si en la soluci\u00f3n existe alg\u00fan archivo de recursos con el\n    // nombre que se pasa como argumento\n    if (!fileExists(filename)) {\n        fprintf(stderr, \"Shader source file %s not found.\\n\", filename);\n        return 0;\n    }\n    // Si existe se lee en una cadena de caracteres que contiene el listado\n    // completo del shader source\n    std::ifstream shaderSourceFile;\n    shaderSourceFile.open(filename);\n    if (!shaderSourceFile) {\n        fprintf(stderr, \"Cannot open shader source file.\\n\");\n        return 0;\n    }\n    std::stringstream shaderSourceStream;\n    shaderSourceStream &lt;&lt; shaderSourceFile.rdbuf();\n    std::string shaderSourceString = shaderSourceStream.str();\n    shaderSourceFile.close();\n\n    // - Creamos un shader object para ese archivo que se ha le\u00eddo\n    QOpenGLShader shader(type);\n\n    QString code(QString::fromStdString(shaderSourceString));\n\n    bool result = shader.compileSourceCode(code);\n\n    if(!result){\n        const QString qs = shader.log();\n        std::cout &lt;&lt; qs.toStdString();\n        this-&gt;logString = qs.toStdString();\n        return false;\n    }\n    //si ha compilado bien, creamos el shader\n    shaderComp = &amp;shader;\n    return true;\n}\n\n</code></pre>\n\n<p>I expect the shader program link well and I would be able to draw my objects on screen.</p>\n"}, {"tags": ["c++", "windows", "internationalization", "systemtime"], "answers": [{"tags": [], "owner": {"reputation": 82917, "user_id": 3501, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/1fd5f5cc203c393634379a3b3b7e7a87?s=128&d=identicon&r=PG", "display_name": "Anders", "link": "https://stackoverflow.com/users/3501/anders"}, "is_accepted": false, "score": 2, "last_activity_date": 1556702923, "creation_date": 1556702923, "answer_id": 55934175, "question_id": 55933229, "link": "https://stackoverflow.com/questions/55933229/convert-windows-systemtime-to-a-string-or-char-buf-in-c-with-users-region-an/55934175#55934175", "title": "convert Windows SYSTEMTIME to a string or char buf in C++ with user&#39;s &quot;Region and Language&quot; format?", "body": "<pre><code>TCHAR buf[200];\nGetDateFormat(LOCALE_USER_DEFAULT, DATE_LONGDATE, &amp;mysystime, NULL, buf, 200);\n</code></pre>\n\n<p>Call <code>GetTimeFormat</code> as well if you also need the time part.</p>\n"}, {"tags": [], "owner": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "is_accepted": true, "score": 1, "last_activity_date": 1556739380, "creation_date": 1556739380, "answer_id": 55941707, "question_id": 55933229, "link": "https://stackoverflow.com/questions/55933229/convert-windows-systemtime-to-a-string-or-char-buf-in-c-with-users-region-an/55941707#55941707", "title": "convert Windows SYSTEMTIME to a string or char buf in C++ with user&#39;s &quot;Region and Language&quot; format?", "body": "<pre><code>TIME_ZONE_INFORMATION tzi;\nif ( GetTimeZoneInformation( &amp;tzi ) == TIME_ZONE_ID_INVALID )\nMyErrorFunction( \"GetTimeZoneInformation() = TIME_ZONE_ID_INVALID : %s\",\n    GetLastErrorAsString().c_str() );\n  :\n  :\n\nSYSTEMTIME st, stLocal;\nBOOL bRV = FileTimeToSystemTime( ftLastAccessTime, &amp;st );\nSystemTimeToTzSpecificLocalTime( &amp;tzi, &amp;st, &amp;stLocal );\n\nGetDateFormat( LOCALE_USER_DEFAULT, DATE_LONGDATE, &amp;stLocal,\n               NULL, szBuf, sizeof( szBuf ) );\n\nint iBufUsed = strlen( szBuf );\nif ( iBufUsed &lt; sizeof( szBuf ) - 2 )\n     szBuf[ iBufUsed++ ] = ' ';\n\nGetTimeFormat( LOCALE_USER_DEFAULT, 0, &amp;stLocal,\n               NULL, szBuf + iBufUsed, sizeof( szBuf ) - iBufUsed );\n\n// szBuf holds Date and Time, in the user's timezone, formatted as the user prefers.\n</code></pre>\n"}], "owner": {"reputation": 1469, "user_id": 2397118, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/7241c07b5e6a92c24c2e3e2af011153b?s=128&d=identicon&r=PG", "display_name": "Swiss Frank", "link": "https://stackoverflow.com/users/2397118/swiss-frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "accepted_answer_id": 55941707, "answer_count": 2, "score": 0, "last_activity_date": 1556739380, "creation_date": 1556697790, "question_id": 55933229, "link": "https://stackoverflow.com/questions/55933229/convert-windows-systemtime-to-a-string-or-char-buf-in-c-with-users-region-an", "title": "convert Windows SYSTEMTIME to a string or char buf in C++ with user&#39;s &quot;Region and Language&quot; format?", "body": "<p>How does my C++ program convert a SYSTEMTIME in the user's preferred \"long date format\" either as defaulted from their Language setting, or as custom-set on the Control Panel->Region and Language dialog?</p>\n\n<p>If it matters I'm on Visual Studio 2017 and primarily looking for C/C++03 type solutions but if there's a solution for newer C++ I wouldn't mind seeing it.</p>\n"}, {"tags": ["c++", "c++11", "concurrency", "thread-safety", "memory-model"], "comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1559449610, "post_id": 55932983, "comment_id": 99421241, "body": "It doesn&#39;t matter that a variable is local or global, as long as its lifetime is sufficient (as here)."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1556697598, "post_id": 55933004, "comment_id": 98519182, "body": "@J.Antonio - Did you intend to self-answer this post?"}, {"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1556697764, "post_id": 55933004, "comment_id": 98519228, "body": "No, but after you answered it I played around with some code to get a better sense of things, and I figured it&#39;d be a good addition to the answer. I really appreciate you taking the time to look up the corresponding portion of the standard that addresses this"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1556697858, "post_id": 55933004, "comment_id": 98519258, "body": "@J.AntonioPerez - NP. I just thought I possibly cut in line while you were posting an answer. For posterity, it&#39;s worth mentioning that one can self-answer before even posting a question, there&#39;s a checkbox that opens the answer panel above &quot;ask&quot;."}, {"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1556698107, "post_id": 55933004, "comment_id": 98519332, "body": "Thanks for letting me know! I honestly didn&#39;t know what the standard said with regard to this, and I didn&#39;t feel like I was in a position to provide a comprehensive answer"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 7, "last_activity_date": 1556697853, "last_edit_date": 1556697853, "creation_date": 1556696271, "answer_id": 55933004, "question_id": 55932983, "link": "https://stackoverflow.com/questions/55932983/will-a-calling-thread-see-modifications-to-local-variables-after-thread-join/55933004#55933004", "title": "Will a calling thread see modifications to local variables after thread.join()?", "body": "<p>Yes, it must return true.</p>\n\n<blockquote>\n  <p><strong>[thread.thread.member]</strong></p>\n\n<pre><code>void join();\n</code></pre>\n  \n  <p><a href=\"https://timsong-cpp.github.io/cppwp/n3337/thread.thread.class#thread.thread.member-4\" rel=\"noreferrer\">4</a> <em>Effects</em>:  Blocks until the thread represented by <code>*this</code> has completed. </p>\n  \n  <p><a href=\"https://timsong-cpp.github.io/cppwp/n3337/thread.thread.class#thread.thread.member-5\" rel=\"noreferrer\">5</a> <em>Synchronization</em>: The completion of the thread represented by <code>*this</code> synchronizes with ([intro.multithread]) the corresponding successful <code>join()</code> return.</p>\n</blockquote>\n\n<p>So the execution of the thread represented by the handle, and associated side effects are done before <code>join</code> returns to the calling context.</p>\n\n<h3>Example</h3>\n\n<p>Let's look at two functions, which differ only in when they join a thread:</p>\n\n<pre><code>int count_A() {\n    int counter = 0;\n    bool flag(true);\n    auto t = std::thread([&amp;]{flag = false;});\n\n    while(flag) {    // infinite loop - flag never synchronized\n        ++counter;\n    }\n    t.join();        // joins thread after loop exits\n    return counter;\n}\nint count_B() {\n    int counter = 0;\n    bool flag(true);\n    auto t = std::thread([&amp;]{flag = false;});\n\n    t.join();       // joins thread before loop, forcing synchronization\n    while(flag) {\n        ++counter;\n    }\n    return counter;\n}\n</code></pre>\n\n<p>When compiled with g++ version 8.2 at <code>-O3</code> optimization, invoking <code>count_A</code> results in an infinite loop because the compiler assumes <code>flag</code> is always true. </p>\n\n<p>On the other hand, invoking <code>count_B</code> will just return a value of <code>0</code>. Because the value of <code>flag</code> is checked after <code>thread.join()</code>, it's value is re-loaded, and flag is <code>false</code> so the while loop doesn't execute. </p>\n\n<p>Note that if <code>flag</code> is changed to an <code>atomic_bool</code>, then <code>count_A</code> has the intended behavior of incrementing the counter until the flag is set to false, and the function <em>does not</em> enter an infinite loop (instead returning once <code>flag</code> is set to false by the child thread). </p>\n"}], "owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 55933004, "answer_count": 1, "score": 4, "last_activity_date": 1556697853, "creation_date": 1556696049, "last_edit_date": 1556697075, "question_id": 55932983, "link": "https://stackoverflow.com/questions/55932983/will-a-calling-thread-see-modifications-to-local-variables-after-thread-join", "title": "Will a calling thread see modifications to local variables after thread.join()?", "body": "<p>In the simplest possible example, let's say I have a function that starts a thread, which in turn sets the value of a local variable to true. We join the thread, then leave the function. </p>\n\n<pre><code>bool func() {\n    bool b = false;\n    std::thread t([&amp;]() { b = true; }); \n    t.join();\n    return b;\n}\n</code></pre>\n\n<p>Will this function return true, or is the behavior undefined?</p>\n"}, {"tags": ["python", "c++"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 3289737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/323898e88efdce76de6482fa681b3e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Coconut", "link": "https://stackoverflow.com/users/3289737/coconut"}, "edited": false, "score": 0, "creation_date": 1556697175, "post_id": 55933133, "comment_id": 98519051, "body": "Thanks for your answer. I think I need to pick up more mindsets and common practice with C++ community"}], "tags": [], "owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "is_accepted": true, "score": 3, "last_activity_date": 1556698436, "last_edit_date": 1556698436, "creation_date": 1556697079, "answer_id": 55933133, "question_id": 55932955, "link": "https://stackoverflow.com/questions/55932955/how-to-include-a-cpp-file-for-all-the-function-and-classes-but-ignore-the-main-f/55933133#55933133", "title": "How to include a cpp file for all the function and classes but ignore the main function?", "body": "<p>First you shouldn't do it the python way but write a small test program to test your library. To design it the python way is not common in C++ and you will not make many new friends doing it.</p>\n\n<p>But if you <strong>really</strong> want to do that, you can define main as a weak symbol.</p>\n\n<pre><code>int __attribute__((weak)) main() {\n      [your code]\n}\n</code></pre>\n\n<p>The linker will override any weak symbol if it finds a non-weak symbol. That trick is for example used by lex/flex to give you a generic main if you don't write your own. </p>\n\n<p>As StoryTeller mentioned it is not in the standard and not available on all platforms. Especially not on Windows.</p>\n"}], "owner": {"reputation": 165, "user_id": 3289737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/323898e88efdce76de6482fa681b3e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Coconut", "link": "https://stackoverflow.com/users/3289737/coconut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 55933133, "answer_count": 1, "score": 0, "last_activity_date": 1556698436, "creation_date": 1556695860, "question_id": 55932955, "link": "https://stackoverflow.com/questions/55932955/how-to-include-a-cpp-file-for-all-the-function-and-classes-but-ignore-the-main-f", "title": "How to include a cpp file for all the function and classes but ignore the main function?", "body": "<p>I used to use python and now I'm shifting to c++ for efficiency. I used to have the habit to test the library file with a main function, just to make sure all the functions and classes are working fine. And </p>\n\n<pre><code>if __name__ == \"__main__\":\n    main()\n</code></pre>\n\n<p>works really well even if I need to import the file for other codes. </p>\n\n<p>However, I am not sure how can I do the same for c++. I know I can comment out main function in the library file before I want to include that file. But I would really like to know is there any equivalent method in C++.</p>\n"}, {"tags": ["c++", "c++11", "atomic", "memory-model"], "comments": [{"owner": {"reputation": 8888, "user_id": 4967403, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/JjcvA.jpg?s=128&g=1", "display_name": "J. Antonio Perez", "link": "https://stackoverflow.com/users/4967403/j-antonio-perez"}, "edited": false, "score": 0, "creation_date": 1556698217, "post_id": 55932839, "comment_id": 98519368, "body": "See <a href=\"https://stackoverflow.com/questions/55932983/will-calling-thread-see-modifications-to-local-variables-after-thread-join#55932983\">this question</a> for an answer with regard to thread.join() (The answer is yes for thread.join())"}, {"owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "edited": false, "score": 0, "creation_date": 1556710052, "post_id": 55932839, "comment_id": 98523586, "body": "I asked a <a href=\"https://stackoverflow.com/questions/47459833/does-the-c-memory-model-provide-guarantees-about-the-operations-of-constructor\">similar question about constructors</a>."}, {"owner": {"reputation": 3284, "user_id": 1487069, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/jsf93.png?s=128&g=1", "display_name": "Carlo Wood", "link": "https://stackoverflow.com/users/1487069/carlo-wood"}, "edited": false, "score": 0, "creation_date": 1557044224, "post_id": 55932839, "comment_id": 98628254, "body": "As is also already answered; the join() causes a &quot;normal&quot; sequenced-before relationship - the same as you have within a single thread when one instruction is put before another; so in that sense you can see this a &quot;the same&quot; thread and therefore an atomic is not needed."}], "answers": [{"tags": [], "owner": {"reputation": 1358, "user_id": 5357986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rea6W.jpg?s=128&g=1", "display_name": "Oliort", "link": "https://stackoverflow.com/users/5357986/oliort"}, "is_accepted": true, "score": 3, "last_activity_date": 1557318682, "last_edit_date": 1557318682, "creation_date": 1556698597, "answer_id": 55933368, "question_id": 55932839, "link": "https://stackoverflow.com/questions/55932839/are-there-any-implicit-memory-barriers-in-c/55933368#55933368", "title": "Are there any implicit memory barriers in C++", "body": "<p><code>thread.join()</code> and <code>promise.set_value()</code>/<code>future.wait()</code> guarantee to imply memory barriers.</p>\n\n<p>Using <code>atomic_bool</code> is necessary if you don't want the compiler to reorder boolean check or assignment with other code. But in that particular case you can use not atomic <code>bool</code>. That <code>flag</code> will be guaranteed to be <code>true</code> in the moment of check if you don't use it in any other place, as the assignment and check are on the opposite sides of synchronisation point (<code>fut.get()</code>) (forcing the compiler to load real <code>flag</code> value) and the function <code>runInThreadPoolBlocking()</code> is guaranteed to finish only after the lambda is executed.</p>\n\n<p>Quoting from <a href=\"http://www.cplusplus.com/reference/future/future/get/\" rel=\"nofollow noreferrer\">cplusplus.com</a> for <code>future::get()</code>, for example:</p>\n\n<blockquote>\n  <p><strong>Data races</strong></p>\n  \n  <hr>\n  \n  <p>The future object is modified. The shared state is accessed as an\n  atomic operation (causing no data races).</p>\n</blockquote>\n\n<p>The same is for <code>promise::set_value()</code>. Besides other stuff </p>\n\n<blockquote>\n  <p>... atomic operation (causing no data races) ...</p>\n</blockquote>\n\n<p>means no one of the conflicting evaluations happens before another (strict memory ordering).</p>\n\n<p>So do all of <code>std::</code> multithreading synchronization primitives and tools, where you expect some operations to occur only before or after the synchronization point (like <code>std::mutex::lock()</code> or <code>unlock()</code>, <code>thread::join()</code>, etc.).</p>\n\n<p>Note that any operations on the thread object itself are not synchronized with <code>thread::join()</code> (unlike the operations within the thread it represents).</p>\n"}, {"comments": [{"owner": {"reputation": 1358, "user_id": 5357986, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rea6W.jpg?s=128&g=1", "display_name": "Oliort", "link": "https://stackoverflow.com/users/5357986/oliort"}, "edited": false, "score": 0, "creation_date": 1556704540, "post_id": 55934383, "comment_id": 98521570, "body": "What do you mean by shared? I think the author of the question asks if the &quot;other&quot; code in his example will be enough to put just <code>bool</code> instead of atomic in that particular case."}], "tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": false, "score": -2, "last_activity_date": 1556705610, "last_edit_date": 1556705610, "creation_date": 1556704000, "answer_id": 55934383, "question_id": 55932839, "link": "https://stackoverflow.com/questions/55932839/are-there-any-implicit-memory-barriers-in-c/55934383#55934383", "title": "Are there any implicit memory barriers in C++", "body": "<pre><code>std::atomic_bool flag{false}; // &lt;- does this need to be atomic?\n</code></pre>\n\n<p><strong>Yes</strong>.</p>\n\n<p>The call:</p>\n\n<pre><code>prom.get_future()\n</code></pre>\n\n<p>returns a <code>std::future&lt;void&gt;</code> object.</p>\n\n<p>For the future, the reference says the following:</p>\n\n<blockquote>\n  <p>The class template std::future provides a mechanism to access the\n  result of asynchronous operations:</p>\n  \n  <p>An asynchronous operation (created via std::async, std::packaged_task, or std::promise) can provide a std::future object\n  to the creator of that asynchronous operation. </p>\n  \n  <p>The creator of the asynchronous operation can then use a variety of methods to query, wait for, or extract a value from the\n  std::future. <strong>These methods may block if the asynchronous operation has\n  not yet provided a value.</strong> </p>\n  \n  <p>When the asynchronous operation is ready to send a result to the creator, it can do so by modifying shared state (e.g.\n  std::promise::set_value) that is linked to the creator's std::future. </p>\n  \n  <p>Note that std::future references shared state that is not shared with any other asynchronous return objects (as opposed to\n  std::shared_future).</p>\n</blockquote>\n\n<p>You don't store a 'return' value here so the point is kind of mute, and since there is no other guarentees (and the whole idea is that threads may run in parallel anyway ! ) you need to keep the bool atomic if it's shared !</p>\n"}], "owner": {"reputation": 3242, "user_id": 44000, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/47b18e559bb2c9c92abcf7a0de8d51db?s=128&d=identicon&r=PG", "display_name": "Milan", "link": "https://stackoverflow.com/users/44000/milan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "accepted_answer_id": 55933368, "answer_count": 2, "score": 4, "last_activity_date": 1557318682, "creation_date": 1556695139, "question_id": 55932839, "link": "https://stackoverflow.com/questions/55932839/are-there-any-implicit-memory-barriers-in-c", "title": "Are there any implicit memory barriers in C++", "body": "<p>In the following code, is using atomics necessary to guarantee race-free semantics on all platforms or does the use the use of a promise.set_value/future.wait imply some kind of implicit memory barrier that would allow me to rely on the flag write having become visible to the outer thread?</p>\n\n<pre><code>std::atomic_bool flag{false}; // &lt;- does this need to be atomic?\nrunInThreadPoolBlocking([&amp;]() {\n    // do something\n    flag.store(true);\n});\nif (flag.load()) // do something\n\n\n// simplified runInThreadPoolBlocking implementation\ntemplate &lt;typename Callable&gt;\nvoid runInThreadPoolBlocking(Callable func)\n{\n    std::promise&lt;void&gt; prom;\n    auto fut = prom.get_future();\n\n    enqueueToThreadPool([&amp;]() {\n        func();\n        prom.set_value();\n    });\n\n    fut.get();\n}\n</code></pre>\n\n<p>In general, are there any \"implicit\" memory barriers guaranteed by the standard for things like thread.join() or futures?</p>\n"}, {"tags": ["php", "c++", "get", "esp8266", "nodemcu"], "comments": [{"owner": {"reputation": 1817, "user_id": 7556604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hgWR8.jpg?s=128&g=1", "display_name": "Clonk", "link": "https://stackoverflow.com/users/7556604/clonk"}, "edited": false, "score": 0, "creation_date": 1557215788, "post_id": 55932766, "comment_id": 98679821, "body": "Open a websocket between your device and your server. Once the device status is updated send a message to the device using the opened websocket."}, {"owner": {"reputation": 2760, "user_id": 7308680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8CFKQ.jpg?s=128&g=1", "display_name": "Slaven Tojic", "link": "https://stackoverflow.com/users/7308680/slaven-tojic"}, "reply_to_user": {"reputation": 1817, "user_id": 7556604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hgWR8.jpg?s=128&g=1", "display_name": "Clonk", "link": "https://stackoverflow.com/users/7556604/clonk"}, "edited": false, "score": 0, "creation_date": 1557247248, "post_id": 55932766, "comment_id": 98697762, "body": "@Clonk thanks for the tip, but I already tried that, I have trouble to find an working example on the internet. I know how to code a websocket client on the NodeMCU board but I have trouble to code a websocket server on a shared hosting server, if it&#39;s possible at all. I also got some alternatives like MQTT but I can&#39;t use them on a shared hosting website. I am trying to find a low cost solution (around 7\u20ac/month),and for MQTT i have to use a VPS server (around 25\u20ac/month)"}, {"owner": {"reputation": 1817, "user_id": 7556604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hgWR8.jpg?s=128&g=1", "display_name": "Clonk", "link": "https://stackoverflow.com/users/7556604/clonk"}, "edited": false, "score": 0, "creation_date": 1557247562, "post_id": 55932766, "comment_id": 98697886, "body": "Ask how to open a websocket server side then  :). Have you taken a look at socket.io  ?"}], "answers": [{"tags": [], "owner": {"reputation": 82, "user_id": 11077935, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M24uO.jpg?s=128&g=1", "display_name": "Majid Yousefi", "link": "https://stackoverflow.com/users/11077935/majid-yousefi"}, "is_accepted": false, "score": 0, "last_activity_date": 1557060989, "creation_date": 1557060989, "answer_id": 55992180, "question_id": 55932766, "link": "https://stackoverflow.com/questions/55932766/postpone-http-get-response-until-the-user-changes-the-value-in-the-database/55992180#55992180", "title": "Postpone HTTP GET response until the user changes the value in the database", "body": "<p>You need a live connection between your device and server.\nSocket is a good solution i think.\nyou can see this article :</p>\n\n<p><a href=\"https://blog.tommyku.com/blog/communication-between-cpp-and-php-program-using-socket/\" rel=\"nofollow noreferrer\">https://blog.tommyku.com/blog/communication-between-cpp-and-php-program-using-socket/</a></p>\n\n<p>to get help.</p>\n\n<p>But personally i always prefer easy and fast ways with less change in my codes.</p>\n\n<p>So :</p>\n\n<p>instead get involved with complex socket programming \nyou can use in-memory data structure store like <a href=\"https://redis.io/\" rel=\"nofollow noreferrer\">https://redis.io/</a> which response very faster than Mysql without any serious side-effect in your server (Php script) and then you don't need to change \nNodeMCU(ESP8266) codes but Php code to use Redis. </p>\n"}, {"tags": [], "owner": {"reputation": 1343, "user_id": 984415, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/rMvNp.gif?s=128&g=1", "display_name": "lilHar", "link": "https://stackoverflow.com/users/984415/lilhar"}, "is_accepted": false, "score": 0, "last_activity_date": 1557263839, "last_edit_date": 1557263839, "creation_date": 1557263356, "answer_id": 56030506, "question_id": 55932766, "link": "https://stackoverflow.com/questions/55932766/postpone-http-get-response-until-the-user-changes-the-value-in-the-database/56030506#56030506", "title": "Postpone HTTP GET response until the user changes the value in the database", "body": "<p>\"It's not a bug, it's a feature.\"</p>\n\n<p>PHP was designed specifically to avoid these kind of notifications, and with good reason: They're an extremely vulnerable attack vector. If you're doing this in a production environment, I'd strongly suggest against this particular data-flow. In essence, what you're needing to do is turn the client into a server that accepts a connection from another server... a client server that doesn't have the reliable layers of security that your server (probably) has.  </p>\n\n<p>Now, that is annoying for those of us who actually want to do it. However, there is a recommended work-around without sacrificing your security. PHP is pretty much, hands down, the most secure language for the web. And it's not giving up that anytime soon. And this kind of situation where the standard solution is \"use another language.\"</p>\n\n<p>What you do is set up what's known as a push notification server. It's whole goal is a secure receiver go-between for less secure data transmissions. You have your database server communicate with the push server (which is likely nodejs or similar with a simple RESTapi for your database server). And you have a javascript your client uses that listens ONLY for a hash from that push server that corresponds with a hash supplied for their session for notifications. Then, when your push server gets pinged, it sends the information-less hex hash (which is purged of any non-hex information for security) at which point your front-end client knows \"Hey, I should poll the server for additional information.\" At which point it does, and then you can let the client know what has updated.</p>\n"}, {"comments": [{"owner": {"reputation": 2760, "user_id": 7308680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8CFKQ.jpg?s=128&g=1", "display_name": "Slaven Tojic", "link": "https://stackoverflow.com/users/7308680/slaven-tojic"}, "edited": false, "score": 0, "creation_date": 1557559723, "post_id": 56085530, "comment_id": 98813368, "body": "Thank you for the answer, your example postpones the HTTP response, but It is  also constantly querying the database inside the while loop. So I don&#39;t get any performance improvement because you are now querying the db every 100ms. My main problem was that the device queries the db every 5 seconds, so I wanted to postpone the response so that the database is queried only when the user changes the device status."}, {"owner": {"reputation": 668, "user_id": 10135377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f76366adbcfba903266a9d86362771e?s=128&d=identicon&r=PG&f=1", "display_name": "ShapeOfMatter", "link": "https://stackoverflow.com/users/10135377/shapeofmatter"}, "reply_to_user": {"reputation": 2760, "user_id": 7308680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8CFKQ.jpg?s=128&g=1", "display_name": "Slaven Tojic", "link": "https://stackoverflow.com/users/7308680/slaven-tojic"}, "edited": false, "score": 0, "creation_date": 1557581995, "post_id": 56085530, "comment_id": 98818174, "body": "Somehow you have to get an <i>asynchronous</i> message <i>from</i> the host <i>to</i> the client. Polling is the normal way to do that. You&#39;re already trying websockets, which is good but I suspect you&#39;re also going to need some kind of OS pipe within the Host server (to get the message from the process that handles the button-click-POST to the process that has the websocket). If you really want to not have a poll-style process (and I still suspect polling is a fine solution for you), then see if Redis will work (credit to <a href=\"https://stackoverflow.com/users/11077935/majid-yousefi\">Majid Yousefi</a>!)."}, {"owner": {"reputation": 668, "user_id": 10135377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f76366adbcfba903266a9d86362771e?s=128&d=identicon&r=PG&f=1", "display_name": "ShapeOfMatter", "link": "https://stackoverflow.com/users/10135377/shapeofmatter"}, "reply_to_user": {"reputation": 2760, "user_id": 7308680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8CFKQ.jpg?s=128&g=1", "display_name": "Slaven Tojic", "link": "https://stackoverflow.com/users/7308680/slaven-tojic"}, "edited": false, "score": 1, "creation_date": 1557582089, "post_id": 56085530, "comment_id": 98818203, "body": "And more in keeping with my original tongue-in-cheek answer: Could you send the device an email?"}, {"owner": {"reputation": 2760, "user_id": 7308680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8CFKQ.jpg?s=128&g=1", "display_name": "Slaven Tojic", "link": "https://stackoverflow.com/users/7308680/slaven-tojic"}, "edited": false, "score": 0, "creation_date": 1557583658, "post_id": 56085530, "comment_id": 98818558, "body": "Sorry but I&#39;am not using websockets I am only sending HTTP request to the server. I would rather use websockets but I don&#39;t know how to implement a websocket server on a shared hosting website."}, {"owner": {"reputation": 2760, "user_id": 7308680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8CFKQ.jpg?s=128&g=1", "display_name": "Slaven Tojic", "link": "https://stackoverflow.com/users/7308680/slaven-tojic"}, "edited": false, "score": 0, "creation_date": 1557583801, "post_id": 56085530, "comment_id": 98818582, "body": "I like your email idea, I have to see if it&#39;s possible"}], "tags": [], "owner": {"reputation": 668, "user_id": 10135377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f76366adbcfba903266a9d86362771e?s=128&d=identicon&r=PG&f=1", "display_name": "ShapeOfMatter", "link": "https://stackoverflow.com/users/10135377/shapeofmatter"}, "is_accepted": false, "score": 0, "last_activity_date": 1557527184, "creation_date": 1557527184, "answer_id": 56085530, "question_id": 55932766, "link": "https://stackoverflow.com/questions/55932766/postpone-http-get-response-until-the-user-changes-the-value-in-the-database/56085530#56085530", "title": "Postpone HTTP GET response until the user changes the value in the database", "body": "<p>I'd like to suggest that your current solution is <em>fine</em>. </p>\n\n<p>You have a device that needs to know a value that's store in a remote database. As far as the device is concerned, the value could change at any time, and the device needs to update its own state when the remote value changes.</p>\n\n<p>Having it act as a Host that receives connections or notifications of any kind from the remote server would probably be problematic. You mentioned that you'd have to set up port-forwarding. You'd also be adding the security concerns of a Host server to this device, and you'd need to worry about maintaining a consistent IP address (or something).</p>\n\n<p>The ideal solution will depend on <em>what</em> you're trying to accomplish. <em>Why</em> don't you want to poll the server every five seconds?</p>\n\n<p>Of course the actual question you asked was </p>\n\n<blockquote>\n  <p>how [to] postpone the HTTP GET response until the moment that the user changes the device status with a button click?</p>\n</blockquote>\n\n<p>Postponing the <em>response</em> is hardly a normal thing to do, and you're going to run into all kinds of problems with timeouts, which I'm not going to address here (for brevity), and it'll be a struggle to get your system to do anything <em>else</em> at the same time, but it <em>can</em> be done:</p>\n\n<p><strong>client device</strong>:</p>\n\n<pre><code>static DateTime lastUpdated = now();//or whatever\n\nvoid loop() \n{\n  HTTPClient http; //Declare object of class HTTPClient\n  String getData, Link, payload;\n  bool succeeded;\n\n  //HTTP GET REQUEST\n  getData = \"?device=\" + deviceName + \"&amp;lastUpdated=\" + lastUpdated.asEpochInt(); //or whatever\n  Link = \"http://.../getStatus.php\" + getData;\n\n  try\n  { \n    http.begin(Link); \n    int httpCode = http.GET(); //Send the request\n    payload = http.getString(); //Get the response from database\n    succeed = true;\n  }\n  catch(TimeoutError te) //or whatever\n  {\n    succeeded = false;\n  }\n\n  if(succeeded)\n  {\n    lastUpdated = now()\n\n    if(payload==\"ON\")\n    {\n      digitalWrite(LEDPin, HIGH);//change pin status\n    }\n    else if(payload==\"OFF\")\n    {\n      digitalWrite(LEDPin, LOW);//change pin status\n    }\n  }\n\n  http.end(); \n\n  //delay(5000); //send the next one right away.\n}  \n</code></pre>\n\n<p><strong>host server</strong></p>\n\n<pre class=\"lang-php prettyprint-override\"><code>&lt;?php\n\n$db = mysqli_connect(...);\n\nif(!empty($_GET['device']))\n{\n  $device_name = $_GET['device'];\n  $threshold = DateTimeImmutable::createFromFormat('U', $_GET['lastUpdated'])\n\n  $query_status = \"SELECT status FROM devices WHERE device = ? AND lastUpdated &gt; ?\";\n\n  $stmt = mysqli_prepare($db, $query_status);\n  if ($stmt === false) {\n     error_log(mysqli_error($db));\n     die(\"Sorry, there has been a software error\");\n  }\n\n  $ok = mysqli_stmt_bind_param($stmt, \"s\", $device_name)\n    &amp;&amp; mysqli_stmt_bind_param($stmt, \"s\", $threshold-&gt;format('Y-m-d H:i:s'));\n  if ($ok === false) {\n    error_log(mysqli_stmt_error($db));\n    die(\"Sorry, there has been a software error\");\n  }\n\n  $waiting = TRUE;\n  while($waiting)\n  {\n    $ok = mysqli_stmt_execute($stmt);\n    if ($ok === false) {\n      error_log(mysqli_stmt_error($db));\n      die(\"Sorry, there has been a software error\");\n    }\n\n    $result = $stmt-&gt;get_result();\n\n    if ($result-&gt;num_rows &gt; 0) \n    {\n      $waiting = FALSE;\n      while($row = $result-&gt;fetch_assoc()) \n      {\n        echo $row[\"status\"];\n      }\n    }\n    else {\n      usleep(100);\n    }\n  }\n}//or else what?\n?&gt;\n</code></pre>\n\n<p>And we could take this even farther (make it even worse) by pushing our while loop down into the MySQL, but that would require learning the details of MySQL Stored Procedures, and no amount of internet points is worth that.</p>\n\n<h1>Just because you can, doesn't mean you should.</h1>\n"}], "owner": {"reputation": 2760, "user_id": 7308680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8CFKQ.jpg?s=128&g=1", "display_name": "Slaven Tojic", "link": "https://stackoverflow.com/users/7308680/slaven-tojic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1557527184, "creation_date": 1556694710, "last_edit_date": 1556960190, "question_id": 55932766, "link": "https://stackoverflow.com/questions/55932766/postpone-http-get-response-until-the-user-changes-the-value-in-the-database", "title": "Postpone HTTP GET response until the user changes the value in the database", "body": "<p>I have a NodeMCU (ESP8266) board that sends <code>HTTP GET</code> requests to a shared hosting database. To avoid port forwarding on my router I came up with a solution where my NodeMCU board periodically sends (every 5 seconds) a <code>HTTP GET</code> request to the database to see if the device status is changed by the user. </p>\n\n<pre><code>void loop() \n{\n   HTTPClient http; //Declare object of class HTTPClient\n   String getData, Link;\n\n   //HTTP GET REQUEST\n\n   getData = \"?device=\"+ deviceName ;\n   Link = \"http://.../getStatus.php\" + getData;\n\n   http.begin(Link); \n\n   int httpCode = http.GET(); //Send the request\n\n   String payload = http.getString(); //Get the response from database\n\n   if(payload==\"ON\")\n   {\n      digitalWrite(LEDPin, HIGH);//change pin status\n   }\n   else if(payload==\"OFF\")\n   {\n      digitalWrite(LEDPin, LOW);//change pin status\n   }\n\n   http.end(); \n\n   delay(5000);//Send GET request every 5 seconds\n}  \n</code></pre>\n\n<p>The user changes the device status over a website (with a button click) and the device status is then saved in the database. When the device sends the <code>HTTP GET</code> request to the server the <code>getStatus.php</code> file queries the database for the current device status and sends the response back to the device.</p>\n\n<pre><code>&lt;?php\n\n    $db = mysqli_connect(...);\n\n    if(!empty($_GET['device']))\n    {\n        $device_name = $_GET['device'];\n\n        $query_status = \"SELECT status FROM devices WHERE device = ?\";\n\n        $stmt = mysqli_prepare($db, $query_status);\n        if ($stmt === false) {\n            error_log(mysqli_error($db));\n            die(\"Sorry, there has been a software error\");\n        }\n        $ok = mysqli_stmt_bind_param($stmt, \"s\", $device_name);\n        if ($ok === false) {\n            error_log(mysqli_stmt_error($db));\n            die(\"Sorry, there has been a software error\");\n        }\n        $ok = mysqli_stmt_execute($stmt);\n        if ($ok === false) {\n            error_log(mysqli_stmt_error($db));\n            die(\"Sorry, there has been a software error\");\n        }\n\n        $result = $stmt-&gt;get_result();\n\n        if ($result-&gt;num_rows &gt; 0) \n        {\n            while($row = $result-&gt;fetch_assoc()) \n            {\n                echo $row[\"status\"];\n            }\n        } \n    }\n?&gt;\n</code></pre>\n\n<p>I am trying to find a solution where I don't have to query the database every 5 second, but instead only when the user changes the device status. </p>\n\n<p>So my question is how postpone the <code>HTTP GET</code> response until the moment that the user changes the device status with a button click?</p>\n"}, {"tags": ["c++", "linux", "opencv", "cmake", "raspberry-pi"], "comments": [{"owner": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 3, "creation_date": 1556694575, "post_id": 55932701, "comment_id": 98518331, "body": "You need Linux ARM builds of all libraries you use. You usually need to cross-compile them yourself. So you need to cross-compile opencv as well as all libraries opencv itself depends on."}, {"owner": {"reputation": 11, "user_id": 8548163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ffbf8d6678f541cde132d3e2c4ce1a?s=128&d=identicon&r=PG&f=1", "display_name": "Prathamesh Konkar", "link": "https://stackoverflow.com/users/8548163/prathamesh-konkar"}, "reply_to_user": {"reputation": 46978, "user_id": 856199, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CPtki.png?s=128&g=1", "display_name": "Nikos C.", "link": "https://stackoverflow.com/users/856199/nikos-c"}, "edited": false, "score": 0, "creation_date": 1556787859, "post_id": 55932701, "comment_id": 98550534, "body": "@NikosC. tried cross compile libraries that are required to cross-compile opencv c++ program by reading some tutorials on internet. but I couldn&#39;t do that. Then I just downloaded libraries of arm arch (.so files) and copied into /usr/lib/arm-linux-gnueabihf/. Now this &quot;//usr/local/lib/libopencv_video.so: file not recognized: File format not recognized&quot; is gone. But now I&#39;m getting &quot;/usr/lib/gcc-cross/arm-linux-gnueabihf/7/../../../../arm-li&zwnj;&#8203;nux-gnueabihf/bin/ld&zwnj;&#8203;: cannot find -lopencv_aruco&quot; errors like this. Please help."}], "owner": {"reputation": 11, "user_id": 8548163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0ffbf8d6678f541cde132d3e2c4ce1a?s=128&d=identicon&r=PG&f=1", "display_name": "Prathamesh Konkar", "link": "https://stackoverflow.com/users/8548163/prathamesh-konkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556743250, "creation_date": 1556694245, "last_edit_date": 1556743250, "question_id": 55932701, "link": "https://stackoverflow.com/questions/55932701/cross-compilation-of-c-program-which-includes-opencv-header-files-fails", "title": "Cross compilation of C++ program which includes OpenCV header files fails", "body": "<p>I can cross compile a simple C++ program. (ex. <code>g++ -o test test.cpp &amp; arm-linux-gnueabihf-g++ -o test test.cpp</code>).\nBut when I include OpenCV header files in a C++ program and cross compile it, it throws an error.(ex. <code>arm-linux-gnueabihf-g++ -o ocv_test ocv_test.cpp $(pkg-config --libs --cflags opencv)</code>).</p>\n\n<p>Also I can compile successfully with the default compiler i.e. g++.(ex. <code>g++ -o ocv_test ocv_test.cpp $(pkg-config --libs --cflags opencv)</code>)</p>\n\n<p>I executed cmake with</p>\n\n<pre><code>-D CMAKE_TOOLCHAIN_FILE=../platforms/linux/arm.toolchain.cmake \\.\n</code></pre>\n\n<p>as per the opencv docs. That didn't help.</p>\n\n<p>I added opencv include dir in compilation cmd ie <code>-I/path/to/opencv/include</code> and removing <code>pkg-config</code>. That didn't help.</p>\n\n<p>I tried changing arm-gnueabi.toolchain.cmake by exporting <code>PKG_CONFIG_LIBDIR</code> as per suggestion by someone. That didn't help.</p>\n\n<p>I got the following error:</p>\n\n<pre><code>__/usr/lib/gcc-cross/arm-linux-gnueabihf/7/../../../../arm-linux-gnueabihf/bin/ld: cannot find -lopencv_shape\n//usr/local/lib/libopencv_stitching.so: file not recognized: File format not recognized\ncollect2: error: ld returned 1 exit status__\n</code></pre>\n\n<p>I want my cross-compiled OpenCV app to run on a RaspberryPI.\n<em>I'm confused. Cross compiling OpenCV sources with the <code>-D CMAKE_TOOLCHAIN_FILE</code> option should allow us to cross-compile OpenCV C++ programs. Otherwise we will have to cmake or make (cross-compile) every OpenCV C++ program seperately on a build machine.</em></p>\n"}, {"tags": ["c++", "scanf", "language-lawyer", "cstdio"], "answers": [{"comments": [{"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1556695463, "post_id": 55932815, "comment_id": 98518575, "body": "So the UB isn&#39;t due to the mismatched widths, but rather just because the <code>short</code>s aren&#39;t <code>int</code>s? So even on a system where <code>sizeof(short) == sizeof(int)</code> this would still be UB, correct?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1556695494, "post_id": 55932815, "comment_id": 98518583, "body": "@AviGinsburg - Exactly."}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1556695764, "post_id": 55932815, "comment_id": 98518657, "body": "Why doesn&#39;t the &quot;or if the result of the conversion cannot be represented in the object&quot; part make it defined (in the case where <code>sizeof(short) == sizeof(int)</code>)? I guess that would be &quot;and&quot; instead of &quot;or&quot; but then the second condition doesn&#39;t make sense, as if the object has an appropriate type, then it should be representable by the object."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1556695965, "post_id": 55932815, "comment_id": 98518708, "body": "@AviGinsburg - Those are two separate conditions that must both hold. Put another way, it&#39;s well defined only if the type fits exactly AND the character sequence represents a value in the range of the type. Edit: Yes to your own ninja edit :)"}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1556696008, "post_id": 55932815, "comment_id": 98518715, "body": "Got it. Thanks."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1556695036, "creation_date": 1556695036, "answer_id": 55932815, "question_id": 55932647, "link": "https://stackoverflow.com/questions/55932647/is-there-a-guaranteed-order-of-assignment-in-scanf/55932815#55932815", "title": "Is there a guaranteed order of assignment in scanf?", "body": "<p>You saw no mention in N4810 because when it comes to the C standard library the specification is mostly deferred to <em>\"ISO/IEC 9899:2011, Programming languages \u2014 C\"</em>. If we take a look in <a href=\"https://port70.net/~nsz/c/c11/n1570.html\" rel=\"nofollow noreferrer\">N1570</a> (C11 draft), it says this about the <code>scanf</code>\nfamily of functions:</p>\n\n<blockquote>\n  <p><strong>7.21.6.2 The fscanf function</strong> (emphasis mine)</p>\n  \n  <p><a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.21.6.2p10\" rel=\"nofollow noreferrer\">10</a> Except in the case of a % specifier, the input item (or, in\n  the case of a %n directive, the count of input characters) is\n  converted to a type appropriate to the conversion specifier. If the\n  input item is not a matching sequence, the execution of the directive\n  fails: this condition is a matching failure. Unless assignment\n  suppression was indicated by a *, the result of the conversion is\n  placed in the object pointed to by the first argument following the\n  format argument that has not already received a conversion result.\n  <strong>If this object does not have an appropriate type</strong>, or if the result of the conversion cannot be represented in the object, <strong>the behavior\n  is undefined</strong>.</p>\n</blockquote>\n\n<p>So your sample working is indeed a fluke born out of undefined behavior.</p>\n"}], "owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 55932815, "answer_count": 1, "score": 2, "last_activity_date": 1556696249, "creation_date": 1556693887, "question_id": 55932647, "link": "https://stackoverflow.com/questions/55932647/is-there-a-guaranteed-order-of-assignment-in-scanf", "title": "Is there a guaranteed order of assignment in scanf?", "body": "<p>I came across some code and was wondering if it was just a fluke that it worked as expected or was just bad practice.\nConsider the following MCVE (<a href=\"https://ideone.com/bJThbx\" rel=\"nofollow noreferrer\">ideone</a>):</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nstruct dummyStruct\n{\n    unsigned short min[4];\n    unsigned short max[4];\n    int            dummyBuffer; // This just happens to be here as a real variable in the original code, not just as a buffer.\n};\n\n\nint main()\n{\n    dummyStruct db;\n    // Note that the size of the short is assumed to be half of that of the %d specifier\n    sscanf(\"  123,   456,  789,   112\", \"%d, %d, %d, %d\", db.min+0, db.min+1, db.min+2, db.min+3);\n    sscanf(\"29491, 29491, 29491, 29491\", \"%d, %d, %d, %d\", db.max+0, db.max+1, db.max+2, db.max+3);\n    db.dummyBuffer = 1234;\n    printf(\"%hd, %hd, %hd, %hd\\n\", db.min[0], db.min[1], db.min[2], db.min[3]);\n    printf(\"%hd, %hd, %hd, %hd\\n\", db.max[0], db.max[1], db.max[2], db.max[3]);\n    printf(\"%d\\n\", db.dummyBuffer);\n\n    return 0;\n}\n</code></pre>\n\n<p>Are the contents of the struct guaranteed by the standard, or is this undefined behavior? I saw no mention of this in <a href=\"https://github.com/cplusplus/draft/blob/master/papers/n4810.pdf\" rel=\"nofollow noreferrer\">N4810</a>.\nAlternatively, if we reversed the order of the variables, e.g.</p>\n\n<pre><code>printf(\"%hd, %hd, %hd, %hd\\n\", db.min[0], db.min[2], db.min[1], db.min[3]);\n</code></pre>\n\n<p>are the contents of <code>db.min</code> guaranteed? Is the order of the parameters (from left to right) the order of assignment? Also note that I'm not asking why this is bad practice, even if defined. Nor do I need comments telling me not to use <code>scanf</code>. I'm not.</p>\n"}, {"tags": ["c++", "fltk"], "answers": [{"comments": [{"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 0, "creation_date": 1557314522, "post_id": 56013855, "comment_id": 98721295, "body": "cout and end are actually std::cout and std::endl so it looks like &quot;using std namespace&quot; is used in one of your headers"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9683548"}, "edited": false, "score": 0, "creation_date": 1557333134, "post_id": 56013855, "comment_id": 98732160, "body": "ah, i understand now, yeah i use it for cout and endl, thanks"}], "tags": [], "owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "is_accepted": false, "score": 0, "last_activity_date": 1557187690, "creation_date": 1557187690, "answer_id": 56013855, "question_id": 55932525, "link": "https://stackoverflow.com/questions/55932525/how-to-draw-things-in-a-loop-fltk-c/56013855#56013855", "title": "How to draw things in a loop (FLTK/C++)?", "body": "<p>The code here is a declaration: it does not call the code at all</p>\n\n<pre><code>for (int i = 1; i &lt; 10; i++) {\n    int x = 10 * i, y = 10 * i;\n    int w = 70 * i, h = 70 * i;\n    void fl_push_clip(int x, int y, int w, int h); // This is a declaration\n\n    cout &lt;&lt; \"TEST\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>If you wish to call the routine use</p>\n\n<pre><code>for (int i = 1; i &lt; 10; i++) {\n    int x = 10 * i, y = 10 * i;\n    int w = 70 * i, h = 70 * i;\n    fl_push_clip(x, y, w, h); // This is a call\n\n    cout &lt;&lt; \"TEST\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Do you have std namespace defined somewhere?</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9683548"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1557187690, "creation_date": 1556692996, "question_id": 55932525, "link": "https://stackoverflow.com/questions/55932525/how-to-draw-things-in-a-loop-fltk-c", "title": "How to draw things in a loop (FLTK/C++)?", "body": "<p>I have a problem drawing more than one line, it only show one line i use </p>\n\n<pre><code>void fl_push_clip(int x, int y, int w, int h);\n</code></pre>\n\n<p>but nothing seems to work</p>\n\n<p>I try something like this</p>\n\n<pre><code>for (int i = 1; i &lt; 10; i++) {\n        int x = 10 * i, y = 10 * i;\n        int w = 70 * i, h = 70 * i;\n        void fl_push_clip(int x, int y, int w, int h);\n\n        cout &lt;&lt; \"TEST\" &lt;&lt; endl;\n    }\n</code></pre>\n\n<p>i use cout to see if the for works</p>\n\n<pre><code>#include &lt;FL/Fl.H&gt;\n#include &lt;FL/Fl_Widget.H&gt;\n#include &lt;FL/Fl_Window.H&gt;\n#include &lt;FL/Fl_Input.H&gt;\n#include &lt;FL/Fl_Int_Input.H&gt;\n#include &lt;FL/Fl_Button.H&gt;\n#include &lt;FL/Fl_Color_Chooser.H&gt;\n\nint main(int argc, char ** argv)\n{\n    int width = 90, height = 80;\n    int rowmax = 4, colmax = 7;\n\n    window = new Fl_Window(colmax * width + 20, rowmax * height + 240);\n    window-&gt;color(FL_DARK_GREEN);\n\n    Fl_Int_Input input = new Fl_Int_Input(140, rowmax * height + 20, colmax * width - 160, 20, \"test1\");\n    input-&gt;labelfont(FL_BOLD + FL_ITALIC);\n\n    for (int i = 1; i &lt; 10; i++) {\n        int x = 10 * i, y = 10 * i;\n        int w = 70 * i, h = 70 * i;\n        void fl_push_clip(int x, int y, int w, int h);\n\n        cout &lt;&lt; \"TEST\" &lt;&lt; endl;\n    }   \n    window-&gt;end();\n    window-&gt;show(argc, argv);\n    return Fl::run();\n}\n</code></pre>\n\n<p>I expect to see if the for is useful to draw multiple shapes or find an alternative to do the same</p>\n"}, {"tags": ["c++", "algorithm", "design-patterns", "vector", "data-structures"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1556692587, "post_id": 55932409, "comment_id": 98517819, "body": "Can you show more code - include your declarations?"}, {"owner": {"reputation": 884, "user_id": 1443630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5LHlK.png?s=128&g=1", "display_name": "Mahesh Bansod", "link": "https://stackoverflow.com/users/1443630/mahesh-bansod"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1556692878, "post_id": 55932409, "comment_id": 98517896, "body": "@Galik added the declarations of vectors and classes"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1556696842, "post_id": 55932409, "comment_id": 98518950, "body": "Look up entity component system, it&#39;s a de facto standard structure for games."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1556898298, "post_id": 55932409, "comment_id": 98597104, "body": "Your question contains a contradiction. In the text, you state &quot;All drawable objects are movable&quot;, yet the code indicates the converse: <code>Movable</code> derives from <code>Drawable</code>, meaning that all movable objects are drawable."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1556898539, "post_id": 55932409, "comment_id": 98597236, "body": "As for the actual question: why do you have the different vectors in the first place? If your reason was good, then maybe its OK to have the same things in them. (Since you are storing pointers instead of copies, the overhead is not huge.) There are ways to make the vectors easier to maintain, but first you need to decide what you want."}, {"owner": {"reputation": 884, "user_id": 1443630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5LHlK.png?s=128&g=1", "display_name": "Mahesh Bansod", "link": "https://stackoverflow.com/users/1443630/mahesh-bansod"}, "reply_to_user": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1556906222, "post_id": 55932409, "comment_id": 98600583, "body": "@JaMiT i edited that sentence. I have different vectors so that I can call <code>move()</code> function on objects of <code>Movable</code> and <code>draw()</code> on all objects of <code>Drawable</code> in seperate functions. Also, if an object is out of bounds, then I can perform appropriate operation on it based on whether it is in <code>bullets</code> or <code>ships</code> vector. Thank you for your comment. Would be cool if you suggest an alternative to represent these things. It&#39;s not a really big project and I&#39;m doing it just to learn so I&#39;ll make any changes necessary to make it better. Thanks, again!"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1557242015, "post_id": 55932409, "comment_id": 98695053, "body": "Note that we don&#39;t know how you manage the lifetime of your objects. A valid answer to the question as written might not work in your specific situation. So use some judgement when evaluating answers."}], "answers": [{"comments": [{"owner": {"reputation": 884, "user_id": 1443630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5LHlK.png?s=128&g=1", "display_name": "Mahesh Bansod", "link": "https://stackoverflow.com/users/1443630/mahesh-bansod"}, "edited": false, "score": 0, "creation_date": 1556722136, "post_id": 55936631, "comment_id": 98529025, "body": "There maybe some objects that I only need to draw and not move, hence different vectors. Also, the <code>Drawable</code> class has only <code>draw()</code> method and not the <code>move()</code> method. Thanks for answering. Please elaborate your answer or comment if you think I missed something."}, {"owner": {"reputation": 363, "user_id": 11249957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6002dbfc2a513f20bbd1191118595a3c?s=128&d=identicon&r=PG&f=1", "display_name": "dodekja", "link": "https://stackoverflow.com/users/11249957/dodekja"}, "reply_to_user": {"reputation": 884, "user_id": 1443630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5LHlK.png?s=128&g=1", "display_name": "Mahesh Bansod", "link": "https://stackoverflow.com/users/1443630/mahesh-bansod"}, "edited": false, "score": 0, "creation_date": 1556724093, "post_id": 55936631, "comment_id": 98530053, "body": "@MaheshBansod A simple workaround would be either to implement the<code>move()</code> method, and leave it empty(which I advise against), or make a vector of <code>Movable</code> which would contain all the <code>Movable</code>, <code>Ship</code> and <code>Bullet</code> objects, and make another vector for <code>Drawable</code> which would contain only objects that are <code>Drawable</code> but not <code>Movable</code>"}, {"owner": {"reputation": 884, "user_id": 1443630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5LHlK.png?s=128&g=1", "display_name": "Mahesh Bansod", "link": "https://stackoverflow.com/users/1443630/mahesh-bansod"}, "edited": false, "score": 0, "creation_date": 1556724869, "post_id": 55936631, "comment_id": 98530459, "body": "That is actually what I&#39;ve done as you can see in the question. I&#39;ve also created <code>ships</code> and <code>bullets</code> vectors so that I can add their specific code in the future. Creating different vectors for each type of objects gives rise to the same problem mentioned in the question. I&#39;ll see the entity component system mentioned in a comment on my question if it&#39;s useful. Thanks for your reply."}, {"owner": {"reputation": 363, "user_id": 11249957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6002dbfc2a513f20bbd1191118595a3c?s=128&d=identicon&r=PG&f=1", "display_name": "dodekja", "link": "https://stackoverflow.com/users/11249957/dodekja"}, "reply_to_user": {"reputation": 884, "user_id": 1443630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5LHlK.png?s=128&g=1", "display_name": "Mahesh Bansod", "link": "https://stackoverflow.com/users/1443630/mahesh-bansod"}, "edited": false, "score": 0, "creation_date": 1556898615, "post_id": 55936631, "comment_id": 98597278, "body": "@MaheshBansod and what prevents you from adding the instances just into the vectors of their classes?"}], "tags": [], "owner": {"reputation": 363, "user_id": 11249957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6002dbfc2a513f20bbd1191118595a3c?s=128&d=identicon&r=PG&f=1", "display_name": "dodekja", "link": "https://stackoverflow.com/users/11249957/dodekja"}, "is_accepted": false, "score": -1, "last_activity_date": 1556715331, "creation_date": 1556715331, "answer_id": 55936631, "question_id": 55932409, "link": "https://stackoverflow.com/questions/55932409/how-do-i-prevent-adding-an-object-in-multiple-vectors/55936631#55936631", "title": "How do I prevent adding an object in multiple vectors?", "body": "<p>Since all <code>Movable</code>, <code>Ship</code> and <code>Bullet</code> are <code>Drawable</code>, why won't you just make a single vector of <code>Drawable</code> items and add all the the different classes inside? You will have just one pointer to all the different instances and you will have just one vector of these pointers. This solution might however require making <code>Drawable</code> an abstract class.</p>\n"}, {"comments": [{"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 0, "creation_date": 1557241873, "post_id": 55975179, "comment_id": 98694973, "body": "Or possibly use <code>weak_ptr</code> in the vectors, if they are not required to keep the object alive. You could do the deletions from the vectors when iterating over them."}], "tags": [], "owner": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "is_accepted": false, "score": 1, "last_activity_date": 1556907256, "creation_date": 1556907256, "answer_id": 55975179, "question_id": 55932409, "link": "https://stackoverflow.com/questions/55932409/how-do-i-prevent-adding-an-object-in-multiple-vectors/55975179#55975179", "title": "How do I prevent adding an object in multiple vectors?", "body": "<p>Assuming you are using a reasonably modern compiler, this is exactly why <a href=\"https://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\"><code>shared_ptr</code></a> exists.</p>\n\n<p>The problem is that you have no idea which vector owns the object, so you don't know which one to delete. <code>shared_ptr</code> takes are of this for you: it manages the lifetime of the object, and will delete it once the last reference to the object is destroyed.</p>\n\n<p>To create a new <code>Ship</code>, you could do something like this:</p>\n\n<pre><code>auto ship = std::make_shared&lt;Ship&gt;();\n\ndrawables.push_back(ship);\nmovables.push_back(ship);\nships.push_back(ship);\n</code></pre>\n\n<p>At this point <code>ship</code> has 4 references (one for each vector, and the <code>ship</code> variable itself). It will automatically be deleted once it has been removed from all three vectors and the local variable goes out of scope.</p>\n"}, {"tags": [], "owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "is_accepted": false, "score": 0, "last_activity_date": 1557241369, "creation_date": 1557241369, "answer_id": 56025499, "question_id": 55932409, "link": "https://stackoverflow.com/questions/55932409/how-do-i-prevent-adding-an-object-in-multiple-vectors/56025499#56025499", "title": "How do I prevent adding an object in multiple vectors?", "body": "<p>If you are going to maintain a container of (pointers to) all objects of a certain type, you may want to take a RAII approach. Have the object's constructor add to the container, and the destructor remove from it. You'd also want to make sure nothing else modifies the container, so it should be a private (static) member of your class, with a public method to provide read-only access.</p>\n\n<p>Even better, move this logic into its own class, so it can be re-used. This would also allow your existing containers to remain focused on what they currently do. They would just need a new data member of the helper class type.</p>\n\n<p>To ease removals, I would consider using a <code>list</code> instead of a <code>vector</code>. Also, it might be worth using <code>reference_wrapper</code> instead of pointers. A pointer can have a null value. While you can document that the container will have no null pointers, a <code>reference_wrapper</code> conveys this with no additional documentation.</p>\n\n<p>To get you started, here is the start of a helper class template you could use.</p>\n\n<pre><code>template &lt;class T&gt;\nclass All {\n        using ListType = std::list&lt; std::reference_wrapper&lt;T&gt; &gt;;\n\n    private:\n        static ListType the_list;\n        // A list's iterators are rarely invalidated. For a vector, you would\n        // not store an iterator but instead search when removing from the_list.\n        typename ListType::iterator list_it;\n\n    public:\n\n        // Read-only access to the list.\n        static const ListType &amp; list() { return the_list; }\n\n        // Construction\n        ListAll() : list_it(the_list.end()) {}  // If this constructor is needed\n        explicit ListAll(T &amp; data) : list_it(the_list.insert(the_list.end(), data)) {}\n\n        // Destruction\n        ~ListAll() { if ( list_it != the_list.end() ) the_list.erase(list_it); }\n\n        // Rule of 5\n        // You should also define or delete the copy constructor, move constructor,\n        // copy assignment, and move assignment.\n\n        // If you need the default constructor, then you probably want a method like:\n        //void set(T &amp; data);\n};\ntemplate &lt;class T&gt;\ntypename All&lt;T&gt;::ListType All&lt;T&gt;::the_list{};\n</code></pre>\n\n<p>Names are often tough to come by. I named this template based on getting something to iterate over, for example: <code>All&lt;Movable&gt;::list()</code>.</p>\n"}], "owner": {"reputation": 884, "user_id": 1443630, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/5LHlK.png?s=128&g=1", "display_name": "Mahesh Bansod", "link": "https://stackoverflow.com/users/1443630/mahesh-bansod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1557241369, "creation_date": 1556691936, "last_edit_date": 1556905844, "question_id": 55932409, "link": "https://stackoverflow.com/questions/55932409/how-do-i-prevent-adding-an-object-in-multiple-vectors", "title": "How do I prevent adding an object in multiple vectors?", "body": "<p>There are some objects that are <code>Drawable</code> and some that are <code>Movable</code>.<br>\nAll movable objects are dawable.<br>\nI store all the drawable objects in a vector called <code>drawables</code> and movable objects in a vector called <code>movables</code>. \nI also have vectors <code>ships</code> and <code>bullets</code> which contain objects of type <code>Ship</code> and <code>Bullet</code> respectively.\n<code>Ship</code> and <code>Bullet</code> both are <code>Movable</code> </p>\n\n<p>Here's the structure of the classes:  </p>\n\n<pre><code>class Drawable {\npublic:\n    void draw();\n};\n\nclass Movable : public Drawable {\npublic:\n    void move();\n}\n\nclass Ship : public Movable {\npublic:\n    Ship();\n}\n\nclass Bullet : public Movable {\npublic:\n    Bullet();\n}\n</code></pre>\n\n<p>The vectors are declared as follows:  </p>\n\n<pre><code>std::vector&lt;Drawable*&gt; drawables;\nstd::vector&lt;Movable*&gt; movables;\nstd::vector&lt;Ship*&gt; ships;\nstd::vector&lt;Bullet*&gt; bullets;\n</code></pre>\n\n<p>The thing is, that each time I create a Ship I have to add it in all the vectors i.e.   </p>\n\n<pre><code>drawables.push_back(ship);\nmovables.push_back(ship);\nships.push_back(ship);\n</code></pre>\n\n<p>I have created separate <code>drawables</code> and <code>movables</code> vectors since I have a <code>draw()</code> function which calls the <code>draw()</code> method of all objects in the <code>drawables</code> vector. Similarly, I have a <code>move()</code> function which calls the <code>move()</code> method of all objects in the <code>movables</code> vector.  </p>\n\n<p>My question is, how do I change the structure to prevent adding the same thing in different vectors. I also need to remove objects from all the vectors once it's purpose is done.<br>\nFor example, once the bullet hits someone or moves out of the screen, then I'll have to remove it from the vectors <code>drawables</code>, <code>movables</code> and <code>bullets</code> after searching it in all three vectors.<br>\nIt seems like I'm not using the correct approach for storing these objects. Please suggest an alternative.  </p>\n\n<p>This seems more like a software engineering question than a coding question. Please migrate the question to other forum if necessary.</p>\n"}, {"tags": ["c++", "linux", "linux-kernel"], "comments": [{"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1556707862, "post_id": 55932358, "comment_id": 98522769, "body": "Why do you expect -1 in all cases? There are 6144 bytes which can be read. Nonetheless, I would never rely on OS behavior, when I give unmapped memory to it."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1556713491, "post_id": 55932358, "comment_id": 98524983, "body": "<code>read</code> can return less than the requested number of bytes, and that is not an error. It shouldn&#39;t return more than 6144 bytes in this case due to the unmapped memory beyond that."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1556716515, "post_id": 55932358, "comment_id": 98526322, "body": "Surely the one-page result from the pipe is not a coincidence, but it\u2019s odd that it\u2019s exactly the middle half of the mapped region."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 2, "creation_date": 1556728353, "post_id": 55932358, "comment_id": 98531995, "body": "@DavisHerring On Linux, <code>PIPE_BUF</code> is 4096. Writes longer than <code>PIPE_BUF</code> to a pipe may be non-atomic."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1556733133, "post_id": 55932358, "comment_id": 98534121, "body": "@IanAbbott: Good point\u2014I thought it was larger."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1556788487, "post_id": 55932358, "comment_id": 98550886, "body": "@DavisHerring The pipe capacity is larger - usually 65536 (16 pages), but changeable on Linux, but <code>PIPE_BUF</code> is still 4096. Another possibility is that the python command might calling <code>write</code> with a maximum length of 4096, but I don&#39;t know."}, {"owner": {"reputation": 23, "user_id": 7742501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72de3a26ad19873c9da3995f9952c982?s=128&d=identicon&r=PG&f=1", "display_name": "B3n", "link": "https://stackoverflow.com/users/7742501/b3n"}, "reply_to_user": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1558986390, "post_id": 55932358, "comment_id": 99270160, "body": "@IanAbbott strace showed that Python is writing its output in two writes: first the 0x3000 A&#39;s, then a newline. So I do not think this is the explanation."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 0, "creation_date": 1559069520, "post_id": 55932358, "comment_id": 99301822, "body": "@B3n I have considered your point about strace, done a bit of detective work in the kernel source code, and posted an answer with what I think is the reason why only 4096 bytes were read from the kernel."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7742501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72de3a26ad19873c9da3995f9952c982?s=128&d=identicon&r=PG&f=1", "display_name": "B3n", "link": "https://stackoverflow.com/users/7742501/b3n"}, "edited": false, "score": 0, "creation_date": 1559162853, "post_id": 56348422, "comment_id": 99339428, "body": "You are totally right, there are actually 6144 bytes copied, although it returns only 4096. I guess this might be dangerous in some cases where programmers assume only 4096 bytes have been written to their buffer. Also, if you compare it with the code of <code>do_generic_file_read</code> (for the case where the file descriptor represents a file, there the return value gets updated before it breaks out of the loop."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 23, "user_id": 7742501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72de3a26ad19873c9da3995f9952c982?s=128&d=identicon&r=PG&f=1", "display_name": "B3n", "link": "https://stackoverflow.com/users/7742501/b3n"}, "edited": false, "score": 0, "creation_date": 1559213480, "post_id": 56348422, "comment_id": 99354309, "body": "@B3n POSIX doesn&#39;t have anything to say about the contents of the user buffer beyond the returned amount, or when an error is returned, so it would be unsafe for programmers to assume anything about those contents."}, {"owner": {"reputation": 23, "user_id": 7742501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72de3a26ad19873c9da3995f9952c982?s=128&d=identicon&r=PG&f=1", "display_name": "B3n", "link": "https://stackoverflow.com/users/7742501/b3n"}, "edited": false, "score": 0, "creation_date": 1559232242, "post_id": 56348422, "comment_id": 99363870, "body": "This answer explains very well the case where the file descriptor represents a pipe. I have written a similar (somewhat longer) thing up on this question here: <a href=\"https://medium.com/@benoit.sevens/reading-from-a-file-pipe-or-socket-is-not-the-same-4675e364c536\" rel=\"nofollow noreferrer\">medium.com/@benoit.sevens/&hellip;</a> which also handles the file and socket case."}, {"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "reply_to_user": {"reputation": 23, "user_id": 7742501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72de3a26ad19873c9da3995f9952c982?s=128&d=identicon&r=PG&f=1", "display_name": "B3n", "link": "https://stackoverflow.com/users/7742501/b3n"}, "edited": false, "score": 0, "creation_date": 1559304393, "post_id": 56348422, "comment_id": 99388048, "body": "@B3n Nice write-up!"}], "tags": [], "owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "is_accepted": true, "score": 0, "last_activity_date": 1559074686, "last_edit_date": 1559074686, "creation_date": 1559069400, "answer_id": 56348422, "question_id": 55932358, "link": "https://stackoverflow.com/questions/55932358/different-behavior-on-read-depending-on-file-descriptor-representing-a-file-a/56348422#56348422", "title": "Different behavior on read() depending on file descriptor representing a file, anonymous pipe or socket when writing to non writable memory", "body": "<p>The strace output from this command shows that the full 12288 (0x3000) bytes are written in one go:</p>\n\n<pre><code>$ strace python3 -c 'print(\"A\"*0x3000)' | ./test\n...\nwrite(1, \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"..., 12288) = 12288\n...\n</code></pre>\n\n<p>Using strace on the <code>./test</code> command at the other end of the pipe shows that only 4096 (0x1000) bytes are read:</p>\n\n<pre><code>$ python3 -c 'print(\"A\"*0x3000)' | strace ./test\n...\nread(0, \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"..., 12288) = 4096\n...\n</code></pre>\n\n<p>If the standard input for <code>./test</code> comes from <code>input.bin</code> (which contains 12288 'A's followed by a newline), strace shows that 6144 (0x1800) bytes are read:</p>\n\n<pre><code>$ strace ./test &lt; input.bin\n...\nread(0, \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\"..., 12288) = 6144\n...\n</code></pre>\n\n<p>I think the explanation can only be found by delving into the kernel's code for reading from a pipe in the <code>pipe_read</code> function in \"fs/pipe.c\". Internally, the pipe contains a cyclic array of <code>struct pipe_buffer</code>, each of which contains a pointer to a page of data. The <code>pipe_read</code> function loops through these buffers copying the contents to the user until all requested data has been read, there is nothing left in the pipe (after waiting for more data from the writer when in blocking mode), or a fault occurs when copying data to the user. The reason why only 4096 bytes are returned instead of 6144 when the fault occurs seems to be due to this bit of code:</p>\n\n<pre><code>        written = copy_page_to_iter(buf-&gt;page, buf-&gt;offset, chars, to);\n        if (unlikely(written &lt; chars)) {\n            if (!ret)\n                ret = -EFAULT;\n            break;\n        }\n        ret += chars;\n        buf-&gt;offset += chars;\n        buf-&gt;len -= chars;\n</code></pre>\n\n<p>(The above section is from Linux kernel version 4.19.)</p>\n\n<p>Here, <code>chars</code> is the amount to be copied from the current pipe buffer, <code>written</code> is the amount that was actually copied, and <code>ret</code> is the return value of the function, which is normally the number of bytes read. The initial value of <code>ret</code> is 0. <code>written</code> normally gets set to <code>chars</code> unless an address fault occurs, in which case it will be less than <code>chars</code>.</p>\n\n<p>The fault occurs when copying the second page from the pipe. The first page was copied successfully so <code>ret</code> will be 4096. When copying the second page, an address fault occurs in the user buffer after 6144 - 4096 = 2048 (0x800) bytes, so the <code>break;</code> statement is reached to break out of the loop before the <code>ret += chars;</code> statement is reached. <code>ret</code> is not set to <code>-EFAULT</code> because it is non-zero. However, the partial copy of 2048 bytes from the second page of the pipe to the user buffer have been disregarded as far as the returned value of the <code>pipe_buf</code> function indicates. (The disregarded data is not discarded from the pipe. The position in the pipe is only moved on after a successful copy, so a subsequent call to <code>pipe_read</code> will continue from the same point.)</p>\n\n<p>Note that although <code>read</code> only returned 4096, it seems likely that it actually copied 6144 bytes to the user buffer. This could be confirmed by examining the buffer contents from <code>p + 4096</code> onwards after returning from the <code>read</code> call.</p>\n\n<p>I'm sure the relevant part of the <code>pipe_read</code> function could be rewritten to properly account for the partially copied portion, but I don't know if the core kernel developers would consider it a bug worth fixing.  For example, a fix might replace the above code with something like the following (untested) code:</p>\n\n<pre><code>        written = copy_page_to_iter(buf-&gt;page, buf-&gt;offset, chars, to);\n        ret += written;\n        buf-&gt;offset += written;\n        buf-&gt;len -= written;\n        if (unlikely(written &lt; chars)) {\n            if (!ret)\n                ret = -EFAULT;\n            break;\n        }\n</code></pre>\n\n<p>I am pretty sure that your <code>./test</code> program would manage to read 6144 bytes from the pipe with this change to the kernel code.</p>\n"}], "owner": {"reputation": 23, "user_id": 7742501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72de3a26ad19873c9da3995f9952c982?s=128&d=identicon&r=PG&f=1", "display_name": "B3n", "link": "https://stackoverflow.com/users/7742501/b3n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 1, "accepted_answer_id": 56348422, "answer_count": 1, "score": 1, "last_activity_date": 1559074686, "creation_date": 1556691487, "last_edit_date": 1558986288, "question_id": 55932358, "link": "https://stackoverflow.com/questions/55932358/different-behavior-on-read-depending-on-file-descriptor-representing-a-file-a", "title": "Different behavior on read() depending on file descriptor representing a file, anonymous pipe or socket when writing to non writable memory", "body": "<p>I have the following code:</p>\n\n<pre><code>#include &lt;sys/mman.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;cstdio&gt;\n\nint main() {\n        char *p = (char *)mmap(0, 0x3000, PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);\n        munmap(p + 0x2000, 0x1000);\n        p += 0x800;\n        printf(\"%zd\\n\", read(0, p, 0x3000));\n        return 0;\n}\n</code></pre>\n\n<p>When compiling it and running it with input that will write past writable memory, I get different behaviors based on the way this input is fed:</p>\n\n<pre><code>$ python3 -c 'print(\"A\"*0x3000)' | ./test\n4096\n$ python3 -c 'print(\"A\"*0x3000)' &gt; input.bin; ./test &lt; input.bin\n6144\n$ nc.traditional -l -p 1337 -e ./test &amp;\n[1] 25855\n$ python3 -c 'print(\"A\"*0x3000)' | nc localhost 1337\n-1\n[1]+  Done                    nc.traditional -l -p 1337 -e ./test\n</code></pre>\n\n<p>I would have expected the read() call to return the same result in all cases, but this is not the case. Why do I get different behaviors?</p>\n"}, {"tags": ["c++", "apache", "buffer", "parquet", "partial"], "comments": [{"owner": {"reputation": 1141, "user_id": 1859744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a568c533bce0b4e7c0f18e303946d0f?s=128&d=identicon&r=PG", "display_name": "harmonica141", "link": "https://stackoverflow.com/users/1859744/harmonica141"}, "edited": false, "score": 5, "creation_date": 1556703433, "post_id": 55932303, "comment_id": 98521151, "body": "Yes it is possible by writing code. Please provide your approach and we can help you. This is not a free coding service."}, {"owner": {"reputation": 35, "user_id": 2880045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d86955ad4899286da19e052931ceeef2?s=128&d=identicon&r=PG&f=1", "display_name": "user2880045", "link": "https://stackoverflow.com/users/2880045/user2880045"}, "reply_to_user": {"reputation": 1141, "user_id": 1859744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a568c533bce0b4e7c0f18e303946d0f?s=128&d=identicon&r=PG", "display_name": "harmonica141", "link": "https://stackoverflow.com/users/1859744/harmonica141"}, "edited": false, "score": 0, "creation_date": 1556722544, "post_id": 55932303, "comment_id": 98529247, "body": "I know it is possible by writing code! I was wondering if the library already supports this."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 2880045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d86955ad4899286da19e052931ceeef2?s=128&d=identicon&r=PG&f=1", "display_name": "user2880045", "link": "https://stackoverflow.com/users/2880045/user2880045"}, "edited": false, "score": 0, "creation_date": 1556722413, "post_id": 55935094, "comment_id": 98529183, "body": "Even though the library doesn&#39;t read the whole file  it needs the file to be passed to it. What I need is to pass only a portion of a file (a memory buffer) because I don&#39;t have access to the full parquet file. Is there a way to pass just a portion of a file (not the file handle) to the library?"}, {"owner": {"reputation": 35, "user_id": 2880045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d86955ad4899286da19e052931ceeef2?s=128&d=identicon&r=PG&f=1", "display_name": "user2880045", "link": "https://stackoverflow.com/users/2880045/user2880045"}, "edited": false, "score": 0, "creation_date": 1556734999, "post_id": 55935094, "comment_id": 98534909, "body": "thanks for the response, now i got what you meant and found the place for the code."}, {"owner": {"reputation": 5252, "user_id": 1689261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6fcc16462fbe93673342da3ff5d8121?s=128&d=identicon&r=PG", "display_name": "Uwe L. Korn", "link": "https://stackoverflow.com/users/1689261/uwe-l-korn"}, "reply_to_user": {"reputation": 35, "user_id": 2880045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d86955ad4899286da19e052931ceeef2?s=128&d=identicon&r=PG&f=1", "display_name": "user2880045", "link": "https://stackoverflow.com/users/2880045/user2880045"}, "edited": false, "score": 1, "creation_date": 1556737471, "post_id": 55935094, "comment_id": 98535888, "body": "Cool! Just to clarify this for further readers: When you only have the portions of the file but have code that can request the remaining data, you can implement the File API by yourself and then retrieve the remaining data once the Parquet library asks for it."}], "tags": [], "owner": {"reputation": 5252, "user_id": 1689261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6fcc16462fbe93673342da3ff5d8121?s=128&d=identicon&r=PG", "display_name": "Uwe L. Korn", "link": "https://stackoverflow.com/users/1689261/uwe-l-korn"}, "is_accepted": true, "score": 1, "last_activity_date": 1556708012, "creation_date": 1556708012, "answer_id": 55935094, "question_id": 55932303, "link": "https://stackoverflow.com/questions/55932303/read-partial-parquet-file/55935094#55935094", "title": "Read Partial Parquet file", "body": "<p>Behind the scences this is what the Apache Parquet C++ library actually does. When you pass in a file handle, it will only read the parts it needs to. As it requires the file footer (the main metadata) to know where to find the segments of data, this will always be read. The data segments will only be read once you request them.</p>\n\n<p>No need to write special code for this, the library already has it built-in. Thus, if you want to know in fine detail on how this is working, you only need to read the source of the library: <a href=\"https://github.com/apache/arrow/tree/master/cpp/src/parquet\" rel=\"nofollow noreferrer\">https://github.com/apache/arrow/tree/master/cpp/src/parquet</a></p>\n"}], "owner": {"reputation": 35, "user_id": 2880045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d86955ad4899286da19e052931ceeef2?s=128&d=identicon&r=PG&f=1", "display_name": "user2880045", "link": "https://stackoverflow.com/users/2880045/user2880045"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "accepted_answer_id": 55935094, "answer_count": 1, "score": 1, "last_activity_date": 1556728991, "creation_date": 1556691053, "last_edit_date": 1556728991, "question_id": 55932303, "link": "https://stackoverflow.com/questions/55932303/read-partial-parquet-file", "title": "Read Partial Parquet file", "body": "<p>I have a Parquet file and I don't want to read the whole file into memory. I want to read the metadata and then read the rest of the file on demand. That is, for example, I want to read the second page of the first column in the third-row group. How would I do that using Apache Parquet cpp library? I have the offset of the part that I want to read from the metadata and can read it directly from the disk. Is there any way to pass that buffer to Apache Parquet library to uncompress, decode and iterate through the values? How about the same thing for column chunk or row groups? Basically, I want to read the file partially and then pass it to the parquet APIs to process it as opposes to give the file handler to the API and let it go through the file. Is it possible?</p>\n"}, {"tags": ["c++", "scope", "undefined-reference"], "comments": [{"owner": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1556689611, "post_id": 55932113, "comment_id": 98517185, "body": "Make sure you compile and link Image.cpp. Can you show your make file?"}, {"owner": {"reputation": 41, "user_id": 10507873, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qKHX_6PYtlY/AAAAAAAAAAI/AAAAAAAAAIQ/mUhOm4NNMoc/photo.jpg?sz=128", "display_name": "Brian Mynhardt", "link": "https://stackoverflow.com/users/10507873/brian-mynhardt"}, "reply_to_user": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1556690424, "post_id": 55932113, "comment_id": 98517355, "body": "Thanks it is definitely to do with my makefile"}], "owner": {"reputation": 41, "user_id": 10507873, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qKHX_6PYtlY/AAAAAAAAAAI/AAAAAAAAAIQ/mUhOm4NNMoc/photo.jpg?sz=128", "display_name": "Brian Mynhardt", "link": "https://stackoverflow.com/users/10507873/brian-mynhardt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 13, "favorite_count": 0, "closed_date": 1556689845, "answer_count": 0, "score": 0, "last_activity_date": 1556689492, "creation_date": 1556689492, "question_id": 55932113, "link": "https://stackoverflow.com/questions/55932113/scoping-issue-for-declared-methods-and-overloaded-operators", "closed_reason": "Duplicate", "title": "Scoping Issue for Declared Methods and Overloaded Operators", "body": "<p>Working on a program that takes .pgm images and reads the values in as Unsigned Chars.  I created an iterator and have all the code logic ready, however when compiling through a driver class, the methods/operators seem to not be showing up. I need some help figuring out what is wrong.</p>\n\n<p>This is a sample of the errors I am getting:</p>\n\n<pre><code>Driver.cpp:(.text+0x122): undefined reference to `Image::Image()'\nDriver.cpp:(.text+0x4a3): undefined reference to `Image::load(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)'\nDriver.cpp:(.text+0x4db): undefined reference to `Image::load(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;)'\nDriver.cpp:(.text+0x507): undefined reference to `Image::operator+(Image const&amp;)'\nDriver.cpp:(.text+0x520): undefined reference to `Image::operator=(Image&amp;&amp;)'\nDriver.cpp:(.text+0x52f): undefined reference to `Image::~Image()'\n</code></pre>\n\n<p>Example of functions in Image.h:</p>\n\n<pre><code>#ifndef IMAGE_H\n#define IMAGE_H\n#include &lt;memory&gt;\nclass Image\n{\n   private:\n   public:\n       //Special Member functions of image\n        Image();                    //Default Constructor\n        ~Image();                   //Destructor\n        Image(const Image&amp; rhs);    //Copy Constructor\n        Image(Image &amp;&amp; rhs);        //Move Constructor\n\n        //Other Operator Overloads\n        Image operator+(const Image&amp; rhs);      // Addition + Operator\n        Image operator-(const Image&amp; rhs);      // Subtraction - Operator\n        Image operator/(const Image&amp; rhs);      // Masking / Operator\n        Image operator*(int threshold);         // Threshold * Operator\n        Image operator!();                      // Inverse ! Operator\n\n};\n</code></pre>\n\n<p>Example of functions in Image.cpp:</p>\n\n<pre><code>//Special Member Functions Implementation\nImage()  //Default Constructor\n{}\nImage::~Image() //Destructor\n{}\nImage::Image(const Image&amp; rhs):width(rhs.width), height(rhs.height), length(rhs.length),maxVal(rhs.maxVal)                             //Copy Constructor\n{}\nImage::Image(Image &amp;&amp; rhs):width(move(rhs.width)), height(move(rhs.height)), length(move(rhs.length)),maxVal(move(rhs.maxVal))         //Move Constructor\n{}\nImage&amp; Image::operator=(const Image&amp; rhs)       //Copy Assignment Operator\n{}\n\n</code></pre>\n\n<p>Driver.cpp:</p>\n\n<pre><code>#include \"Image.h\"\n#include &lt;string&gt;\n\nint main(int argc, char *argv[])\n{\n    string file1,file2,outName;\n    Image Out,In1,In2;\n\n            //Within a switch-case statement\n            In1.load(file1);\n            In2.load(file2);\n            Out = In1 + In2;\n            Out.save(outName);\n}\n</code></pre>\n\n<p>I do have proper definitions inside the functions in Image.cpp.\nI for the life of me can't figure it out.\nThanks in advance.</p>\n"}, {"tags": ["c++", "vector", "insert", "codeblocks"], "owner": {"reputation": 114, "user_id": 10678742, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RPjzdVcmkU8/AAAAAAAAAAI/AAAAAAAAACM/k6DtHcy3Y_I/photo.jpg?sz=128", "display_name": "Kan", "link": "https://stackoverflow.com/users/10678742/kan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1556689480, "answer_count": 0, "score": 1, "last_activity_date": 1556689347, "creation_date": 1556689347, "question_id": 55932091, "link": "https://stackoverflow.com/questions/55932091/how-valid-positions-in-vectorinsert", "closed_reason": "Duplicate", "title": "How valid positions in vector::insert()?", "body": "<pre><code> vector&lt;int&gt; vec = { 10, 20, 30, 40 };\n vec.insert(vec.begin(),20);//valid \n vec.insert(&amp;vec[0],20);//invalid\n</code></pre>\n\n<p>what the different between vec.begin() and &amp;vec[0]</p>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 2, "creation_date": 1556688194, "post_id": 55931926, "comment_id": 98516885, "body": "n is still runtime depending and C++ doesn&#39;t support dynamic arrays. So the compiler wants to have a compile-time-constant statement."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1556690683, "post_id": 55931926, "comment_id": 98517397, "body": "<code>int arr[size];</code> is called a <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html\" rel=\"nofollow noreferrer\">variable length array</a> (VLA). VLA is present in C99 but it is a GCC extension for C90 and C++. Also, <code>const int size = n;</code> is <code>const</code> but not a <code>constexpr</code>. Since you are C++, why not use a <code>std::vector</code>?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1556712805, "post_id": 55931926, "comment_id": 98524683, "body": "<code>size</code> is constant, but it&#39;s not a <b>compile-time</b> constant. Array sizes are required to be compile-time constants."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11435622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a2e4ac5f8d18d00ed6fbedafa6f330?s=128&d=identicon&r=PG&f=1", "display_name": "Neko", "link": "https://stackoverflow.com/users/11435622/neko"}, "edited": false, "score": 0, "creation_date": 1556689722, "post_id": 55931961, "comment_id": 98517210, "body": "it would compile on codeblocks for example."}], "tags": [], "owner": {"reputation": 379, "user_id": 5426995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9734b52b62109df1ed9f39c29ba721f6?s=128&d=identicon&r=PG&f=1", "display_name": "YatShan", "link": "https://stackoverflow.com/users/5426995/yatshan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556688314, "creation_date": 1556688314, "answer_id": 55931961, "question_id": 55931926, "link": "https://stackoverflow.com/questions/55931926/why-do-i-get-a-compiler-error-although-size-is-constant/55931961#55931961", "title": "Why do I get a compiler error although size is constant?", "body": "<p>There is no relation for compilation error and visual studio version. Compilation erros occur when you are violating C++ concepts. Here, you're receiving array size as an argument from the user and it is dynamic value. In C++ you cannot create dynamically varying size arrays, instead static arrays is possible. Else you need to switch your data structure either to list or map, based on your requirement.</p>\n"}], "owner": {"reputation": 21, "user_id": 11435622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08a2e4ac5f8d18d00ed6fbedafa6f330?s=128&d=identicon&r=PG&f=1", "display_name": "Neko", "link": "https://stackoverflow.com/users/11435622/neko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "closed_date": 1556688509, "answer_count": 1, "score": 2, "last_activity_date": 1556688314, "creation_date": 1556687981, "question_id": 55931926, "link": "https://stackoverflow.com/questions/55931926/why-do-i-get-a-compiler-error-although-size-is-constant", "closed_reason": "Duplicate", "title": "Why do I get a compiler error although size is constant?", "body": "<pre><code>int n;\ncin &gt;&gt; n;\nconst int size = n;\nint arr[size];\n</code></pre>\n\n<p>I'm getting a compiler error message \"Expression must have a constant value\". I'm using visual studio 2013. But the array size is a <code>const int</code>, whose value does not change. How am I getting a compiler error?</p>\n"}, {"tags": ["c++", "user-interface", "visual-c++", "c++-cli", "c++17"], "comments": [{"owner": {"reputation": 1, "user_id": 11435465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2653b263042c1c2b14c4f3c3afd3086?s=128&d=identicon&r=PG&f=1", "display_name": "James Gao", "link": "https://stackoverflow.com/users/11435465/james-gao"}, "edited": false, "score": 0, "creation_date": 1556690035, "post_id": 55931736, "comment_id": 98517278, "body": "Source codes here: <a href=\"https://github.com/jamesgao8/Ui_Designs\" rel=\"nofollow noreferrer\">github.com/jamesgao8/Ui_Designs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 5426995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9734b52b62109df1ed9f39c29ba721f6?s=128&d=identicon&r=PG&f=1", "display_name": "YatShan", "link": "https://stackoverflow.com/users/5426995/yatshan"}, "edited": false, "score": 0, "creation_date": 1556686510, "post_id": 55931770, "comment_id": 98516528, "body": "I think control call has not been implemented in your MyUserControl.h class, so that it pops an error message, when you&#39;re clicking on it."}, {"owner": {"reputation": 379, "user_id": 5426995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9734b52b62109df1ed9f39c29ba721f6?s=128&d=identicon&r=PG&f=1", "display_name": "YatShan", "link": "https://stackoverflow.com/users/5426995/yatshan"}, "reply_to_user": {"reputation": 1, "user_id": 11435465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2653b263042c1c2b14c4f3c3afd3086?s=128&d=identicon&r=PG&f=1", "display_name": "James Gao", "link": "https://stackoverflow.com/users/11435465/james-gao"}, "edited": false, "score": 0, "creation_date": 1556747865, "post_id": 55931770, "comment_id": 98539574, "body": "As per the code, you shared, MyUserControl object is not created anywhere. Without creating object, how are you planning to invoke the method?"}, {"owner": {"reputation": 1, "user_id": 11435465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2653b263042c1c2b14c4f3c3afd3086?s=128&d=identicon&r=PG&f=1", "display_name": "James Gao", "link": "https://stackoverflow.com/users/11435465/james-gao"}, "edited": false, "score": 0, "creation_date": 1557281015, "post_id": 55931770, "comment_id": 98708219, "body": "Hi,  Thanks for that, but how so how do I add the object?:)"}, {"owner": {"reputation": 379, "user_id": 5426995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9734b52b62109df1ed9f39c29ba721f6?s=128&d=identicon&r=PG&f=1", "display_name": "YatShan", "link": "https://stackoverflow.com/users/5426995/yatshan"}, "reply_to_user": {"reputation": 1, "user_id": 11435465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2653b263042c1c2b14c4f3c3afd3086?s=128&d=identicon&r=PG&f=1", "display_name": "James Gao", "link": "https://stackoverflow.com/users/11435465/james-gao"}, "edited": false, "score": 0, "creation_date": 1557291859, "post_id": 55931770, "comment_id": 98710438, "body": "@JamesGao, you can write a small class and call that object in MyUserControl.cpp or else you can write a private method inside MyUserControl.cpp itself."}, {"owner": {"reputation": 1, "user_id": 11435465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2653b263042c1c2b14c4f3c3afd3086?s=128&d=identicon&r=PG&f=1", "display_name": "James Gao", "link": "https://stackoverflow.com/users/11435465/james-gao"}, "edited": false, "score": 0, "creation_date": 1558509987, "post_id": 55931770, "comment_id": 99120245, "body": "Can you show how to call the object in the class in cpp?:) Thank, James"}, {"owner": {"reputation": 379, "user_id": 5426995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9734b52b62109df1ed9f39c29ba721f6?s=128&d=identicon&r=PG&f=1", "display_name": "YatShan", "link": "https://stackoverflow.com/users/5426995/yatshan"}, "reply_to_user": {"reputation": 1, "user_id": 11435465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2653b263042c1c2b14c4f3c3afd3086?s=128&d=identicon&r=PG&f=1", "display_name": "James Gao", "link": "https://stackoverflow.com/users/11435465/james-gao"}, "edited": false, "score": 0, "creation_date": 1558590497, "post_id": 55931770, "comment_id": 99152727, "body": "@JamesGao As per my understanding on the code, you shared, all controls are in MyForm.h file. Therefore, create an object of MyUserControl.h inside this class. Then call the method you wish. It seems to be a cyclic method calls, because I noted MyForm.showDialog() inside MyUserControl as well."}, {"owner": {"reputation": 1, "user_id": 11435465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2653b263042c1c2b14c4f3c3afd3086?s=128&d=identicon&r=PG&f=1", "display_name": "James Gao", "link": "https://stackoverflow.com/users/11435465/james-gao"}, "edited": false, "score": 0, "creation_date": 1559787933, "post_id": 55931770, "comment_id": 99531520, "body": "Hi, there&#39;s some jargons here that&#39;s a bit tricky for me to understand. It&#39;ll really helpful if you can modify and write the code and show me the modified code so that I can actually see the changes."}], "tags": [], "owner": {"reputation": 379, "user_id": 5426995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9734b52b62109df1ed9f39c29ba721f6?s=128&d=identicon&r=PG&f=1", "display_name": "YatShan", "link": "https://stackoverflow.com/users/5426995/yatshan"}, "is_accepted": false, "score": 1, "last_activity_date": 1556686423, "creation_date": 1556686423, "answer_id": 55931770, "question_id": 55931736, "link": "https://stackoverflow.com/questions/55931736/c-how-do-i-add-user-control-to-a-form-so-i-can-transition-between-panels/55931770#55931770", "title": "C++ How do I add User Control to a Form So I can transition between Panels", "body": "<p>Giving an answer to this problem is limited as you have not explicitly shared the code snippet with us. </p>\n\n<p>As per your second line, it seems entire implementation is in your header class. </p>\n"}], "owner": {"reputation": 1, "user_id": 11435465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2653b263042c1c2b14c4f3c3afd3086?s=128&d=identicon&r=PG&f=1", "display_name": "James Gao", "link": "https://stackoverflow.com/users/11435465/james-gao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556686622, "creation_date": 1556686119, "last_edit_date": 1556686622, "question_id": 55931736, "link": "https://stackoverflow.com/questions/55931736/c-how-do-i-add-user-control-to-a-form-so-i-can-transition-between-panels", "title": "C++ How do I add User Control to a Form So I can transition between Panels", "body": "<p>I've been working on panel switching or transitions for C++ with a click of a button.\nSo in the project I added a CLR User Control and named it MyUserControl. \n2 files were created MyUserControl.cpp and MyUserControl.h I've then rebuilded the project and from the toolbar I dragged MyUserControl on to my MainForm but an error comes up saying \"Failed to load toolbox item 'MyUserControl'. It will be removed from the toolbox\".</p>\n\n<p>Any ideas on this problem?\nOn the MyUserControl.cpp I left it blank except for <code>#include \"MyUserControl.h\"</code>\nMain form code: </p>\n\n<pre><code>#include \"MyForm.h\"\n#include &lt;Windows.h&gt;\nusing namespace UiDesign;\n\nint WINAPI WinMain(HINSTANCE inst, HINSTANCE prev, LPSTR cmd, int show)\n{\n    MyForm Form1;\n    Form1.ShowDialog();\n}\n</code></pre>\n\n<p>Cheers,\nJames</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1556684341, "post_id": 55931545, "comment_id": 98516117, "body": "It&#39;s worse than you think. The one student record you added officially ceases to exist as soon as <code>AddStudent</code> returns. You&#39;re saving the address of an automatic (temporary to scope) variable that is no-more after function return. Dereferencing that pointer invokes <i>undefined behavior</i>."}], "answers": [{"comments": [{"owner": {"reputation": 431, "user_id": 627801, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3EL2L.jpg?s=128&g=1", "display_name": "Jonathan Geisler", "link": "https://stackoverflow.com/users/627801/jonathan-geisler"}, "edited": false, "score": 1, "creation_date": 1556684681, "post_id": 55931584, "comment_id": 98516171, "body": "or, even better, use <code>vector&lt;Student&gt; students</code> to declare your students and then use <code>students.push_back(s)</code> in your <code>AddStudent()</code> method."}, {"owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 0, "creation_date": 1556684684, "post_id": 55931584, "comment_id": 98516172, "body": "&quot;students = new Student[SomeInitialSize]&quot; please do not use naked arrays and write the resize code on your own. Here a std::vector is the perfect match."}, {"owner": {"reputation": 31, "user_id": 11252200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xr5al2iQtIY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4fj0NhBBopjS7im9KwGMCopGtsw/mo/photo.jpg?sz=128", "display_name": "Yosoku Denkai", "link": "https://stackoverflow.com/users/11252200/yosoku-denkai"}, "edited": false, "score": 0, "creation_date": 1556684859, "post_id": 55931584, "comment_id": 98516196, "body": "Yeah I know what you mean,but I went with a Student array since he probably needs to write a student array because of an assignment"}, {"owner": {"reputation": 1, "user_id": 11435504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b58b5b5c2fcc2903a167af7682e0b822?s=128&d=identicon&r=PG&f=1", "display_name": "ocixem", "link": "https://stackoverflow.com/users/11435504/ocixem"}, "edited": false, "score": 0, "creation_date": 1556684897, "post_id": 55931584, "comment_id": 98516199, "body": "I added students = new Student[5] to the course constructer but it says students[nstudents]=&amp;s; isnt assignable"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 1, "user_id": 11435504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b58b5b5c2fcc2903a167af7682e0b822?s=128&d=identicon&r=PG&f=1", "display_name": "ocixem", "link": "https://stackoverflow.com/users/11435504/ocixem"}, "edited": false, "score": 2, "creation_date": 1556685112, "post_id": 55931584, "comment_id": 98516243, "body": "@ocixem the problems you&#39;re experiencing have less to do with writing code, and more to do with understanding the semantics and syntax of the language itself. C++ is the <i>worst</i> programming language to cook spaghetti with (eg. type something, throw it at the wall and see if it sticks). This could easily balloon into a full-on tutorial on the most basic of C++ fundamentals, and that isn&#39;t what this site is about. I think you need to spend some more time in your reading materials."}, {"owner": {"reputation": 31, "user_id": 11252200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xr5al2iQtIY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4fj0NhBBopjS7im9KwGMCopGtsw/mo/photo.jpg?sz=128", "display_name": "Yosoku Denkai", "link": "https://stackoverflow.com/users/11252200/yosoku-denkai"}, "reply_to_user": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 0, "creation_date": 1556685227, "post_id": 55931584, "comment_id": 98516261, "body": "@user6556709 commented on that,take a look in the comments above.The thing is that if you expand on this project as it is you will be force to write code as I mentioned to check for sizes and such which isn&#39;t needed at all in your student class.You should keep your classes irrelevant to each other.One solution for this is to use an <code>std::vector</code> as pointed out to avoid the code,or even for better practice you can write your own <code>Array</code> class which handles these operations for you,and in your Student class you will just add those without worrying about sizes and such"}, {"owner": {"reputation": 1, "user_id": 11435504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b58b5b5c2fcc2903a167af7682e0b822?s=128&d=identicon&r=PG&f=1", "display_name": "ocixem", "link": "https://stackoverflow.com/users/11435504/ocixem"}, "edited": false, "score": 0, "creation_date": 1556685285, "post_id": 55931584, "comment_id": 98516269, "body": "UPDATE: im a lot closer thanks to you guys thank you so much i dont want to fail this class and disappoint my parents thank you thank you"}, {"owner": {"reputation": 31, "user_id": 11252200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xr5al2iQtIY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4fj0NhBBopjS7im9KwGMCopGtsw/mo/photo.jpg?sz=128", "display_name": "Yosoku Denkai", "link": "https://stackoverflow.com/users/11252200/yosoku-denkai"}, "edited": false, "score": 0, "creation_date": 1556685416, "post_id": 55931584, "comment_id": 98516302, "body": "Just a little reminder:you can&#39;t fail a programming class if you have actually programmed a lot in that language,so you are in a very good start  for not disappointing your parents =)"}, {"owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "edited": false, "score": 0, "creation_date": 1556685629, "post_id": 55931584, "comment_id": 98516353, "body": "@YosokuDenkai I don&#39;t think so. He uses a string class also. That you don&#39;t have to handle the container in your item class is the essence on using a container..."}, {"owner": {"reputation": 31, "user_id": 11252200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xr5al2iQtIY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4fj0NhBBopjS7im9KwGMCopGtsw/mo/photo.jpg?sz=128", "display_name": "Yosoku Denkai", "link": "https://stackoverflow.com/users/11252200/yosoku-denkai"}, "edited": false, "score": 0, "creation_date": 1556686005, "post_id": 55931584, "comment_id": 98516431, "body": "I think you misunderstood my comment,what I meant about size checks is that Student class should not handle the container,as you just mentionted."}], "tags": [], "owner": {"reputation": 31, "user_id": 11252200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xr5al2iQtIY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc4fj0NhBBopjS7im9KwGMCopGtsw/mo/photo.jpg?sz=128", "display_name": "Yosoku Denkai", "link": "https://stackoverflow.com/users/11252200/yosoku-denkai"}, "is_accepted": false, "score": 0, "last_activity_date": 1556684498, "creation_date": 1556684498, "answer_id": 55931584, "question_id": 55931545, "link": "https://stackoverflow.com/questions/55931545/function-for-adding-objects-to-pointer-array/55931584#55931584", "title": "Function for adding objects to pointer array", "body": "<p>You need to allocate memory for your Students array.In your constructor class add : <code>students = new Student[SomeInitialSize]</code> .Also in your add method you need to check if the size of your <code>students</code> is enough to store another <code>student s</code>,and if there is not you need to allocate more memory.</p>\n"}, {"tags": [], "owner": {"reputation": 1246, "user_id": 6556709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6389fba1f75367a547c52d9779902b20?s=128&d=identicon&r=PG&f=1", "display_name": "user6556709", "link": "https://stackoverflow.com/users/6556709/user6556709"}, "is_accepted": false, "score": 1, "last_activity_date": 1556685045, "creation_date": 1556685045, "answer_id": 55931625, "question_id": 55931545, "link": "https://stackoverflow.com/questions/55931545/function-for-adding-objects-to-pointer-array/55931625#55931625", "title": "Function for adding objects to pointer array", "body": "<p>\"students=&s;\" you are taking the address of a copy-by-value variable which becomes dangling after you leave the function. You don't store the students. You have to put a container in it something like std::vector and copy/move your students in it.</p>\n\n<p>So here with a std::vector with copy and move.</p>\n\n<pre><code>class Course {\n\n    public:\n    Course(int i) {\n        id=i;\n    };\n\n    void AddStudent(const Student&amp; s) {\n        students.push_back(s);\n    };\n\n    void AddStudent(Student&amp;&amp; s) {\n        students.push_back(std::move(s));\n    };\n\n    private:\n    std::vector&lt;Student&gt; students;\n    int id;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "is_accepted": false, "score": 0, "last_activity_date": 1556685913, "creation_date": 1556685913, "answer_id": 55931718, "question_id": 55931545, "link": "https://stackoverflow.com/questions/55931545/function-for-adding-objects-to-pointer-array/55931718#55931718", "title": "Function for adding objects to pointer array", "body": "<p>When you add your first student, <code>students</code> is set to point to <code>s</code> inside the <code>AddStudent</code> function. The problem is since <code>s</code> is local to the function, it is destroyed when the function returns. So <code>students</code> is now a dangling pointer pointing to nowhere since the memory it points to is no longer used to store the <code>Student</code> object. In order to keep the memory after the <code>AddStudent</code> function returns, you would have to dynamically allocate it with <code>new</code>, but there are other problems with that.</p>\n\n<p>Let's say you dynamically allocate the memory for the new student. When we add a second student, some more memory will be allocated to store that. That new memory could end up being in a totally different place. Your <code>AddStudent</code> function will set the <code>students</code> pointer to point to the new <code>Student</code> object, but now we've forgotten where the existing student is stored.</p>\n\n<p>So how do we fix this? We could allocate an array of <code>Student</code> objects, leaving extra space for new students. This way, all the students are stored in a contiguous piece of memory, and <code>students</code> will always point to the first object. In our <code>AddStudent</code> function, we would put the new student after the last student we currently have by doing something like <code>students[nstudents] = s</code>, before incrementing <code>nstudents</code>.</p>\n\n<p>The problem with this is that if we exceed the capacity of the array, we would have to allocate a new larger array and copy everything over since we can't expand an existing block of allocated memory. Or you could just make the array fixed sized. But there's a better solution: <code>std::vector</code>.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> is a standard library container that manages the memory for you. You can store your students there and easily add one using <code>push_back</code>. You can learn how to use vectors by asking your instructor, reading a <a href=\"https://stackoverflow.com/q/388242/9254539\">good book</a>, or finding a tutorial online (do note that there are many bad ones out there). </p>\n"}], "owner": {"reputation": 1, "user_id": 11435504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b58b5b5c2fcc2903a167af7682e0b822?s=128&d=identicon&r=PG&f=1", "display_name": "ocixem", "link": "https://stackoverflow.com/users/11435504/ocixem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1556685913, "creation_date": 1556684115, "last_edit_date": 1556684339, "question_id": 55931545, "link": "https://stackoverflow.com/questions/55931545/function-for-adding-objects-to-pointer-array", "title": "Function for adding objects to pointer array", "body": "<p>I need to add multiple students to the course class but it keeps overwriting the last entry.</p>\n\n<p>I tried to set the address to the object and also using the bracket operator but this causes a memory leak. The problem is with the <code>AddStudent</code> function</p>\n\n<pre><code>class Student {\npublic:\n  Student() { name = \"unknown\"; };\n  Student(string n) { name = n; };\n  void Print() { cout &lt;&lt; name &lt;&lt; endl; };\n  string GetName() { return name; };\nprivate:\n  string name;\n};\n\nclass Course {\n\npublic:\n  Course(int i) {\n    id=i;\n    nstudents=0;\n    capacity=0;\n  };\n\n  void AddStudent(Student s) {\n    students=&amp;s;\n    nstudents++;\n  };\n\nprivate:\n  int capacity;\n  int nstudents;\n  Student* students;\n  int id;\n};\n</code></pre>\n\n<p>It only lets me add one student.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1556683032, "post_id": 55931419, "comment_id": 98515884, "body": "<code>virtual int f(int){};</code> what is that?? If you claim a function will return <code>int</code>, maybe try actually doing so. Just saying. Either that or declare that pure-virtual."}, {"owner": {"reputation": 5234, "user_id": 7400903, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/66a5c6bdca5a30cc6fdacd92fc5745a2?s=128&d=identicon&r=PG&f=1", "display_name": "goodvibration", "link": "https://stackoverflow.com/users/7400903/goodvibration"}, "edited": false, "score": 0, "creation_date": 1556683055, "post_id": 55931419, "comment_id": 98515892, "body": "You&#39;re asking us to help you debugging the code, so can you please share your own debug findings first? For example, at which line in your code does this failure take place?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1556683189, "post_id": 55931419, "comment_id": 98515921, "body": "<code>sizeof(L)</code> ==&gt; <code>L.size()</code> and even then you&#39;re indexing out of range. Why you&#39;re not doing <i>all</i> of that with iterators is the mystery."}, {"owner": {"reputation": 31, "user_id": 11435408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xZ1oLitYlW4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd59Ztozmn-dZuuD9ebE6xnt9lYuA/mo/photo.jpg?sz=128", "display_name": "Tech Tutor", "link": "https://stackoverflow.com/users/11435408/tech-tutor"}, "edited": false, "score": 0, "creation_date": 1556683197, "post_id": 55931419, "comment_id": 98515924, "body": "$g++ -o main *.cpp $main timeout: the monitored command dumped core sh: line 1: 35296 Segmentation fault      timeout 10s main"}, {"owner": {"reputation": 387, "user_id": 7340043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47be94925c8a460a954a357c895ec97?s=128&d=identicon&r=PG&f=1", "display_name": "J. S.", "link": "https://stackoverflow.com/users/7340043/j-s"}, "edited": false, "score": 1, "creation_date": 1556683202, "post_id": 55931419, "comment_id": 98515927, "body": "<code>sizeof(L)</code> is not about number of elements in vector, it&#39;s a constant value, describing size of vector class. Use <code>L.size()</code> instead."}, {"owner": {"reputation": 31, "user_id": 11435408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xZ1oLitYlW4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd59Ztozmn-dZuuD9ebE6xnt9lYuA/mo/photo.jpg?sz=128", "display_name": "Tech Tutor", "link": "https://stackoverflow.com/users/11435408/tech-tutor"}, "edited": false, "score": 0, "creation_date": 1556683268, "post_id": 55931419, "comment_id": 98515932, "body": "Thank you so much... I got the result..."}, {"owner": {"reputation": 387, "user_id": 7340043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47be94925c8a460a954a357c895ec97?s=128&d=identicon&r=PG&f=1", "display_name": "J. S.", "link": "https://stackoverflow.com/users/7340043/j-s"}, "edited": false, "score": 0, "creation_date": 1556683358, "post_id": 55931419, "comment_id": 98515942, "body": "Also in <code>MapGeneric::map</code> use <code>if(index&gt;=0)</code> because vector is 0-indexed."}, {"owner": {"reputation": 31, "user_id": 11435408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xZ1oLitYlW4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd59Ztozmn-dZuuD9ebE6xnt9lYuA/mo/photo.jpg?sz=128", "display_name": "Tech Tutor", "link": "https://stackoverflow.com/users/11435408/tech-tutor"}, "edited": false, "score": 0, "creation_date": 1556683736, "post_id": 55931419, "comment_id": 98515997, "body": "Why this error?     *** Error in `main&#39;: free(): invalid next size (fast): 0x0000000001c405a0 ***"}, {"owner": {"reputation": 31, "user_id": 11435408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xZ1oLitYlW4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd59Ztozmn-dZuuD9ebE6xnt9lYuA/mo/photo.jpg?sz=128", "display_name": "Tech Tutor", "link": "https://stackoverflow.com/users/11435408/tech-tutor"}, "edited": false, "score": 0, "creation_date": 1556686769, "post_id": 55931419, "comment_id": 98516598, "body": "is there any mistake in the below code? The filter function should filter the odd elements from the vector. bool FilterOdd::g(int x) { if(x%2==1) return true; else return false; } vector&lt;int&gt; FilterGeneric::filter(vector&lt;int&gt; v, size_t index) { vector&lt;int&gt; t; if(index &lt;= v.size()) { if(g(v[index])==true) t.push_back(v[index]); return filter(v, index - 1); } return t; }"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11435408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xZ1oLitYlW4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd59Ztozmn-dZuuD9ebE6xnt9lYuA/mo/photo.jpg?sz=128", "display_name": "Tech Tutor", "link": "https://stackoverflow.com/users/11435408/tech-tutor"}, "edited": false, "score": 0, "creation_date": 1556686654, "post_id": 55931527, "comment_id": 98516565, "body": "is there any mistake in the below code?  The filter function should filter the odd elements from the vector.                                                                                             bool FilterOdd::g(int x) {     if(x%2==1)         return true;     else        return false; } vector&lt;int&gt; FilterGeneric::filter(vector&lt;int&gt; v, size_t index) {     vector&lt;int&gt; t;   if(index &lt;= v.size())   {     if(g(v[index])==true)         t.push_back(v[index]);     return filter(v, index - 1);   }   return t; }"}], "tags": [], "owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "is_accepted": false, "score": 1, "last_activity_date": 1556683924, "creation_date": 1556683924, "answer_id": 55931527, "question_id": 55931419, "link": "https://stackoverflow.com/questions/55931419/how-to-fix-the-error-in-c-vector-operation/55931527#55931527", "title": "How to fix the error in C++ vector operation?", "body": "<p>A number of problems here. It looks as though you think that C++ indices start at 1, rather than zero?</p>\n\n<pre><code>if(index&gt;=1)\n{\n   v[index]=f(v[index]);\n   return map(v,index-1);\n}\n</code></pre>\n\n<p>To me that immediately looks wrong, surely you mean:</p>\n\n<pre><code>// use size_t for indices (which cannot be negative)\nvector&lt;int&gt; MapGeneric::map(vector&lt;int&gt; v, size_t index)\n{\n  // make sure the index is valid!\n  if(index &lt; v.size())\n  {\n    v[index] = f(v[index]);\n    return map(v, index - 1);\n  }\n  return v;\n}\n</code></pre>\n\n<p>Secondly, the sizeof() operator does not do what you expect!! It returns the size of std::vector (which is usually 24bytes on 64 bit systems - basically 3 pointers). You should use the size() method to determine the length of the array. </p>\n\n<pre><code>// remember that indices are zero based, and not 1 based!\nL1=ob.map(L, L.size() - 1);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11435408, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xZ1oLitYlW4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd59Ztozmn-dZuuD9ebE6xnt9lYuA/mo/photo.jpg?sz=128", "display_name": "Tech Tutor", "link": "https://stackoverflow.com/users/11435408/tech-tutor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556683924, "creation_date": 1556682778, "question_id": 55931419, "link": "https://stackoverflow.com/questions/55931419/how-to-fix-the-error-in-c-vector-operation", "title": "How to fix the error in C++ vector operation?", "body": "<p>The f() function in the class MapSquare works properly.. When I add the other class MapTriple, it is not working.  f() function in the MapSquare should find the square of the elements in the vector and in the MapTriple should multiply 3 to all elements.</p>\n\n<p>MapGeneric is the base class which contains the function map() which is a recursive function to access the vector elements and the f() function is a pure virtual function.</p>\n\n<p>MapSquare and MapTriple are two derived classes overrides the f() function to find the square of vector elements and to multiply 3 with all the vector elements.</p>\n\n<p>MapSquare works properly... but when I add MapTriple, segmentation fault occures.  Please help to solve this.</p>\n\n<pre><code>#include&lt;vector&gt;\n#include&lt;iostream&gt;\n#include&lt;cstdlib&gt;\n#include&lt;stdio.h&gt;\n#include&lt;stdlib.h&gt;\nusing namespace std;\n\nclass MapGeneric\n{\n   public:\n        virtual int f(int){};\n        vector&lt;int&gt; map(vector&lt;int&gt;, int);\n};\nclass MapSquare:public MapGeneric\n{\n   public: int f(int);\n\n};\nclass MapTriple:public MapGeneric\n{\n   public: int f(int);\n};\nclass MapAbsolute:public MapGeneric\n{\n   public: int f(int);\n};\nvector&lt;int&gt; MapGeneric::map(vector&lt;int&gt; v, int index)\n{\n\n   if(index&gt;=1)\n   {\n      v[index]=f(v[index]);\n      return map(v,index-1);\n   }\n   return v;\n\n}\nint MapSquare::f(int x)\n{\n   return x*x;\n}\nint MapTriple::f(int x)\n{\n return 3*x;\n}\nint MapAbsolute::f(int x)\n{\n  return abs(x);\n}\nint main()\n{\n   //mapping square\n   MapSquare ob;\n   vector&lt;int&gt; L,L1,L2;\n   for (int i = 1; i &lt;= 5; i++) \n      L.push_back(i);\n   L1=ob.map(L,sizeof(L));\n   cout&lt;&lt;\"Square  = \";\n   for ( vector&lt;int&gt;::iterator i = L1.begin(); i != L1.end(); ++i) \n      cout &lt;&lt; *i&lt;&lt;\" \";\n\n   //mapping triple\n   MapTriple t;\n\n   L2=t.map(L,sizeof(L));\n   cout&lt;&lt;endl&lt;&lt;\"Triple  = \";\n   for(vector&lt;int&gt;::iterator i=L2.begin();i!=L2.end();++i)\n     cout&lt;&lt;*i&lt;&lt;\" \";\n\n   return 0;\n }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1556682012, "post_id": 55931320, "comment_id": 98515715, "body": "In Course.cpp, <code>static int numInstances = 0;</code> ===&gt; <code>int Course::numInstances = 0;</code>"}, {"owner": {"reputation": 13, "user_id": 11354319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e3e0b3d32c9cc60aaf99817b1058917?s=128&d=identicon&r=PG", "display_name": "CplusplusIsAlright", "link": "https://stackoverflow.com/users/11354319/cplusplusisalright"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1556682606, "post_id": 55931320, "comment_id": 98515802, "body": "Thanks, this got it working. So, from my understanding, the reason it wasn&#39;t working was that ```static int numInstances`` was essentially declared twice, which confused the compiler?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1556682750, "post_id": 55931320, "comment_id": 98515830, "body": "The compiler wasn&#39;t confused at all. It was doing exactly what you told it. The <code>numInstances</code> you were defining before was effectively worthless and untouched by anyone. All references to <code>numInstances</code> in the bodies of all <code>Course</code> members were referring to <code>Course::numInstances</code>, which you never provided definition-for; only declaration-of."}], "owner": {"reputation": 13, "user_id": 11354319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e3e0b3d32c9cc60aaf99817b1058917?s=128&d=identicon&r=PG", "display_name": "CplusplusIsAlright", "link": "https://stackoverflow.com/users/11354319/cplusplusisalright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "closed_date": 1556682746, "answer_count": 0, "score": 0, "last_activity_date": 1556681869, "creation_date": 1556681869, "question_id": 55931320, "link": "https://stackoverflow.com/questions/55931320/trouble-making-a-static-function-increment-and-return-its-value", "closed_reason": "Duplicate", "title": "Trouble making a static function increment and return its value", "body": "<p>Basically, the program creates courses, creates a maximum of 30 students within that course, calls attendance for each student, and asks how many total courses have been created. I am having trouble with this last part.</p>\n\n<p>The getID() function that I wrote within the Student class worked, but when I did something similar with the howMany() function in the Course class, I get errors. Specifically, I am getting an \"undefined reference to 'Course::numInstances'\" error on line 23 of Course.cpp (where numInstances is told to increment by one within the Course constructor) and line 28 of Course.h (where howMany() is defined). </p>\n\n<p>I suspect that this has something to do with the fact that it involves a static variable.</p>\n\n<p>Student.h</p>\n\n<pre><code>##ifndef STUDENT_H\n#define STUDENT_H\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing std::string;\n\n//This class describes a Student\n\nclass Student\n{\n    protected:\n        //data\n        string name;\n        int ID;\n\n    public:\n        virtual string answer();      //allows polymorph\n        Student();\n        Student(string theName, int theID);\n        string toString();\n        string getName();\n        int getID(){ return ID; }\n};\n\n#endif //STUDENT_H\n</code></pre>\n\n<p>Student.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n#include \"Student.h\"\n\n//This class describes a Student\n\n    //default constructor\n    Student::Student()\n    {\n        name = \"unknown\";\n        ID = 0;\n    }\n\n    //parameterized constructor\n    Student::Student(string theName, int theID)\n    {\n        name = theName;\n        ID = theID;\n    }\n\n    //toString - returns String representation of the instance\n    string Student::toString()\n    {\n        string msg = name + \":     \\t\";\n        msg += to_string(ID);\n        return msg;\n    }\n\n    //answer - returns how the Student instance answers during attendance\n    string Student::answer()\n    {\n        return \"\\\"Here\\\"\";  //note use of escape character here...\n    }\n\n    //getName - returns the name\n    string Student::getName()\n    {\n        return name;\n    }\n</code></pre>\n\n<p>Course.h</p>\n\n<pre><code>#ifndef COURSE_H\n#define COURSE_H\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing std::string;\n\n#include \"Student.h\"\n\nconst int MAX_STUDENTS = 30;\n\n    class Course\n    {\n    private:\n        //data\n        string name;\n        int maxCount;\n        int count;\n        Student *roster[MAX_STUDENTS];\n\n    public:\n        static int numInstances;  //initialized in Course.cpp\n        Course();\n        string toString();\n        void takeAttendance();\n        void addStudent(Student *newStudent);\n        static int howMany() { return numInstances; }\n    };\n\n#endif\n</code></pre>\n\n<p>Course.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;typeinfo&gt;\nusing namespace std;\n\n#include \"Course.h\"\n\n    static int numInstances = 0;\n\n\n    //default constructor - sets the maxCount to 30,\n    //                      initializes name/count, creates array,\n    //                      updates numInstances.\n    Course::Course()\n    {\n        name = \"unknown\";\n        maxCount = MAX_STUDENTS; //30\n        count = 0;\n        *roster[maxCount];\n        numInstances++;\n    }\n</code></pre>\n\n<p>Driver.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing std::string;\nusing std::cout;\nusing std::cin;\nusing std::endl;\n\n#include \"Student.h\"\n#include \"Course.h\"\n\n\n//This is the driver class for the program\n\n    int main()\n    {\n        //create a Student\n        Student firstStudent(\"Joe\", 13);\n        cout &lt;&lt; \"----- First Student is: \\n\";\n        cout &lt;&lt; firstStudent.toString() &lt;&lt; endl;\n\n        //tell it to return its ID - print it.\n        cout &lt;&lt; \"\\n----- Ask the first Student for its ID: \\n\";\n        cout &lt;&lt; firstStudent.getID() &lt;&lt; endl;\n\n        cout &lt;&lt; \"\\n----- Creating a Course and telling it to add some Students.  Printing it:\\n\";\n        //create a new Course\n        Course algebra;  //max of 30 students by default\n\n        //tell it to add some Students\n        algebra.addStudent(&amp;firstStudent);\n        algebra.addStudent(new Student());\n        algebra.addStudent(new Student(\"Peter\", 21));\n        algebra.addStudent(new Student(\"Janet\", 43));\n        algebra.addStudent(new Student(\"Jim\", 243));\n        algebra.addStudent(new Student(\"Al\", 3));\n        algebra.addStudent(new Student());\n        algebra.addStudent(new Student(\"Jenn\", 23));\n        algebra.addStudent(new Student(\"Jose\", 43));\n        algebra.addStudent(new Student(\"Grant\", 7));\n\n        //print the string representation of the course to see what is there\n        cout &lt;&lt; algebra.toString() &lt;&lt; endl;\n\n        //tell the course to take attendance\n        cout &lt;&lt; \"\\n----- telling the course to take attendance\\n\";\n        algebra.takeAttendance();\n\n        //create two more new Courses\n        Course history;\n        Course spanish;\n\n        //ask the Course class how many have been created (static)\n        cout &lt;&lt; \"\\n----- Asking the Course class how many courses have been created: \\n\";\n        cout &lt;&lt; Course::howMany() &lt;&lt; endl;\n\n\n        cin.get();\n        return 0;\n\n    }//end main()\n</code></pre>\n\n<p>Apologies for the code dump. I tried to cut down on lines but I ran into more errors, so I kept a lot of it to avoid confusion. The problem (I believe) is in the Course.h and Course.cpp files. The output for courses made should be <code>3</code>.</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1556681205, "post_id": 55931236, "comment_id": 98515573, "body": "The least of the problems here is returning an empty string in some error condition. That&#39;s the least that&#39;s wrong with the shown code. It is fundamentally flawed, and corrupts a whole bunch of memory. <code>char* retValue = &quot;&quot;;</code> - this sets up a <code>char</code> pointer, that points to exactly one byte of potentially usable memory. Then: <code>sprintf((retValue), &quot;%lu&quot;, cfgVariable_1);</code> this proceeds and writes who knows how many bytes there. Memory corruption, not to mention the fact that a literal <code>char</code> string is, for all practical matters, <code>const</code>. You need to rethink this approach, entirely."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1556681689, "post_id": 55931236, "comment_id": 98515660, "body": "<i>Fix implemented by me works, but I fail to understand the logic behind it,</i> - I hope you have code reviews of some sort. <i>Fixes</i>  submitters by force are generallly frowned upon."}, {"owner": {"reputation": 71, "user_id": 7162768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e27ccd9ae7ca2a8d4ec4f4f1ddadc5?s=128&d=identicon&r=PG&f=1", "display_name": "Rookie_Coder2318", "link": "https://stackoverflow.com/users/7162768/rookie-coder2318"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1556682142, "post_id": 55931236, "comment_id": 98515737, "body": "@SamVarshavchik is it not possible to implement something fundamentally correct which returns an empty string on error condition ?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1556683140, "post_id": 55931236, "comment_id": 98515913, "body": "Yes. It&#39;s certainly possible, but this requires modern C++. This question is tagged &quot;C++&quot;, but the shown code is obsolete C code. <code>strcmp()</code>, <code>sprintf()</code>, are all ancient C library functions. Modern C++ code uses <code>std::string</code>, and other C++ classes that correctly handle all storage allocation, safely. Formatted output operations, instead of buffer overflow-prone <code>sprintf()</code>. Rough estimate is that the equivalent C++ code with a <code>std::string</code> parameter and return values, and <code>std::ostringstream</code>, will be about five or six lines of code, a small fraction of this."}, {"owner": {"reputation": 309, "user_id": 8723329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb48604cc29c70e53189e174b4e28959?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon K", "link": "https://stackoverflow.com/users/8723329/jonathon-k"}, "edited": false, "score": 0, "creation_date": 1556683235, "post_id": 55931236, "comment_id": 98515929, "body": "It is possible, but once you start using raw pointers you have to be even more aware of memory allocation and scope.  It isn&#39;t safe to return a pointer to memory allocated in the stack, unless it is static, but that has other complications."}, {"owner": {"reputation": 71, "user_id": 7162768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e27ccd9ae7ca2a8d4ec4f4f1ddadc5?s=128&d=identicon&r=PG&f=1", "display_name": "Rookie_Coder2318", "link": "https://stackoverflow.com/users/7162768/rookie-coder2318"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1556692480, "post_id": 55931236, "comment_id": 98517791, "body": "@SamVarshavchik : please comment on my final solution, that I just added."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1556708679, "post_id": 55931236, "comment_id": 98523064, "body": "Your &quot;final solution&quot; will not work. It returns a pointer to a temporary buffer that gets destroyed when the function returns, so the caller gets a pointer to destroyed memory that will be randomly filled with random garbage. Do yourself a favor, <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">get a good C++ book</a> and invest some time reading it. C++ is the most complicated general purpose programming language in use today. Trying to get a working program by writing random C++ code, until it compiles, without fully understanding how it works, will not work."}], "answers": [{"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1556684200, "post_id": 55931474, "comment_id": 98516096, "body": "&quot;downright dangerous&quot; - the new &quot;invokes undefined behavior&quot;. And fyi, you can do without the string stream as well. <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\"><code>std::to_string</code></a> was literally made for situations like this, is implicitly obvious by name alone(reads like a book), and probably more performant than standing up a formatting string stream."}, {"owner": {"reputation": 71, "user_id": 7162768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e27ccd9ae7ca2a8d4ec4f4f1ddadc5?s=128&d=identicon&r=PG&f=1", "display_name": "Rookie_Coder2318", "link": "https://stackoverflow.com/users/7162768/rookie-coder2318"}, "edited": false, "score": 0, "creation_date": 1556692506, "post_id": 55931474, "comment_id": 98517799, "body": "@robthebloke : please comment on my final solution, that I just added."}, {"owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "reply_to_user": {"reputation": 71, "user_id": 7162768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e27ccd9ae7ca2a8d4ec4f4f1ddadc5?s=128&d=identicon&r=PG&f=1", "display_name": "Rookie_Coder2318", "link": "https://stackoverflow.com/users/7162768/rookie-coder2318"}, "edited": false, "score": 1, "creation_date": 1556693395, "post_id": 55931474, "comment_id": 98518038, "body": "@Rookie_Coder2318 That is not a solution. You are now returning the address of some memory that has been freed. You cannot do that! You must return the allocated memory (and free it later). This is a right pain to manage in C, but is trivial if you return a std::string instead."}, {"owner": {"reputation": 71, "user_id": 7162768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e27ccd9ae7ca2a8d4ec4f4f1ddadc5?s=128&d=identicon&r=PG&f=1", "display_name": "Rookie_Coder2318", "link": "https://stackoverflow.com/users/7162768/rookie-coder2318"}, "edited": false, "score": 0, "creation_date": 1556727633, "post_id": 55931474, "comment_id": 98531697, "body": "@robthebloke : thanks for your patient responses and I struggle with this problem as I&#39;m new to C++. Anyways my situation is that the function getCfgVariable() is called from a c file so I cannot use the return type std::string for this function, can I ? does <code>return tmp.cstr(); </code> in the above &quot;final solution&quot; sound like a fundamentally correct way to return the string as per your suggestion ? Please bare with me and correct me if I&#39;m still wrong."}, {"owner": {"reputation": 71, "user_id": 7162768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e27ccd9ae7ca2a8d4ec4f4f1ddadc5?s=128&d=identicon&r=PG&f=1", "display_name": "Rookie_Coder2318", "link": "https://stackoverflow.com/users/7162768/rookie-coder2318"}, "edited": false, "score": 0, "creation_date": 1556810958, "post_id": 55931474, "comment_id": 98563221, "body": "@robthebloke did some learning and realized what I suggested above is still WRONG/ same as before... I&#39;m planning to use dynamic memory alloc by the caller function which should be a fix, and take care about deleting that memory appropriately."}], "tags": [], "owner": {"reputation": 6746, "user_id": 8185995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02d69271095c22ec7a2f5cad43ea3ac0?s=128&d=identicon&r=PG&f=1", "display_name": "robthebloke", "link": "https://stackoverflow.com/users/8185995/robthebloke"}, "is_accepted": false, "score": 1, "last_activity_date": 1556761208, "last_edit_date": 1556761208, "creation_date": 1556683343, "answer_id": 55931474, "question_id": 55931236, "link": "https://stackoverflow.com/questions/55931236/how-to-define-a-function-to-return-a-pointer-to-a-value-when-no-matching-data/55931474#55931474", "title": "How to define a function to return a pointer to a &quot;&quot; value when no matching data is found?", "body": "<p>Constexpr strings such as \"\\0\", \"\", \"cfgVariable_1\", etc. These are constant strings in memory compiled into your resulting executable. Attempting to write values into those strings is downright dangerous! In old style C, you'd have to use malloc to allocate a bit of memory to use for your string. This is a real pain to deal with in practice (and not ideal for someone who's learning C++). </p>\n\n<p>A far simpler solution is to start using the C++ string object, std::string (which handles all of the dynamic memory allocation for you!). This should reduce your problem to something a little simpler (and most importantly, safer!):</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nstd::string getCfgVariable (const char* const msg)\n{\n  std::ostringstream oss;\n  if(!strcmp(\"cfgVariable_1\", msg))\n  {\n    oss &lt;&lt; cfgVariable_1;\n  }\n  else \n  if(!strcmp(\"cfgVariable_2\", msg))\n  {\n    oss &lt;&lt; cfgVariable_2;\n  }\n  return oss.str();\n}\n</code></pre>\n\n<p>Doing this in C, you have 2 choices. Allocate the memory for the returned string, or use a static buffer that is always available (which is what this example does). </p>\n\n<pre><code>uint32 cfgVariable_1 = 4;\nuint32 cfgVariable_2 = 1;\n\nconst char* getCfgVariable (const char* msg)\n{\n  static char retValue[32] = {0};\n\n  if(strcmp(\"cfgVariable_1\", msg)==0)\n  {\n    // Since I want my function to return a const char* and returning uint32_t is not an option\n    sprintf(retValue, \"%lu\", cfgVariable_1);\n    return retValue;\n  }\n  else if(strcmp(\"cfgVariable_2\", msg)==0)\n  {\n    // Since I want my function to return a const char* and returning uint32_t is not an option\n    sprintf(retValue, \"%lu\", cfgVariable_2);\n    return retValue;\n  }\n  else\n {\n  //error\n }\n return retValue;\n}\n</code></pre>\n\n<p>However, because now the retValue is an array fixed in memory, the string returned would only be valid until the next call to getCfgVariable, which could be a little strange.... </p>\n\n<pre><code>const char* A = getCfgVariable(\"cfgVariable_1\");\nprintf(\"%s\\n\", A); // prints '4'\n\nconst char* B = getCfgVariable(\"cfgVariable_2\");\nprintf(\"%s\\n\", B); // prints '1'\nprintf(\"%s\\n\", A); // now this will print '1', and not '4'. \n\nconst char* C = getCfgVariable(\"anythingElse\");\nprintf(\"%s\\n\", C); // prints \"\"\nprintf(\"%s\\n\", B); // prints \"\"\nprintf(\"%s\\n\", A); // aso prints \"\"\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7162768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e27ccd9ae7ca2a8d4ec4f4f1ddadc5?s=128&d=identicon&r=PG&f=1", "display_name": "Rookie_Coder2318", "link": "https://stackoverflow.com/users/7162768/rookie-coder2318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556761208, "creation_date": 1556680959, "last_edit_date": 1556692430, "question_id": 55931236, "link": "https://stackoverflow.com/questions/55931236/how-to-define-a-function-to-return-a-pointer-to-a-value-when-no-matching-data", "title": "How to define a function to return a pointer to a &quot;&quot; value when no matching data is found?", "body": "<p>I want my function() to always return a \"\" string under error conditions else return a string that is converted to string from an unsigned long integer variable. </p>\n\n<p>My initial implementation is as follows:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>uint32 cfgVariable_1 = 4;\nuint32 cfgVariable_2 = 1;\n\nconst char* getCfgVariable (const char* msg)\n{\n  char* retValue = \"\";\n\n  if(strcmp(\"cfgVariable_1\", msg)==0)\n  {\n    // Since I want my function to return a const char* and returning uint32_t is not an option\n    sprintf((retValue), \"%lu\", cfgVariable_1);\n    return (const char*)retValue;\n  }\n  else if(strcmp(\"cfgVariable_2\", msg)==0)\n  {\n    // Since I want my function to return a const char* and returning uint32_t is not an option\n    sprintf((retValue), \"%lu\", cfgVariable_2);\n    return (const char*)retValue;\n  }\n  else\n {\n  //error\n }\n return (const char*) retValue;\n}\n</code></pre>\n\n<p>When the function is called at different instances to get the cfgVariables, I expect my function getCfgVariable() to return \"\" on error condition, when no match found.\nSomewhere in code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code> const char* CfgValue = NULL;\n\n CfgValue = getCfgVariable(\"cfgVariable_1\");\n\n</code></pre>\n\n<p>Here CfgValue gets pointed to location which contains 4</p>\n\n<p>later </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code> const char* CfgValue = NULL;\n\n CfgValue = getCfgVariable(\"cfgVariable_3\");\n\n</code></pre>\n\n<p>I expect to get a \"\" back but I get 4 instead (CfgValue gets the same address as before).</p>\n\n<p>Fix implemented by me works, but I fail to understand the logic behind it, fix:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const char* getCfgVariable (const char* msg)\n{\n  const char* defValue = \"\";\n  char* retValue = \"\\0\";\n\n  if(strcmp(\"cfgVariable_1\", msg)==0)\n  {\n    // Since I want my function to return a const char* and returning uint32_t is not an option\n    sprintf((retValue), \"%lu\", cfgVariable_1);\n    return (const char*)retValue;\n  }\n  else if(strcmp(\"cfgVariable_2\", msg)==0)\n  {\n    // Since I want my function to return a const char* and returning uint32_t is not an option\n    sprintf((retValue), \"%lu\", cfgVariable_2);\n    return (const char*)retValue;\n  }\n  else\n {\n  //error\n }\n return defValue;\n}\n</code></pre>\n\n<p>I see during debugging that defValue and retValue get pointed to two different locations that do not get overwritten. defValue always gets pointed to the same address when its initialized with \"\" and retValue gets pointed to a different address when initialized with \"\\0\". Can anyone explain the logic behind this ? Is there a better implementation for my use case ?</p>\n\n<p>My Solution after considering the comments:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>const char* getCfgVariable (const char* msg)\n{\n  const char* retValue = \"\";\n  std::ostringstream oss;\n\n  if(!strcmp(\"cfgVariable_1\", msg))\n  {\n    oss &lt;&lt; cfgVariable_1;\n  }\n  else if(!strcmp(\"cfgVariable_2\", msg))\n  {\n    oss &lt;&lt; cfgVariable_2;\n  }\n  else\n  {\n    //error\n    return retValue;\n  }\n  const std::string tmp = oss.str();\n  retValue = tmp.c_str();\n\n  return retValue;\n}\n</code></pre>\n\n<p>Thanks for the comments so far and this solution is still open to further improvement suggestions.</p>\n"}, {"tags": ["c++", "include-path", "qnx"], "answers": [{"tags": [], "owner": {"reputation": 272, "user_id": 10691317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb02cffd3ebd94ba03d5bdf4f2740edc?s=128&d=identicon&r=PG&f=1", "display_name": "I. Hamad", "link": "https://stackoverflow.com/users/10691317/i-hamad"}, "is_accepted": false, "score": 1, "last_activity_date": 1556886831, "last_edit_date": 1556886831, "creation_date": 1556872928, "answer_id": 55966198, "question_id": 55931206, "link": "https://stackoverflow.com/questions/55931206/which-path-for-c-in-qnx7-should-be-included/55966198#55966198", "title": "Which path for C++ in QNX7 should be included?", "body": "<p>Actually <code>QNX 7</code> supports both <code>libstdc++</code> (GNU) and <code>libc++</code> (LLVM). Both libraries implement <code>c++</code> standards and are used widely. You can choose which library to link against on compiling time.</p>\n\n<p>For more info see: <a href=\"http://www.qnx.com/developers/docs/7.0.0/#com.qnx.doc.qnxsdp.migration/topic/cpp_apps.html\" rel=\"nofollow noreferrer\">http://www.qnx.com/developers/docs/7.0.0/#com.qnx.doc.qnxsdp.migration/topic/cpp_apps.html</a>\nand <a href=\"http://www.qnx.com/developers/docs/7.0.0/#com.qnx.doc.neutrino.utilities/topic/q/qcc.html\" rel=\"nofollow noreferrer\">http://www.qnx.com/developers/docs/7.0.0/#com.qnx.doc.neutrino.utilities/topic/q/qcc.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11430020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0973ecb714bfc5a4ab5c3a9714444d38?s=128&d=identicon&r=PG&f=1", "display_name": "MartinFong", "link": "https://stackoverflow.com/users/11430020/martinfong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556886831, "creation_date": 1556680589, "last_edit_date": 1556680963, "question_id": 55931206, "link": "https://stackoverflow.com/questions/55931206/which-path-for-c-in-qnx7-should-be-included", "title": "Which path for C++ in QNX7 should be included?", "body": "<p>There are existing two include paths\uff085.4.0\uff0c v1\uff09 and two libraries(libstdc++, libc++) for C++ project in QNX7.\nWhen using v1 path, it looks like libc++ should be used only. \nI want to know the difference of them and features.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11194863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5GYSC.jpg?s=128&g=1", "display_name": "KoolKassia", "link": "https://stackoverflow.com/users/11194863/koolkassia"}, "edited": false, "score": 0, "creation_date": 1556683603, "post_id": 55931417, "comment_id": 98515976, "body": "So you&#39;re saying that when you run this, the file opens? Just any text file that you named can open?"}, {"owner": {"reputation": 490, "user_id": 5377275, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z_DcwcHvDos/AAAAAAAAAAI/AAAAAAAAAEQ/B7U68v6GxR8/photo.jpg?sz=128", "display_name": "Trevor Keller", "link": "https://stackoverflow.com/users/5377275/trevor-keller"}, "reply_to_user": {"reputation": 11, "user_id": 11194863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5GYSC.jpg?s=128&g=1", "display_name": "KoolKassia", "link": "https://stackoverflow.com/users/11194863/koolkassia"}, "edited": false, "score": 0, "creation_date": 1556683689, "post_id": 55931417, "comment_id": 98515988, "body": "Yes, that&#39;s correct, as long as the file exists. Otherwise, it does as expected, asking again for a file name."}, {"owner": {"reputation": 11, "user_id": 11194863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5GYSC.jpg?s=128&g=1", "display_name": "KoolKassia", "link": "https://stackoverflow.com/users/11194863/koolkassia"}, "edited": false, "score": 1, "creation_date": 1556683805, "post_id": 55931417, "comment_id": 98516015, "body": "Oh I added getline and it worked finally thank you so much!"}], "tags": [], "owner": {"reputation": 490, "user_id": 5377275, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Z_DcwcHvDos/AAAAAAAAAAI/AAAAAAAAAEQ/B7U68v6GxR8/photo.jpg?sz=128", "display_name": "Trevor Keller", "link": "https://stackoverflow.com/users/5377275/trevor-keller"}, "is_accepted": false, "score": 0, "last_activity_date": 1556682729, "creation_date": 1556682729, "answer_id": 55931417, "question_id": 55931165, "link": "https://stackoverflow.com/questions/55931165/why-cant-i-open-a-text-file-with-this-code/55931417#55931417", "title": "Why can&#39;t I open a text file with this code?", "body": "<p>That's strange: this code works fine for me.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;cstdio&gt;\n#include &lt;cstring&gt;\n#include &lt;fstream&gt;\n#include&lt;iostream&gt;\nusing namespace std;\n\nint main ()\n{\n    // Identify variables\n    ifstream inFile;\n    string fileName, str;\n\n    cout &lt;&lt; \"Please enter filename: \";\n    cin &gt;&gt; fileName;\n\n    inFile.open(fileName.c_str());\n\n    while(!inFile) {\n        cout &lt;&lt; \"Invalid file name. \";\n        inFile.clear();\n        inFile.ignore(200,'\\n');\n        cout &lt;&lt; \"Please enter filename: \";\n        cin &gt;&gt; fileName;\n        inFile.open(fileName.c_str());\n    }\n\n    while (std::getline(inFile, str)) {\n        cout &lt;&lt; str;\n    }\n    cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The problem is probably with what you do with <code>inFile</code> after opening it.</p>\n"}], "owner": {"reputation": 11, "user_id": 11194863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5GYSC.jpg?s=128&g=1", "display_name": "KoolKassia", "link": "https://stackoverflow.com/users/11194863/koolkassia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556682729, "creation_date": 1556680172, "last_edit_date": 1556680259, "question_id": 55931165, "link": "https://stackoverflow.com/questions/55931165/why-cant-i-open-a-text-file-with-this-code", "title": "Why can&#39;t I open a text file with this code?", "body": "<p>I'm writing a code to open a file entered by the user and to display the file.</p>\n\n<p>However, no matter how many times I read over my book I can't seem to \ntell why my file is still not opening. I even copied someone else's code \nthat worked and mine still won't open. Someone please help me I've tried \neverything.</p>\n\n<p>Here is part of my code, the void function works perfectly fine and so \ndoes the input validation, but when I open the file nothing is displayed</p>\n\n<pre><code>void readFile(int list[], int size)\n{\n//Identify variables\nifstream inFile;\nstring fileName;\n\n    cout&lt;&lt;\"Please enter filename: \";\n    cin&gt;&gt;fileName;\n\n    inFile.open(fileName.c_str());\n\n    while(!inFile)\n    {\n        cout&lt;&lt;\"Invalid file name. \";\n        inFile.clear();\n        inFile.ignore(200,'\\n');\n        cout&lt;&lt;\"Please enter filename: \";\n        cin&gt;&gt;fileName;\n        inFile.open(fileName.c_str());\n    }\n</code></pre>\n\n<p>For some reason everything else seems to work fine but the file will not display anything when it is opened, instead the program closes.</p>\n"}, {"tags": ["c++", "string", "compiler-errors", "switch-statement", "case"], "comments": [{"owner": {"reputation": 88, "user_id": 7328332, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fdxit.jpg?s=128&g=1", "display_name": "idzireit", "link": "https://stackoverflow.com/users/7328332/idzireit"}, "edited": false, "score": 0, "creation_date": 1556677815, "post_id": 55930917, "comment_id": 98515058, "body": "In your first example you create variable test as a string but your switch statement is integer base (i.e case 0 instead of case (whatever string)).  Hope that helps in pointing you to the right direction"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1556679130, "post_id": 55930917, "comment_id": 98515229, "body": "<code>switch</code> in C and C++ only supports integral types, not strings. Also, in C++ at least, a variable can&#39;t be declared inside of a <code>case</code> block unless it is declared inside of curly braces, eg: <code>case 0: { int hello; cin&gt;&gt;hello; break; }</code>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1556679410, "post_id": 55930917, "comment_id": 98515282, "body": "As @RemyLebeau said, and as long as you can make sure that your switch gets a <code>constexpr</code>, you&#39;re fine. A <code>constexpr</code> hash of your strings would work."}], "owner": {"reputation": 1, "user_id": 11435241, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xnxViRkseyY/AAAAAAAAAAI/AAAAAAAAANw/bwM7VpM35io/photo.jpg?sz=128", "display_name": "Pedro Souza", "link": "https://stackoverflow.com/users/11435241/pedro-souza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1556677559, "answer_count": 0, "score": 0, "last_activity_date": 1556677412, "creation_date": 1556677412, "question_id": 55930917, "link": "https://stackoverflow.com/questions/55930917/why-can-not-i-use-a-string-inside-a-switch-case-structure", "closed_reason": "Duplicate", "title": "Why can not I use a string inside a switch/case structure", "body": "<p>I trying to make a begginers lesson in DEV C++\nbut i can't understand why is wrong</p>\n\n<p><strong>//Why does not this work?</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\nstring test = 0;\nswitch(test)\n{\n    case 0:\n        int hello;\n        cin&gt;&gt;hello;\n        break;\n    default:\n        cout&lt;&lt;\"default\";\n}\n    return 0;\n}\n</code></pre>\n\n<p><strong>//but this work</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\nint test = 0;\nswitch(test)\n{\n    case 0:\n        int hello;\n        cin&gt;&gt;hello;\n        break;\n    default:\n        cout&lt;&lt;\"default\";\n}\nreturn 0;\n}\n</code></pre>\n\n<p><strong>//OUTPUT</strong></p>\n\n<p>[Error] jump to case label [-fpermissive]\n[Error] crosses initialization of 'std::string hello'</p>\n"}]