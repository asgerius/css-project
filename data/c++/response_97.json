[{"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479341053, "post_id": 40644506, "comment_id": 68521018, "body": "A little code for context would help here."}, {"owner": {"reputation": 2691, "user_id": 5477287, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/yKMgF.jpg?s=128&g=1", "display_name": "Babra Cunningham", "link": "https://stackoverflow.com/users/5477287/babra-cunningham"}, "edited": false, "score": 0, "creation_date": 1479342268, "post_id": 40644506, "comment_id": 68521388, "body": "Generally speaking, its good to show your attempts you&#39;ve tried..its rarely appropriate to post a question without including some of your code."}, {"owner": {"reputation": 780, "user_id": 4151225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4dc7068fd65a846c927df403c73805f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/4151225/nicholas-smith"}, "edited": false, "score": 4, "creation_date": 1479342457, "post_id": 40644506, "comment_id": 68521443, "body": "This is duplicate of <a href=\"http://stackoverflow.com/questions/8234779/how-to-remove-from-a-map-while-iterating-it\" title=\"how to remove from a map while iterating it\">stackoverflow.com/questions/8234779/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": true, "score": 4, "last_activity_date": 1479341201, "creation_date": 1479341201, "answer_id": 40644590, "question_id": 40644506, "link": "https://stackoverflow.com/questions/40644506/how-to-iterate-through-a-map-of-vectors-while-deleting/40644590#40644590", "title": "How to iterate through a map of vectors while deleting?", "body": "<p>The standard mutating container loop:</p>\n\n<pre><code>for (auto it = m.begin(); it != m.end(); )\n{\n    // work\n\n    if (/* need to delete */)  // e.g \"if (it-&gt;second.empty())\"\n    {\n        it = m.erase(it);\n    }\n    else\n    {\n        ++it;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1479343126, "creation_date": 1479343126, "answer_id": 40644854, "question_id": 40644506, "link": "https://stackoverflow.com/questions/40644506/how-to-iterate-through-a-map-of-vectors-while-deleting/40644854#40644854", "title": "How to iterate through a map of vectors while deleting?", "body": "<p>Here is a demonstrative program that shows how it can be done</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;vector&gt;\n\nint main() \n{\n    std::map&lt;int, std::vector&lt;int&gt;&gt; m =\n    {\n        { 1, { 1, 2 } },\n        { 2, { 2 } },\n        { 3, { 3, 4 } },\n        { 4, { 4 } }\n    };\n\n    for ( const auto &amp;p : m )\n    {\n        std::cout &lt;&lt; p.first &lt;&lt; \": \";\n        for ( int x : p.second ) std::cout &lt;&lt; x &lt;&lt; ' ';\n        std::cout &lt;&lt; std::endl;\n    }\n\n    for ( auto it = m.begin(); it != m.end(); )\n    {\n        it-&gt;second.erase( it-&gt;second.begin() );\n\n        if ( it-&gt;second.empty() ) it = m.erase( it );\n        else ++it;\n    }\n\n    std::cout &lt;&lt; std::endl;\n\n    for ( const auto &amp;p : m )\n    {\n        std::cout &lt;&lt; p.first &lt;&lt; \": \";\n        for ( int x : p.second ) std::cout &lt;&lt; x &lt;&lt; ' ';\n        std::cout &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>1: 1 2 \n2: 2 \n3: 3 4 \n4: 4 \n\n1: 2 \n3: 4 \n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6351988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88bc5349e57d24b603accfe1b4e31732?s=128&d=identicon&r=PG&f=1", "display_name": "kless135", "link": "https://stackoverflow.com/users/6351988/kless135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 40644590, "answer_count": 2, "score": 0, "last_activity_date": 1479343126, "creation_date": 1479340777, "question_id": 40644506, "link": "https://stackoverflow.com/questions/40644506/how-to-iterate-through-a-map-of-vectors-while-deleting", "title": "How to iterate through a map of vectors while deleting?", "body": "<p>I have a map of vectors in C++. For each vector, I'd like to delete entries that meet a certain condition. If a vector ends up empty, I'd like to delete it from the map. I know deletion can mess up iterators, and doubly iterating makes this even more confusing for me. What's the best way to accomplish this?</p>\n"}, {"tags": ["python", "c++", "c", "jupyter-notebook", "jupyterhub"], "answers": [{"comments": [{"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1479376554, "post_id": 40651615, "comment_id": 68534692, "body": "Oh, thanks for the good news! I would really appreciate it if you could backup your answer with some reference that supports it."}], "tags": [], "owner": {"reputation": 26037, "user_id": 542190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3bb1f122c476561bb9a98a1523e8b5e?s=128&d=identicon&r=PG", "display_name": "filmor", "link": "https://stackoverflow.com/users/542190/filmor"}, "is_accepted": true, "score": 1, "last_activity_date": 1479377181, "last_edit_date": 1479377181, "creation_date": 1479376300, "answer_id": 40651615, "question_id": 40644469, "link": "https://stackoverflow.com/questions/40644469/is-jupyterhub-kernel-safe-across-users/40651615#40651615", "title": "Is JupyterHub kernel safe across users?", "body": "<p>Even if you were using straight Jupyter Notebook instead of JupyterHub, each kernel is a single process, that runs kind of independent of the notebook server. Crashes of individual kernels will not take down the notebook server.</p>\n\n<p>Check out the <a href=\"http://jupyter.readthedocs.io/en/latest/architecture/how_jupyter_ipython_work.html\" rel=\"nofollow noreferrer\">architecture documentation</a>. We've been running a setup with a single Jupyter Notebook instance (not even JupyterHub, because Windows :/) for about 3 years now. The only problems occuring are due to resource constraints (e.g. single kernel takes up a lot of memory), but that's solvable on both the OS and organisational level.</p>\n"}], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 40651615, "answer_count": 1, "score": 1, "last_activity_date": 1479377181, "creation_date": 1479340597, "last_edit_date": 1479376082, "question_id": 40644469, "link": "https://stackoverflow.com/questions/40644469/is-jupyterhub-kernel-safe-across-users", "title": "Is JupyterHub kernel safe across users?", "body": "<p>I'm using JupyterHub to share computational power of a big computer among some users. The software that's primarily used is a <code>ctypes</code> extension Python script that uses a sophisticated C/C++ code. This code isn't invulnerable to memory problems and crashes.</p>\n\n<p><strong>My question is:</strong> If a low-level problem happens with one user and his kernel gets, say, a segmentation fault, will that crash the main server by design and get all users to lose their kernel information? Or is it designed to create a new server for every user that logs in, so that such problems don't happen?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1479340160, "post_id": 40644365, "comment_id": 68520737, "body": "Think about this: <code>&amp;data[1000]</code>."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1479340256, "post_id": 40644365, "comment_id": 68520763, "body": "<code>input_data(&amp;data[1000], size);</code> I don&#39;t think this does what you think it does. You should read your book more carefully."}, {"owner": {"reputation": 13, "user_id": 7170205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60fac9d59ed5843b70f7f11e949e6b32?s=128&d=identicon&r=PG&f=1", "display_name": "greatj0b", "link": "https://stackoverflow.com/users/7170205/greatj0b"}, "edited": false, "score": 0, "creation_date": 1479340294, "post_id": 40644365, "comment_id": 68520774, "body": "I&#39;m only passing the array by reference, not <code>size</code>, so I don&#39;t know what you&#39;re getting at"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1479340363, "post_id": 40644365, "comment_id": 68520795, "body": "<i>&quot;I&#39;m only passing the array by reference&quot;</i> No you are not. Please, please stop programming based on guessing. C++ is <i>very</i> much not the language for that, it&#39;s just too weird."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1479353131, "post_id": 40644365, "comment_id": 68524111, "body": "It&#39;s a nice endless loop too since size will never change."}], "answers": [{"tags": [], "owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "is_accepted": true, "score": 1, "last_activity_date": 1479352479, "last_edit_date": 1479352479, "creation_date": 1479340312, "answer_id": 40644409, "question_id": 40644365, "link": "https://stackoverflow.com/questions/40644365/function-changing-a-variable-even-when-passed-by-value/40644409#40644409", "title": "Function changing a variable, even when passed by value?", "body": "<p>You are overwriting the stack.</p>\n\n<p>First you declare a function that takes an array:</p>\n\n<pre><code>void input_data(int data[], short size);\n</code></pre>\n\n<p>And then you call it.  Instead of passing a pointer to the first element of the array like this:</p>\n\n<pre><code>input_data(data, size);\ninput_data(&amp;data[0], size);\n</code></pre>\n\n<p>You are passing a pointer to the space immediately AFTER the array (which includes many things including size):</p>\n\n<pre><code>input_data(&amp;data[1000], size);\n</code></pre>\n\n<p>While a parameter of <code>data</code> and <code>&amp;data[0]</code> are essentially the same, <code>&amp;data[1000]</code> points to a completely different thing - it points to the address of <code>data[1000]</code> which doesn't exist in the array because the array only has 1000 elements (from 0 to 999)</p>\n"}], "owner": {"reputation": 13, "user_id": 7170205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60fac9d59ed5843b70f7f11e949e6b32?s=128&d=identicon&r=PG&f=1", "display_name": "greatj0b", "link": "https://stackoverflow.com/users/7170205/greatj0b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 40644409, "answer_count": 1, "score": -2, "last_activity_date": 1479352479, "creation_date": 1479340048, "question_id": 40644365, "link": "https://stackoverflow.com/questions/40644365/function-changing-a-variable-even-when-passed-by-value", "title": "Function changing a variable, even when passed by value?", "body": "<p>This is what I have, and it's causing some extremely weird discrepancies. </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nvoid input_data(int data[], short size);\n\nint main(){\nshort size;\nint data[1000];\n\ncout &lt;&lt; \"How many values would you like to store? \";\ncin &gt;&gt; size;\n\nwhile (size &gt; 0){\ncout &lt;&lt; \"Enter your \" &lt;&lt; size &lt;&lt; \" values:\" &lt;&lt; endl;\ninput_data(&amp;data[1000], size);\ncout &lt;&lt; size &lt;&lt; \" values stored in array.\" &lt;&lt; endl;\n}\n}\n\nvoid input_data(int data[], short size)\n{\n     int i;\n     for (i=0;i&lt;size;i++){\n         cin &gt;&gt; data[i];\n     }\n}\n</code></pre>\n\n<p>So this code should be pretty straight forward, but any time I enter a value other than 3 for <code>size</code> ,  the line <code>cout &lt;&lt; size &lt;&lt; \" values stored in array.\" &lt;&lt; endl;</code> ends up saying \"0 values stored in array.\"</p>\n\n<p>I don't understand how <code>input_data</code> could be changing the value of <code>size</code>, since I am passing by value, not by reference. </p>\n\n<p>Why is this happening, and better yet, why is it working with the number 3?   </p>\n"}, {"tags": ["c++", "winapi", "io"], "answers": [{"tags": [], "owner": {"reputation": 2827, "user_id": 3931225, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/46nwm.gif?s=128&g=1", "display_name": "KompjoeFriek", "link": "https://stackoverflow.com/users/3931225/kompjoefriek"}, "is_accepted": false, "score": 1, "last_activity_date": 1479340744, "creation_date": 1479340744, "answer_id": 40644502, "question_id": 40644283, "link": "https://stackoverflow.com/questions/40644283/why-is-my-pipe-inserting-an-extra-space-between-writes/40644502#40644502", "title": "Why is my pipe inserting an extra space between writes?", "body": "<p><code>sizeof(\"j\\n\")</code> will return the length of the string + 1, because it is null terminated. This extra <em>space</em> would be that null character.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1479340783, "creation_date": 1479340783, "answer_id": 40644509, "question_id": 40644283, "link": "https://stackoverflow.com/questions/40644283/why-is-my-pipe-inserting-an-extra-space-between-writes/40644509#40644509", "title": "Why is my pipe inserting an extra space between writes?", "body": "<p>The problem is that you are using <code>sizeof()</code> incorrectly.  A <code>char</code> string literal is treated as a null-terminated <code>const char[]</code> array by the compiler.  Calling <code>sizeof()</code> on a string literal <em>includes the null-terminator</em> in the size!  <code>sizeof(\"j\\n\")</code> is 3, not 2 like you are expecting.   That null terminator is where your extra space is coming from.  You should be using <code>strlen()</code> instead:</p>\n\n<pre><code>WriteFile(hWriteIN, \"j\\n\", strlen(\"j\\n\"), &amp;dwWritten, NULL);\nWriteFile(hWriteIN, \"q\\n\", strlen(\"q\\n\"), &amp;dwWritten, NULL);\n</code></pre>\n\n<p>That being said, you should change your reading loop to this instead:</p>\n\n<pre><code>int main()\n{\n    string line;\n    while (getline(cin, line))\n    {\n        if (line == \"q\") break;\n        cout &lt;&lt; line &lt;&lt; endl;\n    }  \n    return 0\n}\n</code></pre>\n\n<p>And don't forget to close the handles that <code>CreateProcess()</code> returns:</p>\n\n<pre><code>CloseHandle(procInfo.hThread);\nCloseHandle(procInfo.hProcess);\n</code></pre>\n"}], "owner": {"reputation": 5102, "user_id": 1054322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/IhsyB.jpg?s=128&g=1", "display_name": "MatrixManAtYrService", "link": "https://stackoverflow.com/users/1054322/matrixmanatyrservice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 40644509, "answer_count": 2, "score": -1, "last_activity_date": 1479340783, "creation_date": 1479339582, "question_id": 40644283, "link": "https://stackoverflow.com/questions/40644283/why-is-my-pipe-inserting-an-extra-space-between-writes", "title": "Why is my pipe inserting an extra space between writes?", "body": "<p>I have the following simple program. It echos lines until it receives one with a lone <code>q</code>.  Then it quits. </p>\n\n<pre><code>// quitOnQ.cpp\nint main()\n{\n    string line;\n    while (line != \"q\")\n    {\n        cout &lt;&lt; line &lt;&lt; endl;\n        getline(cin, line);\n    }  \n    return 0\n}\n</code></pre>\n\n<p>When I launch the program on its own, it works as expected.  However, if I launch it from another program and use an anonymous pipe to write to stdin twice, I get an extra space prefixed to the contents of the second write.</p>\n\n<hr>\n\n<h3>Manual Run</h3>\n\n<p><code>j&lt;enter&gt;</code> -> \"j\"</p>\n\n<p><code>q&lt;enter&gt;</code> -> [program closes]</p>\n\n<h3>Piped stdin A (success)</h3>\n\n<p><code>q\\n</code> -> [program closes]</p>\n\n<h3>Piped stdin B (success)</h3>\n\n<p><code>j\\nq\\n</code> -> [program closes]</p>\n\n<h3>Piped stdin C (failure)</h3>\n\n<p><code>j\\n</code> -> \"j\"</p>\n\n<p><code>q\\n</code> -> \" q\" [program remains open, notice the extra space]</p>\n\n<hr>\n\n<p>Why does this happen?</p>\n\n<p>Here is the code I am using to write to stdin:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nint main()\n{\n    HANDLE hWriteIN, hReadIN;\n    SECURITY_ATTRIBUTES saPipe;\n    PROCESS_INFORMATION procInfo;\n    STARTUPINFO procSi;\n    DWORD dwWritten, dwRead;\n\n    saPipe.nLength = sizeof(SECURITY_ATTRIBUTES);\n    saPipe.bInheritHandle = TRUE;\n    saPipe.lpSecurityDescriptor = NULL;\n\n    // child stdin pipe\n    CreatePipe(&amp;hReadIN, &amp;hWriteIN, &amp;saPipe, 0);\n    SetHandleInformation(hWriteIN, HANDLE_FLAG_INHERIT, 0);\n\n    ZeroMemory(&amp;procInfo, sizeof(PROCESS_INFORMATION));\n    ZeroMemory(&amp;procSi, sizeof(STARTUPINFO));\n    procSi.cb = sizeof(STARTUPINFO);\n    procSi.hStdInput = hReadIN;\n    procSi.dwFlags |= STARTF_USESTDHANDLES;\n\n    TCHAR args[] = TEXT(\"quitOnQ.exe\");\n    CreateProcess(NULL, args, NULL, NULL, TRUE, CREATE_NEW_CONSOLE, NULL, NULL, &amp;procSi, &amp;procInfo);\n\n    this_thread::sleep_for(5s);\n\n    WriteFile(hWriteIN, \"j\\n\", sizeof(\"j\\n\"), &amp;dwWritten, NULL);\n    WriteFile(hWriteIN, \"q\\n\", sizeof(\"q\\n\"), &amp;dwWritten, NULL);\n    //WriteFile(hWriteIN, \"j\\nq\\n\", sizeof(\"j\\nq\\n\"), &amp;dwWritten, NULL);\n\n    this_thread::sleep_for(5s);\n\n    CloseHandle(hWriteIN);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "image", "directx", "directx-9"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6605139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7293a40bc80f63bf82f5bdb7d7754a97?s=128&d=identicon&r=PG&f=1", "display_name": "braffolk", "link": "https://stackoverflow.com/users/6605139/braffolk"}, "edited": false, "score": 0, "creation_date": 1479639886, "post_id": 40689491, "comment_id": 68634602, "body": "But that is what I&#39;m trying to get around. I want to be able to load things without adhering to texture size limitations."}, {"owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "reply_to_user": {"reputation": 11, "user_id": 6605139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7293a40bc80f63bf82f5bdb7d7754a97?s=128&d=identicon&r=PG&f=1", "display_name": "braffolk", "link": "https://stackoverflow.com/users/6605139/braffolk"}, "edited": false, "score": 0, "creation_date": 1479640150, "post_id": 40689491, "comment_id": 68634674, "body": "You cannot create a texture larger than your driver will allow. Your question asks how to load part of an image - perhaps you should clarify."}], "tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": false, "score": 0, "last_activity_date": 1479532760, "creation_date": 1479532760, "answer_id": 40689491, "question_id": 40644195, "link": "https://stackoverflow.com/questions/40644195/directx9-c-how-to-load-texture-from-a-part-of-a-massive-image/40689491#40689491", "title": "Directx9 C++ How to load texture from a part of a massive image", "body": "<p>Creating a texture with part of an image (I will assume you want a contiguous sub-rectangle) is essentially the same as doing so with the entire image. In D3D9, you <code>LockRect</code> on your target texture, and write the image contents. Instead of writing the entire contents of the image, just write the bytes, row by row, starting with the sub-rectangle's y-origin, and offsetting each row's source by the sub-rectangle's x-origin.</p>\n\n<p>Of course, your target texture will still need to adhere to the texture size limitations.</p>\n"}], "owner": {"reputation": 11, "user_id": 6605139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7293a40bc80f63bf82f5bdb7d7754a97?s=128&d=identicon&r=PG&f=1", "display_name": "braffolk", "link": "https://stackoverflow.com/users/6605139/braffolk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479532760, "creation_date": 1479339018, "question_id": 40644195, "link": "https://stackoverflow.com/questions/40644195/directx9-c-how-to-load-texture-from-a-part-of-a-massive-image", "title": "Directx9 C++ How to load texture from a part of a massive image", "body": "<p>What's a good way to load a part of a massive image into memory and convert it into a texture? Just trying to load the whole image to a texture and using StretchRect will not work, because if you try to load an image that is 17000 pixels in width for example, it will not work on most GPUs.</p>\n"}, {"tags": ["c++", "windows", "ssl", "network-programming", "schannel"], "owner": {"reputation": 27546, "user_id": 6266, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/398efb709eb606ef79ee6436f55f93bd?s=128&d=identicon&r=PG", "display_name": "Fire Lancer", "link": "https://stackoverflow.com/users/6266/fire-lancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479338021, "creation_date": 1479338021, "question_id": 40644003, "link": "https://stackoverflow.com/questions/40644003/tls-for-windows-store-and-windows-7-desktop", "title": "TLS for Windows Store and Windows 7+ Desktop", "body": "<p>I want a client/server C++ application that can use TLS for secure communication, including client certificates, and potential to select and validate certificates myself.</p>\n\n<p>I have used Schannel to do this before, but the key <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa375506(v=vs.85).aspx\" rel=\"nofollow noreferrer\">InitializeSecurityContext</a> is marked <code>[desktop apps only]</code>.</p>\n\n<p>Have Microsoft provided a new equivalent API?</p>\n\n<p>Although in theory I could replace the whole thing (since in the end, I can still have a normal plaintext TCP socket) I would rather stick to OS components if possible.</p>\n"}, {"tags": ["c++", "c++11", "vector", "smart-pointers"], "answers": [{"tags": [], "owner": {"reputation": 30265, "user_id": 3246555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ziIu9.png?s=128&g=1", "display_name": "AlexD", "link": "https://stackoverflow.com/users/3246555/alexd"}, "is_accepted": false, "score": 2, "last_activity_date": 1479338739, "last_edit_date": 1479338739, "creation_date": 1479337918, "answer_id": 40643987, "question_id": 40643961, "link": "https://stackoverflow.com/questions/40643961/pushing-shared-ptrthis-into-vector-results-in-free-invalid-pointer-error/40643987#40643987", "title": "Pushing shared_ptr(this) into vector results in &quot;free(): invalid pointer&quot; error", "body": "<p>Try <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this/shared_from_this\" rel=\"nofollow noreferrer\"><code>enable_shared_from_this</code></a>:</p>\n\n<pre><code>class A : public std::enable_shared_from_this&lt;A&gt;{\npublic:\n    void pushme(std::vector&lt;std::shared_ptr&lt;A&gt;&gt; &amp; vec) {\n        vec.push_back(shared_from_this());\n    }\n};\n\nint main()\n{\n    std::shared_ptr&lt;A&gt; test = std::make_shared&lt;A&gt;();\n    std::vector&lt;std::shared_ptr&lt;A&gt;&gt; vec;\n    test-&gt;pushme(vec);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1479338874, "post_id": 40644018, "comment_id": 68520376, "body": "On the other hand, <code>shared_ptr</code> can hold a custom <code>deleter</code> that is responsible for freeing the object, so you could theoretically have <code>shared_ptr</code> instances that point to an object stored in automatic memory and not have <code>delete</code> called on the object when all of the <code>shared_ptr</code> instances have gone out of scope.  Not that you <i>should</i> do this, but you <i>can</i> do it."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 9, "last_activity_date": 1479338741, "last_edit_date": 1479338741, "creation_date": 1479338089, "answer_id": 40644018, "question_id": 40643961, "link": "https://stackoverflow.com/questions/40643961/pushing-shared-ptrthis-into-vector-results-in-free-invalid-pointer-error/40644018#40644018", "title": "Pushing shared_ptr(this) into vector results in &quot;free(): invalid pointer&quot; error", "body": "<pre><code>A test;\n</code></pre>\n\n<p>This declares an object in function local scope.  The object is automatically freed when it goes out of scope.</p>\n\n<p>Only objects in dynamic scope (created with <code>new</code>) can be managed by <code>std::shared_ptr</code>. That's the whole purpose of <code>std::shared_ptr</code> -- to automatically call <code>delete</code> when the last shared pointer to an object goes away. And you can only <code>delete</code> something that has been allocated with <code>new</code>.</p>\n"}], "owner": {"reputation": 169, "user_id": 7170095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c1d576b15eb53d05abe2fdb36795573?s=128&d=identicon&r=PG&f=1", "display_name": "murphy", "link": "https://stackoverflow.com/users/7170095/murphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1851, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1479338741, "creation_date": 1479337778, "last_edit_date": 1479338169, "question_id": 40643961, "link": "https://stackoverflow.com/questions/40643961/pushing-shared-ptrthis-into-vector-results-in-free-invalid-pointer-error", "title": "Pushing shared_ptr(this) into vector results in &quot;free(): invalid pointer&quot; error", "body": "<p>I am trying to implement a class that can push a smart pointer to itself into a vector:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;vector&gt;\n\nclass A {\npublic:\n    void pushme(std::vector&lt;std::shared_ptr&lt;A&gt;&gt; &amp; vec) {\n        vec.push_back(std::shared_ptr&lt;A&gt;(this));\n    }\n};\n\nint main() {\n    A test;\n    std::vector&lt;std::shared_ptr&lt;A&gt;&gt; vec;\n    test.pushme(vec);\n    return 0;\n}\n</code></pre>\n\n<p>This compiles nicely, but on execution I get an <code>free(): invalid pointer</code> error. Please help me understand what is going on here.</p>\n"}, {"tags": ["c++", "arrays", "c++11", "templates"], "comments": [{"owner": {"reputation": 750, "user_id": 1217572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3395789344149488484a532c3a02ec25?s=128&d=identicon&r=PG&f=1", "display_name": "Fran&#231;ois Moisan", "link": "https://stackoverflow.com/users/1217572/fran%c3%a7ois-moisan"}, "edited": false, "score": 0, "creation_date": 1479337478, "post_id": 40643883, "comment_id": 68519924, "body": "Your error suggests the array should be passed by pointer, yet your code seems to take a reference."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1479337612, "post_id": 40643883, "comment_id": 68519973, "body": "Why would your sort function care about <code>SIZE</code>? If it wanted to know it&#39;d ask: <code>a.size()</code>. Even if you&#39;re not allowed to use <code>std::sort</code> you should write something that operates the same way, uses the same interface. Implementing it like this is asking for trouble."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1479337622, "post_id": 40643883, "comment_id": 68519976, "body": "Compile as expected <a href=\"https://ideone.com/0S4ZcJ\" rel=\"nofollow noreferrer\">here</a> (Even if it doesn&#39;t give expected output)."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1479337705, "post_id": 40643883, "comment_id": 68520007, "body": "Can&#39;t duplicate. <a href=\"http://ideone.com/unr378\" rel=\"nofollow noreferrer\">ideone.com/unr378</a>."}, {"owner": {"reputation": 56, "user_id": 7141464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc0af5c70c927141bf6eba5128cad74?s=128&d=identicon&r=PG", "display_name": "pasasap", "link": "https://stackoverflow.com/users/7141464/pasasap"}, "edited": false, "score": 1, "creation_date": 1479337754, "post_id": 40643883, "comment_id": 68520020, "body": "Do you use eclipse? <a href=\"http://stackoverflow.com/questions/7342307/eclipse-returns-error-for-the-code-for-which-g-doesnt\" title=\"eclipse returns error for the code for which g doesnt\">stackoverflow.com/questions/7342307/&hellip;</a> Did you try to compile it?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1479338005, "post_id": 40643883, "comment_id": 68520095, "body": "Please <a href=\"https://stackoverflow.com/posts/40643883/edit\">edit</a> your question to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1548, "user_id": 1365061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/663f21bc0ace65ff9405fc115ec61980?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1365061/alex"}, "edited": false, "score": 0, "creation_date": 1479338300, "post_id": 40643883, "comment_id": 68520183, "body": "i&#39;ve edited my answer, thanks for your help so far."}, {"owner": {"reputation": 1548, "user_id": 1365061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/663f21bc0ace65ff9405fc115ec61980?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1365061/alex"}, "reply_to_user": {"reputation": 56, "user_id": 7141464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbc0af5c70c927141bf6eba5128cad74?s=128&d=identicon&r=PG", "display_name": "pasasap", "link": "https://stackoverflow.com/users/7141464/pasasap"}, "edited": false, "score": 0, "creation_date": 1479338566, "post_id": 40643883, "comment_id": 68520272, "body": "@pasasap: I can confirm that the problem seems to be eclipse. Any ideas how to solve this without turning off code-analysis ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1479343234, "post_id": 40643883, "comment_id": 68521630, "body": "Are you using <code>#include &lt;array&gt;</code> and are you using a using directive like <code>using namespace std;</code>?"}, {"owner": {"reputation": 1548, "user_id": 1365061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/663f21bc0ace65ff9405fc115ec61980?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1365061/alex"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1479344850, "post_id": 40643883, "comment_id": 68522085, "body": "@NathanOliver plz see the comment of pasasap (as i wrote before)."}, {"owner": {"reputation": 2461, "user_id": 794424, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a5b6e8ecfec991c237944ad2bd109108?s=128&d=identicon&r=PG", "display_name": "Yan Zhou", "link": "https://stackoverflow.com/users/794424/yan-zhou"}, "edited": false, "score": 0, "creation_date": 1479838823, "post_id": 40643883, "comment_id": 68723659, "body": "There&#39;s nothing wrong with your program, syntactically speaking. The error message suggest errors on your test program. Are you using gTest?"}], "answers": [{"comments": [{"owner": {"reputation": 1548, "user_id": 1365061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/663f21bc0ace65ff9405fc115ec61980?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1365061/alex"}, "edited": false, "score": 0, "creation_date": 1479339136, "post_id": 40644186, "comment_id": 68520470, "body": "That exactly what I tried in my first example (see above). As @pasasap mentioned, the problem seems to be eclipse. Any ideas how to solve this code-analysis error ? I&#39;ve been searching but I didn&#39;t found any suitable answer yet."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1548, "user_id": 1365061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/663f21bc0ace65ff9405fc115ec61980?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1365061/alex"}, "edited": false, "score": 0, "creation_date": 1479340244, "post_id": 40644186, "comment_id": 68520758, "body": "Have you enabled c++11 or c++14 ?"}, {"owner": {"reputation": 1548, "user_id": 1365061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/663f21bc0ace65ff9405fc115ec61980?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1365061/alex"}, "edited": false, "score": 0, "creation_date": 1479340382, "post_id": 40644186, "comment_id": 68520804, "body": "I tried to enable c++11 but i already disabled it again because it causes errors too."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 1548, "user_id": 1365061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/663f21bc0ace65ff9405fc115ec61980?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1365061/alex"}, "edited": false, "score": 0, "creation_date": 1479341118, "post_id": 40644186, "comment_id": 68521043, "body": "You should use at least c++11 (for <code>std::array</code>)."}, {"owner": {"reputation": 1548, "user_id": 1365061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/663f21bc0ace65ff9405fc115ec61980?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1365061/alex"}, "edited": false, "score": 0, "creation_date": 1479341186, "post_id": 40644186, "comment_id": 68521067, "body": "i currently use -std=gnu++0x which should IIRC be something like c++11."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1479338977, "creation_date": 1479338977, "answer_id": 40644186, "question_id": 40643883, "link": "https://stackoverflow.com/questions/40643883/c-template-function-with-stdarray/40644186#40644186", "title": "C++ template function with std::array", "body": "<p>It should simply be</p>\n\n<pre><code>std::array&lt;int, 3&gt; arr = {3,1,-9};\nminSortLoop(arr); // not *arr or &amp;arr\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1548, "user_id": 1365061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/663f21bc0ace65ff9405fc115ec61980?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1365061/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1479837755, "creation_date": 1479837755, "answer_id": 40748673, "question_id": 40643883, "link": "https://stackoverflow.com/questions/40643883/c-template-function-with-stdarray/40748673#40748673", "title": "C++ template function with std::array", "body": "<p>The problem is my IDE Eclipse. Once I turned off the code analysis feature it compiled as expected.</p>\n"}], "owner": {"reputation": 1548, "user_id": 1365061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/663f21bc0ace65ff9405fc115ec61980?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/1365061/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2240, "favorite_count": 0, "accepted_answer_id": 40748673, "answer_count": 2, "score": 2, "last_activity_date": 1479837755, "creation_date": 1479337300, "last_edit_date": 1479344944, "question_id": 40643883, "link": "https://stackoverflow.com/questions/40643883/c-template-function-with-stdarray", "title": "C++ template function with std::array", "body": "<p>I have the following function: </p>\n\n<pre><code>template &lt;typename T, size_t SIZE&gt;\nvoid minSortLoop(array&lt;T, SIZE&gt;&amp; a){\n    for(size_t o = 0; o &lt; SIZE; o++) {\n        size_t minIx = 0;\n        for(size_t i = o + 1; i &lt; SIZE; i++) {\n            if(a[i] &lt; a[minIx]) {\n                minIx = i;\n            }\n        }\n        swap(a[o], a[minIx]);\n    }\n}\n</code></pre>\n\n<p>I like to call it from the other location like:</p>\n\n<pre><code>std::array&lt;int, 3&gt; arr = {3,1,-9};\nminSortLoop(arr);\n</code></pre>\n\n<p>But I get the errors:</p>\n\n<blockquote>\n  <p>Description   Resource    Path    Location    Type Invalid arguments ' Candidates\n  are: void minSortLoop(? &amp;) '  Test.cpp    /gTest  line 23 Semantic Error</p>\n  \n  <p>Description Resource    Path    Location    Type no matching function for call\n  to 'minSortLoop(std::array*)'    Test.cpp    /gTest  line 23 C/C++\n  Problem</p>\n</blockquote>\n\n<p>How do I call my sort function correctly ?</p>\n\n<p>best regards :-)</p>\n\n<p>PS: I'm not allowed to use std::sort.</p>\n\n<hr>\n\n<p>EDIT 1:</p>\n\n<p>@Fran\u00e7ois Moisan:</p>\n\n<p>I've tried to pass in other ways like:</p>\n\n<pre><code>std::array&lt;int, 3&gt; arr = {3,1,-9};\nminSortLoop(&amp;arr);\n</code></pre>\n\n<p>with error:</p>\n\n<blockquote>\n  <p>Description   Resource    Path    Location    Type Invalid arguments ' Candidates\n  are: void minSortLoop(? &amp;) '  Test.cpp    /gTest  line 23 Semantic Error</p>\n  \n  <p>Description   Resource    Path    Location    Type no matching function for call\n  to 'minSortLoop(std::array*)'    Test.cpp    /gTest  line 23 C/C++\n  Problem</p>\n</blockquote>\n\n<p>and:</p>\n\n<pre><code>std::array&lt;int, 3&gt; arr = {3,1,-9};\nminSortLoop(*arr);\n</code></pre>\n\n<p>with error:</p>\n\n<blockquote>\n  <p>Description   Resource    Path    Location    Type Invalid arguments ' Candidates\n  are: void minSortLoop(? &amp;) '  Test.cpp    /gTest  line 23 Semantic Error</p>\n  \n  <p>Description Resource    Path    Location    Type no match for 'operator*'\n  (operand type is 'std::array')   Test.cpp    /gTest  line 23 C/C++\n  Problem</p>\n</blockquote>\n\n<p>Not sure how to call this. The reference suggests something like my first example <a href=\"http://de.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>@tadman:</p>\n\n<p>I need to pass the size. That's given from the task description :-(</p>\n\n<p>@Jarod42: Which compiler is this ? I'm using Cygwin in eclipse under windows 7.</p>\n\n<p>@pasasap: Yes, I compiled it or at least I try. It results in the described errors. </p>\n\n<hr>\n\n<p>EDIT 2:</p>\n\n<p>As @pasasap mentioned in one of the comments, it seems like the problem is because of eclipse. Does anyone know a solution without turning off cody-analysis ?</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1479337101, "post_id": 40643832, "comment_id": 68519784, "body": "So you searched STACKOVERFLOW and found nothing about it? You are the first one ever to have this question? :/"}, {"owner": {"reputation": 301, "user_id": 6112221, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b268ee2a7e44fdcd4ae79109877b4400?s=128&d=identicon&r=PG&f=1", "display_name": "qwert", "link": "https://stackoverflow.com/users/6112221/qwert"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1479337183, "post_id": 40643832, "comment_id": 68519809, "body": "Didn&#39;t find anything specifically comparing these two. Maybe I didn&#39;t do enough searching?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1479337231, "post_id": 40643832, "comment_id": 68519826, "body": "Prbably, but it&#39;s okay, <a href=\"http://stackoverflow.com/questions/14309136/passing-arrays-to-function-in-c\">this answers your question</a>, next time be more careful! :)"}], "owner": {"reputation": 301, "user_id": 6112221, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b268ee2a7e44fdcd4ae79109877b4400?s=128&d=identicon&r=PG&f=1", "display_name": "qwert", "link": "https://stackoverflow.com/users/6112221/qwert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "closed_date": 1479337264, "answer_count": 0, "score": 0, "last_activity_date": 1479337274, "creation_date": 1479337009, "last_edit_date": 1479337274, "question_id": 40643832, "link": "https://stackoverflow.com/questions/40643832/passing-array-to-function-in-c-somewhat-confused-with-pointers", "closed_reason": "Duplicate", "title": "Passing array to function in c++ somewhat confused with pointers", "body": "<p>Does </p>\n\n<pre><code>void function(int *parameter){}\n</code></pre>\n\n<p>do the same thing as </p>\n\n<pre><code>void function (int parameter[]){}\n</code></pre>\n\n<p>?\nAnd could the first one also be used to pass in variable pointers not arrays? Kind of confused.</p>\n"}, {"tags": ["c++", "arrays", "heap", "memmove"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1479337060, "post_id": 40643803, "comment_id": 68519759, "body": "This code has no hope of working if you&#39;re copying <code>m</code> floats to an arbitrary single float. I&#39;d strongly encourage you to use Standard Library containers like <code>std::vector</code> to store this data."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1479337097, "post_id": 40643803, "comment_id": 68519781, "body": "<code>sizeof(JtFloat32)</code> and <code>sizeof(float)</code> may not be the same - else why have <code>JtFloat32</code>? If they differ, <code>float* temporary = new float;     memcpy( temporary, (JtFloat32*)&amp;(source[m]), sizeof(JtFloat32));</code> is trouble."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1479337130, "post_id": 40643803, "comment_id": 68519794, "body": "You need <code>JtFloat32* temporary = new JtFloat32[m]</code> at the <i>absolute least</i>. You should also change the method signature to <code>JtFloat32*</code> to avoid casting."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479337248, "post_id": 40643803, "comment_id": 68519838, "body": "What is <code>size</code>, should that be <code>sourcesize</code>?"}, {"owner": {"reputation": 741, "user_id": 1773011, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/274b28985e391bb9d3d9bf53f8bc7b7c?s=128&d=identicon&r=PG", "display_name": "lightrek", "link": "https://stackoverflow.com/users/1773011/lightrek"}, "edited": false, "score": 0, "creation_date": 1479337310, "post_id": 40643803, "comment_id": 68519868, "body": "changed my errors"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1479337540, "creation_date": 1479337540, "answer_id": 40643925, "question_id": 40643803, "link": "https://stackoverflow.com/questions/40643803/will-memmove-function-share-the-same-address-as-the-temporary-pointer/40643925#40643925", "title": "Will memmove function share the same address as the temporary pointer?", "body": "<p><code>memmove()</code> copies the <em>contents</em> of the memory that <code>temporary</code> points to. That copy is not dependent on the original <code>temporary</code>, so it's perfectly safe to delete it after calling <code>memmove()</code>.</p>\n\n<p>But there's no need for the temporary in the first place, you can copy directly from the original array.</p>\n\n<pre><code>addRecord(&amp;(source[m]), sizeof source[m]);\n</code></pre>\n"}], "owner": {"reputation": 741, "user_id": 1773011, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/274b28985e391bb9d3d9bf53f8bc7b7c?s=128&d=identicon&r=PG", "display_name": "lightrek", "link": "https://stackoverflow.com/users/1773011/lightrek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479337540, "creation_date": 1479336814, "last_edit_date": 1479337250, "question_id": 40643803, "link": "https://stackoverflow.com/questions/40643803/will-memmove-function-share-the-same-address-as-the-temporary-pointer", "title": "Will memmove function share the same address as the temporary pointer?", "body": "<p>Suppose there is pointer to an array of float values: <code>float *source;</code> and we know its size as <code>int sourcesize;</code> </p>\n\n<p>There is an already implemented function which add an element to the <code>souce</code> array from the <code>inputVec</code>:</p>\n\n<pre><code>void addRecord(const float* inputVec, int&amp; sourcesize)\n{\n   int inputVecSize = sourcesize;\n   memmove( (float*)&amp;(source[inputVecSize]), inputVec, sizeof(float));\n}\n</code></pre>\n\n<p>Now, I want to copy 1 element from the <code>m</code>th element of the source array and attach it to the source end. By using the addRecord above, I have implemented a function as below:</p>\n\n<pre><code>// suppose m is smaller than the current sourcesize\nvoid copyRecord(const float* source, int&amp; m)\n{\n    float* temporary = new float;\n    memcpy( temporary, (float*)&amp;(source[m]), sizeof(float));\n    addRecord(temporary, sourcesize);\n    delete temporary;\n}\n</code></pre>\n\n<p>It seems the <code>memmove</code> call in the <code>addRecord</code> function may share the variable location of temporary. Thus, maybe I should not delete <code>temporary</code> in the end. But I think maybe they do not share the same address, then I should delete <code>temporary</code> in this case. </p>\n\n<p>So, should I delete <code>temporary</code> in the end or not?</p>\n\n<p>Or, is there a better way to copy an element from <code>source</code> array to its end by using function <code>addRecord</code>?</p>\n"}, {"tags": ["c++", "c++11", "templates", "lambda", "template-argument-deduction"], "answers": [{"comments": [{"owner": {"reputation": 1742, "user_id": 1079430, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6bf00489520e8f013752bac52318def2?s=128&d=identicon&r=PG", "display_name": "GuyGizmo", "link": "https://stackoverflow.com/users/1079430/guygizmo"}, "edited": false, "score": 1, "creation_date": 1479413147, "post_id": 40643972, "comment_id": 68559250, "body": "Thanks for this! In studying your answer, I have learned quite a bit about auto, decltype and decay."}], "tags": [], "owner": {"reputation": 15610, "user_id": 2456565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xa8D9.png?s=128&g=1", "display_name": "krzaq", "link": "https://stackoverflow.com/users/2456565/krzaq"}, "is_accepted": true, "score": 3, "last_activity_date": 1479337851, "creation_date": 1479337851, "answer_id": 40643972, "question_id": 40643797, "link": "https://stackoverflow.com/questions/40643797/in-c11-is-there-a-way-to-not-require-template-arguments-when-calling-a-functio/40643972#40643972", "title": "In C++11 is there a way to not require template arguments when calling a function that takes any callable as an argument, including bound methods?", "body": "<p>You could attempt to implement <a href=\"http://en.cppreference.com/w/cpp/utility/functional/invoke\" rel=\"nofollow noreferrer\"><code>std::invoke</code></a> in C++11, but I think it would be really cumbersome.</p>\n\n<p>It's fairly simple to make a function template for a generalized callable:</p>\n\n<pre><code>template &lt;class T, class F&gt;\nauto myMap(const std::list&lt;T&gt; &amp;list, F&amp;&amp; func)\n    -&gt; std::list&lt;typename std::decay&lt;decltype(func(*list.begin()))&gt;::type&gt;\n{\n    using U = typename std::decay&lt;decltype(func(*list.begin()))&gt;::type;\n    std::list&lt;U&gt; result;\n\n    for(typename std::list&lt;T&gt;::const_iterator it = list.begin(); it != list.end(); ++it) {\n        result.push_back(func(*it));\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>You get expression sfinae for free. Now there's only member function pointer to be taken care of:</p>\n\n<pre><code>template &lt;class T, class F&gt;\nauto myMap(const std::list&lt;T&gt; &amp;list, F&amp;&amp; func)\n    -&gt; std::list&lt;typename std::decay&lt;decltype(((*list.begin()).*func)())&gt;::type&gt;\n{\n    return myMap(list, [=](T const&amp; t){ return (t.*func)(); });\n}\n</code></pre>\n\n<p>Now you can call your functions as expected. <a href=\"http://melpon.org/wandbox/permlink/ARezLfXK4AYRjYC6\" rel=\"nofollow noreferrer\">demo</a></p>\n\n<hr>\n\n<p>While at it, you could replace this ugly <code>for</code> loop with a ranged for:</p>\n\n<pre><code>for(auto const&amp; elem : list) {\n    results.push_back(func(elem));\n}\n</code></pre>\n\n<p>Or use an algorithm:</p>\n\n<pre><code>std::transform(list.begin(), list.end(), std::back_inserter(result), func);\n</code></pre>\n"}], "owner": {"reputation": 1742, "user_id": 1079430, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6bf00489520e8f013752bac52318def2?s=128&d=identicon&r=PG", "display_name": "GuyGizmo", "link": "https://stackoverflow.com/users/1079430/guygizmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 40643972, "answer_count": 1, "score": 2, "last_activity_date": 1479337851, "creation_date": 1479336762, "last_edit_date": 1479337490, "question_id": 40643797, "link": "https://stackoverflow.com/questions/40643797/in-c11-is-there-a-way-to-not-require-template-arguments-when-calling-a-functio", "title": "In C++11 is there a way to not require template arguments when calling a function that takes any callable as an argument, including bound methods?", "body": "<p>In order to broaden my understanding of C++11, I'm experimenting with writing functional helpers and seeing if I can make calling them less verbose. Consider the following code:</p>\n\n<pre><code>#include &lt;list&gt;\n\nint timesTwo(int x) { return x*2; }\nint timesX(int x, int y) { return x*y; }\n\nclass Foo {\npublic:\n    Foo(int a) : value(a) {};\n    int fooTimesTwo() const { return value*2; };\n    int value;\n};\n\ntemplate &lt;class T, class U&gt;\nstd::list&lt;U&gt; myMap(const std::list&lt;T&gt; &amp;list, const std::function&lt;U(const T &amp;)&gt; &amp;func)\n{\n    std::list&lt;U&gt; result;\n\n    for(typename std::list&lt;T&gt;::const_iterator it = list.begin(); it != list.end(); ++it) {\n        result.push_back(func(*it));\n    }\n\n    return result;\n}\n\nint main()\n{\n    std::list&lt;int&gt; numbers = {1,2,3,4,5};\n    std::list&lt;int&gt; numbers2 = myMap&lt;int,int&gt;(numbers, [] (int x) { return x*2; });\n    std::list&lt;int&gt; numbers3 = myMap&lt;int,int&gt;(numbers, &amp;timesTwo);\n    std::list&lt;int&gt; numbers4 = myMap&lt;int,int&gt;(numbers, std::bind(timesX, 2, std::placeholders::_1));\n\n    std::list&lt;Foo&gt; fooList = {Foo(1), Foo(2), Foo(3), Foo(4)};\n    std::list&lt;int&gt; numbers5 = myMap&lt;Foo,int&gt;(fooList, &amp;Foo::fooTimesTwo);    \n    return 0;\n}\n</code></pre>\n\n<p>Is there anyway to rewrite <code>myMap</code> so that</p>\n\n<ol>\n<li><p>all four of the calls to it in my code example do not require any template arguments, and...</p></li>\n<li><p>there's only one general implementation, and I don't have to manually write an overloaded version for each combination of types I want to call it with?</p></li>\n</ol>\n\n<p>I've tried changing the second argument of <code>myMap</code> to be a third templated type instead of <code>std::function</code>, but it fails because a) the second templated type <code>U</code> can't be inferred, and b) even if it could, the fourth call to <code>myMap</code> will cause an error on line 20 due to <code>&amp;Foo::fooTimesTwo</code> not being a function or function pointer.</p>\n\n<p>I'm willing to consider all of the various features of C++11 to do this, and I don't particularly care if it makes the declaration or definition of <code>myMap</code> obtuse or unreadable. I'm just wondering if it's possible and, if so, what sort of techniques and C++11 features can accomplish it.</p>\n"}, {"tags": ["c++", "gcc", "recursion", "clang", "tail-recursion"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1479336764, "post_id": 40643773, "comment_id": 68519649, "body": "The compiler may assume your program terminates after a finite time, so if it doesn&#39;t, you are in the compilers hands. Not much more to say."}, {"owner": {"reputation": 5090, "user_id": 27130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iiR2r.jpg?s=128&g=1", "display_name": "Nathan Monteleone", "link": "https://stackoverflow.com/users/27130/nathan-monteleone"}, "edited": false, "score": 0, "creation_date": 1479336869, "post_id": 40643773, "comment_id": 68519686, "body": "I think this is answered here:<a href=\"http://stackoverflow.com/questions/18478078/clang-infinite-tail-recursion-optimization\" title=\"clang infinite tail recursion optimization\">stackoverflow.com/questions/18478078/&hellip;</a>"}, {"owner": {"reputation": 9560, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "edited": false, "score": 0, "creation_date": 1479337077, "post_id": 40643773, "comment_id": 68519766, "body": "There is a side-effect though, right? The result of the call to rec?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479337763, "post_id": 40643773, "comment_id": 68520029, "body": "Your function is not tail-recursive."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1479337830, "post_id": 40643773, "comment_id": 68520054, "body": "A tail-recursive function has to return the result of the recursive call directly, it can&#39;t use it as the argument to another function or operator."}], "owner": {"reputation": 9560, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "closed_date": 1479336863, "answer_count": 0, "score": 1, "last_activity_date": 1479336898, "creation_date": 1479336654, "question_id": 40643773, "link": "https://stackoverflow.com/questions/40643773/why-does-clang-boundless-recursion-terminate", "closed_reason": "Duplicate", "title": "Why does clang boundless recursion terminate?", "body": "<p>With tail-call optimisation enabled via <code>-O2</code>, the following program runs endlessly using GCC, as expected. With Clang however, the program terminates, and outputs a value; apparently different each time. Does anyone know why?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint rec()\n{\n  return 1 + rec();\n}\n\nint main(int argc, char *argv[])\n{\n  int r;\n  r = rec();\n  std::cout &lt;&lt; r &lt;&lt; '\\n';\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "vector"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1479336266, "post_id": 40643649, "comment_id": 68519453, "body": "What does <code>giving me what I want</code> mean? What are you expecting? What do you get?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1479336314, "post_id": 40643649, "comment_id": 68519476, "body": "Posting bits and pieces of code is not helpful. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 0, "creation_date": 1479336362, "post_id": 40643649, "comment_id": 68519495, "body": "What values are you getting when you evaluate the three expressions that you posted at the end."}, {"owner": {"reputation": 69, "user_id": 6525006, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2bad84ae5a63183fbb072d28c12dd187?s=128&d=identicon&r=PG&f=1", "display_name": "Toy_Reid", "link": "https://stackoverflow.com/users/6525006/toy-reid"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1479336369, "post_id": 40643649, "comment_id": 68519500, "body": "@Ben I&#39;d like it to return the 1 so I can then compare it with another boolean to see if they are the same/etc. Something like if(shapes[index]-&gt;at(0).at(1) == 1) {do this}"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1479336483, "post_id": 40643649, "comment_id": 68519546, "body": "<code>&#39;1&#39;</code> as not the same thing as <code>1</code>. Start by understanding this simple concept."}, {"owner": {"reputation": 563, "user_id": 1092688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc131329fdd2933c5b1ab7c9bd07f5ab?s=128&d=identicon&r=PG", "display_name": "Eric M.", "link": "https://stackoverflow.com/users/1092688/eric-m"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1479336565, "post_id": 40643649, "comment_id": 68519578, "body": "@SamVarshavchik He just said &quot;return the 1&quot;, clearly he meant the char &#39;1&#39; from the string in question"}, {"owner": {"reputation": 563, "user_id": 1092688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc131329fdd2933c5b1ab7c9bd07f5ab?s=128&d=identicon&r=PG", "display_name": "Eric M.", "link": "https://stackoverflow.com/users/1092688/eric-m"}, "edited": false, "score": 0, "creation_date": 1479336616, "post_id": 40643649, "comment_id": 68519600, "body": "@Toy_Reid It would be helpful if you could upload more information. In particular, the results of what you&#39;ve tried and how you&#39;re actually populating <code>shapes</code>"}, {"owner": {"reputation": 69, "user_id": 6525006, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2bad84ae5a63183fbb072d28c12dd187?s=128&d=identicon&r=PG&f=1", "display_name": "Toy_Reid", "link": "https://stackoverflow.com/users/6525006/toy-reid"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1479336757, "post_id": 40643649, "comment_id": 68519648, "body": "@RSahu Sorry, I realize I should have done that. I&#39;ve updated the original post."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1479337079, "post_id": 40643649, "comment_id": 68519768, "body": "@Toy_Reid That <code>if &#47; else</code> statement that changes the grid value could be re[laced with simply <code>if(shapes[index]-&gt;at(y)[z]) grid[i][j] = !grid[i][j];</code>.  Also, why do you need to use pointers in your program?  I don&#39;t see a need for them."}, {"owner": {"reputation": 69, "user_id": 6525006, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2bad84ae5a63183fbb072d28c12dd187?s=128&d=identicon&r=PG&f=1", "display_name": "Toy_Reid", "link": "https://stackoverflow.com/users/6525006/toy-reid"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479337266, "post_id": 40643649, "comment_id": 68519844, "body": "@PaulMcKenzie My professor is fairly adamant about using pointers whenever you&#39;re storing vectors, but my solution might just be to do away with them. Good point about the if statement, I was trying to figure out how to do it along those lines but I was up pretty late last night haha."}], "answers": [{"comments": [{"owner": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 0, "creation_date": 1479336445, "post_id": 40643706, "comment_id": 68519532, "body": "This will not work as <code>shapes[0]</code> evaluates to a pointer. You have to dereference it to access the <code>vector&lt;string&gt;</code>."}, {"owner": {"reputation": 563, "user_id": 1092688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc131329fdd2933c5b1ab7c9bd07f5ab?s=128&d=identicon&r=PG", "display_name": "Eric M.", "link": "https://stackoverflow.com/users/1092688/eric-m"}, "reply_to_user": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 0, "creation_date": 1479336472, "post_id": 40643706, "comment_id": 68519544, "body": "Woops, didn&#39;t see he used <code>Shape *</code>, gotta change to <code>-&gt;</code>"}, {"owner": {"reputation": 69, "user_id": 6525006, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2bad84ae5a63183fbb072d28c12dd187?s=128&d=identicon&r=PG&f=1", "display_name": "Toy_Reid", "link": "https://stackoverflow.com/users/6525006/toy-reid"}, "edited": false, "score": 0, "creation_date": 1479336710, "post_id": 40643706, "comment_id": 68519630, "body": "I accidentally included the wrong typedef, it should actually be a vector&lt;vector&lt;bool&gt; &gt;, not a vector&lt;string&gt;."}, {"owner": {"reputation": 563, "user_id": 1092688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc131329fdd2933c5b1ab7c9bd07f5ab?s=128&d=identicon&r=PG", "display_name": "Eric M.", "link": "https://stackoverflow.com/users/1092688/eric-m"}, "reply_to_user": {"reputation": 69, "user_id": 6525006, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2bad84ae5a63183fbb072d28c12dd187?s=128&d=identicon&r=PG&f=1", "display_name": "Toy_Reid", "link": "https://stackoverflow.com/users/6525006/toy-reid"}, "edited": false, "score": 0, "creation_date": 1479336826, "post_id": 40643706, "comment_id": 68519665, "body": "@Toy_Reid yeah I suspect the problem actually lies with how you populated the vector, as something like <code>shapes[0]-&gt;at(0)[1]</code> should work."}, {"owner": {"reputation": 69, "user_id": 6525006, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2bad84ae5a63183fbb072d28c12dd187?s=128&d=identicon&r=PG&f=1", "display_name": "Toy_Reid", "link": "https://stackoverflow.com/users/6525006/toy-reid"}, "edited": false, "score": 0, "creation_date": 1479337007, "post_id": 40643706, "comment_id": 68519739, "body": "@EricM. I&#39;ve updated the post with information on how the vector is populated."}], "tags": [], "owner": {"reputation": 563, "user_id": 1092688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc131329fdd2933c5b1ab7c9bd07f5ab?s=128&d=identicon&r=PG", "display_name": "Eric M.", "link": "https://stackoverflow.com/users/1092688/eric-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1479336479, "last_edit_date": 1479336479, "creation_date": 1479336357, "answer_id": 40643706, "question_id": 40643649, "link": "https://stackoverflow.com/questions/40643649/access-elements-in-a-vector-of-pointers-to-multi-dimensional-vectors/40643706#40643706", "title": "Access elements in a vector of pointers to multi-dimensional vectors", "body": "<p>Why are you using a vector of <code>string</code> and not just a 2D array of char or whatever you need? Then you could access them easily: <code>shape[x][y]</code>.  </p>\n\n<p>Anyway, the way you currently have it set up you can access the value you want like this:\n<code>shapes[0]-&gt;at(0).at(1);</code></p>\n"}], "owner": {"reputation": 69, "user_id": 6525006, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2bad84ae5a63183fbb072d28c12dd187?s=128&d=identicon&r=PG&f=1", "display_name": "Toy_Reid", "link": "https://stackoverflow.com/users/6525006/toy-reid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479337103, "creation_date": 1479336048, "last_edit_date": 1479337103, "question_id": 40643649, "link": "https://stackoverflow.com/questions/40643649/access-elements-in-a-vector-of-pointers-to-multi-dimensional-vectors", "title": "Access elements in a vector of pointers to multi-dimensional vectors", "body": "<p>I'm writing a program that allows tetris-like shapes to be input. I store these shapes in a 2-D vector of booleans so they'll then look like:</p>\n\n<pre><code>110   |   1   |   111\n011   |   1   |   010\n      |   1   |   111\n// Where a 0 denotes \"empty space\"\n</code></pre>\n\n<p>I then point to each of those 2-D vectors and store those pointers in a vector called shapes.\nMy problem rests in accessing those individual 0's and 1's (in order to compare them to other shapes).</p>\n\n<p>For example, given:</p>\n\n<pre><code>vector&lt;vector&lt;bool&gt; &gt; Shape;\nvector&lt;Shape *&gt; shapes;\n</code></pre>\n\n<p>where shapes has three elements that point to the 2-D vectors I gave previously, I want to be able to access the 1 in the (0, 1) position of the first shape.</p>\n\n<p>I've tried:</p>\n\n<pre><code>shapes[index]-&gt;at(0).at(1);\nshapes[index]-&gt;at(0)[1];\nshapes[index][0][1];\n</code></pre>\n\n<p>among many other things but none of these seem to be giving me what I want. I'm still fairly new to pointers so I hope I'm not just missing something blatantly obvious.</p>\n\n<p>Thank you in advance!</p>\n\n<p>As per request, here is a bigger chunk of my code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\ntypedef vector&lt;vector&lt;bool&gt; &gt; Shape;\n\nclass ShapeShifter {\npublic:\n    ShapeShifter(int argc, char **argv);\n    void Apply(int index, int row, int col);\n    bool FindSolution(int index);\n    void AddShape(Shape *newShape);\n    void AddMove(int index, int row, int col);\n    void PrintMoves();\n    void PrintGrid();\nprotected:\n    vector&lt;vector&lt;bool&gt; &gt; grid;\n    vector&lt;Shape *&gt; shapes;\n    vector&lt;string&gt; moves;\n};\n\nvoid ShapeShifter::Apply(int index, int row, int col) {\n    int i, j, k;\n    int y = 0, z = 0;\n\n    if((row + shapes[index]-&gt;size() &gt; grid.size()) || (col + shapes[index]-&gt;at(0).size() &gt; grid[0].size())) {\n        return; // shape won't fit\n    }\n\n    for(i = row; i &lt; (row + shapes[index]-&gt;size()); i++) {\n        for(j = col; j &lt; (col + shapes[index]-&gt;at(0).size()); j++) {\n            if(shapes[index]-&gt;at(y)[z] == 1) {\n                if(grid[i][j] == 0) {\n                    grid[i][j] = 1;\n                }\n                else {\n                    grid[i][j] = 0;\n                }\n\n            }\n            z++;\n        }\n        z = 0;\n        y++;\n    }\n    return;\n}\n</code></pre>\n\n<p>In this I have a grid of bools and I'm trying to mask it with the shape in the given index, where if the shape has a 1 the bool in the corresponding element of the grid will be flipped.</p>\n\n<p>The shapes vector is populated with lines on standard input like so:</p>\n\n<pre><code>ShapeShifter sshift(argc, argv);\nShape *newShape;\nvector&lt;bool&gt; shapeLine;\nint i, j;\nstring line;\n\nwhile(getline(cin, line)) {\n    j = 0;\n    newShape = new Shape;\n    for(i = 0; i &lt; line.size(); i++) {\n        if(line[i] == ' ') {\n            j++;\n        }\n        else {\n            shapeLine.push_back(line[i] - '0');\n        }\n    }\n    newShape-&gt;push_back(shapeLine);\n    sshift.AddShape(newShape);\n    line.clear();\n}\n\nvoid ShapeShifter::AddShape(Shape *newShape) {\n    shapes.push_back(newShape);\n}\n</code></pre>\n"}, {"tags": ["c++", "mpi", "custom-data-type"], "answers": [{"tags": [], "owner": {"reputation": 4724, "user_id": 1024740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1037d544b43c71c34225fac55e0c7750?s=128&d=identicon&r=PG", "display_name": "Rob Latham", "link": "https://stackoverflow.com/users/1024740/rob-latham"}, "is_accepted": false, "score": 0, "last_activity_date": 1479417373, "creation_date": 1479417373, "answer_id": 40665172, "question_id": 40643577, "link": "https://stackoverflow.com/questions/40643577/mpi-reduce-with-mpi-datatype/40665172#40665172", "title": "MPI Reduce with mpi_datatype", "body": "<p>You can look at Boost::MPI.   Boost will serialize and deserialize types for you.  It might not be exactly what you want.  The other approach Boost takes is described here: <a href=\"http://www.boost.org/doc/libs/1_62_0/doc/html/mpi/tutorial.html#mpi.skeleton_and_content\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_62_0/doc/html/mpi/tutorial.html#mpi.skeleton_and_content</a>  where you send a \"skeleton\" describing the structure an then the \"content\" describing the actual data.</p>\n"}], "owner": {"reputation": 3, "user_id": 2510865, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8965f92f279d48699ecdeadb772c412b?s=128&d=identicon&r=PG", "display_name": "realbas", "link": "https://stackoverflow.com/users/2510865/realbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479417373, "creation_date": 1479335623, "question_id": 40643577, "link": "https://stackoverflow.com/questions/40643577/mpi-reduce-with-mpi-datatype", "title": "MPI Reduce with mpi_datatype", "body": "<p>How can reduce to first K results of a specify MPI_Type that is a struct of pointers to matrices/vectors with different sizes? I know that I can't pass address between process but I really need pass or specify size of matrices when reduce or only copy the data in operation?</p>\n\n<p>My struct is:</p>\n\n<pre><code>//vector/vector of vector can be translated by static vector\nstruct reg{\n    std::vector&lt; std::vector&lt;int&gt; &gt; A; //have exactly NxN\n    RegTD *TD; //have exactly 1 &lt;&lt; N\n    int N;\n    std::vector&lt;int&gt; Basin; //max 1&lt;&lt;N\n    std::vector&lt; std::vector&lt;int&gt; &gt; BasinInfo; //max Bsize.size() * Bsize.size()\n    float Entropy;\n};\n</code></pre>\n"}, {"tags": ["c++", "class", "wizard", "backtracking", "family-tree"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479335853, "post_id": 40643576, "comment_id": 68519295, "body": "<i>I have no idea what should I do</i> -- Step through your program using your debugger to see where your program takes a different path than you expected and/or inspect your variables."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1479335904, "post_id": 40643576, "comment_id": 68519305, "body": "Guaranteed you are stepping out of bounds somewhere. Change all of your vector accesses <code>[]</code> to <code>at()</code> and then use your debugger to see which one throws an exception."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1479336213, "post_id": 40643576, "comment_id": 68519428, "body": "What you should do is learn safe programming practices that make it logically impossible for common programming bugs -- such as stomping on memory, running off past the end of the array, and wild pointer dereferencing -- to occur. Like: using smart pointers instead of raw pointers; using iterators, using standard algorithms. Another thing you should do is edit your question and include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479336344, "post_id": 40643576, "comment_id": 68519490, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which includes a <code>main</code> function with the data that duplicates the issue.  Second, there are functions such as <code>std::find_if</code> that you should be using to search the vector, and not need to code entire functions and <code>for</code> loops to find an element in a vector."}], "owner": {"reputation": 23, "user_id": 4165623, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9GpJ5RdUAco/AAAAAAAAAAI/AAAAAAAAAKo/N2AScFRcRyo/photo.jpg?sz=128", "display_name": "Milad Mokhtari", "link": "https://stackoverflow.com/users/4165623/milad-mokhtari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479343085, "creation_date": 1479335620, "last_edit_date": 1479343085, "question_id": 40643576, "link": "https://stackoverflow.com/questions/40643576/memory-being-messed-up-while-searching-for-relation-in-family-tree", "title": "Memory being messed up while searching for relation in family tree", "body": "<p>I am implementing class of wizards in this code but I have a serious problem with finding relation in wizards family tree. I am using a back tracking method to find all relation between two nodes but memory will start to being messed up in the middle of the task and I have no idea what should I do.\nHere you can see implementation of this class using C++.</p>\n\n<pre><code>#include \"Wizard.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nWizard::Wizard(string first_name, string surname, string occupation, string organization, string wand)\n: first_name(first_name),surname(surname), occupation(occupation), organization(organization), wand(wand)\n{\n    this-&gt;married=0;\n    this-&gt;wand=\"Dragon Hearstring\";\n    this-&gt;occupation=\"Auror\";\n    this-&gt;organization=\"Dumbledore Army\";\n};\n\nvoid Wizard::set_first_name(string _name){\n    this-&gt;first_name = _name;\n}\n\nvoid Wizard::set_surname(string _surname){\n    this-&gt;surname = _surname;\n}\n\nvoid Wizard::set_occupation(string _occupation){\n    this-&gt;occupation = _occupation;\n}\n\nvoid Wizard::set_organization(string _organization){\n    this-&gt;organization = _organization;\n}\n\nvoid Wizard::set_wand(string _wand){\n    this-&gt;wand = _wand;\n}\n\nstring Wizard::get_name(){\n    string name;\n    name = first_name + \" \" + surname;\n    return name;\n}\n\nstring Wizard::get_occupation(){\n    return occupation;\n}\n\nstring Wizard::get_organization(){\n    return organization;\n}\n\nstring Wizard::get_wand(){\n    return wand;\n}\n\nvoid Wizard::print_parents(){\n    cerr &lt;&lt; \"Parents: \";\n    for (int i=0; i&lt;parents.size(); i++){\n        cout &lt;&lt; parents[i]-&gt;get_name();\n        if ( i!= parents.size() -1){\n            cout &lt;&lt; \" &amp; \";\n        }\n    }\n    cout &lt;&lt; endl;\n}\n\nvoid Wizard::print_siblings(){\n    cerr &lt;&lt;\"Siblings: \";\n    for (int i=0; i&lt;siblings.size(); i++){\n        cout &lt;&lt; siblings[i]-&gt;get_name();\n        if ( i &lt; siblings.size() -1){\n            cout &lt;&lt; \" &amp; \";\n        }\n    }\n    cout &lt;&lt; endl;\n}\n\nvoid Wizard::print_spouse(){\n    cerr &lt;&lt;\"Spouse: \";\n    if (married==1)\n        cout &lt;&lt; spouse-&gt;get_name();\n    cout &lt;&lt; endl;\n}\n\nvoid Wizard::print_children(){\n    cerr &lt;&lt;\"Children: \";\n    for (int i=0; i&lt;children.size(); i++){\n        cout &lt;&lt; children[i]-&gt;get_name();\n        if ( i &lt; children.size() - 1){\n            cout &lt;&lt; \" &amp; \";\n        }\n    }\n    cout &lt;&lt; endl;   \n}\n\nvoid Wizard::operator*(Wizard&amp; _spouse){\n    this-&gt;married=1;\n    _spouse.married=1;\n    cout &lt;&lt; this-&gt;get_name() &lt;&lt; \" and \" &lt;&lt; _spouse.get_name() &lt;&lt; endl;\n    this-&gt;spouse = &amp;_spouse;\n    _spouse.spouse = this;\n    _spouse.print_spouse();\n    vector&lt; Wizard* &gt; these_two;\n    these_two.push_back(this);\n    these_two.push_back(&amp;_spouse);\n    for (int i=0; i&lt;this-&gt;children.size(); i++)\n        children[i]-&gt;parents = these_two;\n    for (int i=0; i&lt;_spouse.children.size(); i++)\n        children[i]-&gt;parents = these_two;\n}\n\nvoid Wizard::operator+(Wizard&amp; _child){\n    if (!search_in_vector(this-&gt;children,&amp;_child))\n        this-&gt;children.push_back(&amp;_child);\n    if (!search_in_vector(this-&gt;spouse-&gt;children,&amp;_child))\n        this-&gt;spouse-&gt;children.push_back(&amp;_child);\n    vector&lt; Wizard* &gt; these_two;\n    these_two.push_back(this);\n    these_two.push_back(this-&gt;spouse);\n    _child.parents=these_two;\n    _child.surname = this-&gt;surname;\n    for (int i=0; i&lt;this-&gt;children.size(); i++){\n        if(!search_in_vector(_child.siblings,children[i]) &amp;&amp;     (children[i]!=&amp;_child)){\n            _child.siblings.push_back(children[i]);\n            children[i]-&gt;siblings.push_back(&amp;_child);\n        }\n    }\n}\n\n    void Wizard::print_relation_with(Wizard&amp; john_doe){\n    vector&lt;string&gt; path2;\n    vector&lt; vector&lt; string &gt; &gt; path1;\n    vector&lt;Wizard*&gt; nodes_in_the_way;\n    nodes_in_the_way.push_back(this);\n    if (this-&gt;get_name() == john_doe.get_name()){\n        cout &lt;&lt; this-&gt;get_name() &lt;&lt; \" is \" &lt;&lt; john_doe.get_name() &lt;&lt; endl;\n        return;\n    }\n    this-   &gt;search_for_relation(*this,john_doe,path1,path2,nodes_in_the_way);\n    if (path1.size() == 0){\n        cout &lt;&lt; \"no relation\" &lt;&lt; endl;\n        return;\n    }\n    path2=path1[0];\n    for (int i=1;i&lt;path1.size();i++){\n        if (path1[i].size() &lt; path2.size())\n            path2=path1[i];\n    }\n    cout &lt;&lt; this-&gt;get_name() &lt;&lt; \" is \";\n    for (int i=0; i&lt;path2.size(); i++)\n        cout &lt;&lt; path2[i] &lt;&lt; \" of \";\n    cout &lt;&lt; john_doe.get_name() &lt;&lt; endl;\n}\n\nvoid Wizard::search_for_relation(Wizard&amp; a,Wizard&amp; b,vector&lt;       vector&lt;string&gt; &gt; &amp;path1,vector&lt;string&gt; &amp;path2,vector&lt; Wizard* &gt;    &amp;nodes_in_the_way){\n    cerr &lt;&lt; \"////////////\" &lt;&lt; endl;\n    cerr &lt;&lt; \"IM INSIDE \" &lt;&lt; a.get_name() &lt;&lt; \" , SEARCHING FOR \" &lt;&lt;     b.get_name() &lt;&lt; \" - \" &lt;&lt; path2.size() &lt;&lt; endl;\n    cout &lt;&lt; \"PATH: \";\n    for (int i=0;i&lt;nodes_in_the_way.size();i++)\n        cout &lt;&lt; nodes_in_the_way[i]-&gt;get_name() &lt;&lt; \"  \";\n    cout &lt;&lt; endl;\n    a.print_spouse();\n    a.print_children();\n    a.print_parents();\n    if (a.get_name() == b.get_name() &amp;&amp; path2.size()==0){\n        return;\n    }\n    if (a.get_name() == b.get_name() ){\n        path1.push_back(path2);\n        return;\n    }   \n    if (a.married){\n        if (!search_in_vector(nodes_in_the_way,a.spouse)){\n            path2.push_back(\"spouse\");\n            nodes_in_the_way.push_back(a.spouse);\n            search_for_relation(*    (a.spouse),b,path1,path2,nodes_in_the_way);\n            path2.pop_back();\n            nodes_in_the_way.pop_back();\n        }       \n    }\n    // parents\n    for (int i=0;i&lt;a.parents.size();i++){\n        if (!search_in_vector(nodes_in_the_way,a.parents[i])){\n            path2.push_back(\"child\");\n            nodes_in_the_way.push_back(a.parents[i]);\n            search_for_relation(*    (a.parents[i]),b,path1,path2,nodes_in_the_way);\n            path2.pop_back();\n            nodes_in_the_way.pop_back();\n        }   \n    }\n    // children\n    for (int i=0;i&lt;a.children.size();i++){\n        if (!search_in_vector(nodes_in_the_way,a.children[i])){\n            path2.push_back(\"parent\");\n            nodes_in_the_way.push_back(a.children[i]);\n            search_for_relation(*    (a.children[i]),b,path1,path2,nodes_in_the_way);\n            path2.pop_back();\n            nodes_in_the_way.pop_back();\n        }   \n    }\n}\n\n///////////// NON-METHOD FUNCITONS ///////////////\n\nbool search_in_vector(vector&lt; Wizard* &gt; a,Wizard* b){\n    for (int i=0; i&lt;a.size(); i++)\n        if (a[i]-&gt;get_name() == b-&gt;get_name())\n            return true;\n    return false;\n}\n</code></pre>\n\n<p>So that was the code.\nHere you can see the output after some back_tracking:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pTo3o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pTo3o.png\" alt=\"Output\"></a></p>\n\n<p>Here you see that Harry's information has been messed up during last recursion and the executable file can't print his parents.</p>\n\n<p>Please let me know that I'm doing wrong! Thanks!</p>\n"}, {"tags": ["c++", "arrays", "pointers", "matrix", "multidimensional-array"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1479333872, "post_id": 40643143, "comment_id": 68518434, "body": "You have bits and pieces of code that can&#39;t be compiled. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 71, "user_id": 4180941, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/32ef3b59da5ed2c7c427d89b9a415782?s=128&d=identicon&r=PG&f=1", "display_name": "roughosing", "link": "https://stackoverflow.com/users/4180941/roughosing"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1479334044, "post_id": 40643143, "comment_id": 68518515, "body": "Sorry I maybe made it too minimal, I know the error is definitely due to the code above, but I will add any relevant pieces of code now"}, {"owner": {"reputation": 588, "user_id": 5521699, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/366e35c3da44f844f227e496e18463f5?s=128&d=identicon&r=PG&f=1", "display_name": "Polb", "link": "https://stackoverflow.com/users/5521699/polb"}, "edited": false, "score": 0, "creation_date": 1479334078, "post_id": 40643143, "comment_id": 68518522, "body": "You are not initialising your matrix properly. A matrix can be regarded as an array of arrays, so initially you need to set up the main array, whose each element is going to hold a pointer to another array. I guess your first line inside the function is attempting to do this. However, it should be done the following way: <code>matrix = new int*[columnCount]</code>. Then you need to iteratate over all the elements of this array and make each element point to a new array: <code>for (int i = 0; i &lt; columnCount; i++) {matrix[i] = new int[rowCount]}</code>. This creates a new matrix with <code>colCount</code> cols &amp;<code>rowCount</code> rows"}, {"owner": {"reputation": 71, "user_id": 4180941, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/32ef3b59da5ed2c7c427d89b9a415782?s=128&d=identicon&r=PG&f=1", "display_name": "roughosing", "link": "https://stackoverflow.com/users/4180941/roughosing"}, "edited": false, "score": 0, "creation_date": 1479334351, "post_id": 40643143, "comment_id": 68518643, "body": "That line of code is actually given in the skeleton code, which we were asked to fill out, so my lecturer had already declared it this way, so I&#39;m not sure if I should change it. That being said, this was also one of my problems with looking for answers, because everyone else declares it the way you suggest. But like I said this is the way that code was given to me"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1479334399, "post_id": 40643143, "comment_id": 68518661, "body": "<code>*matrix[bla]</code> should be <code>(*matrix)[bla]</code>. To avoid this error, use pass-by-reference ."}, {"owner": {"reputation": 71, "user_id": 4180941, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/32ef3b59da5ed2c7c427d89b9a415782?s=128&d=identicon&r=PG&f=1", "display_name": "roughosing", "link": "https://stackoverflow.com/users/4180941/roughosing"}, "edited": false, "score": 0, "creation_date": 1479334629, "post_id": 40643143, "comment_id": 68518763, "body": "This fixed it , thank you, if you want to put that as an answer, I will select it"}], "owner": {"reputation": 71, "user_id": 4180941, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/32ef3b59da5ed2c7c427d89b9a415782?s=128&d=identicon&r=PG&f=1", "display_name": "roughosing", "link": "https://stackoverflow.com/users/4180941/roughosing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479333597, "creation_date": 1479333597, "question_id": 40643143, "link": "https://stackoverflow.com/questions/40643143/c-2d-dynamic-array-allocation-causing-visual-studio-to-crash", "title": "C++: 2D Dynamic Array allocation causing Visual Studio to crash", "body": "<p>I'm fairly new to dynamic arrays, especially mullti-dimensional dynamic arrays and I've scowered StackOverflow and C++ tutorial sites trying to find a fix to my problem, but I  can't seem to find any. Anyways I am trying to initialize a 2D dynamic array with values obtained from a text file and I'm experiencing some errors and problems. The numbers are meant to be placed inside the array to form a matrix. But every time I run my code it gives me an \"Application.exe has stopped working error\".</p>\n\n<pre><code>bool loadMatrix(const char *filename, int **matrix, int&amp; rowCount, int&amp; columnCount);\n\n*matrix = new int[ rowCount * columnCount];\n\nfor( size_t currentRow=0; currentRow&lt;rowCount; currentRow++) {\n    for( size_t currentColumn=0; currentColumn&lt;columnCount; currentColumn++){\n\n        //This takes the value from the vector lines&lt;&gt; to be stored in the matrix\n        int value = stoi(lines[currentRow][currentColumn], 0, 10);\n\n        *matrix[currentRow * columnCount + currentColumn] = value;\n    }\n}\n</code></pre>\n\n<p>it is 100% something to do with the last line in the code above, as all the rest of the code had been given in the assignment skeleton. I have edited and changed the code in every way to try and fix the error. One attempt fixed it, but caused another bug with all elements of the array being overwritten by the last element, as seen below:</p>\n\n<pre><code>matrix[currentRow * columnCount + currentColumn] = &amp;value;\n</code></pre>\n\n<p>But as you can see, this causes another problem, as now all the values in the matrix are overwritten by the last. As well, the array needs to be updated such that what values are added are accessible outside this function, and the above code won't allow the updated matrix to accessed outside of this function. Below is the output error of the above line of code:</p>\n\n<p>1, 2, 3<br>\n 4, 5, 6      </p>\n\n<p>results as </p>\n\n<p>6, 6, 6<br>\n6, 6, 6</p>\n\n<p>I'm not too sure why the first attempt causes this error, but I understand the second attempt is due to some pointer to memory error. </p>\n\n<p>Any ideas on how I could fix this?\nThanks in advance</p>\n"}, {"tags": ["c++", "http", "boost", "token", "oauth2"], "comments": [{"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 0, "creation_date": 1479359924, "post_id": 40643022, "comment_id": 68525903, "body": "An easy way to debug such things would be to try it with a library which provides easy APIs to work with OAuth2, for eg: python. If you get that working, its just too easy to figure out what that library is sending in headers using any tracing tool"}], "answers": [{"tags": [], "owner": {"reputation": 3808, "user_id": 2922611, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f26420ac1fcb58b3d0c0f63273eaf3f5?s=128&d=identicon&r=PG&f=1", "display_name": "kenba", "link": "https://stackoverflow.com/users/2922611/kenba"}, "is_accepted": false, "score": 0, "last_activity_date": 1479370536, "creation_date": 1479370536, "answer_id": 40649746, "question_id": 40643022, "link": "https://stackoverflow.com/questions/40643022/http-get-request-with-boost-c-oauth2-access-token/40649746#40649746", "title": "HTTP GET request with boost c++ - oauth2 access token", "body": "<p>You have some <code>HTTP</code> formatting issues.</p>\n\n<p>None of your requests are sending the size of the message body (in your case zero) and since you are sending <code>HTTP 1.0</code> requests, there is no need to send <code>Connection: close</code>, the server should close the connection after it has sent it's response. If you don't want that behaviour then change <code>HTTP/1.0</code> to <code>HTTP/1.1</code>.</p>\n\n<p>Try replacing the last line of attempt 2:</p>\n\n<pre><code>request_stream &lt;&lt; \"Connection: close\\r\\n\\r\\n\";\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>request_stream &lt;&lt; \"Content-Length: 0\\r\\n\\r\\n\";\n</code></pre>\n\n<p>You should receive a <code>200</code> (OK) or a <code>401</code> (Unauthorized) response.</p>\n\n<p>FYI the syntax is defined in the HTTP specification, <a href=\"https://tools.ietf.org/html/rfc7230\" rel=\"nofollow noreferrer\">RFC7230</a>, specifically <a href=\"https://tools.ietf.org/html/rfc7235\" rel=\"nofollow noreferrer\">RFC7235</a> for authentication.  </p>\n"}], "owner": {"reputation": 11, "user_id": 3068165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11989036ef6d63b4370b482b4e10935d?s=128&d=identicon&r=PG&f=1", "display_name": "user3068165", "link": "https://stackoverflow.com/users/3068165/user3068165"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1733, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1480536411, "creation_date": 1479333068, "last_edit_date": 1480536411, "question_id": 40643022, "link": "https://stackoverflow.com/questions/40643022/http-get-request-with-boost-c-oauth2-access-token", "title": "HTTP GET request with boost c++ - oauth2 access token", "body": "<p>I need to connect from a c ++ application to a rest server, my problem is when sending the token access provided by the server.</p>\n\n<p>I have tried in several ways but I can not find the correct syntax.</p>\n\n<p>The rest server uses oauth2 for authentication and the token type is bearer.</p>\n\n<p>In oauth1 I found this syntax:</p>\n\n<pre><code>std::ostream request_stream(&amp;request_);\nrequest_stream &lt;&lt; \"GET \" &lt;&lt; path &lt;&lt; \" HTTP/1.0\\r\\n\";\nrequest_stream &lt;&lt; \"Host: \" &lt;&lt; server &lt;&lt; \"\\r\\n\";\nrequest_stream &lt;&lt; \"Content-Type: application/x-www-form-urlencoded\\r\\n\";\nrequest_stream &lt;&lt; \"Authorization: OAuth oauth_version=\\\"1.0\\\", \"\n&lt;&lt; oauth_signature_method=\\\"PLAINTEXT\\\", \"\n&lt;&lt;\"oauth_consumer_key=\\\"&lt;key&gt;\\\", \"\n&lt;&lt;\"oauth_signature=\\\"&lt;secret&gt;&amp;\\\"\\r\\n\";\nrequest_stream &lt;&lt; \"Accept: */*\\r\\n\";\nrequest_stream &lt;&lt; \"Connection: close\\r\\n\\r\\n\";\n</code></pre>\n\n<p>But for oauth2 I can not find the correct syntax.</p>\n\n<p>Of all the attempts I have made I will highlight 2:</p>\n\n<p>1.</p>\n\n<pre><code>std::ostream request_stream(&amp;request_);\nrequest_stream &lt;&lt; \"GET \" &lt;&lt; path &lt;&lt; \" HTTP/1.0\\r\\n\";\nrequest_stream &lt;&lt; \"Host: \" &lt;&lt; server &lt;&lt; \"\\r\\n\";\nrequest_stream &lt;&lt; \"Authorization: Bearer accesstoken\\r\\n\";\nrequest_stream &lt;&lt; \"Accept: */*\\r\\n\";\nrequest_stream &lt;&lt; \"Connection: close\\r\\n\\r\\n\";\n</code></pre>\n\n<p>Error returned: \"Exception: unspecified file(1): unterminated string\"</p>\n\n<p>2.</p>\n\n<pre><code>std::ostream request_stream(&amp;request_);\nrequest_stream &lt;&lt; \"GET \" &lt;&lt; path &lt;&lt; \" HTTP/1.0\\r\\n\";\nrequest_stream &lt;&lt; \"Host: \" &lt;&lt; server &lt;&lt; \"\\r\\n\";\nrequest_stream &lt;&lt; \"Content-Type: application/x-www-form-urlencoded\\r\\n\";\nrequest_stream &lt;&lt; \"Authorization: OAuth oauth_version=\\\"2.0\\\", \"\n&lt;&lt;\"oauth_token_type=\\\"Bearer\\\", \"\n&lt;&lt;\"oauth_access_token=\\\"accesstoken\\\"\\r\\n\";\nrequest_stream &lt;&lt; \"Accept: */*\\r\\n\";\nrequest_stream &lt;&lt; \"Connection: close\\r\\n\\r\\n\";\n</code></pre>\n\n<p>Error returned: \"Response returned with status code 401\"</p>\n\n<p>Additionally, try without \"\\ r \\ n\" at the end of the line in both cases, but it doesn't work.</p>\n\n<pre><code>request_stream &lt;&lt; \"Authorization: Bearer accesstoken\";\n\nrequest_stream &lt;&lt; \"Authorization: OAuth oauth_version=\\\"2.0\\\", \"\n&lt;&lt;\"oauth_token_type=\\\"Bearer\\\", \"\n&lt;&lt;\"oauth_access_token=\\\"accesstoken\\\"\";\n</code></pre>\n\n<p>I need the correct text string of the request \"Authorization\" to send the access token to the server:</p>\n\n<pre><code>request_stream &lt;&lt; \"Authorization: ??????? \\r\\n\";\n</code></pre>\n\n<p>Does anyone know the correct syntax for sending the access token?</p>\n\n<p>Thanks!!</p>\n\n<p><strong>Edited - Nov 18</strong></p>\n\n<p>Forget to mention that the rest server is made with symfony2 and fosrestbundle. Apparently fosrestbundle requires knowing it well to properly configure the service because otherwise it can give problems.</p>\n\n<p>Now I'm testing rest with symfony3 and firebase-jwt. I guess I will not have problems because I can configure almost everything, without having to go so far in an outside bundle.</p>\n\n<p>I have not tried with symfony3 and fosrestbundle, but it seems that fosrestbundle requires knowing it well to configure it correctly.</p>\n\n<p>When I say that more advanced knowledge about this bundle is required, it is because it works me very well from other applications that I did, for example an android application; But from a c ++ application gives me problems.</p>\n\n<p>I hope this information is useful for someone</p>\n\n<p><strong>Edited Nov 21</strong></p>\n\n<p>I tried with symfony3 and firebase-jwt and it keeps giving me the same errors.</p>\n\n<p>I was wrong with fosrestbundle, in fact both servers (fosrestbundle and symfony3-jwt) do the authentication and correctly send the data that the client requests.</p>\n\n<p>The problem is on the client side:</p>\n\n<pre><code>void Restclient::handle_read_content(const boost::system::error_code&amp; err)\n{\n    if (!err)\n    {\n        std::ostringstream ss;\n        ss &lt;&lt; &amp;response_;\n        std::string s = ss.str();\n        boost::property_tree::ptree pt2;\n        stringstream is (s);\n        boost::property_tree::read_json (is, pt2);\n\n        boost::asio::async_read(socket_, response_, boost::asio::transfer_at_least(1), boost::bind(&amp;Restclient::handle_read_content, this, boost::asio::placeholders::error));\n    }\n    else if (err != boost::asio::error::eof)\n    {\n        std::cout &lt;&lt; \"Error: \" &lt;&lt; err &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>After performing several tests, I verified that exactly in this line is where the error occurs:</p>\n\n<pre><code>boost::property_tree::read_json (is, pt2);\n</code></pre>\n\n<p>The json arrives well: (for example)</p>\n\n<pre><code>{ \"Data1\": \"c ++\", \"data2\": \"java\", \"data3\": \"python\", \"data4\": \"php\", \"data5\": \"c #\"}\n</code></pre>\n\n<p>I'm not going to put the actual json because it's a pretty long string, but it's just to give you an idea.</p>\n\n<p>And at the moment of reading and converting to json, this appears:</p>\n\n<pre><code>{ \"Data1\": \"c ++\", \"data2\": \"java\", \"data3\": \"python\", \"dat\nException: &lt;unspecified file&gt; (1): unterminated string\n</code></pre>\n\n<p>The code I exposed here is based on examples of boost c ++ async_client, but it gives me that problem.</p>\n\n<p>If someone has solved this problem, I would appreciate your help.</p>\n\n<p><strong>Edit - Nov 27 [SOLVED]</strong></p>\n\n<pre><code>std::ostream request_stream(&amp;request_);\nrequest_stream &lt;&lt; \"GET \" &lt;&lt; path &lt;&lt; \" HTTP/1.0\\r\\n\";\nrequest_stream &lt;&lt; \"Host: \" &lt;&lt; server &lt;&lt; \"\\r\\n\";\nrequest_stream &lt;&lt; \"Authorization: Bearer accesstoken\\r\\n\";\nrequest_stream &lt;&lt; \"Accept: */*\\r\\n\";\nrequest_stream &lt;&lt; \"Content-Length: 0\\r\\n\\r\\n\";\n\nvoid Restclient::handle_read_content(const boost::system::error_code&amp; err)\n{\n    if (!err)\n    {\n        boost::system::error_code error;\n        string result = \"\";\n        //Read the answer to the end\n        while (boost::asio::read(socket_, response_, boost::asio::transfer_at_least(1), error))\n        {\n            std::ostringstream ss;\n            ss &lt;&lt; &amp;response_;\n            std::string output = ss.str();\n            result = result + output;\n        }\n\n        //If the answer has already arrived and there is nothing left to read\n        if (error == boost::asio::error::eof)\n        {\n            stringstream is (result);\n            boost::property_tree::ptree pt2;\n            boost::property_tree::read_json (is, pt2);\n        }\n        boost::asio::async_read(socket_, response_, boost::asio::transfer_at_least(1), boost::bind(&amp;Restclient::handle_read_content, this, boost::asio::placeholders::error));\n    }\n    else if (err != boost::asio::error::eof)\n    {\n        std::cout &lt;&lt; \"Error: \" &lt;&lt; err &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>JSON is complete and ptree is generated correctly</p>\n"}, {"tags": ["c++", "string", "rest", "unicode"], "comments": [{"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1479335959, "post_id": 40642997, "comment_id": 68519336, "body": "<code>U</code> is a macro, see here for its meaning: <a href=\"https://microsoft.github.io/cpprestsdk/basic__types_8h_source.html\" rel=\"nofollow noreferrer\">microsoft.github.io/cpprestsdk/basic__types_8h_source.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 219, "user_id": 7158894, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2a471ff2d9533e414d2cc623b065dad?s=128&d=identicon&r=PG&f=1", "display_name": "mocode9", "link": "https://stackoverflow.com/users/7158894/mocode9"}, "edited": false, "score": 0, "creation_date": 1479334139, "post_id": 40643160, "comment_id": 68518549, "body": "1&gt;Main.obj : error LNK2001: unresolved external symbol &quot;<i>_declspec(dllimport) public: static class std::locale::id std::codecvt&lt;char32_t,char,struct _Mbstatet&gt;::id&quot; (__imp</i>?id@?$codecvt@_UDU_Mbstatet@@@std@@2V0locale@2@A)"}, {"owner": {"reputation": 43, "user_id": 7164023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d471637252c25e3cbd8825040ce1e6?s=128&d=identicon&r=PG&f=1", "display_name": "leftjab", "link": "https://stackoverflow.com/users/7164023/leftjab"}, "reply_to_user": {"reputation": 219, "user_id": 7158894, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2a471ff2d9533e414d2cc623b065dad?s=128&d=identicon&r=PG&f=1", "display_name": "mocode9", "link": "https://stackoverflow.com/users/7158894/mocode9"}, "edited": false, "score": 0, "creation_date": 1479335027, "post_id": 40643160, "comment_id": 68518956, "body": "Yes, there should be wchar_t rather than char32_t. Edited."}], "tags": [], "owner": {"reputation": 43, "user_id": 7164023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d471637252c25e3cbd8825040ce1e6?s=128&d=identicon&r=PG&f=1", "display_name": "leftjab", "link": "https://stackoverflow.com/users/7164023/leftjab"}, "is_accepted": false, "score": 0, "last_activity_date": 1479334968, "last_edit_date": 1479334968, "creation_date": 1479333671, "answer_id": 40643160, "question_id": 40642997, "link": "https://stackoverflow.com/questions/40642997/c-convert-wstring-to-unicode/40643160#40643160", "title": "C++ Convert wstring to Unicode", "body": "<p>Your attempt #3 looks the closest one. Try this:</p>\n\n<pre><code>std::wstring name = L\"the_name\";\nstd::string utf8str;\nstd::wstring_convert&lt;std::codecvt_utf8&lt;wchar_t&gt;, wchar_t&gt; utf8_conv;\nfor (auto &amp;ch : name) utf8str.append(utf8_conv.to_bytes(ch));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 0, "last_activity_date": 1479334786, "creation_date": 1479334786, "answer_id": 40643398, "question_id": 40642997, "link": "https://stackoverflow.com/questions/40642997/c-convert-wstring-to-unicode/40643398#40643398", "title": "C++ Convert wstring to Unicode", "body": "<p>If I am not mistaken your rest api docs are under this url:</p>\n\n<p><a href=\"https://microsoft.github.io/cpprestsdk/namespaceutility_1_1conversions.html\" rel=\"nofollow noreferrer\">https://microsoft.github.io/cpprestsdk/namespaceutility_1_1conversions.html</a></p>\n\n<p>as you can see above, this namespace : <code>utility::conversions</code>, proivides various conversion functions which should be of use to you. Example:</p>\n\n<pre><code>std::string name = \"the_name\";\nbuilder.append_query(U(\"worker\"), utility::conversions::to_string_t(name));\n</code></pre>\n\n<p>If you want your name to be composed of wchar_t characters, then above namespace contains also overloads for <code>utf16string</code> arguments. From this site:</p>\n\n<p><a href=\"https://microsoft.github.io/cpprestsdk/basic__types_8h_source.html\" rel=\"nofollow noreferrer\">https://microsoft.github.io/cpprestsdk/basic__types_8h_source.html</a></p>\n\n<p>You can learn that <code>utf16string</code> always tries to be string of two byte characters. Under windows it should be <code>typedef std::wstring utf16string;</code> while on linux-es probably <code>typedef std::u16string utf16string;</code>.</p>\n"}], "owner": {"reputation": 219, "user_id": 7158894, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2a471ff2d9533e414d2cc623b065dad?s=128&d=identicon&r=PG&f=1", "display_name": "mocode9", "link": "https://stackoverflow.com/users/7158894/mocode9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "accepted_answer_id": 40643398, "answer_count": 2, "score": 0, "last_activity_date": 1479334968, "creation_date": 1479332987, "question_id": 40642997, "link": "https://stackoverflow.com/questions/40642997/c-convert-wstring-to-unicode", "title": "C++ Convert wstring to Unicode", "body": "<p>I'm trying to use the rest API and one of the functions has an example like this: </p>\n\n<pre><code>uri_builder builder(U(\"/test.php\"));\nbuilder.append_query(U(\"worker\"), U(\"hello\"));\n</code></pre>\n\n<p>I want to use a variable instead of the string literal.\nFor now I have a std::wstring variable that I want to use but I can't figure out how to use it with the U (unsigned) prefix working on it.</p>\n\n<p>Any suggestions?</p>\n\n<p>I've tried</p>\n\n<pre><code> std::wstring name = L\"the_name\";\n builder.append_query(U(\"worker\"), U(the_name.c_str()));\n</code></pre>\n\n<p>I've also tried</p>\n\n<pre><code>    std::wstring_convert&lt;std::codecvt_utf8_utf16&lt;wchar_t&gt;&gt; convert;\n    std::string uWorkerName = convert.to_bytes(the_name);\n</code></pre>\n\n<p>My latest failed attempt</p>\n\n<pre><code>    std::u32string uWorkerName(workerName.begin(), workerName.end());\n</code></pre>\n\n<p>The last one allowed me to use the API but when the data hit my php page it displayed garbage data such as random numbers and capital letters.</p>\n"}, {"tags": ["c++", "gcc", "tox", "fpic"], "comments": [{"owner": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "edited": false, "score": 2, "creation_date": 1479334032, "post_id": 40642960, "comment_id": 68518512, "body": "Did you clean the previous build after you change the configure? You may check the log to see if you really append <code>-fPIC</code> in the compile flags."}, {"owner": {"reputation": 6589, "user_id": 1556092, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6832ea4548949bb2219481ed8d2b539a?s=128&d=identicon&r=PG", "display_name": "d3pd", "link": "https://stackoverflow.com/users/1556092/d3pd"}, "reply_to_user": {"reputation": 3740, "user_id": 1030870, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8f96f7ac4f0bf4c2421a9f58b6893400?s=128&d=identicon&r=PG", "display_name": "Mine", "link": "https://stackoverflow.com/users/1030870/mine"}, "edited": false, "score": 0, "creation_date": 1479385697, "post_id": 40642960, "comment_id": 68540910, "body": "@Mine Thanks for your comment. Yes, I attempted a few make cleans. In <code>config.log</code> I see references to <code>-fPIC</code> that suggest that it is indeed being used (e.g. <code>checking if gcc PIC flag -fPIC -DPIC works</code>, <code>result: yes</code> etc.)."}], "answers": [{"comments": [{"owner": {"reputation": 6589, "user_id": 1556092, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6832ea4548949bb2219481ed8d2b539a?s=128&d=identicon&r=PG", "display_name": "d3pd", "link": "https://stackoverflow.com/users/1556092/d3pd"}, "edited": false, "score": 0, "creation_date": 1480355546, "post_id": 40838960, "comment_id": 68917559, "body": "Super, installation of <code>libvox-dev</code> and <code>libsodium-dev</code> seems to have worked. Thanks!"}], "tags": [], "owner": {"reputation": 1765, "user_id": 1106540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45196b9a98daeb606ee718a26e881b9b?s=128&d=identicon&r=PG", "display_name": "Ismael Luceno", "link": "https://stackoverflow.com/users/1106540/ismael-luceno"}, "is_accepted": true, "score": 0, "last_activity_date": 1480317402, "creation_date": 1480317402, "answer_id": 40838960, "question_id": 40642960, "link": "https://stackoverflow.com/questions/40642960/linking-error-relocation-r-x86-64-32-can-not-be-used-when-making-a-shared/40838960#40838960", "title": "Linking error: &quot;relocation R_X86_64_32 ... can not be used when making a shared object; recompile with -fPIC&quot;", "body": "<p>There must be a bug in the configuration script, it shouldn't come up with  <code>libvpx.a</code>.</p>\n\n<p>But worry not, since Ubuntu provides packages for both <code>libvpx-dev</code> and <code>libsodium-dev</code>, and using those seems to work just fine, so you should probably just do that unless there's some strong reason not to.</p>\n\n<p>Also, unless you <em>need</em> classic <code>toxcore</code>, it seems <code>c-toxcore</code> is the successor, so you probably should use it instead.</p>\n"}, {"tags": [], "owner": {"reputation": 2799, "user_id": 176800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eff6548c4482380c02fd3a144fc2a206?s=128&d=identicon&r=PG", "display_name": "Nathan Kidd", "link": "https://stackoverflow.com/users/176800/nathan-kidd"}, "is_accepted": false, "score": 0, "last_activity_date": 1517256518, "last_edit_date": 1517256518, "creation_date": 1517249050, "answer_id": 48507380, "question_id": 40642960, "link": "https://stackoverflow.com/questions/40642960/linking-error-relocation-r-x86-64-32-can-not-be-used-when-making-a-shared/48507380#48507380", "title": "Linking error: &quot;relocation R_X86_64_32 ... can not be used when making a shared object; recompile with -fPIC&quot;", "body": "<p>Configuring with <code>--enable-pic</code> will add in the necessary -fPIC options, and works for me.</p>\n"}], "owner": {"reputation": 6589, "user_id": 1556092, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6832ea4548949bb2219481ed8d2b539a?s=128&d=identicon&r=PG", "display_name": "d3pd", "link": "https://stackoverflow.com/users/1556092/d3pd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2114, "favorite_count": 0, "accepted_answer_id": 40838960, "answer_count": 2, "score": 4, "last_activity_date": 1517256518, "creation_date": 1479332837, "last_edit_date": 1480323218, "question_id": 40642960, "link": "https://stackoverflow.com/questions/40642960/linking-error-relocation-r-x86-64-32-can-not-be-used-when-making-a-shared", "title": "Linking error: &quot;relocation R_X86_64_32 ... can not be used when making a shared object; recompile with -fPIC&quot;", "body": "<p>I am attempting to compile Tox (specifically toxcore). When I attempt to compile it, I encounter the following error:</p>\n\n<pre><code>&gt;make\nmake  all-recursive\nmake[1]: Entering directory '/root/Tox/toxcore'\nMaking all in build\nmake[2]: Entering directory '/root/Tox/toxcore/build'\n  CCLD     libtoxav.la\n/usr/bin/ld: /usr/local/lib/libvpx.a(vpx_codec.c.o): relocation R_X86_64_32 against `.rodata.str1.1' can not be used when making a shared object; recompile with -fPIC\n/usr/local/lib/libvpx.a: error adding symbols: Bad value\ncollect2: error: ld returned 1 exit status\nMakefile:1385: recipe for target 'libtoxav.la' failed\nmake[2]: *** [libtoxav.la] Error 1\nmake[2]: Leaving directory '/root/Tox/toxcore/build'\nMakefile:506: recipe for target 'all-recursive' failed\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory '/root/Tox/toxcore'\nMakefile:410: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n\n<p>Following the error message, I have attempted to use <code>fPIC</code> by exporting C++ flags (<code>export CXXFLAGS=\"$CXXFLAGS -fPIC\"</code>), by adding an argument to <code>configure</code> (<code>./configure --enable-shared</code>) and by editing the <code>Makefile</code> (changing <code>CC = gcc</code> to <code>CC = gcc -fPIC</code>), but these attempts have not worked and I still encounter the same error. What might be going wrong?</p>\n\n<p>Here's the approach I have right now (on Ubuntu):</p>\n\n<pre><code>sudo apt-get install pkg-config\nsudo apt-get install build-essential\nsudo apt-get install libtool\nsudo apt-get install autotools-dev\nsudo apt-get install automake\nsudo apt-get install checkinstall\nsudo apt-get install check\nsudo apt-get install git\nsudo apt-get install yasm\n\ncd ~\nmkdir Tox\ncd Tox\n\ngit clone https://github.com/jedisct1/libsodium.git\ncd libsodium\ngit checkout tags/1.0.3\n./autogen.sh\n./configure &amp;&amp; make check\nsudo checkinstall --install --pkgname libsodium --pkgversion 1.0.0 --nodoc\nsudo ldconfig\ncd ..\n\ngit clone https://chromium.googlesource.com/webm/libvpx\ncd libvpx\ngit checkout tags/v1.3.0\n./configure\nmake\nmake install\ncd ..\n\ngit clone https://github.com/irungentoo/toxcore.git\ncd toxcore\nautoreconf -i\n./configure\nmake\nsudo make install\ncd ..\n</code></pre>\n"}, {"tags": ["c++", "class", "oop", "c++11", "private-members"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1479333066, "post_id": 40642883, "comment_id": 68518027, "body": "You want probably move logic in the class instead of getter/setter."}], "answers": [{"tags": [], "owner": {"reputation": 1238, "user_id": 3396666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BESyQ.jpg?s=128&g=1", "display_name": "magic-sudo", "link": "https://stackoverflow.com/users/3396666/magic-sudo"}, "is_accepted": false, "score": 5, "last_activity_date": 1479343127, "last_edit_date": 1479343127, "creation_date": 1479332832, "answer_id": 40642958, "question_id": 40642883, "link": "https://stackoverflow.com/questions/40642883/transform-c-class-private-variables-to-public/40642958#40642958", "title": "Transform c++ class private variables to public", "body": "<p>You can rewrite your class variables to be private and then use <strong>getters and setters</strong> to modify them.</p>\n\n<pre><code>class C {\nprivate:\n    int id;\n\npublic:\n    int get_id() { return this-&gt;id; }\n    void set_id(int newId) { this-&gt;id = newId; }\n};\n</code></pre>\n\n<p>Or you can make private <code>class</code> inside of another <code>class</code></p>\n\n<pre><code>class A { \nprivate:\n    class D {};\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 638, "user_id": 7065028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602970b0b9f268e43b6212d4804d22e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Emmanuel", "link": "https://stackoverflow.com/users/7065028/jean-emmanuel"}, "is_accepted": true, "score": 5, "last_activity_date": 1479333018, "creation_date": 1479333018, "answer_id": 40643007, "question_id": 40642883, "link": "https://stackoverflow.com/questions/40642883/transform-c-class-private-variables-to-public/40643007#40643007", "title": "Transform c++ class private variables to public", "body": "<p>Your teacher probably wants you to use <code>getters</code>.</p>\n\n<p>In:</p>\n\n<pre><code>class Klipas\n{   \npublic:\n    string produktas;          \n    string grupe;             \n    double trukme;              \n    double krastine1;           \n    double krastine2;       \n    double plotas;             \n    double klipoSekKaina;       \n    double klipoKaina;          \n    };\n</code></pre>\n\n<p>You want to have access to all these members, but prevent external changes.</p>\n\n<p>So you can change your code to:</p>\n\n<pre><code>class Klipas\n{   \npublic:\n    string GetProduktas()    {return produktas;}        \n    string Getgrupe()        {return grupe;}             \n    double Gettrukme()       {return trukme;}              \n    double Getkrastine1()    {return krastine1;}           \n    double Getkrastine2()    {return krastine2;}       \n    double Getplotas()          {return plotas;}             \n    double GetklipoSekKaina(){return klipoSekKaina;}       \n    double GetklipoKaina()   {return klipoKaina;}        \nprivate:\n    string produktas;          \n    string grupe;             \n    double trukme;              \n    double krastine1;           \n    double krastine2;       \n    double plotas;             \n    double klipoSekKaina;       \n    double klipoKaina;          \n    };\n</code></pre>\n\n<p>and use those <code>getters</code> instead of the objects themselves in your function:</p>\n\n<pre><code>    fd &gt;&gt; K[i].Getgrupe();\n    fd &gt;&gt; K[i].Gettrukme();\n    fd &gt;&gt; K[i].Getkrastine1();\n    fd &gt;&gt; K[i].Getkrastine2();\n    fd &gt;&gt; K[i].GetklipoKaina();\n</code></pre>\n\n<p>As for <code>setters</code> go, you can either set your values in the constructor, or implement the same way:</p>\n\n<pre><code>public:\n\nvoid SetProduktas(string prdkt)  {produktas = prdkt;}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 7169798, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-nmeTiVRV_ac/AAAAAAAAAAI/AAAAAAAAAKs/-hnZk1hR-W8/photo.jpg?sz=128", "display_name": "Skirmante Valentaite", "link": "https://stackoverflow.com/users/7169798/skirmante-valentaite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 2, "accepted_answer_id": 40643007, "answer_count": 2, "score": 1, "last_activity_date": 1479343127, "creation_date": 1479332498, "last_edit_date": 1479342672, "question_id": 40642883, "link": "https://stackoverflow.com/questions/40642883/transform-c-class-private-variables-to-public", "title": "Transform c++ class private variables to public", "body": "<p>I am a first year student of programming, and I need some help.\nI have code with public class but I need to change public to private. And it doesn't work for me. Maybe somebody can help me with some suggestions? Here's my working code with public objects, but I need to private. How can I do that?</p>\n\n<p>This is my class's files: </p>\n\n<p><strong>Klientas.h:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;   \n#include &lt;cmath&gt;  \n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nclass Klientas\n{\npublic:\n    string vardas; \n    double lesos;  \n};\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;   \n#include &lt;cmath&gt;  \n#include &lt;iomanip&gt;\nusing namespace std;\n</code></pre>\n\n<p><strong>Klipas.h :</strong></p>\n\n<pre><code>class Klipas\n{   \npublic:\n    string produktas;          \n    string grupe;             \n    double trukme;              \n    double krastine1;           \n    double krastine2;       \n    double plotas;             \n    double klipoSekKaina;       \n    double klipoKaina;          \n};\n</code></pre>\n\n<p><strong>My code:</strong>\n<strong>Lab_1.cpp</strong></p>\n\n<pre><code>#include \"Klipas.h\"   \n#include \"Klientas.h\" \n\nusing namespace std;\n//---------------------------------------------\n\nint main() {\n    setlocale(LC_ALL, \"Lithuanian\");\n    Klipas K[100];\n    int na;\n    Klientas kl;\n\n    // I\u0161 failo fv \u012fveda duomenis \u012f objekt\u0173 masyv\u0105 K(kiek).\n    \u012evestiDuomenis(\"Duomenys.txt\", K, na);\n    SpausdintiDuomenis(\"Rezultatai.txt\", K, na);\n}\n\nvoid \u012evestiDuomenis(string fv, Klipas K[], int &amp; kiek) {\n    ifstream fd (\"Duomenys.txt\");\n\n    fd &gt;&gt; kiek;\n    fd.ignore();\n    for (int i = 0; i &lt; kiek; i++) {\n        getline(fd, K[i].produktas, ','); fd &gt;&gt; ws;\n        fd &gt;&gt; K[i].grupe;\n        fd &gt;&gt; K[i].trukme;\n        fd &gt;&gt; K[i].krastine1;\n        fd &gt;&gt; K[i].krastine2;\n        fd &gt;&gt; K[i].klipoSekKaina;\n        fd.ignore();\n    }\n    fd.close();\n//  cout &lt;&lt; \"Programa baig\u0117 darb\u0105\\n\";\n}\n\n// Objekt\u0173 masyvo K(kiek) reik\u0161mes spausdina lentele \u012f fail\u0105 fv\nvoid SpausdintiDuomenis(string fv, Klipas K[], int kiek) {\n    ofstream fr(\"Rezultatai.txt\", ios::app);\n    fr.setf(ios::fixed); fr.setf(ios::left);\n    cout &lt;&lt; \"Klip\u0173 skai\u010dius: \" &lt;&lt; kiek &lt;&lt; endl;\n    cout &lt;&lt; \"Klip\u0173 s\u0105ra\u0161as:\\n\";\n    cout &lt;&lt; \"----------------------------------------------------\\n\";\n    cout &lt;&lt; \"| Produktas |   Grup\u0117   |  Klipo trukm\u0117(s)   | 1 Kra\u0161tin\u0117(cm)  | 2 Kra\u0161tin\u0117(cm) |   Klipo sekund\u0117s kaina(Eur/s)  | \\n\";\n    cout &lt;&lt; \"----------------------------------------------------\\n\";\n    for (int i = 0; i &lt; kiek; i++) {\n        cout &lt;&lt; \"| \" &lt;&lt; setw(10) &lt;&lt; K[i].produktas &lt;&lt; \"| \" &lt;&lt; K[i].grupe \n       &lt;&lt; setprecision(0) &lt;&lt; setw(10) &lt;&lt; \"| \" &lt;&lt; K[i].trukme &lt;&lt; \"| \" &lt;&lt; setw(15) &lt;&lt; K[i].krastine1 &lt;&lt; \"| \" &lt;&lt; setw(10) &lt;&lt; K[i].krastine2 &lt;&lt; \"| \" &lt;&lt; setw(10) &lt;&lt; K[i].klipoSekKaina &lt;&lt; endl;\n    }\n\n\n    {\n        cout &lt;&lt; \"-------------------------------\\n\";\n        cout &lt;&lt; \"Klipo Kava plotas:\" &lt;&lt; K[0].krastine1*K[0].krastine2 &lt;&lt; \"  \" &lt;&lt; \"cm2\" &lt;&lt; endl;  \n        cout &lt;&lt; \"Klipo Obuolys plotas:\" &lt;&lt; K[1].krastine1*K[1].krastine2 &lt;&lt; \"  \" &lt;&lt; \"cm2\" &lt;&lt; endl;\n        cout &lt;&lt; \"Klipo Sultys plotas:\" &lt;&lt; K[2].krastine1*K[2].krastine2 &lt;&lt; \"  \" &lt;&lt; \"cm2\" &lt;&lt; endl;\n        cout &lt;&lt; \"-------------------------------\\n\";\n    }\n\n    string ilg_trukme;  // randame kuris klipas yra ilgiausias\n    if (K[0].trukme &gt; K[1].trukme) {\n        ilg_trukme = K[0].produktas;\n    } else if (K[1].trukme &gt; K[2].trukme) {\n        ilg_trukme = K[1].produktas;\n    } else {\n        ilg_trukme = K[2].produktas;\n    }\n    cout &lt;&lt; \"Ilgiausias klipas: \" &lt;&lt; ilg_trukme &lt;&lt; endl;\n    cout &lt;&lt; \"-------------------------------\\n\";\n\n    {\n        K[0].klipoKaina = K[0].trukme * K[0].klipoSekKaina;\n        K[1].klipoKaina = K[1].trukme * K[1].klipoSekKaina;\n        K[2].klipoKaina = K[2].trukme * K[2].klipoSekKaina;\n        cout &lt;&lt; \"Klipo Kava Kaina:\" &lt;&lt; K[0].klipoKaina &lt;&lt; \"  \" &lt;&lt; \"Eur.\" &lt;&lt; endl;  \n        cout &lt;&lt; \"Klipo Obuolys Kaina:\" &lt;&lt; K[1].klipoKaina &lt;&lt; \"  \" &lt;&lt; \"Eur.\" &lt;&lt; endl;\n        cout &lt;&lt; \"Klipo Sultys Kaina:\" &lt;&lt; K[2].klipoKaina &lt;&lt; \"  \" &lt;&lt; \"Eur.\" &lt;&lt; endl;\n        cout &lt;&lt; \"-------------------------------\\n\";\n    }\n    {\n        string brangiausias_klipas; //randame kuris klipas brangiausias\n        double br_kl;\n        Klientas kl;\n        if (K[0].klipoKaina &gt; K[1].klipoKaina &amp;&amp; K[0].klipoKaina &gt; K[2].klipoKaina ) {\n            brangiausias_klipas = K[0].produktas;\n            br_kl = K[0].klipoKaina; \n        } else if (K[1].klipoKaina &gt; K[2].klipoKaina) {\n            brangiausias_klipas = K[1].produktas;\n            br_kl = K[1].klipoKaina;\n        } else {\n            brangiausias_klipas = K[2].produktas;\n            br_kl = K[2].klipoKaina;\n        }\n        cout &lt;&lt; \"Brangiausias klipas yra: \" &lt;&lt; brangiausias_klipas &lt;&lt; endl;\n        cout &lt;&lt; \"-------------------------------\\n\";\n\n        cout &lt;&lt; \"Kiek j\u016bs turite pinig\u0173? \" &lt;&lt; endl; //kliento turimos pajamos\n        cin &gt;&gt; kl.lesos ;\n        cout &lt;&lt; \"-------------------------------\\n\";\n        //Randame kuriuos klipus klientas gla\u0117t\u0173 \u012fsigyti su savo pajamom\n        {\n            if(kl.lesos &lt; K[0].klipoKaina &amp;&amp; kl.lesos &lt; K[1].klipoKaina &amp;&amp; kl.lesos &lt; K[2].klipoKaina) { \n                cout &lt;&lt; \"J\u016bs negalite nusipikrti nei vieno klipo \" &lt;&lt; endl;\n            } else {\n                if(kl.lesos &gt;= K[0].klipoKaina) {\n                cout &lt;&lt; \"J\u016bs galite nusipirkti klip\u0105 \" &lt;&lt; K[0].produktas &lt;&lt; endl;\n                }\n                if (kl.lesos &gt;= K[1].klipoKaina) {\n                cout &lt;&lt; \"J\u016bs galite nusipirkti klip\u0105 \" &lt;&lt; K[1].produktas &lt;&lt; endl;\n                }\n                if (kl.lesos &gt;= K[2].klipoKaina) {\n                    cout &lt;&lt; \"J\u016bs galite nusipirkti klip\u0105 \" &lt;&lt; K[2].produktas &lt;&lt; endl;\n                }\n            }   \n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt-creator", "qwidget"], "answers": [{"tags": [], "owner": {"reputation": 3255, "user_id": 30333, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/87cb8c075bd061589c510afd4be89f73?s=128&d=identicon&r=PG", "display_name": "sep", "link": "https://stackoverflow.com/users/30333/sep"}, "is_accepted": false, "score": 2, "last_activity_date": 1505104360, "creation_date": 1505104360, "answer_id": 46148223, "question_id": 40642742, "link": "https://stackoverflow.com/questions/40642742/adding-a-q3dscatter-to-an-existing-qdialog-form/46148223#46148223", "title": "adding a Q3DScatter to an existing QDialog form", "body": "<p>Add the container as a child of the dialog. Put in a layout if you need to resize when the dialog is resized. Example:</p>\n\n<pre><code>MyDialog::MyDialog(Q3DScatter *scatter, QWidget *parent) : QDialog(parent)\n{\n    QHBoxLayout * const l = new QHBoxLayout(this);\n    l-&gt;setMargin(0);\n    l-&gt;addWidget(QWidget::createWindowContainer(scatter, this);\n}\n</code></pre>\n"}], "owner": {"reputation": 458, "user_id": 4533954, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/HJnaF.png?s=128&g=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4533954/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1505104360, "creation_date": 1479331988, "last_edit_date": 1479332296, "question_id": 40642742, "link": "https://stackoverflow.com/questions/40642742/adding-a-q3dscatter-to-an-existing-qdialog-form", "title": "adding a Q3DScatter to an existing QDialog form", "body": "<p>I would like to insert a <code>Q3DScatter</code> instance onto one of my forms. I am able to construct the graph and display it with:</p>\n\n<pre><code>Q3DScatter *graph = new Q3DScatter();\nQWidget *container = QWidget::createWindowContainer(graph);\n\n...do some graph stuff...\n\ncontainer.show()\n</code></pre>\n\n<p>This successfully creates the graph and shows it in its own window/container. I would now like to place it inside another form that has been designed in <code>qt-creator</code>. I have placed an empty <code>widget</code> on the form(QDialog) as a placeholder, but am unable to move the <code>Q3DScatter</code> into the widget. </p>\n\n<p>I see <code>Q3DScatter::Q3DScatter(const QSurfaceFormat *format = Q_NULLPTR, QWindow *parent = Q_NULLPTR)</code> in the documentation but I dont have a QWindow parent to attach it to, as the form I would like to add it to is a QDialog...</p>\n\n<p>I am very new to <code>widgets</code> in general, so please correct me if this is the wrong approach.</p>\n"}, {"tags": ["c++", "http", "cookies", "libcurl"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1479331986, "post_id": 40642674, "comment_id": 68517502, "body": "I don&#39;t see any way that the cookie list is tied to a specific handle."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1479334678, "post_id": 40642674, "comment_id": 68518793, "body": "Post your code so we can see what you&#39;re doing wrong. If you&#39;re using multiple threads, maybe the problem is that you don&#39;t have a mutex around uses of <code>my_cookies</code>."}], "answers": [{"tags": [], "owner": {"reputation": 43751, "user_id": 93747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbf187b5b45c400649ed7f946e8f00d6?s=128&d=identicon&r=PG", "display_name": "Daniel Stenberg", "link": "https://stackoverflow.com/users/93747/daniel-stenberg"}, "is_accepted": true, "score": 1, "last_activity_date": 1479339078, "creation_date": 1479339078, "answer_id": 40644204, "question_id": 40642674, "link": "https://stackoverflow.com/questions/40642674/can-curlopt-cookielist-be-set-on-a-different-curl-easy-handle/40644204#40644204", "title": "Can CURLOPT_COOKIELIST be set on a different curl easy handle?", "body": "<p>There's nothing in an extracted cookie list that binds it to that particular easy handle so yes, it can be moved over and inserted into another handle.</p>\n"}], "owner": {"reputation": 373, "user_id": 1124236, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/93b9427245d12bdb447c85061b65e0a2?s=128&d=identicon&r=PG", "display_name": "user1124236", "link": "https://stackoverflow.com/users/1124236/user1124236"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 585, "favorite_count": 0, "accepted_answer_id": 40644204, "answer_count": 1, "score": 0, "last_activity_date": 1479342336, "creation_date": 1479331720, "last_edit_date": 1479342336, "question_id": 40642674, "link": "https://stackoverflow.com/questions/40642674/can-curlopt-cookielist-be-set-on-a-different-curl-easy-handle", "title": "Can CURLOPT_COOKIELIST be set on a different curl easy handle?", "body": "<p>I'm trying to perform a file upload operation(which is done using multiple HTTP POST requests).  Hence I need to save the cookies from the response of first HTTP POST and set those cookies in the request of the second HTTP POST. I save cookies using CURLINFO_COOKIELIST and set them manually using CURLOPT_COOKIELIST. </p>\n\n<p>CURLcode result = curl_easy_setopt(curlHandle, CURLOPT_COOKIELIST, my_cookies)\nThis works only if I set the cookies on the same curlHandle. If I close the handles and create new ones after each request, it fails.</p>\n\n<p>Is it not possible to use CURLOPT_COOKIELIST option on different curl handles to execute multiple HTTP requests in the same session ?\nAny help is much appreciated.</p>\n\n<p>Update: \nI'm trying to save and set the cookies like this. Is there anything wrong I might be doing ?</p>\n\n<pre><code>std::string my_cookies;\n// Setting other options using curl_easy_setopt\n\n// To start the cookie engine              \ncurl_easy_setopt(curlHandle,CURLOPT_COOKIEFILE,\"\");\nif (!my_cookies.empty())\n{\n curl_easy_setopt(curlHandle, CURLOPT_COOKIELIST, my_cookies);\n}\ncurl_easy_perform(curlHandle);\n\n// Save cookies from response of first HTTP POST\nstruct curl_slist* cookies;\ncurl_easy_getinfo(curlHandle,CURLINFO_COOKIELIST,&amp;cookies);\n// Code to copy cookies to my_cookies.\n</code></pre>\n"}, {"tags": ["c++", "design-patterns", "proxy-pattern"], "comments": [{"owner": {"reputation": 4713, "user_id": 6799654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa65b345b86c22a77eb3f457c99f35?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Guseynov", "link": "https://stackoverflow.com/users/6799654/alexey-guseynov"}, "edited": false, "score": 0, "creation_date": 1479331018, "post_id": 40642387, "comment_id": 68516990, "body": "Your approach is fine, but this is not a proxy pattern, there is no proxy."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1479331511, "post_id": 40642387, "comment_id": 68517250, "body": "maybe a better term would be dependency injection, see here: <a href=\"http://stackoverflow.com/questions/5585436/using-interface-in-c-for-dependency-injection\" title=\"using interface in c for dependency injection\">stackoverflow.com/questions/5585436/&hellip;</a>"}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "reply_to_user": {"reputation": 4713, "user_id": 6799654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbfa65b345b86c22a77eb3f457c99f35?s=128&d=identicon&r=PG&f=1", "display_name": "Alexey Guseynov", "link": "https://stackoverflow.com/users/6799654/alexey-guseynov"}, "edited": false, "score": 0, "creation_date": 1479335563, "post_id": 40642387, "comment_id": 68519177, "body": "@AlexeyGuseynov yes I figured it&#39;s not exactly proxy but has somewhat similar class design."}], "answers": [{"tags": [], "owner": {"reputation": 13906, "user_id": 1187220, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/AwroB.jpg?s=128&g=1", "display_name": "Michel Keijzers", "link": "https://stackoverflow.com/users/1187220/michel-keijzers"}, "is_accepted": false, "score": 0, "last_activity_date": 1479330935, "creation_date": 1479330935, "answer_id": 40642462, "question_id": 40642387, "link": "https://stackoverflow.com/questions/40642387/is-proxy-a-good-fit-to-create-demo-mode/40642462#40642462", "title": "Is proxy a good fit to create demo mode?", "body": "<p>Yes this looks like a good approach.</p>\n\n<p>What you can also consider beyond your design, is a abstract factory class creating the robot, which creates the correct objects (either demo or real classes). So the first 5 lines of the main function will end up in the factory class.</p>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1479399997, "creation_date": 1479330660, "last_edit_date": 1479399997, "question_id": 40642387, "link": "https://stackoverflow.com/questions/40642387/is-proxy-a-good-fit-to-create-demo-mode", "title": "Is proxy a good fit to create demo mode?", "body": "<p>A lot of times we need a demo mode in certain projects which usually involves hardware with the purpose that the software can run/simulate without the hardware actually connected. The functions in demo mode simulate the hardware somewhat but don't obviously operate on it.</p>\n\n<p>My question is, is the proxy design pattern (or any other for that matter) a good fit to create demo modes in software?</p>\n\n<p>Consider the example below which is simplified to be short.</p>\n\n<pre><code>class Arm\n{\npublic:\n    int _x = 0;\n    int _y = 0;\n\n    virtual void move(int x, int y) = 0;\n};\n\nclass RobotArm : public Arm\n{\n    virtual void move(int x, int y)\n    {\n        /* assum we have actual hardware coommands here which updates variables */\n        //_x = x;\n        //_y = y;\n\n        std::cout &lt;&lt; \"hardware is not connected, can't move\" &lt;&lt; std::endl;\n    }\n};\n\nclass RobotArmDemo : public Arm\n{\n    virtual void move(int x, int y)\n    {\n        /* no hardware commands here, just update variables */\n        _x = x;\n        _y = y;\n\n        std::cout &lt;&lt; \"Demo Arm moved to \" &lt;&lt; _x &lt;&lt; \",\" &lt;&lt; _y &lt;&lt; std::endl;\n    }\n};\n\nclass Robot\n{\npublic:\n    Arm *leftArm;\n    Arm *rightArm;\n};\n\nint main()\n{\n    Arm * leftArm = new RobotArmDemo; // creating an arm in demo mode!\n    Arm * rightArm = new RobotArm; // this arm is the real one\n\n    Robot * robot = new Robot;\n\n    robot-&gt;leftArm = leftArm;\n    robot-&gt;rightArm = rightArm;\n\n    // perform action\n    robot-&gt;leftArm-&gt;move(3, 3); // this is on demo mode\n    robot-&gt;rightArm-&gt;move(1, 2); // this is real mode\n\n    return 0;\n}\n</code></pre>\n\n<p>In the code above, I created one demo arm and one real arm for the robot just to show how each will work. Obviously in real demo mode, all derived objects will have the demo implementation. Is this a good way to implement demo modes in software? </p>\n\n<p>Can this be applied to real large/medium size application? I tend to like this approach because exactly same functions are called in both real and demo applications which makes life easier and understand the flow. Alternatively a seperate 'demo' path can become almost a seperate application/module which grows apart and loses close resemeblence with real application.</p>\n"}, {"tags": ["c++", "iterator"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1479334364, "post_id": 40642386, "comment_id": 68518646, "body": "What if <code>AddressToLineMap</code> is empty? Also, the for loop can be replaced with <a href=\"http://en.cppreference.com/w/cpp/algorithm/find\" rel=\"nofollow noreferrer\"><code>std::find_if</code></a>. Are there invariants about <code>AddressToLineMap</code> that get enforced? For example, is the last element always the highest address? Does that mean the vector is sorted? If so, then there are other algorithms that can take advantage."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1479343660, "post_id": 40644696, "comment_id": 68521754, "body": "Major bug in your solution. It does not have a return for the nothing found case. <code>return AddressToLineMap.back()-&gt;Lineno;</code> will solve that and give identical behaviour to OP&#39;s current code. Which is a bit goofy, when you think about it. All the other found cases return the value AFTER. Not found returns the value BEFORE."}, {"owner": {"reputation": 435, "user_id": 669692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3b73fdc9d7f9c059ffd9d8378b77b1?s=128&d=identicon&r=PG", "display_name": "Andrzej Martyna", "link": "https://stackoverflow.com/users/669692/andrzej-martyna"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1479412450, "post_id": 40644696, "comment_id": 68558789, "body": "@user4581301, my second example is for situation when the vector always has a sentinel with UINT_MAX on it&#39;s end. So there is no need for return after &quot;for&quot;. IMHO OP has a few options to choose more elegant method (what was the OP question)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1479414017, "post_id": 40644696, "comment_id": 68559671, "body": "Regardless, a function must return on all codepaths, even those that should be logically impossible. If there is an error that allows the loop to exit without returning, you have no idea what will happen because of the missing <code>return</code>. In this case <code>throw</code>ing an exception is in order because some seriously exceptional and bad juju just took place. Leave yourself some debugging breadcrumbs. You will also find that <code>find_if</code> will not improve performance. It cannot assume a sorted <code>vector</code> and will have to visit all elements in order until the exit condition is found."}, {"owner": {"reputation": 435, "user_id": 669692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3b73fdc9d7f9c059ffd9d8378b77b1?s=128&d=identicon&r=PG", "display_name": "Andrzej Martyna", "link": "https://stackoverflow.com/users/669692/andrzej-martyna"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1479419649, "post_id": 40644696, "comment_id": 68562633, "body": "thanks @user4581301! Your comments are great. Now I see that maybe I should not go this way. Shorter answer with single binary search example might be a better answer."}], "tags": [], "owner": {"reputation": 435, "user_id": 669692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3b73fdc9d7f9c059ffd9d8378b77b1?s=128&d=identicon&r=PG", "display_name": "Andrzej Martyna", "link": "https://stackoverflow.com/users/669692/andrzej-martyna"}, "is_accepted": true, "score": 1, "last_activity_date": 1479642139, "last_edit_date": 1495541233, "creation_date": 1479341895, "answer_id": 40644696, "question_id": 40642386, "link": "https://stackoverflow.com/questions/40642386/how-to-prevent-an-iterator-to-go-out-of-range/40644696#40644696", "title": "How to prevent an iterator to go out of range?", "body": "<p>Indeed, as AndyG commented, your code suggests that the vector is sorted.\nBecause of this you should really use a binary search algorithm:\n<a href=\"https://en.wikipedia.org/wiki/Binary_search_algorithm\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Binary_search_algorithm</a>, \n<a href=\"https://stackoverflow.com/questions/446296/where-can-i-get-a-useful-c-binary-search-algorithm\">Where can I get a &quot;useful&quot; C++ binary search algorithm?</a></p>\n\n<p>That is the reason why the current code is slow and definitely should not be used.</p>\n\n<p>But trying to answer the exact question the minimal changes to your code could be like this (note checking for emptiness and immediate returns from ifs):</p>\n\n<pre><code>int findLinenoToAddress(unsigned int A)\n{\n  if (AddressToLineMap.empty())\n      return 0;\n  if(A&gt;AddressToLineMap[AddressToLineMap.size()-1]-&gt;Address)\n      return AddressToLineMap[AddressToLineMap.size()-1]-&gt;Lineno;\n\n  std::vector&lt;AddressToLineRecord*&gt;::const_iterator it;\n  for(it = AddressToLineMap.begin(); it != AddressToLineMap.end(); it+=1)\n    {\n      if((*it)-&gt;Address &gt;= A) break;\n    }\n  return (*it)-&gt;Lineno;\n}\n</code></pre>\n\n<p>The other method is to use a \u201esentinel\u201d:\n<a href=\"https://en.wikipedia.org/wiki/Sentinel_node\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Sentinel_node</a></p>\n\n<p>This method needs that you warrant that your vector ALWAYS has additional item at its end with UINT_MAX as Address (also it means that it is never empty).\nThen the code could look like this:</p>\n\n<pre><code>int findLinenoToAddress(unsigned int A)\n{\n  std::vector&lt;AddressToLineRecord*&gt;::const_iterator it;\n  for(it = AddressToLineMap.cbegin(); it != AddressToLineMap.cend(); it++)\n    {\n      if((*it)-&gt;Address &gt;= A)\n         return (*it)-&gt;Lineno;\n    }\n  throw \"an unreachable code\";\n}\n</code></pre>\n\n<p>This code should be greatly improved by using find_if:\n<a href=\"https://stackoverflow.com/questions/6679096/using-find-if-on-a-vector-of-object\">Using find_if on a vector of object</a>, but it will be as slow as other examples here.\nSo again - choose binary search instead.</p>\n"}], "owner": {"reputation": 1924, "user_id": 3998319, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RFyfw.jpg?s=128&g=1", "display_name": "katang", "link": "https://stackoverflow.com/users/3998319/katang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 1, "accepted_answer_id": 40644696, "answer_count": 1, "score": 1, "last_activity_date": 1479642139, "creation_date": 1479330657, "last_edit_date": 1479355612, "question_id": 40642386, "link": "https://stackoverflow.com/questions/40642386/how-to-prevent-an-iterator-to-go-out-of-range", "title": "How to prevent an iterator to go out of range?", "body": "<p>I am using a vector to map source line numbers to code addresses. It looks like if the address argument is higher than the highest in the table, the iterator points to the next, non-existing element. For error protection, I want to disallow out-of-range input arguments. Is there a more elegant method, than I use below?</p>\n\n<pre><code>findLinenoToAddress(unsigned int A)\n{\n    if (A &gt; AddressToLineMap[AddressToLineMap.size()-1]-&gt;Address)\n        A = AddressToLineMap[AddressToLineMap.size()-1]-&gt;Address;\n\n    std::vector&lt;AddressToLineRecord*&gt;::const_iterator it;\n    for(it = AddressToLineMap.begin(); it != AddressToLineMap.end(); it+=1)\n    {\n        if ((*it)-&gt;Address &gt;= A)\n            break;\n    }\n    return (*it)-&gt;Lineno;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "random"], "comments": [{"owner": {"reputation": 638, "user_id": 7065028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602970b0b9f268e43b6212d4804d22e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Emmanuel", "link": "https://stackoverflow.com/users/7065028/jean-emmanuel"}, "edited": false, "score": 0, "creation_date": 1479330808, "post_id": 40642279, "comment_id": 68516910, "body": "What was your previous method ? What is <i>that way</i> ? Did your professor say anything else about it than just <i>bad</i> ?"}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 1, "creation_date": 1479330830, "post_id": 40642279, "comment_id": 68516913, "body": "Just a comment: if you want serious randomness, don&#39;t use <code>rand()</code>, see why <a href=\"http://stackoverflow.com/questions/26440252/is-rand-really-that-bad\">here</a>, instead take a look at <a href=\"http://en.cppreference.com/w/cpp/header/random\" rel=\"nofollow noreferrer\"><code>&lt;random&gt;</code></a>"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1479330860, "post_id": 40642279, "comment_id": 68516926, "body": "Does your true population data have values for unemployment by city?"}, {"owner": {"reputation": 39, "user_id": 5670293, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gZPmA.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/5670293/david"}, "reply_to_user": {"reputation": 638, "user_id": 7065028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602970b0b9f268e43b6212d4804d22e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Emmanuel", "link": "https://stackoverflow.com/users/7065028/jean-emmanuel"}, "edited": false, "score": 0, "creation_date": 1479331600, "post_id": 40642279, "comment_id": 68517294, "body": "@Jean-Emmanuel I&#39;ve just added whole loop to main post above and this is &quot;that way&quot;. Also yes - this is everything that he said at this moment."}, {"owner": {"reputation": 39, "user_id": 5670293, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gZPmA.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/5670293/david"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1479331618, "post_id": 40642279, "comment_id": 68517311, "body": "@pjs no but it will be easier to generate when I would had a real population data. I mean I think so."}], "answers": [{"tags": [], "owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "is_accepted": false, "score": 2, "last_activity_date": 1479331331, "creation_date": 1479331331, "answer_id": 40642584, "question_id": 40642279, "link": "https://stackoverflow.com/questions/40642279/the-way-of-generating-data-about-population/40642584#40642584", "title": "The way of generating data about population", "body": "<p>Take a look at the extremes. The smallest population is 1000 and the largest unemployment result is 2000. Obviously, that's a problem since you can't have 2000 unemployed people in a population of 1000.</p>\n\n<p>At the other extreme, you could have 100 unemployed in a city of 30000, which is an unemployment rate of 0.3%. That's much lower than you'll find in real life.</p>\n\n<p>So the unemployment result should be proportional to the city population. In real life, unemployment is usually expressed as a percentage of the population, with slight variations from city to city. For example, the average unemployment rate might be 10%, city A might have 9% unemployment and city B might have 12%.</p>\n\n<p>So choose your city population, then choose an unemployment percentage, and multiply the two results to get the number of unemployed.</p>\n"}, {"tags": [], "owner": {"reputation": 638, "user_id": 7065028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602970b0b9f268e43b6212d4804d22e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Emmanuel", "link": "https://stackoverflow.com/users/7065028/jean-emmanuel"}, "is_accepted": true, "score": 1, "last_activity_date": 1479332278, "creation_date": 1479332278, "answer_id": 40642820, "question_id": 40642279, "link": "https://stackoverflow.com/questions/40642279/the-way-of-generating-data-about-population/40642820#40642820", "title": "The way of generating data about population", "body": "<p>As user3386109 said, you might want to have a realistic dataset. </p>\n\n<p>First, you want to create your unemployment based on the result of the population, so </p>\n\n<pre><code>int random_population_result = (rand() % 30000) + 1000;\nint random_unemployed_result = (rand() % (random_population_result-100)) + 100;\n</code></pre>\n\n<p>However, if you want to take into account that the unemployment can only range between 1% and 20%, you would add the following:</p>\n\n<pre><code>int minPercent = 1;\nint maxPercent = 20;\nint random_population_result = (rand() % 30000) + 1000;\nint random_unemployed_result = (rand() % ((maxPercent-minPercent)*random_population_result/100)) + minPercent*random_population_result/100;\n</code></pre>\n\n<p>So the updated result would be:</p>\n\n<pre><code>int col_X[colSize]; //stores X values [population]\nint col_Y[colSize]; //stores Y values [unemployed people]\n\n//display table header\n//cout &lt;&lt; \"id \" &lt;&lt; \"\\t\" &lt;&lt; \"X\" &lt;&lt; \"\\t\" &lt;&lt; \"Y\" &lt;&lt; endl;\nfor (int i = 0; i &lt; colSize; i++){\n    //return value between 1000 and 30 000 of population  \n    //(ile_liczb_w_przedziale ) + startowa_liczba;\n    int minPercent = 1;\n    int maxPercent = 20;\n    int random_population_result = (rand() % 30000) + 1000;\n    int random_unemployed_result = (rand() % ((maxPercent-minPercent)*random_population_result/100)) + minPercent*random_population_result/100;\n    //put values to arrays\n    col_X[i] = random_population_result;\n    col_Y[i] = random_unemployed_result;\n}\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5670293, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/gZPmA.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/5670293/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 40642820, "answer_count": 2, "score": 1, "last_activity_date": 1479332278, "creation_date": 1479330256, "last_edit_date": 1479331943, "question_id": 40642279, "link": "https://stackoverflow.com/questions/40642279/the-way-of-generating-data-about-population", "title": "The way of generating data about population", "body": "<p>I have to generate 100 rows of population of the cities and then also generate same number of rows of unemployed for each city. Data should be close to the real thing. My question is how to do that properly?.I have an idea and I want to share with you to get your opinion. For example:</p>\n\n<p>I will take 200 rows of true population data in specific cities from Central Statistical Office and then randomly choose only 100 from these 200 rows. After that I will generate also randomly data about unemployed but based on earlier population data taking into account that the number of unemployed may not exceed the number of population.</p>\n\n<p>At this moment I have randomly generated data of the range from 1000 to 30 000 (for population) like this:</p>\n\n<pre><code>int random_population_result = (rand() % 29000) + 1000;\n</code></pre>\n\n<p>and unemployed range from 100 to 2000</p>\n\n<pre><code>int random_unemployed_result = (rand() % 1900) + 100;\n</code></pre>\n\n<p>but my professor said to me that isn't good idea to generate this kind of data in that way so he made me think about it. I introduced you my new idea above and I'm curious of your opinions. </p>\n\n<p>Whole loop:</p>\n\n<pre><code>//number of rows in column\nconst int colSize = 100;\nint col_X[colSize]; //stores X values [population]\nint col_Y[colSize]; //stores Y values [unemployed people]\n//display table header\ncout &lt;&lt; \"id \" &lt;&lt; \"\\t\" &lt;&lt; \"X\" &lt;&lt; \"\\t\" &lt;&lt; \"Y\" &lt;&lt; endl;\nfor (int i = 0; i &lt; colSize; i++){\n    //return value between 1000 and 30 000 of population  \n    int random_population_result = (rand() % 30000) + 1000;\n    //return value between 100 and 2000 of unemployed people\n    int random_unemployed_result = (rand() % 1900) + 100;\n    //put values to arrays\n    col_X[i] = random_population_result;\n    col_Y[i] = random_unemployed_result;\n}\n</code></pre>\n\n<p>Regards.</p>\n"}, {"tags": ["c++", "vector", "stl"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1479329586, "post_id": 40642079, "comment_id": 68516255, "body": "related: <a href=\"http://stackoverflow.com/questions/356950/c-functors-and-their-uses\" title=\"c functors and their uses\">stackoverflow.com/questions/356950/c-functors-and-their-uses</a>"}], "answers": [{"tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 3, "last_activity_date": 1479330618, "creation_date": 1479330618, "answer_id": 40642375, "question_id": 40642079, "link": "https://stackoverflow.com/questions/40642079/exponentiate-a-vector-using-stdtransform/40642375#40642375", "title": "Exponentiate a vector using std::transform", "body": "<p>Using <code>std::transform</code> it would look as follows:</p>\n\n<pre><code>struct op { double operator() (double d) const { return std::exp(d); } };\nstd::vector&lt;double&gt; exp_c(const std::vector&lt;double&gt;&amp; x) {\n  const int n = x.size();\n  std::vector&lt;double&gt; y(n);  \n  std::transform(x.begin(), x.end(), y.begin(), op());\n  return y;\n}\n</code></pre>\n\n<p>actually this is nearly exactly what c++11 compiler would create, when you would use lambda.</p>\n"}, {"tags": [], "owner": {"reputation": 4287, "user_id": 1492351, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/27b06d1b6cdf815e86752a61b67435e0?s=128&d=identicon&r=PG&f=1", "display_name": "Oleg Andriyanov", "link": "https://stackoverflow.com/users/1492351/oleg-andriyanov"}, "is_accepted": false, "score": 1, "last_activity_date": 1479330698, "creation_date": 1479330698, "answer_id": 40642397, "question_id": 40642079, "link": "https://stackoverflow.com/questions/40642079/exponentiate-a-vector-using-stdtransform/40642397#40642397", "title": "Exponentiate a vector using std::transform", "body": "<p>A bit ugly solution:</p>\n\n<pre><code>std::vector&lt;double&gt; exp_c(const std::vector&lt;double&gt;&amp; x)\n{\n    std::vector&lt;double&gt; y;\n    y.reserve(x.size());\n    std::transform(x.begin(), x.end(), std::back_inserter(y),\n                   static_cast&lt;double(*)(double)&gt;(std::exp));\n    return y;\n}\n</code></pre>\n\n<p><code>static_cast</code> is necessary to tell the compiler which overload of <code>std::exp</code> to pass to <code>std::transform</code>.</p>\n"}], "owner": {"reputation": 1472, "user_id": 3294195, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f39ad8f5e4e0e854fa964546512c57c6?s=128&d=identicon&r=PG&f=1", "display_name": "user3294195", "link": "https://stackoverflow.com/users/3294195/user3294195"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 631, "favorite_count": 0, "accepted_answer_id": 40642375, "answer_count": 2, "score": 3, "last_activity_date": 1479368969, "creation_date": 1479329536, "last_edit_date": 1479368969, "question_id": 40642079, "link": "https://stackoverflow.com/questions/40642079/exponentiate-a-vector-using-stdtransform", "title": "Exponentiate a vector using std::transform", "body": "<p>How do I implement this using <code>std::transform</code> and <code>std::foreach</code>? (without C++11)</p>\n\n<pre><code>std::vector&lt;double&gt; exp_c(const std::vector&lt;double&gt;&amp; x) {\n  const int n = x.size();\n  std::vector&lt;double&gt; y(n);\n  for (int i = 0; i &lt; n; i++) {\n    y[i] = std::exp(x[i]);\n  }\n  return y;\n}\n</code></pre>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "go", "swig"], "comments": [{"owner": {"reputation": 676, "user_id": 105456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f0049842700597b89972e1fbf6f542?s=128&d=identicon&r=PG", "display_name": "tmc", "link": "https://stackoverflow.com/users/105456/tmc"}, "edited": false, "score": 0, "creation_date": 1508719352, "post_id": 40642046, "comment_id": 80708277, "body": "can you put your failing example up somewhere?"}, {"owner": {"reputation": 14732, "user_id": 1026572, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a74388494ea3475fe5a99a04d6120bcc?s=128&d=identicon&r=PG", "display_name": "dragonx", "link": "https://stackoverflow.com/users/1026572/dragonx"}, "reply_to_user": {"reputation": 676, "user_id": 105456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f0049842700597b89972e1fbf6f542?s=128&d=identicon&r=PG", "display_name": "tmc", "link": "https://stackoverflow.com/users/105456/tmc"}, "edited": false, "score": 0, "creation_date": 1530921590, "post_id": 40642046, "comment_id": 89418821, "body": "I don&#39;t remember exactly how I got around this, but I think I used a wrapper that converted the string to a <code>char *</code>."}, {"owner": {"reputation": 1169, "user_id": 230825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/274ee5a62543653734586319874daf57?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/230825/david"}, "edited": false, "score": 0, "creation_date": 1538082981, "post_id": 40642046, "comment_id": 92030375, "body": "The code generated by swig 3.0.12 casts the Go String reference to a <code>void*</code> that is finally casted into a <code>std::string*</code>. So it crashes.  @dragonx What do you mean by <i>I lose the return value in this case</i> ?"}, {"owner": {"reputation": 14732, "user_id": 1026572, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a74388494ea3475fe5a99a04d6120bcc?s=128&d=identicon&r=PG", "display_name": "dragonx", "link": "https://stackoverflow.com/users/1026572/dragonx"}, "reply_to_user": {"reputation": 1169, "user_id": 230825, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/274ee5a62543653734586319874daf57?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/230825/david"}, "edited": false, "score": 0, "creation_date": 1538179846, "post_id": 40642046, "comment_id": 92066257, "body": "@david It&#39;s been a while since I&#39;ve looked at this.  My solution was to convert the std::string&amp; to a char*, and pass a char* instead.  The early solution I had was to have Foo() return a std::string, which worked, but that also mean that Foo() could no longer return a meaningful error code."}], "owner": {"reputation": 14732, "user_id": 1026572, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a74388494ea3475fe5a99a04d6120bcc?s=128&d=identicon&r=PG", "display_name": "dragonx", "link": "https://stackoverflow.com/users/1026572/dragonx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1479329407, "creation_date": 1479329407, "last_edit_date": 1495542749, "question_id": 40642046, "link": "https://stackoverflow.com/questions/40642046/can-swig-golang-handle-a-stdstring-out-param", "title": "Can swig + golang handle a std::string out param?", "body": "<p>I'm trying to connect a go project to a C++ lib using SWIG.  I've got most things working, but there's one function that takes a C++ std::string as a param and assigns a value to it, and I haven't been able to get that working.</p>\n\n<p>The closest thing I've found online is this question: <a href=\"https://stackoverflow.com/questions/17753105/string-parameters\">String parameters</a></p>\n\n<p>It's not the same since it takes a <code>const std::string &amp;</code>, and SWIG translates that to a go string.</p>\n\n<p>My function looks something like:</p>\n\n<p><code>bool foo(std::string &amp;result);</code></p>\n\n<p>SWIG converts this to <code>func Foo(result *string) boolean</code></p>\n\n<p>This compiles and builds, but if I pass in a pointer to a go string, it panics.</p>\n\n<pre><code>var result string\nFoo(&amp;result)\n</code></pre>\n\n<p>I have been able to make foo() return a std::string, which SWIG seems to make work with a go string just fine.  However, I lose the return value in this case.</p>\n\n<p>I'm using golang 1.7, swig 3.0.10</p>\n"}, {"tags": ["c++", "vector", "data-structures", "hashmap"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1479329358, "post_id": 40642021, "comment_id": 68516125, "body": "Try both, profile, and pick the fastest solution."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 10, "creation_date": 1479329639, "post_id": 40642021, "comment_id": 68516280, "body": "With only 100 strings, it&#39;s very likely that everything will be fast and your time spent on this problem wasted. Write code that suits your application logic and that is easy to understand, read and maintain. If it&#39;s <i>really</i> too slow, you will find out which parts of the code are the bottleneck."}, {"owner": {"reputation": 41100, "user_id": 1938163, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/WV0Fi.png?s=128&g=1", "display_name": "Marco A.", "link": "https://stackoverflow.com/users/1938163/marco-a"}, "edited": false, "score": 0, "creation_date": 1479330391, "post_id": 40642021, "comment_id": 68516681, "body": "Profiling is definitely the way to go here.."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1479333136, "post_id": 40642021, "comment_id": 68518071, "body": "This might be an interesting application for a <a href=\"https://en.wikipedia.org/wiki/Bloom_filter\" rel=\"nofollow noreferrer\">Bloom Filter</a>, especially if you can afford some false positive matches."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1479334079, "post_id": 40642021, "comment_id": 68518523, "body": "Will these strings be more or less equal in length?"}, {"owner": {"reputation": 440, "user_id": 2594180, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/maj12.jpg?s=128&g=1", "display_name": "shawn", "link": "https://stackoverflow.com/users/2594180/shawn"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1479788105, "post_id": 40642021, "comment_id": 68693924, "body": "@MarkRansom Bloom Filter is a space-efficient algorithm. if the data set has just 100 strings, why use this algorithm?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 440, "user_id": 2594180, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/maj12.jpg?s=128&g=1", "display_name": "shawn", "link": "https://stackoverflow.com/users/2594180/shawn"}, "edited": false, "score": 0, "creation_date": 1479788499, "post_id": 40642021, "comment_id": 68694017, "body": "@shawn because it&#39;s O(1) in all cases, and space-efficient means cache friendly. Avoiding string comparisons can be a big win too."}, {"owner": {"reputation": 440, "user_id": 2594180, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/maj12.jpg?s=128&g=1", "display_name": "shawn", "link": "https://stackoverflow.com/users/2594180/shawn"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1479792375, "post_id": 40642021, "comment_id": 68695115, "body": "@MarkRansom if that, why not just use hash table or direct address table for small dataset? Bloom Filter need define k hash functions."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 440, "user_id": 2594180, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/maj12.jpg?s=128&g=1", "display_name": "shawn", "link": "https://stackoverflow.com/users/2594180/shawn"}, "edited": false, "score": 0, "creation_date": 1479795101, "post_id": 40642021, "comment_id": 68696038, "body": "@shawn as described in one of the answers, you only need calculate a single hash, then break it into multiple pieces for the Bloom Filter. It might get better performance than a straight hash table, but I can&#39;t say for sure which is why it was a comment instead of an answer. Not sure what you mean by &quot;direct address table&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "is_accepted": false, "score": 2, "last_activity_date": 1479329886, "creation_date": 1479329886, "answer_id": 40642172, "question_id": 40642021, "link": "https://stackoverflow.com/questions/40642021/c-fastest-data-structure-for-multiple-searches/40642172#40642172", "title": "C++ fastest data structure for multiple searches", "body": "<p>Unless you are doing hundreds of millions of searches a second, you won't be able to tell the difference.\nIf you ARE doing hundreds of millions of searches a second, try a radix-tree.   It's very expensive in memory but with this small data set that shouldn't matter.</p>\n\n<p>Once you write it, profile it.</p>\n"}, {"tags": [], "owner": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "is_accepted": false, "score": 15, "last_activity_date": 1479329896, "creation_date": 1479329896, "answer_id": 40642175, "question_id": 40642021, "link": "https://stackoverflow.com/questions/40642021/c-fastest-data-structure-for-multiple-searches/40642175#40642175", "title": "C++ fastest data structure for multiple searches", "body": "<p><strong>The best (and only) way to tell what structure is fastest for a certain situation is to actually benchmark/measure it with different data structures.</strong> Then pick the fastest.</p>\n\n<p>Or in other words: Measuring your code gives you an advantage over those people who think they are too smart to measure. ;)</p>\n\n<p>For rather small lists like the 100 elements you mentioned in your question it is not making much of a difference what structure/algorithm you use, because the time gained is probably negligible - unless that search is performed very often by your program.</p>\n"}, {"tags": [], "owner": {"reputation": 52016, "user_id": 373025, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1916b08af2d329d0fe74b7fb9412369b?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandre C.", "link": "https://stackoverflow.com/users/373025/alexandre-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1479330085, "creation_date": 1479330085, "answer_id": 40642230, "question_id": 40642021, "link": "https://stackoverflow.com/questions/40642021/c-fastest-data-structure-for-multiple-searches/40642230#40642230", "title": "C++ fastest data structure for multiple searches", "body": "<p>Use <code>std::unordered_set&lt;std::string&gt;</code>, which is well suited for your case. You can have a <code>std::set&lt;std::string&gt;</code> around if you also need to iterate them in order.</p>\n\n<p>If after profiling you find out you spend all your time querying the data structure, then it will be the time to ask another question (with the precise code you'll be using).</p>\n"}, {"tags": [], "owner": {"reputation": 50907, "user_id": 149138, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/cfd457233c8ebbab383475fc097442d9?s=128&d=identicon&r=PG", "display_name": "BeeOnRope", "link": "https://stackoverflow.com/users/149138/beeonrope"}, "is_accepted": false, "score": 19, "last_activity_date": 1480120962, "last_edit_date": 1480120962, "creation_date": 1479336447, "answer_id": 40643725, "question_id": 40642021, "link": "https://stackoverflow.com/questions/40642021/c-fastest-data-structure-for-multiple-searches/40643725#40643725", "title": "C++ fastest data structure for multiple searches", "body": "<p>Assuming you are talking about \"full sized\" CPUs<sup>1</sup>, a binary search through strings, even with only 100 elements is likely to be <em>quite slow</em>, relative to other solutions at least. You may suffer several branch mispredicts for every search, and will probably end up examining each character in the input string several times (since you need to repeatedly <code>strcmp</code> at each node in the binary search).</p>\n\n<p>As someone already pointed out, the only real way to know is to <em>measure</em> - but to do that you still need to be able to figure out what the candidates are in the first place! Furthermore, it's not always possible to measure in a <em>realistic</em> scenario, since might not even know such a scenario (imagine, for example, designing a library function which be widely used across many different cases).</p>\n\n<p>Finally, understanding what is likely to be fast lets you both eliminate candidates you know will perform badly, and allows you to double-check your test results with your intuition:  if something is much slower than you expected, it's worth checking why (did the compiler do something stupid), and if something is much <em>faster</em> then maybe it's time to update your intuition.</p>\n\n<p>So I'll try to actually take a stab at what's going to be fast - assuming <em>speed really matters</em> here, and you can spend some time validating a complex solution. As a baseline, a straightforward implementation will probably take 100 ns, and a really optimized one perhaps 10 ns. So if you spend 10 hours of engineering time on this, you'll have to call this function <strong>400 billion times</strong> just to earn your 10 hours back<sup>5</sup>. When you factor in the risk of bugs, the maintenance complexity and other overheads, you are going to want to make sure you are calling this function many <em>trillions</em> of times before trying to optimize it. Such functions are rare, but they certainly exist<sup>4</sup>.</p>\n\n<p>That said, you are missing a lot of information that would be needed to help design a very fast solution, such as:</p>\n\n<ol>\n<li>Is your input to the search function a <code>std::string</code> or <code>const char *</code> or something else?</li>\n<li>What is the average and maximum string length?</li>\n<li>Will most of your searches be successful or unsuccessful?</li>\n<li>Can you accept some false positives?</li>\n<li>Is the set of strings known at compile time, or are you OK with a long initialization phase?</li>\n</ol>\n\n<p>The answers to above can help you partition the design space as described below.</p>\n\n<h2>Bloom Filters</h2>\n\n<p>If per <strong>(4)</strong> you can accept a (controllable) number of false positives<sup>2</sup>, <em>or</em> per <strong>(3)</strong> most of your searches will be unsuccessful, then you should consider a <a href=\"https://en.wikipedia.org/wiki/Bloom_filter\" rel=\"noreferrer\">Bloom Filter</a>. For example, you could use a 1024 bit (128 byte) filter, and use a 60-bit hash of the string to index into it with 6 10-bit functions. This gives a &lt; 1% false positive rate.</p>\n\n<p>This has the advantage that outside of the hash calculation it's independent of the lengths of the strings, and it doesn't depend on the matching behavior (e.g., a search that relies on repeated string comparison will be slower if the strings tend to have long common prefixes).</p>\n\n<p>If you can accept false positives, you are done - but in the case that you need it to be always correct but expect mostly unsuccessful searches, you use it as a filter: if the bloom filter returns <em>false</em> (the usual case) you are done, but if it returns true, you need to double check in one of the always-correct structures discussed below. So the common case is fast, but the right answer is always returned.</p>\n\n<h2>Perfect Hash</h2>\n\n<p>If the set of ~100 strings is known at compile time, or you are OK doing some one-time heavy work to pre-process the strings, you could consider a perfect hash. If you have a compile-time known search set, you can just slap the strings into <a href=\"https://www.gnu.org/software/gperf/\" rel=\"noreferrer\"><code>gperf</code></a> and it will spit out a hash function and lookup table. </p>\n\n<p>For example, I just fed 100 random English words<sup>3</sup> into <code>gperf</code> and it generated a hash function that only needs to look at <em>two characters</em> to uniquely distinguish every word, like this:</p>\n\n<pre><code>static unsigned int hash (const char *str, unsigned int len)\n{\n  static unsigned char asso_values[] =\n    {\n      115, 115, 115, 115, 115,  81,  48,   1,  77,  72,\n      115,  38,  81, 115, 115,   0,  73,  40,  44, 115,\n       32, 115,  41,  14,   3, 115, 115,  30, 115, 115,\n      115, 115, 115, 115, 115, 115, 115,  16,  18,   4,\n       31,  55,  13,  74,  51,  44,  32,  20,   4,  28,\n       45,   4,  19,  64,  34,   0,  21,   9,  40,  70,\n       16,   0, 115, 115, 115, 115, 115, 115, 115, 115,\n      /* most of the table omitted */\n    };\n  register int hval = len;\n\n  switch (hval)\n    {\n      default:\n        hval += asso_values[(unsigned char)str[3]+1];\n      /*FALLTHROUGH*/\n      case 3:\n      case 2:\n      case 1:\n        hval += asso_values[(unsigned char)str[0]];\n        break;\n    }\n  return hval;\n}\n</code></pre>\n\n<p>Now your hash function is <em>quick</em> and probably well-predicted (if you don't have too many strings of length 3 or less). To look up a string then you just index into the hash table (also generated by <code>gperf</code>), and compare what you get to the input string.</p>\n\n<p>Under some reasonable assumptions this is going to be about as fast as you can get - <code>clang</code> generates code like this:</p>\n\n<pre><code>in_word_set:                            # @in_word_set\n        push    rbx\n        lea     eax, [rsi - 3]\n        xor     ebx, ebx\n        cmp     eax, 19\n        ja      .LBB0_7\n        lea     ecx, [rsi - 1]\n        mov     eax, 3\n        cmp     ecx, 3\n        jb      .LBB0_3\n        movzx   eax, byte ptr [rdi + 3]\n        movzx   eax, byte ptr [rax + hash.asso_values+1]\n        add     eax, esi\n.LBB0_3:\n        movzx   ecx, byte ptr [rdi]\n        movzx   edx, byte ptr [rcx + hash.asso_values]\n        cdqe\n        add     rax, rdx\n        cmp     eax, 114\n        ja      .LBB0_6\n        mov     rbx, qword ptr [8*rax + in_word_set.wordlist]\n        cmp     cl, byte ptr [rbx]\n        jne     .LBB0_6\n        add     rdi, 1\n        lea     rsi, [rbx + 1]\n        call    strcmp\n        test    eax, eax\n        je      .LBB0_7\n.LBB0_6:\n        xor     ebx, ebx\n.LBB0_7:\n        mov     rax, rbx\n        pop     rbx\n        ret\n</code></pre>\n\n<p>It's a ton of code, but with a reasonable amount of ILP. The critical path is through the 3 dependent memory accesses (look up <code>char</code> value in <code>str</code> -> look up hash value for <code>char</code> in the hash function table -> look up the string in the actual hash table), you could expect this to take perhaps 20 cycles typically (plus the <code>strcmp</code> time of course).</p>\n\n<h2>Trie</h2>\n\n<p>The \"classic\" compsci solution to this problem is the <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"noreferrer\">trie</a>. The trie could be a reasonable approach for your problem, especially many unsuccessful matches can be rejected quickly within the first few characters (this depends on largely on the content of the match set and the strings you are checking).</p>\n\n<p>You'd want a fast trie implementation to make this work. Overall I feel this approach will be limited by the serially dependent memory accesses - each node is likely visited in a kind of pointer-chasing approach, so you'll suffer a lot of from L1 access latency.</p>\n\n<h2>Optimizing <code>strcmp</code></h2>\n\n<p>Almost all of the above solutions depend on <code>strcmp</code> at some point - the exception being the bloom filter which allows false positives. So you want to make this sure this part of your code is fast.  </p>\n\n<p>In particular compilers may sometimes inline \"builtin\" versions of <code>strcmp</code> rather than calling the library function: in quick test <code>icc</code> did the inlining, but <code>clang</code> and <code>gcc</code> opted to call the library function. There is no simple rule for which one is going to be faster, but in general the library routines are often SIMD optimized, and may be faster for long strings, while the inlined versions avoid function call overhead and may be faster for short strings. You can test both approaches and mostly force the compilers to do what is faster in your case.</p>\n\n<p>Even better, you may be able to take advantage of your control of the inputs to do much better - if you can ensure that, for example, the input strings will be <em>null padded</em> such that its length is a multiple of 8, then you can do the same for the reference strings in your hash table (or whatever other structure) and you could compare the strings 8 bytes at a time. This not only greatly speeds up the matching, it cuts back dramatically on branch mispredicts because it essentially quantizes the looping behavior (all strings of 1-8 characters loop once, etc).</p>\n\n<hr>\n\n<p><sup>1</sup> Here I mean desktop, server, laptop CPUs, or even modern smartphone CPUs and not embedded device MCUs or anything like that.</p>\n\n<p><sup>2</sup> Allowing <em>false positives</em> means that it's OK if your \"is in set\" sometimes returns true even when the input string is not in the set. Note that it never gets it wrong the other way around: it <em>always</em> returns true when the string <em>is</em> in the set - there are no <em>false negatives</em>.</p>\n\n<p><sup>3</sup> Specifically, <code>awk 'NR%990==0' /usr/share/dict/american-english &gt; words</code>.</p>\n\n<p><sup>4</sup> For example, how many times do you thing <code>strcmp</code> has been called in the history of computing? How much time would be saved if it were even 1 ns faster?</p>\n\n<p><sup>5</sup> That's kind of somehow equating CPU time with engineering time, which is probably off by a factor of more than 1000x: Amazon AWS charges something like $0.02 per hour of CPU time, and a good engineer can expect perhaps $50 per hour (in the first world). So by that (very rough!) metric engineering time is 2500x more valuable than CPU time. So perhaps you need quadrillions of calls for 10 hours of work to pay off...</p>\n"}, {"tags": [], "owner": {"reputation": 12309, "user_id": 340457, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/MNrHu.jpg?s=128&g=1", "display_name": "Gigamegs", "link": "https://stackoverflow.com/users/340457/gigamegs"}, "is_accepted": false, "score": 2, "last_activity_date": 1479779911, "last_edit_date": 1479779911, "creation_date": 1479735367, "answer_id": 40721510, "question_id": 40642021, "link": "https://stackoverflow.com/questions/40642021/c-fastest-data-structure-for-multiple-searches/40721510#40721510", "title": "C++ fastest data structure for multiple searches", "body": "<p>The question is a bit vague but the fastest string matching algorithm is a finite state machine, i.e. aho-corasick algorithm. It's the generalization of e Knuth\u2013Morris\u2013Pratt matching algorithm. If you just want a simple lookup you can try a ternary trie or a compressed trie (radix-tree) if space matters or even binary search.</p>\n"}, {"tags": [], "owner": {"reputation": 440, "user_id": 2594180, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/maj12.jpg?s=128&g=1", "display_name": "shawn", "link": "https://stackoverflow.com/users/2594180/shawn"}, "is_accepted": false, "score": 3, "last_activity_date": 1479781567, "last_edit_date": 1479781567, "creation_date": 1479746118, "answer_id": 40725016, "question_id": 40642021, "link": "https://stackoverflow.com/questions/40642021/c-fastest-data-structure-for-multiple-searches/40725016#40725016", "title": "C++ fastest data structure for multiple searches", "body": "<p>This is an interesting question because it's very close to the concept of JAVA String Pool. Java use <a href=\"https://en.wikipedia.org/wiki/Java_Native_Interface\" rel=\"nofollow noreferrer\">JNI</a> call native corresponding method which is implemented by C++</p>\n\n<p>The string pool is the JVM's particular implementation of the concept of <a href=\"https://en.wikipedia.org/wiki/String_interning\" rel=\"nofollow noreferrer\">string interning</a>:</p>\n\n<blockquote>\n  <p>In computer science, string interning is a method of storing only one copy of each distinct string value, which must be immutable. Interning strings makes some string processing tasks more time- or space-efficient at the cost of requiring more time when the string is created or interned. The distinct values are stored in a string intern pool.</p>\n</blockquote>\n\n<p>Let's see how to implement String pool inside Java 7</p>\n\n<pre><code>/** \n * Returns a canonical representation for the string object. \n * &lt;p&gt; \n * A pool of strings, initially empty, is maintained privately by the \n * class &lt;code&gt;String&lt;/code&gt;. \n * &lt;p&gt; \n * When the intern method is invoked, if the pool already contains a \n * string equal to this &lt;code&gt;String&lt;/code&gt; object as determined by \n * the {@link #equals(Object)} method, then the string from the pool is \n * returned. Otherwise, this &lt;code&gt;String&lt;/code&gt; object is added to the \n * pool and a reference to this &lt;code&gt;String&lt;/code&gt; object is returned. \n * &lt;p&gt; \n * It follows that for any two strings &lt;code&gt;s&lt;/code&gt; and &lt;code&gt;t&lt;/code&gt;, \n * &lt;code&gt;s.intern()&amp;nbsp;==&amp;nbsp;t.intern()&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt; \n * if and only if &lt;code&gt;s.equals(t)&lt;/code&gt; is &lt;code&gt;true&lt;/code&gt;. \n * &lt;p&gt; \n * All literal strings and string-valued constant expressions are \n * interned. String literals are defined in section 3.10.5 of the \n * &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;. \n * \n * @return  a string that has the same contents as this string, but is \n *          guaranteed to be from a pool of unique strings. \n */  \npublic native String intern();\n</code></pre>\n\n<p>When the intern method is invoked, if the pool already contains a string equal to this String object as determined by the equal object, then the string from the pool is returned. Otherwise, this object is added to the pool and a reference to this string object is returned.</p>\n\n<p>Java use <a href=\"https://en.wikipedia.org/wiki/Java_Native_Interface\" rel=\"nofollow noreferrer\">JNI</a> call native StringTable.intern method which is implemented by C++</p>\n\n<p>\\openjdk7\\jdk\\src\\share\\native\\java\\lang\\String.c</p>\n\n<pre><code>Java_java_lang_String_intern(JNIEnv *env, jobject this)  \n{  \n    return JVM_InternString(env, this);  \n}\n</code></pre>\n\n<p>\\openjdk7\\hotspot\\src\\share\\vm\\prims\\jvm.h</p>\n\n<pre><code>/* \n* java.lang.String \n*/  \nJNIEXPORT jstring JNICALL  \nJVM_InternString(JNIEnv *env, jstring str); \n</code></pre>\n\n<p>\\openjdk7\\hotspot\\src\\share\\vm\\prims\\jvm.cpp</p>\n\n<pre><code>// String support ///////////////////////////////////////////////////////////////////////////  \nJVM_ENTRY(jstring, JVM_InternString(JNIEnv *env, jstring str))  \n  JVMWrapper(\"JVM_InternString\");  \n  JvmtiVMObjectAllocEventCollector oam;  \n  if (str == NULL) return NULL;  \n  oop string = JNIHandles::resolve_non_null(str);  \n  oop result = StringTable::intern(string, CHECK_NULL);\n  return (jstring) JNIHandles::make_local(env, result);  \nJVM_END\n</code></pre>\n\n<p>\\openjdk7\\hotspot\\src\\share\\vm\\classfile\\symbolTable.cpp</p>\n\n<pre><code>oop StringTable::intern(Handle string_or_null, jchar* name,  \n                        int len, TRAPS) {  \n  unsigned int hashValue = java_lang_String::hash_string(name, len);  \n  int index = the_table()-&gt;hash_to_index(hashValue);  \n  oop string = the_table()-&gt;lookup(index, name, len, hashValue);  \n  // Found  \n  if (string != NULL) return string;  \n  // Otherwise, add to symbol to table  \n  return the_table()-&gt;basic_add(index, string_or_null, name, len,  \n                                hashValue, CHECK_NULL);  \n}\n</code></pre>\n\n<p>\\openjdk7\\hotspot\\src\\share\\vm\\classfile\\symbolTable.cpp</p>\n\n<pre><code>oop StringTable::lookup(int index, jchar* name,  \n                        int len, unsigned int hash) {  \n  for (HashtableEntry&lt;oop&gt;* l = bucket(index); l != NULL; l = l-&gt;next()) {  \n    if (l-&gt;hash() == hash) {  \n      if (java_lang_String::equals(l-&gt;literal(), name, len)) {  \n        return l-&gt;literal();  \n      }  \n    }  \n  }  \n  return NULL;  \n}\n</code></pre>\n\n<p>If you want to know more about how oracle engineers change the string pooling logic in Java 7, the link will be useful to you. <a href=\"http://bugs.java.com/view_bug.do?bug_id=6962930\" rel=\"nofollow noreferrer\">Bug Report: make the string table size configurable</a>. The String pool is implemented as a fixed capacity has map with each bucket containing a list of Strings with the same has code. The default pool size is 1009.</p>\n\n<p>For your question, you can write a test program to compare with this method to heap data structure and determine which one is better. </p>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 5718178, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jVymB.jpg?s=128&g=1", "display_name": "Prem KTiw", "link": "https://stackoverflow.com/users/5718178/prem-ktiw"}, "is_accepted": false, "score": 1, "last_activity_date": 1480271738, "creation_date": 1480271738, "answer_id": 40832462, "question_id": 40642021, "link": "https://stackoverflow.com/questions/40642021/c-fastest-data-structure-for-multiple-searches/40832462#40832462", "title": "C++ fastest data structure for multiple searches", "body": "<p>Trie is the best solution for you.\nI say this because you don't have much strings, so going this way would be better.\nYou can look at my implementation of trie here at my github link <br>\n<a href=\"https://github.com/prem-ktiw/Algorithmic-Codes/blob/master/Trie/char_trie.cpp\" rel=\"nofollow noreferrer\">https://github.com/prem-ktiw/Algorithmic-Codes/blob/master/Trie/char_trie.cpp</a>\n<br>\nThe code is well commented and will allow you to insert a string in linear time, and search as well in linear time. No collision issues as seen in hashing. <br>Dynamic allocation has been used so memory will not be an issue.<br>\nThe only thing is that you cannot have multiple duplicate copies of same string in my implementation, and there is no record of how many copies of a string is there in the trie.<br>\nI would like to hear from you on this, in case any assistance is needed.</p>\n"}, {"tags": [], "owner": {"reputation": 288, "user_id": 3809646, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eKaje.png?s=128&g=1", "display_name": "d3m4nz3", "link": "https://stackoverflow.com/users/3809646/d3m4nz3"}, "is_accepted": false, "score": 2, "last_activity_date": 1480279548, "last_edit_date": 1480279548, "creation_date": 1480277190, "answer_id": 40833341, "question_id": 40642021, "link": "https://stackoverflow.com/questions/40642021/c-fastest-data-structure-for-multiple-searches/40833341#40833341", "title": "C++ fastest data structure for multiple searches", "body": "<p>It depends on how different your strings are or what particular shape they have.</p>\n\n<p>I think a hashmap is a good idea, if you're willing to take in the memory overhead. For only about 100 strings, the first character is enough: </p>\n\n<pre><code>String* myStrings[256];\n</code></pre>\n\n<p>You simply look at the first char of your string to determine in which array it could be. </p>\n\n<p>If your strings are heterogenous enough (i.e they don't usually start with the same letter), the gain is theorically 256x speed. The loss an is additional 257 pointers (257*64 = 16448 bits) in memory. \nYou can compensate a bit for that loss by removing the first character from the actual stored strings. </p>\n\n<p>If you decide to scale up to 2 characters or more, both the advantages and the inconvenient are exponential. </p>\n\n<pre><code>String* myStrings[256][256][256];\n</code></pre>\n\n<p>However if your strings are special and cannot for example start with any char or contain any char, then you can reduce the array and map the used chars to a slot. </p>\n\n<pre><code>char charToSlot[256]; \nString* myStrings[3];\n</code></pre>\n\n<p>For example in this case if your strings can only start with the characters 100, 235 and 201, then charToSlot[100] = 0, charToSlot[235] = 1 and charToSlot[201] = 2. </p>\n\n<p>Looking up the index is slightly slower but the memory impact is minimal. That could help you if the strings you manipulate can only contain the alphabet in lowercase. Then your ideal structure for one character would be: </p>\n\n<pre><code>char charToSlot[256]; \nString* myStrings[26]; \n</code></pre>\n\n<p>And it can be scaled up more easily: </p>\n\n<pre><code>char charToSlot[256]; \nString* myStrings[26][26][26]; \n</code></pre>\n\n<p>If you don't want to make any assumptions about your strings (i.e they can contain anything) then you could implement some dynamic indexing (indexes are added as soon as they are needed, and the array needs to be realloacated constantly).</p>\n\n<pre><code>char charToSlot[256]; \nString**** myStrings; \n</code></pre>\n\n<p>Another trick, if your strings vary in length and are pretty small (5-30 length) you could add an additional index that would again multiply the speed by only searching for the strings with the same length. </p>\n\n<pre><code>String* myStrings[30][256][256]...\n</code></pre>\n\n<p>If you think those solutions are too heavy, then you can take a more statistical approach. You could give the same branch to several characters. For example 'a', 'b', 'c' and 'd' would all go down the same way, and you'd have 4 times less branches. Then you'd arrive to the list and check again, char by char, if a string is equal, with an increased chance of obtaining what you want.</p>\n\n<p>For example, if you strings can contain all 256 characters, but you don't want 256 but rather like 8 branches, you'd have : </p>\n\n<pre><code>String* myStrings[8]; \n</code></pre>\n\n<p>And for any character you'd simply divide it by 32 (very fast) to pick the branch. This is probably the solution I'd recommend for your problem, since you have only about 100 strings and you probably don't want a huge array. </p>\n\n<p>Also this one scales up more nicely: </p>\n\n<pre><code>String* myStrings[8][8][8][8]...\n</code></pre>\n\n<p>But then the arrays stored could have 32 times more strings and the content isn't deterministic. </p>\n\n<p>Again, all depends of the particular properties of your strings, and more importantly of how many strings you have. For a really huge string database, nobody would care about even a Terabit of mapping overhead if it improves the search speed by a gargantuan factor and remove 99.99% of the iterating.</p>\n"}, {"comments": [{"owner": {"reputation": 2672, "user_id": 1726659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OnGku.jpg?s=128&g=1", "display_name": "n4m31ess_c0d3r", "link": "https://stackoverflow.com/users/1726659/n4m31ess-c0d3r"}, "edited": false, "score": 0, "creation_date": 1513172991, "post_id": 47794186, "comment_id": 82550102, "body": "Please add a minimal explanation in the answer itself, as the link provided may happen to unavailable in the future."}], "tags": [], "owner": {"reputation": 68, "user_id": 8157677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/444b0ec55bbce36a89af69516c368829?s=128&d=identicon&r=PG&f=1", "display_name": "minika woon", "link": "https://stackoverflow.com/users/8157677/minika-woon"}, "is_accepted": false, "score": 0, "last_activity_date": 1513175721, "last_edit_date": 1513175721, "creation_date": 1513171669, "answer_id": 47794186, "question_id": 40642021, "link": "https://stackoverflow.com/questions/40642021/c-fastest-data-structure-for-multiple-searches/47794186#47794186", "title": "C++ fastest data structure for multiple searches", "body": "<p>You may try <a href=\"https://github.com/Taymindis/binary_array\" rel=\"nofollow noreferrer\">binary index array</a>, it is c library index struct member field.</p>\n\n<p>The tutorial blog is here <a href=\"https://minikawoon.quora.com/How-to-search-data-faster-on-big-amount-of-data-in-C-C++\" rel=\"nofollow noreferrer\">https://minikawoon.quora.com/How-to-search-data-faster-on-big-amount-of-data-in-C-C++</a></p>\n\n<p>Sample: - </p>\n\n<p>Step 1. define your struct</p>\n\n<pre><code>typedef struct {\n  char book_name[30];\n  char book_description[61];\n  char book_categories[9];\n  int book_code;  \n} my_book_t;\n\n// 160000 size, 10 index field slot\nbin_array_t *all_books = bin_array_create(160000, 10);\n</code></pre>\n\n<p>Step 2. Add index</p>\n\n<pre><code>if (bin_add_index(all_books, my_book_t, book_name, __def_cstr_sorted_cmp_func__)\n&amp;&amp; bin_add_index(all_books, my_book_t, book_categories, __def_cstr_sorted_cmp_func__)\n&amp;&amp; bin_add_index(all_books, my_book_t, book_code, __def_int_sorted_cmp_func__)\n   ) {\n</code></pre>\n\n<p>Step 3. Initialized your data</p>\n\n<pre><code>    my_book_t *bk = malloc(sizeof(my_book_t));\n    strcpy(bk-&gt;book_name, \"The Duck Story\"));\n    ....\n    ...\n    bin_array_push(all_books, bk );\n</code></pre>\n\n<p>Step 4. Search Result eq, lt(less than), gt(greater than)</p>\n\n<pre><code>int data_search = 100;\nbin_array_rs *bk_rs= (my_book_t*) ba_search_eq(all_books, my_book_t,             \nbook_code, &amp;data_search);\nmy_book_t **bks = (my_book_t**)bk_rs-&gt;ptrs; // Convert to pointer array\n// Loop it\nfor (i = 0; i &lt; bk_rs-&gt;size; i++) {  \n   address_t *add = bks[i];\n    ....\n}\n</code></pre>\n\n<p>Step 5. Multiple search and inner join or union</p>\n\n<pre><code> // Join Solution\nbin_array_rs *bk_rs=bin_intersect_rs(\n    bin_intersect_rs(ba_search_gt(...), ba_search_lt(...), true),\n    bin_intersect_rs(ba_search_gt(...), ba_search_lt(....), true),\n                             true);\n\n // Union Solution\nbin_array_rs *bk_rs= bin_union_rs(\n    bin_union_rs(ba_search_gt(...), ba_search_lt(...), true),\n    bin_union_rs(ba_search_gt(...), ba_search_lt(....), true),\n                             true);\n</code></pre>\n\n<h1>Read the document for more details about how it search and release memory after search.</h1>\n"}], "owner": {"reputation": 111, "user_id": 6191045, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i1LQDimo-4Y/AAAAAAAAAAI/AAAAAAAAAMM/8y6J0aYTx8I/photo.jpg?sz=128", "display_name": "Kavish Munjal", "link": "https://stackoverflow.com/users/6191045/kavish-munjal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5427, "favorite_count": 2, "answer_count": 9, "score": 11, "last_activity_date": 1513175721, "creation_date": 1479329302, "question_id": 40642021, "link": "https://stackoverflow.com/questions/40642021/c-fastest-data-structure-for-multiple-searches", "title": "C++ fastest data structure for multiple searches", "body": "<p>Coding in C++. I need a data structure for a bunch of sorted strings. I will be inserting all the strings into it in one go and not update it, but I will be searching for strings very often. All I need to see if a give string exists in the structure or not. I am expecting the list to be about a 100 strings.\nWhat would be a faster structure? I was thinking hashmap at first but I saw somewhere that for such a small number of elements, a binary search over a vector would work better (since they're sorted).</p>\n"}, {"tags": ["c++", "atomic", "memory-barriers"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1479329129, "post_id": 40641904, "comment_id": 68515987, "body": "No such thing is true; your proposed code has a race."}, {"owner": {"reputation": 6642, "user_id": 434233, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/y6HxN.png?s=128&g=1", "display_name": "Arunmu", "link": "https://stackoverflow.com/users/434233/arunmu"}, "edited": false, "score": 2, "creation_date": 1479329229, "post_id": 40641904, "comment_id": 68516047, "body": "No, no, no ! you cannot read and write from/to the <code>flag</code> at the same time form 2 or more threads. It is not guaranteed that the operations on a <code>bool</code> are atomic by default. You need the flag to be atomic."}], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1575778759, "post_id": 40642280, "comment_id": 104677626, "body": "No only that: a computation whose result is dropped and simply to removed. (Even in Ada. Even it would have caused an exception in Ada.) So you can&#39;t reliably time patently useless computations in benchmarks. Some computations aren&#39;t just reordered around &quot;compiler barriers&quot;, they can potentially be removed. Which makes the whole question of whether they can &quot;jump&quot; the barrier very silly as they can &quot;jump&quot; into a black hole."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575791199, "post_id": 40642280, "comment_id": 104679184, "body": "In some compilers (like GCC), compiler barriers like <code>asm(&quot;&quot;:::&quot;memory&quot;)</code> don&#39;t affect non-escaped locals.  Exactly <i>because</i> nothing could tell the difference.  If you need them barriered, make them <code>&quot;m&quot;(var)</code> inputs to the asm statement for force them into memory."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1479330273, "creation_date": 1479330273, "answer_id": 40642280, "question_id": 40641904, "link": "https://stackoverflow.com/questions/40641904/c-atomic-would-function-call-act-as-memory-barrier/40642280#40642280", "title": "c++ atomic: would function call act as memory barrier?", "body": "<p>Formally, no, if only because Link-Time Code Generation is a valid implementation choice and need not be optional.</p>\n\n<p>There's also a second oversight, and that's escape analysis. The claim is that <em>\"the compiler has no idea what the function\u2019s side effects will be.\"</em>, but if no pointers to <strong>my</strong> local variables escape from <strong>my</strong> function, then the compiler does know for sure that no other function changes them.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7169399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bER1M.jpg?s=128&g=1", "display_name": "Jeffery", "link": "https://stackoverflow.com/users/7169399/jeffery"}, "edited": false, "score": 0, "creation_date": 1479416731, "post_id": 40642493, "comment_id": 68561092, "body": "So atomic and memory order option are always necessary in the above case no matter the read/write is in a separate function call? The article is misleading a bit."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575790620, "post_id": 40642493, "comment_id": 104679091, "body": "A memory barrier like <code>std::atomic_thread_fence(std::memory_order_seq_cst)</code>  or x86 <code>_mm_mfence()</code> also <i>includes</i> a compiler barrier even if it&#39;s an intrinsic / inline function, otherwise it&#39;s not very usable."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1575791399, "post_id": 40642493, "comment_id": 104679211, "body": "Atomic with <code>std::memory_order_relaxed</code> doesn&#39;t need any barriers, only the no-tearing / access-once atomicity guarantee."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 3, "last_activity_date": 1479331025, "creation_date": 1479331025, "answer_id": 40642493, "question_id": 40641904, "link": "https://stackoverflow.com/questions/40641904/c-atomic-would-function-call-act-as-memory-barrier/40642493#40642493", "title": "c++ atomic: would function call act as memory barrier?", "body": "<p>A compiler barrier is not the same thing as a memory barrier. A compiler barrier prevents the <strong>compiler</strong> from moving code across the barrier. A memory barrier (loosely speaking) prevents the <strong>hardware</strong> from moving reads and writes across the barrier. For atomics you need both, and you also need to ensure that values don't get torn when read or written.</p>\n"}, {"tags": [], "owner": {"reputation": 24488, "user_id": 4082723, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LJbVr.png?s=128&g=1", "display_name": "2501", "link": "https://stackoverflow.com/users/4082723/2501"}, "is_accepted": false, "score": 1, "last_activity_date": 1479368649, "last_edit_date": 1479368649, "creation_date": 1479368268, "answer_id": 40649130, "question_id": 40641904, "link": "https://stackoverflow.com/questions/40641904/c-atomic-would-function-call-act-as-memory-barrier/40649130#40649130", "title": "c++ atomic: would function call act as memory barrier?", "body": "<p>In the second example, even if we assume that no reordering of any kind, the behavior is undefined. </p>\n\n<p>The writes and reads from variable flag are not atomic, and there is a race condition<sup>1</sup>. Having no reordering doesn't guarantee that both threads don't access the variable flat at the same time. This happens when one thread hits the while loop in the function readflag and reads flag, and the other thread writes to flag in writeflag.</p>\n\n<hr>\n\n<p><sup>1</sup> (Quoted from: ISO/IEC 14882:2011(E) 1.10 Multi-threaded executions and data races 21)<br>\nThe execution of a program contains a data race if it contains two conflicting actions in different threads,\nat least one of which is not atomic, and neither happens before the other. Any such data race results in\nundefined behavior</p>\n"}, {"tags": [], "owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "is_accepted": false, "score": 1, "last_activity_date": 1575779152, "creation_date": 1575779152, "answer_id": 59232428, "question_id": 40641904, "link": "https://stackoverflow.com/questions/40641904/c-atomic-would-function-call-act-as-memory-barrier/59232428#59232428", "title": "c++ atomic: would function call act as memory barrier?", "body": "<p>You are confusing a memory barrier used for inter thread memory visibility and a compiler barrier, which isn't a thread device, just a device (or trick) to <strong>prevent reordering of side effects by the compiler</strong>.</p>\n\n<p>You need a memory barrier for your threading example.</p>\n\n<p>You can use a compiler barrier to ensure that memory side effet are performed in a given order (on the local CPU) for other purposes, like benchmarking, getting around a type aliasing violation, integrating assembly code, or signal handling (for a signal only handled in that same thread).</p>\n"}], "owner": {"reputation": 57, "user_id": 7169399, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bER1M.jpg?s=128&g=1", "display_name": "Jeffery", "link": "https://stackoverflow.com/users/7169399/jeffery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 40642493, "answer_count": 4, "score": 6, "last_activity_date": 1575779152, "creation_date": 1479328869, "question_id": 40641904, "link": "https://stackoverflow.com/questions/40641904/c-atomic-would-function-call-act-as-memory-barrier", "title": "c++ atomic: would function call act as memory barrier?", "body": "<p>I'm reading this article <a href=\"http://preshing.com/20120625/memory-ordering-at-compile-time/\" rel=\"noreferrer\">Memory Ordering at Compile Time</a> from which said:</p>\n\n<blockquote>\n  <p>In fact, the majority of function calls act as compiler barriers,\n  whether they contain their own compiler barrier or not.This excludes inline functions, functions declared with the pure attribute, and cases where link-time code generation is used. Other than those cases, a call to an external function is even stronger than a compiler barrier, since the compiler has no idea what the function\u2019s side effects will be.</p>\n</blockquote>\n\n<p>Is this a true statement? Think about this sample -</p>\n\n<pre><code>std::atomic_bool flag = false;\nint value = 0;\n\nvoid th1 () { // running in thread 1\n  value = 1;\n  // use atomic &amp; release to prevent above sentence being reordered below\n  flag.store(true, std::memory_order_release);\n}\n\nvoid th2 () { // running in thread 2\n  // use atomic &amp; acquire to prevent asset(..) being reordered above\n  while (!flag.load(std::memory_order_acquire)) {}\n  assert (value == 1);    // should never fail!\n}\n</code></pre>\n\n<p>Then we can remove atomic but replace with function call -</p>\n\n<pre><code>bool flag = false;\nint value = 0;\n\nvoid writeflag () {\n  flag = true;\n}\nvoid readflag () {\n  while (!flag) {}\n}\nvoid th1 () {\n  value = 1;\n  writeflag(); // would function call prevent reordering?\n}\nvoid th2 () {\n  readflag();  // would function call prevent reordering?\n  assert (value == 1);    // would this fail???\n}\n</code></pre>\n\n<p>Any idea?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 638, "user_id": 7065028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/602970b0b9f268e43b6212d4804d22e3?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Emmanuel", "link": "https://stackoverflow.com/users/7065028/jean-emmanuel"}, "is_accepted": true, "score": 2, "last_activity_date": 1479329550, "creation_date": 1479329550, "answer_id": 40642084, "question_id": 40641862, "link": "https://stackoverflow.com/questions/40641862/count-the-same-numbers-in-a-string-and-print-them-out-as-stars-c/40642084#40642084", "title": "Count the same numbers in a string and print them out as stars c++", "body": "<p>Many issues here.</p>\n\n<p>First, you are comparing number to strings in <code>int zero = count(std::begin(array),std::end(array),0);</code>. You want to compare string to string.</p>\n\n<p>Second, you are trying to <code>cout</code> <code>'1 - '</code>. <code>'</code> is for characters, so you should use <code>\"</code> instead.</p>\n\n<p>Finally, in the <code>cout</code>, you need to loop only on the stars and the space, not the <code>\"1 - \"</code>. And flush the whole thing to print on your console, with either <code>cout&lt;&lt;\"\\n\";</code> or <code>cout&lt;&lt;std::endl;</code>.</p>\n\n<p>You can try the following:</p>\n\n<pre><code>int main()\n{\n    vector&lt;string&gt; array;\n    string grades = \"01211342111153332211111232454444\";\n    int newarray[31];\n    for(int i = 0  ; i &lt; grades.length(); i++){\n        array.push_back(grades.substr(i,1));\n\n    }\n\n    int zero = count(std::begin(array),std::end(array),\"0\");\n    int one = count(std::begin(array),std::end(array),\"1\");\n    int two = count(std::begin(array),std::end(array),\"2\");\n    int three = count(std::begin(array),std::end(array),\"3\");\n    int four = count(std::begin(array),std::end(array),\"4\");\n    int five = count(std::begin(array),std::end(array),\"5\");\n\n\n    cout &lt;&lt; \"1 - \";\n    for(int i = 0 ; i &lt; one ; i ++){\n        cout &lt;&lt; '*' &lt;&lt; ' ';\n    }\n    cout &lt;&lt; \"\\n\";\n\n    cout &lt;&lt; \"2 - \";\n    for(int i = 0 ; i &lt; two ; i ++){\n        cout &lt;&lt; '*' &lt;&lt; ' ';\n    }\n    cout &lt;&lt; \"\\n\";\n\n    /*....*/\n}\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 5470858, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19463b2b742ab9c37e5193ced2094b1f?s=128&d=identicon&r=PG&f=1", "display_name": "mr aurora", "link": "https://stackoverflow.com/users/5470858/mr-aurora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 40642084, "answer_count": 1, "score": 1, "last_activity_date": 1479329550, "creation_date": 1479328718, "question_id": 40641862, "link": "https://stackoverflow.com/questions/40641862/count-the-same-numbers-in-a-string-and-print-them-out-as-stars-c", "title": "Count the same numbers in a string and print them out as stars c++", "body": "<p>I am writing a program which has a string, and then I read through the string and put all the digits in a array using vector and then using count I have to count the same numbers in that array and after that print the number as stars.</p>\n\n<p>Error I am getting is invalid operands to binary expression.</p>\n\n<p>Here is the code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include&lt;array&gt;\nusing namespace std;\n\nint main() {\n\n    vector&lt;string&gt; array;\n    string grades = \"01211342111153332211111232454444\";\n    int newarray[31];\n    for(int i = 0  ; i &lt; grades.length(); i++){\n        array.push_back(grades.substr(i,1));\n\n    }\n\n    int zero = count(std::begin(array),std::end(array),0);\n    int one = count(std::begin(array),std::end(array),1);\n    int two = count(std::begin(array),std::end(array),2);\n    int three = count(std::begin(array),std::end(array),3);\n    int four = count(std::begin(array),std::end(array),4);\n    int five = count(std::begin(array),std::end(array),5);\n   // also used this way int zero = count(array.begin(),array.end(),0); but still getting error.\n\n    for(int i = 0 ; i &lt; one ; i ++){\n        cout &lt;&lt; '1 - ' &lt;&lt; '*' &lt;&lt; ' ';\n    }\n    for(int j = 0 ; j &lt; two ; j++){\n        cout &lt;&lt; '2 - ' &lt;&lt; '*' &lt;&lt; ' ';\n    }\n\n\n}\n</code></pre>\n\n<p>Learning C++ so hopefully people go a bit easy on me.</p>\n"}, {"tags": ["c#", "c++", "dll", "uwp", "marshalling"], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 2058705, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f80abf6038d35ca3c33b7dbed173e26?s=128&d=identicon&r=PG", "display_name": "Sixjac", "link": "https://stackoverflow.com/users/2058705/sixjac"}, "edited": false, "score": 0, "creation_date": 1479669391, "post_id": 40641806, "comment_id": 68644419, "body": "Hi Nikita, thanks for the suggestion but now even with a C++ WinRT Component I am getting the same FileNotFoundException. Really painful, all dlls I use are in project folder, add into solution, set to content and copy always. Any suggestions? Thanks"}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 311, "user_id": 2058705, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f80abf6038d35ca3c33b7dbed173e26?s=128&d=identicon&r=PG", "display_name": "Sixjac", "link": "https://stackoverflow.com/users/2058705/sixjac"}, "edited": false, "score": 0, "creation_date": 1479673744, "post_id": 40641806, "comment_id": 68645945, "body": "@SeanRyan Run <a href=\"https://technet.microsoft.com/en-us/sysinternals/processmonitor.aspx\" rel=\"nofollow noreferrer\">Process Monitor</a> to see what files your application tries to load. You should see what dlls prevent your <code>AVEngine.dll </code> from loading."}, {"owner": {"reputation": 311, "user_id": 2058705, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f80abf6038d35ca3c33b7dbed173e26?s=128&d=identicon&r=PG", "display_name": "Sixjac", "link": "https://stackoverflow.com/users/2058705/sixjac"}, "edited": false, "score": 0, "creation_date": 1479675645, "post_id": 40641806, "comment_id": 68646644, "body": "thanks I installed and ran however I could not see anything that clearly showed issues, it is hard to read, perhaps I should learn how to use it. Thanks"}, {"owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "reply_to_user": {"reputation": 311, "user_id": 2058705, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f80abf6038d35ca3c33b7dbed173e26?s=128&d=identicon&r=PG", "display_name": "Sixjac", "link": "https://stackoverflow.com/users/2058705/sixjac"}, "edited": false, "score": 0, "creation_date": 1479676205, "post_id": 40641806, "comment_id": 68646827, "body": "@SeanRyan Yes, first time it&#39;s not an easy. Filter only your process events and look for <code>QueryOpen</code> and <code>CreateFile</code> events with <code>NAME NOT FOUND</code> result."}], "tags": [], "owner": {"reputation": 5956, "user_id": 1249472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7d2ac9163237829d11cbf4ee7d563d?s=128&d=identicon&r=PG", "display_name": "Nikita", "link": "https://stackoverflow.com/users/1249472/nikita"}, "is_accepted": false, "score": 0, "last_activity_date": 1479328538, "creation_date": 1479328538, "answer_id": 40641806, "question_id": 40641645, "link": "https://stackoverflow.com/questions/40641645/dll-suddenly-not-loading-c-uwp/40641806#40641806", "title": "DLL Suddenly Not Loading C# UWP", "body": "<p>Use <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">Dependency Walker</a> to check dependencies of your <code>AVEngine.dll</code>. Probably some of them missing and because of it Dll cannot be loaded. </p>\n\n<p>Better proper approach to expose old functionality to your modern C# UWP application is to wrap <code>AVEngine.dll</code> logic using a WinRT component. Then you can reference this component in UWP application. Article <a href=\"https://msdn.microsoft.com/en-us/library/mt186162.aspx\" rel=\"nofollow noreferrer\">\"Use Existing C++ Code in a Universal Windows Platform App\"</a> could be helpful.</p>\n"}], "owner": {"reputation": 311, "user_id": 2058705, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4f80abf6038d35ca3c33b7dbed173e26?s=128&d=identicon&r=PG", "display_name": "Sixjac", "link": "https://stackoverflow.com/users/2058705/sixjac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479328685, "creation_date": 1479327942, "last_edit_date": 1479328685, "question_id": 40641645, "link": "https://stackoverflow.com/questions/40641645/dll-suddenly-not-loading-c-uwp", "title": "DLL Suddenly Not Loading C# UWP", "body": "<p>I put a dll build in native C++ as a Universal DLL in my project directory of C# UWP app and setting content to copy always it was finding it and then the next day suddenly nothing, constantly getting:</p>\n\n<blockquote>\n  <p>\"Unable to load DLL 'AVEngine.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E)\"</p>\n</blockquote>\n\n<p>I am calling with:</p>\n\n<pre><code>[DllImport(DLLName, CallingConvention = CallingConvention.Cdecl)]\nprivate static extern int OpenForProcessing();\n</code></pre>\n\n<p>I ensured the architecture and build config matches, I have also checked SDK versions (min/target versions), I'm stumped. </p>\n"}, {"tags": ["c++", "multithreading", "sockets", "udp", "unreal-engine4"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1479375502, "post_id": 40641591, "comment_id": 68533906, "body": "You have not been clear. You are denying in comments the existence of a <code>while</code> loop that you have plainly posted in your question."}, {"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1479375748, "post_id": 40641591, "comment_id": 68534088, "body": "Ah, I apologize, i created this question late at night, and pasted the wrong code block. I have updated to the <code>if</code> loop that should be there."}], "answers": [{"comments": [{"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1479374307, "post_id": 40645211, "comment_id": 68533070, "body": "Hi, thanks for your answer, i am sorry, i had a typo in my question, <code>buffer</code> should have been <code>ReceivedData</code>."}], "tags": [], "owner": {"reputation": 1120, "user_id": 4623418, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZIVAuvNP8WE/AAAAAAAAAAI/AAAAAAAAAEw/zzuok1S9_ZM/photo.jpg?sz=128", "display_name": "Bas in het Veld", "link": "https://stackoverflow.com/users/4623418/bas-in-het-veld"}, "is_accepted": false, "score": 1, "last_activity_date": 1479345759, "creation_date": 1479345759, "answer_id": 40645211, "question_id": 40641591, "link": "https://stackoverflow.com/questions/40641591/c-streaming-udp-data-into-a-queue/40645211#40645211", "title": "c++ streaming udp data into a queue?", "body": "<p>Is this the complete code? ReceivedData isn't used after it's filled with data from the socket. Instead, an (in this code) undefined variable 'buffer' is being used.</p>\n\n<p>Also, it seems that the while loop could run multiple times, overwriting old data in the ReceivedData buffer. Add some debugging messages to see whether RecvFrom actually reads all bytes from the socket. I believe it reads only one 'packet'.</p>\n\n<p>Finally, especially when you're using UDP sockets over the network, note that the UDP protocol isn't guaranteed to actually deliver its packets. However, I doubt this is causing your problems if you're using it on a single computer or a local network.</p>\n"}, {"comments": [{"owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1479374460, "post_id": 40645616, "comment_id": 68533179, "body": "Hi, As stated, this function is called on a <code>Tick</code>, or timer. Therefore, no while loop."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "edited": false, "score": 0, "creation_date": 1479374743, "post_id": 40645616, "comment_id": 68533375, "body": "@anti There is a <code>while</code> loop &#39;as stated&#39; in the code you posted. I can&#39;t comment on code I haven&#39;t seen, but I am commenting accurately on what you posted."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 0, "last_activity_date": 1479348791, "creation_date": 1479348791, "answer_id": 40645616, "question_id": 40641591, "link": "https://stackoverflow.com/questions/40641591/c-streaming-udp-data-into-a-queue/40645616#40645616", "title": "c++ streaming udp data into a queue?", "body": "<p>Your read loop doesn't make sense. You are reading and throwing away all datagrams but the last in any given sequence that happen to be in the socket receive buffer at the same time. The translate call should be inside the loop, and the loop should be <code>while(true)</code>, or <code>while (running)</code>, or similar.</p>\n"}], "owner": {"reputation": 2515, "user_id": 4402282, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/da4a7e4605c83a82650272b0ea4d3401?s=128&d=identicon&r=PG&f=1", "display_name": "anti", "link": "https://stackoverflow.com/users/4402282/anti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1479375694, "creation_date": 1479327706, "last_edit_date": 1479375694, "question_id": 40641591, "link": "https://stackoverflow.com/questions/40641591/c-streaming-udp-data-into-a-queue", "title": "c++ streaming udp data into a queue?", "body": "<p>I am streaming data as a string over UDP, into a Socket class inside Unreal engine. This is threaded, and runs in the background.</p>\n\n<p>My read function is:</p>\n\n<pre><code>float translate;\nvoid FdataThread::ReceiveUDP()\n{\n\n    uint32 Size;\n    TArray&lt;uint8&gt; ReceivedData;\n\n    if (ReceiverSocket-&gt;HasPendingData(Size))\n    {\n        int32 Read = 0;\n        ReceivedData.SetNumUninitialized(FMath::Min(Size, 65507u));\n        ReceiverSocket-&gt;RecvFrom(ReceivedData.GetData(), ReceivedData.Num(), Read, *targetAddr);\n    }\n\n    FString str = FString(bytesRead, UTF8_TO_TCHAR((const UTF8CHAR *)ReceivedData));\n    translate = FCString::Atof(*str);\n\n}\n</code></pre>\n\n<p>I then call the <code>translate</code> variable from another class, on a <code>Tick</code>, or timer.</p>\n\n<p>My test case sends an incrementing number from another application.</p>\n\n<p>If I print this number from inside the above Read function, it looks as expected, counting up incrementally.\nWhen i print it from the other thread, it is missing some of the numbers.</p>\n\n<p>I believe this is because I call it on the Tick, so it misses out some data due to processing time.</p>\n\n<p>My question is:</p>\n\n<p>Is there a way to queue the incoming data, so that when i pull the value, it is the next incremental value and not the current one? What is the best way to go about this?</p>\n\n<p>Thank you, please let me know if I have not been clear.</p>\n"}, {"tags": ["c++", "qt", "char", "type-conversion", "wchar-t"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1479328164, "post_id": 40641572, "comment_id": 68515412, "body": "<code>const char *</code> and <code>const wchar_t *</code> are not the same and not implicitly convertible."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1479328598, "post_id": 40641772, "comment_id": 68515679, "body": "Or just call <code>CreateFileA</code> which will do the conversion for you."}, {"owner": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1479328959, "post_id": 40641772, "comment_id": 68515894, "body": "Thanks for the suggestion, I&#39;ve added this to the answer."}], "tags": [], "owner": {"reputation": 3184, "user_id": 6710751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qmR1W.jpg?s=128&g=1", "display_name": "Striezel", "link": "https://stackoverflow.com/users/6710751/striezel"}, "is_accepted": false, "score": 2, "last_activity_date": 1479328930, "last_edit_date": 1495541401, "creation_date": 1479328400, "answer_id": 40641772, "question_id": 40641572, "link": "https://stackoverflow.com/questions/40641572/cannot-convert-const-char-to-lpcwstr-aka-const-wchar-t/40641772#40641772", "title": "cannot convert &#39;const char*&#39; to &#39;LPCWSTR {aka const wchar_t*}&#39;", "body": "<p><code>const char*</code> and <code>const wchar_t*</code> are two different types with no implicit conversion between them. Therefore, you need to perform the conversion to before passing the value on to the <code>CreateFile</code> function. Take a look at this answer for a possible conversion approach: <a href=\"https://stackoverflow.com/a/3074785/6710751\">https://stackoverflow.com/a/3074785/6710751</a></p>\n\n<p>Alternatively you might just use the <code>CreateFileA</code> function instead of <code>CreateFile</code>, as was suggested by Ben Voigt.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1479328669, "post_id": 40641805, "comment_id": 68515731, "body": "If your datatype is hardcoded as <code>wchar_t*</code>, use <code>CreateFileW</code>.  The <code>CreateFile</code> function macro should only be used together with the <code>TCHAR</code> or <code>LPCTSTR</code> type macros."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1479329204, "post_id": 40641805, "comment_id": 68516032, "body": "@BenVoigt Expanded my answer"}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 4, "last_activity_date": 1553641764, "last_edit_date": 1553641764, "creation_date": 1479328537, "answer_id": 40641805, "question_id": 40641572, "link": "https://stackoverflow.com/questions/40641572/cannot-convert-const-char-to-lpcwstr-aka-const-wchar-t/40641805#40641805", "title": "cannot convert &#39;const char*&#39; to &#39;LPCWSTR {aka const wchar_t*}&#39;", "body": "<p>Try this: </p>\n\n<pre><code>RS232Handle=OpenRS232(L\"COM1\", 9600);\n\nHANDLE OpenRS232(const wchar_t* ComName, DWORD BaudRate)\n{\n    ComHandle=CreateFileW(ComName, GENERIC_READ|GENERIC_WRITE, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);\n}\n</code></pre>\n\n<p>On Windows the wchar_t type is used to represent characters in UTF-16 encoding.  This is what the Windows kernel uses internally and therefore modern versions of Visual C++ default to Unicode functions. If you insist on using the ANSI functions instead (thus going back to your original code), remove the <code>L</code>-prefix from the string \"COM1\" and change the call from <code>CreateFileW</code> to <code>CreateFileA</code>.</p>\n\n<p>Most Windows API functions that deal with strings have both a <code>W</code> and an <code>A</code> version; the only exception that I am aware of is the function <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683212(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>GetProcAddress</code></a> which <em>always</em> takes an ANSI string regardless of whether you're working with ANSI or Unicode in your project.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1479328786, "post_id": 40641839, "comment_id": 68515803, "body": "#5 isn&#39;t a distinct option, it just lets #2, #3, and #4 work when the string contains extended characters."}, {"owner": {"reputation": 1751, "user_id": 1417053, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/fd080dbfb4fdd0a587281fcbd453beff?s=128&d=identicon&r=PG", "display_name": "Cypher", "link": "https://stackoverflow.com/users/1417053/cypher"}, "edited": false, "score": 0, "creation_date": 1604837310, "post_id": 40641839, "comment_id": 114462947, "body": "Changing the Character Set in Visual C++ did the trick for me..."}], "tags": [], "owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "is_accepted": true, "score": 22, "last_activity_date": 1579791927, "last_edit_date": 1579791927, "creation_date": 1479328644, "answer_id": 40641839, "question_id": 40641572, "link": "https://stackoverflow.com/questions/40641572/cannot-convert-const-char-to-lpcwstr-aka-const-wchar-t/40641839#40641839", "title": "cannot convert &#39;const char*&#39; to &#39;LPCWSTR {aka const wchar_t*}&#39;", "body": "<p>The Windows <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858(v=vs.85).aspx\" rel=\"noreferrer\">CreateFile</a> function is actually a macro that expands to one of:</p>\n\n<ul>\n<li><code>CreateFileA</code>, which takes a file path of type <code>const char*</code></li>\n<li><code>CreateFileW</code>, which takes a file path of type <code>const wchar_t*</code>.</li>\n</ul>\n\n<p>(The same is true for most of the functions in the Windows API that take a string.)</p>\n\n<p>You're declaring the parameter <code>const char* ComName</code>, but apparently compiling with <code>UNICODE</code> defined, so it's calling the <code>W</code> version of the function.  There's no automatic conversion from <code>const wchar_t*</code> to <code>const char*</code>, hence the error.</p>\n\n<p>Your options are to:</p>\n\n<ol>\n<li>Change the function parameter to a UTF-16 (<code>const wchar_t*</code>) string.</li>\n<li>Keep the <code>char*</code> parameter, but have your function explicitly convert it to a UTF-16 string with a function like <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd319072(v=vs.85).aspx\" rel=\"noreferrer\">MultiByteToWideChar</a>.</li>\n<li>Explicitly call <code>CreateFileA</code> instead of <code>CreateFile</code>.</li>\n<li>Compile your program without <code>UNICODE</code>, so that the macros expand to the <code>A</code> versions by default.</li>\n<li>Kidnap a prominent Microsoft developer and force him to read <a href=\"http://utf8everywhere.org/\" rel=\"noreferrer\">UTF-8 Everywhere</a> until he agrees to have Windows fully support UTF-8 as an \u201cANSI\u201d code page, thus freeing Windows developers everywhere from this wide-character stuff.</li>\n</ol>\n\n<p><strong>Edit:</strong> I don't know if a kidnapping was involved, but Windows 10 1903 finally added support <a href=\"https://docs.microsoft.com/en-us/windows/uwp/design/globalizing/use-utf8-code-page\" rel=\"noreferrer\">for UTF-8 as an ANSI code page</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "is_accepted": false, "score": 5, "last_activity_date": 1479329311, "creation_date": 1479329311, "answer_id": 40642025, "question_id": 40641572, "link": "https://stackoverflow.com/questions/40641572/cannot-convert-const-char-to-lpcwstr-aka-const-wchar-t/40642025#40642025", "title": "cannot convert &#39;const char*&#39; to &#39;LPCWSTR {aka const wchar_t*}&#39;", "body": "<p>There are many ways of fixing this</p>\n\n<ol>\n<li>Open the project properties, General/Character Set.  This will be set to either Unicode or Multi byte character set.  If you wish to use char* change from Unicode to MBCS.  This will convert CreateFile to CreateFileW if Unicode is specified and CreateFileA if MBCS is specified.</li>\n<li>Enclose all strings in _T() eg _T(\"COM1\").  What this does is to compile the string as a char* if MBCS is specified, wchar_t if unicode is specified</li>\n<li>Force all strings to be wide strings by prefixing with L eg L\"COM1\"</li>\n</ol>\n\n<p>Note that in some error handling routine the strings are specifically MBCS </p>\n"}], "owner": {"reputation": 1793, "user_id": 3285950, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/bb8d232c5ebd5a668197d3b24dd3f62f?s=128&d=identicon&r=PG", "display_name": "sci-guy", "link": "https://stackoverflow.com/users/3285950/sci-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27722, "favorite_count": 3, "accepted_answer_id": 40641839, "answer_count": 4, "score": 10, "last_activity_date": 1608729976, "creation_date": 1479327633, "last_edit_date": 1479335145, "question_id": 40641572, "link": "https://stackoverflow.com/questions/40641572/cannot-convert-const-char-to-lpcwstr-aka-const-wchar-t", "title": "cannot convert &#39;const char*&#39; to &#39;LPCWSTR {aka const wchar_t*}&#39;", "body": "<p>I'm getting an error in my C++ code that I can't quite make sense of. The stripped down code bits are here:</p>\n\n<pre><code>RS232Handle=OpenRS232(\"COM1\", 9600);\n\nHANDLE OpenRS232(const char* ComName, DWORD BaudRate)\n{\n    ComHandle=CreateFile(ComName, GENERIC_READ|GENERIC_WRITE, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);\n}\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>error: cannot convert 'const char*' to 'LPCWSTR {aka const wchar_t*}' for argument '1' to 'void* CreateFileW(LPCWSTR, DWORD, DWORD, LPSECURITY_ATTRIBUTES, DWORD, DWORD, HANDLE)'\n     ComHandle=CreateFile(ComName, GENERIC_READ|GENERIC_WRITE, 0, NULL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, NULL);\n</code></pre>\n\n<p>The code was taken from VS code and I am now using Qt creator. </p>\n\n<p>How can I fix this issue? Thanks!</p>\n"}, {"tags": ["c++", "opengl-es", "fbo"], "comments": [{"owner": {"reputation": 6020, "user_id": 4052193, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6062c93ce987aa90ac59d06e758f03b6?s=128&d=identicon&r=PG&f=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/4052193/columbo"}, "edited": false, "score": 0, "creation_date": 1479327877, "post_id": 40641571, "comment_id": 68515251, "body": "&quot;Then I am doing some conversion from floating-point texture to integer and back to float, this is done to perform bitwise operation on pixels.&quot; My hunch would be that this is the slow bit. What happens if you do a more simple blend as a test (e.g. output the average of the two images)?"}, {"owner": {"reputation": 13, "user_id": 7029596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b944635aa3ed8aa77b03901cd63e35d1?s=128&d=identicon&r=PG&f=1", "display_name": "Ango742", "link": "https://stackoverflow.com/users/7029596/ango742"}, "reply_to_user": {"reputation": 6020, "user_id": 4052193, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6062c93ce987aa90ac59d06e758f03b6?s=128&d=identicon&r=PG&f=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/4052193/columbo"}, "edited": false, "score": 0, "creation_date": 1479328988, "post_id": 40641571, "comment_id": 68515911, "body": "Thanks for your answer, I cannot try it now but I will do it as soon as possible. Is it better to work with floating-point texture or integer or even normalized integer ? (For better performance)"}, {"owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "edited": false, "score": 0, "creation_date": 1479355134, "post_id": 40641571, "comment_id": 68524530, "body": "Some actual code and shaders would help - it&#39;s hard to provide specific advice based on a rather fluffy description ..."}, {"owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "edited": false, "score": 0, "creation_date": 1479901792, "post_id": 40641571, "comment_id": 68751812, "body": "When you&#39;re fetching images from the camera, are they streamed or is it a single image? Usually data from a camera comes in YUV format. If you are converting from YUV to RGB before rendering, this can be a bottle neck too. You can use a YUV to RGB shader to render the image."}, {"owner": {"reputation": 13, "user_id": 7029596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b944635aa3ed8aa77b03901cd63e35d1?s=128&d=identicon&r=PG&f=1", "display_name": "Ango742", "link": "https://stackoverflow.com/users/7029596/ango742"}, "edited": false, "score": 0, "creation_date": 1480925204, "post_id": 40641571, "comment_id": 69148332, "body": "The conversion is already done with shader."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 7029596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b944635aa3ed8aa77b03901cd63e35d1?s=128&d=identicon&r=PG&f=1", "display_name": "Ango742", "link": "https://stackoverflow.com/users/7029596/ango742"}, "is_accepted": true, "score": 0, "last_activity_date": 1479387311, "creation_date": 1479387311, "answer_id": 40655497, "question_id": 40641571, "link": "https://stackoverflow.com/questions/40641571/open-gl-es-how-to-improve-performance-render-to-texture-blending/40655497#40655497", "title": "Open gl es - How to improve performance, render to texture, blending", "body": "<p>Thanks to @Columbo the problem came from all the conversion, I work with floating-point texture and only for the bitwise operations I do the conversion which improve a lot the performance of the algorithm.</p>\n\n<p>Another point which decrease the performance was the texture format. For the first step, the image was 1280x1024 but only on one composent (grayscale image). To keep only the grayscale composant and not to use too much memory I worked with a GL_RED texture but this wasn't a good idea because when I changed it to GL_RGB, I double the framerate of the render too.</p>\n"}], "owner": {"reputation": 13, "user_id": 7029596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b944635aa3ed8aa77b03901cd63e35d1?s=128&d=identicon&r=PG&f=1", "display_name": "Ango742", "link": "https://stackoverflow.com/users/7029596/ango742"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 1, "accepted_answer_id": 40655497, "answer_count": 1, "score": 1, "last_activity_date": 1479387311, "creation_date": 1479327624, "last_edit_date": 1479354912, "question_id": 40641571, "link": "https://stackoverflow.com/questions/40641571/open-gl-es-how-to-improve-performance-render-to-texture-blending", "title": "Open gl es - How to improve performance, render to texture, blending", "body": "<p>I am here because I'm working on an OpenGL program and I have some issues with performance. I work with OpenGL ES 3.0 on iMX6 soc.</p>\n\n<p>Here is my algorithm :</p>\n\n<ol>\n<li><p>I get an image from camera which is directly map to a texture.\nUsing an FBO, I render to texture to map the image on a specific form.</p></li>\n<li><p>I do the same thing (with a second FBO) for another image which is sent via shared memory by another application. This step is performed only if the image is updated. Only once per second.</p></li>\n<li><p>I blend these two textures in the default frame buffer to render the result to the screen.</p></li>\n</ol>\n\n<p>If I perform these three steps separately, It works well and the screen is updated at 30FPS. But when I include the three step in one program the render is very slow and I got only 0.5FPS.</p>\n\n<p>I am wondering if the GPU on the iMX6 is enough powerful, but I think it is not a complex algorithm. I think I am doing something in the wrong way, but what?\nI use 3 different frame buffers, so is that a good way or should I use only one?</p>\n\n<p>Can someone give me answer, clues, anything that can help me? :-)</p>\n\n<p>My images dimensions are 1280x1024 x RGBA. Then I am doing some conversion from floating-point texture to integer and back to float, this is done to perform bitwise operation on pixels.</p>\n"}, {"tags": ["c++", "string", "uppercase", "lowercase"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1479327464, "post_id": 40641468, "comment_id": 68514994, "body": "<a href=\"https://en.wikipedia.org/wiki/Exclusive_or\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Exclusive_or</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 15, "creation_date": 1479327533, "post_id": 40641468, "comment_id": 68515044, "body": "Don&#39;t worry about not understanding it.  It is not portable and should not be used."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 14, "creation_date": 1479327626, "post_id": 40641468, "comment_id": 68515105, "body": "Even for ASCII only, it rather <i>toggles</i> case and does bad things to characters other than alphabetic."}, {"owner": {"reputation": 1238, "user_id": 3396666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BESyQ.jpg?s=128&g=1", "display_name": "magic-sudo", "link": "https://stackoverflow.com/users/3396666/magic-sudo"}, "edited": false, "score": 0, "creation_date": 1479327655, "post_id": 40641468, "comment_id": 68515122, "body": "<a href=\"http://www.asciitable.com/index/asciifull.gif\" rel=\"nofollow noreferrer\">asciitable.com/index/asciifull.gif</a> here have a look at the ASCII table. <code>a</code> value in <code>dec</code> is 97, <code>A</code> value in <code>dec</code> is 65. The difference is 32."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1479328726, "post_id": 40641468, "comment_id": 68515771, "body": "@NathanOliver &quot;it is not portable&quot; is a bit of an exaggeration - it works for the ASCII letters A-Z, and there are lots of applications where that&#39;s an acceptable limitation. If you ran into this code that someone else wrote, wouldn&#39;t <i>you</i> like an explanation of what it&#39;s doing?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1479329059, "post_id": 40641468, "comment_id": 68515946, "body": "@MarkRansom Sure if you know that your use case is only going to be ASCII then it is not an issue but that should be documented in the code.  You should document when you place a limit on the cases something will work in when the C++  standard places no limit.  Also I do not think that there is any exaggeration in my statement.  C++ doesn&#39;t even require ASCII to be used or that characters are sequential."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479329317, "post_id": 40641468, "comment_id": 68516099, "body": "It&#39;s just an overly &quot;clever&quot; code trick that sacrifices a little portability to accomplish nothing. That&#39;s a very bad tradeoff."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1479329596, "post_id": 40641468, "comment_id": 68516259, "body": "@NathanOliver I didn&#39;t say you were <i>wrong</i>, of course the standard does not mandate ASCII. But when&#39;s the last time you used a system that didn&#39;t? And if I were working with a string that was already guaranteed to consist solely of upper-case ASCII characters, I certainly wouldn&#39;t add extra documentation for that one line of code, it would just be noise. I certainly agree that there are better methods available, however."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479329674, "post_id": 40641468, "comment_id": 68516294, "body": "@ChristianHackl in the olden days, this kind of code was common. It&#39;s useful to know why it works, because that will inform you when it doesn&#39;t."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1479329851, "post_id": 40641468, "comment_id": 68516406, "body": "@MarkRansom: Of course, the knowledge can&#39;t hurt. Still, a lot of things were different in the olden days, not all of them for the better."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1479333228, "post_id": 40641468, "comment_id": 68518111, "body": "@MarkRansom In the <i>olden days</i> we had <i>punch cards</i> around :P (And even EBCDIC was around prior to ASCII IIRC)"}, {"owner": {"reputation": 131, "user_id": 5008586, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-7SuCJDiGS90/AAAAAAAAAAI/AAAAAAAAAGw/6mdbz09TK3Q/photo.jpg?sz=128", "display_name": "Rashed Sami", "link": "https://stackoverflow.com/users/5008586/rashed-sami"}, "edited": false, "score": 0, "creation_date": 1479334440, "post_id": 40641468, "comment_id": 68518679, "body": "PLZZ give me an example thats how i can understand it easily"}, {"owner": {"reputation": 18759, "user_id": 2226988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c6fbec3a71b2e95e4a6e41478deb379?s=128&d=identicon&r=PG", "display_name": "Tom Blodget", "link": "https://stackoverflow.com/users/2226988/tom-blodget"}, "edited": false, "score": 0, "creation_date": 1479341461, "post_id": 40641468, "comment_id": 68521156, "body": "So, <code>toupper()</code> is a single line because all it needs to account for is ASCII?!!! Of course, not. You aren&#39;t using ASCII, you are using ISO-8859-1 or something else. What does this code trick do to &#255; and &#223;?"}], "answers": [{"comments": [{"owner": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 3, "creation_date": 1479327670, "post_id": 40641578, "comment_id": 68515138, "body": "Code like this should never be used."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1479327682, "post_id": 40641578, "comment_id": 68515144, "body": "It only works with letters in the ASCII code.  Try it with other symbols."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1479327701, "post_id": 40641578, "comment_id": 68515152, "body": "And it works nicely only with alphabetic characters. It will do crazy things to others."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 1238, "user_id": 3396666, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BESyQ.jpg?s=128&g=1", "display_name": "magic-sudo", "link": "https://stackoverflow.com/users/3396666/magic-sudo"}, "edited": false, "score": 2, "creation_date": 1479327743, "post_id": 40641578, "comment_id": 68515173, "body": "@magic-sudo: There are a lot of ASCII characters besides a-z and A-Z."}, {"owner": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 1, "creation_date": 1479327750, "post_id": 40641578, "comment_id": 68515177, "body": "It will probably lead to hard to trace bugs later on."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479328345, "post_id": 40641578, "comment_id": 68515528, "body": "You should make it clear that lowercase and uppercase letters are 32 positions apart <i>only</i> if ASCII or something compatible is being used, and the C++ standard does not guarantee that."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479328538, "post_id": 40641578, "comment_id": 68515649, "body": "@ChristianHackl I&#39;ve written it only works with ASCII, but didn&#39;t mention the standard because it does not talk about character encodings at all."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1479328638, "post_id": 40641578, "comment_id": 68515709, "body": "@alain: Well, that&#39;s my point. You talk about the 32 positions before hinting that ASCII cannot be assumed. Which, to a beginner, may sound as if the statement <i>&quot;lower and upper case letters are 32 positions apart&quot;</i> is universally correct in C++."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 0, "creation_date": 1479328790, "post_id": 40641578, "comment_id": 68515808, "body": "@EmmanuelMathi-Amorim &quot;never be used&quot; is more useful if you propose an alternative."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479329224, "post_id": 40641578, "comment_id": 68516044, "body": "@alain THX for the flowers. I appreciate your answer explains the underlying mechanics."}, {"owner": {"reputation": 131, "user_id": 5008586, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-7SuCJDiGS90/AAAAAAAAAAI/AAAAAAAAAGw/6mdbz09TK3Q/photo.jpg?sz=128", "display_name": "Rashed Sami", "link": "https://stackoverflow.com/users/5008586/rashed-sami"}, "edited": false, "score": 0, "creation_date": 1479334424, "post_id": 40641578, "comment_id": 68518674, "body": "PLZZ give me an example thats how i can understand it easily"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "reply_to_user": {"reputation": 131, "user_id": 5008586, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-7SuCJDiGS90/AAAAAAAAAAI/AAAAAAAAAGw/6mdbz09TK3Q/photo.jpg?sz=128", "display_name": "Rashed Sami", "link": "https://stackoverflow.com/users/5008586/rashed-sami"}, "edited": false, "score": 1, "creation_date": 1479335872, "post_id": 40641578, "comment_id": 68519298, "body": "@RashedSami For example, &#39;A&#39; has the number 65. <code>^= 32</code> has the effect of adding 32 to 65 = 97. 97 is the number for &#39;a&#39;. You could read about <a href=\"https://en.wikipedia.org/wiki/Exclusive_or\" rel=\"nofollow noreferrer\">exclusive or</a> and <a href=\"https://en.wikipedia.org/wiki/Binary_number\" rel=\"nofollow noreferrer\">binary</a> on wikipedia. Skip the history parts, start reading at &#39;Computer science&#39; and &#39;Counting in binary&#39;. Or else please say what exactly you don&#39;t understand."}], "tags": [], "owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 20, "last_activity_date": 1479329125, "last_edit_date": 1479329125, "creation_date": 1479327642, "answer_id": 40641578, "question_id": 40641468, "link": "https://stackoverflow.com/questions/40641468/how-does-si-32-convert-upper-to-lower-case/40641578#40641578", "title": "How does s[i]^=32 convert upper to lower case?", "body": "<p><code>^=</code> is the <a href=\"https://en.wikipedia.org/wiki/Exclusive_or\" rel=\"nofollow noreferrer\">exclusive-or</a> assignment operator. 32 is 100000 in binary, so <code>^= 32</code> switches the fifth bit in the destination. In ASCII, lower and upper case letters are 32 positions apart, so this converts lower to upper case, and also the other way.</p>\n\n<p>But it only works for ASCII, not for Unicode for example, and only for letters. To write portable C++, you should not assume the character encoding to be ASCII, so please don't use such code. @\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6s answer shows a way to do it properly.</p>\n"}, {"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1479329271, "post_id": 40641829, "comment_id": 68516072, "body": "<code>ctype</code> is a class template, not a class, and <code>tolower()</code> is a non-static member function."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1479329590, "post_id": 40641829, "comment_id": 68516256, "body": "@Barry THX for pointing that out. Fixed to fall back to the straight c version. (well that invalidates <i>&quot;Any sane and portable c++ application&quot;</i> a bit now)."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1479329741, "post_id": 40641829, "comment_id": 68516337, "body": "After all, this is C++. Why wouldn&#39;t we have <a href=\"http://en.cppreference.com/w/cpp/string/byte/tolower\" rel=\"nofollow noreferrer\">three</a>  <a href=\"http://en.cppreference.com/w/cpp/locale/tolower\" rel=\"nofollow noreferrer\">different</a> <a href=\"http://en.cppreference.com/w/cpp/locale/ctype/tolower\" rel=\"nofollow noreferrer\">functions</a> named <code>tolower()</code>. I guess 4 if you count the range overload of the <code>ctype</code> one."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1479331568, "post_id": 40641829, "comment_id": 68517280, "body": "Portable code would be <code>s[i] = tolower( (unsigned char)s[i] )</code> or <code>s[i] = tolower( s[i], std::locale() );</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479332060, "post_id": 40641829, "comment_id": 68517545, "body": "^@M.M Adopted your 1st version."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 131, "user_id": 5008586, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-7SuCJDiGS90/AAAAAAAAAAI/AAAAAAAAAGw/6mdbz09TK3Q/photo.jpg?sz=128", "display_name": "Rashed Sami", "link": "https://stackoverflow.com/users/5008586/rashed-sami"}, "edited": false, "score": 0, "creation_date": 1479334820, "post_id": 40641829, "comment_id": 68518846, "body": "@RashedSami <i>&quot;PLZZ give me an example&quot;</i> There are already examples (check the links as well). I don&#39;t get what you don&#39;t understand from all the reference material given in the answers to your question. <code>s[i]=s[i]^32</code> does an <i>exclusive or</i> bitwise operation for <code>s[i]</code> and <code>32</code>. This relies on the specific layout of the ASCII character table, and the relation of upper and lower case characters ordered in it."}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 0, "creation_date": 1479342084, "post_id": 40641829, "comment_id": 68521344, "body": "Still not correct if you want your program to work for non-English text.  Case transformations may change the length of a string (e.g., German <code>&#223;</code> uppercases to <code>SS</code>) or be context-sensitive (e.g., Greek <code>\u03a3</code> lowercases to <code>\u03c2</code> at the end of a word but <code>\u03c3</code> elsewhere).  It would have made more sense for C++ to have casing functions that work on whole <code>std::string</code> objects.  With a locale argument, of course, because it has to deal with the fact that Turkish has <code>I</code>/<code>\u0131</code> and <code>\u0130</code>/<code>i</code> case pairs, in contrast to other Latin-script languages that use <code>I</code>/<code>i</code>."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 16, "last_activity_date": 1479338468, "last_edit_date": 1479338468, "creation_date": 1479328605, "answer_id": 40641829, "question_id": 40641468, "link": "https://stackoverflow.com/questions/40641468/how-does-si-32-convert-upper-to-lower-case/40641829#40641829", "title": "How does s[i]^=32 convert upper to lower case?", "body": "<blockquote>\n  <p>How does it work?</p>\n</blockquote>\n\n<p>Let's see for ASCII value <code>'A'</code>:</p>\n\n<p><code>'A'</code> is binary <code>1000001</code></p>\n\n<p>XORed with 32 (binary <code>100000</code>)</p>\n\n<p>yields any value where the upper character indicating bit isn't set:</p>\n\n<p><code>1000001</code>\nXOR\n<code>100000</code>\n= <code>1100001</code> == <code>'a'</code> in ASCII.</p>\n\n<hr>\n\n<p>Any sane and portable c or c++ application should use <a href=\"http://en.cppreference.com/w/cpp/string/byte/tolower\" rel=\"nofollow noreferrer\"><code>tolower()</code></a>:</p>\n\n<pre><code>int main()\n{\n    string s;\n    cout&lt;&lt;\"enter the string :\"&lt;&lt;endl;\n    cin&gt;&gt;s;\n    for (int i=0;i&lt;s.length();i++) s[i] = tolower( (unsigned char)s[i] );\n                                     // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    cout&lt;&lt;\"modified string is : \"&lt;&lt;s&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>The <code>s[i]=s[i]^32</code> (cargo cult) magic, relies on <a href=\"http://www.asciitable.com/index/asciifull.gif\" rel=\"nofollow noreferrer\"><em>ASCII table</em></a> specific mapping to numeric <code>char</code> values.</p>\n\n<p>There are other <code>char</code> code tables like e.g. <a href=\"https://de.wikipedia.org/wiki/Extended_Binary_Coded_Decimal_Interchange_Code\" rel=\"nofollow noreferrer\"><em>EBCDIC</em></a>\n, where the </p>\n\n<pre><code> s[i]=s[i]^32\n</code></pre>\n\n<p>method miserably fails to retrieve the corresponding lower case letters.</p>\n\n<hr>\n\n<p>There's a more sophisticated c++ version of converting to lower case characters shown in the reference documentation page of <a href=\"http://en.cppreference.com/w/cpp/locale/ctype/tolower\" rel=\"nofollow noreferrer\"><code>std::ctype::tolower()</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479329936, "post_id": 40642121, "comment_id": 68516448, "body": "... if your C++ implementation uses ASCII."}, {"owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479329975, "post_id": 40642121, "comment_id": 68516463, "body": "@ChristianHackl I specifically named ASCII as the character set I was talking about in my answer (since it is the same as OP&#39;s question)"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479330018, "post_id": 40642121, "comment_id": 68516494, "body": "Yes, but you failed to mention that perhaps your C++ implementation does not use ASCII at all."}, {"owner": {"reputation": 131, "user_id": 5008586, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-7SuCJDiGS90/AAAAAAAAAAI/AAAAAAAAAGw/6mdbz09TK3Q/photo.jpg?sz=128", "display_name": "Rashed Sami", "link": "https://stackoverflow.com/users/5008586/rashed-sami"}, "edited": false, "score": 0, "creation_date": 1479334400, "post_id": 40642121, "comment_id": 68518662, "body": "PLZZ give me an example thats how i can understand it easily"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 131, "user_id": 5008586, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-7SuCJDiGS90/AAAAAAAAAAI/AAAAAAAAAGw/6mdbz09TK3Q/photo.jpg?sz=128", "display_name": "Rashed Sami", "link": "https://stackoverflow.com/users/5008586/rashed-sami"}, "edited": false, "score": 1, "creation_date": 1479334459, "post_id": 40642121, "comment_id": 68518684, "body": "@RashedSami This answer <i>has</i> an example. Did you read it before commenting?"}], "tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 5, "last_activity_date": 1479329710, "creation_date": 1479329710, "answer_id": 40642121, "question_id": 40641468, "link": "https://stackoverflow.com/questions/40641468/how-does-si-32-convert-upper-to-lower-case/40642121#40642121", "title": "How does s[i]^=32 convert upper to lower case?", "body": "<p>In C++, like its predecessor C, a <code>char</code> is a numeric type.  This is after all how characters are represented on the hardware and these languages don't hide that from you.</p>\n\n<p>In ASCII, letters have the useful property that the difference between an uppercase and a lowercase letter is a single binary bit: the 5th bit (if we start numbering from the right starting at 0).</p>\n\n<p>Uppercase A is represented by the byte <code>0b01000001</code> (<code>0x41</code> in hex), and lowercase a is represented by the byte <code>0b01100001</code> (<code>0x61</code> in hex). Notice that the only difference between uppercase and lowercase A is the fifth bit.  This pattern continues from B to Z.</p>\n\n<p>So, when you do <code>^= 32</code> (which, incidentally, is 2 to the 5th power) on a number that represents an ASCII character, what that does is toggle the 5th bit - if it is 0, it becomes 1, and vice versa, which changes the character from upper to lower case and vice versa.</p>\n"}], "owner": {"reputation": 131, "user_id": 5008586, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-7SuCJDiGS90/AAAAAAAAAAI/AAAAAAAAAGw/6mdbz09TK3Q/photo.jpg?sz=128", "display_name": "Rashed Sami", "link": "https://stackoverflow.com/users/5008586/rashed-sami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1210, "favorite_count": 1, "answer_count": 3, "score": 8, "last_activity_date": 1479350589, "creation_date": 1479327234, "last_edit_date": 1479350589, "question_id": 40641468, "link": "https://stackoverflow.com/questions/40641468/how-does-si-32-convert-upper-to-lower-case", "title": "How does s[i]^=32 convert upper to lower case?", "body": "<pre><code>int main()\n{\n    string s;\n    cout &lt;&lt; \"enter the string :\" &lt;&lt; endl;\n    cin &gt;&gt; s;\n    for (int i = 0; i &lt; s.length(); i++)\n        s[i] ^= 32;\n    cout &lt;&lt; \"modified string is : \" &lt;&lt; s &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>I saw this code which converts uppercase to lowercase on stackoverflow.</p>\n\n<p>But I don't understand the line <code>s[i] = s[i]^32</code>.</p>\n\n<p>How does it work?</p>\n"}, {"tags": ["c++", "optimization", "mpi"], "answers": [{"tags": [], "owner": {"reputation": 1464, "user_id": 6155350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d103f3a98e0e4e220200c8d81e755835?s=128&d=identicon&r=PG&f=1", "display_name": "David Henty", "link": "https://stackoverflow.com/users/6155350/david-henty"}, "is_accepted": true, "score": 1, "last_activity_date": 1479726236, "creation_date": 1479726236, "answer_id": 40718594, "question_id": 40641324, "link": "https://stackoverflow.com/questions/40641324/mpi-allgather-to-send-local-maxima-to-all-processes-bad-termination-of-processe/40718594#40718594", "title": "MPI_ALLgather to send local maxima to all processes, bad termination of processes", "body": "<p>You are not allocating the receive buffer correctly. It needs to be big enough to store 4 entries from every rank. You currently have:</p>\n\n<pre><code>rbuf = (double *)malloc(rank*4*sizeof(double));\n</code></pre>\n\n<p>when it should be</p>\n\n<pre><code>rbuf = (double *)malloc(size*4*sizeof(double));\n</code></pre>\n"}], "owner": {"reputation": 819, "user_id": 4936409, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/455864806ee3a86bd59707bfd347cea3?s=128&d=identicon&r=PG&f=1", "display_name": "bhjghjh", "link": "https://stackoverflow.com/users/4936409/bhjghjh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 40718594, "answer_count": 1, "score": 0, "last_activity_date": 1479726236, "creation_date": 1479326752, "question_id": 40641324, "link": "https://stackoverflow.com/questions/40641324/mpi-allgather-to-send-local-maxima-to-all-processes-bad-termination-of-processe", "title": "MPI_ALLgather to send local maxima to all processes, bad termination of processes", "body": "<p>Hi I wish to find local maxima for all processes and then pass all the local maxima to all processes to make a single array, then use the MPI ring topology to compare the local maxima and then finally output the global maxima. </p>\n\n<p>I can do MPI_ALLreduce more efficiently and already did that, but I want to test efficiency of the ring topology and produce the same result as allreduce. \nI was following a tutorial to use MPI_Allgather and it returns me some bad error. THe code is as follows:</p>\n\n<pre><code>int main(int argc, char **argv)\n{    \n\n    int rank, size;\n\n    MPI_Init (&amp;argc, &amp;argv);      // initializes MPI\n    //MPI_Comm comm;\n    double max_store[4];\n    double *rbuf;\n    //MPI_Comm_size( comm, &amp;rank);\n    MPI_Comm_rank (MPI_COMM_WORLD, &amp;rank); // get current MPI-process ID. O, 1, ...\n    MPI_Comm_size (MPI_COMM_WORLD, &amp;size); // get the total number of processes\n\n\n    /* define how many integrals */\n    const int n = 10;       \n\n    double b[n] = {5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0,5.0};                    \n    double a[n] = {-5.0, -5.0, -5.0, -5.0, -5.0, -5.0, -5.0, -5.0, -5.0,-5.0};  \n\n    double result, mean;\n    int m;\n\n    const unsigned int N = 5;\n    double max = -1;\n\n\n\n    cout.precision(6);\n    cout.setf(ios::fixed | ios::showpoint); \n\n\n    srand(time(NULL) * rank);  // each MPI process gets a unique seed\n\n    m = 4;                // initial number of intervals\n\n    // convert command-line input to N = number of points\n    //N = atoi( argv[1] );\n\n\n    for (unsigned int  i=0; i &lt;=N; i++)\n    {\n        result = int_mcnd(f, a, b, n, m);\n        mean = result/(pow(10,10));\n\n        m = m*4; \n        if( mean &gt; max) \n        {\n         max = mean;\n        }\n\n\n    }\n    //if ( rank &lt; 4 &amp;&amp; rank &gt;= 0 ) \n        //{\n         //max_store[rank] = max;\n        //}\n\n\n\n\n\n    printf(\"Process ID %i, local_max = %f\\n\",rank, max);\n\n\n    // All processes get the global max, stored in place of the local max\n    MPI_Allreduce( MPI_IN_PLACE, &amp;max, 1, MPI_DOUBLE, MPI_MAX, MPI_COMM_WORLD );\n\n    printf(\"Process ID %d, global_max = %f\\n\",rank, max);\n\n    rbuf = (double *)malloc(rank*4*sizeof(double)); \n    MPI_Allgather( max_store, 4, MPI_DOUBLE, rbuf, 4, MPI_DOUBLE, MPI_COMM_WORLD);\n    //print the array containing max from each processor\n    //int k;    \n    //for( int k = 0; k &lt; 4; k++ )\n    //{\n     //printf( \"%1.5e\\n\", max_store[k]);\n    //}\n\n\n\n   double send_junk = max_store[0];\n   double rec_junk;\n    //double global_max;\n    MPI_Status status;\n\n  if(rank==0) \n  {\n    MPI_Send(&amp;send_junk, 4, MPI_DOUBLE, 1, 0, MPI_COMM_WORLD); //  send data to process 1\n  }\n  if(rank==1) \n  {\n    MPI_Recv(&amp;rec_junk, 4, MPI_DOUBLE, 0, 0, MPI_COMM_WORLD, &amp;status); // receive data from process 0\n  }\n  //check between process 0 and process 1 maxima\n  if(rec_junk&gt;=max_store[1])\n  {\n   rec_junk = max_store[0];\n  }\n  else\n  {\n   rec_junk = max_store[1];\n  }\n  send_junk = rec_junk;\n\n  MPI_Send(&amp;send_junk, 4, MPI_DOUBLE, 2, 0, MPI_COMM_WORLD); //  send data to process 2\n\n  if(rank==2)\n  {\n   MPI_Recv(&amp;rec_junk, 4, MPI_DOUBLE, 1, 0, MPI_COMM_WORLD, &amp;status); // receive data from process 1\n  }\n  //check between process 1 and process 2 maxima\n  if(rec_junk&gt;=max_store[2])\n  {\n   rec_junk = rec_junk;\n  }\n  else\n  {\n   rec_junk = max_store[2];\n  }\n  send_junk = rec_junk;\n\n  MPI_Send(&amp;send_junk, 4, MPI_DOUBLE, 3, 0, MPI_COMM_WORLD); //  send data to process 3\n\n  if(rank==3)\n  {\n   MPI_Recv(&amp;rec_junk, 4, MPI_DOUBLE, 2, 0, MPI_COMM_WORLD, &amp;status); // receive data from process 2\n  }\n  //check between process 2 and process 3 maxima \n  if(rec_junk&gt;=max_store[3])\n  {\n   rec_junk = rec_junk;\n  }\n  else\n  {\n   rec_junk = max_store[3];\n  }\n\n\n  printf(\"global ring max = %f\", rec_junk); \n\n\n  MPI_Finalize(); // programs should always perform a \"graceful\" shutdown\n\n  return 0;\n}\n</code></pre>\n\n<p>I am interested to know how to send the maximas in a single array and all the processes will have access to it, so that I can compare the values in a ring topology. thanks very much.</p>\n"}, {"tags": ["c++", "visual-c++", "command-line-arguments", "argv", "argc"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1479326859, "post_id": 40641319, "comment_id": 68514675, "body": "No. You can only use the forms the hosting environment explicitly supports."}, {"owner": {"reputation": 1315, "user_id": 3331879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Rto4V.jpg?s=128&g=1", "display_name": "davidhood2", "link": "https://stackoverflow.com/users/3331879/davidhood2"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1479326916, "post_id": 40641319, "comment_id": 68514700, "body": "Is there any information on where/what these are?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1479326963, "post_id": 40641319, "comment_id": 68514727, "body": "Yes, see <a href=\"http://en.cppreference.com/w/cpp/language/main_function\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1479327010, "post_id": 40641319, "comment_id": 68514748, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/88w63h9k.aspx\" rel=\"nofollow noreferrer\">This link</a>"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1479327111, "post_id": 40641319, "comment_id": 68514805, "body": "@CaptainObvlious it doesn&#39;t say <code>main</code> can be defined however <i>we</i> want. Only that a hosting environment <i>may</i> provide other options"}, {"owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 0, "creation_date": 1479327117, "post_id": 40641319, "comment_id": 68514808, "body": "As an additional, have you tried making a simple program using <code>int main(int argc, string argv[])</code> or <code>int main(vector&lt;string&gt; args)</code> as the <code>main</code> function and see what the results are?"}, {"owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 0, "creation_date": 1479327629, "post_id": 40641319, "comment_id": 68515109, "body": "Technically, <code>int main(int argc, std::vector&lt;std::string&gt; argv) { for (int i = 0; i &lt; argc; ++i) { std::cout &lt;&lt; argv[i] &lt;&lt; std::endl; } return 0; }</code> compiles and runs, but it doesn&#39;t produce what you think it would ..."}, {"owner": {"reputation": 1315, "user_id": 3331879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Rto4V.jpg?s=128&g=1", "display_name": "davidhood2", "link": "https://stackoverflow.com/users/3331879/davidhood2"}, "reply_to_user": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 0, "creation_date": 1479329068, "post_id": 40641319, "comment_id": 68515953, "body": "@txtechhelp Have tried both my examples, and yours - they all compile and then throw an error to do with objects not being initialised. I&#39;m guessing that would be VS15 way of saying it cant be defined that way"}, {"owner": {"reputation": 5996, "user_id": 1152524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b2e23f3f9bf82e6fe806261f50b2f9b6?s=128&d=identicon&r=PG&f=1", "display_name": "txtechhelp", "link": "https://stackoverflow.com/users/1152524/txtechhelp"}, "edited": false, "score": 0, "creation_date": 1479344244, "post_id": 40641319, "comment_id": 68521924, "body": "@davidhood2 .. the objects aren&#39;t initialized because they&#39;re essentially being casted from <code>char*[]</code> to <code>std::string[]</code> which is undefined behavior. That code will compile on just about any C++ compiler (<code>gcc</code> as well). The <code>main</code> function has a specific definition that the compiler builds out that the kernel can then call when it needs to execute, thus you&#39;re forcing the <code>main</code> function to do something that is not standard."}], "owner": {"reputation": 1315, "user_id": 3331879, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Rto4V.jpg?s=128&g=1", "display_name": "davidhood2", "link": "https://stackoverflow.com/users/3331879/davidhood2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1479327107, "answer_count": 0, "score": 0, "last_activity_date": 1479326739, "creation_date": 1479326739, "question_id": 40641319, "link": "https://stackoverflow.com/questions/40641319/type-definition-of-command-line-arguments-argc-argv-args", "closed_reason": "Duplicate", "title": "Type definition of command line arguments (argc, argv, args)", "body": "<p>I'm using C++/CLR .NET, and defining a main.</p>\n\n<p>In C, I would use the normal</p>\n\n<pre><code>int main(int argc, char* argv[]) //Typical for C, works for C++\n</code></pre>\n\n<p>However, being .NET I've also seen</p>\n\n<pre><code>int main(array&lt;System::String ^&gt; ^args) //Managed .NET array type \n</code></pre>\n\n<p>How far can I take this? Can I place the command line arguments into nearly any structure I feel like? For example...</p>\n\n<pre><code> int main(int argc, string argv[]) //More useful if I want strings anyway\n int main(vector&lt;string&gt; args)\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "encryption", "openssl", "cryptography"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1479326290, "post_id": 40640979, "comment_id": 68514339, "body": "Not the source of your problem, but; your code could benefit a great deal from using modern C++ - things like <code>auto</code>, smart pointers (<code>std::unique_ptr</code> &amp; <code>std::shared_ptr</code>) and range-for. Instead of manually typing types all over the place and managing memory by hand, etc. Just a tip :)"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1479326314, "post_id": 40640979, "comment_id": 68514351, "body": "I would start with a Know Answer Test (KAT), likes <a href=\"http://csrc.nist.gov/groups/STM/cavp/documents/aes/AESAVS.pdf\" rel=\"nofollow noreferrer\">this one</a> from NIST.  See section 6.2.  That will allow you to tell which answer is correct.  I <i>suspect</i> you have memory overwriting issues, and the checks are causing different bits of memory to get clobbered.  Step through the broken version (probably Release), and work out where the problem lies.  (You do know you can run Release code under the debugger?)"}, {"owner": {"reputation": 2303, "user_id": 2175231, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4I57P.png?s=128&g=1", "display_name": "Wasabi", "link": "https://stackoverflow.com/users/2175231/wasabi"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1479326963, "post_id": 40640979, "comment_id": 68514726, "body": "@JesperJuhl Thanks for the tips. I actually do use such techniques (all hail range-for) in my main code. In regards to <code>auto</code> I actually changed my code to post it here to make it more explicit. And yeah, I could have used smart pointers for cipher_buf, I suppose. But how could I have used a range-for to populate cipher_buf, without an iterator? That&#39;s one trick I&#39;d love to learn."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1479328243, "post_id": 40640979, "comment_id": 68515462, "body": "You program has problems beyond debug and release. AES has a forward and reverse direction. You should be using <code>EVP_EncryptInit</code>, <code>EVP_EncryptUpdate</code> and <code>EVP_EncryptFinal</code> for encryption; and <code>EVP_DecryptInit</code>, <code>EVP_DecryptUpdate</code> and <code>EVP_DecryptFinal</code> for decryption. Also see <a href=\"https://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">EVP Symmetric Encryption and Decryption</a> on the OpenSSL wiki."}, {"owner": {"reputation": 2303, "user_id": 2175231, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4I57P.png?s=128&g=1", "display_name": "Wasabi", "link": "https://stackoverflow.com/users/2175231/wasabi"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1479335051, "post_id": 40640979, "comment_id": 68518970, "body": "@jww I&#39;ll take a look at those. I based my code on what I found on <a href=\"http://stackoverflow.com/q/24856303/2175231\">this answer</a>, which only uses Encrypt."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1479348815, "post_id": 40640979, "comment_id": 68523147, "body": "@Wasabi - The question you cited uses <code>EVP_EncryptInit</code>, <code>EVP_EncryptUpdate</code> and <code>EVP_EncryptFinal</code> for encryption; and <code>EVP_DecryptInit</code>, <code>EVP_DecryptUpdate</code> and <code>EVP_DecryptFinal</code> for decryption. In any case, do what the OpenSSL team tells you to do."}], "owner": {"reputation": 2303, "user_id": 2175231, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/4I57P.png?s=128&g=1", "display_name": "Wasabi", "link": "https://stackoverflow.com/users/2175231/wasabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479325560, "creation_date": 1479325560, "last_edit_date": 1495541236, "question_id": 40640979, "link": "https://stackoverflow.com/questions/40640979/openssl-encryption-in-debug-and-release", "title": "OpenSSL Encryption in Debug and Release", "body": "<p>I have the following code (modified <code>ik</code> and <code>iv</code>, of course):</p>\n\n<pre><code>#include \"openssl/evp.h\"\n\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n\nusing std::cout;\nusing std::endl;\nusing std::string;\nusing std::ostringstream;\n\nvoid Encryption(bool encrypt, const string &amp;in, string &amp;out)\n{\n    int ik[17] = {  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16 };\n    int iv[17] = { 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32 };\n    ik[16] = iv[16] = '\\0';\n    unsigned char ckey[17], ivec[17];\n    for (int i = 0; i &lt; 16; ++i)\n    {\n        ckey[i] = ik[i];\n        ivec[i] = iv[i];\n    }\n    EVP_CIPHER_CTX *ctx = EVP_CIPHER_CTX_new();\n    EVP_CipherInit(ctx, EVP_aes_256_cbc(), ckey, ivec, encrypt);\n    unsigned blocksize = EVP_CIPHER_CTX_block_size(ctx);\n\n    int out_len;\n    int n = in.length() + blocksize;\n    unsigned char *cipher_buf = new unsigned char[n];\n    for (int i = 0; i &lt; n; ++i)\n        cipher_buf[i] = ' ';\n    EVP_CipherUpdate(ctx, cipher_buf, &amp;out_len,\n                     (const unsigned char*)in.c_str(), in.length());\n    std::ostringstream ss;\n    ss.write((char*)cipher_buf, out_len);\n    EVP_CipherFinal(ctx, cipher_buf, &amp;out_len);\n    ss.write((char*)cipher_buf, out_len);\n    delete cipher_buf;\n    out = ss.str();\n    EVP_CIPHER_CTX_free(ctx);\n}    \n\nint main()\n{\n    string out;\n    string in = \"TEST\";\n    string back;\n    Encryption(true, in, out);\n    cout &lt;&lt; \"---------------\" &lt;&lt; endl;\n    Encryption(false, out, back);\n    cout &lt;&lt; \"TEST &gt; \" &lt;&lt; out &lt;&lt; \" &gt; \" &lt;&lt; back &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Basically, this code encrypts a string, decrypts it and then prints out the result from both steps.</p>\n\n<p>If I run this code in Debug, it works just fine, outputting <code>TEST &gt; *gibberish A* &gt; TEST</code>. If I run it on Release, however, it fails, printing only <code>TEST &gt; *gibberish B (not A)* &gt;</code>, because <code>back</code> remains empty. Seeing <a href=\"https://stackoverflow.com/questions/1998684/aes-encryption-problem-in-debug-and-release-mode\">this question</a> and another one I can't find now, I made a copy of my Release configuration and went changing one parameter at a time to the equivalent value in the Debug configuration. When I changed <code>Configuration Properties &gt; C/C++ &gt; Code Generation &gt; Basic Runtime Checks</code> from <code>Default</code> to <code>Both (/RTC1, equiv. to /RTCsu) (/RTC1)</code>, this new Release configuration worked, printing exactly the same values as in the Debug configuration. Obviously, by then I'd already changed many other parameters, but it was only when I changed the value of <code>/RTC</code> that any change was clear in the execution.</p>\n\n<p>I also noticed something else. If I removed the <code>cout &lt;&lt; \"---------------\" &lt;&lt; endl;</code> line in <code>main()</code>, the default Release configuration also works, printing <code>TEST &gt; *gibberish C* &gt; TEST</code>. The encryption gibberish is different to both the Debug result and the Release with the <code>cout</code> line. Also, if I place that <code>cout</code> call anywhere other than between my <code>Encryption</code> calls, it works. </p>\n\n<p>So I have two questions I believe may be interrelated:</p>\n\n<ul>\n<li>Why does the value of <code>/RTC</code> affect the encryption result? Given that <code>/RTC</code> should be disabled in Release builds, is it possible to generate equivalent encrypted data (aka gibberish) in both Debug and Release, so as to make them interchangeable, without losing <code>/RTC</code> in Debug?\n\n<ul>\n<li>Why does the use of <code>cout</code> in between my <code>Encryption()</code> calls modify the result in Release mode and only in Release mode?</li>\n</ul></li>\n</ul>\n\n<p>And, should it be worth mentioning, everything is built with the static runtime library (<code>/MT[d]</code>).</p>\n"}, {"tags": ["c++", "cmake", "qt-creator"], "comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1479333150, "post_id": 40640964, "comment_id": 68518076, "body": "Please provide a minimal working example."}, {"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1479333766, "post_id": 40640964, "comment_id": 68518371, "body": "@usr1234567 It works as expected in a small project. I&#39;m not sure what to change to make it more like my large project, so I guess I was looking for ideas of what to poke that might affect something like this."}, {"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "reply_to_user": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1479393584, "post_id": 40640964, "comment_id": 68546527, "body": "@usr1234567 I found the real source of the problem - please see the updated question"}, {"owner": {"reputation": 171, "user_id": 1147662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d9YNn.jpg?s=128&g=1", "display_name": "Andrey Rogozhnikov", "link": "https://stackoverflow.com/users/1147662/andrey-rogozhnikov"}, "edited": false, "score": 0, "creation_date": 1484019856, "post_id": 40640964, "comment_id": 70326357, "body": "And what is the &quot;real source&quot;? How do you make QtCreator show headers as normal includes (not underlined as &quot;File not found&quot;). I see no clear hint to that in the question."}, {"owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "reply_to_user": {"reputation": 171, "user_id": 1147662, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d9YNn.jpg?s=128&g=1", "display_name": "Andrey Rogozhnikov", "link": "https://stackoverflow.com/users/1147662/andrey-rogozhnikov"}, "edited": false, "score": 0, "creation_date": 1484097953, "post_id": 40640964, "comment_id": 70367324, "body": "@AndreyRogozhnikov It&#39;s that the files specified in <code>add_custom_target</code> do not behave correctly, while the files specified in an <code>add_executable</code> (or <code>add_library</code>) do work correctly."}, {"owner": {"reputation": 3109, "user_id": 5471520, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/22f3caaf9178270549a1c486b1587290?s=128&d=identicon&r=PG&f=1", "display_name": "mikkola", "link": "https://stackoverflow.com/users/5471520/mikkola"}, "edited": false, "score": 0, "creation_date": 1510835396, "post_id": 40640964, "comment_id": 81610032, "body": "I had a similar issue with the Pointcloud library (PCL) headers not being correctly looked up in my own header files QTCreator if I used <code>add_custom_target</code>. I was able to resolve the issue by applying <a href=\"https://github.com/sauter-hq/cmake-ide-support\" rel=\"nofollow noreferrer\">this IDE support tool</a> instead."}], "owner": {"reputation": 8839, "user_id": 284529, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/18c27850f3d5b3dd62373e839c3a09ea?s=128&d=identicon&r=PG", "display_name": "David Doria", "link": "https://stackoverflow.com/users/284529/david-doria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 863, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1479393570, "creation_date": 1479325507, "last_edit_date": 1479393570, "question_id": 40640964, "link": "https://stackoverflow.com/questions/40640964/qtcreator-cant-find-headers-for-files-in-add-custom-target", "title": "QtCreator can&#39;t find headers for files in add_custom_target", "body": "<p>I have a CMake project that builds fine in QtCreator (4.1.0). If I add my headers to an <code>add_executable</code>, all is well:</p>\n\n<pre><code>Project(AutoComplete)\n\ninclude_directories(/home/doria/build/HDR-EXT/Install/include/eigen3)\n\nADD_EXECUTABLE(AutoComplete AutoCompleteDemo.cpp AutoComplete.h)\n</code></pre>\n\n<p>That is, the project builds fine, and both in <code>AutoCompleteDemo.cpp</code> and <code>AutoComplete.h</code> the headers are all found by the parser so autocomplete works. However, if I do this:</p>\n\n<pre><code>Project(AutoComplete)\n\ninclude_directories(/home/doria/build/HDR-EXT/Install/include/eigen3)\n\nadd_custom_target(AutoCompleteHeaders SOURCES AutoComplete.h)\n\nADD_EXECUTABLE(AutoComplete AutoCompleteDemo.cpp)\n</code></pre>\n\n<p>the project still builds fine, the headers are still found correctly in <code>AutoComplete.h</code>, but the headers are NOT found in <code>AutoCompleteDemo.cpp</code>.</p>\n\n<p>Below are the two test files:</p>\n\n<p><strong>AutoComplete.h</strong></p>\n\n<pre><code>#include &lt;Eigen/Dense&gt; // this is underlined in yellow in the add_custom_target version\n</code></pre>\n\n<p><strong>AutoCompleteDemo.cpp</strong></p>\n\n<pre><code>#include &lt;Eigen/Dense&gt;\n\nint main()\n{\n    return 0;\n}\n</code></pre>\n\n<p>How can I get the files in the <code>add_custom_target</code> to find the headers.</p>\n"}, {"tags": ["c++", "c++11", "initializer"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1479325353, "post_id": 40640877, "comment_id": 68513800, "body": "You need a <i>conversion constructor</i>, i.e., <code>foo(const std::string&amp; s) : str(s) {}</code>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 4, "creation_date": 1479325374, "post_id": 40640877, "comment_id": 68513808, "body": "The code that&#39;s failing is not &quot;assigning value to the object...&quot; it is attempting to <b>initialize</b> the object, and that requires a constructor."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 2, "creation_date": 1479325528, "post_id": 40640877, "comment_id": 68513900, "body": "You need to build a constructor from a const char*."}], "answers": [{"comments": [{"owner": {"reputation": 344, "user_id": 5588450, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e1eacd5e423e3d8d4b4832926100beee?s=128&d=identicon&r=PG", "display_name": "Abhay Jatin Doshi", "link": "https://stackoverflow.com/users/5588450/abhay-jatin-doshi"}, "edited": false, "score": 0, "creation_date": 1479325877, "post_id": 40640970, "comment_id": 68514079, "body": "any way to make sure that the data will be taken as <code>std::string</code> or <code>const char*</code> or <code>const char[]</code>    because in my case i was thinking that it was accepting the data as a <code>std::string</code> but only now i found out that it is taking as <code>const char*</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 344, "user_id": 5588450, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e1eacd5e423e3d8d4b4832926100beee?s=128&d=identicon&r=PG", "display_name": "Abhay Jatin Doshi", "link": "https://stackoverflow.com/users/5588450/abhay-jatin-doshi"}, "edited": false, "score": 1, "creation_date": 1479326070, "post_id": 40640970, "comment_id": 68514210, "body": "@Encryptor Just added to the answer a constructor that should do what you need."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479326246, "post_id": 40640970, "comment_id": 68514315, "body": "&quot;or needs to be convertable to one of those types&quot; that is incorrect statement"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479326419, "post_id": 40640970, "comment_id": 68514409, "body": "@Slava Yep.  I thought that sounded wrong when I typed it.  Thanks for calling me out on it."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479326542, "post_id": 40640970, "comment_id": 68514487, "body": "@NathanOliver now your last statement is confusing :)"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1479327450, "last_edit_date": 1479327450, "creation_date": 1479325536, "answer_id": 40640970, "question_id": 40640877, "link": "https://stackoverflow.com/questions/40640877/initialise-object-with-equal-operator/40640970#40640970", "title": "initialise object with equal operator", "body": "<p>When you have</p>\n\n<pre><code>type name = something;\n</code></pre>\n\n<p>You are not doing assignment but instead you have <em>copy-initialization</em> (do not that there can be a move even though it is called copy).  This means that you need a constructor in your class whose parameter matches that of the thing on the right hand side of the <code>=</code>.</p>\n\n<p>In this case you do not have a constructor that takes a <code>std::string</code>, <code>const char*</code> or <code>const char[]</code> so the compiler is unable to construct an instance there.</p>\n\n<p>The reason the second case works is that</p>\n\n<pre><code>b = \"but assignment after declaration is working fine\";\n</code></pre>\n\n<p>Is not trying to construct anything and therefore it calls the assignment operator which does work because </p>\n\n<pre><code>\"but assignment after declaration is working fine\"\n</code></pre>\n\n<p>can be converted to a <code>std::string</code>.</p>\n\n<p>If you want your class to be constructable from a string literal or cstring then you can add a constructor to it in the form of</p>\n\n<pre><code>foo(const char* str) : str(str) {}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1479325790, "post_id": 40640977, "comment_id": 68514026, "body": "But then the OP&#39;s code would have to create an anonymous temporary std::string. Perhaps a compiler would optimise that out though?"}, {"owner": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1479325920, "post_id": 40640977, "comment_id": 68514104, "body": "You could also create a move constructor that accepts an <code>std::string</code>. This would solve the problem if you called it with a string literal."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479326084, "post_id": 40640977, "comment_id": 68514220, "body": "Unfortunately, you are wrong, this ctor will not fix OP&#39;s issue"}, {"owner": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479326324, "post_id": 40640977, "comment_id": 68514361, "body": "@Slava You are right that would not work. I updated the post with a constructor that takes a <code>const char*</code>."}], "tags": [], "owner": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "is_accepted": false, "score": 1, "last_activity_date": 1479326269, "last_edit_date": 1479326269, "creation_date": 1479325553, "answer_id": 40640977, "question_id": 40640877, "link": "https://stackoverflow.com/questions/40640877/initialise-object-with-equal-operator/40640977#40640977", "title": "initialise object with equal operator", "body": "<p>Your problem is that</p>\n\n<pre><code>foo a = \"initialization string\";\n</code></pre>\n\n<p>attempts to create an object of type foo however there is no constructor defined that accepts a parameter of type string.</p>\n\n<p>You could define one like this:</p>\n\n<pre><code>foo(const std::string&amp; s) : str(s) {}\nfoo(const char* s) : str(s) {}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479326810, "post_id": 40640996, "comment_id": 68514653, "body": "&quot;Formally, that initialization uses S(int) to create a temporary object of type S&quot; is there any ground for this statement?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479327559, "post_id": 40640996, "comment_id": 68515061, "body": "@Slava -yes, it&#39;s a requirement in the standard. It&#39;s been that way since way before C++ 98."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479327670, "post_id": 40640996, "comment_id": 68515137, "body": "But effect is completely different, if I explicitly create temporary then it will allow conversion, which is not allowed otherwise. See my answer."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479327943, "post_id": 40640996, "comment_id": 68515295, "body": "@Slava - sorry, I have no idea what you&#39;re talking about. The effect of <code>S s = 3;</code> is, formally, exactly what I described. What I left out, for simplicity, is that the compiler is allowed to elide that copy and construct <code>s</code> directly, which is why I used the word &quot;formally&quot;."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479330191, "post_id": 40640996, "comment_id": 68516582, "body": "I mean that <code>S s = 3;</code> and <code>S s = S(3);</code> are different statements with different semantics."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479330506, "post_id": 40640996, "comment_id": 68516743, "body": "Well, sort of; the second explicitly creates a temporary, and copies it into <code>s</code>. But that isn&#39;t the example I gave, which implicitly creates a temporary."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479331468, "post_id": 40640996, "comment_id": 68517229, "body": "But you said that formally it does that, so it can be understood that semantics is the same, which is not true."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479332549, "post_id": 40640996, "comment_id": 68517767, "body": "@Slava -- what, specifically, do you think is incorrect about my statement? &quot;Different semantics&quot; is just handwaving until you explain <b>exactly</b> what you think is different from what. The two statements in your previous comment do the same thing, modulo a copy constructor or two."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479359733, "post_id": 40640996, "comment_id": 68525844, "body": "if OP would define ctor <code>foo( const std::string &amp; )</code> then <code>foo f = foo( &quot;str&quot; );</code> would compile but <code>foo f = &quot;str&quot;;</code>  would not. So it is not the same."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479387893, "post_id": 40640996, "comment_id": 68542326, "body": "@Slava - different isn&#39;t the same. Your latest requires two user-defined conversions (<code>char*</code> to <code>string</code>, <code>string</code> to <code>foo</code>), and that&#39;s why it fails."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1479325630, "creation_date": 1479325630, "answer_id": 40640996, "question_id": 40640877, "link": "https://stackoverflow.com/questions/40640877/initialise-object-with-equal-operator/40640996#40640996", "title": "initialise object with equal operator", "body": "<p>When you create an object, the code <strong>initializes</strong> it with a constructor, even when the creation uses an <code>=</code> sign:</p>\n\n<pre><code>struct S {\n    S(int);\n};\n\nS s = 3; // initialization, not assignment\n</code></pre>\n\n<p>Formally, that initialization uses <code>S(int)</code> to create a temporary object of type <code>S</code>, and then uses the copy constructor to construct the object <code>s</code> from the temporary object.</p>\n\n<p>That's vastly different from assignment, which deals with an already existing object:</p>\n\n<pre><code>S s1;\ns1 = 3; // assignment\n</code></pre>\n\n<p>Here, the assignment would use the assignment operator if <code>S</code> defined one. That's why the <code>b =</code> line in the original code works.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1479327167, "creation_date": 1479327167, "answer_id": 40641441, "question_id": 40640877, "link": "https://stackoverflow.com/questions/40640877/initialise-object-with-equal-operator/40641441#40641441", "title": "initialise object with equal operator", "body": "<p>For starters though the compiler does not issue a diagnostic message nevertheless the assignment operator in the class definition</p>\n\n<pre><code>class foo{\nprivate:\n    string str;\npublic:\n    foo operator = (string s){\n         str = s;\n    }\n};\n</code></pre>\n\n<p>is invalid because it returns nothing while it has return type <code>foo</code>.</p>\n\n<p>You should it write like</p>\n\n<pre><code>    foo &amp; operator = ( const std::string &amp;s){\n         str = s;\n         return *this;\n    }\n</code></pre>\n\n<p>As you declared neither the default constructor nor the copy constructor then the compiler implicitly declared them instead of you.</p>\n\n<p>So in fact your class has only two constructor. The default constructor that has the following declaration</p>\n\n<pre><code>foo();\n</code></pre>\n\n<p>and the copy constructor that has the following declaration</p>\n\n<pre><code>for( const foo &amp; );\n</code></pre>\n\n<p>In this statement</p>\n\n<pre><code>foo a = \"this initialization throwing an error\";\n</code></pre>\n\n<p>the compiler assumes that in the right side there is an object of type <code>foo</code> and you are going to use it to create the object <code>a</code>. That is in this declaration the compiler tries to apply the implicitly created copy constructor. To so so it need to convert the string literal to an object of type <code>foo</code>. However the class does not have a conversion constructor that is a constructor with a parameter that can accept the string literal. As result the compiler issues the error</p>\n\n<blockquote>\n  <p>error: conversion from 'const char [38]' to non-scalar type 'foo'\n  requested</p>\n</blockquote>\n\n<p><code>const char[33]</code> is the type of the string literal in the right side of the declaration.</p>\n\n<p>In this code snippet</p>\n\n<pre><code>foo b;\nb = \"but assignment after declaration is working fine\";\n</code></pre>\n\n<p>at first there is created the object <code>b</code> of the type <code>foo</code> using the implicitly defined by the compiler default constructor and then in the second statement there is used the assignment operator that is explicitly defined in the class. As it follows from the definition of the operator it assigns data member <code>str</code> with a temporary object of type <code>std::string</code> that is constructed from the used string literal. It is possible because the class <code>std::string</code> has a corresponding conversion constructor.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1479327286, "creation_date": 1479327286, "answer_id": 40641481, "question_id": 40640877, "link": "https://stackoverflow.com/questions/40640877/initialise-object-with-equal-operator/40641481#40641481", "title": "initialise object with equal operator", "body": "<p>What you have in the first case is called <a href=\"http://en.cppreference.com/w/cpp/language/copy_initialization\" rel=\"nofollow noreferrer\">copy initialization</a> and as stated in documentation:</p>\n\n<blockquote>\n  <p>The equals sign, =, in copy-initialization of a named variable is not\n  related to the assignment operator. Assignment operator overloads have\n  no effect on copy-initialization.</p>\n</blockquote>\n\n<p>Hense the error. So possible solutions:</p>\n\n<p>First you can create a constructor, that accepts <code>std::string</code>:</p>\n\n<pre><code>foo( const std::string &amp;s );\n</code></pre>\n\n<p>that will allow you to create <code>foo</code> by this:</p>\n\n<pre><code>foo f( \"abc\" );\n</code></pre>\n\n<p>or even this:</p>\n\n<pre><code>foo f = foo( \"abc\" );\n</code></pre>\n\n<p>but your statement will still fail, because of:</p>\n\n<blockquote>\n  <p>in addition, the implicit conversion in copy-initialization must\n  produce T directly from the initializer, while, e.g.\n  direct-initialization expects an implicit conversion from the\n  initializer to an argument of T's constructor.</p>\n</blockquote>\n\n<p>so to make your statement work as it is you need to add this ctor:</p>\n\n<pre><code> foo( const char *str );\n</code></pre>\n\n<p>Note: when you add proper ctor you do not need to define assignment operator -  conversion constructor will be used. And your overloaded assignment operator should return reference to <code>foo</code>.</p>\n"}], "owner": {"reputation": 344, "user_id": 5588450, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e1eacd5e423e3d8d4b4832926100beee?s=128&d=identicon&r=PG", "display_name": "Abhay Jatin Doshi", "link": "https://stackoverflow.com/users/5588450/abhay-jatin-doshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 40640970, "answer_count": 5, "score": 4, "last_activity_date": 1479328583, "creation_date": 1479325226, "last_edit_date": 1479328583, "question_id": 40640877, "link": "https://stackoverflow.com/questions/40640877/initialise-object-with-equal-operator", "title": "initialise object with equal operator", "body": "<p>In the class defined as below named foo</p>\n\n<pre><code>class foo{\nprivate:\n    string str;\npublic:\n    foo operator = (string s){\n         str = s;\n    }\n};\n\nint main(){\n    foo a = \"this initialization throwing an error\";\n    foo b;\n    b = \"but assignment after declaration is working fine\";\n}\n</code></pre>\n\n<p><code>error: conversion from 'const char [38]' to non-scalar type 'foo' requested</code></p>\n\n<p>The above error is caused only when I am assigning value to the object instance with declaration but if I am assigning separately from declaration then the overloaded equal <code>=</code> operator is working fine.</p>\n\n<p>I want in any method to assign an string to the object <strong>with equal operator</strong>\nand <strong>as a declaration</strong> like <code>foo a = \"abcd\";</code></p>\n"}, {"tags": ["c++", "mysql", "file", "multidimensional-array", "fstream"], "comments": [{"owner": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 0, "creation_date": 1479324483, "post_id": 40640565, "comment_id": 68513342, "body": "Try changing <code>for(int i = 0; i &lt; NUM_ROWS; i++) {  for(int j = 0; j &lt; NUM_COLS; j++)  {</code> for the column sum to <code>for(int j = 0; j &lt; NUM_COLS; j++)  { for(int i = 0; i &lt; NUM_ROWS; i++) { </code>."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1479325055, "post_id": 40640565, "comment_id": 68513645, "body": "You might also want to look at <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7119646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a77d7cb201ab861aa0a5e54e9eb7719?s=128&d=identicon&r=PG&f=1", "display_name": "Reclaim", "link": "https://stackoverflow.com/users/7119646/reclaim"}, "edited": false, "score": 0, "creation_date": 1479325025, "post_id": 40640774, "comment_id": 68513623, "body": "Oh that makes perfect sense. I neglected to realize the importance of searching through the columns first. Thanks so much :)!"}, {"owner": {"reputation": 743, "user_id": 6054783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/922aee43b4bae39e227e3d6682e6bb4d?s=128&d=identicon&r=PG&f=1", "display_name": "theVoid", "link": "https://stackoverflow.com/users/6054783/thevoid"}, "reply_to_user": {"reputation": 3, "user_id": 7119646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a77d7cb201ab861aa0a5e54e9eb7719?s=128&d=identicon&r=PG&f=1", "display_name": "Reclaim", "link": "https://stackoverflow.com/users/7119646/reclaim"}, "edited": false, "score": 0, "creation_date": 1479325949, "post_id": 40640774, "comment_id": 68514129, "body": "@Reclaim No problem, i am glad that i helped you."}], "tags": [], "owner": {"reputation": 743, "user_id": 6054783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/922aee43b4bae39e227e3d6682e6bb4d?s=128&d=identicon&r=PG&f=1", "display_name": "theVoid", "link": "https://stackoverflow.com/users/6054783/thevoid"}, "is_accepted": true, "score": 0, "last_activity_date": 1479324842, "creation_date": 1479324842, "answer_id": 40640774, "question_id": 40640565, "link": "https://stackoverflow.com/questions/40640565/unable-to-add-the-columns-and-rows-of-a-2d-array/40640774#40640774", "title": "Unable to add the columns and rows of a 2D array", "body": "<p>The problem is here:</p>\n\n<pre><code>for(int i = 0; i &lt; NUM_ROWS; i++)\n{\n    for(int j = 0; j &lt; NUM_COLS; j++)\n    {\n        sumColumns += scores[j][i];\n    }\n\n    cout &lt;&lt; \"The sum of \" &lt;&lt; i+1 &lt;&lt; \" Column is \" &lt;&lt; sumColumns &lt;&lt; endl;\n\n    if (sumColumns &gt; highestCol)\n    {\n        highestCol = sumColumns;\n        colIndex = i+1;\n    }\n\n    sumColumns = 0;\n}\n</code></pre>\n\n<p>As you can see you iterate through the rows in the outer loop and through the columns in the inner, but the sumColumns isn't adding the correct values.</p>\n\n<p>Replace this:</p>\n\n<pre><code> for(int i = 0; i &lt; NUM_ROWS; i++)\n {\n    for(int j = 0; j &lt; NUM_COLS; j++)\n    {\n        sumColumns += scores[j][i];\n    }\n</code></pre>\n\n<p>with this:</p>\n\n<pre><code>for(int j = 0; j &lt; NUM_COLS; j++)\n{\n    for(int i = 0; i &lt; NUM_ROWS; i++)\n    {\n        sumColumns += scores[i][j];\n    }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7119646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a77d7cb201ab861aa0a5e54e9eb7719?s=128&d=identicon&r=PG&f=1", "display_name": "Reclaim", "link": "https://stackoverflow.com/users/7119646/reclaim"}, "edited": false, "score": 0, "creation_date": 1479325748, "post_id": 40640890, "comment_id": 68514008, "body": "Thank you for the help! :)"}], "tags": [], "owner": {"reputation": 247, "user_id": 7123149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc5701052162fc495fdf57d4946c35c7?s=128&d=identicon&r=PG&f=1", "display_name": "MrLumie", "link": "https://stackoverflow.com/users/7123149/mrlumie"}, "is_accepted": false, "score": 0, "last_activity_date": 1479325280, "creation_date": 1479325280, "answer_id": 40640890, "question_id": 40640565, "link": "https://stackoverflow.com/questions/40640565/unable-to-add-the-columns-and-rows-of-a-2d-array/40640890#40640890", "title": "Unable to add the columns and rows of a 2D array", "body": "<p>You're simply mixing up the loop variables.</p>\n\n<pre><code>for(int i = 0; i &lt; NUM_COLS; i++)\n    {\n        for(int j = 0; j &lt; NUM_ROWS; j++)\n        {\n            sumColumns += scores[j][i];\n        }\n\n        cout &lt;&lt; \"The sum of \" &lt;&lt; i+1 &lt;&lt; \" Column is \" &lt;&lt; sumColumns &lt;&lt; endl;\n\n        if (sumColumns &gt; highestCol)\n        {\n            highestCol = sumColumns;\n            colIndex = i+1;\n        }\n\n        sumColumns = 0;\n    }\n</code></pre>\n\n<p>The first index of your 2D array is the ROW index, and you correctly used the inner loop variable (<code>j</code>) as the first index, so your outer loop iterates the columns, and your inner loop iterates through the rows of the current column, processing them. However, you mixed up the exit condition for the loops. If <code>j</code> is the row index, and <code>i</code> is the column index, then <code>i</code> should go from 0 to <code>NUM_COLS</code> and <code>j</code> should go from 0 to <code>NUM_ROWS</code>. Easy as that.</p>\n"}], "owner": {"reputation": 3, "user_id": 7119646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a77d7cb201ab861aa0a5e54e9eb7719?s=128&d=identicon&r=PG&f=1", "display_name": "Reclaim", "link": "https://stackoverflow.com/users/7119646/reclaim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 40640774, "answer_count": 2, "score": 0, "last_activity_date": 1479325280, "creation_date": 1479324088, "question_id": 40640565, "link": "https://stackoverflow.com/questions/40640565/unable-to-add-the-columns-and-rows-of-a-2d-array", "title": "Unable to add the columns and rows of a 2D array", "body": "<p>I am currently having some difficulty adding the total columns in a data file I was given, shown below:</p>\n\n<pre><code>   46.70   83.20   39.40   18.00   42.40   63.60\n   29.10   12.40    9.50   74.80   43.40   55.70\n   13.90   96.70   11.70   71.20   39.90   46.20\n   22.50   84.30   76.00   27.40   50.60    7.10\n   52.90   56.40   17.60   62.60   59.50   10.30\n   46.00   67.90   47.00   58.70   75.20   64.30\n   25.70   19.70   90.10   65.50   67.90   76.00\n   11.10   97.70   64.10   75.00   65.20   38.80\n   96.30   48.60   19.20   48.40   69.70   66.60\n   17.50   74.10   46.10   23.00    6.10    5.40\n   88.20   43.90   94.90   17.00   47.30   23.20\n   35.00   40.60   86.10   11.80   18.20   74.60\n   58.30   14.40   88.10   87.60   62.90   90.50\n   68.90   82.40   65.30   55.50   63.30   97.80\n   76.80   87.80   33.30   40.70   81.10   60.10\n   80.40   84.70   16.40   24.20   93.30   27.70\n   49.70   61.90   10.40   73.50   57.40   36.80\n   82.70    9.50   20.20   69.10   39.60    5.50\n   10.60   23.30   31.60   70.70   15.20   20.70\n   64.20   95.80   42.80   40.20   64.80   10.70\n   14.60   71.50   62.80   26.80   81.60   25.10\n   95.20   61.80   20.60   36.20   86.60   26.20\n   90.30   93.40    2.20   28.30   74.00   93.80\n   10.40   27.50   53.70   17.90   60.70   23.80\n   52.80   93.40   53.70   63.90   33.70   59.30\n   60.50   62.20   41.00    9.70   18.40   50.10\n   76.90   31.00   62.60   14.10   18.80   87.50\n   27.30   71.60   46.90   28.30   39.50   13.00\n   82.70   27.40   63.90   53.30   12.60   81.20\n   30.30   74.90   44.50   40.50   23.10   82.20\n   38.30   65.70   57.20   71.00   25.80   84.80\n   22.30   75.30   27.20   15.30   40.20   20.70\n   80.40   38.90   89.20   72.40   55.30   70.20\n   95.60    5.00   75.40   96.50    8.40   72.70\n   25.70    8.40   90.60   40.20   43.90   61.10\n   11.50   65.90   55.00   20.80   48.60   84.70\n   86.60   13.50   79.20   26.60   95.60   92.80\n   10.50   84.10   30.00   61.30   37.60   63.40\n   39.50   62.70   13.90   62.90   23.10   81.40\n   27.00   67.50   94.20   55.20   49.40   34.30\n    8.10   25.10   74.60   89.20   54.60   35.60\n   97.00   95.30   77.10   12.40    8.60   63.10\n   11.50   16.50   70.70    5.70   38.20   40.40\n   45.50   73.40   55.20   74.50   95.10   14.80\n   71.90   49.70   84.30   92.10   52.40   24.90\n   21.20   46.00   63.70   88.90    5.40   10.70\n   71.00   64.60   84.00   98.00   43.50    1.40\n   46.70   32.60   24.40   36.50   10.60   14.60\n   18.60   67.40   92.00   62.40   36.10   71.30\n   39.60   74.10   89.60   15.00   73.30   89.30\n</code></pre>\n\n<p>I've currently been able to add the individual rows, attaining the proper maximum value of the sum of the rows (and the index where it occurs). However, I've been unable to add the correct number of columns (it somehow counts to 50 columns when there are only 6, and isn't adding the values of each column, instead it adds some values I have no idea where they came from). Here's my current code:</p>\n\n<pre><code>    const int NUM_ROWS = 50;\n    const int NUM_COLS = 6;\n    double scores[NUM_ROWS][NUM_COLS];\n    double sumRows = 0, sumColumns = 0;\n    int colIndex, rowIndex;\n    double highestRow = 0, highestCol = 0;\n\n    fstream fin(\"scores.txt\");\n\n    while (! fin.eof())\n    {\n        for (int i = 0; i &lt; NUM_ROWS; i++)\n        {\n            for (int j = 0; j &lt; NUM_COLS; j++)\n            {\n                fin &gt;&gt; scores[i][j];\n            }\n        }\n    }\n\n    fin.close();\n\n    for(int i = 0; i &lt; NUM_ROWS; i++)\n    {\n        for(int j = 0; j &lt; NUM_COLS; j++)\n        {\n            sumColumns += scores[j][i];\n        }\n\n        cout &lt;&lt; \"The sum of \" &lt;&lt; i+1 &lt;&lt; \" Column is \" &lt;&lt; sumColumns &lt;&lt; endl;\n\n        if (sumColumns &gt; highestCol)\n        {\n            highestCol = sumColumns;\n            colIndex = i+1;\n        }\n\n        sumColumns = 0;\n    }\n\n    cout &lt;&lt; endl;\n\n    for(int i = 0; i &lt; NUM_ROWS; i++)\n    {\n        for(int j = 0; j &lt; NUM_COLS; j++)\n        {\n            sumRows += scores[i][j];\n        }\n\n        cout &lt;&lt; \"The sum of \" &lt;&lt; i+1 &lt;&lt; \" Row is \" &lt;&lt; sumRows &lt;&lt; endl;\n\n        if (sumRows &gt; highestRow)\n        {\n            highestRow = sumRows;\n            rowIndex = i+1;\n        }\n\n        sumRows = 0;\n    }\n\n    cout &lt;&lt; \"The total of the column with the highest total is: \" &lt;&lt; highestCol &lt;&lt; \" and occurs at Column #\" &lt;&lt; colIndex &lt;&lt; endl;\n    cout &lt;&lt; \"The total of the row with the highest total is: \" &lt;&lt; highestRow &lt;&lt; \" and occurs at Row #\" &lt;&lt; rowIndex &lt;&lt; endl;\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "windows", "security"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1479323333, "post_id": 40640169, "comment_id": 68512698, "body": "Depends on what the service does, I figure?"}, {"owner": {"reputation": 732, "user_id": 4979620, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-DEUxr1BQqKQ/AAAAAAAAAAI/AAAAAAAAG98/T2aDvXbz9vU/photo.jpg?sz=128", "display_name": "Thibaut Mattio", "link": "https://stackoverflow.com/users/4979620/thibaut-mattio"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1479325015, "post_id": 40640169, "comment_id": 68513613, "body": "The service calls the same executable with different parameters. Would it be possible to alter the program so that it installs another service, or calls other API function with different parameters?"}, {"owner": {"reputation": 279, "user_id": 5407986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/44a5f0cfe31645448e3589f4667cf930?s=128&d=identicon&r=PG", "display_name": "Lupe", "link": "https://stackoverflow.com/users/5407986/lupe"}, "edited": false, "score": 0, "creation_date": 1479326079, "post_id": 40640169, "comment_id": 68514214, "body": "I might be wrong, but I would think that to do something like what you&#39;re describing you would have to acquire a handle with OpenHandle with something like PROCESS_ALL_ACCESS. You shouldn&#39;t be able to do to an elevated process from a non-elevated process."}, {"owner": {"reputation": 732, "user_id": 4979620, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-DEUxr1BQqKQ/AAAAAAAAAAI/AAAAAAAAG98/T2aDvXbz9vU/photo.jpg?sz=128", "display_name": "Thibaut Mattio", "link": "https://stackoverflow.com/users/4979620/thibaut-mattio"}, "edited": false, "score": 0, "creation_date": 1479328295, "post_id": 40640169, "comment_id": 68515499, "body": "I do, not with PROCESS_ALL_ACCESS though. The example code is really simplified, it was just for giving an example of the kind of API calls that I do."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1479335330, "post_id": 40640169, "comment_id": 68519078, "body": "If this hypothetical entity can run your program with admin privilege, he can run <i>any</i> program with admin privilege.  No need to mess around, he can just run <code>infectsystem.exe</code> directly."}], "owner": {"reputation": 732, "user_id": 4979620, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh4.googleusercontent.com/-DEUxr1BQqKQ/AAAAAAAAAAI/AAAAAAAAG98/T2aDvXbz9vU/photo.jpg?sz=128", "display_name": "Thibaut Mattio", "link": "https://stackoverflow.com/users/4979620/thibaut-mattio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1479322741, "creation_date": 1479322741, "question_id": 40640169, "link": "https://stackoverflow.com/questions/40640169/how-can-i-call-system-level-api-with-an-existing-executable", "title": "How can I call system level API with an existing executable?", "body": "<p>I have an executable that is executed with admin privileges. One of the thing that it does is installing a Windows service, the code looks like this:</p>\n\n<pre><code>auto path = new wchar_t[MAX_PATH];\nGetModuleFileName( nullptr, path, MAX_PATH );\nhandles._service = CreateService( handles._scManager, _name.c_str(),\n    _name.c_str(), READ_CONTROL | WRITE_DAC | SERVICE_QUERY_STATUS,\n    SERVICE_WIN32_OWN_PROCESS, dwStartType, SERVICE_ERROR_NORMAL,\n    path, nullptr, nullptr, dependencies.c_str(), nullptr, nullptr);\n</code></pre>\n\n<p>I have other system calls throughout the program.</p>\n\n<p>Could this program be used by an external entity to execute system API calls?\nIf so, how would that person proceed and how can I prevent it?</p>\n"}, {"tags": ["c++", "eclipse", "object", "include"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1479323389, "post_id": 40640004, "comment_id": 68512739, "body": "The recent addition says Eclipse cannot find the ARM cross compiler the project uses. It does not look like you have also installed all of the other tools your friend used, or if you have you installed them differently and the provided project is telling Eclipse to look for the tools in the wrong spot."}, {"owner": {"reputation": 174, "user_id": 4187588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b250d16f611a7de97101f4bc2014c95?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsen", "link": "https://stackoverflow.com/users/4187588/mohsen"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1479327767, "post_id": 40640004, "comment_id": 68515187, "body": "Thanks. The original project he has sent works perfectly with no error. I only have added a few .cpp and .h to the project and never used them, but I get this error anyways. So basically the change I have made is adding a couple folders and like 15 files. The fact that the original project gives me no error but this one does is my concern."}], "owner": {"reputation": 174, "user_id": 4187588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b250d16f611a7de97101f4bc2014c95?s=128&d=identicon&r=PG&f=1", "display_name": "Mohsen", "link": "https://stackoverflow.com/users/4187588/mohsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479907286, "creation_date": 1479322215, "last_edit_date": 1592644375, "question_id": 40640004, "link": "https://stackoverflow.com/questions/40640004/why-did-i-need-to-install-arm-linux-gnueabi-gcc-in-eclipse", "title": "Why did I need to install arm-linux-gnueabi-gcc in Eclipse?", "body": "<p>I'm very new in Eclipse and still trying to figure it out. I had a project very cluttered and awful looking but a friend started with all the folders and files I need and now I need to fill the files including drivers and everything with what I have already.</p>\n<p>The general project he sent me, I can build (and run within Eclipse) it without any error. Now that I have added some drivers (actually C++ files and dependencies) I'm getting errors like:</p>\n<blockquote>\n<p>make: *** [src/Drivers/SERVO/Dynamixel/dxl_hal.o] Error 127</p>\n</blockquote>\n<p>This particular file (and driver folder) hasn't been changed at all. It was there in the original &quot;general&quot; project and used to be built just ok without any errors, why does it give me this error while I don't even use any functions related to this particular folder?</p>\n<p>This is what I get while I have it installed:</p>\n<blockquote>\n<p>Building file: ../src/Drivers/SERVO/Dynamixel/dxl_hal.c</p>\n<p>/bin/sh: 1: arm-linux-gnueabi-gcc: not found</p>\n</blockquote>\n<p>Any ideas?</p>\n<p><strong>Update:</strong></p>\n<p>I installed the <code>arm-linux-gnueabi-gcc</code> again and it now works. My problem stays though: why the original project didn't need me to reinstall the arm but the one with added files did? While I didn't use them at all, they were just sitting there in a new folder under src.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1479321027, "post_id": 40639611, "comment_id": 68511425, "body": "Looks like you compiler installation is hosed.  I would uninstall and reinstall it."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1479323885, "post_id": 40639611, "comment_id": 68513019, "body": "It&#39;s OT, but you can also <a href=\"http://stackoverflow.com/questions/1107705/systempause-why-is-it-wrong\">avoid <code>system(&quot;pause&quot;);</code></a>."}], "owner": {"reputation": 1, "user_id": 7169116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b230bfea34e4091824de3c3c2bb920?s=128&d=identicon&r=PG&f=1", "display_name": "Nietzsche&#39;s Moustache", "link": "https://stackoverflow.com/users/7169116/nietzsches-moustache"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479322626, "creation_date": 1479320943, "last_edit_date": 1479321387, "question_id": 40639611, "link": "https://stackoverflow.com/questions/40639611/a-lot-of-mistakes-in-xiosbase-file-even-hello-world-doesnt-run-c", "title": "A lot of mistakes in xiosbase file. Even Hello World doesn&#39;t run. C++", "body": "<p>I was writing a small program in C++ to translate infix notation to polish notation and RPN, but after running it a ton of mistakes popped up in xiosbase file. I tried to run a simpler code but xiosbase mistakes are still there.I am just starting to code and I have no idea how header files work (and any other file except the one I am writing).\nThis is Hello World.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt; \nusing namespace std;\n\nint main()\n{\n    cout &lt;&lt; \"Hello, world!\" &lt;&lt; endl;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>and here are all the mistakes I get: </p>\n\n<p><img src=\"https://s13.postimg.org/5lb9954fb/Untitled.png\" alt=\"https://s13.postimg.org/5lb9954fb/Untitled.png\"></p>\n\n<p>Keep in mind that I am a massive newbie</p>\n"}, {"tags": ["c++", "function", "numbers", "sequence"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1479320555, "post_id": 40639447, "comment_id": 68511166, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should &#91;edit] your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1479320570, "post_id": 40639447, "comment_id": 68511177, "body": "Why don&#39;t you break up the calculation into separate steps instead of sticking everything on one line?  Whenever you get a calculation that doesn&#39;t make sense, the best thing to do is break it up and see which part of the calculation is not returning the right value."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479320629, "post_id": 40639447, "comment_id": 68511217, "body": "Do not do exact comparisons with <code>double</code> values like: <code>if (n==1)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2536, "user_id": 1032340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tUV0d.jpg?s=128&g=1", "display_name": "dvnguyen", "link": "https://stackoverflow.com/users/1032340/dvnguyen"}, "is_accepted": false, "score": 0, "last_activity_date": 1479320870, "creation_date": 1479320870, "answer_id": 40639592, "question_id": 40639447, "link": "https://stackoverflow.com/questions/40639447/sequence-of-numbers/40639592#40639592", "title": "Sequence of numbers", "body": "<p>When you give <code>n=3</code>,  <code>(-10/((n-1)*(-2)))</code> gives you <code>(-10/((3-1)*(-2))) = 2.5</code>. My suggestion would be return <code>(10/((n-1)*2)) * sign(n)</code>, where <code>sign(n)</code> return 1 if n is even, and return -1 otherwise.</p>\n"}, {"comments": [{"owner": {"reputation": 196, "user_id": 7163528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c7d3e9f34ba6ca0685dc722685ad20?s=128&d=identicon&r=PG&f=1", "display_name": "eshb", "link": "https://stackoverflow.com/users/7163528/eshb"}, "edited": false, "score": 0, "creation_date": 1479323797, "post_id": 40640442, "comment_id": 68512964, "body": "The reason you didnt get the correct answer is because the values take alternative signs which is not taken care of in your formula."}], "tags": [], "owner": {"reputation": 196, "user_id": 7163528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c7d3e9f34ba6ca0685dc722685ad20?s=128&d=identicon&r=PG&f=1", "display_name": "eshb", "link": "https://stackoverflow.com/users/7163528/eshb"}, "is_accepted": true, "score": 1, "last_activity_date": 1479323693, "creation_date": 1479323693, "answer_id": 40640442, "question_id": 40639447, "link": "https://stackoverflow.com/questions/40639447/sequence-of-numbers/40640442#40640442", "title": "Sequence of numbers", "body": "<p>An efficient(optimized code) code for your question would be:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include&lt;math.h&gt;\nusing namespace std;\n\ndouble count (double n)\n{\n  double x = pow(2, n - 1);      //calculate the divisor\n  return pow(-1, n) * (10 / x);  // divide 10 with divisor followed by assigning it  a sign\n}\n\nint main()\n{\n  int n;\n  cout&lt;&lt;\"n? : \";\n  cin&gt;&gt;n ;\n  cout&lt;&lt;count(n) &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>Note: Redundancy occurs due to branching in your code. Better try to write straight-line code(without too many branchings) wherever possible.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "is_accepted": false, "score": 0, "last_activity_date": 1479325137, "creation_date": 1479325137, "answer_id": 40640849, "question_id": 40639447, "link": "https://stackoverflow.com/questions/40639447/sequence-of-numbers/40640849#40640849", "title": "Sequence of numbers", "body": "<p>I think your problem has a really nice &amp; easy recursive solution:</p>\n\n<pre><code>double count(int n){\n    if (n &lt;= 1) return -10;\n    return count(n - 1)*-0.5;\n}\n</code></pre>\n\n<p>Example call:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nint main(){\n    for (int i = 1; i &lt; 20; ++i){\n        std::cout &lt;&lt; std::setw(15) &lt;&lt; count(i) &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>            -10\n              5\n           -2.5\n           1.25\n         -0.625\n         0.3125\n       -0.15625\n       0.078125\n     -0.0390625\n      0.0195313\n    -0.00976563\n     0.00488281\n    -0.00244141\n      0.0012207\n   -0.000610352\n    0.000305176\n   -0.000152588\n   7.62939e-005\n   -3.8147e-005\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7169142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/phi6e.jpg?s=128&g=1", "display_name": "szymoneiro", "link": "https://stackoverflow.com/users/7169142/szymoneiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 40640442, "answer_count": 3, "score": -5, "last_activity_date": 1479325137, "creation_date": 1479320424, "question_id": 40639447, "link": "https://stackoverflow.com/questions/40639447/sequence-of-numbers", "title": "Sequence of numbers", "body": "<p>I need to create program, where in output I'll get the n-th number or sequence. Sequence looks like that:</p>\n\n<p>(-10, 5, -2.5, 1.25, -0.625...)</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ndouble count (double n)\n{\n    if (n==1)\n        return -10;\n    else\n        return (-10/((n-1)*(-2)));\n}\n\ndouble n;\n\nmain()\n{\ncout&lt;&lt;\"n? : \";\ncin&gt;&gt;n;\ncout&lt;&lt;count(n);\nreturn 0;\n}\n</code></pre>\n\n<p>For me everythink looks good for me, when I give to the program 1, it gives -10, when I give 2, it gives back 5, but on 3 it gives 2.5, not -2.5, on 4 it gives 1.(6), which doesn't make sense for me. Where's mistake in this code?</p>\n"}, {"tags": ["c++", "macos"], "answers": [{"tags": [], "owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "is_accepted": true, "score": 1, "last_activity_date": 1480577042, "creation_date": 1480577042, "answer_id": 40904790, "question_id": 40639431, "link": "https://stackoverflow.com/questions/40639431/framework-files-on-osx-build-configuration/40904790#40904790", "title": ".framework files on osx build configuration", "body": "<p>The 'oTool' command does not run on <code>.framework</code> file but it runs on the executable file inside the <code>.framework</code>.</p>\n\n<p>So, passing the <code>-L</code> flag prints the shared libraries used in the <code>.framework</code>.</p>\n\n<p><code>oTool -L filePath</code>\n will return a list of libraries, one of them will be <code>libc++</code> or <code>libstdc++</code> depending on the C++ version used.</p>\n"}], "owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 40904790, "answer_count": 1, "score": 1, "last_activity_date": 1480577042, "creation_date": 1479320360, "last_edit_date": 1495540903, "question_id": 40639431, "link": "https://stackoverflow.com/questions/40639431/framework-files-on-osx-build-configuration", "title": ".framework files on osx build configuration", "body": "<p>I have a .framework file which was built using some c++ standard. Is there any way to find out which c++ standard was used to build them? (Like c++11 or earlier).</p>\n\n<p>I have tried the <code>otool</code> command but it doesn't work. Is there any way to do it?</p>\n\n<p>For reference: <a href=\"https://stackoverflow.com/questions/4618027/what-exactly-is-a-framework-in-mac-os-x-framework-folders\">What exactly is a Framework in Mac OS X? ( *.framework folders )</a></p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1479320593, "post_id": 40639404, "comment_id": 68511194, "body": "<a href=\"http://coliru.stacked-crooked.com/a/2acde687043340b1\" rel=\"nofollow noreferrer\">Cannot reproduce</a>.  Do note that every space gets treated as a empty string when you have multiple empty spaces in a row."}, {"owner": {"reputation": 614, "user_id": 5416685, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5fa61151adb9af527d80a514ae314520?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin217", "link": "https://stackoverflow.com/users/5416685/kevin217"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1479322677, "post_id": 40639404, "comment_id": 68512318, "body": "@NathanOliver It&#39;s weird that if I run your code, everything works fine. But once I put those two functions into a header called <code>helper.h</code> and <code>helper.cpp</code>, it will have the same issue."}], "owner": {"reputation": 614, "user_id": 5416685, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5fa61151adb9af527d80a514ae314520?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin217", "link": "https://stackoverflow.com/users/5416685/kevin217"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 675, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479329023, "creation_date": 1479320289, "last_edit_date": 1495540887, "question_id": 40639404, "link": "https://stackoverflow.com/questions/40639404/splitting-strings-with-stdgetline", "title": "Splitting strings with std::getline", "body": "<p>I copy the code from this answer <a href=\"https://stackoverflow.com/questions/236129/split-a-string-in-c\">Split a string in C++?</a></p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n\nvoid split(const std::string &amp;s, char delim, std::vector&lt;std::string&gt; &amp;elems) {\n    std::stringstream ss;\n    ss.str(s);\n    std::string item;\n    while (std::getline(ss, item, delim)) {\n        elems.push_back(item);\n    }\n}\n\n\nstd::vector&lt;std::string&gt; split(const std::string &amp;s, char delim) {\n    std::vector&lt;std::string&gt; elems;\n    split(s, delim, elems);\n    return elems;\n}\n</code></pre>\n\n<hr>\n\n<h2>I also add the code to check if <code>item.empty()</code></h2>\n\n<p>Test code --</p>\n\n<pre><code>#include &lt;xxx&gt;\n\nusing namespace std;\nstring str = \"0x0   0\";\nvector&lt;string&gt; result = split (str, ' ');\n</code></pre>\n\n<p>The result should be --</p>\n\n<pre><code>[\"0x0\",   \"0\"]\n</code></pre>\n\n<p>But It doesn't split the string, and the result is -- </p>\n\n<pre><code>[\"0x0   0\"]  \n</code></pre>\n\n<p>However, It works fine when --</p>\n\n<pre><code>str = \"a    b  c d   \";\n</code></pre>\n\n<p>Is there something that I miss when using <code>std::getline()</code> ?</p>\n"}, {"tags": ["c++", "random", "parallel-processing", "thread-safety", "openmp"], "comments": [{"owner": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1479337625, "post_id": 40639154, "comment_id": 68519979, "body": "What do you mean by answer is wrong?  Are you expecting rand_r to support a separate sequence for each thread?  Surely, not more than one of those sequences would match a single thread invocation of the same generator.  I suppose a true PRNG would be considered &quot;wrong&quot; if any 2 threads fell into the same sequence, but when you take shortcuts using a non-parallel generator you don&#39;t have such assurance."}, {"owner": {"reputation": 195, "user_id": 4547130, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/10161e09050fa66da6f37ffd9df07a24?s=128&d=identicon&r=PG&f=1", "display_name": "newt", "link": "https://stackoverflow.com/users/4547130/newt"}, "reply_to_user": {"reputation": 530, "user_id": 2394541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9b9b9399b329591f7be92da1c5e442?s=128&d=identicon&r=PG", "display_name": "tim18", "link": "https://stackoverflow.com/users/2394541/tim18"}, "edited": false, "score": 0, "creation_date": 1479368172, "post_id": 40639154, "comment_id": 68529552, "body": "@tim18 By &quot;answer is wrong&quot; I mean that the resulting value of Pi is not 3.14 (but it is 3.14 when using sequential program with rand() ). Yes, I am expecting separate sequences for each thread, because I am using seed dependent on the number of the thread. Or am I missing something?.."}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1479371065, "post_id": 40639154, "comment_id": 68531105, "body": "Yes you miss something: you mustn&#39;t initialise your seed at each iteration of the loop, but once and only once. The way you do it ATM, you will generate again and again the very same &quot;random&quot; number."}, {"owner": {"reputation": 195, "user_id": 4547130, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/10161e09050fa66da6f37ffd9df07a24?s=128&d=identicon&r=PG&f=1", "display_name": "newt", "link": "https://stackoverflow.com/users/4547130/newt"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1479375417, "post_id": 40639154, "comment_id": 68533833, "body": "@Gilles OK, I see, thank you. But how do I get different seed for each thread then?.."}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1479375590, "post_id": 40639154, "comment_id": 68533965, "body": "The same way you do it now (for example) but just swapping the <code>for</code> line and the initialization line..."}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1479375787, "post_id": 40639154, "comment_id": 68534121, "body": "Another problem is that you don&#39;t distribute your loop. Overall, I could reuse the exact same answer as <a href=\"http://stackoverflow.com/a/40278404/5239503\">this one</a>"}, {"owner": {"reputation": 195, "user_id": 4547130, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/10161e09050fa66da6f37ffd9df07a24?s=128&d=identicon&r=PG&f=1", "display_name": "newt", "link": "https://stackoverflow.com/users/4547130/newt"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1479376254, "post_id": 40639154, "comment_id": 68534478, "body": "@Gilles Oh, thank you very much. I guess I was completely confused, of course I should swap the for line and the initialization one. Thank you for the link, I will read it."}, {"owner": {"reputation": 195, "user_id": 4547130, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/10161e09050fa66da6f37ffd9df07a24?s=128&d=identicon&r=PG&f=1", "display_name": "newt", "link": "https://stackoverflow.com/users/4547130/newt"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1479384027, "post_id": 40639154, "comment_id": 68539768, "body": "@Gilles Oh, I just thought, that if there is #pragma omp parallel and for-loop is inside this construction, it is equivalent to #pragma omp parallel for"}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 4547130, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/10161e09050fa66da6f37ffd9df07a24?s=128&d=identicon&r=PG&f=1", "display_name": "newt", "link": "https://stackoverflow.com/users/4547130/newt"}, "edited": false, "score": 0, "creation_date": 1479368260, "post_id": 40639538, "comment_id": 68529599, "body": "Okay. Maybe I can can some benefit for random number generation in parallel way using some libraries for parallel random number generation?.. By the way, I&#39;ve looked through the same questions as mine and recommendation was to use rand_r to improve performance. And the time of  pi evaluation indeed decreased comparing to sequential program. That&#39;s why it is strange for me that in my case time is increased instead. And still I do not understand why the result with rand_r() in parallel is incorrect (pi is not equal to 3.14), but it&#39;s correct while using rand() sequentially."}], "tags": [], "owner": {"reputation": 1, "user_id": 7142675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d260bd42e363ed78187c92582b1fa7cb?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/7142675/steve"}, "is_accepted": false, "score": 0, "last_activity_date": 1479320746, "creation_date": 1479320746, "answer_id": 40639538, "question_id": 40639154, "link": "https://stackoverflow.com/questions/40639154/thread-safe-parallel-rng-slower-than-sequential-rand/40639538#40639538", "title": "Thread-safe parallel RNG slower than sequential rand()", "body": "<p>Apparently there are more instructions in rand_r() compared to rand(). Below is copied from one implementation. So it's reasonable that rand_r() takes more time to complete one round than rand().</p>\n\n<pre><code>int\nrand_r(unsigned int *ctx)\n{\n    u_long val = (u_long) *ctx;\n    int r = do_rand(&amp;val);\n\n    *ctx = (unsigned int) val;\n    return (r);\n}\n\n\nstatic u_long next = 1;\n\nint\nrand()\n{\n    return (do_rand(&amp;next));\n}\n</code></pre>\n\n<p>And since rand() is not thread safe, the output could be incorrect if you use rand() in parallel. The worse part is that you would still get a result and don't know if it's correct in small scale test. </p>\n"}], "owner": {"reputation": 195, "user_id": 4547130, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/10161e09050fa66da6f37ffd9df07a24?s=128&d=identicon&r=PG&f=1", "display_name": "newt", "link": "https://stackoverflow.com/users/4547130/newt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 429, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1479386469, "creation_date": 1479319389, "last_edit_date": 1479386469, "question_id": 40639154, "link": "https://stackoverflow.com/questions/40639154/thread-safe-parallel-rng-slower-than-sequential-rand", "title": "Thread-safe parallel RNG slower than sequential rand()", "body": "<p>I use this version of calculation of Pi with thread-safe function</p>\n\n<pre><code>rand_r   \n</code></pre>\n\n<p>But it appears that it is slower (and answer is wrong) when running this program in parallel comparing to sequential program with use of </p>\n\n<pre><code>rand()\n</code></pre>\n\n<p>which is not thread-safe. It seems that this way of using is also not thread-safe. But I do not understand why, because I have read many questions about thread-safe PRNGs and learned that rand_r should be safe enough.  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;ctime&gt;\n#include \"omp.h\"\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\nunsigned seed;\n\nint main()\n{\ndouble start = time(0);\n\nint i, n, N;\ndouble x, y;\n\n\n\nN = 1&lt;&lt;30;\nn = 0;\n\ndouble pi;\n\n\n\n#pragma omp threadprivate(seed)\n#pragma omp parallel private(x, y) reduction(+:n) \n{\n\nfor (i = 0; i &lt; N; i++) {\nseed = 25234 + 17 * omp_get_thread_num();\n    x = rand_r(&amp;seed) / (double) RAND_MAX;\n    y = rand_r(&amp;seed) / (double) RAND_MAX;\n\n    if (x*x + y*y &lt;= 1)\n        n++;\n}\n}\n\npi = 4. * n / (double) (N);\n\ncout &lt;&lt; pi &lt;&lt; endl;\n\ndouble stop = time(0);\n\ncout &lt;&lt; (stop - start) &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n\n<p>P.S. By the way, what are the magic numbers in </p>\n\n<pre><code>seed = 25234 + 17 * omp_get_thread_num();\n</code></pre>\n\n<p>? I stole them from some answer.</p>\n\n<p><strong>EDIT:</strong> The comment by Gilles helped me. The resolution was:\n1. To switch lines of for loop and seed initialization.\n2. To add #pragma omp for</p>\n\n<p>Modified code reads</p>\n\n<pre><code>#pragma omp parallel private(x, y, seed)\n{\nseed = 25234 + 17 * omp_get_thread_num();\n\n#pragma omp for reduction(+:n)\nfor (int i = 0; i &lt; N; i++) {\n\n    x = (double) rand_r(&amp;seed) / (double) RAND_MAX;\n    y = (double) rand_r(&amp;seed) / (double) RAND_MAX;\n\n    if (x*x + y*y &lt;= 1)\n       n++;\n}\n\n}\n</code></pre>\n\n<p>The problem is resolved.</p>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 1224, "user_id": 5309611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d0c7dd6dbcdd7a0d220fc79acc6b3d89?s=128&d=identicon&r=PG&f=1", "display_name": "notAChance", "link": "https://stackoverflow.com/users/5309611/notachance"}, "edited": false, "score": 0, "creation_date": 1479320547, "post_id": 40639295, "comment_id": 68511161, "body": "Thanks for your input, I&#39;ve attempted this too - see updated question with log."}, {"owner": {"reputation": 2536, "user_id": 1032340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tUV0d.jpg?s=128&g=1", "display_name": "dvnguyen", "link": "https://stackoverflow.com/users/1032340/dvnguyen"}, "reply_to_user": {"reputation": 1224, "user_id": 5309611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d0c7dd6dbcdd7a0d220fc79acc6b3d89?s=128&d=identicon&r=PG&f=1", "display_name": "notAChance", "link": "https://stackoverflow.com/users/5309611/notachance"}, "edited": false, "score": 0, "creation_date": 1479321127, "post_id": 40639295, "comment_id": 68511467, "body": "It&#39;s probably caused by C++11 type. I think this should work:"}, {"owner": {"reputation": 2536, "user_id": 1032340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tUV0d.jpg?s=128&g=1", "display_name": "dvnguyen", "link": "https://stackoverflow.com/users/1032340/dvnguyen"}, "reply_to_user": {"reputation": 1224, "user_id": 5309611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d0c7dd6dbcdd7a0d220fc79acc6b3d89?s=128&d=identicon&r=PG&f=1", "display_name": "notAChance", "link": "https://stackoverflow.com/users/5309611/notachance"}, "edited": false, "score": 0, "creation_date": 1479321148, "post_id": 40639295, "comment_id": 68511483, "body": "g++ app.cpp -o app -ltins -std=c++11"}, {"owner": {"reputation": 1224, "user_id": 5309611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d0c7dd6dbcdd7a0d220fc79acc6b3d89?s=128&d=identicon&r=PG&f=1", "display_name": "notAChance", "link": "https://stackoverflow.com/users/5309611/notachance"}, "edited": false, "score": 0, "creation_date": 1479321787, "post_id": 40639295, "comment_id": 68511809, "body": "This works for linking, still the same error when building in NetBeans though."}, {"owner": {"reputation": 2536, "user_id": 1032340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tUV0d.jpg?s=128&g=1", "display_name": "dvnguyen", "link": "https://stackoverflow.com/users/1032340/dvnguyen"}, "reply_to_user": {"reputation": 1224, "user_id": 5309611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d0c7dd6dbcdd7a0d220fc79acc6b3d89?s=128&d=identicon&r=PG&f=1", "display_name": "notAChance", "link": "https://stackoverflow.com/users/5309611/notachance"}, "edited": false, "score": 0, "creation_date": 1479322390, "post_id": 40639295, "comment_id": 68512143, "body": "You need to set the library linking and C++11 in your NetBeans project property. A quick Google search may give you some information."}, {"owner": {"reputation": 1224, "user_id": 5309611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d0c7dd6dbcdd7a0d220fc79acc6b3d89?s=128&d=identicon&r=PG&f=1", "display_name": "notAChance", "link": "https://stackoverflow.com/users/5309611/notachance"}, "edited": false, "score": 0, "creation_date": 1479334528, "post_id": 40639295, "comment_id": 68518718, "body": "OK so I set my linked file as a library and my <code>C++ Standard</code> in properties is set to <code>C++11</code>, resulting in same error as beginning minus reference errors.. clueless."}, {"owner": {"reputation": 1224, "user_id": 5309611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d0c7dd6dbcdd7a0d220fc79acc6b3d89?s=128&d=identicon&r=PG&f=1", "display_name": "notAChance", "link": "https://stackoverflow.com/users/5309611/notachance"}, "edited": false, "score": 0, "creation_date": 1479336713, "post_id": 40639295, "comment_id": 68519631, "body": "Anyway, I&#39;ve run it from terminal and it works, so I guess my problem is with NetBeans."}, {"owner": {"reputation": 1224, "user_id": 5309611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d0c7dd6dbcdd7a0d220fc79acc6b3d89?s=128&d=identicon&r=PG&f=1", "display_name": "notAChance", "link": "https://stackoverflow.com/users/5309611/notachance"}, "edited": false, "score": 0, "creation_date": 1479338964, "post_id": 40639295, "comment_id": 68520414, "body": "I&#39;m an eejit, I was pointing to the wrong lib for libtins.  thanks for your help."}], "tags": [], "owner": {"reputation": 2536, "user_id": 1032340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tUV0d.jpg?s=128&g=1", "display_name": "dvnguyen", "link": "https://stackoverflow.com/users/1032340/dvnguyen"}, "is_accepted": true, "score": 1, "last_activity_date": 1479321267, "last_edit_date": 1479321267, "creation_date": 1479319897, "answer_id": 40639295, "question_id": 40639152, "link": "https://stackoverflow.com/questions/40639152/c-libtins-build-error/40639295#40639295", "title": "c++ libtins build error", "body": "<p>From the <code>undefined reference</code> message in the error log I can tell that you haven't added/linked the lib to your project. I don't know about your Netbean project setting, but if your use gcc, you can see an example <a href=\"http://libtins.github.io/download/#using\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<p><code>g++ app.cpp -o app -ltins -std=c++11</code> </p>\n"}], "owner": {"reputation": 1224, "user_id": 5309611, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d0c7dd6dbcdd7a0d220fc79acc6b3d89?s=128&d=identicon&r=PG&f=1", "display_name": "notAChance", "link": "https://stackoverflow.com/users/5309611/notachance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 0, "accepted_answer_id": 40639295, "answer_count": 1, "score": 1, "last_activity_date": 1479334451, "creation_date": 1479319386, "last_edit_date": 1479334451, "question_id": 40639152, "link": "https://stackoverflow.com/questions/40639152/c-libtins-build-error", "title": "c++ libtins build error", "body": "<p>I'm attempting the litbins build packet example over at <a href=\"http://libtins.github.io\" rel=\"nofollow noreferrer\">http://libtins.github.io</a>.  </p>\n\n<p>I've followed the install instructions and am able to <code>#include &lt;tins/tins.h&gt;</code> just fine.  The problem seems to be now in actually referencing its functions.  When trying to build this class:</p>\n\n<pre><code>#include &lt;tins/tins.h&gt;\n#include &lt;cassert&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace Tins;\nint main() {\n\n    NetworkInterface iface = NetworkInterface::default_interface();\n\n    NetworkInterface::Info info = iface.addresses();\n\n    EthernetII eth(\"77:22:33:11:ad:ad\", info.hw_addr);\n\n    eth /= IP(\"localhost\", info.ip_addr);\n\n    eth /= TCP(13, 15);\n\n    eth /= RawPDU(\"I'm a payload!\");\n\n    PacketSender sender;\n\n    sender.send(eth, iface);\n}\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>cd '/home/oisin/NetBeansProjects/TCPPacket'\n/usr/bin/gmake -f Makefile CONF=Debug\n\"/usr/bin/gmake\" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf\ngmake[1]: Entering directory '/home/oisin/NetBeansProjects/TCPPacket'\n\"/usr/bin/gmake\"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux/tcppacket\ngmake[2]: Entering directory '/home/oisin/NetBeansProjects/TCPPacket'\nmkdir -p build/Debug/GNU-Linux\nrm -f \"build/Debug/GNU-Linux/main.o.d\"\ng++    -c -g -std=c++11 -MMD -MP -MF \"build/Debug/GNU-Linux/main.o.d\" -o build/Debug/GNU-Linux/main.o main.cpp\nmkdir -p dist/Debug/GNU-Linux\ng++     -o dist/Debug/GNU-Linux/tcppacket build/Debug/GNU-Linux/main.o \nbuild/Debug/GNU-Linux/main.o: In function `main':\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:26: undefined reference to `Tins::NetworkInterface::default_interface()'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:28: undefined reference to `Tins::NetworkInterface::addresses() const'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:30: undefined reference to `Tins::EthernetII::EthernetII(Tins::HWAddress&lt;6ul, unsigned char&gt; const&amp;, Tins::HWAddress&lt;6ul, unsigned char&gt; const&amp;)'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:32: undefined reference to `Tins::IPv4Address::IPv4Address(char const*)'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:32: undefined reference to `Tins::IP::IP(Tins::IPv4Address, Tins::IPv4Address)'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:34: undefined reference to `Tins::TCP::TCP(unsigned short, unsigned short)'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:36: undefined reference to `Tins::RawPDU::RawPDU(std::string const&amp;)'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:38: undefined reference to `Tins::PacketSender::DEFAULT_TIMEOUT'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:38: undefined reference to `Tins::NetworkInterface::NetworkInterface()'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:38: undefined reference to `Tins::PacketSender::PacketSender(Tins::NetworkInterface const&amp;, unsigned int, unsigned int)'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:40: undefined reference to `Tins::PacketSender::send(Tins::PDU&amp;, Tins::NetworkInterface const&amp;)'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:38: undefined reference to `Tins::PacketSender::~PacketSender()'\n/home/oisin/NetBeansProjects/TCPPacket/main.cpp:38: undefined reference to `Tins::PacketSender::~PacketSender()'\nbuild/Debug/GNU-Linux/main.o: In function `Tins::EthernetII&amp; Tins::operator/=&lt;Tins::EthernetII&gt;(Tins::EthernetII&amp;, Tins::PDU const&amp;)':\n/usr/local/include/tins/pdu.h:537: undefined reference to `Tins::PDU::inner_pdu(Tins::PDU*)'\nbuild/Debug/GNU-Linux/main.o: In function `Tins::EthernetII::~EthernetII()':\n/usr/local/include/tins/ethernetII.h:46: undefined reference to `vtable for Tins::EthernetII'\n/usr/local/include/tins/ethernetII.h:46: undefined reference to `Tins::PDU::~PDU()'\nbuild/Debug/GNU-Linux/main.o: In function `Tins::IP::~IP()':\n/usr/local/include/tins/ip.h:64: undefined reference to `vtable for Tins::IP'\n/usr/local/include/tins/ip.h:64: undefined reference to `Tins::PDU::~PDU()'\nbuild/Debug/GNU-Linux/main.o: In function `Tins::TCP::~TCP()':\n/usr/local/include/tins/tcp.h:79: undefined reference to `vtable for Tins::TCP'\n/usr/local/include/tins/tcp.h:79: undefined reference to `Tins::PDU::~PDU()'\nbuild/Debug/GNU-Linux/main.o: In function `Tins::RawPDU::~RawPDU()':\n/usr/local/include/tins/rawpdu.h:64: undefined reference to `vtable for Tins::RawPDU'\n/usr/local/include/tins/rawpdu.h:64: undefined reference to `Tins::PDU::~PDU()'\ncollect2: error: ld returned 1 exit status\nnbproject/Makefile-Debug.mk:62: recipe for target 'dist/Debug/GNU-Linux/tcppacket' failed\ngmake[2]: *** [dist/Debug/GNU-Linux/tcppacket] Error 1\ngmake[2]: Leaving directory '/home/oisin/NetBeansProjects/TCPPacket'\nnbproject/Makefile-Debug.mk:59: recipe for target '.build-conf' failed\ngmake[1]: *** [.build-conf] Error 2\ngmake[1]: Leaving directory '/home/oisin/NetBeansProjects/TCPPacket'\nnbproject/Makefile-impl.mk:39: recipe for target '.build-impl' failed\ngmake: *** [.build-impl] Error 2\n\nBUILD FAILED (exit value 2, total time: 1s)\n</code></pre>\n\n<p>Netbeans is using c++11 , I've enabled c++11 support with the <code>-DLIBTINS_ENABLE_CXX11=1</code> and I've run <code>ldconfig</code> along with restarting the VM, same errors.  </p>\n\n<p>I've tried linking the class with <code>g++ main.cpp -o main -ltins</code> to get these errors - </p>\n\n<pre><code>In file included from /usr/local/include/tins/tins.h:60:0,\n                 from main.cpp:14:\n/usr/local/include/tins/crypto.h:297:13: error: \u2018function\u2019 in namespace \u2018std\u2019 does not name a type\n     typedef std::function&lt;void(const std::string&amp;,\n             ^\n/usr/local/include/tins/crypto.h:308:13: error: \u2018function\u2019 in namespace \u2018std\u2019 does not name a type\n     typedef std::function&lt;void(const std::string&amp;,\n             ^\n/usr/local/include/tins/crypto.h:401:44: error: \u2018handshake_captured_callback_type\u2019 does not name a type\n     void handshake_captured_callback(const handshake_captured_callback_type&amp; callback);\n                                            ^\n/usr/local/include/tins/crypto.h:412:34: error: \u2018ap_found_callback_type\u2019 does not name a type\n     void ap_found_callback(const ap_found_callback_type&amp; callback);\n                                  ^\n/usr/local/include/tins/crypto.h:445:9: error: \u2018handshake_captured_callback_type\u2019 does not name a type\n         handshake_captured_callback_type handshake_captured_callback_;\n         ^\n/usr/local/include/tins/crypto.h:446:9: error: \u2018ap_found_callback_type\u2019 does not name a type\n         ap_found_callback_type ap_found_callback_;\n         ^\n</code></pre>\n\n<p>Help appreciated.</p>\n\n<p>EDIT</p>\n\n<p>Following on from dvnguyen's answer below, linking my <code>main.cpp</code> with <code>g++ app.cpp -o app -ltins -std=c++11</code> solved the above issues, but now I'm left with the following errors - </p>\n\n<pre><code>cd '/home/oisin/NetBeansProjects/TCPPacket'\n/usr/bin/gmake -f Makefile CONF=Debug\n\"/usr/bin/gmake\" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf\ngmake[1]: Entering directory '/home/oisin/NetBeansProjects/TCPPacket'\n\"/usr/bin/gmake\"  -f nbproject/Makefile-Debug.mk dist/Debug/GNU-Linux/tcppacket\ngmake[2]: Entering directory '/home/oisin/NetBeansProjects/TCPPacket'\nmkdir -p build/Debug/GNU-Linux\nrm -f \"build/Debug/GNU-Linux/main.o.d\"\ng++    -c -g -std=c++11 -MMD -MP -MF \"build/Debug/GNU-Linux/main.o.d\" -o build/Debug/GNU-Linux/main.o main.cpp\nmkdir -p dist/Debug/GNU-Linux\ng++     -o dist/Debug/GNU-Linux/tcppacket build/Debug/GNU-Linux/main.o -lmain\n/usr/lib64/gcc/x86_64-suse-linux/4.8/../../../../x86_64-suse-linux/bin/ld: cannot find -lmain\ncollect2: error: ld returned 1 exit status\nnbproject/Makefile-Debug.mk:62: recipe for target 'dist/Debug/GNU-Linux/tcppacket' failed\ngmake[2]: *** [dist/Debug/GNU-Linux/tcppacket] Error 1\ngmake[2]: Leaving directory '/home/oisin/NetBeansProjects/TCPPacket'\nnbproject/Makefile-Debug.mk:59: recipe for target '.build-conf' failed\ngmake[1]: *** [.build-conf] Error 2\ngmake[1]: Leaving directory '/home/oisin/NetBeansProjects/TCPPacket'\nnbproject/Makefile-impl.mk:39: recipe for target '.build-impl' failed\ngmake: *** [.build-impl] Error 2\n\nBUILD FAILED (exit value 2, total time: 2s)\n</code></pre>\n\n<p>I'm really clueless as to what I'm missing.</p>\n"}, {"tags": ["c++", "recursion", "data-structures", "linked-list"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1479319069, "post_id": 40638984, "comment_id": 68510314, "body": "In the result of your recursive version, I notice a repetition of the first input set after printing the second. Did you clear contents of the global vector after printing for each input set?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1479319125, "post_id": 40638984, "comment_id": 68510346, "body": "Ditch the global vector. The call stack is your data structure for the recursive approach."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479319137, "post_id": 40638984, "comment_id": 68510356, "body": "Please refrain asking questions about online code judge engines here. It&#39;s very  unlikely that anyone could tell you where you failed from their test cases, as these aren&#39;t disclosed usually. Even if what you tested was running at your local environment, you may have missed to test some edge cases which are applied in the online challenge. Be creative and try to find them. Additionally there&#39;s probably no value for such questions in the long term, other than cheating the online contest, and nothing is learned."}, {"owner": {"reputation": 379, "user_id": 5274722, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f299843af42a1d6f9b07e841a0337ba9?s=128&d=identicon&r=PG&f=1", "display_name": "Tolani", "link": "https://stackoverflow.com/users/5274722/tolani"}, "edited": false, "score": 0, "creation_date": 1479319184, "post_id": 40638984, "comment_id": 68510384, "body": "I commented the first implementation while running the second. does it affect the result"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1479319232, "post_id": 40638984, "comment_id": 68510424, "body": "No. Commented code doesn&#39;t get compiled."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1479319319, "post_id": 40638984, "comment_id": 68510480, "body": "Is anyone else bothered that we use using C++ to help with a C-style linked list?  Kinda feels like cheating."}, {"owner": {"reputation": 1580, "user_id": 6667256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c939d82ad703536dcfc9f9eee6dd819?s=128&d=identicon&r=PG&f=1", "display_name": "Franck", "link": "https://stackoverflow.com/users/6667256/franck"}, "edited": false, "score": 0, "creation_date": 1479319344, "post_id": 40638984, "comment_id": 68510499, "body": "The global vector is likely to contain [1, 2] before the call to <code>ReversePrint</code>."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1479319470, "post_id": 40638984, "comment_id": 68510575, "body": "@MichaelDorgan, I assure you, that if you remove the encapsulation and templates, a &quot;C++&quot; linked list will boil down to this."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1479319613, "post_id": 40638984, "comment_id": 68510666, "body": "Printing a linked list in reverse involves printing the rest of the list before printing the given node. Note that the &quot;rest of the list&quot; is stored as a <code>next</code> pointer.  Scrap everything you&#39;ve written. You have the function <code>ReversePrint(Node* head)</code>. Given <code>root</code>, how can you print the rest of the list, and then print <code>head</code>? Also take into account whether <code>head</code> is <code>NULL</code> or not."}], "answers": [{"tags": [], "owner": {"reputation": 26971, "user_id": 3073272, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/hofYF.jpg?s=128&g=1", "display_name": "GorvGoyl", "link": "https://stackoverflow.com/users/3073272/gorvgoyl"}, "is_accepted": true, "score": 6, "last_activity_date": 1479319789, "last_edit_date": 1479319789, "creation_date": 1479319587, "answer_id": 40639200, "question_id": 40638984, "link": "https://stackoverflow.com/questions/40638984/print-linked-list-elements-using-recursion/40639200#40639200", "title": "print Linked List elements using recursion", "body": "<p>Why so complicated?</p>\n\n<pre><code>/* Function to reverse print the linked list */\nvoid ReversePrint(Node* head)\n{\n    // Base case  \n    if (head == NULL)\n       return;\n\n    // print the list after head node\n    ReversePrint(head-&gt;next);\n\n    // After everything else is printed, print head\n    std::cout &lt;&lt; head-&gt;data &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2527, "user_id": 3572733, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/CraUz.jpg?s=128&g=1", "display_name": "Bhagwati Malav", "link": "https://stackoverflow.com/users/3572733/bhagwati-malav"}, "is_accepted": false, "score": 0, "last_activity_date": 1479436432, "creation_date": 1479436432, "answer_id": 40668466, "question_id": 40638984, "link": "https://stackoverflow.com/questions/40638984/print-linked-list-elements-using-recursion/40668466#40668466", "title": "print Linked List elements using recursion", "body": "<p>In case, you want to return reversed linked list:</p>\n\n<pre><code>  Node* List::reverseList()\n{\n    if(head == NULL) return;\n\n    Node *prev = NULL, *current = NULL, *next = NULL;\n    current = head;\n    while(current != NULL){\n        next = current-&gt;next;\n        current-&gt;next = prev;\n        prev = current;\n        current = next;\n    }\n    return prev;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 6804540, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95ac9ed31c38b2f785630c3f5ae0da9c?s=128&d=identicon&r=PG&f=1", "display_name": "Ramkumar lodhi", "link": "https://stackoverflow.com/users/6804540/ramkumar-lodhi"}, "is_accepted": false, "score": 0, "last_activity_date": 1570617556, "creation_date": 1570617556, "answer_id": 58302284, "question_id": 40638984, "link": "https://stackoverflow.com/questions/40638984/print-linked-list-elements-using-recursion/58302284#58302284", "title": "print Linked List elements using recursion", "body": "<p>You can reverse the linked list recursively then print the linked list.</p>\n\n<pre><code>Node* reverse(Node* node) \n{ \n    if (node == NULL) \n        return NULL; \n    if (node-&gt;next == NULL)\n    { \n        head = node; \n        return node; \n    } \n    Node* temp= reverse(node-&gt;next); \n    temp-&gt;next = node; \n    node-&gt;next = NULL; \n    return node;\n} \n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 5274722, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f299843af42a1d6f9b07e841a0337ba9?s=128&d=identicon&r=PG&f=1", "display_name": "Tolani", "link": "https://stackoverflow.com/users/5274722/tolani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1941, "favorite_count": 0, "accepted_answer_id": 40639200, "answer_count": 3, "score": 0, "last_activity_date": 1570617556, "creation_date": 1479318794, "last_edit_date": 1479319925, "question_id": 40638984, "link": "https://stackoverflow.com/questions/40638984/print-linked-list-elements-using-recursion", "title": "print Linked List elements using recursion", "body": "<p>I was solving the <a href=\"https://www.hackerrank.com/challenges/print-the-elements-of-a-linked-list-in-reverse/copy-from/32376898\" rel=\"nofollow noreferrer\">Print in reverse challenge</a> on Hackerrank </p>\n\n<blockquote>\n  <p>The <code>void ReversePrint(Node* head)</code> method takes one argument - the head of the linked list. You should NOT read\n  any input from stdin/console. The head may be empty so nothing should be printed. Print the elements of the linked list in reverse order to\n  stdout/console (using printf or cout) , one per line.</p>\n  \n  <p><strong>Sample Input</strong></p>\n  \n  <p>1 --> 2 --> NULL </p>\n  \n  <p>2 --> 1 --> 4 --> 5 --> NULL</p>\n  \n  <p><strong>Sample Output</strong></p>\n\n<pre><code>2\n1\n5\n4\n1\n2\n</code></pre>\n</blockquote>\n\n<p>I solved it using this</p>\n\n<pre><code>    #include &lt;vector&gt;\n    void ReversePrint(Node *head)\n{\n  // This is a \"method-only\" submission. \n  // You only need to complete this method. \n\n    std::vector&lt;int&gt; nodeList;\n    if(head != NULL){\n\n        while(head != NULL){\n            nodeList.push_back(head-&gt;data);\n            head = head-&gt;next;            \n        }\n\n        for (std::vector&lt;int&gt;::iterator it = nodeList.end()-1 ; it != nodeList.begin()-1; --it){\n            std::cout &lt;&lt; *it &lt;&lt;endl;\n       }\n    }\n\n}\n</code></pre>\n\n<p>It works perfectly but extending to use recursion provides the wrong answer, why is this happening?</p>\n\n<pre><code>std::vector&lt;int&gt; nodeList;\nvoid ReversePrint(Node *head){\n    if(head != NULL){\n        nodeList.push_back(head-&gt;data);\n        ReversePrint(head-&gt;next);\n    }\n    else{\n        for (std::vector&lt;int&gt;::iterator it = nodeList.end()-1 ; it != nodeList.begin()-1; --it){\n            std::cout &lt;&lt; *it &lt;&lt;endl;\n       }\n\n    }\n\n}\n</code></pre>\n\n<p>the result is</p>\n\n<pre><code>2\n1\n5\n4\n1\n2\n2\n1\n</code></pre>\n\n<p>NB: The structure of the Node is given as\n     struct Node\n      {\n         int data;\n         struct Node *next;\n      }</p>\n"}, {"tags": ["c++", "input", "console", "console-application", "codeblocks"], "comments": [{"owner": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 0, "creation_date": 1479318861, "post_id": 40638960, "comment_id": 68510180, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1413445/reading-a-password-from-stdcin\" title=\"reading a password from stdcin\">stackoverflow.com/questions/1413445/&hellip;</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479318874, "post_id": 40638960, "comment_id": 68510189, "body": "This is specific to the terminal you use. Nothing to do with standard c++."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 0, "creation_date": 1479318907, "post_id": 40638960, "comment_id": 68510205, "body": "@EmmanuelMathi-Amorim Not exactly as asked for."}, {"owner": {"reputation": 1, "user_id": 6617296, "user_type": "registered", "profile_image": "https://graph.facebook.com/1727233520882183/picture?type=large", "display_name": "Joshua Weiss", "link": "https://stackoverflow.com/users/6617296/joshua-weiss"}, "reply_to_user": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 0, "creation_date": 1479319287, "post_id": 40638960, "comment_id": 68510459, "body": "I need a clearer example, im confused by the question you sent, i&#39;m still new to c++ and I need a clearer example, could you unmark it off duplicate? or explain, thank you. @EmmanuelMathi-Amorim"}, {"owner": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 0, "creation_date": 1479319493, "post_id": 40638960, "comment_id": 68510593, "body": "There is no standard in C or C++ that allows you to block the user from seeing what he is typing in the terminal. However, there are platform specific methods of doing this. The code in the question I linked too allows you to hide inputted text on Windows and on Linux."}], "owner": {"reputation": 1, "user_id": 6617296, "user_type": "registered", "profile_image": "https://graph.facebook.com/1727233520882183/picture?type=large", "display_name": "Joshua Weiss", "link": "https://stackoverflow.com/users/6617296/joshua-weiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "closed_date": 1479318834, "answer_count": 0, "score": 0, "last_activity_date": 1479318700, "creation_date": 1479318700, "question_id": 40638960, "link": "https://stackoverflow.com/questions/40638960/how-to-clear-input-in-c-console-commands", "closed_reason": "Duplicate", "title": "How to clear input in C++ Console commands", "body": "<p>In the console for C++, how can I make it so when you type your input, and hit enter, the input doesn't show up on the console. Heres my code.\nLook at this gif gyazo, <a href=\"https://gyazo.com/8ac7196dbf3236d4a55ee1024809a7c9\" rel=\"nofollow noreferrer\">https://gyazo.com/8ac7196dbf3236d4a55ee1024809a7c9</a> \nI don't want that \"1\" to appear when you press enter. I'm using Code::Blocks by the way.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;windows.h&gt;\n\nusing namespace std;\n\nint main(){\n\nint input;\ncout &lt;&lt; \"I want the number thats underneath this to not show up, but still be inputted.\" &lt;&lt; endl;\ncin &gt;&gt; input;\n\n}//main\n</code></pre>\n"}, {"tags": ["c++", "copy-paste", "desktop", "cyrillic"], "comments": [{"owner": {"reputation": 11333, "user_id": 819742, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/39e2199f9782b9b9abab588071c20e68?s=128&d=identicon&r=PG", "display_name": "randominstanceOfLivingThing", "link": "https://stackoverflow.com/users/819742/randominstanceoflivingthing"}, "edited": false, "score": 0, "creation_date": 1479318410, "post_id": 40638829, "comment_id": 68509881, "body": "Usually if you do not have the fonts you will see the &quot;?????&quot;"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1479318411, "post_id": 40638829, "comment_id": 68509883, "body": "So your editor is not supporting unicode as I would guess..."}, {"owner": {"reputation": 7, "user_id": 7168970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89b3ef8fedc95768c0786f111e326f1?s=128&d=identicon&r=PG&f=1", "display_name": "Yaroslaw Bee", "link": "https://stackoverflow.com/users/7168970/yaroslaw-bee"}, "edited": false, "score": 0, "creation_date": 1479319625, "post_id": 40638829, "comment_id": 68510674, "body": "&quot;setlocale(LC_CTYPE, &quot;&quot;);       SetConsoleCP(1251);      SetConsoleOutputCP(1251);&quot;"}, {"owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 1, "creation_date": 1511651970, "post_id": 40638829, "comment_id": 81938160, "body": "What is &quot;Russian characters&quot;? Do you mean Cyrillic?"}, {"owner": {"reputation": 109227, "user_id": 1709587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cP8pZ.jpg?s=128&g=1", "display_name": "Mark Amery", "link": "https://stackoverflow.com/users/1709587/mark-amery"}, "reply_to_user": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "edited": false, "score": 1, "creation_date": 1511820454, "post_id": 40638829, "comment_id": 81997755, "body": "@Ziezi uh, presumably he means characters from the <a href=\"https://en.wikipedia.org/wiki/Russian_alphabet\" rel=\"nofollow noreferrer\">Russian alphabet</a>, which (at least as ignorant-westerner-me understands it) is one of <i>several</i> Cyrillic alphabets. Plenty of things are unclear in this question, but the meaning of the phrase &quot;Russian characters&quot; isn&#39;t one of them."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3953274"}, "is_accepted": false, "score": 0, "last_activity_date": 1489181569, "last_edit_date": 1489181569, "creation_date": 1479320539, "answer_id": 40639481, "question_id": 40638829, "link": "https://stackoverflow.com/questions/40638829/pasting-russian-in-desktop-application/40639481#40639481", "title": "Pasting russian in desktop application", "body": "<p>Try to go to Control Panel -> Regional Settings -> Language -> Additional parameters -> Change Windows interface language : Russian. \n<img src=\"https://i.stack.imgur.com/32k9q.jpg\" alt=\"enter image description here\"></p>\n"}], "owner": {"reputation": 7, "user_id": 7168970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89b3ef8fedc95768c0786f111e326f1?s=128&d=identicon&r=PG&f=1", "display_name": "Yaroslaw Bee", "link": "https://stackoverflow.com/users/7168970/yaroslaw-bee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1511651547, "creation_date": 1479318294, "last_edit_date": 1511651547, "question_id": 40638829, "link": "https://stackoverflow.com/questions/40638829/pasting-russian-in-desktop-application", "title": "Pasting russian in desktop application", "body": "<p>I created a simple desktop file editor in Dev C++.   </p>\n\n<p>There I can write Russian characters, but when I copy and paste Russian from other programs I see only \"?????\".   </p>\n\n<p>What can I do?</p>\n"}, {"tags": ["c++", "visual-c++", "sse"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 3, "creation_date": 1479318408, "post_id": 40638826, "comment_id": 68509880, "body": "<code>#define double float</code> or vice-versa"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479318490, "post_id": 40638826, "comment_id": 68509930, "body": "There&#39;s no way to save you from casting every single value."}, {"owner": {"reputation": 12073, "user_id": 527574, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e5b251b4ac8f0cb7942587ee8077cddb?s=128&d=identicon&r=PG", "display_name": "Michael Dorgan", "link": "https://stackoverflow.com/users/527574/michael-dorgan"}, "edited": false, "score": 0, "creation_date": 1479318555, "post_id": 40638826, "comment_id": 68509969, "body": "Are you looking to get the slight possible loss when converting back?  Otherwise, just convert one way and keep the original to save the convert back."}, {"owner": {"reputation": 372, "user_id": 4250197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/518c9f0d69344cec24fa74a4929b1794?s=128&d=identicon&r=PG&f=1", "display_name": "Emmanuel Mathi-Amorim", "link": "https://stackoverflow.com/users/4250197/emmanuel-mathi-amorim"}, "edited": false, "score": 2, "creation_date": 1479318558, "post_id": 40638826, "comment_id": 68509974, "body": "Why do you need to convert the float arrays to double and then back again? What does this accomplish?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1479318809, "post_id": 40638826, "comment_id": 68510141, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: SSE has many instructions named <code>CVT*</code>.  It may be that none go between these exact datatypes, but in the wider sense looking for an SSE instruction to parallelize casting is a reasonable thing."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479318870, "post_id": 40638826, "comment_id": 68510185, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 That&#39;s true but there could be a techniques that can add speed to the process for ex. using  ALU instead FPU."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479319035, "post_id": 40638826, "comment_id": 68510287, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 - the conversions in both directions can be done without casting."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1479319086, "post_id": 40638826, "comment_id": 68510324, "body": "@PeteBecker I&#39;m eager to read the answer now."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 2, "creation_date": 1479319412, "post_id": 40638826, "comment_id": 68510535, "body": "How about writing a naive loop and allowing the compiler to figure out the vectorisation?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1479319827, "post_id": 40638826, "comment_id": 68510769, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 - I think you missed my point. float to double does not require <b>casting</b>, nor does double to float; both can be done by implicit conversions."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1479319960, "post_id": 40638826, "comment_id": 68510843, "body": "@PeteBecker For whole arrays as well?"}], "answers": [{"comments": [{"owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "edited": false, "score": 0, "creation_date": 1479399391, "post_id": 40639245, "comment_id": 68550944, "body": "That&#39;s useful, but it works with 128-bit XMM registers, doesn&#39;t it? That is, only two values per command. Is there a flavor of those instructions that would employ YMM instead and handle 4 values?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "edited": false, "score": 0, "creation_date": 1479404098, "post_id": 40639245, "comment_id": 68553993, "body": "Yes of course, see the AVX equivalents, <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm256_cvtps_pd&amp;expand=1680,1680\" rel=\"nofollow noreferrer\">_mm256_cvtps_pd</a> and <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm256_cvtpd_ps&amp;expand=1680,1680,1621\" rel=\"nofollow noreferrer\">_mm256_cvtpd_ps</a>, although note that these may not give you any significant improvement over the SSE versions, for the reasons noted above."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 5, "last_activity_date": 1479320497, "last_edit_date": 1479320497, "creation_date": 1479319742, "answer_id": 40639245, "question_id": 40638826, "link": "https://stackoverflow.com/questions/40638826/float-array-to-double-array-and-back-quickly/40639245#40639245", "title": "Float array to double array and back, quickly", "body": "<p>You can use SSE for this:</p>\n\n<p><code>float</code> -> <code>double</code>: <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_cvtps_pd&amp;expand=1679\" rel=\"nofollow noreferrer\"><code>_mm_cvtps_pd</code></a></p>\n\n<p><code>double</code> -> <code>float</code>: <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_cvtpd_ps&amp;expand=1679\" rel=\"nofollow noreferrer\"><code>_mm_cvtpd_ps</code></a></p>\n\n<p>Try a simple scalar loop first though as (a) the compiler may vectorize for you anyway and (b) you may well be memory-bound, so SIMD optimisation may not help much.</p>\n"}, {"comments": [{"owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "edited": false, "score": 0, "creation_date": 1479328239, "post_id": 40640228, "comment_id": 68515458, "body": "The library needs a complete array. I don&#39;t have the source around, I read and convert on the fly. Still, two for the price of one :)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "edited": false, "score": 0, "creation_date": 1479328999, "post_id": 40640228, "comment_id": 68515916, "body": "@SevaAlekseyev: yup, whatever you can do to minimize the number of times your data has to move between cache and RAM.  If your array is huge, it might be worth using NT stores in the conversion loop.  Or maybe while writing both float and double, using NT stores for the one that will be used second?  But if everything fits in L3, don&#39;t do that."}], "tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 1, "last_activity_date": 1479322963, "creation_date": 1479322963, "answer_id": 40640228, "question_id": 40638826, "link": "https://stackoverflow.com/questions/40638826/float-array-to-double-array-and-back-quickly/40640228#40640228", "title": "Float array to double array and back, quickly", "body": "<blockquote>\n  <p>A data structure is stored as floats, but a third party processing library expects an array of double.</p>\n</blockquote>\n\n<p>Can it process in cache-size chunks?</p>\n\n<p>If it wasn't stuck in a 3rd-party library, the best thing would be to convert on the fly, loading a pair of doubles from a pair of floats with <a href=\"https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_cvtps_pd&amp;expand=1679\" rel=\"nofollow noreferrer\"><code>_mm_cvtps_pd</code></a>, and similarly storing back to float, so you never have an array of <code>double</code> in memory.</p>\n\n<p>But if you can't do that, you can at least feed the data to the library while it's still hot in L1 or L2 cache after reading some floats and writing some doubles.</p>\n\n<p>Actually, if it's a \"wire format\", then presumably the data has to go through the CPU on the way to memory in the first place, unless you have a zero-copy receive API that DMAs right into your buffer.  The ideal place for conversion might be in small chunks as you receive each packet.  Either copy with conversion directly to <code>double</code>, or copy to both <code>float</code> and <code>double</code> arrays if you also need the original <code>float</code> data.</p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1479345023, "post_id": 40644953, "comment_id": 68522139, "body": "That&#39;s way too many ALU instructions to be worth doing. (<a href=\"https://godbolt.org/g/1EURvH\" rel=\"nofollow noreferrer\">godbolt.org/g/1EURvH</a>).  I think even if you manually vectorized it to go from 64 bits to 128 bits (like the packed convert instruction) it wouldn&#39;t be worth spending any cycles on using execution resources for this instead of FPU conversion.  <code>CVTPS2PD xmm, m64</code> is 2 uops on Haswell (port 0 and a load port), with one-per-clock throughput.  Same for the ymm, m128 version.  So Intel CPUs can already convert as fast as they can store (at one vector result per clock).  (source: <a href=\"http://agner.org/optimize/\" rel=\"nofollow noreferrer\">agner.org/optimize</a>)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479345160, "post_id": 40644953, "comment_id": 68522173, "body": "Mixing this in to a load/convert/store loop would only slow it down, on x86."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479346474, "post_id": 40644953, "comment_id": 68522544, "body": "@PeterCordes maybe you are right as it&#39;s 2x slower then normal conversion on x64 and as I said it&#39;s not a solution it&#39;s just a example that you can do it. I also don&#39;t have proper skills to optimize it on assembly level but I know that you can parallel floating and integer operations on single core and this is base for me to think that he could use solution like that."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479352895, "post_id": 40644953, "comment_id": 68524061, "body": "Yeah, it&#39;s a good idea, it just turns out that it&#39;s not helpful in practice.  I regret downvoting (maybe make an edit to point out that it&#39;s not helpful in practice so I can undo it :P)."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479352949, "post_id": 40644953, "comment_id": 68524076, "body": "On Intel CPUs, the vector execution units are on the same ports as integer execution units.  Even if that wasn&#39;t the case, bottlenecks on total uop throughput are an issue (if data is hot in L1 cache so you don&#39;t just bottleneck on memory bandwidth).  It might possibly be a win to mix in one bithack conversion into an unrolled loop of 7 CVTPS2PD vector conversions, but even doing the scalar stores is a problem.  (Intel and AMD CPUs can only do one store per clock, regardless of width, and spending that cycle on a 64b scalar store is worse than spending it on a 256b or 128b vector store)."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479353216, "post_id": 40644953, "comment_id": 68524133, "body": "If you can come up with anything for double-&gt;float, that could be useful, especially for non-AVX, since an SSE vector of doubles only turns into a 64bit pair of floats.  CVTPD2PS is 2 uops for p1 and p5 (on Haswell), for the SSE or 256b AVX version, so it would take an extra shuffle (p5) to combine two vectors into a maximum-width vector to store."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479355628, "post_id": 40644953, "comment_id": 68524658, "body": "@PeterCordes Will do double to float tomorrow as is 5 AM in Poland right now ;) but it will have probably same complexity as float to double."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1479355805, "post_id": 40644953, "comment_id": 68524696, "body": "Right, I&#39;d expect that or worse.  (And it will probably be worse for accuracy since you&#39;ll have to truncate the mantissa I guess.)  But the point is that it <i>might</i> be useful to mix in one integer-based conversion per 7 vector conversions for the double-&gt;float direction or something, because that direction results in only half-width vector stores, or else an extra shuffle per full-width store.  So there&#39;s maybe some spare execution resources left over that you could fill by mixing in integer operations."}, {"owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1480951001, "post_id": 40644953, "comment_id": 69164213, "body": "@PeterCordes it take me a long time but I finally done it and make it IEEE compatible but make it also a little bit slower."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1480951571, "post_id": 40644953, "comment_id": 69164638, "body": "Nice.  It&#39;s potentially useful to have a reference integer implementation, even if it&#39;s slow."}], "tags": [], "owner": {"reputation": 3454, "user_id": 2483065, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/445fde8324a574466843732d0934404d?s=128&d=identicon&r=PG&f=1", "display_name": "Logman", "link": "https://stackoverflow.com/users/2483065/logman"}, "is_accepted": false, "score": 2, "last_activity_date": 1480950859, "last_edit_date": 1480950859, "creation_date": 1479343676, "answer_id": 40644953, "question_id": 40638826, "link": "https://stackoverflow.com/questions/40638826/float-array-to-double-array-and-back-quickly/40644953#40644953", "title": "Float array to double array and back, quickly", "body": "<p>This is not an actual answer to your question but just a example how to make only ALU work on conversion. You can parallel it with FPU cast to get more speed if you implement it properly. This solution should be 100% IEEE compatible.</p>\n\n<p>Update: I make this slower and more readable but IEEE compatible as intel implement it in 3rd generation of i7 (to the point where even NAN conversion is binary equale)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n\n#include &lt;math.h&gt;\n\nvoid toDouble(float *inData, double *outData, int count)\n{\n    if (count % 2)\n    {\n        std::cout &lt;&lt; \"Error count must be divided by 2\" &lt;&lt; std::endl;\n        return;\n    }\n\n    unsigned long long *pfData = (unsigned long long *)(inData);\n    unsigned long long *pdData = (unsigned long long *)(outData);\n\n    unsigned long long *pfDataEnd = pfData + count / 2;\n\n    for (int i = 0; pfData&lt;pfDataEnd; pfData++, pdData++, i += 2)\n    {\n        unsigned long long cl;\n\n        unsigned long long S1 = (*pfData &amp; 0x80000000ull) &lt;&lt; 32;\n        unsigned long long fE1 = (*pfData &amp; 0x7F800000ull) &lt;&lt; 32;\n        unsigned long long F1 = (*pfData &amp; 0x007FFFFFull) &lt;&lt; 29;\n\n        for (cl = 0; !fE1 &amp;&amp; F1 &amp;&amp; !(F1 &amp; 0x7FF0000000000000ull); cl++)\n            F1 &lt;&lt;= 1;\n        if (cl &gt; 0)\n            cl--;\n\n        unsigned long long dE1 = (fE1 == 0x7F80000000000000ull) ? 0x7FF0000000000000 : ((fE1 | F1) ? (fE1 &gt;&gt; 3) + 0x3800000000000000ull - cl * 0x0010000000000000ull : 0ull);\n\n        F1 &amp;= 0x000FFFFFFFFFFFFFull;\n\n        *pdData = S1 | dE1 | F1;\n\n        pdData++;\n\n        unsigned long long S2 = *pfData &amp; 0x8000000000000000ull;\n        unsigned long long fE2 = (*pfData &amp; 0x7F80000000000000ull);\n        unsigned long long F2 = (*pfData &amp; 0x007FFFFF00000000ull) &gt;&gt; 3;\n\n        for (cl = 0; !fE2 &amp;&amp; F2 &amp;&amp; !(F2 &amp; 0x7FF0000000000000ull); cl++)\n            F2 &lt;&lt;= 1;\n        if (cl &gt; 0)\n            cl--;\n\n        unsigned long long dE2 = (fE2==0x7F80000000000000ull) ? 0x7FF0000000000000 : ( (fE2 | F2) ? (fE2 &gt;&gt; 3) + 0x3800000000000000ull - cl * 0x0010000000000000ull : 0ull);\n\n        F2 &amp;= 0x000FFFFFFFFFFFFFull;\n\n        *pdData = S2 | dE2 | F2;\n\n        if (i == 126)\n            continue;\n    }\n}\n\nvoid toFloat(double *inData, float *outData, int count)\n{\n    if (count % 2)\n    {\n        std::cout &lt;&lt; \"Error count must be divided by 2\" &lt;&lt; std::endl;\n        return;\n    }\n\n    unsigned long long *pdData = (unsigned long long *)(inData);\n    unsigned long long *pfData = (unsigned long long *)(outData);\n\n    unsigned long long *pfDataEnd = pfData + count / 2;\n\n    for (int i=0; pfData&lt;pfDataEnd; pfData++, pdData+=2,i+=2)\n    {\n        unsigned long long S1 = (*pdData &amp; 0x8000000000000000ull);\n        unsigned long long dE1 = (*pdData &amp; 0x7FF0000000000000ull);\n        unsigned long long fE1 = (dE1 &lt;= 0x3800000000000000ull) ? 0ull : ((dE1 &gt;= 0x4800000000000000ull) ? 0x0FF0000000000000ull : (dE1 - 0x3800000000000000ull));\n        unsigned long long F1 = (dE1 &lt;= 0x3800000000000000ull) ? ((dE1 &lt; 0x3600000000000000ull) ? 0ull : ((*pdData &amp; 0x000FFFFFFFFFFFFFull | 0x0010000000000000ull) &gt;&gt; ((0x3800000000000000ull - dE1 &gt;&gt; 52) + 1))) : ((dE1 &gt;= 0x47F0000000000000ull) ? (((dE1 == 0x7FF0000000000000ull) &amp;&amp; (*pdData &amp; 0x000FFFFFFFFFFFFFull)) ? 0x0008000000000000ull : 0ull) : (*pdData &amp; 0x000FFFFFFFFFFFFFull));\n        F1 += (((F1 &amp; 0x0000000010000000ull) &amp;&amp; ((F1 &amp; 0x0000000020000000ull) || (F1 &amp; 0x000000000FFFFFFFull))) ? 0x0000000020000000ull : 0ull); //rounding\n        fE1 += F1 &amp; 0x7FF0000000000000ull;\n        F1 &amp;= 0x000FFFFFE0000000ull;\n\n        unsigned long long S2 = (*(pdData+1) &amp; 0x8000000000000000ull);\n        unsigned long long dE2 = (*(pdData+1) &amp; 0x7FF0000000000000ull);\n        unsigned long long fE2 =  ( dE2 &lt;= 0x3800000000000000ull) ? 0ull : ((dE2 &gt;= 0x4800000000000000ull) ? 0x0FF0000000000000ull : (dE2 - 0x3800000000000000ull));\n        unsigned long long F2 = (dE2 &lt;= 0x3800000000000000ull) ? ((dE2 &lt; 0x3600000000000000ull) ? 0ull : ((*(pdData + 1) &amp; 0x000FFFFFFFFFFFFFull | 0x0010000000000000ull) &gt;&gt; ((0x3800000000000000ull - dE2 &gt;&gt; 52) + 1))) : ((dE2 &gt;= 0x47F0000000000000ull) ? (((dE2 == 0x7FF0000000000000ull) &amp;&amp; (*(pdData+1) &amp; 0x000FFFFFFFFFFFFFull)) ? 0x0008000000000000ull : 0ull) : (*(pdData + 1) &amp; 0x000FFFFFFFFFFFFFull));\n\n        F2 += (((F2 &amp; 0x0000000010000000ull) &amp;&amp; ((F2 &amp; 0x0000000020000000ull) || (F2 &amp; 0x000000000FFFFFFFull))) ? 0x0000000020000000ull : 0ull); //rounding\n        fE2 += F2 &amp; 0x7FF0000000000000ull;\n        F2 &amp;= 0x000FFFFFE0000000ull;\n\n        *pfData = S2 | ((fE2 | F2) &lt;&lt; 3) | ((S1 | ((fE1 | F1) &lt;&lt; 3)) &gt;&gt; 32);\n\n        if (i == 88)\n            continue;\n\n    }\n}\n\nint valTestFtoD(float *inData, double *outData, int count)\n{\n    for (int i = 0; i &lt; count; i++)\n    {\n        if ((((double)inData[i]) != outData[i]) &amp;&amp; ((inData[i] == inData[i]) || (outData[i] == outData[i])))\n            return i;\n    }\n    return -1;\n}\n\nint valTestDtoF(double *inData, float*outData, int count)\n{\n    for (int i = 0; i &lt; count; i++)\n    {\n        if ((((float)inData[i]) != outData[i]) &amp;&amp; ((inData[i] == inData[i]) || (outData[i] == outData[i])))\n            return i;\n    }\n    return -1;\n}\n\nvoid testFloatToDouble()\n{\n    std::cout &lt;&lt; \"\\nSTART Float to Double TEST\\n\";\n    int elemNum = 1024 * 1024 * 8;\n    float *f_arr = new float[elemNum];\n    double *d_arr = new double[elemNum];\n\n    auto start = std::chrono::steady_clock::now();\n    f_arr[0] = 2.0f;\n    for (int i = 1; i &lt; elemNum; i++)\n    {\n        f_arr[i] = i / f_arr[i - 1];\n        d_arr[i] = 0.0f;\n    }\n    long long duration = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now() - start).count();\n    std::cout &lt;&lt; \"init of floats and doubles done in \" &lt;&lt; duration &lt;&lt; std::endl;\n\n    start = std::chrono::steady_clock::now();\n    for (int i = 0; i &lt; elemNum; i++)\n    {\n        d_arr[i] = f_arr[i];\n    }\n    duration = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now() - start).count();\n    std::cout &lt;&lt; \"cast to double done in \" &lt;&lt; duration &lt;&lt; std::endl;\n\n    start = std::chrono::steady_clock::now();\n    float pi = 3.14159265358979323846;\n    float e = 2.71828182845904523536;\n    f_arr[0] = pi;\n    d_arr[0] = 0.0;\n    for (int i = 1; i &lt; elemNum; i++)\n    {\n        f_arr[i] = (e + i) / f_arr[i - 1];\n        d_arr[i] = 0.0;\n    }\n    duration = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now() - start).count();\n    std::cout &lt;&lt; \"init of floats and doubles done in \" &lt;&lt; duration &lt;&lt; std::endl;\n\n    start = std::chrono::steady_clock::now();\n    toDouble(f_arr, d_arr, elemNum);\n    duration = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now() - start).count();\n    std::cout &lt;&lt; \"toDouble done in \" &lt;&lt; duration &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"toDouble validation test \";\n    int errorPos = valTestFtoD(f_arr, d_arr, elemNum);\n    if (errorPos &lt; 0)\n        std::cout &lt;&lt; \"OK\" &lt;&lt; std::endl;\n    else\n    {\n        std::cout &lt;&lt; \"FAIL at \" &lt;&lt; errorPos &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"float [\" &lt;&lt; errorPos &lt;&lt; \"]= \" &lt;&lt; f_arr[errorPos] &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"double[\" &lt;&lt; errorPos &lt;&lt; \"]= \" &lt;&lt; d_arr[errorPos] &lt;&lt; std::endl;\n    }\n\n    delete[] f_arr;\n    delete[] d_arr;\n\n    std::cout &lt;&lt; \"END TEST\\n\";\n}\n\nvoid testDoubleToFloat()\n{\n    std::cout &lt;&lt; \"\\nSTART Double to Float TEST\\n\";\n    int elemNum = 1024 *1024 * 8;\n    float *f_arr = new float[elemNum];\n    double *d_arr = new double[elemNum];\n\n    auto start = std::chrono::steady_clock::now();\n    d_arr[0] = 2.0f;\n    for (int i = 1; i &lt; elemNum; i++)\n    {\n        d_arr[i] = i / d_arr[i - 1];\n        f_arr[i] = 0.0f;\n    }\n    long long duration = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now() - start).count();\n    std::cout &lt;&lt; \"init of floats and doubles done in \" &lt;&lt; duration &lt;&lt; std::endl;\n\n    start = std::chrono::steady_clock::now();\n    for (int i = 0; i &lt; elemNum; i++)\n    {\n        f_arr[i] = (float)d_arr[i];\n    }\n    duration = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now() - start).count();\n    std::cout &lt;&lt; \"cast to float done in \" &lt;&lt; duration &lt;&lt; std::endl;\n\n    start = std::chrono::steady_clock::now();\n\n    double pi = 3.14159265358979323846;\n    double e = 2.71828182845904523536;  \n\n    d_arr[0] = pi;      \n    f_arr[0] = 0.0f;\n    for (int i = 1; i &lt; elemNum; i++)\n    {       \n        d_arr[i] = (e+i) / d_arr[i - 1];\n\n        f_arr[i] = 0.0f;\n    }\n\n\n\n    duration = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now() - start).count();\n    std::cout &lt;&lt; \"init of floats and doubles done in \" &lt;&lt; duration &lt;&lt; std::endl;\n\n    start = std::chrono::steady_clock::now();\n    toFloat(d_arr, f_arr, elemNum);\n    duration = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(std::chrono::steady_clock::now() - start).count();\n    std::cout &lt;&lt; \"toFloat done in \" &lt;&lt; duration &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"toFloat validation test \";\n    int errorPos = valTestDtoF(d_arr, f_arr, elemNum);\n    if (errorPos &lt; 0)\n        std::cout &lt;&lt; \"OK\" &lt;&lt; std::endl;\n    else\n    {\n        std::cout &lt;&lt; \"FAIL at \" &lt;&lt; errorPos &lt;&lt; std::endl;           \n        std::cout &lt;&lt; \"double[\" &lt;&lt; errorPos &lt;&lt; \"]= \" &lt;&lt; d_arr[errorPos] &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"float[\" &lt;&lt; errorPos &lt;&lt; \"]= \" &lt;&lt; f_arr[errorPos] &lt;&lt; std::endl;\n    }\n\n    delete[] f_arr;\n    delete[] d_arr;\n\n    std::cout &lt;&lt; \"END TEST\\n\";\n}\n\nint main()\n{\n    testFloatToDouble();\n    testDoubleToFloat();\n}\n</code></pre>\n\n<p><a href=\"http://cpp.sh/35jpd\" rel=\"nofollow noreferrer\">online example</a></p>\n"}], "owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3726, "favorite_count": 2, "accepted_answer_id": 40639245, "answer_count": 3, "score": 3, "last_activity_date": 1480950859, "creation_date": 1479318286, "last_edit_date": 1479319462, "question_id": 40638826, "link": "https://stackoverflow.com/questions/40638826/float-array-to-double-array-and-back-quickly", "title": "Float array to double array and back, quickly", "body": "<p>I need to convert large arrays of <code>float</code> in memory to arrays of <code>double</code> and back. Are there any SSE compiler intrinsics in Visual C++ 15 update 3 that would help?</p>\n\n<p>EDIT: it's a conversion between two wire formats, so #define won't help. A data structure is stored as floats, but a third party processing library expects an array of double.</p>\n"}, {"tags": ["c++", "android-ndk", "cmake", "cross-compiling"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1479325124, "post_id": 40638704, "comment_id": 68513674, "body": "<code>... I can see from cmake-gui that the variable is not set</code> - <code>cmake-gui</code> shows only <i>cached</i> variables. You may use <code>SET(CMAKE_AR ... CACHE PATH &quot;Archiver&quot;)</code>."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1479326950, "post_id": 40638704, "comment_id": 68514719, "body": "&quot;Is there a way to make it more condensed?&quot; good luck with that. Cmake is a great tool, but the syntax and language behaviour is garbage. It&#39;s a real shame (IMHO) that kitware didn&#39;t write it in python :("}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1479376028, "post_id": 40638704, "comment_id": 68534314, "body": "@RichardHodges I do have python, but asking all my colleagues to install it just for being able to build our software wouldn&#39;t have made our life easier. And making a &quot;complete independent&quot; program out of python is not trivial."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1479376111, "post_id": 40638704, "comment_id": 68534384, "body": "@Tsyvarev There are exceptions, like if you set <code>CMAKE_C_COMPILER</code>."}], "answers": [{"comments": [{"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1479375788, "post_id": 40641771, "comment_id": 68534124, "body": "The release of CMake 3.7 seems to be synchronized with my question :). Thank you for this very relevant answer, setting those variables the tools are indeed found but I  cannot find a way to convince CMake to use llvm: even this is not sufficient: <code>set(CMAKE_C_COMPILER   &lt;full path to the compiler&gt; CACHE PATH &quot;C compiler&quot;)</code>. In all cases, it will try use the gcc/g++ available in the standalone toolchain."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1479375871, "post_id": 40641771, "comment_id": 68534192, "body": "In the specific workaround I tried, CMake will say <code>You have changed variables that require your cache to be deleted. Configure will be re-run and you may have to reset some variables. The following variables have changed: CMAKE_C_COMPILER= &lt;my full path&gt; CMAKE_CXX_COMPILER= &lt;my full path&gt;</code>, independently from whatever order I choose for the variable definition."}, {"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1479376293, "post_id": 40641771, "comment_id": 68534504, "body": "@Antonio I&#39;ve to run some tests with the latest ADK and CMake versions to see if I can reproduce your problem. I&#39;ll update my answer accordingly later today. But I&#39;m familiar with the last error message you got: if you change <code>CMAKE_C_COMPILER</code> or <code>CMAKE_CXX_COMPILER</code> you best start from an empty binary output directory again (it&#39;s more or less the same as if you would have changed the generator to be used)."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1479378388, "post_id": 40641771, "comment_id": 68536070, "body": "I had also to revert my CMake installation: my &quot;old&quot; toolchain file won&#39;t work anymore!! With CMake 3.6.3 everything is fine. Probably it&#39;s better to wait until they polish the 3.7 release."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1479378395, "post_id": 40641771, "comment_id": 68536075, "body": "Tested on 3.6.3: <code>Using SET(CMAKE_C_COMPILER_TARGET aarch64-linux-android)</code> and <code>SET(CMAKE_CXX_COMPILER_TARGET aarch64-linux-android)</code> removes the necessity of the <code>find_program</code> commands for all tools! I think for the moment that should be the first part of your answer."}, {"owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1479416503, "post_id": 40641771, "comment_id": 68560984, "body": "@Antonio Glad I could help. I&#39;ve just run a few tests and with setting the <code>CMAKE_SYSROOT</code> variable it did work for me. See my updated answer."}], "tags": [], "owner": {"reputation": 31426, "user_id": 4763489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89773f016f1f4cc2c4e790a6c3f7b004?s=128&d=identicon&r=PG&f=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/4763489/florian"}, "is_accepted": true, "score": 3, "last_activity_date": 1479416380, "last_edit_date": 1479416380, "creation_date": 1479328399, "answer_id": 40641771, "question_id": 40638704, "link": "https://stackoverflow.com/questions/40638704/cmake-cross-compiling-finding-tools/40641771#40641771", "title": "Cmake cross compiling: finding tools", "body": "<p>The good new is that Android NDK support got a lot easier with the latest CMake 3.7 release. See <a href=\"https://blog.kitware.com/kitware-increases-android-support-in-cmake-3-7/\" rel=\"nofollow noreferrer\">Kitware Increases Android Support in CMake 3.7</a> and <a href=\"https://cmake.org/cmake/help/git-master/manual/cmake-toolchains.7.html#cross-compiling-for-android\" rel=\"nofollow noreferrer\">Cross Compiling for Android</a>.</p>\n\n<p><strong>Edit:</strong> I have successfully run a test with CMake 3.7 (e.g. installed ADK to root on my Windows PC):</p>\n\n<p><strong>toolchain.cmake</strong></p>\n\n<pre><code>set(CMAKE_SYSTEM_NAME Android)\nset(CMAKE_SYSROOT \"C:/android-ndk-r13b/platforms/android-24/arch-arm64\")\n</code></pre>\n\n<p>And used e.g. the <a href=\"https://ninja-build.org/\" rel=\"nofollow noreferrer\"><code>Ninja</code></a> makefile generator:</p>\n\n<pre><code>&gt; cmake -DCMAKE_TOOLCHAIN_FILE=../toolchain.cmake -G \"Ninja\" ..\n-- Android: Targeting API '24' with architecture 'arm64', ABI 'arm64-v8a', and processor 'aarch64'\n-- Android: Selected GCC toolchain 'aarch64-linux-android-4.9'\n-- The C compiler identification is GNU 4.9.0\n-- The CXX compiler identification is GNU 4.9.0\n</code></pre>\n\n<p><strong>Simplified Toolchains in General</strong></p>\n\n<p>I've made some good experiences with minimal toolchain files and generally - if you want to specify tool paths specifically - using cached variables in the toolchain file. </p>\n\n<p>See <a href=\"https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html#cross-compiling-using-clang\" rel=\"nofollow noreferrer\">this minimal example</a> from CMake's documentation, which would translate in your case into something like:</p>\n\n<pre><code>set(CMAKE_SYSTEM_NAME Android)\nset(CMAKE_SYSTEM_PROCESSOR arm)\n\nset(CMAKE_C_COMPILER &lt;path_to_my_llvm_directory&gt;/clang.cmd)\nset(CMAKE_C_COMPILER_TARGET aarch64-linux-android)\nset(CMAKE_CXX_COMPILER &lt;path_to_my_llvm_directory&gt;/clang++.cmd)\nset(CMAKE_CXX_COMPILER_TARGET aarch64-linux-android)\n</code></pre>\n\n<p>Note that specifying <a href=\"https://cmake.org/cmake/help/latest/variable/CMAKE_SYSTEM_NAME.html\" rel=\"nofollow noreferrer\"><code>CMAKE_SYSTEM_NAME</code></a> is essential to enable crosscompiling.</p>\n\n<p><strong>Why specifying <code>CMAKE_AR</code> didn't work</strong></p>\n\n<p>Regarding your <code>CMAKE_AR</code> problem please note that CMake itself does use <code>find_program()</code> to find <code>ar.exe</code>. Since <code>find_program()</code> does cache its results, you have to prefill <code>CMAKE_AR</code> also as cached variable (see <a href=\"http://kwwidgets.org/Bug/view.php?id=13038\" rel=\"nofollow noreferrer\">0013038: cannot set CMAKE_AR when cross-compiling Fortran-only project</a>).</p>\n"}], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2727, "favorite_count": 0, "accepted_answer_id": 40641771, "answer_count": 1, "score": 2, "last_activity_date": 1479416380, "creation_date": 1479317917, "last_edit_date": 1479377890, "question_id": 40638704, "link": "https://stackoverflow.com/questions/40638704/cmake-cross-compiling-finding-tools", "title": "Cmake cross compiling: finding tools", "body": "<p>I am using a standalone toolchain made from the android ndk13b. It works fine, but to find all the tools (linker, archiver etc.) I have a quite verbose section in my toolchain file. <strong>Is there a way to make it more condensed?</strong></p>\n\n<pre><code>SET(COMPILER_PATH   \"&lt;path_to_my_llvm_directory&gt;\")\n\nSET(CMAKE_TOOLCHAIN_PREFIX aarch64-linux-android-) #In theory should allow to find minor tools like ar and objdump, see http://stackoverflow.com/a/7032021/2436175\nfind_program(CMAKE_C_COMPILER   clang.cmd PATH ${COMPILER_PATH})\nfind_program(CMAKE_CXX_COMPILER clang++.cmd PATH ${COMPILER_PATH})\nfind_program(CMAKE_AR ${CMAKE_TOOLCHAIN_PREFIX}ar.exe PATHS ${COMPILER_PATH})\nfind_program(CMAKE_RANLIB ${CMAKE_TOOLCHAIN_PREFIX}ranlib.exe PATHS ${COMPILER_PATH})\nfind_program(CMAKE_LINKER ${CMAKE_TOOLCHAIN_PREFIX}ld.exe PATHS ${COMPILER_PATH})\nfind_program(CMAKE_NM ${CMAKE_TOOLCHAIN_PREFIX}nm.exe PATHS ${COMPILER_PATH})\nfind_program(CMAKE_OBJCOPY ${CMAKE_TOOLCHAIN_PREFIX}objcopy.exe PATHS ${COMPILER_PATH})\nfind_program(CMAKE_OBJDUMP ${CMAKE_TOOLCHAIN_PREFIX}objdump.exe PATHS ${COMPILER_PATH})\nfind_program(CMAKE_STRIP ${CMAKE_TOOLCHAIN_PREFIX}strip.exe PATHS ${COMPILER_PATH})\n</code></pre>\n\n<p>What didn't work:</p>\n\n<ul>\n<li>Not explicitly using <code>find_program</code> -> It finds some other tools from some other mingw toolchain I have in my path</li>\n<li>Setting <a href=\"https://cmake.org/cmake/help/latest/variable/CMAKE_FIND_ROOT_PATH.html\" rel=\"nofollow noreferrer\"><code>CMAKE_FIND_ROOT_PATH</code></a> to <code>${COMPILER_PATH}</code>. It won't even find the compiler at that point. I can workaround that by setting the compiler instead with <code>SET(CMAKE_C_COMPILER   ${COMPILER_PATH}/clang.cmd)</code> (same for clang++), but it still doesn't find the other tools</li>\n<li>Trying various flags with <a href=\"https://cmake.org/cmake/help/latest/command/find_program.html\" rel=\"nofollow noreferrer\"><code>find_program</code></a>, especially <code>ONLY_CMAKE_FIND_ROOT_PATH</code></li>\n</ul>\n\n<p>Note that I found <code>find_program</code> to be the only workaround to find the tools, because for example the following won't work: </p>\n\n<pre><code>SET(CMAKE_AR ${COMPILER_PATH}/${CMAKE_TOOLCHAIN_PREFIX}ar.exe\n</code></pre>\n\n<p>(The archive operation will fail and I can see from cmake-gui that the variable is not set).</p>\n"}, {"tags": ["c++", "usrp", "uhd"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1479377426, "post_id": 40638689, "comment_id": 68535363, "body": "No, not generally.  What you&#39;d do, optimally, is to add that register address somewhere in the ad9361_driver header files, then add a property tree entry that calls a method that sets the register. Then, you could call that through the property tree (which is a bit awkward, but works)"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1479377461, "post_id": 40638689, "comment_id": 68535392, "body": "But I&#39;m 90% sure this isn&#39;t really what you need \u2013 this might be a case oft the <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY problem</a>"}, {"owner": {"reputation": 1, "user_id": 7168794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2ea38ee201a428e7dd6b51a9aa67b8?s=128&d=identicon&r=PG&f=1", "display_name": "user7168794", "link": "https://stackoverflow.com/users/7168794/user7168794"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1479512210, "post_id": 40638689, "comment_id": 68605607, "body": "Well, to ensure that I am asking the right question, I&#39;ll start by letting you know I am trying to have a c++ script use registers on the ad9361 within the E310. My issue comes with not quite understanding where exactly I needed to define them or have them accessible for a script to communicate with."}], "owner": {"reputation": 1, "user_id": 7168794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2ea38ee201a428e7dd6b51a9aa67b8?s=128&d=identicon&r=PG&f=1", "display_name": "user7168794", "link": "https://stackoverflow.com/users/7168794/user7168794"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479377296, "creation_date": 1479317899, "last_edit_date": 1479377296, "question_id": 40638689, "link": "https://stackoverflow.com/questions/40638689/defining-registers-in-uhd", "title": "Defining registers in UHD", "body": "<p>Just for my own clarification, if I were to define a register available on the AD9361 to the ad9361_driver files of UHD, would a script be able to call that register with nothing more than the header files found in one of the examples such as tx_bursts or tx_waveforms.cpp, or is there some workaround I would need to do to use anything defined in that location? </p>\n"}, {"tags": ["c++", "eclipse", "opencv"], "comments": [{"owner": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "edited": false, "score": 0, "creation_date": 1479318068, "post_id": 40638644, "comment_id": 68509695, "body": "cout &lt;&lt; &quot;TEST&quot; doesn&#39;t have to produce any output, depending on how the program exits. you should use cerr to make sure each character is flushed."}, {"owner": {"reputation": 51, "user_id": 3160152, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/54631ea6a1cfece6769568976ef08178?s=128&d=identicon&r=PG&f=1", "display_name": "user3160152", "link": "https://stackoverflow.com/users/3160152/user3160152"}, "reply_to_user": {"reputation": 8959, "user_id": 1182921, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cbca9fe5b06dab4005212a4bf9a5416?s=128&d=identicon&r=PG", "display_name": "Tom Tanner", "link": "https://stackoverflow.com/users/1182921/tom-tanner"}, "edited": false, "score": 0, "creation_date": 1479318618, "post_id": 40638644, "comment_id": 68510011, "body": "i tried that, still nothing :/"}, {"owner": {"reputation": 146, "user_id": 4165293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a7c675f68c8e71197046542093a319c?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/4165293/stefan"}, "edited": false, "score": 0, "creation_date": 1479321647, "post_id": 40638644, "comment_id": 68511728, "body": "<code>#include &quot;opencv2&#47;opencv.hpp&quot;</code>"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1479328054, "post_id": 40638644, "comment_id": 68515347, "body": "if you remove the Mat line, does it behave like expected?"}], "owner": {"reputation": 51, "user_id": 3160152, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/54631ea6a1cfece6769568976ef08178?s=128&d=identicon&r=PG&f=1", "display_name": "user3160152", "link": "https://stackoverflow.com/users/3160152/user3160152"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479321251, "creation_date": 1479317723, "question_id": 40638644, "link": "https://stackoverflow.com/questions/40638644/declaring-mat-variable-c-causes-program-to-terminate-early-without-errors", "title": "Declaring Mat variable c++ causes program to terminate early without errors", "body": "<p>I've successfully linked all the required libraries etc. to my c++ project yet for some reason whenever i try \n    Mat image;</p>\n\n<p>the program terminates without any errors. If i try</p>\n\n<pre><code>int main() {\n    cout&lt;&lt;\"TEST\";\n    Mat a;\n    return 0;\n}\n</code></pre>\n\n<p>it wont even show the \"TEST\" on the terminal but simply states \n (exit value: -1,073,741,515) using eclipse. Im not sure what to make of it since theres no errors and the exit value shows nothing when i search google for it. Is there anything else i could try, or have i missed something?</p>\n\n<p>The code is copied below, together with the c++ build settings. The 'build' folder is a folder i created myself for cmake source directory.</p>\n\n<p><a href=\"https://i.stack.imgur.com/rQDBX.png\" rel=\"nofollow noreferrer\">Libraries included in Mingw C++ Linker</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/NreeP.png\" rel=\"nofollow noreferrer\">GCC C++ compiler</a></p>\n\n<pre><code>#include \"opencv2/highgui/highgui.hpp\"\n\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main(){\n\n    cv::Mat im_gray;\n    return 0;\n\n\n}\n</code></pre>\n\n<p>Thank you for reading!</p>\n"}, {"tags": ["c++", "c++11", "visual-studio-2013", "assignment-operator", "uniform-initialization"], "comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479317946, "post_id": 40638498, "comment_id": 68509639, "body": "So the problem is that you cannot upgrade to Visual C++ 2015, which compiles this just fine?"}, {"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479318255, "post_id": 40638498, "comment_id": 68509799, "body": "@ChristianHackl thanks for the info, but where I work we usually skip every other version of Visual Studio. :("}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 3, "last_activity_date": 1479319496, "last_edit_date": 1495542624, "creation_date": 1479317586, "answer_id": 40638597, "question_id": 40638498, "link": "https://stackoverflow.com/questions/40638498/how-to-use-stdmapoperator-with-initializer-lists/40638597#40638597", "title": "How to use std::map::operator= with initializer lists", "body": "<p>You could construct a temporary and use it in the assignment.</p>\n\n<pre><code>std::map&lt;int, char&gt; m;\nm = std::map&lt;int, char&gt;{{1, 'a'}, {3, 'b'}, {5, 'c'}, {7, 'd'}};\n</code></pre>\n\n<p>If you don't want to repeat the type, you can use <code>decltype</code>.</p>\n\n<pre><code>std::map&lt;int, char&gt; m;\nm = decltype(m){{1, 'a'}, {3, 'b'}, {5, 'c'}, {7, 'd'}};\n</code></pre>\n\n<hr>\n\n<p>Related SO posts:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/19269345/initializing-map-of-maps-with-initializer-list-in-vs-2013\">Initializing map of maps with initializer list in VS 2013</a></li>\n<li><a href=\"https://stackoverflow.com/questions/33553265/using-initializer-lists-with-stdmap\">Using Initializer Lists with std::map</a></li>\n<li><a href=\"https://stackoverflow.com/questions/33549613/is-this-a-compiler-bug-am-i-doing-something-wrong\">Is this a compiler bug? Am I doing something wrong?</a></li>\n</ul>\n"}], "owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "accepted_answer_id": 40638597, "answer_count": 1, "score": 3, "last_activity_date": 1479319503, "creation_date": 1479317244, "last_edit_date": 1495542623, "question_id": 40638498, "link": "https://stackoverflow.com/questions/40638498/how-to-use-stdmapoperator-with-initializer-lists", "title": "How to use std::map::operator= with initializer lists", "body": "<p>I asked the same question <a href=\"https://stackoverflow.com/questions/40553186/boostassignmap-list-of-matches-more-than-one-operator\">before</a> about <code>boost::assign::map_list_of</code> (which didn't get answered), then I thought maybe using brace initialization would help, but it didn't.</p>\n\n<p>This works perfectly:</p>\n\n<pre><code>std::map&lt;int, char&gt; m = {{1, 'a'}, {3, 'b'}, {5, 'c'}, {7, 'd'}};\n</code></pre>\n\n<p>But this doesn't:</p>\n\n<pre><code>std::map&lt;int, char&gt; m;\nm = {{1, 'a'}, {3, 'b'}, {5, 'c'}, {7, 'd'}};\n</code></pre>\n\n<p>Visual Studio 2013 gives the error <code>error C2593: 'operator =' is ambiguous</code>, could be either <code>operator=(std::initalizer_list)</code> or <code>operator=(std::map&amp;&amp;)</code>.</p>\n\n<p>Is it possible to get the second version to work? For cases where <code>m</code> is a member variable, for example.</p>\n"}, {"tags": ["c++", "qt", "file", "properties"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user3953274"}, "is_accepted": false, "score": 1, "last_activity_date": 1479320125, "creation_date": 1479320125, "answer_id": 40639364, "question_id": 40638479, "link": "https://stackoverflow.com/questions/40638479/how-can-i-go-about-extracting-file-properties-metadata-annotations-from-a-file/40639364#40639364", "title": "How can I go about extracting file Properties/ Metadata/ Annotations from a file", "body": "<p>there are some articles I found about extracting the metadata from an image. Hope they be useful : </p>\n\n<p><a href=\"https://exposingtheinvisible.org/resources/obtaining-evidence/image-digging\" rel=\"nofollow noreferrer\">https://exposingtheinvisible.org/resources/obtaining-evidence/image-digging</a></p>\n\n<p><a href=\"http://www.digitalcitizen.life/what-file-s-metadata-and-how-edit-it\" rel=\"nofollow noreferrer\">http://www.digitalcitizen.life/what-file-s-metadata-and-how-edit-it</a></p>\n"}], "owner": {"reputation": 5278, "user_id": 3663765, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/03caa8002f94a2ffd40630239d7a35c6?s=128&d=identicon&r=PG&f=1", "display_name": "Program-Me-Rev", "link": "https://stackoverflow.com/users/3663765/program-me-rev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479320125, "creation_date": 1479317179, "question_id": 40638479, "link": "https://stackoverflow.com/questions/40638479/how-can-i-go-about-extracting-file-properties-metadata-annotations-from-a-file", "title": "How can I go about extracting file Properties/ Metadata/ Annotations from a file", "body": "<p><strong>Windows: R.click -> Properties -> Details</strong>  </p>\n\n<p><strong>.mp3:</strong>  </p>\n\n<blockquote>\n  <p>Description<br>\n  <strong>Media</strong>  </p>\n  \n  <blockquote>\n    <p><em>Contributing artists    : Dire Straits</em><br>\n    <em>Album                   : 100 Greatest Guitar Solos</em><br>\n    <em>Length                  : 00:05:46</em> </p>\n  </blockquote>\n  \n  <p>Description<br>\n  Media<br>\n  Audio<br>\n  Origin<br>\n  Content<br>\n  File  </p>\n</blockquote>\n\n<p><strong>.jpg:</strong>  </p>\n\n<blockquote>\n  <p>Description<br>\n  Origin<br>\n  <strong>Image</strong>  </p>\n  \n  <blockquote>\n    <p><em>Image ID</em><br>\n    <em>Dimensions              : 850 - 1185</em><br>\n    <em>Width                   : 850 pixels</em><br>\n    <em>etc</em><br>\n    <em>etc</em></p>\n  </blockquote>\n  \n  <p>Camera<br>\n  Advanced photo<br>\n  File  </p>\n</blockquote>\n\n<ol>\n<li>How can I go about extracting file properties from a file in C++, Qt?  </li>\n<li>Is it possible to edit the above metadata?  </li>\n<li>Is it possible to add custom metadata/ Properies to a file programatically?  </li>\n</ol>\n"}, {"tags": ["android", "c++", "opengl-es", "android-ndk", "opengl-es-2.0"], "comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 1, "creation_date": 1479317550, "post_id": 40638468, "comment_id": 68509417, "body": "In any case, you&#39;ll need to check at runtime for the presence of <code>GL_OES_vertex_array_object</code>, resolve the corresponding entry points and use them. That should be pretty independent from the Android version."}, {"owner": {"reputation": 1645, "user_id": 4869914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/94e94ff39b0e876b5edd59dd8ee58c48?s=128&d=identicon&r=PG&f=1", "display_name": "keyboard", "link": "https://stackoverflow.com/users/4869914/keyboard"}, "reply_to_user": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1479318779, "post_id": 40638468, "comment_id": 68510119, "body": "Yes, I&#39;m checking at runtime if it&#39;s available (Cocos2d-x does that automatically and saves it). I&#39;m just wondering if there&#39;s any additional requirement when compiling."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1479319809, "post_id": 40638468, "comment_id": 68510760, "body": "It&#39;s an optional extension, you need to check it&#39;s a GPU driver thing. Nothing to do with Android above needing OpenGL ES 2.0."}, {"owner": {"reputation": 1645, "user_id": 4869914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/94e94ff39b0e876b5edd59dd8ee58c48?s=128&d=identicon&r=PG&f=1", "display_name": "keyboard", "link": "https://stackoverflow.com/users/4869914/keyboard"}, "edited": false, "score": 0, "creation_date": 1479324241, "post_id": 40638468, "comment_id": 68513217, "body": "Okay, and also never Android version do not update this driver? Or compiling against a newer android version can not add this extension?"}, {"owner": {"reputation": 8286, "user_id": 533037, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f711473fb27cd269ba5ad2064c15dcd3?s=128&d=identicon&r=PG", "display_name": "solidpixel", "link": "https://stackoverflow.com/users/533037/solidpixel"}, "edited": false, "score": 0, "creation_date": 1479355239, "post_id": 40638468, "comment_id": 68524555, "body": "It depends on the graphics driver on the platform. As above it&#39;s nothing to do with Android."}], "answers": [{"comments": [{"owner": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1479872375, "post_id": 40737939, "comment_id": 68736873, "body": "This is completely wrong. VAOs are not available in ES 2.0 (except as an extension), and were only introduced in ES 3.0. It looks like you might be confusing them with client-side vertex arrays. Those are very different things."}, {"owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "reply_to_user": {"reputation": 49036, "user_id": 3530129, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IYkz8.jpg?s=128&g=1", "display_name": "Reto Koradi", "link": "https://stackoverflow.com/users/3530129/reto-koradi"}, "edited": false, "score": 0, "creation_date": 1479890390, "post_id": 40737939, "comment_id": 68743854, "body": "Yes I was thinking of the old client-side vertex arrays which is why I mentioned VBO&#39;s."}], "tags": [], "owner": {"reputation": 1076, "user_id": 2979092, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/d2hLQ.jpg?s=128&g=1", "display_name": "WLGfx", "link": "https://stackoverflow.com/users/2979092/wlgfx"}, "is_accepted": false, "score": -1, "last_activity_date": 1479806445, "creation_date": 1479806445, "answer_id": 40737939, "question_id": 40638468, "link": "https://stackoverflow.com/questions/40638468/android-open-gl-es-2-0-what-are-the-requirements-for-vertex-array-objects-vao/40737939#40737939", "title": "Android Open GL ES 2.0 - What are the requirements for Vertex Array Objects (VAO)?", "body": "<p>As far as I know, API 9 introduced openGL ES 2.0. On startup in the onCreate method just add:</p>\n\n<pre><code>// Check if the system supports OpenGL ES 2.0.\n\nfinal ActivityManager activityManager =\n        (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);\nfinal ConfigurationInfo configurationInfo =\n        activityManager.getDeviceConfigurationInfo();\nfinal boolean supportsEs2 = configurationInfo.reqGlEsVersion &gt;= 0x20000;\n\nif (!supportsEs2)\n{\n    Log.i(\"WLGFX\",\"Device does not support OpenGL ES 2.0\");\n    System.exit(-1);\n    return;\n}\n</code></pre>\n\n<p>It's also been a long time since I last looked at VAO's, I actually thought they got rid of them completely. For performance, use VBO's. They're just as easy to create and use. Here's some sample snippets:</p>\n\n<pre><code>void FFDisplay::init_texture_buffers() {    // for overlay screen\n    GLfloat vertices[] = {\n            -1.0f,  -1.0f,      0.0f,   1.0f,   // X, Y, U, V\n            -1.0f,   1.0f,      0.0f,   0.0f,\n            1.0f,    1.0f,      1.0f,   0.0f,\n            1.0f,   -1.0f,      1.0f,   1.0f\n    };\n\n    GLushort indices[] = { 2, 1, 0, 2, 0, 3 };\n\n    glGenBuffers(2, texture_buffers);\n    glBindBuffer(GL_ARRAY_BUFFER, texture_buffers[0]);\n    glBufferData(GL_ARRAY_BUFFER, 64, vertices, GL_DYNAMIC_DRAW);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, texture_buffers[1]);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, 12, indices, GL_DYNAMIC_DRAW);\n\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);\n\n    texture_texture = 0;\n}\n\nvoid FFDisplay::init_overlay_texture() {\n    glGenTextures(1, &amp;overlay_texture);\n    glBindTexture(GL_TEXTURE_2D, overlay_texture);\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n    glTexParameterf(GL_TEXTURE_2D, GL_GENERATE_MIPMAP_HINT, GL_FALSE );\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, FFD_OVERLAY_WID, FFD_OVERLAY_HGT,\n                 0, GL_RGBA, GL_UNSIGNED_BYTE, overlay_image);\n}\n\nvoid FFDisplay::draw_overlay() {\n    glUseProgram(prog_texture);\n\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, overlay_texture);\n\n    glUniform1i(texture_texture, 0);\n\n    glEnableVertexAttribArray(texture_vertex);\n    glEnableVertexAttribArray(texture_uv);\n\n    glBindBuffer(GL_ARRAY_BUFFER, texture_buffers[0]);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, texture_buffers[1]);\n\n    glVertexAttribPointer(texture_vertex, 2, GL_FLOAT, GL_FALSE, 16, NULL);\n    glVertexAttribPointer(texture_uv, 2, GL_FLOAT, GL_FALSE, 16, (void*)8);\n\n    glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_SHORT, 0);\n\n    glDisableVertexAttribArray(texture_uv);\n    glDisableVertexAttribArray(texture_vertex);\n\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);\n}\n</code></pre>\n\n<p>There's tons of information on GLES 2.0 out there to get you started.</p>\n"}], "owner": {"reputation": 1645, "user_id": 4869914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/94e94ff39b0e876b5edd59dd8ee58c48?s=128&d=identicon&r=PG&f=1", "display_name": "keyboard", "link": "https://stackoverflow.com/users/4869914/keyboard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479806445, "creation_date": 1479317157, "last_edit_date": 1479319169, "question_id": 40638468, "link": "https://stackoverflow.com/questions/40638468/android-open-gl-es-2-0-what-are-the-requirements-for-vertex-array-objects-vao", "title": "Android Open GL ES 2.0 - What are the requirements for Vertex Array Objects (VAO)?", "body": "<p>What are the requirements to be able to use Vertex Array Objects?\nI know that some GPUs support it and some do not. I'm wondering if there are certain additional requirements to be met when compiling.</p>\n\n<p>Is there a minimum Android SDK version that needs to be used?</p>\n\n<p>What values are the minimum for compileSdkVersion, minSdkVersion and targetSdkVersion in Gradle (Android Studio) ?</p>\n\n<p>What is the minimum Android version that needs to be installed on the device?</p>\n\n<p>Or does it maybe not matter at all and either the GPU supports it or not?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1479316900, "post_id": 40638372, "comment_id": 68508965, "body": "And what is the output so far?"}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1479317011, "post_id": 40638372, "comment_id": 68509042, "body": "Try writing down how you would construct this in english, then converting that to code."}, {"owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "edited": false, "score": 0, "creation_date": 1479317090, "post_id": 40638372, "comment_id": 68509103, "body": "The inner loop function of n needs work. As Eli wrote, define your function first, then code it."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1479317157, "post_id": 40638372, "comment_id": 68509157, "body": "@EliSadoff: Thank you for the clarification. This question ain&#39;t so bad now. Downvote converted to an upvote, and close vote retracted. Hint: your output is independent of <code>j</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1479317173, "post_id": 40638372, "comment_id": 68509171, "body": "Is there a typo in the data?  There is a 3 in the &quot;wall&quot; of 2s."}, {"owner": {"reputation": 141, "user_id": 7126308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwK33.jpg?s=128&g=1", "display_name": "Willze Fortner", "link": "https://stackoverflow.com/users/7126308/willze-fortner"}, "edited": false, "score": 0, "creation_date": 1479317239, "post_id": 40638372, "comment_id": 68509222, "body": "oh sorry, there is a typo there"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479318465, "post_id": 40638372, "comment_id": 68509917, "body": "You are calculating <code>temp</code>s from <code>j</code>, shouldn&#39;t you try to do the same calculation for <code>i</code>?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1479326153, "post_id": 40638372, "comment_id": 68514255, "body": "I think you have had enough time on your own and need to experience Mr. Debugger and his infinite wisdom."}], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 7126308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwK33.jpg?s=128&g=1", "display_name": "Willze Fortner", "link": "https://stackoverflow.com/users/7126308/willze-fortner"}, "edited": false, "score": 0, "creation_date": 1479354682, "post_id": 40641085, "comment_id": 68524440, "body": "That&#39;s a really simple implementation. Thanks, now I know what I will do."}], "tags": [], "owner": {"reputation": 196, "user_id": 7163528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c7d3e9f34ba6ca0685dc722685ad20?s=128&d=identicon&r=PG&f=1", "display_name": "eshb", "link": "https://stackoverflow.com/users/7163528/eshb"}, "is_accepted": true, "score": 1, "last_activity_date": 1479348390, "last_edit_date": 1479348390, "creation_date": 1479325941, "answer_id": 40641085, "question_id": 40638372, "link": "https://stackoverflow.com/questions/40638372/create-a-number-pattern/40641085#40641085", "title": "Create A Number Pattern", "body": "<p>I hope this code(working) might give you a better idea about the implementation.</p>\n\n<pre><code>int main() {\n\n int n;\n cin &gt;&gt; n;\n int arr[n][n];\n\n//Numbers in the grid vary from  1 - (n/2 + 1)\n for(int i = 0; i &lt;= n / 2; i++) {\n    //Start filling the array in squares\n    //Like fill the outer square with 1 first followed by 2...\n    for(int j = i; j &lt; n - i; j++) {\n\n       arr[i][j] = i + 1;\n       arr[n - 1 - i][j] = i + 1;\n       arr[j][i] = i + 1;\n       arr[j][n - 1 - i] = i + 1;\n    }\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 141, "user_id": 7126308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwK33.jpg?s=128&g=1", "display_name": "Willze Fortner", "link": "https://stackoverflow.com/users/7126308/willze-fortner"}, "edited": false, "score": 0, "creation_date": 1479354766, "post_id": 40643800, "comment_id": 68524460, "body": "Thanks sir, I get it now how to do it"}], "tags": [], "owner": {"reputation": 333, "user_id": 5529684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c33383f176be49bfb6378b2ffe092789?s=128&d=identicon&r=PG&f=1", "display_name": "Nuurek", "link": "https://stackoverflow.com/users/5529684/nuurek"}, "is_accepted": false, "score": 1, "last_activity_date": 1479337293, "last_edit_date": 1479337293, "creation_date": 1479336789, "answer_id": 40643800, "question_id": 40638372, "link": "https://stackoverflow.com/questions/40638372/create-a-number-pattern/40643800#40643800", "title": "Create A Number Pattern", "body": "<p>The main thing that solves the problem is to divide this square into 4 quadrants:</p>\n\n<pre>\n---n-->\n111|222 |\n111|222 |\n111|222 |\n------- n\n333|444 |\n333|444 |\n333|444 v\n</pre>\n\n<p>Each quadrant can be presented with limits:</p>\n\n<pre><code>1 - row &lt;= (n + 1) / 2 &amp;&amp; column &lt;= (n + 1) / 2\n2 - row &lt;= (n + 1) / 2 &amp;&amp; column &gt; (n + 1) / 2\n3 - row &gt; (n + 1) / 2 &amp;&amp; column &lt;= (n + 1) / 2\n4 - row &gt; (n + 1) / 2 &amp;&amp; column &gt; (n + 1) / 2\n</code></pre>\n\n<p>Then every quadrant has to be divided into two slices</p>\n\n<pre>\n\\  |  /\n \\ | / \n  \\|/  \n-------\n  /|\\  \n / | \\ \n/  |  \\\n</pre>\n\n<p>These diagonals can be described using equations:</p>\n\n<pre><code>column_index = row_index\ncolumn_index = (n + 1) - row_index\n</code></pre>\n\n<p>Right now you just have to check if current 'cell' is under or above one of the diagonals, and use row or column index accordingly. Of course if row or column index is larger than (n + 1) / 2 then you have to adjust by subtracting it from n.</p>\n\n<p>If you understand this, writing your own code shouldn't be a problem. It is good idea if you have to print everything immediately without storing it in some kind of array. If you can use array then @baymaxx solution is a lot cleaner.</p>\n\n<p>It is my code if you would like to compare your implementation:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    int n;\n    std::cin &gt;&gt; n;\n\n    for (int row_index = 1; row_index &lt;= n; row_index++) {\n        for (int column_index = 1; column_index &lt;= n; column_index++) {\n            if (row_index &lt;= (n + 1) / 2 &amp;&amp; column_index &lt;= (n + 1) / 2) {\n                if (column_index &lt; row_index) {\n                    std::cout &lt;&lt; column_index &lt;&lt; \" \";\n                } else {\n                    std::cout &lt;&lt; row_index &lt;&lt; \" \";\n                }\n            } else if (row_index &lt;= (n + 1) / 2 &amp;&amp; column_index &gt; (n + 1) / 2) {\n                if (column_index &lt; (n + 1) - row_index) {\n                    std::cout &lt;&lt; row_index &lt;&lt; \" \";\n                } else {\n                    std::cout &lt;&lt; (n + 1) - column_index &lt;&lt; \" \";\n                }\n            } else if (row_index &gt; (n + 1) / 2 &amp;&amp; column_index &lt;= (n + 1) / 2) {\n                if (column_index &lt; (n + 1) - row_index) {\n                    std::cout &lt;&lt; column_index &lt;&lt; \" \";\n                } else {\n                    std::cout &lt;&lt; (n + 1) - row_index &lt;&lt; \" \";\n                }\n            } else {\n                if (column_index &gt; row_index) {\n                    std::cout &lt;&lt; (n + 1) - column_index &lt;&lt; \" \";\n                } else {\n                    std::cout &lt;&lt; (n + 1) - row_index &lt;&lt; \" \";\n                }   \n            }\n        }\n        std::cout &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 7126308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/rwK33.jpg?s=128&g=1", "display_name": "Willze Fortner", "link": "https://stackoverflow.com/users/7126308/willze-fortner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 1, "accepted_answer_id": 40641085, "answer_count": 2, "score": 0, "last_activity_date": 1479348390, "creation_date": 1479316836, "last_edit_date": 1479317255, "question_id": 40638372, "link": "https://stackoverflow.com/questions/40638372/create-a-number-pattern", "title": "Create A Number Pattern", "body": "<p>I am trying to get this number pattern</p>\n\n<pre><code>Input: 7 \nOutput:  \n1 1 1 1 1 1 1\n1 2 2 2 2 2 1 \n1 2 3 3 3 2 1 \n1 2 3 4 3 2 1 \n1 2 3 3 3 2 1 \n1 2 2 2 2 2 1 \n1 1 1 1 1 1 1 \n</code></pre>\n\n<p>But I can't figure out how to make it like that, any suggestion how to make that pattern?? </p>\n\n<p>My code so far :</p>\n\n<pre><code>int n, temp1, temp2,i,j;\ncin &gt;&gt; n;\nfor (i = 1; i &lt;= n; i++) {\n    for (j = 1; j &lt;= n; j++) {\n        temp1 = j;\n        temp2 = n-j+1;\n        if (temp1 &lt; temp2) cout &lt;&lt; temp1;\n        else cout &lt;&lt; temp2;\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The output so far is </p>\n\n<pre><code> 1 2 3 4 3 2 1\n 1 2 3 4 3 2 1\n 1 2 3 4 3 2 1\n 1 2 3 4 3 2 1\n 1 2 3 4 3 2 1\n 1 2 3 4 3 2 1\n 1 2 3 4 3 2 1\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "constructor", "instantiation"], "comments": [{"owner": {"reputation": 448, "user_id": 6271671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1d181593f8c690c09eccc6b002416c7?s=128&d=identicon&r=PG&f=1", "display_name": "george_ptr", "link": "https://stackoverflow.com/users/6271671/george-ptr"}, "edited": false, "score": 2, "creation_date": 1479316671, "post_id": 40638293, "comment_id": 68508814, "body": "make it a <code>const Point &amp; point</code>"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1479316673, "post_id": 40638293, "comment_id": 68508815, "body": "Take by value and the first one should work."}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1479316766, "post_id": 40638293, "comment_id": 68508886, "body": "For some reason I thought <code>point</code> goes out of scope. I was wrong."}, {"owner": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "edited": false, "score": 0, "creation_date": 1479316816, "post_id": 40638293, "comment_id": 68508911, "body": "both should work fine :-)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1479316875, "post_id": 40638293, "comment_id": 68508950, "body": "It is 100% possible.  You just need to remember that a temporary(what <code>Point(0, 0)</code> is) cannot bind to an lvalue reference."}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1479317032, "post_id": 40638293, "comment_id": 68509062, "body": "@Frank, What exactly doesn&#39;t work ? Is it compilation error or something else ?"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "edited": false, "score": 0, "creation_date": 1479317058, "post_id": 40638293, "comment_id": 68509082, "body": "@MohamedMoanis: No, only the <code>const&amp;</code>."}, {"owner": {"reputation": 1566, "user_id": 4173966, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/0vmRU.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/4173966/frank"}, "edited": false, "score": 0, "creation_date": 1479317079, "post_id": 40638293, "comment_id": 68509096, "body": "@GeorgeAI if you post that in an answer I will accept it. Sorry for posting such a common sense question, but I was looking for quite some time at how to do this. I am coming from Javascript and c++ is a beast."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479317079, "post_id": 40638293, "comment_id": 68509098, "body": "By the way: Use initialisation lists, not assignments."}, {"owner": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 0, "creation_date": 1479317105, "post_id": 40638293, "comment_id": 68509112, "body": "Your first example compiles fine on VS 2013, so I&#39;m guessing your compiler is stricter than mine! You should prefer member initialisation to assignment however."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 0, "creation_date": 1479317175, "post_id": 40638293, "comment_id": 68509175, "body": "@djgandy: It&#39;s not &quot;fine&quot; if it produces a warning."}, {"owner": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479317339, "post_id": 40638293, "comment_id": 68509280, "body": "@ChristianHackl It doesn&#39;t produce a warning.  Don&#39;t know what the OP is using however, or what the warning was."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 0, "creation_date": 1479317802, "post_id": 40638293, "comment_id": 68509563, "body": "@djgandy: It does, if you use <code>&#47;W4</code> or if you activate warning C4239 manually. It says: <code>warning C4239: nonstandard extension used : &#39;argument&#39; : conversion from &#39;Point&#39; to &#39;Point &amp;&#39; A non-const reference may only be bound to an lvalue</code>. With <code>&#47;Za</code>, it&#39;s even an error."}, {"owner": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479317844, "post_id": 40638293, "comment_id": 68509584, "body": "@ChristianHackl oh you are absolutely right (y)"}, {"owner": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479318169, "post_id": 40638293, "comment_id": 68509751, "body": "@ChristianHackl I am running /W4. Only way I can get it to show up is /Za or force enabling! Seems this has been covered before - <a href=\"http://stackoverflow.com/questions/16380966/non-const-reference-bound-to-temporary-visual-studio-bug\" title=\"non const reference bound to temporary visual studio bug\">stackoverflow.com/questions/16380966/&hellip;</a>"}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "reply_to_user": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 0, "creation_date": 1479318324, "post_id": 40638293, "comment_id": 68509841, "body": "@djgandy: The answers there just repeat what I just said. The warning will appear with <code>&#47;W4</code>. I just tested it with an old Visual C++ 2013 installation on my computer. Are you sure you are testing the correct code and that you don&#39;t use some other compiler flags? Try a simple <code>cl &#47;nologo &#47;EHsc &#47;W4 stackoverflow.cpp</code>."}], "answers": [{"comments": [{"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479317141, "post_id": 40638373, "comment_id": 68509136, "body": "Don&#39;t use assignments in the constructor. Use an initialisation list."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 0, "last_activity_date": 1479316850, "creation_date": 1479316850, "answer_id": 40638373, "question_id": 40638293, "link": "https://stackoverflow.com/questions/40638293/is-it-possible-to-construct-an-object-directly-in-the-arguments-of-another-const/40638373#40638373", "title": "Is it possible to construct an object directly in the arguments of another constructor in c++?", "body": "<p>It depends on how <code>Rectangle</code> is defined.</p>\n\n<p>I'm assuming it looks something like this:</p>\n\n<pre><code>class Rectangle {\n    Point point;\n    double width, height;\n    /*...*/\n};\n</code></pre>\n\n<p>In which case, defining the Constructor like this will work:</p>\n\n<pre><code>Rectangle::Rectangle(Point const&amp; p, double w, double h) {\n    point = p;\n    width = w;\n    height = h;\n}\n</code></pre>\n\n<p>Which will allow it to take a temporary (like you want) or take an lvalue (which is what your second example does).</p>\n\n<p>If <code>Rectangle</code> is meant to store a <em>reference</em> to a point, that's almost certainly a design error, and you should change that.</p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 6935983, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1Q6AUM3Qe9g/AAAAAAAAAAI/AAAAAAAAJ1E/7bEYfheAYSk/photo.jpg?sz=128", "display_name": "Samir Jha", "link": "https://stackoverflow.com/users/6935983/samir-jha"}, "is_accepted": false, "score": 0, "last_activity_date": 1479316900, "creation_date": 1479316900, "answer_id": 40638388, "question_id": 40638293, "link": "https://stackoverflow.com/questions/40638293/is-it-possible-to-construct-an-object-directly-in-the-arguments-of-another-const/40638388#40638388", "title": "Is it possible to construct an object directly in the arguments of another constructor in c++?", "body": "<p>You can possibly instantiate in your argument list but you would not have the Point available outside the constructor. The point would be local to the constructor.</p>\n\n<p>You could access the point as rect.point after that.</p>\n\n<p><em>Edit:</em></p>\n\n<p>Since you are trying to use a reference to point, this will not work. </p>\n"}, {"comments": [{"owner": {"reputation": 1566, "user_id": 4173966, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/0vmRU.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/4173966/frank"}, "edited": false, "score": 0, "creation_date": 1479317768, "post_id": 40638390, "comment_id": 68509539, "body": "But then if I pass in an object that I defined before like in my second example, will my object be stored twice?"}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 1566, "user_id": 4173966, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/0vmRU.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/4173966/frank"}, "edited": false, "score": 0, "creation_date": 1479317850, "post_id": 40638390, "comment_id": 68509586, "body": "you should read about scopes in C++.."}, {"owner": {"reputation": 1566, "user_id": 4173966, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/0vmRU.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/4173966/frank"}, "edited": false, "score": 0, "creation_date": 1479317982, "post_id": 40638390, "comment_id": 68509654, "body": "I am in the process of learning as much as I can, but I occasionally get stumped. But interestingly (at least to me) If I use the method in your answer and my second example, I get two separate objects rather than one, which is pretty nice."}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": true, "score": 2, "last_activity_date": 1479316903, "creation_date": 1479316903, "answer_id": 40638390, "question_id": 40638293, "link": "https://stackoverflow.com/questions/40638293/is-it-possible-to-construct-an-object-directly-in-the-arguments-of-another-const/40638390#40638390", "title": "Is it possible to construct an object directly in the arguments of another constructor in c++?", "body": "<p>a \"regular\" reference cannot bind to a temporary, only constant reference (<code>const T&amp;</code>) and r-value-reference (<code>T&amp;&amp;</code>)</p>\n\n<p>in your first snippet, <code>Point(0, 0)</code> is a temporary, so it can't be bound to <code>Point&amp;</code>, but in your second snippet, <code>Point point(0, 0);</code> is not a temporary, so it works.</p>\n\n<p>in this case, since you don't try to modify the temporary, make it bind to a constant reference : </p>\n\n<pre><code>Rectangle::Rectangle(const Point &amp; point, double width, double height)\n</code></pre>\n"}], "owner": {"reputation": 1566, "user_id": 4173966, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/0vmRU.png?s=128&g=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/4173966/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1479316920, "accepted_answer_id": 40638390, "answer_count": 3, "score": -2, "last_activity_date": 1479316903, "creation_date": 1479316550, "question_id": 40638293, "link": "https://stackoverflow.com/questions/40638293/is-it-possible-to-construct-an-object-directly-in-the-arguments-of-another-const", "closed_reason": "Duplicate", "title": "Is it possible to construct an object directly in the arguments of another constructor in c++?", "body": "<p>I am very new to c++ and would like to know if it is possible to do something like this:</p>\n\n<pre><code>Rectangle rect(Point(0, 0), 10, 10); // doesn't work\n</code></pre>\n\n<p>The idea is that Rectangle takes a Point object as well as width and height parameters. The constructors look like this:</p>\n\n<pre><code>Rectangle::Rectangle(Point &amp; point, double width, double height) {\n  this-&gt;point = point;\n  this-&gt;width = width;\n  this-&gt;height = height;\n};\n\nPoint::Point(double x, double y) {\n  this-&gt;x = x;\n  this-&gt;y = y;\n};\n</code></pre>\n\n<p>I can get the desired effect by doing this:</p>\n\n<pre><code>Point point(0, 0);\nRectangle rect(point, 10, 10); // this works\n</code></pre>\n\n<p>but I think it would be nice if I could instantiate my point directly in the arguments for a new rectangle. If this is possible, please let me know! Thanks!</p>\n"}, {"tags": ["c++", "matrix", "eigen"], "comments": [{"owner": {"reputation": 2429, "user_id": 468405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/507a75e15f86f98a0e88af998db92843?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/468405/joel"}, "edited": false, "score": 0, "creation_date": 1479322220, "post_id": 40638292, "comment_id": 68512045, "body": "How are you compiling?"}, {"owner": {"reputation": 11, "user_id": 7168812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab92d3fea87e56b54c8307cb0e6c74b8?s=128&d=identicon&r=PG&f=1", "display_name": "NMsd", "link": "https://stackoverflow.com/users/7168812/nmsd"}, "reply_to_user": {"reputation": 2429, "user_id": 468405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/507a75e15f86f98a0e88af998db92843?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/468405/joel"}, "edited": false, "score": 0, "creation_date": 1479322947, "post_id": 40638292, "comment_id": 68512468, "body": "g++ -O3 -I/usr/include/eigen3 . I am on a Linux 14.04 , with a 3.2.0 Eigen and 4.8.4 gcc. I also obtain similar results on the same computer with clang."}, {"owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1479335350, "post_id": 40638292, "comment_id": 68519088, "body": "I cannot reproduce. The generated ASM is exactly the same for each version. You can check by yourself with <code>g++ -O3 -DNDEBUG -s</code> and search for <code>sumCols</code> and <code>sumVec</code> in the generated asm file."}, {"owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1479336442, "post_id": 40638292, "comment_id": 68519530, "body": "Sorry, there is a typo, the command is: <code>g++ -O3 -DNDEBUG -S</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7168812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab92d3fea87e56b54c8307cb0e6c74b8?s=128&d=identicon&r=PG&f=1", "display_name": "NMsd", "link": "https://stackoverflow.com/users/7168812/nmsd"}, "edited": false, "score": 0, "creation_date": 1479380525, "post_id": 40643568, "comment_id": 68537471, "body": "Indeed. I now changed the bench to avoid the cache of matrix L (i.e. having only one L, and NBT vector y all applied on the unique L). The difference disappear. Thanks for taking the time to look at it and sorry it was a false problem."}], "tags": [], "owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": false, "score": 1, "last_activity_date": 1479335594, "creation_date": 1479335594, "answer_id": 40643568, "question_id": 40638292, "link": "https://stackoverflow.com/questions/40638292/eigen-slow-access-to-columns-of-matrix-4/40643568#40643568", "title": "Eigen: Slow access to columns of Matrix 4", "body": "<p>As I said in a comment, the generated assembly is exactly the same for both functions.</p>\n\n<p>The problem is that your benchmark is biased in the sense that <code>L4s</code> is 4 times bigger than <code>z4s</code>, and you thus get more cache misses in the matrix case than in the vector case.</p>\n"}], "owner": {"reputation": 11, "user_id": 7168812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab92d3fea87e56b54c8307cb0e6c74b8?s=128&d=identicon&r=PG&f=1", "display_name": "NMsd", "link": "https://stackoverflow.com/users/7168812/nmsd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1479335594, "creation_date": 1479316547, "question_id": 40638292, "link": "https://stackoverflow.com/questions/40638292/eigen-slow-access-to-columns-of-matrix-4", "title": "Eigen: Slow access to columns of Matrix 4", "body": "<p>I am using Eigen for operations similar to Cholesky update, implying a lot of AXPY (sum plus multiplication by a scalar) on the columns of a fixed size matrix, typically a Matrix4d. In brief, it is 3 times more expensive to access to the columns of a Matrix 4 than to a Vector 4.</p>\n\n<p>Typically, the code below:</p>\n\n<pre><code>for(int i=0;i&lt;4;++i )  L.col(0) += x*y[i];\n</code></pre>\n\n<p>is 3 times less efficient than the code below:</p>\n\n<pre><code>for(int i=0;i&lt;4;++i )  l4 += x*y[i];\n</code></pre>\n\n<p>where L is typically a matrix of size 4, x, y and l4 are vectors of size 4.</p>\n\n<p>Moreover, the time spent in the first line of code is not depending on the matrix storage organization (either RowMajor of ColMajor). </p>\n\n<p>On a Intel i7 (2.5GHz), it takes about 0.007us for vector operations, and 0.02us for matrix operations (timings are done by repeating 100000 times the same operation). My application would need thousands of such operation in timings hopefully far below the millisecond.</p>\n\n<p>Question: I am doing something improperly when accessing columns of my 4x4 matrix? Is there something to do to make the first line of code more efficient?</p>\n\n<p>Full code used for timings is below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Eigen/Core&gt;\n#include &lt;vector&gt;\n#include &lt;sys/time.h&gt;\n\ntypedef Eigen::Matrix&lt;double,4,1,Eigen::ColMajor&gt; Vector4;\n//typedef Eigen::Matrix&lt;double,4,4,Eigen::RowMajor,4,4&gt; Matrix4;\ntypedef Eigen::Matrix&lt;double,4,4,Eigen::ColMajor,4,4&gt; Matrix4;\n\ninline double operator- (  const struct timeval &amp; t1,const struct timeval &amp; t0)\n{\n  /* TODO: double check the double conversion from long (on 64x). */\n  return double(t1.tv_sec - t0.tv_sec)+1e-6*double(t1.tv_usec - t0.tv_usec);\n}\n\nvoid sumCols( Matrix4 &amp; L,\n              Vector4 &amp; x4,\n              Vector4 &amp; y)\n{\n  for(int i=0;i&lt;4;++i )\n    {\n      L.col(0) += x4*y[i];\n    }\n}\n\nvoid sumVec( Vector4 &amp; L,\n             Vector4 &amp; x4,\n             Vector4 &amp; y)\n{\n  for(int i=0;i&lt;4;++i )\n    {\n      //L.tail(4-i)  += x4.tail(4-i)*y[i];\n      L            += x4          *y[i];\n    }\n}\n\nint main()\n{\n  using namespace Eigen;\n\n  const int NBT = 1000000;\n\n  struct timeval t0,t1;\n\n  std::vector&lt;     Vector4&gt; x4s(NBT);  \n  std::vector&lt;     Vector4&gt; y4s(NBT);  \n  std::vector&lt;     Vector4&gt; z4s(NBT);  \n  std::vector&lt;     Matrix4&gt; L4s(NBT);  \n\n  for(int i=0;i&lt;NBT;++i) \n  {\n    x4s[i] = Vector4::Random();\n    y4s[i] = Vector4::Random();\n    L4s[i] = Matrix4::Random();\n  }\n\n  int    sample = int(z4s[55][2]/10*NBT);\n  std::cout &lt;&lt; \"*** SAMPLE = \" &lt;&lt; sample &lt;&lt; std::endl;\n\n  gettimeofday(&amp;t0,NULL);\n  for(int i=0;i&lt;NBT;++i) \n    {\n      sumCols(L4s[i], x4s[i], y4s[i]);\n    }\n  gettimeofday(&amp;t1,NULL);\n  std::cout &lt;&lt; (t1-t0) &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t\\tForce check\" &lt;&lt;  L4s[sample](1,0) &lt;&lt; std::endl;\n\n  gettimeofday(&amp;t0,NULL);\n  for(int i=0;i&lt;NBT;++i) \n    {\n      sumVec(z4s[i], x4s[i], y4s[i]);\n    }\n  gettimeofday(&amp;t1,NULL);\n  std::cout &lt;&lt; (t1-t0) &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"\\t\\t\\t\\t\\t\\t\\tForce check\" &lt;&lt;  z4s[sample][2] &lt;&lt; std::endl;\n\n  return -1;\n}\n</code></pre>\n"}, {"tags": ["c++", "eclipse", "llvm-clang"], "owner": {"reputation": 411, "user_id": 4542616, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cd78251ea0c5ea5a3abd0a492807bbbf?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Hassan", "link": "https://stackoverflow.com/users/4542616/muhammad-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479315733, "creation_date": 1479315733, "last_edit_date": 1495540408, "question_id": 40637997, "link": "https://stackoverflow.com/questions/40637997/how-to-set-up-clang-llvm-with-eclipse-cdt-neon-in-fedora-22", "title": "How to set up Clang/LLVM with Eclipse CDT Neon in Fedora 22?", "body": "<p>I am using clang 3.8 on my Fedora 22 machine.</p>\n\n<p>I configured clang using the ninja build system, and it works really well using the command line. I can run the projects etc.</p>\n\n<p>I was wondering if I can use Clang/LLVM with Eclipse Neon.1a.</p>\n\n<p>I followed this <a href=\"https://stackoverflow.com/questions/32726175/unable-to-install-llvm-toolchain-for-eclipse-cdt\">post</a> to set up Eclipse. But the problem is that when I compile my project, I receive the errors:</p>\n\n<ol>\n<li>\"Must #define __STDC_LIMIT_MACROS before #including Support/DataTypes.h\"</li>\n<li>\"Must #define __STDC_CONSTANT_MACROS before \"         \"#including Support/DataTypes.h\"</li>\n</ol>\n\n<p>Does anybody know if the linked post has some issue or is the ninja build system creating problem for eclipse as in the way it builds the binaries etc?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "pointers", "struct"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1479315447, "post_id": 40637827, "comment_id": 68507973, "body": "You&#39;d need to cast the pointer back to the struct type. The question I have though is <b>why</b> do you want to do it this way?"}, {"owner": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 5, "creation_date": 1479315456, "post_id": 40637827, "comment_id": 68507981, "body": "Your example won&#39;t compile, and also is really C. You shouldn&#39;t be using void pointers in C++. What are you trying to achieve (besides &quot;learning void pointer&quot;)"}, {"owner": {"reputation": 51, "user_id": 6478037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c0788b66d87ab710ce646508c7e7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin", "link": "https://stackoverflow.com/users/6478037/aswin"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1479315628, "post_id": 40637827, "comment_id": 68508097, "body": "@UnholySheep how can I cast it back ? like (struct *)data ?"}, {"owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 2, "creation_date": 1479315692, "post_id": 40637827, "comment_id": 68508149, "body": "<code>(struct mynode*)data</code>"}, {"owner": {"reputation": 51, "user_id": 6478037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c0788b66d87ab710ce646508c7e7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin", "link": "https://stackoverflow.com/users/6478037/aswin"}, "reply_to_user": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 0, "creation_date": 1479315695, "post_id": 40637827, "comment_id": 68508151, "body": "@djgandy it compiles in mine. Trying to create dynamic structure assignment, like users can pass any structure and it will allocate memory."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1479315785, "post_id": 40637827, "comment_id": 68508211, "body": "@Aswin: The pointer is passed by value, so even if you allocate memory the caller won&#39;t receive a pointer to it.  Consider something like <code>template&lt;typename T&gt; void initialize(T*&amp; data)</code> -- note the reference-to-pointer."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479315790, "post_id": 40637827, "comment_id": 68508217, "body": "@Aswin what you are trying to do sounds fishy. And in C++ you would&#39;nt even think about such a thing, may in C yes."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1479315791, "post_id": 40637827, "comment_id": 68508220, "body": "@Aswin How do you plan to allocate memory for a struct, without knowing the actual type of it?"}, {"owner": {"reputation": 51, "user_id": 6478037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c0788b66d87ab710ce646508c7e7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin", "link": "https://stackoverflow.com/users/6478037/aswin"}, "reply_to_user": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 0, "creation_date": 1479315808, "post_id": 40637827, "comment_id": 68508230, "body": "@TheodorosChatzigiannakis The struct name and actual data it contains will differ dynamically during runtime. In that case how can I do it ?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479315832, "post_id": 40637827, "comment_id": 68508245, "body": "@Aswin short answer : no. The <code>initialize</code> function just &quot;sees&quot; a void pointer. It has absolutely no idea what the <i>actual</i> type of the variable/structure it is pointing to is."}, {"owner": {"reputation": 51, "user_id": 6478037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c0788b66d87ab710ce646508c7e7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin", "link": "https://stackoverflow.com/users/6478037/aswin"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479315909, "post_id": 40637827, "comment_id": 68508302, "body": "@MichaelWalz you mean it is not possible to do so ?"}, {"owner": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 1, "creation_date": 1479315931, "post_id": 40637827, "comment_id": 68508313, "body": "I think you need to give a more concrete example of what you are trying to  achieve. Your example will need more than one struct that can be passed as input to <code>initialize</code> to make it clear what your objective is. As your example stands, it makes absolutely no sense to delegate allocation to another function, when you know what you need to allocate at the call site."}, {"owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 1, "creation_date": 1479315993, "post_id": 40637827, "comment_id": 68508345, "body": "@Aswin That&#39;s a good question and it&#39;s an indication that what you&#39;re doing is not the best way to proceed. By taking a <code>void*</code> you are erasing information about what kind of pointer it was originally. Do you <i>want</i> to erase that information? If not, use a template instead."}, {"owner": {"reputation": 407, "user_id": 5567621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hc8fe.jpg?s=128&g=1", "display_name": "Daniel Vlasenko", "link": "https://stackoverflow.com/users/5567621/daniel-vlasenko"}, "edited": false, "score": 0, "creation_date": 1479316022, "post_id": 40637827, "comment_id": 68508367, "body": "@Aswin &quot;how can I do it?&quot;. In c++ you should do it with inheritance and composition of objects"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479316113, "post_id": 40637827, "comment_id": 68508434, "body": "@Aswin Please <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">read this</a>."}, {"owner": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 0, "creation_date": 1479316231, "post_id": 40637827, "comment_id": 68508534, "body": "IMO from the limited information, you are probably wanting something like a factory method that will create many object types that all share a common interface. Hard to say for sure as you have only described the method of implementation, not the problem."}, {"owner": {"reputation": 51, "user_id": 6478037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c0788b66d87ab710ce646508c7e7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin", "link": "https://stackoverflow.com/users/6478037/aswin"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479316300, "post_id": 40637827, "comment_id": 68508580, "body": "@MichaelWalz what if user allocates memory to struct like struct temp* = (struct temp)malloc(sizeof(struct mynode) then passes it to initialize like initialize(temp). Can I get the struct contents ?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1479316417, "post_id": 40637827, "comment_id": 68508653, "body": "@Aswin no, as I explained before, the void pointer <code>data</code> in <code>initialize</code> is just, welll... a void pointer. There is no way to find out dynamically to what type the void pointer points."}, {"owner": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 0, "creation_date": 1479316462, "post_id": 40637827, "comment_id": 68508675, "body": "@Aswin Yes you can by casting, but why not just change the function signature?"}, {"owner": {"reputation": 51, "user_id": 6478037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c0788b66d87ab710ce646508c7e7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin", "link": "https://stackoverflow.com/users/6478037/aswin"}, "reply_to_user": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 0, "creation_date": 1479316731, "post_id": 40637827, "comment_id": 68508857, "body": "@djgandy how can I do that ? I&#39;m kinda new to this void pointers."}, {"owner": {"reputation": 1519, "user_id": 203719, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2c3a9d5c4c1e6526058b191733a0731a?s=128&d=identicon&r=PG", "display_name": "Ant", "link": "https://stackoverflow.com/users/203719/ant"}, "edited": false, "score": 1, "creation_date": 1479316871, "post_id": 40637827, "comment_id": 68508948, "body": "Despite all the really good advice above I&#39;d like to add that using the names mynode as the struct name and myNode as the pointer name is bound to lead to a nasty bug at some time. How you change it is up to you but I would make them noticeably different to save you a day of head scratching when you mix them up. I could add that Hungarian notation is an option but it&#39;s so out of fashion that I can&#39;t recommend it."}], "answers": [{"tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": false, "score": 6, "last_activity_date": 1479316452, "last_edit_date": 1479316452, "creation_date": 1479316081, "answer_id": 40638130, "question_id": 40637827, "link": "https://stackoverflow.com/questions/40637827/c-void-pointer-to-get-struct/40638130#40638130", "title": "C++ void pointer to get struct", "body": "<p>well, you can cast the pointer back to the original structure:</p>\n\n<pre><code>auto myStruct = static_cast&lt;mynode*&gt;(data);\n</code></pre>\n\n<p>although, your code is terribly C-like in the use of <code>void*</code>.</p>\n\n<p>In C++, you are encouraged to use static polymorphism in the form of templates:</p>\n\n<pre><code>template&lt;class Dependency&gt;\nvoid initialize(Dependency&amp; data){/*...*/}\n</code></pre>\n\n<p>or dynamic polymorphism, in the form of inheritance and overriding:</p>\n\n<pre><code>struct BaseNode{\n  virtual ~BaseNode() = default;\n};\n\nstruct MyNode : public BaseNode{};\n\nvoid initialize (BaseNode* node){/*..*/};\n</code></pre>\n\n<p>The use of <code>void*</code> in order to achieve generic code in C++ usually comes when dealing with C API's, like POSIX or Win32, and in your code you should avoid them.</p>\n"}], "owner": {"reputation": 51, "user_id": 6478037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45c0788b66d87ab710ce646508c7e7f5?s=128&d=identicon&r=PG&f=1", "display_name": "Aswin", "link": "https://stackoverflow.com/users/6478037/aswin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1479316452, "creation_date": 1479315245, "last_edit_date": 1479315651, "question_id": 40637827, "link": "https://stackoverflow.com/questions/40637827/c-void-pointer-to-get-struct", "title": "C++ void pointer to get struct", "body": "<p>I'm trying to learn void pointer. I want to get the passed struct contents using a void pointer.</p>\n\n<p>Here is my struct:</p>\n\n<p>Main.cpp</p>\n\n<pre><code>struct mynode\n{\n    int id;\n    int amt;\n};\nstruct mynode* myNode;\n\nint main()\n{   \n    myclass mc;\n    mc.initialize(myNode);\n    getch();\n}\n</code></pre>\n\n<p>myclass.cpp</p>\n\n<pre><code>void initialize(void* data)\n{\n    //how to get passed struct here ?\n}\n</code></pre>\n"}, {"tags": ["c++", "g++", "operators", "c++17", "fold-expression"], "comments": [{"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1479315549, "post_id": 40637781, "comment_id": 68508045, "body": "Looks very strange for me."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1479315834, "post_id": 40637781, "comment_id": 68508246, "body": "Might be a GCC compiler bug. Declaration syntax is hard :-) Clang seems to be fine with the code. (I suppose that&#39;s why they say &quot;1z support is <i>experimental</i>.)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1479317080, "post_id": 40637781, "comment_id": 68509099, "body": "GCC 7 isn&#39;t released."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1479317154, "post_id": 40637781, "comment_id": 68509150, "body": "@T.C. They coming from 6.x version and previous."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1479317197, "post_id": 40637781, "comment_id": 68509196, "body": "But yes, this looks like a bug. I don&#39;t see how that can be parsed as a declaration. I suspect that they were trying a type-id parse first (if you squint, the first part looks like a C-style cast), and somehow failed to gracefully recover when it discovered the conflict."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1479318317, "post_id": 40637781, "comment_id": 68509835, "body": "@T.C.: Also, C++17 isn&#39;t released, so no rush :-)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1479330550, "post_id": 40637781, "comment_id": 68516764, "body": "Reported as <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=78388\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=78388</a>"}], "owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1479316505, "creation_date": 1479315119, "last_edit_date": 1592644375, "question_id": 40637781, "link": "https://stackoverflow.com/questions/40637781/declaration-of-void-variable-shadows-template-parameter-in-fold-expression", "title": "declaration of void variable shadows template parameter in fold expression", "body": "<p>Is the following <code>g++</code>'s behaviour a bug?</p>\n<pre><code>#include &lt;utility&gt;\n#include &lt;type_traits&gt;\n\ntemplate&lt; std::size_t ...i &gt;\nconstexpr\nbool f(int k, std::index_sequence&lt; i... &gt;)\n{\n    int j = (std::size_t((void(i), 1)) + ...) * k;\n    return 0 &lt; j;\n}\n\nstatic_assert(f(3, std::make_index_sequence&lt; 3 &gt;{}));\n</code></pre>\n<p>Gives an error message:</p>\n<blockquote>\n<p>main.cpp: In function <code>constexpr bool f(int, std::index_sequence&lt;i ...&gt;)</code>:</p>\n<p>main.cpp:11:33: error: declaration of <code>void i</code> shadows template parameter</p>\n<pre><code>int j = (std::size_t((void(i), 1)) + ...) * k;\n                            ^\n</code></pre>\n<p>main.cpp:7:11: note: template parameter <code>i</code> declared here</p>\n<pre><code>template&lt; std::size_t ...i &gt;\n          ^~~\n</code></pre>\n</blockquote>\n<p><a href=\"http://coliru.stacked-crooked.com/a/8e4bce903e9590d2\" rel=\"nofollow noreferrer\">Live example.</a></p>\n<p>Changing from <code>void</code> to <code>static_cast&lt; void &gt;</code> makes error to cease.</p>\n<p>Multiplication by <code>k</code> from the left side also makes error to cease.</p>\n<p><code>std::size_t</code> here is to avoid <a href=\"https://stackoverflow.com/questions/33748391/can-you-use-a-subexpression-within-fold-expressions\">this</a> <code>g++</code>'s bug.</p>\n<p>I know, that declaration <code>int (i),</code> is equivalent to <code>int i,</code> in a couple of contexts, but not in lhs part of built-in comma operator. Moreover, it is a <code>void</code> variable declaration.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 11, "creation_date": 1479314683, "post_id": 40637589, "comment_id": 68507449, "body": "Why are you calling <code>delete</code>?  You never call <code>delete</code>/<code>delete[]</code> unless you call <code>new</code>/<code>new[]</code>"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 14, "creation_date": 1479314689, "post_id": 40637589, "comment_id": 68507454, "body": "Both cases are undefined behavior, since the memory did not come from <code>new</code>.  There&#39;s no why beyond that."}, {"owner": {"reputation": 2306, "user_id": 3437608, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Wif9E.jpg?s=128&g=1", "display_name": "Cullub", "link": "https://stackoverflow.com/users/3437608/cullub"}, "edited": false, "score": 0, "creation_date": 1479317227, "post_id": 40637589, "comment_id": 68509216, "body": "I don&#39;t understand the downvotes here - @GameOfChess obviously forgot (or didn&#39;t know) that you have to allocate with <code>new</code> for <code>delete</code> to have defined behavior.  On the contrary, I think this question could be a very useful one to future Googlers who run into this problem."}, {"owner": {"reputation": 85, "user_id": 6274831, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10154299498499994/picture?type=large", "display_name": "GameOfChess", "link": "https://stackoverflow.com/users/6274831/gameofchess"}, "edited": false, "score": 0, "creation_date": 1479325263, "post_id": 40637589, "comment_id": 68513751, "body": "Thank you all for answering this but I hoped for some deep responses.  1.) I understand delete has to be used in conjunction with new. However, I am going deeper than that and investigating undefined behavior. 2.) Here, delete isn&#39;t that illogical. See, the pointer a as parameter in the function under scenario 1 would anyhow be allocated on the stack when this function is called. Point is this would, under normal circumstances be deleted by compiler after function terminates. My point was to see what happens if I delete it before that, inside the function itself."}, {"owner": {"reputation": 85, "user_id": 6274831, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10154299498499994/picture?type=large", "display_name": "GameOfChess", "link": "https://stackoverflow.com/users/6274831/gameofchess"}, "edited": false, "score": 0, "creation_date": 1479325275, "post_id": 40637589, "comment_id": 68513756, "body": "3.) Please, read the two functions carefully and try running it. I am looking for explanations for different behavior in the 2 scenarios."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6274831, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10154299498499994/picture?type=large", "display_name": "GameOfChess", "link": "https://stackoverflow.com/users/6274831/gameofchess"}, "edited": false, "score": 0, "creation_date": 1479712811, "post_id": 40637760, "comment_id": 68656903, "body": "Yes. I was wondering about that ANYTHING, and trying to figure out why that ANYTHING  was different under two scenarios."}], "tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 0, "last_activity_date": 1479315078, "creation_date": 1479315078, "answer_id": 40637760, "question_id": 40637589, "link": "https://stackoverflow.com/questions/40637589/behavior-of-delete-different-for-a-pointer-and-array/40637760#40637760", "title": "Behavior of delete different for a pointer and array", "body": "<p>You're invoking undefined behavior on multiple levels.  Calling <code>delete</code> on an array rather than <code>delete[]</code>...and calling any form of <code>delete</code> on an object not allocated with <code>new</code>.</p>\n\n<p>Your program can do anything it wants.</p>\n"}], "owner": {"reputation": 85, "user_id": 6274831, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10154299498499994/picture?type=large", "display_name": "GameOfChess", "link": "https://stackoverflow.com/users/6274831/gameofchess"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1479315134, "creation_date": 1479314579, "last_edit_date": 1479314722, "question_id": 40637589, "link": "https://stackoverflow.com/questions/40637589/behavior-of-delete-different-for-a-pointer-and-array", "title": "Behavior of delete different for a pointer and array", "body": "<p>I stumbled on this problem while tinkering with old school arrays. An interesting one though:</p>\n\n<pre><code>a[] = {1,2,3,4,5};\na[][] = {{1,2,3,4}, {4,5,6,7}, {8,9,10,11}, {12,13,14,15}}\n</code></pre>\n\n<p>Consider 2 scenarios:</p>\n\n<p>1.) </p>\n\n<pre><code>void func(int *a) { //passing a 1D array\n   a[1] = 100; //modified an element here\n   delete a;  //This would have no effect on the array outside this function. \n}\n</code></pre>\n\n<p>2.) </p>\n\n<pre><code>void func(int (*a)[4]) { //passing a 2D array\n   a[1][2] = 100; //modified an element here of 2D array\n   delete a;  //Would have an effect on the outside. Would delete a[0][0]'s memory outside.\n} \n</code></pre>\n\n<p>Question is why?\nIn 1.) pointer shall point to an array variable memory hence, the delete signature won't clear the memory a[0]?</p>\n\n<p>In 2.) the signature of parameter and passed variable match exactly hence the delete would indeed delete the memory held by local variable?</p>\n\n<p>Any pointers here?</p>\n"}, {"tags": ["c++", "unreal-engine4"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1479314321, "post_id": 40637406, "comment_id": 68507163, "body": "According to the <a href=\"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AActor/ReceiveHit/index.html\" rel=\"nofollow noreferrer\">documentation</a> the function is not virtual, so you can&#39;t override it"}, {"owner": {"reputation": 41503, "user_id": 68571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Yw9Lg.png?s=128&g=1", "display_name": "VansFannel", "link": "https://stackoverflow.com/users/68571/vansfannel"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1479314362, "post_id": 40637406, "comment_id": 68507194, "body": "@UnholySheep Maybe I have followed an old tutorial."}, {"owner": {"reputation": 41503, "user_id": 68571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Yw9Lg.png?s=128&g=1", "display_name": "VansFannel", "link": "https://stackoverflow.com/users/68571/vansfannel"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1479314548, "post_id": 40637406, "comment_id": 68507345, "body": "@UnholySheep Look at this: <a href=\"https://wiki.unrealengine.com/Reflecting_Projectile_C%2B%2B\" rel=\"nofollow noreferrer\">wiki.unrealengine.com/Reflecting_Projectile_C%2B%2B</a>. Here, ReceiveHit is defined as virtual. So, I don&#39;t need to use override to implement it, isn&#39;t it? Do I have to call Super::ReceiveHit?"}, {"owner": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 1, "creation_date": 1479314893, "post_id": 40637406, "comment_id": 68507605, "body": "Check the definition in the header you are building against. The compiler is telling you its not virtual, or at least the signature that you have specified to override is not virtual. Maybe the interface has changed?"}, {"owner": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 1, "creation_date": 1479315127, "post_id": 40637406, "comment_id": 68507753, "body": "Yes. No need to delete! It&#39;s a valid question IMO and demonstrates the importance of override! Also docs - <a href=\"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AActor/NotifyHit/index.html\" rel=\"nofollow noreferrer\">docs.unrealengine.com/latest/INT/API/Runtime/Engine/&hellip;</a>"}, {"owner": {"reputation": 41503, "user_id": 68571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Yw9Lg.png?s=128&g=1", "display_name": "VansFannel", "link": "https://stackoverflow.com/users/68571/vansfannel"}, "edited": false, "score": 0, "creation_date": 1479316026, "post_id": 40637406, "comment_id": 68508372, "body": "Ok. They have changed ReceiveHit with NotifyHit. What a mess!!! Thanks a lot for your time. I will delete this question."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479318563, "post_id": 40637406, "comment_id": 68509979, "body": "Is there a specific reason why you write <code>class UPrimitiveComponent* MyComp</code> rather than <code>UPrimitiveComponent* MyComp</code>?"}, {"owner": {"reputation": 41503, "user_id": 68571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Yw9Lg.png?s=128&g=1", "display_name": "VansFannel", "link": "https://stackoverflow.com/users/68571/vansfannel"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479323505, "post_id": 40637406, "comment_id": 68512807, "body": "@ChristianHackl No, I have only copy and paste ReceiveHit from AActor header. I&#39;m learning C++ also, so I&#39;m not sure if it is right or wrong. I think they have put class in method signature because they don&#39;t have put the <code>#include</code> statement."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479328157, "post_id": 40637406, "comment_id": 68515408, "body": "@VansFannel: It is mainly C heritage, almost always unnecessary in C++ and thus very surprising to see. It has nothing to do with the <code>#include</code> statements."}, {"owner": {"reputation": 2626, "user_id": 649322, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9583f64c1250749a2ba59be5a956f507?s=128&d=identicon&r=PG", "display_name": "Marson Mao", "link": "https://stackoverflow.com/users/649322/marson-mao"}, "reply_to_user": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1479356552, "post_id": 40637406, "comment_id": 68524911, "body": "@ChristianHackl Is that <code>class</code> thing you mentioned the same as this question? <a href=\"http://stackoverflow.com/questions/28007165/class-keyword-in-variable-definition-in-c\" title=\"class keyword in variable definition in c\">stackoverflow.com/questions/28007165/&hellip;</a>  If so, I think Unreal Engine uses it very often due to their coding style, they use capital letter for their variable name as well, so they often need to put the <code>class</code> keyword in front of the type."}], "answers": [{"tags": [], "owner": {"reputation": 41503, "user_id": 68571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Yw9Lg.png?s=128&g=1", "display_name": "VansFannel", "link": "https://stackoverflow.com/users/68571/vansfannel"}, "is_accepted": true, "score": 0, "last_activity_date": 1479725010, "creation_date": 1479725010, "answer_id": 40718222, "question_id": 40637406, "link": "https://stackoverflow.com/questions/40637406/the-method-with-the-override-invalidator-did-not-invalidate-any-base-class-metho/40718222#40718222", "title": "The method with the override invalidator did not invalidate any base class method", "body": "<p>The problem is that this is not a virtual method. They've changed the API and I was following an old example.</p>\n\n<p>No, I can use <a href=\"https://docs.unrealengine.com/latest/INT/API/Runtime/Engine/GameFramework/AActor/NotifyHit/index.html\" rel=\"nofollow noreferrer\">NotifyHit</a> that is virtual and I can override it:</p>\n\n<pre><code>virtual void NotifyHit\n(\n    class UPrimitiveComponent * MyComp,\n    AActor * Other,\n    class UPrimitiveComponent * OtherComp,\n    bool bSelfMoved,\n    FVector HitLocation,\n    FVector HitNormal,\n    FVector NormalImpulse,\n    const FHitResult &amp; Hit\n)\n</code></pre>\n"}], "owner": {"reputation": 41503, "user_id": 68571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Yw9Lg.png?s=128&g=1", "display_name": "VansFannel", "link": "https://stackoverflow.com/users/68571/vansfannel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 379, "favorite_count": 0, "accepted_answer_id": 40718222, "answer_count": 1, "score": 0, "last_activity_date": 1479725010, "creation_date": 1479314087, "question_id": 40637406, "link": "https://stackoverflow.com/questions/40637406/the-method-with-the-override-invalidator-did-not-invalidate-any-base-class-metho", "title": "The method with the override invalidator did not invalidate any base class method", "body": "<p>I'm learning Unreal Engine 4.13.2 and C++ using Visual Studio 2015 Enterprise.</p>\n\n<p>I think my problem is a C++ so I think the best place to ask about it is here.</p>\n\n<p>I have a C++ class that inherits from AActor class. I have to override a method from AActor so I have put this on my header file:</p>\n\n<pre><code>virtual void ReceiveHit(class UPrimitiveComponent* MyComp, class AActor* Other, class UPrimitiveComponent* OtherComp, bool bSelfMoved, FVector HitLocation, FVector HitNormal, FVector NormalImpulse, const FHitResult&amp; Hit);\n</code></pre>\n\n<p>And also I have implemented in the cpp file.</p>\n\n<p>But I get the following compiler error:</p>\n\n<blockquote>\n  <p>MyActor.h(23): error C3668: 'MyActor::ReceiveHit': The method with the\n  override invalidator did not invalidate any base class method</p>\n</blockquote>\n\n<p>I have copied <code>ReceiveHit</code> method from AActor.h file and I get that error.</p>\n\n<p>I have also another methods overridden without problems. This is <code>MyActor</code> header file:</p>\n\n<pre><code>#pragma once\n\n#include \"GameFramework/Actor.h\"\n#include \"MyActor.generated.h\"\n\nUCLASS()\nclass MYGAME_API AMyActor : public AActor\n{\n    GENERATED_BODY()\n\npublic: \n    // Sets default values for this actor's properties\n    AMyActor();\n\n    // Called when the game starts or when spawned\n    virtual void BeginPlay() override;\n\n    // Called every frame\n    virtual void Tick( float DeltaSeconds ) override;\n\n    virtual void ReceiveHit(class UPrimitiveComponent* MyComp, AActor* Other, class UPrimitiveComponent* OtherComp, bool bSelfMoved, FVector HitLocation, FVector HitNormal, FVector NormalImpulse, const FHitResult&amp; Hit) override;\n\nprivate:\n    UProjectileMovementComponent* MyMovement;\n};\n</code></pre>\n\n<p>How can I fix this error?</p>\n"}, {"tags": ["c++", "double", "limit"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 10, "creation_date": 1479313504, "post_id": 40637185, "comment_id": 68506618, "body": "Why do you think you need to &quot;set a limit for the elements&quot; at all?"}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 1, "creation_date": 1479313711, "post_id": 40637185, "comment_id": 68506739, "body": "I mean, you are already limited by your system architecture for indexing into your matrix. Isn&#39;t that enough?"}, {"owner": {"reputation": 1432, "user_id": 3764197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wBhLD.jpg?s=128&g=1", "display_name": "dieKoderin", "link": "https://stackoverflow.com/users/3764197/diekoderin"}, "edited": false, "score": 0, "creation_date": 1479314228, "post_id": 40637185, "comment_id": 68507094, "body": "i get infinity in the result of matrix product."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1479314536, "post_id": 40637185, "comment_id": 68507333, "body": "It&#39;s likely you are doing something (logically or technically, like dividing by 0, using uninitialized automatic variables) wrong. An upper limit will likely not help you. For one, how do you want to decide whether your result exceeds it?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1479314896, "post_id": 40637185, "comment_id": 68507606, "body": "In order to help you we need more information. Best would be to reproduce the errors in a small piece of code which you can post here. Often the error becomes visible to oneself in the process of preparing that minimal example..."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479314928, "post_id": 40637185, "comment_id": 68507622, "body": "Show us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1479314166, "post_id": 40637414, "comment_id": 68507052, "body": "How does this answer the op&#39;s question?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1479314318, "post_id": 40637414, "comment_id": 68507160, "body": "@George Errr... like, she asks for a limit, and Mohamed provides one? (Admittedly the question is not entirely clear -- other people seem to think she&#39;s asking for a limit on indexes, not values. But given that she is doing &quot;many sums and multiplications&quot; on them and talks about infinity results, I think she&#39;s asking for element value limits.)"}, {"owner": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "edited": false, "score": 0, "creation_date": 1479314373, "post_id": 40637414, "comment_id": 68507200, "body": "Question &quot;I want to know what is the logical value to set as limit for elements&quot;, and the elements are <code>double</code> so this should be what the max and min limits of a <code>double</code> on a given machine."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1479314465, "post_id": 40637414, "comment_id": 68507276, "body": "The question isn&#39;t what the max and min values of double are. It&#39;s about what (smaller) limit to use for doubles. But the question is poorly specified since it isn&#39;t clear what the purpose of the limit is."}, {"owner": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1479314547, "post_id": 40637414, "comment_id": 68507342, "body": "@interjay yes, I suggest using these values ..."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 4, "creation_date": 1479314632, "post_id": 40637414, "comment_id": 68507404, "body": "That makes no sense. These values are already the maximum and minimum possible <code>double</code>s, so using them as a limit will do nothing."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1479314713, "post_id": 40637414, "comment_id": 68507475, "body": "@interjay Given zero value constraints -- and infinity results --, the logical limit <i>is</i> the  technical limit. Given the (poor) quality of the question I would be astonished if the OP knew about <code>std::numeric</code>."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1479314821, "post_id": 40637414, "comment_id": 68507552, "body": "@PeterA.Schneider The OP is asking about which value constraints to use to avoid infinity results. This can&#39;t really be answered though without knowing the exact operations that will be performed. In any case, this answer does not answer the question at all."}, {"owner": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1479315176, "post_id": 40637414, "comment_id": 68507785, "body": "@interjay based on my interpretation, on a scale of min to max the OP can represent the numeric values."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1479315325, "post_id": 40637414, "comment_id": 68507883, "body": "So you&#39;re saying he can represent numeric values by using values in the entire range of numeric values? That&#39;s not really saying anything useful. And it doesn&#39;t answer the OP&#39;s question about how to avoid infinite results from calculations."}, {"owner": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "edited": false, "score": 0, "creation_date": 1479315508, "post_id": 40637414, "comment_id": 68508017, "body": "No, I mean something like <code>saturate_cast</code> in opencv <a href=\"http://docs.opencv.org/2.4/modules/core/doc/utility_and_system_functions_and_macros.html\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/modules/core/doc/&hellip;</a>"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1479315704, "post_id": 40637414, "comment_id": 68508155, "body": "<code>saturate_cast</code> from what type to what type? OP is using <code>double</code>s. What are you suggesting they do exactly? What should they do with <code>std::numeric_limits&lt;double&gt;::max()</code>?"}, {"owner": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "edited": false, "score": 0, "creation_date": 1479315771, "post_id": 40637414, "comment_id": 68508203, "body": "to set INF to <code>std::numeric_limits&lt;double&gt;::max()</code> if that is the limit OP asks for"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1479316295, "post_id": 40637414, "comment_id": 68508574, "body": "@MohamedMoanis To be honest the op&#39;s question should be closed as too broad. Reading it, it seems like they want to limit the individual elements in order to prevent anything being evaluated to inf, the problem is that there&#39;s no context and no reason given as to why this is necessary(which is required to give a good answer) as alluded to by the first comment on the op&#39;s question."}, {"owner": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1479316483, "post_id": 40637414, "comment_id": 68508692, "body": "@George I agree with you."}], "tags": [], "owner": {"reputation": 459, "user_id": 5504460, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mii1q.jpg?s=128&g=1", "display_name": "Mohamed Moanis", "link": "https://stackoverflow.com/users/5504460/mohamed-moanis"}, "is_accepted": false, "score": 0, "last_activity_date": 1479314480, "last_edit_date": 1479314480, "creation_date": 1479314114, "answer_id": 40637414, "question_id": 40637185, "link": "https://stackoverflow.com/questions/40637185/best-double-value-limit-in-c/40637414#40637414", "title": "best double value limit in c++", "body": "<p>You can always use <a href=\"http://www.cplusplus.com/reference/limits/numeric_limits/\" rel=\"nofollow noreferrer\"><code>std::numeric_limits</code></a>.</p>\n\n<hr>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;limits&gt;\n#include &lt;iostream&gt;\n\nint main() \n{\n          std::cout &lt;&lt; \"float\\t\"\n          &lt;&lt; std::numeric_limits&lt;float&gt;::lowest() &lt;&lt; '\\t'\n          &lt;&lt; std::numeric_limits&lt;float&gt;::max() &lt;&lt; '\\n';\n          std::cout &lt;&lt; \"double\\t\"\n          &lt;&lt; std::numeric_limits&lt;double&gt;::lowest() &lt;&lt; '\\t'\n          &lt;&lt; std::numeric_limits&lt;double&gt;::max() &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "is_accepted": false, "score": 1, "last_activity_date": 1479317076, "creation_date": 1479317076, "answer_id": 40638437, "question_id": 40637185, "link": "https://stackoverflow.com/questions/40637185/best-double-value-limit-in-c/40638437#40638437", "title": "best double value limit in c++", "body": "<p>The range of double is </p>\n\n<pre><code>1.7976931348623158e+308 \n</code></pre>\n\n<p>Lets say maximum value of element as X;\nfor multiplication the maximum answer will be</p>\n\n<p><code>X*X + X*X + X*X .....10,000 times(maximum row and column count)</code></p>\n\n<p>i.e </p>\n\n<p><code>10000*X*X</code></p>\n\n<p>Therefore\n`</p>\n\n<pre><code>1.7976931348623158e+308  = 10000*X*X\n\n1.7976931348623158e+304 = X*X\n\nX ~ 1.7976931348623158e+150\n</code></pre>\n\n<p>But you will lose precision.</p>\n\n<p>This value is if you are going to multiply once.</p>\n"}], "owner": {"reputation": 1432, "user_id": 3764197, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/wBhLD.jpg?s=128&g=1", "display_name": "dieKoderin", "link": "https://stackoverflow.com/users/3764197/diekoderin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2587, "favorite_count": 0, "closed_date": 1479319864, "answer_count": 2, "score": 1, "last_activity_date": 1479317076, "creation_date": 1479313436, "question_id": 40637185, "link": "https://stackoverflow.com/questions/40637185/best-double-value-limit-in-c", "closed_reason": "Needs details or clarity", "title": "best double value limit in c++", "body": "<p>I am working with matrices in c++ and the type of elements is double. My limit for matrix dimentions is 10,000. I want to know what is the logical value to set as limit for elements, considering the fact that I am doing many sum and multiplication actions on them. I want this number to be as high as possible but without having infinity number problems.</p>\n"}, {"tags": ["python", "c++", "debugging", "gdb"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 7168527, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f8f45214c6d93db4e40742d97a50365b?s=128&d=identicon&r=PG&f=1", "display_name": "ringul", "link": "https://stackoverflow.com/users/7168527/ringul"}, "edited": false, "score": 0, "creation_date": 1479318134, "post_id": 40638125, "comment_id": 68509726, "body": "The python is installed properly. But the worrying thing is some how GDB is getting confused with python paths. My shell script which installs all cross compilers and other stuff holds files like python 2.7. when i ran this shell script, it is setting up some folders which holds a file with all path variables. The QtCreator shell script is pointing to the file which holds all these paths. My Qt is pointing to these folders installed by shell script instead of my ubuntu python paths. What is the initial step to figure it out?"}], "tags": [], "owner": {"reputation": 18871, "user_id": 1442050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e975c669f2ce0f2be4613f1e123864b3?s=128&d=identicon&r=PG", "display_name": "Tom Tromey", "link": "https://stackoverflow.com/users/1442050/tom-tromey"}, "is_accepted": false, "score": 0, "last_activity_date": 1479316074, "creation_date": 1479316074, "answer_id": 40638125, "question_id": 40637184, "link": "https://stackoverflow.com/questions/40637184/gdb-crashing-unexpected-gdb-stderr-fatal-python-error-py-initialize-unable/40638125#40638125", "title": "GDB crashing - UNEXPECTED GDB STDERR: Fatal Python error: Py_Initialize: Unable to get the locale encoding", "body": "<p>This error most likely means that Python isn't installed properly on your machine.  This error comes during gdb initialization, when it tries to initialize the Python interpreter.  If <code>Py_Initialize</code> fails, there isn't much gdb can do about it...</p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 7168527, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f8f45214c6d93db4e40742d97a50365b?s=128&d=identicon&r=PG&f=1", "display_name": "ringul", "link": "https://stackoverflow.com/users/7168527/ringul"}, "is_accepted": false, "score": 0, "last_activity_date": 1490668793, "creation_date": 1490668793, "answer_id": 43059750, "question_id": 40637184, "link": "https://stackoverflow.com/questions/40637184/gdb-crashing-unexpected-gdb-stderr-fatal-python-error-py-initialize-unable/43059750#43059750", "title": "GDB crashing - UNEXPECTED GDB STDERR: Fatal Python error: Py_Initialize: Unable to get the locale encoding", "body": "<p>The issue is due to gdb optimization environment variables. there are 4 variables in in the ide, configured with -o2 optimization. Remove the -o2 optimization in the front of variables, then it will resolve your issue. In my case its -o2, in your case, it can be other optimizations. Please look for them.</p>\n"}], "owner": {"reputation": 37, "user_id": 7168527, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f8f45214c6d93db4e40742d97a50365b?s=128&d=identicon&r=PG&f=1", "display_name": "ringul", "link": "https://stackoverflow.com/users/7168527/ringul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 698, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490668793, "creation_date": 1479313436, "last_edit_date": 1479314469, "question_id": 40637184, "link": "https://stackoverflow.com/questions/40637184/gdb-crashing-unexpected-gdb-stderr-fatal-python-error-py-initialize-unable", "title": "GDB crashing - UNEXPECTED GDB STDERR: Fatal Python error: Py_Initialize: Unable to get the locale encoding", "body": "<p>I am using QtCreator in ubuntu(virtual box) to run a simple c++ program(hello.cpp). The QtCreator is building and running the application fine .But when it is not letting me to debug. I am running a shell script on ubuntu of vbox to get some cross compilers required, since i have a hard ware which holds arm architecture. finally i want to push the cross compiled executable on to the hardware and do remote debugging. Before that i am trying to perfrom desktop debugging on ubuntu, but the GDB is crashing. I think GDB is getting confused with some python path. Can anyone help me with this?\nHere is the picture of GDB log: </p>\n\n<p><img src=\"https://i.stack.imgur.com/ccC4B.png\" alt=\"GDB log\"></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1479313564, "post_id": 40637159, "comment_id": 68506647, "body": "Neither? Also I don&#39;t see how these two code snippets on their own are related to virtual destructors? You&#39;d need to at least show the class definitions."}, {"owner": {"reputation": 2430, "user_id": 2546626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24bee02c79f348081ac9e14edc982a0d?s=128&d=identicon&r=PG", "display_name": "Youka", "link": "https://stackoverflow.com/users/2546626/youka"}, "edited": false, "score": 0, "creation_date": 1479313644, "post_id": 40637159, "comment_id": 68506695, "body": "1) No problem. x is just a pointer, but y gets destructed and frees all resources from super class too. 2) Resources of Y get lost, because just the destructor of X is called on an instance of Y in memory -&gt; possible memory leak (or worse)."}, {"owner": {"reputation": 174, "user_id": 6877317, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c4d6694d3e2d8e2c8f7ab1606f404648?s=128&d=identicon&r=PG&f=1", "display_name": "Yashwanth CB", "link": "https://stackoverflow.com/users/6877317/yashwanth-cb"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1479314223, "post_id": 40637159, "comment_id": 68507091, "body": "@UnholySheep there is nothing special about class definition. I mentioned the statement. The second one seems to cause a memory leak"}], "answers": [{"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 0, "last_activity_date": 1479313677, "creation_date": 1479313677, "answer_id": 40637261, "question_id": 40637159, "link": "https://stackoverflow.com/questions/40637159/virtual-destructor-when-it-is-necessary/40637261#40637261", "title": "Virtual destructor - when it is necessary", "body": "<pre><code>Y y;\nX *x = &amp;y;\nreturn;\n</code></pre>\n\n<p>Nothing bad happens here.  The object <code>y</code> is (fully) destroyed at the end of its scope.</p>\n\n<pre><code>X*x = new Y;\ndelete x;\nreturn;\n</code></pre>\n\n<p>This will cause a memory leak <em>if you're lucky</em>.  The behavior is undefined, meaning anything bad could happen.</p>\n\n<p>It's generally a good idea to declare a virtual destructor whenever the class is intended to be a base class for other classes.</p>\n"}], "owner": {"reputation": 174, "user_id": 6877317, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c4d6694d3e2d8e2c8f7ab1606f404648?s=128&d=identicon&r=PG&f=1", "display_name": "Yashwanth CB", "link": "https://stackoverflow.com/users/6877317/yashwanth-cb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "closed_date": 1479314664, "answer_count": 1, "score": 0, "last_activity_date": 1479313677, "creation_date": 1479313347, "last_edit_date": 1479313598, "question_id": 40637159, "link": "https://stackoverflow.com/questions/40637159/virtual-destructor-when-it-is-necessary", "closed_reason": "Duplicate", "title": "Virtual destructor - when it is necessary", "body": "<p>Let's say that I have a base class X with only one virtual function.</p>\n\n<p>I extend it to Y and override that function.</p>\n\n<p>I didn't provide explicit destructor for X and Y.</p>\n\n<p>What happens during the destruction in this statement.</p>\n\n<pre><code>Y y;\nX *x= &amp;y;\nreturn;\n.\n.\n.\nX*x = new Y;\ndelete x;\nreturn;\n</code></pre>\n\n<p>Which will cause memory leak..</p>\n"}, {"tags": ["c++", "arduino", "esp8266", "arduino-esp8266"], "comments": [{"owner": {"reputation": 786, "user_id": 2393256, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/171c5497271ae6531326680ade33a88f?s=128&d=identicon&r=PG", "display_name": "user2393256", "link": "https://stackoverflow.com/users/2393256/user2393256"}, "edited": false, "score": 7, "creation_date": 1479313085, "post_id": 40636959, "comment_id": 68506306, "body": "C, C#, C++ are not the same. You should decide on one of them before you start writing code..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1479313117, "post_id": 40636959, "comment_id": 68506333, "body": "Why use function pointers instead of inheriting an abstract interface?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1479313314, "post_id": 40636959, "comment_id": 68506485, "body": "A pointer-to-member is not a &quot;regular&quot; pointer."}, {"owner": {"reputation": 59, "user_id": 6162243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccc898b488baa5bafd40ff0fa75ecb6a?s=128&d=identicon&r=PG&f=1", "display_name": "rud", "link": "https://stackoverflow.com/users/6162243/rud"}, "reply_to_user": {"reputation": 786, "user_id": 2393256, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/171c5497271ae6531326680ade33a88f?s=128&d=identicon&r=PG", "display_name": "user2393256", "link": "https://stackoverflow.com/users/2393256/user2393256"}, "edited": false, "score": 0, "creation_date": 1479313318, "post_id": 40636959, "comment_id": 68506488, "body": "@user2393256: Of course you are right. I am starting to learn the differences. I am aware that my current code is probably giberish to you :/"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "edited": false, "score": 3, "creation_date": 1479313322, "post_id": 40636959, "comment_id": 68506493, "body": "You can be new to &quot;C, C#, C++&quot;, but I am sure you are not new to the fact that similar names do not imply similarities."}, {"owner": {"reputation": 59, "user_id": 6162243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccc898b488baa5bafd40ff0fa75ecb6a?s=128&d=identicon&r=PG&f=1", "display_name": "rud", "link": "https://stackoverflow.com/users/6162243/rud"}, "edited": false, "score": 0, "creation_date": 1479313400, "post_id": 40636959, "comment_id": 68506533, "body": "I honestly do not know how to handle this situation properly, if you have any code example, that would really help .."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "edited": false, "score": 3, "creation_date": 1479313490, "post_id": 40636959, "comment_id": 68506601, "body": "The title makes no sense. The post does not contain any question. It is unclear what you are asking."}, {"owner": {"reputation": 59, "user_id": 6162243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccc898b488baa5bafd40ff0fa75ecb6a?s=128&d=identicon&r=PG&f=1", "display_name": "rud", "link": "https://stackoverflow.com/users/6162243/rud"}, "edited": false, "score": 0, "creation_date": 1479313497, "post_id": 40636959, "comment_id": 68506609, "body": "@NickyC of course .. I never tried to imply any different ... If my post made you feel so, please forgive me."}, {"owner": {"reputation": 59, "user_id": 6162243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccc898b488baa5bafd40ff0fa75ecb6a?s=128&d=identicon&r=PG&f=1", "display_name": "rud", "link": "https://stackoverflow.com/users/6162243/rud"}, "edited": false, "score": 0, "creation_date": 1479314024, "post_id": 40636959, "comment_id": 68506962, "body": "@NickyC I edited the post, I hope this clarifies a bit..."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1479314115, "post_id": 40636959, "comment_id": 68507023, "body": "@rud: I think I see your problem. In C++ there&#39;s a difference between function pointers and member function pointers. Your <code>Pattern</code> typedef should look  like <code>typdef void (ESPLedDriver::* pattern)();</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1479314341, "post_id": 40636959, "comment_id": 68507177, "body": "Your issue is that, according to the title, the C language does not have classes.   You can emulate classes in C, it will be a lot of work."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1479314430, "post_id": 40636959, "comment_id": 68507253, "body": "BTW, in C++ you don&#39;t need to use <code>typedef</code> with your structures."}, {"owner": {"reputation": 59, "user_id": 6162243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccc898b488baa5bafd40ff0fa75ecb6a?s=128&d=identicon&r=PG&f=1", "display_name": "rud", "link": "https://stackoverflow.com/users/6162243/rud"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1479314662, "post_id": 40636959, "comment_id": 68507434, "body": "@ThomasMatthews Oh! I forgot to correct the title, now I understand the .. &quot;confusion&quot; I created :/ Duely noted about <code>typedef</code>"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6162243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccc898b488baa5bafd40ff0fa75ecb6a?s=128&d=identicon&r=PG&f=1", "display_name": "rud", "link": "https://stackoverflow.com/users/6162243/rud"}, "edited": false, "score": 0, "creation_date": 1479315632, "post_id": 40637639, "comment_id": 68508099, "body": "Oh yes, I understand what you mean ! But than, how may I &quot;feed&quot; them to the defined <code>PatternAndName patterns</code> struct (assuming a struct is still the best way to group all the abstract classes), so that I can later do something like <code>patterns[currentPatternIndex].pattern_method();</code> ..?"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 2, "last_activity_date": 1479314723, "creation_date": 1479314723, "answer_id": 40637639, "question_id": 40636959, "link": "https://stackoverflow.com/questions/40636959/c-how-to-reference-class-methods-in-a-struct/40637639#40637639", "title": "C++, How to reference Class methods in a Struct?", "body": "<p>If all of the objects are string and pattern, you can model them as an abstract base class:  </p>\n\n<pre><code>class String_Pattern\n{\n  public:  \n    virtual void pattern_method(ESPLedDriver&amp; driver_to_use) = 0;\n  private:\n    std::string  text;\n};\n</code></pre>\n\n<p>Note that this design requires passing the driver to the string pattern object.  Think of this giving the object a driver to use.  </p>\n"}], "owner": {"reputation": 59, "user_id": 6162243, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccc898b488baa5bafd40ff0fa75ecb6a?s=128&d=identicon&r=PG&f=1", "display_name": "rud", "link": "https://stackoverflow.com/users/6162243/rud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "closed_date": 1479331662, "answer_count": 1, "score": 0, "last_activity_date": 1479314723, "creation_date": 1479312756, "last_edit_date": 1479314558, "question_id": 40636959, "link": "https://stackoverflow.com/questions/40636959/c-how-to-reference-class-methods-in-a-struct", "closed_reason": "Needs details or clarity", "title": "C++, How to reference Class methods in a Struct?", "body": "<p>I am trying to humbly port \"FastLED + ESP8266 Web Server\" by Jason Coon: <a href=\"https://github.com/jasoncoon/esp8266-fastled-webserver\" rel=\"nofollow noreferrer\">https://github.com/jasoncoon/esp8266-fastled-webserver</a> to ESPAsyncWebServer, with a few extra goodies...</p>\n\n<p>My project is located here <a href=\"https://github.com/kelexel/esp8266-fastled-async-webserver-2.0/\" rel=\"nofollow noreferrer\">https://github.com/kelexel/esp8266-fastled-async-webserver-2.0/</a></p>\n\n<p>My main work on this project is to wrap everything into nice Classes, and try to afford some kind of modularity.</p>\n\n<h1>EDIT: As many pointed out in the comments bellow, what I try to accomplish is clearly wrongly illustrated. All I am looking for are ideas, code sample, docs, references, on what should be done, so I can learn and improve...</h1>\n\n<p>I am totally new to C++, so please, be indulgent..</p>\n\n<p>What I am trying to accomplish is obtain what I, neophyte, can only explain as a collection of objects, each objects having a String <em>name</em> and method <em>pattern</em>. Said <em>pattern</em> should be a method of the ESPLedDriver.cpp Class</p>\n\n<p>The issue resides in the fact that in ESPLedDriver.h and ESPLedDriver.cpp, I try to create a Struct that references ESPLedDriver::</p>\n\n<p>I made a snippet of the code to illustrate the issue:</p>\n\n<p>ESPLedDriver.cpp</p>\n\n<pre><code>void ESPLedDriver::colorwaves()\n{\n  // ...\n}\nvoid ESPLedDriver::palettetest()\n{\n  // ...\n}\n\nvoid ESPLedDriver::setPatterns()\n{\n  // const uint8_t patternCount;\n  _patterns = {\n\n    // ERROR: src/ESPLedDriver.cpp:225:3: error: cannot convert 'ESPLedDriver::colorwaves' from type 'void (ESPLedDriver::)()' to type 'ESPLedDriver::Pattern {aka void (*)()}'\n    { colorwaves, \"Color Waves\" },\n\n    // ERROR: src/ESPLedDriver.cpp:225:3: error: cannot convert 'ESPLedDriver::palettetest' from type 'void (ESPLedDriver::)()' to type 'ESPLedDriver::Pattern {aka void (*)()}'\n    { this-&gt;palettetest, \"Palette Test\" },\n  };\n}\n</code></pre>\n\n<p>ESPLedDriver.h</p>\n\n<pre><code>#include \"FastLED.h\"\n\n  class ESPLedDriver\n  {\n  public:\n    ESPLedDriver();\n    // ...\n  private:\n    void setPatterns();\n    typedef void (*Pattern)();\n    typedef Pattern PatternList[];\n    typedef struct {\n      Pattern pattern;\n      String name;\n    } PatternAndName;\n    typedef PatternAndName PatternAndNameList[];\n\n    /* Patterns */\n    void colorwaves();\n    void palettetest();\n\n    PatternAndNameList _patterns;\n    uint8_t _patternCount;\n}\n</code></pre>\n\n<p>(Or if you prefer, as a gist: \n<a href=\"https://gist.github.com/kelexel/ab5687cf83e376c709e49fbfbcfc100b\" rel=\"nofollow noreferrer\">https://gist.github.com/kelexel/ab5687cf83e376c709e49fbfbcfc100b</a> )</p>\n"}, {"tags": ["c++", "qt", "qtsql"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 2, "creation_date": 1479318306, "post_id": 40636862, "comment_id": 68509828, "body": "Thanks for posting a nice self-contained test case. You could save three lines by: 1. Not including <code>&lt;QCoreApplication&gt;</code> and <code>&lt;QDebug&gt;</code>: the <code>&lt;QtSql&gt;</code> module includes the <code>&lt;QtCore&gt;</code> dependency. 2. Not calling <code>a.exec()</code> as you have synchronous code. You can remove the return statement in <code>main</code> safely here."}], "answers": [{"comments": [{"owner": {"reputation": 6970, "user_id": 1270008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae8b0fc66eaeea19cbf9be759db5abf?s=128&d=identicon&r=PG", "display_name": "tanius", "link": "https://stackoverflow.com/users/1270008/tanius"}, "edited": false, "score": 1, "creation_date": 1592743633, "post_id": 40638769, "comment_id": 110527750, "body": "An equivalent case happens when trying top open a SQLite database file with <code>QSqlDatabase::open</code> but it has vanished from disk. It will then be silently re-created as an empty database file, resulting in <code>&quot; Parameter count mismatch&quot;</code> on the first query because there are no tables inside. Means, always check that the expected tables are present when opening SQLite databases in Qt."}], "tags": [], "owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "is_accepted": true, "score": 3, "last_activity_date": 1479319459, "last_edit_date": 1479319459, "creation_date": 1479318098, "answer_id": 40638769, "question_id": 40636862, "link": "https://stackoverflow.com/questions/40636862/parameter-count-mismatch-in-qtsql/40638769#40638769", "title": "Parameter count mismatch in Qtsql", "body": "<p>You don't have a table named <code>person</code> in the database. You are trying to insert values into a table that does not exist.</p>\n\n<hr>\n\n<p>I think that the error message is wrong. But anyway, I added a <code>CREATE</code> statement to your code, so that the table is created before the <code>INSERT</code> statement is executed:</p>\n\n<pre><code>#include &lt;QtSql&gt;\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    QSqlDatabase db = QSqlDatabase::addDatabase(\"QSQLITE\");\n    db.setDatabaseName(\":memory:\");\n\n    if(!db.open()){\n        qDebug() &lt;&lt; \"Not opened\";\n        return 1;\n    }\n    qDebug() &lt;&lt; \"Opened!\";\n\n    QSqlQuery query;\n\n    //CREATE the table before executing the INSERT statement\n    query.exec(\"CREATE TABLE person (id INTEGER, forename TEXT, surname TEXT);\");\n\n    query.prepare(\"INSERT INTO person (id, forename, surname) \"\n                  \"VALUES (:id, :forename, :surname)\");\n    query.bindValue(\":id\", 1001);\n    query.bindValue(\":forename\", \"Bart\");\n    query.bindValue(\":surname\", \"Simpson\");\n\n    if( !query.exec() )\n        qDebug() &lt;&lt; query.lastError().text();\n    else\n        qDebug( \"Inserted!\" );\n\n    return 0;\n}\n</code></pre>\n\n<p>This prints <code>Inserted!</code> now. But if I comment out the <code>CREATE</code> statement line I get the same error in your question:</p>\n\n<pre><code>\" Parameter count mismatch\"\n</code></pre>\n"}], "owner": {"reputation": 5278, "user_id": 3663765, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/03caa8002f94a2ffd40630239d7a35c6?s=128&d=identicon&r=PG&f=1", "display_name": "Program-Me-Rev", "link": "https://stackoverflow.com/users/3663765/program-me-rev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1400, "favorite_count": 0, "accepted_answer_id": 40638769, "answer_count": 1, "score": 3, "last_activity_date": 1479319459, "creation_date": 1479312528, "last_edit_date": 1479319137, "question_id": 40636862, "link": "https://stackoverflow.com/questions/40636862/parameter-count-mismatch-in-qtsql", "title": "Parameter count mismatch in Qtsql", "body": "<p>I'm trying to insert data into a QtSql database, but I keep getting the error:</p>\n\n<pre><code>\"Parameter count mismatch\"\n</code></pre>\n\n<p>What could be what I'm doing wrong?</p>\n\n<pre><code>#include &lt;QtSql&gt;\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    qDebug() &lt;&lt; QSqlDatabase::drivers();\n\n    QSqlDatabase db = QSqlDatabase::addDatabase(\"QSQLITE\");\n    db.setHostName(\"LOCALHOST\");\n    db.setDatabaseName(\"people\");\n    db.setUserName(\"root\");\n    db.setPassword(\"\");\n\n    if(db.open()) {\n        qDebug() &lt;&lt; \"Opened!\";\n\n        QSqlQuery query;\n\n        query.prepare(\"INSERT INTO person (id, forename, surname) \"\n                      \"VALUES (:id, :forename, :surname)\");\n        query.bindValue(\":id\", 1001);\n        query.bindValue(\":forename\", \"Bart\");\n        query.bindValue(\":surname\", \"Simpson\");\n        query.exec();\n\n        if( !query.exec() )\n            qDebug() &lt;&lt; query.lastError().text();\n        else\n            qDebug( \"Inserted!\" );\n\n        db.close();\n\n    } else {\n        qDebug() &lt;&lt; \"Not opened\";\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1479312687, "post_id": 40636854, "comment_id": 68506035, "body": "What is a BST? Google gives British Summer Time to me, and I guess you are not talking about that. You probably need some header file, and you might want to build some <a href=\"https://en.wikipedia.org/wiki/Library_%28computing%29\" rel=\"nofollow noreferrer\">library</a>. But your question could be operating system specific. Maybe you want to have some <a href=\"https://en.wikipedia.org/wiki/Makefile\" rel=\"nofollow noreferrer\">Makefile</a>"}, {"owner": {"reputation": 2533, "user_id": 2925287, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/821554321/picture?type=large", "display_name": "Pierre Emmanuel Lallemant", "link": "https://stackoverflow.com/users/2925287/pierre-emmanuel-lallemant"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1479312706, "post_id": 40636854, "comment_id": 68506045, "body": "@BasileStarynkevitch Binary Search Tree lol"}, {"owner": {"reputation": 7480, "user_id": 205955, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a57a33d43f1b629b6b8b367d9ac651b9?s=128&d=identicon&r=PG", "display_name": "doc", "link": "https://stackoverflow.com/users/205955/doc"}, "reply_to_user": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1479312721, "post_id": 40636854, "comment_id": 68506057, "body": "@BasileStarynkevitch I guess Binary Search Tree."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1479312883, "post_id": 40636854, "comment_id": 68506163, "body": "BTW, <a href=\"http://en.cppreference.com/w/cpp/container/map\" rel=\"nofollow noreferrer\">std::map</a>-s are generally implemented with <a href=\"https://en.wikipedia.org/wiki/Self-balancing_binary_search_tree\" rel=\"nofollow noreferrer\">self-balancing binary search trees</a> such as <a href=\"https://en.wikipedia.org/wiki/Red%E2%80%93black_tree\" rel=\"nofollow noreferrer\">red-black trees</a> so you don&#39;t need to implement your own."}], "owner": {"reputation": 27, "user_id": 6376881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21d9d348f369e72d4da4c0b59e9757da?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/6376881/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "closed_date": 1479319891, "answer_count": 0, "score": 2, "last_activity_date": 1479312840, "creation_date": 1479312495, "question_id": 40636854, "link": "https://stackoverflow.com/questions/40636854/how-do-i-structure-my-c-project-with-multiple-applications", "closed_reason": "Needs more focus", "title": "How do I structure my C++ project with multiple applications?", "body": "<p>I am working on implementing a BST in c++. The project needs two applications, one to read data from a file and build the tree and save it to a file. And another application to load then query the tree for information. I am trying to find a good structure for my entire project. I am thinking the source folder will contain three .cpp files: App1.cpp, App2.cpp and main.cpp. Is this how it's usually done?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "loops", "io"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1479312276, "post_id": 40636716, "comment_id": 68505705, "body": "You need to <i>flush</i> the buffers."}, {"owner": {"reputation": 11, "user_id": 6291778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bjaR_bc-1jA/AAAAAAAAAAI/AAAAAAAAANw/SRfEbRC50yA/photo.jpg?sz=128", "display_name": "Noctua", "link": "https://stackoverflow.com/users/6291778/noctua"}, "edited": false, "score": 0, "creation_date": 1479313388, "post_id": 40636716, "comment_id": 68506529, "body": "Thanks, everyone. You made my day &lt;3"}], "owner": {"reputation": 11, "user_id": 6291778, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bjaR_bc-1jA/AAAAAAAAAAI/AAAAAAAAANw/SRfEbRC50yA/photo.jpg?sz=128", "display_name": "Noctua", "link": "https://stackoverflow.com/users/6291778/noctua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1479313346, "answer_count": 0, "score": 1, "last_activity_date": 1479313522, "creation_date": 1479312166, "last_edit_date": 1479313522, "question_id": 40636716, "link": "https://stackoverflow.com/questions/40636716/forcing-output-inside-a-loop-c", "closed_reason": "Duplicate", "title": "Forcing output inside a loop C++", "body": "<p>I'm coding traffic lights on Raspberry Pi in C++ and ran into a dead-end.</p>\n\n<p>I'm using a functions that's called from the main code block, problem is - it <strong>dumps all intended outputs at the end of the loop.</strong> Both into the console and to physical outputs.</p>\n\n<p>I've searched for a solution, but came up short. </p>\n\n<p>Does anyone know of <strong>a way to force the outputs to happen sequentially</strong> or a place to read up on it?</p>\n\n<pre><code>void idle()\n{\n    int allY[]={9,22,13,26};  //output pin numbers\n    for(int i=0;i&lt;=10;i++)   // blink X times\n    {\n        for(int j=0;j&lt;=4;j++)  //all outputs to HIGH\n            {\n                digitalWrite (allY[j], HIGH);\n                cout&lt;&lt;\"+\";   // output to console for testing\n            }\n\n        usleep(900000); //wait\n\n        for (int k=0;k&lt;=4;k++)  // all outputs to LOW\n            {\n                digitalWrite (allY[k], LOW);\n                cout&lt;&lt;\"-\";\n            }\n    }\n}\n</code></pre>\n\n<p><strong><em>FOR FUTURE READERS - SOLUTION</em></strong></p>\n\n<pre><code>void idle()\n{\n    int allY[]={9,22,13,26};//output pin numbers\n    for(int i=0;i&lt;=10;i++) // blink X times\n    {\n        for(int j=0;j&lt;=4;j++)//all outputs to HIGH\n            {\n                digitalWrite (allY[j], HIGH);\n                cout&lt;&lt;flush; //flush\n            }\n\n        usleep(900000); //wait\n\n        for (int k=0;k&lt;=4;k++)// all outputs to LOW\n            {\n                digitalWrite (allY[k], LOW);\n                cout&lt;&lt;flush;\n            }\n\n        usleep(900000); //wait\n    }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1968, "user_id": 846641, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/q1FW7.jpg?s=128&g=1", "display_name": "Philipp", "link": "https://stackoverflow.com/users/846641/philipp"}, "edited": false, "score": 6, "creation_date": 1479312523, "post_id": 40636697, "comment_id": 68505901, "body": "If you have a problem like this it is useful to debug the code and you would quickly see that you never check more than the first item of your array."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1479313063, "post_id": 40636697, "comment_id": 68506293, "body": "Looks like homework, so you probably need to implement it properly. But in real life you should use <code>std::find</code> instead"}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1479314093, "post_id": 40636697, "comment_id": 68507008, "body": "Try stepping through the function line by line in the debugger. The error should become apparent quickly."}], "answers": [{"tags": [], "owner": {"reputation": 691, "user_id": 4466507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001371092691/picture?type=large", "display_name": "\u0412\u0438\u0442\u0430\u043b\u0438\u043a \u0411\u0443\u0448\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/4466507/%d0%92%d0%b8%d1%82%d0%b0%d0%bb%d0%b8%d0%ba-%d0%91%d1%83%d1%88%d0%b0%d0%b5%d0%b2"}, "is_accepted": true, "score": 8, "last_activity_date": 1479312275, "creation_date": 1479312275, "answer_id": 40636753, "question_id": 40636697, "link": "https://stackoverflow.com/questions/40636697/returns-false-every-time-in-c/40636753#40636753", "title": "Returns false every time in C++", "body": "<p>you return false if your element is not at first position. Try this</p>\n\n<pre><code>bool sequentialSearch(int searchItem, int * a, int size)\n{\n    for(int i = 0; i &lt; size; i++)\n    {\n        if(searchItem == a[i])\n        {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 531, "user_id": 4024800, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9337e41ca3a0a77776c3f3b8feac0398?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Gibson", "link": "https://stackoverflow.com/users/4024800/paul-gibson"}, "is_accepted": false, "score": 3, "last_activity_date": 1479312621, "creation_date": 1479312621, "answer_id": 40636898, "question_id": 40636697, "link": "https://stackoverflow.com/questions/40636697/returns-false-every-time-in-c/40636898#40636898", "title": "Returns false every time in C++", "body": "<p>Your for loop ends up only checking the first item, and then returning true or false.  You need to change your logic to do something like</p>\n\n<pre><code>for( . . . )\n{\n    if(searchItem == a[i]) return true;\n}\nreturn false;\n</code></pre>\n\n<p>This way it will test each item in the array and then return false if nothing found.</p>\n"}], "owner": {"reputation": 109, "user_id": 7058057, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c502894f6ab09dca01e4b4bf404fe4bd?s=128&d=identicon&r=PG&f=1", "display_name": "Thompson", "link": "https://stackoverflow.com/users/7058057/thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 1, "accepted_answer_id": 40636753, "answer_count": 2, "score": 3, "last_activity_date": 1523794691, "creation_date": 1479312135, "last_edit_date": 1523794691, "question_id": 40636697, "link": "https://stackoverflow.com/questions/40636697/returns-false-every-time-in-c", "title": "Returns false every time in C++", "body": "<p>I made a simple sequential search function, so as i'm testing it, if I put 25 into my search item it returns true, but the other numbers 90, 21 are always false and I can't understand why it's doing that.</p>\n\n<pre><code>int a[] = {25,90,21};\nint searchItem = 90;\n\nif(sequentialSearch(searchItem, a, 3) == 1)\n{\n     cout &lt;&lt; \"Found Item\" &lt;&lt; endl;\n}\nelse\n{\n     cout &lt;&lt; \"Item Not Found\" &lt;&lt; endl;\n}\n\nbool sequentialSearch(int searchItem, int * a, int size)\n{\n    for(int i = 0; i &lt; size; i++)\n    {\n        if(searchItem == a[i])\n        {\n            return true;\n        }\n        else\n        {\n            return false;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "interrupt", "avr"], "answers": [{"tags": [], "owner": {"reputation": 1734, "user_id": 8277897, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154710977387286/picture?type=large", "display_name": "David Ledger", "link": "https://stackoverflow.com/users/8277897/david-ledger"}, "is_accepted": false, "score": 0, "last_activity_date": 1545287861, "creation_date": 1545287861, "answer_id": 53863571, "question_id": 40636652, "link": "https://stackoverflow.com/questions/40636652/static-template-member-function-as-interrupt-service-routine/53863571#53863571", "title": "Static template member function as interrupt service routine", "body": "<p>A run time solution, not exactly optimal:</p>\n\n<ol>\n<li>Disable interrupts on the device.</li>\n<li>Build up a array of interrupts that you will be using in the same format as the isr vector array.</li>\n<li>Override the ISR flash section. Make sure you save unused sections of the flash page and write them back.</li>\n<li>Re-enable interrupts on the device.</li>\n</ol>\n\n<p>But as you need to write a whole flash page at a time you'll best off doing it all at once. </p>\n\n<p>NOTE: You could find yourself accidentally overriding application code so make sure the function you use to perform the change is not in that section of flash and that you write back the sections of the page you don't use.</p>\n"}], "owner": {"reputation": 3026, "user_id": 3359751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/91b28e94ea506bc9331a489712096b2c?s=128&d=identicon&r=PG&f=1", "display_name": "wimalopaan", "link": "https://stackoverflow.com/users/3359751/wimalopaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1545287861, "creation_date": 1479312043, "last_edit_date": 1479377399, "question_id": 40636652, "link": "https://stackoverflow.com/questions/40636652/static-template-member-function-as-interrupt-service-routine", "title": "Static template member function as interrupt service routine", "body": "<p>In the following class Mapper the static member function timer0CompA serves as an interrupt service routine. It gets the name \"__vector_14\" in the interrupt vector.</p>\n\n<pre><code>struct Mapper {\n    static void timer0CompA() __asm__(\"__vector_14\") __attribute__((__signal__, __used__, __externally_visible__));  \n};\nvoid Mapper::timer0CompA(){}\n</code></pre>\n\n<p>If I try to use the same approch with a template class </p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Mapper {...};\n</code></pre>\n\n<p>the template member function is not inserted into the interrupt vector.</p>\n\n<p>I know that this would be problematic if it would work: different instantiations would get the same name in the assembler code and therefore we would get a double defined symbol. But in my case this would be useful ...</p>\n\n<p>Any hints?</p>\n"}, {"tags": ["c++", "casting"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1479311904, "post_id": 40636551, "comment_id": 68505440, "body": "Give us a more complete example. How does the class declaration of <code>MyClassa</code> look like?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1479311922, "post_id": 40636551, "comment_id": 68505459, "body": "Show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please."}, {"owner": {"reputation": 812, "user_id": 2629994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2RygA.jpg?s=128&g=1", "display_name": "Tali", "link": "https://stackoverflow.com/users/2629994/tali"}, "edited": false, "score": 0, "creation_date": 1479312259, "post_id": 40636551, "comment_id": 68505688, "body": "These questions are unrelated, please separate them."}, {"owner": {"reputation": 812, "user_id": 2629994, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2RygA.jpg?s=128&g=1", "display_name": "Tali", "link": "https://stackoverflow.com/users/2629994/tali"}, "edited": false, "score": 0, "creation_date": 1479312343, "post_id": 40636551, "comment_id": 68505755, "body": "Hints to find the solution yourself: <code>a = &lt;something&gt;</code> does not change the type which is assigned to <code>a</code>; references can never be <code>0</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7168212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39555e157bf06bf162af718180b74085?s=128&d=identicon&r=PG&f=1", "display_name": "email naive", "link": "https://stackoverflow.com/users/7168212/email-naive"}, "edited": false, "score": 0, "creation_date": 1479313147, "post_id": 40636605, "comment_id": 68506355, "body": "Thanks. regarding the second question - so why when I do thw casting from a father pointer to a child pointer (not a reference, but a pointer.) its returns me &#39;0&#39; value and not throwing also an casting error?"}, {"owner": {"reputation": 1051, "user_id": 5281853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b82301049e4a8068a396245063cc5ee?s=128&d=identicon&r=PG&f=1", "display_name": "gbehar", "link": "https://stackoverflow.com/users/5281853/gbehar"}, "reply_to_user": {"reputation": 13, "user_id": 7168212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39555e157bf06bf162af718180b74085?s=128&d=identicon&r=PG&f=1", "display_name": "email naive", "link": "https://stackoverflow.com/users/7168212/email-naive"}, "edited": false, "score": 0, "creation_date": 1479397458, "post_id": 40636605, "comment_id": 68549542, "body": "From <a href=\"http://en.cppreference.com/w/cpp/language/dynamic_cast\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/dynamic_cast</a>:  If the cast fails and new_type is a pointer type, it returns a null pointer of that type. If the cast fails and new_type is a reference type, it throws an exception that matches a handler of type std::bad_cast."}], "tags": [], "owner": {"reputation": 1051, "user_id": 5281853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b82301049e4a8068a396245063cc5ee?s=128&d=identicon&r=PG&f=1", "display_name": "gbehar", "link": "https://stackoverflow.com/users/5281853/gbehar"}, "is_accepted": true, "score": 1, "last_activity_date": 1479312667, "last_edit_date": 1479312667, "creation_date": 1479311946, "answer_id": 40636605, "question_id": 40636551, "link": "https://stackoverflow.com/questions/40636551/two-questions-about-casting-objects-in-cpp/40636605#40636605", "title": "Two questions about casting objects in cpp", "body": "<p>in this line</p>\n\n<pre><code>a = ((MyClassa *)a);\n</code></pre>\n\n<p>the term gets casted to <code>MyClassa*</code> but then back to <code>father*</code> (in the assignment) so you end up with a <code>father*</code>.</p>\n\n<p>Regarding your second question: It's impossible to cast the reference from the father to the child, and also \"wrong\" in terms of polymorphism</p>\n"}], "owner": {"reputation": 13, "user_id": 7168212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39555e157bf06bf162af718180b74085?s=128&d=identicon&r=PG&f=1", "display_name": "email naive", "link": "https://stackoverflow.com/users/7168212/email-naive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 40636605, "answer_count": 1, "score": 1, "last_activity_date": 1479312667, "creation_date": 1479311784, "last_edit_date": 1479312062, "question_id": 40636551, "link": "https://stackoverflow.com/questions/40636551/two-questions-about-casting-objects-in-cpp", "title": "Two questions about casting objects in cpp", "body": "<p><strong><em>Question A</em></strong></p>\n\n<p>If I have two classes: \"father\", and \"MyClassa\" and I want to do this:</p>\n\n<pre><code>father* a;\nMyClassa b;\na = &amp;b;\n((MyClassa *)a) - &gt; b();\n</code></pre>\n\n<p>I can do the casting like in the sample above (<code>b()</code> is a function belonging to <code>MyClassa</code> class and not found in <code>father</code> class).</p>\n\n<p>But when I do this:</p>\n\n<pre><code>father* a;\nMyClassa b;\na = &amp;b;\na = ((MyClassa *)a);\na-&gt;b();\n</code></pre>\n\n<p>It doesnt work for me and tells me that he <code>b()</code> function not exist in that class (like the casting didn't work). </p>\n\n<p>What are the differences between these two code samples actually and what is causing this differences?</p>\n\n<p><strong><em>Question B</em></strong></p>\n\n<p>When I use 'dynamic_cast' to cast a father to be a child like this:</p>\n\n<pre><code>Father * fp= new Father;\nChild * cp = dynamic_cast&lt;Child *&gt; fp;\n</code></pre>\n\n<p>It returns me a '0' value to the pointer.\nBut when I do the same with reference:</p>\n\n<pre><code>Father &amp; fp= new Father;\nChild &amp; cp = dynamic_cast&lt;Child &amp;&gt; fp;\n</code></pre>\n\n<p>It raises an error 'bad casting'.</p>\n\n<p>Why is there a difference?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1479315752, "post_id": 40636509, "comment_id": 68508188, "body": "For recommendations, try posting to SoftwareRecs@StackExchange.com."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1479315788, "post_id": 40636509, "comment_id": 68508216, "body": "If your code is working, and you would like an efficiency review, post the relevant, working, code to CodeReview@StackExchange.com"}, {"owner": {"reputation": 61, "user_id": 4628497, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Si1if8XJo8I/AAAAAAAAAAI/AAAAAAAAAQY/jexyAvuWceg/photo.jpg?sz=128", "display_name": "Harikrishnan", "link": "https://stackoverflow.com/users/4628497/harikrishnan"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1479316162, "post_id": 40636509, "comment_id": 68508478, "body": "I am yet to code it. I am wondering how I should go about it. I only way out I could think of was to hard code the derivatives."}], "owner": {"reputation": 61, "user_id": 4628497, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Si1if8XJo8I/AAAAAAAAAAI/AAAAAAAAAQY/jexyAvuWceg/photo.jpg?sz=128", "display_name": "Harikrishnan", "link": "https://stackoverflow.com/users/4628497/harikrishnan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "closed_date": 1479318717, "answer_count": 0, "score": 3, "last_activity_date": 1479311688, "creation_date": 1479311688, "question_id": 40636509, "link": "https://stackoverflow.com/questions/40636509/what-is-an-efficient-way-to-calculate-jacobian-using-symbolic-variables-in-c", "closed_reason": "Not suitable for this site", "title": "What is an efficient way to calculate Jacobian using symbolic variables in C++?", "body": "<p>I am looking for something similar to sympy in Python (<a href=\"http://docs.sympy.org/0.6.7/index.html\" rel=\"nofollow noreferrer\">http://docs.sympy.org/0.6.7/index.html</a>)</p>\n"}, {"tags": ["c++", "directx-11"], "answers": [{"tags": [], "owner": {"reputation": 1692, "user_id": 3567987, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/76baf53b56d492314d02f39fc4da878e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3567987/thomas"}, "is_accepted": true, "score": 1, "last_activity_date": 1479368651, "creation_date": 1479368651, "answer_id": 40649248, "question_id": 40636369, "link": "https://stackoverflow.com/questions/40636369/strange-copyresource-result-with-ati-radeon-card/40649248#40649248", "title": "strange CopyResource result with ATI Radeon card", "body": "<p>I found out, that the problem is easy solveable. After a long debugging session\nI saw, that the source texture was also bound to the render output. This gives no warnings or errors and is valid on nvidia cards, but my radeon card (AMD Radeon R7 M370) does not like it.\nSo I changed my code to:</p>\n\n<pre><code>OMSetRenderTargets(1, nullptr, nullptr);\nCopyResource(...\n</code></pre>\n\n<p>and the bug was fixed. maybe someone helps this answer to solve the same problem.</p>\n"}], "owner": {"reputation": 1692, "user_id": 3567987, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/76baf53b56d492314d02f39fc4da878e?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3567987/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 40649248, "answer_count": 1, "score": 0, "last_activity_date": 1479368651, "creation_date": 1479311307, "question_id": 40636369, "link": "https://stackoverflow.com/questions/40636369/strange-copyresource-result-with-ati-radeon-card", "title": "strange CopyResource result with ATI Radeon card", "body": "<p>I get strange results, when I try to copy the rendered texture into a background texture for later use, using the CopyResource command. this is whats comming out:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HLdci.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HLdci.png\" alt=\"enter image description here\"></a></p>\n\n<p>I don't get any dx11 warnings or errors.\nthis also only happens while using an ATI Radeon card.\nI also tried on 5 other nvidia cards and the output looks fine.\nI downloaded the newest drivers and also I tried older ones, but nothing changed.</p>\n\n<p>I can not post the code, anyway it is to huge. I only want to know, if some one also had something like this, and if so, how did you solved it? \nIs there a better way to copy textures using another method?</p>\n"}, {"tags": ["c++", "c", "fft", "fftw", "pruning"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1479312666, "post_id": 40636327, "comment_id": 68506013, "body": "Did you compile your test code with optimisation enabled, e.g. <code>gcc -O3 ...</code> ?"}, {"owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1479313135, "post_id": 40636327, "comment_id": 68506346, "body": "@PaulR I&#39;m compiling using Visual Studio 2013 in Release mode. I have edited the post accordingly."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1479313642, "post_id": 40636327, "comment_id": 68506693, "body": "@JackOLantern You can have the FFT calculations themselves run multithreaded.  See <a href=\"http://www.fftw.org/doc/Multi_002dthreaded-FFTW.html#Multi_002dthreaded-FFTW\" rel=\"nofollow noreferrer\">fftw.org/doc/&hellip;</a>  And that&#39;s what those CPUs are <i>for</i>.  Using them isn&#39;t &quot;cheating&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "edited": false, "score": 1, "creation_date": 1479313493, "post_id": 40636949, "comment_id": 68506604, "body": "Thank you very much for your answer. However, and conceptually, I&#39;m primarily interested in speeding up the two <code>for</code> loops, rather than the <code>fftw</code>s. I have edited my post, adding an OpenMP solution for the two <code>for</code> loops, but I&#39;m feeling like I&#39;m making an unfair comparison: the two FFTWs are sequential, while the <code>for</code> loops are multi-threaded."}, {"owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "edited": false, "score": 0, "creation_date": 1479483684, "post_id": 40636949, "comment_id": 68591875, "body": "I was finally able to improve my code. I have posted a full answer. Thank you for your interest."}], "tags": [], "owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 5, "last_activity_date": 1479312726, "creation_date": 1479312726, "answer_id": 40636949, "question_id": 40636327, "link": "https://stackoverflow.com/questions/40636327/accelerating-fftw-pruning-to-avoid-massive-zero-padding/40636949#40636949", "title": "Accelerating FFTW pruning to avoid massive zero padding", "body": "<p>Several options to run faster:</p>\n\n<ol>\n<li><p>Run multi-threaded if you're only running single-threaded and have multiple cores available.</p></li>\n<li><p>Create and save an FFTW wisdom file, especially if the FFT dimensions are known in advance.  Use <code>FFTW_EXHAUSTIVE</code>, and reload the FFTW wisdom instead of recalculating it every time.  This is also important if you want your results to be consistent.  Since FFTW may compute FFTs differently with different calculated wisdom, and the wisdom results aren't necessarily going to always be the same, different runs of your process may produce different results when both are given identical input data.</p></li>\n<li><p>If you're on x86, run 64-bit.  The FFTW algorithm is extremely register-intensive, and an x86 CPU running in 64-bit mode has a lot more general-purpose registers available than it does when running in 32-bit mode.</p></li>\n<li><p>Since the FFTW algorithm is so register intensive, I've had good success improving FFTW performance by compiling FFTW with compiler options that <em>prevent</em> the use of prefetching and prevent the implicit inlining of functions.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "edited": false, "score": 1, "creation_date": 1479393498, "post_id": 40651318, "comment_id": 68546468, "body": "Your first suggestion significantly improves the timing of the third step, see EDIT #3 to my post. Loop unrolling does not help further improving the result. Many thanks for your answer."}, {"owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "edited": false, "score": 0, "creation_date": 1479394241, "post_id": 40651318, "comment_id": 68547042, "body": "For the successful <code>for</code> loop exchange you suggested, multi-threading just worsens the results."}, {"owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "edited": false, "score": 1, "creation_date": 1479483653, "post_id": 40651318, "comment_id": 68591854, "body": "Finally, I have been successful to improve my code, also following your suggestions. I have provided a full answer below. Thank you for your interest."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "edited": false, "score": 0, "creation_date": 1479483970, "post_id": 40651318, "comment_id": 68592086, "body": "@JackOLantern: great - thanks for following up on this and writing up your findings - could be very useful to other readers in the future!"}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1479375855, "last_edit_date": 1479375855, "creation_date": 1479375530, "answer_id": 40651318, "question_id": 40636327, "link": "https://stackoverflow.com/questions/40636327/accelerating-fftw-pruning-to-avoid-massive-zero-padding/40651318#40651318", "title": "Accelerating FFTW pruning to avoid massive zero padding", "body": "<p>For the third step you might want to try switching the order of the loops:</p>\n\n<pre><code>for (int p = 0; p &lt; N; p++) {\n    for (int k = 0; k &lt; K; k++) {\n        h_xhatpruning[p * K + k][0] = h_xhatpruning_temp[p + k * N][0];\n        h_xhatpruning[p * K + k][1] = h_xhatpruning_temp[p + k * N][1];\n    }\n}\n</code></pre>\n\n<p>since it's generally more beneficial to have the store addresses be contiguous than the load addresses.</p>\n\n<p>Either way you have a cache-unfriendly access pattern though. You could try working with blocks to improve this, e.g. assuming N is a multiple of 4:</p>\n\n<pre><code>for (int p = 0; p &lt; N; p += 4) {\n    for (int k = 0; k &lt; K; k++) {\n        for (int p0 = 0; p0 &lt; 4; p0++) {\n            h_xhatpruning[(p + p0) * K + k][0] = h_xhatpruning_temp[(p + p0) + k * N][0];\n            h_xhatpruning[(p + p0) * K + k][1] = h_xhatpruning_temp[(p + p0) + k * N][1];\n        }\n    }\n}\n</code></pre>\n\n<p>This should help to reduce the churn of cache lines somewhat. If it does then maybe also experiment with block sizes other than 4 to see if there is a \"sweet spot\".</p>\n"}, {"tags": [], "owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "is_accepted": false, "score": 1, "last_activity_date": 1479483552, "creation_date": 1479483552, "answer_id": 40680928, "question_id": 40636327, "link": "https://stackoverflow.com/questions/40636327/accelerating-fftw-pruning-to-avoid-massive-zero-padding/40680928#40680928", "title": "Accelerating FFTW pruning to avoid massive zero padding", "body": "<p>Also following Paul R's comments, I have improved my code. Now, the alternative approach is faster than the standard (zero padded) one. Below is the full C++ script. For step #1 and #3, I have commented other tried solutions, which have shown to be slower or as fast as the uncommented one. I have priviledged non-nested <code>for</code> loops, also in view of a simpler future CUDA parallelization. I'm not yet using multi-threading for FFTW.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;     /* srand, rand */\n#include &lt;time.h&gt;       /* time */\n#include &lt;math.h&gt;\n#include &lt;fstream&gt;\n\n#include &lt;omp.h&gt;\n\n#include &lt;fftw3.h&gt;\n\n#include \"TimingCPU.h\"\n\n#define PI_d            3.141592653589793\n\n/******************/\n/* STEP #1 ON CPU */\n/******************/\nvoid step1CPU(fftw_complex * __restrict h_xpruning, const fftw_complex * __restrict h_x, const int N, const int K) {\n\n//  double factor = -2. * PI_d / (K * N);\n//  int n;\n//  omp_set_nested(1);\n//#pragma omp parallel for private(n) num_threads(4)\n//  for (int k = 0; k &lt; K; k++) {\n//      double arg1 = factor * k;\n//#pragma omp parallel for num_threads(4)\n//      for (n = 0; n &lt; N; n++) {\n//          double arg = arg1 * n;\n//          double cosarg = cos(arg);\n//          double sinarg = sin(arg);\n//          h_xpruning[k * N + n][0] = h_x[n][0] * cosarg - h_x[n][1] * sinarg;\n//          h_xpruning[k * N + n][1] = h_x[n][0] * sinarg + h_x[n][1] * cosarg;\n//      }\n//  }\n\n    //double factor = -2. * PI_d / (K * N);\n    //int k;\n    //omp_set_nested(1);\n    //#pragma omp parallel for private(k) num_threads(4)\n    //for (int n = 0; n &lt; N; n++) {\n    //  double arg1 = factor * n;\n    //  #pragma omp parallel for num_threads(4)\n    //  for (k = 0; k &lt; K; k++) {\n    //      double arg = arg1 * k;\n    //      double cosarg = cos(arg);\n    //      double sinarg = sin(arg);\n    //      h_xpruning[k * N + n][0] = h_x[n][0] * cosarg - h_x[n][1] * sinarg;\n    //      h_xpruning[k * N + n][1] = h_x[n][0] * sinarg + h_x[n][1] * cosarg;\n    //  }\n    //}\n\n    //double factor = -2. * PI_d / (K * N);\n    //for (int k = 0; k &lt; K; k++) {\n    //  double arg1 = factor * k;\n    //  for (int n = 0; n &lt; N; n++) {\n    //      double arg = arg1 * n;\n    //      double cosarg = cos(arg);\n    //      double sinarg = sin(arg);\n    //      h_xpruning[k * N + n][0] = h_x[n][0] * cosarg - h_x[n][1] * sinarg;\n    //      h_xpruning[k * N + n][1] = h_x[n][0] * sinarg + h_x[n][1] * cosarg;\n    //  }\n    //}\n\n    //double factor = -2. * PI_d / (K * N);\n    //for (int n = 0; n &lt; N; n++) {\n    //  double arg1 = factor * n;\n    //  for (int k = 0; k &lt; K; k++) {\n    //      double arg = arg1 * k;\n    //      double cosarg = cos(arg);\n    //      double sinarg = sin(arg);\n    //      h_xpruning[k * N + n][0] = h_x[n][0] * cosarg - h_x[n][1] * sinarg;\n    //      h_xpruning[k * N + n][1] = h_x[n][0] * sinarg + h_x[n][1] * cosarg;\n    //  }\n    //}\n\n    double factor = -2. * PI_d / (K * N);\n    #pragma omp parallel for num_threads(8)\n    for (int n = 0; n &lt; K * N; n++) {\n        int row = n / N;\n        int col = n % N;\n        double arg = factor * row * col;\n        double cosarg = cos(arg);\n        double sinarg = sin(arg);\n        h_xpruning[n][0] = h_x[col][0] * cosarg - h_x[col][1] * sinarg;\n        h_xpruning[n][1] = h_x[col][0] * sinarg + h_x[col][1] * cosarg;\n    }\n}\n\n/******************/\n/* STEP #3 ON CPU */\n/******************/\nvoid step3CPU(fftw_complex * __restrict h_xhatpruning, const fftw_complex * __restrict h_xhatpruning_temp, const int N, const int K) {\n\n    //int k;\n    //omp_set_nested(1);\n    //#pragma omp parallel for private(k) num_threads(4)\n    //for (int p = 0; p &lt; N; p++) {\n    //  #pragma omp parallel for num_threads(4)\n    //  for (k = 0; k &lt; K; k++) {\n    //      h_xhatpruning[p * K + k][0] = h_xhatpruning_temp[p + k * N][0];\n    //      h_xhatpruning[p * K + k][1] = h_xhatpruning_temp[p + k * N][1];\n    //  }\n    //} \n\n    //int p;\n    //omp_set_nested(1);\n    //#pragma omp parallel for private(p) num_threads(4)\n    //for (int k = 0; k &lt; K; k++) {\n    //  #pragma omp parallel for num_threads(4)\n    //  for (p = 0; p &lt; N; p++) {\n    //      h_xhatpruning[p * K + k][0] = h_xhatpruning_temp[p + k * N][0];\n    //      h_xhatpruning[p * K + k][1] = h_xhatpruning_temp[p + k * N][1];\n    //  }\n    //}\n\n    //for (int p = 0; p &lt; N; p++) {\n    //  for (int k = 0; k &lt; K; k++) {\n    //      h_xhatpruning[p * K + k][0] = h_xhatpruning_temp[p + k * N][0];\n    //      h_xhatpruning[p * K + k][1] = h_xhatpruning_temp[p + k * N][1];\n    //  }\n    //}\n\n    //for (int k = 0; k &lt; K; k++) {\n    //  for (int p = 0; p &lt; N; p++) {\n    //      h_xhatpruning[p * K + k][0] = h_xhatpruning_temp[p + k * N][0];\n    //      h_xhatpruning[p * K + k][1] = h_xhatpruning_temp[p + k * N][1];\n    //  }\n    //}\n\n    #pragma omp parallel for num_threads(8)\n    for (int p = 0; p &lt; K * N; p++) {\n        int col = p % N;\n        int row = p / K;\n        h_xhatpruning[col * K + row][0] = h_xhatpruning_temp[col + row * N][0];\n        h_xhatpruning[col * K + row][1] = h_xhatpruning_temp[col + row * N][1];\n    }\n\n    //for (int p = 0; p &lt; N; p += 2) {\n    //  for (int k = 0; k &lt; K; k++) {\n    //      for (int p0 = 0; p0 &lt; 2; p0++) {\n    //          h_xhatpruning[(p + p0) * K + k][0] = h_xhatpruning_temp[(p + p0) + k * N][0];\n    //          h_xhatpruning[(p + p0) * K + k][1] = h_xhatpruning_temp[(p + p0) + k * N][1];\n    //      }\n    //  }\n    //}\n\n}\n\n/********/\n/* MAIN */\n/********/\nvoid main() {\n\n    int N = 10;\n    int K = 100000;\n\n    // --- CPU memory allocations\n    fftw_complex *h_x = (fftw_complex *)malloc(N     * sizeof(fftw_complex));\n    fftw_complex *h_xzp = (fftw_complex *)calloc(N * K, sizeof(fftw_complex));\n    fftw_complex *h_xpruning = (fftw_complex *)malloc(N * K * sizeof(fftw_complex));\n    fftw_complex *h_xhatpruning = (fftw_complex *)malloc(N * K * sizeof(fftw_complex));\n    fftw_complex *h_xhatpruning_temp = (fftw_complex *)malloc(N * K * sizeof(fftw_complex));\n    fftw_complex *h_xhat = (fftw_complex *)malloc(N * K * sizeof(fftw_complex));\n    //double2        *h_xhatGPU = (double2 *)malloc(N * K * sizeof(double2));\n\n\n    // --- Random number generation of the data sequence on the CPU - moving the data from CPU to GPU\n    srand(time(NULL));\n    for (int k = 0; k &lt; N; k++) {\n        h_x[k][0] = (double)rand() / (double)RAND_MAX;\n        h_x[k][1] = (double)rand() / (double)RAND_MAX;\n    }\n    //gpuErrchk(cudaMemcpy(d_x, h_x, N * sizeof(double2), cudaMemcpyHostToDevice));\n\n    memcpy(h_xzp, h_x, N * sizeof(fftw_complex));\n\n    // --- FFTW and cuFFT plans\n    fftw_plan h_plan_zp      = fftw_plan_dft_1d(N * K, h_xzp, h_xhat, FFTW_FORWARD, FFTW_ESTIMATE);\n    fftw_plan h_plan_pruning = fftw_plan_many_dft(1, &amp;N, K, h_xpruning, NULL, 1, N, h_xhatpruning_temp, NULL, 1, N, FFTW_FORWARD, FFTW_ESTIMATE);\n\n    double totalTimeCPU = 0., totalTimeGPU = 0.;\n    double partialTimeCPU, partialTimeGPU;\n\n    /****************************/\n    /* STANDARD APPROACH ON CPU */\n    /****************************/\n    printf(\"Number of processors available = %i\\n\", omp_get_num_procs());\n    printf(\"Number of threads              = %i\\n\", omp_get_max_threads());\n\n    TimingCPU timerCPU;\n    timerCPU.StartCounter();\n    fftw_execute(h_plan_zp);\n    printf(\"\\nStadard on CPU: \\t \\t %f\\n\", timerCPU.GetCounter());\n\n    /******************/\n    /* STEP #1 ON CPU */\n    /******************/\n    timerCPU.StartCounter();\n    step1CPU(h_xpruning, h_x, N, K);\n    partialTimeCPU = timerCPU.GetCounter();\n    totalTimeCPU = totalTimeCPU + partialTimeCPU;\n    printf(\"\\nOptimized first step CPU: \\t %f\\n\", totalTimeCPU);\n\n    /******************/\n    /* STEP #2 ON CPU */\n    /******************/\n    timerCPU.StartCounter();\n    fftw_execute(h_plan_pruning);\n    partialTimeCPU = timerCPU.GetCounter();\n    totalTimeCPU = totalTimeCPU + partialTimeCPU;\n    printf(\"Optimized second step CPU: \\t %f\\n\", timerCPU.GetCounter());\n\n    /******************/\n    /* STEP #3 ON CPU */\n    /******************/\n    timerCPU.StartCounter();\n    step3CPU(h_xhatpruning, h_xhatpruning_temp, N, K);\n    partialTimeCPU = timerCPU.GetCounter();\n    totalTimeCPU = totalTimeCPU + partialTimeCPU;\n    printf(\"Optimized third step CPU: \\t %f\\n\", partialTimeCPU);\n\n    printf(\"Total time CPU: \\t \\t %f\\n\", totalTimeCPU);\n\n    double rmserror = 0., norm = 0.;\n    for (int n = 0; n &lt; N; n++) {\n        rmserror = rmserror + (h_xhatpruning[n][0] - h_xhat[n][0]) * (h_xhatpruning[n][0] - h_xhat[n][0]) + (h_xhatpruning[n][1] - h_xhat[n][1]) * (h_xhatpruning[n][1] - h_xhat[n][1]);\n        norm = norm + h_xhat[n][0] * h_xhat[n][0] + h_xhat[n][1] * h_xhat[n][1];\n    }\n    printf(\"\\nrmserror %f\\n\", 100. * sqrt(rmserror / norm));\n\n    fftw_destroy_plan(h_plan_zp);\n\n}\n</code></pre>\n\n<p>For the case</p>\n\n<pre><code>N = 10\nK = 100000\n</code></pre>\n\n<p>my timing is the following</p>\n\n<pre><code>Stadard on CPU:                  23.895417\n\nOptimized first step CPU:        4.472087\nOptimized second step CPU:       4.926603\nOptimized third step CPU:        2.394958\nTotal time CPU:                  11.793648\n</code></pre>\n"}], "owner": {"reputation": 18443, "user_id": 1886641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UsR5f.png?s=128&g=1", "display_name": "Vitality", "link": "https://stackoverflow.com/users/1886641/vitality"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 0, "accepted_answer_id": 40651318, "answer_count": 3, "score": 7, "last_activity_date": 1479483552, "creation_date": 1479311214, "last_edit_date": 1479482928, "question_id": 40636327, "link": "https://stackoverflow.com/questions/40636327/accelerating-fftw-pruning-to-avoid-massive-zero-padding", "title": "Accelerating FFTW pruning to avoid massive zero padding", "body": "<p>Suppose that I have a sequence <code>x(n)</code> which is <code>K * N</code> long and that only the first <code>N</code> elements are different from zero. I'm assuming that <code>N &lt;&lt; K</code>, say, for example, <code>N = 10</code> and <code>K = 100000</code>. I want to calculate the FFT, by FFTW, of such a sequence. This is equivalent to having a sequence of length <code>N</code> and having a zero padding to <code>K * N</code>. Since <code>N</code> and <code>K</code> may be \"large\", I have a significant zero padding. I'm exploring if I can save some computation time avoid explicit zero padding.</p>\n\n<p><strong>The case <code>K = 2</code></strong></p>\n\n<p>Let us begin by considering the case <code>K = 2</code>. In this case, the DFT of <code>x(n)</code> can be written as</p>\n\n<p><a href=\"https://i.stack.imgur.com/ODbjw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ODbjw.png\" alt=\"enter image description here\"></a></p>\n\n<p>If <code>k</code> is even, namely <code>k = 2 * m</code>, then</p>\n\n<p><a href=\"https://i.stack.imgur.com/EQqRZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EQqRZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>which means that such values of the DFT can be calculated through an FFT of a sequence of length <code>N</code>, and not <code>K * N</code>.</p>\n\n<p>If <code>k</code> is odd, namely <code>k = 2 * m + 1</code>, then</p>\n\n<p><a href=\"https://i.stack.imgur.com/nnupQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nnupQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>which means that such values of the DFT can be again calculated through an FFT of a sequence of length <code>N</code>, and not <code>K * N</code>.</p>\n\n<p>So, in conclusion, I can exchange a single FFT of length <code>2 * N</code> with <code>2</code> FFTs of length <code>N</code>.</p>\n\n<p><strong>The case of arbitrary <code>K</code></strong></p>\n\n<p>In this case, we have</p>\n\n<p><a href=\"https://i.stack.imgur.com/SeGX4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SeGX4.png\" alt=\"enter image description here\"></a>  </p>\n\n<p>On writing <code>k = m * K + t</code>, we have</p>\n\n<p><a href=\"https://i.stack.imgur.com/o699P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o699P.png\" alt=\"enter image description here\"></a></p>\n\n<p>So, in conclusion, I can exchange a single FFT of length <code>K * N</code> with <code>K</code> FFTs of length <code>N</code>. Since the FFTW has <code>fftw_plan_many_dft</code>, I can expect to have some gaining against the case of a single FFT.</p>\n\n<p>To verify that, I have set up the following code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;     /* srand, rand */\n#include &lt;time.h&gt;       /* time */\n#include &lt;math.h&gt;\n#include &lt;fstream&gt;\n\n#include &lt;fftw3.h&gt;\n\n#include \"TimingCPU.h\"\n\n#define PI_d            3.141592653589793\n\nvoid main() {\n\n    const int N = 10;\n    const int K = 100000;\n\n    fftw_plan plan_zp;\n\n    fftw_complex *h_x = (fftw_complex *)malloc(N     * sizeof(fftw_complex));\n    fftw_complex *h_xzp = (fftw_complex *)calloc(N * K, sizeof(fftw_complex));\n    fftw_complex *h_xpruning = (fftw_complex *)malloc(N * K * sizeof(fftw_complex));\n    fftw_complex *h_xhatpruning = (fftw_complex *)malloc(N * K * sizeof(fftw_complex));\n    fftw_complex *h_xhatpruning_temp = (fftw_complex *)malloc(N * K * sizeof(fftw_complex));\n    fftw_complex *h_xhat = (fftw_complex *)malloc(N * K * sizeof(fftw_complex));\n\n    // --- Random number generation of the data sequence\n    srand(time(NULL));\n    for (int k = 0; k &lt; N; k++) {\n        h_x[k][0] = (double)rand() / (double)RAND_MAX;\n        h_x[k][1] = (double)rand() / (double)RAND_MAX;\n    }\n\n    memcpy(h_xzp, h_x, N * sizeof(fftw_complex));\n\n    plan_zp = fftw_plan_dft_1d(N * K, h_xzp, h_xhat, FFTW_FORWARD, FFTW_ESTIMATE);\n    fftw_plan plan_pruning = fftw_plan_many_dft(1, &amp;N, K, h_xpruning, NULL, 1, N, h_xhatpruning_temp, NULL, 1, N, FFTW_FORWARD, FFTW_ESTIMATE);\n\n    TimingCPU timerCPU;\n    timerCPU.StartCounter();\n    fftw_execute(plan_zp);\n    printf(\"Stadard %f\\n\", timerCPU.GetCounter());\n\n    timerCPU.StartCounter();\n    double factor = -2. * PI_d / (K * N);\n    for (int k = 0; k &lt; K; k++) {\n        double arg1 = factor * k;\n        for (int n = 0; n &lt; N; n++) {\n            double arg = arg1 * n;\n            double cosarg = cos(arg);\n            double sinarg = sin(arg);\n            h_xpruning[k * N + n][0] = h_x[n][0] * cosarg - h_x[n][1] * sinarg;\n            h_xpruning[k * N + n][1] = h_x[n][0] * sinarg + h_x[n][1] * cosarg;\n        }\n    }\n    printf(\"Optimized first step %f\\n\", timerCPU.GetCounter());\n\n    timerCPU.StartCounter();\n    fftw_execute(plan_pruning);\n    printf(\"Optimized second step %f\\n\", timerCPU.GetCounter());\n    timerCPU.StartCounter();\n    for (int k = 0; k &lt; K; k++) {\n        for (int p = 0; p &lt; N; p++) {\n            h_xhatpruning[p * K + k][0] = h_xhatpruning_temp[p + k * N][0];\n            h_xhatpruning[p * K + k][1] = h_xhatpruning_temp[p + k * N][1];\n        }\n    }\n    printf(\"Optimized third step %f\\n\", timerCPU.GetCounter());\n\n    double rmserror = 0., norm = 0.;\n    for (int n = 0; n &lt; N; n++) {\n        rmserror = rmserror + (h_xhatpruning[n][0] - h_xhat[n][0]) * (h_xhatpruning[n][0] - h_xhat[n][0]) + (h_xhatpruning[n][1] - h_xhat[n][1]) * (h_xhatpruning[n][1] - h_xhat[n][1]);\n        norm = norm + h_xhat[n][0] * h_xhat[n][0] + h_xhat[n][1] * h_xhat[n][1];\n    }\n    printf(\"rmserror %f\\n\", 100. * sqrt(rmserror / norm));\n\n    fftw_destroy_plan(plan_zp);\n\n}\n</code></pre>\n\n<p>The approach I have developed consists of three steps:</p>\n\n<ol>\n<li>Multiplying the input sequence by \"twiddle\" complex exponentials;</li>\n<li>Performing the <code>fftw_many</code>;</li>\n<li>Reorganizing the results.</li>\n</ol>\n\n<p>The <code>fftw_many</code> is faster than the single FFTW on <code>K * N</code> input points. However, steps #1 and #3 completely destroy such a gain. I would expect that steps #1 and #3 be computationally much lighter than step #2.</p>\n\n<p>My questions are:</p>\n\n<ol>\n<li>How is it possible that steps #1 and #3 a so computationally more demanding than step #2?</li>\n<li>How can I improve steps #1 and #3 to have a net gain against the \"standard\" approach?</li>\n</ol>\n\n<p>Thank you very much for any hint.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I'm working with Visual Studio 2013 and compiling in Release mode.</p>\n"}, {"tags": ["c++", "templates", "function-templates"], "answers": [{"tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": true, "score": 1, "last_activity_date": 1479310770, "creation_date": 1479310770, "answer_id": 40636167, "question_id": 40636047, "link": "https://stackoverflow.com/questions/40636047/c-how-do-you-specify-one-of-several-overloaded-functions-as-an-argument-in-a-t/40636167#40636167", "title": "c++ How do you specify one of several overloaded functions as an argument in a template Function", "body": "<p>Specify the template parameter type explicitly, like this:</p>\n\n<pre><code>auto result = calculateSomething&lt;bool(const Line&amp;,const Line&amp;)&gt;(customCompare);\n</code></pre>\n"}], "owner": {"reputation": 2332, "user_id": 2822735, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bcf6ff75913e8f69f8e66774216474ab?s=128&d=identicon&r=PG&f=1", "display_name": "mr_T", "link": "https://stackoverflow.com/users/2822735/mr-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1479310623, "accepted_answer_id": 40636167, "answer_count": 1, "score": 2, "last_activity_date": 1479310770, "creation_date": 1479310399, "question_id": 40636047, "link": "https://stackoverflow.com/questions/40636047/c-how-do-you-specify-one-of-several-overloaded-functions-as-an-argument-in-a-t", "closed_reason": "Duplicate", "title": "c++ How do you specify one of several overloaded functions as an argument in a template Function", "body": "<p>I want to use some predefined comparators as an argument for a template function. </p>\n\n<p>A code skeleton:</p>\n\n<pre><code>struct Line\n{ \n    double length() const;\n    // some data\n};\n\nstruct Square\n{\n    double area() const;\n    // some data\n};\n\nbool customCompare(const Line&amp; a1, const Line&amp; a2) { return a1.length() &lt; a2.length(); }\nbool customCompare(const Square&amp; b1, const Square&amp; b2) { return b1.area() &lt; b2.area(); }\n\ntemplate &lt;typename Comparator&gt;\ndouble calculateSomething(Comparator&amp;&amp; tieBreaker)\n{\n    Line l1, l2;\n    return tiebreaker(l1, l2) ? l1.length() : l2.length();\n}\n\nauto result = calculateSomething(customCompare);\n</code></pre>\n\n<p>However, my compiler (VS12 update 5) gives the following compile errors</p>\n\n<pre><code>error C2914: 'calculateSomething' : cannot deduce template argument as function argument is ambiguous\nerror C2784: 'double calculateSomething(Comparator &amp;&amp;)' : could not deduce template argument for 'overloaded function type' from 'overloaded function type'\n</code></pre>\n\n<p>Clearly, what I want to do is to specify the comparator more precisely, like</p>\n\n<pre><code>auto result = calculateSomething(customCompare(const Line&amp;, const Line&amp;));\n</code></pre>\n\n<p>But this is also not allowed...</p>\n\n<p>how to solve this ? (I know I can resort to a lambda, but is there another way ?)</p>\n"}, {"tags": ["c++", "mfc"], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 4, "last_activity_date": 1479331112, "last_edit_date": 1479331112, "creation_date": 1479311375, "answer_id": 40636394, "question_id": 40635929, "link": "https://stackoverflow.com/questions/40635929/format-thousands-separator/40636394#40636394", "title": "Format thousands separator", "body": "<p>As far as I know CString's <code>.Format</code> doesn't support this.</p>\n\n<p>I'd use a <code>stringstream</code> to handle the formatting:</p>\n\n<pre><code>std::ostringstream temp;\ntemp.imbue(std::locale(\"\"));\n\ntemp &lt;&lt; 23400;\n\nCString result = temp.str().c_str();\n</code></pre>\n\n<p>Specifying an empty string as the name of the locale as I've done here means it should pick up the locale setting from the OS. You can give the name of a specific locale instead (e.g., if you want a specific locale, regardless of how the OS is configured):</p>\n\n<pre><code>temp.imbue(std::locale(\"de\")); // German locale\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 3876331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60d0116a1016133a9626e0816c6736e3?s=128&d=identicon&r=PG&f=1", "display_name": "28547_user", "link": "https://stackoverflow.com/users/3876331/28547-user"}, "edited": false, "score": 0, "creation_date": 1479311857, "post_id": 40636448, "comment_id": 68505408, "body": "The &#39;%.2f&#39; format characters mean to display only 2 decimal number. It is not what i asked. I want a . as separator between tousand and hundred, not integer and decimal"}], "tags": [], "owner": {"reputation": 141, "user_id": 6483284, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/20d77dfb6c761d97a46a555bcfef8e67?s=128&d=identicon&r=PG&f=1", "display_name": "matt2405", "link": "https://stackoverflow.com/users/6483284/matt2405"}, "is_accepted": false, "score": 0, "last_activity_date": 1479311530, "creation_date": 1479311530, "answer_id": 40636448, "question_id": 40635929, "link": "https://stackoverflow.com/questions/40635929/format-thousands-separator/40636448#40636448", "title": "Format thousands separator", "body": "<p>As far as I know this is what your are looking for. Simple search on google gave the answer. This type of print (<code>%.2f</code>) by the way is pretty standard among pretty much every modern language.</p>\n\n<p><code>\"Floating point: %.2f\\n\"</code></p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/aa314327(v=vs.60).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/aa314327(v=vs.60).aspx</a></p>\n"}], "owner": {"reputation": 59, "user_id": 3876331, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60d0116a1016133a9626e0816c6736e3?s=128&d=identicon&r=PG&f=1", "display_name": "28547_user", "link": "https://stackoverflow.com/users/3876331/28547-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1004, "favorite_count": 0, "accepted_answer_id": 40636394, "answer_count": 2, "score": 2, "last_activity_date": 1479331112, "creation_date": 1479310078, "last_edit_date": 1479310923, "question_id": 40635929, "link": "https://stackoverflow.com/questions/40635929/format-thousands-separator", "title": "Format thousands separator", "body": "<p>I am programming in c++ using mfc in visual studio 2010.</p>\n\n<p>I live in Europe, so I have the regional settings of the PC not USA but Europe.</p>\n\n<p>I use the .Format function of CString to print the result of a calculation and I want to add a decimal point as separator between hundred and thousands.</p>\n\n<p>For example, I would like to have displayed 23.400 instead of 23400</p>\n\n<p>Is it possible using a particular formatting of % or i have to change the setting of the pc?</p>\n\n<p>Thanks for the help</p>\n"}, {"tags": ["c++", "c++11", "visual-studio-2012", "enable-if"], "comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1479335725, "post_id": 40635870, "comment_id": 68519244, "body": "Is there another constructor in your class or is this the only one?"}, {"owner": {"reputation": 523, "user_id": 2019765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2ab46d52baf496dec7a3c0eeaa4a3e?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/2019765/simon"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1479382675, "post_id": 40635870, "comment_id": 68538932, "body": "In the real class, there are also other constructors."}], "answers": [{"comments": [{"owner": {"reputation": 523, "user_id": 2019765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2ab46d52baf496dec7a3c0eeaa4a3e?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/2019765/simon"}, "edited": false, "score": 0, "creation_date": 1479386492, "post_id": 40636708, "comment_id": 68541378, "body": "This is an Interesting idea... However, the original problem is that Class is a smart pointer template, and there are ambiguous conversions when calling two constructors of another class, which would probably not be resolved by this solution. Maybe I can provide a minimal version of that situation."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1479312150, "creation_date": 1479312150, "answer_id": 40636708, "question_id": 40635870, "link": "https://stackoverflow.com/questions/40635870/enable-if-and-constructor-with-vs2012/40636708#40636708", "title": "enable_if and constructor with VS2012", "body": "<p>I am afraid, you'd have to use a helper construct function (I didn't find a way around it). But something like this should work:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate&lt;typename T&gt;\nstruct Class\n{\n  template&lt;typename O&gt;\n  Class(O* o) { construct(o, std::integral_constant&lt;bool, std::is_convertible&lt;T*, O*&gt;::value&gt;()); }\n\n  template&lt;class O&gt;\n  void construct(O*, std::true_type ) { /* convertible */ }\n  template&lt;class O&gt;\n  void construct(O*, ... ) { /* not convertible */ }\n};\n\nstruct X { };\nstruct Y : public X { };\n\nvoid check() {\n  X x;\n  int i;\n  Class&lt;Y&gt; cl(&amp;x);\n  Class&lt;Y&gt; cl1(&amp;i);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 523, "user_id": 2019765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2ab46d52baf496dec7a3c0eeaa4a3e?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/2019765/simon"}, "edited": false, "score": 0, "creation_date": 1479387288, "post_id": 40654120, "comment_id": 68541899, "body": "Thanks for the suggestion, unfortunately delegating constructors are also not supported in VS2012."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1479383308, "creation_date": 1479383308, "answer_id": 40654120, "question_id": 40635870, "link": "https://stackoverflow.com/questions/40635870/enable-if-and-constructor-with-vs2012/40654120#40654120", "title": "enable_if and constructor with VS2012", "body": "<p>Since C++11, you can also use delegating constructors to do that:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Class {\n    template&lt;typename O&gt;\n    Class(O *o, std::true_type) {}\n\n    template&lt;typename O&gt;\n    Class(O *o, std::false_type) {}\n\npublic:\n    template&lt;typename O&gt;\n    Class(O *o): Class(o, typename std::is_convertible&lt;O*, T*&gt;::type) {}\n};\n</code></pre>\n\n<p>The basic idea is the one of <em>tag dispatching</em> and maybe it works fine also with VS2012.<br>\nSee <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list#Delegating_constructor\" rel=\"nofollow noreferrer\">here</a> for further details.</p>\n"}, {"comments": [{"owner": {"reputation": 523, "user_id": 2019765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2ab46d52baf496dec7a3c0eeaa4a3e?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/2019765/simon"}, "edited": false, "score": 0, "creation_date": 1479391617, "post_id": 40655931, "comment_id": 68545061, "body": "Argh... as you say, that was really close, and retrospectively a stupid mistake."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 0, "last_activity_date": 1479388528, "creation_date": 1479388528, "answer_id": 40655931, "question_id": 40635870, "link": "https://stackoverflow.com/questions/40635870/enable-if-and-constructor-with-vs2012/40655931#40655931", "title": "enable_if and constructor with VS2012", "body": "<p>You are <strong>so</strong> close to the solution !</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Class\n{\n    template &lt;typename O&gt;\n    Class(O*, typename std::enable_if&lt;std::is_convertible&lt;O*, T*&gt;::value&gt;::type * = nullptr)\n    {\n    }\n};\n</code></pre>\n\n<p>Did you spot the difference ? <code>*=</code> inside the parameter list was parsed as the <a href=\"http://en.cppreference.com/w/cpp/language/operator_assignment\" rel=\"nofollow noreferrer\">multiplication/assignment operator</a>, not as a pointer type followed by a default argument. Hence, syntax errors.</p>\n\n<p>This is because the C++ parser is specified to consume as many characters as possible when it forms a token (the so-called <em>Maximum Munch Rule</em>). Adding a space splits it into two separate tokens, as intended.</p>\n"}], "owner": {"reputation": 523, "user_id": 2019765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2ab46d52baf496dec7a3c0eeaa4a3e?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/2019765/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 40655931, "answer_count": 3, "score": 1, "last_activity_date": 1479388528, "creation_date": 1479309899, "last_edit_date": 1479387209, "question_id": 40635870, "link": "https://stackoverflow.com/questions/40635870/enable-if-and-constructor-with-vs2012", "title": "enable_if and constructor with VS2012", "body": "<p>I am trying to conditionally enable a constructor template. With a fully C++11-compliant compiler, I know how to do this using an extra default template argument. However, I need to support VS2012, which has std::enable_if but does not support defaulted function template arguments.</p>\n\n<p>With C++11, I would write the following:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Class\n{\n  template&lt;typename O, \n           typename = typename std::enable_if&lt;std::is_convertible&lt;O*, T*&gt;::value&gt;::type&gt;\n  Class(O*) {}\n};\n</code></pre>\n\n<p>I tried the following, but it gives an error C4336 and various follow-up errors:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Class\n{\n  template &lt;typename O&gt;\n  Class(O*, typename std::enable_if&lt;std::is_convertible&lt;O*, T*&gt;::value&gt;::type *= nullptr)\n  {\n  }\n};\n</code></pre>\n\n<p>Is there any way to make this work with VS2012?</p>\n\n<p><em>Addition</em>:</p>\n\n<p>The usage of the class would be as follows:</p>\n\n<pre><code>struct X { };\nstruct X2 : X { };\nstruct Y { };\n\nstruct Client\n{\n  Client(Class&lt;X&gt; x) {}\n  Client(Class&lt;Y&gt; y) {}\n};\n\nvoid test() {\n  X2* x2;\n  Client client(x2); // error C2668: ambiguous call to overloaded function\n                     // (without std::enable_if)\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "struct", "g++", "typedef"], "comments": [{"owner": {"reputation": 4718, "user_id": 152359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9462dee3e00416ea83771eead7902e1c?s=128&d=identicon&r=PG", "display_name": "Hayt", "link": "https://stackoverflow.com/users/152359/hayt"}, "edited": false, "score": 1, "creation_date": 1479309875, "post_id": 40635819, "comment_id": 68504013, "body": "you forward declare the struct. it should change when you change the typedef to this <code>typedef myIterStruct *myIter;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1479311547, "post_id": 40635958, "comment_id": 68505175, "body": "I can&#39;t imagine a platform where <code>sizeof(char*)</code> != <code>sizeof(RandomType*)</code>. Do you have an example?"}, {"owner": {"reputation": 364, "user_id": 1254047, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1fe28fdb43ecf2d36b8637f0233f6532?s=128&d=identicon&r=PG", "display_name": "Dharmendra", "link": "https://stackoverflow.com/users/1254047/dharmendra"}, "edited": false, "score": 0, "creation_date": 1479311660, "post_id": 40635958, "comment_id": 68505264, "body": "Thanks a lot Bo !!"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1479312430, "post_id": 40635958, "comment_id": 68505832, "body": "@SergeyA - We used to have word addressed machines, where each word would contain several chars. A <code>char*</code> might then need an index in addition to the word address."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1479313199, "post_id": 40635958, "comment_id": 68506394, "body": "@BoPersson, but pointer to every object is representable as a char*.  Where would those indexes come from in this case?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1479317570, "post_id": 40635958, "comment_id": 68509429, "body": "@SergeyA - That would be up to the implementer. It is just <i>allowed</i> to have different sizes for different types of pointers, see this <a href=\"http://stackoverflow.com/a/1241314/597607\">quote from the C standard</a>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1479321349, "post_id": 40635958, "comment_id": 68511568, "body": "@BoPersson, I am not disputing the fact that it is allowed. But I am asking a practical question, based on your experience."}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": false, "score": 1, "last_activity_date": 1479310148, "creation_date": 1479310148, "answer_id": 40635958, "question_id": 40635819, "link": "https://stackoverflow.com/questions/40635819/how-does-typdef-of-an-undefined-struct-pointer-name-work-in-c/40635958#40635958", "title": "How does typdef of an undefined struct pointer name work in C++?", "body": "<p>It is enough to know that <code>myIterStruct</code> is a class or struct. When the compiler sees <code>struct myIterStruct</code> it knows that and can form a pointer to it.</p>\n\n<p>The rule that this must work, indirectly forces the compiler use the same size for all pointers to class/struct. </p>\n\n<p>Some other pointers, particularly <code>void*</code>and <code>char*</code>, might use additional bytes on some unusual systems. </p>\n"}], "owner": {"reputation": 364, "user_id": 1254047, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/1fe28fdb43ecf2d36b8637f0233f6532?s=128&d=identicon&r=PG", "display_name": "Dharmendra", "link": "https://stackoverflow.com/users/1254047/dharmendra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1479310148, "creation_date": 1479309739, "question_id": 40635819, "link": "https://stackoverflow.com/questions/40635819/how-does-typdef-of-an-undefined-struct-pointer-name-work-in-c", "title": "How does typdef of an undefined struct pointer name work in C++?", "body": "<p>Let me explain the question with the help of code.</p>\n\n<p>I have following two files.</p>\n\n<blockquote>\n  <blockquote>\n    <p>cat a.h</p>\n  </blockquote>\n</blockquote>\n\n<pre><code>    typedef struct myIterStruct*   myIter;\n\n    class myIterator;\n\n    class myList\n    {\n        int mVal;\n        myList* mNext;\n        friend class myIterator;\n\n        public:\n\n        myList(myList* next, int val) : mVal(val), mNext(next) {}\n\n        ~myList() {}\n\n        void AddTail(int val) {\n            myList* newnode = new myList(NULL, val);\n            myList* tail = this-&gt;GetTail();\n            tail-&gt;mNext = newnode;\n        }   \n\n        myList* GetTail() {\n            myList* node = this;\n            while (node-&gt;mNext)\n                node = node-&gt;mNext;\n            return node;\n        }   \n\n        myList* GetNext() { return mNext; }\n\n        int GetVal() { return mVal; }\n    };\n\n    class myIterator\n    {\n        myList*   mList;\n\n        public:\n\n        myIterator(myList* list) : mList(list) {}\n        ~myIterator() {}\n\n        int next() {\n            int ret = -1; \n            if (mList) {\n                ret = mList-&gt;GetVal();\n                mList = mList-&gt;GetNext();\n            }\n            return ret;\n        }   \n    };\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <p>cat main.cxx</p>\n  </blockquote>\n</blockquote>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"a.h\"\nusing namespace std;\n\nmyIter createIterator(myList* list)\n{\n    myIterator *returnitr = new myIterator(list);\n    return (myIter) returnitr;\n}\n\nint myListGetNextNode(myIter iter)\n{\n    if (iter == NULL)\n        return -1; \n    myIterator* funciter = (myIterator *) iter;\n    return funciter-&gt;next();\n}\n\nint main() \n{\n\n    myList* list = new myList(NULL, 1); \n    list-&gt;AddTail(2);\n    list-&gt;AddTail(3);\n\n    myIter iter = createIterator(list);\n    int val = -1; \n\n    while((val = myListGetNextNode(iter)) != -1) {\n        cout &lt;&lt; val &lt;&lt; '\\t';\n    }   \n    cout &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>This code is used in a project to implement list and iterator.\nWhat I am not able to understand is first line in a.h file : \"typedef struct myIterStruct   *myIter;\"</p>\n\n<p>In the code, definition of struct myIterStruct is written nowhere, still this code compiles and works well.</p>\n\n<p>Does the C++ compiler convert the undefined struct pointer to void*? or is this specific to g++ compiler that I am using?\nPlease elaborate.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1479309213, "post_id": 40635614, "comment_id": 68503507, "body": "<code>fn = (baseString + &quot;WithExtension&quot;).c_str()</code> is not a very afe assignment. The <code>string</code> object created by the expression <code>baseString + &quot;WithExtension&quot;</code> is destroyed immediate after this assignment is completed, leaving the variable <code>fn</code> pointing to unallocated memory, which could reused at any time."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 4, "creation_date": 1479309221, "post_id": 40635614, "comment_id": 68503508, "body": "The lifetime of <code>x.c_str()</code> never extends past the lifetime of <code>x</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11698, "user_id": 1560850, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dba9e19ac64c87c548a4c636bf5cb7f0?s=128&d=identicon&r=PG", "display_name": "valdo", "link": "https://stackoverflow.com/users/1560850/valdo"}, "edited": false, "score": 2, "creation_date": 1479309530, "post_id": 40635672, "comment_id": 68503752, "body": "Strictly speaking it&#39;s not an undefined behavior. It&#39;s just a pointer to a not any more existing string. The undefined behavior happens when you dereference it"}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 8, "last_activity_date": 1479309538, "last_edit_date": 1479309538, "creation_date": 1479309264, "answer_id": 40635672, "question_id": 40635614, "link": "https://stackoverflow.com/questions/40635614/why-did-the-assigning-of-an-unrelated-string-cause-another-string-to-be-modified/40635672#40635672", "title": "Why did the assigning of an unrelated string cause another string to be modified?", "body": "<pre><code>const char* const fn = (baseString + \"WithExtension\").c_str();\n</code></pre>\n\n<p>This results in undefined behavior.</p>\n\n<pre><code>baseString + \"WithExtension\"\n</code></pre>\n\n<p>This creates a temporary <code>std::string</code> object. The <code>+</code> operator on a <code>std::string</code> returns a new <code>std::string</code>, and in the context of this expression, the returned <code>std::string</code> becomes a temporary object. <code>c_str()</code> returns a pointer to this temporary object's internal buffer.</p>\n\n<p>The pointer returned by <code>c_str()</code> is valid only until its <code>std::string</code> is modified, or it gets destroyed. At the end of the above expression, the temporary object gets destroyed.</p>\n\n<p>The use of this pointer later results in undefined behavior.</p>\n"}], "owner": {"reputation": 19, "user_id": 7168209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6071c0c98b1f2a134a5bdb973e0e7?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/7168209/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "closed_date": 1479309480, "accepted_answer_id": 40635672, "answer_count": 1, "score": -2, "last_activity_date": 1479309538, "creation_date": 1479309129, "question_id": 40635614, "link": "https://stackoverflow.com/questions/40635614/why-did-the-assigning-of-an-unrelated-string-cause-another-string-to-be-modified", "closed_reason": "Duplicate", "title": "Why did the assigning of an unrelated string cause another string to be modified?", "body": "<p>Example below, I have fn as a const pointer pointing to a constant c-string. When I declare and assign an unrelated other const pointer to a different constant c-string, the original fn gets modified. I have been trying to figure out why for a while, but can't see what can possibly cause this?</p>\n\n<p>Output:</p>\n\n<p>Original fn: sampleStrWithExtension</p>\n\n<p>Modified fn: randomStr2ModifiedFn</p>\n\n<pre><code>int main() {\n        std::string baseString = \"sampleStr\";\n        std::string randomBaseString = \"randomStr2\";\n        const char* const fn = (baseString + \"WithExtension\").c_str();\n        std::cout &lt;&lt; \"Original fn: \" &lt;&lt; fn &lt;&lt; std::endl;\n        const char* const variableNotFn = (randomBaseString + \"ModifiedFn\").c_str();\n        std::cout &lt;&lt; \"Modified fn: \" &lt;&lt; fn &lt;&lt; std::endl;\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1479308527, "post_id": 40635337, "comment_id": 68502995, "body": "<code>MVector operator*(const MMatrix&amp; A);</code> Whats MVector?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1479308604, "post_id": 40635337, "comment_id": 68503063, "body": "You declared a member <code>operator*</code> overload in the class, that returns an <code>MVector</code>, but then defined a global <code>operator*</code> overload that returns an <code>MMatrix</code>. Pick one of the return types, and choose whether you want to implement a class member, or a global function."}, {"owner": {"reputation": 13, "user_id": 3212033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d45d235638429d1aff5878e682b1498?s=128&d=identicon&r=PG&f=1", "display_name": "wildboy", "link": "https://stackoverflow.com/users/3212033/wildboy"}, "edited": false, "score": 0, "creation_date": 1479311693, "post_id": 40635337, "comment_id": 68505293, "body": "Okay, MVector is returning a vector for my matrix vector multiplication, that works fine though. I&#39;ve now put MMatrix MMatrix::operator*(const MMatrix &amp; A) in the class, though i&#39;m unsure how i carry out the multiplication now"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3212033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d45d235638429d1aff5878e682b1498?s=128&d=identicon&r=PG&f=1", "display_name": "wildboy", "link": "https://stackoverflow.com/users/3212033/wildboy"}, "edited": false, "score": 0, "creation_date": 1479311912, "post_id": 40635479, "comment_id": 68505448, "body": "I&#39;ve now put the prototype in the class as you suggested. The MVector returns for matrix vector multiplication. What I&#39;m unsure about is how i multiply the matrices now. How does this work?"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 13, "user_id": 3212033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d45d235638429d1aff5878e682b1498?s=128&d=identicon&r=PG&f=1", "display_name": "wildboy", "link": "https://stackoverflow.com/users/3212033/wildboy"}, "edited": false, "score": 0, "creation_date": 1479312920, "post_id": 40635479, "comment_id": 68506198, "body": "@wildboy Are you asking what the formula is for multiplying matrices?  There are many examples of code online you could follow for how to implement matrix multiplication."}, {"owner": {"reputation": 13, "user_id": 3212033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d45d235638429d1aff5878e682b1498?s=128&d=identicon&r=PG&f=1", "display_name": "wildboy", "link": "https://stackoverflow.com/users/3212033/wildboy"}, "edited": false, "score": 0, "creation_date": 1479317477, "post_id": 40635479, "comment_id": 68509367, "body": "You mention to change the definition from MMatrix operator*(const MMatrix&amp; A, const MMatrix&amp; B) to MMatrix MMatrix::operator*(const MMatrix &amp; A). So i&#39;m confused as to how I do the multiplication with only one matrix?"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 13, "user_id": 3212033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d45d235638429d1aff5878e682b1498?s=128&d=identicon&r=PG&f=1", "display_name": "wildboy", "link": "https://stackoverflow.com/users/3212033/wildboy"}, "edited": false, "score": 0, "creation_date": 1479318156, "post_id": 40635479, "comment_id": 68509745, "body": "@wildboy You are defining a member function, in which case matrix <i>on the left side of the *</i> is accessible via the <code>this</code> pointer."}, {"owner": {"reputation": 13, "user_id": 3212033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d45d235638429d1aff5878e682b1498?s=128&d=identicon&r=PG&f=1", "display_name": "wildboy", "link": "https://stackoverflow.com/users/3212033/wildboy"}, "edited": false, "score": 0, "creation_date": 1479319480, "post_id": 40635479, "comment_id": 68510586, "body": "How would I use the &#39;this&#39; pointer in reference to particular elements of the matrix on the lhs?"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 13, "user_id": 3212033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d45d235638429d1aff5878e682b1498?s=128&d=identicon&r=PG&f=1", "display_name": "wildboy", "link": "https://stackoverflow.com/users/3212033/wildboy"}, "edited": false, "score": 0, "creation_date": 1479320231, "post_id": 40635479, "comment_id": 68511008, "body": "@wildboy I filled in the body of the code for you, if you are confused about using <code>this</code> in member functions I suggest you look for a tutorial on it.  I don&#39;t have any to suggest for you offhand"}, {"owner": {"reputation": 13, "user_id": 3212033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d45d235638429d1aff5878e682b1498?s=128&d=identicon&r=PG&f=1", "display_name": "wildboy", "link": "https://stackoverflow.com/users/3212033/wildboy"}, "edited": false, "score": 0, "creation_date": 1479321388, "post_id": 40635479, "comment_id": 68511585, "body": "Thanks :-) I think i understand that now."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "reply_to_user": {"reputation": 13, "user_id": 3212033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d45d235638429d1aff5878e682b1498?s=128&d=identicon&r=PG&f=1", "display_name": "wildboy", "link": "https://stackoverflow.com/users/3212033/wildboy"}, "edited": false, "score": 0, "creation_date": 1479325621, "post_id": 40635479, "comment_id": 68513945, "body": "@wildboy If this answers your question don&#39;t forget to accept the answer"}, {"owner": {"reputation": 13, "user_id": 3212033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d45d235638429d1aff5878e682b1498?s=128&d=identicon&r=PG&f=1", "display_name": "wildboy", "link": "https://stackoverflow.com/users/3212033/wildboy"}, "edited": false, "score": 0, "creation_date": 1479678639, "post_id": 40635479, "comment_id": 68647654, "body": "Sorry, I know this question is answered, but"}], "tags": [], "owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "is_accepted": true, "score": 3, "last_activity_date": 1479320100, "last_edit_date": 1479320100, "creation_date": 1479308783, "answer_id": 40635479, "question_id": 40635337, "link": "https://stackoverflow.com/questions/40635337/c-overload-for-matrix-multiplication/40635479#40635479", "title": "C++, overload * for matrix multiplication", "body": "<p>There are 2 ways to overload <code>operator*</code>:</p>\n\n<pre><code>MMatrix MMatrix::operator*(MMatrix); //or const&amp; or whatever you like\nMMatrix operator*(MMatrix, MMatrix);\n</code></pre>\n\n<p>These are both valid, but different with slightly different semantics.</p>\n\n<p>For your definition to match your declaration change the definition to:</p>\n\n<pre><code>MMatrix MMatrix::operator*(const MMatrix &amp; A)\n{\n    //The two matrices to multiple are (*this) and A\n    MMatrix c(Rows(),A.Cols(),0.0);\n    for (int i=0; i &lt; Rows(); i++)\n    {\n        for (int j=0; j &lt; A.Cols(); j++)\n        {\n            for (int k=0; k &lt; Cols(); k++)\n            {\n                c(i,j) += (*this)(i,k)*A(k,j);\n            }\n        }\n    }\n    return c;\n}\n</code></pre>\n\n<p>As for the error you're seeing, it seems in your class you declared the operator to take a matrix and return a vector.  You probably meant to return a matrix instead.  The error is telling you that you can't assign a <code>MVector</code> to a <code>MMatrix</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 7164023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07d471637252c25e3cbd8825040ce1e6?s=128&d=identicon&r=PG&f=1", "display_name": "leftjab", "link": "https://stackoverflow.com/users/7164023/leftjab"}, "is_accepted": false, "score": 0, "last_activity_date": 1479326328, "creation_date": 1479326328, "answer_id": 40641206, "question_id": 40635337, "link": "https://stackoverflow.com/questions/40635337/c-overload-for-matrix-multiplication/40641206#40641206", "title": "C++, overload * for matrix multiplication", "body": "<p>I believe, you need to define copy constructor and copy assignment:</p>\n\n<pre><code>MMatrix(const MMatrix&amp; other);\nMMatrix&amp; operator=(const MMatrix&amp; other);\n</code></pre>\n\n<p>Move constructor and assignment wouldn't heart either:</p>\n\n<pre><code>MMatrix(MMatrix&amp;&amp; other);\nMMatrix&amp; operator=(MMatrix&amp;&amp; other);\n</code></pre>\n\n<p>Same goes to your MVector.</p>\n"}], "owner": {"reputation": 13, "user_id": 3212033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d45d235638429d1aff5878e682b1498?s=128&d=identicon&r=PG&f=1", "display_name": "wildboy", "link": "https://stackoverflow.com/users/3212033/wildboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1512, "favorite_count": 0, "accepted_answer_id": 40635479, "answer_count": 2, "score": 1, "last_activity_date": 1479326328, "creation_date": 1479308398, "question_id": 40635337, "link": "https://stackoverflow.com/questions/40635337/c-overload-for-matrix-multiplication", "title": "C++, overload * for matrix multiplication", "body": "<p>I'm having a great deal of trouble trying to overload the multiplication operator * for matrix multiplication. I've defined a matrix class</p>\n\n<pre><code>#ifndef MMATRIX_H\n#define MMATRIX_H\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n\n// Class that represents a mathematical matrix\nclass MMatrix\n{\npublic:\n// constructors\nMMatrix() : nRows(0), nCols(0) {}\nMMatrix(int n, int m, double x = 0) : nRows(n), nCols(m), A(n * m, x)\n{}\n\n// set all matrix entries equal to a double\nMMatrix &amp;operator=(double x)\n{\n    for (int i = 0; i &lt; nRows * nCols; i++) \n        A[i] = x;\nreturn *this;\n}\n\n// access element, indexed by (row, column) [rvalue]\ndouble operator()(int i, int j) const\n{\n    return A[j + i * nCols];\n}\n\n// access element, indexed by (row, column) [lvalue]\ndouble &amp;operator()(int i, int j)\n{\n    return A[j + i * nCols];\n}\n\n\n// size of matrix\nint Rows() const { return nRows; }\nint Cols() const { return nCols; }\n\n// operator overload for matrix * vector. Definition (prototype) of member class\nMVector operator*(const MMatrix&amp; A);\n\nprivate:\nunsigned int nRows, nCols;\nstd::vector&lt;double&gt; A;\n};\n#endif\n</code></pre>\n\n<p>And here is my attempted operator overload</p>\n\n<pre><code>inline MMatrix operator*(const MMatrix&amp; A, const MMatrix&amp; B)\n{\nMMatrix m(A), c(m.Rows(),m.Cols(),0.0);\nfor (int i=0; i&lt;m.Rows(); i++)\n{\n    for (int j=0; j&lt;m.Cols(); j++)\n    {\n        for (int k=0; k&lt;m.Cols(); k++)\n        {\n            c(i,j)+=m(i,k)*B(k,j);\n        }\n    }\n}\nreturn c;\n\n}\n</code></pre>\n\n<p>I'm sure that there is nothing wrong with the actual multiplication of elements. </p>\n\n<p>The error that I get is from my main .cpp file where I have tried to multiply two matrices together C=A*B; and I get this error,</p>\n\n<p>error: no match for 'operator=' (operand types are 'MMatrix' and 'MVector') </p>\n"}, {"tags": ["c++", "excel-2013", "qt5.7"], "answers": [{"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1488799912, "post_id": 42622248, "comment_id": 72376882, "body": "Whilst this code snippet is welcome, and may provide some help, it would be <a href=\"//meta.stackexchange.com/q/114762\">greatly improved if it included an explanation</a> of <i>how</i> and <i>why</i> this solves the problem. Remember that you are answering the question for readers in the future, not just the person asking now!  Please <a href=\"https://stackoverflow.com/posts/42622248/edit\">edit</a> your answer to add explanation, and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 1, "user_id": 7665552, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-E7ya8hSSReE/AAAAAAAAAAI/AAAAAAAAAEc/AQfWAuuxMRo/photo.jpg?sz=128", "display_name": "Lud\u011bk Koutn&#253;", "link": "https://stackoverflow.com/users/7665552/lud%c4%9bk-koutn%c3%bd"}, "is_accepted": false, "score": 0, "last_activity_date": 1488793911, "last_edit_date": 1488793911, "creation_date": 1488793462, "answer_id": 42622248, "question_id": 40635184, "link": "https://stackoverflow.com/questions/40635184/a-strange-reading-excel-error-with-qt/42622248#42622248", "title": "A strange reading excel error with Qt", "body": "<p>try this:</p>\n\n<pre><code>workbooks-&gt;querySubObject(\"Open(const QString&amp;)\",QString(path));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8460391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b66dfde5ce4ca353d9f7bf1e3a651d0f?s=128&d=identicon&r=PG&f=1", "display_name": "hugo", "link": "https://stackoverflow.com/users/8460391/hugo"}, "is_accepted": false, "score": -1, "last_activity_date": 1502690602, "last_edit_date": 1502690602, "creation_date": 1502688244, "answer_id": 45667889, "question_id": 40635184, "link": "https://stackoverflow.com/questions/40635184/a-strange-reading-excel-error-with-qt/45667889#45667889", "title": "A strange reading excel error with Qt", "body": "<p>Got it ! I think this is Excel Service bug. </p>\n\n<pre><code>Just change your code :\nexcel-&gt;dynamicCall(\"SetVisible(bool)\", **true**); \nAnd add another: \nexcel-&gt;dynamicCall(\"SetVisible(bool)\", **false**),\nafter workbooks = excel-&gt;querySubObject(\"WorkBooks\");\nwork on Qt5.6 excel 2013;\n</code></pre>\n\n<p>I do not the reason,but it works with a little splash. Hope it could help you.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6558711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1mwr.jpg?s=128&g=1", "display_name": "green new", "link": "https://stackoverflow.com/users/6558711/green-new"}, "is_accepted": false, "score": 0, "last_activity_date": 1530068538, "creation_date": 1530068538, "answer_id": 51053947, "question_id": 40635184, "link": "https://stackoverflow.com/questions/40635184/a-strange-reading-excel-error-with-qt/51053947#51053947", "title": "A strange reading excel error with Qt", "body": "<p>i meet same situation,and when it is invisible,i try this:</p>\n\n<pre><code>excel-&gt;setProperty(\"EnableEvents\",false);\n</code></pre>\n\n<p>it works.</p>\n\n<p>qt-version:4.8.6 window-version:10 excel:2013</p>\n"}], "owner": {"reputation": 21, "user_id": 7155383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXUdk.jpg?s=128&g=1", "display_name": "P.N. Lee", "link": "https://stackoverflow.com/users/7155383/p-n-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1047, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1530068538, "creation_date": 1479308006, "last_edit_date": 1488793886, "question_id": 40635184, "link": "https://stackoverflow.com/questions/40635184/a-strange-reading-excel-error-with-qt", "title": "A strange reading excel error with Qt", "body": "<p>In my project, I'm trying to read a excel file. However, strange things happened. When I open excel visibly, it will execute correctly. While when I set it invisible, it will not open my file.</p>\n\n<p>Qt Version:      qt-opensource-windows-x86-msvc2015_64-5.7.0</p>\n\n<p>Windows Version: 64-bit win-10</p>\n\n<p>Error information in Console: </p>\n\n<blockquote>\n  <p>QAxBase: Error calling IDispatch member Open: Unknown error</p>\n</blockquote>\n\n<p>The code to read Excel file:</p>\n\n<pre><code>QAxObject *excel = NULL;\nQAxObject *workbooks = NULL;\nQAxObject *workbook = NULL;\nexcel = new QAxObject(\"Excel.Application\");\nexcel-&gt;dynamicCall(\"SetVisible(bool)\", false);\n    // The code to set invisible, project will work correctly when set visible true\nworkbooks = excel-&gt;querySubObject(\"WorkBooks\");\nif(!workbooks){\n    QMessageBox msgBox;\n            msgBox.setWindowTitle(\"error information\");\n            msgBox.setText(\"workbooks error\");\n            msgBox.exec();\n    return;\n}\nworkbook = workbooks-&gt;querySubObject(\"Open(const QString&amp;, QVariant)\", file-&gt;filePath, 0);\n    //This code will not execute correctly, causing \"workbook error\"\nif(!workbook){\n    QMessageBox msgBox;\n            msgBox.setWindowTitle(\"error information\");\n            msgBox.setText(\"workbook error\");\n            msgBox.exec();\n    return;\n}\n\nQAxObject * worksheet = workbook-&gt;querySubObject(\"WorkSheets(int)\", 1);\n\nQAxObject * usedrange = worksheet-&gt;querySubObject(\"UsedRange\");\nQAxObject * rows = usedrange-&gt;querySubObject(\"Rows\");\nQAxObject * columns = usedrange-&gt;querySubObject(\"Columns\");\n\nint intRowStart = usedrange-&gt;property(\"Row\").toInt();\nint intColStart = usedrange-&gt;property(\"Column\").toInt();\nint intCols = columns-&gt;property(\"Count\").toInt();\nint intRows = rows-&gt;property(\"Count\").toInt();\n\nworkbook-&gt;dynamicCall(\"Close (Boolean)\", false);\ndelete excel;\n</code></pre>\n"}, {"tags": ["c++", "c++11", "lambda", "word-wrap", "member-functions"], "comments": [{"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 0, "creation_date": 1479308411, "post_id": 40635168, "comment_id": 68502907, "body": "<code>std::function</code> with member functions works in the way you explained in the question (but not in they way your code works with <code>f2</code>). Not sure if that&#39;s any more generic though since you&#39;d still need to specify function type in specialization."}, {"owner": {"reputation": 6779, "user_id": 1342941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a77b35477fab1e681d7e14f7ea78b178?s=128&d=identicon&r=PG", "display_name": "happydave", "link": "https://stackoverflow.com/users/1342941/happydave"}, "edited": false, "score": 2, "creation_date": 1479308472, "post_id": 40635168, "comment_id": 68502952, "body": "You might also want to look at <code>std::mem_fn</code>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 6779, "user_id": 1342941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a77b35477fab1e681d7e14f7ea78b178?s=128&d=identicon&r=PG", "display_name": "happydave", "link": "https://stackoverflow.com/users/1342941/happydave"}, "edited": false, "score": 1, "creation_date": 1479310286, "post_id": 40635168, "comment_id": 68504293, "body": "@happydave aaaaaaand I&#39;ve just reinvented <code>std::mem_fn</code> while composing my answer. Great."}], "answers": [{"comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 4, "creation_date": 1479309673, "post_id": 40635502, "comment_id": 68503851, "body": "Assuming C++14, I think the general consensus is that <a href=\"http://stackoverflow.com/a/17545183/3282436\">lambdas should always be preferred over std::bind</a>."}, {"owner": {"reputation": 858, "user_id": 4571656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WaAO0.jpg?s=128&g=1", "display_name": "Alex Meuer", "link": "https://stackoverflow.com/users/4571656/alex-meuer"}, "reply_to_user": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1479309867, "post_id": 40635502, "comment_id": 68504010, "body": "@0x5453 Thank you. I actually hadn&#39;t realized the disadvantages."}], "tags": [], "owner": {"reputation": 858, "user_id": 4571656, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WaAO0.jpg?s=128&g=1", "display_name": "Alex Meuer", "link": "https://stackoverflow.com/users/4571656/alex-meuer"}, "is_accepted": false, "score": 2, "last_activity_date": 1479309173, "last_edit_date": 1479309173, "creation_date": 1479308842, "answer_id": 40635502, "question_id": 40635168, "link": "https://stackoverflow.com/questions/40635168/c-how-to-convert-member-functions-to-standalone-functions-for-use-as-function/40635502#40635502", "title": "C++ how to convert member functions to standalone functions (for use as function parameter) generically?", "body": "<p>You can use <code>std::bind()</code> for this.</p>\n\n<p>Bind takes a function and however many arguments you want to go with it and returns a nice <code>std::function</code> object. You can specify the arguments at creation time or use placeholders to specify them when you're calling the returned function.</p>\n\n<pre><code>#include &lt;functional&gt;\n...\nauto sum1 = calculateSum(as, std::bind(&amp;A::f1, std::placeholders::_1));\nauto sum2 = calculateSum(as, std::bind(&amp;A::f2, std::placeholders::_1, i);\n</code></pre>\n\n<p>Remember that non-static member functions take a class instance as their first argument (though most of the time it's done implicitly, this is not one of them), this is why we're using a placeholder.\nWhen you do <code>f(a)</code> now, that <code>a</code> (the class instance) is substituted for that placeholder.</p>\n\n<p>Further reading: <a href=\"http://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow noreferrer\">Bind</a>, <a href=\"http://en.cppreference.com/w/cpp/utility/functional/placeholders\" rel=\"nofollow noreferrer\">Placeholders</a></p>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1479311008, "post_id": 40635978, "comment_id": 68504802, "body": "This code triggers UB, as <code>memArgs</code> are dead by the time you call the returned lambda that captured them by reference."}, {"owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1479311245, "post_id": 40635978, "comment_id": 68504969, "body": "OK, I&#39;ve changed to capture them by value instead"}, {"owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1479312036, "post_id": 40635978, "comment_id": 68505528, "body": "Actually better still: I&#39;ve changed back to reference capture in the inner lambda, but this time the outer lambda takes them by ref preventing UB"}], "tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 4, "last_activity_date": 1479312003, "last_edit_date": 1479312003, "creation_date": 1479310195, "answer_id": 40635978, "question_id": 40635168, "link": "https://stackoverflow.com/questions/40635168/c-how-to-convert-member-functions-to-standalone-functions-for-use-as-function/40635978#40635978", "title": "C++ how to convert member functions to standalone functions (for use as function parameter) generically?", "body": "<p>You can use C++14 generic lambdas to help with this. Define your generic lambda like this:</p>\n\n<pre><code>auto bindMem = [](auto f, auto&amp; ... memArgs) { return [f, &amp;memArgs...](auto&amp; a) { return (a.*f)(memArgs...); }; };\n</code></pre>\n\n<p>To digest: this creates a generic lambda, the invocation of which produces another lambda. The first lambda gets the member function you want to invoke, with any bound parameters (other than the <code>this</code> object). It produces a second lambda, which just then expects the object itself and applies the member function call to it with the earlier-bound parameters.</p>\n\n<p>So for your use case, you have the neat-looking:</p>\n\n<pre><code>auto sum1 = calculateSum(as, bindMem(&amp;A::f1));\nauto sum2 = calculateSum(as, bindMem(&amp;A::f2,i));\n</code></pre>\n\n<p>The great thing about this is that exactly the same <code>bindMem</code> lambda will work for any class and any member function, with arbitrary argument lists. So it really is generic in the sense that you meant.</p>\n"}, {"tags": [], "owner": {"reputation": 2332, "user_id": 2822735, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bcf6ff75913e8f69f8e66774216474ab?s=128&d=identicon&r=PG&f=1", "display_name": "mr_T", "link": "https://stackoverflow.com/users/2822735/mr-t"}, "is_accepted": true, "score": 3, "last_activity_date": 1479378160, "creation_date": 1479378160, "answer_id": 40652281, "question_id": 40635168, "link": "https://stackoverflow.com/questions/40635168/c-how-to-convert-member-functions-to-standalone-functions-for-use-as-function/40652281#40652281", "title": "C++ how to convert member functions to standalone functions (for use as function parameter) generically?", "body": "<p>After some researching, thanks to the suggestion of @happydave, I'll go with the following answer:</p>\n\n<pre><code>auto sum1 = calculateSum(as, std::mem_fn(&amp;A::f1));\n</code></pre>\n\n<p>The second sum cannot be dealt with as such and should remain a lambda. However, in general, it appears to be the less likely case that the client code is the supplier of the arguments (in which case the arguments need to be passed anyhow to the template function (and a lambda capture is a great way)). In many cases, the template function supplies also the passed function's arguments and std::mem_fn would be fine.</p>\n"}], "owner": {"reputation": 2332, "user_id": 2822735, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bcf6ff75913e8f69f8e66774216474ab?s=128&d=identicon&r=PG&f=1", "display_name": "mr_T", "link": "https://stackoverflow.com/users/2822735/mr-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1062, "favorite_count": 0, "accepted_answer_id": 40652281, "answer_count": 3, "score": 3, "last_activity_date": 1479378160, "creation_date": 1479307950, "question_id": 40635168, "link": "https://stackoverflow.com/questions/40635168/c-how-to-convert-member-functions-to-standalone-functions-for-use-as-function", "title": "C++ how to convert member functions to standalone functions (for use as function parameter) generically?", "body": "<p>For function parameters of template functions I find myself often wrapping member functions inside a lambda to create identical standalone functions with the first parameter being the object.</p>\n\n<p>A (dummy) example : </p>\n\n<pre><code>class A\n{\npublic:\n    double f1() const;\n    double f2(int i) const;\n\n    // some data\n};\n\ntemplate &lt;typename Func&gt;\ndouble calculateSum(std::vector&lt;A&gt; as, Func f)\n{\n    double result = 0.0;\n    for (auto a : as)\n        result += f(a);\n    return result;\n}\n\nint main()\n{\n    std::vector&lt;A&gt; as;\n    int i = 0;\n    auto sum1 = calculateSum(as, [](const A&amp; a) { return a.f1(); });\n    auto sum2 = calculateSum(as, [&amp;i](const A&amp; a) { return a.f2(i); });\n    return 0;\n}\n</code></pre>\n\n<p>Is there a way to define such lambdas more generically ? or is there a way to directly refer to the member functions instead of using lambdas ? </p>\n"}, {"tags": ["c++", "dll", "visual-studio-2015", "cmake"], "answers": [{"comments": [{"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "edited": false, "score": 0, "creation_date": 1479387111, "post_id": 40635593, "comment_id": 68541783, "body": "Hm, this is not a good option, as this cmake script is supposed to run on different platforms, and I would like to avoid writing lots of if cases with platform specific stuff. I wonder why this isn&#39;t fixed, if this is a known bug."}, {"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "edited": false, "score": 0, "creation_date": 1487945770, "post_id": 40635593, "comment_id": 72025516, "body": "Here is the issue, for those that want to follow it and see if it ever is resolved: <a href=\"https://gitlab.kitware.com/cmake/cmake/issues/16534\" rel=\"nofollow noreferrer\">gitlab.kitware.com/cmake/cmake/issues/16534</a>"}, {"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "edited": false, "score": 0, "creation_date": 1487946772, "post_id": 40635593, "comment_id": 72026178, "body": "And for the manual specification of the paths, one should probably use quotation marks due to the spaces in the paths."}], "tags": [], "owner": {"reputation": 121, "user_id": 5949695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7bb69f3b1b047d0c073deacee138432?s=128&d=identicon&r=PG&f=1", "display_name": "biddisco", "link": "https://stackoverflow.com/users/5949695/biddisco"}, "is_accepted": true, "score": 2, "last_activity_date": 1479388363, "last_edit_date": 1479388363, "creation_date": 1479309050, "answer_id": 40635593, "question_id": 40635139, "link": "https://stackoverflow.com/questions/40635139/cmake-finds-hdf5-but-tries-to-link-against-dll-on-windows/40635593#40635593", "title": "Cmake finds hdf5 but tries to link against dll on windows", "body": "<p>I have not used hdf5 on windows for some time, but I do recall there being a bug that causes it to link against the dll instead of the lib.\nyou should manually set (either via the command line cmake -D method, or via the cmake gui)\n<code>\n    HDF5_hdf5_LIBRARY=C:\\Program Files\\HDF_Group\\HDF5\\1.10.0\\lib\\libhdf5.lib\n    HDF5_hdf5_cpp_LIBRARY=C:\\Program Files\\HDF_Group\\HDF5\\1.10.0\\lib\\libhdf5_cpp.lib\n</code>\netc. - or just \n<code>\n    HDF5_LIBRARY=C:\\Program Files\\HDF_Group\\HDF5\\1.10.0\\lib\\libhdf5.lib\n    HDF5_cpp_LIBRARY=C:\\Program Files\\HDF_Group\\HDF5\\1.10.0\\lib\\libhdf5_cpp.lib\n</code>\ndepending on whether you have an older or newer version of FindHDF5 (they change the library var names in newer versions - check the ones used to make sure you get them right - I'm doing this from memory so might have made a mistake) </p>\n\n<p>EDIT:\nIf the option of manaully specifying the libs is a problem, then there is the option of using FindPackage(HDF5 NO_MODULE) if your hdf5 library was compiled using cmake generated makefilesetc. \nWhen using NO_MODULE, the find package scripts will bypass the findhdf5.cmake script and look for the HDF5Config.cmake or hdf5-config.cmake file that is placed in the relevant subdir of the hdf5 build/install folfer.</p>\n\n<p>This is cross platform friendly and is supported by all newer hdf5 versions - provided they were built using cmake and not ./configure ...</p>\n"}], "owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "accepted_answer_id": 40635593, "answer_count": 1, "score": 1, "last_activity_date": 1549284792, "creation_date": 1479307856, "last_edit_date": 1549284792, "question_id": 40635139, "link": "https://stackoverflow.com/questions/40635139/cmake-finds-hdf5-but-tries-to-link-against-dll-on-windows", "title": "Cmake finds hdf5 but tries to link against dll on windows", "body": "<p>I use <code>find_package(HDF5 COMPONENTS CXX REQUIRED)</code> in my CMAKE script to load the include directories and libraries of HDF5. Cmake tells me</p>\n\n<pre><code>Found HDF5: C:/Program Files/HDF_Group/HDF5/1.10.0/bin/hdf5_cpp.dll (found version \"1.10.0\") found components:  CXX\n</code></pre>\n\n<p>And generates my <code>visual studio</code> solution.\nI also use the library stored in <code>${HDF5_LIBRARIES} ${HDF5_CXX_LIBRARIES}</code> for my target, but when I try to build it, I get a Linker Error <code>LNK1107</code> saying that for file <code>hdf5_cpp.dll</code>:</p>\n\n<pre><code>invalid or corrupt file: cannot read at 0x380\n</code></pre>\n\n<p>which I think is due to the fact that <code>visual studio</code> is trying to directly link against the <code>dll</code> file instead of against the <code>lib</code> file which is in another folder, namely in: </p>\n\n<pre><code>C:\\Program Files\\HDF_Group\\HDF5\\1.10.0\\lib\n</code></pre>\n\n<p><strong>Question:</strong> Is this a bug in FindHDF or did I configure something wrong?</p>\n"}, {"tags": ["c++", "opencv", "cmake"], "comments": [{"owner": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "edited": false, "score": 0, "creation_date": 1480274845, "post_id": 40635133, "comment_id": 68883498, "body": "So, what happens if you follow the instructions in the last paragraph?"}, {"owner": {"reputation": 786, "user_id": 6533075, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d9231d59d8dc4b15e1d1329e60928b30?s=128&d=identicon&r=PG&f=1", "display_name": "Sch&#252;tze", "link": "https://stackoverflow.com/users/6533075/sch%c3%bctze"}, "reply_to_user": {"reputation": 1577, "user_id": 6776535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c515e458c92c554943b271a6789f0372?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Pr&#233;vost", "link": "https://stackoverflow.com/users/6776535/robert-pr%c3%a9vost"}, "edited": false, "score": 0, "creation_date": 1480330940, "post_id": 40635133, "comment_id": 68902433, "body": "Well, I reinstalled OpenCV and it worked, probably changed the environment variable."}], "answers": [{"tags": [], "owner": {"reputation": 786, "user_id": 6533075, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d9231d59d8dc4b15e1d1329e60928b30?s=128&d=identicon&r=PG&f=1", "display_name": "Sch&#252;tze", "link": "https://stackoverflow.com/users/6533075/sch%c3%bctze"}, "is_accepted": true, "score": 0, "last_activity_date": 1480427707, "creation_date": 1480427707, "answer_id": 40867666, "question_id": 40635133, "link": "https://stackoverflow.com/questions/40635133/opencv-environment-variable-changed/40867666#40867666", "title": "OpenCV Environment variable changed", "body": "<p>Reinstalling OpenCV solved the problem for me, since it re-modified the Environment variable. </p>\n"}], "owner": {"reputation": 786, "user_id": 6533075, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d9231d59d8dc4b15e1d1329e60928b30?s=128&d=identicon&r=PG&f=1", "display_name": "Sch&#252;tze", "link": "https://stackoverflow.com/users/6533075/sch%c3%bctze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 40867666, "answer_count": 1, "score": 1, "last_activity_date": 1480427707, "creation_date": 1479307833, "question_id": 40635133, "link": "https://stackoverflow.com/questions/40635133/opencv-environment-variable-changed", "title": "OpenCV Environment variable changed", "body": "<p>I had my standalone installation of OpenCV on my Linux machine and it was running OK. I installed ROS (comes with its OpenCV) and today I cannot run my CMakeLists.txt in any of my OpenCV projects, getting the error of :</p>\n\n<pre><code>CMake Error at CMakeLists.txt:20 (find_package):\n  By not providing \"FindOpenCV.cmake\" in CMAKE_MODULE_PATH this project has\n  asked CMake to find a package configuration file provided by \"OpenCV\", but\n  CMake did not find one.\n\n  Could not find a package configuration file provided by \"OpenCV\" with any\n  of the following names:\n\n    OpenCVConfig.cmake\n    opencv-config.cmake\n\n  Add the installation prefix of \"OpenCV\" to CMAKE_PREFIX_PATH or set\n  \"OpenCV_DIR\" to a directory containing one of the above files.  If \"OpenCV\"\n  provides a separate development package or SDK, be sure it has been\n  installed.\n</code></pre>\n\n<p>I am kinda sure this happened because some environment variable got changed however I don't know where to look at. </p>\n\n<p>Could someone walk me through this?</p>\n"}, {"tags": ["c++", "assembly", "smart-pointers"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1479308163, "post_id": 40635107, "comment_id": 68502715, "body": "It does have a counter involved and perhaps a little overhead. Perhaps a vtable"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1479308822, "post_id": 40635107, "comment_id": 68503218, "body": "I am actually surprised the whole thing is not optimized away altogether."}, {"owner": {"reputation": 2151, "user_id": 4089452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ff06d18979a4020538af1ebecbbea27b?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Power", "link": "https://stackoverflow.com/users/4089452/alessandro-power"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1479308843, "post_id": 40635107, "comment_id": 68503232, "body": "@SergeyA With clang it is."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1479308937, "post_id": 40635107, "comment_id": 68503300, "body": "Yes, I was checking it at the same time. Looks like CLang is starting to pick up with gcc on optimizations."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1479323097, "post_id": 40635107, "comment_id": 68512564, "body": "@SergeyA if it&#39;s separately compiled I guess the compiler has to allow for the possibility that you overloaded <code>new</code> and <code>delete</code> to have other side-effects?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1479323262, "post_id": 40635107, "comment_id": 68512659, "body": "@Leushenko, yes, certainly."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1479333181, "post_id": 40635107, "comment_id": 68518089, "body": "@EdHeal Counter? Vtable? That doesn&#39;t really apply to <code>std::unique_ptr</code>, does it?"}], "answers": [{"comments": [{"owner": {"reputation": 2151, "user_id": 4089452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ff06d18979a4020538af1ebecbbea27b?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Power", "link": "https://stackoverflow.com/users/4089452/alessandro-power"}, "edited": false, "score": 0, "creation_date": 1479308304, "post_id": 40635268, "comment_id": 68502832, "body": "I suspected that might be the case. Is there a way of creating a <code>unique_ptr</code> pointing to an uninitialized array?"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 2151, "user_id": 4089452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ff06d18979a4020538af1ebecbbea27b?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Power", "link": "https://stackoverflow.com/users/4089452/alessandro-power"}, "edited": false, "score": 2, "creation_date": 1479308347, "post_id": 40635268, "comment_id": 68502864, "body": "@AlessandroPower <code>std::unique_ptr&lt;int[]&gt;(new int[100])</code>."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 2151, "user_id": 4089452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ff06d18979a4020538af1ebecbbea27b?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Power", "link": "https://stackoverflow.com/users/4089452/alessandro-power"}, "edited": false, "score": 3, "creation_date": 1479322694, "post_id": 40635268, "comment_id": 68512329, "body": "@AlessandroPower but beware of <a href=\"http://stackoverflow.com/q/22571202/673852\">Differences between std::make_unique and std::unique_ptr</a>."}], "tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": true, "score": 53, "last_activity_date": 1479388267, "last_edit_date": 1495542844, "creation_date": 1479308202, "answer_id": 40635268, "question_id": 40635107, "link": "https://stackoverflow.com/questions/40635107/why-does-unique-ptr-instantiation-compile-to-larger-binary-than-raw-pointer/40635268#40635268", "title": "Why does unique_ptr instantiation compile to larger binary than raw pointer?", "body": "<p>Because <code>std::make_unique&lt;int[]&gt;(100)</code> performs <a href=\"http://en.cppreference.com/w/cpp/language/value_initialization\" rel=\"nofollow noreferrer\">value initialization</a> while <code>new int[100]</code> performs <a href=\"http://en.cppreference.com/w/cpp/language/default_initialization\" rel=\"nofollow noreferrer\">default initialization</a> - In the first case, elements are 0-initialized (for <code>int</code>), while in the second case elements are left uninitialized. Try:</p>\n\n<pre><code>int *p = new int[100]();\n</code></pre>\n\n<p>And you'll get the same output as with the <code>std::unique_ptr</code>.</p>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique\" rel=\"nofollow noreferrer\">this</a> for instance, which states that <code>std::make_unique&lt;int[]&gt;(100)</code> is equivalent to:</p>\n\n<pre><code>std::unique_ptr&lt;T&gt;(new int[100]())\n</code></pre>\n\n<p>If you want a non-initialized array with <code>std::unique_ptr</code>, you could use<sup>1</sup>:</p>\n\n<pre><code>std::unique_ptr&lt;int[]&gt;(new int[100]);\n</code></pre>\n\n<p><sub><sup>1</sup> As mentioned by <a href=\"https://stackoverflow.com/questions/22571202/differences-between-stdmake-unique-and-stdunique-ptr\">@Ruslan</a> in the comments, be aware of the difference between <code>std::make_unique()</code> and <code>std::unique_ptr()</code> - See <a href=\"https://stackoverflow.com/questions/22571202/differences-between-stdmake-unique-and-stdunique-ptr\">Differences between std::make_unique and std::unique_ptr</a>.</sub></p>\n"}], "owner": {"reputation": 2151, "user_id": 4089452, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ff06d18979a4020538af1ebecbbea27b?s=128&d=identicon&r=PG&f=1", "display_name": "Alessandro Power", "link": "https://stackoverflow.com/users/4089452/alessandro-power"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1349, "favorite_count": 3, "accepted_answer_id": 40635268, "answer_count": 1, "score": 39, "last_activity_date": 1479388267, "creation_date": 1479307741, "question_id": 40635107, "link": "https://stackoverflow.com/questions/40635107/why-does-unique-ptr-instantiation-compile-to-larger-binary-than-raw-pointer", "title": "Why does unique_ptr instantiation compile to larger binary than raw pointer?", "body": "<p>I was always under the impression that a <code>std::unique_ptr</code> had no overhead compared to using a raw pointer. However, compiling the following code</p>\n\n<pre><code>#include &lt;memory&gt;\n\nvoid raw_pointer() {\n  int* p = new int[100];\n  delete[] p;\n}\n\nvoid smart_pointer() {\n  auto p = std::make_unique&lt;int[]&gt;(100);\n}\n</code></pre>\n\n<p>with <code>g++ -std=c++14 -O3</code> produces the following assembly:</p>\n\n<pre><code>raw_pointer():\n        sub     rsp, 8\n        mov     edi, 400\n        call    operator new[](unsigned long)\n        add     rsp, 8\n        mov     rdi, rax\n        jmp     operator delete[](void*)\nsmart_pointer():\n        sub     rsp, 8\n        mov     edi, 400\n        call    operator new[](unsigned long)\n        lea     rdi, [rax+8]\n        mov     rcx, rax\n        mov     QWORD PTR [rax], 0\n        mov     QWORD PTR [rax+392], 0\n        mov     rdx, rax\n        xor     eax, eax\n        and     rdi, -8\n        sub     rcx, rdi\n        add     ecx, 400\n        shr     ecx, 3\n        rep stosq\n        mov     rdi, rdx\n        add     rsp, 8\n        jmp     operator delete[](void*)\n</code></pre>\n\n<p>Why is the output for <code>smart_pointer()</code> almost three times as large as <code>raw_pointer()</code>?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "boost-asio", "zeromq"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1479309360, "post_id": 40635037, "comment_id": 68503611, "body": "When you have no external threading requirements with <code>boost::asio</code> calling <code>io_service::run()</code> from multiple threads is the preferred method.  However, if you have external threading requirements (as it appears you do in this case), simply create one <code>io_service</code> per thread."}, {"owner": {"reputation": 2274, "user_id": 2233603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2e6588da827c077c7a04bb76d8bb75f2?s=128&d=identicon&r=PG", "display_name": "Gyorgy Szekely", "link": "https://stackoverflow.com/users/2233603/gyorgy-szekely"}, "reply_to_user": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1479310844, "post_id": 40635037, "comment_id": 68504702, "body": "This sounds good for constraining the zmq socket completion handler to the socket creator thread. :) But how do I share the http workload in this setup? I have one asio tcp socket on port 8080 whose load is handled by the threadpool in the current design. If I create one io_service/thread then the webserver socket is handled by only one thread..."}, {"owner": {"reputation": 2274, "user_id": 2233603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2e6588da827c077c7a04bb76d8bb75f2?s=128&d=identicon&r=PG", "display_name": "Gyorgy Szekely", "link": "https://stackoverflow.com/users/2233603/gyorgy-szekely"}, "reply_to_user": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 1, "creation_date": 1479313499, "post_id": 40635037, "comment_id": 68506611, "body": "I just reviewed the boost asio http server2 example in the asio docs which uses one io_service per thread and round-robin dispatches work to the threads on tcp accept. So this could work. :)"}], "owner": {"reputation": 2274, "user_id": 2233603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2e6588da827c077c7a04bb76d8bb75f2?s=128&d=identicon&r=PG", "display_name": "Gyorgy Szekely", "link": "https://stackoverflow.com/users/2233603/gyorgy-szekely"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 847, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1479307558, "creation_date": 1479307558, "last_edit_date": 1495535579, "question_id": 40635037, "link": "https://stackoverflow.com/questions/40635037/multithreaded-boost-asio-with-zeromq", "title": "Multithreaded Boost.ASIO with ZeroMQ", "body": "<p>I have a HTTP-ZeroMQ gateway that accepts POST requests on one end and forwards them on Zmq, then routes the responses back. </p>\n\n<p>The http server is done async with Boost.ASIO and Beast, and runs on a threadpool of 6 threads. Threadpooling is simply done by calling <code>io_service.run()</code> from multiple threads. The zmq part is quite naive: for each http request it creates a new REQ(tcp) socket and synchronously waits for the response. </p>\n\n<p>This clearly has a poor performance as it creates a new zmq/tcp link for each request and the processing thread is blocked until the response arrives (2-3sec). I would like to make the zmq part async as well, but I have some issues. There's a fairly easy way to make zmq sockets ASIO friendly (<a href=\"https://stackoverflow.com/questions/12829005/using-zeromq-together-with-boostasio\" title=\"SO: Using zeromq with ASIO\">here</a> and <a href=\"https://rodgert.github.io/2014/12/24/boost-asio-and-zeromq-pt1/\" rel=\"nofollow noreferrer\" title=\"Rodgers: Integrating ASIO with ZMQ\">here</a>), I'm more concerned with threading as zmq docs suggest using a the socket from the creating thread only. </p>\n\n<p>I have 3 options in mind:</p>\n\n<ol>\n<li>Have a zmq socket in each threadpool thread with thread_local. In this case I didn't find any way to tell ASIO to run the zmq socket read completion handler on the right thread (which created the socket). If ran in a different thread the handler will see a different thread_local socket, not the one that's available for read.</li>\n<li>Similar to above: one socket/thread, but not with thread_local. In this case I don't see any guarantee that the socket is accessed from the right thread, or the socket migration requirement between threads is met </li>\n<li>Have a single socket that is protected by a mutex (AFAIK, that does a full memory barrier required for zmq socket migration between threads), but having a single shared resource for all threads doesn't scale well, I don't like it</li>\n</ol>\n\n<p>The server does some data processing as well, so I don't want to make it single threaded.</p>\n\n<p><strong>So, any idea how to elegantly handle zmq sockets async in multi threaded ASIO app?</strong></p>\n\n<p>ps: I did see AZMQ, but I don't want to pull in another 3rd party lib right now.</p>\n"}, {"tags": ["c++", "function", "parameters", "malloc", "free"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1479309155, "post_id": 40634986, "comment_id": 68503466, "body": "Why don&#39;t you just use <code>std::string</code> and be done with it?"}, {"owner": {"reputation": 2671, "user_id": 6306782, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MetvO.png?s=128&g=1", "display_name": "z32a7ul", "link": "https://stackoverflow.com/users/6306782/z32a7ul"}, "edited": false, "score": 2, "creation_date": 1479310066, "post_id": 40634986, "comment_id": 68504125, "body": "You should decide on a policy: either this function frees the the memory allocated (in this case the value cannot be used by other functions) or the caller of this function (in this case you will have to remember that you have to free it after each use of this operator). For real world applications (I suppose this is an example for learning) use std::string or std::unique_ptr."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7156082, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154637998098808/picture?type=large", "display_name": "Eyal Lev", "link": "https://stackoverflow.com/users/7156082/eyal-lev"}, "is_accepted": false, "score": 0, "last_activity_date": 1479311621, "creation_date": 1479311621, "answer_id": 40636476, "question_id": 40634986, "link": "https://stackoverflow.com/questions/40634986/how-to-free-allocated-parameter/40636476#40636476", "title": "how to free allocated parameter?", "body": "<p>first, using \"malloc\" is bad practice, in c++ (you should use new, even if it's for making a char array; use new char[size]);</p>\n\n<p>if you must, add this pointer to a list of pointers this class is responsible for, and in the destructor of this class, go over that list and call delete for each (or free, if you choose to keep using malloc).</p>\n\n<p>another option, is to call delete/free, where this function is being used (not as clean, and may result in memory leaks, as you came across).</p>\n\n<p>as mentioned in another answer here, using string may also solve your problem (although, you'll need to rewrite the code that calls this function).</p>\n\n<p>one other way, may be using a smart pointer.  but that may be over complicating things for what you need here (as it means rewriting the code that calls this function).</p>\n"}], "owner": {"reputation": 1, "user_id": 6260298, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4DbUHdUKbLE/AAAAAAAAAAI/AAAAAAAAE-U/DXZk2cQzpVA/photo.jpg?sz=128", "display_name": "Muad&#39;Dib", "link": "https://stackoverflow.com/users/6260298/muaddib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1483207593, "creation_date": 1479307402, "last_edit_date": 1483207593, "question_id": 40634986, "link": "https://stackoverflow.com/questions/40634986/how-to-free-allocated-parameter", "title": "how to free allocated parameter?", "body": "<p>I got something like this:</p>\n\n<pre><code>ClassA&amp; ClassA::operator&gt;&gt;(char*&amp; string) {\n    string = (char*)malloc(size);\n\n    //read something in that string then return\n    return *this;\n}\n</code></pre>\n\n<p>Now i want to free the memory allocated in this function without losing the information stored.If i free it before the return i lose information.\n   I tried to free it inside the constructor but the parameter is not known there or in another function. So how can I do it? I use valgrind to check memory leaks and it pointed me to this malloc.</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 0, "creation_date": 1479306720, "post_id": 40634675, "comment_id": 68501712, "body": "Where in the header file are you putting this snippet?  In a function?  In a constructor?"}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 1, "creation_date": 1479307044, "post_id": 40634675, "comment_id": 68501945, "body": "Can you round it out to a full fledged <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 1781, "user_id": 2520385, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c58d540f9eab717596edfc1ca4bfaa85?s=128&d=identicon&r=PG", "display_name": "Paradox", "link": "https://stackoverflow.com/users/2520385/paradox"}, "edited": false, "score": 0, "creation_date": 1479311574, "post_id": 40634675, "comment_id": 68505201, "body": "The snippet is just a global definition in the header file, it doesn&#39;t live in anything else. I&#39;ve edited the header code to reflect that. Merely including the header file in an empty .cpp file gives the error. However, writing those 4 lines of code defining sp_eye directly in the main() function of a .cpp file makes it work fine."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479317217, "post_id": 40634675, "comment_id": 68509207, "body": "<code>sp_eye.coeffRef(0,0) = std::complex&lt;double&gt;(1,0);</code> is a <i>starement</i>. Statements must appear inside <i>functions</i>. They cannot appear at the top level of a source file. If you don&#39;t want them in <code>main</code>, use some other function."}, {"owner": {"reputation": 1781, "user_id": 2520385, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c58d540f9eab717596edfc1ca4bfaa85?s=128&d=identicon&r=PG", "display_name": "Paradox", "link": "https://stackoverflow.com/users/2520385/paradox"}, "edited": false, "score": 0, "creation_date": 1479341114, "post_id": 40634675, "comment_id": 68521042, "body": "Thanks. Hmm but I&#39;ve looked at the documentation and it seems the only way to insert elements in order to construct a sparse matrix is mat.coeffRef() or mat.insert(). Is there any trick I can use in such cases in order to be able to globally define a matrix? I would be able to do such a thing with mathematical constants, e.g. const double pi = 3.14, and I want  these matrices to have the same status as such a constant"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1479492404, "post_id": 40634675, "comment_id": 68597195, "body": "Ask the author of the matrix class to provide an appropriate constructor."}], "owner": {"reputation": 1781, "user_id": 2520385, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c58d540f9eab717596edfc1ca4bfaa85?s=128&d=identicon&r=PG", "display_name": "Paradox", "link": "https://stackoverflow.com/users/2520385/paradox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "closed_date": 1479317410, "answer_count": 0, "score": 1, "last_activity_date": 1479314763, "creation_date": 1479306562, "last_edit_date": 1479314763, "question_id": 40634675, "link": "https://stackoverflow.com/questions/40634675/eigen-matrix-in-header-file-unknown-type-name", "closed_reason": "Duplicate", "title": "Eigen matrix in header file: unknown type name", "body": "<p>I'm getting a weird error when trying to declare an Eigen Sparse Matrix in a header file. </p>\n\n<p>The header file is just:</p>\n\n<pre><code>#include &lt;Eigen/Sparse&gt;\n\nEigen::SparseMatrix&lt;std::complex&lt;double&gt; &gt; sp_eye(2,2);\nsp_eye.coeffRef(0,0) = std::complex&lt;double&gt;(1,0);\nsp_eye.coeffRef(1,1) = std::complex&lt;double&gt;(1,0);\nsp_eye.makeCompressed();\n</code></pre>\n\n<p>When including this header and compiling:</p>\n\n<p>I get \"error: unknown type name 'sp_eye'\", on line 2 of the snippet, even though I defined it in the previous line. The code snippet works fine if I include it in my main() function instead, for some reason... but I don't want it in my main program.</p>\n\n<p>To test to see if it was picking up the declaration, I tried</p>\n\n<pre><code>#include &lt;Eigen/Sparse&gt;\n\nEigen::SparseMatrix&lt;std::complex&lt;double&gt; &gt; sp_eye;\nEigen::SparseMatrix&lt;std::complex&lt;double&gt; &gt; sp_eye(2,2);\nsp_eye.coeffRef(0,0) = std::complex&lt;double&gt;(1,0);\nsp_eye.coeffRef(1,1) = std::complex&lt;double&gt;(1,0);\nsp_eye.makeCompressed();\n</code></pre>\n\n<p>and I got a redefinition error, confirming that the compiler knew about the declaration. </p>\n\n<p>What's going wrong?</p>\n"}, {"tags": ["c++", "windows", "dll", "msvcrt"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1479310255, "post_id": 40634668, "comment_id": 68504269, "body": "It is not exactly dead, it is now the <i>private</i> CRT that Windows executables themselves use.  It has been reverse-engineered by the MinGW project, they did not want to write their own CRT implementation and created the missing parts that are required to use that DLL, the #include files and the import library.  Pretty risky btw, fairly amazing that this never went drastically wrong yet.  But Microsoft in general has a high stake in not breaking existing programs in their next version."}], "owner": {"reputation": 3396, "user_id": 140053, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/acabd93a27e43aedab281e666615b575?s=128&d=identicon&r=PG", "display_name": "Stef", "link": "https://stackoverflow.com/users/140053/stef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1479306546, "creation_date": 1479306546, "question_id": 40634668, "link": "https://stackoverflow.com/questions/40634668/modern-applications-and-msvcrt-linking", "title": "Modern applications and msvcrt linking", "body": "<p>As far as I can read on Microsoft docs, <code>msvcrt.dll</code> belongs to the past.</p>\n\n<p>\"modern\" applications should be linked against new (understand better) crts (msvcrXXX.dll, vcruntimeXX)</p>\n\n<p>Ok, but now, if I take a look closer at some \"modern\" apps (node.dll, chrome.exe, vscode, golang) I only see dependencies on... msvcrt.dll and that all !?</p>\n"}, {"tags": ["c++", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1479306866, "post_id": 40634658, "comment_id": 68501827, "body": "Is there an easy way to prevent implicit conversions with this technique? <i>(i.e. check if <code>bar(t)</code> takes exactly a <code>float</code>, where <code>t</code> is a <code>double</code> that would get implicitly converted during a normal call)</i>"}, {"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1479325846, "post_id": 40634658, "comment_id": 68514057, "body": "@VittorioRomeo maybe <a href=\"http://melpon.org/wandbox/permlink/P5XjjcsuNMG7BuCS\" rel=\"nofollow noreferrer\">this</a> would do the trick? Or even better <a href=\"http://melpon.org/wandbox/permlink/IVY9AD5ZHeTN0f5a\" rel=\"nofollow noreferrer\">this</a>?"}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 4, "last_activity_date": 1479306509, "creation_date": 1479306509, "answer_id": 40634658, "question_id": 40634616, "link": "https://stackoverflow.com/questions/40634616/sfinae-remove-function-from-overload-set-if-a-free-function-does-does-not-exis/40634658#40634658", "title": "SFINAE remove function from overload set if a free function does / does not exist", "body": "<p>Simple expressions like that one can be easily SFINAE'd with <code>decltype</code>:</p>\n\n<pre><code>template &lt;typename T&gt;\nauto foo( T t ) -&gt; decltype(bar(t), void())\n{\n    // Do stuff\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1479329121, "post_id": 40634680, "comment_id": 68515983, "body": "@Jarod42 Maybe <code>template &lt;typename T, typename... Args, typename = decltype( bar( std::declval&lt;T&gt;() ), void() ) &gt; void foo(T) {}</code> could work better in this terms...?"}], "tags": [], "owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "is_accepted": false, "score": 1, "last_activity_date": 1479306585, "creation_date": 1479306585, "answer_id": 40634680, "question_id": 40634616, "link": "https://stackoverflow.com/questions/40634616/sfinae-remove-function-from-overload-set-if-a-free-function-does-does-not-exis/40634680#40634680", "title": "SFINAE remove function from overload set if a free function does / does not exist", "body": "<pre><code>template &lt;typename T, typename = decltype( bar( std::declval&lt;T&gt;() ), void() ) &gt;\nvoid foo( T t )\n{\n    // Do stuff\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1347, "user_id": 849856, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6342430a01dc2a13ff40b8267216bc42?s=128&d=identicon&r=PG", "display_name": "goneskiing", "link": "https://stackoverflow.com/users/849856/goneskiing"}, "edited": false, "score": 0, "creation_date": 1479309400, "post_id": 40635163, "comment_id": 68503640, "body": "That&#39;s awesome, worked for me on VS 2015. So what would this look like once std::is_detected is available?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 1347, "user_id": 849856, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6342430a01dc2a13ff40b8267216bc42?s=128&d=identicon&r=PG", "display_name": "goneskiing", "link": "https://stackoverflow.com/users/849856/goneskiing"}, "edited": false, "score": 0, "creation_date": 1479312742, "post_id": 40635163, "comment_id": 68506069, "body": "@goneskiing <code>decltype</code> cannot safely be used for SFINAE on VS, even indirectly.  It may work, but innocuous changes can break it.  On VS2015, relying on SFINAE is dangerous in my experience, unless you can use C++03 level SFINAE.  <code>is_detected</code> would look much like <code>can_apply</code>; I would have to look up the exact syntax."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1479307931, "creation_date": 1479307931, "answer_id": 40635163, "question_id": 40634616, "link": "https://stackoverflow.com/questions/40634616/sfinae-remove-function-from-overload-set-if-a-free-function-does-does-not-exis/40635163#40635163", "title": "SFINAE remove function from overload set if a free function does / does not exist", "body": "<pre><code>namespace details {\n  template&lt;template&lt;class...&gt;class Z, class, class...Ts&gt;\n  struct can_apply:std::false_type{};\n  template&lt;template&lt;class...&gt;class Z, class...Ts&gt;\n  struct can_apply&lt;Z, std::void_t&lt;Z&lt;Ts...&gt;&gt;, Ts...&gt;:std::true_type{};\n};\ntemplate&lt;template&lt;class...&gt;class Z, class...Ts&gt;\nusing can_apply = details::can_apply&lt;Z, void, Ts...&gt;;\n\ntemplate&lt;class T&gt;\nusing bar_r = decltype( bar( std::declval&lt;T&gt;() ) );\n\ntemplate&lt;class T&gt;\nusing can_bar = can_apply&lt;bar_r, T&gt;;\n</code></pre>\n\n<p>this gives us a trait <code>can_bar</code> which is <code>true</code> iff <code>bar(t)</code> is a valid expression.</p>\n\n<pre><code>template&lt;class T&gt;\n  std::enable_if_t&lt; can_bar&lt;T&gt;{}, int&gt; =0\n&gt;\nvoid foo( T t ) {}\n</code></pre>\n\n<p>which has the advantage that the SFINAE does not mess up the <code>foo</code> function apparent signature.  The inverse is easy:</p>\n\n<pre><code>template&lt;class T&gt;\n  std::enable_if_t&lt; !can_bar&lt;T&gt;{}, int&gt; =0\n&gt;\nvoid foo( T t ) {}\n</code></pre>\n\n<p>another advantage of this technique.</p>\n\n<p>Note that you might want to <code>can_bar&lt;T&amp;&gt;</code> instead of <code>T</code> if you are calling it in an lvalue context instead of forwarding it.</p>\n\n<hr>\n\n<p>Some of the above is beyond C++11.</p>\n\n<p>It uses a C++14 feature of <code>enable_if_t</code>.  Replace <code>enable_if_t&lt;blah&gt;</code> with <code>typename enable_if&lt;blah&gt;::type</code> in C++11, or write your own <code>enable_if_t</code>.</p>\n\n<p>It also uses a C++14 feature of <code>std::void_t</code>.</p>\n\n<pre><code>template&lt;class...&gt;struct voider{using type=void;};\ntemplate&lt;class...Ts&gt;using void_t = typename voider&lt;Ts...&gt;::type;\n</code></pre>\n\n<p>to write it in C++11.</p>\n\n<p><code>is_detected</code>, which on track for C++20, is similar to <code>can_apply</code> above.</p>\n"}], "owner": {"reputation": 1347, "user_id": 849856, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6342430a01dc2a13ff40b8267216bc42?s=128&d=identicon&r=PG", "display_name": "goneskiing", "link": "https://stackoverflow.com/users/849856/goneskiing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 2, "answer_count": 3, "score": 6, "last_activity_date": 1479307931, "creation_date": 1479306404, "last_edit_date": 1479307120, "question_id": 40634616, "link": "https://stackoverflow.com/questions/40634616/sfinae-remove-function-from-overload-set-if-a-free-function-does-does-not-exis", "title": "SFINAE remove function from overload set if a free function does / does not exist", "body": "<p>What is the canonical way to remove a template function from the overload set if a particular free function does not exist. So I have a function</p>\n\n<pre><code>template &lt;typename T&gt; void foo( T t )\n{\n    // Do stuff\n}\n</code></pre>\n\n<p>and I want to remove this from the overload set if a free function taking a parameter of type T, say</p>\n\n<pre><code>bar( T )\n</code></pre>\n\n<p>does not exist.</p>\n\n<p>Also how about the inverse remove a function from the overload if a free function does exist. So remove the function foo above if the function bar does exist?</p>\n"}, {"tags": ["c++", "json", "list", "boost", "element"], "comments": [{"owner": {"reputation": 385, "user_id": 5292023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/77WLN.jpg?s=128&g=1", "display_name": "Bambino", "link": "https://stackoverflow.com/users/5292023/bambino"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1479306823, "post_id": 40634595, "comment_id": 68501796, "body": "I linked to the question you are referring to in my question. It does not answer my question though. I want to access the elements directly, not iterate over them."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1479306924, "post_id": 40634595, "comment_id": 68501866, "body": "Is it a random access iterator? If yes, just add the offset. If not, copy it into your own container and use that."}, {"owner": {"reputation": 385, "user_id": 5292023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/77WLN.jpg?s=128&g=1", "display_name": "Bambino", "link": "https://stackoverflow.com/users/5292023/bambino"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1479307966, "post_id": 40634595, "comment_id": 68502582, "body": "Okay, your proposal helped me out a bit. If I save the iterator with &quot;auto it = root.get_child(&quot;data&quot;).begin();&quot;, then &quot;std::advance(it,3);&quot;, I get the desired value when using it. But the question how to access the value &quot;directly&quot; remains. Isn&#39;t there an easy way?"}], "owner": {"reputation": 385, "user_id": 5292023, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/77WLN.jpg?s=128&g=1", "display_name": "Bambino", "link": "https://stackoverflow.com/users/5292023/bambino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1479306344, "creation_date": 1479306344, "question_id": 40634595, "link": "https://stackoverflow.com/questions/40634595/access-specific-element-of-list-in-boost-propertytree-json", "title": "access specific element of list in Boost PropertyTree (JSON)", "body": "<p>I have data like this</p>\n\n<pre><code>{\"json\": \"a_string\", \"data\": [0,1,2,3,4]}\n</code></pre>\n\n<p>I\u2019m trying to access any specific element of \"data\" \"directly\".</p>\n\n<p>Inspired by the approach of iterating over the elements, as described <a href=\"https://stackoverflow.com/questions/31345401/parse-json-array-as-stdstring-with-boost-ptree%22here%22\">here</a>, I used the iterator to get the first element.</p>\n\n<pre><code>root.get_child(\"data\").begin()-&gt;second.get_value&lt;int&gt;();\n</code></pre>\n\n<p>But I am quite sure there should be an option to just say something like .get(0) or .get(1), but this call needs the knowledge I am operating on something like a list / vector.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;boost/property_tree/ptree.hpp&gt;\n#include&lt;boost/property_tree/json_parser.hpp&gt;\n\nusing namespace std;\nusing namespace boost::property_tree;\n\nint main(int argc, char** argv)\n{\n    string str(\"{\\\"json\\\": \\\"a_string\\\", \\\"data\\\": [0,1,2,3,4]}\");\n    stringstream ss(str);\n    ptree root;\n    read_json(ss,root);\n\n    int first_value = root.get_child(\"data\").begin()-&gt;second.get_value&lt;int&gt;();\n\n    cout &lt;&lt; first_value &lt;&lt; endl;\n    getc(stdin);\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "boost-statechart"], "answers": [{"tags": [], "owner": {"reputation": 246, "user_id": 2687658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/def5d5f3b9ee38885c6826a776f5438e?s=128&d=identicon&r=PG&f=1", "display_name": "pertre", "link": "https://stackoverflow.com/users/2687658/pertre"}, "is_accepted": false, "score": 0, "last_activity_date": 1479667966, "creation_date": 1479667966, "answer_id": 40708035, "question_id": 40634553, "link": "https://stackoverflow.com/questions/40634553/boost-statechart-pass-event-data-to-state-constructor-using-triggering-event/40708035#40708035", "title": "Boost statechart - pass event data to state constructor using triggering_event", "body": "<p>The following example is a Boost statechart implementation based on the motor state machine described <a href=\"http://www.drdobbs.com/cpp/state-machine-design-in-c/184401236\" rel=\"nofollow noreferrer\">here</a>.  Instead of using a custom_reaction to pull the speed out of the EvSetSpeed event (as in other states here), I've modified it to call triggering_event() in the constructor of the Start state.</p>\n\n<p>Things to note:</p>\n\n<ol>\n<li>The older documentation for boost statechart <a href=\"http://www.boost.org/doc/libs/1_36_0/libs/statechart/doc/future_and_history.html\" rel=\"nofollow noreferrer\">here</a> states: \"the caller of triggering_event needs to make a type check or cast the return value\", as triggering_event returns a const event_base pointer.</li>\n<li>Calling triggering_event during construction requires that the calling state derive from state, not simple_state.  This is because triggering_event is accessing the state machine from the constructor.  For what its worth, I also noted the documentation states that the use of triggering_event often implies a problem with the state machine design and should be avoided.</li>\n<li>Perhaps someone more familiar with boost statechart can comment on this, but I found I had to re-post the triggering event in the Start state constructor if I wanted it to transition to Running (as my reaction list states).</li>\n</ol>\n\n<p>Finally, it's worth mentioning that trying to call triggering_event in the constructor of the initial state of a state machine will result in a null return value.  This is because the initial state is constructed during the call to initiate, where there is no triggering event.</p>\n\n<pre><code>#include &lt;boost/statechart/state_machine.hpp&gt;\n#include &lt;boost/statechart/simple_state.hpp&gt;\n#include &lt;boost/statechart/state.hpp&gt;\n#include &lt;boost/statechart/event.hpp&gt;\n#include &lt;boost/statechart/in_state_reaction.hpp&gt;\n#include &lt;boost/statechart/transition.hpp&gt;\n#include &lt;boost/mpl/list.hpp&gt;\n#include &lt;boost/statechart/custom_reaction.hpp&gt;\n#include &lt;iostream&gt;\n\nnamespace mpl = boost::mpl;\nnamespace sc = boost::statechart;\n\nclass EvHalt : public sc::event&lt; EvHalt &gt; {};\nclass EvSetSpeed : public sc::event&lt; EvSetSpeed &gt;\n{\npublic:\n    EvSetSpeed(int speed) : _speed(speed) {}\n    int getSpeed() const { return _speed; };\n\nprivate:\n    int _speed;\n};\n\nclass Idle;\nclass Start;\nclass Stop;\nclass Running;\n\nclass Motor : public sc::state_machine&lt;Motor, Idle&gt; {};\n\nclass Idle : public sc::simple_state&lt;Idle, Motor&gt;\n{\npublic:\n    typedef mpl::list&lt;\n        sc::transition&lt; EvSetSpeed, Start &gt;,\n        sc::transition&lt; EvHalt, Idle &gt; &gt; reactions;\n\n    Idle() { std::cout &lt;&lt; \"Entering Idle State\" &lt;&lt; std::endl; };\n    ~Idle() { std::cout &lt;&lt; \"Exiting Idle State\" &lt;&lt; std::endl; };\n};\n\nclass Start : public sc::state&lt;Start, Motor&gt;\n{\npublic:\n    typedef mpl::list&lt;\n        sc::transition&lt; EvSetSpeed, Running &gt;,\n        sc::transition&lt; EvHalt, Stop  &gt; &gt; reactions;\n\n    Start(my_context ctx) : _speed(0), my_base(ctx)\n    { \n        auto trigEvt = dynamic_cast&lt;const EvSetSpeed*&gt;(triggering_event());\n        if (trigEvt) // returns true if trigEvt is indeed an EvSetSpeed event\n        {\n            _speed = trigEvt-&gt;getSpeed();\n            post_event(*trigEvt);\n            std::cout &lt;&lt; \"Entering Start State at speed \" &lt;&lt; _speed &lt;&lt; std::endl;\n        }\n        else\n            std::cout &lt;&lt; \"Entering Start State. Triggering Event is NOT EvSetSpeed.\" &lt;&lt; std::endl;\n    };\n    ~Start() { std::cout &lt;&lt; \"Exiting Start State\" &lt;&lt; std::endl; };\nprivate:\n    int _speed;  // Unused in this example.\n};\n\nclass Running : public sc::simple_state&lt;Running, Motor&gt;\n{\npublic:\n    typedef mpl::list&lt;\n        sc::custom_reaction&lt; EvSetSpeed &gt;,\n        sc::custom_reaction&lt; EvHalt  &gt; &gt; reactions;\n\n    sc::result react(const EvSetSpeed&amp; ev)\n    {\n        std::cout &lt;&lt; \"In Running Mode: Set Speed to \" &lt;&lt; ev.getSpeed() &lt;&lt; std::endl;\n        return discard_event();\n    }\n    sc::result react(const EvHalt&amp; ev)\n    {\n        std::cout &lt;&lt; \"In Running Mode: Halting Motor\" &lt;&lt; std::endl;\n        post_event(ev);\n        return transit&lt;Stop&gt;();\n    }\n\n    Running() { std::cout &lt;&lt; \"Entering Running State\" &lt;&lt; std::endl; };\n    ~Running() { std::cout &lt;&lt; \"Exiting Running State\" &lt;&lt; std::endl; };\n};\n\nclass Stop : public sc::simple_state&lt;Stop, Motor&gt;\n{\npublic:\n    typedef sc::transition&lt; EvHalt, Idle &gt; reactions;\n\n    Stop() { std::cout &lt;&lt; \"Entering Stop State\" &lt;&lt; std::endl; };\n    ~Stop() { std::cout &lt;&lt; \"Exiting Stop State\" &lt;&lt; std::endl; };\n};\n\nint main()\n{\n    Motor myMotor;\n    myMotor.initiate();\n    myMotor.process_event(EvSetSpeed(100));\n    myMotor.process_event(EvSetSpeed(200));\n    myMotor.process_event(EvHalt());\n    myMotor.process_event(EvSetSpeed(300));\n    myMotor.process_event(EvHalt());\n    myMotor.process_event(EvHalt());\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3841, "user_id": 820657, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9e5420844d05978735341ced109f684a?s=128&d=identicon&r=PG&f=1", "display_name": "ksl", "link": "https://stackoverflow.com/users/820657/ksl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1479667966, "creation_date": 1479306199, "question_id": 40634553, "link": "https://stackoverflow.com/questions/40634553/boost-statechart-pass-event-data-to-state-constructor-using-triggering-event", "title": "Boost statechart - pass event data to state constructor using triggering_event", "body": "<p>I would like to be able to communicate the data from an event to a state that gets constructed as a result of a transition. </p>\n\n<p>From <a href=\"https://groups.google.com/forum/#!msg/boost-list/x4hZtIf41iE/dpneGNoWhWAJ\" rel=\"nofollow noreferrer\">this</a> post in 2009 and <a href=\"http://boost.2283326.n4.nabble.com/statechart-Passing-parameters-from-event-to-State-Local-Storage-td2590845.html#a2590848\" rel=\"nofollow noreferrer\">this</a> one in 2010 the use of <code>triggering_event()</code> is suggested. However, I can't find an example anywhere that demonstrates how to use it.</p>\n\n<p>Can anyone help?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1479306995, "post_id": 40634551, "comment_id": 68501913, "body": "<i>&quot;I think segment fault is normally related to stack&quot;</i> - uh, no? What makes you think that?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1479307496, "post_id": 40634551, "comment_id": 68502264, "body": "Also, have you actually been able to reproduce the crash? (e.g.: what exactly does the <code>main</code> that tests your implementation do?) If yes, where does it occur?"}, {"owner": {"reputation": 2337, "user_id": 930169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/be36a036900e8c4a2d810db772e43280?s=128&d=identicon&r=PG", "display_name": "JACK M", "link": "https://stackoverflow.com/users/930169/jack-m"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1479308013, "post_id": 40634551, "comment_id": 68502610, "body": "@UnholySheep I dont have access to that server. SO honestly I dont know how to answer your question. All I know is that it tests my code using fault injection. It compiles various main program, includes my implementation of File, Buffer and Exception. If the test fails, it gives me some error megs. That test server focus testing on exceptional hehaviours, but no specific instruction tells me what exactly is under tested."}, {"owner": {"reputation": 2337, "user_id": 930169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/be36a036900e8c4a2d810db772e43280?s=128&d=identicon&r=PG", "display_name": "JACK M", "link": "https://stackoverflow.com/users/930169/jack-m"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1479308071, "post_id": 40634551, "comment_id": 68502646, "body": "@UnholySheep That is the hard part. It&#39;s very blind. I dont even know which line of my code goes wrong."}, {"owner": {"reputation": 1125, "user_id": 5672740, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c16baffcdc08015ed0b3f9dcfd424751?s=128&d=identicon&r=PG&f=1", "display_name": "SenselessCoder", "link": "https://stackoverflow.com/users/5672740/senselesscoder"}, "edited": false, "score": 1, "creation_date": 1479309584, "post_id": 40634551, "comment_id": 68503787, "body": "Are you sure you are properly initializing File&#39;s whence in a constructor? Is it being 0 by default something you want?"}, {"owner": {"reputation": 658, "user_id": 5611834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47432027ca021b7cc31ae8cfbf17fa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Ionel POP", "link": "https://stackoverflow.com/users/5611834/ionel-pop"}, "edited": false, "score": 0, "creation_date": 1479316087, "post_id": 40634551, "comment_id": 68508419, "body": "I do not see any test about the buffer size inside your File class. Maybe the call to the read/write functions is wrong and the parameter size is larger than the buffer size."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1479331777, "post_id": 40634551, "comment_id": 68517397, "body": "OT: <code>#include &lt;stdio.h&gt;</code> has been deprecated for decades and your include guards are plain illegal. You should get better and more up-to-date learning material."}, {"owner": {"reputation": 1727, "user_id": 2102698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f97295ca416aca61bd8d6e8fac8ef5?s=128&d=identicon&r=PG", "display_name": "Waxrat", "link": "https://stackoverflow.com/users/2102698/waxrat"}, "edited": false, "score": 0, "creation_date": 1483894238, "post_id": 40634551, "comment_id": 70275377, "body": "The easiest way to track down this kind of problem is usually to run the program in gdb. Compile with the -O0 and -g options to make debugging easier. Then launch <code>gdb t3</code>, type <code>run</code> at the prompt and it should stop when you get the segfault and return you to the gdb prompt. Use the <code>bt</code> command to see where you are."}, {"owner": {"reputation": 1727, "user_id": 2102698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87f97295ca416aca61bd8d6e8fac8ef5?s=128&d=identicon&r=PG", "display_name": "Waxrat", "link": "https://stackoverflow.com/users/2102698/waxrat"}, "edited": false, "score": 0, "creation_date": 1483894287, "post_id": 40634551, "comment_id": 70275396, "body": "Another way to track down this kind of problem is to run the program under valgrind. Again, compile with <code>-O0 -g</code> to make debugging easier, then run <code>valgrind t3</code>."}], "answers": [{"tags": [], "owner": {"reputation": 658, "user_id": 5611834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47432027ca021b7cc31ae8cfbf17fa8c?s=128&d=identicon&r=PG&f=1", "display_name": "Ionel POP", "link": "https://stackoverflow.com/users/5611834/ionel-pop"}, "is_accepted": false, "score": 1, "last_activity_date": 1479316708, "creation_date": 1479316708, "answer_id": 40638336, "question_id": 40634551, "link": "https://stackoverflow.com/questions/40634551/find-segment-fault-in-class-file-and-buffer/40638336#40638336", "title": "Find segment fault in class File and Buffer", "body": "<p>A possible source of crash are the <code>read</code> and <code>write</code> methods, when called with invalid parameters. For instance, <code>read</code> can be called with a buffer having a size 10, but the function <code>read</code> is requested to read 20 bytes. In this case, you will overflow your buffer.</p>\n\n<p>You have two solutions: either you change your buffer class to be able to resize dinamically, either you read/write up to the maximal size of the buffer, for instance:</p>\n\n<pre><code>tmp = fread(buffer.buffer, 1, min(size, buffer.size), this -&gt; f);\n</code></pre>\n\n<p>It goes the same for the <code>write</code>.</p>\n"}], "owner": {"reputation": 2337, "user_id": 930169, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/be36a036900e8c4a2d810db772e43280?s=128&d=identicon&r=PG", "display_name": "JACK M", "link": "https://stackoverflow.com/users/930169/jack-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1483893878, "creation_date": 1479306197, "last_edit_date": 1495539965, "question_id": 40634551, "link": "https://stackoverflow.com/questions/40634551/find-segment-fault-in-class-file-and-buffer", "title": "Find segment fault in class File and Buffer", "body": "<p>This is a follow-up question to <a href=\"https://stackoverflow.com/questions/40619388/is-there-any-double-free-risk-in-this-class\">this one</a>.</p>\n\n<p>I fixed double free and memory corruption by adding copy constructor and assignment constructor to class <code>File</code> and <code>Buffer</code>. But that remote server reports there is segmentation fault. Is there any way to cause class <code>File</code> or <code>Buffer</code> segment fault? I think segment fault is normally related to stack. But I don't have stack operation in these 2 classes.</p>\n\n<p>Buffer.h</p>\n\n<pre><code>#ifndef __BUFFER_H__\n#define __BUFFER_H__\n\n#include &lt;stdlib.h&gt;\n#include &lt;cerrno&gt;\n#include &lt;stdio.h&gt;\n\nclass Buffer\n{\n\nprivate:\n  char * buffer;\n  int size;\n  Buffer(const Buffer &amp;);\n  Buffer&amp; operator=(const Buffer &amp;);\n\npublic:\n    Buffer(int size);\n  ~Buffer();\n  void reverse(int size);\n\n\n    friend class File;\n};\n\n#endif\n</code></pre>\n\n<p>Buffer.cc:</p>\n\n<pre><code>#include \"Buffer.h\"\n#include \"Exception.h\"\n\n\nBuffer::Buffer(int size)\n{\n  this -&gt; size = size;\n  this -&gt; buffer = (char *)malloc(size);\n  if(this -&gt; buffer == NULL)\n    throw Exception(errno);\n}\n\nBuffer::~Buffer()\n{\n  // // if(this -&gt; buffer != NULL)\n  // {\n  free(this -&gt; buffer);\n  //   this -&gt; buffer = NULL;\n  // }\n}\n\nvoid Buffer::reverse(int size)\n{\n  char tmp;\n  int i;\n  char * tmpb = this -&gt; buffer;\n  for(i = 0; i &lt; size / 2; i++)\n  {\n    tmp = tmpb[i];\n    tmpb[i] = tmpb[size - i - 1];\n    // printf(\"exchange %x with %x\\n\", tmp &amp; 0xff, tmpb[i] &amp; 0xff);\n\n    tmpb[size - i - 1] = tmp;\n  }\n}\n</code></pre>\n\n<p>File.h:</p>\n\n<pre><code>#ifndef __FILE_H__\n#define __FILE_H__\n\n#include \"Buffer.h\"\n#include \"Exception.h\"\n#include &lt;stdio.h&gt;\n#include &lt;cerrno&gt;\n\nclass File\n{\n\nprivate:\n  FILE * f;\n  File(const Buffer &amp;);\n  File&amp; operator=(const File &amp;);\n\n\n\npublic:\n  int whence;\n    // Note: opening the same file twice for writing (\"w\")\n    // at the same time is forbidden\n    File(const char* name, const char *mode);\n  ~File();\n\n    int read(Buffer&amp; buffer, int size);\n    void write(Buffer&amp; buffer, int size);\n    void seek(int pos);\n    void close();\n  // void seek(long offset, int whence);\n  long size();\n};\n\n#endif\n</code></pre>\n\n<p>File.cc:</p>\n\n<pre><code>#include \"File.h\"\n\n\nFile::File(const char* name, const char *mode)\n{\n  f = fopen(name, mode);\n  if(f == NULL)\n    throw Exception(errno);\n}\n\nFile::~File()\n{\n  if(f != NULL)\n    fclose(f);\n}\n\nint File::read(Buffer&amp; buffer, int size)\n{\n  clearerr(this -&gt; f);\n  size_t tmp;\n  tmp = fread(buffer.buffer, 1, size, this -&gt; f);\n\n  // printf(\"%ld bytes read\\n\", tmp);\n  // for(int i = 0; i &lt; tmp; i++)\n  //   printf(\"%x \", buffer.buffer[i] &amp; 0xff);\n  // printf(\"\\n\");\n\n  if(feof(this -&gt; f) != 0)\n    return EOF;\n  if(ferror(this -&gt; f) != 0)\n    throw Exception(errno);\n\n  return tmp;\n}\n\nvoid File::write(Buffer&amp; buffer, int size)\n{\n  size_t tmp;\n  clearerr(this -&gt; f);\n  tmp = fwrite(buffer.buffer, 1, size, this -&gt; f);\n\n  // printf(\"%ld bytes written\\n\", tmp);\n  // for(int i = 0; i &lt; tmp; i++)\n  //   printf(\"%x \", buffer.buffer[i] &amp; 0xff);\n  // printf(\"\\n\");\n\n  if(ferror(this -&gt; f) != 0)\n    throw Exception(errno);\n}\n\nvoid File::seek(int pos)\n{\n  int ret = fseek(this -&gt; f, pos, this -&gt; whence);\n  if(ret != 0)\n    throw Exception(errno);\n}\n\nvoid File::close()\n{\n  int tmp;\n  if(this -&gt; f != NULL)\n    tmp = fclose(this -&gt; f);\n  this -&gt; f = NULL;\n  if(tmp != 0)\n    throw Exception(errno);\n}\n\nlong File::size()\n{\n  if(fseek(this -&gt; f, 0, SEEK_END) != 0)\n    throw Exception(errno);\n\n  long tmp = ftell(this -&gt; f);\n  if(tmp == -1)\n    throw Exception(errno);\n\n  if(fseek(this -&gt; f, 0, SEEK_SET) != 0)\n    throw Exception(errno);\n  return tmp;\n}\n</code></pre>\n\n<p>NOTE: I have to use C style code. Otherwise I would fail the server test. That is a hard requirement. Well, you may think this requirement is silly. But this is the requirement. Maybe one point is learning the bad while someone mixing C and C++.</p>\n\n<p>The server provides a main function to test my implementation. Just compile using make. The result is a program named rcopy which reverses content of a file byte by byte and then outputs to a new file.</p>\n\n<p>Here is the detailed error output:</p>\n\n<pre><code>make: Entering directory `/home/vmcheck/testhome/co/rcopy'\ng++ -c rcopy.cc\ng++ -c Buffer.cc\ng++ -c Exception.cc\ng++ -c File.cc\ng++ rcopy.o Buffer.o Exception.o File.o -o rcopy\nmake: Leaving directory `/home/vmcheck/testhome/co/rcopy'\n======== COMPILING AGAINST OUR TESTS ========\ng++ -c -Wall -I./   t1.cc -ot1.o\ng++  -ot1  t1.o Buffer.o Exception.o File.o\ng++ -c -Wall -I./   t2.cc -ot2.o\ng++  -ot2  t2.o Buffer.o Exception.o File.o\ng++ -c -Wall -I./   t3.cc -ot3.o\ng++  -ot3  t3.o Buffer.o Exception.o File.o\ng++ -c -Wall -I./   t4.cc -ot4.o\ng++  -ot4  t4.o Buffer.o Exception.o File.o\ng++ -c -Wall -I./   t5.cc -ot5.o\ng++  -ot5  t5.o Buffer.o Exception.o File.o\ng++ -c -Wall -I./   t6.cc -ot6.o\ng++  -ot6  t6.o Buffer.o Exception.o File.o\ng++ -c -Wall -I./   t7.cc -ot7.o\ng++  -ot7  t7.o Buffer.o Exception.o File.o\ng++ -c -Wall -I./   f1.cc -of1.o\ngcc failed_read.c -ldl -shared -fPIC -o failed_read.so\ngcc failed_write.c -ldl -shared -fPIC -o failed_write.so\nfailed_write.c:5:7: warning: conflicting types for built-in function \u2018fwrite\u2019 [enabled by default]\ng++  -of1  f1.o Buffer.o Exception.o File.o\ng++ -c -Wall -I./   f2.cc -of2.o\ng++  -of2  f2.o Buffer.o Exception.o File.o\n\n========= TESTING RCOPY ==========\nRun: large file\nsize of input file: 16473\nRun: small file\nsize of input file: 0\n\n========= TESTING EXCEPTION BEHAVIOUR ==========\n*** Test 1 ***\n*** Test 2 ***\n*** Test 3 ***\nbash: line 1: 22041 Segmentation fault      ./t3\nFAILED\n</code></pre>\n\n<p>The bash script isn't source of the segment fault. I can confirm this. Noted that the test serve could provide many various versions of buggy main to test <code>File</code>, <code>Buffer</code> and <code>Exception</code>.</p>\n"}, {"tags": ["c++", "loops", "root-framework"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1479307564, "post_id": 40634371, "comment_id": 68502324, "body": "I suggest you to post this on the <a href=\"https://root.cern.ch/phpBB3/\" rel=\"nofollow noreferrer\">root forum</a>, maybe there you will get less downvotes and more help ;)"}, {"owner": {"reputation": 2363, "user_id": 4588453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51da95e02741a304f3620d3b9697eda9?s=128&d=identicon&r=PG&f=1", "display_name": "pseyfert", "link": "https://stackoverflow.com/users/4588453/pseyfert"}, "edited": false, "score": 1, "creation_date": 1479337665, "post_id": 40634371, "comment_id": 68519994, "body": "your code seems redundant. either open the <code>TFile</code> and <code>Get</code> the <code>TTree</code> within, or (especially if your data is spread over many files) create a <code>TChain</code> and <code>Add</code> the input files. and from there on use either the <code>TChain</code> or the <code>TTree</code> with <code>SetBranchAddress</code> and <code>GetEntry</code>."}, {"owner": {"reputation": 45, "user_id": 7143691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GbnjK.jpg?s=128&g=1", "display_name": "lasagna", "link": "https://stackoverflow.com/users/7143691/lasagna"}, "edited": false, "score": 0, "creation_date": 1480866931, "post_id": 40634371, "comment_id": 69130069, "body": "yeah-- I realized that later and now only have compchain-&gt;Add(&quot;file&quot;)"}], "answers": [{"tags": [], "owner": {"reputation": 1235, "user_id": 3203137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a688bd0747afad81e5942981c57f80d9?s=128&d=identicon&r=PG", "display_name": "plx", "link": "https://stackoverflow.com/users/3203137/plx"}, "is_accepted": true, "score": 0, "last_activity_date": 1479318276, "creation_date": 1479318276, "answer_id": 40638824, "question_id": 40634371, "link": "https://stackoverflow.com/questions/40634371/why-wont-this-loop-load-the-proper-event/40638824#40638824", "title": "Why won&#39;t this loop load the proper event?", "body": "<p>It looks you don't need to use the <code>comp_tree</code> pointer at all. The <code>compchain</code> pointer should be enough to access the data in the <code>TTree</code> because <code>TChain</code> is a <code>TTree</code>. Therefore, you should be able to \"link\" the variables to the chain/tree branches as:</p>\n\n<pre><code>compchain-&gt;SetBranchAddress(\"_compression\",&amp;_compression);\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>comp_tree-&gt;SetBranchAddress(\"_compression\",&amp;_compression);\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7143691, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GbnjK.jpg?s=128&g=1", "display_name": "lasagna", "link": "https://stackoverflow.com/users/7143691/lasagna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 40638824, "answer_count": 1, "score": 1, "last_activity_date": 1479318276, "creation_date": 1479305715, "question_id": 40634371, "link": "https://stackoverflow.com/questions/40634371/why-wont-this-loop-load-the-proper-event", "title": "Why won&#39;t this loop load the proper event?", "body": "<p>Here is the code I wrote, and it runs fine, but it doesn't seem to actually load the events ... instead, it seems to fill the histograms and the cout with one arbitrary miniscule number. </p>\n\n<pre><code>include \"TTree.h\"\ninclude \"TFile.h\"\ninclude \"TRandom.h\"\ninclude \"TTree.h\"\ninclude \"TCanvas.h\"\ninclude \"TStyle.h\"\ninclude &lt;iostream&gt;\ninclude \"TH1.h\"\ninclude \"TChain.h\"\n\nusing namespace std;\n\nvoid readtestsimple(){\n\n  TFile *file = TFile::Open(\"/file/\");\n\n  TTree* comp_tree = (TTree*)file-&gt;Get(\"_compress_tree\");\n\n  TChain* compchain = new TChain(\"_compress_tree\");\n  compchain-&gt;Add(\"/file/\");\n\n  TH1D *comp = new TH1D(\"comp\",\"_compression\",100,0,0.05);\n\n  Double_t _compression, _compressionU, _compressionV, _compressionY, _ch_compression;\n  Int_t _ch;\n  comp_tree-&gt;SetBranchAddress(\"_compression\",&amp;_compression);\n  comp_tree-&gt;SetBranchAddress(\"_compressionU\",&amp;_compressionU);\n  comp_tree-&gt;SetBranchAddress(\"_compressionV\",&amp;_compressionV);\n  comp_tree-&gt;SetBranchAddress(\"_compressionY\",&amp;_compressionY);\n\n      Long64_t nentries = compchain-&gt;GetEntries();\n      Long64_t nb = 0, nbytes = 0 ;\n\n      for (Long64_t i=0; i&lt;nentries; i++) {\n              Long64_t entry = compchain-&gt;LoadTree(i);\n              if (entry &lt;0 ) break;\n\n             nb = compchain-&gt;GetEntry(i); nbytes += nb;\n\n              cout &lt;&lt; \"entry = \" &lt;&lt; nb &lt;&lt; endl;\n              cout &lt;&lt; \"compression = \" &lt;&lt; _compression &lt;&lt; endl;\n\n              comp-&gt;Fill(_compression);\n      }\n\n   cout &lt;&lt; \"entries = \" &lt;&lt; nentries &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>And the output I get is a long repetition of this:</p>\n\n<pre><code>entry = 36\ncompression = 1.54768e-316\n\nentry = 36\ncompression = 1.54768e-316\n\nentry = 36\ncompression = 1.54768e-316\n</code></pre>\n\n<p>(and at the end, the correct number of entries).</p>\n\n<p>What do I do to make it read out the correct entry?\nPlease help!</p>\n"}]