[{"tags": ["c++", "inheritance", "constructor"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1539826477, "post_id": 52865133, "comment_id": 92645547, "body": "as well as the other problems, your <code>strncpy</code> call fails to null-terminate the string"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1539826539, "post_id": 52865231, "comment_id": 92645563, "body": "<code>String (str_init);</code> is a variable declaration with redundant parentheses around the variable name (hence the message that no default constructor could be found)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1539828111, "post_id": 52865231, "comment_id": 92645806, "body": "You seem to have misread my comment. There is no temporary / anonymous string"}], "tags": [], "owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "is_accepted": false, "score": 1, "last_activity_date": 1539828724, "last_edit_date": 1539828724, "creation_date": 1539821499, "answer_id": 52865231, "question_id": 52865133, "link": "https://stackoverflow.com/questions/52865133/c-derived-class-constructor/52865231#52865231", "title": "C++ derived Class constructor", "body": "<p>You can't just call a constructor out of the blue. There are only specific places you can call a constructor and this isn't one of them.</p>\n\n<p>The compiler sees <code>String(str_init);</code> and ssumes it is a function call but you don't have a matching function - hence the error.</p>\n\n<p>As per the comment below there is a subtlety here. The error message is \"No matching function call to 'String::String()\". In a class called <code>String</code> a method called <code>String</code> is going to be a constructor. Therefore the line <code>String(str_init);</code> isn't a function call, it is trying to make a <code>String</code> item using a non-existent default constructor.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1539826456, "post_id": 52865470, "comment_id": 92645540, "body": "There are several problems with your code (just compiling is no guarantee of doing what was intended)"}, {"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1539828935, "post_id": 52865470, "comment_id": 92645990, "body": "@Sahi;Dhoked  You&#39;ve completely missed the point. If you feed in MAX_STR_SIZE + 1 chars by calling the <code>String</code> constructor like this you invoke undefined behavior before you even get into the &quot;logic&quot; to handle &gt; MAX_STR_SIZE chars."}], "tags": [], "owner": {"reputation": 373, "user_id": 5579840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3ea32a6e9606728457334a4d80002?s=128&d=identicon&r=PG&f=1", "display_name": "Sahil Dhoked", "link": "https://stackoverflow.com/users/5579840/sahil-dhoked"}, "is_accepted": true, "score": -2, "last_activity_date": 1539823963, "creation_date": 1539823963, "answer_id": 52865470, "question_id": 52865133, "link": "https://stackoverflow.com/questions/52865133/c-derived-class-constructor/52865470#52865470", "title": "C++ derived Class constructor", "body": "<p>2 Errors.\nFirst, you need to invoke the base constructor via your class' initializer list as explained in this <a href=\"https://stackoverflow.com/questions/3714162/class-inherited-from-class-without-default-constructor\">answer</a>.</p>\n\n<p>Second you need to assign some object to your class when calling</p>\n\n<pre><code>String(str_init); \n</code></pre>\n\n<p>The following code compiles on my machine.</p>\n\n<pre><code>#include &lt;cstring&gt;\n#define MAX_STR_SIZE 20\nclass String {\nprotected:\n    char str[MAX_STR_SIZE];\npublic:\n    String(char str_init[])\n    {\n        std::strcpy(str, str_init);\n    }\n};\n\nclass PString : String\n{ \n    public:\n    PString(char str_init[]) : String(str_init) \n    {\n        if (strlen(str_init) &gt; MAX_STR_SIZE)\n            strncpy(str, str_init, MAX_STR_SIZE-1);\n        else\n            String s = String(str_init); \n            String s2(str_init);\n    int i = 0;\n    i++;\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8002, "user_id": 1143850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2927fac544c9960cd5433688fe4cae1d?s=128&d=identicon&r=PG", "display_name": "Serge", "link": "https://stackoverflow.com/users/1143850/serge"}, "is_accepted": false, "score": -1, "last_activity_date": 1539828521, "creation_date": 1539828521, "answer_id": 52865935, "question_id": 52865133, "link": "https://stackoverflow.com/questions/52865133/c-derived-class-constructor/52865935#52865935", "title": "C++ derived Class constructor", "body": "<p>what you are trying to do does not require this set of complications. In general <code>strncpy</code> will handle both cases correctly. However, for the education sake here is some analysis</p>\n\n<p>1.In your constructor of the PString you call the construct of the String and ask it to strcpy str_intit into str. So, you cause the same memory corruption you wanted to avoid. you are missing <code>String()</code> constructor. I suggest to create the default constructor for the String and remove the one you use from PString.</p>\n\n<pre><code> String() {str[0] = 0;}\n ..\n PString(char str_init[])\n {\n</code></pre>\n\n<p>2.your case could be modified a bit as the following:</p>\n\n<pre><code>if (strlen(str_init) &gt; MAX_STR_SIZE) {\n  strncpy(str, str_init, MAX_STR_SIZE-1);\n  str[MAXLEN-1] = 0; // strncpy will not add '0' in this case. you need to do it yourself\n}\nelse\n  strcpy(str, str_init);\n</code></pre>\n\n<p>above, in the if clause you use str<strong>n</strong>cpy whether after the 'else' you can use the simple strcpy. So, it looks like this:</p>\n\n<pre><code>#include &lt;cstring&gt;\n#define MAX_STR_SIZE 80\n\nclass String {\nprotected:\n  char str[MAX_STR_SIZE];\npublic:\n  String(char *str_init)\n  {\n    strcpy(str, str_init);\n  }\n  String() {\n   str[0] = 0;\n  }\n};\n\nclass PString : String\n{ \npublic:\n  PString(char str_init[])\n  {\n    if (strlen(str_init) &gt; MAX_STR_SIZE) {\n      strncpy(str, str_init, MAX_STR_SIZE-1);\n      str[MAX_STR_SIZE-1] = 0;\n    }\n    else\n      strcpy(str, str_init);\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4387652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e390e0d481144985db04bfd294691a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas ", "link": "https://stackoverflow.com/users/4387652/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 52865470, "answer_count": 3, "score": -1, "last_activity_date": 1539828724, "creation_date": 1539820508, "question_id": 52865133, "link": "https://stackoverflow.com/questions/52865133/c-derived-class-constructor", "title": "C++ derived Class constructor", "body": "<p>I'm learning C++ inheritance and i have some problems with it.\nI'm using Zinjal IDE with GNU c++ compiler.</p>\n\n<p>This is the code:</p>\n\n<pre><code>class String {\nprotected:\n    char str[MAX_STR_SIZE];\npublic:\n    String(char str_init[])\n    {\n        strcpy(str, str_init);\n    }\n};\n\nclass PString : String\n{ \n    public:\n    PString(char str_init[]) \n    {\n        if (strlen(str_init) &gt; MAX_STR_SIZE)\n            strncpy(str, str_init, MAX_STR_SIZE-1);\n        else\n            String(str_init); \n    }\n};\n</code></pre>\n\n<p>Well it's just creating my own \"string\" class. But: What is the problem? The string can go too much bigger. So when the constructor of my \"String\" Class is called with a string the superssed \"MAX_STR_SIZE\" (which is defined as 80 chars for expamle) the program will crash with an array overflow ( >80 chars).\nSo i want to create a \"child\" or \"derived\" class called \"PString\" which can handles overflow.\nAs you can see PString child Class constructor checks the string if it's > MAX_STR_SIZE. If it's bigger than what char array can handle it cut off the string by MAX_STR_SIZE, so avoiding the overflow. If its smaller than MAX_STR_SIZE it calls the Parent class constructor.\nBut, g++ fails telling me \"No matching function call to 'String::String()'.</p>\n\n<p>It's a lame error i know, but i'm just learning</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "c++", "boost"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539821255, "post_id": 52865114, "comment_id": 92644549, "body": "You don&#39;t need to inherit from <code>collections.Mapping</code>, but you&#39;ll probably wish you could. <code>collections.Mapping</code> provides a lot of default helper implementations that are a pain to implement manually, especially in C++."}, {"owner": {"reputation": 46580, "user_id": 206328, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e002d9aebb899c1d4ed3ca5bb7d61704?s=128&d=identicon&r=PG", "display_name": "Anycorn", "link": "https://stackoverflow.com/users/206328/anycorn"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1539867664, "post_id": 52865114, "comment_id": 92662666, "body": "Appears keys and getitem are sufficient for ** to treat object as mapping, indeed no need to derive from mapping.  still be interesting to know if BP class can inherit from python classes"}], "owner": {"reputation": 46580, "user_id": 206328, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e002d9aebb899c1d4ed3ca5bb7d61704?s=128&d=identicon&r=PG", "display_name": "Anycorn", "link": "https://stackoverflow.com/users/206328/anycorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539820302, "creation_date": 1539820302, "question_id": 52865114, "link": "https://stackoverflow.com/questions/52865114/boost-python-class-inherit-from-python-type", "title": "Boost.Python class inherit from Python type", "body": "<p>I have need to expose C++ class but also to inherit from collections.Mapping (to make ** operator available).\nIs there way to do that?  Alternative, is there protocol to implement ** for non-mapping types?</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1539820535, "post_id": 52865094, "comment_id": 92644408, "body": "Thats a lot of code for us to read through. If you would <a href=\"https://stackoverflow.com/help/mcve\">create a Minimal, Complete, and Verifiable example</a>, that would probably help both you and us find the problem."}, {"owner": {"reputation": 131, "user_id": 8338606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/863466627150722/picture?type=large", "display_name": "Alexandre Michaud", "link": "https://stackoverflow.com/users/8338606/alexandre-michaud"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1539820712, "post_id": 52865094, "comment_id": 92644446, "body": "sure sorry, i put all these because i don&#39;t know wher my problem is located :/ I&#39;ll edit the code so it&#39;ll be more viewable"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1539820970, "post_id": 52865094, "comment_id": 92644495, "body": "Don&#39;t worry, it&#39;s incredibly common to not know where the problem is located.  The instructions for creating a minimal example show how to do so, which includes how to locate the problems. (A) it makes it far easier for us to help you, so you get more help, or (B) it teaches you how to solve the problem yourself, making you a better developer."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 8338606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/863466627150722/picture?type=large", "display_name": "Alexandre Michaud", "link": "https://stackoverflow.com/users/8338606/alexandre-michaud"}, "edited": false, "score": 0, "creation_date": 1539821015, "post_id": 52865158, "comment_id": 92644504, "body": "thanks for your answer, in that way what should i do to create those objects as i don&#39;t know the quantity of &quot;Professeur&quot; i have?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1539821038, "post_id": 52865158, "comment_id": 92644508, "body": "Sounds like you need <code>std::vector</code>"}, {"owner": {"reputation": 131, "user_id": 8338606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/863466627150722/picture?type=large", "display_name": "Alexandre Michaud", "link": "https://stackoverflow.com/users/8338606/alexandre-michaud"}, "edited": false, "score": 0, "creation_date": 1539822237, "post_id": 52865158, "comment_id": 92644727, "body": "i&#39;ll try to implement it and i&#39;ll come back to you, thanks for the answer"}, {"owner": {"reputation": 131, "user_id": 8338606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/863466627150722/picture?type=large", "display_name": "Alexandre Michaud", "link": "https://stackoverflow.com/users/8338606/alexandre-michaud"}, "edited": false, "score": 0, "creation_date": 1540069480, "post_id": 52865158, "comment_id": 92731027, "body": "Ok, just try to implement it, however i have the same error, the same value is returned. Go check my post at the end"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1539820750, "creation_date": 1539820750, "answer_id": 52865158, "question_id": 52865094, "link": "https://stackoverflow.com/questions/52865094/pointers-doesnt-give-me-same-value/52865158#52865158", "title": "Pointers doesn&#39;t give me same value", "body": "<pre><code>DossierProfesseur::Professeur DossierProfesseur::CreationListeProfesseur(){\n    Professeur prof;\n    Cours cours;\n ...\n        cours = DossierProfesseur::CreationListeCours();\n        prof.ListeDeCours = &amp;cours;\n        etudiant = DossierProfesseur:\n ...\n    return prof;\n}\n</code></pre>\n\n<p>You create <code>cours</code> as a local object inside this function, so <code>cours</code> will cease to exist when this function returns. Yet you stash the address of <code>cours</code> inside the <code>prof</code> object you return by value. So you are returning an object to the caller that contains a pointer to an object that no longer exists. Attempting to dereference that pointer is disastrous.</p>\n\n<p>Please don't use pointers this way. It makes managing the lifetimes of objects extremely difficult.</p>\n"}], "owner": {"reputation": 131, "user_id": 8338606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/863466627150722/picture?type=large", "display_name": "Alexandre Michaud", "link": "https://stackoverflow.com/users/8338606/alexandre-michaud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540070395, "creation_date": 1539820150, "last_edit_date": 1540070395, "question_id": 52865094, "link": "https://stackoverflow.com/questions/52865094/pointers-doesnt-give-me-same-value", "title": "Pointers doesn&#39;t give me same value", "body": "<p>i'm learning how to program in c++ and i'm facing into a problem:\nI have a struct called Professeur, where Cours and Etudiant are other structs (not the problem here) :</p>\n\n<pre><code>struct Professeur {\n        std::string Nom;\n        int Ancien;\n        Cours* ListeDeCours;\n        Etudiant* ListeDEtudiant;\n        Professeur* Suivant;\n      };\n</code></pre>\n\n<p>In my program i read a file and then store the data in these structure. However when i want to display the info stored in the \"Suivant\" Professeur i have a problem, see :</p>\n\n<p>The data file :</p>\n\n<pre><code>Prof1\n1\nCours11\nCours12\nCours13\n&amp;\nEtudiant11\nEtudiant12\nEtudiant13\n$\nProf2\n2\nCours21\nCours22\nCours23\n&amp;\nEtudiant21\nEtudiant22\nEtudiant23\n$\n</code></pre>\n\n<p>And the output : </p>\n\n<pre><code>2\n1\n1\n6304032\n</code></pre>\n\n<p>As you can see, newprof->Ancien don't give me the same value and i don't know why as i don' modify it (i suppose). So i did a test program, where i create my struct by myself and it work perfectly:</p>\n\n<p>I searched everything but i don't know why it's not working.. Could someone take a look ? Thanks a lot</p>\n\n<p>Here is code where the problem should be located :\ntest.cpp </p>\n\n<pre><code>ifstream fichier;\nvector&lt;DossierProfesseur::Professeur&gt; ContainerProf;\nvector&lt;DossierProfesseur::Cours&gt; ContainerCours;\nvector&lt;DossierProfesseur::Etudiant&gt; ContainerEtudiant;\nDossierProfesseur::DossierProfesseur(string FP){\n    fichier.open(FP);\n    if (fichier.is_open() ){\n        Professeur premier = DossierProfesseur::CreationListeProfesseur();\n        tete = &amp;premier;\n        Professeur *newprof = DossierProfesseur::getNextProf(tete);\n\n        cout&lt;&lt; newprof-&gt;Ancien&lt;&lt;\"\\n\";\n        cout&lt;&lt; tete-&gt;Ancien&lt;&lt;\"\\n\";\n        cout&lt;&lt; tete-&gt;Ancien&lt;&lt;\"\\n\";\n        cout&lt;&lt; newprof-&gt;Ancien&lt;&lt;\"\\n\";\n    }\n    else{\n        printf(\"Error while openning file\");\n    }\n}\n\nDossierProfesseur::Professeur* DossierProfesseur::getNextProf(DossierProfesseur::Professeur* prof){\n    return prof-&gt;Suivant;\n}\n\n\nDossierProfesseur::Professeur DossierProfesseur::CreationListeProfesseur(){\n    Professeur prof;\n    Cours cours;\n    Etudiant etudiant;\n    if(!fichier.eof()){ //Fin du fichier\n        getline(fichier,prof.Nom);\n        string ancien;\n        getline(fichier,ancien);\n        prof.Ancien = stoi(ancien);\n        Professeur nextProf = DossierProfesseur::CreationListeProfesseur();\n        prof.Suivant = &amp;nextProf;\n    }\n    else{\n        prof.Nom = string();\n        prof.Ancien = 0;\n        prof.ListeDeCours = NULL;\n        prof.ListeDEtudiant = NULL;\n        prof.Suivant = NULL;\n    }\n    ContainerProf.push_back(prof);\nreturn ContainerProf.back();\n}\n\nint main()\n{\n    string dest = \"FP.txt\";\n    DossierProfesseur dos (dest);\n    return 0;\n}\n</code></pre>\n\n<p>test.h :</p>\n\n<pre><code>#ifndef DossierProfesseur_h\n#define DossierProfesseur_h\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstring&gt;\n#include &lt;stdlib.h&gt;\n\n  class DossierProfesseur\n  {\n    public:\n      DossierProfesseur(std::string FP);\n\n      struct Cours{\n        std::string Sigle;\n        Cours* Suivant;\n      };\n      struct Etudiant{\n        std::string Sigle;\n        Etudiant* suivant;\n      };\n      struct Professeur {\n        std::string Nom;\n        int Ancien;\n        Cours* ListeDeCours;\n        Etudiant* ListeDEtudiant;\n        Professeur* Suivant;\n      };\n      Professeur CreationListeProfesseur();\n      Professeur *getNextProf(Professeur *prof);\n      Professeur* tete;\n    private:\n\n\n  };\n#endif\n</code></pre>\n\n<p>Edit :\nUsing vectors, i have the same output as previously:</p>\n\n<pre><code>2 - 0x7ffe26c10520\n1\n1\n6320480 - 0x7ffe26c10520\n</code></pre>\n\n<p>They point to the same adress, but have different values\nTo use vectors i used this :\nvector ContainerProf; as a global variable \nAnd then in CreationListeEtudiant :\nInsted of returning prof, i return this :</p>\n\n<pre><code>ContainerProf.push_back(prof);\n    return ContainerProf.back();\n</code></pre>\n\n<p>Did i do something wrong?</p>\n"}, {"tags": ["c++", "codeblocks"], "comments": [{"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 0, "creation_date": 1539820451, "post_id": 52865004, "comment_id": 92644392, "body": "<code>&quot;&quot;</code> tells the preprocessor to look for the file within the project&#39;s folder, <code>&lt;&gt;</code> tells it to look for it in the compiler&#39;s includes folder. There is no <code>&lt;&quot;&gt;</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1539836319, "post_id": 52865004, "comment_id": 92647504, "body": "&quot;<i>I would have to go every header file that has the include in angle brackets and change them to quotation marks for them to work</i>&quot; - no you don&#39;t. You just to make sure that the FLTK library is in your compiler&#39;s includes search path."}], "answers": [{"tags": [], "owner": {"reputation": 373, "user_id": 5579840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3ea32a6e9606728457334a4d80002?s=128&d=identicon&r=PG&f=1", "display_name": "Sahil Dhoked", "link": "https://stackoverflow.com/users/5579840/sahil-dhoked"}, "is_accepted": false, "score": 0, "last_activity_date": 1539819617, "creation_date": 1539819617, "answer_id": 52865028, "question_id": 52865004, "link": "https://stackoverflow.com/questions/52865004/how-to-include-header-files-without-quotation-marks/52865028#52865028", "title": "How to include header files without quotation marks?", "body": "<p>You can add the folder which contains all your headers to your include path while compiling.\n<a href=\"https://stackoverflow.com/questions/558803/how-to-add-a-default-include-path-for-gcc-in-linux\">How to add a default include path for GCC in Linux?</a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8729515, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cYgTlXVnD5k/AAAAAAAAAAI/AAAAAAAAAAA/x4JQWxoexGI/photo.jpg?sz=128", "display_name": "Stephen", "link": "https://stackoverflow.com/users/8729515/stephen"}, "is_accepted": false, "score": 1, "last_activity_date": 1539820766, "creation_date": 1539820766, "answer_id": 52865160, "question_id": 52865004, "link": "https://stackoverflow.com/questions/52865004/how-to-include-header-files-without-quotation-marks/52865160#52865160", "title": "How to include header files without quotation marks?", "body": "<p>Generally\uff0c the header file from</p>\n\n<pre><code>#include \"headerfile\"\n</code></pre>\n\n<p>will searched in the current source path. If the search fails, it is reprocessed as if</p>\n\n<pre><code>#include &lt;header file&gt;\n</code></pre>\n\n<p>does.</p>\n\n<p>Your FLTK library is using include like the following?</p>\n\n<pre><code>#include &lt;FL/Blah.h&gt;\n</code></pre>\n\n<p>The FL's parent path should be in the predefined INCLUDE path. You may edit you Makefile or project settings.</p>\n"}, {"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": false, "score": 0, "last_activity_date": 1539822230, "last_edit_date": 1592644375, "creation_date": 1539821756, "answer_id": 52865254, "question_id": 52865004, "link": "https://stackoverflow.com/questions/52865004/how-to-include-header-files-without-quotation-marks/52865254#52865254", "title": "How to include header files without quotation marks?", "body": "<h2>Some background</h2>\n<p>Ok there are two set of include search path.</p>\n<p>The user include path:<br />\nThis is usually only the current directory (also known as &quot;.&quot;).<br />\nNote: It may be others but for simplicity lets just use &quot;.&quot; in the examples below.</p>\n<p>Then there is the system include path:<br />\nThis is usually a few places in your machines (could be <strong>/usr/include</strong> and <strong>/usr/local/include</strong>).<br />\nNote: It may be others but for simplicity lets just assume these in the examples below.</p>\n<h2>How it usually works.</h2>\n<p>There are caveats and not all compilers work exactly the same. But the following are a good rules of thumb.</p>\n<p>When you include a file using quotes <code>&quot;&quot;</code>.</p>\n<pre><code>#include &quot;yourHeader.h&quot;\n</code></pre>\n<p>It will search for this file in all the directories specified in the &quot;user include path&quot;. If it fails to find them there it will then look in all the directories specified by the &quot;system include path&quot;. So your compiler will search for the following files:</p>\n<pre><code>./yourHeader.h\n/usr/include/yourHeader.h\n/usr/local/include/yourHeader.h\n</code></pre>\n<p>It will use the first one it finds.</p>\n<p>When you use the <code>&lt;&gt;</code> in the include:</p>\n<pre><code>#include &lt;FL/Blah.h&gt;\n</code></pre>\n<p>It will search for the files in the &quot;system include path&quot; first. Then depending on your compiler may optionally search the &quot;user include path&quot; (but lets assume not for now).</p>\n<p>So in this case it will search for the files:</p>\n<pre><code>/usr/include/FL/Blah.h\n/usr/local/include/FL/Blah.h\n</code></pre>\n<p>It will use the first one it finds.</p>\n<h2>Modifying the Default</h2>\n<p>So these are the default paths that will be searched for a file. But your compiler will allow you to add extra paths to both of these search paths (usually). It depends on your compiler how to add search paths.</p>\n<p>For gcc (and probably clang) it uses <code>-I</code> and <code>-isystem</code> (and probably more)</p>\n<h2>Expectations.</h2>\n<p>When you see <code>&lt;&gt;</code> in the include header it usually means this is an already installed library that you are looking for. So your code assumes that the <code>FLTK</code> library has already been installed on your machine.</p>\n<p>When you see <code>&quot;&quot;</code> in the include header you should assume that it is a local file that belongs to the project.</p>\n"}], "owner": {"reputation": 1, "user_id": 10521216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9304520428d81d9a77c84e82f3b26c2?s=128&d=identicon&r=PG&f=1", "display_name": "Amy K", "link": "https://stackoverflow.com/users/10521216/amy-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1539822230, "creation_date": 1539819473, "last_edit_date": 1539820717, "question_id": 52865004, "link": "https://stackoverflow.com/questions/52865004/how-to-include-header-files-without-quotation-marks", "title": "How to include header files without quotation marks?", "body": "<p>I'm kind of new to programming so please go easy on me. Anyways, I know about including header files that you, yourself, have defined. For example:</p>\n\n<pre><code>#include \"yourHeader.h\"\n</code></pre>\n\n<p>I'm trying to use FLTK for its GUI options, however, many of its header files include other header files using an include like this:</p>\n\n<pre><code>#include &lt;FL/Blah.h&gt;\n</code></pre>\n\n<p>instead of this:</p>\n\n<pre><code>#include \"FL/Blah.h\"\n</code></pre>\n\n<p>I would have to go every header file that has the include in angle brackets and change them to quotation marks for them to work. I am currently working in CodeBlocks right now, if that matters. Is there any way to include the header files using angle brackets instead of quotation marks, or am I stuck with having to go into the header files themselves and manually swapping them all out?</p>\n"}, {"tags": ["c++", "clion"], "comments": [{"owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "edited": false, "score": 0, "creation_date": 1539818511, "post_id": 52864822, "comment_id": 92644012, "body": "You&#39;re deriving from a base class that doesn&#39;t have a default constructor.  So call the constructor that it has."}], "answers": [{"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1539819811, "post_id": 52864891, "comment_id": 92644275, "body": "It looks like <code>GradeType</code> is supposed to be a template parameter of <code>Assignment</code>. So there is no such thing as <code>GradeType</code> in the context of class <code>Exam</code>. I can&#39;t say why in the diagram the overriding functions of derived classes substitute actual types for the function arguments but not the function return types...."}, {"owner": {"reputation": 45, "user_id": 9301921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd22608c2060ac4b45e3637fec7cfbdc?s=128&d=identicon&r=PG&f=1", "display_name": "Hellllp", "link": "https://stackoverflow.com/users/9301921/hellllp"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1539823230, "post_id": 52864891, "comment_id": 92644929, "body": "@aschepler you are correct, GradeType is a template parameter of Assignment, so what would be a way to resolve this? For instance, should it just return a double as indicated in the UML Diagram?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 45, "user_id": 9301921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd22608c2060ac4b45e3637fec7cfbdc?s=128&d=identicon&r=PG&f=1", "display_name": "Hellllp", "link": "https://stackoverflow.com/users/9301921/hellllp"}, "edited": false, "score": 0, "creation_date": 1539823406, "post_id": 52864891, "comment_id": 92644961, "body": "@Cody Can you update your question so we can see the code you&#39;re working with?"}, {"owner": {"reputation": 45, "user_id": 9301921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd22608c2060ac4b45e3637fec7cfbdc?s=128&d=identicon&r=PG&f=1", "display_name": "Hellllp", "link": "https://stackoverflow.com/users/9301921/hellllp"}, "edited": false, "score": 0, "creation_date": 1539823566, "post_id": 52864891, "comment_id": 92645002, "body": "@0x499602D2 yes, one moment and I will include screenshots of the code I am working with."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 45, "user_id": 9301921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd22608c2060ac4b45e3637fec7cfbdc?s=128&d=identicon&r=PG&f=1", "display_name": "Hellllp", "link": "https://stackoverflow.com/users/9301921/hellllp"}, "edited": false, "score": 0, "creation_date": 1539824743, "post_id": 52864891, "comment_id": 92645218, "body": "@Cody You probably just need to put a <code>using grade_type = GradeType</code> inside <code>Assignment</code>. And then do <code>auto csc232::pd::Exam::getGrade() const -&gt; grade_type {...}</code>."}, {"owner": {"reputation": 45, "user_id": 9301921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd22608c2060ac4b45e3637fec7cfbdc?s=128&d=identicon&r=PG&f=1", "display_name": "Hellllp", "link": "https://stackoverflow.com/users/9301921/hellllp"}, "edited": false, "score": 0, "creation_date": 1539824779, "post_id": 52864891, "comment_id": 92645223, "body": "@0x499602D2 This is my most up to date code, if you could see if it lines up with the UML Diagram and if it does not, tell me where I need to make changes, it would be greatly appreciated (:"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 45, "user_id": 9301921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd22608c2060ac4b45e3637fec7cfbdc?s=128&d=identicon&r=PG&f=1", "display_name": "Hellllp", "link": "https://stackoverflow.com/users/9301921/hellllp"}, "edited": false, "score": 0, "creation_date": 1539825110, "post_id": 52864891, "comment_id": 92645289, "body": "@Cody BTW don&#39;t post screen shots of code, just copy paste the code itself."}, {"owner": {"reputation": 45, "user_id": 9301921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd22608c2060ac4b45e3637fec7cfbdc?s=128&d=identicon&r=PG&f=1", "display_name": "Hellllp", "link": "https://stackoverflow.com/users/9301921/hellllp"}, "edited": false, "score": 0, "creation_date": 1539825191, "post_id": 52864891, "comment_id": 92645302, "body": "@0x499602D2 my apologies, still slightly learning how to navigate and use StackOverflow, thank you for telling me that though."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 45, "user_id": 9301921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd22608c2060ac4b45e3637fec7cfbdc?s=128&d=identicon&r=PG&f=1", "display_name": "Hellllp", "link": "https://stackoverflow.com/users/9301921/hellllp"}, "edited": false, "score": 0, "creation_date": 1539825280, "post_id": 52864891, "comment_id": 92645316, "body": "@Cody No problem. Did my previous comment help at all (about putting a type alias in <code>Assignment</code> and changing the signature of the function definition slightly)?"}, {"owner": {"reputation": 45, "user_id": 9301921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd22608c2060ac4b45e3637fec7cfbdc?s=128&d=identicon&r=PG&f=1", "display_name": "Hellllp", "link": "https://stackoverflow.com/users/9301921/hellllp"}, "edited": false, "score": 0, "creation_date": 1539825480, "post_id": 52864891, "comment_id": 92645359, "body": "@0x499602D2 yes! Thank you, I am now just working on resolving the issue of the exam constructor as I am still having Issue #1 as stated above. Any clues?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 45, "user_id": 9301921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd22608c2060ac4b45e3637fec7cfbdc?s=128&d=identicon&r=PG&f=1", "display_name": "Hellllp", "link": "https://stackoverflow.com/users/9301921/hellllp"}, "edited": false, "score": 0, "creation_date": 1539825677, "post_id": 52864891, "comment_id": 92645400, "body": "@Cody Does the code in my answer not work for you? It looks like it should. Are you still getting the same error after using my answer?"}], "tags": [], "owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "is_accepted": true, "score": 0, "last_activity_date": 1539818546, "creation_date": 1539818546, "answer_id": 52864891, "question_id": 52864822, "link": "https://stackoverflow.com/questions/52864822/how-to-implement-subclass-constructor-of-abstract-base-class/52864891#52864891", "title": "How to implement subclass constructor of abstract base class?", "body": "<p>The first error is quite clear, just initialize the base class by calling the constructor.</p>\n\n<pre><code>csc232::pd::Exam::Exam(double points) : Assignment( points ) {\n}\n</code></pre>\n\n<p>The second error is a result of not fully qualifying the return type <code>Grade</code>. <code>Grade</code> is a member of <code>csc232::pd</code> so you need to write:</p>\n\n<pre><code>csc232::pd::GradeType csc232::pd::Exam::getGrade() const {\n  return nullptr;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9301921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd22608c2060ac4b45e3637fec7cfbdc?s=128&d=identicon&r=PG&f=1", "display_name": "Hellllp", "link": "https://stackoverflow.com/users/9301921/hellllp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 1, "accepted_answer_id": 52864891, "answer_count": 1, "score": 0, "last_activity_date": 1539824985, "creation_date": 1539817841, "last_edit_date": 1539824985, "question_id": 52864822, "link": "https://stackoverflow.com/questions/52864822/how-to-implement-subclass-constructor-of-abstract-base-class", "title": "How to implement subclass constructor of abstract base class?", "body": "<p>So, I have a UML Diagram to follow, and have implemented most of the Exam class, however I run into two issues,</p>\n\n<p><a href=\"https://i.stack.imgur.com/AFKW3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AFKW3.png\" alt=\"UML Digram\"></a></p>\n\n<p>Issue # 1:</p>\n\n<pre><code>csc232::pd::Exam::Exam(double points) {\n\n}\n</code></pre>\n\n<p>which then gives me the error, </p>\n\n<p>\"Constructor for 'csc232::pd::Exam' must explicitly initialize the base class 'csc232::pd::Assignment' which does not have a default constructor\"</p>\n\n<p>Issue # 2:</p>\n\n<pre><code>GradeType csc232::pd::Exam::getGrade() const {\nreturn nullptr;\n}\n</code></pre>\n\n<p>which gives me the error that GradeType is undefined.</p>\n\n<p>If someone would be so kind as to point me in the right direction to fix those errors, I would greatly apperciate it. I am currently only working on implementing the base Assignment class, and Exam subclass. If you need more information, just let me know. (:</p>\n"}, {"tags": ["c++", "visual-studio", "opengl"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1539817633, "post_id": 52864732, "comment_id": 92643819, "body": "Maybe the file is not read (because its in the wrong folder) and you have no error handling so you try to seek anyways. Remember if you run/ debug your application in VS the default folder is the one containing the project file. If you click on the executable in the file explorer of windows the default folder moves to the location of the executable."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 4, "creation_date": 1539817701, "post_id": 52864732, "comment_id": 92643834, "body": "What is <code>data</code>?  What is <code>file</code>?  Have you properly constructed <code>file</code> and used it to successfully open a file?  <a href=\"https://stackoverflow.com/posts/52864732/edit\">Edit</a> your question to add the code showing these details.  As it is it is not a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 1, "creation_date": 1539819190, "post_id": 52864732, "comment_id": 92644151, "body": "stream.valid assert failed . Think yourself"}, {"owner": {"reputation": 1, "user_id": 9579988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74972f8f5eaaab1200433b65553dae0d?s=128&d=identicon&r=PG&f=1", "display_name": "StabberKnight906", "link": "https://stackoverflow.com/users/9579988/stabberknight906"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1539852516, "post_id": 52864732, "comment_id": 92654140, "body": "Thank you @drescherjm I found out that i have to relocate my exe file to folder which contains project files to work."}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1539868669, "post_id": 52870370, "comment_id": 92663295, "body": "I think you should fix your code to handle the different path also add some error handling to make your code robust."}, {"owner": {"reputation": 1, "user_id": 9579988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74972f8f5eaaab1200433b65553dae0d?s=128&d=identicon&r=PG&f=1", "display_name": "StabberKnight906", "link": "https://stackoverflow.com/users/9579988/stabberknight906"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1539885682, "post_id": 52870370, "comment_id": 92673332, "body": "Well i&#39;m gonna consider it later,It&#39;s just that i needed to show my prototype off for progress check."}], "tags": [], "owner": {"reputation": 1, "user_id": 9579988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74972f8f5eaaab1200433b65553dae0d?s=128&d=identicon&r=PG&f=1", "display_name": "StabberKnight906", "link": "https://stackoverflow.com/users/9579988/stabberknight906"}, "is_accepted": false, "score": 0, "last_activity_date": 1539852792, "creation_date": 1539852792, "answer_id": 52870370, "question_id": 52864732, "link": "https://stackoverflow.com/questions/52864732/debug-assertion-failed-when-launching-from-exe-file-visual-studio/52870370#52870370", "title": "Debug assertion failed when launching from exe file (visual studio)", "body": "<p>The error was mainly because my shader file read program haven't detected Shader folder.\nIts been fixed by just relocating .exe file to project folder.</p>\n\n<p>Big thanks to @drescherjm. </p>\n"}], "owner": {"reputation": 1, "user_id": 9579988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74972f8f5eaaab1200433b65553dae0d?s=128&d=identicon&r=PG&f=1", "display_name": "StabberKnight906", "link": "https://stackoverflow.com/users/9579988/stabberknight906"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 737, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539852792, "creation_date": 1539817157, "last_edit_date": 1539817290, "question_id": 52864732, "link": "https://stackoverflow.com/questions/52864732/debug-assertion-failed-when-launching-from-exe-file-visual-studio", "title": "Debug assertion failed when launching from exe file (visual studio)", "body": "<p>I got stumped, tried everything from optimization setting to setting to a different runtime library.</p>\n\n<p>I'm getting this error only when i run my project from the <code>.exe</code>.\nMaybe somebody had the same issue and knows how to fix.</p>\n\n<p>MDd mode output:</p>\n\n<pre><code>Debug Assertion Failed!\nProgram \\x64\\Debug\\FRTI.exe\nFile:minkernel\\crts\\ucrt\\src\\appcrt\\stdio\\fseek.cpp\nLine: 180\n\nExpression: stream.valid\n</code></pre>\n\n<p>And the possible suspect of this error.</p>\n\n<pre><code>memset(data, 0, length + 1);\nfseek(file, 0, SEEK_SET);\nfread(data, 1, length, file);\nfclose(file);\n</code></pre>\n\n<p>Judging by the error.</p>\n"}, {"tags": ["c++", "containers", "c++17"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 3, "creation_date": 1539817973, "post_id": 52864731, "comment_id": 92643903, "body": "<a href=\"https://en.cppreference.com/w/cpp/container/multimap\" rel=\"nofollow noreferrer\"><code>multimap</code></a> or <a href=\"https://en.cppreference.com/w/cpp/container/unordered_multimap\" rel=\"nofollow noreferrer\"><code>unordered_multimap</code></a>"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1539818165, "post_id": 52864731, "comment_id": 92643956, "body": "Use your garden-variety <code>std::multimap</code>, with the values being <code>std::shared_ptr</code>s to the object for that key. Each of a particular object&#39;s keys have a <code>std::shared_ptr</code> to the same object. Mission accomplished."}, {"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "edited": false, "score": 0, "creation_date": 1539818662, "post_id": 52864731, "comment_id": 92644029, "body": "Aha, that is a neat solution. Thanks to both of you! Who wants to add this as a proper answer?"}], "answers": [{"comments": [{"owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "edited": false, "score": 0, "creation_date": 1539862854, "post_id": 52866070, "comment_id": 92659793, "body": "Great answer with various caveats and options covered. Thanks!"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1539829492, "creation_date": 1539829492, "answer_id": 52866070, "question_id": 52864731, "link": "https://stackoverflow.com/questions/52864731/container-where-each-item-can-have-multiple-non-unique-keys-c17/52866070#52866070", "title": "Container where each item can have multiple non-unique keys (c++17)", "body": "<p>Simply transcribing your requirements into a container: you want to go from an <code>Enum</code> to a bunch of <code>MyClass</code> objects:</p>\n\n<pre><code>map&lt;Enum, vector&lt;MyClass&gt;&gt;\n</code></pre>\n\n<p>Though that's not quite right, since you really want to potentially share <code>MyClass</code> objects amongst multiple keys. So:</p>\n\n<pre><code>map&lt;Enum, vector&lt;shared_ptr&lt;MyClass&gt;&gt;&gt;\n</code></pre>\n\n<p>This'll get the job done, but you might have questions about performance. If your <code>Enum</code> values are all <code>[0, n-1)</code>, and performance becomes an issue, it might be worth simply wrapping a <code>vector</code>:</p>\n\n<pre><code>class CustomMap {\n    std::vector&lt;shared_ptr&lt;MyClass&gt;&gt; elems;\n\npublic:\n    CustomMap() {\n        elems.resize(n);\n    }\n\n    std::vector&lt;shared_ptr&lt;MyClass&gt;&gt;&amp; operator[](Enum e) {\n        return elems[static_cast&lt;std::underlying_type_t&lt;Enum&gt;&gt;(e)];\n    }\n\n    // etc.\n};\n</code></pre>\n\n<p>And then of course, <code>shared_ptr</code> really isn't right for the job either - you probably want to have a <code>vector&lt;MyClass*&gt;</code> such that the <code>CustomMap</code> separately manages them, etc. There's a lot more rabbit holes you can go down, depending on where you want to go. </p>\n"}], "owner": {"reputation": 862, "user_id": 5463380, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6e692eb20a4794bf790921563aa3e956?s=128&d=identicon&r=PG&f=1", "display_name": "Iron Attorney", "link": "https://stackoverflow.com/users/5463380/iron-attorney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539829492, "creation_date": 1539817149, "last_edit_date": 1539817928, "question_id": 52864731, "link": "https://stackoverflow.com/questions/52864731/container-where-each-item-can-have-multiple-non-unique-keys-c17", "title": "Container where each item can have multiple non-unique keys (c++17)", "body": "<p>Image I have this enum class:</p>\n\n<pre><code>enum class MyEnum {\n    enum1,\n    enum2,\n    enum3\n}\n</code></pre>\n\n<p>And I have a struct/class called MyClass...</p>\n\n<p>Each MyClass object is associated with one or more MyEnum value.</p>\n\n<p>I am wanting a container that will hold MyClass objects, and be able to return a list of all MyClass objects that are associated with a specific MyEnum value when requested. Something a bit like:</p>\n\n<pre><code>class Container&lt;std::vector&lt;MyEnum&gt; key, MyClass item&gt; {\npublic:\n\n    std::vector&lt;MyClass&gt; getMyClassItemListByMyEnumKey(MyEnum enum) {\n        return /*code to gather all MyClass items that have the searched MyEnum enum*/;\n    }\n};\n</code></pre>\n\n<p>I can think of a few ways to do this with questionable efficiency and scalability... But does anyone know of a pre-existing solution to this problem? This problem will absolutely not grow outside of what I have posted, there will be no future expansions that I should consider.</p>\n\n<p>I am using c++17 and have no problem with 3rd party libraries as long as they've not got restrictive licenses.</p>\n"}, {"tags": ["c++", "error-handling", "outofrangeexception"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1539817102, "post_id": 52864697, "comment_id": 92643692, "body": "There is no range error. You are not using the vector in the loop. And certainly not v.at()"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 2, "creation_date": 1539817145, "post_id": 52864697, "comment_id": 92643706, "body": "There&#39;s nothing in the code that would cause an exception. The author presumably left that out by mistake."}, {"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 2, "creation_date": 1539817149, "post_id": 52864697, "comment_id": 92643709, "body": "Q: How can you get a range error with the vector ... if you&#39;re not actually <i>DOING</i> anything with the vector?  Like writing to it, or reading from it?"}, {"owner": {"reputation": 31, "user_id": 10521120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dTe71ZDh5fQ/AAAAAAAAAAI/AAAAAAAAAuo/DRgT5h2EruM/photo.jpg?sz=128", "display_name": "Steve C", "link": "https://stackoverflow.com/users/10521120/steve-c"}, "edited": false, "score": 0, "creation_date": 1539817221, "post_id": 52864697, "comment_id": 92643726, "body": "OK. I understand. So because nothing in the loop itself is trying actually <i>read</i> that index, it isn&#39;t a problem, even though it&#39;s running for that many times. Thank you."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1539817256, "post_id": 52864697, "comment_id": 92643732, "body": "I suspect the code has been updated for this errata."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 1, "creation_date": 1539817565, "post_id": 52864697, "comment_id": 92643804, "body": "Accessing a vector, which isn&#39;t even used!, using [] outside its range just produces UB,  an exception is not required. To get range checking you need to use <code>at()</code> instead."}, {"owner": {"reputation": 31, "user_id": 10521120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dTe71ZDh5fQ/AAAAAAAAAAI/AAAAAAAAAuo/DRgT5h2EruM/photo.jpg?sz=128", "display_name": "Steve C", "link": "https://stackoverflow.com/users/10521120/steve-c"}, "edited": false, "score": 0, "creation_date": 1539817568, "post_id": 52864697, "comment_id": 92643805, "body": "Yeah, I seems as if the intention was to highlight that error, but the code doesn&#39;t actually produce the error. It has taught me, in any case, that it isn&#39;t a problem to use such a condition in the for statement. Though it seems like it&#39;s probably a bad habit regardless."}, {"owner": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "edited": false, "score": 0, "creation_date": 1539819810, "post_id": 52864697, "comment_id": 92644274, "body": "It\u2019s ironic that Stroustrup was trying to write an error, but a typo made it run. There are lots of other cases in the text which are the exact opposite. The book has lots of typos/mistakes (at least my copy does), so you have to take it with a grain of salt. It\u2019s a huge source of information, but you do have to see passed the mistakes."}, {"owner": {"reputation": 31, "user_id": 10521120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dTe71ZDh5fQ/AAAAAAAAAAI/AAAAAAAAAuo/DRgT5h2EruM/photo.jpg?sz=128", "display_name": "Steve C", "link": "https://stackoverflow.com/users/10521120/steve-c"}, "edited": false, "score": 0, "creation_date": 1539820870, "post_id": 52864697, "comment_id": 92644476, "body": "I will bear that in mind, Blair. Thank you."}], "owner": {"reputation": 31, "user_id": 10521120, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dTe71ZDh5fQ/AAAAAAAAAAI/AAAAAAAAAuo/DRgT5h2EruM/photo.jpg?sz=128", "display_name": "Steve C", "link": "https://stackoverflow.com/users/10521120/steve-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 414, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1539817147, "creation_date": 1539816914, "last_edit_date": 1539817147, "question_id": 52864697, "link": "https://stackoverflow.com/questions/52864697/programming-principles-and-practice-using-c-2nd-edition-chapter-5-drill-pr", "title": "Programming: Principles and Practice using C++ 2nd edition, Chapter 5 Drill - Program not throwing an exception when expected", "body": "<p>In Stroustrup's book, the chapter 5 drill has a small program where you insert selections that have purposeful errors in order to better understand error handling. One of the inserts is as follows:</p>\n\n<pre><code>vector&lt;char&gt; v(5); for (int i=0; i&lt;=v.size(); ++i) ; cout &lt;&lt; \"Success!\\n\";\n</code></pre>\n\n<p>Placed into the larger code, it looks like this:</p>\n\n<pre><code>#include \"std_lib_facilities.h\"\n\nint main()\n  try {\n    vector&lt;char&gt; v(5);\n    for (int i=0; i&lt;=v.size(); ++i) ;\n    cout &lt;&lt; \"Success!\\n\";\n    return 0;\n  }\n  catch (exception&amp; e){\n    cerr&lt;&lt;\"error: \"&lt;&lt;e.what()&lt;&lt;'\\n';\n    return 1;\n  }\n  catch (...){\n    cerr&lt;&lt;\"Oops: unknown exception!\\n\";\n    return 2;\n  }\n</code></pre>\n\n<p>I can fix the code just fine. To fix it, I remove the improper semicolon in the middle of the for statement, and I <em>ostensibly</em> change the &lt;= to a &lt; operator in the for statement so it doesn't result in a range error. This compiles and prints 5 \"Success!\" to the terminal. </p>\n\n<p>The problem is that if I modify the program to retain the range error in order to see how that error would be handled, I still don't get an exception. If, for example, I simply remove the semicolon and leave the &lt;= as is, it prints \"Success!\" 6 times. If I even make it do so for i&lt;=v.size()+10, it still prints out \"Success!\" many times. </p>\n\n<p>My understanding from Stroustrup is that this should <em>not</em> be how this is handled. It should throw an exception because &lt;= makes it read 6 indexes for vector v and the 6th index should be out of range. </p>\n\n<p>Can anyone help me understand why this program is <em>not</em> throwing an exception for the range error and <em>not</em> having any sort of problem?</p>\n\n<p>I am using g++ as my compiler on a fresh install of Ubuntu 18.04 that I installed for the express purpose of learning to code. No special compiler arguments are used. Just \"g++ -o NAME CODE.cpp\". </p>\n"}, {"tags": ["c++", "pthreads"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1539816788, "post_id": 52864631, "comment_id": 92643593, "body": "If you copy and paste those three code snippets into a file, and try to compile it, it does not compile.  If I fill in the missing pieces, it works on my machine... I may have omitted the bug under scrutiny.  A <a href=\"https://stackoverflow.com/help/mcve\">MVCE</a> would be very helpful."}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 1, "last_activity_date": 1539817528, "creation_date": 1539817528, "answer_id": 52864789, "question_id": 52864631, "link": "https://stackoverflow.com/questions/52864631/passing-variable-as-reference-in-struct-constructor-in-c/52864789#52864789", "title": "Passing variable as reference in struct constructor in c++", "body": "<p>The problem is that your <code>args</code> struct has it's own <code>Buffer</code> object.  When you construct it, a copy of the buffer that is passed by reference is made.  When you add an element, it is added to the buffer that belongs to <code>argument</code>, and not <code>request_buffer</code>.</p>\n\n<p>You fix this by declaring <code>buffer</code> to be a reference within the class:</p>\n\n<pre><code>struct args {\n    Buffer &amp;buffer;\n    args(Buffer &amp;rb): buffer(rb) { }\n};\n</code></pre>\n\n<p>This will then store a reference to the buffer passed in to the constructor, so that when you add an element it will be added to that buffer (<code>request_buffer</code> in your example).</p>\n"}], "owner": {"reputation": 11, "user_id": 8556503, "user_type": "registered", "profile_image": "https://graph.facebook.com/968863766579113/picture?type=large", "display_name": "Papes Traore", "link": "https://stackoverflow.com/users/8556503/papes-traore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 455, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539832180, "creation_date": 1539816414, "last_edit_date": 1539832180, "question_id": 52864631, "link": "https://stackoverflow.com/questions/52864631/passing-variable-as-reference-in-struct-constructor-in-c", "title": "Passing variable as reference in struct constructor in c++", "body": "<p>I have the following struct and I want to pass in the Buffer object as a reference so that I can push stuff inside a queue (Buffer class has a queue of strings) in when creating different threads. My problem is that the queue doesn't get updated by reference. Like the size still remains zero.</p>\n\n<pre><code>struct args{\n\nBuffer buffer;\n\nargs( Buffer&amp; rb){\n    buffer = rb;\n\n}\n};\n</code></pre>\n\n<p>Here is my code for executing a function that adds element to the buffer:</p>\n\n<pre><code>void* addElement(void* arguments){\n  args* myArgs = (args*) arguments;\n  myArgs-&gt;buffer.push(\"John Smith);\n}\n</code></pre>\n\n<p>Here is the code for creating a thread and adding strings to the buffer:</p>\n\n<pre><code>Buffer request_buffer;\npthread_t request_thread;\nthread_args* argument = new args(request_buffer);\npthread_create(&amp;request_thread,NULL,addElement,argument);\n</code></pre>\n"}, {"tags": ["c++", "overloading", "eigen", "operator-keyword", "istream"], "comments": [{"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1539822522, "post_id": 52864368, "comment_id": 92644784, "body": "Can you use an initializer list? (ie can we put all the numbers inside <code>{}</code> braces)  <code>object &lt;&lt; { 1,2,3,4,5,6,7,8};</code>"}, {"owner": {"reputation": 307, "user_id": 4079444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb429cae7b74df49e43c8e0909311896?s=128&d=identicon&r=PG&f=1", "display_name": "Hewiiitt", "link": "https://stackoverflow.com/users/4079444/hewiiitt"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1539828473, "post_id": 52864368, "comment_id": 92645882, "body": "@MartinYork As nice as this would have been it appears that it is not possible as explained here. <a href=\"https://stackoverflow.com/questions/11420448/initializer-lists-and-rhs-of-operators\" title=\"initializer lists and rhs of operators\">stackoverflow.com/questions/11420448/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1539815407, "last_edit_date": 1539815407, "creation_date": 1539815067, "answer_id": 52864449, "question_id": 52864368, "link": "https://stackoverflow.com/questions/52864368/how-to-overload-operator-to-take-a-comma-separated-variable-argument-list/52864449#52864449", "title": "How to overload &gt;&gt; operator to take a comma separated variable argument list", "body": "<p>You'll have to overload the insertion operator (<code>&lt;&lt;</code>) and the comma operator (<code>,</code>) such that </p>\n\n<pre><code>mat &lt;&lt; 1.0, 2.0;\n</code></pre>\n\n<p>is translated as:</p>\n\n<pre><code>mat.operator&lt;&lt;(1.0).operator,(2.0);\n</code></pre>\n\n<p>or</p>\n\n<pre><code>operator,(operator&lt;&lt;(mat, 1.0), 2.0);\n</code></pre>\n\n<p>Here's a demonstrative program that illustrates the idea without doing anything useful.</p>\n\n<pre><code>struct Foo\n{\n};\n\nFoo&amp; operator&lt;&lt;(Foo&amp; f, double)\n{\n  std::cout &lt;&lt; \"In operator&lt;&lt;(Foo&amp; f, double)\\n\";\n   return f;\n}\n\nFoo&amp; operator,(Foo&amp; f, double)\n{\n   std::cout &lt;&lt; \"In operator,(Foo&amp; f, double)\\n\";\n   return f;\n}\n\nint main()\n{\n   Foo f;\n   f &lt;&lt; 10, 20, 30;\n}\n</code></pre>\n\n<p>and its output</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>In operator&lt;&lt;(Foo&amp; f, double)\nIn operator,(Foo&amp; f, double)\nIn operator,(Foo&amp; f, double)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 307, "user_id": 4079444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb429cae7b74df49e43c8e0909311896?s=128&d=identicon&r=PG&f=1", "display_name": "Hewiiitt", "link": "https://stackoverflow.com/users/4079444/hewiiitt"}, "edited": false, "score": 0, "creation_date": 1539815958, "post_id": 52864470, "comment_id": 92643380, "body": "So I feel like this is along the right lines... However it looks like the guys over at eigen have found a work around that does the &quot;Some_Temporary&quot; in the background and I don&#39;t fully understand how."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1539822742, "post_id": 52864470, "comment_id": 92644827, "body": "The result inside the braces <code>()</code> is simply the result of the comma operator. The last element is returned as the result of the expression."}], "tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 1, "last_activity_date": 1539815225, "creation_date": 1539815225, "answer_id": 52864470, "question_id": 52864368, "link": "https://stackoverflow.com/questions/52864368/how-to-overload-operator-to-take-a-comma-separated-variable-argument-list/52864470#52864470", "title": "How to overload &gt;&gt; operator to take a comma separated variable argument list", "body": "<p>You would have to create a temporary from the first argument and surround the entire comma list in parenthesis:</p>\n\n<pre><code>myObj &gt;&gt; (some_temporary(3), 1, ...);\n</code></pre>\n\n<p>which would require that some_temporary be either a type or helper-function-returning-object that overloads the comma operator and your >> would need to be able to take that type. Otherwise the precedence of >> would \"win\" and therefore be evaluated before the comma expression is seen.</p>\n\n<p>An uglier alternative would be to have your >> return a type that overloads operator ,() but I believe the first is preferable (actually, I would say this entire scheme is un-preferable).</p>\n"}], "owner": {"reputation": 307, "user_id": 4079444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb429cae7b74df49e43c8e0909311896?s=128&d=identicon&r=PG&f=1", "display_name": "Hewiiitt", "link": "https://stackoverflow.com/users/4079444/hewiiitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 52864449, "answer_count": 2, "score": 1, "last_activity_date": 1539815407, "creation_date": 1539814483, "question_id": 52864368, "link": "https://stackoverflow.com/questions/52864368/how-to-overload-operator-to-take-a-comma-separated-variable-argument-list", "title": "How to overload &gt;&gt; operator to take a comma separated variable argument list", "body": "<p>--Quick Before</p>\n\n<p>So before anyone says this question has been answered on another post it hasn't... It was a homework question in the other post and the original question was never answered only told they were wrong.</p>\n\n<p>--Question</p>\n\n<p>I am trying to overload the >> operator to be able to pass in n-number of variables seperated by commas into an object like so...</p>\n\n<pre><code>Mat M = (Mat_&lt;double&gt;(3,3) &lt;&lt; 1, 0, 0, 0, 1, 0, 0, 0, 1);\n</code></pre>\n\n<p>I am trying to reuse their usage of the comma seperated argument list but I can't seem to get it to work.</p>\n\n<p>When I overload the &lt;&lt; operator like so</p>\n\n<pre><code>void operator&lt;&lt; (const double&amp; is)\n{\n    std::cout &lt;&lt; \"hiya \" &lt;&lt; is &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>and attempt to use it like so</p>\n\n<pre><code>mat &lt;&lt; 1.0, 2.0;\n</code></pre>\n\n<p>only the first value is passed to the operator... The second value is never 'used' as I believe that <code>&lt;&lt;</code> has a higher presidence than <code>,</code></p>\n\n<p>So my question is what are they doing in libraries like eigen and openCV to be able to have this functionality. I have looked through their code to attempt to understand it but it appears to require a deeper understanding of how C++ works that I don't have and I was hoping someone here could shed some light on it.</p>\n\n<p>Thanks in advance for any advice.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1539814574, "post_id": 52864366, "comment_id": 92643005, "body": "OK.  Order of Operations problem, solved with judicious use of parentheses.  Did you have a question?"}, {"owner": {"reputation": 526, "user_id": 6655392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60df9610a4f28d142c0669d8b1dafe65?s=128&d=identicon&r=PG&f=1", "display_name": "flu", "link": "https://stackoverflow.com/users/6655392/flu"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1539814878, "post_id": 52864366, "comment_id": 92643084, "body": "Doh, I think I just realize now.  The condition being evaluated was the result of the cout &lt;&lt; operation!"}, {"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "edited": false, "score": 0, "creation_date": 1539815244, "post_id": 52864366, "comment_id": 92643184, "body": "If you take a look at a table of <a href=\"https://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">C++ operator precedence</a> you will see that the ternary operator is way down the list."}, {"owner": {"reputation": 526, "user_id": 6655392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60df9610a4f28d142c0669d8b1dafe65?s=128&d=identicon&r=PG&f=1", "display_name": "flu", "link": "https://stackoverflow.com/users/6655392/flu"}, "edited": false, "score": 0, "creation_date": 1539815545, "post_id": 52864366, "comment_id": 92643263, "body": "Ugh.  Thanks, embarrassed for asking."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539818813, "post_id": 52864366, "comment_id": 92644075, "body": "use std::boolalpha"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 1, "last_activity_date": 1539814907, "creation_date": 1539814907, "answer_id": 52864425, "question_id": 52864366, "link": "https://stackoverflow.com/questions/52864366/mistake-with-streaming-and-conditional-operators/52864425#52864425", "title": "Mistake with streaming and conditional operators", "body": "<blockquote>\n<pre><code>int i = 0;\nstd::cout &lt;&lt; false ? array[i++] : 2;\n</code></pre>\n</blockquote>\n\n<p>The result of <code>std::cout.operator&lt;&lt;(bool)</code> converts to boolean <code>true</code> if <code>std::cout</code> is not in error, fail ... state. <code>i++</code> gets evaluated and the whole statement yields <code>array[0]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1539818427, "last_edit_date": 1539818427, "creation_date": 1539817819, "answer_id": 52864819, "question_id": 52864366, "link": "https://stackoverflow.com/questions/52864366/mistake-with-streaming-and-conditional-operators/52864819#52864819", "title": "Mistake with streaming and conditional operators", "body": "<blockquote>\n  <p>I'm assuming the first number printed 0 is the numeric representation of false.</p>\n</blockquote>\n\n<p>Correct.</p>\n\n<blockquote>\n  <p>I'm not sure how the compiler interprets the rest.</p>\n</blockquote>\n\n<p><code>? :</code> is the ternary conditional operator. The first subexpression (<code>std::cout &lt;&lt; false</code>) is evaluated as a boolean, and if it is true, then the middle subexpression is evaluated (<code>array[i++]</code>), otherwise the last subexpression is evaluated (<code>2</code>).</p>\n\n<p><code>std::cout</code> is of type <code>std::ostream</code>. The stream insertion operator returns the stream itself. The stream has a conversion operator to boolean (since C++11; prior the conversion operator is to a void pointer, which has the same behaviour in this case). The behaviour of the conversion operator is:</p>\n\n<blockquote>\n  <p>Returns true if the stream has no errors and is ready for I/O operations.</p>\n</blockquote>\n\n<p>Since there was no errors with the output stream, the conversion returns true, and therefore the middle subexpression (<code>array[i++]</code>) is evaluated.</p>\n\n<blockquote>\n  <p>I'd like to understand why this does not generate a compiler warning or error. </p>\n</blockquote>\n\n<p>Because there is no error and (arguably) nothing to warn about. You may have intended to write something else, but what you did write is a valid program and the compiler cannot read your mind to find out that this is not what you had intended.</p>\n\n<p>Note that if you removed any side effects from the ternary results: <code>std::cout &lt;&lt; false ? array[i] : 2;</code>, then a compiler would likely warn you because the top level expression now has no side-effects.</p>\n\n<p>P.S. Clang does warn about your program if you've enabled warnings:</p>\n\n<pre><code>main.cpp:7:20: warning: operator '?:' has lower precedence than '&lt;&lt;'; '&lt;&lt;' will be evaluated first [-Wparentheses]\nstd::cout &lt;&lt; false ? array[i++] : 2;\n~~~~~~~~~~~~~~~~~~ ^\nmain.cpp:7:20: note: place parentheses around the '&lt;&lt;' expression to silence this warning\nstd::cout &lt;&lt; false ? array[i++] : 2;\n                   ^\nmain.cpp:7:20: note: place parentheses around the '?:' expression to evaluate it first\nstd::cout &lt;&lt; false ? array[i++] : 2;\n</code></pre>\n"}], "owner": {"reputation": 526, "user_id": 6655392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60df9610a4f28d142c0669d8b1dafe65?s=128&d=identicon&r=PG&f=1", "display_name": "flu", "link": "https://stackoverflow.com/users/6655392/flu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 52864819, "answer_count": 2, "score": -1, "last_activity_date": 1539818427, "creation_date": 1539814456, "last_edit_date": 1539815008, "question_id": 52864366, "link": "https://stackoverflow.com/questions/52864366/mistake-with-streaming-and-conditional-operators", "title": "Mistake with streaming and conditional operators", "body": "<p>I recently came across a bug in my code, which I think might be a common mistake.  I've generalized the mistake, and I'd like to understand why this does not generate a compiler warning or error.  Thanks in advance.</p>\n\n<p>The mistake is the following use of a conditional operator and streaming operator to cout:</p>\n\n<pre><code>int i=0;\nint array[] = {1};\nstd::cout &lt;&lt; false ? array[i++] : 2;\nstd::cout &lt;&lt; std::endl &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; std::endl;\n\n// output:\n// 0\n// i = 1\n</code></pre>\n\n<p>I'm assuming the first number printed <code>0</code> is the numeric representation of <code>false</code>.  I'm not sure how the compiler interprets the rest.  The <code>array[i++]</code> is getting evaluated because <code>i</code> has been incremented.  This must be valid syntax, but the interpretation is not at all expected.  Or is it?</p>\n\n<hr>\n\n<p>For those who made the same mistake but do not know the fix, the corrected code has parentheses around the conditional operator:</p>\n\n<pre><code>int i=0;\nint array[] = {1};\nstd::cout &lt;&lt; (false ? array[i++] : 2);\nstd::cout &lt;&lt; std::endl &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; std::endl;\n\n// output:\n// 2\n// i = 0\n</code></pre>\n\n<hr>\n\n<p>Also, calling the streaming operator after the conditional operation would have generated a compiler error:</p>\n\n<pre><code>int i=0;\nint array[] = {1};\nstd::cout &lt;&lt; false ? array[i++] : 2 &lt;&lt; std::endl;\nstd::cout &lt;&lt; std::endl &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; std::endl;\n\n// fails to compile\n// error: invalid operands of types 'int' and '&lt;unresolved overloaded function type&gt;' to binary 'operator&lt;&lt;'\n</code></pre>\n"}, {"tags": ["c++", "boost", "c++17", "c++20"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1539812946, "post_id": 52864046, "comment_id": 92642507, "body": "If you look at <a href=\"https://www.boost.org/doc/libs/release/libs/range/doc/html/range/reference/utilities/join.html\" rel=\"nofollow noreferrer\">the docs</a>, it says that the range must model <a href=\"https://www.boost.org/doc/libs/release/libs/range/doc/html/range/concepts/single_pass_range.html\" rel=\"nofollow noreferrer\"><i>SinglePassRange</i></a> (it helpfully gives a link). This concept description tells you everything your type needs. Also, see <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/range/doc/html/range/reference/extending.html\" rel=\"nofollow noreferrer\"><i>Extending the library</i></a>"}], "answers": [{"comments": [{"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "edited": false, "score": 0, "creation_date": 1540684108, "post_id": 52866200, "comment_id": 92956117, "body": "Thanks! I know this question sounded like I lazily hadn&#39;t read any docs. I had read that page, but didn&#39;t understand what from it was relevant to my issue. Providing a <code>range()</code> method was much simpler. Although, if I had chosen to go the route of making <code>Foo</code> range-able (if that&#39;s the right terminology). What would I have needed to return from <code>begin()</code> and <code>end()</code>? Why are <code>range().begin()</code> and <code>range().end()</code> iterators into different ranges? Would <code>auto r = range()</code> then <code>r.begin()</code> and <code>r.end()</code> have been more correct?"}, {"owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "edited": false, "score": 0, "creation_date": 1540684806, "post_id": 52866200, "comment_id": 92956192, "body": "Further (sorry to pile on), if this is the case, why aren&#39;t ranges like iterators (where calls to <code>begin()</code> and <code>end()</code> are always compatible)? And although <code>SinglePassRange</code> is only defined with respect to <code>SinglePassIterator</code> (where the docs for this give only opsem), the following is still unclear to me: is it just named poorly, or would I only be able to iterate over a type modeling this once? It seems like the <code>begin()</code> iterator being copy constructible would allow me to keep it around (and then always use a new begin from which to start iterating)."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1539830499, "creation_date": 1539830499, "answer_id": 52866200, "question_id": 52864046, "link": "https://stackoverflow.com/questions/52864046/creating-a-custom-range-class-that-wraps-boost-adaptors/52866200#52866200", "title": "Creating a custom range class that wraps boost adaptors", "body": "<p>The error is super helpful in this case. Your type has to model <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/range/doc/html/range/concepts/single_pass_range.html\" rel=\"nofollow noreferrer\"><code>SinglePassRange</code></a> and it does not. There's a <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/range/doc/html/range/reference/extending/method_1.html\" rel=\"nofollow noreferrer\">page</a> about how to do this, and while you provided <code>begin()</code> and <code>end()</code>, you did not provide type aliases for <code>iterator</code> and <code>const_iterator</code>. Hence, you don't model <code>SinglePassRange</code>.</p>\n\n<p>But it's actually quite good that your code failed, because it is also bad. You have <code>begin()</code> call <code>range().begin()</code> and <code>end()</code> call <code>range().end()</code>. Those are iterators into <em>different ranges</em>. So this is undefined behavior anyway - you're failing to meet the semantic concepts of a <code>SinglePassRange</code>.</p>\n\n<p>The easier solution is to just use <code>Foo()</code> directly. This already works:</p>\n\n<pre><code>auto good = boost::join(boost::irange(0, 10), Foo().range());\nauto also_good = Foo().range() | boost::adaptors::transformed([] (auto x) { return x + 1; });\n</code></pre>\n\n<p>And means you just have to write one function: <code>range()</code></p>\n"}], "owner": {"reputation": 14585, "user_id": 568785, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/88c6371f6a47841abde4c60dd8a2f964?s=128&d=identicon&r=PG", "display_name": "Bailey Parker", "link": "https://stackoverflow.com/users/568785/bailey-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 52866200, "answer_count": 1, "score": 0, "last_activity_date": 1539830499, "creation_date": 1539812511, "last_edit_date": 1539830247, "question_id": 52864046, "link": "https://stackoverflow.com/questions/52864046/creating-a-custom-range-class-that-wraps-boost-adaptors", "title": "Creating a custom range class that wraps boost adaptors", "body": "<p>I have a class that applies some boost transform adaptors to a range (for sake of example, in reality it's a lot more complex than this):</p>\n\n<pre><code>struct Foo {\n    auto range() const {\n        return boost::irange(0, 10)\n            | boost::adaptors::transformed([] (auto x) { return x * 2; });\n    }\n\n    auto begin() const { return range().begin(); }\n    auto end() const { return range().end(); }\n};\n</code></pre>\n\n<p>This alone allows us to iterate over a <code>Foo</code> using a range for:</p>\n\n<pre><code>for (auto x : Foo()) {\n    std::cout &lt;&lt; num &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>However, this doesn't compose well with other boost adaptors or range operations (like <code>boost::join</code>):</p>\n\n<pre><code>auto bad = boost::join(boost::irange(0, 10), Foo());\nauto also_bad = Foo() | boost::adaptors::transformed([] (auto x) { return x + 1; });\n</code></pre>\n\n<p>Both of the above provoke some nasty template errors. The former (<code>bad</code>):</p>\n\n<pre><code>In file included from test.cpp:4:\n/usr/local/include/boost/range/join.hpp:30:70: error: no type named 'type' in\n      'boost::range_iterator&lt;const Foo, void&gt;'\n            BOOST_DEDUCED_TYPENAME range_iterator&lt;SinglePassRange1&gt;::type,\n            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~\n/usr/local/include/boost/range/join.hpp:44:28: note: in instantiation of template class\n      'boost::range_detail::joined_type&lt;const Foo, const boost::integer_range&lt;int&gt; &gt;' requested\n      here\n    : public range_detail::joined_type&lt;SinglePassRange1, SinglePassRange2&gt;::type\n                           ^\ntest.cpp:34:16: note: in instantiation of template class 'boost::range::joined_range&lt;const Foo,\n      const boost::integer_range&lt;int&gt; &gt;' requested here\n    auto bad = boost::join(Foo(), range);\n               ^\n\n...\n</code></pre>\n\n<p>And the latter (<code>also_bad</code>):</p>\n\n<pre><code>In file included from test.cpp:1:\nIn file included from /usr/local/include/boost/range/any_range.hpp:17:\nIn file included from /usr/local/include/boost/range/detail/any_iterator.hpp:22:\nIn file included from /usr/local/include/boost/range/detail/any_iterator_wrapper.hpp:16:\nIn file included from /usr/local/include/boost/range/concepts.hpp:24:\n/usr/local/include/boost/range/value_type.hpp:26:70: error: no type named 'type' in\n      'boost::range_iterator&lt;Foo, void&gt;'\n    struct range_value : iterator_value&lt; typename range_iterator&lt;T&gt;::type &gt;\n                                         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~\n/usr/local/include/boost/range/adaptor/replaced.hpp:109:40: note: in instantiation of template\n      class 'boost::range_value&lt;Foo&gt;' requested here\n                BOOST_DEDUCED_TYPENAME range_value&lt;SinglePassRange&gt;::type&gt;&amp; f )\n                                       ^\ntest.cpp:35:27: note: while substituting deduced template arguments into function template\n      'operator|' [with SinglePassRange = Foo]\n    auto also_bad = Foo() | boost::adaptors::transformed([] (auto x) { return x * 2; });\n                          ^\n...\n</code></pre>\n\n<p>Both of the errors seem to be complaining that <code>Foo</code> isn't a range. I've tried adding an <code>operator OutContainer()</code> and typedefs for <code>iterator</code>/<code>const_iterator</code> as suggested <a href=\"https://stackoverflow.com/a/30469871/568785\">here</a> to no avail. What must I do to <code>Foo</code> to allow it to play nicely with these range operations?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1539811872, "post_id": 52863800, "comment_id": 92642118, "body": "Your parameter <code>C&amp;&amp; c</code> means an r-vlaue <b>will become</b> the variable <code>c</code>.  Once it&#39;s named <code>c</code>, it&#39;s no longer an r-value."}], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": false, "score": 6, "last_activity_date": 1539811846, "creation_date": 1539811846, "answer_id": 52863915, "question_id": 52863800, "link": "https://stackoverflow.com/questions/52863800/returning-a-move-only-rvalue-reference/52863915#52863915", "title": "returning a move-only rvalue reference", "body": "<p>Inside function <code>foo</code>, <code>c</code>, a named thing, is an lvalue. To invoke the move constructor, you'd need to explicitly make it look like an rvalue</p>\n\n<pre><code>return std::move(c);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1539812359, "creation_date": 1539812359, "answer_id": 52864011, "question_id": 52863800, "link": "https://stackoverflow.com/questions/52863800/returning-a-move-only-rvalue-reference/52864011#52864011", "title": "returning a move-only rvalue reference", "body": "<p>As pointed out by <a href=\"https://stackoverflow.com/users/661519/juanchopanza\">juanchopanza</a> <code>c</code> is an lvalue (since it has a name) so it will try to copy that.  instead of having to call <code>std::move</code> in the return statement though you can leverage the fact the local objects and function parameters that were passed by value can be considered as rvalues in the return statement.  That lets you rewrite the function like</p>\n\n<pre><code>C foo(C c) {\n    return c;\n}\n</code></pre>\n"}], "owner": {"reputation": 17841, "user_id": 331785, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5348f77500c08a662088203ef1b4be27?s=128&d=identicon&r=PG", "display_name": "Baruch", "link": "https://stackoverflow.com/users/331785/baruch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 52864011, "answer_count": 2, "score": 2, "last_activity_date": 1539812426, "creation_date": 1539811301, "last_edit_date": 1539812426, "question_id": 52863800, "link": "https://stackoverflow.com/questions/52863800/returning-a-move-only-rvalue-reference", "title": "returning a move-only rvalue reference", "body": "<p>In the following code:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nstruct C {\n    C() = default;\n    C(C const&amp;) = delete;\n    C(C&amp;&amp;) = default;\n\n    int a;\n};\n\nC foo(C&amp;&amp; c) {\n    return c;\n}\n\nint main()\n{\n  auto c = foo(C{});\n}\n</code></pre>\n\n<p>I get an error at the return statement of <code>foo</code>: </p>\n\n<pre><code>Use of deleted function 'C::C(const C&amp;)'\". \n</code></pre>\n\n<p>Why is trying to call the copy constructor? Shouldn't it be using the move constructor since <code>c</code> is an rvalue reference? And even if not for that reason, shouldn't a <code>return</code> statement always call the move constructor since the value can no linger be used after the <code>return</code>?</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1539810812, "post_id": 52863675, "comment_id": 92641758, "body": "Hint: <code>myString[0]</code>"}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 2, "creation_date": 1539811277, "post_id": 52863675, "comment_id": 92641923, "body": "What&#39;s supposed to happen when you shift &#39;Z&#39; by 2?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1539811615, "post_id": 52863675, "comment_id": 92642024, "body": "This doesn&#39;t work for <code>char</code> either, it will shift the pointer by 2. In <code>C</code> you would use a loop as well."}, {"owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1539811879, "post_id": 52863675, "comment_id": 92642121, "body": "@MatthieuBrucher It will work for a <code>char</code>, but not a <code>char*</code>. You are correct you would use a loop for a C-string too."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1539811979, "post_id": 52863675, "comment_id": 92642157, "body": "Don&#39;t use <i>single quotes</i> for strings, use <i>double quotes</i>. <code>&quot;Hello&quot;</code> rather than <code>&#39;Hello&#39;</code>."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10316011"}, "edited": false, "score": 0, "creation_date": 1539811632, "post_id": 52863709, "comment_id": 92642029, "body": "cout &lt;&lt; &#39;\\n&#39; is not a good idea, use std::endl instead, endl contains a flush, so that stuff actually gets printed right away"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 6, "creation_date": 1539811864, "post_id": 52863709, "comment_id": 92642115, "body": "@jakub_d Please don&#39;t use <code>endl</code>, or recommend <code>endl</code>, unless a flush is very explicitly required. <code>endl</code> is very expensive."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539811892, "post_id": 52863709, "comment_id": 92642127, "body": "@jakub_d Show me one platform where <code>stdout</code> isn&#39;t line-buffered."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1539812048, "post_id": 52863709, "comment_id": 92642179, "body": "@Swordfish Unix, when <code>stdout</code> isn&#39;t a terminal"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1539812132, "post_id": 52863709, "comment_id": 92642197, "body": "@Barry um. Yes. I assumed <code>stdout</code> being connected to a terminal."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1539812260, "post_id": 52863709, "comment_id": 92642236, "body": "@Swordfish I&#39;m not sure why you would assume that. It&#39;s pretty common to pipe one process to a file or a different process."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1539812649, "post_id": 52863709, "comment_id": 92642381, "body": "@Barry Because using an explicit flush on a fully buffered filestream is even more pointless than when writing to a terminal."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10316011"}, "edited": false, "score": 0, "creation_date": 1539812827, "post_id": 52863709, "comment_id": 92642452, "body": "&#39;very expensive&#39; is overselling it. You are more likely to run into problems because of not flushing (missing data after a crash, &quot;why is my stuff not printing?&quot;) than because you vere flushing too often."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 1, "creation_date": 1539813086, "post_id": 52863709, "comment_id": 92642558, "body": "@jakub_d Fact is that a flush is more expensive than no flush. The bs of teaching beginners to use <code>std::endl</code> for a newline is just that: bs. If you *really* want a flush then be explicit and write what you want: <code>std::flush</code>."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": false, "score": 3, "last_activity_date": 1539811376, "last_edit_date": 1539811376, "creation_date": 1539810892, "answer_id": 52863709, "question_id": 52863675, "link": "https://stackoverflow.com/questions/52863675/how-can-i-shift-the-letters-of-a-string-in-c-17/52863709#52863709", "title": "How can I shift the letters of a string in C++ 17?", "body": "<p>Use a loop:</p>\n\n<pre><code>std::string myString = \"Hello\";\nstd::string shifted;\n\nfor (auto const &amp;ch : myString)\n    shifted += ch + 2;\n\nstd::cout &lt;&lt; shifted &lt;&lt; '\\n';\n</code></pre>\n\n<p>If you want to shift only letters and have them wrap around if a shifted value would be <code>&gt;'Z'</code> or <code>&gt;'z'</code>:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;cctype&gt; // std::islower(), std::isupper()\n\n// ...\n\nfor (auto const &amp;ch : myString) {\n    if (std::islower(static_cast&lt;char unsigned&gt;(ch)))  // *)\n        shifted += 'a' + (ch - 'a' + shift) % ('z' - 'a' + 1);\n\n    if (std::isupper(static_cast&lt;char unsigned&gt;(ch)))\n        shifted += 'A' + (ch - 'A' + shift) % ('Z' - 'A' + 1);\n}\n</code></pre>\n\n<p>*) Don't feed those functions negative values.</p>\n"}, {"comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 2, "creation_date": 1539811982, "post_id": 52863764, "comment_id": 92642160, "body": "Using <code>std::transform</code> is the only correct answer. One could also argue for handling cases such as ofsetting the very end of the alphabet (for example <code>&#39;z&#39; + 2</code>), but the OP did not mention this case"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1539812415, "post_id": 52863764, "comment_id": 92642293, "body": "@Fureeish A range based loop is another correct answer. More concise and easier to read too."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1539812600, "post_id": 52863764, "comment_id": 92642365, "body": "@juanchopanza I disagree with ranged-based for begin better or even equal to <code>std::transform</code> in this case. This algorithm was specifically designed to handle such cases. The plain usage of <code>std::transform</code> already suggests the intention, while ranged-based for does not. I do agree that both can accomplish the task, but I believe that <code>std::transform</code> is simply superior here"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1539812876, "post_id": 52863764, "comment_id": 92642468, "body": "@Fureeish Specifically designed before range based loops existed, and for a more general case."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1539812895, "post_id": 52863764, "comment_id": 92642480, "body": "@Fureeish Would you please elaborate your believes?"}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539813245, "post_id": 52863764, "comment_id": 92642604, "body": "yea you can use it if performance isn&#39;t critical. But if it is your offer is nothing. If we&#39;re talkin about PC you should use smth like <code>_mm_add_epi8</code>"}], "tags": [], "owner": {"reputation": 10345, "user_id": 4131059, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/uDaBr.jpg?s=128&g=1", "display_name": "Alexander Huszagh", "link": "https://stackoverflow.com/users/4131059/alexander-huszagh"}, "is_accepted": false, "score": 6, "last_activity_date": 1539812320, "last_edit_date": 1539812320, "creation_date": 1539811149, "answer_id": 52863764, "question_id": 52863675, "link": "https://stackoverflow.com/questions/52863675/how-can-i-shift-the-letters-of-a-string-in-c-17/52863764#52863764", "title": "How can I shift the letters of a string in C++ 17?", "body": "<p>Use <code>std::transform</code>.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string s(\"hello\");\n    std::transform(s.begin(), s.end(), s.begin(),\n                   [](unsigned char c) -&gt; unsigned char { return c + 2; });\n\n    // if you don't want to flush stdout, you may use \"\\n\" instead of \"\\n\"\n    std::cout &lt;&lt; s &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>How this works is it operates using a callback on each character, and transforms the string in-place.</p>\n\n<p>The callback merely adds 2 to the unsigned character:</p>\n\n<pre><code>[](unsigned char c) -&gt; unsigned char { return c + 2; }\n</code></pre>\n\n<p>The rest is just:</p>\n\n<pre><code>std::transform(s.begin(), s.end(), s.begin(), callback);\n</code></pre>\n\n<p>Simple, extensible, and easy-to-read.</p>\n"}], "owner": {"reputation": 19, "user_id": 10285896, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e26e27d20b67371615f4e981bffee4b6?s=128&d=identicon&r=PG&f=1", "display_name": "HalfDecent", "link": "https://stackoverflow.com/users/10285896/halfdecent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2209, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1539812320, "creation_date": 1539810719, "question_id": 52863675, "link": "https://stackoverflow.com/questions/52863675/how-can-i-shift-the-letters-of-a-string-in-c-17", "title": "How can I shift the letters of a string in C++ 17?", "body": "<p>For example, shifting from 'Hi' to 'Jk' by shifting forward in the alphabet by two letters.</p>\n\n<p>So far, I have tried this:</p>\n\n<pre><code>string myString = 'Hello';\nstring shifted = myString + 2;\ncout &lt;&lt; shifted &lt;&lt; endl;\n</code></pre>\n\n<p>Which works for chars, but won't do anything for strings. Is there anything else that will work?</p>\n"}, {"tags": ["c++", "c++11", "casting", "narrowing", "cpp-core-guidelines"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1539810722, "post_id": 52863643, "comment_id": 92641712, "body": "I don&#39;t know enough to make it an answer, but perhaps <code>narrow&lt;unsigned&gt;(-1)</code>? A <code>static_cast</code> back and forth would probably yield the same result (not sure if it&#39;s UB or not)."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1539811499, "post_id": 52863643, "comment_id": 92641992, "body": "It looks to me like <i>if they are not the same signedness and one is negative...</i> so you casting between <i>unsigned</i> and <i>signed</i> then it checks to see if <i>sign</i> information is lost?"}, {"owner": {"reputation": 3803, "user_id": 459975, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bc7ef38c9fb207c34f2903fe2876744d?s=128&d=identicon&r=PG", "display_name": "Chuu", "link": "https://stackoverflow.com/users/459975/chuu"}, "edited": false, "score": 0, "creation_date": 1539811685, "post_id": 52863643, "comment_id": 92642045, "body": "I don&#39;t know exactly why it is written as it is, but just glancing at it I believe yours will (correctly?  incorrectly?) return &quot;true&quot; for converting -0.0f to an integral zero, while the MS implementation will probably not compile for non-integral values."}], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 8360627, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213497434168304/picture?type=large", "display_name": "John Ilacqua", "link": "https://stackoverflow.com/users/8360627/john-ilacqua"}, "edited": false, "score": 0, "creation_date": 1540513422, "post_id": 52863884, "comment_id": 92904136, "body": "Is the (paraphrased) statement &quot;<code>int i = narrow_cast&lt;int&gt;(std::numeric_limits&lt;unsigned int&gt;::max());</code> will store <code>-1</code> in <code>i</code>&quot; guaranteed by the standard? As far as I know it&#39;s implementation-defined, but will be true on almost every implementation."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 10, "last_activity_date": 1573047863, "last_edit_date": 1573047863, "creation_date": 1539811709, "answer_id": 52863884, "question_id": 52863643, "link": "https://stackoverflow.com/questions/52863643/understanding-gslnarrow-implementation/52863884#52863884", "title": "Understanding gsl::narrow implementation", "body": "<p>This is checking for overflow.  Lets look at</p>\n\n<pre><code>auto foo = narrow&lt;int&gt;(std::numeric_limits&lt;unsigned int&gt;::max())\n</code></pre>\n\n<p><code>T</code> will be <code>int</code> and <code>U</code> will be <code>unsigned int</code>. So</p>\n\n<pre><code>T t = narrow_cast&lt;T&gt;(u);\n</code></pre>\n\n<p>will give store <code>-1</code> in <code>t</code>.  When you cast that back in</p>\n\n<pre><code>if (static_cast&lt;U&gt;(t) != u)\n</code></pre>\n\n<p>the <code>-1</code> will convert back to <code>std::numeric_limits&lt;unsigned int&gt;::max()</code> so the check will pass.  This isn't a valid cast though as <code>std::numeric_limits&lt;unsigned int&gt;::max()</code> overflows an <code>int</code> and is undefined behavior.  So then we move on to</p>\n\n<pre><code>if (!details::is_same_signedness&lt;T, U&gt;::value &amp;&amp; ((t &lt; T{}) != (u &lt; U{})))\n</code></pre>\n\n<p>and since the signs aren't the same we evaluate</p>\n\n<pre><code>(t &lt; T{}) != (u &lt; U{})\n</code></pre>\n\n<p>which is</p>\n\n<pre><code>(-1 &lt; 0) != (really_big_number &lt; 0)\n==  true != false\n==  true\n</code></pre>\n\n<p>So we throw an exception.  If we go even farther and wrap back around using so that <code>t</code> becomes a positive number then the second check will pass but the first one will fail since <code>t</code> would be positive and that cast back to the source type is still the same positive value which isn't equal to its original value.</p>\n"}, {"tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 0, "last_activity_date": 1539813362, "last_edit_date": 1539813362, "creation_date": 1539812409, "answer_id": 52864022, "question_id": 52863643, "link": "https://stackoverflow.com/questions/52863643/understanding-gslnarrow-implementation/52864022#52864022", "title": "Understanding gsl::narrow implementation", "body": "<pre><code>if (!details::is_same_signedness&lt;T, U&gt;::value &amp;&amp; ((t &lt; T{}) != (u &lt; U{})))  // &lt;-- ???\n</code></pre>\n\n<p>The above check is for making sure that differing signedness doesn't lead us astray.</p>\n\n<p>The first part checks whether it might be an issue at all, and is included for optimization, so let's get to the point.</p>\n\n<p>As an example, take <a href=\"https://en.cppreference.com/w/cpp/types/climits\" rel=\"nofollow noreferrer\"><code>UINT_MAX</code></a> (the biggest <code>unsigned int</code> there is), and cast it to <code>signed</code>.</p>\n\n<p>Assuming <code>INT_MAX == UINT_MAX / 2</code> (which is <em>very</em> likely, though not quite guaranteed by the standard), the result will be <code>(signed)-1</code>, or just <code>-1</code>, a negative number.</p>\n\n<p>While casting it back will result in the original value, thus it passes the first check, it is not itself the same value, and this check catches the error.</p>\n"}], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3759, "favorite_count": 1, "accepted_answer_id": 52863884, "answer_count": 2, "score": 8, "last_activity_date": 1614393867, "creation_date": 1539810511, "last_edit_date": 1614393867, "question_id": 52863643, "link": "https://stackoverflow.com/questions/52863643/understanding-gslnarrow-implementation", "title": "Understanding gsl::narrow implementation", "body": "<p>The <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md\" rel=\"nofollow noreferrer\">C++ Core Guidelines</a> has a <code>narrow</code> cast that throws if the cast changes the value. Looking at the <a href=\"https://github.com/microsoft/GSL/blob/main/include/gsl/narrow#L28\" rel=\"nofollow noreferrer\">microsoft implementation</a> of the library:</p>\n<pre><code>// narrow() : a checked version of narrow_cast() that throws if the cast changed the value\ntemplate &lt;class T, class U&gt;\nT narrow(U u) noexcept(false)\n{\n    T t = narrow_cast&lt;T&gt;(u);\n    if (static_cast&lt;U&gt;(t) != u)\n        gsl::details::throw_exception(narrowing_error());\n    if (!details::is_same_signedness&lt;T, U&gt;::value &amp;&amp; ((t &lt; T{}) != (u &lt; U{})))  // &lt;-- ???\n        gsl::details::throw_exception(narrowing_error());\n    return t;\n}\n</code></pre>\n<p>I don't understand the second <code>if</code>. What special case does it check for and why isn't <code>static_cast&lt;U&gt;(t) != u</code> enough?</p>\n<hr />\n<p>For completeness:</p>\n<p><code>narrow_cast</code> is just a <code>static_cast</code>:</p>\n<pre><code>// narrow_cast(): a searchable way to do narrowing casts of values\ntemplate &lt;class T, class U&gt;\nconstexpr T narrow_cast(U&amp;&amp; u) noexcept\n{\n    return static_cast&lt;T&gt;(std::forward&lt;U&gt;(u));\n}\n</code></pre>\n<p><code>details::is_same_signdess</code> is what it advertises:</p>\n<pre><code>template &lt;class T, class U&gt;\nstruct is_same_signedness\n    : public std::integral_constant&lt;bool,\n        std::is_signed&lt;T&gt;::value == std::is_signed&lt;U&gt;::value&gt;\n{\n};\n</code></pre>\n"}, {"tags": ["c++", "vector", "netbeans"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1539809026, "post_id": 52863280, "comment_id": 92640990, "body": "Is this an IDE generated error or a compiler error?"}, {"owner": {"reputation": 892, "user_id": 5525901, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-n60ZLgLQSzk/AAAAAAAAAAI/AAAAAAAACaU/sJ_gRHgdExI/photo.jpg?sz=128", "display_name": "Abraham Murciano Benzadon", "link": "https://stackoverflow.com/users/5525901/abraham-murciano-benzadon"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1539809054, "post_id": 52863280, "comment_id": 92641003, "body": "No, it compiles fine..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1539810267, "post_id": 52863280, "comment_id": 92641541, "body": "NetBeans is a pretty crappy C++ IDE."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1539810269, "post_id": 52863280, "comment_id": 92641542, "body": "Just seems like the same problem with Intellisense. You could try deleting your user file or closing+reopening your IDE but it&#39;s otherwise nothing to worry about. I&#39;m not sure if there&#39;s a fix though"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1539810585, "post_id": 52863280, "comment_id": 92641653, "body": "I gave up on netbeans, its c++ code completion and analysis is pretty poor, visual studio code is better"}, {"owner": {"reputation": 892, "user_id": 5525901, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-n60ZLgLQSzk/AAAAAAAAAAI/AAAAAAAACaU/sJ_gRHgdExI/photo.jpg?sz=128", "display_name": "Abraham Murciano Benzadon", "link": "https://stackoverflow.com/users/5525901/abraham-murciano-benzadon"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1539810692, "post_id": 52863280, "comment_id": 92641706, "body": "@AlanBirtles I do find NetBeans&#39; customisability to be a lot more flexible than that of VS, but anyways, I&#39;m running Linux..."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1539810756, "post_id": 52863280, "comment_id": 92641733, "body": "Visual studio code works perfectly on Linux"}, {"owner": {"reputation": 892, "user_id": 5525901, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-n60ZLgLQSzk/AAAAAAAAAAI/AAAAAAAACaU/sJ_gRHgdExI/photo.jpg?sz=128", "display_name": "Abraham Murciano Benzadon", "link": "https://stackoverflow.com/users/5525901/abraham-murciano-benzadon"}, "reply_to_user": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1539810900, "post_id": 52863280, "comment_id": 92641801, "body": "@Tas how do I delete the user file? what is it/where is it located?"}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539820747, "post_id": 52863280, "comment_id": 92644453, "body": "try to reinstall C++ plugin . But my bet is nothing would help netbeans there"}, {"owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 1, "creation_date": 1540924178, "post_id": 52863280, "comment_id": 93039804, "body": "Too many NetBeans haters here... Try to go to <code>Project Properties</code>, find <code>Code Assistance</code> and click <code>Reparse Project</code>"}], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 8216229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bee4a5ec535800b488c64c07f0c23dd?s=128&d=identicon&r=PG&f=1", "display_name": "Rafayel Paremuzyan", "link": "https://stackoverflow.com/users/8216229/rafayel-paremuzyan"}, "is_accepted": false, "score": 3, "last_activity_date": 1550122576, "creation_date": 1550122576, "answer_id": 54683833, "question_id": 52863280, "link": "https://stackoverflow.com/questions/52863280/vector-size-marked-as-error-by-netbeans-unable-to-resolve-identifier/54683833#54683833", "title": "Vector size() marked as error by NetBeans: Unable to resolve Identifier", "body": "<p>I had exactly same symptoms, i.e. I had a vector defined, and\nit gave same error message \"Unable to resolve identifier size\",\nwhile it compiled succesfully.</p>\n\n<p>Doing following helped:</p>\n\n<p>Right click on the project->\"Code Assistance\" -> \"Clean C/C++ cache and restart IDE\"</p>\n\n<p>Note: this is different from \"RightClick on project\"->\"Code Assistance\" ->\"Reparse Project\", which mentioned in several posts, but didn't help me.</p>\n"}, {"tags": [], "owner": {"reputation": 350, "user_id": 3389183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2c042895d581eb27f2111dcdaa413c1?s=128&d=identicon&r=PG", "display_name": "josephwb", "link": "https://stackoverflow.com/users/3389183/josephwb"}, "is_accepted": true, "score": 2, "last_activity_date": 1567044974, "creation_date": 1567044974, "answer_id": 57702113, "question_id": 52863280, "link": "https://stackoverflow.com/questions/52863280/vector-size-marked-as-error-by-netbeans-unable-to-resolve-identifier/57702113#57702113", "title": "Vector size() marked as error by NetBeans: Unable to resolve Identifier", "body": "<p>\"Reparse Project\" did not seem to do anything for me. The accepted answer from <a href=\"https://stackoverflow.com/a/54683833/3389183\">Rafayel Paremuzyan</a> <em>seemed</em> to work initially but the errors returned. Instead, I found that the solution from <a href=\"https://stackoverflow.com/a/35025731/3389183\">https://stackoverflow.com/a/35025731/3389183</a> worked. The process is straightforward:</p>\n\n<ol>\n<li>Right click on the project and select Properties.</li>\n<li>Look at Code Assistance. Make sure C++ Compiler has \"C++ Standard\" set to \"C++11\" (or \"C++14\") and not just \"Default\". It may be necessary to do the same with \"C Standard\" for the C Compiler under Code Assistance.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12839488, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCW9S8WyraHQyjUmn6uYGAxqM8E-4jkRwNNr8DayQ=k-s128", "display_name": "Sean Hunt", "link": "https://stackoverflow.com/users/12839488/sean-hunt"}, "is_accepted": false, "score": 0, "last_activity_date": 1580824559, "creation_date": 1580824559, "answer_id": 60058943, "question_id": 52863280, "link": "https://stackoverflow.com/questions/52863280/vector-size-marked-as-error-by-netbeans-unable-to-resolve-identifier/60058943#60058943", "title": "Vector size() marked as error by NetBeans: Unable to resolve Identifier", "body": "<p>The C++ default standard needs to be changed to C++ 11, rather than default, which is from the previous answer.  I'm somewhat doubtful that any actual relatively up to date C++ standard leaves these functions out of the definition, but I can't say for certain, and I'm not sure what standard they are referring to as \"default\".</p>\n\n<p>That's just stupid.  Netbeans seems to require a lot of coddling and fiddling just to make it build code that works great pretty much everywhere.  I haven't had issues like these since about 2000</p>\n"}], "owner": {"reputation": 892, "user_id": 5525901, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh6.googleusercontent.com/-n60ZLgLQSzk/AAAAAAAAAAI/AAAAAAAACaU/sJ_gRHgdExI/photo.jpg?sz=128", "display_name": "Abraham Murciano Benzadon", "link": "https://stackoverflow.com/users/5525901/abraham-murciano-benzadon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 791, "favorite_count": 0, "accepted_answer_id": 57702113, "answer_count": 3, "score": 3, "last_activity_date": 1580824559, "creation_date": 1539808920, "last_edit_date": 1539809184, "question_id": 52863280, "link": "https://stackoverflow.com/questions/52863280/vector-size-marked-as-error-by-netbeans-unable-to-resolve-identifier", "title": "Vector size() marked as error by NetBeans: Unable to resolve Identifier", "body": "<p>So I am working with some multidimensional vectors in C++ in NetBeans, and whenever I try to call the <code>.size()</code> method, NetBeans marks it in red and says \"Unable to resolve identifier size.\". However, it does recognise other vector methods such as <code>.push_back()</code>. The code compiles well though...</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;vector&gt;\nusing namespace std;\n\ntypedef vector&lt;int&gt; int1D;\ntypedef vector&lt;int1D&gt; int2D;\n\nint2D populate (int2D arg1, int arg2);\n\nint main () {\n    //Do stuff...\n}\n\nint2D populate (int2D grid, int gridSize) {\n    int2D my_2d_array;\n    //Here I fill my_2d_array...\n    for (int x = 0; x &lt; gridSize; x++) {\n        for (int y = 0; y &lt; gridSize; y++) {\n            int value = grid[x][y];\n            if (value == 0) {\n                //get all coordinaes of values with 0\n                int1D coordinates;\n                coordinates.push_back(x);\n                coordinates.push_back(y);\n                my_2d_array.push_back(coordinates);\n            }\n        }\n    }\n    for (int x = 0; x &lt; my_2d_array.size(); x++) {\n        //do something\n    }\n}\n</code></pre>\n\n<p>Here is a screenshot of the error highlighting:</p>\n\n<p><a href=\"https://i.stack.imgur.com/WNpv2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WNpv2.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1539815400, "post_id": 52863229, "comment_id": 92643224, "body": "<code>*(vector_of_deques.begin());</code> is more succinctly expressed as <code>vector_of_deques.front();</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10520683"}, "edited": false, "score": 0, "creation_date": 1539810584, "post_id": 52863578, "comment_id": 92641652, "body": "Oh God... Of course that&#39;s the problem. Thank you. Now I can go back to work."}], "tags": [], "owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "is_accepted": true, "score": 1, "last_activity_date": 1539810188, "creation_date": 1539810188, "answer_id": 52863578, "question_id": 52863229, "link": "https://stackoverflow.com/questions/52863229/splitting-deques-inside-vector/52863578#52863578", "title": "Splitting deques inside vector", "body": "<p>I believe the problem is here:</p>\n\n<pre><code>std::deque&lt;int&gt; deque = *(vector_of_deques.begin());\n</code></pre>\n\n<p>You are making a copy of the deque, when really what you want is a <code>std::deque&lt;int&gt;&amp;</code>.  As it is, when your code does this:</p>\n\n<pre><code>deque.erase( deque.begin() + split_position, deque.end() );\n</code></pre>\n\n<p>You're erasing from the copy and not changing your original vector.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10520683"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 52863578, "answer_count": 1, "score": 0, "last_activity_date": 1539810188, "creation_date": 1539808682, "question_id": 52863229, "link": "https://stackoverflow.com/questions/52863229/splitting-deques-inside-vector", "title": "Splitting deques inside vector", "body": "<p>I'm trying to deal with a very strange problem. I don't have much experience with STL containers so their mechanics are a big mystery for me. Ok, back to main topic. I need to create a vector of deques and then split every existing deque inside this vector in half. Each half will create seperate deque from now on.\nI'm expecting something like this:</p>\n\n<blockquote>\n  <p>vector{ deque{1,2,3,4,5} } -----> vector { deque{1,2,3}, deque{4,5} }</p>\n</blockquote>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;deque&gt;\n#include &lt;vector&gt;\n\nint main() {\n\n    std::vector&lt; std::deque&lt;int&gt; &gt; vector_of_deques;\n    vector_of_deques.push_back( std::deque&lt;int&gt;{1, 2, 3, 4, 5} );\n\n    std::deque&lt;int&gt; deque = *(vector_of_deques.begin());\n    int split_position;\n\n    if (deque.size() % 2 == 0)\n        split_position = deque.size() / 2;\n    else \n        split_position = int(deque.size() / 2) + 1;\n\n    vector_of_deques.emplace_back( deque.begin() + split_position, deque.end() );\n    deque.erase( deque.begin() + split_position, deque.end() );\n\n    for (auto i: vector_of_deques) {\n        for (auto j: i)\n            std::cout &lt;&lt; j &lt;&lt; \", \";\n\n        std::cout &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Output: </p>\n\n<blockquote>\n  <p>1, 2, 3, 4, 5,</p>\n  \n  <p>4, 5,</p>\n</blockquote>\n\n<p>Expected:</p>\n\n<blockquote>\n  <p>1, 2, 3,</p>\n  \n  <p>4, 5,</p>\n</blockquote>\n\n<p>I have not a single idea what's going on. Can someone explain me why my way of thinking about those containers is wrong? It would be a great help for me.</p>\n"}, {"tags": ["c++", "arrays", "for-loop", "if-statement", "swap"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1539808569, "post_id": 52863194, "comment_id": 92640784, "body": "Use <code>std::swap</code> in conjunction with the value returned from <code>std::minmax_element</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1539808602, "post_id": 52863194, "comment_id": 92640796, "body": "<code>array[indexofMin] = max;</code> and <code>array[indexOfMax] = min;</code>."}, {"owner": {"reputation": 13, "user_id": 10520702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6399e7d2793f651597d5fcb584ef004?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.lackedu", "link": "https://stackoverflow.com/users/10520702/dr-lackedu"}, "edited": false, "score": 0, "creation_date": 1539808638, "post_id": 52863194, "comment_id": 92640810, "body": "I think I have done that in the end"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1539808657, "post_id": 52863194, "comment_id": 92640817, "body": "<code>cout &lt;&lt; array[k] &lt;&lt; &quot; &quot; &lt;&lt;endl;</code> does not produce the output you claim. Consider a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1539808694, "post_id": 52863194, "comment_id": 92640839, "body": "Dr.lackedu how are you compiling this code? Are you familiar with how to step through with a debugger?"}, {"owner": {"reputation": 13, "user_id": 10520702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6399e7d2793f651597d5fcb584ef004?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.lackedu", "link": "https://stackoverflow.com/users/10520702/dr-lackedu"}, "edited": false, "score": 0, "creation_date": 1539808842, "post_id": 52863194, "comment_id": 92640912, "body": "Yes, but a little"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1539808850, "post_id": 52863194, "comment_id": 92640917, "body": "Why do you need 2 separate loops to find min and max element?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1539808991, "post_id": 52863194, "comment_id": 92640978, "body": "@NathanOliver <code>std::minmax_element()</code> returns iterators, so <code>std::iter_swap()</code> would make more sense than <code>std::swap()</code>: &quot;<i>Swaps the values of the elements the given iterators are pointing to.</i>&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1539809101, "post_id": 52863194, "comment_id": 92641018, "body": "@RemyLebeau Oh yeah.  I always forget about <code>std::iter_swap()</code>.  Thanks for pointing that out. :)"}, {"owner": {"reputation": 13, "user_id": 10520702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6399e7d2793f651597d5fcb584ef004?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.lackedu", "link": "https://stackoverflow.com/users/10520702/dr-lackedu"}, "edited": false, "score": 0, "creation_date": 1539809367, "post_id": 52863194, "comment_id": 92641123, "body": "And how can I use <code>std::iter_swap()</code> to swap the elements ?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1539809715, "post_id": 52863194, "comment_id": 92641279, "body": "@Dr.lackedu <a href=\"http://coliru.stacked-crooked.com/a/a985ddd6befbbc1e\" rel=\"nofollow noreferrer\">this</a> is how you would do it using modern C++"}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1539809405, "post_id": 52863384, "comment_id": 92641143, "body": "&quot;You already have the indices the max and min are found.&quot; no he does not. Not for <code>min</code>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1539809588, "post_id": 52863384, "comment_id": 92641227, "body": "@Slava, You are seeing something that I am not seeing, or vice versa."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539809667, "post_id": 52863384, "comment_id": 92641264, "body": ". o O ( i see things you both don&#39;t see - hah! )"}, {"owner": {"reputation": 13, "user_id": 10520702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6399e7d2793f651597d5fcb584ef004?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.lackedu", "link": "https://stackoverflow.com/users/10520702/dr-lackedu"}, "edited": false, "score": 0, "creation_date": 1539809794, "post_id": 52863384, "comment_id": 92641309, "body": "Now I am getting no answer at all"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1539809904, "post_id": 52863384, "comment_id": 92641362, "body": "@RSahu OP initialized <code>min</code> and <code>max</code> before getting actual values into array. So for this data <code>min</code> is 0"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 13, "user_id": 10520702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6399e7d2793f651597d5fcb584ef004?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.lackedu", "link": "https://stackoverflow.com/users/10520702/dr-lackedu"}, "edited": false, "score": 0, "creation_date": 1539810119, "post_id": 52863384, "comment_id": 92641469, "body": "@Dr.lackedu Last time i checkt you already got <b><i>3</i></b> answers??"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1539810172, "post_id": 52863384, "comment_id": 92641498, "body": "@Slava, I see. Thanks for the sharp eyes."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1539810135, "last_edit_date": 1539810135, "creation_date": 1539809311, "answer_id": 52863384, "question_id": 52863194, "link": "https://stackoverflow.com/questions/52863194/how-to-swap-the-positions-of-min-and-max-in-an-array/52863384#52863384", "title": "How to swap the positions of Min and Max in an array?", "body": "<p>You already have the indices of where the max and min are found. You also have the max and min. To swap the max and min values in the array is trivial with that information. Use:</p>\n\n<pre><code>array[indexofMin] = max;\narray[indexOfMax] = min;\n</code></pre>\n\n<h2>Suggetions for improving your code:</h2>\n\n<h3>1. Fix the problem of accessing the array</h3>\n\n<pre><code>for(k = 0; k &lt;= arrSize; k++){ \n    cin &gt;&gt; array[k];\n}\n</code></pre>\n\n<p>is a problem since you are modifying <code>array</code> using an out of bounds index. Change it to use <code>k &lt; arrSize</code>.</p>\n\n<h3>2. Fix initialization of <code>max</code> and <code>min</code></h3>\n\n<p>You need to initialize <code>max</code> and <code>min</code> only after the array has been populated with user input. Move the lines</p>\n\n<pre><code>int min = array[0]; \nint max = array[0]; \n</code></pre>\n\n<p>to right after the loop to read the data.</p>\n\n<h3>3. Use just one loop for computing the max and the min</h3>\n\n<pre><code>for (int i = 0; i &lt; arrSize; i++){ \n     if(array[i] &gt;= max ){          \n        max = array[i];            \n        indexOfMax = i;            \n    }\n\n    if(array[i] &lt; min){\n        min = array[i];\n        indexOfMin = i;\n    }\n}\n</code></pre>\n\n<h3>4. Remove the code to swap max and min</h3>\n\n<p>The lines</p>\n\n<pre><code>temp = min;\nmin = max;\nmax = temp;\n</code></pre>\n\n<p>swap the values of <code>max</code> and <code>min</code> but they don't change the contents of the array.</p>\n\n<h3>5. Use a loop to print the array</h3>\n\n<p>Instead of </p>\n\n<pre><code>cout &lt;&lt; array[k] &lt;&lt; \" \" &lt;&lt;endl;\n</code></pre>\n\n<p>use</p>\n\n<pre><code>for (int i = 0; i &lt; arrSize; i++){ \n   cout &lt;&lt; array[k] &lt;&lt; \" \";\n}\ncout &lt;&lt; endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10520702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6399e7d2793f651597d5fcb584ef004?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.lackedu", "link": "https://stackoverflow.com/users/10520702/dr-lackedu"}, "edited": false, "score": 0, "creation_date": 1539812117, "post_id": 52863427, "comment_id": 92642194, "body": "So at the end i just write <code>for (k = 0; k &lt;= 7; k++) {         cout &lt;&lt; array[k] &lt;&lt; &quot; &quot; &lt;&lt; endl;      }</code> ?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 13, "user_id": 10520702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6399e7d2793f651597d5fcb584ef004?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.lackedu", "link": "https://stackoverflow.com/users/10520702/dr-lackedu"}, "edited": false, "score": 0, "creation_date": 1539812516, "post_id": 52863427, "comment_id": 92642326, "body": "@Dr.lackedu I put that question of yours at the end of my answer."}], "tags": [], "owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "is_accepted": true, "score": 1, "last_activity_date": 1539813884, "last_edit_date": 1539813884, "creation_date": 1539809497, "answer_id": 52863427, "question_id": 52863194, "link": "https://stackoverflow.com/questions/52863194/how-to-swap-the-positions-of-min-and-max-in-an-array/52863427#52863427", "title": "How to swap the positions of Min and Max in an array?", "body": "<blockquote>\n<pre><code>int min = array[0];\nint max = array[0];\n</code></pre>\n</blockquote>\n\n<p>You don't know that yet. <code>array[0]</code> at this point of the program is <code>0</code> ... but <code>0</code> might not be an element of the array after user input.</p>\n\n<blockquote>\n<pre><code>int indexOfMin = 0;\nint indexOfMax = 0;\n</code></pre>\n</blockquote>\n\n<p>Indexes into and the sizes of objects in memory should be of type <code>std::size_t</code> (<code>&lt;cstddef&gt;</code>) because it is guaranteed that <code>std::size_t</code> is big enough. There is no such guarantee for <code>int</code>.</p>\n\n<blockquote>\n<pre><code>int arrSize = sizeof(array) / sizeof(array[0]);\n</code></pre>\n</blockquote>\n\n<p>Use <code>std::size()</code> (<code>&lt;iterator&gt;</code>) for clearer code:</p>\n\n<pre><code>auto const arrSize{ std::size(array) };\n</code></pre>\n\n<blockquote>\n<pre><code>int k;\nfor (k = 0; k &lt;= arrSize; k++) {\n    cin &gt;&gt; array[k]; \n}\n</code></pre>\n</blockquote>\n\n<p>Valid array indexes range from <code>0</code> to &lt; <code>N</code> for an array <code>array[N]</code>. You access the array out of bounds. Use <code>k &lt; arrSize</code> as condition. <code>k</code> should be of type <code>std::size_t</code>.</p>\n\n<blockquote>\n<pre><code>for (int i = 0; i &lt; arrSize; i++) {\n  if (array[i] &gt;= max) {\n      max = array[i];\n      indexOfMax = i;\n  }\n}\n\nfor (int i = 0; i &lt; arrSize; i++) {\n  if (array[i] == min) {\n      continue;\n  }\n  if (array[i] &lt; min) {\n      min = array[i];\n      indexOfMin = i;\n  }\n}\n</code></pre>\n</blockquote>\n\n<p>If you had defined <code>int min = array[0];</code> and <code>int max = array[0];</code> after user input you could start these loops with <code>i = 1</code>. The <code>if (array[i] == min) { continue; }</code> buys you nothing. In contrary it wastes time with an additional comparison. Also, both loops can be combined into one:</p>\n\n<pre><code>int min{ array[0] };\nint max{ array[0] };\n\nstd::size_t indexOfMin{ 0 };\nstd::size_t indexOfMax{ 0 };\n\nfor (size_t i{ 1 }; i &lt; arrSize; ++i) {\n    if(array[i] &lt; min) {\n        min = array[i];\n        indexOfMin = i;\n    }\n    else if(array[i] &gt; max) {\n        max = array[i];\n        indexOfMax = i;\n    }\n}\n</code></pre>\n\n<blockquote>\n<pre><code>temp = min;\nmin = max;\nmax = temp;\n</code></pre>\n</blockquote>\n\n<p>Will swap the values of the variables <code>min</code> and <code>max</code>. Also, if swapping the minimal and maximal values in the array could be done that way, why remember their position? Try</p>\n\n<pre><code>temp = array[indexOfMin];\narray[indexOfMax] = array[indexOfMin];\narray[indexOfMin = temp];\n</code></pre>\n\n<blockquote>\n  <p>So at the end i just write</p>\n\n<pre><code>for (k = 0; k &lt;= 7; k++) {\n    cout &lt;&lt; array[k] &lt;&lt; \" \" &lt;&lt; endl;\n}\n</code></pre>\n  \n  <p>?</p>\n</blockquote>\n\n<p>No, you write</p>\n\n<pre><code>for (std::size_t k = 0; k &lt; arrSize; k++) {\n    std::cout &lt;&lt; array[k] &lt;&lt; \" \";\n}\nstd::cout.put('\\n');\n</code></pre>\n\n<p>because you (should) have declared the previous <code>k</code> from the input loop inside the for-loop and you make it a good habit to declare and define variables as close to where they're used as possible. Also, since you want a list in one line don't use <code>std::endl</code> inside the loop but print a <code>'\\n'</code> afterwards.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 10520702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6399e7d2793f651597d5fcb584ef004?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.lackedu", "link": "https://stackoverflow.com/users/10520702/dr-lackedu"}, "edited": false, "score": 0, "creation_date": 1539810156, "post_id": 52863505, "comment_id": 92641493, "body": "And how to print the new array ?"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 13, "user_id": 10520702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6399e7d2793f651597d5fcb584ef004?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.lackedu", "link": "https://stackoverflow.com/users/10520702/dr-lackedu"}, "edited": false, "score": 0, "creation_date": 1539810348, "post_id": 52863505, "comment_id": 92641571, "body": "@Dr.lackedu RSahu showed you at the bottom of his answer."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1539809858, "creation_date": 1539809858, "answer_id": 52863505, "question_id": 52863194, "link": "https://stackoverflow.com/questions/52863194/how-to-swap-the-positions-of-min-and-max-in-an-array/52863505#52863505", "title": "How to swap the positions of Min and Max in an array?", "body": "<p>Well, you have this code:</p>\n\n<pre><code>int min = array[0]; \nint max = array[0]; \n</code></pre>\n\n<p>yes this is common technique to point them first to the first element, but you need to use actual values, not values you used to initialize data. In your data set (all positive) you will always have <code>min == 0</code> as a result, and <code>indexOfMin</code> always pointing to 0.</p>\n\n<p>The thing is you do not actually need to keep value for <code>min</code> and <code>max</code> as indexes are enough:</p>\n\n<pre><code>for (int i = 1; i &lt; arrSize; i++) {\n    if (array[indexOfMax] &lt; array[i]) \n       indexOfMax = i;\n    if (array[indexOfMin] &gt; array[i]) \n       indexOfMin = i;\n</code></pre>\n\n<p>}</p>\n\n<p>and now you can swap them:</p>\n\n<pre><code>std::swap( array[indexOfMax], array[indexOfMin] );\n</code></pre>\n\n<p>or use temp if yo are not allowed to use standard library.</p>\n"}], "owner": {"reputation": 13, "user_id": 10520702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6399e7d2793f651597d5fcb584ef004?s=128&d=identicon&r=PG&f=1", "display_name": "Dr.lackedu", "link": "https://stackoverflow.com/users/10520702/dr-lackedu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2162, "favorite_count": 0, "accepted_answer_id": 52863427, "answer_count": 3, "score": 1, "last_activity_date": 1539813884, "creation_date": 1539808498, "last_edit_date": 1539808818, "question_id": 52863194, "link": "https://stackoverflow.com/questions/52863194/how-to-swap-the-positions-of-min-and-max-in-an-array", "title": "How to swap the positions of Min and Max in an array?", "body": "<p>Here in the code I found the <code>min</code> and <code>max</code> values of any given array . Now I want to swap their positions, and print them out. Like <code>Min</code> at position of <code>Max</code> and vice versa.  How can I change their positions? I have done it wrong, I guess. </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int array[8] = { 0, 0, 0, 0, 0, 0, 0, 0}; \n    int min = array[0]; \n    int max = array[0]; \n    int indexOfMin = 0; \n    int indexOfMax = 0; \n    int arrSize = sizeof(array)/sizeof(array[0]); \n    int temp = 0; \n\n    cout &lt;&lt; \"Enter an array: \"; \n\n    int k;\n    for(k = 0; k &lt;= arrSize; k++){ \n        cin &gt;&gt; array[k];\n    }\n\n    for (int i = 0; i &lt; arrSize; i++){ \n         if(array[i] &gt;= max ){          \n            max = array[i];            \n            indexOfMax = i;            \n        }\n    }\n\n    for (int i = 0; i &lt; arrSize; i++){ \n        if(array[i] == min){           \n            continue;\n        }\n        if(array[i] &lt; min){\n            min = array[i];\n            indexOfMin = i;\n        }\n    }\n\n    temp = min;\n    min = max;\n    max = temp;\n\n    cout &lt;&lt; array[k] &lt;&lt; \" \" &lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Input = <code>1, 5, 9, 1, 2, 9, 1, 3</code><br>\nOutput = <code>9, 5, 9, 1, 2, 1, 1, 3</code></p>\n"}, {"tags": ["c++", "optimization", "c++14", "constexpr", "static-members"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1539807875, "post_id": 52862891, "comment_id": 92640445, "body": "Taking the address of something means you need a definition, and you don&#39;t have one. It&#39;s just that in some cases, that happens to be able to be optimized away."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1539807996, "post_id": 52862891, "comment_id": 92640500, "body": "There might be better duplicate targets."}], "owner": {"reputation": 1266, "user_id": 6084517, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yfmBFvUUl9c/AAAAAAAAAAI/AAAAAAAAAZs/j-jEW3Y-TiE/photo.jpg?sz=128", "display_name": "Nathan Chappell", "link": "https://stackoverflow.com/users/6084517/nathan-chappell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1539807803, "answer_count": 0, "score": 1, "last_activity_date": 1539807807, "creation_date": 1539807127, "last_edit_date": 1539807807, "question_id": 52862891, "link": "https://stackoverflow.com/questions/52862891/o-enables-compilation-static-constexpr-data-member", "closed_reason": "Duplicate", "title": "-O Enables Compilation (static constexpr data member)", "body": "<p>I find it strange that by enabling optimizations some code would \"compile\" that otherwise wouldn't.  Here I mean (by \"compile\") to go through all stages of compilation and create an executable (i.e. including linking).  Consider the following code:</p>\n\n<pre><code>struct A { static constexpr int i{0}; };\nint main() {\n    const int *p = &amp;A::i;\n    return *p;\n}\n</code></pre>\n\n<p>This code is perfectly acceptable to g++ -std=c++14 -O1, but if I pass -O0 the linker complains about missing symbols (as I would anticipate).  I can see how an optimizer could tell that it doesn't need those symbols, but it was strange to me that one actually failed while the other succeeded.  Is this intentional behavior by the compiler?  Is it a \"design technique\" of some sort?  Is it possible to \"force\" the compiler to not emit these symbols if possible (say, for an embedded environment)?</p>\n\n<p>Any insight would be appreciated.</p>\n\n<p>I'm using gcc 7.3.0</p>\n"}, {"tags": ["c++", "opengl", "sfml"], "comments": [{"owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 1, "creation_date": 1539807090, "post_id": 52862398, "comment_id": 92640061, "body": "So\u2026what exactly is the question you wanna ask?"}, {"owner": {"reputation": 75, "user_id": 10520494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542b0d10cb190653187eaf200a68d4e7?s=128&d=identicon&r=PG&f=1", "display_name": "12Mb", "link": "https://stackoverflow.com/users/10520494/12mb"}, "reply_to_user": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "edited": false, "score": 0, "creation_date": 1539807307, "post_id": 52862398, "comment_id": 92640171, "body": "@MichaelKenzel Why is there a black screen and why does it not show the walls?"}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539809785, "post_id": 52862398, "comment_id": 92641305, "body": "<code>glm</code> is far better stuff.it has <code>LookAt()</code> also . Do not use glfw and so, use glew .<a href=\"https://github.com/alexeyneu/glsl-base/blob/bb7eae8f12045c35b3eb93b5eeacd0fcba7eaaff/tzero.c#L150\" rel=\"nofollow noreferrer\">github.com/alexeyneu/glsl-base/blob/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 10520494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542b0d10cb190653187eaf200a68d4e7?s=128&d=identicon&r=PG&f=1", "display_name": "12Mb", "link": "https://stackoverflow.com/users/10520494/12mb"}, "edited": false, "score": 0, "creation_date": 1539884678, "post_id": 52862974, "comment_id": 92672823, "body": "Thank you :) I&#39;ve been wracking my mind over this for ages!"}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 0, "last_activity_date": 1539807916, "last_edit_date": 1539807916, "creation_date": 1539807500, "answer_id": 52862974, "question_id": 52862398, "link": "https://stackoverflow.com/questions/52862398/trouble-with-the-use-of-glulookat/52862974#52862974", "title": "Trouble with the use of gluLookAt", "body": "<p>Firat of all note, that drawing by <code>glBegin</code>/<code>glEnd</code> sequences is deprecated since several years.\nRead about <a href=\"https://www.khronos.org/opengl/wiki/Fixed_Function_Pipeline\" rel=\"nofollow noreferrer\">Fixed Function Pipeline</a> and see <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification\" rel=\"nofollow noreferrer\">Vertex Specification</a> and <a href=\"https://www.khronos.org/opengl/wiki/Shader\" rel=\"nofollow noreferrer\">Shader</a> for a state of the art way of rendering.</p>\n\n<hr>\n\n<p>Anyway, you have to set up a perspective projection matrix. But note, operations like <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/gluLookAt.xml\" rel=\"nofollow noreferrer\"><code>gluLookAt</code></a> and <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/gluPerspective.xml\" rel=\"nofollow noreferrer\"><code>gluPerspective</code></a> do not only define a matrix.<br>\nThis operations define a matrix and multiply the current matrix on the matrix stack by the new matrix. This means you have to initialize the matrix on the matrix by the identity matrix first. This can be done by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glLoadIdentity.xml\" rel=\"nofollow noreferrer\"><code>glLoadIdentity</code></a>. </p>\n\n<p>Use <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/gluPerspective.xml\" rel=\"nofollow noreferrer\"><code>gluPerspective</code></a> to set the perspective projection on the projection matrix stack - <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glMatrixMode.xml\" rel=\"nofollow noreferrer\"><code>glMatrixMode( GL_PROJECTION )</code></a>:</p>\n\n<pre><code>glMatrixMode( GL_PROJECTION );\nglLoadIdentity();\ngluPerspective( 90.0f, view_width / view_height, 0.1f, 10.0f );\n</code></pre>\n\n<p>When you set the view matrix, then you have to change the point of view and look in the direction of the \"corridor\". Since you look alng the z axis, the up vector has to be (0, 1, 0):</p>\n\n<pre><code>glMatrixMode(GL_MODELVIEW);\nglLoadIdentity();\nfloat lookAtX = 0, lookAtY = 0, lookAtZ = 0, posX = 0, posY = 0, posZ = -5;\ngluLookAt( posX, posY, posZ, lookAtX, lookAtY, lookAtZ, 0, 1, 0 );\n</code></pre>\n\n<p>Finally your vertex coordinates are mixed. Change it like this: </p>\n\n<pre><code>// Back\nglBegin(GL_POLYGON);\nglColor3ub(255, 0, 0); // Red\nglVertex3f(-2.5, -2.5, 2.5);\nglVertex3f(-2.5,  2.5, 2.5);\nglVertex3f( 2.5,  2.5, 2.5);\nglVertex3f( 2.5, -2.5, 2.5);\nglEnd();\n\n// Left\nglBegin(GL_POLYGON);\nglColor3ub(0, 255, 0); // Green\nglVertex3f(-2.5,  2.5,  2.5);\nglVertex3f(-2.5,  2.5, -2.5);\nglVertex3f(-2.5, -2.5, -2.5);\nglVertex3f(-2.5, -2.5,  2.5);\nglEnd();\n\n// Right\nglBegin(GL_POLYGON); \nglColor3ub(0, 0, 255); // Blue\nglVertex3f(2.5,  2.5,  2.5);\nglVertex3f(2.5,  2.5, -2.5);\nglVertex3f(2.5, -2.5, -2.5);\nglVertex3f(2.5, -2.5,  2.5);\nglEnd();\n</code></pre>\n\n<p>Preview:</p>\n\n<p><a href=\"https://i.stack.imgur.com/CgbGZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CgbGZ.png\" alt=\"\"></a></p>\n"}], "owner": {"reputation": 75, "user_id": 10520494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542b0d10cb190653187eaf200a68d4e7?s=128&d=identicon&r=PG&f=1", "display_name": "12Mb", "link": "https://stackoverflow.com/users/10520494/12mb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 52862974, "answer_count": 1, "score": 0, "last_activity_date": 1539807916, "creation_date": 1539804999, "last_edit_date": 1539807329, "question_id": 52862398, "link": "https://stackoverflow.com/questions/52862398/trouble-with-the-use-of-glulookat", "title": "Trouble with the use of gluLookAt", "body": "<p>I have looked at multiple questions about this, including <a href=\"https://stackoverflow.com/questions/5717654/glulookat-explanation\">this</a> one. What I want is a person looking down a corridor, looking at the back wall with the left and right walls on the side view of the person. Here is my code:</p>\n\n<h2>Init</h2>\n\n<pre><code>float lookAtX = 0, lookAtY = 0, lookAtZ = -2.5, posX = 0, posY = 0, posZ = 0;\n</code></pre>\n\n<h2>Drawing</h2>\n\n<pre><code>    glEnable(GL_DEPTH_TEST);\n    glMatrixMode(GL_MODELVIEW);\n\n    gluLookAt(\n        posX, posY, posZ, \n        lookAtX, lookAtY, lookAtZ, \n        0, 0, 1\n    );\n    // Back\n    glBegin(GL_POLYGON);\n    glColor3f(255, 0, 0); // Red\n    glVertex3f(-2.5, -2.5, 2.5);\n    glVertex3f(2.5, 2.5, 2.5);\n    glVertex3f(2.5, -2.5, 2.5);\n    glVertex3f(-2.5, -2.5, 2.5);\n    glEnd();\n\n    // Left\n    glBegin(GL_POLYGON);\n    glColor3f(0, 255, 0); // Green\n    glVertex3f(-2.5, 2.5, 2.5);\n    glVertex3f(-2.5, 2.5, -2.5);\n    glVertex3f(-2.5, -2.5, 2.5);\n    glVertex3f(-2.5, -2.5, -2.5);\n    glEnd();\n\n    // Right\n    glBegin(GL_POLYGON); \n    glColor3f(0, 0, 255); // Yellow\n    glVertex3f(2.5, 2.5, 2.5);\n    glVertex3f(2.5, 2.5, -2.5);\n    glVertex3f(2.5, -2.5, 2.5);\n    glVertex3f(2.5, -2.5, -2.5);\n    glEnd();\n\n    glFlush();\n    window.pushGLStates();\n</code></pre>\n\n<p>I am confident that the outside code is correct because I had another piece of code with the same skeleton. I was also confident that this would work... but I guess it didn't xD. Why is there a black screen and why does it not show the walls? Thank you for taking the time to read this</p>\n"}, {"tags": ["c++", "templates", "boost"], "comments": [{"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1540015090, "post_id": 52862383, "comment_id": 92717110, "body": "<a href=\"https://github.com/boostorg/hana/blob/master/include/boost/hana/fwd/type.hpp#L40\" rel=\"nofollow noreferrer\">github.com/boostorg/hana/blob/master/include/boost/hana/fwd/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "reply_to_user": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1540576255, "post_id": 52862383, "comment_id": 92931285, "body": "<code>This is usually not a problem, except when T or U should not be instantiated.</code> So, it is an optimization ?"}], "owner": {"reputation": 3524, "user_id": 4950448, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/907276442666522/picture?type=large", "display_name": "Antoine Morrier", "link": "https://stackoverflow.com/users/4950448/antoine-morrier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539806917, "creation_date": 1539804957, "last_edit_date": 1539806917, "question_id": 52862383, "link": "https://stackoverflow.com/questions/52862383/boost-hana-basic-type-and-type-why-do-we-need-a-relationship-between-them", "title": "Boost Hana : basic_type and type, why do we need a relationship between them", "body": "<p>I don't understand why hana must use <code>basic_type</code>. I mean, I understand basically how it works, but I do not see the usefulness of using <code>type</code>and <code>basic_type</code>. Why just developed a \"simple\" <code>type</code> is not enough? Why make some magic like <code>typeImpl::_</code> with <code>_</code> that inherits from <code>basic_type</code></p>\n"}, {"tags": ["c++", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1539805019, "post_id": 52862374, "comment_id": 92639155, "body": "It sounds like you just want an array of <code>double</code>s (<code>double dp[10]</code>). Though I&#39;d suggest a <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array&lt;double, 10&gt;</code></a> instead. You only use pointers when you need to refer to some other <code>double</code> that exists somewhere else."}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1539805037, "post_id": 52862374, "comment_id": 92639162, "body": "you want an array of double or an array to pointers on double?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1539805038, "post_id": 52862374, "comment_id": 92639163, "body": "The scope of question is way too broad in my view. I suggest you read one of the <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ books</a>"}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 1, "creation_date": 1539805749, "post_id": 52862374, "comment_id": 92639494, "body": "You should provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal Complete Verifiable Example</a>. The code shown in the question does not match the behavior you describe."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1539807135, "post_id": 52862374, "comment_id": 92640085, "body": "The compiler does not automatically create a target for your pointers because you might assign them to point to already existing storage.  So after creating a pointer you also have to create the double and assign its address to the pointer.  Your second code is correct."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539811054, "post_id": 52862374, "comment_id": 92641853, "body": "bad idea my opinion but (may be) you could do it with <code>std::vector&lt;double*&gt; t(10); t.emplace(..., new double(0.0))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 0, "last_activity_date": 1539805828, "creation_date": 1539805828, "answer_id": 52862589, "question_id": 52862374, "link": "https://stackoverflow.com/questions/52862374/allocating-array-of-pointers-to-doubles/52862589#52862589", "title": "Allocating array of pointers to doubles", "body": "<pre><code>double* dp[10];\n</code></pre>\n\n<p>creates an array of pointer to double, where that array exists in memory depends on whether the array is inside a function or external, but either way it only allocates the array and you cannot count on the individual elements having any particular value let alone count on that value being a usable address. </p>\n\n<p>dp[i] = new double; allocates memory that can store a double and assigns a pointer to that memory to the array element. You can then use *dp[i] = 0.0; to assign a value to the actual memory that was allocated.</p>\n"}, {"tags": [], "owner": {"reputation": 21663, "user_id": 9305398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cqJvE.png?s=128&g=1", "display_name": "Acorn", "link": "https://stackoverflow.com/users/9305398/acorn"}, "is_accepted": true, "score": 1, "last_activity_date": 1539807947, "creation_date": 1539807947, "answer_id": 52863066, "question_id": 52862374, "link": "https://stackoverflow.com/questions/52862374/allocating-array-of-pointers-to-doubles/52863066#52863066", "title": "Allocating array of pointers to doubles", "body": "<blockquote>\n  <p>When double* dp[10] is executed and an array of pointers is created.</p>\n</blockquote>\n\n<p>That lines does not really execute anything, it just reserves the space (in the stack) for 10 pointers to <code>double</code>.</p>\n\n<blockquote>\n  <p>Those pointers: where do they point to in the memory?</p>\n</blockquote>\n\n<p>Nowhere, because they aren't initialized. Thus, consider them invalid until they receive some valid value.</p>\n\n<blockquote>\n  <p>why can't I just use that place in the memory to store every double?</p>\n</blockquote>\n\n<p>Because you asked for 10 <strong><em>pointers</em></strong> to <code>double</code>, instead of 10 <code>doubles</code>.</p>\n\n<blockquote>\n  <p>Why do I have to specify new double, isn't it obvious by the type of the pointers?</p>\n</blockquote>\n\n<p>Yes, but in C++ <code>new</code> is an expression, independent on its own. C++ could have had something like <code>new(p)</code>, where <code>p</code> is a pointer, but it is not like that :)</p>\n\n<p>Note, however, that you can implement it yourself with templates:</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid allocate(T* &amp; p, std::size_t n)\n{\n    p = new T[n];\n}\n</code></pre>\n\n<p>Or, in C++11, you can simply use <code>auto</code> if you like it:</p>\n\n<pre><code>auto p = new int[10];\n</code></pre>\n\n<hr>\n\n<p>Having said all that, if you already know in advance that you exactly need 10 <code>doubles</code>, you could simply ask for that:</p>\n\n<pre><code>double my_ten_doubles[10];\n</code></pre>\n\n<p>No need for memory allocation (expensive), no need for memory deallocation (no memory leaks), etc.</p>\n"}], "owner": {"reputation": 1601, "user_id": 5353800, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w3h7K.png?s=128&g=1", "display_name": "yierstem", "link": "https://stackoverflow.com/users/5353800/yierstem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 52863066, "answer_count": 2, "score": -3, "last_activity_date": 1539807947, "creation_date": 1539804906, "question_id": 52862374, "link": "https://stackoverflow.com/questions/52862374/allocating-array-of-pointers-to-doubles", "title": "Allocating array of pointers to doubles", "body": "<p>I'm trying to initialize every element of an array of pointers to doubles with the associated value <code>0.0</code>.\nI have the following code:</p>\n\n<pre><code>double* dp[10];\nfor (int i = 0; i &lt; 10; i++) dp[i] = 0.0;\n</code></pre>\n\n<p>But this gives me <code>Segmentation fault</code> and I'm not sure how to fix this.</p>\n\n<p>I tried:</p>\n\n<pre><code>for (int i = 0; i &lt; 10; i++) {\n    dp[i] = new double; // this seems to fix the segmentation problem.\n    *(dp[i]) = 0.0; // accessing the associated value in order to asign a new value\n}\n</code></pre>\n\n<p>But I'm not sure if this is the correct way to do it. Could someone explain me the dynamic memory allocation in detail?</p>\n\n<p>When <code>double* dp[10]</code> is executed and an array of pointers is created. Those pointers: where do they point to in the memory? If anywhere, why can't I just use that place in the memory to store every double? Why do I have to specify <code>new double</code>, isn't it obvious by the type of the pointers?</p>\n\n<p>Sorry if I'm asking stupid questions, but I haven't fully understood (actually at all) how this works.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "c", "matlab", "mex"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1539805367, "post_id": 52862307, "comment_id": 92639312, "body": "Are you linking in the MATLAB libraries? Please include your linker command."}, {"owner": {"reputation": 11, "user_id": 10520465, "user_type": "registered", "profile_image": "https://graph.facebook.com/477115626143014/picture?type=large", "display_name": "Rufat", "link": "https://stackoverflow.com/users/10520465/rufat"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1539806757, "post_id": 52862307, "comment_id": 92639927, "body": "@CrisLuengo  Since I am not really sure, which part of my code is a linker, I have included the whole code in the question d."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1539806762, "post_id": 52862307, "comment_id": 92639931, "body": "Thanks for including the code. That&#39;s important too. But I was asking for the linker command. Your code gets compiled by a compiler, then the resulting object code is linked (with libraries) into an executable. This second step is performed by the linker. This linker needs to know which libraries  you use, so it can link them into your executable."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1539806848, "post_id": 52862307, "comment_id": 92639970, "body": "Your error message is &quot;Apple Mach-O Linker (Id) Error&quot; -- it is saying that the linker (the second step) found an error."}, {"owner": {"reputation": 11, "user_id": 10520465, "user_type": "registered", "profile_image": "https://graph.facebook.com/477115626143014/picture?type=large", "display_name": "Rufat", "link": "https://stackoverflow.com/users/10520465/rufat"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1539808152, "post_id": 52862307, "comment_id": 92640579, "body": "@CrisLuengo I am so sorry but this is way too deep for my knowledge of what is behind the code. Maybe the image that I included in the end of the question as &quot;the error message&quot; link would help?"}], "answers": [{"tags": [], "owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "is_accepted": false, "score": 0, "last_activity_date": 1539810907, "creation_date": 1539810907, "answer_id": 52863716, "question_id": 52862307, "link": "https://stackoverflow.com/questions/52862307/apple-mach-o-linker-id-error-in-xcode-9-4-1/52863716#52863716", "title": "Apple Mach-O Linker (Id) Error in Xcode 9.4.1", "body": "<p>According to the error message and the link command shown in the screen grab, it is not linking to the MATLAB libraries. I don't know how to properly set up Xcode to do so.</p>\n\n<p>The best you can do is follow the advice in the <a href=\"https://www.mathworks.com/help/matlab/matlab_external/build-mac-os-x-engine-application.html\" rel=\"nofollow noreferrer\">MATLAB documentation</a>, which suggests using the <code>mex</code> command in MATLAB as follows:</p>\n\n<pre><code>mex -v -client engine &lt;filename.cpp&gt;\n</code></pre>\n\n<p>Replace <code>&lt;filename.cpp&gt;</code> with the actual source file name, of course. First change directory to the location of that source file, and the executable will be placed next to it.</p>\n"}], "owner": {"reputation": 11, "user_id": 10520465, "user_type": "registered", "profile_image": "https://graph.facebook.com/477115626143014/picture?type=large", "display_name": "Rufat", "link": "https://stackoverflow.com/users/10520465/rufat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539810907, "creation_date": 1539804607, "last_edit_date": 1539808057, "question_id": 52862307, "link": "https://stackoverflow.com/questions/52862307/apple-mach-o-linker-id-error-in-xcode-9-4-1", "title": "Apple Mach-O Linker (Id) Error in Xcode 9.4.1", "body": "<p>I am trying to use the MATLAB engine through C++ on Xcode 9.4.1 but I am getting an error: \"Apple Mach-O Linker (Id) Error\". I searched for the answer and found out that turning off the \"Bitcode\" might help. However, when I go to the Build Setting of Xcode, it is just not there. I highlight, that it is definitely not there, even if you search in the search bar. How can I turn it off, and if I can't, what can I do? </p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n\"_engEvalString\", referenced from:\n  _main in main.o\n\"_engOpen\", referenced from:\n  _main in main.o\n\"_engPutVariable\", referenced from:\n  _main in main.o\n\"_mxCreateDoubleMatrix_800\", referenced from:\n  _main in main.o\n\"_mxGetPr_800\", referenced from:\n  _main in main.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Here is the full code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include \"engine.h\"\n#define  BUFSIZE 256\n\nint main() {\n    Engine *ep ;\n    mxArray *Y = NULL, *result = NULL ;\n    char buffer[BUFSIZE];\n    double x[10] = {0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0,\n        8.0, 9.0};\n    if (!(ep = engOpen(\"\\0\"))) {\n        fprintf(stderr, \"\\nCan't start MATLAB engine\\n\");\n        return EXIT_FAILURE;\n    }\n    Y = mxCreateDoubleMatrix(1,10, mxREAL);\n    memcpy((void *)mxGetPr(Y), (void *)x, sizeof(x));\n    engPutVariable (ep, \"Y\", Y) ;\n    engEvalString(ep, \"fx = Y.^2\") ;\n    engEvalString(ep, \"plot(Y,fx);\");\n    engEvalString(ep, \"f(x) = y^2\") ;\n    engEvalString(ep, \"xlabel('x');\");\n    engEvalString(ep, \"ylabel('y');\");\n\n    printf(\"Hit return to continue\\n\\n\");\n    fgetc(stdin);\n    return 0 ;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/aEqpY.png\" rel=\"nofollow noreferrer\">the error message</a></p>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 7, "creation_date": 1539804322, "post_id": 52862219, "comment_id": 92638848, "body": "Dereference the <code>shared_ptr</code> first, as in <code>*sptr &lt;&lt; data</code> maybe?"}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1539804803, "post_id": 52862313, "comment_id": 92639057, "body": "What is the benefit of &quot;verbose&quot; way?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1539804934, "post_id": 52862313, "comment_id": 92639117, "body": "To make OP understand what is going under the hood and what type is usually used for implementing output functions."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1539804653, "creation_date": 1539804653, "answer_id": 52862313, "question_id": 52862219, "link": "https://stackoverflow.com/questions/52862219/using-operators-like-on-shared-ptr/52862313#52862313", "title": "Using operators (like &lt;&lt;) on shared_ptr", "body": "<p>You can do that more verbose and explicit:</p>\n\n<pre><code>std::shared_ptr&lt;std::fstream&gt; sf = ...;\nstd::ostream &amp;out = *sf;\nout &lt;&lt; \"hello world\";\n</code></pre>\n\n<p>or simply:</p>\n\n<pre><code>*sf &lt;&lt; \"hello world\";\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4873039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf7e5816ef606bec32475f359e89e093?s=128&d=identicon&r=PG&f=1", "display_name": "MarkC", "link": "https://stackoverflow.com/users/4873039/markc"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "closed_date": 1539805537, "answer_count": 1, "score": -3, "last_activity_date": 1539804653, "creation_date": 1539804237, "question_id": 52862219, "link": "https://stackoverflow.com/questions/52862219/using-operators-like-on-shared-ptr", "closed_reason": "Needs details or clarity", "title": "Using operators (like &lt;&lt;) on shared_ptr", "body": "<p>I have an FStream that because of other project constraints exists as a <code>std::shared_ptr&lt;std::fstream&gt;</code>.</p>\n\n<p>I would like to write to this stream using the <code>&lt;&lt;</code> operator, but I cannot find the correct syntax for writing to the member of a shared pointer.</p>\n"}, {"tags": ["c++", "linux", "memory", "memory-mapped-files", "lmdb"], "answers": [{"tags": [], "owner": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "is_accepted": true, "score": 1, "last_activity_date": 1539817643, "creation_date": 1539817643, "answer_id": 52864798, "question_id": 52862176, "link": "https://stackoverflow.com/questions/52862176/lmdb-open-large-databases-in-a-limited-memory-system/52864798#52864798", "title": "LMDB: Open large databases in a limited memory system", "body": "<p>The maximum size of memory that can be memory mapped depends on the size of the virtual address space, which is dictated by the CPU's virtual memory manager. A 32-bit CPU have a limit of 4GB virtual address space, this limit is for the whole system unless <a href=\"https://en.m.wikipedia.org/wiki/Physical_Address_Extension\" rel=\"nofollow noreferrer\">PAE</a> is enabled, in which case the limit is per process.</p>\n\n<p>In addition to this, the kernel and your application reserves some space of their own on your address space, and memory allocation usually requires contiguous address space, reducing memory available for the database to allocate.</p>\n\n<p>So your user will need to either enable PAE on their system, or upgrade to 64-bit CPU. If neither of these is an option in your application, then you cannot use a memory mapped file larger than your available address space, so you'll have to do some segmentation to split your data into multiple files that you can map only small chunks at a time. I'm guessing that lmdb requires that it can map the entire database file into memory.</p>\n\n<p>For a blockchain application, your data is mostly a linear sequence of log entries, so your application should only need to work with the most recent entries most of the time. You can separate the recent entries into its own working file, and the rest of the log in a database that doesn't require mapping the entire file into memory or in multiple fixed size files that you can map and unmap as needed.</p>\n"}], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 0, "accepted_answer_id": 52864798, "answer_count": 1, "score": 1, "last_activity_date": 1539817643, "creation_date": 1539804060, "last_edit_date": 1539804284, "question_id": 52862176, "link": "https://stackoverflow.com/questions/52862176/lmdb-open-large-databases-in-a-limited-memory-system", "title": "LMDB: Open large databases in a limited memory system", "body": "<p>I have a program that is projected to use <strong>a few GB of lmdb diskspace</strong> (it's a blockchain, and we're moving away from <em>leveldb</em> due to its <strong>lack of ACID</strong>, which I need for some future plans). Is it possible to run that program with that database on a <em>Raspberry Pi</em> without adding more swap (<em>with >1 GB memory</em>)? (considering that adding swap is for advanced users).</p>\n\n<p>Currently when I run that program  <a href=\"http://www.lmdb.tech/doc/group__mdb.html#gaa2506ec8dab3d969b0e609cd82e619e5\" rel=\"nofollow noreferrer\"><code>mdb_env_set_mapsize(1 &lt;&lt; 30)</code></a>, hence <strong>1 GB of mapsize</strong>, it <em>returns error 12</em>, which is out-of-memory. But it works if I reduce the size to <em>512 MB</em>. </p>\n\n<p>But what's the right way to handle such memory issues in lmdb when the database size keeps increasing?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1539806130, "post_id": 52862026, "comment_id": 92639665, "body": "As an aside, you should check whether the stream-state in the loop-condition. So, change it to: <code>std::cout &lt;&lt; &quot;prompt\\n&quot;; while (cin.get(ch) &amp;&amp; ch != &#39;#&#39;) { std::cout &lt;&lt; ch; ++count; }</code>."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1539803988, "creation_date": 1539803988, "answer_id": 52862158, "question_id": 52862026, "link": "https://stackoverflow.com/questions/52862026/c-problem-with-understanding-of-counting-char-variables/52862158#52862158", "title": "C++ problem with understanding of counting char variables", "body": "<blockquote>\n  <p>why does it count all the character in one iteration instead of 1?</p>\n</blockquote>\n\n<p>It does not. You can verify that by changing the output a bit in the loop.</p>\n\n<pre><code>while (ch != '#')\n{\n   ++count;\n   cout &lt;&lt; \"ch: \" &lt;&lt; ch &lt;&lt; \", count: \" &lt;&lt; count &lt;&lt; endl;\n   cin.get(ch); // use it again\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 8691968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e310cee80e5508b6224b5a3d206d4f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ron Milich", "link": "https://stackoverflow.com/users/8691968/ron-milich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539805971, "creation_date": 1539803459, "last_edit_date": 1539805971, "question_id": 52862026, "link": "https://stackoverflow.com/questions/52862026/c-problem-with-understanding-of-counting-char-variables", "title": "C++ problem with understanding of counting char variables", "body": "<p>I wrote a program that supposed to print the number of characters that i entered till it hits the '#' character. what i don't understand is, when i input in the console more than one character (say \"hello world\") the program count all the characters in one iteration. why does it count all the character in one iteration instead of 1?</p>\n\n<pre><code>char ch;\nint count = 0;\ncout &lt;&lt; \"Enter characters; enter # to quit:\\n\";\ncin.get(ch);\nwhile (ch != '#')\n{\n    cout &lt;&lt; ch;\n    ++count;\n    cin.get(ch); // use it again\n}\ncout &lt;&lt; endl &lt;&lt; count &lt;&lt; \" characters read\\n\";\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "time-complexity"], "answers": [{"tags": [], "owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "is_accepted": false, "score": 1, "last_activity_date": 1539803254, "creation_date": 1539803254, "answer_id": 52861982, "question_id": 52861918, "link": "https://stackoverflow.com/questions/52861918/calculating-running-time-of-a-while-loop/52861982#52861982", "title": "Calculating running time of a while loop", "body": "<p>Replace</p>\n\n<pre><code>  while(k&lt;n-k)\n     k+=k;\n</code></pre>\n\n<p>with equivalent</p>\n\n<pre><code>  while(2*k&lt;n)\n    k*=2\n</code></pre>\n\n<p>the last is definitely <code>O(log(n))</code> - it makes <code>log2(n)-1</code> steps</p>\n"}, {"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1539803540, "post_id": 52861994, "comment_id": 92638484, "body": "While it doesn&#39;t change the correctness of the answer, I&#39;d like to point out that since <code>k</code> is a <code>signed int</code>, <code>2*k &lt; n</code> is not quite equivalent to <code>k &lt; n-k</code> since the first form may overflow if <code>n</code> is large enough."}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1539804028, "post_id": 52861994, "comment_id": 92638719, "body": "That&#39;s a very valid point that should be addressed. I will add this comment to my answer shortly. Thank you"}], "tags": [], "owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "is_accepted": true, "score": 3, "last_activity_date": 1539804291, "last_edit_date": 1539804291, "creation_date": 1539803282, "answer_id": 52861994, "question_id": 52861918, "link": "https://stackoverflow.com/questions/52861918/calculating-running-time-of-a-while-loop/52861994#52861994", "title": "Calculating running time of a while loop", "body": "<p>It's worth to list the important points:</p>\n\n<ul>\n<li><p><code>k</code> doubles on every loop iteration</p></li>\n<li><p>your loop condition can be rewritten as: <code>while(2*k &lt; n)</code>*</p></li>\n</ul>\n\n<p>The essential question is: <em>how many times I have to <strong>double</strong> the <code>k</code>, untill <strong><code>k</code> doubled</strong> will be equal or greater than <code>n</code>?</em></p>\n\n<p>This is fairly easy. This is exactly how logarithms work. Take a number <code>2</code>, for example. How many times do I have to double it to reach, let's say, 1000? The answer is log<sub>2</sub>1000 rounded up.</p>\n\n<p>Essentially, your algorithm is <code>log_2(n) - 1</code>, which means that your algorithm runs in <em>logarithmic time complexity</em>.</p>\n\n<hr>\n\n<p><sub>\n*As <strong>Fran\u00e7ois Andrieux</strong> correctly stated in his comment, while mathematically this statement is true, this is not always the case in programming, due to the representation limits of data types. For large <code>k</code>s, the expression <code>2*k</code> might cause an overflow and invalidate the whole expression, while with the same input the expression <code>k &lt; n-k</code> will behave correctly.\n</sub></p>\n"}, {"tags": [], "owner": {"reputation": 9645, "user_id": 1465553, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5b559f395549789c041652429444dc0a?s=128&d=identicon&r=PG", "display_name": "Saurav Sahu", "link": "https://stackoverflow.com/users/1465553/saurav-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1539803607, "last_edit_date": 1539803607, "creation_date": 1539803283, "answer_id": 52861996, "question_id": 52861918, "link": "https://stackoverflow.com/questions/52861918/calculating-running-time-of-a-while-loop/52861996#52861996", "title": "Calculating running time of a while loop", "body": "<p>Expression <code>k &lt; n-k</code> simplifies to <code>k &lt; n/2</code>. </p>\n\n<p>Time Complexity should be <code>O(log(n))</code>  with base being 2</p>\n\n<pre><code>K = 1 -&gt; 2 -&gt; 4 -&gt; 8 -&gt; ... -&gt; m iterations\n\n2^(m-1) &lt; n/2\n\nm-1 &lt; log2(n/2)\n\nm ~ log2(n)\n</code></pre>\n"}], "owner": {"reputation": 763, "user_id": 9813733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2436891b365ad1a3e5a3971213cb1e20?s=128&d=identicon&r=PG&f=1", "display_name": "Sree", "link": "https://stackoverflow.com/users/9813733/sree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "closed_date": 1539803286, "accepted_answer_id": 52861994, "answer_count": 3, "score": 1, "last_activity_date": 1539804291, "creation_date": 1539802996, "question_id": 52861918, "link": "https://stackoverflow.com/questions/52861918/calculating-running-time-of-a-while-loop", "closed_reason": "Duplicate", "title": "Calculating running time of a while loop", "body": "<p>I am just starting with algorithms and I am trying to find out the running time in terms of 'n' for the while loop below.</p>\n\n<pre><code>int k=1;\nwhile(k&lt;n-k){\nk+=k;\n}\n</code></pre>\n\n<p>Here n>2. I understand that the value of k doubles everytime and the loop runs only once, once k value becomes greater than n/2. But I am having difficulty in expressing the same in terms of 'n'.</p>\n"}, {"tags": ["c++", "gcc", "valarray"], "comments": [{"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539802246, "post_id": 52861540, "comment_id": 92637908, "body": "Yes, <code>__r</code> should be a copy of an existing element."}, {"owner": {"reputation": 29251, "user_id": 72178, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/M3OuM.png?s=128&g=1", "display_name": "ks1322", "link": "https://stackoverflow.com/users/72178/ks1322"}, "edited": false, "score": 0, "creation_date": 1539802300, "post_id": 52861540, "comment_id": 92637932, "body": "clang works as you expect: <a href=\"https://wandbox.org/permlink/Imd52JDct8hRFWSB\" rel=\"nofollow noreferrer\">wandbox.org/permlink/Imd52JDct8hRFWSB</a>."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539802343, "post_id": 52861540, "comment_id": 92637953, "body": "Works with cl too."}, {"owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1539802504, "post_id": 52861540, "comment_id": 92638021, "body": "Thanks, I have not the setup to test with other compilers. I think I will open a bug ticket. I was afraid of being blatantly wrong ..."}], "answers": [{"comments": [{"owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 1, "creation_date": 1539848310, "post_id": 52862021, "comment_id": 92651825, "body": "Thanks, I have created a bugzilla issue: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=87641\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=87641</a> I will accept your answer when the bug is confirmed on GCC side."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "edited": false, "score": 0, "creation_date": 1539866027, "post_id": 52862021, "comment_id": 92661647, "body": "@fjardon Cool.  That was a pretty quick turn around."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1539899196, "post_id": 52862021, "comment_id": 92679498, "body": "Now fixed in all active GCC branches, using exactly the solution shown here (which not only makes the function correct, but avoids checking the loop condition for the first element, which is redundant because <code>__f != __l</code> initially)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1539899296, "post_id": 52862021, "comment_id": 92679527, "body": "@JonathanWakely There was a bug in my code (how ironic, right) I had <code>while (__f++ != __l)</code> but it should be <code>while (__f != __l)</code>"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1539899952, "post_id": 52862021, "comment_id": 92679767, "body": "Ah, good point! so my fix was exactly what your answer says <i>now</i>, not ten minutes ago :)"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1539899247, "last_edit_date": 1539899247, "creation_date": 1539803413, "answer_id": 52862021, "question_id": 52861540, "link": "https://stackoverflow.com/questions/52861540/is-the-glibcxx-stl-incorrect-in-its-implementation-of-stdvalarraysum/52862021#52862021", "title": "Is the glibcxx STL incorrect in its implementation of std::valarray::sum()?", "body": "<p>This is a bug to me.  <a href=\"https://timsong-cpp.github.io/cppwp/valarray.members#itemdecl:3\" rel=\"nofollow noreferrer\"><code>sum()</code></a></p>\n\n<blockquote>\n  <p><em>Requires:</em> <code>size() &gt; 0</code>. This function may only be instantiated for a type <code>T</code> to which <code>operator+=</code> can be applied.</p>\n</blockquote>\n\n<p>and <code>valarray</code> does have a <code>operator +=</code> so it qualifies.  It's <a href=\"https://timsong-cpp.github.io/cppwp/valarray.cassign#1\" rel=\"nofollow noreferrer\"><code>operator +=</code></a></p>\n\n<blockquote>\n  <p><em>Requires:</em> <code>size() == v.size()</code>. Each of these operators may only be instantiated for a type T if the indicated operator can be applied to two operands of type T. The value of an element in the left-hand side of a valarray compound assignment operator does not depend on the value of another element in that left hand side.</p>\n</blockquote>\n\n<p>So by doing <code>_Tp __r = _Tp();</code> they generate a <code>valarray</code> whose <code>size()</code> does not equal the size of the elements thus it isn't usable with it's <code>operator +=</code>.  A more correct implementation would be</p>\n\n<pre><code>  template&lt;typename _Tp&gt;\n    inline _Tp\n    __valarray_sum(const _Tp* __f, const _Tp* __l)\n    {\n      _Tp __r = *__f++; // this is okay as the function is requires size &gt; 0.  It is the users responsibility to make sure that is the case\n      while (__f != __l)\n        __r += *__f++;\n      return __r;\n    }\n</code></pre>\n"}], "owner": {"reputation": 7450, "user_id": 657700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb044bd9a9f6548b9a9bae44617c97c7?s=128&d=identicon&r=PG", "display_name": "fjardon", "link": "https://stackoverflow.com/users/657700/fjardon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 224, "favorite_count": 0, "accepted_answer_id": 52862021, "answer_count": 1, "score": 9, "last_activity_date": 1539899247, "creation_date": 1539801466, "last_edit_date": 1539803562, "question_id": 52861540, "link": "https://stackoverflow.com/questions/52861540/is-the-glibcxx-stl-incorrect-in-its-implementation-of-stdvalarraysum", "title": "Is the glibcxx STL incorrect in its implementation of std::valarray::sum()?", "body": "<p>I was toying with <a href=\"https://en.cppreference.com/w/cpp/numeric/valarray\" rel=\"noreferrer\">valarrays</a> when I hit something I consider a bug in my compiler's STL implementation. Here is the smallest example I could produce:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iomanip&gt;\n#include &lt;valarray&gt;\n\nusing namespace std;\n\nint main()\n{\n    valarray&lt;int&gt; Y(0xf00d, 1);\n    valarray&lt;valarray&lt;int&gt;&gt; X(Y, 1);\n    cout &lt;&lt; \"Y[0]           = \" &lt;&lt; std::hex &lt;&lt; Y[0]       &lt;&lt; '\\n';\n    cout &lt;&lt; \"X[0][0]        = \" &lt;&lt; std::hex &lt;&lt; X[0][0]    &lt;&lt; '\\n';\n    cout &lt;&lt; \"X[0].size()    = \" &lt;&lt; X[0].size()            &lt;&lt; '\\n';\n    cout &lt;&lt; \"X.sum().size() = \" &lt;&lt; X.sum().size()         &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>This will output:</p>\n\n<pre><code>$ g++ -std=c++17 -O2 -Wall -pedantic -pthread main.cpp &amp;&amp; ./a.out\nY[0]           = f00d\nX[0][0]        = f00d\nX[0].size()    = 1\nX.sum().size() = 0\n</code></pre>\n\n<p>You can compile and run it at <a href=\"https://coliru.stacked-crooked.com/a/2836e4e379529a10\" rel=\"noreferrer\">coliru</a></p>\n\n<p>Why do I consider this a bug ? Because according to the standard (26.6.2.8)</p>\n\n<blockquote>\n  <p><strong>T sum() const;</strong></p>\n  \n  <p>This function may only be instantiated for a type T to\n  which operator+= can be applied. This function returns the sum of all\n  the elements of the array. If the array has length 0, the behavior\n  is undefined. If the array has length 1, sum() returns the value of\n  element 0. Otherwise, the returned value is calculated by applying\n  operator+= to a copy of an element of the array and all other elements\n  of the array in an unspecified order.</p>\n</blockquote>\n\n<p>valarray does have a <a href=\"https://en.cppreference.com/w/cpp/numeric/valarray/operator_arith2\" rel=\"noreferrer\">+= operator</a></p>\n\n<p>So I would expect <code>X.sum()</code> to have the same value than <code>X[0]</code>. But it is clearly not the case, because its size is 0 instead of 1.</p>\n\n<p>I looked in the implementation of <code>sum()</code> and tracked it back to this piece of code:</p>\n\n<pre><code>  //\n  // Compute the sum of elements in range [__f, __l)\n  // This is a naive algorithm.  It suffers from cancelling.\n  // In the future try to specialize\n  // for _Tp = float, double, long double using a more accurate\n  // algorithm.\n  //\n  template&lt;typename _Tp&gt;\n    inline _Tp\n    __valarray_sum(const _Tp* __f, const _Tp* __l)\n    {\n      _Tp __r = _Tp();\n      while (__f != __l)\n        __r += *__f++;\n      return __r;\n    }\n</code></pre>\n\n<p>And we understand where the problem comes from. The code accumulates the sum into <code>__r</code>, but instead of initializing <code>__r</code> with the first item in the valarray, it is default constructed. The default constructor for valarray creates an array of size 0. And so the final result is still a valarray of size 0.</p>\n\n<p>Is my understanding of the standard valid (and glibcxx STL has a bug)? Or should I be corrected?</p>\n\n<p>For the record, I am using g++ 7.3.0 under cygwin, but it is reproduced on coliru which probably isn't running under cygwin...</p>\n"}, {"tags": ["c++", "elf", "radare2"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1539799771, "post_id": 52860915, "comment_id": 92636697, "body": "So, why the C language tag? The C language doesn&#39;t support <code>std::string</code>."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 1, "creation_date": 1539800563, "post_id": 52860915, "comment_id": 92637077, "body": "Try adding <code>-g</code>  flag to the g++ command."}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1539843942, "post_id": 52860915, "comment_id": 92649728, "body": "@Thomas: because I&#39;m generally interested how I can generate a call graph down to the standard library an this is not limited to C++ but (in my case) to C and C++"}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1539843991, "post_id": 52860915, "comment_id": 92649750, "body": "@Ripi2: this has no effect - actually I just forgot to add it to the line in my question"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1539844970, "post_id": 52860915, "comment_id": 92650139, "body": "this might help: <a href=\"https://stackoverflow.com/questions/24095091/what-does-compilation-flag-static-really-means-for-gcc\" title=\"what does compilation flag static really means for gcc\">stackoverflow.com/questions/24095091/&hellip;</a>"}, {"owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "edited": false, "score": 0, "creation_date": 1539849600, "post_id": 52860915, "comment_id": 92652513, "body": "Can you elaborate in which way this might help? I&#39;ve added <code>-static</code> to link all dependencies and I see all references to functions called by <code>main()</code> disappear which is not what I expected. (I would expect references to symbols located in the statically linked standard libraries)"}], "owner": {"reputation": 6810, "user_id": 1668622, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/2RRcb.png?s=128&g=1", "display_name": "frans", "link": "https://stackoverflow.com/users/1668622/frans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539844009, "creation_date": 1539798886, "last_edit_date": 1539844009, "question_id": 52860915, "link": "https://stackoverflow.com/questions/52860915/why-does-radare2-return-an-empty-list-of-imports-for-a-non-empty-main", "title": "Why does radare2 return an empty list of imports for a non empty main()?", "body": "<p>I have the following little program I want to generate a call graph for:</p>\n\n<pre><code>#include &lt;string&gt;\n\nint main() {\n  auto s = std::string(\"hello\");\n  s += \" welt\";\n  return 0;\n}\n</code></pre>\n\n<p>I compile it in a way which I hope preserves all information in order to be sure all required symbols can be found in the binary:</p>\n\n<pre><code>g++ foo.cpp -O0 -fno-function-cse -fomit-frame-pointer\n</code></pre>\n\n<p>Then I run <code>radare2</code> to generate a call graph, format it using Python's <code>pprint</code> and search for <code>sym.main</code>:</p>\n\n<pre><code>radare2 -qAc 'agCj' a.out \\\n    | python3 -c \"import sys, json, pprint; pprint.pprint(json.load(sys.stdin))\" \\\n    | grep -C 5 sym.main\n</code></pre>\n\n<p>The output contains:</p>\n\n<pre><code>{'imports': ['sym.std::allocator_char_::allocator',\n              'sym.std::__cxx11::basic_string_char_std::char_traits_char__std::allocator_char__::basic_string_charconst__std::allocator_char_const',\n              'sym.std::allocator_char_::_allocator',\n              'sym.std::__cxx11::basic_string_char_std::char_traits_char__std::allocator_char__::operator___charconst',\n              'sym.std::__cxx11::basic_string_char_std::char_traits_char__std::allocator_char__::_basic_string'],\n  'name': 'sym.main',\n  'size': 88}\n</code></pre>\n\n<p>Which means (at least I think so) that <code>main()</code> contains calls to the listed symbols.</p>\n\n<p>When I now repeat everything but adding <code>-static</code> to the <code>g++</code> call, the <code>sym.main</code> entry does not contain any symbol any more:</p>\n\n<pre><code>g++ foo.cpp -O0 -g -static -fno-function-cse -fomit-frame-pointer\n</code></pre>\n\n<p>results in </p>\n\n<pre><code>{'imports': [], 'name': 'sym.main', 'size': 92},\n</code></pre>\n\n<p>Is there anything I can do about this? How can I see calls to the standard libraries as well when they are glued to the binary?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1539798414, "post_id": 52860778, "comment_id": 92636038, "body": "<i>I don&#39;t want to use strings and then convert them into char* on the fly</i> Why?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1539798538, "post_id": 52860778, "comment_id": 92636111, "body": "you <b>are</b> using strings, why do you want it the hard way, when you could use <code>std::string</code>?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1539798583, "post_id": 52860778, "comment_id": 92636123, "body": "btw what is a <code>const char* char*</code> ? Do you mean <code>const char*</code> ?"}, {"owner": {"reputation": 371, "user_id": 1481126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e79d4db5d8501cbfdaacfaf8150027?s=128&d=identicon&r=PG", "display_name": "user1481126", "link": "https://stackoverflow.com/users/1481126/user1481126"}, "edited": false, "score": 0, "creation_date": 1539798616, "post_id": 52860778, "comment_id": 92636137, "body": "I&#39;m looking for a simpler/cleaner/faster solution that doesn&#39;t require multiple conversions. If it exists."}, {"owner": {"reputation": 371, "user_id": 1481126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e79d4db5d8501cbfdaacfaf8150027?s=128&d=identicon&r=PG", "display_name": "user1481126", "link": "https://stackoverflow.com/users/1481126/user1481126"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1539798887, "post_id": 52860778, "comment_id": 92636281, "body": "@user463035818 edited"}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 0, "creation_date": 1539799141, "post_id": 52860778, "comment_id": 92636387, "body": "Whats wrong with a <code>std::vector&lt;char const*&gt;</code>?"}], "owner": {"reputation": 371, "user_id": 1481126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e79d4db5d8501cbfdaacfaf8150027?s=128&d=identicon&r=PG", "display_name": "user1481126", "link": "https://stackoverflow.com/users/1481126/user1481126"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539799044, "creation_date": 1539798341, "last_edit_date": 1539799044, "question_id": 52860778, "link": "https://stackoverflow.com/questions/52860778/an-easy-to-initialize-maintain-and-use-class-arrays-of-const-char", "title": "An easy to initialize maintain and use class arrays of const char*?", "body": "<p>I have an external API function that accepts (<code>const char* const*</code>) as an argument. I need to come up with an easy way to create such arrays in my class (there are many arrays and function calls), initialise these array some time after a class instance is initialized. I'm also looking for a clean one line syntax for initializing these arrays.</p>\n\n<p>I would be happy with the code below, except the static variable is not visible outside the function:</p>\n\n<pre><code>class myClass\n{\npublic:\n    template&lt;typename... Ts&gt; void SetVar_RequiredExtensions(Ts... args) {\n        const int size = sizeof...(args);\n        static char RequiredExtensions[size][MAX_SIZE] = {args...};\n    }\n    template&lt;typename... Ts&gt; void SetVar_RequiredDevicenames(Ts... args) {\n        const int size = sizeof...(args);\n        static char RequiredDevicenames[size][MAX_SIZE] = {args...};\n    }\n}\n\n// usage\n\nmyClass mc;\n...\nmc.SetVar_RequiredExtensions( \"Extension one\", \"Extension two\", ... );\nmc.SetVar_RequiredDevicenames( \"Name one\", \"Name two\", ... );\n...\n\n// const char* const*\n\nexternalAPIfunctionCall(mc.RequiredExtensions); \nexternalAPIfunctionCall(mc.RequiredDevicenames);\n...\n</code></pre>\n\n<p>Basically, I'm looking for something like:</p>\n\n<pre><code>mc.whateverThatReflectsVariableName \"Extension one\", \"Extension two\", ... ;\nexternalAPIfunctionCall(mc.whateverThatReflectsVariableName); \n</code></pre>\n\n<p>I don't want to use strings and then convert them into <code>char*</code> on the fly. </p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1539797292, "post_id": 52860503, "comment_id": 92635501, "body": "Your code <a href=\"http://coliru.stacked-crooked.com/a/ab8a2b791fd34e72\" rel=\"nofollow noreferrer\">compiles just fine on g++</a> as C++17. What C++ version are you compiling against?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 11, "creation_date": 1539797299, "post_id": 52860503, "comment_id": 92635502, "body": "Try including the appropriate header: <a href=\"https://en.cppreference.com/w/cpp/algorithm/swap\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/swap</a> . (it&#39;s <code>#include &lt;utility&gt;</code>)"}, {"owner": {"reputation": 13, "user_id": 9535606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c80932613d565d01e0a8cb3db8c922?s=128&d=identicon&r=PG&f=1", "display_name": "F.Ferlande", "link": "https://stackoverflow.com/users/9535606/f-ferlande"}, "edited": false, "score": 0, "creation_date": 1539846354, "post_id": 52860503, "comment_id": 92650803, "body": "hitting &quot;g++ -- version&quot; gives me 8.1.0 as a version"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9535606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c80932613d565d01e0a8cb3db8c922?s=128&d=identicon&r=PG&f=1", "display_name": "F.Ferlande", "link": "https://stackoverflow.com/users/9535606/f-ferlande"}, "edited": false, "score": 0, "creation_date": 1539846569, "post_id": 52862356, "comment_id": 92650899, "body": "I tried with #include &lt;utility&gt; but it doesn&#39;t seem to change anything. Actually, I tried on Linux and it works just fine, so could it be a configuration problem with my IDE ? Basically I just downloaded Eclipse IDE for C/C++ Developers, and then some distribution of MinGW (and didn&#39;t forgot to add C:\\MinGW\\bin to the path)"}, {"owner": {"reputation": 7363, "user_id": 1678770, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9afe9e6d4e0264da3d228c79162377f8?s=128&d=identicon&r=PG", "display_name": "Human-Compiler", "link": "https://stackoverflow.com/users/1678770/human-compiler"}, "reply_to_user": {"reputation": 13, "user_id": 9535606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c80932613d565d01e0a8cb3db8c922?s=128&d=identicon&r=PG&f=1", "display_name": "F.Ferlande", "link": "https://stackoverflow.com/users/9535606/f-ferlande"}, "edited": false, "score": 0, "creation_date": 1539865521, "post_id": 52862356, "comment_id": 92661328, "body": "It could be an issue with the configuration (e.g. eclipse using incorrect include paths or something), or even just an issue with bad indexing that needs to be updated. The index in Eclipse can sometimes get stale -- which requires rebuilding the index before errors go away."}, {"owner": {"reputation": 7363, "user_id": 1678770, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9afe9e6d4e0264da3d228c79162377f8?s=128&d=identicon&r=PG", "display_name": "Human-Compiler", "link": "https://stackoverflow.com/users/1678770/human-compiler"}, "reply_to_user": {"reputation": 13, "user_id": 9535606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c80932613d565d01e0a8cb3db8c922?s=128&d=identicon&r=PG&f=1", "display_name": "F.Ferlande", "link": "https://stackoverflow.com/users/9535606/f-ferlande"}, "edited": false, "score": 0, "creation_date": 1539866073, "post_id": 52862356, "comment_id": 92661678, "body": "The error message you are getting <i>may still be legitimate</i> for a different standard library and/or version... Would you happen to know what the <code>__cplusplus</code> symbol is evaluating to in Eclipse&#39;s preprocessor? It can sometimes be incorrectly set to <code>199711L</code> (C++98), when it should be a more modern one. This will depend on the language settings of the project, but can be manually adjusted in Eclipse&#39;s settings. C++98 defined <code>swap</code> in <code>&lt;algorithm&gt;</code>, and C++11 moved it to <code>&lt;utility&gt;</code> -- so it&#39;s possible the IDE is preprocessing with a different C++ version than you are compiling with"}, {"owner": {"reputation": 13, "user_id": 9535606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c80932613d565d01e0a8cb3db8c922?s=128&d=identicon&r=PG&f=1", "display_name": "F.Ferlande", "link": "https://stackoverflow.com/users/9535606/f-ferlande"}, "edited": false, "score": 0, "creation_date": 1539875219, "post_id": 52862356, "comment_id": 92667683, "body": "If I&#39;m not mistaken, the __cplusplus symbol is evaluated at 201402. But I agree, I think something was definitely wrong between the IDE preprocessor and the compiler. I tried to install another distribution of MinGW and it worked perfectly fine. Thanks a lot !"}], "tags": [], "owner": {"reputation": 7363, "user_id": 1678770, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9afe9e6d4e0264da3d228c79162377f8?s=128&d=identicon&r=PG", "display_name": "Human-Compiler", "link": "https://stackoverflow.com/users/1678770/human-compiler"}, "is_accepted": false, "score": 1, "last_activity_date": 1539805145, "last_edit_date": 1539805145, "creation_date": 1539804844, "answer_id": 52862356, "question_id": 52860503, "link": "https://stackoverflow.com/questions/52860503/c-stdswap-invalid-arguments/52862356#52862356", "title": "C++ std::swap invalid arguments", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/algorithm/swap\" rel=\"nofollow noreferrer\"><code>std::swap</code></a> is defined in the header <code>&lt;utility&gt;</code>. Include the header first, and this will succeed.</p>\n\n<p>The overloads being displayed in the error appear to refer to other <code>std::swap</code> implementations, which may be visible by the inclusion of <code>&lt;iostream&gt;</code>. For example, <code>std::swap</code> for <code>std::__cxx11::basic_string</code> (<code>std::string</code>) is defined in <code>&lt;string&gt;</code> -- and your implementation of <code>&lt;iostream&gt;</code> likely includes <code>string</code> (or at least forward-declares relevant parts) as part of its implementation, which makes the <code>swap</code> overload visible.</p>\n"}], "owner": {"reputation": 13, "user_id": 9535606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c80932613d565d01e0a8cb3db8c922?s=128&d=identicon&r=PG&f=1", "display_name": "F.Ferlande", "link": "https://stackoverflow.com/users/9535606/f-ferlande"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "closed_date": 1539807276, "answer_count": 1, "score": -3, "last_activity_date": 1539805145, "creation_date": 1539797186, "last_edit_date": 1539797506, "question_id": 52860503, "link": "https://stackoverflow.com/questions/52860503/c-stdswap-invalid-arguments", "closed_reason": "Not suitable for this site", "title": "C++ std::swap invalid arguments", "body": "<p>I have been trying to use the <code>std::swap</code> function in C++:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char * argv[]){\n    int i(2);\n    int j(3);\n    std::cout &lt;&lt; i &lt;&lt; std::endl &lt;&lt; j &lt;&lt; std::endl;\n    using std::swap;\n    swap(i,j);\n    std::cout &lt;&lt; i &lt;&lt; std::endl &lt;&lt; j &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>But I can't figure out why I have this error message in the editor under the swap function: </p>\n\n<pre><code>Invalid arguments '\nCandidates are:\nstd::enable_if&lt;74 0 value 14 std::__and_ 3 14 std::__not_ 1 14 std::__is_tuple_like 1 #0 14 std::is_move_constructible 1 #0 14 std::is_move_assignable 1 #074 0 value 14 std::__and_ 3 14 std::__not_ 1 14 std::__is_tuple_like 1 #0 14 std::is_move_constructible 1 #0 14 std::is_move_assignable 1 #0,void&gt;::type swap(#0 &amp;, #0 &amp;)\nstd::enable_if&lt;74 0 value 14 std::__and_ 2 14 std::__is_swappable 1 #0 14 std::__is_swappable 1 #174 0 value 14 std::__and_ 2 14 std::__is_swappable 1 #0 14 std::__is_swappable 1 #1,void&gt;::type swap(std::pair&lt;#0,#1&gt; &amp;, std::pair&lt;#0,#1&gt; &amp;)\nstd::enable_if&lt;bool15 7 74 0 value 14 std::__and_ 2 14 std::__is_swappable 1 #0 14 std::__is_swappable 1 #1 0,void&gt;::type swap(std::pair&lt;#0,#1&gt; &amp;, std::pair&lt;#0,#1&gt; &amp;)\nvoid swap(std::__cxx11::basic_string&lt;#0,#1,#2&gt; &amp;, std::__cxx11::basic_string&lt;#0,#1,#2&gt; &amp;)\nstd::enable_if&lt;74 0 value 14 std::__is_swappable 1 #074 0 value 14 std::__is_swappable 1 #0,void&gt;::type swap(#0 (&amp;)[3 #1 0], #0 (&amp;)[3 #1 0])\n'\n</code></pre>\n\n<p>What is particularly strange is that it appears only in the editor but when I execute, it seems to work perfectly.</p>\n\n<p>I've been trying to restart multiple times, and I also tried with different types of objects but nothing changed.</p>\n\n<p>I am using Eclipse on Windows with MinGW Toolchain.</p>\n"}, {"tags": ["android", "c++", "android-studio", "gradle", "android-gradle-plugin"], "answers": [{"comments": [{"owner": {"reputation": 398, "user_id": 867692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ab8dcf67a0d98dae9d1ffe4159f906?s=128&d=identicon&r=PG", "display_name": "chrisvarnz", "link": "https://stackoverflow.com/users/867692/chrisvarnz"}, "edited": false, "score": 0, "creation_date": 1540387028, "post_id": 52862534, "comment_id": 92846254, "body": "Does the IDE correctly react to these defines for you, i.e. shadowing code paths removed by the preprocessor? We pass preprocessor defines the way you describe but the IDE does not correctly update (still greys out active code paths)."}, {"owner": {"reputation": 487, "user_id": 6241424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ddb894d629c3cebb838a758aade708?s=128&d=identicon&r=PG&f=1", "display_name": "Hongkun Wang", "link": "https://stackoverflow.com/users/6241424/hongkun-wang"}, "reply_to_user": {"reputation": 398, "user_id": 867692, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/12ab8dcf67a0d98dae9d1ffe4159f906?s=128&d=identicon&r=PG", "display_name": "chrisvarnz", "link": "https://stackoverflow.com/users/867692/chrisvarnz"}, "edited": false, "score": 0, "creation_date": 1540481078, "post_id": 52862534, "comment_id": 92890897, "body": "I made a quick test. The result is that the IDE does not grey out the disabled code blocks, which is bad. But the good thing is that the prerpocessors are indeed passed in, so they take effect during compilation. Hope Android Studio will improve this in the future."}], "tags": [], "owner": {"reputation": 487, "user_id": 6241424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ddb894d629c3cebb838a758aade708?s=128&d=identicon&r=PG&f=1", "display_name": "Hongkun Wang", "link": "https://stackoverflow.com/users/6241424/hongkun-wang"}, "is_accepted": false, "score": 2, "last_activity_date": 1539805561, "creation_date": 1539805561, "answer_id": 52862534, "question_id": 52860467, "link": "https://stackoverflow.com/questions/52860467/android-studio-how-to-define-custom-macros-in-build-gradle-for-different-build/52862534#52862534", "title": "Android Studio: How to define custom macros in build.gradle (for different build variants) and let native C/C++ code detect them?", "body": "<p>Found answer myself: The \"cmake\" method belongs to class \"externalNativeBuild\" class, therefore it needs to be embedded inside \"externalNativeBuild\" block, like this:</p>\n\n<pre><code>release\n{\n        externalNativeBuild\n        {\n            cmake\n            {\n                cppFlags += \"-DRELEASE\"\n            }\n        }\n        ...\n}\n</code></pre>\n\n<p>Now all the preprocessors defined in <strong>build.gradle</strong> are passed into the C/C++ compiler.</p>\n"}], "owner": {"reputation": 487, "user_id": 6241424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1ddb894d629c3cebb838a758aade708?s=128&d=identicon&r=PG&f=1", "display_name": "Hongkun Wang", "link": "https://stackoverflow.com/users/6241424/hongkun-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539805561, "creation_date": 1539797045, "question_id": 52860467, "link": "https://stackoverflow.com/questions/52860467/android-studio-how-to-define-custom-macros-in-build-gradle-for-different-build", "title": "Android Studio: How to define custom macros in build.gradle (for different build variants) and let native C/C++ code detect them?", "body": "<p>I need to define some custom macros such as \"<strong>DEBUG</strong>\", \"<strong>RELEASE</strong>\", \"<strong>DEMO_VER</strong>\" and \"<strong>FULL_VER</strong>\" in Android Studio <strong>build.gradle</strong> file so that my C/C++ code can detect them like:</p>\n\n<pre><code>#ifdef DEBUG\n   ...\n#else //RELEASE\n   ...\n#endif\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#ifdef DEMO_VER\n   ...\n#else //FULL_VER\n   ...\n#endif\n</code></pre>\n\n<p>My understanding is that these macros should be defined as g++ compiler options in the build variant blocks like the following code:</p>\n\n<pre><code>buildTypes \n{\n    release \n    {\n        cmake   &lt;&lt;====== Error!!!!!: could not find method cmake() for ...BuildType\n        {\n            cppFlags += \"-DRELEASE\"\n        }\n    }\n    debug \n    {\n        cmake   &lt;&lt;====== Error!!!!!: could not find method cmake() for ...BuildType\n        {\n            cppFlags += \"-DDEBUG\"\n        }\n    }\n}\nflavorDimensions \"version\"\nproductFlavors \n{\n    demo \n    {\n        cmake   &lt;&lt;====== Error!!!!!: could not find method cmake() for ...ProductFlavor\n        {\n            cppFlags += \"-DEMO_VER\"\n        }\n    }\n    full\n    {\n        cmake   &lt;&lt;====== Error!!!!!: could not find method cmake() for ...ProductFlavor\n        {\n            cppFlags += \"-DFULL_VER\"\n        }\n    }\n}\n</code></pre>\n\n<p>The problem is that I can not use \"<strong>cmake</strong>\" inside either \"<strong>BuildType</strong>\" nor \"<strong>ProductFlavor</strong>\", the method can not be found. \nSo what is the correct way to pass in compiler macros for different product flavors / build types?</p>\n"}, {"tags": ["c++", "https", "openssl", "ssl-certificate", "boost-asio"], "answers": [{"tags": [], "owner": {"reputation": 164, "user_id": 3670011, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e394f15d69072ee397b52b51e8f4a448?s=128&d=identicon&r=PG&f=1", "display_name": "user3670011", "link": "https://stackoverflow.com/users/3670011/user3670011"}, "is_accepted": true, "score": 3, "last_activity_date": 1539808756, "creation_date": 1539808756, "answer_id": 52863240, "question_id": 52860463, "link": "https://stackoverflow.com/questions/52860463/boost-asio-openssl-https-get-certificate-trouble/52863240#52863240", "title": "Boost.Asio/OpenSSL HTTPS GET certificate trouble", "body": "<p>I did some digging and learned that the switch <code>-servername</code> enables something called server name indication (SNI) and I found a way to enable it in code.</p>\n\n<p>This is added to the <code>client</code> constructor:</p>\n\n<pre><code>// Set SNI Hostname (many hosts need this to handshake successfully)\nif (!SSL_set_tlsext_host_name(stream.native_handle(), host))\n{\n    boost::system::error_code ec((int)ERR_get_error(), boost::asio::error::get_ssl_category());\n    throw boost::system::system_error(ec);\n}\n</code></pre>\n\n<p>The code still doesn't quite work (it waits for an async callback to happen and times out) but this solves the original problem presented in the question.</p>\n"}], "owner": {"reputation": 164, "user_id": 3670011, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e394f15d69072ee397b52b51e8f4a448?s=128&d=identicon&r=PG&f=1", "display_name": "user3670011", "link": "https://stackoverflow.com/users/3670011/user3670011"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 0, "accepted_answer_id": 52863240, "answer_count": 1, "score": 1, "last_activity_date": 1539808756, "creation_date": 1539797034, "question_id": 52860463, "link": "https://stackoverflow.com/questions/52860463/boost-asio-openssl-https-get-certificate-trouble", "title": "Boost.Asio/OpenSSL HTTPS GET certificate trouble", "body": "<p>I am using Boost Asio and my goal is to send an HTTPS GET request to www.realmofthemadgod.com. I found some code on GitHub claiming to do that which I've included below but first I'll go through some observations:</p>\n\n<ul>\n<li>The code fails with an error <code>sslv3 alert handshake failure</code>.</li>\n<li>On command line, the command <code>openssl s_client -connect www.realmofthemadgod.com:443</code> results in the same error and some other messages about no certificates being available</li>\n<li>However, the command <code>openssl s_client -connect www.realmofthemadgod.com:443 -servername www.realmofthemadgod.com</code> does find the correct certificate!</li>\n</ul>\n\n<p>Now, the problem is how do I achieve what the <code>-servername</code> switch does, in code.</p>\n\n<p>What I have so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;istream&gt;\n#include &lt;ostream&gt;\n#include &lt;string&gt;\n\n#pragma comment(lib, \"libcryptoMD.lib\")\n#pragma comment(lib, \"libsslMD.lib\")\n\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/asio/ssl.hpp&gt;\n#include &lt;boost/bind.hpp&gt;\n\nusing boost::asio::ip::tcp;\n\nclass client\n{\npublic:\n    client(boost::asio::io_service&amp; io_service, boost::asio::ssl::context&amp; context, const std::string&amp; server, const std::string&amp; path)\n        : resolver_(io_service), socket_(io_service, context)\n    {\n        // Form the request. We specify the \"Connection: close\" header so that the\n        // server will close the socket after transmitting the response. This will\n        // allow us to treat all data up until the EOF as the content.\n        std::ostream request_stream(&amp;request_);\n        request_stream &lt;&lt; \"GET \" &lt;&lt; path &lt;&lt; \" HTTP/1.1\\r\\n\";\n        request_stream &lt;&lt; \"Host: \" &lt;&lt; server &lt;&lt; \"\\r\\n\";\n        request_stream &lt;&lt; \"Accept: */*\\r\\n\";\n        request_stream &lt;&lt; \"Connection: close\\r\\n\\r\\n\";\n\n        // Start an asynchronous resolve to translate the server and service names\n        // into a list of endpoints.\n        tcp::resolver::query query(server, \"https\");\n        resolver_.async_resolve(query,\n            boost::bind(&amp;client::handle_resolve, this,\n            boost::asio::placeholders::error,\n            boost::asio::placeholders::iterator));\n    }\n\nprivate:\n\n    void handle_resolve(const boost::system::error_code&amp; err,\n        tcp::resolver::iterator endpoint_iterator)\n    {\n        if (!err)\n        {\n            std::cout &lt;&lt; \"Resolve OK\" &lt;&lt; \"\\n\";\n            socket_.set_verify_mode(boost::asio::ssl::verify_peer);\n            //socket_.set_verify_mode(boost::asio::ssl::verify_none);\n            socket_.set_verify_callback(\n                boost::bind(&amp;client::verify_certificate, this, _1, _2));\n\n            boost::asio::async_connect(socket_.lowest_layer(), endpoint_iterator,\n                boost::bind(&amp;client::handle_connect, this,\n                boost::asio::placeholders::error));\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Error resolve: \" &lt;&lt; err.message() &lt;&lt; \"\\n\";\n        }\n    }\n\n    bool verify_certificate(bool preverified,\n        boost::asio::ssl::verify_context&amp; ctx)\n    {\n        // The verify callback can be used to check whether the certificate that is\n        // being presented is valid for the peer. For example, RFC 2818 describes\n        // the steps involved in doing this for HTTPS. Consult the OpenSSL\n        // documentation for more details. Note that the callback is called once\n        // for each certificate in the certificate chain, starting from the root\n        // certificate authority.\n\n        // In this example we will simply print the certificate's subject name.\n        char subject_name[256];\n        X509* cert = X509_STORE_CTX_get_current_cert(ctx.native_handle());\n        X509_NAME_oneline(X509_get_subject_name(cert), subject_name, 256);\n        std::cout &lt;&lt; \"Verifying \" &lt;&lt; subject_name &lt;&lt; \"\\n\";\n\n        return preverified;\n    }\n\n    void handle_connect(const boost::system::error_code&amp; err)\n    {\n        if (!err)\n        {\n            std::cout &lt;&lt; \"Connect OK \" &lt;&lt; \"\\n\";\n            socket_.async_handshake(boost::asio::ssl::stream_base::client,\n                boost::bind(&amp;client::handle_handshake, this,\n                boost::asio::placeholders::error));\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Connect failed: \" &lt;&lt; err.message() &lt;&lt; \"\\n\";\n        }\n    }\n\n    void handle_handshake(const boost::system::error_code&amp; error)\n    {\n        if (!error)\n        {\n            std::cout &lt;&lt; \"Handshake OK \" &lt;&lt; \"\\n\";\n            std::cout &lt;&lt; \"Request: \" &lt;&lt; \"\\n\";\n            const char* header = boost::asio::buffer_cast&lt;const char*&gt;(request_.data());\n            std::cout &lt;&lt; header &lt;&lt; \"\\n\";\n\n            // The handshake was successful. Send the request.\n            boost::asio::async_write(socket_, request_,\n                boost::bind(&amp;client::handle_write_request, this,\n                boost::asio::placeholders::error));\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Handshake failed: \" &lt;&lt; error.message() &lt;&lt; \"\\n\";\n        }\n    }\n\n    void handle_write_request(const boost::system::error_code&amp; err)\n    {\n        if (!err)\n        {\n            // Read the response status line. The response_ streambuf will\n            // automatically grow to accommodate the entire line. The growth may be\n            // limited by passing a maximum size to the streambuf constructor.\n            boost::asio::async_read_until(socket_, response_, \"\\r\\n\",\n                boost::bind(&amp;client::handle_read_status_line, this,\n                boost::asio::placeholders::error));\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Error write req: \" &lt;&lt; err.message() &lt;&lt; \"\\n\";\n        }\n    }\n\n    void handle_read_status_line(const boost::system::error_code&amp; err)\n    {\n        if (!err)\n        {\n            // Check that response is OK.\n            std::istream response_stream(&amp;response_);\n            std::string http_version;\n            response_stream &gt;&gt; http_version;\n            unsigned int status_code;\n            response_stream &gt;&gt; status_code;\n            std::string status_message;\n            std::getline(response_stream, status_message);\n            if (!response_stream || http_version.substr(0, 5) != \"HTTP/\")\n            {\n                std::cout &lt;&lt; \"Invalid response\\n\";\n                return;\n            }\n            if (status_code != 200)\n            {\n                std::cout &lt;&lt; \"Response returned with status code \";\n                std::cout &lt;&lt; status_code &lt;&lt; \"\\n\";\n                return;\n            }\n            std::cout &lt;&lt; \"Status code: \" &lt;&lt; status_code &lt;&lt; \"\\n\";\n\n            // Read the response headers, which are terminated by a blank line.\n            boost::asio::async_read_until(socket_, response_, \"\\r\\n\\r\\n\",\n                boost::bind(&amp;client::handle_read_headers, this,\n                boost::asio::placeholders::error));\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Error: \" &lt;&lt; err.message() &lt;&lt; \"\\n\";\n        }\n    }\n\n    void handle_read_headers(const boost::system::error_code&amp; err)\n    {\n        if (!err)\n        {\n            // Process the response headers.\n            std::istream response_stream(&amp;response_);\n            std::string header;\n            while (std::getline(response_stream, header) &amp;&amp; header != \"\\r\")\n                std::cout &lt;&lt; header &lt;&lt; \"\\n\";\n            std::cout &lt;&lt; \"\\n\";\n\n            // Write whatever content we already have to output.\n            if (response_.size() &gt; 0)\n                std::cout &lt;&lt; &amp;response_;\n\n            // Start reading remaining data until EOF.\n            boost::asio::async_read(socket_, response_,\n                boost::asio::transfer_at_least(1),\n                boost::bind(&amp;client::handle_read_content, this,\n                boost::asio::placeholders::error));\n        }\n        else\n        {\n            std::cout &lt;&lt; \"Error: \" &lt;&lt; err &lt;&lt; \"\\n\";\n        }\n    }\n\n    void handle_read_content(const boost::system::error_code&amp; err)\n    {\n        if (!err)\n        {\n            // Write all of the data that has been read so far.\n            std::cout &lt;&lt; &amp;response_;\n\n            // Continue reading remaining data until EOF.\n            boost::asio::async_read(socket_, response_,\n                boost::asio::transfer_at_least(1),\n                boost::bind(&amp;client::handle_read_content, this,\n                boost::asio::placeholders::error));\n        }\n        else if (err != boost::asio::error::eof)\n        {\n            std::cout &lt;&lt; \"Error: \" &lt;&lt; err &lt;&lt; \"\\n\";\n        }\n    }\n\n    tcp::resolver resolver_;\n    boost::asio::ssl::stream&lt;boost::asio::ip::tcp::socket&gt; socket_;\n    boost::asio::streambuf request_;\n    boost::asio::streambuf response_;\n};\n\nint main(int argc, char* argv[])\n{\n    try\n    {\n        //boost::asio::ssl::context ctx(boost::asio::ssl::context::sslv23);\n        boost::asio::ssl::context ctx(boost::asio::ssl::context::tlsv12);\n        ctx.set_default_verify_paths();\n\n        boost::asio::io_service io_service;\n        client c(io_service, ctx, \"www.realmofthemadgod.com\", \"/\");\n        io_service.run();\n    }\n    catch (std::exception&amp; e)\n    {\n        std::cout &lt;&lt; \"Exception: \" &lt;&lt; e.what() &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "constants"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1539796780, "post_id": 52860360, "comment_id": 92635281, "body": "<code>m_otherClass-&gt;setOtherMember()</code> doesn&#39;t change the member <code>m_otherClass</code>, it just changes the thing that the pointer is pointing to at the time."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1539796960, "creation_date": 1539796960, "answer_id": 52860441, "question_id": 52860360, "link": "https://stackoverflow.com/questions/52860360/c-const-problems-when-member-value-is-changed-from-pointer-to-non-pointer/52860441#52860441", "title": "C++ const problems when member value is changed from pointer to non-pointer", "body": "<blockquote>\n  <p>But why does this not fail then when <code>m_otherClass</code> is a pointer?</p>\n</blockquote>\n\n<p>Because it is const correct to modify an object pointed by a const pointer, as long as it is a pointer to non-const such as in your case.</p>\n\n<blockquote>\n  <p>And why does the compiler error says that passing 'const OtherClass' as 'this'argument fails, when m_otherClass has not been declared to be const?</p>\n</blockquote>\n\n<p><code>myMethod</code> is declared const. Therefore <code>this</code> is a pointer to const. Therefore the lvalue <code>this-&gt;m_otherClass</code> is also const regardless of whether the object named by the lvalue is const or not.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1539797113, "creation_date": 1539797113, "answer_id": 52860487, "question_id": 52860360, "link": "https://stackoverflow.com/questions/52860360/c-const-problems-when-member-value-is-changed-from-pointer-to-non-pointer/52860487#52860487", "title": "C++ const problems when member value is changed from pointer to non-pointer", "body": "<p>A simpler example to demonstrate the difference.</p>\n\n<pre><code>struct Foo { int m; };\n\nconst Foo f = {10}; \nf.m = 20; // Not allowed since modifying f.m modifies f.\n\nstruct Bar { int* p; };\nint i = 10;\nint j = 20;\n\nconst Bar b = {&amp;i};\n\nb.p = &amp;j;    // Not allowed since modifying b.p modifies b.\n\n*(b.p) = j;  // Allowed since it does not change b or b.p. It changes the value\n             // of what b.p points to.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 499, "user_id": 6301944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1d28c30f4337f4c4357e65e2e871851?s=128&d=identicon&r=PG&f=1", "display_name": "Bob Bills", "link": "https://stackoverflow.com/users/6301944/bob-bills"}, "is_accepted": true, "score": 1, "last_activity_date": 1539797213, "creation_date": 1539797213, "answer_id": 52860510, "question_id": 52860360, "link": "https://stackoverflow.com/questions/52860360/c-const-problems-when-member-value-is-changed-from-pointer-to-non-pointer/52860510#52860510", "title": "C++ const problems when member value is changed from pointer to non-pointer", "body": "<p>When you put const on a method, all your data members are treated as being const. And that is why you get the error when you have OtherClass as a value, since it turns into a value of <code>const OtherClass</code>.</p>\n\n<p>Now when you use a pointer of <code>OtherClass</code> you get <code>const std::unique_ptr&lt;OtherClass&gt;</code> and the const applies only to the pointer but not to the value it points to.</p>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 10518199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a91a6618cb07e094d613494ea1dafc?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa\u0142 G&#243;rczewski", "link": "https://stackoverflow.com/users/10518199/rafa%c5%82-g%c3%b3rczewski"}, "is_accepted": false, "score": 3, "last_activity_date": 1539797295, "creation_date": 1539797295, "answer_id": 52860525, "question_id": 52860360, "link": "https://stackoverflow.com/questions/52860360/c-const-problems-when-member-value-is-changed-from-pointer-to-non-pointer/52860525#52860525", "title": "C++ const problems when member value is changed from pointer to non-pointer", "body": "<p>Const qualified member functions in most cases aren't allowed to change an object's members state. This means, that every member which is not mutable can not be modified in this function body. When dealing with pointers, you just say, that you won't modify a pointer value, not a pointee itself. It is because <strong>constness of a pointer is not propagated on its pointee</strong>. </p>\n\n<p>In the upcoming standards it will be possible to change this behaviour by using <a href=\"https://en.cppreference.com/w/cpp/experimental/propagate_const\" rel=\"nofollow noreferrer\">propagate_const</a>.</p>\n"}], "owner": {"reputation": 115, "user_id": 1767560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f44ffdc9258011dbc5877432c0b99cf2?s=128&d=identicon&r=PG", "display_name": "Hippo", "link": "https://stackoverflow.com/users/1767560/hippo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 52860510, "answer_count": 4, "score": 2, "last_activity_date": 1539797860, "creation_date": 1539796668, "question_id": 52860360, "link": "https://stackoverflow.com/questions/52860360/c-const-problems-when-member-value-is-changed-from-pointer-to-non-pointer", "title": "C++ const problems when member value is changed from pointer to non-pointer", "body": "<p>I have two classes <code>TestClass</code> and <code>OtherClass</code>, where <code>TestClass</code> has a member variable of type <code>OtherClass</code> named <code>m_otherClass</code>. Note that this is <strong>not</strong> declared to be const.</p>\n\n<p>In the minimal example provided below; when <code>m_otherClass</code> is a pointer, then everything compiles and runs fine. If I change this to be a non-pointer, then I get compiler errors (the changes are commented out in the minimal example):</p>\n\n<p><em>\"Non-const function 'setOtherMember' is called on const object\"</em></p>\n\n<p><em>error: passing 'const OtherClass' as 'this' argument discards qualifiers [-fpermissive] m_otherClass.setOtherMember();</em></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nclass OtherClass {\npublic:\n    void setOtherMember() {\n        m_otherMember = 2;\n        std::cout &lt;&lt; \"Other member is now 2\" &lt;&lt; std::endl;\n    }\n\nprivate:\n    int m_otherMember = 0;\n};\n\n\nclass TestClass {\npublic:\n    TestClass(): m_otherClass(std::make_unique&lt;OtherClass&gt;())\n//  TestClass()\n    {}\n\n    void myMethod() const {\n        m_otherClass-&gt;setOtherMember();\n//      m_otherClass.setOtherMember();\n    }\nprivate:\n        std::unique_ptr&lt;OtherClass&gt; m_otherClass;\n//      OtherClass m_otherClass; // If changing to this I get the error!!\n};\n\n\nint main() {\n    TestClass testClass;\n    testClass.myMethod();\n    return 0;\n}\n</code></pre>\n\n<p>Is this because <code>myMethod()</code> is const (and then promising not to change any member variables), whereas <code>setOtherMember()</code> is non-const and is changing <code>OtherClass</code>'s member variable, and then  indirectly also the <code>m_otherClass</code> object?</p>\n\n<p>But why does this not fail then when <code>m_otherClass</code> is a pointer?\nAnd why does the compiler error says that passing 'const OtherClass' as 'this'argument fails, when <code>m_otherClass</code> has not been declared to be const?</p>\n"}, {"tags": ["c++", "segmentation-fault", "string-concatenation"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1539796521, "post_id": 52860248, "comment_id": 92635136, "body": "The &quot;some reason&quot; part is why you drop this into your debugger to find out exactly where it crashes, then run it again and step carefully up to that point while observing the behaviour of your code and the state of any relevant variables."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1539796678, "post_id": 52860248, "comment_id": 92635231, "body": "I&#39;m really confused by your <code>hex</code> implementation. It is declared to return <code>const char*</code> but you return a <code>char</code>. The char <code>h</code> is initialized with an initializer list as though it were an array. I&#39;m astonished that this apparently compiles. Have you muted your compiler warnings?"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1539796844, "post_id": 52860248, "comment_id": 92635302, "body": "Indeed, your <code>hex</code> function <a href=\"http://coliru.stacked-crooked.com/a/f3cfe25ae036182f\" rel=\"nofollow noreferrer\"><b>does not compile</b></a>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10519731, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-C0j39td_p64/AAAAAAAAAAI/AAAAAAAAFqM/YKMQEKkejVU/photo.jpg?sz=128", "display_name": "makeway4pK", "link": "https://stackoverflow.com/users/10519731/makeway4pk"}, "edited": false, "score": 0, "creation_date": 1539797371, "post_id": 52860365, "comment_id": 92635541, "body": "So, does this mean that it&#39;s impossible to return a cstring from a c++ function? I&#39;m confused. I&#39;m just a beginner and want to understand the basics, by trying dumb things like these"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "reply_to_user": {"reputation": 11, "user_id": 10519731, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-C0j39td_p64/AAAAAAAAAAI/AAAAAAAAFqM/YKMQEKkejVU/photo.jpg?sz=128", "display_name": "makeway4pK", "link": "https://stackoverflow.com/users/10519731/makeway4pk"}, "edited": false, "score": 0, "creation_date": 1539797442, "post_id": 52860365, "comment_id": 92635572, "body": "@user10519731 it&#39;s completely possibly, since C++ is mostly a superset of C. However, C-style strings force you to think about lifetime and ownership and resource management. C++&#39;s <code>std::string</code> can be used simply, safely, and correctly without thinking about any of those."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1539797605, "post_id": 52860365, "comment_id": 92635638, "body": "You can return a C-style string <i>if and only if</i> you dynamically allocate it (e.g. <code>malloc</code>), or it existed or was otherwise allocated <i>before</i> the function. If you dynamically allocate it&#39;s the responsibility of the caller of this function to eventually free it up (e.g. <code>free</code>). As C forces you to understand memory management at an extremely low level, it&#39;s usually best to avoid all that and use C++ containers like <code>std::vector</code> and <code>std::string</code> whenever possible. These are usually quick and cheap to copy, and can use references to optimize how data is stored and persisted."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1539799601, "post_id": 52860365, "comment_id": 92636615, "body": "@DanielSchepler Technically true, also super dangerous. Some knowledge should be retained and not dispensed until it&#39;s absolutely necessary."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1539796683, "creation_date": 1539796683, "answer_id": 52860365, "question_id": 52860248, "link": "https://stackoverflow.com/questions/52860248/segfault-while-using-stdstringoperator-with-function-as-param/52860365#52860365", "title": "SegFault while using std::string::operator+= with function as param", "body": "<p>Your <code>hex</code> function is returning an address to a temporary local variable, which is a huge problem, so it crashes there when that memory gets re-used.</p>\n\n<p>When that function returns <code>h</code> falls out of scope <em>immediately</em>, so any pointers to <code>h</code> are invalidated.</p>\n\n<p>Since you're using C++, just use <code>std::string</code>:</p>\n\n<pre><code>std::string hex(const char c)\n{\n    std::string h = {c / 16, c % 16, '\\0'};\n\n    for (int k = 0; k &lt; 2; k++)\n        if (h[k] &gt; 9)\n            h[k] += 'A' - 10;\n        else\n            h[k] += '0';\n\n    return h;\n}\n</code></pre>\n\n<p>Also instead of reinventing the wheel, consider using things like <a href=\"https://en.cppreference.com/w/cpp/io/manip/hex\" rel=\"nofollow noreferrer\"><code>std::hex</code></a> to do this for you <a href=\"https://stackoverflow.com/questions/11608878/c-convert-string-to-hex\">as demonstrated here</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 10519731, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-C0j39td_p64/AAAAAAAAAAI/AAAAAAAAFqM/YKMQEKkejVU/photo.jpg?sz=128", "display_name": "makeway4pK", "link": "https://stackoverflow.com/users/10519731/makeway4pk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 52860365, "answer_count": 1, "score": -3, "last_activity_date": 1539796683, "creation_date": 1539796249, "question_id": 52860248, "link": "https://stackoverflow.com/questions/52860248/segfault-while-using-stdstringoperator-with-function-as-param", "title": "SegFault while using std::string::operator+= with function as param", "body": "<p>I understand that a Segmentation Fault occurs when there's a problem with insufficiently allocated memory/misdirection by pointers.  </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nconst char *hex(char);\n\nint main(int argc, char **argv)\n{\n    string url = \"start http://www.cplusplus.com/search.do?q=\";\n    char a[2];\n\n    for (int i = 0; i &lt; argc; i++)\n    {\n        if (i != 1)\n            url += '+';\n        for (int j = 0; argv[i][j]; j++)\n        {\n            if (i == 1 &amp;&amp; j == 0 &amp;&amp; argv[i][j] == '.')\n                continue;\n            url += '%';\n\n            // a[0] = argv[i][j] / 16;\n            // a[1] = argv[i][j] % 16;\n            // for (int k = 0; k &lt; 2; k++)\n            // {\n            //  if (a[k] &gt; 9)\n            //      a[k] += 'A' - 10;\n            //  else\n            //      a[k] += '0';\n            //  url += a[k];\n            // }\n\n            url += hex(argv[i][j]);\n        }\n    }\n    system(url.c_str());\n    return 0;\n}\n\nconst char *hex(char c)\n{\n    char h = {c / 16, c % 16, '\\0'};\n    for (int k = 0; k &lt; 2; k++)\n        if (h[k] &gt; 9)\n            h[k] += 'A' - 10;\n        else\n            h[k] += '0';\n    return h;\n}\n</code></pre>\n\n<p>But for this piece of code, which is expected to work like a command for url encoding the arguments passed, there's a problem with the operator += for string class. I have followed it in the debugger and the function hex works properly(returns hexValue of char c).</p>\n\n<p>But at this line, <code>url += hex(argv[i][j]);</code> there's a segFault for some reason, argv[i][j] is char and hex() returns its hex value in form of const cstring (const char *). I even added a null character at the end, if it made any difference...</p>\n\n<p>I have even checked the std::string reference to make sure that operator accepts const char* (but that's obvious, otherwise there would be Compile-t errors, which I had none).</p>\n\n<p>Any guesses? btw, the commented code is substitute for the function-style code and works flawlessly, on Windows of course.</p>\n\n<p>Any suggestion is much appreciated, coz if this function works, it would make this bit extra portable, I know there might be library functions for url encoding but this is just practice.</p>\n"}, {"tags": ["c++", "if-statement"], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1539795325, "post_id": 52859980, "comment_id": 92634597, "body": "Shouldn&#39;t it be <code>|| enabled</code>? Since <code>|| !enabled</code> would perform a check if <b>not</b> enabled."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1539795379, "post_id": 52859980, "comment_id": 92634616, "body": "But if I use <code>!</code> that means the inverse of the result. That would mean <code>if x == 1 || not included</code>. That is not right. With exception of the first item, all others should only be checked if they <i>are</i> included."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1539795423, "post_id": 52859980, "comment_id": 92634636, "body": "@AlgirdasPreid\u017eius it&#39;s an OR, so we short circuit if the first term is <code>true</code>. Basically we&#39;ll only end up checking if <code>x == 1</code> if <code>!enabled</code> evaluates <code>false</code> (it&#39;s enabled)"}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1539795603, "post_id": 52859980, "comment_id": 92634711, "body": "OK, but if <code>!enabled</code> is <code>true</code> and <code>x == 5</code>? Won&#39;t that trigger a invalid error?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1539795605, "post_id": 52859980, "comment_id": 92634713, "body": "@scohe001 Oh, right, in short-circuiting scenario it would work correctly. My apologies."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 2, "creation_date": 1539795649, "post_id": 52859980, "comment_id": 92634729, "body": "@AndrewTruckle I drew you a truth table to try to make it a little clearer. This will evaluate <code>true</code> if <code>enabled</code> is <code>false</code> regardless of the value of <code>x</code>. But if <code>enabled</code> is <code>true</code>, it&#39;ll only be <code>true</code> if <code>x == 1</code>."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1539795900, "post_id": 52859980, "comment_id": 92634837, "body": "It works. I got to get my head around your truth table. Thank you very much."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 1, "creation_date": 1539796029, "post_id": 52859980, "comment_id": 92634899, "body": "@AndrewTruckle Happy to help! I tried to add a little explanation for the table. Let me know if you have any other questions."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1539796184, "post_id": 52859980, "comment_id": 92634971, "body": "It is starting to make sense with this extra explanations. Thank you again."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1539884522, "post_id": 52859980, "comment_id": 92672733, "body": "@OznOg from the original question: &quot;<i>But the items 1 to 4 only need to be checked if they are &#39;included&#39;. That is what the <code>LOBYTE(LOWORD(pEntry-&gt;GetStudentAssignFlags()))</code> is for.</i>&quot; I guess I wrote &quot;enabled&quot; instead of &quot;included,&quot; my bad. I&#39;ve updated the answer to better match the question. Good catch."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 3, "last_activity_date": 1550609783, "last_edit_date": 1550609783, "creation_date": 1539795236, "answer_id": 52859980, "question_id": 52859930, "link": "https://stackoverflow.com/questions/52859930/if-statement-logic-is-not-correct/52859980#52859980", "title": "If Statement logic is not correct", "body": "<p>You should use <code>(!included || x == 1)</code> to ignore checking an item if it's not included. Because of short circuiting, if <code>included</code> is false, you won't even check the other side of the OR, which is exactly what you want. </p>\n\n<p>Your if could look like:</p>\n\n<pre><code>if (pEntry-&gt;GetStudentMaterialStudyPoint(StudentAssign::kBibleReading) == 1 &amp;&amp;\n    (!LOBYTE(LOWORD(pEntry-&gt;GetStudentAssignFlags())) || pEntry-&gt;GetStudentMaterialStudyPoint(StudentAssign::kItem1) == 1) &amp;&amp;\n    ...\n</code></pre>\n\n<p>This may be a little confusing, so let's make a truth table...</p>\n\n<pre><code>included | x | !included | x == 1 | (!included || x == 1)\n------------------------------------------------------\n false   | 3 |   true    |  false |         true         \n true    | 3 |   false   |  false |         false       \n true    | 1 |   false   |  true  |         true \n</code></pre>\n\n<p>If <code>included = false</code>, then <code>!included</code> will be true, so <code>(!included || x == 1)</code> will always be true. This is what we want--if we're not included, just evaluate to true without even checking <code>x == 1</code>.</p>\n\n<p>If <code>included = true</code>, then <code>!included</code> is false, so the value of <code>(!included || x == 1)</code> will be whatever <code>x == 1</code> is. Which is again what we want. If we're included, then depend on <code>x == 1</code>.</p>\n"}], "owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 52859980, "answer_count": 1, "score": -3, "last_activity_date": 1550609783, "creation_date": 1539795069, "question_id": 52859930, "link": "https://stackoverflow.com/questions/52859930/if-statement-logic-is-not-correct", "title": "If Statement logic is not correct", "body": "<p>I have this <code>if</code> statement and it is not working:</p>\n\n<pre><code>if (pEntry-&gt;GetStudentMaterialStudyPoint(StudentAssign::kBibleReading) == 1 &amp;&amp;\n    (pEntry-&gt;GetStudentMaterialStudyPoint(StudentAssign::kItem1) == 1 &amp;&amp; LOBYTE(LOWORD(pEntry-&gt;GetStudentAssignFlags()))) &amp;&amp;\n    (pEntry-&gt;GetStudentMaterialStudyPoint(StudentAssign::kItem2) == 1 &amp;&amp; HIBYTE(LOWORD(pEntry-&gt;GetStudentAssignFlags()))) &amp;&amp;\n    (pEntry-&gt;GetStudentMaterialStudyPoint(StudentAssign::kItem3) == 1 &amp;&amp; LOBYTE(HIWORD(pEntry-&gt;GetStudentAssignFlags()))) &amp;&amp;\n    (pEntry-&gt;GetStudentMaterialStudyPoint(StudentAssign::kItem4) == 1 &amp;&amp; HIBYTE(HIWORD(pEntry-&gt;GetStudentAssignFlags()))))\n{\n    MWBValidationErrorStruct errorMWBValidation;\n\n    errorMWBValidation.iDateIndex = iDateIndex;\n    errorMWBValidation.datMeeting = pEntry-&gt;GetMeetingDate();\n    errorMWBValidation.eValidationErrorType = CChristianLifeMinistryDefines::MWBValidationErrorType::MaterialStudyPoints;\n\n    m_listValidationErrors.push_back(errorMWBValidation);\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I am trying to find out if all of the items have a value of 1. The first item (bible reading) will always be checked. But the items 1 to 4 only need to be checked if they are \"included\". That is what the <code>LOBYTE(LOWORD(pEntry-&gt;GetStudentAssignFlags()))</code> is for.</p>\n\n<p>So,</p>\n\n<pre><code>Bible Reading - 1\nItem 1 - 1\nItem 2 - 1 - Not included\nItem 3 - 1 - Not included\nItem 4 - 1 - Not included\n</code></pre>\n\n<p>In the above scenario the <code>if</code> should be <code>true</code> because both BR and Item 1 are set to 1. We ignore the other 3 items.</p>\n\n<pre><code>Bible Reading - 1\nItem 1 - 2\nItem 2 - 3\nItem 3 - 1 - Not included\nItem 4 - 1 - Not included\n</code></pre>\n\n<p>In the above scenario the <code>if</code> should return <code>false</code> because all the values are not 1 and we are ignoring the last two items.</p>\n\n<p>What is wrong with my <code>if</code> logic?</p>\n"}, {"tags": ["c++", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1539795037, "post_id": 52859880, "comment_id": 92634457, "body": "How do you plan to provide template parameters at runtime actually? That&#39;s not possible since templates are instantiated at compile time. What are you trying to achieve finally? Sounds like a XY-problem for me."}, {"owner": {"reputation": 3693, "user_id": 5494721, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHK5j.png?s=128&g=1", "display_name": "OznOg", "link": "https://stackoverflow.com/users/5494721/oznog"}, "edited": false, "score": 0, "creation_date": 1539795135, "post_id": 52859880, "comment_id": 92634503, "body": "what code do you have for now?"}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 2, "creation_date": 1539795137, "post_id": 52859880, "comment_id": 92634505, "body": "I don&#39;t think it&#39;s possible since the current type of the <code>variant</code> is determined in run-time while the types of <code>tuple</code> members - in compile-time."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1539795526, "post_id": 52859880, "comment_id": 92634676, "body": "@everyone Just that it&#39;s not possible to do this in C++ doesn&#39;t mean you have to close the question for &quot;unclear what you&#39;re asking&quot;. I think it&#39;s obvious what is being asked (and we had three comments indicating the same)."}, {"owner": {"reputation": 595, "user_id": 3996029, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g0Tn7.jpg?s=128&g=1", "display_name": "spiritsaway", "link": "https://stackoverflow.com/users/3996029/spiritsaway"}, "edited": false, "score": 0, "creation_date": 1539796223, "post_id": 52859880, "comment_id": 92634991, "body": "the <code>args </code> are the expected types for the data, but the data is construct from inputs, so the <code>args</code> may mismatch with data\uff0c so I return <code>optional</code>."}], "answers": [{"comments": [{"owner": {"reputation": 595, "user_id": 3996029, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g0Tn7.jpg?s=128&g=1", "display_name": "spiritsaway", "link": "https://stackoverflow.com/users/3996029/spiritsaway"}, "edited": false, "score": 0, "creation_date": 1539796668, "post_id": 52860236, "comment_id": 92635225, "body": "Seems right! Those varaidic template magic!  It&#39;s 1AM for me and I would check it in the morning."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 595, "user_id": 3996029, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g0Tn7.jpg?s=128&g=1", "display_name": "spiritsaway", "link": "https://stackoverflow.com/users/3996029/spiritsaway"}, "edited": false, "score": 0, "creation_date": 1539796704, "post_id": 52860236, "comment_id": 92635242, "body": "@spiritsaway well, good night then :p"}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 3, "last_activity_date": 1539796203, "creation_date": 1539796203, "answer_id": 52860236, "question_id": 52859880, "link": "https://stackoverflow.com/questions/52859880/how-to-construct-tuple-from-transform-of-vectors-iteration/52860236#52860236", "title": "how to construct tuple from transform of vector&#39;s iteration", "body": "<p>Yes, yes you can.</p>\n\n<pre><code>template &lt;class... Requested, std::size_t... RequestedIdx&gt;\nstd::optional&lt;std::tuple&lt;Requested...&gt;&gt; try_get_value(\n    raw_t const &amp;input, std::index_sequence&lt;RequestedIdx...&gt;\n) {\n    // At least one of the variant contains an unexpected type, bail out\n    if(!(std::holds_alternative&lt;Requested&gt;(input[RequestedIdx]) &amp;&amp; ...))\n        return {};\n\n    return std::optional&lt;std::tuple&lt;Requested...&gt;&gt;(\n        std::in_place, std::get&lt;Requested&gt;(input[RequestedIdx])...\n    );\n}\n\ntemplate &lt;class... Requested&gt;\nstd::optional&lt;std::tuple&lt;Requested...&gt;&gt; try_get_value(raw_t const &amp;input) {\n    // Incorrect vector size, bail out\n    if(input.size() != sizeof...(Requested))\n        return {};\n\n    return try_get_value&lt;Requested...&gt;(input, std::index_sequence_for&lt;Requested...&gt;{});\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/ZQQ14got4G1eDOr2\" rel=\"nofollow noreferrer\">See it live on Wandbox</a></p>\n"}], "owner": {"reputation": 595, "user_id": 3996029, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/g0Tn7.jpg?s=128&g=1", "display_name": "spiritsaway", "link": "https://stackoverflow.com/users/3996029/spiritsaway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1539798822, "accepted_answer_id": 52860236, "answer_count": 1, "score": 1, "last_activity_date": 1539830498, "creation_date": 1539794867, "last_edit_date": 1539830498, "question_id": 52859880, "link": "https://stackoverflow.com/questions/52859880/how-to-construct-tuple-from-transform-of-vectors-iteration", "closed_reason": "Needs details or clarity", "title": "how to construct tuple from transform of vector&#39;s iteration", "body": "<p>Currently I come across a problem to convert my json like class to a tuple. The core problem is to transfrom a vector of variant to tuple of specific types. </p>\n\n<pre><code>using v_t = variant&lt;int, double, string&gt;\nusing raw_t = vector&lt;v_t&gt; ;\ntemplate &lt;typename... args&gt;\noptional&lt;tuple&lt;args...&gt;&gt; try_get_value(const raw_t&amp; input);\n</code></pre>\n\n<p>And the try_get_value function implementation should like below</p>\n\n<pre><code>if input.size() != sizeof...(args) return nullopt\nfor i in xrange(sizeof...(args)):\n    if !input[i].holds_alternative&lt;args[i]&gt; return nullopt\nreturn make_tuple(input[i].get&lt;args[i]&gt;()...)\n</code></pre>\n\n<p>For example, I have <code>data = vector&lt;v_t&gt;({v_t(1), v_t(2)})</code>, I want get <code>tuple&lt;int, int&gt;</code> from this data, so I call <code>try_get_value&lt;int, int&gt;(data)</code>, it should return <code>make_tuple(1,1)</code>\uff0c but if I call <code>try_get_value&lt;string,string&gt;(data)</code>, it should return <code>nullopt</code>. These args types are provided manually, may not be the same types in the vector of variants.</p>\n\n<p>I spend nearly half a day trying to construct the function body but failed. Any ideas?</p>\n"}, {"tags": ["c++", "linked-list", "operator-overloading", "nodes"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1539794856, "post_id": 52859830, "comment_id": 92634375, "body": "<code>Node *curr = list.first;</code> shouldn&#39;t even compile so I&#39;m not sure how you are getting output."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1539794911, "post_id": 52859830, "comment_id": 92634403, "body": "Also, why do you have a main function declared inside your linked list class?"}, {"owner": {"reputation": 11, "user_id": 8901271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/136cf0492987425f7b272c2104bb70b5?s=128&d=identicon&r=PG&f=1", "display_name": "mschultz", "link": "https://stackoverflow.com/users/8901271/mschultz"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1539795021, "post_id": 52859830, "comment_id": 92634451, "body": "yea it doesnt compile.. I had just changed that when I asked the question. originally it was Node* curr; and then for(curr=list.first;etc) what is the issue with this? list.first is a node which I am trying to assign to a node @NathanOliver"}, {"owner": {"reputation": 11, "user_id": 8901271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/136cf0492987425f7b272c2104bb70b5?s=128&d=identicon&r=PG&f=1", "display_name": "mschultz", "link": "https://stackoverflow.com/users/8901271/mschultz"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1539795181, "post_id": 52859830, "comment_id": 92634519, "body": "the main is in linked list class to test that all the methods work."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1539795304, "post_id": 52859830, "comment_id": 92634588, "body": "Well, please edit the question so that it doesn&#39;t have obvious compilation errors."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1539795518, "post_id": 52859830, "comment_id": 92634672, "body": "@MaxLanghof In other words: Provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> reproducing the problem you&#39;re actually asking about (pro tip: Typing <code>[mcve]</code> in the comment will render that link)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1539799955, "post_id": 52859830, "comment_id": 92636775, "body": "@mschultz the issue Nathan was pointing out is that you declared the <code>list</code> parameter as an <code>LLC*</code> pointer, so you have to access its <code>first</code> member as <code>list-&gt;first</code>, <code>list.first</code> won&#39;t compile."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1539800131, "last_edit_date": 1539800131, "creation_date": 1539799822, "answer_id": 52861152, "question_id": 52859830, "link": "https://stackoverflow.com/questions/52859830/c-overloaded-operation-only-prints-memory-address-of-linkedlist/52861152#52861152", "title": "C++ overloaded &lt;&lt; operation only prints memory address of LinkedList", "body": "<p><code>std::ostream</code> already has an <code>operator&lt;&lt;</code> that takes a pointer (via <code>void*</code>) as input. That is why you get hex output. Your <code>operator&lt;&lt;</code> overload should be taking in the <code>LLC</code> object by const reference, not by const pointer, to avoid ambiguities.</p>\n\n<p>You did not post enough code to demonstrate the segfault error, but I suspect it is because you are not managing your node instances correctly inside the list, so when your <code>operator&lt;&lt;</code> tries to access them, it encounters a bad pointer along the way and crashes.</p>\n\n<p>Try something more like this:</p>\n\n<p>LLC.h</p>\n\n<pre><code>#ifndef LLCH\n#define LLCH\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstruct Node {\n    std::string data;\n    Node *next;\n\n    Node(const std::string&amp; d);\n};\n\nclass LLC {\nprivate:\n    Node *first;\n    Node *last;\n\npublic:\n    LLC();\n\n    template&lt;size_t N&gt;\n    LLC(std::string (&amp;arr)[N])\n        : first(NULL), last(NULL) {\n        for(size_t i = 0; i &lt; N; ++i) {\n            addToBack(arr[i]);\n        }\n    }\n\n    // other constructors, destructor, etc...\n\n    void addToBack(const std::string &amp;s);\n\n    // other methods ...\n\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const LLC&amp; list);\n\n    // other operators ...\n};\n\n#endif\n</code></pre>\n\n<p>LLC.cpp</p>\n\n<pre><code>#include \"LLC.h\"\n\nNode::Node(const std::string&amp; d)\n    : data(d), next(NULL) {\n}\n\nLLC::LLC()\n    : first(NULL), last(NULL) {\n}\n\n// other constructors, destructor, etc...\n\nvoid LLC::addToBack(const std::string &amp;s) {\n    Node *n = new Node(s);\n    if (!first) first = n;\n    if (last) last-&gt;next = n;\n    last = n;\n}\n\n// other methods ...\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const LLC&amp; list) {\n    for(Node *curr = list.first; curr != NULL; curr = curr-&gt;next) {\n        os &lt;&lt; curr-&gt;data &lt;&lt; \"\\n\";\n    }\n    return os;\n}\n\n// other operators ...\n</code></pre>\n\n<p>Main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"LLC.h\" \n\nint main(int argc, char *argv[]) {\n    std::string arr[] = {\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"};\n\n    LLC* link = new LLC(arr);\n    cout &lt;&lt; \"testing: \" &lt;&lt; *link;\n    delete link;\n\n    /* or simply:\n    LLC link(arr);\n    cout &lt;&lt; \"testing: \" &lt;&lt; link;\n    */\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8901271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/136cf0492987425f7b272c2104bb70b5?s=128&d=identicon&r=PG&f=1", "display_name": "mschultz", "link": "https://stackoverflow.com/users/8901271/mschultz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1539800131, "creation_date": 1539794704, "last_edit_date": 1539794817, "question_id": 52859830, "link": "https://stackoverflow.com/questions/52859830/c-overloaded-operation-only-prints-memory-address-of-linkedlist", "title": "C++ overloaded &lt;&lt; operation only prints memory address of LinkedList", "body": "<p>I am trying to make a Linked List Container LLC and overload the &lt;&lt; operator as a friend. It seems like no mater what I do it either prints the memory address or throws a segmentation fault. I dont totally understand c++ yet so it is probably something obvious.</p>\n\n<p>in LLC.cpp</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream&amp; os, const LLC* list){\n   Node *curr = list.first;\n   for(curr; curr != NULL; curr= curr -&gt; next){\n   os &lt;&lt; curr -&gt; data &lt;&lt; \"\\n\";\n}\nreturn os;\n}\n\nint main(int argc, char *argv[]){\n  string arr [] = {\"a\",\"b\",\"c\",\"d\",\"e\",\"f\"};\n  LLC* link = new LLC(arr);\n  cout&lt;&lt;\"testing: \";\n  cout&lt;&lt;(link);\n}\n</code></pre>\n\n<p>in LLC.h</p>\n\n<pre><code>struct Node {\n std::string data;\n Node *next;\n};\nclass LLC {\n\nprivate:\n  Node *first;\n  Node *last;\npublic:\n    int main(int argc, char *argv[]);\n    LLC(){\n      first=NULL;\n      last=NULL;\n    }\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const LLC*);\n</code></pre>\n"}, {"tags": ["c++", "memory-management", "smart-pointers", "priority-queue"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1539794304, "post_id": 52859501, "comment_id": 92634118, "body": "What do you use to initialize that smart pointer? Did you already had a look at <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr/make_unique\" rel=\"nofollow noreferrer\"><code>std::make_unique</code></a>?"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1539794396, "post_id": 52859501, "comment_id": 92634167, "body": "BTW, the right way to implement the priority queue - is <a href=\"https://en.wikipedia.org/wiki/Binary_heap\" rel=\"nofollow noreferrer\">binary heap</a>"}, {"owner": {"reputation": 23, "user_id": 8069413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9678171dfaef35409cad729ce96a3f3c?s=128&d=identicon&r=PG&f=1", "display_name": "Brianna Schmidt", "link": "https://stackoverflow.com/users/8069413/brianna-schmidt"}, "edited": false, "score": 0, "creation_date": 1539794788, "post_id": 52859501, "comment_id": 92634345, "body": "I don&#39;t think I used anything to initialize it, which is definitely a big problem haha. And yeah, as I was doing research I came across the heap implementation. I&#39;ll take a look at initializing when I get a chance in a little bit."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8069413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9678171dfaef35409cad729ce96a3f3c?s=128&d=identicon&r=PG&f=1", "display_name": "Brianna Schmidt", "link": "https://stackoverflow.com/users/8069413/brianna-schmidt"}, "edited": false, "score": 1, "creation_date": 1539801456, "post_id": 52859841, "comment_id": 92637502, "body": "This was definitely it! I had a feeling it had something to do with that. As a sidenote for anyone else who comes across this issue, <code>std::make_unique</code> is a C++14 feature."}], "tags": [], "owner": {"reputation": 440, "user_id": 326275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd9a36dca98172770025a425fd2b3404?s=128&d=identicon&r=PG", "display_name": "AzCopey", "link": "https://stackoverflow.com/users/326275/azcopey"}, "is_accepted": true, "score": 2, "last_activity_date": 1539795132, "last_edit_date": 1539795132, "creation_date": 1539794755, "answer_id": 52859841, "question_id": 52859501, "link": "https://stackoverflow.com/questions/52859501/initializing-a-smart-pointer-to-an-instance-of-class-and-accessing-its-methods/52859841#52859841", "title": "Initializing a smart pointer to an instance of class and accessing its methods", "body": "<blockquote>\n  <p>My constructor for SL_PriorityQueue is empty since it seems that with\n  smart pointers they manage their own memory such that I don't have to\n  set it equal to a null pointer.</p>\n</blockquote>\n\n<p>If I've understood you correctly, you've got a bit mixed up here. Although a unique_ptr will correctly clean up memory it owns, it won't allocate anything itself. The best way of doing so is to use std::make_unique, which you can call from your constructor.</p>\n\n<pre><code>template &lt;typename ItemType&gt;\nSL_PriorityQueue&lt;ItemType&gt;::SL_PriorityQueue()\n   : slistPtr(std::make_unique&lt;LinkedSortedList&lt;ItemType&gt;&gt;())\n{\n}\n</code></pre>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 23, "user_id": 8069413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9678171dfaef35409cad729ce96a3f3c?s=128&d=identicon&r=PG&f=1", "display_name": "Brianna Schmidt", "link": "https://stackoverflow.com/users/8069413/brianna-schmidt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "accepted_answer_id": 52859841, "answer_count": 1, "score": 1, "last_activity_date": 1539795850, "creation_date": 1539793476, "last_edit_date": 1539795850, "question_id": 52859501, "link": "https://stackoverflow.com/questions/52859501/initializing-a-smart-pointer-to-an-instance-of-class-and-accessing-its-methods", "title": "Initializing a smart pointer to an instance of class and accessing its methods", "body": "<p>So, I'm trying to implement a priority queue using a sorted list. I have my priority queue class inherit from my sorted list class. My sorted list class works fine when I test its functions in the driver, but I am getting <code>\"Segmentation Fault 11\"</code> when I try testing out my implementation of the priority queue. I ran my code through the CLion debugger and got the error <code>\"EXC_BAD_ACCESS (code=1, address=0x0)\"</code>, which, after some research, seems to be caused by trying to modify data in a null pointer. This is my first time using smart pointers, so I think my issues lie in a misunderstanding with how they're constructed and initialized. </p>\n\n<p>Here's my header file for my <code>SL_PriorityQueue</code> class: </p>\n\n<pre><code>#ifndef PRIORITY_QUEUE_\n#define PRIORITY_QUEUE_\n\n#include \"PriorityQueueInterface.h\"\n#include \"LinkedSortedList.h\"\n#include \"PrecondViolatedExcep.h\"\n#include &lt;memory&gt;\n\ntemplate&lt;class ItemType&gt;\nclass SL_PriorityQueue : public PriorityQueueInterface&lt;ItemType&gt;\n{\n  private:\n     std::unique_ptr&lt;LinkedSortedList&lt;ItemType&gt; &gt; slistPtr;\n\n  public:\n    SL_PriorityQueue();\n    SL_PriorityQueue(const SL_PriorityQueue&amp; pq);\n    ~SL_PriorityQueue();\n\n    bool isEmpty() const;\n    bool enqueue(const ItemType&amp; newEntry);\n    bool dequeue();\n\n    //@throw PrecondViolatedExcept if priority queue is isEmpty\n    ItemType peekFront() const throw(PrecondViolatedExcep);\n};\n\n#endif\n</code></pre>\n\n<p>Here's the driver I'm using to test my code:</p>\n\n<pre><code>#include \"../src/Node.cpp\"\n#include \"../src/LinkedSortedList.cpp\"\n#include \"../src/SL_PriorityQueue.cpp\"\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::shared_ptr&lt;SL_PriorityQueue&lt;int&gt; &gt; testing (new SL_PriorityQueue&lt;int&gt;());\n    testing-&gt;enqueue(7);\n    std::cout &lt;&lt; testing-&gt;peekFront() &lt;&lt; std::endl; //I set a break point here, which is where CLion throws the exception\n    std::cout &lt;&lt; testing-&gt;dequeue() &lt;&lt; std::endl;\n    std::cout &lt;&lt; testing-&gt;isEmpty() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Here's the function from SL_PriorityQueue.cpp that the CLion highlighted after the exception:</p>\n\n<pre><code>template &lt;class ItemType&gt;\nbool SL_PriorityQueue&lt;ItemType&gt;::enqueue(const ItemType&amp; newEntry)\n{\n  slistPtr-&gt;insertSorted(newEntry);\n  return true;\n}\n</code></pre>\n\n<p>The error makes me think that when I call insertSorted in the above function, <code>slistPtr</code> is still null. My constructor for <code>SL_PriorityQueue</code> is empty since it seems that with smart pointers they manage their own memory such that I don't have to set it equal to a null pointer.</p>\n\n<p>I tried making <code>slistPtr</code> a shared pointer to see if maybe too many things were pointing to it, but I just received the same error.</p>\n\n<p>Thanks in advance for any help you can provide!</p>\n"}, {"tags": ["c++", "sdl-2"], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 9454147, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kvJMyaD9Fjo/AAAAAAAAAAI/AAAAAAAAAGU/SKdz6unXZs4/photo.jpg?sz=128", "display_name": "Alexis Harper", "link": "https://stackoverflow.com/users/9454147/alexis-harper"}, "is_accepted": true, "score": 0, "last_activity_date": 1540004427, "creation_date": 1540004427, "answer_id": 52902048, "question_id": 52859245, "link": "https://stackoverflow.com/questions/52859245/sdl-renderer-sdl-texture-with-shaders/52902048#52902048", "title": "SDL_Renderer &amp; SDL_Texture with shaders?", "body": "<p>I made a switch over to SDL-GPU for my graphics, and it allows for GLSL shaders to be used on GPU_Image, which is the equivalent of SDL_Texture. The basic shader format is that below, with the image uniforms being set with GPU_ShaderBlock:</p>\n\n<p>base.vert</p>\n\n<pre><code>#version 150\n\nattribute vec3 gpu_Vertex;\nattribute vec2 gpu_TexCoord;\nattribute vec4 gpu_Color;\nuniform mat4 gpu_ModelViewProjectionMatrix;\n\nvarying vec4 color;\nvarying vec2 texCoord;\n\nvoid main (void) {\n\n    color = gpu_Color;\n    texCoord = vec2 (gpu_TexCoord);\n\n    gl_Position = gpu_ModelViewProjectionMatrix * vec4 (gpu_Vertex, 1.0);\n\n}\n</code></pre>\n\n<p>base.frag</p>\n\n<pre><code>#version 150\n\nvarying vec4 color;\nvarying vec2 texCoord;\n\nuniform sampler2D tex;\n\nvoid main (void) {\n\n    gl_FragColor = texture (tex, texCoord);\n\n}\n</code></pre>\n\n<p>This allows you to use GLSL shaders to manipulate your textures if you want. An easy example is the circular health bar as asked. The shader example I'll use gets the red value, and if it is lower than the health float between 0.0f and 1.0f, it replaces it with a semi-transparent red, and if it is higher it makes it transparent. This lets you use an image like the one below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/I6Nd6.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I6Nd6.jpg\" alt=\"Greyscale Health Bar\"></a></p>\n\n<p>This is run through the fragment shader (same vertex shader as above):</p>\n\n<p>health.frag</p>\n\n<pre><code>#version 150\n\nvarying vec4 color;\nvarying vec2 texCoord;\nvarying float healthFloat;\n\nuniform sampler2D tex;\nuniform float health;\n\nvoid main (void) {\n\n    vec4 texColor = texture (tex, texCoord);\n\n    if (texColor.x &lt;= health) {\n\n        texColor = vec4 (1.0, 0.0, 0.0, 0.8);\n\n    } else {\n\n        texColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n    }\n\n    gl_FragColor = texColor;\n\n}\n</code></pre>\n\n<p>Which gives us a result that looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/taEmz.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/taEmz.jpg\" alt=\"Screenshot of Health Bar Using Above Shader\"></a></p>\n"}], "owner": {"reputation": 31, "user_id": 9454147, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-kvJMyaD9Fjo/AAAAAAAAAAI/AAAAAAAAAGU/SKdz6unXZs4/photo.jpg?sz=128", "display_name": "Alexis Harper", "link": "https://stackoverflow.com/users/9454147/alexis-harper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 2, "accepted_answer_id": 52902048, "answer_count": 1, "score": 0, "last_activity_date": 1540004427, "creation_date": 1539792569, "last_edit_date": 1539885334, "question_id": 52859245, "link": "https://stackoverflow.com/questions/52859245/sdl-renderer-sdl-texture-with-shaders", "title": "SDL_Renderer &amp; SDL_Texture with shaders?", "body": "<p>I'm working on a game with SDL2 in C++, and the current code uses SDL_Texture with SDL_Renderer to handle sprites. The problem is that the HUD is supposed to have a circular health bar, and the current thought on how to do that was to use a grey scale type image and using a shader with a float or byte passed to it for rendering. Is there any way to keep using SDL_Renderer while doing this?</p>\n\n<p>Edit: Will SDL_gpu allow me to combine OpenGL and SDL_Texture-esque rendering that will be able to reuse a lot of the old code?</p>\n"}, {"tags": ["c++", "casting"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 5, "creation_date": 1539792304, "post_id": 52859117, "comment_id": 92633039, "body": "That call is indeed possible on certain architectures, and that is indeed an example of undefined behavior. There is no way this can be treated as inline function, though. What is the actual problem you are trying to solve?"}, {"owner": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1539792582, "post_id": 52859117, "comment_id": 92633184, "body": "@SergeyA I&#39;m trying to tie the assembly code to c++ templates. With some template metaprogramming magic it is possible to generate the actual instruction buffer at compile time and i need that buffer to be altered/depend on some template arguments. Basically to create a form of template assembly."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1539792686, "post_id": 52859117, "comment_id": 92633229, "body": "Imagine that you are a compiler. What would you do with this program? Can you show a sequence of steps?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1539792801, "post_id": 52859117, "comment_id": 92633312, "body": "@Lorand, still unclear why do you need to generate the buffer at compile time instead of just writing normal C++ code? Perhaps a more specific MCVE could help?"}, {"owner": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1539792906, "post_id": 52859117, "comment_id": 92633377, "body": "@n.m. Now that i think about it, inlining a function means that it&#39;s body is copied on it&#39;s call site. For me this would mean that the content of the buffer would have to be copied there. And doing all this in a way that the compiler believe it is actually valid code."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1539792968, "post_id": 52859117, "comment_id": 92633411, "body": "@Lorand there multiple ways to emit assembly (see inline __asm for example) in C/C++ without resorting to ugly UB hacks."}, {"owner": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1539793026, "post_id": 52859117, "comment_id": 92633437, "body": "@DanM. I&#39;m looking specifically for methods that allow me to intermix assembly with c++ templates"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1539793096, "post_id": 52859117, "comment_id": 92633477, "body": "@Lorand depends on what and how exactly you&#39;d like to intermix them. See for some examples/pointers: <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html</a>"}, {"owner": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1539793113, "post_id": 52859117, "comment_id": 92633488, "body": "@SergeyA The buffer is actually known at compile time, the question is how to trick the compiler in believing that it is an inline function, or a sequence of instructions or anything that can be exeecuted, wihtout the overhead of a function call."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1539793253, "post_id": 52859117, "comment_id": 92633567, "body": "Inlining a function doesn&#39;t involve taking its assembly code and inserting it as is at the call site."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1539793312, "post_id": 52859117, "comment_id": 92633591, "body": "@Lorand you still didn&#39;t answer &#39;why&#39;. Why do you want to generate ASM instead of writing C++ code? The template metaprogramming is exactly a technique to generate code, and compiler usually does a better job than you. I could explain why inlining is not possible, or I can try to give you an answer for the actual problem."}, {"owner": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1539793451, "post_id": 52859117, "comment_id": 92633666, "body": "@SergeyA Indeed the compilers do a magnificent job 99% of the time, but i want to make a highly optimized gemm (blas msatrix matrix multiplication) implementation and i would like to fine-tune the code using assembly instructions"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2261597"}, "edited": false, "score": 0, "creation_date": 1539793608, "post_id": 52859117, "comment_id": 92633748, "body": "This is how malicious code work. Is that your intention?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1539793664, "post_id": 52859117, "comment_id": 92633782, "body": "If you need to use inline assembly, go ahead and use it. There is a <a href=\"https://en.cppreference.com/w/cpp/language/asm\" rel=\"nofollow noreferrer\">construct in C++ dedicated to it</a>."}], "answers": [{"comments": [{"owner": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "edited": false, "score": 0, "creation_date": 1539795624, "post_id": 52859898, "comment_id": 92634719, "body": "Sadly, the asm declaration supported by certain compilers don&#39;t let me to generate asm at compile time, i.e. placing a non-type template parameter in an instruction as an immediate value"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "edited": false, "score": 1, "creation_date": 1539796534, "post_id": 52859898, "comment_id": 92635147, "body": "@Lorand I feel your pain. Good luck."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "edited": false, "score": 0, "creation_date": 1539798878, "post_id": 52859898, "comment_id": 92636278, "body": "@Lorand added an example."}], "tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1539798864, "last_edit_date": 1539798864, "creation_date": 1539794944, "answer_id": 52859898, "question_id": 52859117, "link": "https://stackoverflow.com/questions/52859117/casting-char-buffer-to-function-pointer/52859898#52859898", "title": "Casting char buffer to function pointer", "body": "<p>Inline assembly code can be injected in a C++ function with an <a href=\"https://en.cppreference.com/w/cpp/language/asm\" rel=\"nofollow noreferrer\">asm declaration</a>. This construct is conditionally supported and implementation defined. </p>\n\n<p>In most implementations, the asm declaration expects some form of symbolic assembly language rather than binary object code.</p>\n\n<p>Here's an example of using the <code>asm</code> declaration construct with GCC on x86.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;int nontype&gt;\nint add(int operand)\n{\n    int sum;\n\n    asm (\"movl %1, %0\\n\\t\"\n         \"addl %2, %0\"\n         : \"=r\" (sum)\n         : \"r\" (operand), \"r\" (nontype)\n         : \"0\");\n\n    return sum;\n}\n\nint main()\n{\n    std::cout &lt;&lt; add&lt;42&gt;(6) &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>This prints 48 as expected.</p>\n\n<p>Note that gcc's version of <code>asm</code> is quite powerful, and its syntax has to go beyond what the standard specifies in order to support its many features. Other implementations may or may not offer such flexibility (or indeed offer anything at all \u2014 the construct is conditionally supported).</p>\n\n<p>Casting between function pointers and data pointers is undefined behaviour in C++. Implementations may do whatever they want with it. I would guess that exploiting this particular form of UB to duplicate perfectly good asm declaration functionality would be rather low on most implementers' to-do lists.</p>\n"}], "owner": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 1, "accepted_answer_id": 52859898, "answer_count": 1, "score": 0, "last_activity_date": 1539798864, "creation_date": 1539792112, "question_id": 52859117, "link": "https://stackoverflow.com/questions/52859117/casting-char-buffer-to-function-pointer", "title": "Casting char buffer to function pointer", "body": "<p>I recently found out that you can inject machine code in a buffer, at run-time, cast it to a function pointer and then call it to execute the instructions in the buffer. It looks something like this:</p>\n\n<pre><code>int main(void)\n{\n    char buffer[] = \"\\xB8\\x04\\x00\\x00\\x00\\xC3\";\n    auto func = (int(*)())buffer;\n    func();\n\n    return 0;\n}\n</code></pre>\n\n<p>Now what if i don't want to pay for the function call at run-time, in other words i want to treat the buffer as an <code>inline</code> function.</p>\n\n<p>My first naive attempt to achieve this was to declare both the <code>buffer</code> and the <code>func</code> as <code>constexpr</code> and replace the c-style cast with <code>static_cast</code>, although this doesn't seem to work, because it's an invalid cast according to gcc.\nTried <code>reinterpret_cast</code> too, but that can't be evaluated at compile-time apparently</p>\n\n<p>Any ideas would be welcome, if is possible to achieve this at all.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1539792062, "post_id": 52859054, "comment_id": 92632924, "body": "You could show what you tried"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "edited": false, "score": 0, "creation_date": 1539792575, "post_id": 52859054, "comment_id": 92633183, "body": "Don&#39;t split audio from video to avoid lip sync."}, {"owner": {"reputation": 426, "user_id": 5951915, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-MTT1D1rEGek/AAAAAAAAAAI/AAAAAAAAAGY/0fh3ivC3VZ0/photo.jpg?sz=128", "display_name": "it4Astuces", "link": "https://stackoverflow.com/users/5951915/it4astuces"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1539815387, "post_id": 52859054, "comment_id": 92643222, "body": "@eyllanesc I already did with the screenshot!"}, {"owner": {"reputation": 426, "user_id": 5951915, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-MTT1D1rEGek/AAAAAAAAAAI/AAAAAAAAAGY/0fh3ivC3VZ0/photo.jpg?sz=128", "display_name": "it4Astuces", "link": "https://stackoverflow.com/users/5951915/it4astuces"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1539815453, "post_id": 52859054, "comment_id": 92643240, "body": "@eyllanesc Ok, for example, you click the add button to load some media files, you choose a list that you want to play, if that list contains audio files it will be displayed just in the first(all) and third tab(audio) and if it contains video files, it will be displayed in the first(all) and the second tab(video). So i think if i want to achieve that goal, i have to create a function that will verify the files extensions. but i do not know how to do it as a beginner."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1539816319, "post_id": 52859054, "comment_id": 92643464, "body": "@it4Astuces since as you point out you have shown an image of your project I assume you know how to get the path of the file, after that you should only use QFileInfo to get the suffix with the function <a href=\"http://doc.qt.io/qt-5/qfileinfo.html#completeSuffix\" rel=\"nofollow noreferrer\">completeSuffix()</a> and then just filter by extension(suffix)"}, {"owner": {"reputation": 426, "user_id": 5951915, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-MTT1D1rEGek/AAAAAAAAAAI/AAAAAAAAAGY/0fh3ivC3VZ0/photo.jpg?sz=128", "display_name": "it4Astuces", "link": "https://stackoverflow.com/users/5951915/it4astuces"}, "edited": false, "score": 0, "creation_date": 1539816640, "post_id": 52859054, "comment_id": 92643549, "body": "Thank you for your replay, i will try to do it. Good luck and have a good day"}, {"owner": {"reputation": 426, "user_id": 5951915, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-MTT1D1rEGek/AAAAAAAAAAI/AAAAAAAAAGY/0fh3ivC3VZ0/photo.jpg?sz=128", "display_name": "it4Astuces", "link": "https://stackoverflow.com/users/5951915/it4astuces"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1539866935, "post_id": 52859054, "comment_id": 92662182, "body": "@eyllanesc Do you know what are the Qt supported Multimedia formats files ?"}], "owner": {"reputation": 426, "user_id": 5951915, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-MTT1D1rEGek/AAAAAAAAAAI/AAAAAAAAAGY/0fh3ivC3VZ0/photo.jpg?sz=128", "display_name": "it4Astuces", "link": "https://stackoverflow.com/users/5951915/it4astuces"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539791974, "creation_date": 1539791896, "last_edit_date": 1539791974, "question_id": 52859054, "link": "https://stackoverflow.com/questions/52859054/media-file-format-qt", "title": "Media File format Qt", "body": "<p>I am trying to create a simple media player with Qt, so I want to open some media files from a directory (which i already did) but i want to split audio files and video files from each other, put them in a playlist (listView) and display each one of them in a different tab.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lreyv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lreyv.png\" alt=\"Screenshot\"></a></p>\n"}, {"tags": ["c++", "debugging"], "comments": [{"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 2, "creation_date": 1539792123, "post_id": 52859034, "comment_id": 92632951, "body": "F5 is the Run debug command. Have you set a breakpoint at the beginning? F10 is the step and F11 is the step into."}, {"owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "reply_to_user": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1539792226, "post_id": 52859034, "comment_id": 92632997, "body": "Of course. I have been using visual studio since the COM / ActiveX days and windows programming."}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 1, "creation_date": 1539792351, "post_id": 52859034, "comment_id": 92633056, "body": "Ok. With so much experience you can certainly figure it out then."}, {"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 1, "creation_date": 1539792372, "post_id": 52859034, "comment_id": 92633071, "body": "Can you show us where exactly are you clicking to add a breakpoint there... Because if I remember correctly, it is a thin plain strip somewhere behind the line numbers (If you have that enabled that is)..."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1539792590, "post_id": 52859034, "comment_id": 92633188, "body": "I&#39;ve noticed both VS2015 and VS2017 being reluctant to trace into functions. The nearest thing to a workaround\u2014assuming you are sure that everything is clean and built from scratch after switching libraries\u2014is to put a breakpoint inside the function you want to step into."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1539793213, "post_id": 52859034, "comment_id": 92633542, "body": "Are you building in Debug mode?  Usually a red circle indicates that 1) the code doesn&#39;t exist, 2) there are no symbols for the code."}, {"owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "edited": false, "score": 0, "creation_date": 1539793239, "post_id": 52859034, "comment_id": 92633561, "body": "It is just the 7-liner above. It is <code>&#47;FR&quot;Debug\\&quot; &#47;GS &#47;analyze- &#47;W3 &#47;Zc:wchar_t &#47;ZI &#47;Gm &#47;Od &#47;Fd&quot;Debug\\vc100.pdb&quot; &#47;fp:precise &#47;D &quot;_MBCS&quot; &#47;errorReport:prompt &#47;WX- &#47;Zc:forScope &#47;RTC1 &#47;Gd &#47;Oy- &#47;MDd &#47;Fa&quot;Debug\\&quot; &#47;EHsc &#47;nologo &#47;Fo&quot;Debug\\&quot; &#47;Fp&quot;Debug\\Project4.pch&quot; </code>"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1539794140, "post_id": 52859034, "comment_id": 92634051, "body": "After turning off incremental linking I was actually able to build with VS2017 (15.8.7) and the toolset v100. I could set a breakpoint (<b>solid</b> red circle) on line 5 and then even step inside the <code>ostream::operator&lt;&lt;(int)</code> (I had added <code>&lt;&lt; 1 </code> for that purpose), with F11, something that didn&#39;t work with toolset v141, even though I seemed to be able to set a breakpoint in the ostream header file. So it works for me, for unknown reasons."}, {"owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "edited": false, "score": 0, "creation_date": 1539812442, "post_id": 52859034, "comment_id": 92642301, "body": "It takes some kind of <code>pattern recognition</code> to smell quirks such as these. Last month, ATL won&#39;t work VS2017."}], "answers": [{"tags": [], "owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "is_accepted": false, "score": 0, "last_activity_date": 1539811962, "creation_date": 1539811962, "answer_id": 52863932, "question_id": 52859034, "link": "https://stackoverflow.com/questions/52859034/how-can-i-step-debug-a-7-liner-c-code-in-visual-studio-2017/52863932#52863932", "title": "How Can I Step Debug a 7-liner C++ code in Visual Studio 2017?", "body": "<p>I tested on my other machine with an updated VS2017 version <code>15.8.5</code> and I can switch Platform Toolsets <code>v100</code> or <code>v141</code> and can both step-debug no problem. </p>\n\n<p>Therefore, I think this is a bug in my older VS2017 version <code>15.7.5</code> (which I can't update as of the moment due to disk space issue). </p>\n\n<p>In the older VS2017 version <code>15.7.5</code>, the workaround I found is to first create the project in VS2010 and only then later opening it up in VS2017 (buggy version 15.7.5) and converting it to <code>v141</code> platform toolset. </p>\n"}], "owner": {"reputation": 2193, "user_id": 2856202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/AHuOz.png?s=128&g=1", "display_name": "eigenfield", "link": "https://stackoverflow.com/users/2856202/eigenfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1539811962, "creation_date": 1539791827, "last_edit_date": 1539792378, "question_id": 52859034, "link": "https://stackoverflow.com/questions/52859034/how-can-i-step-debug-a-7-liner-c-code-in-visual-studio-2017", "title": "How Can I Step Debug a 7-liner C++ code in Visual Studio 2017?", "body": "<p>I have been using Visual Studio since Visual Studio 6.0 in 1998. Right now, I have Visual Studio 2017, and for some constraining reason, I have to use the <code>v100</code> platform toolset when doing C++. The snippet is below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char* argv[])\n{\n    std::cout &lt;&lt; \"proj04\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>I put a breakpoint in the <code>cout</code>. Breakpoint is now showing in red circle.</p>\n\n<p>I can step-debug into the code if I use the default platform toolset which is <code>v141</code>. However, if i switch to <code>v100</code>, it won't step debug when I press F5 it will just run all the way and exit. </p>\n"}, {"tags": ["c++", "c++11", "clang", "libclang"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1539793787, "post_id": 52859032, "comment_id": 92633857, "body": "<code>0</code> never means nothing"}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1539794560, "post_id": 52859446, "comment_id": 92634243, "body": "Note that you don&#39;t <i>have</i> to use a static member function, it could just as well be a free function. The effect (and idea) is of course the same."}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1539794752, "post_id": 52859446, "comment_id": 92634323, "body": "@MaxLanghof, yes, but I think static function is more appropriate since it&#39;s closely related to the class (see <a href=\"https://en.wikipedia.org/wiki/Cohesion_(computer_science)\" rel=\"nofollow noreferrer\">cohesion</a>) and also preserves encapsulation."}], "tags": [], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "is_accepted": true, "score": 2, "last_activity_date": 1539793831, "last_edit_date": 1539793831, "creation_date": 1539793276, "answer_id": 52859446, "question_id": 52859032, "link": "https://stackoverflow.com/questions/52859032/pass-a-member-function-as-argument-in-libclang-visitor/52859446#52859446", "title": "pass a member function as argument in libclang visitor", "body": "<p><code>clang_visitChildren</code> only accepts regular functions, not member functions. It order to use a member function with it you will have to create a helper static member function that will call a non-static one:</p>\n\n<pre><code>class MyVisitor\n{\npublic:\n  CXChildVisitResult visitor(CXCursor, CXCursor);\n  static CXChildVisitResult visitorHelper(CXCursor cursor, CXCursor parent, CXClientData client_data) {\n    return static_cast&lt;MyVisitor *&gt;(client_data)-&gt;visitor(cursor, parent);\n  }\n};\n\nint main() {\n  MyVisitor myVisitor;\n  // some code\n  clang_visitChildren(rootCursor, &amp;MyVisitor::visitorHelper, &amp;myVisitor);\n}\n</code></pre>\n\n<p>Note the use of <code>client_data</code> parameter to pass a pointer to an object whose method you want to call. This is a very common pattern for callback in C API.</p>\n\n<p>Alternatively you may want to choose a different library to work with Clang (more info <a href=\"https://clang.llvm.org/docs/Tooling.html\" rel=\"nofollow noreferrer\">here</a>) such as <a href=\"https://clang.llvm.org/docs/LibTooling.html\" rel=\"nofollow noreferrer\">LibTooling</a> which provides a C++ interface.</p>\n"}, {"comments": [{"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 0, "creation_date": 1539794333, "post_id": 52859662, "comment_id": 92634138, "body": "This in no way helps to use a member function with <b>an existing C API</b> which is the case here."}, {"owner": {"reputation": 1330, "user_id": 3624674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e18e359a7509c9508afd47cf83f8af97?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/3624674/dan"}, "reply_to_user": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 0, "creation_date": 1539794369, "post_id": 52859662, "comment_id": 92634158, "body": "OP says they are using C++"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 0, "creation_date": 1539794391, "post_id": 52859662, "comment_id": 92634164, "body": "@r3musn0x Hm, maybe the question could make it more clear that this is a C API then? It&#39;s not obvious at all (unless you&#39;re familiar with LibClang)."}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 0, "creation_date": 1539794454, "post_id": 52859662, "comment_id": 92634191, "body": "OP is using C++ with a library that provides a C API."}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1539794541, "post_id": 52859662, "comment_id": 92634235, "body": "@MaxLanghof, the question is explicitly tagged <code>libclang</code> which implies that the answer should account for that."}, {"owner": {"reputation": 1330, "user_id": 3624674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e18e359a7509c9508afd47cf83f8af97?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/3624674/dan"}, "edited": false, "score": 0, "creation_date": 1539795590, "post_id": 52859662, "comment_id": 92634702, "body": "OP wanted to pass a member function into a visitor class in C++. I show how OP can do that without explicitly doing all the work for him."}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 0, "creation_date": 1539795748, "post_id": 52859662, "comment_id": 92634779, "body": "The question literally states <code>how to pass visitor to clang_visitChildren</code> where <code>visitor</code> is a member function and <code>clang_visitChildren</code> is a C library function that accepts a pointer to a regular function."}, {"owner": {"reputation": 1330, "user_id": 3624674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e18e359a7509c9508afd47cf83f8af97?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/3624674/dan"}, "edited": false, "score": 0, "creation_date": 1539833483, "post_id": 52859662, "comment_id": 92646878, "body": "visitor is a design pattern as well and OP states C++."}, {"owner": {"reputation": 1330, "user_id": 3624674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e18e359a7509c9508afd47cf83f8af97?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/3624674/dan"}, "edited": false, "score": 0, "creation_date": 1539833545, "post_id": 52859662, "comment_id": 92646889, "body": "besides you can easily bind the member function example in a non-member callback via a utility function and it would work."}], "tags": [], "owner": {"reputation": 1330, "user_id": 3624674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e18e359a7509c9508afd47cf83f8af97?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/3624674/dan"}, "is_accepted": false, "score": 0, "last_activity_date": 1539794029, "creation_date": 1539794029, "answer_id": 52859662, "question_id": 52859032, "link": "https://stackoverflow.com/questions/52859032/pass-a-member-function-as-argument-in-libclang-visitor/52859662#52859662", "title": "pass a member function as argument in libclang visitor", "body": "<p>Passing member functions as arguments is easy. The trick is the syntax. You don't need static functions you need a pointer to the member function and a pointer to the calling object. </p>\n\n<p>See this example</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Foo {\n    public:\n    virtual void MemberFunc() {\n        std::cout &lt;&lt; \"MemberFunc called\" &lt;&lt; std::endl;\n    }\n\n    virtual void MemberFuncWithArgs(int a, std::string b, double c) {\n        std::cout &lt;&lt; \"MemberFuncWithArgs called with a = \" &lt;&lt; a &lt;&lt; \" b = \" &lt;&lt; b &lt;&lt; \" c = \" &lt;&lt; c &lt;&lt; std::endl;\n    }\n};\n\nclass Bar : public Foo {\n    public:\n    virtual void MemberFunc() {\n        std::cout &lt;&lt; \"Bar MemberFunc called\" &lt;&lt; std::endl;\n    }\n};\n\n// funPtr is a pointer to the function in the class Foo:: scope that takes zero arguments and returns void\nvoid CallClassFunction(void (Foo::*funPtr)(), Foo* obj) {\n    // We deference the function pointer and invoke it on the caller\n    (obj-&gt;*funPtr)();  \n}\n\n// Same as above but funPtr takes 3 arguments\nvoid CallClassFunctionWithArgs(void (Foo::*funPtr)(int a, std::string b, double c), int a, std::string b, double c, Foo* obj) {\n    (obj-&gt;*funPtr)(a, b, c);\n}\n\nint main()\n{\n    cout&lt;&lt;\"Hello World\";\n\n    Foo obj;\n\n    // We take the address of the class member function (makes a pointer)\n    // We take a pointer to the obj variable\n    CallClassFunction(&amp;Foo::MemberFunc, &amp;obj);\n    CallClassFunctionWithArgs(&amp;Foo::MemberFuncWithArgs, 34, \"hello\", 65.87, &amp;obj);\n\n\n    // Works with inheritance too! This will now call Bar::MemberFunc\n    Bar bar;\n\n    CallClassFunction(&amp;Foo::MemberFunc, &amp;bar);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10276450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4c061214f5032c7b0aa153f6946b5cb?s=128&d=identicon&r=PG&f=1", "display_name": "Sida", "link": "https://stackoverflow.com/users/10276450/sida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 52859446, "answer_count": 2, "score": 0, "last_activity_date": 1539794029, "creation_date": 1539791818, "last_edit_date": 1539792327, "question_id": 52859032, "link": "https://stackoverflow.com/questions/52859032/pass-a-member-function-as-argument-in-libclang-visitor", "title": "pass a member function as argument in libclang visitor", "body": "<p>I am using LibClang to traverse AST in a C++ program as below:</p>\n\n<pre><code>CXChildVisitResult visitor(CXCursor cursor, CXCursor parent, CXClientData data) {\n  // some code\n}\n\nint main() {\n  // some code\n  clang_visitChildren(rootCursor, visitor, 0);\n}\n</code></pre>\n\n<p>I do not know how to pass <code>visitor</code> to <code>clang_visitChildren()</code> if <code>visitor()</code> is a member of a class. I tried using <code>ClassName::visitor</code> instead of visitor, but I get the following compiler error:</p>\n\n<pre><code>error: invalid use of non-static member function \u2018CXChildVisitResult ClassName::visitor(CXCursor, CXCursor, CXClientData)\u2019\n</code></pre>\n"}, {"tags": ["c++", "include", "default-value", "ros", "forward-declaration"], "answers": [{"comments": [{"owner": {"reputation": 482, "user_id": 9926122, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fHFqCrMePXY/AAAAAAAAAAI/AAAAAAAAAAA/rsbyEi7mBqk/photo.jpg?sz=128", "display_name": "Laboratorio Cobotica", "link": "https://stackoverflow.com/users/9926122/laboratorio-cobotica"}, "edited": false, "score": 0, "creation_date": 1539792762, "post_id": 52859062, "comment_id": 92633287, "body": "Thanks for the quick reply. So is it that ConstPtr is not a pointer per se, and that&#39;s why I need to include that header as well?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "reply_to_user": {"reputation": 482, "user_id": 9926122, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fHFqCrMePXY/AAAAAAAAAAI/AAAAAAAAAAA/rsbyEi7mBqk/photo.jpg?sz=128", "display_name": "Laboratorio Cobotica", "link": "https://stackoverflow.com/users/9926122/laboratorio-cobotica"}, "edited": false, "score": 0, "creation_date": 1539801503, "post_id": 52859062, "comment_id": 92637525, "body": "I think you will need to include the header in your CPP file if you want to call a function like <code>foo</code> that has a default parameter, because to pass the default value you need to know how to construct the object. But I did not parse the file you linked, so I&#39;m not sure exactly what your use case is."}, {"owner": {"reputation": 482, "user_id": 9926122, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fHFqCrMePXY/AAAAAAAAAAI/AAAAAAAAAAA/rsbyEi7mBqk/photo.jpg?sz=128", "display_name": "Laboratorio Cobotica", "link": "https://stackoverflow.com/users/9926122/laboratorio-cobotica"}, "edited": false, "score": 0, "creation_date": 1539934732, "post_id": 52859062, "comment_id": 92688418, "body": "No, ok, I got the part regarding <code>foo</code> when you said in the answer I need to create an object, which means I need the constructor and thus the include.  The second bit was about the first question, which refers to ConstPtr. In the link, you would find:      <code>typedef boost::shared_ptr&lt; ::std_msgs::Float64MultiArray_&lt;ContainerAllocator&gt; const&gt; ConstPtr;</code>  which I&#39;m almost sure doesn&#39;t really count as a pointer since the syntax isn&#39;t something like <code>type * ConstPtr</code>."}, {"owner": {"reputation": 482, "user_id": 9926122, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fHFqCrMePXY/AAAAAAAAAAI/AAAAAAAAAAA/rsbyEi7mBqk/photo.jpg?sz=128", "display_name": "Laboratorio Cobotica", "link": "https://stackoverflow.com/users/9926122/laboratorio-cobotica"}, "edited": false, "score": 0, "creation_date": 1539935543, "post_id": 52859062, "comment_id": 92688800, "body": "Found a <a href=\"https://stackoverflow.com/questions/16588075/forward-declarations-and-shared-ptr\">related question</a> which explains I should be able to do it, however my real msg would have me include std::allocator, which I&#39;m not really using, so I&#39;ll include the message itself since it is what I really use. Leaving the link for anybody else interested."}], "tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": true, "score": 1, "last_activity_date": 1539791914, "creation_date": 1539791914, "answer_id": 52859062, "question_id": 52858805, "link": "https://stackoverflow.com/questions/52858805/c-and-ros-include-vs-forward-declare-of-reference-with-set-default-and-ty/52859062#52859062", "title": "C++ (and ROS) - Include vs. forward declare of reference with set default and typedef", "body": "<p>A forward declaration of <code>X</code> is sufficient to use an <code>X*</code> or <code>X&amp;</code> as a function parameter or class member, because the full definition of a class is not needed to be able to use its address.</p>\n\n<p>But in order to create an object of that class, even one with a default value, you're going to need its definition.</p>\n"}], "owner": {"reputation": 482, "user_id": 9926122, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fHFqCrMePXY/AAAAAAAAAAI/AAAAAAAAAAA/rsbyEi7mBqk/photo.jpg?sz=128", "display_name": "Laboratorio Cobotica", "link": "https://stackoverflow.com/users/9926122/laboratorio-cobotica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 52859062, "answer_count": 1, "score": -1, "last_activity_date": 1539791914, "creation_date": 1539791106, "last_edit_date": 1539791829, "question_id": 52858805, "link": "https://stackoverflow.com/questions/52858805/c-and-ros-include-vs-forward-declare-of-reference-with-set-default-and-ty", "title": "C++ (and ROS) - Include vs. forward declare of reference with set default and typedef", "body": "<p>I have two very related questions regarding forward declarations, their advantages and difference with <code>#include</code>s. After reading on them it's still unclear to me if:</p>\n\n<ul>\n<li><p>using a ConstPtr from a ROS message (like <a href=\"http://docs.ros.org/kinetic/api/librealsense2/html/Float64MultiArray_8h_source.html\" rel=\"nofollow noreferrer\">this</a>) counts as a pointer and can be (somehow) forward declared, or requires an <code>#include</code>;</p></li>\n<li><p><code>void foo(const Eigen::Vector3d&amp; scale={0.001, 0.001, 0.001});</code> in a .h file would be fine with something like (but this doesn't actually compile)</p>\n\n<pre><code>namespace Eigen\n{\n\nclass Vector3d;\n}\n</code></pre></li>\n</ul>\n\n<p>at the top of the .h after all the other <code>#include</code>s or if I should use the proper header. </p>\n\n<p>To be clear, the second issue is with the fact <code>scale</code> has a default value, which is actually the one I will always be using in the .cpp. This is the only instance where I'm using a Vector3d.</p>\n\n<p>I'm also fairly certain if the forward declaration is enough I therefore would not need to include the proper header in the .cpp as well, since I'm only ever using the default value inside the method.</p>\n"}, {"tags": ["c++", "string", "struct", "crtp", "bad-alloc"], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1539792461, "post_id": 52858966, "comment_id": 92633122, "body": "You <i>can</i>, however, store and pass around references or pointers to derived members if you so need, but that&#39;s it."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 103, "user_id": 9886674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb72c39384a364851f700e9178056410?s=128&d=identicon&r=PG&f=1", "display_name": "redfeatherplusplus", "link": "https://stackoverflow.com/users/9886674/redfeatherplusplus"}, "edited": false, "score": 0, "creation_date": 1539797532, "post_id": 52858966, "comment_id": 92635611, "body": "@redfeatherplusplus no write, no read, only taking the address or binding to a reference. And the resulting pointer/reference can&#39;t of course be used before the derived subobject is constructed."}, {"owner": {"reputation": 103, "user_id": 9886674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb72c39384a364851f700e9178056410?s=128&d=identicon&r=PG&f=1", "display_name": "redfeatherplusplus", "link": "https://stackoverflow.com/users/9886674/redfeatherplusplus"}, "edited": false, "score": 0, "creation_date": 1539813923, "post_id": 52858966, "comment_id": 92642809, "body": "Ah, I see. Thanks!"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1539792271, "last_edit_date": 1539792271, "creation_date": 1539791603, "answer_id": 52858966, "question_id": 52858774, "link": "https://stackoverflow.com/questions/52858774/is-accessing-accessing-a-child-attribute-in-the-parent-constructor-ub-when-using/52858966#52858966", "title": "Is accessing accessing a child attribute in the parent constructor UB when using CTRP?", "body": "<blockquote>\n  <p>Is accessing accessing a child attribute in the parent constructor UB</p>\n</blockquote>\n\n<p>Yes, in general.</p>\n\n<blockquote>\n  <p>... when using CTRP?</p>\n</blockquote>\n\n<p>And yes, in particular.</p>\n\n<blockquote>\n  <p>If so exactly why? </p>\n</blockquote>\n\n<p>Because the behaviour of accessing an object outside its lifetime is undefined. The lifetime of the derived object and its members has not yet begun by the time the base-sub object is being constructed.</p>\n\n<p>Conclusion: CRTP bases must not do the CRTP magic (i.e. you musn't do <code>static_cast&lt;Derived*&gt;(this)</code> or similar) in their constructors nor destructors (and be careful of calling member functions, as those must also not do the same).</p>\n\n<blockquote>\n  <p>Bonus points for anyone who can give suggestions for how to tackle this problem. Should / can I add an \"Init\" \"virtual\" CTRP method that the parent class calls to initialize the child variables?</p>\n</blockquote>\n\n<p>The derived class constructor should initialize its own variables whether you use CRTP or not. The constructor should do nothing extra beyond initializing the state of the object. It shouldn't \"do fruit things\".</p>\n"}], "owner": {"reputation": 103, "user_id": 9886674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb72c39384a364851f700e9178056410?s=128&d=identicon&r=PG&f=1", "display_name": "redfeatherplusplus", "link": "https://stackoverflow.com/users/9886674/redfeatherplusplus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 52858966, "answer_count": 1, "score": 1, "last_activity_date": 1539792271, "creation_date": 1539790953, "question_id": 52858774, "link": "https://stackoverflow.com/questions/52858774/is-accessing-accessing-a-child-attribute-in-the-parent-constructor-ub-when-using", "title": "Is accessing accessing a child attribute in the parent constructor UB when using CTRP?", "body": "<p>I made a wandbox that captures my issue: <a href=\"https://wandbox.org/permlink/qAX6SL43BvERo32Z\" rel=\"nofollow noreferrer\">https://wandbox.org/permlink/qAX6SL43BvERo32Z</a></p>\n\n<p>Basically, as the tittle suggests. I am using CRTP, and my base / parent class constructor calls a child method using the standard way in CTRP. </p>\n\n<p>BUT that child method uses it's own child classes's attributes, which if are of certain type, such as std::string, appear to cause runtime issues (Such as bad alloc on MSVC, and 'what():  basic_string::_M_create' / empty string on GCC).</p>\n\n<p>Long story short, is this UB? If so exactly why?  </p>\n\n<p>Bonus points for anyone who can give suggestions for how to tackle this problem. Should / can I add an \"Init\" \"virtual\" CTRP method that the parent class calls to initialize the child variables? Should I just generally avoid CTRP calling child methods in the constructor?</p>\n"}, {"tags": ["c++", "multithreading", "mutex", "unique-lock"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1539790984, "post_id": 52858761, "comment_id": 92632391, "body": "There is no way to change <i>what</i> a reference refers to.  <code>this-&gt;m_mu = mu;</code> is trying to copy the &quot;value&quot; of <code>mu</code> and assigning that &quot;value&quot; to whatever <code>this-&gt;m_mu</code> is currently referring to."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1539791222, "post_id": 52858761, "comment_id": 92632512, "body": "You do not need both mutex and the unique_lock as members of your class, this is redundant."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1539791997, "post_id": 52858761, "comment_id": 92632890, "body": "This smells bad. Most of the time a single class should be taking care of making itself threadsafe. I don&#39;t know why main would own a mutex or lock."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 2, "creation_date": 1539792213, "post_id": 52858761, "comment_id": 92632989, "body": "@ChristopherPisz this is not true. There are multitude of very reasonable cases when a single class should not make itself thread-safe."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1539792635, "post_id": 52858761, "comment_id": 92633208, "body": "@SergeyA I&#39;ll fed-ex you $5 if you show a listing where it makes sense to have main own a mutex and pass it around to other classes, rather than having any shared resource wrapped in a class that manages itself, while using proper OO, and C++"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1539793145, "post_id": 52858761, "comment_id": 92633505, "body": "@ChristopherPisz you are not thinking out of the box. Simplest example will be when mutex is used a sort of gate - for example, to throttle some operation. I will not write code for this, so you can keep your $5."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1539794351, "post_id": 52858761, "comment_id": 92634151, "body": "@Sergey I have never seen this particular box in 35 years. I&#39;ve seen people who wanted to make the box, but I offered them a steel chest instead. If you can&#39;t provide an example here or in private chat, then I fear all our words are wasted and noone will learn anything."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1539802474, "post_id": 52858761, "comment_id": 92638005, "body": "@Andrej you should not be sharing a <code>unique_lock</code> object between threads. That type is not thread-safe and not meant for concurrent access. The <code>mutex</code> is what you share, and each execution agent that wants to synchronise on that mutex creates its own <code>unique_lock</code> object to acquire and release the lock on the mutex."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1539802756, "post_id": 52858761, "comment_id": 92638150, "body": "@ChristopherPisz <i>&quot;Most of the time a single class should be taking care of making itself threadsafe.&quot;</i> [...] <i>&quot;using proper OO, and C++&quot;</i> But what if you&#39;re not using an OO design? There&#39;s more than one way to design software."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1539804188, "post_id": 52858761, "comment_id": 92638789, "body": "@Jonathan In that case, we&#39;d be talking about &#39;C&#39; rather than &#39;C++&#39;, even if we opted to have that C use some C++ features. It&#39;s fairly accepted that C++, the language and the mindset, is object orientated, and embraces RAII. Neither &#39;C&#39;, the language,  nor the mindset (which is being alluded to here) is object orientated."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1539804865, "post_id": 52858761, "comment_id": 92639088, "body": "@ChristopherPisz that&#39;s utter nonsense! It&#39;s perfectly possible (and very popular) to write non-OO C++, while still using C++ features, not just using C. I think either you don&#39;t understand what OO means or you don&#39;t understand C++. RAII is not a feature of OO, for example. <a href=\"http://stroustrup.com/bs_faq.html#Object-Oriented-language\" rel=\"nofollow noreferrer\">Is C++ an Object-Oriented Language?</a> and <a href=\"http://stroustrup.com/bs_faq.html#multiparadigm\" rel=\"nofollow noreferrer\">What is &quot;multiparadigm programming&quot;?</a> and <a href=\"http://stroustrup.com/oopsla.pdf\" rel=\"nofollow noreferrer\">Why C++ isn&#39;t just an Object-Oriented Programming Language</a> go into more detail."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1539810727, "post_id": 52858761, "comment_id": 92641715, "body": "Strousup is right that the language itself does not force you to write OO code. He also said you are free to blow your leg off.  However, good practice, the C++ job market, and maintainability do have such requirements, whether you like them or not. Show me your mutex from main, non RAII, non OO code, and I&#39;ll show you bugtracker over 35 years of C++. Also, you can call passing a mutex from main to various classes, whatever you like. I&#39;ll call it unmaintainable, error prone, and undoubtedly the wrong way to do things, until shown a listing that proves otherwise."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1539810742, "post_id": 52858761, "comment_id": 92641725, "body": "Bottom line is that the mutex should live with the resource it protects."}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 3, "last_activity_date": 1539794428, "last_edit_date": 1539794428, "creation_date": 1539791086, "answer_id": 52858802, "question_id": 52858761, "link": "https://stackoverflow.com/questions/52858761/passing-mutex-reference-from-main-to-a-class/52858802#52858802", "title": "Passing mutex reference from main to a class", "body": "<p>You need to pass the mutex reference when you construct your class.</p>\n\n<pre><code>Worker::Worker(std::mutex &amp;mu, std::unique_lock&lt;std::mutex&gt; &amp;locker)\n:m_mu(mu), locker(locker)\n{}\n</code></pre>\n\n<p>That's the only place you can initialize a reference. Once it's constructed, you cannot change what it references.</p>\n\n<p>Why do you need the locker? The mutex makes the synchronization, the lock is just a RAII object to ease acquiring the mutex.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9795521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wRAc7VP-k3I/AAAAAAAAAAI/AAAAAAAAEHg/Ki97z4z9GMs/photo.jpg?sz=128", "display_name": "Andrej", "link": "https://stackoverflow.com/users/9795521/andrej"}, "edited": false, "score": 0, "creation_date": 1539801395, "post_id": 52860750, "comment_id": 92637464, "body": "Thanks for the tip. Is this approach going to work across multiple threads (of the same class type)? Also, I am getting a compile error: Worker::Worker(const Worker &amp;)&#39;: attempting to reference a deleted function ----- when trying to initialize an array of Worker type  std::vector&lt;Worker&gt; worker(threadsCountInt, Worker(std::ref(mu)));"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 23, "user_id": 9795521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wRAc7VP-k3I/AAAAAAAAAAI/AAAAAAAAEHg/Ki97z4z9GMs/photo.jpg?sz=128", "display_name": "Andrej", "link": "https://stackoverflow.com/users/9795521/andrej"}, "edited": false, "score": 0, "creation_date": 1539802102, "post_id": 52860750, "comment_id": 92637834, "body": "@AndrejTk&#225;\u010d That should be fine as long as they lock the <b>same</b> <i>mutex</i>. I am not getting the error you are getting with my exact code. Did you do something different?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1539802385, "post_id": 52860750, "comment_id": 92637969, "body": "The error means he&#39;s trying to copy a <code>Worker</code> object, which won&#39;t work because the reference makes it non-copyable. I think there&#39;s a bigger design problem with the whole program."}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 2, "last_activity_date": 1539802053, "last_edit_date": 1539802053, "creation_date": 1539798239, "answer_id": 52860750, "question_id": 52858761, "link": "https://stackoverflow.com/questions/52858761/passing-mutex-reference-from-main-to-a-class/52860750#52860750", "title": "Passing mutex reference from main to a class", "body": "<p>You don't need to pass the <em>lock</em> object to the function. As long as the class is referring to the correct <em>mutex</em> you can lock the mutex inside the function like this:</p>\n\n<pre><code>class Worker\n{\nprivate:\n    std::mutex&amp; m_mu;\n\npublic:\n    Worker(std::mutex&amp; mu): m_mu(mu) {} // bind reference during initialization\n\n    void start();\n\n};\n\n// Worker.cpp\n\nvoid Worker::start()\n{\n    std::unique_lock&lt;std::mutex&gt; locker(m_mu); // lock the shared resource\n\n    // Do something with it here\n}\n\nint main()\n{\n    std::mutex mu;\n\n    std::vector&lt;Worker&gt; workers(4, Worker(std::ref(mu)));\n\n    // etc...\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9795521, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wRAc7VP-k3I/AAAAAAAAAAI/AAAAAAAAEHg/Ki97z4z9GMs/photo.jpg?sz=128", "display_name": "Andrej", "link": "https://stackoverflow.com/users/9795521/andrej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2132, "favorite_count": 0, "accepted_answer_id": 52858802, "answer_count": 2, "score": 2, "last_activity_date": 1539802053, "creation_date": 1539790909, "last_edit_date": 1539794194, "question_id": 52858761, "link": "https://stackoverflow.com/questions/52858761/passing-mutex-reference-from-main-to-a-class", "title": "Passing mutex reference from main to a class", "body": "<p>I need to work with the same <code>mutex</code> and <code>unique_lock</code> across the main function and class instances. However, I am having trouble assigning the <code>mutex</code>/<code>unique_lock</code> address to a class member variable (that is a <code>mutex&amp;</code>).</p>\n\n<p>This is what I have:</p>\n\n<p><strong>Worker.h</strong></p>\n\n<pre><code>class Worker \n{\nprivate:\n\n    std::mutex &amp;m_mu;\n    std::unique_lock&lt;std::mutex&gt; &amp;locker;\n\npublic:\n\n    void start(std::mutex &amp;mu, std::unique_lock&lt;std::mutex&gt; &amp;locker);\n\n};\n</code></pre>\n\n<p><strong>Worker.cpp</strong></p>\n\n<pre><code>void Worker::start(std::mutex &amp;mu, std::unique_lock&lt;std::mutex&gt; &amp;locker)\n{\n    this-&gt;mu = mu; // error \n    this-&gt;locker = locker; // error\n}\n</code></pre>\n\n<p>I tried doing <code>this-&gt;mu(mu)</code>; but that doesn't work either. Is there anything I can do to make this work?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "polymorphism", "assignment-operator"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1539790461, "post_id": 52858602, "comment_id": 92632112, "body": "What are you trying to accomplish?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1539790505, "post_id": 52858602, "comment_id": 92632138, "body": "&quot;<i>I would like <code>b1 = (A&amp;)b2</code>; to use <code>B &amp; operator= (B const &amp;other)</code> because <code>b2</code> is a <code>B</code></i>&quot; Sure.. <code>b2</code> is a <code>B</code>. But.. <code>(A&amp;)b2</code> is <code>A&amp;</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1539790572, "post_id": 52858602, "comment_id": 92632176, "body": "This is pretty much not needed in polymorphism.  Normally you would have smart pointers to the objects and assignment of those pointers is trivial.  If you need a &quot;copy&quot; then you make a virtual <code>clone</code> function that provides a new smart pointer that contains a copy of whatever is being pointed to."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1539791209, "creation_date": 1539791209, "answer_id": 52858842, "question_id": 52858602, "link": "https://stackoverflow.com/questions/52858602/polymorphic-assignment-operator-from-base-and-derived-class/52858842#52858842", "title": "Polymorphic assignment operator from base and derived class", "body": "<p><em>I would like to be able to copy either a derived or a base object to a derived object,</em> That is a symptom of poor design.</p>\n\n<p>It's better to strive for a design where the only the leaf-level classes in a class hierarchy are instantiable. This allows you to have clean, non-<code>virtual</code>, assignment operator functions deal only with objects of right type.</p>\n\n<pre><code>class A {\n   public:\n\n      // Make A uninstantiable.\n      virtual ~A() = 0;\n\n      A &amp; operator= (A const &amp;other) {\n         // Here copy A members...\n         cout&lt;&lt;\"A to A\"&lt;&lt;endl;\n         return *this;\n      }\n};\n\nclass B: public A {\n   public: \n\n      // Not necessary.\n      // B &amp; operator= (A const &amp;other) { ... }\n\n      B &amp; operator= (B const &amp;other) {\n         A::operator=(other); // Copy A members.\n         // Here copy B members...\n         cout&lt;&lt;\"B to B\"&lt;&lt;endl; \n         return *this;\n      }\n};\n</code></pre>\n"}], "owner": {"reputation": 415, "user_id": 7465604, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/3afc876e37b3f5b57b3639371cb8f8fd?s=128&d=identicon&r=PG&f=1", "display_name": "Axel Williot", "link": "https://stackoverflow.com/users/7465604/axel-williot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1539791209, "creation_date": 1539790367, "question_id": 52858602, "link": "https://stackoverflow.com/questions/52858602/polymorphic-assignment-operator-from-base-and-derived-class", "title": "Polymorphic assignment operator from base and derived class", "body": "<p>I would like to be able to copy either a derived or a base object to a derived object, and I would like the correct operator to be chosen polymorphically depending on the type of the copied object.</p>\n\n<p>This code does not work, I would like <code>b1 = (A&amp;)b2;</code> to use <code>B &amp; operator= (B const &amp;other)</code> because <code>b2</code> is a <code>B</code>, but it uses <code>B &amp; operator= (A const &amp;other)</code>:</p>\n\n<pre><code>#include&lt;iostream&gt; \n\nusing namespace std;\n\nclass A {\npublic:\n    A &amp; operator= (A const &amp;other) {\n        // Here copy A members...\n        cout&lt;&lt;\"A to A\"&lt;&lt;endl;\n        return *this;\n    }\n};\n\nclass B: public A {\npublic: \n    B &amp; operator= (A const &amp;other) {\n        A::operator=(other); // Copy A members.\n        cout&lt;&lt;\"A to B\"&lt;&lt;endl;\n        return *this;\n    }\n    B &amp; operator= (B const &amp;other) {\n        A::operator=(other); // Copy A members.\n        // Here copy B members...\n        cout&lt;&lt;\"B to B\"&lt;&lt;endl; \n        return *this;\n    }\n};\n\nint main() \n{\n    B b1, b2;\n    A a2;\n    b1 = b2;\n    cout&lt;&lt;endl; \n    b1 = (A&amp;)b2;\n    cout&lt;&lt;endl; \n    b1 = a2;\n    cout&lt;&lt;endl; \n    return 0; \n}\n</code></pre>\n\n<p>I guess I have to make something <code>virtual</code> but I don't find how.</p>\n"}, {"tags": ["c#", "c++", "vtk", "hwnd"], "owner": {"reputation": 11, "user_id": 10325189, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ts7fXcnb8Jk/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPCgeNBasuH3m844cUdxlNVJx6ejA/mo/photo.jpg?sz=128", "display_name": "Philipp", "link": "https://stackoverflow.com/users/10325189/philipp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539794810, "creation_date": 1539790169, "last_edit_date": 1539794810, "question_id": 52858537, "link": "https://stackoverflow.com/questions/52858537/c-clr-vtkinteractor-with-hwnd", "title": "c++/clr vtkInteractor with hwnd", "body": "<p>I successfully implemented a c++ vtk rendererWindow via a clr class into windows Forms, described here: <a href=\"https://stackoverflow.com/a/30301203/10325189\">https://stackoverflow.com/a/30301203/10325189</a> . So many thanks for that.\nSo my question is: is it possible to interact with this windows Form via an vtkInteractor. So lets say I click at anywhere in the hwnd that i get implement functions like: <a href=\"https://www.vtk.org/Wiki/VTK/Examples/Cxx/Picking/HighlightPickedActor\" rel=\"nofollow noreferrer\">https://www.vtk.org/Wiki/VTK/Examples/Cxx/Picking/HighlightPickedActor</a>\nI have no idea how to start here...\nAny help would be great! </p>\n\n<p>[Edit]\nokay i think, the question was a little bit too fast asked. I think i will get it. If i am right a have to pick the data (actors) from the c++ native code back to the wpf again... sry...</p>\n"}, {"tags": ["c++", "macos", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1539790085, "post_id": 52858314, "comment_id": 92631864, "body": "wouldn&#39;t it be better to <code>fork</code>, <code>setuid</code> and <code>exec</code>? I don&#39;t think I&#39;ve seen this functionality built into boost::process, so I imagine you might need to hand-roll it."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 2, "last_activity_date": 1539810359, "creation_date": 1539810359, "answer_id": 52863613, "question_id": 52858314, "link": "https://stackoverflow.com/questions/52858314/boost-process-running-su/52863613#52863613", "title": "boost process running su", "body": "<p>First of all, you don't show enough code.</p>\n\n<p>Second of all, if you use <code>su</code>, you shouldn't require <code>bp::shell</code>.</p>\n\n<p>Third of all, that code looks like a C compiler ran away from it. Why so complicated? Why all the dynamic memory management? Why async, if all you do is wait for the completion?</p>\n\n<p>Here's my simplified take, which does work for me. Perhaps you can find out a finder detail you were doing differently:</p>\n\n<h2>Synchronous, C++:</h2>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/a2a9d97729ec0e9d\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/process.hpp&gt;\n#include &lt;boost/process/async.hpp&gt;\n\nnamespace bp = boost::process;\n\nstruct ProcessResult {\n    std::string out, err;\n    int exitcode;\n};\n\nProcessResult RunProcess(std::string exe, std::vector&lt;std::string&gt; args, boost::asio::io_service&amp; io) {\n    std::future&lt;std::string&gt; out, err;\n    bp::group group;\n\n    bp::child child(\n        bp::search_path(exe), args, bp::std_in.close(), bp::std_out &gt; out, bp::std_err &gt; err, io, group\n    );\n\n    child.wait();\n    return { out.get(), err.get(), child.exit_code() };\n}\n\nint main() {\n    boost::asio::io_service io;\n\n    // keep work to avoid io.run to complete early\n    auto work = boost::asio::make_work_guard(io);\n    std::thread io_thread([&amp;io] { io.run(); });\n\n    auto pstree = RunProcess(\"su\", { \"sehe\", \"-c\", \"/usr/bin/free\" }, io);\n\n    std::cout &lt;&lt; \"Exitcode: \" &lt;&lt; pstree.exitcode &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Output: \" &lt;&lt; pstree.out &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Error: \" &lt;&lt; pstree.err &lt;&lt; \"\\n\";\n\n    work.reset(); // allow service to complete\n    io_thread.join();\n}\n</code></pre>\n\n<p>Which prints (when run as root):</p>\n\n<pre><code>Exitcode: 0\nOutput:               total        used        free      shared  buff/cache   available\nMem:       32832516    21846896     2486924     2963636     8498696     5595284\nSwap:             0           0           0\n\nError: \n</code></pre>\n\n<p>When not run as root:</p>\n\n<pre><code>Exitcode: 1\nOutput: \nError: su: must be run from a terminal\n</code></pre>\n\n<h2>Asynchronous</h2>\n\n<p>You can still combine asynchrony with C++ style. See e.g. </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/52025021/unexpected-end-of-file-while-reading-mpstat-output-with-boost-asio-async-read-un/52026676#52026676\">Unexpected end of file while reading mpstat output with BOOST ASIO async_read_until</a></li>\n<li><a href=\"https://stackoverflow.com/questions/49181122/read-child-process-stdout-in-a-separate-thread-with-boost-process/49182588#49182588\">Read child process stdout in a separate thread with BOOST process</a></li>\n<li><a href=\"https://stackoverflow.com/questions/48678012/simultaneous-read-and-write-to-childs-stdio-using-boost-process/48681804#48681804\">simultaneous read and write to child&#39;s stdio using boost.process</a></li>\n<li><a href=\"https://stackoverflow.com/questions/48721833/boostprocess-output-blank-lines/48726975#48726975\">Boost::process output blank lines</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 4112376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6468c7cda31a0bddaa87f17ff6301f5?s=128&d=identicon&r=PG&f=1", "display_name": "Liran Haim", "link": "https://stackoverflow.com/users/4112376/liran-haim"}, "is_accepted": false, "score": 0, "last_activity_date": 1539846456, "creation_date": 1539846456, "answer_id": 52868703, "question_id": 52858314, "link": "https://stackoverflow.com/questions/52858314/boost-process-running-su/52868703#52868703", "title": "boost process running su", "body": "<p>Thank you for the replay.</p>\n\n<p>my problem that after run the \"su\" process I see in my Xcode console output the follow error \"nw_path_close_fd Failed to close guarded necp fd 4 [9: Bad file descriptor]\"</p>\n\n<p>in my code, I need to use async because of the rest of my app need to run.</p>\n\n<p>I found that \"boost::process::async_system\" do the job but don't have the PID of the process.</p>\n"}], "owner": {"reputation": 41, "user_id": 4112376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6468c7cda31a0bddaa87f17ff6301f5?s=128&d=identicon&r=PG&f=1", "display_name": "Liran Haim", "link": "https://stackoverflow.com/users/4112376/liran-haim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1539846456, "creation_date": 1539789497, "last_edit_date": 1539789969, "question_id": 52858314, "link": "https://stackoverflow.com/questions/52858314/boost-process-running-su", "title": "boost process running su", "body": "<p>I using boost 1_65_1 and try to run a process on MacOS.\nmy main process is running as root \nI need to launch a sub launch as a normal user.\nMy command line:\nsu user_name -c \"full The path to the Executable file\".\nwhen I run the command line in the terminal as root it working.</p>\n\n<p>When I try to run it using Boost Process the Process \"su\" is running but exit immediately with error 2.</p>\n\n<p>My code for running the Process:</p>\n\n<pre><code>void RunProcess(std::string a_PathToExe, std::vector&lt;std::string&gt; a_Args, io_servicePtr a_pIoServicePtr,\n                ProcessExitCallBack a_pProcessExitCallBack) {\n\n    Error l_Error;\n    std::stringstream l_ShellCommandLine;\n    ProcessHandlePtr l_pProcess = NULL;\n    boost::process::group l_Group;\n    boost::shared_ptr&lt;boost::process::async_pipe&gt; l_PipeOutputStream =\n        boost::shared_ptr&lt;boost::process::async_pipe&gt;(new boost::process::async_pipe(*(a_pIoServicePtr.get())));\n    boost::shared_ptr&lt;boost::process::async_pipe&gt; l_PipeError =\n        boost::shared_ptr&lt;boost::process::async_pipe&gt;(new boost::process::async_pipe(*(a_pIoServicePtr.get())));\n\n    try {\n\n        l_ShellCommandLine &lt;&lt; \"\\\"\" &lt;&lt; a_PathToExe &lt;&lt; \"\\\"\"\n                           &lt;&lt; \" \";\n        for (size_t i = 0; i &lt; a_Args.size(); ++i) {\n            l_ShellCommandLine &lt;&lt; a_Args.at(i) &lt;&lt; \" \";\n        }\n\n        l_pProcess = ProcessHandlePtr(new boost::process::child(\n            l_ShellCommandLine.str(), boost::process::std_in.close(),\n            boost::process::std_out &gt; *(l_PipeOutputStream.get()), boost::process::std_err &gt; *(l_PipeError.get()),\n            *(a_pIoServicePtr.get()), l_Group, boost::process::shell,\n            boost::process::on_exit = [](int exit, const std::error_code &amp;ec_in) {\n                WRITE_INFO_LOG(\"The process exit with error %d %s\", exit, ec_in.message().c_str());\n            }));\n\n        l_PID = l_pProcess-&gt;id();\n        WaiteForProcessToExit(l_pProcess, l_PipeOutputStream, l_PipeError, a_pProcessExitCallBack);\n    }\n\n    catch (std::exception &amp;e) {\n\n    } catch (...) {\n    }\n    return;\n}\n\nvoid WaiteForProcessToExit(ProcessHandlePtr a_pProcessHandle,\n                           boost::shared_ptr&lt;boost::process::async_pipe&gt; a_PipeOutputStream,\n                           boost::shared_ptr&lt;boost::process::async_pipe&gt; a_PipeError,\n                           ProcessExitCallBack a_pProcessExitCallBack) {\n\n    std::array&lt;char, 1024&gt; buffer = std::array&lt;char, 1024&gt;{};\n    a_PipeOutputStream-&gt;async_read_some(\n        boost::process::buffer(buffer), [=](boost::system::error_code ec, size_t transferre) {\n            if (transferre &gt; 0) {\n                std::string Line = std::string(buffer.data());\n                WRITE_INFO_LOG(\"%s\", Line.c_str());\n            }\n\n            if (ec != 0) {\n\n                WRITE_INFO_LOG(\"The Process %d has exit with error code %d\", a_pProcessHandle-&gt;id(), ec);\n                if (a_pProcessExitCallBack != NULL) {\n                    a_pProcessExitCallBack(a_pProcessHandle-&gt;id(), Error());\n                }\n            } else {\n                WaiteForProcessToExit(a_pProcessHandle, a_PipeOutputStream, a_PipeError, a_pProcessExitCallBack);\n            }\n        });\n}\n</code></pre>\n\n<p>why the sub prosess it not running?\nThanks in advance</p>\n"}, {"tags": ["c++", "winapi", "gdi"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 5, "creation_date": 1539789865, "post_id": 52858141, "comment_id": 92631717, "body": "You can&#39;t just paint on somebody else&#39;s window like that. You need to create a transparent window that you place in the same place as the other window, and draw the border on that"}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1539791317, "post_id": 52858141, "comment_id": 92632560, "body": "You mean I need to create WNDCLASSA object with transparent background, then call RegisterClass for this object, then place this window on handle&#39;s window and then draw border on newly created window, right?"}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 2, "creation_date": 1539792269, "post_id": 52858141, "comment_id": 92633026, "body": "Does this API serve your purpose? <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-flashwindowex\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/desktop/api/winuser/&hellip;</a>"}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1539796766, "post_id": 52858141, "comment_id": 92635271, "body": "@Soonts, looks fine...even very fine, but is it possible to change the color of flashing?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1539802202, "post_id": 52858141, "comment_id": 92637883, "body": "Nope, the color depends on the Windows theme. Also, <code>FlashWindowEx</code> won&#39;t work for custom windows, which draw the title bar on their own."}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539802922, "post_id": 52858141, "comment_id": 92638226, "body": "@zett42, so I need to use advice of David? Is there example of such approach?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539807994, "post_id": 52858141, "comment_id": 92640498, "body": "Have a look at <a href=\"https://docs.microsoft.com/en-us/windows/desktop/winmsg/window-features#layered-windows\" rel=\"nofollow noreferrer\">layered windows</a>. Simplest way: draw rectangle with a fill color that you pass as color key for <code>SetLayeredWindowAttributes()</code>. This way only the border of the rectangle will be visible, while the inside will be transparent."}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539849944, "post_id": 52858141, "comment_id": 92652685, "body": "@zett42, I&#39;ve just read about layered windows. It looks like possible solution, but I can&#39;t understand the way I should use them to solve my problem. Could you please provide some code samples or links to examples of how to use them as you described?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539870943, "post_id": 52858141, "comment_id": 92664806, "body": "I will give an example if I find some time in the evening."}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539874887, "post_id": 52858141, "comment_id": 92667444, "body": "@zett42, thanks. Hope you&#39;ll find some time for this. I tried to create it by myself , but it didn&#39;t work properly."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539934324, "post_id": 52858141, "comment_id": 92688254, "body": "In the updated code you are calling <code>SetWindowPos</code> for cmd window with <code>SWP_ASYNCWINDOWPOS</code>, so it can happen that it receives the message <i>after</i> your frame window is shown. Remove the flag and it should work."}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539934886, "post_id": 52858141, "comment_id": 92688483, "body": "@zett42, thanks. Now that works - the border is drawn, but I can&#39;t focus cmd window. Is it possible to draw border this way and make cmd window focusable?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539937295, "post_id": 52858141, "comment_id": 92689700, "body": "Use <code>WS_EX_LAYERED|WS_EX_TRANSPARENT</code> window style. Remove case branch for <code>WM_NCHITTEST</code>. From the docs: <i>&quot;If the layered window has the WS_EX_TRANSPARENT extended window style, the shape of the layered window will be ignored and the mouse events will be passed to the other windows underneath the layered window.&quot;</i>"}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539938471, "post_id": 52858141, "comment_id": 92690295, "body": "@zett42, thanks. Looks like we&#39;ve almost finished. The last question: if cmd window is maximized, there is no top and bottom border lines and one left (or right line, depend on position) is drawn on the second display (I&#39;ve got 2 physical displays), but when cmd window is not maximized - everything works fine. How to make it works properly in maximized state? P.S. updated source code"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539940801, "post_id": 52858141, "comment_id": 92691442, "body": "Yeah, maximized windows have coordinates bigger than the screen (this is how the system &quot;removes&quot; the window border). Check if window has <code>WS_MAXIMIZED</code> style, and then use the work area of the monitor instead. Like so: <code>GetMonitorInfoW(MonitorFromWindow(cmdHanlde,MONITOR_DEFAULTT&zwnj;&#8203;ONEAREST), &amp;monitorInfo);</code>, then use <code>monitorInfo.rcWork</code>."}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539978333, "post_id": 52858141, "comment_id": 92710392, "body": "@zett42, Thanks for the help. I changed the code a little to make border flashing and to make border adjust to window size (I implemented it using timers). Everything works fine (when I resize window borders is resized respectively), but if I maximize or minimize window then border disappears. Could you please look at the updated code and try to find the reason?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539981914, "post_id": 52858141, "comment_id": 92711568, "body": "Works for me, if I maximize the console window before launching the test app. You have to find a way to always position the frame window above the target window in z-order."}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539983476, "post_id": 52858141, "comment_id": 92712182, "body": "@zett42, in this case it works for me as well. I mean that when I maximize console app in run time, then the border isn&#39;t drawn.Can I use SetWindowPos for this purpose?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "reply_to_user": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "edited": false, "score": 0, "creation_date": 1540035071, "post_id": 52858141, "comment_id": 92721161, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/182186/discussion-between-zett42-and-rudolfninja\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "edited": false, "score": 0, "creation_date": 1539933751, "post_id": 52878331, "comment_id": 92688046, "body": "Thanks for the example. I edited your code to make it draw border around cmd window, but unfortunately borders is drawn behind the cmd window, but not on top of it. I added the code I&#39;ve ot now in the initial post. What should I change to draw border on top of cmd&#39;s window?"}], "tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": false, "score": 4, "last_activity_date": 1539879810, "last_edit_date": 1539879810, "creation_date": 1539879200, "answer_id": 52878331, "question_id": 52858141, "link": "https://stackoverflow.com/questions/52858141/draw-border-on-top-of-another-application-window/52878331#52878331", "title": "Draw border on top of another application window", "body": "<p>You can't draw directly on another window, because the system may refresh the window at any time, overwriting your drawing.</p>\n\n<p>To make your drawing persistent, create a <a href=\"https://docs.microsoft.com/en-us/windows/desktop/winmsg/window-features#layered-windows\" rel=\"nofollow noreferrer\">layered window</a>, positioned on top of the other window.</p>\n\n<ol>\n<li>Create the window with <a href=\"https://docs.microsoft.com/en-us/windows/desktop/winmsg/extended-window-styles\" rel=\"nofollow noreferrer\"><code>WS_EX_LAYERED</code></a> flag.</li>\n<li>Pass a color key to <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-setlayeredwindowattributes\" rel=\"nofollow noreferrer\"><code>SetLayeredWindowAttributes()</code></a>.</li>\n<li>In your <code>WM_PAINT</code> handler, draw the inside of the rectangle with the color key (by using it for the brush). Everything you draw with the color key will become transparent. Draw the border of the rectangle with the desired color (by using it for the pen).</li>\n</ol>\n\n<p>Here is a minimal example to get you started. The frame can be moved around by drag-n-drop.</p>\n\n<p>Note there is no error handling to keep the sample code concise. You should check the return value of each Windows API call.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n\nconst COLORREF MY_COLOR_KEY = RGB( 255, 0, 255 );\n\nint APIENTRY wWinMain( \n    HINSTANCE hInstance, HINSTANCE /*hPrevInst*/, LPWSTR /*lpCmdLine*/, int nCmdShow )\n{\n    WNDCLASSW wc{ sizeof( wc ) };\n    wc.hInstance = hInstance;\n    wc.style = CS_HREDRAW | CS_VREDRAW;\n    wc.hCursor = LoadCursor( nullptr, IDC_ARROW );\n    wc.hbrBackground = reinterpret_cast&lt;HBRUSH&gt;( COLOR_BTNFACE + 1 );\n    wc.lpszClassName = L\"MyTransparentFrame\";\n\n    wc.lpfnWndProc = []( HWND hwnd, UINT msg, WPARAM wp, LPARAM lp ) -&gt; LRESULT\n    {\n        switch( msg )\n        {\n            case WM_PAINT:\n            {\n                PAINTSTRUCT ps{};\n                HDC hdc = BeginPaint( hwnd, &amp;ps );\n\n                RECT rc{}; GetClientRect( hwnd, &amp;rc );\n\n                HPEN hPen = CreatePen( PS_SOLID, 20, GetSysColor( COLOR_HIGHLIGHT ) );\n                HBRUSH hBrush = CreateSolidBrush( MY_COLOR_KEY );\n                HGDIOBJ hOldPen = SelectObject( hdc, hPen );\n                HGDIOBJ hOldBrush = SelectObject( hdc, hBrush );\n\n                Rectangle( hdc, rc.left, rc.top, rc.right, rc.bottom );\n\n                if( hOldPen )\n                    SelectObject( hdc, hOldPen );\n                if( hOldBrush )\n                    SelectObject( hdc, hOldBrush );\n                if( hPen )\n                    DeleteObject( hPen );\n                if( hBrush )\n                    DeleteObject( hBrush );\n\n                EndPaint( hwnd, &amp;ps );\n            }\n            break;\n\n            case WM_DESTROY:\n                PostQuitMessage( 0 );\n            break;\n\n            case WM_NCHITTEST:\n                return HTCAPTION;  // to be able to drag the window around\n            break;\n\n            default:\n                return DefWindowProcW( hwnd, msg, wp, lp );\n        }\n\n        return 0;       \n    };\n\n    RegisterClassW( &amp;wc );\n\n    HWND hwnd = CreateWindowExW( WS_EX_LAYERED, wc.lpszClassName, L\"\", WS_POPUP,\n                         200, 200, 800, 600, nullptr, nullptr, hInstance, nullptr );\n\n    SetLayeredWindowAttributes( hwnd, MY_COLOR_KEY, 255, LWA_COLORKEY );\n    ShowWindow( hwnd, nCmdShow );\n\n    MSG msg;\n    while( GetMessage( &amp;msg, nullptr, 0, 0 ) )\n    {\n        TranslateMessage( &amp;msg );\n        DispatchMessage( &amp;msg );\n    }\n\n    return (int) msg.wParam;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1540127917, "post_id": 52915334, "comment_id": 92741419, "body": "There is still the problem, that you can no longer bring the console window to front, if another window is in the foreground."}, {"owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1540130704, "post_id": 52915334, "comment_id": 92742232, "body": "@zett42, unfortunately you&#39;re right =( I can bring the window to the front after minimize, but not if another window is in the foreground. Any ides how to solve it? Check if window is overlapped and then use this bool flag in the same way?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1540138641, "post_id": 52915334, "comment_id": 92744534, "body": "I don&#39;t really have a good idea. I would ask this as a new question: &quot;How to keep a window always in front of another applications window&quot;."}], "tags": [], "owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "is_accepted": true, "score": 1, "last_activity_date": 1540125182, "creation_date": 1540125182, "answer_id": 52915334, "question_id": 52858141, "link": "https://stackoverflow.com/questions/52858141/draw-border-on-top-of-another-application-window/52915334#52915334", "title": "Draw border on top of another application window", "body": "<p>Finally I managed to solve the problem with the following code:</p>\n\n<pre><code>const COLORREF MY_COLOR_KEY = RGB(255, 128, 0);\nHWND cmdHanlde = NULL;\nconstexpr unsigned int timerIdWindowUpdate = 1;\nconstexpr unsigned int timerIdFrameColor = 2;\nbool tick = false;\nbool minimized = false;\n\nint APIENTRY wWinMain(_In_ HINSTANCE hInstance,\n                 _In_opt_ HINSTANCE hPrevInstance,\n                 _In_ LPWSTR    lpCmdLine,\n                 _In_ int       nCmdShow)\n{\n    WNDCLASSEX wc = {};\n    wc.cbSize = sizeof(WNDCLASSEX);\n    wc.style = CS_HREDRAW | CS_VREDRAW;\n    wc.lpszClassName = L\"MyTransparentFrame\";\n    wc.hCursor = ::LoadCursor(NULL, IDC_ARROW);\n    wc.hbrBackground = NULL;\n\n    wc.lpfnWndProc = [](HWND hwnd, UINT msg, WPARAM wp, LPARAM lp) -&gt; LRESULT\n    {\n        switch (msg)\n        {\n        case WM_PAINT:\n        {\n           PAINTSTRUCT ps{};\n            HDC hdc = BeginPaint(hwnd, &amp;ps);\n\n            RECT rc{}; GetClientRect(hwnd, &amp;rc);\n            HPEN hPen = CreatePen(PS_SOLID, 5, tick ? RGB(255, 128, 1) : RGB(255, 201, 14));\n            HBRUSH hBrush = CreateSolidBrush(MY_COLOR_KEY);\n            HGDIOBJ hOldPen = SelectObject(hdc, hPen);\n            HGDIOBJ hOldBrush = SelectObject(hdc, hBrush);\n\n            Rectangle(hdc, rc.left, rc.top, rc.right, rc.bottom);\n\n            if (hOldPen)\n                SelectObject(hdc, hOldPen);\n            if (hOldBrush)\n                SelectObject(hdc, hOldBrush);\n            if (hPen)\n                DeleteObject(hPen);\n            if (hBrush)\n                DeleteObject(hBrush);\n\n            EndPaint(hwnd, &amp;ps);\n        }\n        break;\n        case WM_TIMER:\n        {\n            if (wp == timerIdWindowUpdate)\n            {\n                WINDOWPLACEMENT windowPlacement = { sizeof(WINDOWPLACEMENT), };\n                if (::GetWindowPlacement(cmdHanlde, &amp;windowPlacement))\n                {\n                    if (windowPlacement.showCmd == SW_SHOWMINIMIZED\n                        || !IsWindowVisible(cmdHanlde))\n                    {\n                        ShowWindow(hwnd, SW_HIDE);\n                        minimized = true;\n                    }\n                    else\n                    {\n                        RECT rect = {};\n                        DwmGetWindowAttribute(cmdHanlde, DWMWA_EXTENDED_FRAME_BOUNDS, &amp;rect, sizeof(rect));\n                        MONITORINFO monInfo;\n                        monInfo.cbSize = sizeof(MONITORINFO);\n                        GetMonitorInfoW(MonitorFromWindow(cmdHanlde, MONITOR_DEFAULTTONEAREST), &amp;monInfo);\n                        if (cmdHanlde != NULL &amp;&amp; ::IsZoomed(cmdHanlde))\n                        {\n                            rect.left = monInfo.rcWork.left;\n                            rect.top = monInfo.rcWork.top;\n                            rect.bottom = monInfo.rcWork.bottom &gt; rect.bottom ? rect.bottom : monInfo.rcWork.bottom;\n                            rect.right = monInfo.rcWork.right &gt; rect.right ? rect.right : monInfo.rcWork.right;\n                        }\n                        if (minimized)\n                        {\n                            ::SetWindowPos(hwnd, cmdHanlde, rect.left, rect.top, rect.right - rect.left, rect.bottom - rect.top, SWP_NOMOVE | SWP_NOSIZE | SWP_NOACTIVATE);\n                            minimized = false;\n                        }\n                        else\n                        {\n                            ::SetWindowPos(cmdHanlde, hwnd, rect.left, rect.top, rect.right - rect.left, rect.bottom - rect.top, SWP_NOMOVE | SWP_NOSIZE | SWP_NOACTIVATE);\n                            ::SetWindowPos(hwnd, 0, rect.left, rect.top, rect.right - rect.left, rect.bottom - rect.top,\n                            SWP_SHOWWINDOW);\n                        }\n                    }\n                }\n            }\n            else if (wp == timerIdFrameColor)\n            {\n                tick = !tick;\n                ::RedrawWindow(hwnd, NULL, NULL, RDW_INVALIDATE);\n            }\n            break;\n        }\n        case WM_DESTROY:\n            PostQuitMessage(0);\n            break;\n\n        default:\n            return DefWindowProcW(hwnd, msg, wp, lp);\n        }\n\n        return 0;\n    };\n\n    RegisterClassEx(&amp;wc);\n\n    HWND hwnd = CreateWindowExW(WS_EX_TOOLWINDOW | WS_EX_NOACTIVATE | WS_EX_LAYERED |     WS_EX_TRANSPARENT, wc.lpszClassName, L\"\", WS_POPUP | WS_VISIBLE | WS_DISABLED,\n    0, 0, 0, 0, nullptr, nullptr, nullptr, nullptr);\n    ::SetTimer(hwnd, timerIdWindowUpdate, 50, NULL);\n    ::SetTimer(hwnd, timerIdFrameColor, 500, NULL);\n    SetLayeredWindowAttributes(hwnd, MY_COLOR_KEY, 255, LWA_COLORKEY);\n    ShowWindow(hwnd, SW_SHOW);\n    cmdHanlde = FindWindow(L\"ConsoleWindowClass\", L\"C:\\\\WINDOWS\\\\system32\\\\cmd.exe\");\n\n    MSG msg;\n    while (GetMessage(&amp;msg, nullptr, 0, 0))\n    {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n\n    return (int)msg.wParam;\n}\n</code></pre>\n\n<p>May be it is not the best solution, but it works for me. Could you please take a look on it and tell if there something to improve?</p>\n"}], "owner": {"reputation": 295, "user_id": 3113356, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/66205112115dc0601e889774b7a6fbbd?s=128&d=identicon&r=PG&f=1", "display_name": "rudolfninja", "link": "https://stackoverflow.com/users/3113356/rudolfninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1395, "favorite_count": 0, "accepted_answer_id": 52915334, "answer_count": 2, "score": 2, "last_activity_date": 1540128020, "creation_date": 1539789010, "last_edit_date": 1540128020, "question_id": 52858141, "link": "https://stackoverflow.com/questions/52858141/draw-border-on-top-of-another-application-window", "title": "Draw border on top of another application window", "body": "<p>I'm need to draw border on top another application's window (the main purpose is to highlight window user chooses from running applications list). I'm trying to draw border on top of native window border, but the border isn't drawn. Here is the code:</p>\n\n<pre><code>HPEN framePen = ::CreatePen(PS_SOLID, 5, RGB(255, 0, 0));\nHWND handle = FindWindow(L\"ConsoleWindowClass\", L\"C:\\\\WINDOWS\\\\system32\\\\cmd.exe\");\n\nWINDOWPLACEMENT winPlacement;\nGetWindowPlacement(handle, &amp;winPlacement);\nif (winPlacement.showCmd == SW_SHOWMINIMIZED)\n{\n    ShowWindow(handle, SW_RESTORE);\n}\n\nSetWindowPos(handle, HWND_TOP, 0, 0, 0, 0, SWP_ASYNCWINDOWPOS | SWP_SHOWWINDOW | SWP_NOMOVE | SWP_NOSIZE);\nSetForegroundWindow(handle);\n\nPAINTSTRUCT ps;\nRECT rect = {};\n::GetClientRect(handle, &amp;rect);\nHDC hdc = ::BeginPaint(handle, &amp;ps);\n::SelectObject(hdc, framePen);\n::Rectangle(hdc, rect.left, rect.top, rect.right, rect.bottom);\n::EndPaint(handle, &amp;ps);\n</code></pre>\n\n<p>In this example used handle of cmd window, but in fact it doesn't matter.\nCould you please tell why border isn't drawn and how to draw it?\nThanks.</p>\n"}, {"tags": ["c++", "c++11", "type-safety", "narrowing"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 7, "creation_date": 1539788198, "post_id": 52857822, "comment_id": 92630770, "body": "You want this to be a run-time error? Or to be a compile-time warning/error that there might be a loss of data/precision?"}, {"owner": {"reputation": 1140, "user_id": 9252020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PDrj2.jpg?s=128&g=1", "display_name": "Rhathin", "link": "https://stackoverflow.com/users/9252020/rhathin"}, "edited": false, "score": 1, "creation_date": 1539788294, "post_id": 52857822, "comment_id": 92630830, "body": "You could provide some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, in what situation you&#39;d like to use it."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 8, "creation_date": 1539788302, "post_id": 52857822, "comment_id": 92630835, "body": "Yes,safe alternative is not doing cast at all"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1539788348, "post_id": 52857822, "comment_id": 92630864, "body": "There isn&#39;t anything built in to C++.  Although <code>numeric_limits</code> makes this trivial to implement as a function that would throw an exception or do a run time assert."}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 2, "creation_date": 1539788366, "post_id": 52857822, "comment_id": 92630877, "body": "Do you have compiler warnings turned on?  There are certainly situations (not static_cast, but initialization or assignment of a bigger type into a smaller type) where the compiler will warn about loss of precision."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "edited": false, "score": 12, "creation_date": 1539788371, "post_id": 52857822, "comment_id": 92630879, "body": "<a href=\"https://www.boost.org/doc/libs/1_66_0/libs/numeric/conversion/doc/html/boost_numericconversion/improved_numeric_cast__.html\" rel=\"nofollow noreferrer\">numeric_cast&lt;&gt;()</a>"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1539790008, "post_id": 52857822, "comment_id": 92631800, "body": "you can cast from int32_t to int64_t .... that&#39;s safe.  But then it&#39;s also redundant too."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1539790180, "post_id": 52857822, "comment_id": 92631944, "body": "If you use curly braces (uniform initialization) then narrowing is forbidden, so, if you do <code>int64_t some64value{5123456789}; int32_t some32value{some64value};</code>, your compiler should complain if the initialisation is narrowing."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1541183070, "post_id": 52857822, "comment_id": 93142616, "body": "@Kevin it&#39;s pretty difficult to have a compile time warning that only triggers if a 64 bit number doesn&#39;t fit into 32 bits."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1541188950, "post_id": 52857822, "comment_id": 93144997, "body": "@n.m. That&#39;s why I said <i>might be a loss</i>. This is what gcc&#39;s <code>-Wconversion</code> does."}], "answers": [{"comments": [{"owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "edited": false, "score": 14, "creation_date": 1539797565, "post_id": 52857928, "comment_id": 92635624, "body": "Good answer.  Perhaps it might be worth extending your answer to establish the <b>Guideline support library&#39;s</b> bona fides?   Some readers may not be familiar with the <a href=\"https://isocpp.org/about\" rel=\"nofollow noreferrer\">Standard C++ Foundation</a>, the <a href=\"http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#c-core-guidelines\" rel=\"nofollow noreferrer\">C++ Core Guidelines</a> or the Guideline support library and so might dismiss the <code>gsl</code> as &quot;just another library&quot;?"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "edited": false, "score": 2, "creation_date": 1539806833, "post_id": 52857928, "comment_id": 92639961, "body": "@FrankBoyne agreed, I wondered at first, how come GNU Scientific Library has C++ utilities..."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 35, "last_activity_date": 1541180145, "last_edit_date": 1541180145, "creation_date": 1539788374, "answer_id": 52857928, "question_id": 52857822, "link": "https://stackoverflow.com/questions/52857822/is-there-a-safe-static-cast-alternative/52857928#52857928", "title": "Is there a &quot;safe&quot; static_cast alternative?", "body": "<p>There's <a href=\"http://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#SS-utilities\" rel=\"nofollow noreferrer\"><code>gsl::narrow</code></a></p>\n\n<blockquote>\n  <p>narrow // <code>narrow&lt;T&gt;(x)</code> is <code>static_cast&lt;T&gt;(x)</code> if <code>static_cast&lt;T&gt;(x) == x</code> or it throws <code>narrowing_error</code></p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1539788719, "post_id": 52857971, "comment_id": 92631075, "body": "OP seems to be aware that truncation is in general possible, but wants an indication <i>when it occurs</i>"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 6, "creation_date": 1539788832, "post_id": 52857971, "comment_id": 92631129, "body": "@Caleth And my advice to them is to <i>not</i> use these casts if they want such an indication. Compilers will normally warn when a narrowing conversion occurs without being explicitly casted."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 3, "creation_date": 1539797470, "post_id": 52857971, "comment_id": 92635588, "body": "@Xirema: (A) Compilers often don&#39;t warn, and (B) compilers often overwarn when casting a <code>long</code> to a <code>char</code>, but the developer knows the value is always between 0 and 100."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 6, "creation_date": 1539814841, "post_id": 52857971, "comment_id": 92643075, "body": "@MooingDuck If you know the value is always 0-100 then use static_cast, that&#39;s what it&#39;s for..."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 3, "creation_date": 1539819631, "post_id": 52857971, "comment_id": 92644248, "body": "@immibis: Let me correct myself; The developer knows the value <i>ought to be</i> between 0 and 100, but wants an exception to be thrown if that assumption is determined to be incorrect."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 3, "creation_date": 1539829158, "post_id": 52857971, "comment_id": 92646026, "body": "@MooingDuck I&#39;m not sure what you expect the compiler to do then? Either it can be outside the range (in which case you deserve the warning) or it can&#39;t (in which case use static_cast)."}, {"owner": {"reputation": 1159, "user_id": 1294423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59e9d4f8bec370afd6e0bbb0906397c7?s=128&d=identicon&r=PG", "display_name": "Gavin S. Yancey", "link": "https://stackoverflow.com/users/1294423/gavin-s-yancey"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 2, "creation_date": 1539835223, "post_id": 52857971, "comment_id": 92647270, "body": "@immibis I think the desired behavior is to generate some code along the lines of <code>if (i &lt; 256) static_cast&lt;char&gt;(i); else throw bad_cast_exception;</code>"}, {"owner": {"reputation": 1159, "user_id": 1294423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59e9d4f8bec370afd6e0bbb0906397c7?s=128&d=identicon&r=PG", "display_name": "Gavin S. Yancey", "link": "https://stackoverflow.com/users/1294423/gavin-s-yancey"}, "edited": false, "score": 1, "creation_date": 1539835268, "post_id": 52857971, "comment_id": 92647283, "body": "(In which case I think the questioner is better off just explicitly writing that code...)"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1539881502, "post_id": 52857971, "comment_id": 92671233, "body": "@immibis: I believe he expects it to behave like <code>dynamic_cast&lt;Derived*&gt;(basePtr)</code> does.  Check for validity, and either cast or throw."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 23, "last_activity_date": 1539788733, "last_edit_date": 1539788733, "creation_date": 1539788532, "answer_id": 52857971, "question_id": 52857822, "link": "https://stackoverflow.com/questions/52857822/is-there-a-safe-static-cast-alternative/52857971#52857971", "title": "Is there a &quot;safe&quot; static_cast alternative?", "body": "<p>You've got the use-case reversed.</p>\n\n<p>The intended use of <code>static_cast</code> (and the other c++-style casts) is to indicate programmer intentions. When you write <code>auto value = static_cast&lt;int32_t&gt;(value_64);</code>, you're saying <em>\"Yes, I very much *intend* to downcast this value, possibly truncating it, when I perform this assignment\"</em>. As a result, a compiler, which might have been inclined to complain about this conversion under normal circumstances (like if you'd have written <code>int32_t value = value_64;</code>) instead observes <em>\"well, the programmer has told me that this is what they intended; why would they lie to me?\"</em> and will silently compile the code.</p>\n\n<p>If you want your C++ code to warn or throw an error on unsafe conversions, you need to explicitly <em>not</em> use <code>static_cast</code>, <code>const_cast</code>, <code>reinterpret_cast</code>, and let the compiler do its job. Compilers have flags that change how warnings are treated (downcasting <code>int64_t</code> to <code>int32_t</code> usually only results in a Warning), so make sure you're using the correct flags to force warnings to be treated as errors.</p>\n"}, {"comments": [{"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 6, "creation_date": 1539793680, "post_id": 52859370, "comment_id": 92633800, "body": "This <b>a)</b> is a bad way of measuring precision, seeing as e.g. <code>sizeof(float) &lt; sizeof(int64_t)</code>, and <b>b)</b> does not what the OP asked, namely <i>allow</i> a cast to a smaller type but throw a runtime error when this overflows."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1539793928, "post_id": 52859370, "comment_id": 92633935, "body": "@leftaroundabout The OP didn&#39;t mention what kind of error. The correct interpretation I see is at compile-time. It&#39;s bad-design to do this at run-time!!!!! Besides, the definition of precision here is ambiguous, which is why I gave this as an example and mentioned numeric_limits and type_traits to modify it and make it fit his desired condition."}, {"owner": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1539794370, "post_id": 52859370, "comment_id": 92634159, "body": "Well, I&#39;d agree that throwing an exception is a bad way to handle it, but it&#39;s no good preventing all narrowing at compile time when for some application, you need to store something in a memory-constrained setting and <code>int16_t</code> is usually enough for all the values that need to be stored."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 100892, "user_id": 745903, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/50933f6638836741e620669b3940410e?s=128&d=identicon&r=PG", "display_name": "leftaroundabout", "link": "https://stackoverflow.com/users/745903/leftaroundabout"}, "edited": false, "score": 0, "creation_date": 1539794952, "post_id": 52859370, "comment_id": 92634421, "body": "@leftaround It&#39;s probably an XY problem. It&#39;s difficult to provide a clean solution only with the information provided."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1539795687, "post_id": 52859370, "comment_id": 92634745, "body": "@TheQuantumPhysicist Disagree. Both Caleth and Swordfish got in. Indeed, both their solutions show that this is an understood and solved problem."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1539796281, "post_id": 52859370, "comment_id": 92635018, "body": "@LightnessRacesinOrbit I hope you realize how trivial it&#39;s to cast back and forth and see if the result hasn&#39;t changed. There are a million ways to ask this question the right way (or in a meaningful way, which is why this is an XY problem), where you don&#39;t involve a cast at compile-time. Static_cast is for compile-time, and hence relevant checks should be done at compile-time. Not run-time. That&#39;s how I see it."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 2, "creation_date": 1539813278, "post_id": 52859370, "comment_id": 92642619, "body": "Actually, casting back and forth to verify is <b>not enough</b>. <a href=\"https://stackoverflow.com/questions/52863643/understanding-gslnarrow-implementation\">Differing signedness might slip through the cracks that way.</a>"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1539814650, "post_id": 52859370, "comment_id": 92643020, "body": "@Deduplicator I don&#39;t know what&#39;s going on there in the link you posted. It&#39;s not so clear. But let me point out that, in their binary, ints have no signs (no sign bit), unlike floating-point. The process of changing the precision (bit-length) of an integer is called &quot;sign-extension&quot;, which extends the number from the left with 0xfff... or 0x000... depending on whether the number is positive or negative (in 2&#39;s complement). So, no. There&#39;s no sign changing here if you preserve whether a number is signed or unsigned. If you switch between signed and unsigned, there are corner cases, for sure."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1539850923, "post_id": 52859370, "comment_id": 92653208, "body": "@TheQuantumPhysicist <i>even if</i> casting back and forth were sufficient to catch all the cases of casts losing information, it&#39;s <i>still</i> a good idea to give a name to &quot;value checking cast&quot;"}, {"owner": {"reputation": 600, "user_id": 5725780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FKaUq.png?s=128&g=1", "display_name": "pipe", "link": "https://stackoverflow.com/users/5725780/pipe"}, "edited": false, "score": 0, "creation_date": 1539851297, "post_id": 52859370, "comment_id": 92653426, "body": "<code>int64_t</code> would never fit into an <code>int32_t</code> if interpreted the way you do, so why do you think that OP mentions the case explicitly, using it as an example?"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1539852109, "post_id": 52859370, "comment_id": 92653905, "body": "@Caleth Again, I find this whole question ill-formed in many ways. Changing precision and using <code>static_cast</code> are two different things. The guy should be using <code>numeric_limits&lt;&gt;</code> to get the answer to his question. It&#39;s just bad style. Even if the guy is creating a serialization algorithm and wants to minimize the size, I find this a horrible way to do it. And again, my opinion. Who cares? Too much debate around my answer. Just let it go if you don&#39;t like it."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 600, "user_id": 5725780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FKaUq.png?s=128&g=1", "display_name": "pipe", "link": "https://stackoverflow.com/users/5725780/pipe"}, "edited": false, "score": 0, "creation_date": 1539852223, "post_id": 52859370, "comment_id": 92653970, "body": "@pipe I presumed it&#39;s an XY problem. It&#39;s not uncommon for an OP to make mistakes and have an answer correct his thought process. I wanted to make it clear that <code>static_cast</code> is for compile-time decisions."}, {"owner": {"reputation": 600, "user_id": 5725780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FKaUq.png?s=128&g=1", "display_name": "pipe", "link": "https://stackoverflow.com/users/5725780/pipe"}, "edited": false, "score": 0, "creation_date": 1539852538, "post_id": 52859370, "comment_id": 92654154, "body": "&quot;Too much debate around my answer. Just let it go if you don&#39;t like it.&quot;, Personally  commented because it&#39;s polite to explain downvotes."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 600, "user_id": 5725780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FKaUq.png?s=128&g=1", "display_name": "pipe", "link": "https://stackoverflow.com/users/5725780/pipe"}, "edited": false, "score": 0, "creation_date": 1539852578, "post_id": 52859370, "comment_id": 92654172, "body": "@pipe Thank you. I appreciate that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1539855487, "post_id": 52859370, "comment_id": 92655810, "body": "@TheQuantumPhysicist I don&#39;t, because it&#39;s not. Who cares? Well, the OP does, and so do I! If <i>you</i> don&#39;t, you&#39;re free to just let it go if you don&#39;t like it :P"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1539856640, "post_id": 52859370, "comment_id": 92656459, "body": "@LightnessRacesinOrbit There lies our disagreement. The reason I&#39;m saying &quot;who cares&quot; is because in all my responses this is finally boiling down to coding-style issues. I find this a coding style issue and I explained why, and others may or may not agree. So, for that, who cares? :-) We all know what we all mean, so no reason to further the discussion"}], "tags": [], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "is_accepted": false, "score": -1, "last_activity_date": 1539793352, "last_edit_date": 1539793352, "creation_date": 1539792989, "answer_id": 52859370, "question_id": 52857822, "link": "https://stackoverflow.com/questions/52857822/is-there-a-safe-static-cast-alternative/52859370#52859370", "title": "Is there a &quot;safe&quot; static_cast alternative?", "body": "<p>You can create your own with sfinae. Here's an example:</p>\n\n<pre><code>template &lt;typename T, typename U&gt;\ntypename std::enable_if&lt;sizeof(T) &gt;= sizeof(U),T&gt;::type \nsafe_static_cast(U&amp;&amp; val)\n{\n    return static_cast&lt;T&gt;(val);\n}\n\nint main()\n{\n    int32_t y = 2;\n    std::cout &lt;&lt; safe_static_cast&lt;int32_t&gt;(y) &lt;&lt; std::endl;\n    std::cout &lt;&lt; safe_static_cast&lt;int16_t&gt;(y) &lt;&lt; std::endl; // compile error\n}\n</code></pre>\n\n<p>This will compile only if the size you cast to is >= the source size.</p>\n\n<p>Try it <a href=\"https://coliru.stacked-crooked.com/a/5a05f3f2464c8464\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>You can complicate this further using <a href=\"https://en.cppreference.com/w/cpp/types/numeric_limits\" rel=\"nofollow noreferrer\">numeric_limits</a> for other types and <a href=\"https://en.cppreference.com/w/cpp/header/type_traits\" rel=\"nofollow noreferrer\">type_traits</a>.</p>\n\n<p>Notice that my solution is a compile-time solution, because you asked about <code>static_cast</code>, where static here refers to \"determined at compile-time\".</p>\n"}, {"tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1588030987, "creation_date": 1588030987, "answer_id": 61470331, "question_id": 52857822, "link": "https://stackoverflow.com/questions/52857822/is-there-a-safe-static-cast-alternative/61470331#61470331", "title": "Is there a &quot;safe&quot; static_cast alternative?", "body": "<p>Assuming the question is about compile-time detection of potentially lossy conversions...</p>\n\n<p>A simple tool not mentioned yet here is that list initialization doesn't allow narrowing, so you can write:</p>\n\n<pre><code>void g(int64_t n)\n{\n    int32_t x{n};   // error, narrowing\n\n    int32_t g;\n    g = {n};        // error, narrowing\n}\n</code></pre>\n\n<p>NB. Some compilers in their default mode might show \"warning\" and continue compilation for this ill-formed code, usually you can configure this behaviour via compilation flags.</p>\n"}], "owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2757, "favorite_count": 1, "accepted_answer_id": 52857928, "answer_count": 4, "score": 17, "last_activity_date": 1588030987, "creation_date": 1539788067, "last_edit_date": 1588029429, "question_id": 52857822, "link": "https://stackoverflow.com/questions/52857822/is-there-a-safe-static-cast-alternative", "title": "Is there a &quot;safe&quot; static_cast alternative?", "body": "<p>Is there a \"safe\" alternative to <code>static_cast</code> in C++11/14 or a library which implements this functionality?</p>\n\n<p>By \"safe\" I mean the cast should only allow casts which do not lose precision. So a cast from <code>int64_t</code> to <code>int32_t</code> would only be allowed if the number fits into a <code>int32_t</code> and else an error is reported.</p>\n"}, {"tags": ["c++", "qt", "qstyle"], "answers": [{"tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1539789790, "creation_date": 1539789790, "answer_id": 52858416, "question_id": 52857397, "link": "https://stackoverflow.com/questions/52857397/how-to-know-header-text-width-in-qstyle/52858416#52858416", "title": "How to know header text width in QStyle?", "body": "<p>It is all contained in the <a href=\"http://doc.qt.io/qt-5/qstyleoptionheader.html\" rel=\"nofollow noreferrer\"><code>QStyleOptionHeader</code></a>. The text width could be obtained by calling:</p>\n\n<pre><code>int textWidth = header-&gt;fontMetrics.boundingRect(header-&gt;text).width();\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 6602224, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5887b6615853c879fcc1663df7725687?s=128&d=identicon&r=PG&f=1", "display_name": "songvan", "link": "https://stackoverflow.com/users/6602224/songvan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 52858416, "answer_count": 1, "score": 1, "last_activity_date": 1540714893, "creation_date": 1539786706, "last_edit_date": 1540714893, "question_id": 52857397, "link": "https://stackoverflow.com/questions/52857397/how-to-know-header-text-width-in-qstyle", "title": "How to know header text width in QStyle?", "body": "<p>I have a <code>QTreeView</code> and use <code>ProxyStyle</code> for that.</p>\n\n<p><a href=\"https://i.stack.imgur.com/aafOZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aafOZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>The pic above is just the header. Now I need to draw the up/down arrow (for sorting items) beside header label as in figure. In order to put the arrow in the correct postion I need to know:</p>\n\n<ul>\n<li>the left margin = distance between the text and left border</li>\n<li><strong>the text width</strong></li>\n<li>the right margin = distance between the text and the arrow</li>\n</ul>\n\n<p>How can I calculate the text width in this case? I thought about QFontMetrics but dont know how to receive the text to calculate.</p>\n\n<p>In my style I use only <code>drawPrimitive</code> function</p>\n\n<pre><code>void MyStyle::drawPrimitive( PrimitiveElement p_pe, const QStyleOption *p_option, QPainter *p_painter, const QWidget *p_widget ) const\n{\n  int leftmargin = 10;\n  int rightmargin = 10;\n  if ( p_pe == PE_IndicatorHeaderArrow )\n  {\n     if ( const QStyleOptionHeader *header = qstyleoption_cast&lt;const QStyleOptionHeader *&gt;( p_option ) )\n     {\n        QPixmap pix;\n        if ( header-&gt;sortIndicator &amp; QStyleOptionHeader::SortUp )\n        {\n           pix = QPixmap( \":/sortUp.png\" );\n        }\n        else if ( header-&gt;sortIndicator &amp; QStyleOptionHeader::SortDown )\n        {\n           pix = QPixmap( \":/sortDown.png\" );\n        }\n        p_painter-&gt;drawPixmap( header-&gt;rect.left() + leftmargin+ subElementRect( SE_HeaderLabel, p_option, p_widget ).width() + rightmargin, header-&gt;rect.top() + pix.height(), pix );\n     }\n  }\n  else\n  {\n     QProxyStyle::drawPrimitive( p_pe, p_option, p_painter, p_widget );\n  }\n}\n</code></pre>\n\n<p>I use <code>subElementRect( SE_HeaderLabel, p_option, p_widget ).width()</code> in this case but it is wrong. How can I calculate the width of the text?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1539786721, "post_id": 52857352, "comment_id": 92629824, "body": "If you want your class members to depend on a template argument then the whole class has to be a template. I&#39;m not sure I can visualize how you would specify template arguments if individual members could have their own template arguments."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1539786858, "post_id": 52857352, "comment_id": 92629925, "body": "It sounds like you may want <code>arr</code> to be a tuple of arrays."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1539786875, "post_id": 52857352, "comment_id": 92629933, "body": "if you write out the members, then having a templated member function like your <code>printOutArr</code> is straightforward in case you worry about the code duplication of the member functions..."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1539786880, "post_id": 52857352, "comment_id": 92629935, "body": "You could probably write a templated type that creates a tuple or array of arrays of the desired sizes. It should be doable using generator sequences."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1539786913, "post_id": 52857352, "comment_id": 92629960, "body": "If you don&#39;t need <code>std::array</code> it is trivial to do this with a <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 7552087, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/012e376f941c38969adccc532ec3be94?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew P.", "link": "https://stackoverflow.com/users/7552087/andrew-p"}, "edited": false, "score": 0, "creation_date": 1539820781, "post_id": 52857915, "comment_id": 92644460, "body": "This worked for me. Thank you! I had to also define a helper struct that would recursively iterate over all of the arrays, but doing it wasn&#39;t hard after seeing this answer, and about this sort of template recursion."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 7, "last_activity_date": 1539788339, "creation_date": 1539788339, "answer_id": 52857915, "question_id": 52857352, "link": "https://stackoverflow.com/questions/52857352/c-can-i-have-non-static-member-variable-templates/52857915#52857915", "title": "C++: Can I have non-static member variable templates?", "body": "<blockquote>\n  <p>Can I have non-static member variable templates?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>However, you can use templates to generate a list of members like you describe. Here is an example using recursive inheritance:</p>\n\n<pre><code>template&lt;class T, std::size_t base, std::size_t size&gt;\nclass Stair;\n\ntemplate&lt;class T, std::size_t base&gt;\nclass Stair&lt;T, base, base&gt; {};\n\ntemplate&lt;class T, std::size_t base, std::size_t size&gt;\nclass Stair : Stair&lt;T, base, size - 1&gt; {\nprotected:\n    std::array&lt;T, size&gt; arr;\npublic:\n    template&lt;std::size_t s&gt;\n    std::array&lt;T, s&gt;&amp; array() {\n        return Stair&lt;T, base, s&gt;::arr;\n    }\n};\n\nint main()\n{\n    Stair&lt;int, 2, 10&gt; s;\n    auto&amp; arr = s.array&lt;9&gt;();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1957, "user_id": 347401, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a77f25c2644fc5e41c887270a4f474d?s=128&d=identicon&r=PG", "display_name": "brady", "link": "https://stackoverflow.com/users/347401/brady"}, "is_accepted": false, "score": 0, "last_activity_date": 1539809551, "last_edit_date": 1539809551, "creation_date": 1539808125, "answer_id": 52863095, "question_id": 52857352, "link": "https://stackoverflow.com/questions/52857352/c-can-i-have-non-static-member-variable-templates/52863095#52863095", "title": "C++: Can I have non-static member variable templates?", "body": "<p>I think I may have a solution using recursive templates and <a href=\"https://en.cppreference.com/w/cpp/utility/tuple\" rel=\"nofollow noreferrer\">std::tuple</a>. I compiled and tested it using gcc 7.3.0.</p>\n\n<p>This makes me feel dirty, but it seems to work.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n#include &lt;tuple&gt;\n#include &lt;type_traits&gt;\n\n// Forward declare A since there is a circular dependency between A and Arrays\ntemplate &lt;size_t size, size_t start, typename... T&gt;\nstruct A;\n\n// If size is greater than start define a type that is an A::ArrayTuple from the\n// next step down (size - 1) otherwise type is void\ntemplate &lt;size_t size, size_t start, typename E, typename... T&gt;\nstruct Arrays {\n    using type = typename std::conditional&lt;(size &gt; start),\n        typename A&lt;size-1, start, E, T...&gt;::ArrayTuple,\n        void\n    &gt;::type;\n};\n\n// Use template recursion to begin at size and define std::array&lt;int, size&gt;\n// to add to a tuple and continue marching backwards (size--) until size == start\n// When size == start take all of the std::arrays and put them into a std::tuple\n//\n// A&lt;size, start&gt;::ArrayTuple will be a tuple of length (size - start + 1) where\n// the first element is std::array&lt;int, start&gt;, the second element is\n// std::array&lt;int, start + 1&gt; continuing until std::array&lt;int, size&gt;\ntemplate &lt;size_t size, size_t start, typename... T&gt;\nstruct A {\n    using Array = typename std::array&lt;int, size&gt;;\n\n    using ArrayTuple = typename std::conditional&lt;(size == start),\n        typename std::tuple&lt;Array, T...&gt;,\n        typename Arrays&lt;size, start, Array, T...&gt;::type\n    &gt;::type;\n};\n\n// This specialization is necessary to avoid infinite template recursion\ntemplate &lt;size_t start, typename... T&gt;\nstruct A&lt;0, start, T...&gt; {\n    using Array = void;\n    using ArrayTuple = void;\n};\n\ntemplate &lt;size_t size, size_t start = 1&gt;\nclass Container {\npublic:\n    using ArrayTuple = typename A&lt;size, start&gt;::ArrayTuple;\n\n    // Shorthand way to the get type of the Nth element in ArrayTuple\n    template &lt;size_t N&gt;\n    using TupleElementType = typename\n        std::tuple_element&lt;N-start, ArrayTuple&gt;::type;\n\n    ArrayTuple arrays_;\n\n    // Returns a reference to the tuple element that has the type of std::array&lt;int, N&gt;\n    template &lt;size_t N&gt;\n    TupleElementType&lt;N&gt;&amp; get_array() {\n        // Static assertion that the size of the array at the Nth element is equal to N\n        static_assert(std::tuple_size&lt; TupleElementType&lt;N&gt; &gt;::value == N);\n        return std::get&lt;N-start&gt;(arrays_);\n    }\n\n    // Prints all elements of the tuple element that has the type of std::array&lt;int, N&gt;\n    template &lt;size_t N&gt;\n    void print_array() {\n        auto&amp; arr = get_array&lt;N&gt;();\n        std::cout &lt;&lt; \"Array Size: \" &lt;&lt; arr.size() &lt;&lt; std::endl;\n        for (int i = 0; i &lt; arr.size(); i++) {\n            std::cout &lt;&lt; arr[i] &lt;&lt; std::endl;\n        }\n    }\n};\n\nint main() {\n    // Create a new Container object where the arrays_ member will be\n    // a tuple with 15 elements:\n    // std::tuple&lt; std::array&lt;int, 2&gt;, std::array&lt;int, 3&gt; ... std::array&lt;int, 16&gt; &gt;\n    Container&lt;16,2&gt; ctr;\n\n    auto&amp; arr2 = ctr.get_array&lt;2&gt;();\n\n    arr2[0] = 20;\n    arr2[1] = 21;\n\n    //ctr.print_array&lt;1&gt;(); // Compiler error since 1 &lt; the ctr start (2)\n    ctr.print_array&lt;2&gt;(); // prints 20 and 21\n    ctr.print_array&lt;3&gt;(); // prints 3 zeros\n    ctr.print_array&lt;16&gt;(); // prints 16 zeros\n    //ctr.print_array&lt;17&gt;(); // Compiler error since 17 &gt; the ctr size (16)\n\n    //int x(ctr.arrays_); // Compiler error - uncomment to see the type of ctr.arrays_\n\n    return 0;\n}\n</code></pre>\n\n<p>Here's the output from the compiler if I uncomment that line where I try to declare <code>int x</code> showing the type of <code>ctr.arrays_</code>:</p>\n\n<pre><code>so.cpp: In function \u2018int main()\u2019:\nso.cpp:90:22: error: cannot convert \u2018Container&lt;16, 2&gt;::ArrayTuple {aka std::tuple&lt;std::array&lt;int, 2&gt;, std::array&lt;int, 3&gt;, std::array&lt;int, 4&gt;, std::array&lt;int, 5&gt;, std::array&lt;int, 6&gt;, std::array&lt;int, 7&gt;, std::array&lt;int, 8&gt;, std::array&lt;int, 9&gt;, std::array&lt;int, 10&gt;, std::array&lt;int, 11&gt;, std::array&lt;int, 12&gt;, std::array&lt;int, 13&gt;, std::array&lt;int, 14&gt;, std::array&lt;int, 15&gt;, std::array&lt;int, 16&gt; &gt;}\u2019 to \u2018int\u2019 in initialization\n     int x(ctr.arrays_); // Compiler error - uncomment to see the type of ctr.arrays_\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 7552087, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/012e376f941c38969adccc532ec3be94?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew P.", "link": "https://stackoverflow.com/users/7552087/andrew-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 1, "accepted_answer_id": 52857915, "answer_count": 2, "score": 5, "last_activity_date": 1539809551, "creation_date": 1539786554, "question_id": 52857352, "link": "https://stackoverflow.com/questions/52857352/c-can-i-have-non-static-member-variable-templates", "title": "C++: Can I have non-static member variable templates?", "body": "<p>I'm trying to write a bit of code that requires me to have a lot of <code>std::array</code>s in a container class. These arrays are all of varying sizes (all consecutive from 2-16, if that matters), and there is exactly one of each size. I want to put them in a container class, and be able to access them with templates.</p>\n\n<p>It's probably easier to explain with code. I want something like this:</p>\n\n<pre><code>class ContainerClass {\n\npublic:\n   // I want to declare some number of arrays right here, all of different\n   // sizes, ranging from 2-16. I'd like to be able to access them as\n   // arr&lt;2&gt; through arr&lt;16&gt;.\n\n   // This code gives a compiler error, understandably. \n   // But this is what I'd think it'd look like.\n   template &lt;size_t N&gt; // I also need to find a way to restrict N to 2 through 16.\n   std::array&lt;int, N&gt; arr;\n\n   // An example method of how I want to be able to use this.\n   template &lt;size_t N&gt;\n   void printOutArr() {\n       for (int i = 0; i &lt; N; i++) {\n           std::cout &lt;&lt; arr&lt;N&gt;[i] &lt;&lt; std::endl;\n       }\n   }\n};\n</code></pre>\n\n<p>I'd like the code to expand out as if it just had 15 arrays in it, from 2-16. Like this, but with templates:</p>\n\n<pre><code>class ContainerClass {\n\npublic:\n    std::array&lt;int, 2&gt; arr2;\n    std::array&lt;int, 3&gt; arr3;\n    std::array&lt;int, 4&gt; arr4;\n    std::array&lt;int, 5&gt; arr5;\n   // ... and so on.\n};\n</code></pre>\n\n<p>From what I understand, C++ supports variable templates, but it seems like it's only for static members in classes. Is there an alternative that could behave similarly (preferably with as little overhead as possible)?</p>\n\n<p>If you need more information, please ask.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "cmake", "caffe", "lmdb"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1539785895, "post_id": 52857100, "comment_id": 92629238, "body": "Please copy-paste errors as text. The text in the image is hard to read."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1539786127, "post_id": 52857100, "comment_id": 92629393, "body": "The problem is is caused by an unescaped windows path in one  of the variables. It would be interesting to see the code for FindLMDB.cmake. I believe the fix may need to be there."}, {"owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1539787447, "post_id": 52857100, "comment_id": 92630297, "body": "@AlgirdasPreid\u017eius I added the text of errors."}, {"owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1539787494, "post_id": 52857100, "comment_id": 92630326, "body": "@drescherjm Are you sure this has nothing to do with GLOG, GFLAGS,... ?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1539787555, "post_id": 52857100, "comment_id": 92630363, "body": "<b><i>Invalid escape sequence \\P Call Stack (most recent call first):</i></b> is pretty clear since your path is C:\\Project ... the problem is CMake prefers paths to use / instead of \\"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1539788113, "post_id": 52857100, "comment_id": 92630710, "body": "Related: <a href=\"https://stackoverflow.com/questions/28070810/cmake-generate-error-on-windows-as-it-uses-as-escape-seq\" title=\"cmake generate error on windows as it uses as escape seq\">stackoverflow.com/questions/28070810/&hellip;</a>"}, {"owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1539788132, "post_id": 52857100, "comment_id": 92630721, "body": "@drescherjm Thanks. The backslashes were the problem. But what about the first error (HDF5)? I have defined HDF5_ROOT as an environment variable."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1539788240, "post_id": 52857100, "comment_id": 92630796, "body": "The part above the error message about CMP0074 fixes that."}, {"owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1539788907, "post_id": 52857100, "comment_id": 92631165, "body": "@drescherjm using <b>cmake_policy</b> results in: &#39;&#39;cmake_policy&#39; is not recognized as an internal or external command,&#39;"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1539790191, "post_id": 52857100, "comment_id": 92631950, "body": "@HadiGhahremanNezhad: <a href=\"https://cmake.org/cmake/help/latest/command/cmake_policy.html\" rel=\"nofollow noreferrer\">cmake_policy</a> is a <b>CMake command</b>, not a shell one. Actually, you may ignore the policy <i>warning</i>: <code>This warning is for project developers. Use -Wno-dev to suppress it.</code>."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1539790527, "post_id": 52857100, "comment_id": 92632154, "body": "As for the error, <a href=\"https://github.com/D-X-Y/caffe-faster-rcnn/blob/dev/cmake/Utils.cmake#L105\" rel=\"nofollow noreferrer\">cmake/Utils.cmake:105</a> seems to be correct. It is <a href=\"https://github.com/D-X-Y/caffe-faster-rcnn/blob/dev/cmake/Modules/FindLMDB.cmake#L15\" rel=\"nofollow noreferrer\">cmake/Modules/FindLMDB.cmake:15</a> which looks wrong: it uses <code>PATHS &quot;$ENV{LMDB_DIR}&#47;include&quot;</code> option for <code>find_path</code>, thus dereference the environment variable <b>without</b> transforming <i>native</i> path (Windows separator, &#39;\\&#39;) to <i>CMake</i> one (&#39;/&#39; as separator). If you set <code>LMDB_DIR</code> variable, try to change path separator in it to &#39;/&#39;."}, {"owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1539798932, "post_id": 52857100, "comment_id": 92636300, "body": "@Tsyvarev I changed the &#39;\\&#39; to &#39;/&#39; in <b>HDF5_ROOT</b> but the warning is still there."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1539806969, "post_id": 52857100, "comment_id": 92640015, "body": "Once again: <b>Forget</b> about the <i>warning</i>: it doesn&#39;t prevent you to build the project and CMake clearly states that it is not <i>your</i> problem. If you don&#39;t want to see the warning, just pass <code>-Wno-dev</code> option for <code>cmake</code>. What prevents you from building the project, is the <b>error</b>. And the error is NOT related with <code>HDF5_ROOT</code> variable."}], "owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 399, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539787346, "creation_date": 1539785843, "last_edit_date": 1539787346, "question_id": 52857100, "link": "https://stackoverflow.com/questions/52857100/cmake-fails-in-compiling-caffe-with-lmdb-h", "title": "Cmake fails in compiling Caffe with lmdb.h", "body": "<p>Windows 10 Visual Studio 14</p>\n\n<p>I am trying to build a c++ code based on <a href=\"https://i.stack.imgur.com/rweq0.png\" rel=\"nofollow noreferrer\">this github page</a>. However, when I try to generate lib files in Cmake I get this error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rweq0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rweq0.png\" alt=\"enter image description here\"></a></p>\n\n<p>I don't know what's wrong with lmdb.h file. Should I build lmdb from scratch?</p>\n\n<p>There are 2 error messages:</p>\n\n<ol>\n<li><blockquote>\n  <p>CMake Warning (dev) at cmake/Dependencies.cmake:46 (find_package):<br>\n  Policy CMP0074 is not set: find_package uses _ROOT\n  variables.   Run \"cmake --help-policy CMP0074\" for policy details. \n  Use the cmake_policy   command to set the policy and suppress this\n  warning.</p>\n  \n  <p>Environment variable HDF5_ROOT is set to:</p>\n\n<pre><code>C:\\Program Files\\HDF_Group\\HDF5\\1.10.3\n</code></pre>\n  \n  <p>For compatibility, CMake is ignoring the variable. Call Stack (most\n  recent call first):   CMakeLists.txt:49 (include) This warning is for\n  project developers.  Use -Wno-dev to suppress it.</p>\n</blockquote></li>\n<li><blockquote>\n  <p>CMake Error at cmake/Utils.cmake:105 (if):   Syntax error in cmake\n  code at</p>\n\n<pre><code>C:/Project/RCNN/Faster RCNN/caffe-faster-rcnn-dev/cmake/Utils.cmake:105\n</code></pre>\n  \n  <p>when parsing string</p>\n\n<pre><code>C:\\Project\\RCNN\\Faster RCNN\\Packages\\lmdb-mdb.master\\libraries\\liblmdb/lmdb.h\n</code></pre>\n  \n  <p>Invalid escape sequence \\P Call Stack (most recent call first):<br>\n  cmake/Modules/FindLMDB.cmake:25 (caffe_parse_header)<br>\n  cmake/Dependencies.cmake:52 (find_package)   CMakeLists.txt:49\n  (include)</p>\n  \n  <p><a href=\"https://i.stack.imgur.com/rweq0.png\" rel=\"nofollow noreferrer\">1</a>: <a href=\"https://github.com/D-X-Y/caffe-faster-rcnn/tree/dev\" rel=\"nofollow noreferrer\">https://github.com/D-X-Y/caffe-faster-rcnn/tree/dev</a>   [2]:\n  <a href=\"https://i.stack.imgur.com/hc30J.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/hc30J.png</a></p>\n</blockquote></li>\n</ol>\n\n<p>Also the paths for GLOG, GFLAGS, and PROTOBUF are not found.</p>\n"}, {"tags": ["c++", "dictionary", "visual-studio-2015", "mfc", "std"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1539792248, "post_id": 52857090, "comment_id": 92633012, "body": "What did you expect to see in the window?  It is difficult to figure out exactly what you were expecting.  Second, <i>Am I missing something in exporting the object?</i> -- Does your program work?  If so, then it has nothing to do with exporting the object.  It is about how the debugger works.  Last, if you compiled with optimizations enabled, then it is highly possible to not see certain variables due to the code being optimized."}, {"owner": {"reputation": 2371, "user_id": 389699, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/XTGWt.jpg?s=128&g=1", "display_name": "IssamTP", "link": "https://stackoverflow.com/users/389699/issamtp"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1539847679, "post_id": 52857090, "comment_id": 92651504, "body": "I should see the contents of map, I&#39;ll make another screenshot to see how should appear. And no: the program is compiled in debug with no optimizations, so I should see everything, moreover: if I step in any CGrafoPNT_2D function, I can see the content of map correctly."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1539887227, "post_id": 52857090, "comment_id": 92674109, "body": "Do you have symbol server enabled?"}, {"owner": {"reputation": 2371, "user_id": 389699, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/XTGWt.jpg?s=128&g=1", "display_name": "IssamTP", "link": "https://stackoverflow.com/users/389699/issamtp"}, "edited": false, "score": 0, "creation_date": 1539960105, "post_id": 52857090, "comment_id": 92701945, "body": "Where do I get this option enabled?"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1539966970, "post_id": 52857090, "comment_id": 92705598, "body": "Don&#39;t know if this helps. But I&#39;ve seen VS cranky about showing objects in my dlls. What I do is trace into any dll call and everything shows up. Hope there is an answer here as it would be nice not to have to trace in to get it to work."}, {"owner": {"reputation": 2371, "user_id": 389699, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/XTGWt.jpg?s=128&g=1", "display_name": "IssamTP", "link": "https://stackoverflow.com/users/389699/issamtp"}, "reply_to_user": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1540289872, "post_id": 52857090, "comment_id": 92801241, "body": "@lakeweb thanks. By the way only map-like objects are affected by this bug seems, my vector are show correctly."}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1540395036, "post_id": 52857090, "comment_id": 92852000, "body": "Yes, I see the same kind of results. One dll in particular, an XML engine. From outside I can see parts of it, but the nodes have no flyouts. Trace in and all the info shows. Other of my dlls don&#39;t seem to have this issue. It has been this way at least since vs2010 for me. I&#39;m using 2015 now, same thing."}, {"owner": {"reputation": 2371, "user_id": 389699, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/XTGWt.jpg?s=128&g=1", "display_name": "IssamTP", "link": "https://stackoverflow.com/users/389699/issamtp"}, "edited": false, "score": 0, "creation_date": 1544087306, "post_id": 52857090, "comment_id": 94154189, "body": "Bug submitted to Microsoft. By the way: I&#39;ve reopened the project and now I can see the objects\u2026"}], "owner": {"reputation": 2371, "user_id": 389699, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/XTGWt.jpg?s=128&g=1", "display_name": "IssamTP", "link": "https://stackoverflow.com/users/389699/issamtp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1539848186, "creation_date": 1539785813, "last_edit_date": 1539848186, "question_id": 52857090, "link": "https://stackoverflow.com/questions/52857090/visual-studio-2015-stdmap-watch", "title": "Visual Studio 2015 std::map watch", "body": "<p>Using Visual Studio 2015 I have an object in a MFC extension DLL which contains a</p>\n\n<pre><code>class __declspec(dllexport) CGrafoPNT_2D\n{\npublic:\n    // ...\n    std::map&lt;int, CNodoGrafoPNT_2D&gt; m_Nodi;\n};\n\n// Test Application:\nclass CTestApp\n{\npublic:\n    CGrafoPNT_2D m_Grafo;\n};\n// Test Dialog:\nvoid CTestDlg::OnBnClickedButton1()\n{\n    // Debug hit condition...\n}\n</code></pre>\n\n<p>when I put a breakpoint somewhere in my test application to see what's going on in m_Nodi I can't see it in my Watch as you can see in the image below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/9HZ7q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9HZ7q.png\" alt=\"Watch object outside the object&#39;s function.\"></a></p>\n\n<p>Am I missing something in exporting the object?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Following the request of a comment I add these informations:</p>\n\n<ol>\n<li>The application flows regularly;</li>\n<li>The application is compiled in DEBUG mode with no optimizations enabled;</li>\n<li>I expect to see the content of map, which I can IF i step in any function of class CGrafoPNT_2D, as you can see in the image below.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/ie8lD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ie8lD.png\" alt=\"Watch object inside a function of CGrafoPNT_2D\"></a></p>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1539785826, "post_id": 52856435, "comment_id": 92629182, "body": "Add <code>QApplication::processEvents</code> between <code>Toolbox::getInstance()-&gt;hide();</code> and <code>&#47;&#47;screen capture stuffs.</code>."}], "answers": [{"comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1539793181, "post_id": 52859348, "comment_id": 92633525, "body": "@eyllanesc, thanks for the addition! Just one question: could you please tell me the benefit of using <code>Q_EMIT</code>? I always call the signals as normal functions without <code>emit</code> or <code>Q_EMIT</code>."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 2, "creation_date": 1539793361, "post_id": 52859348, "comment_id": 92633623, "body": "it is relative, the problem of using emit, signals, slot, etc is that they can come into conflict with other libraries."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1539793410, "post_id": 52859348, "comment_id": 92633648, "body": "@eyllanesc. I see. Thanks for the explanation!"}], "tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": false, "score": 2, "last_activity_date": 1539793320, "last_edit_date": 1539793320, "creation_date": 1539792915, "answer_id": 52859348, "question_id": 52856435, "link": "https://stackoverflow.com/questions/52856435/how-to-wait-for-window-to-be-hidden-in-qt/52859348#52859348", "title": "How to wait for window to be hidden in Qt?", "body": "<p>Apart from using <code>QApplication::processEvents</code>, I would suggest you a more elegant solution:</p>\n\n<ol>\n<li><p>Reimplement <a href=\"http://doc.qt.io/qt-5/qwidget.html#hideEvent\" rel=\"nofollow noreferrer\"><code>QWidget::hideEvent</code></a> of the class returned by <code>Toolbox::getInstance</code> to emit a signal, e.g. <code>widgetHidden</code></p>\n\n<pre><code>protected:\n    void hideEvent(QHideEvent *event) {\n        QWidget::hideEvent(event);\n\n        Q_EMIT widgetHidden();\n    }\n\nsignals:\n    void widgetHidden();\n</code></pre></li>\n<li><p>Connect <code>widgetHidden</code> to a slot to capture the screen</p>\n\n<pre><code>connect(Toolbox::getInstance(), &amp;MyWidget::widgetHidden, this, &amp;ClassName::onWidgetHidden);\n</code></pre>\n\n<p>where <code>MyWidget</code> is the class returned by <code>Toolbox::getInstance</code> and <code>ClassName</code> is the name of the class to which <code>ProcessData</code> belongs.</p></li>\n<li><p>Add a flag to know if it is the right time to capture, as the widget might be hidden in some other way</p>\n\n<pre><code>bool m_captureAllowed = false;\n</code></pre></li>\n<li><p>Implement the <code>onWidgetHidden</code> slot</p>\n\n<pre><code>private slots:\n    void onWidgetHidden() {\n        if (m_captureAllowed) {\n            m_captureAllowed = false;\n            //screen capture stuffs\n        }\n    }\n</code></pre></li>\n<li><p>Set the flag in <code>ProcessData</code></p>\n\n<pre><code>void ProcessData()\n{\n    m_captureAllowed = true;\n    Toolbox::getInstance()-&gt;hide(); //I am trying to hide toolbox here\n}\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 199, "user_id": 2380157, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/c22c19d4f84e44d85a55902c8d2efc4d?s=128&d=identicon&r=PG", "display_name": "GUI-Novice", "link": "https://stackoverflow.com/users/2380157/gui-novice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540714783, "creation_date": 1539783928, "last_edit_date": 1540714783, "question_id": 52856435, "link": "https://stackoverflow.com/questions/52856435/how-to-wait-for-window-to-be-hidden-in-qt", "title": "How to wait for window to be hidden in Qt?", "body": "<p>I am hiding a Qt toolbox window in one of my functions. I need to do some screen capturing stuffs to be executed in function after hiding my toolbox window. </p>\n\n<pre><code>void ProcessData()\n{\n    Toolbox::getInstance()-&gt;hide(); //I am trying to hide toolbox here\n\n    //screen capture stuffs.   -  It should be executed once the toolbox window is hidden.\n}\n</code></pre>\n\n<p>But what happens is, Toolbox is hidden only when the ProcessData() returns. This leads to the problem that my captured screen have the toolbox. </p>\n\n<p>Is there any way to wait for the toolbox to be hidden in Qt ?</p>\n"}, {"tags": ["c++", "nvidia", "tensorrt"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1539785078, "post_id": 52856362, "comment_id": 92628686, "body": "&quot;Is it supposed to be a 1D vector or 2D vector?&quot; - what is &quot;it&quot; ? Note that memory is 1D. NVidia generally uses tensor descriptors to describe how an 1D chunk of memory is to be interpreted."}, {"owner": {"reputation": 211, "user_id": 5717898, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/adf9a1784eb236da3a4910f3afeedf9d?s=128&d=identicon&r=PG&f=1", "display_name": "Optimus 1072", "link": "https://stackoverflow.com/users/5717898/optimus-1072"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1539853681, "post_id": 52856362, "comment_id": 92654771, "body": "I was asking about the variable &quot;buffers&quot;. But I think in general answered my question with the statement &quot;NVidia generally uses tensor descriptors to describe how an 1D chunk of memory is to be interpreted&quot;."}, {"owner": {"reputation": 211, "user_id": 5717898, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/adf9a1784eb236da3a4910f3afeedf9d?s=128&d=identicon&r=PG&f=1", "display_name": "Optimus 1072", "link": "https://stackoverflow.com/users/5717898/optimus-1072"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1539854474, "post_id": 52856362, "comment_id": 92655233, "body": "@MSalters BTW do you have any experience working with multiple images inference with TensorRT API?. Were you able to make it work?.What  performance gain did you get?."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1539871849, "post_id": 52856362, "comment_id": 92665375, "body": "Sorry, I was recently looking into TensorRT but stumbled across this question in the C++ stream; never actually wrote TensorRT code. My company does audio, not images, so we need to figure out how these NVidia tensors really work. We can&#39;t just use image examples, we have to rewrite them all."}], "owner": {"reputation": 211, "user_id": 5717898, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/adf9a1784eb236da3a4910f3afeedf9d?s=128&d=identicon&r=PG&f=1", "display_name": "Optimus 1072", "link": "https://stackoverflow.com/users/5717898/optimus-1072"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 592, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1562744853, "creation_date": 1539783703, "last_edit_date": 1562744853, "question_id": 52856362, "link": "https://stackoverflow.com/questions/52856362/tensorrt-context-enqueue-gives-wrong-result-for-all-frames-other-than-first", "title": "TensorRT context.enqueue gives wrong result for all frames other than first", "body": "<p>I am trying to run inference on multiple images using TensorRT API.\nPseudo Code snippet for my application is </p>\n\n<pre><code>context.enqueue(batchSize, buffers, stream, nullptr);\n</code></pre>\n\n<p>Here,</p>\n\n<pre><code>buffers[0] = batchSize * INPUT_C * INPUT_H * INPUT_W\n        buffers[1] = batchSize * outputSize\n</code></pre>\n\n<p>If I run with batchSize=1 , I get correct output but with batchSize > 1 , detection for images other than first image are wrong.\nFurther, with batchSize=1, inference time is 7ms and for batchSize=3 it is around 16ms. So solving this issue will give a lot of boost to my application and as in general.</p>\n\n<p>Can someone please suggest me what all things I can try to solve this issue.\nI am allocating memory to \"buffers\" this way</p>\n\n<pre><code>for (int b = 0; b &lt; engine.getNbBindings(); b++)\n    {\n        DimsCHW dims = static_cast&lt;DimsCHW&amp;&amp;&gt;(engine.getBindingDimensions(b));\n        size_t size = batchSize * dims.c() * dims.h() * dims.w() * sizeof(float);\n        std::cout &lt;&lt; \"size of buff = \" &lt;&lt; size &lt;&lt; std::endl;\n        CudaCHECK(cudaMalloc(&amp;buffers[b], size));\n    }\n</code></pre>\n\n<p>Is it supposed to be a 1D vector or 2D vector?.\nThanks!</p>\n"}, {"tags": ["c++", "boost", "command-line-interface", "boost-program-options"], "owner": {"reputation": 3772, "user_id": 393756, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-eH6VEKfAEjQ/AAAAAAAAAAI/AAAAAAAAABg/uD2kRjrKOBY/photo.jpg?sz=128", "display_name": "Fran&#231;ois Beaune", "link": "https://stackoverflow.com/users/393756/fran%c3%a7ois-beaune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539783633, "creation_date": 1539783633, "question_id": 52856337, "link": "https://stackoverflow.com/questions/52856337/boost-program-options-custom-validator-with-state", "title": "Boost.Program_options: Custom validator with state", "body": "<p>I would like to write a custom validator for command line options that can take a value among a set of allowed values, e.g. for options such as</p>\n\n<pre><code>--animal arg     Allowed values: cat, dog, bird\n</code></pre>\n\n<p>For this, I defined a new type, <code>RestrictedIdentifierOption</code>:</p>\n\n<pre><code>class RestrictedIdentifierOption\n{\npublic:\n    using ValueType = std::pair&lt;std::string, boost::any&gt;;\n    using ValueContainer = std::vector&lt;ValueType&gt;;\n    explicit RestrictedIdentifierOption(const ValueContainer&amp; allowedValues);\nprivate:\n    friend void validate(\n        boost::any&amp; v,\n        const std::vector&lt;std::string&gt;&amp; values,\n        RestrictedIdentifierOption* option,\n        int);\nprivate:\n    ValueContainer m_allowedValues;\n};\n</code></pre>\n\n<p>and I overloaded <code>validate()</code>, as per the <a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/program_options/howto.html#id-1.3.31.6.7\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<pre><code>void validate(\n    boost::any&amp; v,\n    const std::vector&lt;std::string&gt;&amp; values,\n    RestrictedIdentifierOption* option,\n    int)\n{\n    ...\n}\n</code></pre>\n\n<p>Finally, I declare an option:</p>\n\n<pre><code>auto option = boost::make_shared&lt;bpo::option_description&gt;(\n    \"animal,a\",\n    new bpo::typed_value&lt;RestrictedIdentifierOption&gt;(new RestrictedIdentifierOption({ { \"cat\", 1 }, { \"dog\", 2 }, { \"bird\", 3 } })),\n    \"Allowed values: cat, dog, bird\");\n</code></pre>\n\n<p><em>(Nevermind the memory leaks here, this isn't the point.)</em></p>\n\n<p>I naively expected that the <code>option</code> argument in <code>validate()</code> would be set to the instance I created, however it is always equal to <code>nullptr</code>.</p>\n\n<p>Is what I'm trying to do unreasonable? Can a custom validator can have a state at all with Boost.Program_options?</p>\n"}, {"tags": ["windows", "visual-studio", "c++", "makefile"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1539783681, "post_id": 52856289, "comment_id": 92627734, "body": "Looking in the .cpp files won&#39;t give you a difference, since any <code>#pragma</code> there would affect the .sln build equally. Check your makefiles, that&#39;s where the difference is."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1539783685, "post_id": 52856289, "comment_id": 92627736, "body": "what is the reason why you don&#39;t want AVX?"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1539783728, "post_id": 52856289, "comment_id": 92627760, "body": "grep Makefile (or other build related files) for avx (or &#39;native&#39; ri whichever equivalent for you compiler is, if you are building on CPU with AVX support)?"}, {"owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 0, "creation_date": 1539783854, "post_id": 52856289, "comment_id": 92627847, "body": "<b>@MSalters</b>: I have one sln file and one Makefile, how do I check them for difference? I checked CL and LINK parameters for difference, and tried to use the same parameters, I did not get the same results...  <b>bolov</b>: Prorgams compiled with AVX can&#39;t be run on older PC&#39;s that have CPU without AVX support  <b>Dan M</b>.: no sign of AVX anywhere in project files"}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539784381, "post_id": 52856289, "comment_id": 92628191, "body": "add <code>&#47;arch:SSE2</code> to all flags except MT one and check the result"}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539785304, "post_id": 52856289, "comment_id": 92628844, "body": "and another question is how you&#39;d determined that <code>.exe</code> has avx instructions when you dont have a clue what <code>nmake</code> is."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1539785430, "post_id": 52856289, "comment_id": 92628920, "body": "Your AVX/AVX2 comes together with <code>&#47;O2</code> or <code>&#47;Ox</code> compiler optimization options."}, {"owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 0, "creation_date": 1539839913, "post_id": 52856289, "comment_id": 92648387, "body": "<i>\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d</i> - I tried that, but this flag is not even supported in 64-bit version of compiler ( <a href=\"https://msdn.microsoft.com/en-us/library/jj620901.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/jj620901.aspx</a> ) I found that it contains AVX instructions because when it crashes I see &#39;invalid instruction vmovdqu&#39; error message, and also I see this instruction in disassembled version of exe.  <i>Victor Gubin</i> - thank you, I will try to switch to different /O flags"}, {"owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1539841087, "post_id": 52856289, "comment_id": 92648728, "body": "@Victor Gubin - my VS solution file also defines /O2 and no /arch and compiles without AVX support (and does not crash on CPU without AVX)"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1539855346, "post_id": 52856289, "comment_id": 92655716, "body": "@MiroJanosik Are you sure those CPU really produced before 2011 i.e. less then Intel Sandy Bridge or AMD Bulldozer. In any case if you compile using something like Visual Studio 2008 - 2012 I suppose cl would not generate AVX instruction set with /02 since most of those days common AMD64 based  processors doesn&#39;t support this instruction set."}, {"owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1539865666, "post_id": 52856289, "comment_id": 92661411, "body": "@VictorGubin - I have to compile with VS 2017 because of new c++ support; and what else could it be? CPU info program shows that AVX instructions are not supported on CPU + it shows &#39;invalid operation vmovdqu&#39; in crash."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1539869778, "post_id": 52856289, "comment_id": 92664071, "body": "@MiroJanosik It seems like known <a href=\"https://developercommunity.visualstudio.com/content/problem/166375/avx-instructions-generated-since-155-update.html\" rel=\"nofollow noreferrer\">VS 2017 bug</a>. You can do a trick with pragma or you can try to use MinGW 64 with <a href=\"https://www.msys2.org/\" rel=\"nofollow noreferrer\">MSYS2 build</a>, Itel C++ compiler, llvm/clang fow windows etc. 2. Make sure you are running release version from IDE."}], "answers": [{"comments": [{"owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 0, "creation_date": 1539840223, "post_id": 52859471, "comment_id": 92648471, "body": "I know that it contains AVX (because it crashes and I see avx instructions in disassembled code), I want to know where it comes from (some obj file, or some flag) during the compilation so I can turn it off.  For disassembling there is already tool in VS commandline: &quot;dumpbin /disasm binary &gt;binary.asm&quot;"}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 1, "creation_date": 1539860489, "post_id": 52859471, "comment_id": 92658513, "body": "If it crashes, a debugger will show you exactly where. VS debugger will just break execution and show you exact source location of the crash. WinDBG can do it offline, collect a crash dump <a href=\"https://docs.microsoft.com/en-us/windows/desktop/wer/collecting-user-mode-dumps\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/desktop/wer/&hellip;</a> then load dump + debug symbols + binaries into WinDBG and run <code>!analyze -v</code>"}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 0, "creation_date": 1539861188, "post_id": 52859471, "comment_id": 92658889, "body": "You don\u2019t need just a disassembler, you need disassembler that you can consume programmatically, to search for specific classes of instructions. It\u2019s hard to find AVX instructions in a disassembly of a huge module. If you don\u2019t like capstone you can parse disassembled .asm file to search for AVX but it\u2019s IMO harder."}, {"owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 0, "creation_date": 1539871129, "post_id": 52859471, "comment_id": 92664918, "body": "Please can I get something from crash dump if binary was built without debug symbols? (release binary) When I build binary with adding /Z7 for debug symbols and link with /DEBUG /PDB:&quot;program.pdb&quot; then ... it does not crash anymore."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 0, "creation_date": 1539871334, "post_id": 52859471, "comment_id": 92665047, "body": "Yes, crash dump analysis works for release builds, too. You need .pdb file[s] made by your linker, exactly same .pdb made by the build you\u2019re running (rebuilding invalidates it)."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 0, "creation_date": 1539871563, "post_id": 52859471, "comment_id": 92665200, "body": "If you don\u2019t have .pdb for release builds, go to Configuration Properties / Linker / Debugging, set \u201cGenerate Program Database File\u201d value to <code>$(OutDir)$(TargetName).pdb</code>"}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "reply_to_user": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "edited": false, "score": 0, "creation_date": 1539871670, "post_id": 52859471, "comment_id": 92665256, "body": "BTW you can debug your release builds too, if you want. Compared to WinDBG, VS debugger is <i>much</i> easier to use."}], "tags": [], "owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "is_accepted": true, "score": 1, "last_activity_date": 1539794341, "last_edit_date": 1539794341, "creation_date": 1539793345, "answer_id": 52859471, "question_id": 52856289, "link": "https://stackoverflow.com/questions/52856289/how-to-find-out-what-introduces-avx-flag/52859471#52859471", "title": "How to find out what introduces AVX flag", "body": "<p>The simple way, find an old PC without AVX, run your app in debugger, it\u2019ll crash with invalid instruction runtime error and will trap to debugger. This way you\u2019ll immediately find out what code compiled into that instruction.</p>\n\n<p>Another, harder way, write a C# console app that disassembles the compiled DLL or EXE, and searches for AVX instruction. You\u2019ll need <code>Gee.External.Capstone</code> nuget package for disassembling, <code>PeNet</code> package for parsing into sections. <a href=\"https://gist.github.com/Const-me/c69cce18dd6bf1c81f89\" rel=\"nofollow noreferrer\">Also this code to disassemble</a>. The <code>disassembleStreamEx</code> method will return you the stream of the instructions. Search for X86InstructionGroup.AVX or X86InstructionGroup.AVX2 instructions, print addresses, then use e.g. WinDBG + PDB file to translate addresses into source code location.</p>\n\n<p><strong>Update:</strong> before doing that, search your codebase for files containing <code>_mm256_</code>, and <code>*.asm</code> files. If you\u2019re lucky you won\u2019t have to do anything else.</p>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1539783493, "question_id": 1367602}, "owner": {"reputation": 673, "user_id": 545798, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/55274f3b3dc7fb6094c38c8aec8dd8a6?s=128&d=identicon&r=PG", "display_name": "MiroJanosik", "link": "https://stackoverflow.com/users/545798/mirojanosik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 52859471, "answer_count": 1, "score": 2, "last_activity_date": 1539794341, "creation_date": 1539783452, "question_id": 52856289, "link": "https://stackoverflow.com/questions/52856289/how-to-find-out-what-introduces-avx-flag", "title": "How to find out what introduces AVX flag", "body": "<p>I have a quite large x64 c++ program that is compiled with Visual Studio. There are two ways how do we compile it - one is with sln solution file (from IDE or through msbuild), another is through Makefile in VS command prompt (which then internally uses Visual Studio's cl.exe and link.exe).</p>\n\n<p>Somehow I got into situation that binary build through <strong>Makefile produces executable with /AVX instructions enabled, and I don't want that</strong>, so I want to find out how to get rid of it.</p>\n\n<p>I try to compile and link it without any parameters (especially without /arch:AVX). I hope that I compile and link the same sources and libs in both sln and Makefile.</p>\n\n<p>What is the easy way how to find out where the AVX comes from? Project includes dozens of h/cpp files, around 40 own libs, 10 windows libs. How would you proceed?</p>\n"}, {"tags": ["c++", "iterator"], "comments": [{"owner": {"reputation": 1124, "user_id": 3791837, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/db0f57d2fbc391f1e17f02fb26bc2808?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3791837/adam"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1539783337, "post_id": 52856168, "comment_id": 92627491, "body": "I thought I could return a wrapper which would hold the value as a data member and would have an operator-&gt; defined to return pointer to its data member. But does it exist in std library?"}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539783585, "post_id": 52856168, "comment_id": 92627671, "body": "use <code>std::pair</code> or so"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1539783783, "post_id": 52856168, "comment_id": 92627799, "body": "But the iterator class or structure should already <i>be</i> a &quot;wrapper&quot;, that references an element in your &quot;container&quot;. Easiest solution for iterators is to either contain the current position, and from that you can get the &quot;value&quot; (&quot;object&quot;) being referenced.  Then it&#39;s easy to return a pointer to the referenced element."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1539783810, "post_id": 52856168, "comment_id": 92627814, "body": "As a rough rule, if a class&#39; <code>operator*()</code> (dereference) returns a value rather than a reference, it would be appropriate to question whether it should have an <code>operator-&gt;()</code> AT ALL.    Idiomatically, <code>object-&gt;a</code> and <code>(*object).a</code> would normally be a reference to (or value of) the same entity, and achieving that is rather involved or sometimes impossible if <code>operator*()</code> returns by value."}, {"owner": {"reputation": 1124, "user_id": 3791837, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/db0f57d2fbc391f1e17f02fb26bc2808?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3791837/adam"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1539784201, "post_id": 52856168, "comment_id": 92628069, "body": "@Someprogrammerdude it&#39;s not my case, but if you had more iterators in a vector e.g. and sequentially processed them, the iterators with the value type stored would take excessive space as opposed to iterators returning a wrapper/proxy on dereference/-&gt;."}, {"owner": {"reputation": 1124, "user_id": 3791837, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/db0f57d2fbc391f1e17f02fb26bc2808?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3791837/adam"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1539784994, "post_id": 52856168, "comment_id": 92628616, "body": "@Someprogrammerdude my iterator does not correspond one-to-one with the underlying container. It picks just some elements and returns pairs of them. Theoretically I could return them one by one, but I would have to join them to pairs later in code, which I don&#39;t think is more elegant in my case."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1539785204, "post_id": 52856168, "comment_id": 92628768, "body": "I understand your problem better now I think. My primary solution would be the same as the note in the <a href=\"https://stackoverflow.com/a/52856428/440558\">answer from dasblinkenlight</a>: Keep a copy of the pair in the iterator itself, and return a pointer to the pair when needed. Keep it simple, don&#39;t overengineer things. :)"}], "answers": [{"comments": [{"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1596909787, "post_id": 52856349, "comment_id": 111965142, "body": "And when someone does <code>auto const&amp; foo = it-&gt;foo;</code> they have a dangling reference?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1596909913, "post_id": 52856349, "comment_id": 111965177, "body": "@ayxan yes, they made a dangling reference there.  That is one of the limitations of input iterators; you are not guaranteed <code>*</code> or <code>-&gt;</code> object long term existence."}, {"owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1596910767, "post_id": 52856349, "comment_id": 111965401, "body": "It&#39;s interesting that <code>auto const&amp; ref = *it</code> is OK but <code>auto const&amp; foo = it-&gt;foo</code> dangles. I do understand the reason but it&#39;s a bit deceiving."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "edited": false, "score": 0, "creation_date": 1596925307, "post_id": 52856349, "comment_id": 111968884, "body": "@Ayxan Wait until you play with <code>(*it).foo</code>."}, {"owner": {"reputation": 139, "user_id": 8729023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b78144babed12f0b8508b71128d84278?s=128&d=identicon&r=PG&f=1", "display_name": "Marc Dirven", "link": "https://stackoverflow.com/users/8729023/marc-dirven"}, "edited": false, "score": 0, "creation_date": 1603290992, "post_id": 52856349, "comment_id": 113991347, "body": "Wouldn&#39;t it better to use <code>decltype(std::addressof(t)) operator-&gt;()</code>?"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 7, "last_activity_date": 1560258317, "last_edit_date": 1560258317, "creation_date": 1539783665, "answer_id": 52856349, "question_id": 52856168, "link": "https://stackoverflow.com/questions/52856168/arrow-operator-operator-return-type-when-dereference-operator-returns-by/52856349#52856349", "title": "arrow operator (operator-&gt;) return type when dereference (operator*) returns by value", "body": "<pre><code>template&lt;class T&gt;\nstruct fake_ptr_with_value {\n  T t;\n  T* operator-&gt;() { return std::addressof(t); }\n};\n</code></pre>\n\n<p>return a <code>fake_ptr_with_value&lt;decltype(**this)&gt;</code>.</p>\n\n<p>No such helper type is exposed from <code>std</code>.</p>\n\n<p>Please note that due to defects in the specifications of what various iterator classes require, this is only usable for <code>InputIterator</code>s.  Forward iterators (and all more powerful iterators, like random access iterators), under the standard, require that <code>operator*</code> return a reference to a true and stable object.</p>\n\n<p>The defect is that the standard (a) in some cases requires references when pseudo-references would do, (b) mixes \"iteration\" and \"dereference\" semantics.</p>\n\n<p>Rangesv3 has a more decoupled iterator category system that addresses some, if not all, of these defects.</p>\n\n<p>As this question is about input iterators, this solution is sufficient; I am just including this caution in case someone wants to use this technique elsewhere.  Your code may compile and seem to work, but you are almost certainly going to be violating the requirements of the C++ standard when you pass your iterator to any <code>std</code> function, which means your program is ill-formed no diagnostic required.</p>\n"}, {"comments": [{"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 1, "creation_date": 1539826457, "post_id": 52856428, "comment_id": 92645541, "body": "Embedding is <i>necessary</i> to be a <code>ForwardIterator</code>.  (This is a bit unfortunate, since for many types multi-pass algorithms can be written efficiently even with by-value <code>operator*</code>.)"}], "tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": false, "score": 4, "last_activity_date": 1539783901, "creation_date": 1539783901, "answer_id": 52856428, "question_id": 52856168, "link": "https://stackoverflow.com/questions/52856168/arrow-operator-operator-return-type-when-dereference-operator-returns-by/52856428#52856428", "title": "arrow operator (operator-&gt;) return type when dereference (operator*) returns by value", "body": "<p>Since <a href=\"https://stackoverflow.com/questions/8777845/overloading-member-access-operators-c\"><code>-&gt;</code> will continue \"drilling down\" until it hits a pointer return type</a>, your code could return a \"proxy\" for the pair with the pair embedded in it:</p>\n\n<pre><code>template&lt;class T1, class T2&gt;\nclass pair_proxy {\n    std::pair&lt;T1,T2&gt; p;\npublic:\n    pair_proxy(const std::pair&lt;T1,T2&gt;&amp; p) : p(p) {}\n    std::pair&lt;T1,T2&gt;* operator-&gt;() { return &amp;p; }\n};\n</code></pre>\n\n<p><strong>Note:</strong> I would strongly consider embedding <code>std::pair</code> in your iterator, and returning a pointer to it from your <code>operator -&gt;()</code> implementation.</p>\n"}], "owner": {"reputation": 1124, "user_id": 3791837, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/db0f57d2fbc391f1e17f02fb26bc2808?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3791837/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1634, "favorite_count": 2, "accepted_answer_id": 52856349, "answer_count": 2, "score": 13, "last_activity_date": 1560258317, "creation_date": 1539783091, "question_id": 52856168, "link": "https://stackoverflow.com/questions/52856168/arrow-operator-operator-return-type-when-dereference-operator-returns-by", "title": "arrow operator (operator-&gt;) return type when dereference (operator*) returns by value", "body": "<p>I'm writing an InputIterator, which implements, among others, operator* and operator->.</p>\n\n<p>My operator* returns a pair of references to (vector) elements. Operator* returns by value therefore.</p>\n\n<p>According to cppreference: </p>\n\n<blockquote>\n  <p>The overload of operator -> must either return a raw pointer, or return an object (by reference or by value) for which operator -> is in turn overloaded.</p>\n</blockquote>\n\n<p>What do I return then? </p>\n\n<p>I cannot return a raw pointer; the pair has to be returned physically somehow. \nSo possibly some wrapper with operator-> defined? Does it exist in standard library, or how is it generally done?</p>\n"}, {"tags": ["c++", "c++11", "boost", "instruments", "websocket++"], "comments": [{"owner": {"reputation": 535, "user_id": 1436289, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HRq26.png?s=128&g=1", "display_name": "xiaodong", "link": "https://stackoverflow.com/users/1436289/xiaodong"}, "edited": false, "score": 0, "creation_date": 1539961640, "post_id": 52856085, "comment_id": 92702930, "body": "The downvoter please give your reason, if my question was not clear I can provide more info"}, {"owner": {"reputation": 484, "user_id": 5066497, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ee3feec2dfd128f643a70b306bd7a85?s=128&d=identicon&r=PG&f=1", "display_name": "9301293", "link": "https://stackoverflow.com/users/5066497/9301293"}, "edited": false, "score": 0, "creation_date": 1540421131, "post_id": 52856085, "comment_id": 92864260, "body": "So, I take it an exception is being thrown and you don&#39;t know why?"}, {"owner": {"reputation": 535, "user_id": 1436289, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HRq26.png?s=128&g=1", "display_name": "xiaodong", "link": "https://stackoverflow.com/users/1436289/xiaodong"}, "reply_to_user": {"reputation": 484, "user_id": 5066497, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ee3feec2dfd128f643a70b306bd7a85?s=128&d=identicon&r=PG&f=1", "display_name": "9301293", "link": "https://stackoverflow.com/users/5066497/9301293"}, "edited": false, "score": 0, "creation_date": 1540451786, "post_id": 52856085, "comment_id": 92872596, "body": "@9301293 No, there&#39;s no exception, this is a stack trace by cpu sampling, what i don&#39;t know is the destruction sequence"}], "owner": {"reputation": 535, "user_id": 1436289, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HRq26.png?s=128&g=1", "display_name": "xiaodong", "link": "https://stackoverflow.com/users/1436289/xiaodong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539957676, "creation_date": 1539782862, "last_edit_date": 1539846297, "question_id": 52856085, "link": "https://stackoverflow.com/questions/52856085/confusion-about-the-stack-trace-of-websocketpp-destruction", "title": "Confusion about the stack trace of websocketpp destruction", "body": "<p>I'm using Instrument(XCode tool) to get the stack trace of my program and i got the following result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GLZR1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GLZR1.png\" alt=\"enter image description here\"></a></p>\n\n<p>In this picture it shows that the destruction of</p>\n\n<p><code>std::__1::vector&lt;websocketpp::transport::buffer, std::__1::allocator&lt;websocketpp::transport::buffer&gt; &gt;::~vector()</code></p>\n\n<p>called the</p>\n\n<p><code>std::__1::vector&lt;boost::asio::detail::timer_queue&lt;boost::asio::detail::chrono_time_traits&lt;std::__1::chrono::steady_clock, boost::asio::wait_traits&lt;std::__1::chrono::steady_clock&gt; &gt; &gt;::heap_entry, std::__1::allocator&lt;boost::asio::detail::timer_queue&lt;boost::asio::detail::chrono_time_traits&lt;std::__1::chrono::steady_clock, boost::asio::wait_traits&lt;std::__1::chrono::steady_clock&gt; &gt; &gt;::heap_entry&gt; &gt;::~vector()</code></p>\n\n<p>However, when I dig into the source code of <code>websocketpp::transport::buffer</code>, its only member was <code>char const *buf</code> and <code>size_t len</code> showed below:</p>\n\n<pre><code>// defined in websocketpp/transport/base/connection.hpp\n\n137 /// A simple utility buffer class\n138 struct buffer {\n139     buffer(char const * b, size_t l) : buf(b),len(l) {}\n140\n141     char const * buf;\n142     size_t len;\n143 }; \n</code></pre>\n\n<p>So, why destruction of <code>websocketpp::transport::buffer</code> could cause the destruction of the <code>vector&lt;boost::asio::detail::timer_queue.... ::heap_entry&gt; &gt;</code>?</p>\n\n<p><strong>Update: 2018-10-18</strong></p>\n\n<p>Today I used <code>lldb</code> to debug my program, found that the destruction of the <code>vector&lt;boost::asio::detail::timer_queue.... ::heap_entry&gt; &gt;</code> was never be executed yet.</p>\n\n<p>i feel more confused now...</p>\n"}, {"tags": ["c++", "multithreading", "concurrency", "memory-barriers"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1539785037, "post_id": 52855910, "comment_id": 92628648, "body": "To be sure you get the best answer, can you post a code snippet where the two variables are read/written, with expected output and example output that would be undesirable?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1539787122, "post_id": 52855910, "comment_id": 92630090, "body": "<a href=\"https://stackoverflow.com/questions/8819095/concurrency-atomic-and-volatile-in-c11-memory-model\" title=\"concurrency atomic and volatile in c11 memory model\">stackoverflow.com/questions/8819095/&hellip;</a>"}, {"owner": {"reputation": 12687, "user_id": 2809095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/705cfb2d48f12159ebae7d0275355a3f?s=128&d=identicon&r=PG&f=1", "display_name": "Iwillnotexist Idonotexist", "link": "https://stackoverflow.com/users/2809095/iwillnotexist-idonotexist"}, "edited": false, "score": 0, "creation_date": 1539790571, "post_id": 52855910, "comment_id": 92632175, "body": "If your code will execute on x86, this is guaranteed by the Intel architecture: <i>&quot;Writes are not reordered with older reads.&quot;</i>"}, {"owner": {"reputation": 557, "user_id": 6092128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b27efed6963e85eed7bbd5d338c2ef79?s=128&d=identicon&r=PG&f=1", "display_name": "aaalex88", "link": "https://stackoverflow.com/users/6092128/aaalex88"}, "edited": false, "score": 0, "creation_date": 1539792964, "post_id": 52855910, "comment_id": 92633408, "body": "Yes, but I target weak memory model where any operations can be reordered."}], "answers": [{"comments": [{"owner": {"reputation": 557, "user_id": 6092128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b27efed6963e85eed7bbd5d338c2ef79?s=128&d=identicon&r=PG&f=1", "display_name": "aaalex88", "link": "https://stackoverflow.com/users/6092128/aaalex88"}, "edited": false, "score": 0, "creation_date": 1539788325, "post_id": 52857566, "comment_id": 92630850, "body": "Yes, <code>seq_cst</code> surely suits, but I think it&#39;s overkill and is interested in cheapest possible fence."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 557, "user_id": 6092128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b27efed6963e85eed7bbd5d338c2ef79?s=128&d=identicon&r=PG&f=1", "display_name": "aaalex88", "link": "https://stackoverflow.com/users/6092128/aaalex88"}, "edited": false, "score": 0, "creation_date": 1539789518, "post_id": 52857566, "comment_id": 92631525, "body": "I doubt you can safely beat acquire/release, then."}, {"owner": {"reputation": 557, "user_id": 6092128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b27efed6963e85eed7bbd5d338c2ef79?s=128&d=identicon&r=PG&f=1", "display_name": "aaalex88", "link": "https://stackoverflow.com/users/6092128/aaalex88"}, "edited": false, "score": 0, "creation_date": 1539793454, "post_id": 52857566, "comment_id": 92633669, "body": "And when we do a read and then a write can we consider single release or acquire barrier is enough for these two operations not to be reordered with each other?"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 557, "user_id": 6092128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b27efed6963e85eed7bbd5d338c2ef79?s=128&d=identicon&r=PG&f=1", "display_name": "aaalex88", "link": "https://stackoverflow.com/users/6092128/aaalex88"}, "edited": false, "score": 0, "creation_date": 1539802872, "post_id": 52857566, "comment_id": 92638199, "body": "If atomic_flag is stored order_release in thread A, when thread B will order_acquire load it, it will be guaranteed to see atomic_val writes (that were done before). For this to work, though, you must have a guarantee that no other atomic_val writes occur after you wrote atomic_flag. Typically by doing the opposite process of storing back the flag to false after reading."}], "tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": 1, "last_activity_date": 1539875158, "last_edit_date": 1539875158, "creation_date": 1539787300, "answer_id": 52857566, "question_id": 52855910, "link": "https://stackoverflow.com/questions/52855910/how-to-make-a-lightweight-load-store-barrier/52857566#52857566", "title": "How to make a lightweight load-store barrier", "body": "<p>Following your update:\n<a href=\"https://en.cppreference.com/w/cpp/atomic/memory_order#Release-Acquire_ordering\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/atomic/memory_order#Release-Acquire_ordering</a></p>\n\n<p>You would want the atomic flags and variables to be written(stored) with:</p>\n\n<pre><code>ptr.store(p, std::memory_order_release);\n</code></pre>\n\n<p>and you would want the read of flags and values to be done with:</p>\n\n<pre><code>p2 = ptr.load(std::memory_order_acquire)\n</code></pre>\n\n<p>This seems to be the exact reason for their existence. </p>\n\n<p>Edit 2: In fact, Release-Consume might be better. But I've never see it used. The link above also states:</p>\n\n<pre><code> Note that currently (2/2015) no known production compilers track dependency chains: consume operations are lifted to acquire operations.\n</code></pre>\n\n<p>Edit 3: Sample code doing something similar to what I understand you want. </p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;iostream&gt;\n#include &lt;atomic&gt;\n\nstd::atomic&lt;int&gt; x;\nstd::atomic&lt;int&gt; y;\n\nauto write_op = std::memory_order_release;\nauto read_op = std::memory_order_acquire;\n\n// auto write_op = std::memory_order_seq_cst;\n// auto read_op = std::memory_order_seq_cst;\n\nvoid consumer()\n{\n    while(true)\n    {\n        int rx,ry;\n        do\n        {\n            ry = y.load(read_op); // flag read first to guarantee x validity\n            rx = x.load(read_op);\n        }\n        while(ry == 0); // wait for y. y acts as the flag, here\n\n        if (ry == -1)\n        {\n            break;\n        }\n\n        if (rx != ry) // check consistency\n        {\n            std::cout &lt;&lt; \"Boo \" &lt;&lt; rx &lt;&lt; \" \" &lt;&lt; ry &lt;&lt; std::endl;\n        }\n\n        x.store(0, write_op);\n        y.store(0, write_op);\n    }\n}\n\nvoid producer()\n{\n    int count = 0;\n    int steps = 0;\n    while(steps &lt; 50)\n    {\n        while(y.load(read_op) != 0) {} // wait for y to have been consumed\n\n        int value = std::rand() % 10 + 1;\n\n        x.store(value, write_op); // stores values\n        y.store(value, write_op); // indicates readiness to other thread\n\n        count++;\n        if (count == 1000000)\n        {\n            std::cout &lt;&lt; '.' &lt;&lt; std::endl;\n            count = 0;\n            steps++;\n        }\n    }\n    y.store(-1);\n}\n\nint main()\n{\n    x = 0;\n    y = 0;\n\n    std::thread thread1(producer);\n    std::thread thread2(consumer);\n\n    thread1.join();\n    thread2.join();\n}\n</code></pre>\n"}], "owner": {"reputation": 557, "user_id": 6092128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b27efed6963e85eed7bbd5d338c2ef79?s=128&d=identicon&r=PG&f=1", "display_name": "aaalex88", "link": "https://stackoverflow.com/users/6092128/aaalex88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1539875158, "creation_date": 1539782382, "last_edit_date": 1539788362, "question_id": 52855910, "link": "https://stackoverflow.com/questions/52855910/how-to-make-a-lightweight-load-store-barrier", "title": "How to make a lightweight load-store barrier", "body": "<p>For example if we have two <code>std::atomic</code>s and want to read value from first and then flag second that we don't need value of first anymore. We don't want these operations to be reordered (otherwise first value can be rewritten before we read it), but there is no data dependency between operations, so we definetely need a barrier to prevent reordering (and <code>memory_order_consume</code> doesn't fit). </p>\n\n<p>Full fence is certainly overkill here. Also we don't need neither release nor acquire semantic (even if they provide such barrier). All we need is just preserving order of read-and-then-write operations.</p>\n\n<p>Is there some cheap fence that does what we need?</p>\n\n<p>EDIT: examples of what I need.</p>\n\n<pre><code>std::atomic&lt;X&gt; atomicVal;\nstd::atomic&lt;bool&gt; atomicFlag = false;\n...\n\nauto value = atomicVal.load(std::memory_order_relaxed);\nsome_appropriative_fence();\natomicFlag.store(true, std::memory_order_relaxed);\n</code></pre>\n\n<p>And after <code>atomicFlag</code> is set <code>atomicVal</code> can be overwritten to some further value, so we need to read it before.</p>\n\n<p>Of course we can make</p>\n\n<pre><code>auto value = atomicVal.load(std::memory_order_relaxed);\nstd::atomic_thread_fence(std::memory_order_seq_cst);\natomicFlag.store(true, std::memory_order_relaxed);\n</code></pre>\n\n<p>but it will be too expensive for operation we need.</p>\n\n<p>I'm interesting what minimal fence is enough to guarantee order of operations.</p>\n"}, {"tags": ["c++", "opengl", "zooming", "glfw", "glm-math"], "comments": [{"owner": {"reputation": 293, "user_id": 10175089, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/8e02341885a5deb7306e7049d659cbdf?s=128&d=identicon&r=PG", "display_name": "dan", "link": "https://stackoverflow.com/users/10175089/dan"}, "edited": false, "score": 0, "creation_date": 1539785655, "post_id": 52855398, "comment_id": 92629069, "body": "did you get a black screen before you implemented the zoom? are you sure the black screen is a result of modifying the field of view?"}, {"owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "reply_to_user": {"reputation": 293, "user_id": 10175089, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/8e02341885a5deb7306e7049d659cbdf?s=128&d=identicon&r=PG", "display_name": "dan", "link": "https://stackoverflow.com/users/10175089/dan"}, "edited": false, "score": 0, "creation_date": 1539786011, "post_id": 52855398, "comment_id": 92629317, "body": "actually before i have black screen too, but before i can change bg color by my texture (when i press on keyboard key &quot;N&quot;) and before i can draw lines :D"}, {"owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "reply_to_user": {"reputation": 293, "user_id": 10175089, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/8e02341885a5deb7306e7049d659cbdf?s=128&d=identicon&r=PG", "display_name": "dan", "link": "https://stackoverflow.com/users/10175089/dan"}, "edited": false, "score": 0, "creation_date": 1539786221, "post_id": 52855398, "comment_id": 92629470, "body": "discovering this problem, i find one interesting thing, if i change in my vertex shader gl_Position = projection * view * model * vec4(aPos, 1.0f) on just gl_Position = vec4(aPos, 1.0f) all f*cking working, so i think smth here wrong???"}, {"owner": {"reputation": 1848, "user_id": 5505741, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-K0RGKJuJSu4/AAAAAAAAAAI/AAAAAAAAAFw/aodTCStN3gc/photo.jpg?sz=128", "display_name": "Michael Nastenko", "link": "https://stackoverflow.com/users/5505741/michael-nastenko"}, "edited": false, "score": 0, "creation_date": 1539788092, "post_id": 52855398, "comment_id": 92630696, "body": "Why do you use perspective projection for 2D task? I would use orthographic. And w/o model transform (you have only one model anyway). BTW, what OS you working on?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1539793519, "post_id": 52855398, "comment_id": 92633698, "body": "<code>glm::mat4 model = glm::translate(model, glm::vec3(0.f, 0.f, 0.f));</code> You must initialize <code>model</code> before using it at glm::translate. See <a href=\"https://stackoverflow.com/questions/47178228/glmtranslate-outputs-a-matrix-with-incorrect-values\">this</a>"}, {"owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "edited": false, "score": 0, "creation_date": 1539795326, "post_id": 52855398, "comment_id": 92634599, "body": "I&#39;m using macOS, about orthographic, so I need use glm::ortho?"}, {"owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "edited": false, "score": 0, "creation_date": 1539795380, "post_id": 52855398, "comment_id": 92634617, "body": "Ok, I init model, it didn&#39;t help"}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1539851115, "post_id": 52855398, "comment_id": 92653323, "body": "see <a href=\"https://stackoverflow.com/a/37269366/2521214\">Zooming graphics based on current mouse position</a>"}], "answers": [{"comments": [{"owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "edited": false, "score": 0, "creation_date": 1539796446, "post_id": 52860034, "comment_id": 92635101, "body": "Hi, thx for answer, but I want to clarify a bit, I need in vertex shader scale my position of screen or texture coords? And how to connect it with the mouse?"}, {"owner": {"reputation": 812, "user_id": 10492002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTAmh.png?s=128&g=1", "display_name": "Cyber", "link": "https://stackoverflow.com/users/10492002/cyber"}, "reply_to_user": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "edited": false, "score": 0, "creation_date": 1539796752, "post_id": 52860034, "comment_id": 92635265, "body": "@Azazel-San only the position. Texture coordinates must stay untouched. To learn how to process input in GLFW, read the documentation, it has everything you need to know: <a href=\"https://www.glfw.org/docs/latest/input_guide.html\" rel=\"nofollow noreferrer\">https://www.glfw.org/docs/latest/input_guide.html</a>"}, {"owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "edited": false, "score": 0, "creation_date": 1539802262, "post_id": 52860034, "comment_id": 92637916, "body": "Thx for help, but now when I&#39;m zooming old shapes not redraw, how I can fix that without using glClearColor and glClear(GL_COLOR_BUFFER_BIT)?"}], "tags": [], "owner": {"reputation": 812, "user_id": 10492002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTAmh.png?s=128&g=1", "display_name": "Cyber", "link": "https://stackoverflow.com/users/10492002/cyber"}, "is_accepted": true, "score": 1, "last_activity_date": 1539795418, "creation_date": 1539795418, "answer_id": 52860034, "question_id": 52855398, "link": "https://stackoverflow.com/questions/52855398/how-to-make-2d-zoom-in-openglglfw-glad/52860034#52860034", "title": "How to make 2D Zoom in OpenGL(GLFW, glad)?", "body": "<p>You're working in 2D, forget about the camera, forget about projection, forget about following OpenGL tutorials, they're aimed at 3D graphics.</p>\n\n<p>What you need is just a rectangle to fill your screen. Start with the vertices at the the corners of the screen, starting from the top-left corner and moving counterclockwise: (-1,1,0) (-1,-1,0) (1,-1,0) (1,1,0). Forget about Z, you're working in 2D.</p>\n\n<p>You draw on a texture, and the texture coordinates are (0,1) (0,0) (1,0) (1,1), same order as above. Zooming is now just a matter of scaling the rectangle. You have a matrix to determine the scale and one to determine the position. Forget about rotations, front vectors and all that stuff. In the vertex shader you scale and then translate the vertices as usual, in this order. Done.</p>\n\n<p>To interact for example you can have mouse wheel up increasing the scale factor and mouse wheel down decreasing it. Hold click and move the mouse to change the (x,y) position. Again forget about Z. Throw those values into the vertex shader and do the usual transformations.</p>\n"}], "owner": {"reputation": 176, "user_id": 9780989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e134af765ce8b99fd9ec90d9f4d21c35?s=128&d=identicon&r=PG&f=1", "display_name": "adziri", "link": "https://stackoverflow.com/users/9780989/adziri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 867, "favorite_count": 0, "accepted_answer_id": 52860034, "answer_count": 1, "score": 0, "last_activity_date": 1539795418, "creation_date": 1539780954, "last_edit_date": 1539788275, "question_id": 52855398, "link": "https://stackoverflow.com/questions/52855398/how-to-make-2d-zoom-in-openglglfw-glad", "title": "How to make 2D Zoom in OpenGL(GLFW, glad)?", "body": "<p>I'm trying to implement a simple paint program and now I have a problem with zoom, I can't understand how to do it? I tried to adapt the code from <a href=\"https://learnopengl.com/Getting-started/Camera\" rel=\"nofollow noreferrer\">here</a> to myself, but it did not work, I just get a black screen. What my problem?</p>\n\n<p><strong>Not using glut or glew!</strong></p>\n\n<p><strong>Here my camera code:</strong></p>\n\n<p>.h</p>\n\n<pre><code>class Camera2d\n{\npublic:\n    Camera2d(const glm::vec3&amp; pos = glm::vec3(0.f, 0.f, 0.f),\n         const glm::vec3&amp; up  = glm::vec3(0.f, 1.f, 0.f));\n   //~Camera2d();\n    void        setZoom(const float&amp; zoom);\n    float       getZoom()       const noexcept;\n    glm::mat4   getViewMatrix() const noexcept;\n    void        mouseScrollCallback(const float&amp; yOffset);\nprotected:\n    void        update();\nprivate:\n    // Camera zoom\n    float       m_zoom;\n    // Euler Angles\n    float       m_yaw;\n    float       m_pitch;\npublic:\n    // Camera Attributes\n    glm::vec3   position;\n    glm::vec3   worldUp;\n    glm::vec3   front;\n    glm::vec3   up;\n    glm::vec3   right;\n};\n</code></pre>\n\n<p>.cpp</p>\n\n<pre><code>Camera2d::Camera2d(\n    const glm::vec3&amp; pos /* = glm::vec3(0.f, 0.f, 0.f) */,\n    const glm::vec3&amp; up  /* = glm::vec3(0.f, 1.f, 0.f) */\n    )\n    : m_zoom(45.f)\n    , m_yaw(-90.f)\n    , m_pitch(0.f)\n    , position(pos)\n    , worldUp(up)\n    , front(glm::vec3(0.f, 0.f, -1.f))\n{\n    this-&gt;update();\n}\nvoid Camera2d::setZoom(const float&amp; zoom)\n{\n    this-&gt;m_zoom = zoom;\n}\nfloat Camera2d::getZoom() const noexcept\n{\n    return this-&gt;m_zoom;\n}\nglm::mat4 Camera2d::getViewMatrix() const noexcept\n{\n    return glm::lookAt(this-&gt;position, this-&gt;position + this-&gt;front, this-&gt;up);\n}\n\nvoid Camera2d::mouseScrollCallback(const float&amp; yOffset)\n{\n    if (m_zoom &gt;= 1.f &amp;&amp; m_zoom &lt;= 45.f)\n        m_zoom -= yOffset;\n    else if (m_zoom &lt;= 1.f)\n        m_zoom = 1.f;\n    else if (m_zoom &gt;= 45.f)\n        m_zoom = 45.f;\n}\n\nvoid Camera2d::update()\n{\n    // Calculate the new Front vector\n    glm::vec3 _front;\n    _front.x = cos(glm::radians(this-&gt;m_yaw)) * cos(glm::radians(this-&gt;m_pitch));\n    _front.y = sin(glm::radians(this-&gt;m_pitch));\n    _front.z = cos(glm::radians(this-&gt;m_pitch)) * sin(glm::radians(this-&gt;m_yaw));\n    this-&gt;front = glm::normalize(_front);\n    // Also re-calculate the Right and Up vector\n    this-&gt;right = glm::normalize(glm::cross(this-&gt;front, this-&gt;worldUp));      // Normalize the vectors, because their length gets closer to 0 the more     you look up or down which results in slower movement.\n    this-&gt;up = glm::normalize(glm::cross(this-&gt;right, this-&gt;front));\n}\n</code></pre>\n\n<p>and in main i try smth like this in render loop</p>\n\n<pre><code>    // pass projection matrix to shader\n    glm::mat4 projection = glm::perspective(glm::radians(camera.getZoom()),\n            static_cast&lt;float&gt;(WIDTH) / static_cast&lt;float&gt;(HEIGHT),\n            0.1f,\n            10000.f);\n    shaderProg.setMat4(\"projecton\", projection);\n    // camera view transformation\n    glm::mat4 view = camera.getViewMatrix();\n    shaderProg.setMat4(\"view\", view);\n\n    here i have just 1 model its my white bg-texture\n    glm::mat4 model = glm::translate(model, glm::vec3(0.f, 0.f, 0.f));\n    model = glm::rotate(model, glm::radians(0.f), glm::vec3(1.0f, 0.3f, 0.5f));\n    shaderProg.setMat4(\"model\", model);\n</code></pre>\n\n<p>All code on github: <a href=\"https://github.com/Kovacz/SimplePaint/blob/master/Paint/src/main.cpp\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": ["c++", "function", "reference"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1539780190, "post_id": 52855117, "comment_id": 92625436, "body": "TL;DR: <b>Never</b> return a local variable (unless it is static) by pointer or reference."}, {"owner": {"reputation": 29, "user_id": 7610821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UblbMhPVFXk/AAAAAAAAAAI/AAAAAAAABS8/9FPlR_5jOKY/photo.jpg?sz=128", "display_name": "Orestes Colomina Monsalve", "link": "https://stackoverflow.com/users/7610821/orestes-colomina-monsalve"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1539781033, "post_id": 52855117, "comment_id": 92625974, "body": "i reprogrammed the function so it doesn&#39;t return and it does the change and does work now. thanks."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1539781558, "post_id": 52855117, "comment_id": 92626322, "body": "<i>i reprogrammed the function so it doesn&#39;t return</i> -- So what does it do now?  Isn&#39;t the purpose of the function to create a new list based on the current list and a passed-in list?  If you&#39;re not returning anything, where did the new list go?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1539782282, "post_id": 52855117, "comment_id": 92626779, "body": "&quot;i can&#39;t understand why does this happen&quot; ... but... but... but... that&#39;s what you programmed it to do."}], "owner": {"reputation": 29, "user_id": 7610821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-UblbMhPVFXk/AAAAAAAAAAI/AAAAAAAABS8/9FPlR_5jOKY/photo.jpg?sz=128", "display_name": "Orestes Colomina Monsalve", "link": "https://stackoverflow.com/users/7610821/orestes-colomina-monsalve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "closed_date": 1539780161, "answer_count": 0, "score": 0, "last_activity_date": 1539780098, "creation_date": 1539780098, "question_id": 52855117, "link": "https://stackoverflow.com/questions/52855117/c-function-which-returns-a-reference-the-object-destroys-before-its-returned", "closed_reason": "Duplicate", "title": "C++ function which returns a reference, the object destroys before it&#39;s returned", "body": "<p>i'm writing a function with returns a reference to a linked list. the problem is, C++ <strong>destroys the list before it's returned</strong>, giving me an useless list and a lot of segmentation faults.\nthis is the code:</p>\n\n<pre><code>template&lt;typename T&gt;\nListaEnlazada&lt;T&gt;&amp; ListaEnlazada&lt;T&gt;::concatena(const ListaEnlazada&lt;T&gt;&amp; l)\n{\n    ListaEnlazada&lt;T&gt; nuevaLista(*this);\n    Iterador&lt;T&gt; i = l.iterador();\n    while (!i.fin())\n    {\n        Nodo&lt;T&gt;* nuevo = new Nodo&lt;T&gt;(i.esto());\n        if (nuevaLista.cola)\n            nuevaLista.cola-&gt;next = nuevo;\n        nuevaLista.cola = nuevo;\n        nuevaLista.numDeElementos++;\n        i.siguiente();\n    }\n    return nuevaLista;\n}\n</code></pre>\n\n<p>i can't understand why does this happen. the copy constructor works fine and the destructor works fine too.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "edited": false, "score": 0, "creation_date": 1539779600, "post_id": 52854940, "comment_id": 92625055, "body": "In case you require anything apart from the project file, Please let me know so that I can include snippet for it too."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1539783559, "post_id": 52854940, "comment_id": 92627653, "body": "<a href=\"https://docs.microsoft.com/en-us/cpp/atl-mfc-shared/allocating-and-releasing-memory-for-a-bstr?view=vs-2017\" rel=\"nofollow noreferrer\"><code>BSTR</code> is not <code>wchar_t*</code></a> they are reference counted strings managed by COM. Any method taking a <code>BSTR</code> needs an actual <code>BSTR</code> not a <code>wchar_t*</code>, if you want a convienent way to do this there is the <a href=\"https://docs.microsoft.com/en-us/cpp/cpp/bstr-t-class?view=vs-2017\" rel=\"nofollow noreferrer\"><code>_bstr_t</code> class</a>"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1539784040, "post_id": 52854940, "comment_id": 92627956, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/37204166/error-c2440-default-argument-cannot-convert-from-const-wchar-t-1-to-bst\">error C2440: &#39;default argument&#39;: cannot convert from &#39;const wchar_t &#91;1&#93;&#39; to &#39;BSTR&#39;</a>"}, {"owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1539837096, "post_id": 52854940, "comment_id": 92647671, "body": "@Mgetz I have already gone through the above link and tried it but it doesn&#39;t work for me. I&#39;ve mentioned it in my problem too."}, {"owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "reply_to_user": {"reputation": 21071, "user_id": 222914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc655b4724b452c875e666f6d88804b?s=128&d=identicon&r=PG", "display_name": "Janne Karila", "link": "https://stackoverflow.com/users/222914/janne-karila"}, "edited": false, "score": 0, "creation_date": 1539843803, "post_id": 52854940, "comment_id": 92649672, "body": "@JanneKarila It has typical WMI query to list the partitions within the disks. I&#39;ve included the Wmic Query code which is executed on button click from the QT based UI. The output is displayed in the textbox."}, {"owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "reply_to_user": {"reputation": 21071, "user_id": 222914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc655b4724b452c875e666f6d88804b?s=128&d=identicon&r=PG", "display_name": "Janne Karila", "link": "https://stackoverflow.com/users/222914/janne-karila"}, "edited": false, "score": 0, "creation_date": 1539845509, "post_id": 52854940, "comment_id": 92650387, "body": "@JanneKarila It&#39;s native to QT and the error message C:\\Program Files (x86)\\Windows Kits\\8.1\\Include\\um\\WbemDisp.h: error: C2440: &#39;default argument&#39;: cannot convert from &#39;const wchar_t [1]&#39; to &#39;BSTR&#39;  appears for header file  WbemDisp.h which is required for executing Wmi Query in C++. So, it can&#39;t be compiled."}, {"owner": {"reputation": 21071, "user_id": 222914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc655b4724b452c875e666f6d88804b?s=128&d=identicon&r=PG", "display_name": "Janne Karila", "link": "https://stackoverflow.com/users/222914/janne-karila"}, "edited": false, "score": 0, "creation_date": 1539846052, "post_id": 52854940, "comment_id": 92650664, "body": "Do you get the error if your main.cpp contains nothing but <code>#include &quot;WbemDisp.h&quot;</code>? (I don&#39;t)"}, {"owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "reply_to_user": {"reputation": 21071, "user_id": 222914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc655b4724b452c875e666f6d88804b?s=128&d=identicon&r=PG", "display_name": "Janne Karila", "link": "https://stackoverflow.com/users/222914/janne-karila"}, "edited": false, "score": 1, "creation_date": 1539846057, "post_id": 52854940, "comment_id": 92650667, "body": "@JanneKarila Do you require minimal code that can be compiled in VS??"}, {"owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "edited": false, "score": 0, "creation_date": 1539846732, "post_id": 52854940, "comment_id": 92650973, "body": "Yes, I do get an error (actually about 22 times) for wchar_t[1] and wchar_t[4] at different lines of the header file. And I&#39;ve edited the code in mainwindow.cpp"}, {"owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "reply_to_user": {"reputation": 21071, "user_id": 222914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc655b4724b452c875e666f6d88804b?s=128&d=identicon&r=PG", "display_name": "Janne Karila", "link": "https://stackoverflow.com/users/222914/janne-karila"}, "edited": false, "score": 0, "creation_date": 1539846750, "post_id": 52854940, "comment_id": 92650988, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/182067/discussion-between-user9059547-and-janne-karila\">continue this discussion in chat</a>."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1539866273, "post_id": 52854940, "comment_id": 92661799, "body": "@user9059547 <code>_bstr_t</code> is a class you&#39;ll need to explicitly store those on the stack prior to your method calls and call <a href=\"https://docs.microsoft.com/en-us/cpp/cpp/bstr-t-getbstr?view=vs-2017\" rel=\"nofollow noreferrer\"><code>.GetBSTR()</code></a> when passing them to methods. Otherwise they have an implicit (which is bad) conversion operator to <code>wchar_t*</code>."}, {"owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1540272749, "post_id": 52854940, "comment_id": 92791933, "body": "@Mgetz You need me explicitly convert to BSTR before the calling a particular method/API using a different function. But, I have a doubt, why is it that I&#39;m getting error messages just by including the header file &lt;Wbemidl.h&gt; or &lt;Wbemdisp.h&gt;"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1540293651, "post_id": 52854940, "comment_id": 92803528, "body": "@user9059547 without knowing the errors I can&#39;t say, you&#39;re able to always use <code>SysAllocString</code> and <code>SysFreeString</code> yourself if you wish but that introduces a level of possible leaks you can avoid."}], "owner": {"reputation": 67, "user_id": 9059547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a0809ff4f9be51edc4039833806abfa?s=128&d=identicon&r=PG&f=1", "display_name": "user9059547", "link": "https://stackoverflow.com/users/9059547/user9059547"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 770, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1539843423, "creation_date": 1539779486, "last_edit_date": 1539843423, "question_id": 52854940, "link": "https://stackoverflow.com/questions/52854940/error-c2440-default-argument-cannot-convert-from-const-wchar-t-1-to-bs", "title": "error: C2440: &#39;default argument&#39;: cannot convert from &#39;const wchar_t [1]&#39; to &#39;BSTR&#39; in WbemDisp.h when using WMI query in QT C++", "body": "<p>I'm trying to implement a QT app for WMI Query. However, I'm stuck at error: </p>\n\n<blockquote>\n  <p>C2440: 'default argument': cannot convert from 'const wchar_t [ 1 ]' in WbemDisp.h.</p>\n</blockquote>\n\n<p>On doing some research, I came to know that it is due to some header not following the strictString rule and that I should add </p>\n\n<pre><code>win32: QMAKE_CXXFLAGS_RELEASE -= -Zc:strictStrings\nwin32: QMAKE_CFLAGS_RELEASE -= -Zc:strictStrings\nwin32: QMAKE_CFLAGS -= -Zc:strictStrings\nwin32: QMAKE_CXXFLAGS -= -Zc:strictStrings\n</code></pre>\n\n<p>in .pro file. (Reference:<a href=\"http://stackoverflow.com/questions/46356364/while-compiling-qt5-9-with-vc2013-windows-10-getting-error-c2440-default\">StackOverflow</a>)</p>\n\n<p>Please find the snippet from my project file below:</p>\n\n<pre><code>QT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = qt_Trial_Test\nTEMPLATE = app\n\n\nSOURCES += main.cpp\\\n     mainwindow.cpp\n\nwin32: QMAKE_CXXFLAGS_RELEASE -= -Zc:strictStrings\nwin32: QMAKE_CFLAGS_RELEASE -= -Zc:strictStrings\nwin32: QMAKE_CFLAGS -= -Zc:strictStrings\nwin32: QMAKE_CXXFLAGS -= -Zc:strictStrings\n\n\nHEADERS  += mainwindow.h\n\nFORMS    += mainwindow.ui \n</code></pre>\n\n<p>But it's still not working. Please guide me towards the right solution.</p>\n\n<p>Snippet of mainwindow.cpp:</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\n#define _WIN32_DCOM\n#include &lt;iostream&gt;\nusing namespace std;\n#include &lt;comdef.h&gt;\n#include &lt;comutil.h&gt;\n#include &lt;Wbemidl.h&gt;\n\n\n#pragma comment(lib, \"wbemuuid.lib\")\n\n// Typical WMI Query For C++\n\n    void MainWindow::Wmic()\n    {\n    HRESULT hres;\n\n    // Step 1: --------------------------------------------------\n    // Initialize COM. ------------------------------------------\n\n    hres = CoInitializeEx(0, COINIT_MULTITHREADED);\n    if (FAILED(hres))\n    {\n        cout &lt;&lt; \"Failed to initialize COM library. Error code = 0x\"\n            &lt;&lt; hex &lt;&lt; hres &lt;&lt; endl;\n        //return 1;                  // Program has failed.\n    }\n\n    // Step 2: --------------------------------------------------\n    // Set general COM security levels --------------------------\n\n    hres = CoInitializeSecurity(\n        NULL,\n        -1,                          // COM authentication\n        NULL,                        // Authentication services\n        NULL,                        // Reserved\n        RPC_C_AUTHN_LEVEL_DEFAULT,   // Default authentication\n        RPC_C_IMP_LEVEL_IMPERSONATE, // Default Impersonation\n        NULL,                        // Authentication info\n        EOAC_NONE,                   // Additional capabilities\n        NULL                         // Reserved\n    );\n\n\n    if (FAILED(hres))\n    {\n        cout &lt;&lt; \"Failed to initialize security. Error code = 0x\"\n            &lt;&lt; hex &lt;&lt; hres &lt;&lt; endl;\n        CoUninitialize();\n        //return 1;                    // Program has failed.\n    }\n\n    // Step 3: ---------------------------------------------------\n    // Obtain the initial locator to WMI -------------------------\n\n    IWbemLocator *pLoc = NULL;\n\n    hres = CoCreateInstance(\n        CLSID_WbemLocator,\n        0,\n        CLSCTX_INPROC_SERVER,\n        IID_IWbemLocator, (LPVOID *)&amp;pLoc);\n\n    if (FAILED(hres))\n    {\n        cout &lt;&lt; \"Failed to create IWbemLocator object.\"\n            &lt;&lt; \" Err code = 0x\"\n            &lt;&lt; hex &lt;&lt; hres &lt;&lt; endl;\n        CoUninitialize();\n        //return 1;                 // Program has failed.\n    }\n\n    // Step 4: -----------------------------------------------------\n    // Connect to WMI through the IWbemLocator::ConnectServer method\n\n    IWbemServices *pSvc = NULL;\n\n    // Connect to the root\\cimv2 namespace with\n    // the current user and obtain pointer pSvc\n    // to make IWbemServices calls.\n    hres = pLoc-&gt;ConnectServer(\n        _bstr_t(L\"ROOT\\\\CIMV2\"), // Object path of WMI namespace\n        NULL,                    // User name. NULL = current user\n        NULL,                    // User password. NULL = current\n        0,                       // Locale. NULL indicates current\n        NULL,                    // Security flags.\n        0,                       // Authority (for example, Kerberos)\n        0,                       // Context object\n        &amp;pSvc                    // pointer to IWbemServices proxy\n    );\n\n    if (FAILED(hres))\n    {\n        cout &lt;&lt; \"Could not connect. Error code = 0x\"\n            &lt;&lt; hex &lt;&lt; hres &lt;&lt; endl;\n        pLoc-&gt;Release();\n        CoUninitialize();\n        //return 1;                // Program has failed.\n    }\n\n    cout &lt;&lt; \"Connected to ROOT\\\\CIMV2 WMI namespace\" &lt;&lt; endl;\n\n\n    // Step 5: --------------------------------------------------\n    // Set security levels on the proxy -------------------------\n\n    hres = CoSetProxyBlanket(\n        pSvc,                        // Indicates the proxy to set\n        RPC_C_AUTHN_WINNT,           // RPC_C_AUTHN_xxx\n        RPC_C_AUTHZ_NONE,            // RPC_C_AUTHZ_xxx\n        NULL,                        // Server principal name\n        RPC_C_AUTHN_LEVEL_CALL,      // RPC_C_AUTHN_LEVEL_xxx\n        RPC_C_IMP_LEVEL_IMPERSONATE, // RPC_C_IMP_LEVEL_xxx\n        NULL,                        // client identity\n        EOAC_NONE                    // proxy capabilities\n    );\n\n    if (FAILED(hres))\n    {\n        cout &lt;&lt; \"Could not set proxy blanket. Error code = 0x\"\n            &lt;&lt; hex &lt;&lt; hres &lt;&lt; endl;\n        pSvc-&gt;Release();\n        pLoc-&gt;Release();\n        CoUninitialize();\n        //return 1;               // Program has failed.\n    }\n\n    // Step 6: --------------------------------------------------\n    // Use the IWbemServices pointer to make requests of WMI ----\n\n    // For example, get the name of the operating system\n    IEnumWbemClassObject* pEnumerator = NULL;\n    hres = pSvc-&gt;ExecQuery(\n        bstr_t(\"WQL\"),\n        bstr_t(\"SELECT * FROM Win32_DiskDrive WHERE InterfaceType != 'USB'\"),\n        WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY,\n        NULL,\n        &amp;pEnumerator);\n\n    if (FAILED(hres))\n    {\n        cout &lt;&lt; \"Query for operating system name failed.\"\n            &lt;&lt; \" Error code = 0x\"\n            &lt;&lt; hex &lt;&lt; hres &lt;&lt; endl;\n        pSvc-&gt;Release();\n        pLoc-&gt;Release();\n        CoUninitialize();\n        //return 1;               // Program has failed.\n    }\n\n    // Step 7: -------------------------------------------------\n    // Get the data from the query in step 6 -------------------\n\n    IWbemClassObject *pclsObj = NULL;\n    ULONG uReturn = 0;\n\n    while (pEnumerator)\n    {\n        HRESULT hr = pEnumerator-&gt;Next(WBEM_INFINITE, 1,\n            &amp;pclsObj, &amp;uReturn);\n\n        if (0 == uReturn)\n        {\n            break;\n        }\n\n        VARIANT vtProp;\n\n        /************************************************/\n        wchar_t temp[1024];\n        /************************************************/\n\n        // Get the value of the Name property\n        hr = pclsObj-&gt;Get(L\"InterfaceType\", 0, &amp;vtProp, 0, 0);\n        //wcout &lt;&lt; \" Interface Type : \" &lt;&lt; vtProp.bstrVal &lt;&lt; endl;\n        VariantClear(&amp;vtProp);\n        hr = pclsObj-&gt;Get(L\"Caption\", 0, &amp;vtProp, 0, 0);\n        //wcout &lt;&lt; \" Caption : \" &lt;&lt; vtProp.bstrVal &lt;&lt; endl;\n        VariantClear(&amp;vtProp);\n        hr = pclsObj-&gt;Get(L\"DeviceID\", 0, &amp;vtProp, 0, 0);\n        //wcout &lt;&lt; \" Device ID : \" &lt;&lt; vtProp.bstrVal &lt;&lt; endl;\n        QString convertedBSTR((QChar*) vtProp.bstrVal, wcslen(vtProp.bstrVal));\n        ui-&gt;textEdit_3-&gt;setText(convertedBSTR);\n        //ui-&gt;textEdit_3-&gt;setText((const char*)_bstr_t(V_BSTR(&amp;vtProp.bstrVal)));\n        ui-&gt;textEdit_3-&gt;append(\": \\n\");\n        /***************************************************/\n        wcscpy(temp, vtProp.bstrVal);\n        /***************************************************/\n        VariantClear(&amp;vtProp);\n\n        wstring ws(temp);\n        // your new String\n        string query(ws.begin(), ws.end());\n\n        query = \"ASSOCIATORS OF {Win32_DiskDrive.DeviceID='\" + query + \"'} WHERE AssocClass = Win32_DiskDriveToDiskPartition\";\n\n        IEnumWbemClassObject* pEnumerator1 = NULL;\n        hres = pSvc-&gt;ExecQuery(bstr_t(\"WQL\"),bstr_t(query.c_str()),\n            WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY,\n            NULL, &amp;pEnumerator1);\n\n        if (FAILED(hres))\n        {\n            cout &lt;&lt; \"Query for Disk Partition failed.\"\n                &lt;&lt; \" Error code = 0x\"\n                &lt;&lt; hex &lt;&lt; hres &lt;&lt; endl;\n            pSvc-&gt;Release();\n            pLoc-&gt;Release();\n            CoUninitialize();\n            //return 1;               // Program has failed.\n        }\n\n        IWbemClassObject *pclsObj1;\n        ULONG uReturn1 = 0;\n\n        while (pEnumerator1)\n        {\n            HRESULT hr1 = pEnumerator1-&gt;Next(WBEM_INFINITE, 1, &amp;pclsObj1, &amp;uReturn1);\n            if (0 == uReturn1)\n            {\n                break;\n            }\n\n            VARIANT vtProp1;\n            wchar_t temp1[1024];\n\n            hr1 = pclsObj1-&gt;Get(L\"DeviceID\", 0, &amp;vtProp1, 0, 0);\n            //wcout &lt;&lt; \" Device ID : \" &lt;&lt; vtProp1.bstrVal &lt;&lt; endl;\n            wcscpy(temp1, vtProp1.bstrVal);\n            VariantClear(&amp;vtProp1);\n            wstring ws(temp1);\n            // your new String\n            string query1(ws.begin(), ws.end());\n\n            query1 = \"ASSOCIATORS OF {Win32_DiskPartition.DeviceID='\" + query1 + \"'} WHERE AssocClass = Win32_LogicalDiskToPartition\";\n\n\n\n            IEnumWbemClassObject* pEnumerator2 = NULL;\n\n            hres = pSvc-&gt;ExecQuery(bstr_t(\"WQL\"),\n                bstr_t(query1.c_str()), WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY,\n                NULL, &amp;pEnumerator2);\n            if (FAILED(hres))\n            {\n                cout &lt;&lt; \"Query for Logical Disk failed.\"\n                    &lt;&lt; \" Error code = 0x\"\n                    &lt;&lt; hex &lt;&lt; hres &lt;&lt; endl;\n                pSvc-&gt;Release();\n                pLoc-&gt;Release();\n                CoUninitialize();\n                //return 1;               // Program has failed.\n            }\n            IWbemClassObject *pclsObj2;\n            ULONG uReturn2 = 0;\n\n            while (pEnumerator2)\n            {\n                HRESULT hr2 = pEnumerator2-&gt;Next(WBEM_INFINITE, 1,\n                    &amp;pclsObj2, &amp;uReturn2);\n\n                if (0 == uReturn2)\n                {\n                    break;\n                }\n\n                VARIANT vtProp2;\n                wchar_t temp2[1024];\n\n                hr2 = pclsObj2-&gt;Get(L\"Caption\", 0, &amp;vtProp2, 0, 0);\n                QString convertedBSTR((QChar*) vtProp2.bstrVal, wcslen(vtProp2.bstrVal));\n                ui-&gt;textEdit_3-&gt;append(convertedBSTR);\n                //ui-&gt;textEdit_3-&gt;append((const char*)_bstr_t(V_BSTR(&amp;vtProp2.bstrVal)));\n                ui-&gt;textEdit_3-&gt;append(\"\\t\");\n                //wcout &lt;&lt; \" Caption : \" &lt;&lt; vtProp2.bstrVal &lt;&lt; endl;\n                wcscpy(temp2, vtProp2.bstrVal);\n                VariantClear(&amp;vtProp2);\n                pclsObj2-&gt;Release();\n            }\n            pclsObj1-&gt;Release();\n        }\n    ui-&gt;textEdit_3-&gt;append(\"\\n\");\n    pclsObj-&gt;Release();\n}\n\n// Cleanup\n// ========\n\npSvc-&gt;Release();\npLoc-&gt;Release();\npEnumerator-&gt;Release();\nCoUninitialize();\n// Program successfully completed.\n}\n\n\nvoid MainWindow::on_pushButton_clicked()\n{\n   Wmic();\n}\n</code></pre>\n"}, {"tags": ["c++", "for-loop"], "comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 12, "creation_date": 1539779554, "post_id": 52854929, "comment_id": 92625027, "body": "The best would be to talk to your teacher directly ;)"}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 9, "creation_date": 1539779633, "post_id": 52854929, "comment_id": 92625082, "body": "You may do it secretly without telling your teacher..."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 8, "creation_date": 1539779733, "post_id": 52854929, "comment_id": 92625142, "body": "<code>for</code> loop is a tool. You should use a tool that is a best fit for a given task. There is no tool, that fits every possible task."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1539779804, "post_id": 52854929, "comment_id": 92625185, "body": "Btw. I personally know that iterator usage could be useful to abstract from a concrete container - especially in templates. But, I (as well) do not see why <code>for (std::vector&lt;double&gt;::iterator iter = std::begin(values); iter != std::end(values); ++iter) { }</code> is better to read than <code>for (size_t i = 0, n = values.size(); i &lt; n; ++i) { }</code> but that&#39;s IMHO a matter of taste."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 5, "creation_date": 1539779906, "post_id": 52854929, "comment_id": 92625243, "body": "@Scheff but surely, <code>for (double d : values)</code> is easier to read?"}, {"owner": {"reputation": 2597, "user_id": 3032364, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zN0X3.jpg?s=128&g=1", "display_name": "Gsk", "link": "https://stackoverflow.com/users/3032364/gsk"}, "edited": false, "score": 2, "creation_date": 1539779912, "post_id": 52854929, "comment_id": 92625248, "body": "Your question is really interesting but too broad for StackOverflow. BTW, I think that the concept that your teacher wanted to get through is that STL has many optimized process already integrated, and you should try to use them when possible; discouraging the usage of <code>for</code> loop is contradictory, since most of the STL algorithms uses <code>for</code> loops"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1539779943, "post_id": 52854929, "comment_id": 92625264, "body": "It&#39;s about being generic.  A raw loop like that only works with certain data structures.  The standard algorithms will work with anything that has a begin and end iterator as long as the iterator supports how the algorithm works (<code>std::sort</code> needs a random access iterator while <code>std::count</code> only needs a input iterator).  Most likely your example could also be done the same way, it just needs another layer of abstraction."}, {"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 0, "creation_date": 1539779964, "post_id": 52854929, "comment_id": 92625277, "body": "What you <i>really</i> want, 99% of the time, is the <a href=\"https://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">range-based for loop</a>, which handles the entire iterator rigmarole for you."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1539779993, "post_id": 52854929, "comment_id": 92625305, "body": "It may be for the same reasons that a <code>for</code> over a <code>range</code> is frowned upon in Python. I&#39;ve seen many discussions on that point."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1539780001, "post_id": 52854929, "comment_id": 92625312, "body": "@user2079303 Yepp, range loops are fancy and cool - I agree. Too bad if you have two vectors to loop through concurrently. I&#39;ve read that there are even fancier range things for this but I do not yet dare them to apply in my productive work..."}, {"owner": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "edited": false, "score": 1, "creation_date": 1539780131, "post_id": 52854929, "comment_id": 92625395, "body": "Wanted to answer, but then realized that it would mostly be about paraphrasing what Sean Parent said in his amazing <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/Cpp-Seasoning\" rel=\"nofollow noreferrer\">C++ Seasoning talk</a>. It deals with this topic at the beginning of his talk, but I encourage you to watch the whole thing. TL;DW: it&#39;s less error prone and more expressive to go for an std algorithm than a raw loop when possible."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539780218, "post_id": 52854929, "comment_id": 92625454, "body": "you can use <code>auto</code> as iterator type . Approach you&#39;re talkin about makes sense when readin someone&#39;s code."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1539781106, "post_id": 52854929, "comment_id": 92626021, "body": "@Scheff: Two-iterator loops are often a sign that you might want <code>std::transform</code>, if not a more specific algorithm."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1539781375, "post_id": 52854929, "comment_id": 92626202, "body": "@MSalters I&#39;m not sure if <code>std::transform</code> is the panacea for this in any case. I meant something like iterating through a vector of properties (by index) and connecting each to a signal handler for which connection is stored in a corresponding vector (with identical index) or something like this... I&#39;m old-fashioned - I stick to index-for-loops (secretly). ;-)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1539781496, "post_id": 52854929, "comment_id": 92626278, "body": "most of the time when someone tells you that something is &quot;evil&quot; or that you should never use it, they are just too lazy to tell you the whole story. There is and there always will be uses of plain old for loops"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1539781586, "post_id": 52854929, "comment_id": 92626342, "body": "BTW, you should not avoid the loop, but you should avoid <code>std::vector&lt;int&gt; a = {0,1,2,3}; for(auto it = a.begin(); it != a.end(); it++ ) </code> ` it++` operator of the STL iterator and use <code>++it</code>, because operator <code>++it</code> simply increments memory address and returns same object, but operator <code>it++</code> returns new iterator object - this make performance and stack memory usage much worst. <a href=\"https://rads.stackoverflow.com/amzn/click/com/0201749629\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Scott Meyers Effective STL</a>To avoid this issue by mistake and make code more readable it is better to use algorithms or range based loops."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1539786513, "post_id": 52854929, "comment_id": 92629674, "body": "<i>everybody immediately knows what&#39;s going on</i> -- Not necessarily.  All the person really knows is that you&#39;re looping.  What the loop accomplishes, that requires further introspection.  Example, look at <a href=\"https://en.cppreference.com/w/cpp/algorithm/partition\" rel=\"nofollow noreferrer\">std::partition</a> and the &quot;Possible Implementation&quot; section.  If someone were to write that version and not tell you what it was doing, could you figure it out immediately as to what that loop was doing? However calling <code>std::partiton</code> gives an immediate clue as to what is done.   Maybe this is point that the teacher was trying to convey."}, {"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1613483697, "post_id": 52854929, "comment_id": 117084180, "body": "In professional software development loops and ifs and other branching statements should be omitted as much as possible. It will reduce complexity (for example the cyclomatic complexity) and  gives an easier code coverage. So, the needed loop coverage and branch coverage will be much easier to get. Test density in unit tests based on the above metrics can be reduced. So, a really good recommendation."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1619132016, "post_id": 52854929, "comment_id": 118819864, "body": "I agree with your teacher. Sure, sometimes you MUST use an indexed for loop, but it&#39;s always best avoided."}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1539780978, "post_id": 52855026, "comment_id": 92625925, "body": "The right limit is of course <code>!=n</code>. Don&#39;t overspecify your tests."}, {"owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 3, "creation_date": 1539781319, "post_id": 52855026, "comment_id": 92626166, "body": "@MSalters Not sure whether you&#39;re being sarcastic or not :)"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 3, "creation_date": 1539782295, "post_id": 52855026, "comment_id": 92626787, "body": "@MSalters I disagree. <code>for(int i = 0; i &lt; n; i++)</code> yields correct behavior when <code>n</code> happens to be negative, <code>for(int i = 0; i != n; i++)</code> will happily try to iterate over all positive integers, invoking undefined behavior."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1539782999, "post_id": 52855026, "comment_id": 92627265, "body": "@cmaster: &quot;If <code>n</code> happens to be negative&quot; there&#39;s a bug, and I&#39;m not even sure what the correct behavior should be. If the intent was to loop from 0 down to n, the correct solution would be <code>--i</code>. If the intent was to loop from n to 0, the correct solution would be <code>for (int i = n; i !=0; ++i)</code>. Looping over zero elements when the begin isn&#39;t equal to the end cannot be right in my book. Besides, <code>n</code> in this context is the number of elements, which <b>by definition</b> is not negative."}, {"owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 2, "creation_date": 1539783215, "post_id": 52855026, "comment_id": 92627406, "body": "@MSalters What about loops with steps different than <code>+- 1</code>?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1539783571, "post_id": 52855026, "comment_id": 92627663, "body": "@NiVeR: &quot;Don&#39;t overspecify your tests&quot; still holds. If you know the step size is 2 and N must be even, then don&#39;t overspecify your tests. E.g. <code>for (int i = 0; i != 20; i+=2)</code> - it&#39;s clear that 20 must be even, since it&#39;s a literal. As a reader seeing <code>&lt;20</code>, I have to worry where the hidden change to <code>i</code> is that justified the overspecification."}, {"owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1539783719, "post_id": 52855026, "comment_id": 92627756, "body": "@MSalters You are right, but let&#39;s compare the level of attention needed to not make mistake when writing <code>&lt; n</code> vs <code>!=n</code>. Is it the same according to you? Also, compare the probability that one of  those will create bugs. Is it the same? To me it makes difference."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1539784449, "post_id": 52855026, "comment_id": 92628244, "body": "@MSalters So if I don&#39;t know the size beforehand, I need to find the next even integer first? That&#39;s not even close to the readability of <code>&lt; container.size()</code>..."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1539784812, "post_id": 52855026, "comment_id": 92628502, "body": "@MaxLanghof: Read that comment again - &quot;if N <b>must be even</b>&quot;. If your container by external constraint always have even size, e.g. because it stores alternating real and imaginary parts of a complex number, then there&#39;s no need to find the next even integer. E.g. after an FFT, picking the real parts of the FFT. And if your container size is odd, using <code>i+=2</code> is already a bit suspect. What about that lass unpaired item? That&#39;s my fundamental point: a <code>for (i=0; i! =N; ++i)</code> loop is simple. Anything else warrants extra attention. What specific trickery is going on?"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1539785316, "post_id": 52855026, "comment_id": 92628855, "body": "@MSalters It stands to reason that a range <code>[0, n)</code> with a negative <code>n</code> is empty (i.e. there is no <code>x</code> such that <code>0 &lt;= x &lt; n</code>). And it&#39;s at the very least <i>surprising</i>, if the code starts to iterate over <i>anything</i> if the given range is obviously empty. <b>Especially if the iterated-over values are not even in the range <code>[-n, 0]</code></b>, i.e. the loop iterates over <b>positive</b> indexes which are definitely not in range, no matter whic definition of range you are using. Using <code>i != n</code> as an upper limit test is thus a violation of the rule of least surprise. And a glaring one at that, if you ask me."}, {"owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "edited": false, "score": 0, "creation_date": 1539785860, "post_id": 52855026, "comment_id": 92629207, "body": "At least my answer is popular comment-wise :D"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1539787317, "post_id": 52855026, "comment_id": 92630212, "body": "The STL algorithms may be optimized by the compiler vendor and easier to translate."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539788081, "post_id": 52855026, "comment_id": 92630687, "body": "@cmaster it stands to reason that a range <code>[0, n)</code> with a negative <code>n</code> is <i>meaningless</i>, which is not the same as empty."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1539805141, "post_id": 52855026, "comment_id": 92639214, "body": "@Caleth Whether it&#39;s meaningless or not, it definitely does not include positive numbers. Code that starts working on positive numbers when given <code>[0, n)</code> with negative <code>n</code> surprises me. And I don&#39;t like being surprised by code."}], "tags": [], "owner": {"reputation": 8852, "user_id": 1383240, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/41093f55db0d5feaa0012ed6b5c3ca5c?s=128&d=identicon&r=PG&f=1", "display_name": "NiVeR", "link": "https://stackoverflow.com/users/1383240/niver"}, "is_accepted": false, "score": 1, "last_activity_date": 1539779792, "creation_date": 1539779792, "answer_id": 52855026, "question_id": 52854929, "link": "https://stackoverflow.com/questions/52854929/avoidance-of-for-loops-in-c-but-why/52855026#52855026", "title": "Avoidance of for loops in C++. but why?", "body": "<p>The only possible reason that I can think of to explain such claim is that it is more error prone w.r.t to iterating containers for instance. By doing index handling yourself, it will happen that in some cases you will make some mistake of the types:</p>\n\n<ul>\n<li>Start index. Should it be <code>0</code> or <code>1</code>?</li>\n<li>What is the right limit? <code>&lt;= n</code> or <code>&lt; n</code>?</li>\n</ul>\n\n<p>But still, IMO, is not sufficient for doing such a claim against this construct.</p>\n"}, {"tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": false, "score": 1, "last_activity_date": 1539780725, "creation_date": 1539780725, "answer_id": 52855327, "question_id": 52854929, "link": "https://stackoverflow.com/questions/52854929/avoidance-of-for-loops-in-c-but-why/52855327#52855327", "title": "Avoidance of for loops in C++. but why?", "body": "<p>Basically, it reduces the chance of developer errors and added overhead.<br>\nSecond, iterators are generic and <code>for</code> with iterators is written in the same manner for every container type.<br>\nThis is important when the container can be changed.<br>\nThink about how well will your for loop, that was written for vector, will handle a linked list.  </p>\n\n<p>Also from the commercial point of view, it is better to use standard API's because they are tested and should work.<br>\nSo, in fact, there can be only positive outcomes if you chose to do it as your teacher says.</p>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 12, "last_activity_date": 1539781386, "last_edit_date": 1539781386, "creation_date": 1539781071, "answer_id": 52855438, "question_id": 52854929, "link": "https://stackoverflow.com/questions/52854929/avoidance-of-for-loops-in-c-but-why/52855438#52855438", "title": "Avoidance of for loops in C++. but why?", "body": "<p>When there is an existing <code>std</code> algorithm, it is almost always better to use it. Searching, sorting, removing duplicates, finding the maximum (or n-th largest) and so on are common operations and boil down to one-liners. These tools in the <a href=\"https://en.cppreference.com/w/cpp/algorithm\" rel=\"noreferrer\">algorithm header</a> are great, and should definitely be preferred over \"raw\" loops.</p>\n\n<p>There are many tasks that simply cannot be expressed efficiently and/or elegantly with these existing functions (e.g. looping over multiple containers at once). That might change with <code>ranges</code> becoming available/mature, but there is still a lot of way left there.</p>\n\n<p>But there is also an undeniable bunch of things you commonly want to do that is most cleanly expressed with index-based loops. Notably, if your element operation <em>involves</em> the index (e.g. printing it, or cross-referencing a completely different data structure, etc.) then using range-for or existing algorithms is very cumbersome because you have to extract the index first (and zipping your range with <code>iota</code> is not really more readable).</p>\n\n<p>In the end, these are all tools. A good programmer tries to choose the most appropriate tool for a given task instead of following dogmas.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1539781243, "post_id": 52855448, "comment_id": 92626116, "body": "Prefer <code>auto&amp;&amp; value</code> instead just in case this generalises to a case where <code>values</code> is a collection of SQL server databases."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 4, "creation_date": 1539781319, "post_id": 52855448, "comment_id": 92626167, "body": "@Bathsheba ...in case you ever need to filter out the odd server database, of course ;)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1539781499, "post_id": 52855448, "comment_id": 92626282, "body": ";-)\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539781533, "post_id": 52855448, "comment_id": 92626305, "body": "This is true for the cases where there is already a suitable <code>std::</code> &quot;algorithm&quot; that matches exactly what you are doing. However, real-world programming problems often have some small quirk that renders <code>std::</code> &quot;algorithms&quot; rather useless."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1539781680, "post_id": 52855448, "comment_id": 92626399, "body": "@cmaster the <b>main</b> stumbling block I come across with the current state of <code>&lt;algorithm&gt;</code> is that it doesn&#39;t allow you to <i>compose</i> operations. The ranges proposal solves this, you just need to keep a toolbox of adaptor <code>view</code>s"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1539781994, "post_id": 52855448, "comment_id": 92626607, "body": "@cmaster and if you truly have something novel, remember that <code>&lt;algorithm&gt;</code> never intended to be an <i>exhastive</i> listing of algorithms, you are allowed to write your own"}, {"owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "edited": false, "score": 0, "creation_date": 1539782626, "post_id": 52855448, "comment_id": 92627012, "body": "except your code de-references an iterator that may be <code>end()</code>, and thus your code is worse than the loop in it&#39;s current form."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "edited": false, "score": 0, "creation_date": 1539782756, "post_id": 52855448, "comment_id": 92627112, "body": "@midor if <code>val</code> is used, <i>both</i> of those examples have UB if there are no even numbers in <code>values</code>. That is intentional"}, {"owner": {"reputation": 50650, "user_id": 3182664, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/2s35X.png?s=128&g=1", "display_name": "Marco13", "link": "https://stackoverflow.com/users/3182664/marco13"}, "edited": false, "score": 0, "creation_date": 1539800258, "post_id": 52855448, "comment_id": 92636939, "body": "I considered voting for reopen, but this answer convinced me that there indeed are too many opinions involved. You could inline the <code>isEven</code>, rendering the algorithm version unreadable - at least unreadable compared to the option of pulling the loop into a function. This could be a good advice for <b>both</b> cases, though: If you want to <code>findTheFirstEvenNumberIn(someVector)</code>, then it&#39;s nice if you can write exactly that. (There are maaany, reasons to use <code>algorithm</code>, <b>very</b> profound technical one that go far beyond readability - but it&#39;s hard to summarize them for a proper answer...)"}, {"owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "edited": false, "score": 0, "creation_date": 1540235414, "post_id": 52855448, "comment_id": 92781461, "body": "The original example did not use val, so it was not UB. Nevertheless your first piece of code already has undefined behavior in the line <code>auto val = *....</code>. You MUST check, if the returned iterator is equal to <code>end</code> before dereferencing it. Whether you use <code>val</code> or not, omitting this check leads to a potential deref of <code>end</code>, which is UB for all iterators I know. The line that derefs the result of find immediately is just bad code, and should not be on a page where people copy-paste from a lot."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "edited": false, "score": 0, "creation_date": 1540249733, "post_id": 52855448, "comment_id": 92786795, "body": "@midor &quot;Given <code>std::vector&lt;int&gt; values { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };</code>&quot; -&gt; In this example we have outside knowledge there are even values. And if it were miss-applied, both variations are <b>equally</b> UB. There&#39;s no distinction of &quot;UB before&quot; given UB can <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20140627-00/?p=633\" rel=\"nofollow noreferrer\">travel through time</a>"}, {"owner": {"reputation": 4916, "user_id": 3991400, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5049bb61601c16ae408f5a56b5ed2518?s=128&d=identicon&r=PG&f=1", "display_name": "midor", "link": "https://stackoverflow.com/users/3991400/midor"}, "edited": false, "score": 0, "creation_date": 1540671181, "post_id": 52855448, "comment_id": 92953559, "body": "Yes, in your piece of code this works out, but generally <code>*std::find(...)</code> is almost always a mistake, and people copy-paste a lot from this site, so it would be better not to post unsafe code."}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 10, "last_activity_date": 1539782872, "last_edit_date": 1539782872, "creation_date": 1539781094, "answer_id": 52855448, "question_id": 52854929, "link": "https://stackoverflow.com/questions/52854929/avoidance-of-for-loops-in-c-but-why/52855448#52855448", "title": "Avoidance of for loops in C++. but why?", "body": "<p>At a guess, your teacher does not like <code>for</code> for <em>exactly</em> the reasons you love it: </p>\n\n<h2>It does everything.</h2>\n\n<p>Given <code>std::vector&lt;int&gt; values { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };</code></p>\n\n<p>Compare:</p>\n\n<pre><code>auto isEven = [](int i) { return (i % 2) == 0; };\nauto val = *std::find_if(values.begin(), values.end(), isEven);\nstd::cout &lt;&lt; val &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>To </p>\n\n<pre><code>int val;\nfor (auto &amp;&amp; value : values)\n{\n     if ((value % 2) == 0)\n     {\n         val = value;\n         break;\n     }\n}\nstd::cout &lt;&lt; val &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>You immediately see <em>which operation</em> is occurring (<code>std::find_if</code>), and the salient details are prominent (the name <code>isEven</code> is a parameter)</p>\n"}, {"tags": [], "owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "is_accepted": false, "score": 5, "last_activity_date": 1539805924, "last_edit_date": 1539805924, "creation_date": 1539781277, "answer_id": 52855511, "question_id": 52854929, "link": "https://stackoverflow.com/questions/52854929/avoidance-of-for-loops-in-c-but-why/52855511#52855511", "title": "Avoidance of for loops in C++. but why?", "body": "<p>In addition to avoiding possible errors, minimizing loop variables, and optimizing loop construction, using standard algorithms has the advantage of <strong>communicating intent</strong> more than a generic loop does. This is their chief advantage in my view. It thus adheres to the dictum, \"Write code for your readers, not for the compiler or just to get the right answer.\"</p>\n\n<p>For instance, if you see <code>std::rotate()</code>, <code>std::count_if()</code>, <code>std::transform()</code>, or <code>std::find_if()</code>, you know the pattern of what is going on immediately without needing to read the code (assuming you have learned your algorithm header).</p>\n\n<p>That being said, I still prefer range-for loops to <code>std::for_each()</code> for clarity since they both do the same thing -- visit each item and perform some operation -- and the former is a bit less clunky. However, if the for-loop is performing some operation captured well by a standard algorithm (say, copying or transforming), then I would generally -- without being Procrustean about it -- prefer the standard version.</p>\n\n<p>For more on this theme, see Sean Parent's semi-famous <a href=\"https://channel9.msdn.com/Events/GoingNative/2013/Cpp-Seasoning\" rel=\"nofollow noreferrer\">C++ Seasoning talk</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "is_accepted": false, "score": 2, "last_activity_date": 1539781402, "creation_date": 1539781402, "answer_id": 52855548, "question_id": 52854929, "link": "https://stackoverflow.com/questions/52854929/avoidance-of-for-loops-in-c-but-why/52855548#52855548", "title": "Avoidance of for loops in C++. but why?", "body": "<p>Range loops are way more readable than old-style loops, because you know you're looping over the whole array. Also algorithms are more readable than normal loops, because the name of the function gives away what's going on. The rule of thumb is: If you can do it in an algorithm or range loop, then do it there.</p>\n\n<p>Having said that, there are cases when there's no way of using such helpers. For example, if your loop modifies the array (by erasing elements, for example), or if you don't need to loop over the whole array.</p>\n\n<p>C++ style is all about <strong>safe coding habits</strong>. People always say it's easy to shoot yourself in the foot with C++. However, I believe that mostly this happens because people deal with C++ as if they're dealing with java or python or some language that guarantees all kinds of safety. In these languages, for example, an out of range element will throw an exception, which can be caught by the dev easily. In C++, an out of range access in release mode can cause a range of catastrophic problems that include segmentation fault, access violation, and reading garbage memory. If you use range loops and algorithms, it's less likely for these to happen. This is what all this is about.</p>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1539781762, "post_id": 52855620, "comment_id": 92626456, "body": "nice answer, ironically beginners are thaught for loops long before they see their first algorithm"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 5, "last_activity_date": 1539784530, "last_edit_date": 1539784530, "creation_date": 1539781608, "answer_id": 52855620, "question_id": 52854929, "link": "https://stackoverflow.com/questions/52854929/avoidance-of-for-loops-in-c-but-why/52855620#52855620", "title": "Avoidance of for loops in C++. but why?", "body": "<blockquote>\n  <p>Why should I not use this amazing construct?</p>\n</blockquote>\n\n<p>You shouldn't necessarily use it <em>always</em>, because in many use cases there are alternatives which are arguably better.</p>\n\n<p>Let's consider that you want to initialize a vector (created by someone else) to [1,2,3,...,N]. Let's say a beginner decides to use the amazing for loop:</p>\n\n<pre><code>// let there be\nstd::vector seq(N);\n\n// our code\nfor (int i = 1; i &lt;= N; i++)\n    seq[i] = i;\n</code></pre>\n\n<p>Very concise and very compact. Except, the beginner made a mistake and as a result, the program has undefined behaviour. While it is obvious to us grizzled veterans of C++, it is not obvious to beginners that valid indices of a vector end at <code>N - 1</code>. And what's worse, in C++ you're not guaranteed to get a nice error about accessing a bad index (Unless you use <code>vector::at</code>, but that's slower so hardly anyone uses it. Even beginners want speed).</p>\n\n<p>Now, let's assume that the beginner was diligent and used the correct form</p>\n\n<pre><code>for (int i = 0; i &lt; N; i++)\n    seq[i] = i + 1;\n</code></pre>\n\n<p>Now, it is correct. Yay! But what if that someone else decides that a vector isn't appropriate. They need a list instead:</p>\n\n<pre><code>// let there be\nstd::list seq(N);\n</code></pre>\n\n<p>Oh no! They have broken our loop! <code>std::list</code> doesn't have <code>operator[]</code>.</p>\n\n<p>Compare this to using <code>std::iota</code></p>\n\n<pre><code>std::iota(std::begin(seq), std::end(seq), 1);\n</code></pre>\n\n<p>The code is obviously correct. It's harder for the beginner to inject UB into that call unknowingly. You don't need to prove that vector has sufficient size, you don't need to know the type of <code>seq</code> other than it provides forward iterators. As a bonus, it is even more concise.</p>\n\n<hr>\n\n<blockquote>\n  <p>it's well-known, everybody immediately knows what's going on</p>\n</blockquote>\n\n<p>There are programming languages with 1-based indices, and 0-based indices are counter-intuitive to beginner programmers. Some beginners may be fooled to think that they know what's going on, when they don't.</p>\n\n<p>Range based loops are also well-known. It's 7 years now since they were introduced to the language, and <em>many</em> other languages have them as well, including Java, Python, PHP to name a few popular ones.</p>\n\n<hr>\n\n<blockquote>\n  <p>For example, if I need to iterate over a whole bunch of array-like containers, and I need an index to access elements, the regular for loop provides me that index. Using STL algorithms is almost impossibe, and using iterators is also cumbersome since I need boost and zip.</p>\n</blockquote>\n\n<p>Your example is solid, although you don't <em>need</em> boost specifically (but it is a good choice) and <em>almost impossible</em> is an overstatement. Iterating parallel iterator ranges is indeed a bit convoluted, and if you have the option of using an old fashioned index-loop, it can arguably be more readable than using iterators.</p>\n\n<p>It is cases like this why I would argue that <em>never</em> using indexed for loop is not a sensible advice (your teacher did also permit that they should be used <em>rarely</em>).</p>\n"}], "owner": {"reputation": 315, "user_id": 9457943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aec7d250ad3ae4b40ab5a5ef3a6ca26?s=128&d=identicon&r=PG&f=1", "display_name": "Make", "link": "https://stackoverflow.com/users/9457943/make"}, "delete_vote_count": 3, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1507, "favorite_count": 2, "closed_date": 1539783025, "answer_count": 7, "score": 8, "last_activity_date": 1539805924, "creation_date": 1539779455, "question_id": 52854929, "link": "https://stackoverflow.com/questions/52854929/avoidance-of-for-loops-in-c-but-why", "closed_reason": "Opinion-based", "title": "Avoidance of for loops in C++. but why?", "body": "<p>My teacher made this speech  today about how you should never/rarely use for loops in C++, and instead use STL algorithms. He also says that <em>if</em> I do need to use a for loop, make sure it's using iterators or a range-based for loop. </p>\n\n<p>Then he went on to diss on the regular for loop:</p>\n\n<pre><code>for (int i = 0; i &lt; N; ++i) ...\n</code></pre>\n\n<p>saying that this should practically never be used.</p>\n\n<p>Now I am writing some code, and the regular for loop is simply a life-saver. It's applicable in so many situations, it's simple and short, it's well-known, everybody immediately knows what's going on, and it gets the job done pretty fast (this is C++, not Python!). Further, it's also very clear when implementing math algorithms since those algorithms are <em>described</em> with an index ... not with an STL algorithm or an iterator. So using a regular for-loop matches that style.</p>\n\n<p>What's more, not only does it have all those benefits, but I will even argue that in some cases, it's the <em>only</em> option. There are no alternatives. At least not practically speaking.</p>\n\n<p>For example, if I need to iterate over a whole bunch of array-like containers, and I need an index to access elements, the regular for loop provides me that index. Using STL algorithms is almost impossibe, and using iterators is also cumbersome since I need boost and zip.</p>\n\n<p>Why should I not use this amazing construct?</p>\n"}, {"tags": ["c#", "c++", "visual-studio", "unity3d"], "comments": [{"owner": {"reputation": 12418, "user_id": 214296, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/268966bdb84008bef79268f0a45b533e?s=128&d=identicon&r=PG", "display_name": "Jim Fell", "link": "https://stackoverflow.com/users/214296/jim-fell"}, "edited": false, "score": 0, "creation_date": 1539778841, "post_id": 52854676, "comment_id": 92624608, "body": "It sounds like your installation may be corrupted.  Have you tried uninstalling, and then reinstalling VS2017?"}, {"owner": {"reputation": 61, "user_id": 9785450, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Muhammad Nihad", "link": "https://stackoverflow.com/users/9785450/muhammad-nihad"}, "reply_to_user": {"reputation": 12418, "user_id": 214296, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/268966bdb84008bef79268f0a45b533e?s=128&d=identicon&r=PG", "display_name": "Jim Fell", "link": "https://stackoverflow.com/users/214296/jim-fell"}, "edited": false, "score": 0, "creation_date": 1539778933, "post_id": 52854676, "comment_id": 92624659, "body": "Not since I installed it first time (months ago) @JimFell but the problem is new"}, {"owner": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 0, "creation_date": 1539779658, "post_id": 52854676, "comment_id": 92625091, "body": "Please tell us the name of the executable that is running in each of these terminal windows."}, {"owner": {"reputation": 61, "user_id": 9785450, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Muhammad Nihad", "link": "https://stackoverflow.com/users/9785450/muhammad-nihad"}, "reply_to_user": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 0, "creation_date": 1539780226, "post_id": 52854676, "comment_id": 92625460, "body": "Would you, please clarify what do you mean? @spender"}, {"owner": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 0, "creation_date": 1539780307, "post_id": 52854676, "comment_id": 92625498, "body": "VS is spawning programs. They open in console windows. You should find out which program is running in these windows. There will probably be 10-20 similar entries in task manager that you could look at."}, {"owner": {"reputation": 12418, "user_id": 214296, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/268966bdb84008bef79268f0a45b533e?s=128&d=identicon&r=PG", "display_name": "Jim Fell", "link": "https://stackoverflow.com/users/214296/jim-fell"}, "edited": false, "score": 0, "creation_date": 1539780334, "post_id": 52854676, "comment_id": 92625521, "body": "@MuhammadNihad If the name can&#39;t be read from the title bar in the popup windows you are getting, you can use the Process Explorer utility from Microsoft. <a href=\"https://docs.microsoft.com/en-us/sysinternals/downloads/process-explorer\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/sysinternals/downloads/&hellip;</a>"}, {"owner": {"reputation": 61, "user_id": 9785450, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Muhammad Nihad", "link": "https://stackoverflow.com/users/9785450/muhammad-nihad"}, "edited": false, "score": 0, "creation_date": 1539781131, "post_id": 52854676, "comment_id": 92626040, "body": "oh, it is gServiceHub.Host.Node.x86.exe *32   or D:\\Program Files 2\\Microsoft Visual Studio\\2017\\Community\\Common7\\ServiceHub\\Hosts\\ServiceHub.Ho&zwnj;&#8203;st.Node.x86\\gService&zwnj;&#8203;Hub.Host.Node.x86.ex&zwnj;&#8203;e"}], "answers": [{"comments": [{"owner": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 2, "creation_date": 1539779596, "post_id": 52854870, "comment_id": 92625052, "body": "&quot;Is it on c drive? Yes? Install it on c drive&quot; doesn&#39;t make sense."}, {"owner": {"reputation": 61, "user_id": 9785450, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Muhammad Nihad", "link": "https://stackoverflow.com/users/9785450/muhammad-nihad"}, "edited": false, "score": 0, "creation_date": 1539779607, "post_id": 52854870, "comment_id": 92625061, "body": "My OS is installed on C but Visual Studio is not, it is installed on D instead, but -as you know- some files will be written on C anyway.... So do you mean that I have to remove and reinstall Visual studio on C?!"}, {"owner": {"reputation": 12418, "user_id": 214296, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/268966bdb84008bef79268f0a45b533e?s=128&d=identicon&r=PG", "display_name": "Jim Fell", "link": "https://stackoverflow.com/users/214296/jim-fell"}, "reply_to_user": {"reputation": 61, "user_id": 9785450, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Muhammad Nihad", "link": "https://stackoverflow.com/users/9785450/muhammad-nihad"}, "edited": false, "score": 0, "creation_date": 1539779946, "post_id": 52854870, "comment_id": 92625266, "body": "@MuhammadNihad That&#39;d probably be a good idea, to reinstall it on C.  Most IDEs I&#39;ve worked with are not very friendly running on alternate drives."}, {"owner": {"reputation": 21, "user_id": 8888734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7028cd27b665e940660a93e9686f3f?s=128&d=identicon&r=PG&f=1", "display_name": "Tugay Ersoy", "link": "https://stackoverflow.com/users/8888734/tugay-ersoy"}, "reply_to_user": {"reputation": 61, "user_id": 9785450, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Muhammad Nihad", "link": "https://stackoverflow.com/users/9785450/muhammad-nihad"}, "edited": false, "score": 0, "creation_date": 1539793779, "post_id": 52854870, "comment_id": 92633851, "body": "@MuhammadNihad yes"}, {"owner": {"reputation": 21, "user_id": 8888734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7028cd27b665e940660a93e9686f3f?s=128&d=identicon&r=PG&f=1", "display_name": "Tugay Ersoy", "link": "https://stackoverflow.com/users/8888734/tugay-ersoy"}, "reply_to_user": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 0, "creation_date": 1539793981, "post_id": 52854870, "comment_id": 92633963, "body": "@spender doesn&#39;t make sense for you but i had too much problems when vs installed on different disk"}], "tags": [], "owner": {"reputation": 21, "user_id": 8888734, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7028cd27b665e940660a93e9686f3f?s=128&d=identicon&r=PG&f=1", "display_name": "Tugay Ersoy", "link": "https://stackoverflow.com/users/8888734/tugay-ersoy"}, "is_accepted": false, "score": 2, "last_activity_date": 1539779232, "creation_date": 1539779232, "answer_id": 52854870, "question_id": 52854676, "link": "https://stackoverflow.com/questions/52854676/visual-studio-2017-stops-working-and-shows-many-console-windows-after-opening/52854870#52854870", "title": "Visual Studio 2017 stops working and shows many console windows after opening", "body": "<p>Is your OS installed on C disk?\nif your answer is yes,sometimes the visual studio can give such errors ;install your visual studio on c disk</p>\n"}], "owner": {"reputation": 61, "user_id": 9785450, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Muhammad Nihad", "link": "https://stackoverflow.com/users/9785450/muhammad-nihad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1539779232, "creation_date": 1539778541, "last_edit_date": 1539778878, "question_id": 52854676, "link": "https://stackoverflow.com/questions/52854676/visual-studio-2017-stops-working-and-shows-many-console-windows-after-opening", "title": "Visual Studio 2017 stops working and shows many console windows after opening", "body": "<p>When I open VS2017 it opens and then shows 10-20 command prompt windows then it stops working and responding..</p>\n\n<p>I used to use it for C++, but now, I use it with unity's C# scripts.\nIt was working until yesterday when I opened it and found it like this.\nI didn't play with the settings or the files of the program....</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ce3TU.png\" rel=\"nofollow noreferrer\">An Image for the problem</a></p>\n"}, {"tags": ["c++", "arrays", "copy-constructor"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 3, "creation_date": 1539778636, "post_id": 52854572, "comment_id": 92624485, "body": "<code>which is giving me errors</code> when you are given errors, the first step is to read the error messages."}, {"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1539778711, "post_id": 52854572, "comment_id": 92624520, "body": "Read the errors, observe the errors, know the errors, debug the errors and rectify the errors... But it seems that we got none of them from the question..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10518366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af052b27bde3ef35c40def9cf66ea0e3?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/10518366/anon"}, "edited": false, "score": 0, "creation_date": 1539779017, "post_id": 52854725, "comment_id": 92624716, "body": "forgot to mention that I cannot use vectors for this solution"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 1, "user_id": 10518366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af052b27bde3ef35c40def9cf66ea0e3?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/10518366/anon"}, "edited": false, "score": 1, "creation_date": 1539779135, "post_id": 52854725, "comment_id": 92624800, "body": "@Anon why? If you can&#39;t use <code>std::vector</code> then you&#39;ll almost have to implement <code>std::vector</code> yourself to deal with various edge cases"}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 2, "last_activity_date": 1539778703, "creation_date": 1539778703, "answer_id": 52854725, "question_id": 52854572, "link": "https://stackoverflow.com/questions/52854572/c-copy-constructor-for-array-of-pointers-to-objects/52854725#52854725", "title": "C++ Copy Constructor for array of pointers to objects", "body": "<p>Let the standard library do the work for you. Using <code>std::vector&lt;Rectangle&gt;</code> will be safer, simpler and more reliable.</p>\n\n<p>To answer your question, no your copy constructor is not correct as it only creates a new array of the same size and doesn't copy the existing elements into it.</p>\n"}, {"comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1539782536, "post_id": 52854760, "comment_id": 92626952, "body": "Since the copy constructor is redundant, it could be written as self-documenting code this way for those who like to be explicit: <code>C(C const&amp;) = default;</code>"}, {"owner": {"reputation": 1377, "user_id": 2899278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e90d60adbb7edea6c5827def3732c57b?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie", "link": "https://stackoverflow.com/users/2899278/charlie"}, "edited": false, "score": 0, "creation_date": 1540265885, "post_id": 52854760, "comment_id": 92790249, "body": "Also in this, what you really want for the constructor in this particular example is <code>C(std::vector&lt;Rectangle&gt; rectangles) : m_rectangles(std::move(rectangles)) {}</code>"}], "tags": [], "owner": {"reputation": 1717, "user_id": 809460, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2f185b60f53780e157f314cdbf666008?s=128&d=identicon&r=PG", "display_name": "pokey909", "link": "https://stackoverflow.com/users/809460/pokey909"}, "is_accepted": false, "score": 0, "last_activity_date": 1539778841, "creation_date": 1539778841, "answer_id": 52854760, "question_id": 52854572, "link": "https://stackoverflow.com/questions/52854572/c-copy-constructor-for-array-of-pointers-to-objects/52854760#52854760", "title": "C++ Copy Constructor for array of pointers to objects", "body": "<p>To avoid permanent brain damage, use <code>std::vector&lt;Rectangle&gt;</code> as a member.</p>\n\n<pre><code>class C {\npublic:\n    C(const std::vector&lt;Rectangle&gt; &amp;rectangles) : m_rectangles(rectangles) {}\n    C(const C &amp;other) : m_rectangles(other.m_rectangles) {}\nprivate:\n    std::vector&lt;Rectangle&gt; m_rectangles;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10518366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af052b27bde3ef35c40def9cf66ea0e3?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/10518366/anon"}, "edited": false, "score": 0, "creation_date": 1539779415, "post_id": 52854887, "comment_id": 92624944, "body": "can I use copy to copy all the elements even if each element is a pointer to a new Rectangle? I&#39;m implementing the copy assignment after this, thanks :)"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 1, "user_id": 10518366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af052b27bde3ef35c40def9cf66ea0e3?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/10518366/anon"}, "edited": false, "score": 0, "creation_date": 1539779493, "post_id": 52854887, "comment_id": 92624991, "body": "If you need a 2D container, use an underlying 1D vector or array and overload <code>operator()(size_t x, size_t y)</code>."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 0, "last_activity_date": 1539779439, "last_edit_date": 1539779439, "creation_date": 1539779291, "answer_id": 52854887, "question_id": 52854572, "link": "https://stackoverflow.com/questions/52854572/c-copy-constructor-for-array-of-pointers-to-objects/52854887#52854887", "title": "C++ Copy Constructor for array of pointers to objects", "body": "<p>You need to respect <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">the rule of 0/3/5</a>.</p>\n\n<p>The <strong>rule of zero</strong> states:</p>\n\n<blockquote>\n  <p>Classes that have custom destructors, copy/move constructors or copy/move assignment operators should deal exclusively with ownership (which follows from the Single Responsibility Principle). Other classes should not have custom destructors, copy/move constructors or copy/move assignment operators.</p>\n</blockquote>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/raii\" rel=\"nofollow noreferrer\">RAII</a> <a href=\"https://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">containers</a> are a good tool to avoid managing resources. This is the best scenario for you:</p>\n\n<pre><code>#include &lt;vector&gt;\nstruct Rectangle {};\n\nclass C\n{\n    std::vector&lt;Rectangle&gt; _v; // no memory management from C\npublic:\n    size_t size() const { return _v.size(); }\n    Rectangle      &amp; operator()(size_t index)       { return _v[index]; }\n    Rectangle const&amp; operator()(size_t index) const { return _v[index]; }\n};\n</code></pre>\n\n<hr>\n\n<p>If for some reason you need to manage your resources manually, the rules of 3 and 5 kick in.</p>\n\n<p>In C++98, the <strong>rule of three</strong> states:</p>\n\n<blockquote>\n  <p>If a class requires a user-defined destructor, a user-defined copy constructor, or a user-defined copy assignment operator, it almost certainly requires all three.</p>\n</blockquote>\n\n<p>In C++11 and later, the <strong>rule of five</strong> replaces it:</p>\n\n<blockquote>\n  <p>Because the presence of a user-defined destructor, copy-constructor, or copy-assignment operator prevents implicit definition of the move constructor and the move assignment operator, any class for which move semantics are desirable, has to declare all five special member functions</p>\n</blockquote>\n\n<pre><code>struct Rectangle {};\n\nstruct C\n{\n    size_t      _size;\n    Rectangle*  _data;\n\n    C() : _size(0), _data(nullptr) {}\n    C(size_t size) : _size(size), _data(_size == 0 ? nullptr : new Rectangle[_size]) {}\n    C(C const&amp; other) : _size(other._size), _data(_size == 0 ? nullptr : new Rectangle[_size])\n    {\n        std::copy(_data, other._data, other._data + _size);\n    }\n    C&amp; operator=(C const&amp; other)\n    {\n        C self = other; // copy construction\n        using std::swap;\n        swap(*this, self);\n        return *this;\n    }\n    // if necessary: move constructor and move assignment operator\n    ~C() { delete _data; }\n};\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10518366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af052b27bde3ef35c40def9cf66ea0e3?s=128&d=identicon&r=PG&f=1", "display_name": "Anon", "link": "https://stackoverflow.com/users/10518366/anon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1027, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1539779439, "creation_date": 1539778180, "last_edit_date": 1539779229, "question_id": 52854572, "link": "https://stackoverflow.com/questions/52854572/c-copy-constructor-for-array-of-pointers-to-objects", "title": "C++ Copy Constructor for array of pointers to objects", "body": "<p>I have created a class that contains the size and an array of type \n<strong>Rectangle **a</strong>. is the initialization below correct:</p>\n\n<pre><code>C(int size = 1, Rectangle **a = new Rectangle *[1]);\n</code></pre>\n\n<p>For the copy constructor I've tried this which (edit: don't know how to complete to copy each pointer of the array into the copy, since each element is also a \npointer):</p>\n\n<pre><code>C ( const C &amp; other) : size{other.size},  a{size ? new Rectangle[size] : nullptr}\n{\n    // ....\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "visual-c++"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539778013, "post_id": 52854501, "comment_id": 92624099, "body": "Read this: <a href=\"https://msdn.microsoft.com/en-us/library/dybsewaf.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/dybsewaf.aspx</a>. Using <code>_T</code> in this case it totally wrong."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1539778081, "post_id": 52854501, "comment_id": 92624130, "body": "do you want to know what or why? for what, you just need to run the code, no?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539778087, "post_id": 52854501, "comment_id": 92624133, "body": "... and <code>Value = (LPCSTR)Desc + _T(&quot;xyz&quot;);</code> is totally wrong too."}, {"owner": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "edited": false, "score": 0, "creation_date": 1539778116, "post_id": 52854501, "comment_id": 92624158, "body": "I want to display xyz value is : 15.."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539778149, "post_id": 52854501, "comment_id": 92624176, "body": "I suggest you start reading your C++ text book."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1539778222, "post_id": 52854501, "comment_id": 92624217, "body": "Don&#39;t use <code>CString.h</code>, it&#39;s an ancient non-portable hack from times when C++ didn&#39;t have a usable string class."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539779073, "post_id": 52854501, "comment_id": 92624754, "body": "I&#39;m not sure the duplicate is helpful here. Voted for repopening"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1539779091, "post_id": 52854501, "comment_id": 92624769, "body": "whats wrong with <code>std::cout &lt;&lt; &quot;xyz value is &quot; &lt;&lt; xyz;</code> ? Do you <b>have</b> to use <code>CString.h</code> ?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1539779142, "post_id": 52854501, "comment_id": 92624803, "body": "@Jabberwocky agree, maybe it was even a post like that that made OP think they need it for their case"}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1539778384, "post_id": 52854615, "comment_id": 92624305, "body": "... at least that&#39;s what Microsoft would have developers believe."}], "tags": [], "owner": {"reputation": 309, "user_id": 1339564, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b45f0e6c1abf28315f76ae8847b32ef6?s=128&d=identicon&r=PG", "display_name": "Neil Stoker", "link": "https://stackoverflow.com/users/1339564/neil-stoker"}, "is_accepted": false, "score": 1, "last_activity_date": 1539778282, "creation_date": 1539778282, "answer_id": 52854615, "question_id": 52854501, "link": "https://stackoverflow.com/questions/52854501/what-is-the-meaning-of-txyz/52854615#52854615", "title": "What is the meaning of _T(&quot;xyz&quot;)?", "body": "<p>The <code>_T</code> macro is used to simplify transporting code for international uses.</p>\n\n<p>See <a href=\"https://msdn.microsoft.com/en-us/library/c426s321.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/c426s321.aspx</a> for more information.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "edited": false, "score": 0, "creation_date": 1539778625, "post_id": 52854681, "comment_id": 92624476, "body": "I have two string for which I need to concatenate"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "edited": false, "score": 0, "creation_date": 1539778723, "post_id": 52854681, "comment_id": 92624531, "body": "@CAAnusha OK, so you need to transform <code>xyz</code> into string first. BTW <code>&quot;XYZ&quot;</code> is a string literal, its content is in no way related to the identifier <code>xyz</code>."}, {"owner": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "edited": false, "score": 0, "creation_date": 1539778916, "post_id": 52854681, "comment_id": 92624648, "body": "I thought that is used to convert any non-string value to string"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "edited": false, "score": 0, "creation_date": 1539778944, "post_id": 52854681, "comment_id": 92624672, "body": "<i>I thought that is used to convert any non-string value to string</i>: absolutely not. You need to learn at least the basics of C++ to understand why my answers work."}, {"owner": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "edited": false, "score": 0, "creation_date": 1539779440, "post_id": 52854681, "comment_id": 92624955, "body": "I am using a user defined datatype basically a union instead of uint32_t .. How should I store in string then?"}, {"owner": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "edited": false, "score": 0, "creation_date": 1539779519, "post_id": 52854681, "comment_id": 92625010, "body": "I am getting below error Severity\tCode\tDescription\tProject\tFile\tLine\tSuppression State Error\tC2664\t&#39;void ATL::CStringT&lt;BaseType,StringTraits&gt;::Format(const wchar_t *,...)&#39; : cannot convert parameter 1 from &#39;const char [3]&#39; to &#39;const wchar_t *&#39;"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "edited": false, "score": 0, "creation_date": 1539779657, "post_id": 52854681, "comment_id": 92625090, "body": "Replace <code>LPCSTR</code> with <code>LPCWSTR</code> and replace <code>&quot;xyz value is : &quot;</code> with <code>L&quot;xyz value is : &quot;</code>."}], "tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": true, "score": 0, "last_activity_date": 1539779682, "last_edit_date": 1539779682, "creation_date": 1539778552, "answer_id": 52854681, "question_id": 52854501, "link": "https://stackoverflow.com/questions/52854501/what-is-the-meaning-of-txyz/52854681#52854681", "title": "What is the meaning of _T(&quot;xyz&quot;)?", "body": "<p>You probably want this:</p>\n\n<pre><code>uint32_t xyz = 15;\nLPCWSTR Desc = L\"xyz value is : %d\";\nCString Value;\nValue.Format(Desc, xyz);\n</code></pre>\n\n<p>Forget about the <code>_T</code> macro. What makes you think you should use it?</p>\n\n<p>Or maybe you need this:</p>\n\n<pre><code>uint32_t xyz = 15;                // integer variable containing the number 15\nCString stxyz;                    // CString variable\nstxyz.Format(L\"%d\", xyz);          // stxyz contains \"15\" now\n\nLPCWSTR Desc = L\"xyz value is : \";  // Desc points to the string literal \"15\"\n\nCString Value = Desc + stxyz;     // Value contains concatenation of Desc and stxyz\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7177215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y5nyP.jpg?s=128&g=1", "display_name": "C A Anusha", "link": "https://stackoverflow.com/users/7177215/c-a-anusha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "closed_date": 1539779012, "accepted_answer_id": 52854681, "answer_count": 2, "score": -1, "last_activity_date": 1539779682, "creation_date": 1539777946, "last_edit_date": 1539778359, "question_id": 52854501, "link": "https://stackoverflow.com/questions/52854501/what-is-the-meaning-of-txyz", "closed_reason": "Duplicate", "title": "What is the meaning of _T(&quot;xyz&quot;)?", "body": "<p>I wanted to understand the use of <code>_T(\"xyz\")</code> in the code below:</p>\n\n<pre><code>#include&lt;CString.h&gt;\nint main()\n{\n   uint32_t xyz = 15;\n   LPCSTR Desc = \"xyz value is : \";\n   CString Value;\n   Value = (LPCSTR)Desc + _T(\"xyz\");\n}\n</code></pre>\n\n<p>Will the above code display:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>xyz value is : 15\n</code></pre>\n\n<p>or</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>xyz value is : xyz\n</code></pre>\n\n<p>How to display -</p>\n\n<p>xyz value is : 15</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 12, "creation_date": 1539777967, "post_id": 52854492, "comment_id": 92624070, "body": "Congratulations, you stumbled upon an &quot;OOP&quot; cargo cult."}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1539778281, "post_id": 52854492, "comment_id": 92624243, "body": "In practice inline getters that return a <code>const</code> ref are no different to direct member access in terms of efficiency. Personally I only bother with a getter if it&#39;s something that&#39;s going to be called a lot, just makes debugging in vs a little easier. You could insert one after the fact for debugging but if you&#39;re working in a large code base and the file you&#39;re changing has been included all over the shop, then you&#39;re gonna have to wait... and wait... and wait... to compile."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 2, "creation_date": 1539778471, "post_id": 52854492, "comment_id": 92624355, "body": "@George I think OP means efficiency in writing code, otherwise it would be O(1), not O(n)."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1539783927, "post_id": 52854492, "comment_id": 92627889, "body": "@StoryTeller that belongs as an answer"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1539784106, "post_id": 52854492, "comment_id": 92627997, "body": "@Caleth - I&#39;ll just be paraphrasing <a href=\"https://stackoverflow.com/questions/4984375/c-const-public-field-vs-a-getter-method\">Bo Persson here</a>. I was actually trying to find this dupe and then was called away. Oh well."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1539784593, "post_id": 52854492, "comment_id": 92628347, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4984375/c-const-public-field-vs-a-getter-method\">c++ const public field vs. a getter method</a>"}, {"owner": {"reputation": 226, "user_id": 1029366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38c3d4133b9dd85046c1225626f4af2?s=128&d=identicon&r=PG", "display_name": "dats", "link": "https://stackoverflow.com/users/1029366/dats"}, "edited": false, "score": 0, "creation_date": 1539785937, "post_id": 52854492, "comment_id": 92629261, "body": "beware: const member variables make your class non-movable (and non-assignable)"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "reply_to_user": {"reputation": 226, "user_id": 1029366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38c3d4133b9dd85046c1225626f4af2?s=128&d=identicon&r=PG", "display_name": "dats", "link": "https://stackoverflow.com/users/1029366/dats"}, "edited": false, "score": 0, "creation_date": 1539811735, "post_id": 52854492, "comment_id": 92642065, "body": "@dats Not sure where you got that from but it&#39;s nonsense, <a href=\"http://cpp.sh/7wlm3\" rel=\"nofollow noreferrer\">demo</a>."}, {"owner": {"reputation": 226, "user_id": 1029366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b38c3d4133b9dd85046c1225626f4af2?s=128&d=identicon&r=PG", "display_name": "dats", "link": "https://stackoverflow.com/users/1029366/dats"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1539957884, "post_id": 52854492, "comment_id": 92700648, "body": "@George you are right, should have been more accurate: the move constructor will have to <i>copy</i> the member because it cannot be moved from the rhs, and the assignment <i>cannot modify</i> the member. So you end up with a move constructor that <i>does not move</i> and an assignment that <i>does not assign</i>. Which was my point."}], "answers": [{"tags": [], "owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "is_accepted": false, "score": 1, "last_activity_date": 1539778276, "creation_date": 1539778276, "answer_id": 52854613, "question_id": 52854492, "link": "https://stackoverflow.com/questions/52854492/c-whats-wrong-with-const-public-members/52854613#52854613", "title": "C++: What&#39;s wrong with const public members?", "body": "<p>I think it's generally considered a good practice to provide getters (and setters where appropriate) for class members.  The rationale is that it makes it easier to change the class's representation later, since you can do so without breaking any client code.</p>\n"}, {"tags": [], "owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "is_accepted": true, "score": 2, "last_activity_date": 1539778719, "creation_date": 1539778719, "answer_id": 52854727, "question_id": 52854492, "link": "https://stackoverflow.com/questions/52854492/c-whats-wrong-with-const-public-members/52854727#52854727", "title": "C++: What&#39;s wrong with const public members?", "body": "<p>Well, it is just style. For your concrete example, it might make sense to declare them as public.   </p>\n\n<p>However, it's a practice to provide get and set methods which may or may not be doing something additional to the fields.<br>\nConsider if there is a change of the requirement or something.</p>\n\n<p>Also, it's probably more convenient for the programmers who are introduced to the code.<br>\nMost of them have this concept of accessing through getters so they expect the code to be like this.</p>\n"}, {"comments": [{"owner": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "edited": false, "score": 0, "creation_date": 1539780060, "post_id": 52855049, "comment_id": 92625350, "body": "The class vs. struct thing is just a convention as well. In reality, classes and structs are the same in C++, except for the default access modifier."}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "reply_to_user": {"reputation": 2916, "user_id": 3646096, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KUofm.jpg?s=128&g=1", "display_name": "M&#225;rio Feroldi", "link": "https://stackoverflow.com/users/3646096/m%c3%a1rio-feroldi"}, "edited": false, "score": 0, "creation_date": 1539780279, "post_id": 52855049, "comment_id": 92625484, "body": "@M&#225;rioFeroldi Perfectly true. However, it&#39;s a very strong signal to the reader when some object is declared as <code>struct Foo { int _member1; ... }</code>. That says loud and clearly: This is just plain data, there are no consistency guarantees, whatsoever."}], "tags": [], "owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "is_accepted": false, "score": 8, "last_activity_date": 1539780113, "last_edit_date": 1539780113, "creation_date": 1539779880, "answer_id": 52855049, "question_id": 52854492, "link": "https://stackoverflow.com/questions/52854492/c-whats-wrong-with-const-public-members/52855049#52855049", "title": "C++: What&#39;s wrong with const public members?", "body": "<p>Unless the accessor methods actually do <em>something</em> other than providing a reference, they are indeed superfluous.</p>\n\n<p>This something can be, for instance:</p>\n\n<ul>\n<li><p>Setter: Checking that the given value is actually valid.</p></li>\n<li><p>Getter: Derive the requested value on the fly from something else.</p></li>\n<li><p>Setter: Ensure that the given value is consistent with other data members.</p></li>\n<li><p>Setter: Notify some data consumer(s) of the change</p></li>\n<li><p>...</p></li>\n</ul>\n\n<p>However, if you are writing stuff like</p>\n\n<pre><code>private:\n    const int _foo;\n\npublic:\n    const int&amp; foo() const { return _foo; }\n</code></pre>\n\n<p>there is no advantage over writing</p>\n\n<pre><code>public:\n    const int foo;\n</code></pre>\n\n<p>instead. You cannot do anything with the later that you can't do with the former.</p>\n\n<p>Likewise, the code</p>\n\n<pre><code>private:\n    int _foo;\n\npublic:\n    int&amp; foo() { return _foo; }\n    const int&amp; foo() const { return _foo; }\n</code></pre>\n\n<p>provides no benefit over</p>\n\n<pre><code>public:\n    int foo;\n</code></pre>\n\n<p>because any user can set <code>_foo</code> to any value they like without the object even noticing it.</p>\n\n<hr>\n\n<p>So, my advice would be:</p>\n\n<ul>\n<li><p>Declare data members private by default.</p></li>\n<li><p>If you need read-only access but the data member is mutable, provide a getter.</p></li>\n<li><p>If the data member is <code>const</code> and readable, use <code>public: const</code></p></li>\n<li><p>If users are to be allowed to just supply any value at any time, go ahead and make the member <code>public</code>. That's just being honest: The class itself has no control over the member's value, whatsoever.</p>\n\n<p>Note that this also happens extremely infrequently. In the vast majority of cases, you want your class to provide some <em>abstraction</em>, which means that it's not just a bunch of public data members. A well-written class should implement some needed <em>behavior</em>, not just be a collection of data. Also, if the class where just a bunch of public data members, you would declare it as a <code>struct</code>, wouldn't you?</p></li>\n<li><p>If you find that you need the class to do <em>something</em> when a public variable is accessed, turn it into a private one, provide the relevant accessors, and let your compiler point you to all the places in the code that need to be updated.</p>\n\n<p>This also happens very infrequently, but it will force you to actually look at all the uses of the data member before you change the behavior of its access. This may be a good thing as it gives you a chance to spot problems with the changed behavior before they show up in the tests and/or production. You won't be forced to revisit the calling sites if you already provided the vanilla accessors for the variable.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1539780185, "creation_date": 1539780185, "answer_id": 52855147, "question_id": 52854492, "link": "https://stackoverflow.com/questions/52854492/c-whats-wrong-with-const-public-members/52855147#52855147", "title": "C++: What&#39;s wrong with const public members?", "body": "<p>As @PetarVelev point out it is style. For many people having setters and getters is a boiler plate code, but usually they forgot why this was invented.</p>\n\n<p>And this was invented to make maintenance of code easy. Imagine some class with some properties. This property is used all over the project.\nNow requirement has changed and you have to do something every time property is accessed something must happen. For example when value is changed notification should be sent (setters should be updated). Or you have noticed that calculating some property is costly, so it has to be lazy evaluated (getter should be corrected).</p>\n\n<p>When you write this property (class field) you didn't know that there will be such issues to solve. If you expose this as public field then to resolve this issue you have to spend hours to find every use of this value and correct it. On other hand if this is done by using setter and getter you will spend 5-10 minutes to fix it including adding a tests.</p>\n\n<p>So having setters and getters is a good practice, where you will lose 10 seconds to write them as boiler plate code, but save lots of time if some radical change is needed.\nGood example is Qt freamework.</p>\n\n<p>So if you are sure that requirement will not change there is no point to use getter setter, but if you have doubts it is better to use them.</p>\n\n<p>Now in your case where constant filed is exposed by getter is a bit strange. I'm suspecting that this is some example of functional programing, but without seeing actual code is hard to tell.</p>\n"}], "owner": {"reputation": 315, "user_id": 9457943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aec7d250ad3ae4b40ab5a5ef3a6ca26?s=128&d=identicon&r=PG&f=1", "display_name": "Make", "link": "https://stackoverflow.com/users/9457943/make"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1161, "favorite_count": 0, "accepted_answer_id": 52854727, "answer_count": 4, "score": 9, "last_activity_date": 1539780185, "creation_date": 1539777916, "question_id": 52854492, "link": "https://stackoverflow.com/questions/52854492/c-whats-wrong-with-const-public-members", "title": "C++: What&#39;s wrong with const public members?", "body": "<p>I am reading some code where a class has private const data members, and then a whole bunch of public methods that provide read-only access to those data members.</p>\n\n<p>What is the point of this? Why not just make those private data members public? They are const, so the access is by definition read-only, and people can access them via <code>theClass.theMember</code> rather than <code>theClass.getTheMember()</code>, which is easier, plus you avoid having to create all those public methods in the first place. One for each member variable, meaning that's O(n) inefficiency!</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 1, "creation_date": 1539778656, "post_id": 52854376, "comment_id": 92624497, "body": "Instead of nested for loops, you can simply use <code>cv::cvtColor(img, img, cv::COLOR_BGR2GRAY);</code> and then <code>cv::cvtColor(img, img, cv::COLOR_GRAY2BGR);</code>"}, {"owner": {"reputation": 1, "user_id": 10518262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6IBuGQv9WQA/AAAAAAAAAAI/AAAAAAAAAQs/tvtxprpDS4c/photo.jpg?sz=128", "display_name": "PELMYACH", "link": "https://stackoverflow.com/users/10518262/pelmyach"}, "reply_to_user": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1539780135, "post_id": 52854376, "comment_id": 92625401, "body": "@ZdaR: Yes, I know, but I need to repaint every pixel. And this task is completed, and now I need to do the second part of this task, because I have problem with it."}, {"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 1, "creation_date": 1539781771, "post_id": 52854376, "comment_id": 92626464, "body": "Can you please explain the expected output? Suppose we have a video with 5 colored frames, and we converted each frame to Gray-scale, Now what would be the output? A video with 5 gray frames? or a video with 10 frames (colored and gray scale interleaved) or some other combination ?"}, {"owner": {"reputation": 1, "user_id": 10518262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6IBuGQv9WQA/AAAAAAAAAAI/AAAAAAAAAQs/tvtxprpDS4c/photo.jpg?sz=128", "display_name": "PELMYACH", "link": "https://stackoverflow.com/users/10518262/pelmyach"}, "reply_to_user": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1539783386, "post_id": 52854376, "comment_id": 92627526, "body": "@ZdaR: We need to take each frame from the video file and put all these video frames in one image so that as a result we can see all the transitions between frames. Color is not important (gray or color image), I do not understand how to solve the problem with such an overlay."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1539794339, "post_id": 52854376, "comment_id": 92634144, "body": "Sounds like you maybe want to calculate a per-pixel mean of all the frames. Not sure how useful that will be, but other than that I can&#39;t really envision what you could concievably have in mind."}, {"owner": {"reputation": 1, "user_id": 10518262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6IBuGQv9WQA/AAAAAAAAAAI/AAAAAAAAAQs/tvtxprpDS4c/photo.jpg?sz=128", "display_name": "PELMYACH", "link": "https://stackoverflow.com/users/10518262/pelmyach"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1539808075, "post_id": 52854376, "comment_id": 92640538, "body": "@DanMa\u0161ek: I need to make a long exposure effect just like in this photo. <a href=\"http://www.blogbaster.org/i/i402/1112/bb/0979affc2304.jpg\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 0, "creation_date": 1539826297, "post_id": 52854376, "comment_id": 92645509, "body": "For creating an effect such as exposure, I think a lot of things depend upon camrea hardware. I am not sure if you can create an exposure effect out of a given video? Have you looked out for some implementations or some research paper ?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1539828418, "post_id": 52854376, "comment_id": 92645867, "body": "@PELMYACH just use the <code>qt-creator</code> tag when the problem is relative to the IDE, in your case it has nothing to do with it."}, {"owner": {"reputation": 1, "user_id": 10518262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6IBuGQv9WQA/AAAAAAAAAAI/AAAAAAAAAQs/tvtxprpDS4c/photo.jpg?sz=128", "display_name": "PELMYACH", "link": "https://stackoverflow.com/users/10518262/pelmyach"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1539868009, "post_id": 52854376, "comment_id": 92662863, "body": "@eyllanesc: I just work in Qt-Creator."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1539872265, "post_id": 52854376, "comment_id": 92665661, "body": "@PELMYACH if we follow your logic, you do not think that all SO questions would have as a label the most popular editors. You must use the Qt-Creator tag when the problem is in Qt-Creater, for example: &quot;Qt Creator autocomplete does not work&quot;, etc."}, {"owner": {"reputation": 1, "user_id": 10518262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6IBuGQv9WQA/AAAAAAAAAAI/AAAAAAAAAQs/tvtxprpDS4c/photo.jpg?sz=128", "display_name": "PELMYACH", "link": "https://stackoverflow.com/users/10518262/pelmyach"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1539873726, "post_id": 52854376, "comment_id": 92666639, "body": "@eyllanesc: okay."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1539901064, "post_id": 52854376, "comment_id": 92680086, "body": "Hmm, maybe something akin to taking the maximum value of each pixel? It would be handy if you could provide some sample video you want to apply this on."}], "owner": {"reputation": 1, "user_id": 10518262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6IBuGQv9WQA/AAAAAAAAAAI/AAAAAAAAAQs/tvtxprpDS4c/photo.jpg?sz=128", "display_name": "PELMYACH", "link": "https://stackoverflow.com/users/10518262/pelmyach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539828336, "creation_date": 1539777511, "last_edit_date": 1539828336, "question_id": 52854376, "link": "https://stackoverflow.com/questions/52854376/overlay-each-frame-from-a-video-file-into-one-final-image", "title": "Overlay each frame from a video file into one final image", "body": "<p>I created a program that changes the color of each pixel in a video file in grayscale.</p>\n\n<p>Now every frame of this video should be superimposed on each other and saved as one final image, where every frame transition is visible. Does anyone know how to do this? (Used with C ++ and opencv).</p>\n\n<p>Thank you in advance!   </p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;opencv2/core.hpp&gt;\n#include &lt;opencv2/highgui.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing namespace std;\n\nint main(int, char**)\n\n{\ncv::VideoCapture cap(\"/MyVideo.avi\");\ncv::Mat frame;\n\nif( !cap.isOpened() )\n    throw \"Error when reading Video.avi\";\n\nfor( ; ; )\n {\n    cap &gt;&gt; frame;\n    if(frame.empty())\n        break;\n\n    for( int i = 0; i &lt; frame.rows; i++ )\n                      for( int j = 0; j &lt; frame.cols; j++ )\n\n                          {\n                              float R = frame.at&lt;Vec3b&gt;(i,j)[0];\n                              float G = frame.at&lt;Vec3b&gt;(i,j)[1];\n                              float B = frame.at&lt;Vec3b&gt;(i,j)[2];\n                              float Y = 0.299*R + 0.587*G + 0.114*B;\n\n\n                              frame.at&lt;Vec3b&gt;(i,j)[0] = Y;\n                              frame.at&lt;Vec3b&gt;(i,j)[1] = Y;\n                              frame.at&lt;Vec3b&gt;(i,j)[2] = Y;\n\n                          }\n\n    imshow(\"MyVideo.avi\", frame);\n    if (cv::waitKey(1) &gt;= 0)\n    break;\n }\nreturn 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "performance"], "comments": [{"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 0, "creation_date": 1539777674, "post_id": 52854366, "comment_id": 92623880, "body": "Don&#39;t change multiple aspects when comparing performance. Compare <code>getline</code> for <code>ifstream</code> vs <code>istringstream</code> or compare <code>getline</code> vs <code>operator &gt;&gt;</code> for the same stream."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1539777689, "post_id": 52854366, "comment_id": 92623896, "body": "I recommend that you really make <code>readPoint</code> take a reference to <code>std::istream</code> as then you could use <i>any</i> input stream (files, strings, even <code>std::cin</code>)."}, {"owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "reply_to_user": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 0, "creation_date": 1539778421, "post_id": 52854366, "comment_id": 92624320, "body": "@grek40 I will do the try. Thanks Some Programmer Dude: Yes, I just understood that my function getline was useless and I could use every stream"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1539779461, "post_id": 52854366, "comment_id": 92624973, "body": "how are you measuring the speed? have you run the code multiple times? are you using an optimised build? Which platform are you using? We need a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "edited": false, "score": 0, "creation_date": 1539779675, "post_id": 52854366, "comment_id": 92625104, "body": "I&#39;m using Visual studio 2017. I&#39;m not sure I&#39;m using an optimized build, but I&#39;m using the same for the 2 functions, (release x64).  I&#39;m mesuring time using clock_t.    And I did the test several times, and the results are always like I said before"}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539782026, "post_id": 52854366, "comment_id": 92626623, "body": "better to use ifstream&#39;s <code>.read(buffer, big_number)</code> and then read from there.This all depends of cache policy"}, {"owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "edited": false, "score": 0, "creation_date": 1539783202, "post_id": 52854366, "comment_id": 92627396, "body": "I use <code>std::ifstream file(filename, std::ios::binary | std::ios::ate); \t\tstd::streamsize size = file.tellg(); \t\tfile.seekg(0, std::ios::beg);  \t\tstd::vector&lt;char&gt; buffer(size);  \t\tsize_t cpt = 0; \t\tif (file.read(buffer.data(), size)) { \t\t\tstd::istringstream stream(&amp;buffer[0]);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "edited": false, "score": 0, "creation_date": 1539778244, "post_id": 52854500, "comment_id": 92624230, "body": "I&#39;ll take a look at this solution. But isn&#39;t it supposed to be faster to put everything in RAM, and then work on it, instead of reading line by line from a file?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1539778588, "post_id": 52854500, "comment_id": 92624455, "body": "You might want to emphasize that the changed code most likely will fail if the input is malformed."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "edited": false, "score": 0, "creation_date": 1539778928, "post_id": 52854500, "comment_id": 92624654, "body": "@RaphSchim If you read an entire file into a <code>stringstream</code> first that involves multiple memory allocations and copying when growing its content buffer, unlike if you read directly from <code>ifstream</code>."}, {"owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "edited": false, "score": 0, "creation_date": 1539779514, "post_id": 52854500, "comment_id": 92625006, "body": "@MaximEgorushkin I tried the 2 solutions, read directly from ifstream and generate a stringstream. 2 options are similar considering time consuming :( ...    SomeProgrammerDude you&#39;re right. But since it is needed to be read by other product, my file should nev er be malformed :/ Otherwise I wouldn&#39;t be able to work on it"}, {"owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "edited": false, "score": 0, "creation_date": 1539780275, "post_id": 52854500, "comment_id": 92625479, "body": "Should I use a  <code>std::vector&lt;char&gt;</code> instead of a <code>std::istringstream</code> and then work on this vector?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "edited": false, "score": 0, "creation_date": 1539782153, "post_id": 52854500, "comment_id": 92626696, "body": "@RaphSchim I don&#39;t think so."}, {"owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "edited": false, "score": 0, "creation_date": 1539783295, "post_id": 52854500, "comment_id": 92627459, "body": "well, ok. Thanks!"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1539777945, "creation_date": 1539777945, "answer_id": 52854500, "question_id": 52854366, "link": "https://stackoverflow.com/questions/52854366/reading-from-istringstream-slower-than-ifstream/52854500#52854500", "title": "reading from istringstream slower than ifstream", "body": "<blockquote>\n  <p>Is there something I'm missing? I'm doing wrong?</p>\n</blockquote>\n\n<p>It only makes sense to create an intermediate <code>std::istringstream</code> for each line if your would like to ignore the rest of the line.</p>\n\n<p>If all lines contain just these 7 values you can read them directly from <code>std::istream&amp; file</code> (instead of <code>std::ifstream&amp; file</code>). I.e. change:</p>\n\n<pre><code>getLine(file) &gt;&gt; x &gt;&gt; y &gt;&gt; z &gt;&gt; intens &gt;&gt; r &gt;&gt; g &gt;&gt; b;\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>file &gt;&gt; x &gt;&gt; y &gt;&gt; z &gt;&gt; intens &gt;&gt; r &gt;&gt; g &gt;&gt; b;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 7490633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b079cf1818dbd08fcc082fe2fdbfa213?s=128&d=identicon&r=PG&f=1", "display_name": "mgueydan", "link": "https://stackoverflow.com/users/7490633/mgueydan"}, "is_accepted": false, "score": 1, "last_activity_date": 1539789614, "creation_date": 1539789614, "answer_id": 52858348, "question_id": 52854366, "link": "https://stackoverflow.com/questions/52854366/reading-from-istringstream-slower-than-ifstream/52858348#52858348", "title": "reading from istringstream slower than ifstream", "body": "<p><strong>The first method is slower !</strong> </p>\n\n<p>I ran your code on a short sample (20k lines) and the performances I did observe are :</p>\n\n<ul>\n<li>first method : \n\n<ul>\n<li>1004 ms total</li>\n<li>1004 ms in the readPoint method</li>\n<li>553 ms in the std::getline method (inside the readPoint method)</li>\n</ul></li>\n<li>second method :\n\n<ul>\n<li>101 ms total</li>\n<li>56 ms in the readPoint method.</li>\n<li>54 ms in the ifstream::rdbuf method (outside of the readPoint method)</li>\n</ul></li>\n</ul>\n\n<p>Of course I had to write the code that read the file and put it in istringstream in the second case, and performances of the second method really depends on how you built your istringstream.</p>\n\n<p>What I suspect is that a part of your issue is out of the code you show here.</p>\n\n<p><strong>Why is it ?</strong> </p>\n\n<p>The main reason why the first method is much slower is because of what Maxim Egorushkin explained to you <a href=\"https://stackoverflow.com/a/52854500/7490633\">here</a> .</p>\n\n<p>But even if you spare all that unnecessary wrapping you do, it is anyway, because files operation are buffered, and a single call on ifstream::rdbuf is faster than multiple call to >> opreator.</p>\n\n<p>Unfortunately, this second method will become really slower if, for some reason, you lack memory.</p>\n\n<p>Using the code suggested by Maxim Egorushkin I had those results : </p>\n\n<ul>\n<li>310 ms total</li>\n<li>305 ms in the readPoint method</li>\n</ul>\n\n<p>Regards,</p>\n"}], "owner": {"reputation": 488, "user_id": 5811284, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6ba5aaacb39e60b76187811a6007e215?s=128&d=identicon&r=PG&f=1", "display_name": "Raph Schim", "link": "https://stackoverflow.com/users/5811284/raph-schim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1539789614, "creation_date": 1539777472, "question_id": 52854366, "link": "https://stackoverflow.com/questions/52854366/reading-from-istringstream-slower-than-ifstream", "title": "reading from istringstream slower than ifstream", "body": "<p>I'm trying to read point cloud file (PTX). I tried 2 solutions in order to do that: </p>\n\n<p>The first one : The most easy method. <code>std::ifstream</code> and <code>getline(...)</code> while I can read.<br>\n The second one : I read everything and put everything in a <code>std::istringstream</code> then read from this using <code>operator &gt;&gt;</code>.<br>\nSince I put everything in memory with the second method, I tought reading from it would be faster but no.<br>\nIn average : 45 seconds for method number 1 and 49 for number 2.</p>\n\n<p>Here are my codes :<br>\nMethod 1:</p>\n\n<pre><code>std::istringstream getLine(std::ifstream&amp; file) {\n    std::string line;\n    std::getline(file, line);\n    return std::istringstream{ line };\n}\n\nvoid readPoint(std::ifstream&amp; file, TinyPTX&amp; tptx) {\n    std::vector&lt;PointPTX&gt; ptxPoints(tptx.numPoints);\n\n    size_t num_pts_to_remove = 0;\n    tptx.asCol = true;\n    for (int i = 0; i &lt; tptx.numPoints; ++i) {\n        float x, y, z, intens;\n        uint8_t r, g, b;\n        getLine(file) &gt;&gt; x &gt;&gt; y &gt;&gt; z &gt;&gt; intens &gt;&gt; r &gt;&gt; g &gt;&gt; b;\n        PointPTX&amp; _pptx = tptx.cloud-&gt;points[i - num_pts_to_remove];\n        if (!isZero(x, 10e-4) || !isZero(y, 10e-4) || !isZero(z, 10e-4)) {\n            _pptx.x = x;  _pptx.y = y; _pptx.z = z; _pptx.intensity = intens;\n            _pptx.r = r;\n            _pptx.g = g;\n            _pptx.b = b;\n        }\n        else\n            num_pts_to_remove++;\n    }\n    tptx.numPoints -= num_pts_to_remove;\n    tptx.cloud-&gt;points.resize(tptx.numPoints);\n}\n</code></pre>\n\n<p>Method 2 :</p>\n\n<pre><code>bool readPoint(std::istringstream&amp; str, TinyPTX&amp; tptx, std::streamsize&amp; size) {\n    std::vector&lt;PointPTX&gt; ptxPoints(tptx.numPoints);\n\n    size_t num_pts_to_remove = 0;\n    for (int i = 0; i &lt; tptx.numPoints; ++i) {\n        float x, y, z, intens;\n        int r, g, b;\n        str &gt;&gt; x &gt;&gt; y &gt;&gt; z &gt;&gt; intens &gt;&gt; r &gt;&gt; g &gt;&gt; b;\n        PointPTX&amp; _pptx = tptx.cloud-&gt;points[i - num_pts_to_remove];\n        if (!isZero(x, 10e-4) || !isZero(y, 10e-4) || !isZero(z, 10e-4)) {\n            _pptx.x = x;  _pptx.y = y; _pptx.z = z; _pptx.intensity = intens;\n            _pptx.r = r;\n            _pptx.g = g;\n            _pptx.b = b;\n        }\n        else\n            num_pts_to_remove++;\n    }\n    tptx.numPoints -= num_pts_to_remove;\n    tptx.cloud-&gt;points.resize(tptx.numPoints);\n\n    int pos = str.tellg();\n    std::cout &lt;&lt; pos &lt;&lt; \" \" &lt;&lt; size;\n    return pos &gt; size - 10 ;//Used to know if we're at the end of the file. \n}\n</code></pre>\n\n<p>My question is : why is the version in which I put everything in memory slower than the other? Is there something I'm missing? I'm doing wrong?</p>\n"}, {"tags": ["c++", "ubuntu", "makefile", "dicom", "dcmtk"], "comments": [{"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1539787762, "post_id": 52854333, "comment_id": 92630481, "body": "Welcome to Stack Overflow! Other users marked your question for low quality and need for improvement. I re-worded/formatted your input to make it easier to read/understand. Please review my changes to ensure they reflect your intentions. But I think your question is still not answerable. <b>You</b> should <a href=\"https://stackoverflow.com/posts/52854333/edit\">edit</a> your question now, to make it more specific/clear (see <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">help me is not a question</a> ). Feel free to drop me a comment in case you have further questions or feedback for me."}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1539787790, "post_id": 52854333, "comment_id": 92630497, "body": "I am not sure what you are asking for. That we download that piece of open source software? To figure what is written up in the makefile?"}], "answers": [{"tags": [], "owner": {"reputation": 1395, "user_id": 3154372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffJOd.jpg?s=128&g=1", "display_name": "J. Riesmeier", "link": "https://stackoverflow.com/users/3154372/j-riesmeier"}, "is_accepted": true, "score": 0, "last_activity_date": 1539800509, "creation_date": 1539800509, "answer_id": 52861321, "question_id": 52854333, "link": "https://stackoverflow.com/questions/52854333/does-the-makefile-of-dcmtk3-6-3-in-ubuntu14-0-have-g-to-debug/52861321#52861321", "title": "Does the makefile of dcmtk3.6.3 in ubuntu14.0 have -g to debug?", "body": "<p>Reading the <a href=\"https://support.dcmtk.org/docs/file_install.html\" rel=\"nofollow noreferrer\">INSTALL</a> file that is shipped with the DCMTK would help, e.g. \"./configure --enable-debug --ignore-deprecation\" should do what you want (when using GNU Autoconf).</p>\n"}], "owner": {"reputation": 25, "user_id": 10510206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f3fed696929828deb33abe6e9336e21?s=128&d=identicon&r=PG&f=1", "display_name": "chenzongxi", "link": "https://stackoverflow.com/users/10510206/chenzongxi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 52861321, "answer_count": 1, "score": -3, "last_activity_date": 1539800509, "creation_date": 1539777337, "last_edit_date": 1539787752, "question_id": 52854333, "link": "https://stackoverflow.com/questions/52854333/does-the-makefile-of-dcmtk3-6-3-in-ubuntu14-0-have-g-to-debug", "title": "Does the makefile of dcmtk3.6.3 in ubuntu14.0 have -g to debug?", "body": "<p>I want to debug the code of dcmtk3.6.3 with vs code in ubuntu14.0.</p>\n\n<p>But i don't know whether the original makefile had the -g parameter.</p>\n\n<p>I try to debug,but it does not work. So, should i add the \"-g\" in the makefile? And where to add?</p>\n\n<p>this is the movescu of dcmtk in makefile.\n <a href=\"https://i.stack.imgur.com/DMr3n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DMr3n.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "valgrind", "visualizer", "massif"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 7152961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/da2d8284f7ca46ad1631eac7d209b82b?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh G", "link": "https://stackoverflow.com/users/7152961/dinesh-g"}, "edited": false, "score": 0, "creation_date": 1539777077, "post_id": 52854201, "comment_id": 92623510, "body": "I see. Thanks for the clarification."}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1539776974, "creation_date": 1539776974, "answer_id": 52854201, "question_id": 52854151, "link": "https://stackoverflow.com/questions/52854151/size-difference-between-massif-visualizer-and-ms-print/52854201#52854201", "title": "Size difference between massif visualizer and ms_print", "body": "<p>There is no difference, 1KiB = 1024B. So 71KiB = 72704B.</p>\n"}], "owner": {"reputation": 121, "user_id": 7152961, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/da2d8284f7ca46ad1631eac7d209b82b?s=128&d=identicon&r=PG&f=1", "display_name": "Dinesh G", "link": "https://stackoverflow.com/users/7152961/dinesh-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1539776974, "creation_date": 1539776806, "question_id": 52854151, "link": "https://stackoverflow.com/questions/52854151/size-difference-between-massif-visualizer-and-ms-print", "title": "Size difference between massif visualizer and ms_print", "body": "<p>I have been trying to use valgrind memory usage tool massif. But I have a problem when I try to visualize the output of valgrind --massif output .out with programs ms_print and massiff visualizer app.</p>\n\n<p>There is a difference of 2KiB between ms_print and massiff visualizer app (<a href=\"http://milianw.de/tag/massif-visualizer\" rel=\"nofollow noreferrer\">http://milianw.de/tag/massif-visualizer</a>).</p>\n\n<p>Is there anything I am missing ? I have added screenshots of both.</p>\n\n<p>Thanks </p>\n\n<p><a href=\"https://i.stack.imgur.com/7FZaD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7FZaD.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/xbsqo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xbsqo.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "string", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 1, "creation_date": 1539777070, "post_id": 52854132, "comment_id": 92623501, "body": "cppreference gives a constructor with char* and int to make a string out of the array instead of the c-style string"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 0, "creation_date": 1539777531, "post_id": 52854132, "comment_id": 92623790, "body": "@stefaanv there is <i>also</i> a <code>char *, int</code> constructor <i>as well as</i> the <code>char *</code> constructor mentioned here. but there isn&#39;t an automatic conversion from <code>template &lt;size_t N&gt; foo(char (&amp;str)[N])</code> to <code>foo(char *, size_t)</code>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "edited": false, "score": 2, "creation_date": 1539777835, "post_id": 52854132, "comment_id": 92623991, "body": "@stefaanv: I&#39;d argue that the canonical C+11 way is <code>std::string foo{ std::begin(array), std::end(array) };</code>."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1539779216, "last_edit_date": 1539779216, "creation_date": 1539776753, "answer_id": 52854132, "question_id": 52854079, "link": "https://stackoverflow.com/questions/52854079/how-does-the-stdstring-constructor-handle-char-of-fixed-size/52854132#52854132", "title": "How does the std::string constructor handle char[] of fixed size?", "body": "<p>The constructor called is one that takes a <code>const char*</code> as an argument. That constructor attempts to copy the character data pointed to by that pointer, <em>until</em> the first NUL terminator is reached. If there is no such NUL terminator then the behaviour of the constructor is <em>undefined</em>.</p>\n\n<p>Your <code>foo</code> type is converted to a <code>char*</code> by <em>pointer decay</em>, then an implicit conversion to <code>const char*</code> occurs at the calling site.</p>\n\n<p>Perhaps there could have been a templatised <code>std::string</code> constructor taking a <code>const char[N]</code> as an argument, which would have allowed the insertion of more than one NUL character (the <code>std::string</code> class after all does support that), but it was not introduced and to do so now would be a breaking change; using</p>\n\n<pre><code>std::string foo{std::begin(foo), std::end(foo)};\n</code></pre>\n\n<p>will also copy the entire array <code>foo</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1539777695, "post_id": 52854204, "comment_id": 92623903, "body": "It might be worth emphasizing that &quot;You must initialize that data <i>past <code>\\0</code></i> before you use it,&quot; also includes using it in `std::string banz(foo, sizeof foo);``"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1539777816, "post_id": 52854204, "comment_id": 92623979, "body": "@Caleth I know + with the last edit of the answer, I dont see anymore a chance of getting it wrong, comment deleted"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1539778098, "post_id": 52854204, "comment_id": 92624141, "body": "I don&#39;t think reading indeterminate chars is not UB; that is not true of other types."}, {"owner": {"reputation": 12896, "user_id": 104774, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/gQmt5.jpg?s=128&g=1", "display_name": "stefaanv", "link": "https://stackoverflow.com/users/104774/stefaanv"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1539778342, "post_id": 52854204, "comment_id": 92624283, "body": "@Yakk-AdamNevraumont: in your first sentence, you have a double negative. This is UB in English."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1539778480, "post_id": 52854204, "comment_id": 92624365, "body": "@Yakk-AdamNevraumont And in C++ access to uninitialized scalar values (and just about all types except class and array types are scalar, most importantly <code>char</code> is a scalar type) is UB."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1539779122, "post_id": 52854204, "comment_id": 92624794, "body": "You can use <code>char foo[64] = {};</code> too in newer standards; an important departure from C."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1539779517, "post_id": 52854204, "comment_id": 92625008, "body": "@some depends if the char is unsigned it turns out: <a href=\"https://wiki.sei.cmu.edu/confluence/plugins/servlet/mobile?contentId=88046609#content/view/88046609\" rel=\"nofollow noreferrer\">wiki.sei.cmu.edu/confluence/plugins/servlet/&hellip;</a>"}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539779525, "post_id": 52854204, "comment_id": 92625015, "body": "it&#39;s relatively old now. New is \t<code>char e[50]{};</code>"}, {"owner": {"reputation": 710, "user_id": 1518951, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5822f1c609c33b472d347893433c0810?s=128&d=identicon&r=PG", "display_name": "hehe3301", "link": "https://stackoverflow.com/users/1518951/hehe3301"}, "edited": false, "score": 0, "creation_date": 1539781434, "post_id": 52854204, "comment_id": 92626242, "body": "So as I understand this, as long as the fixed size char[] is initialized to the null terminator the string constructor will only include up to and including the first null terminator. So the size of <code>banz</code> would be 11, 10 chars plus null terminator? `banz.compare(&quot;0123456789&quot;) would return 0?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 710, "user_id": 1518951, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5822f1c609c33b472d347893433c0810?s=128&d=identicon&r=PG", "display_name": "hehe3301", "link": "https://stackoverflow.com/users/1518951/hehe3301"}, "edited": false, "score": 0, "creation_date": 1539781797, "post_id": 52854204, "comment_id": 92626477, "body": "@hehe3301 With the initialization of <code>banz</code> you show in your question, yes that&#39;s correct. Except that the length of the string is <code>10</code>, as the terminator is not counted."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 7, "last_activity_date": 1540130509, "last_edit_date": 1540130509, "creation_date": 1539776979, "answer_id": 52854204, "question_id": 52854079, "link": "https://stackoverflow.com/questions/52854079/how-does-the-stdstring-constructor-handle-char-of-fixed-size/52854204#52854204", "title": "How does the std::string constructor handle char[] of fixed size?", "body": "<p>First you have to remember (or know) that <code>char</code> strings in C++ are really called <strong><em>null-terminated</strong> byte strings</em>. That <em>null-terminated</em> bit is a special character (<code>'\\0'</code>) that tells the end of the string.</p>\n\n<p>The second thing you have to remember (or know) is that arrays naturally decays to pointers to the arrays first element. In the case of <code>foo</code> from your example, when you use <code>foo</code> the compiler really does <code>&amp;foo[0]</code>.</p>\n\n<p>Finally, if we look at e.g. <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/basic_string\" rel=\"nofollow noreferrer\">this <code>std::string</code> constructor reference</a> you will see that there is an overload (number 5) that accepts a <code>const CharT*</code> (with <code>CharT</code> being a <code>char</code> for normal <code>char</code> strings).</p>\n\n<p>Putting it all together, with</p>\n\n<pre><code>std::string banz(foo);\n</code></pre>\n\n<p>you pass a pointer to the first character of <code>foo</code>, and the <code>std::string</code> constructor will treat it as a null-terminated byte string. And from finding the null-terminator it knows the length of the string. The actual size of the array is irrelevant and not used.</p>\n\n<p>If you want to set the size of the <code>std::string</code> object, you need to explicitly do it by passing a length argument (variant 4 in the constructor reference):</p>\n\n<pre><code>std::string banz(foo, sizeof foo);\n</code></pre>\n\n<p>This will ignore the null-terminator and set the length of <code>banz</code> to the size of the array. Note that the null-terminator will still be stored in the string, so passing a pointer (as retrieved by e.g. the <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/c_str\" rel=\"nofollow noreferrer\"><code>c_str</code></a> function) to a function which expects a null-terminated string, then the string will seem short. Also note that the data after the null-terminator will be <em>uninitialized</em> and have <em>indeterminate</em> contents. You <em>must</em> initialize that data before you use it, otherwise you will have <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><em>undefined behavior</em></a> (and in C++ even reading indeterminate data is UB).</p>\n\n<hr>\n\n<p>As mentioned in a comment from MSalters, the UB from reading uninitialized and indeterminate data also goes for the construction of the <code>banz</code> object using an explicit size. It will typically work and not lead to any problems, but it does break the rules set out in the C++ specification.</p>\n\n<p>Fixing it is easy though:</p>\n\n<pre><code>char foo[64] = { 0 };//can hold up to 64\n</code></pre>\n\n<p>The above will initialize <em>all</em> of the array to zero. The following <code>strcpy</code> call will not touch the data of the array beyond the terminator, and as such the remainder of the array will be initialized.</p>\n"}], "owner": {"reputation": 710, "user_id": 1518951, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5822f1c609c33b472d347893433c0810?s=128&d=identicon&r=PG", "display_name": "hehe3301", "link": "https://stackoverflow.com/users/1518951/hehe3301"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 1, "accepted_answer_id": 52854204, "answer_count": 2, "score": 4, "last_activity_date": 1540130509, "creation_date": 1539776612, "question_id": 52854079, "link": "https://stackoverflow.com/questions/52854079/how-does-the-stdstring-constructor-handle-char-of-fixed-size", "title": "How does the std::string constructor handle char[] of fixed size?", "body": "<p>How does the string constructor handle <code>char[]</code> of a fixed size when the actual sequence of characters in that <code>char[]</code> could be smaller than the maximum size?</p>\n\n<pre><code>char foo[64];//can hold up to 64\nchar* bar = \"0123456789\"; //Much less than 64 chars, terminated with '\\0'\nstrcpy(foo,bar); //Copy shorter into longer\nstd::string banz(foo);//Make a large string\n</code></pre>\n\n<p>In this example will the size of the <code>banz</code> objects string be based on the original char* length or the char[] that it is copied into?</p>\n"}, {"tags": ["c++", "struct", "clang-format"], "comments": [{"owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "edited": false, "score": 1, "creation_date": 1539777430, "post_id": 52854043, "comment_id": 92623724, "body": "This is just wrong. It looks like a function or class. Put the brackets after the = sign"}, {"owner": {"reputation": 646, "user_id": 2012725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/31339f862c8a45653f7fceeafa97baed?s=128&d=identicon&r=PG", "display_name": "Yucel_K", "link": "https://stackoverflow.com/users/2012725/yucel-k"}, "edited": false, "score": 0, "creation_date": 1539777669, "post_id": 52854043, "comment_id": 92623878, "body": "what is the reason you want to do this?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "edited": false, "score": 2, "creation_date": 1539777887, "post_id": 52854043, "comment_id": 92624021, "body": "@PetarVelev - Let&#39;s not turn this into a religious war, shall we?"}, {"owner": {"reputation": 350, "user_id": 1443936, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8999906ab91881ba2f5c58f91e8a7c44?s=128&d=identicon&r=PG", "display_name": "AlexandreP", "link": "https://stackoverflow.com/users/1443936/alexandrep"}, "reply_to_user": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "edited": false, "score": 1, "creation_date": 1539777949, "post_id": 52854043, "comment_id": 92624053, "body": "I agree with you @PetarVelev, but this style is expected in my new job..."}, {"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1539792840, "post_id": 52854043, "comment_id": 92633338, "body": "Why do you have to use structs inside vectors, why not use classes instead...???"}], "owner": {"reputation": 350, "user_id": 1443936, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8999906ab91881ba2f5c58f91e8a7c44?s=128&d=identicon&r=PG", "display_name": "AlexandreP", "link": "https://stackoverflow.com/users/1443936/alexandrep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1539776786, "creation_date": 1539776494, "last_edit_date": 1539776786, "question_id": 52854043, "link": "https://stackoverflow.com/questions/52854043/break-after-braces-in-initializer", "title": "Break after braces in initializer", "body": "<p>I am looking on how to make clang-format allowing this format:</p>\n\n<pre><code>std::vector&lt;MyStruct&gt; data = \n{\n  {\n    0,\n    true\n  },\n  {\n    1,\n    false\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "pragma"], "comments": [{"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1539776639, "post_id": 52854000, "comment_id": 92623239, "body": "@Neil this duplicate is wrong IMHO. There is no single template argument!"}, {"owner": {"reputation": 9345, "user_id": 1021920, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VukgG.jpg?s=128&g=1", "display_name": "hellow", "link": "https://stackoverflow.com/users/1021920/hellow"}, "edited": false, "score": 0, "creation_date": 1539776654, "post_id": 52854000, "comment_id": 92623250, "body": "Your &#39;list.h&#39; file is missing include guards (but your main.cpp has one, which is wrong)."}, {"owner": {"reputation": 2213, "user_id": 7757891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/472798cf3c4d45c418314f837590985c?s=128&d=identicon&r=PG&f=1", "display_name": "Petar Velev", "link": "https://stackoverflow.com/users/7757891/petar-velev"}, "edited": false, "score": 0, "creation_date": 1539776747, "post_id": 52854000, "comment_id": 92623306, "body": "Except for the include guard, there is nothing wrong with the code"}], "owner": {"reputation": 1, "user_id": 10517747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GSbZH.jpg?s=128&g=1", "display_name": "Kseniia", "link": "https://stackoverflow.com/users/10517747/kseniia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 14, "favorite_count": 0, "closed_date": 1539776542, "answer_count": 0, "score": 0, "last_activity_date": 1539776440, "creation_date": 1539776344, "last_edit_date": 1539776440, "question_id": 52854000, "link": "https://stackoverflow.com/questions/52854000/multiple-definition-of-nodeprint-in-codeblocks", "closed_reason": "Duplicate", "title": "Multiple definition of `Node::print()&#39; in CodeBlocks", "body": "<p>I'm trying to write a <code>List</code> class, but have a problem:</p>\n\n<blockquote>\n  <p>E:\\junior_req\\test_project\\Node.cpp|6|multiple definition of `Node::print()'|</p>\n</blockquote>\n\n<p>My code: </p>\n\n<p>Node.h:</p>\n\n<pre><code>class Node {\n    Node* next;\n    int value;\npublic:\n    Node() {next = nullptr; value = 0;}\n    Node(int t) {this-&gt;value = t; next = nullptr;}\n    Node(const Node&amp; t) {this-&gt;next = t.next; value = t.value;}\n    ~Node() {}\n\n    int getValue() {return value;}\n    Node* getNext() {return next;}\n\n    void setValue(int t) {value = t;}\n    void setNext(Node* t) {next = t;}\n\n    Node&amp; operator=(Node t);\n\n    void print();\n};\n</code></pre>\n\n<p>Node.cpp</p>\n\n<pre><code>#include \"Node.h\"\n#include &lt;iostream&gt;\nusing namespace std;\nvoid Node::print() {\n    cout &lt;&lt; this-&gt;getValue() &lt;&lt; endl;\n    if(this-&gt;getNext() != nullptr) this-&gt;getNext()-&gt;print();\n}\n</code></pre>\n\n<p>List.h and List.cpp classes are same, but there are no errors. </p>\n\n<p>Main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"List.h\"\n#ifndef NODE_H\n#define NODE_H\nusing namespace std;\nint main()\n{\n    cout &lt;&lt; \"Hello world!\" &lt;&lt; endl;\n    List l;\n    l.add(1);\n    Node* one;\n    l.add(one);\n    one-&gt;print();\n    return 0;\n}\n#endif // NODE_H\n</code></pre>\n\n<p><code>#pragma once</code> doesn't help</p>\n\n<p>What is wrong with my code?</p>\n"}, {"tags": ["c#", "c++", "dll", "dllexport"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1539776238, "post_id": 52853755, "comment_id": 92623023, "body": "Functions that return char* are difficult.  Normally a big memory management problem since the storage for the string needs to be released.  Which is what the pinvoke marshaller tries to do, kaboom with 0xc0000374 since it is not stored on the heap.  In this specific case the storage should not be released at all since you use literals.   In other words, you actually return a const char*.  Change the return type to IntPtr, recover the string with Marshal.PtrToStringAnsi()."}, {"owner": {"reputation": 9884, "user_id": 2035029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52b0a22963bc260b4beff6f99b98df44?s=128&d=identicon&r=PG&f=1", "display_name": "Dirk", "link": "https://stackoverflow.com/users/2035029/dirk"}, "edited": false, "score": 1, "creation_date": 1539776636, "post_id": 52853755, "comment_id": 92623237, "body": "Unrelated to the problem, but I don&#39;t think you should compare <code>char *</code> using <code>name == &quot;sin&quot;</code>."}, {"owner": {"reputation": 227, "user_id": 8991986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2c22c6a8aad2a1099c5a1b7f9fda81f6?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/8991986/j-doe"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1539779405, "post_id": 52853755, "comment_id": 92624941, "body": "@HansPassant, thank you, it helped. But now I can&#39;t call Calc function as it attempts to access protected memory."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1539780169, "post_id": 52853755, "comment_id": 92625427, "body": "Dirk told you about that one, you must use strcmp() to compare strings.  Pretty crucial to be able to debug this so you can see this going wrong.  Project &gt; Properties &gt; Debug, tick &quot;Enable native code debugging&quot;.  Set breakpoints on set_func and calc."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539781088, "post_id": 52853755, "comment_id": 92626008, "body": "<code>name == &quot;sin&quot;</code> you just cant do this. try to use <code>std::map</code> for that"}], "owner": {"reputation": 227, "user_id": 8991986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2c22c6a8aad2a1099c5a1b7f9fda81f6?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/8991986/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 462, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539779248, "creation_date": 1539775547, "last_edit_date": 1539779248, "question_id": 52853755, "link": "https://stackoverflow.com/questions/52853755/program-crashes-when-trying-to-call-a-function-in-c-dll-from-c", "title": "Program crashes when trying to call a function in C++ DLL from C#", "body": "<p>I have a C++ dll that contains different trigonometry functions and some exported functions returning dll information and result:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;cmath&gt;\n#include &lt;iostream&gt;\n\ndouble(*mid)(double);\n\ndouble csin(double x) {\n    return std::sin(x);\n}\n\ndouble ccos(double x) {\n    return std::cos(x);\n}\n\ndouble ctan(double x) {\n    return std::tan(x);\n}\n\ndouble ccot(double x) {\n    return 1 / std::tan(x);\n}\n\nextern \"C\" _declspec(dllexport) char* __stdcall get_name() {\n    char * name = \"Trigonometry\";\n    return name;\n}\n\nextern \"C\" _declspec(dllexport) char* __stdcall get_info() {\n    char * name = \"sin|cos|tan|cot\";\n    return name;\n}\n\nextern \"C\" _declspec(dllexport) void __stdcall set_func(char *name) {\n    if (name == \"sin\") mid = &amp;csin;\n    if (name == \"cos\") mid = &amp;ccos;\n    if (name == \"tan\") mid = &amp;ctan; \n    if (name == \"cot\") mid = &amp;ccot;\n}\n\nextern \"C\" _declspec(dllexport) double __stdcall calc(double x){\n    return mid(x);\n};\n</code></pre>\n\n<p>In C# program I try to call <code>GetName()</code> function to get the name of my dll but the program crashes with the message that the program exited with the code -1073740940 (0xc0000374).</p>\n\n<p>Here is a part of code where program crashes (it happens when the last line is executed):</p>\n\n<pre><code>IntPtr plugin = LoadLibrary(filename);\nif (plugin == IntPtr.Zero)\n{\n    Console.WriteLine(\"Failed to load plugin!\");\n    return;\n}\n\nIntPtr func_gn = GetProcAddress(plugin, \"_get_name@0\");\nIntPtr func_gi = GetProcAddress(plugin, \"_get_info@0\");\nIntPtr func_se = GetProcAddress(plugin, \"_set_func@4\");\nIntPtr func_ca = GetProcAddress(plugin, \"_calc@8\");\nif (func_gn == IntPtr.Zero || func_ca == IntPtr.Zero || func_gi == IntPtr.Zero || func_se == IntPtr.Zero)\n{\n    Console.WriteLine(\"Missing some functions!\");\n    return;\n}\n\nBase b = new Base(plugin,\n      (Base.InfoDelegate)Marshal.GetDelegateForFunctionPointer(func_gn, typeof(Base.InfoDelegate)),\n      (Base.InfoDelegate)Marshal.GetDelegateForFunctionPointer(func_gi, typeof(Base.InfoDelegate)),\n      (Base.SetDelegate)Marshal.GetDelegateForFunctionPointer(func_se, typeof(Base.SetDelegate)),\n      (Base.CalcDelegate)Marshal.GetDelegateForFunctionPointer(func_ca, typeof(Base.CalcDelegate)));\n\nConsole.WriteLine(\"Plugin {0} loaded\", b.GetName()); // &lt;- crash here\n</code></pre>\n\n<p><code>Base</code> class:</p>\n\n<pre><code>class Base\n{\n    [UnmanagedFunctionPointer(CallingConvention.StdCall)]\n    public delegate string InfoDelegate();\n    [UnmanagedFunctionPointer(CallingConvention.StdCall)]\n    public delegate void SetDelegate(string fname);\n    [UnmanagedFunctionPointer(CallingConvention.StdCall)]\n    public delegate double CalcDelegate(double x);\n\n    public IntPtr dll;\n    public InfoDelegate GetName;\n    public InfoDelegate GetInfo;\n    public SetDelegate SetFunc;\n    public CalcDelegate Calc;\n\n    public Base(IntPtr dll, InfoDelegate name, InfoDelegate info, SetDelegate set, CalcDelegate calc)\n    {\n        this.dll = dll;\n        this.GetInfo = info;\n        this.GetName = name;\n        this.SetFunc = set;\n        this.Calc = calc;\n    }\n}\n</code></pre>\n\n<p>There is nothing in the console when the mentioned line is executed. It just closes without any error windows.</p>\n\n<p>What is the error and how to fix it?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Thanks to <code>Hans Passant</code> for his helpful answer. But there is another function that, as it turned out, does not work. I try to print the results of sin function for arguments in range between <code>start</code> and <code>end</code> with the <code>step</code> step. </p>\n\n<p>Here is the part of C# code where error happens:</p>\n\n<pre><code>plugin.SetFunc(\"sin\");\nConsole.WriteLine(\"Result:\");\nfor (double i = start; i &lt;= end; i += step)\n{\n    Console.WriteLine(plugin.Calc(i)); // &lt;- crash here\n}\n</code></pre>\n\n<p>It throws <code>System.AccessViolationException</code>. It says that there is attempt to  access protected memory. I think it is because of that mid pointer in the 5th line of dll code. Is there a way to get over the problem?</p>\n"}, {"tags": ["c++", "dll", "visual-studio-2017", "linker-errors"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 3, "creation_date": 1539775435, "post_id": 52853613, "comment_id": 92622573, "body": "It needs to be dllexport in the DLL that defines it, but dllimport in any code that uses it."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539785955, "post_id": 52853613, "comment_id": 92629277, "body": "this all looks plain wrong.What do you mean by &quot;link&quot;?if you have two independent modules running you cant <code>extern</code> smth from one to another"}], "answers": [{"comments": [{"owner": {"reputation": 925, "user_id": 1480966, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/qYC9t.jpg?s=128&g=1", "display_name": "krsi", "link": "https://stackoverflow.com/users/1480966/krsi"}, "reply_to_user": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1539781229, "post_id": 52854124, "comment_id": 92626108, "body": "@Ruks I made this a full answer, and reverted question back to the original question."}, {"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1539781451, "post_id": 52854124, "comment_id": 92626255, "body": "I would avoid the name DECLSPEC here. The word <code>declspec</code> in all casing variants should be reserved for the operation of specifying a declaration. The result should describe the intention like FUNCTIONS_API, similar to WINAPI for Windows API functions."}, {"owner": {"reputation": 925, "user_id": 1480966, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/qYC9t.jpg?s=128&g=1", "display_name": "krsi", "link": "https://stackoverflow.com/users/1480966/krsi"}, "reply_to_user": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1539781870, "post_id": 52854124, "comment_id": 92626522, "body": "@harper I changed my answer according to your suggestion."}], "tags": [], "owner": {"reputation": 925, "user_id": 1480966, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/qYC9t.jpg?s=128&g=1", "display_name": "krsi", "link": "https://stackoverflow.com/users/1480966/krsi"}, "is_accepted": true, "score": 0, "last_activity_date": 1539781820, "last_edit_date": 1539781820, "creation_date": 1539776740, "answer_id": 52854124, "question_id": 52853613, "link": "https://stackoverflow.com/questions/52853613/how-to-define-runtime-constants-in-a-dll-and-use-them-in-another-dll/52854124#52854124", "title": "How to define runtime constants in a DLL and use them in another DLL?", "body": "<p><code>Constants.h</code> should be:</p>\n\n<pre><code>#pragma once\n\n#ifdef CONSTANTS_DLLEXPORT\n#define CONSTANTS_API __declspec(dllexport)\n#else\n#define CONSTANTS_API __declspec(dllimport)\n#endif\n\nCONSTANTS_API extern const int ID1;\nCONSTANTS_API extern const int ID2;\n\nnamespace {\n\n    int nextID();\n\n}\n</code></pre>\n\n<p><code>Functions.h</code> should be:</p>\n\n<pre><code>#pragma once\n\n#ifdef FUNCTIONS_DLLEXPORT\n#define FUNCTIONS_API __declspec(dllexport)\n#else\n#define FUNCTIONS_API __declspec(dllimport)\n#endif\n\nFUNCTIONS_API int getID1();\nFUNCTIONS_API int getID2();\n</code></pre>\n\n<p>And then <code>FUNCTIONS_DLLEXPORT</code> needs to be added to the 'Preprocessor Definitions' of <code>'Functions'</code> project, and <code>CONSTANTS_DLLEXPORT</code> to the 'Preprocessor Definitions' of the <code>'Constants'</code> project.</p>\n"}], "owner": {"reputation": 925, "user_id": 1480966, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/qYC9t.jpg?s=128&g=1", "display_name": "krsi", "link": "https://stackoverflow.com/users/1480966/krsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 52854124, "answer_count": 1, "score": 2, "last_activity_date": 1539781820, "creation_date": 1539775063, "last_edit_date": 1539781110, "question_id": 52853613, "link": "https://stackoverflow.com/questions/52853613/how-to-define-runtime-constants-in-a-dll-and-use-them-in-another-dll", "title": "How to define runtime constants in a DLL and use them in another DLL?", "body": "<p>I created this example as 3 Visual Studio projects: a DLL library named <code>'Constants'</code> that contains runtime constants (<code>IDs</code>), another DLL library named <code>'Functions'</code> that uses the constants from the first library, and a console EXE that prints out constants by calling functions from the <code>'Functions'</code> library.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zVWXd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zVWXd.png\" alt=\"enter image description here\"></a></p>\n\n<h3>Constants/src/Constants.h:</h3>\n\n<pre><code>#pragma once\n\n__declspec(dllexport) extern const int ID1;\n__declspec(dllexport) extern const int ID2;\n\nnamespace {\n\n    int nextID();\n\n}\n</code></pre>\n\n<h3>Constants/src/Constants.cpp:</h3>\n\n<pre><code>#include \"Constants.h\"\n\nconst int ID1 = nextID();\nconst int ID2 = nextID();\n\nnamespace {\n    int nextID() {\n        static int ID = 0;\n        return ID++;\n    }\n}\n</code></pre>\n\n<h3>Functions/src/Functions.h:</h3>\n\n<pre><code>#pragma once\n\n__declspec(dllexport) int getID1();\n__declspec(dllexport) int getID2();\n</code></pre>\n\n<h3>Functions/src/Functions.cpp:</h3>\n\n<pre><code>#include \"Functions.h\"\n#include \"Constants.h\"\n\nint getID1() {\n    return ID1;\n}\n\nint getID2() {\n    return ID2;\n}\n</code></pre>\n\n<h3>Console/src/Main.cpp:</h3>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Functions.h&gt;\n\nint main() {\n    std::cout &lt;&lt; \"Library Constants: \" &lt;&lt; std::endl;\n    std::cout &lt;&lt; getID1() &lt;&lt; std::endl;\n    std::cout &lt;&lt; getID2() &lt;&lt; std::endl;\n    std::cin.get();\n    return 0;\n}\n</code></pre>\n\n<p>If I link <code>'Constants'</code> library directly to the EXE and print constants directly, then everything works fine, but if I link <code>'Constants'</code> to the <code>'Functions'</code> and then <code>'Functions'</code> to the EXE (print using <code>getID</code> functions) then I get this error:</p>\n\n<pre><code>1&gt;------ Rebuild All started: Project: Constants, Configuration: Debug Win32 ------\n1&gt;Constants.cpp\n1&gt;   Creating library C:\\dev\\DLLTest\\bin\\Win32\\Debug\\constants.lib and object C:\\dev\\DLLTest\\bin\\Win32\\Debug\\constants.exp\n1&gt;Constants.vcxproj -&gt; C:\\dev\\DLLTest\\bin\\Win32\\Debug\\constants.dll\n2&gt;------ Rebuild All started: Project: Functions, Configuration: Debug Win32 ------\n2&gt;Functions.cpp\n2&gt;   Creating library C:\\dev\\DLLTest\\bin\\Win32\\Debug\\functions.lib and object C:\\dev\\DLLTest\\bin\\Win32\\Debug\\functions.exp\n2&gt;Functions.obj : error LNK2001: unresolved external symbol \"int const ID1\" (?ID1@@3HB)\n2&gt;Functions.obj : error LNK2001: unresolved external symbol \"int const ID2\" (?ID2@@3HB)\n2&gt;C:\\dev\\DLLTest\\bin\\Win32\\Debug\\functions.dll : fatal error LNK1120: 2 unresolved externals\n2&gt;Done building project \"Functions.vcxproj\" -- FAILED.\n3&gt;------ Rebuild All started: Project: Console, Configuration: Debug Win32 ------\n3&gt;Main.cpp\n3&gt;Console.vcxproj -&gt; C:\\dev\\DLLTest\\bin\\Win32\\Debug\\console.exe\n========== Rebuild All: 2 succeeded, 1 failed, 0 skipped ==========\n</code></pre>\n\n<p>I don't understand why linking from DLL to DLL in this case fails.</p>\n"}, {"tags": ["java", "c++", "compiler-errors", "java-native-interface", "invocation"], "answers": [{"comments": [{"owner": {"reputation": 177, "user_id": 10508687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89516702398893e9a4602b0102c331d5?s=128&d=identicon&r=PG&f=1", "display_name": "Ddor", "link": "https://stackoverflow.com/users/10508687/ddor"}, "edited": false, "score": 1, "creation_date": 1539776914, "post_id": 52853897, "comment_id": 92623414, "body": "This makes perfect sense now. Thanks."}, {"owner": {"reputation": 177, "user_id": 10508687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89516702398893e9a4602b0102c331d5?s=128&d=identicon&r=PG&f=1", "display_name": "Ddor", "link": "https://stackoverflow.com/users/10508687/ddor"}, "edited": false, "score": 0, "creation_date": 1539777237, "post_id": 52853897, "comment_id": 92623616, "body": "Is there a more elegant way of assigning the jvalues to the array elements (in case I want to pass a much longer list of arguments to the constructors).?"}, {"owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "reply_to_user": {"reputation": 177, "user_id": 10508687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89516702398893e9a4602b0102c331d5?s=128&d=identicon&r=PG&f=1", "display_name": "Ddor", "link": "https://stackoverflow.com/users/10508687/ddor"}, "edited": false, "score": 0, "creation_date": 1539777268, "post_id": 52853897, "comment_id": 92623632, "body": "@Ddor Using loop? If you have longer list of arguments as array."}], "tags": [], "owner": {"reputation": 12106, "user_id": 4431643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CoZjt.jpg?s=128&g=1", "display_name": "kiran Biradar", "link": "https://stackoverflow.com/users/4431643/kiran-biradar"}, "is_accepted": true, "score": 1, "last_activity_date": 1539776389, "last_edit_date": 1539776389, "creation_date": 1539776004, "answer_id": 52853897, "question_id": 52853474, "link": "https://stackoverflow.com/questions/52853474/error-creating-args-array-of-jvalues-for-newobjecta-function-jni-invocation/52853897#52853897", "title": "Error creating args array of jvalues for NewObjectA() function - JNI Invocation API", "body": "<p>The <code>jvalue</code> is of type union.</p>\n\n<p>And it is declared as follows:</p>\n\n<pre><code>typedef union jvalue { \n    jboolean z; \n    jbyte    b; \n    jchar    c; \n    jshort   s; \n    jint     i; \n    jlong    j; \n    jfloat   f; \n    jdouble  d; \n    jobject  l; \n} jvalue;\n</code></pre>\n\n<p>If you want to assign <code>jstring</code> to <code>jvalue</code> you could do as below.</p>\n\n<pre><code>jvalue FileLocationParams[2];\nFileLocationParams[0].l = home;\nFileLocationParams[1].l = filename;\n</code></pre>\n\n<p>Instead of </p>\n\n<pre><code>jvalue FileLocationParams[] = {home,filename};  // COMPILE ERROR HERE.\n</code></pre>\n\n<p>As it will try to assign <code>home</code> and <code>filename</code> to first member of <code>jvalue</code> which is <code>jboolean z</code>.</p>\n"}], "owner": {"reputation": 177, "user_id": 10508687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89516702398893e9a4602b0102c331d5?s=128&d=identicon&r=PG&f=1", "display_name": "Ddor", "link": "https://stackoverflow.com/users/10508687/ddor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 52853897, "answer_count": 1, "score": 1, "last_activity_date": 1539776389, "creation_date": 1539774635, "question_id": 52853474, "link": "https://stackoverflow.com/questions/52853474/error-creating-args-array-of-jvalues-for-newobjecta-function-jni-invocation", "title": "Error creating args array of jvalues for NewObjectA() function - JNI Invocation API", "body": "<p>I'm trying to create a jobject in C++ by calling the NewObjectA() function using the JNI invocation API. However, I am unsure how I should pass arguments into the constructor. The JNI API documentation states:</p>\n\n<blockquote>\n  <p>jobject NewObjectA(JNIEnv *env, jclass clazz,jmethodID methodID, const\n  jvalue *args);</p>\n  \n  <p>NewObjectA</p>\n  \n  <p>Programmers place all arguments that are to be passed to the\n  constructor in an args array of jvalues that immediately follows the\n  methodID argument. NewObjectA() accepts the arguments in this array,\n  and, in turn, passes them to the Java method that the programmer\n  wishes to invoke.</p>\n</blockquote>\n\n<p>In my case the constructor requires two java strings passed to it. I have therefore tried the following:</p>\n\n<pre><code>jclass jcls_File = env-&gt;FindClass(\"java/io/File\");\njmethodID  File_constructor = env-&gt;GetMethodID(jcls_File, \"&lt;init&gt;\",\"(Ljava/lang/String;Ljava/lang/String;)V\");\njstring home = ctojstring(env,\"/home/workspace\");\njstring filename = ctojstring(env,\"mydatafile\");\njvalue FileLocationParams[] = {home,filename};  // COMPILE ERROR HERE.\njobject MyDataFile = env-&gt;NewObjectA(jcls_File, File_constructor,FileLocationParams);\n</code></pre>\n\n<p>Where ctojstring is just the following function:</p>\n\n<pre><code>jstring ctojstring(JNIEnv *env,std::string mystring){\n    return env-&gt;NewStringUTF(mystring.c_str());\n}\n</code></pre>\n\n<p>But when I try to compile I get the following error in Eclipse:</p>\n\n<p><strong>error: invalid conversion from \u2018jstring {aka _jstring*}\u2019 to \u2018jboolean {aka unsigned char}\u2019 [-fpermissive]</strong></p>\n\n<p>Any thoughts on why this is happening?</p>\n"}, {"tags": ["c++", "qt", "qt5", "qgraphicstextitem", "qpropertyanimation"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1539783283, "post_id": 52853322, "comment_id": 92627450, "body": "As an aside, why are you defining a new <code>pos</code> property.  <code>QGraphicsTextItem</code> already has a <code>pos</code> property inherited from <a href=\"http://doc.qt.io/qt-5/qgraphicsobject.html#pos-prop\" rel=\"nofollow noreferrer\"><code>QGraphicsObject</code></a>."}, {"owner": {"reputation": 429, "user_id": 2835245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd6593a1a99a7e057aac33501cfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "plover", "link": "https://stackoverflow.com/users/2835245/plover"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1539783493, "post_id": 52853322, "comment_id": 92627607, "body": "it was just leftover from another test code I did. I will edit it out, but it doesn&#39;t change the result, the text shakes in the box."}], "answers": [{"comments": [{"owner": {"reputation": 429, "user_id": 2835245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd6593a1a99a7e057aac33501cfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "plover", "link": "https://stackoverflow.com/users/2835245/plover"}, "edited": false, "score": 0, "creation_date": 1539781742, "post_id": 52855139, "comment_id": 92626441, "body": "Thanks for your answer. I tested it with a solution I was working on and it seems to have a similar effect.  by adding &#39; Q_PROPERTY( QPointF pos READ pos WRITE setPosition )&#39; and flooring the QPointF. I will add a solution for that as well."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 429, "user_id": 2835245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd6593a1a99a7e057aac33501cfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "plover", "link": "https://stackoverflow.com/users/2835245/plover"}, "edited": false, "score": 0, "creation_date": 1539782266, "post_id": 52855139, "comment_id": 92626771, "body": "@plover, have you tested the code as it is provided by me? Then the flickering is removed. Also, adding <code>Q_PROPERTY( QPointF pos READ pos WRITE setPosition )</code> doesn&#39;t lead to flicker."}, {"owner": {"reputation": 429, "user_id": 2835245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd6593a1a99a7e057aac33501cfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "plover", "link": "https://stackoverflow.com/users/2835245/plover"}, "edited": false, "score": 0, "creation_date": 1539782478, "post_id": 52855139, "comment_id": 92626914, "body": "Yes I&#39;ve tested my new solution and your solution side by side. Both show promising results. I have to test it in my code base (this is only a tiny example code), to see what is better there."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "reply_to_user": {"reputation": 429, "user_id": 2835245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd6593a1a99a7e057aac33501cfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "plover", "link": "https://stackoverflow.com/users/2835245/plover"}, "edited": false, "score": 0, "creation_date": 1539782595, "post_id": 52855139, "comment_id": 92626993, "body": "@plover, just copying the content of <code>MovingFrameText::paint</code> should be enough."}], "tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 2, "last_activity_date": 1539780615, "last_edit_date": 1592644375, "creation_date": 1539780168, "answer_id": 52855139, "question_id": 52853322, "link": "https://stackoverflow.com/questions/52853322/qpropertyanimation-of-a-qgraphicstextitem-with-a-frame-make-the-text-shaky/52855139#52855139", "title": "QPropertyAnimation of a QGraphicsTextItem with a frame make the text shaky", "body": "<h1>Solution</h1>\n<p>You can substantially improve the animation by:</p>\n<ol>\n<li>Using <a href=\"http://doc.qt.io/qt-5/qvariantanimation.html\" rel=\"nofollow noreferrer\"><code>QVariantAnimation</code></a> instead of <code>QPropertyAnimation</code> and calling <a href=\"http://doc.qt.io/qt-5/qgraphicsitem.html#update\" rel=\"nofollow noreferrer\"><code>QGraphicsItem::update</code></a> on each iteration</li>\n<li>Buffering the painting using an additional <code>QPainter</code> with a <code>QPixmap</code> as a canvas for all painting operations and then painting the canvas using the painter passed to the <code>paint</code> method</li>\n</ol>\n<p><strong>Note:</strong> The <code>QGraphicsTextItem</code> will still shake a bit, but at least it will behave as one object instead of several independent ones.</p>\n<h1>Example</h1>\n<p>Here is an example I have prepared for you of how your code could be changed in order to implement the proposed solution:</p>\n<pre><code>class MovingFrameText : public QGraphicsTextItem\n{\npublic:\n    MovingFrameText(const QString &amp;text, QGraphicsItem *parent = nullptr)\n        : QGraphicsTextItem(parent)\n    {\n        QFont f(font());\n\n        f.setPixelSize(40);\n\n        setFont(f);\n        setPlainText(text);\n    }\n\n    void paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)\n    {\n        painter-&gt;setClipping(true);\n        painter-&gt;setClipRect(option-&gt;rect);\n        painter-&gt;setRenderHint(QPainter::SmoothPixmapTransform);\n\n        QPixmap canvas(option-&gt;rect.size());\n        QPainter canvasPainter;\n\n        canvas.fill(Qt::transparent);\n\n        canvasPainter.begin(&amp;canvas);\n\n        canvasPainter.setFont(font());\n        canvasPainter.drawRect(option-&gt;rect.adjusted(0, 0, -1, -1));\n        canvasPainter.drawText(option-&gt;rect, toPlainText());\n\n        painter-&gt;drawPixmap(0, 0, canvas);\n    }\n};\n\nint main(int argc, char *argv[])\n{\n    QApplication app(argc,argv);\n\n    QGraphicsView view;\n    auto *t = new MovingFrameText(&quot;human&quot;);\n\n    view.setScene(new QGraphicsScene(&amp;view));\n    view.setAlignment(Qt::AlignLeft | Qt::AlignTop);\n    view.setSceneRect(0, 0, 640, 680);\n    view.scene()-&gt;addItem(t);\n    view.show();\n\n    auto *moveAnimation = new QVariantAnimation();\n\n    moveAnimation-&gt;setDuration(10000);\n    moveAnimation-&gt;setStartValue(QPointF(640, 680));\n    moveAnimation-&gt;setEndValue(QPointF(0, 0));\n    moveAnimation-&gt;start(QAbstractAnimation::DeleteWhenStopped);\n\n    QObject::connect(moveAnimation, &amp;QVariantAnimation::valueChanged, [t](const QVariant &amp;value){\n        t-&gt;setPos(value.toPointF());\n        t-&gt;update();\n    });\n\n    return app.exec();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1539786077, "post_id": 52856454, "comment_id": 92629353, "body": "What about the combination of both? I mean buffering the painting operations plus  flooring the position."}], "tags": [], "owner": {"reputation": 429, "user_id": 2835245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd6593a1a99a7e057aac33501cfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "plover", "link": "https://stackoverflow.com/users/2835245/plover"}, "is_accepted": false, "score": 1, "last_activity_date": 1539783988, "creation_date": 1539783988, "answer_id": 52856454, "question_id": 52853322, "link": "https://stackoverflow.com/questions/52853322/qpropertyanimation-of-a-qgraphicstextitem-with-a-frame-make-the-text-shaky/52856454#52856454", "title": "QPropertyAnimation of a QGraphicsTextItem with a frame make the text shaky", "body": "<p>@scopchanov answer is a very good one.  I added here a solution I tested as well, and seems to work. I will need further time to inspect which one I think is better, but I will leave it here for others to try, if you end with a similar issue.    </p>\n\n<pre><code>class MovingFrameText : public QGraphicsTextItem\n{\n\n   Q_PROPERTY( QPointF pos READ pos WRITE setPosition )\n   public:\n\n    void setPosition(QPointF pos)\n    {\n       setPos(floor(pos.x()+0.5),floor(pos.y()+.5) );\n    }\n\n};\n</code></pre>\n"}], "owner": {"reputation": 429, "user_id": 2835245, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccd6593a1a99a7e057aac33501cfda5a?s=128&d=identicon&r=PG&f=1", "display_name": "plover", "link": "https://stackoverflow.com/users/2835245/plover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 52855139, "answer_count": 2, "score": 1, "last_activity_date": 1539784901, "creation_date": 1539774063, "last_edit_date": 1539784901, "question_id": 52853322, "link": "https://stackoverflow.com/questions/52853322/qpropertyanimation-of-a-qgraphicstextitem-with-a-frame-make-the-text-shaky", "title": "QPropertyAnimation of a QGraphicsTextItem with a frame make the text shaky", "body": "<p>I am animating a <code>QGraphicsTextItem</code> that I have added a frame around. During the animation the text seems to shake slightly inside the frame, which is very annoying.</p>\n\n<p>An example code:</p>\n\n<pre><code>class MovingFrameText : public QGraphicsTextItem\n{\n    Q_OBJECT;\n\n   public:\n      MovingFrameText( ) : QGraphicsTextItem(0)\n      {\n         setPlainText ( \"human \");\n         QFont f =  font();\n         f.setPixelSize(40);\n         setFont(f);\n         setFlags(QGraphicsItem::ItemIsMovable);\n      }\n\n      QRectF boundingRect() const\n      {\n         return QGraphicsTextItem::boundingRect().adjusted(-2,-2,+2,+2);\n      }\n\n      void paint(QPainter *painter,const QStyleOptionGraphicsItem *option,QWidget *widget)\n      {\n         QGraphicsTextItem::paint(painter,option,widget);\n         painter-&gt;setPen(Qt::black);\n         painter-&gt;drawRect(boundingRect());\n      }\n\n};\n\nint main(int argc, char *argv[])\n{\n   QApplication app(argc,argv);\n\n\n   MovingFrameText t;\n   t.setPos(640,680);\n\n   QGraphicsScene scene;\n   scene.addItem(&amp;t);\n\n   QGraphicsView view(&amp;scene);\n   view.resize(640, 680);\n   view.show();\n\n    auto moveAnimation = new QPropertyAnimation( &amp;t,  \"pos\" );\n    moveAnimation-&gt;setDuration( 10000 );\n    moveAnimation-&gt;setStartValue( QPointF(640, 680) );\n    moveAnimation-&gt;setEndValue(  QPointF(0, 0) );\n    moveAnimation-&gt;setEasingCurve( QEasingCurve::Linear );\n    moveAnimation-&gt;start(QAbstractAnimation::DeleteWhenStopped);\n\n return app.exec();\n}\n</code></pre>\n\n<p>Is there any way to smooth the animation?</p>\n"}, {"tags": ["c++", "sockets", "connection-refused"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 9244482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d7b669febe05cbae5385ba36cd692e?s=128&d=identicon&r=PG&f=1", "display_name": "shobhit", "link": "https://stackoverflow.com/users/9244482/shobhit"}, "edited": false, "score": 0, "creation_date": 1539790318, "post_id": 52854854, "comment_id": 92632028, "body": "although i am on linux mint but i have tried changing this line inet_pton(0,address,&amp;URLaddress.sin_addr.s_addr); with //inet_pton(0,address,&amp;URLaddress.sin_addr.s_addr); and it is now at least connecting and giving some sort of output error: Success GET / HTTP/1.1 which is still not satisfactory but better than before.Thanks"}, {"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "reply_to_user": {"reputation": 95, "user_id": 9244482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d7b669febe05cbae5385ba36cd692e?s=128&d=identicon&r=PG&f=1", "display_name": "shobhit", "link": "https://stackoverflow.com/users/9244482/shobhit"}, "edited": false, "score": 1, "creation_date": 1539792686, "post_id": 52854854, "comment_id": 92633230, "body": "<code>Success</code> as the output of <code>perror</code> means there is no error. Did you print <code>response</code>?"}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": true, "score": 1, "last_activity_date": 1539779179, "creation_date": 1539779179, "answer_id": 52854854, "question_id": 52853202, "link": "https://stackoverflow.com/questions/52853202/connection-refused-while-trying-to-retrieve-html-from-http-website-using-sockets/52854854#52854854", "title": "Connection refused while trying to retrieve html from http website using sockets in C", "body": "<p>The following version of the code works on Windows/MSC:</p>\n\n<pre><code>int test(void)\n{\n    char *address;\n    int c_socket, con;\n    struct sockaddr_in URLaddress;\n    char request[] = \"GET / HTTP/1.1\\r\\n\\r\\n\";\n    char response[4096];\n    WORD wVersionRequested;\n    WSADATA wsaData;\n\n    wVersionRequested = MAKEWORD( 2, 2 );\n\n    address = \"151.101.13.5\";\n\n    if (WSAStartup (wVersionRequested, &amp;wsaData)!= 0) {\n        printf(\"DLL not found\\n\");\n        return -1;\n    }\n    if ((c_socket = socket(AF_INET, SOCK_STREAM, 0)) ==  INVALID_SOCKET ) {\n        printf(\"socket error: %d\\n\", WSAGetLastError());\n        return -1;\n    }\n\n    URLaddress.sin_family = AF_INET;\n    URLaddress.sin_port = htons(80);\n    URLaddress.sin_addr.s_addr= inet_addr(address);\n    con = connect(c_socket, (struct sockaddr*) &amp;URLaddress, sizeof(URLaddress));\n\n    send(c_socket, request, strlen(request), 0);\n    recv(c_socket, response, sizeof(response), 0);\n    WSACleanup();\n\n    printf (\"%s\\n\",response);\n\n    return 0;\n}\n</code></pre>\n\n<p>The repsonse is:</p>\n\n<pre><code>&lt;title&gt;Fastly error: unknown domain &lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;p&gt;Fastly error: unknown domain: . Please check that this domain has been added to a service.&lt;/p&gt;\n&lt;p&gt;Details: cache-fra19128-FRA&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;5\u00b8`\u00a1qu\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "is_accepted": false, "score": 0, "last_activity_date": 1540206920, "creation_date": 1540206920, "answer_id": 52928032, "question_id": 52853202, "link": "https://stackoverflow.com/questions/52853202/connection-refused-while-trying-to-retrieve-html-from-http-website-using-sockets/52928032#52928032", "title": "Connection refused while trying to retrieve html from http website using sockets in C", "body": "<p><code>inet_pton(3)</code> requires a first parameter to specify the address family and you have passed <code>0</code> for it (which is not the same as <code>AF_INET</code>), and you had to pass <code>AF_INET</code>, in accordance of the protocol family you are using.</p>\n\n<p><code>inet_pton(3)</code> is a protocol family independent conversion routine, but it needs to know what is the actual used to be able to convert addresses properly.</p>\n\n<p>By the way, is a server listening on the requested address and port?  have you tested that a browser is capable of getting something from that address before running your program?</p>\n"}], "owner": {"reputation": 95, "user_id": 9244482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7d7b669febe05cbae5385ba36cd692e?s=128&d=identicon&r=PG&f=1", "display_name": "shobhit", "link": "https://stackoverflow.com/users/9244482/shobhit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 52854854, "answer_count": 2, "score": 0, "last_activity_date": 1540206920, "creation_date": 1539773640, "last_edit_date": 1539775928, "question_id": 52853202, "link": "https://stackoverflow.com/questions/52853202/connection-refused-while-trying-to-retrieve-html-from-http-website-using-sockets", "title": "Connection refused while trying to retrieve html from http website using sockets in C", "body": "<p>I have made a pretty simple http client which would retrieve html from http website and print it. But there seems to be some problem while using connect() function.Using perror() I found that it is giving connection refused error.</p>\n\n<p>This is my code </p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n\n#include &lt;sys/socket.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n\nint main(int argc, char *argv[])\n{\n    char *address;\n    address = argv[1];\n\n    int c_socket = socket(AF_INET, SOCK_STREAM, 0);\n\n    struct sockaddr_in URLaddress;\n\n    URLaddress.sin_family = AF_INET;\n    URLaddress.sin_port = htons(80);\n    inet_pton(0,address,&amp;URLaddress.sin_addr.s_addr);\n    int con = connect(c_socket, (struct sockaddr*) &amp;URLaddress, \n    sizeof(URLaddress));\n\n    perror(\"error\");\n\n    return 0;\n}\n</code></pre>\n\n<p>This is the input</p>\n\n<pre><code>151.101.13.5\n</code></pre>\n\n<p>This is the output</p>\n\n<pre><code>error: Connection refused\n</code></pre>\n\n<p>I am passing IP of website as input.</p>\n\n<p>I have seen all other similar questions but didn't get any answer as how to fix this because this keeps happening with every website I try my program with.\nPlease tell how to resolve this.</p>\n"}, {"tags": ["c++", "gtk", "chromium-embedded"], "comments": [{"owner": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 0, "creation_date": 1539774022, "post_id": 52853153, "comment_id": 92621699, "body": "Can you check if browser and renderer process got created successfully? are you building cefsimple or cefclient or you have written your own app to launch it?"}, {"owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "reply_to_user": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 0, "creation_date": 1539788808, "post_id": 52853153, "comment_id": 92631112, "body": "@Sanjeev It is an application written based on cefsimple and/or cefclient, I believe. I am trying to check if renderer and browser processes were created and started correctly. Meanwhile, I detected that there are loads of processes on Ubuntu, where there are only 4 on Debian. Maybe a screenshot with their command line arguments would be helpful?"}, {"owner": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 0, "creation_date": 1539795909, "post_id": 52853153, "comment_id": 92634843, "body": "Number of processes should not be different because of Ubuntu, eventually those should be same in both. Yes screenshot will help. What URL you are trying to load? try to load a simple page present in local server or static page and let me know if it is getting rendered."}, {"owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "reply_to_user": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 0, "creation_date": 1539852014, "post_id": 52853153, "comment_id": 92653853, "body": "The window looks the same with both local server and google.com. You can find the screenshots of the processes <a href=\"https://imgur.com/a/Y6VHCVH\" rel=\"nofollow noreferrer\">here</a> for Ubuntu and <a href=\"https://imgur.com/a/GG98YEQ\" rel=\"nofollow noreferrer\">here</a> for Debian. I executed ps combined with grep."}, {"owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "reply_to_user": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 0, "creation_date": 1539852549, "post_id": 52853153, "comment_id": 92654157, "body": "Also, I noticed that the cef debugging server was up on Ubuntu when I started the application."}, {"owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "reply_to_user": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 0, "creation_date": 1539853854, "post_id": 52853153, "comment_id": 92654880, "body": "I now tried building on Debian and copying and running the same binary on Ubuntu. This tells me that the shared libraries (that are a part of the project) are built correctly, since I only copied the executable, not the shared libraries."}, {"owner": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 0, "creation_date": 1539855551, "post_id": 52853153, "comment_id": 92655847, "body": "Nothing is shown in the screenshots you mentioned in the comment. You have to mention the full details/steps of building and executing it. Without knowing such details It&#39;s difficult to analyze what went wrong with you."}, {"owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "reply_to_user": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 0, "creation_date": 1539856199, "post_id": 52853153, "comment_id": 92656201, "body": "I am unsure if I am allowed to disclose the build scripts since it&#39;s company&#39;s IP."}, {"owner": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 0, "creation_date": 1539857975, "post_id": 52853153, "comment_id": 92657179, "body": "Understood. Are you running cef in ubuntu desktop or in an embedded box running ubuntu? Do your Ubuntu platform have any sort of Layer manager?"}, {"owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "reply_to_user": {"reputation": 308, "user_id": 7294397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9a6e29624b7c96d4ddca6d506ab3047?s=128&d=identicon&r=PG&f=1", "display_name": "Sanjeev", "link": "https://stackoverflow.com/users/7294397/sanjeev"}, "edited": false, "score": 0, "creation_date": 1539873349, "post_id": 52853153, "comment_id": 92666408, "body": "Ubuntu, just like Debian, runs on a Virtual Machine using VMWare Workstation Player. It&#39;s Ubuntu Desktop. I don&#39;t know what a layer manager is (tried Googling but to no avail)."}], "owner": {"reputation": 413, "user_id": 10518032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91471cd13b1f82257c4311a9e213753?s=128&d=identicon&r=PG&f=1", "display_name": "nm_tp", "link": "https://stackoverflow.com/users/10518032/nm-tp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539773505, "creation_date": 1539773505, "question_id": 52853153, "link": "https://stackoverflow.com/questions/52853153/cef-c-program-not-rendering-in-ubuntu", "title": "CEF C++ program not rendering in Ubuntu", "body": "<p>I am trying to build and run a CEF application on Ubuntu 16.04.5 LTS. The application is built using CEF (Chromium Embedded Framework), in C++. I have previously built it on Debian 8.11 with success. The issue is as is shown on the screenshot <a href=\"https://i.stack.imgur.com/GwcNl.png\" rel=\"nofollow noreferrer\">here</a>. Instead of being just a copy of whatever was behind it, the screen should contain a mini custom web browser. I am pretty sure there is something wrong with the rendering process but I can not describe it in more detail.</p>\n\n<p>The differences I noted are following:</p>\n\n<ul>\n<li>gcc/g++: Debian - 4.9.2 | Ubuntu - 4.9.3 </li>\n<li>libgtk2.0-0: Debian - 2.24.25-3+deb8u2 | Ubuntu - 2.24.30-1ubuntu1.16.04.2\nlibgtk-3-0 </li>\n<li>libgtk-3-0: Debian - 3.14.5-1+deb8u1 | Ubuntu - 3.18.9-1ubuntu3.3</li>\n</ul>\n\n<p>I would be more than happy to provide more info if needed.</p>\n"}, {"tags": ["c++", "class", "operator-overloading", "move-assignment-operator"], "comments": [{"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 0, "creation_date": 1539772956, "post_id": 52852819, "comment_id": 92621100, "body": "Your second <code>do-while</code> loop inside <code>Matrix::Matrix</code> contains a bug. You input <code>dim_c</code> and check for <code>dim_r &lt;= 0</code> (notice <code>c</code> vs <code>r</code>). It won&#39;t probably fix your issue, but that&#39;s a bug nonetheless. That&#39;s the risk of copy-pasting the code. Besides, what happens if I do <code>Matrix m(2, -2);</code>?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1539773005, "post_id": 52852819, "comment_id": 92621123, "body": "Please copy and paste full error printed by the compiler."}, {"owner": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "edited": false, "score": 0, "creation_date": 1539773192, "post_id": 52852819, "comment_id": 92621220, "body": "Edited, and thanks for the bug"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 4, "creation_date": 1539773242, "post_id": 52852819, "comment_id": 92621246, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">The rule of three/five/zero</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1539773357, "post_id": 52852819, "comment_id": 92621317, "body": "Functions that have a non-<code>void</code> return type must return something on every path. Your compiler should be warning you about this."}, {"owner": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "edited": false, "score": 0, "creation_date": 1539773432, "post_id": 52852819, "comment_id": 92621363, "body": "It does, but it\u2019s a warning, not an error. Anyway. The aim of this program was just to have some practice, so I didn\u2019t bother to fix that. But I know I should"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1539773675, "post_id": 52852819, "comment_id": 92621510, "body": "@A.J. Don&#39;t ignore warnings. You should treat warnings as errors, in particular if you don&#39;t know what consequences ignoring them might have."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1539773886, "post_id": 52852819, "comment_id": 92621622, "body": "The error is quite verbose, but it tells you that you tried to use <b>copy constructor</b>, which is deleted because you provided move assignment operator. In other words, your <code>operator+</code> is returning object, not an rvalue reference, and this object has to be copied when you return it.."}, {"owner": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1539774282, "post_id": 52852819, "comment_id": 92621857, "body": "@Yksisarvinen from what I understood, that\u2019s what should happen: operator+ return an object that, being a returned value, is a rvalue reference. Then the move assignment moves it into m1. Isn\u2019t this wha is supposed to happen?"}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 0, "creation_date": 1539776235, "post_id": 52852819, "comment_id": 92623021, "body": "tip: stick the float values in a vector, and use rule of zero"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "edited": false, "score": 0, "creation_date": 1539773538, "post_id": 52853092, "comment_id": 92621423, "body": "And it should work like this? Anyway, why isn\u2019t working my way instead?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1539773760, "post_id": 52853092, "comment_id": 92621554, "body": "Why? Member operator overloads are perfectly fine when both arguments are of the same type. And this won&#39;t solve a problem with missing copy-constructor."}], "tags": [], "owner": {"reputation": 123, "user_id": 8391781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/848e7c43e5d3534e5fc689f5988ab812?s=128&d=identicon&r=PG&f=1", "display_name": "nader", "link": "https://stackoverflow.com/users/8391781/nader"}, "is_accepted": false, "score": 0, "last_activity_date": 1539775117, "last_edit_date": 1539775117, "creation_date": 1539773267, "answer_id": 52853092, "question_id": 52852819, "link": "https://stackoverflow.com/questions/52852819/problem-with-move-assignment-in-c-illegal-instruction-4/52853092#52853092", "title": "Problem with move assignment in C++. Illegal instruction: 4", "body": "<p>the main problem is your operator = didnt have any return.</p>\n\n<p>overload the operator + like this:</p>\n\n<pre><code>Matrix operator+(const Matrix &amp;A ,const Matrix &amp;m)\n{\nif(A-&gt;dim_r == m.dim_r &amp;&amp; A-&gt;dim_c == m.dim_c){\n    Matrix new_m(m.dim_r, m.dim_c);\n\n    for(int r = 0; r &lt; new_m.dim_r; r++){\n        for(int c = 0; c &lt; new_m.dim_c; c++){\n            new_m.matrixpp[r][c] = A-&gt;matrixpp[r][c] + m.matrixpp[r][c];\n        }\n    }\n\n    return new_m;\n}\nelse{\n    cout &lt;&lt; \"ERROR\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>and make it friend of your class.\nand in the end of operator =  add return statement like this :</p>\n\n<pre><code>Matrix&amp; Matrix::operator=(Matrix&amp;&amp; tomove){\n        if(this != &amp;tomove) { \n        cout &lt;&lt; \"--- MA ---\" &lt;&lt; endl;\n        matrixpp = tomove.matrixpp;\n        dim_r = tomove.dim_r;\n        dim_c = tomove.dim_c;\n\n        tomove.matrixpp = nullptr;\n    }\n    return *this;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "edited": false, "score": 0, "creation_date": 1539775787, "post_id": 52853801, "comment_id": 92622774, "body": "As I said, here is a semplified version of my whole program. There, I had defined a move and copy and everything constructor and assignment, but the problem still remained."}, {"owner": {"reputation": 151, "user_id": 10518199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a91a6618cb07e094d613494ea1dafc?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa\u0142 G&#243;rczewski", "link": "https://stackoverflow.com/users/10518199/rafa%c5%82-g%c3%b3rczewski"}, "reply_to_user": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "edited": false, "score": 1, "creation_date": 1539775873, "post_id": 52853801, "comment_id": 92622818, "body": "Well. the error message says something else. &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "edited": false, "score": 0, "creation_date": 1539777651, "post_id": 52853801, "comment_id": 92623867, "body": "I still get the \u201cIllegal instruction: 4\u201d error message. Anyway, about the elses without a return, I get a warning when I compile."}, {"owner": {"reputation": 151, "user_id": 10518199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a91a6618cb07e094d613494ea1dafc?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa\u0142 G&#243;rczewski", "link": "https://stackoverflow.com/users/10518199/rafa%c5%82-g%c3%b3rczewski"}, "reply_to_user": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "edited": false, "score": 0, "creation_date": 1539777881, "post_id": 52853801, "comment_id": 92624018, "body": "These warnings are really important, you should always return something in functions with non-void return type."}, {"owner": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "edited": false, "score": 0, "creation_date": 1539777958, "post_id": 52853801, "comment_id": 92624060, "body": "Yes I know that. But right now I was just practicing with move constructor and move assignment. Do you think that can be the cause of the problem? Otherwise, do you have any idea of what it could be that causes the bug?"}, {"owner": {"reputation": 151, "user_id": 10518199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a91a6618cb07e094d613494ea1dafc?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa\u0142 G&#243;rczewski", "link": "https://stackoverflow.com/users/10518199/rafa%c5%82-g%c3%b3rczewski"}, "reply_to_user": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "edited": false, "score": 0, "creation_date": 1539778498, "post_id": 52853801, "comment_id": 92624377, "body": "Yes, it is a big deal to not return a value when declaring the other thing. It leads to undefined behaviour, and your &quot;illegal instruction&quot; may be caused just because of it."}, {"owner": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "edited": false, "score": 0, "creation_date": 1539779072, "post_id": 52853801, "comment_id": 92624753, "body": "Ok, I\u2019ll try then."}, {"owner": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "edited": false, "score": 0, "creation_date": 1539794142, "post_id": 52853801, "comment_id": 92634052, "body": "You were so right! The problem was in the move assignment: it didn\u2019t return anything, while it should have, obviously. Honestly I hadn\u2019t even noticed it. Thank you so much"}], "tags": [], "owner": {"reputation": 151, "user_id": 10518199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56a91a6618cb07e094d613494ea1dafc?s=128&d=identicon&r=PG&f=1", "display_name": "Rafa\u0142 G&#243;rczewski", "link": "https://stackoverflow.com/users/10518199/rafa%c5%82-g%c3%b3rczewski"}, "is_accepted": false, "score": 4, "last_activity_date": 1539776655, "last_edit_date": 1539776655, "creation_date": 1539775684, "answer_id": 52853801, "question_id": 52852819, "link": "https://stackoverflow.com/questions/52852819/problem-with-move-assignment-in-c-illegal-instruction-4/52853801#52853801", "title": "Problem with move assignment in C++. Illegal instruction: 4", "body": "<p>The problem is, when using pre-C++17 standard, there is no copy elision guarantee, so returning a value from a function follows copy initialization semantics, which requires move-or-copy constructor to be defined. Defining your own move assignment operator disables automatic constructor generation (<a href=\"http://eel.is/c++draft/class.copy.ctor#6\" rel=\"nofollow noreferrer\">Class copy CTOR generation rules</a>). In fact the compiler provided constructor is defined, but deleted. To solve this problem, <strong>you have to define a move or copy constructor</strong>, or both of them according to the rule of five (<a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of three/five/zero</a>).</p>\n\n<p>Also, I suspect that the original problem (illegal instruction) is caused by a lot of undefined behaviours in your code (e.g. no return statement in your assignment operator, and no return in operator+ else branch).</p>\n"}], "owner": {"reputation": 113, "user_id": 6493201, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/30c422952144c04a9a3ef325640324bb?s=128&d=identicon&r=PG&f=1", "display_name": "A.J.", "link": "https://stackoverflow.com/users/6493201/a-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1539776667, "creation_date": 1539772431, "last_edit_date": 1539776667, "question_id": 52852819, "link": "https://stackoverflow.com/questions/52852819/problem-with-move-assignment-in-c-illegal-instruction-4", "title": "Problem with move assignment in C++. Illegal instruction: 4", "body": "<p>I\u2019m writing a simple Matrix class, and I\u2019ve defined, among others, an operator+ overloading and a move assignment.\nIt looks like something happens when the two of them interact, but I can\u2019t find where I am wrong.\nHere\u2019s my code (I\u2019ve deleted everything superfluous, and just left what is needed to show the bug).\nThe problematic line is at the end, in the main:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#define DEF -1\n\nusing namespace std;\n//----- Matrix -----//\nclass Matrix{\nprivate:\n    float **matrixpp;\n    int dim_r;\n    int dim_c;\n\npublic:\n    Matrix(int d_r = DEF, int d_c = 0);   \n    Matrix(const Matrix&amp;);\n    Matrix(Matrix&amp;&amp;);\n    Matrix&amp; operator=(Matrix&amp;&amp;);\n    ~Matrix();\n\n    Matrix operator+(const Matrix&amp;);\n\n    void print();\n    void fill();\n\n};\n\n//----- Matrix -----//\nMatrix::Matrix(int d_r, int d_c){\n\n    if(d_r == DEF){\n        do{\n            cout &lt;&lt; \"number of rows: \";\n            cin &gt;&gt; dim_r;\n            if(dim_r &lt;= 0){\n                cout &lt;&lt; \"ERROR\" &lt;&lt; endl;\n            }\n        }\n        while(dim_r &lt;= 0);\n\n        do{\n            cout &lt;&lt; \"Number of columns: \";\n            cin &gt;&gt; dim_c;\n            if(dim_c &lt;= 0){\n                cout &lt;&lt; \"ERROR\" &lt;&lt; endl;\n            }\n        }\n        while(dim_c &lt;= 0);\n\n\n    }\n    else{\n        dim_r = d_r;\n        dim_c = d_c;\n    }\n\n    matrixpp = new float*[dim_r];\n\n    for(int i = 0; i &lt; dim_r; i++){\n        matrixpp[i] = new float[dim_c];\n    }\n\n    for(int r = 0; r &lt; dim_r; r++){\n        for(int c = 0; c &lt; dim_c; c++){\n            matrixpp[r][c] = 0;\n        }\n    }\n}\n\nMatrix::Matrix(const Matrix&amp; tocopy)\n:matrixpp(tocopy.matrixpp), dim_r(tocopy.dim_r), dim_c(tocopy.dim_c)\n{\n\n    matrixpp = new float*[dim_r];\n\n    for(int i = 0; i &lt; dim_r; i++){\n        matrixpp[i] = new float[dim_c];\n    }\n\n    for(int r = 0; r &lt; dim_r; r++){\n        for(int c = 0; c &lt; dim_c; c++){\n            matrixpp[r][c] = tocopy.matrixpp[r][c];\n        }\n    }\n}\n\nMatrix::Matrix(Matrix&amp;&amp; tomove)\n:matrixpp(tomove.matrixpp), dim_r(tomove.dim_r), dim_c(tomove.dim_c)\n{\n    tomove.matrixpp = nullptr;\n\n}\n\nMatrix&amp; Matrix::operator=(Matrix&amp;&amp; tomove){\n\n    cout &lt;&lt; \"--- MA ---\" &lt;&lt; endl;\n    matrixpp = tomove.matrixpp;\n    dim_r = tomove.dim_r;\n    dim_c = tomove.dim_c;\n\n    tomove.matrixpp = nullptr;\n}\n\nMatrix::~Matrix(){\n\n    if(matrixpp != nullptr){\n        for(int i = 0; i &lt; dim_r; i++){\n            delete[] matrixpp[i];\n        }\n        delete[] matrixpp;\n    }\n}\n\nMatrix Matrix::operator+(const Matrix&amp; m){\n\n    if(this-&gt;dim_r == m.dim_r &amp;&amp; this-&gt;dim_c == m.dim_c){\n        Matrix new_m(m.dim_r, m.dim_c);\n\n        for(int r = 0; r &lt; new_m.dim_r; r++){\n            for(int c = 0; c &lt; new_m.dim_c; c++){\n                new_m.matrixpp[r][c] = this-&gt;matrixpp[r][c] + m.matrixpp[r][c];\n            }\n        }\n\n        return new_m;\n    }\n    else{\n        cout &lt;&lt; \"ERROR\" &lt;&lt; endl;\n    }\n}\n\nvoid Matrix::print(){\n    int temp;\n\n    for(int r = 0; r &lt; dim_r; r++){\n        for(int c = 0; c &lt; dim_c; c++){\n            cout &lt;&lt; matrixpp[r][c] &lt;&lt; \" \";\n\n        }\n        cout &lt;&lt; endl;\n    }\n    cout &lt;&lt; endl;\n}\n\nvoid Matrix::fill(){\n    float temp;\n\n    for(int r = 0; r &lt; dim_r; r++){\n        for(int c = 0; c &lt; dim_c; c++){\n            cout &lt;&lt; \"new value: \" &lt;&lt; endl;\n            this-&gt;print();\n            cin &gt;&gt; temp;\n            matrixpp[r][c] = temp;\n            system(\"clear\");\n        }\n    }\n}\n\n//-------- Main -------//\nint main(){\n\n    Matrix m0;\n    m0.fill();\n    Matrix m1(0);\n\n    m1 = m0+m0; // problematic line\n\n    //m1.print();\n\n}\n</code></pre>\n\n<p>It gives me the error when the move assignment is called to move the result of m0+m0 in m1.</p>\n\n<p>If I compile my code with g++ on a Mac, the error given is just \u201cIllegal instruction: 4\u201d, nothing more, nothing less.\nIf I do it on a Linux, the error given is:</p>\n\n<blockquote>\n  <p>In member function \u2018Matrix Matrix::operator+(const Matrix&amp;)\u2019:\n  p.cpp:90:16: error: use of deleted function \u2018constexpr\n  Matrix::Matrix(const Matrix&amp;)\u2019\n           return new_m;\n                  ^~~~~ p.cpp:9:7: note: \u2018constexpr Matrix::Matrix(const Matrix&amp;)\u2019 is implicitly declared as deleted because \u2018Matrix\u2019 declares\n  a move constructor or move assignment operator  class Matrix{\n         ^~~~~~</p>\n</blockquote>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 505, "user_id": 3065592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60527c78c08542c8f4de56f9082e69d?s=128&d=identicon&r=PG&f=1", "display_name": "wtom", "link": "https://stackoverflow.com/users/3065592/wtom"}, "edited": false, "score": 1, "creation_date": 1539772013, "post_id": 52852548, "comment_id": 92620584, "body": "I&#39;ll try to use different name for value_type from template &lt;typename value_type&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 5, "last_activity_date": 1539772024, "creation_date": 1539772024, "answer_id": 52852683, "question_id": 52852548, "link": "https://stackoverflow.com/questions/52852548/typedef-statement-inside-a-template-class/52852683#52852683", "title": "typedef statement inside a template class", "body": "<p>Your issue is that <code>value_type</code> is already a known type, it's your template parameter.</p>\n\n<p>You can't have anything else redefining it, especially to a different type.</p>\n\n<p>I had the same \"issue\" because I wanted another class to retrieve the type used for the template like you did, in that case, rename the template argument to something else.</p>\n"}], "owner": {"reputation": 83, "user_id": 10358017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d1b90d57e0ce3f7deec43c69170fc5a?s=128&d=identicon&r=PG&f=1", "display_name": "p.chives", "link": "https://stackoverflow.com/users/10358017/p-chives"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 52852683, "answer_count": 1, "score": 1, "last_activity_date": 1539772024, "creation_date": 1539771616, "question_id": 52852548, "link": "https://stackoverflow.com/questions/52852548/typedef-statement-inside-a-template-class", "title": "typedef statement inside a template class", "body": "<p>I'm trying to convert one of my files into a template but the typedef statement is giving me some trouble. The error I'm getting is:</p>\n\n<pre><code>error: declaration of \u2018typedef typename LinkedList&lt;value_type&gt;::value_type Queue&lt;value_type&gt;::value_type\u2019 shadows template parameter\n</code></pre>\n\n<p>I'm confused about how to use typedef in this situation because if I 'un-template' the file it considers value_type undefined for the other classes referenced in this file.</p>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include \"LinkedList.h\"\n#include \"Node.h\"\ntemplate &lt;typename value_type&gt;\nclass Queue\n{\npublic:\ntypedef typename LinkedList&lt;value_type&gt;::value_type value_type;\n\nQueue();\nvoid enqueue(const value_type&amp; obj);\nvalue_type dequeue();\n\nvalue_type&amp; front();\n\nbool is_empty() const;\nint size() const;\n\nprivate:\nLinkedList&lt;value_type&gt; data;\nint used;\n};\n</code></pre>\n"}, {"tags": ["c++", "opencv", "docker", "docker-container"], "comments": [{"owner": {"reputation": 145, "user_id": 3157589, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001471625904/picture?type=large", "display_name": "Laurent Loots", "link": "https://stackoverflow.com/users/3157589/laurent-loots"}, "edited": false, "score": 1, "creation_date": 1539771870, "post_id": 52852516, "comment_id": 92620495, "body": "what kind of docker container are you trying to run this in? is it running windowsservercore? did you install opencv inside the container?"}, {"owner": {"reputation": 1, "user_id": 7778148, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Dj37iTfDAGA/AAAAAAAAAAI/AAAAAAAAAPk/CC2nIwNFQ90/photo.jpg?sz=128", "display_name": "Ajinkya Jain", "link": "https://stackoverflow.com/users/7778148/ajinkya-jain"}, "reply_to_user": {"reputation": 145, "user_id": 3157589, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100001471625904/picture?type=large", "display_name": "Laurent Loots", "link": "https://stackoverflow.com/users/3157589/laurent-loots"}, "edited": false, "score": 0, "creation_date": 1539862375, "post_id": 52852516, "comment_id": 92659534, "body": "Yes it is windowsservercore, no I havent installed opencv. If I need to install opencv, then what i need to do, please help."}], "owner": {"reputation": 1, "user_id": 7778148, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Dj37iTfDAGA/AAAAAAAAAAI/AAAAAAAAAPk/CC2nIwNFQ90/photo.jpg?sz=128", "display_name": "Ajinkya Jain", "link": "https://stackoverflow.com/users/7778148/ajinkya-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539781080, "creation_date": 1539771541, "last_edit_date": 1539781080, "question_id": 52852516, "link": "https://stackoverflow.com/questions/52852516/c-application-not-running-on-windows-docker-container-as-it-is-dependant-on-op", "title": "C++ Application not running on windows docker container as it is dependant on opencv binaries (OPENCV_CORE249DLL &amp; opencv_highgui249.dll)", "body": "<p>My C++ application is not running as it is dependant on opencv binaries (OPENCV_CORE249DLL &amp; opencv_highgui249.dll)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1539771685, "post_id": 52852503, "comment_id": 92620405, "body": "Did you want: <code>#define STR(s) (strlen(s) &lt; 10 ? s : nullptr)</code>? Then check for &quot;emptiness&quot; inside the foo function..."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 3, "creation_date": 1539771752, "post_id": 52852503, "comment_id": 92620435, "body": "@Ruks - Why would that cause a compile time error?"}, {"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1539771931, "post_id": 52852503, "comment_id": 92620533, "body": "@StoryTeller Oh, that is only described inside that comment in the code, not anywhere else, I see..."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1539772116, "post_id": 52852503, "comment_id": 92620647, "body": "@Ruks There&#39;s also the title and the first sentence."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1539787675, "post_id": 52852503, "comment_id": 92630438, "body": "You could declare the string literal as a <code>const char</code> array, then use <code>sizeof() -1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1539793001, "post_id": 52852663, "comment_id": 92633425, "body": "@Ruks - General consensus on the C++ and C tags is that unless told otherwise, we assume the latest standard. And it&#39;s 2018, no need to still be adding a C++1z disclaimer unless required by the OP."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 0, "creation_date": 1539793216, "post_id": 52852663, "comment_id": 92633545, "body": "And as for &quot;not work&quot;, everything besides constexpr is just a convenience feature over stuff C++03 could do or emulate."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 19, "last_activity_date": 1539773033, "last_edit_date": 1539773033, "creation_date": 1539771951, "answer_id": 52852663, "question_id": 52852503, "link": "https://stackoverflow.com/questions/52852503/check-length-of-string-literal-at-compile-time/52852663#52852663", "title": "Check length of string literal at compile time", "body": "<p>This is C++, where there are superior options to macros. A template can give you the exact semantics your want.</p>\n\n<pre><code>template&lt;std::size_t N&gt;\nconstexpr auto&amp; STR(char const (&amp;s)[N]) {\n    static_assert(N &lt; 10, \"String exceeds 10 bytes!\");\n    // &lt; 11 if you meant 10 characters. There is a trailing `\\0`\n    // in every literal, even if we don't explicitly specify it\n    return s;\n}\n</code></pre>\n\n<p>The array reference argument will bind to string literals, not pointers (that can trip your macro), deduce their size, and perform the check in the body of the function. Then it will return the reference unchanged if everything checks out, allowing even for continued overload resolution.</p>\n"}, {"tags": [], "owner": {"reputation": 596, "user_id": 8181378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eafe3c2f18522f0f063448f241d56274?s=128&d=identicon&r=PG&f=1", "display_name": "joepol", "link": "https://stackoverflow.com/users/8181378/joepol"}, "is_accepted": false, "score": 0, "last_activity_date": 1609867357, "last_edit_date": 1609867357, "creation_date": 1609248737, "answer_id": 65492967, "question_id": 52852503, "link": "https://stackoverflow.com/questions/52852503/check-length-of-string-literal-at-compile-time/65492967#65492967", "title": "Check length of string literal at compile time", "body": "<p>I will add to @StoryTeller - Unslander Monica great answer,\nIf you need (like me) to pass and argument for string's max length, you can expand the implementation to be more generic :</p>\n<pre><code>template&lt;const int MAX_LEN, std::size_t N&gt;\nconstexpr auto&amp; STR(char const (&amp;s)[N]) \n{\n    static_assert(N &lt; MAX_LEN, &quot;String overflow!&quot;);\n    return s;\n}\n</code></pre>\n<p>And if you need several known length's, you can use template specialization :</p>\n<pre><code>template&lt;std::size_t N&gt;\nconstexpr auto &amp; STR16(char const (&amp;s)[N])\n{\n    return STR&lt;16&gt;(s);\n}\n</code></pre>\n<p>The first function can be a generic version, where's the second can have access to project's consts.</p>\n"}], "owner": {"reputation": 1292, "user_id": 8044236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b25c9e70d1b4bb2bde0254c9c82fc75e?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/8044236/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1453, "favorite_count": 2, "accepted_answer_id": 52852663, "answer_count": 2, "score": 13, "last_activity_date": 1609867357, "creation_date": 1539771486, "question_id": 52852503, "link": "https://stackoverflow.com/questions/52852503/check-length-of-string-literal-at-compile-time", "title": "Check length of string literal at compile time", "body": "<p>I would like to check length of my string literals at compile time. For now I am thinking about the following construction, but can't complete it:</p>\n\n<pre><code>#define STR(s) (sizeof(s) &lt; 10 ? s : /* somehow perform static_assert */)\n\nvoid foo(const char* s) {}\nint main() { \n    foo(STR(\"abc\")); // foo(\"abc\")\n    foo(STR(\"abcabcabcabc\")); // compile time error: \"String exceeds 10 bytes!\"\n}\n</code></pre>\n"}, {"tags": ["c++", "namespaces"], "comments": [{"owner": {"reputation": 1389, "user_id": 8423261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd03cb068df0f15a5de2a53ed8149eea?s=128&d=identicon&r=PG&f=1", "display_name": "Ruks", "link": "https://stackoverflow.com/users/8423261/ruks"}, "edited": false, "score": 1, "creation_date": 1539771095, "post_id": 52852351, "comment_id": 92620047, "body": "Do you mean <code>using namespace NS1;</code> and <code>using namespace NS2;</code>? If not, what was your question again?"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 4, "creation_date": 1539771248, "post_id": 52852351, "comment_id": 92620137, "body": "What are you <i>actually</i> trying to do? Maybe this is an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>"}, {"owner": {"reputation": 647, "user_id": 1377278, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/91d640cad5fd7bdcd529c5ca5f18eba2?s=128&d=identicon&r=PG", "display_name": "Oodini", "link": "https://stackoverflow.com/users/1377278/oodini"}, "edited": false, "score": 0, "creation_date": 1539771507, "post_id": 52852351, "comment_id": 92620307, "body": "In the project I working on, there are many duplicates codes, varying only by the namespaces used. So I try to find a way to factorize them. I could use templates, but the class names are same ; the only differences are about namespaces. Using templates could imply <i>many</i> templates."}], "answers": [{"comments": [{"owner": {"reputation": 647, "user_id": 1377278, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/91d640cad5fd7bdcd529c5ca5f18eba2?s=128&d=identicon&r=PG", "display_name": "Oodini", "link": "https://stackoverflow.com/users/1377278/oodini"}, "edited": false, "score": 0, "creation_date": 1539778143, "post_id": 52852652, "comment_id": 92624170, "body": "I wanted to avoid using classes. I am going to see if I could use inline namespaces..."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 5, "last_activity_date": 1539771905, "creation_date": 1539771905, "answer_id": 52852652, "question_id": 52852351, "link": "https://stackoverflow.com/questions/52852351/how-to-pass-an-namespace-as-argument/52852652#52852652", "title": "How to &quot;pass&quot; an namespace as argument?", "body": "<blockquote>\n  <p>How to \u201cpass\u201d an namespace as argument?</p>\n</blockquote>\n\n<p>There is no way to do that.</p>\n\n<p>It is possible to write a reusable template for your foos if you use classes instead of namespaces:</p>\n\n<pre><code>struct NS1 {\n    using Type1 = int;\n    using Type2 = float;\n    using Type3 = std::string;\n};\n\nstruct NS2 {\n    using Type1 = long;\n    using Type2 = double;\n    using Type3 = std::string;\n};\n\ntemplate&lt;class T&gt;\nvoid foo() {\n    typename T::Type1 instance1;\n    typename T::Type2 instance2;\n    typename T::Type3 instance3;\n}\n</code></pre>\n"}], "owner": {"reputation": 647, "user_id": 1377278, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/91d640cad5fd7bdcd529c5ca5f18eba2?s=128&d=identicon&r=PG", "display_name": "Oodini", "link": "https://stackoverflow.com/users/1377278/oodini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1539794494, "answer_count": 1, "score": 2, "last_activity_date": 1539771905, "creation_date": 1539771027, "question_id": 52852351, "link": "https://stackoverflow.com/questions/52852351/how-to-pass-an-namespace-as-argument", "closed_reason": "Needs details or clarity", "title": "How to &quot;pass&quot; an namespace as argument?", "body": "<p>If I have the following code :</p>\n\n<pre><code>void foo1()\n{\n    NS1::Type1 instance1;\n    NS1::Type2 instance2;\n    NS1::Type3 instance3;\n}\n\nvoid foo2()\n{\n    NS2::Type1 instance1;\n    NS2::Type2 instance2;\n    NS2::Type3 instance3;\n}\n</code></pre>\n\n<p>How to factorize this function ?</p>\n\n<p>I can call foo1 from NS1, and foo2 from NS2.</p>\n"}, {"tags": ["c++", "windows", "qt", "opencascade"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 10525944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a69842e4657c36104fd9bd725473a2d9?s=128&d=identicon&r=PG&f=1", "display_name": "user10525944", "link": "https://stackoverflow.com/users/10525944/user10525944"}, "is_accepted": false, "score": 1, "last_activity_date": 1540231441, "last_edit_date": 1540231441, "creation_date": 1540229523, "answer_id": 52934754, "question_id": 52852269, "link": "https://stackoverflow.com/questions/52852269/qt-and-opencascade-out-of-memory/52934754#52934754", "title": "QT and OpenCascade out of memory", "body": "<p>i didn't try to compile the program but after a quick look it may be a <strong>GPU driver</strong> problem ,for some reason glGenBuffer didn't genetate the buffer object\nthis is how i deduced that >>\nin occt6.9.1 , file OpenGl_PrimitiveArray.cxx ,the function : </p>\n\n<pre><code>Standard_Boolean OpenGl_PrimitiveArray::initNormalVbo (const Handle(OpenGl_Context)&amp; theCtx) const \n</code></pre>\n\n<p>there is : </p>\n\n<pre><code>  if (!myVboAttribs-&gt;init (theCtx, 0, myAttribs-&gt;NbElements, myAttribs-&gt;Data(), GL_NONE, myAttribs-&gt;Stride))\n  {\n    TCollection_ExtendedString aMsg;\n    aMsg += \"VBO creation for Primitive Array has failed for \";\n    aMsg += myAttribs-&gt;NbElements;\n    aMsg += \" vertices. Out of memory?\";\n    theCtx-&gt;PushMessage (GL_DEBUG_SOURCE_APPLICATION_ARB, GL_DEBUG_TYPE_PERFORMANCE_ARB, 0, GL_DEBUG_SEVERITY_LOW_ARB, aMsg);\n\n    clearMemoryGL (theCtx);\n    return Standard_False;\n  }\n</code></pre>\n\n<p>which means that , in file OpenGl_VertexBuffer.cxx the function :</p>\n\n<pre><code>bool OpenGl_VertexBuffer::init (const Handle(OpenGl_Context)&amp; theGlCtx,\n                                const GLuint   theComponentsNb,\n                                const GLsizei  theElemsNb,\n                                const void*    theData,\n                                const GLenum   theDataType,\n                                const GLsizei  theStride)\n{\n  if (!Create (theGlCtx))\n  {\n    return false;\n  }\n\n  Bind (theGlCtx);\n  myDataType     = theDataType;\n  myComponentsNb = theComponentsNb;\n  myElemsNb      = theElemsNb;\n  theGlCtx-&gt;core15fwd-&gt;glBufferData (GetTarget(), GLsizeiptr(myElemsNb) * theStride, theData, GL_STATIC_DRAW);\n  bool isDone = (glGetError() == GL_NO_ERROR); // GL_OUT_OF_MEMORY\n  Unbind (theGlCtx);\n  return isDone;\n}\n</code></pre>\n\n<p>returned false,</p>\n\n<p>because </p>\n\n<pre><code>bool OpenGl_VertexBuffer::Create (const Handle(OpenGl_Context)&amp; theGlCtx)\n{\n  if (myBufferId == NO_BUFFER)\n  {\n    theGlCtx-&gt;core15fwd-&gt;glGenBuffers (1, &amp;myBufferId);\n  }\n  return myBufferId != NO_BUFFER;\n}\n</code></pre>\n\n<p>returned false , which means that myBufferId is still equal to NO_BUFFER as set in the constructor of OpenGl_VertexBuffer\nwhich means that </p>\n\n<pre><code>theGlCtx-&gt;core15fwd-&gt;glGenBuffers (1, &amp;myBufferId);\n</code></pre>\n\n<p>didn't change any thing . the comment in OpenGl_Context.hxx line:583 says</p>\n\n<pre><code>  OpenGl_GlCore15Fwd*  core15fwd;  //!&lt; OpenGL 1.5 without deprecated entry points\n</code></pre>\n\n<p>the OpenGl_GlCore15Fwd::glGenBuffers function is just calling the OpenGL function as in file OpenGl_GlFunctions.hxx</p>\n\n<pre><code>  inline void glGenBuffers (GLsizei n, GLuint *buffers)\n  {\n    ::glGenBuffers (n, buffers);\n  }\n</code></pre>\n\n<p>it may be wrong deduction but I didn't dig deeper </p>\n"}], "owner": {"reputation": 2398, "user_id": 4286662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/jTNeO.jpg?s=128&g=1", "display_name": "Bub Espinja", "link": "https://stackoverflow.com/users/4286662/bub-espinja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540231441, "creation_date": 1539770789, "last_edit_date": 1539772660, "question_id": 52852269, "link": "https://stackoverflow.com/questions/52852269/qt-and-opencascade-out-of-memory", "title": "QT and OpenCascade out of memory", "body": "<p>I am starting to code with OpenCascade in QT, finding this interesting basic project:\n<a href=\"https://github.com/eryar/occQt/\" rel=\"nofollow noreferrer\">https://github.com/eryar/occQt/</a></p>\n\n<p>I have compiled the program with:</p>\n\n<blockquote>\n  <p>QT       += core gui opengl</p>\n</blockquote>\n\n<p>and when I execute it, I get the following error:</p>\n\n<blockquote>\n  <p>TKOpenGl | Type: Performance | ID: 0 | Severity: Low | Message:   VBO\n  creation for Primitive Array has failed for 169 vertices. Out of\n  memory?</p>\n</blockquote>\n\n<p>I have also posted the issue in the project site, but I am not sure about the activity in that place.\nThat is why I am asking you if you had any idea to workaround.</p>\n\n<p>My testbed:</p>\n\n<ul>\n<li>Intel i7 with 8GB of memory</li>\n<li>Windows 10 </li>\n<li>OpenCascade 6.9.1 vc12-64 </li>\n<li>QT 5.5.1</li>\n</ul>\n"}, {"tags": ["c++", "opengl", "makefile", "mingw", "glfw"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1539776254, "post_id": 52851786, "comment_id": 92623036, "body": "Since everything compiles, I highly doubt that the error is in the makefile. Show your code."}, {"owner": {"reputation": 123, "user_id": 10418882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6377489f6392435ce5975fc3ffb022c?s=128&d=identicon&r=PG&f=1", "display_name": "Protofall", "link": "https://stackoverflow.com/users/10418882/protofall"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1539777797, "post_id": 52851786, "comment_id": 92623969, "body": "Added a paste bin with the important parts of my main file to the OP."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1539782193, "post_id": 52851786, "comment_id": 92626719, "body": "my advice is to use glew with native windows compiler (ie msvc) and dont use glfw at all."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1539792999, "post_id": 52851786, "comment_id": 92633424, "body": "Try to compile <i>glew</i> on your on, or not use it as <i>lib</i> but add its code to your project."}, {"owner": {"reputation": 123, "user_id": 10418882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6377489f6392435ce5975fc3ffb022c?s=128&d=identicon&r=PG&f=1", "display_name": "Protofall", "link": "https://stackoverflow.com/users/10418882/protofall"}, "edited": false, "score": 0, "creation_date": 1539818381, "post_id": 52851786, "comment_id": 92643990, "body": "I can&#39;t figure out how to compile glew from source. If I run <code>make</code> it errors out, but doesn&#39;t say what when wrong."}], "owner": {"reputation": 123, "user_id": 10418882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6377489f6392435ce5975fc3ffb022c?s=128&d=identicon&r=PG&f=1", "display_name": "Protofall", "link": "https://stackoverflow.com/users/10418882/protofall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 298, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1539819333, "creation_date": 1539769320, "last_edit_date": 1539819333, "question_id": 52851786, "link": "https://stackoverflow.com/questions/52851786/trouble-getting-opengl-running-in-windows-mingw", "title": "Trouble getting OpenGL running in Windows/MinGW", "body": "<p>Previously I've worked with OpenGL 3.3 in Ubuntu 16.04 using glew and glfw (glm too). Since then I've had to start using a Windows 10 Machine and I've had a bit of trouble getting my programs to run again. I've installed MinGW (64 bit) because I heard thats the best way to get running, but every time I run my program I get no errors (Compile and Run time), but my program generates a window with just the bg colour I set and nothing else. It seems to get stuck when I make a GLFWwindow struct/object (Printfs/couts after this don't print). I have a callback function that closes the window when I press ESC which does work. When the window closes the output messages after that struct/object creation all trigger (Including the shader loading output which would explain the lack of polys). I think the issue is in my makefile possibly with glfw, but I don't know what.</p>\n\n<pre><code>GL_LIBS = `pkg-config --static --libs glfw3` -lopengl32 -lglfw3 -lglew32 -        \nstd=gnu++11\nEXT =\nCPPFLAGS = `pkg-config --cflags glfw3` -std=gnu++11\n\nCC = g++\nEXE = my_program\nSHADER_PATH = external_files/Shader.cpp\n\nCPPFILES = $(wildcard *.cpp)\nOBJS = $(CPPFILES:%.cpp=%.o)\nOBJS += Shader.o\n\nall: $(EXE)\n\n$(EXE): $(OBJS) $(SHADER)\n    $(CC) -o $(EXE) $(OBJS) $(GL_LIBS)\n\nShader.o:\n    $(CC) $(CPPFLAGS) -c $(SHADER_PATH)\n\n%.o: %.cpp\n    $(CC) $(CPPFLAGS) -c $&lt;\n</code></pre>\n\n<p>I tried to follow this answer, but it can't detect glfw.dll and I don't know if I'm doing it right: <a href=\"https://stackoverflow.com/questions/12886609/setting-up-glfw-with-mingw\">Setting up GLFW with MinGW</a></p>\n\n<p>If it matters, these are my includes for glew and glfw: <code>#include &lt;GL/glew.h&gt;</code> <code>#include &lt;GLFW/glfw3.h&gt;</code></p>\n\n<p>If there's an easier option (Aside from dual-booting, thats my last resort) I'm willing to try that instead.</p>\n\n<p><strong>Edit</strong>\nHere's my main file's main() function. I've removed some not very important functions to reduce the wall of text:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;cmath&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;    // std::all_of\n\n#include &lt;GL/glew.h&gt;\n#include &lt;GLFW/glfw3.h&gt;\n\n#include &lt;glm/glm.hpp&gt;\n#include &lt;glm/gtc/matrix_transform.hpp&gt;\n#include &lt;glm/gtc/type_ptr.hpp&gt;\n\n#include \"external_files/Shader.hpp\"\n#include \"myModels.hpp\"\n#include \"collision.hpp\"\n\n#define STB_IMAGE_IMPLEMENTATION\n#include \"external_files/stb_image.h\"\n\n#define TINYOBJLOADER_IMPLEMENTATION\n#include \"external_files/tiny_obj_loader.h\"\n\n//Array to store program IDs\nunsigned int ProgramIDs[2];\n\n//Skybox stuff\nunsigned int skyTexHandle;\n\n// Maze and player variables\nint** maze;\nint mazeSize;\nstatic float exitSpin = 0.0f;\n\nfloat playerXPos;\nfloat playerYPos;\nfloat playerZPos;\nstatic float playerVerticalRot = 0.0f;\nstatic float playerHorizontalRot = 0.0f;\nstatic float playerRunSpeed = 0.045f;\n\nbool heldButtons[5];\nbool controllerPressButtons[2];\nbool inputMode = true;  //true = controller, false = keyboard/mouse\nint joystickPresent;\nbool firing = false;    //Is true when doing the recoil animation for the mega buster\nfloat fireStart = 0.0f; //When the shot was fired\n\nint count;\nconst float* axes;\nconst unsigned char* buttons;\n\n//The myModels object\nmyModels my_models;\n\n//.obj model vectors and handles\nstd::vector&lt;tinyobj::shape_t&gt; shapesToiletp0;\nstd::vector&lt;tinyobj::material_t&gt; materialsToiletp0;\nstd::vector&lt;tinyobj::shape_t&gt; shapesToiletp1;\nstd::vector&lt;tinyobj::material_t&gt; materialsToiletp1;\nstd::vector&lt;tinyobj::shape_t&gt; shapesToiletp2;\nstd::vector&lt;tinyobj::material_t&gt; materialsToiletp2;\n\nstd::vector&lt;tinyobj::shape_t&gt; shapesMegaBuster;\nstd::vector&lt;tinyobj::material_t&gt; materialsMegaBuster;\nstd::vector&lt;tinyobj::shape_t&gt; shapesSpaceCraft;\nstd::vector&lt;tinyobj::material_t&gt; materialsSpaceCraft;\n\nunsigned int toilet0VaoHandle;\nunsigned int toilet1VaoHandle;\nunsigned int toilet2VaoHandle;\nunsigned int megaBusterVaoHandle;\nunsigned int spaceCraftVaoHandle;\n\n//Collision boxes\nstd::vector&lt;float&gt; boxes;\n\nstatic double FOV = 1.0;\nstatic int winX = 640;  //Width\nstatic int winY = 480;  //Height\n\n#define NUM_TEXTURES 10 //Update this when adding new models\nGLuint TexID[NUM_TEXTURES];\n\nint createObjVAO(std::vector&lt;float&gt; vertex_positions, std::vector&lt;float&gt; vertex_normals,\n            std::vector&lt;float&gt; vertex_texture_coordinates, std::vector&lt;unsigned int&gt; indexed_triangles, unsigned int &amp;handle){\n\n    // The usual code to send data to GPU and link it to shader variables.    \n    glGenVertexArrays(1, &amp;handle);\n    glBindVertexArray(handle);\n\n    unsigned int buffer[4];\n    glGenBuffers(4, buffer);\n\n    // Set vertex attribute\n    glBindBuffer(GL_ARRAY_BUFFER, buffer[0]);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(float) * vertex_positions.size(), &amp;vertex_positions[0], GL_STATIC_DRAW);\n    glEnableVertexAttribArray(0);\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);\n\n    // Normals (This block MUST be done before the texture block)\n    glBindBuffer(GL_ARRAY_BUFFER, buffer[1]);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(float) * vertex_normals.size(), &amp;vertex_normals[0], GL_STATIC_DRAW);\n    glEnableVertexAttribArray(1);\n    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, 0);\n\n    // Texture attributes\n    glBindBuffer(GL_ARRAY_BUFFER, buffer[2]);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(float) * vertex_texture_coordinates.size(), &amp;vertex_texture_coordinates[0], GL_STATIC_DRAW);\n    glEnableVertexAttribArray(2);\n    glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, 0);\n\n    // Array of vertex indices\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, buffer[3]);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(unsigned int) * indexed_triangles.size(), &amp;indexed_triangles[0], GL_STATIC_DRAW);\n\n    // Un-bind\n    glBindVertexArray(0);\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n\n    return 0;\n}\n\n// Load the 6 skymap textures for the cube map and set parameters\nvoid createSkyMap(){\n    glGenTextures(1, &amp;skyTexHandle);\n    glActiveTexture(GL_TEXTURE0);\n\n    int width, height, nrChannels;\n\n    glBindTexture(GL_TEXTURE_CUBE_MAP, skyTexHandle);\n\n    std::vector&lt;std::string&gt; faces;\n\n    faces.push_back(\"external_files/skybox/totality_rt.png\");\n    faces.push_back(\"external_files/skybox/totality_lf.png\");\n    faces.push_back(\"external_files/skybox/totality_up.png\");\n    faces.push_back(\"external_files/skybox/totality_dn.png\");\n    faces.push_back(\"external_files/skybox/totality_bk.png\");\n    faces.push_back(\"external_files/skybox/totality_ft.png\");\n\n    for(unsigned int i = 0; i &lt; faces.size(); i++){\n        unsigned char *data = stbi_load(faces[i].c_str(), &amp;width, &amp;height, &amp;nrChannels, 0);\n        if(data){\n            glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, data);\n            stbi_image_free(data);\n        }\n        else{\n            std::cout &lt;&lt; \"Cubemap texture failed to load at path: \" &lt;&lt; faces[i] &lt;&lt; std::endl;\n            stbi_image_free(data);\n        }\n    }\n\n    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_R, GL_CLAMP_TO_EDGE);\n    glBindTexture(GL_TEXTURE_CUBE_MAP, 0);\n\n    return;\n}\n\n// Load an image from file as texture \"ID\"\nint loadTexture(std::string fileName, int ID){\n    glActiveTexture(GL_TEXTURE0);\n\n    int x, y, n;\n    stbi_set_flip_vertically_on_load(true);\n    unsigned char *data = stbi_load(fileName.c_str(), &amp;x, &amp;y, &amp;n, 0);\n    if(!data){\n        printf(\"Texture not loaded\\n\");\n        return 1;\n    }\n\n    glBindTexture(GL_TEXTURE_2D, TexID[ID]);\n    if(n == 3){\n        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, x, y, 0, GL_RGB, GL_UNSIGNED_BYTE, data);\n    }\n    else if(n == 4){    //For pictures with an alpha channel\n        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, x, y, 0, GL_RGBA, GL_UNSIGNED_BYTE, data);\n    }\n    else {\n        printf(\"Channels: %d\\n\", n);\n        fprintf(stderr, \"Image pixels are not RGB. Texture may not load correctly.\\n\");\n    }\n    stbi_image_free(data);\n\n    glGenerateMipmap(GL_TEXTURE_2D);\n\n    return 0;\n}\n\n//Load in the obj models\nvoid loadObjModels(){\n    std::string toiletp0 = \"external_files/objModels/toilet/Toilet.obj\";\n    std::string toiletp1 = \"external_files/objModels/toilet/ToiletLid1.obj\";\n    std::string toiletp2 = \"external_files/objModels/toilet/ToiletLid2.obj\";\n    std::string megaBuster = \"external_files/objModels/megaBuster/blaster.obj\";\n    std::string spaceCraft = \"external_files/objModels/spaceCraft/Craft2.obj\";\n\n    std::string toiletBasePath = \"external_files/objModels/toilet/\";\n    std::string megaBusterBasePath = \"external_files/objModels/megaBuster/\";\n    std::string spaceCraftBasePath = \"external_files/objModels/spaceCraft/\";\n\n    std::string loadErr;\n    if(!LoadObj(shapesToiletp0, materialsToiletp0, loadErr, toiletp0.c_str(), toiletBasePath.c_str(), true)){\n        printf(\"Failed to load first toilet obj file\\n\");\n        exit(1);\n    }\n    if(!loadErr.empty()){\n        std::cerr &lt;&lt; loadErr &lt;&lt; std::endl;\n        loadErr = \"\";\n    }\n    if(!LoadObj(shapesToiletp1, materialsToiletp1, loadErr, toiletp1.c_str(), toiletBasePath.c_str(), true)){\n        printf(\"Failed to load second toilet obj file\\n\");\n        exit(1);\n    }\n    if(!loadErr.empty()){\n        std::cerr &lt;&lt; loadErr &lt;&lt; std::endl;\n        loadErr = \"\";\n    }\n    if(!LoadObj(shapesToiletp2, materialsToiletp2, loadErr, toiletp2.c_str(), toiletBasePath.c_str(), true)){\n        printf(\"Failed to load third toilet obj file\\n\");\n        exit(1);\n    }\n    if(!loadErr.empty()){\n        std::cerr &lt;&lt; loadErr &lt;&lt; std::endl;\n        loadErr = \"\";\n    }\n    if(!LoadObj(shapesMegaBuster, materialsMegaBuster, loadErr, megaBuster.c_str(), megaBusterBasePath.c_str(), true)){\n        printf(\"Failed to load the megaBuster obj file\\n\");\n        exit(1);\n    }\n    if(!loadErr.empty()){\n        std::cerr &lt;&lt; loadErr &lt;&lt; std::endl;\n        loadErr = \"\";\n    }\n    if(!LoadObj(shapesSpaceCraft, materialsSpaceCraft, loadErr, spaceCraft.c_str(), spaceCraftBasePath.c_str(), true)){\n        printf(\"Failed to load the space craft obj file\\n\");\n        exit(1);\n    }\n    if(!loadErr.empty()){\n        std::cerr &lt;&lt; loadErr &lt;&lt; std::endl;\n        loadErr = \"\";\n    }\n\n    //In our case each model there is only 1 shape and 1 material, so we can reduce the amount of code with this assumption\n    createObjVAO(shapesToiletp0[0].mesh.positions, shapesToiletp0[0].mesh.normals, shapesToiletp0[0].mesh.texcoords, shapesToiletp0[0].mesh.indices, toilet0VaoHandle);\n    createObjVAO(shapesToiletp1[0].mesh.positions, shapesToiletp1[0].mesh.normals, shapesToiletp1[0].mesh.texcoords, shapesToiletp1[0].mesh.indices, toilet1VaoHandle);\n    createObjVAO(shapesToiletp2[0].mesh.positions, shapesToiletp2[0].mesh.normals, shapesToiletp2[0].mesh.texcoords, shapesToiletp2[0].mesh.indices, toilet2VaoHandle);\n    createObjVAO(shapesMegaBuster[0].mesh.positions, shapesMegaBuster[0].mesh.normals, shapesMegaBuster[0].mesh.texcoords, shapesMegaBuster[0].mesh.indices, megaBusterVaoHandle);\n    createObjVAO(shapesSpaceCraft[0].mesh.positions, shapesSpaceCraft[0].mesh.normals, shapesSpaceCraft[0].mesh.texcoords, shapesSpaceCraft[0].mesh.indices, spaceCraftVaoHandle);\n\n    //Our transparent spinning cube defaults to the last texture for some reason, so we must set these all before it\n    int retSum = 0;\n    retSum += loadTexture(toiletBasePath + materialsToiletp0[0].diffuse_texname, 5);\n    retSum += loadTexture(toiletBasePath + materialsToiletp1[0].diffuse_texname, 6);\n    retSum += loadTexture(toiletBasePath + materialsToiletp2[0].diffuse_texname, 7);\n    retSum += loadTexture(megaBusterBasePath + materialsMegaBuster[0].diffuse_texname, 8);\n    retSum += loadTexture(spaceCraftBasePath + materialsSpaceCraft[0].diffuse_texname, 9);\n    if(retSum != 0){\n        printf(\"RetSum isn't zero: %d\\n\", retSum);\n        exit(1);\n    }\n}\n\nint createSlot(){\n    glActiveTexture(GL_TEXTURE0);  //Texture slot zero\n\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);\n\n    glGenTextures(NUM_TEXTURES, TexID); //Basically telling it we'll use 10 textures and our array of unsigned ints (The textures)\n\n    return 0;\n}\n\nint setProjection(){\n    // Perspective projection matrix\n    glm::mat4 projection;\n    projection = glm::perspective(FOV, double(winX) / double(winY), 0.001, 30.0);\n\n    // Load it to the shader program\n    int projHandleMain = glGetUniformLocation(ProgramIDs[0], \"projection_matrix\");\n    int projHandleSkybox = glGetUniformLocation(ProgramIDs[1], \"projection_matrix\");\n    if(projHandleMain == -1 || projHandleSkybox == -1){\n        fprintf(stderr, \"Error updating proj matrix\\n\");\n        return 1;\n    }\n    glUseProgram(ProgramIDs[0]);\n    glUniformMatrix4fv(projHandleMain, 1, false, glm::value_ptr(projection));\n    glUseProgram(ProgramIDs[1]);\n    glUniformMatrix4fv(projHandleSkybox, 1, false, glm::value_ptr(projection));\n\n    return 0;\n}\n\n//Sets the resolution to either the size of the primary screen or whats described in the config file\nvoid setResolution(){\n    const GLFWvidmode* mode = glfwGetVideoMode(glfwGetPrimaryMonitor());\n    std::ifstream config;\n    config.open(\"config\");\n    if(!config){\n        printf(\"Config file not found\\n\");\n        winX = mode-&gt;width;\n        winY = mode-&gt;height;\n        config.close();\n        return;\n    }\n    else{   //No config file, just fullscreen instead\n        printf(\"Config file found\\n\");\n    }\n    std::string name;\n    std::string value;\n    while(config &gt;&gt; name &gt;&gt; value){\n        if(name.compare(\"Width:\")){\n            if(!std::all_of(value.begin(), value.end(), ::isdigit)){\n                winX = mode-&gt;width;\n                continue;\n            }\n            winX = atoi(value.c_str());\n            if(winX &lt; 1){\n                winX = mode-&gt;width;\n            }\n        }\n        else if(name.compare(\"Height:\")){\n            if(!std::all_of(value.begin(), value.end(), ::isdigit)){\n                winY = mode-&gt;height;\n                continue;\n            }\n            winY = atoi(value.c_str());\n            if(winY &lt; 1){\n                winY = mode-&gt;height;\n            }\n        }\n    }\n    config.close();\n    return;\n}\n\nvoid controller_buttons(GLFWwindow* window){\n    if(buttons[6] == GLFW_PRESS){   //Back is pressed\n        glfwSetWindowShouldClose(window, GL_TRUE);\n    }\n    if(buttons[3] == GLFW_PRESS &amp;&amp; inputMode){   //Press Y to reset\n        if(!controllerPressButtons[1]){\n            playerXPos = 1.0;\n            playerYPos = 0.0;\n            playerZPos = 1.0;\n        }\n        controllerPressButtons[1] = true;\n    }\n    else{\n        controllerPressButtons[1] = false;\n    }\n    if(buttons[7] == GLFW_PRESS){  //Start is pressed\n        if(!controllerPressButtons[0]){\n            inputMode = !inputMode;\n        }\n        controllerPressButtons[0] = true;\n    }\n    else{\n        controllerPressButtons[0] = false;\n    }\n    if(buttons[2] == GLFW_PRESS &amp;&amp; inputMode){   //Press X to fire and do recoil animation\n        if(!firing){\n            firing = true;\n            fireStart = glfwGetTime();\n            system(\"aplay -q external_files/blaster.wav &amp;\");\n        }\n    }\n}\n\nvoid reshape_callback(GLFWwindow *window, int x, int y){\n    winX = x;\n    winY = y;\n\n    setProjection();\n    glViewport(0, 0, (GLsizei)x, (GLsizei)y); \n}\n\n//This code seems right, but for some reason the keyboard behaves very strangely\nvoid key_callback(GLFWwindow* window, int key, int scancode, int action, int mods){\n    if(action == GLFW_PRESS){\n        switch(key){\n            case GLFW_KEY_ESCAPE:\n                glfwSetWindowShouldClose(window, GL_TRUE);\n                break;\n            case GLFW_KEY_G:    //Press G to switch between keyboard/mouse and controller controls\n                inputMode = !inputMode;\n                break;\n            case GLFW_KEY_Y:\n                if(!inputMode || !joystickPresent){  //Press Y to reset\n                    playerXPos = 1.0;\n                    playerYPos = 0.0;\n                    playerZPos = 1.0;\n                }\n                break;\n            default:\n                break;\n        }\n    }\n\n    int state = glfwGetKey(window, GLFW_KEY_X);\n    if(state == GLFW_PRESS || state == GLFW_REPEAT){    //Why is it bugged? Sometimes it holds longer and fires an extra shot. The keyboard is weird\n        if((!inputMode || !joystickPresent) &amp;&amp; !firing){  //Press X to fire and do recoil animation\n            firing = true;\n            fireStart = glfwGetTime();\n            system(\"aplay -q external_files/blaster.wav &amp;\");\n        }\n    }\n\n    if(action == GLFW_PRESS &amp;&amp; key == GLFW_KEY_W){\n        heldButtons[0] = true;\n    }\n    if(action == GLFW_PRESS &amp;&amp; key == GLFW_KEY_A){\n        heldButtons[1] = true;\n    }\n    if(action == GLFW_PRESS &amp;&amp; key == GLFW_KEY_S){\n        heldButtons[2] = true;\n    }\n    if(action == GLFW_PRESS &amp;&amp; key == GLFW_KEY_D){  //For some reason the D key is buggy\n        heldButtons[3] = true;\n    }\n\n    //And releasing keys doesn't update them all at once...\n    if(action == GLFW_RELEASE &amp;&amp; key == GLFW_KEY_W){\n        heldButtons[0] = false;\n    }\n    if(action == GLFW_RELEASE &amp;&amp; key == GLFW_KEY_A){\n        heldButtons[1] = false;\n    }\n    if(action == GLFW_RELEASE &amp;&amp; key == GLFW_KEY_S){\n        heldButtons[2] = false;\n    }\n    if(action == GLFW_RELEASE &amp;&amp; key == GLFW_KEY_D){\n        heldButtons[3] = false;\n    }\n}\n\nstatic void cursor_position_callback(GLFWwindow* window, double xpos, double ypos){\n    float centreX = winX/2;\n    float centreY = winY/2;\n\n    if(!joystickPresent || !inputMode){\n        //Use the distance between xpos/ypos and the origin to modify the rotation\n\n        playerVerticalRot += 0.005 * (ypos - centreY);\n        playerHorizontalRot += 0.005 * (xpos - centreX);\n\n        if(playerVerticalRot &gt; M_PI/2){    //If beyond looking straight down, undo changes\n            playerVerticalRot = M_PI/2;\n        }\n\n        if(playerVerticalRot &lt; -M_PI/2){    //If beyond looking straight down, undo changes\n            playerVerticalRot = -M_PI/2;\n        }\n    }\n\n    glfwSetCursorPos(window, centreX, centreY); //Reset the cursor to the centre of the screen so we don't hit the boarders of the window\n}\n\nstatic void error_callback(int error, const char* description){\n    fputs(description, stderr);\n}\n\nint main(int argC, char *argV[]){\n\n    std::cout &lt;&lt; \"A bunch of printf's\\n\\n\";\n\n    GLFWwindow* window; //Starts to mess up after here\n    std::cout &lt;&lt; \"TEster\\n\";\n    glfwSetErrorCallback(error_callback);\n\n    if(!glfwInit()){\n        exit(1);\n    }\n\n    // Specify that we want OpenGL 3.3\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\n    // glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 4);\n    // glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 1);\n    glfwWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);\n    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n\n    loadMazeFile();\n\n    joystickPresent = glfwJoystickPresent(GLFW_JOYSTICK_1); //Detects if a Joystick is plugged in (Controls change if true)\n\n    // Create the window and OpenGL context\n    setResolution();    //Set the resolution to the screen size\n    window = glfwCreateWindow(winX, winY, \"Megaman and the Legend of the Dark and Dank Toilet\", NULL, NULL);\n    if(!window){\n        glfwTerminate();\n        exit(1);\n    }\n\n    glfwMakeContextCurrent(window);\n    glfwSwapInterval(1);\n\n    // Initialize GLEW\n    glewExperimental = true; // Needed for core profile\n    if(glewInit() != GLEW_OK){\n        fprintf(stderr, \"Failed to initialize GLEW\\n\");\n        exit(1);\n    }\n\n    // These shaders use supplied tex coords to texture surface\n    ProgramIDs[0] = LoadShaders(\"main_shader.vert\", \"main_shader.frag\");\n    ProgramIDs[1] = LoadShaders(\"skybox_shader.vert\", \"skybox_shader.frag\");\n\n    if(ProgramIDs[0] == 0 || ProgramIDs[1] == 0){\n        fprintf(stderr, \"Error loading shaders\\n\");        \n        exit(1);\n    }\n\n    // Set up OpenGL parameters and data\n    glClearColor(0.2f, 0.2f, 0.2f, 1.0f);\n    glEnable(GL_DEPTH_TEST);\n    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n    glEnable(GL_BLEND);\n\n    my_models.initSky(); //Creates the skybox mesh\n    createSkyMap();\n    setProjection();\n    my_models.initCube(ProgramIDs[0]); //Creates the cube mesh\n    my_models.initFrame(ProgramIDs[0]); //Creates the frame mesh\n\n    // Load the 3 textures to change between\n    createSlot();   //Slot created after skymap is made\n    loadTexture(\"external_files/textures/wall.png\", 0);\n    loadTexture(\"external_files/textures/floor.png\", 1);\n    loadTexture(\"myTextures/exit.png\", 2);\n    loadTexture(\"external_files/textures/metalCreate.png\", 3);\n    loadTexture(\"myTextures/exitTrans.png\", 4);\n\n    loadObjModels();\n\n    //Set all the held/pressed buttons to zero\n    for(int i = 0; i &lt; 2; i++){\n        controllerPressButtons[i] = false;\n        heldButtons[2 * i] = false;\n        heldButtons[2 * i + 1] = false;\n    }\n    heldButtons[4] = false;\n\n    // Define callback functions and start main loop\n    glfwSetKeyCallback(window, key_callback);\n    glfwSetFramebufferSizeCallback(window, reshape_callback);\n    glfwSetCursorPosCallback(window, cursor_position_callback);\n\n    glfwSetInputMode(window, GLFW_CURSOR, GLFW_CURSOR_HIDDEN);  //This hides the mouse cursor\n\n    //Starting coords\n    playerXPos = 1;\n    playerYPos = 0;\n    playerZPos = 1;\n\n    addCollisionBoxes(boxes);\n\n    while(!glfwWindowShouldClose(window)){\n        joystickPresent = glfwJoystickPresent(GLFW_JOYSTICK_1); //Detects if a Joystick is plugged in (Controls change if true)\n        if(joystickPresent){\n            axes = glfwGetJoystickAxes(GLFW_JOYSTICK_1, &amp;count);\n        }\n\n        exitSpin = glfwGetTime();\n        updateCollisionBox(9.5, 8.5, 0.5 * glm::sin(exitSpin), 0.5 * glm::sin(exitSpin) - 1.0, 2.5, 1.5, boxes, 0); //Update the moving block's collision\n        move();\n\n        if(joystickPresent){\n            if(inputMode){\n                controller_look();\n            }\n            buttons = glfwGetJoystickButtons(GLFW_JOYSTICK_1, &amp;count);\n            controller_buttons(window);\n        }\n\n        //Render code\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n        renderSpaceCraft();\n        renderToilet();\n        renderMaze();\n        renderSkybox();\n\n        glClear(GL_DEPTH_BUFFER_BIT);   //Need to reset the depth buffer for HUD stuff like the blaster\n        renderMegaBuster();\n\n        glBindVertexArray(0);\n        glFlush();\n\n        //Swap buffers and get inputs\n        glfwSwapBuffers(window);\n        glfwPollEvents();\n    }\n\n    // Clean up\n    glfwDestroyWindow(window);\n    glfwTerminate();\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that a while ago I tried my code in Ubuntu 18.04 and got similar results hence why I think there's an issue with a library.</p>\n\n<p><strong>Edit 2</strong></p>\n\n<p>This is what happens when I run make on the glew source</p>\n\n<pre><code>$ make\ngcc -shared -Wl,-soname,libglew32.dll -Wl,--out-implib,lib/libglew32.dll.a    -o lib/glew32.dll tmp/mingw/default/shared/glew.o -L/mingw/lib -nostdlib -lopengl32 -lgdi32 -luser32 -lkernel32\nstrip -x lib/glew32.dll\nsed \\\n    -e \"s|@prefix@|/usr|g\" \\\n    -e \"s|@libdir@|/usr/lib|g\" \\\n    -e \"s|@exec_prefix@|/usr/bin|g\" \\\n    -e \"s|@includedir@|/usr/include/GL|g\" \\\n    -e \"s|@version@|2.1.0|g\" \\\n    -e \"s|@cflags@||g\" \\\n    -e \"s|@libname@|glew32|g\" \\\n    -e \"s|@requireslib@|glu|g\" \\\n    &lt; glew.pc.in &gt; glew.pc\ngcc -fno-builtin -O2 -Wall -W -Iinclude -fno-builtin -fno-stack-protector -o bin/glewinfo.exe tmp/mingw/default/shared/glewinfo.o -Llib  -lglew32 -L/mingw/lib -nostdlib -lopengl32 -lgdi32 -luser32 -lkernel32\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text+0x3a): undefined reference to `fprintf'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text+0x1a6): undefined reference to `strlen'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text+0x1db): undefined reference to `fprintf'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text+0x205c9): undefined reference to `sscanf'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text+0x205ee): undefined reference to `strcmp'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text+0x20602): undefined reference to `strcmp'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text+0x206ff): undefined reference to `strtol'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text+0x2071c): undefined reference to `strcmp'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text+0x20789): undefined reference to `memset'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text+0x1f1): undefined reference to `fflush'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text.startup+0x13): undefined reference to `__main'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text.startup+0x80): undefined reference to `fopen'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text.startup+0x87): undefined reference to `__imp___acrt_iob_func'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text.startup+0xaa): undefined reference to `fprintf'\ntmp/mingw/default/shared/glewinfo.o:glewinfo.c:(.text.startup+0x19f7): undefined reference to `fprintf'\ncollect2.exe: error: ld returned 1 exit status\nmake: *** [Makefile:181: bin/glewinfo.exe] Error 1\n</code></pre>\n\n<p>It seems its not including some libraries, but glewinfo.c does seem to have the right libraries included...(I cropped the output to fit in the 30000 char limit)</p>\n"}, {"tags": ["c++", "maya", "maya-api"], "comments": [{"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1539773052, "post_id": 52851750, "comment_id": 92621144, "body": "It&#39;s been ages, I have not written plugin for Maya in C++ but this link should be helpful to you: <a href=\"https://nccastaff.bournemouth.ac.uk/jmacey/RobTheBloke/www/research/maya/mfnmaterial.htm\" rel=\"nofollow noreferrer\">nccastaff.bournemouth.ac.uk/jmacey/RobTheBloke/www/research/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 313, "user_id": 9494441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad5c6f0e980273f94a0e95c0a804866d?s=128&d=identicon&r=PG&f=1", "display_name": "Range", "link": "https://stackoverflow.com/users/9494441/range"}, "reply_to_user": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1539777933, "post_id": 52851750, "comment_id": 92624046, "body": "@Asesh Thank. But I could not find the necessary information there ..."}], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 9494441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad5c6f0e980273f94a0e95c0a804866d?s=128&d=identicon&r=PG&f=1", "display_name": "Range", "link": "https://stackoverflow.com/users/9494441/range"}, "is_accepted": true, "score": 0, "last_activity_date": 1540596359, "creation_date": 1540596359, "answer_id": 53017411, "question_id": 52851750, "link": "https://stackoverflow.com/questions/52851750/maya-api-c-get-material-from-poly/53017411#53017411", "title": "Maya API C++: get material from poly", "body": "<p>I'm get all materials, then i get all poly in current material:</p>\n\n<pre><code>MStatus stat = MStatus::kSuccess;\nMSpace::Space space = MSpace::kWorld; \nMFnSet fnSet(set, &amp;stat); \nif (stat == MS::kFailure) \n{\n    MStreamUtils::stdErrorStream() &lt;&lt; \"ERROR: MFnSet::MFnSet\\n\";\n    return MStatus::kNotImplemented;\n}\nMItMeshPolygon polyIter(mdagPath, comp, &amp;stat); // iterator on vertex\nif ((stat == MS::kFailure)) \n{\n    MStreamUtils::stdErrorStream() &lt;&lt; \"ERROR: Can't create poly iterator!\\n\";\n    return MStatus::kNotImplemented;\n}\nMFnDependencyNode fnNode(set); \nMPlug shaderPlug = fnNode.findPlug(\"surfaceShader\");\nMPlugArray connectedPlugs;\nif (shaderPlug.isNull())\n{\n    MStreamUtils::stdErrorStream() &lt;&lt; \"ERROR: Can't find material!\\n\";\n    return MStatus::kNotImplemented;\n}\nshaderPlug.connectedTo(connectedPlugs, true, false);\nMFnDependencyNode fnDN(connectedPlugs[0].node());\n\nMItDependencyGraph dgIt(shaderPlug, MFn::kFileTexture, \n    MItDependencyGraph::kUpstream,\n    MItDependencyGraph::kBreadthFirst,\n    MItDependencyGraph::kNodeLevel,\n    &amp;stat);\nif (stat == MS::kFailure)\n{\n    MStreamUtils::stdErrorStream() &lt;&lt; \"ERROR: Can't load graph textures\\n\";\n    return MStatus::kNotImplemented;\n}\ndgIt.disablePruningOnFilter();\nif (dgIt.isDone()) \n{\n    MStreamUtils::stdErrorStream() &lt;&lt; \"Warning: Material \" &lt;&lt; fnDN.name().asChar() &lt;&lt; \" not textured\\n\";\n    //return MStatus::kNotImplemented;\n}\n\n// no need, here we get the texture\nMObject textureNode = dgIt.thisNode();\nMPlug filenamePlug = MFnDependencyNode(textureNode).findPlug(\"fileTextureName\");\nMString textureName; // name texture + path\nfilenamePlug.getValue(textureName);\n(; !polyIter.isDone(); polyIter.next())\n{\n    // here get poly and perform actions on it\n}\n</code></pre>\n"}], "owner": {"reputation": 313, "user_id": 9494441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad5c6f0e980273f94a0e95c0a804866d?s=128&d=identicon&r=PG&f=1", "display_name": "Range", "link": "https://stackoverflow.com/users/9494441/range"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 53017411, "answer_count": 1, "score": 0, "last_activity_date": 1540596359, "creation_date": 1539769201, "question_id": 52851750, "link": "https://stackoverflow.com/questions/52851750/maya-api-c-get-material-from-poly", "title": "Maya API C++: get material from poly", "body": "<p>I am writing a plugin for Maya 2018 using Maya API C ++. I have already successfully obtained a mesh, and created an iterator to iterate through all the polygons:</p>\n\n<pre><code> ...\n MFnMesh fnMesh(mdagPath, &amp;stat); \n if (MS::kSuccess != stat)\n {\n    // error get mesh\n    return MS::kFailure;\n }\n MItMeshPolygon polyIter(mdagPath, mComponent, &amp;stat);\n if (MS::kSuccess != stat) \n {\n    // error create iterator\n    return MS::kFailure;\n }\n ...\n</code></pre>\n\n<p>I successfully get vertices, normals, texture coordinates. But how to get the material that is superimposed on the current polygon? And along with the material texture.</p>\n"}, {"tags": ["c++", "class", "oop", "object"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1539768725, "post_id": 52851475, "comment_id": 92618665, "body": "Just a suggestion but try not to use <code>v</code> for lots of different things it mages reading the code harder.  Some of the code is broken because of shadowing; and <code>A::get</code> just is strange."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1539768827, "post_id": 52851475, "comment_id": 92618728, "body": "<code>v</code> is uninitialised.  So dereferencing it (i.e. evaluating <code>*v</code>) has undefined behaviour.  But, yes, the compiler sees this as a call to the copy constructor based on the type of <code>*v</code>.   The copy constructor is implicitly generated by default.   The compiler is not required to diagnose instances of undefined behaviour."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539769262, "post_id": 52851475, "comment_id": 92618975, "body": "Change <code>A *v;</code> to <code>A *v = nullptr;</code> and tell us if still &quot;works&quot;."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1539770007, "post_id": 52851475, "comment_id": 92619405, "body": "@Jabberwocky  Of course reading from a null pointer is exactly as undefined as reading from an uninitialized one.  (Although it is more likely to segfault.)"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 6324450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rmh28.jpg?s=128&g=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/6324450/jules"}, "edited": false, "score": 0, "creation_date": 1539769555, "post_id": 52851655, "comment_id": 92619151, "body": "It is an exercise of futility for you that may know what is going on. You can run the code a thousand times and there will never be a seg-fault, so it is far from being the most likely behaviour. Honestly, I don&#39;t see why unvote the question."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 129, "user_id": 6324450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rmh28.jpg?s=128&g=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/6324450/jules"}, "edited": false, "score": 0, "creation_date": 1539769846, "post_id": 52851655, "comment_id": 92619314, "body": "@Jules on my platform your code segfaults every time. Local variables are not initialized in C. What happens on your platform is that the uninitialized pointer <code>v</code> points by chance to some memory that your process is allowed to read, and <code>*v</code> reads whatever is in that memory location. That&#39;s why it apparently works fine on <i>your</i> platform. <i>Undefined behaviour</i> (google that) includes &quot;apparently working fine&quot;."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 129, "user_id": 6324450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rmh28.jpg?s=128&g=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/6324450/jules"}, "edited": false, "score": 0, "creation_date": 1539769869, "post_id": 52851655, "comment_id": 92619328, "body": "@Jules  I said the most likely behaviour is &quot;either a seg fault or a copy of some random piece of memory&quot;, however there are a <i>huge</i> range of other possible behaviours - right up to causing your monitor to catch fire (there have certainly been computers were an errant <i>write</i> could cause that to happen; I don&#39;t think errant <i>reads</i> ever have - but it doesn&#39;t require a <i>particularly</i> outlandish design).  Given this is in main, if you don&#39;t get a seg fault the first time, you probably never will."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 129, "user_id": 6324450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rmh28.jpg?s=128&g=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/6324450/jules"}, "edited": false, "score": 0, "creation_date": 1539769960, "post_id": 52851655, "comment_id": 92619378, "body": "@Jules Incidentally, I didn&#39;t downvote your question."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1539768913, "creation_date": 1539768913, "answer_id": 52851655, "question_id": 52851475, "link": "https://stackoverflow.com/questions/52851475/class-instatiation-using-pointers/52851655#52851655", "title": "Class instatiation using pointers", "body": "<p>No.  We can't shed any light on how it works.  <code>v</code> has never been initialized, so trying to copy from the object it (doesn't) point at is undefined behaviour.  Trying to reason about undefined behaviour is an exercise in futility except for debugging purposes.  The most likely behaviour is either a seg-fault, or <code>*b</code> will be a copy of some random piece of memory.</p>\n\n<p>As <a href=\"https://stackoverflow.com/users/4706785/peter\">Peter</a> points out in his comment the compiler is not required to diagnose instances of undefined behaviour.  In this case, I would expect most compilers to warn if you crank up the warning level (-Wall -werror are good flags to use).</p>\n"}], "owner": {"reputation": 129, "user_id": 6324450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rmh28.jpg?s=128&g=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/6324450/jules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 52851655, "answer_count": 1, "score": 0, "last_activity_date": 1539768913, "creation_date": 1539768335, "question_id": 52851475, "link": "https://stackoverflow.com/questions/52851475/class-instatiation-using-pointers", "title": "Class instatiation using pointers", "body": "<p>Could someone shed some light on how the next piece of code works on the creation of the object <strong><em>b</em></strong>?? It looks like it is working with a default copy constructor?. I don't see how it is working with an object that has never been instantiated, object <strong>v</strong>.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nclass A {\npublic:\n    A(float v) { A::v = v; cout &lt;&lt; \"hola\" &lt;&lt; endl;}\n    float v;\n    float set(float v) {\n        A::v = v;\n        return v;\n    }\n    float get(float v) {\n        return A::v;\n    }\n};\nint main() {\n    A c(2.0);\n    A *v;\n    A *a = new A(1.0), *b = new A(*v);\n    cout &lt;&lt; a-&gt;get(b-&gt;set(c.v));\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1539768199, "post_id": 52851368, "comment_id": 92618359, "body": "Did this &quot;major&quot; change fix your performance problem? If it didn&#39;t, leave it as it was."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 1, "creation_date": 1539768300, "post_id": 52851368, "comment_id": 92618425, "body": "<i>Generally</i> the way to go with C++ is RAII, i.e. no <code>init()</code> / <code>clear()</code>, unless you&#39;re solving a problem that&#39;s more important to solve than maintaining good architecture... I am voting to close this question as opinion-based."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 4, "creation_date": 1539769304, "post_id": 52851368, "comment_id": 92619003, "body": "@DevSolar There are plenty of objective things we can say about this. It&#39;s not exactly &quot;what&#39;s your favourite compiler?&quot;"}, {"owner": {"reputation": 4257, "user_id": 2407363, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/JOzMf.jpg?s=128&g=1", "display_name": "Kemin Zhou", "link": "https://stackoverflow.com/users/2407363/kemin-zhou"}, "edited": false, "score": 0, "creation_date": 1584481528, "post_id": 52851368, "comment_id": 107449258, "body": "user2622344 should have conducted the test and get answer from the test.  Other people may have from their opinions or from the principles. In rare situations, it might worth to try to use one object to to repeat jobs based on some input. You can design the class to construct the object from the input, the getWantedValue(). Or you can construct empty object, the getWantedValue(inputvalue)."}], "answers": [{"comments": [{"owner": {"reputation": 568, "user_id": 2622344, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/b34a2256660a546f89b247f54b387b62?s=128&d=identicon&r=PG", "display_name": "user2622344", "link": "https://stackoverflow.com/users/2622344/user2622344"}, "edited": false, "score": 0, "creation_date": 1539768616, "post_id": 52851444, "comment_id": 92618609, "body": "in this case the serializer could be static, because it doesn&#39;t has any state. correct?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 568, "user_id": 2622344, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/b34a2256660a546f89b247f54b387b62?s=128&d=identicon&r=PG", "display_name": "user2622344", "link": "https://stackoverflow.com/users/2622344/user2622344"}, "edited": false, "score": 0, "creation_date": 1539768739, "post_id": 52851444, "comment_id": 92618677, "body": "@user2622344 Correct. So, in fact, <code>DatabaseRowSerializer::toXml(dbRow)</code> could be a fourth valid approach. What&#39;s best for you depends on things we can&#39;t see or know or measure from here."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 13, "last_activity_date": 1539768917, "last_edit_date": 1539768917, "creation_date": 1539768263, "answer_id": 52851444, "question_id": 52851368, "link": "https://stackoverflow.com/questions/52851368/reuse-object-vs-creating-new-object/52851444#52851444", "title": "Reuse object vs. creating new object", "body": "<p>On the one hand, this is subjective. On the other, opinion <em>widely</em> agrees that in C++ you should avoid this \"init function\" idiom because:</p>\n\n<ol>\n<li><p>It is worse code</p>\n\n<ul>\n<li>You have to remember to \"initialise\" your object and, if you don't, what state is it in? Your object should never be in a \"dead\" state. (Don't get me started on \"moved-from\" objects&hellip;) This is <em>why</em> C++ introduced constructors and destructors, because the old C approach was kind of minging and resulting programs are harder to prove correct.</li>\n</ul></li>\n<li><p>It is unnecessary</p>\n\n<ul>\n<li><p>There is essentially <em>no overhead</em> in creating a <code>DatabaseRowSerializer</code> every time, unless its constructor does more than your <code>initDbRow</code> function, in which case your two examples are not equivalent anyway.</p>\n\n<p>Even if your compiler doesn't optimise away the unnecessary \"allocation\", there isn't really an allocation anyway because the object just takes up space on the stack and it has to do that regardless.</p>\n\n<p>So if this change really solved your performance problem, something else was probably going on.</p></li>\n</ul></li>\n</ol>\n\n<p>Use your constructors and destructors. Freely and proudly!</p>\n\n<p>That's the common advice when writing C++.</p>\n\n<hr>\n\n<p>A possible third approach if you did want to make the serializer re-usable for whatever reason, is to move all of its state into the actual operational function call:</p>\n\n<pre><code>DatabaseRowSerializer serializer;\n\n// loop with all dbRows\n{\n    result.add(serializer.toXml(dbRow));\n}\n</code></pre>\n\n<p>You might do this if the serialiser has some desire to cache information, or re-use dynamically-allocated buffers, to aid in performance. That of course adds some state into the serialiser.</p>\n\n<p>If you do this and still don't have any state, then the whole thing can just be a static call:</p>\n\n<pre><code>// loop with all dbRows\n{\n    result.add(DatabaseRowSerializer::toXml(dbRow));\n}\n</code></pre>\n\n<p>&hellip;but then it may as well just be a function.</p>\n\n<p>Ultimately we can't know exactly what's best for you, but there are plenty of options and considerations.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1539768831, "post_id": 52851619, "comment_id": 92618731, "body": "That&#39;s a good point. Starting with the &quot;re-used&quot; design permits caching and buffer re-use and other optimisations that you otherwise prevent yourself from adding later. Well, unless you refactor again :)"}], "tags": [], "owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "is_accepted": false, "score": 4, "last_activity_date": 1539802557, "last_edit_date": 1539802557, "creation_date": 1539768769, "answer_id": 52851619, "question_id": 52851368, "link": "https://stackoverflow.com/questions/52851368/reuse-object-vs-creating-new-object/52851619#52851619", "title": "Reuse object vs. creating new object", "body": "<p>Generally I agree with the points raised by LRiO in the <a href=\"https://stackoverflow.com/a/52851444/321013\">other answer</a>.</p>\n\n<p>Just moving the constructor out of the loop isn't a good idea.</p>\n\n<p><strong>However</strong>, for this style of loop body:</p>\n\n<ol>\n<li>feed object some data</li>\n<li>transform data within object</li>\n<li>return transformed data from object</li>\n</ol>\n\n<p>It is, IMHO, often the case that the transforming object will allocate some buffers (on the heap) <em>that potentially can be reused</em> when the second form with the init function is used. In naive implementations, this reuse may not even be deliberate, just a side effect of the implementation.</p>\n\n<p>So, IFF you're seeing a speed up by your refactoring (hoisting the object constructor out of the loop), it <em>may be</em> because the object is now able to re-use some buffers and avoid repeated \"redundant\" heap allocations for these buffers.</p>\n\n<p>So, in summary:</p>\n\n<p>You do <em>not</em> want the constructor to be hoisted out of the loop for its own sake. <em>But</em> you want all buffers that can be preserved to be preserved across the loop iterations.</p>\n"}], "owner": {"reputation": 568, "user_id": 2622344, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/b34a2256660a546f89b247f54b387b62?s=128&d=identicon&r=PG", "display_name": "user2622344", "link": "https://stackoverflow.com/users/2622344/user2622344"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1347, "favorite_count": 0, "answer_count": 2, "score": 9, "last_activity_date": 1539802687, "creation_date": 1539767998, "last_edit_date": 1539802687, "question_id": 52851368, "link": "https://stackoverflow.com/questions/52851368/reuse-object-vs-creating-new-object", "title": "Reuse object vs. creating new object", "body": "<p>One of our projects deals with tons of data. It selects data from an database and serializes the results into JSON/XML.</p>\n\n<p>Sometimes the amount of selected rows can reach the 50 million mark easily.</p>\n\n<p>However though, the runtime of the program was to bad in the beginning.</p>\n\n<p>So we have refactored the program with one major adjustment:</p>\n\n<p>The working objects for serialization wouldn't be recreated for every single row, instead the object will be cleared and reinitialized.</p>\n\n<p>For example:</p>\n\n<p>Before:</p>\n\n<p>For every single database row we create an object of DatabaseRowSerializer and call the specific serialize function.</p>\n\n<pre><code>// Loop with all dbRows\n{\n    DatabaseRowSerializer serializer(dbRow);\n    result.add(serializer.toXml());\n}\n</code></pre>\n\n<p>After:</p>\n\n<p>The constructor of DatabaseRowSerializer doesn't sets the dbRow. Instead this will be done by the initDbRow()-function.</p>\n\n<p>The main thing here is, that only one object will be used for the whole runtime. After the serialization of an dbRow, the clear()-function\nwill be called to reset the object.</p>\n\n<pre><code>DatabaseRowSerializer serializer;\n\n// Loop with all dbRows\n{\n    serializier.initDbRow(dbRow);\n    result.add(serializer.toXml());\n    serializier.clear();\n}\n</code></pre>\n\n<p>So my question:</p>\n\n<p>Is this really a good way to handle the problem?\nIn my opinion init()-functions aren't really smart. And normally a constructor should be used to initialize the possible parameters.</p>\n\n<p>Which way do you generally prefer? Before or after?</p>\n"}, {"tags": ["c++", "regex", "regex-group", "regex-greedy"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1539767905, "post_id": 52851282, "comment_id": 92618172, "body": "Extract all matches and get the first three."}, {"owner": {"reputation": 183, "user_id": 966964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd389e0b1ff26edb5ada492434f5593d?s=128&d=identicon&r=PG", "display_name": "tbop", "link": "https://stackoverflow.com/users/966964/tbop"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1539767977, "post_id": 52851282, "comment_id": 92618223, "body": "That&#39;s possible too but that&#39;s  not my question as this is then post-processing done after the regex matching and not within."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1539768101, "post_id": 52851282, "comment_id": 92618299, "body": "Try replacing <code>^\\D*(\\d+)(?:\\D+(\\d+))?(?:\\D+(\\d+))?.*</code> with <code>$1 $2 $3</code>"}, {"owner": {"reputation": 183, "user_id": 966964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd389e0b1ff26edb5ada492434f5593d?s=128&d=identicon&r=PG", "display_name": "tbop", "link": "https://stackoverflow.com/users/966964/tbop"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1539768455, "post_id": 52851282, "comment_id": 92618514, "body": "Impressive. Seems to do the job indeed. Why not posting this as an answer instead?"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1539768488, "post_id": 52851282, "comment_id": 92618538, "body": "What is the programming language? I can give a better answer with that detail in mind."}, {"owner": {"reputation": 183, "user_id": 966964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd389e0b1ff26edb5ada492434f5593d?s=128&d=identicon&r=PG", "display_name": "tbop", "link": "https://stackoverflow.com/users/966964/tbop"}, "reply_to_user": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1539768563, "post_id": 52851282, "comment_id": 92618574, "body": "C++. (What a beautiful monster, gotta study this one on regex101 for a while now)"}], "answers": [{"tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1539768599, "creation_date": 1539768599, "answer_id": 52851565, "question_id": 52851282, "link": "https://stackoverflow.com/questions/52851282/how-to-capture-repeated-group-up-to-n-times/52851565#52851565", "title": "How to capture repeated group up to N times?", "body": "<p>You may match and capture the first three chunks of digits separated with any amount of non-digits and the rest of the string, and replace with the backreferences to those groups:</p>\n\n<pre><code>^\\D*(\\d+)(?:\\D+(\\d+))?(?:\\D+(\\d+))?.*\n</code></pre>\n\n<p>Or, if the string can be multiline,</p>\n\n<pre><code>^\\D*(\\d+)(?:\\D+(\\d+))?(?:\\D+(\\d+))?[\\s\\S]*\n</code></pre>\n\n<p>The replacement string will look like <code>$1 $2 $3</code>.</p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>^</code> - start of string</li>\n<li><code>\\D*</code> - 0+ non-digits</li>\n<li><code>(\\d+)</code> - Group 1: one or more digits</li>\n<li><code>(?:\\D+(\\d+))?</code> - an optional non-capturing group matching:\n\n<ul>\n<li><code>\\D+</code> - 1+ non-digits</li>\n<li><code>(\\d+)</code> - Group 2: one or more digits </li>\n</ul></li>\n<li><p><code>(?:\\D+(\\d+))?</code> - another optional non-capturing group matching:</p>\n\n<ul>\n<li><code>\\D+</code> - one or more non-digits</li>\n<li><code>(\\d+)</code> - Group 3: one or more digits </li>\n</ul></li>\n<li><p><code>[\\s\\S]*</code> - the rest of the string.</p></li>\n</ul>\n\n<p>See the <a href=\"https://regex101.com/r/1YhaH1/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n\n<p><a href=\"https://ideone.com/cMbV8N\" rel=\"nofollow noreferrer\">C++ demo</a>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\nusing namespace std;\n\nint main() {\n    std::vector&lt;std::string&gt; strings;\n    strings.push_back(\"T441_S45/1\");\n    strings.push_back(\"007_S4\");\n    strings.push_back(\"41_445T02_74\");\n\n    std::regex reg(R\"(^\\D*(\\d+)(?:\\D+(\\d+))?(?:\\D+(\\d+))?[\\s\\S]*)\");\n    for (size_t k = 0; k &lt; strings.size(); k++)\n    {\n        std::cout &lt;&lt; \"Input string: \" &lt;&lt; strings[k] &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Replace result: \" \n                     &lt;&lt; std::regex_replace(strings[k], reg, \"$1 $2 $3\") &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Input string: T441_S45/1\nReplace result: 441 45 1\nInput string: 007_S4\nReplace result: 007 4 \nInput string: 41_445T02_74\nReplace result: 41 445 02\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 966964, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/bd389e0b1ff26edb5ada492434f5593d?s=128&d=identicon&r=PG", "display_name": "tbop", "link": "https://stackoverflow.com/users/966964/tbop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 52851565, "answer_count": 1, "score": 3, "last_activity_date": 1539768844, "creation_date": 1539767737, "last_edit_date": 1539768844, "question_id": 52851282, "link": "https://stackoverflow.com/questions/52851282/how-to-capture-repeated-group-up-to-n-times", "title": "How to capture repeated group up to N times?", "body": "<p>I would like to capture chains of digits in a string, but only up to 3 times.</p>\n\n<p>Any chain of digits afterwards should be ignored. For instance:</p>\n\n<p><code>T441_S45/1 =&gt; 441 45 1\n007_S4 =&gt; 007 4\n41_445T02_74 =&gt; 41 445 02</code></p>\n\n<p>I've tried <code>(\\d+){1,3}</code> but that doesn't seem to work...</p>\n\n<p>Any hint?</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1539768285, "creation_date": 1539768285, "answer_id": 52851450, "question_id": 52851239, "link": "https://stackoverflow.com/questions/52851239/local-static-variable-linkage-in-a-template-class-static-member-function/52851450#52851450", "title": "Local static variable linkage in a template class static member function", "body": "<blockquote>\n  <p>Does the standard guarantee that return value is always 1, meaning that <code>static int x</code> is the same across translation units?</p>\n</blockquote>\n\n<p>The standard <em>requires</em> that.</p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/language/storage_duration#Static_local_variables\" rel=\"nofollow noreferrer\">Static local variables</a>:</p>\n\n<blockquote>\n  <p>Function-local static objects in all definitions of the same inline function (which may be implicitly inline) all refer to the same object defined in one translation unit.</p>\n</blockquote>\n\n<hr>\n\n<p>The compiler generates a copy of that function local static in each translation unit and then the linker picks one and discards the duplicates. When shared libraries are involved they may have their own copies of the object but the runtime linker (<code>ld.so</code>) resolves all references to the one that was discovered first. This method is known as <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Vague-Linkage.html\" rel=\"nofollow noreferrer\">vague linkage</a>:</p>\n\n<blockquote>\n  <p>Local static variables and string constants used in an inline function are also considered to have vague linkage, since they must be shared between all inlined and out-of-line instances of the function.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1539768477, "creation_date": 1539768477, "answer_id": 52851521, "question_id": 52851239, "link": "https://stackoverflow.com/questions/52851239/local-static-variable-linkage-in-a-template-class-static-member-function/52851521#52851521", "title": "Local static variable linkage in a template class static member function", "body": "<p>In your example, it does. We need to examine <a href=\"https://timsong-cpp.github.io/cppwp/n4659/basic.def.odr#6\" rel=\"nofollow noreferrer\">[basic.def.odr] \u00b66</a></p>\n\n<blockquote>\n  <p>There can be more than one definition of a [..] class template,\n  non-static function template, static data member of a class template,\n  member function of a class template, or template specialization for\n  which some template parameters are not specified ([temp.spec],\n  [temp.class.spec]) in a program provided that each definition appears\n  in a different translation unit, and provided the definitions satisfy\n  the following requirements. Given such an entity named D defined in\n  more than one translation unit, then</p>\n  \n  <ul>\n  <li>each definition of D shall consist of the same sequence of tokens; and [...]</li>\n  </ul>\n  \n  <p>If D is a template and is defined in more than one translation unit,\n  then the preceding requirements shall apply both to names from the\n  template's enclosing scope used in the template definition\n  ([temp.nondep]), and also to dependent names at the point of\n  instantiation ([temp.dep]). If the definitions of D satisfy all these\n  requirements, then the behavior is as if there were a single\n  definition of D. If the definitions of D do not satisfy these\n  requirements, then the behavior is undefined.</p>\n</blockquote>\n\n<p>Your templates are okay in that regard, it's as if they were included from the same header. There are other bullets in that clause that also need to hold, but they are not relevant to your example.</p>\n\n<p>Now, since it's as if there is only one definition of the template and its members in your program, that static variable is <em>the same variable</em> in both TU's.</p>\n"}], "owner": {"reputation": 1292, "user_id": 8044236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b25c9e70d1b4bb2bde0254c9c82fc75e?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/8044236/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1539768477, "creation_date": 1539767580, "question_id": 52851239, "link": "https://stackoverflow.com/questions/52851239/local-static-variable-linkage-in-a-template-class-static-member-function", "title": "Local static variable linkage in a template class static member function", "body": "<p>I have a question similar to <a href=\"https://stackoverflow.com/questions/32172137/local-static-thread-local-variables-of-inline-functions\">Local static/thread_local variables of inline functions?</a></p>\n\n<p>Does the standard guarantee that return value is always 1, meaning that <code>static int x</code> is the same across translation units?</p>\n\n<pre><code>// TU1\ntemplate &lt;int X&gt;\nstruct C { \n  static int* f() { static int x = X; return &amp;x; }\n};\n\nextern int* a1; \nextern int* a2; \nvoid sa() { a1 = C&lt;1&gt;::f(); a2 = C&lt;2&gt;::f(); }\n\n// TU2\ntemplate &lt;int X&gt;\nstruct C { \n  static int* f() { static int x = X; return &amp;x; }\n};\n\nextern int* b1; \nextern int* b2; \nvoid sb() { b1 = C&lt;1&gt;::f(); b2 = C&lt;2&gt;::f(); }\n\n// TU3\nint *a1, *a2, *b1, *b2;\nvoid sa();\nvoid sb();\nint main() { sa(); sb(); return a1 == b1 &amp;&amp; a2 == b2; }\n</code></pre>\n"}, {"tags": ["c++", "time-complexity", "space", "space-complexity"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 2, "creation_date": 1539767507, "post_id": 52851169, "comment_id": 92617933, "body": "<code>of course if there is a difference</code> ... actually, both loops appear to me to not build up any state whatsoever.  The loops either declare a local variable, or call a function which declares a local variable, but then that variable just goes out of scope at the end of each iteration."}], "answers": [{"comments": [{"owner": {"reputation": 4070, "user_id": 10046099, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wBQ5ABdKX3k/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1ZViaxwzPRS3PugEwp_tH9OnarWw/mo/photo.jpg?sz=128", "display_name": "Nika Kurashvili", "link": "https://stackoverflow.com/users/10046099/nika-kurashvili"}, "edited": false, "score": 0, "creation_date": 1539768867, "post_id": 52851472, "comment_id": 92618746, "body": "Thanks for the answer, I get that, but what about auxiliary space? How can I calculate it for function A? My colleague told me something like that: if you have just for loop ( <code>n iteration</code> ) in function, and if you have just one line in it ( <code>int k = 5;</code> ) the auxiliary space of function A is O(n), is it right or not ?"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 4070, "user_id": 10046099, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wBQ5ABdKX3k/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1ZViaxwzPRS3PugEwp_tH9OnarWw/mo/photo.jpg?sz=128", "display_name": "Nika Kurashvili", "link": "https://stackoverflow.com/users/10046099/nika-kurashvili"}, "edited": false, "score": 2, "creation_date": 1539769176, "post_id": 52851472, "comment_id": 92618914, "body": "I am not familiar with the term &quot;auxiliary space&quot;, but although I can conceive of a standard compliant C++ compiler which uses different storage for each iteration through the loop, I know of no such compiler.  They all reuse the storage each time through the loop."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 4070, "user_id": 10046099, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wBQ5ABdKX3k/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1ZViaxwzPRS3PugEwp_tH9OnarWw/mo/photo.jpg?sz=128", "display_name": "Nika Kurashvili", "link": "https://stackoverflow.com/users/10046099/nika-kurashvili"}, "edited": false, "score": 0, "creation_date": 1539772298, "post_id": 52851472, "comment_id": 92620745, "body": "@NikaKhurashvili when <code>A</code> has run, O(k) distinct objects of automatic storage duration have existed, but at any point in time, only O(1) are alive. Is that the distinction you are after? And in the modified example, there are additionally O(k&#178;) objects of dynamic storage duration."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1539768332, "creation_date": 1539768332, "answer_id": 52851472, "question_id": 52851169, "link": "https://stackoverflow.com/questions/52851169/how-to-calculate-space-complexity-of-function-a-when-a-calls-function-b-in-for-l/52851472#52851472", "title": "How to calculate space complexity of function A when A calls function B in for loop?", "body": "<p>The loop (as shown) adds nothing to the space complexity.  On each iteration of the loop, the stack frame for <code>B</code> is allocated, and then discarded.  <code>B</code> doesn't allocate memory internally, so its space consumption is O(1), and so is <code>A</code>.</p>\n\n<p>If the code looked like:</p>\n\n<pre><code>std::vector&lt;int&gt; B(int i) {\n    std::vector&lt;int&gt; result(i);\n    // Do something with result;\n    return result;\n}\n\nvoid A(int k) {\n    std::vector&lt;std::vector&lt;int&gt;&gt; storage;\n    for (int i = 0; i &lt; k; i++) {\n        storage.push_back(B(i));\n    }\n}\n</code></pre>\n\n<p>Then we can see that each invocation of the function <code>B</code> allocates O(k) space, and it is called O(k) times, so the space complexity of A is O(k\u00b2).</p>\n"}], "owner": {"reputation": 4070, "user_id": 10046099, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wBQ5ABdKX3k/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1ZViaxwzPRS3PugEwp_tH9OnarWw/mo/photo.jpg?sz=128", "display_name": "Nika Kurashvili", "link": "https://stackoverflow.com/users/10046099/nika-kurashvili"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1539768332, "creation_date": 1539767358, "question_id": 52851169, "link": "https://stackoverflow.com/questions/52851169/how-to-calculate-space-complexity-of-function-a-when-a-calls-function-b-in-for-l", "title": "How to calculate space complexity of function A when A calls function B in for loop?", "body": "<p>I am curious about how to calculate space complexity and auxiliary space of function A, when A calls function B in for loop. lets describe two example:</p>\n\n<hr>\n\n<p><strong>case 1:</strong> What is the space complexity and the auxiliary space of function <code>A</code></p>\n\n<pre><code>void A(int k) {\n    int c = 25;\n    for (int i = 0; i &lt; k; i++) {\n        B();\n    }\n}\n\nvoid B () {\n   int d = 5;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>case 2:</strong> What is the space complexity and the auxiliary space of function <code>A</code></p>\n\n<pre><code>void A(int k) {\n  int c = 25;\n  for (int i = 0; i &lt; k; i++) {\n     int d = 25;\n  }\n}\n</code></pre>\n\n<hr>\n\n<p>What is the difference between this two case? (of course if there is a difference)</p>\n"}, {"tags": ["c++", "notepad++", "mingw"], "answers": [{"tags": [], "owner": {"reputation": 261, "user_id": 10259252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c13d06b625bd248cef1901bd770a2e?s=128&d=identicon&r=PG&f=1", "display_name": "dombg", "link": "https://stackoverflow.com/users/10259252/dombg"}, "is_accepted": false, "score": 0, "last_activity_date": 1539767595, "creation_date": 1539767595, "answer_id": 52851243, "question_id": 52851049, "link": "https://stackoverflow.com/questions/52851049/program-wont-start-because-libmpc-3-dll-is-missing/52851243#52851243", "title": "Program won&#39;t start because libmpc-3.dll is missing", "body": "<p>Please take a look at this solved question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19026973/mingw-gcc-libmpc-3-dll-missing-on-64-bit-windows-7\">MinGW gcc -&gt; libmpc-3.dll missing on 64-Bit Windows 7</a></p>\n\n<p>Maybe it helps you.</p>\n"}], "owner": {"reputation": 5, "user_id": 6114290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cefaaae8cb9e593c649c479e20e9446a?s=128&d=identicon&r=PG&f=1", "display_name": "No_One", "link": "https://stackoverflow.com/users/6114290/no-one"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1539767595, "creation_date": 1539766958, "question_id": 52851049, "link": "https://stackoverflow.com/questions/52851049/program-wont-start-because-libmpc-3-dll-is-missing", "title": "Program won&#39;t start because libmpc-3.dll is missing", "body": "<p>I'm trying to compile c++ code in Notepad++. The command I'm running is as follows in the <code>Program to Run</code> box.</p>\n\n<pre><code>C:\\MinGW\\bin\\g++.exe -o \"$(NAME_PART)\" \"$(FULL_CURRENT_PATH)\"\n</code></pre>\n\n<p>I get the error saying \"The program can't start because libmpc-3.dll is missing...\". I checked the MinGW file path and the libmpc-3.dll file is there in the bin folder.</p>\n\n<p>Why would it say the file is missing, or is there something wrong with my command? </p>\n"}, {"tags": ["c++", "gcc", "visual-c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1539767194, "post_id": 52851027, "comment_id": 92617750, "body": "Oh by the way, returning anything by <code>const</code> value is kind of useless, as the caller might still store the value in a non-const variable."}, {"owner": {"reputation": 1535, "user_id": 1493609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96a638bf52278484d271a576f9fcfd8d?s=128&d=identicon&r=PG", "display_name": "chippies", "link": "https://stackoverflow.com/users/1493609/chippies"}, "edited": false, "score": 0, "creation_date": 1539767512, "post_id": 52851027, "comment_id": 92617937, "body": "Just tried without the first const, i.e. <code>operator std::u16string() const</code>, but that makes no difference to the error."}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1539769846, "post_id": 52851027, "comment_id": 92619313, "body": "The reason for the error is that <code>basic_string</code> has a constructor that takes a <code>CharT*</code>, and therefore <code>std::u16string</code> is constructible from a <code>char16_t const*</code>. Therefore, the compiler cannot figure which of the two operators should be invoked."}, {"owner": {"reputation": 1535, "user_id": 1493609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96a638bf52278484d271a576f9fcfd8d?s=128&d=identicon&r=PG", "display_name": "chippies", "link": "https://stackoverflow.com/users/1493609/chippies"}, "reply_to_user": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1539770172, "post_id": 52851027, "comment_id": 92619500, "body": "@MariusBancila so is VC++ (which doesn&#39;t complain) breaking the C++ standard?"}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 0, "creation_date": 1539770516, "post_id": 52851027, "comment_id": 92619707, "body": "It does complain; at least VC++ 2017. Running your sample results in error <code>C2440: &#39;static_cast&#39;: cannot convert from &#39;MyClass&#39; to &#39;std::u16string&#39; note: No constructor could take the source type, or constructor overload resolution was ambiguous</code>"}, {"owner": {"reputation": 1535, "user_id": 1493609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96a638bf52278484d271a576f9fcfd8d?s=128&d=identicon&r=PG", "display_name": "chippies", "link": "https://stackoverflow.com/users/1493609/chippies"}, "edited": false, "score": 0, "creation_date": 1539771311, "post_id": 52851027, "comment_id": 92620184, "body": "Interesting that VC++ 2017 doesn&#39;t complain in my main code. Please post your comment as an answer so I can accept it."}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 1, "last_activity_date": 1539787076, "last_edit_date": 1539787076, "creation_date": 1539784730, "answer_id": 52856718, "question_id": 52851027, "link": "https://stackoverflow.com/questions/52851027/gcc-problem-with-static-caststdu16string/52856718#52856718", "title": "GCC problem with static_cast&lt;std::u16string&gt;", "body": "<p>If you compile as C++14 (or earlier), you'll get this ambiguous call, because <code>std::u16string(char16_t*)</code> participates in the overload resolution (via <code>MyClass::operator const char16_t*()</code>) as well as <code>MyClass::operator std::u16string()</code> that would <em>appear</em> to be a better match.</p>\n\n<p>This can be overcome in several ways:</p>\n\n<ul>\n<li>Compile as C++17 (or later) with GCC 7 or later (sadly, this doesn't help with GCC 6).</li>\n<li>Remove <code>operator const char16_t*()</code>.</li>\n<li>Add <code>explicit</code> to <code>operator const char16_t*()</code> (or to both conversion operators).</li>\n</ul>\n"}], "owner": {"reputation": 1535, "user_id": 1493609, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96a638bf52278484d271a576f9fcfd8d?s=128&d=identicon&r=PG", "display_name": "chippies", "link": "https://stackoverflow.com/users/1493609/chippies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 52856718, "answer_count": 1, "score": 0, "last_activity_date": 1539787076, "creation_date": 1539766875, "last_edit_date": 1539783909, "question_id": 52851027, "link": "https://stackoverflow.com/questions/52851027/gcc-problem-with-static-caststdu16string", "title": "GCC problem with static_cast&lt;std::u16string&gt;", "body": "<h1>Summary</h1>\n\n<p>I have a class to which I've added a typecast operator to convert to <code>std::u16string</code>. The signature of this operator looks as follows:</p>\n\n<pre><code>operator const std::u16string() const;\n</code></pre>\n\n<p>In my .cpp file, I try converting an object of my class's type to <code>std::u16string</code> as follows:</p>\n\n<pre><code>std::u16string sUTF16Password = static_cast&lt;std::u16string&gt;(Password_);\n</code></pre>\n\n<p>On Visual Studio 2017, this works just fine. However, GCC 6.3 on my Raspberry Pi gives the following error at compile time:</p>\n\n<pre><code>error :  call of overloaded 'basic_string(MyClass&amp;)' is ambiguous\n</code></pre>\n\n<p>What is the right way to write this typecast? Searching on Google brings a lot of hits for character encoding conversions, but that's not my problem here. I don't understand why the <code>basic_string</code> constructor is being called here despite using <code>static_cast</code>.</p>\n\n<h1>Full example</h1>\n\n<p>Here's a minimal example. Compiling it with <code>g++ main.cpp</code> fails on my Raspberry Pi.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass MyClass\n{\n    private:\n        std::u16string Str;\n    public:\n        MyClass() { Str = u\"abcd\"; }\n        operator const char16_t*() const { return Str.c_str(); }\n        operator std::u16string() const { return Str; }\n};\n\nint main()\n{\n    MyClass Tester;\n    std::u16string TestStr = static_cast&lt;std::u16string&gt;(Tester);\n    for (size_t idx = 0; idx &lt; TestStr.size(); idx++)\n        std::cout &lt;&lt; idx &lt;&lt; \": \" &lt;&lt; TestStr[idx] &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>The output of <code>gcc --version</code> is <code>gcc (Raspbian 6.3.0-18+rpi1+deb9u1) 6.3.0 20170516</code>.</p>\n\n<p>The full output from <code>g++ main.cpp</code> is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>main.cpp: In function \u2018int main()\u2019:\nmain.cpp:17:61: error: call of overloaded \u2018basic_string(MyClass&amp;)\u2019 is ambiguous\n  std::u16string TestStr = static_cast&lt;std::u16string&gt;(Tester);\n                                                             ^\nIn file included from /usr/include/c++/6/string:52:0,\n                 from /usr/include/c++/6/bits/locale_classes.h:40,\n                 from /usr/include/c++/6/bits/ios_base.h:41,\n                 from /usr/include/c++/6/ios:42,\n                 from /usr/include/c++/6/ostream:38,\n                 from /usr/include/c++/6/iostream:39,\n                 from main.cpp:1:\n/usr/include/c++/6/bits/basic_string.h:476:7: note: candidate: std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;::basic_string(std::__cxx11::basic_string&lt;_\nCharT, _Traits, _Alloc&gt;&amp;&amp;) [with _CharT = char16_t; _Traits = std::char_traits&lt;char16_t&gt;; _Alloc = std::allocator&lt;char16_t&gt;]\n       basic_string(basic_string&amp;&amp; __str) noexcept\n       ^~~~~~~~~~~~\n/usr/include/c++/6/bits/basic_string.h:454:7: note: candidate: std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;::basic_string(const _CharT*, const _Alloc&amp;\n) [with _CharT = char16_t; _Traits = std::char_traits&lt;char16_t&gt;; _Alloc = std::allocator&lt;char16_t&gt;]\n       basic_string(const _CharT* __s, const _Alloc&amp; __a = _Alloc())\n       ^~~~~~~~~~~~\n/usr/include/c++/6/bits/basic_string.h:397:7: note: candidate: std::__cxx11::basic_string&lt;_CharT, _Traits, _Alloc&gt;::basic_string(const std::__cxx11::basic_st\nring&lt;_CharT, _Traits, _Alloc&gt;&amp;) [with _CharT = char16_t; _Traits = std::char_traits&lt;char16_t&gt;; _Alloc = std::allocator&lt;char16_t&gt;]\n       basic_string(const basic_string&amp; __str)\n       ^~~~~~~~~~~~\n</code></pre>\n\n<p>If I remove the typecast to <code>const char16_t*</code> this example compiles just fine. I still don't understand why having both typecasts is a problem.</p>\n"}, {"tags": ["c++", "xml", "qt", "boost"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1539766291, "post_id": 52850815, "comment_id": 92617193, "body": "It&#39;s a C++ exception being thrown, and as such you can <code>catch</code> it."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 9566257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/042c634346f225b936d5b45a611a9721?s=128&d=identicon&r=PG&f=1", "display_name": "ChrizZ", "link": "https://stackoverflow.com/users/9566257/chrizz"}, "edited": false, "score": 0, "creation_date": 1539766534, "post_id": 52850884, "comment_id": 92617336, "body": "So I can just use <code>catch (exception&amp; xml_parser_error)</code>?"}, {"owner": {"reputation": 47, "user_id": 9566257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/042c634346f225b936d5b45a611a9721?s=128&d=identicon&r=PG&f=1", "display_name": "ChrizZ", "link": "https://stackoverflow.com/users/9566257/chrizz"}, "edited": false, "score": 0, "creation_date": 1539766934, "post_id": 52850884, "comment_id": 92617592, "body": "oh. thanks. Can catch the exception anywhere? I would like to catch it in my Qt MainWindow."}, {"owner": {"reputation": 588, "user_id": 9759769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103f6c140cd1a7b04c8b8d4c04a54370?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/9759769/max"}, "reply_to_user": {"reputation": 47, "user_id": 9566257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/042c634346f225b936d5b45a611a9721?s=128&d=identicon&r=PG&f=1", "display_name": "ChrizZ", "link": "https://stackoverflow.com/users/9566257/chrizz"}, "edited": false, "score": 0, "creation_date": 1539767000, "post_id": 52850884, "comment_id": 92617632, "body": "Sure, that&#39;s possible."}, {"owner": {"reputation": 47, "user_id": 9566257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/042c634346f225b936d5b45a611a9721?s=128&d=identicon&r=PG&f=1", "display_name": "ChrizZ", "link": "https://stackoverflow.com/users/9566257/chrizz"}, "edited": false, "score": 0, "creation_date": 1539768122, "post_id": 52850884, "comment_id": 92618311, "body": "what am I missing now? I get the error in my IDE: <code>unknown type name &#39;xml_parser_error&#39;</code>"}, {"owner": {"reputation": 588, "user_id": 9759769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103f6c140cd1a7b04c8b8d4c04a54370?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/9759769/max"}, "reply_to_user": {"reputation": 47, "user_id": 9566257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/042c634346f225b936d5b45a611a9721?s=128&d=identicon&r=PG&f=1", "display_name": "ChrizZ", "link": "https://stackoverflow.com/users/9566257/chrizz"}, "edited": false, "score": 0, "creation_date": 1539768223, "post_id": 52850884, "comment_id": 92618382, "body": "The namespace? It is <code>boost::property_tree::xml_parser::xml_parser_error</code>."}, {"owner": {"reputation": 47, "user_id": 9566257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/042c634346f225b936d5b45a611a9721?s=128&d=identicon&r=PG&f=1", "display_name": "ChrizZ", "link": "https://stackoverflow.com/users/9566257/chrizz"}, "edited": false, "score": 0, "creation_date": 1539768307, "post_id": 52850884, "comment_id": 92618429, "body": "oh. Thats a thing I should have known.. Thank you a lot."}], "tags": [], "owner": {"reputation": 588, "user_id": 9759769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/103f6c140cd1a7b04c8b8d4c04a54370?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/9759769/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1539766409, "creation_date": 1539766409, "answer_id": 52850884, "question_id": 52850815, "link": "https://stackoverflow.com/questions/52850815/prevent-boost-xml-parser-from-crashing-when-wrong-file-selected-in-c/52850884#52850884", "title": "Prevent boost xml Parser from crashing when wrong file selected in C++", "body": "<p>According to the <a href=\"https://www.boost.org/doc/libs/1_68_0/doc/html/boost/property_tree/xml_parser/read__1_3_32_10_11_1_1_1_1.html\" rel=\"nofollow noreferrer\">documentation</a> <code>read_xml</code> throws a <code>xml_parser_error</code> in case of an error, so just catch it.</p>\n"}], "owner": {"reputation": 47, "user_id": 9566257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/042c634346f225b936d5b45a611a9721?s=128&d=identicon&r=PG&f=1", "display_name": "ChrizZ", "link": "https://stackoverflow.com/users/9566257/chrizz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 52850884, "answer_count": 1, "score": 0, "last_activity_date": 1539766409, "creation_date": 1539766174, "question_id": 52850815, "link": "https://stackoverflow.com/questions/52850815/prevent-boost-xml-parser-from-crashing-when-wrong-file-selected-in-c", "title": "Prevent boost xml Parser from crashing when wrong file selected in C++", "body": "<p>I have a tool where a user can select a xml via a Qt Gui to set some parameters. The problem is. When the file is not a valid xml file my tool just crashes. I get the following error in Qt Creator: </p>\n\n<pre><code>terminate called after throwing an instance of 'boost::exception_detail::clone_impl&lt;boost::exception_detail::error_info_injector&lt;boost::property_tree::xml_parser::xml_parser_error&gt; &gt;'\nwhat():  /home/path/to/Executable: expected &lt;\n10:40:44: The program has unexpectedly finished.\n</code></pre>\n\n<p>Can I check if the XML is valid or can I catch the error and do something else instead of terminating?</p>\n\n<p>I would like to show an error message and to cancel the parsing.</p>\n\n<p>My code of the reading process is: </p>\n\n<pre><code>#include &lt;boost/property_tree/xml_parser.hpp&gt;\n#include &lt;boost/property_tree/ptree.hpp&gt;\n...\nusing boost::property_tree::ptree;\nptree pt;\nread_xml(filename, pt);\n</code></pre>\n"}]