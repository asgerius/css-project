[{"tags": ["c++", "arrays", "file", "int", "output"], "comments": [{"owner": {"reputation": 443, "user_id": 3296789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IdobE.png?s=128&g=1", "display_name": "PeteBlackerThe3rd", "link": "https://stackoverflow.com/users/3296789/peteblackerthe3rd"}, "edited": false, "score": 0, "creation_date": 1574295105, "post_id": 58965193, "comment_id": 104185628, "body": "You&#39;re second loop is attempting (and failing) to sort the list. Because the array is being modified inside the second loop you would not expect it to print out the same values as the first loop. Is there a reason why your not using a std::vector for storage and std::sort?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574295988, "post_id": 58965193, "comment_id": 104185849, "body": "Recommended reading: <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-i-e-while-stream-eof-cons\">Why is iostream::eof inside a loop condition (i.e. <code>while (!stream.eof())</code>) considered wrong?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11353901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xjC58.jpg?s=128&g=1", "display_name": "Maddman", "link": "https://stackoverflow.com/users/11353901/maddman"}, "edited": false, "score": 0, "creation_date": 1574296519, "post_id": 58965456, "comment_id": 104185989, "body": "yeah i kinda realize now that im dumb"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574297264, "post_id": 58965456, "comment_id": 104186167, "body": "&quot;Dumb&quot; mistakes are often easily exposed by stepping through the program with a debugger and keeping an eye out for where the program does the unexpected. Dumb isn&#39;t making a programming mistake. Dumb is not taking advantage of the tools available to help find the mistake. Time spent learning to use your development environment&#39;s debugger is time well spent."}], "tags": [], "owner": {"reputation": 1950, "user_id": 11207416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d91d68c248076f96733f44a1f5f4e05?s=128&d=identicon&r=PG&f=1", "display_name": "jkb", "link": "https://stackoverflow.com/users/11207416/jkb"}, "is_accepted": false, "score": 2, "last_activity_date": 1574296187, "creation_date": 1574296187, "answer_id": 58965456, "question_id": 58965193, "link": "https://stackoverflow.com/questions/58965193/arrays-outputting-the-wrong-numbers-in-c/58965456#58965456", "title": "Arrays Outputting the Wrong Numbers in C++", "body": "<p>Your array does appear to be sorted. The reason for all the ones being printed is due to the location of the <code>cout &lt;&lt;</code> within the outer loop.</p>\n\n<p>Consider what your array looks like after your first iteration through the inner loop:</p>\n\n<p><code>234,1,2,3,4,5,6,7,8,99</code></p>\n\n<p>Now consider that you've incremented <code>i</code> to 1 in the outer loop. When you index your array <code>intArray[i]</code>, the <code>i</code>th element is now 1 because you correctly moved it there. Each time, you're moving your smaller elements up one position in the array, then indexing to the position where the <code>1</code> is.</p>\n\n<p>Don't try to print the sorted array while you're sorting it. Instead loop over it and print it after the sort.</p>\n"}], "owner": {"reputation": 1, "user_id": 11353901, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xjC58.jpg?s=128&g=1", "display_name": "Maddman", "link": "https://stackoverflow.com/users/11353901/maddman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574296187, "creation_date": 1574294161, "last_edit_date": 1574295112, "question_id": 58965193, "link": "https://stackoverflow.com/questions/58965193/arrays-outputting-the-wrong-numbers-in-c", "title": "Arrays Outputting the Wrong Numbers in C++", "body": "<p>My goal is to have a player input a bunch of numbers for an array then that array is written into a text file. Another part of it is to be able to receive a bunch of numbers from a text file and put them into a sorted array of highest to lowest then output that array. But for some reason, I'm getting a lot of errors, ones that i feel like with some research I can fix. Unfortunately, there is one very confusing situation where I test to make sure the unsorted array is correct by outputting each element of the array. This is not a part of the final program but a test for now. I have a for loop that does so and it works perfectly, outputting each number as expected. Then in the next for loop, the exact same thing is supposed to happen but the numbers being outputted are all messed up. I do not understand how. Code below</p>\n\n<pre><code>void readFile(string fName) {\n    string fileName = fName + \".txt\";\n    ifstream myFile(fileName);\n    char c;\n    string num;\n    int count = 0;\n\n    // Bring the array from file to int array\n    while (!myFile.eof()) {\n        myFile.get(c);\n        if (isspace(c) &amp;&amp; num != \"\") {\n            int n = stoi(num);\n            intArray[count] = n;\n            count++;\n            num = \"\";\n            continue;\n        }\n        if (!myFile.eof()) {\n            num += c;\n        }\n    }\n\n    for (int i = 0; i &lt; 10; i++) {\n        cout &lt;&lt; intArray[i] &lt;&lt; endl;\n    }\n\n    // Sort the array higest to lowest\n    for (int i = 0; i &lt; 10; i++) {\n        cout &lt;&lt; intArray[i] &lt;&lt; \"       \";\n        for (int j = 9; j &gt;= i; j--) {\n            if (j == 0) {\n                continue;\n            }\n            if (intArray[j] &gt; intArray[j - 1]) {\n                int temp = arr[j];\n                intArray[j] = intArray[j - 1];\n                intArray[j - 1] = temp;\n            }\n        }\n        cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>sorry about the formatting above, its being weird so imagine the code is within the function.</p>\n\n<p>This is what this outputs:</p>\n\n<pre><code>1\n2\n3\n4\n5\n6\n7\n8\n99\n234\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n</code></pre>\n\n<p>The numbers before the series of 1's is the actual array, the 1's is what is apparently the array according the cout in the last section of code where it says cout &lt;&lt; intArray[i]</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1574293258, "post_id": 58965017, "comment_id": 104185223, "body": "<code>double *x = new double(n);</code> does not allocate an array of doubles. You need <code>double *x = new double[n];</code>. Voting to close for typo."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574293784, "post_id": 58965017, "comment_id": 104185342, "body": "Note: When you see a weird result code like 3221226356, convert it to hexadecimal and see if it is more recognizable. In this case C0000374 isn&#39;t immediately recognizable to me, but google has pages and pages of hits."}, {"owner": {"reputation": 11, "user_id": 12406702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e49e402cf24aadb15377b6f5e90a3c41?s=128&d=identicon&r=PG&f=1", "display_name": "riccardo", "link": "https://stackoverflow.com/users/12406702/riccardo"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1574294576, "post_id": 58965017, "comment_id": 104185499, "body": "thank you @RSahu it was a typo... now it works"}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1574293942, "creation_date": 1574293942, "answer_id": 58965166, "question_id": 58965017, "link": "https://stackoverflow.com/questions/58965017/dynamic-arrays-passed-to-functions-filled-with-random-values-in-the-main-return/58965166#58965166", "title": "Dynamic arrays passed to functions filled with random values in the main, return value 3221226356", "body": "<p>You're not creating arrays of <code>double</code> here:</p>\n\n<pre><code>double *x = new double(n); //array_1\ndouble *y = new double(l);  //array_2\ndouble *sine = new double(l);   //array_3\n</code></pre>\n\n<p>but single values, you want something like:</p>\n\n<pre><code>double *x = new double[n]; //array_1\ndouble *y = new double[l];  //array_2\ndouble *sine = new double[l];   //array_3\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12406702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e49e402cf24aadb15377b6f5e90a3c41?s=128&d=identicon&r=PG&f=1", "display_name": "riccardo", "link": "https://stackoverflow.com/users/12406702/riccardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1574294429, "creation_date": 1574292809, "last_edit_date": 1592644375, "question_id": 58965017, "link": "https://stackoverflow.com/questions/58965017/dynamic-arrays-passed-to-functions-filled-with-random-values-in-the-main-return", "title": "Dynamic arrays passed to functions filled with random values in the main, return value 3221226356", "body": "<p>I'm trying to write a C++ program that:</p>\n<ol>\n<li><p>Creates an <code>array_1</code> of <code>size n</code> and fills it following the formula\n<code>x(i) = x(0) + h*i</code> where <code>n</code>, <code>x(0)</code> and <code>h</code> are input parameters;</p>\n</li>\n<li><p>Creates an <code>array_2</code> of <code>size l=n+1</code> and fills it following the\nformula <code>x(i) = ((b-a)/n)*i+a</code> , where <code>a</code>, <code>b</code> are input parameters;</p>\n</li>\n<li><p>Creates an <code>array_sin</code> of <code>size l=n+1</code> and fills it with the sine of\nthe elements of <code>array_2</code>.</p>\n</li>\n</ol>\n<hr />\n<p>I decided to do these three steps in three separate void functions. Here is my code:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\nusing namespace std;\n\n\nvoid fillarr1 (double ar_x[], int n, double x_0, double h);\nvoid fillarr2 (double ar_y[], double a, double b, int n, int l);\nvoid Sin (double ar_y[], double sine_[], int l);\n\n\nint main () \n{\n\n    int n, i;   \n    double  a, b, h, x_0;\n\n    cout &lt;&lt; &quot;Number of points \\n&quot;;\n    cin &gt;&gt; n;\n\n    int l=n+1;\n    double *x = new double(n); //array_1\n    double *y = new double(l);  //array_2\n    double *sine = new double(l);   //array_3\n\n\n    cout &lt;&lt; &quot;Separation between points \\n&quot;;\n    cin &gt;&gt; h;   \n    cout &lt;&lt; &quot;x(0) = &quot;;\n    cin &gt;&gt; x_0;\n    fillarr1 (x, n, x_0, h);\n\n    cout &lt;&lt; &quot;\\na = &quot;;\n    cin &gt;&gt; a;\n    cout &lt;&lt; &quot;\\nb = &quot;;\n    cin &gt;&gt; b;\n\n    fillarr2 (y, a, b, n, l);\n    cout &lt;&lt; &quot;\\nsin \\n&quot;;\n    Sin(y, sine, l);\n    cout &lt;&lt; &quot;\\n\\n\\n&quot;;\n    for (i=0; i&lt;n; i++)\n    {   \n        cout &lt;&lt; x[i] &lt;&lt; &quot;\\t&quot;;\n    }\n    cout &lt;&lt; &quot;\\n\\n\\n&quot;;\n    for (i=0; i&lt;l; i++)\n    {   \n    \n        cout &lt;&lt; y[i] &lt;&lt; &quot;\\t&quot;;\n    }\n    cout &lt;&lt; &quot;\\n\\n\\n&quot;;\n    for (i=0; i&lt;l; i++)\n    {   \n    \n        cout &lt;&lt; sine[i] &lt;&lt; &quot;\\t&quot;;\n    }\n\n    delete [] x;\n    delete [] y;\n    delete [] sine;\n\n    return 0;\n\n}\n\nvoid fillarr1 (double ar_x[], int n, double x_0, double h)\n{\n    int i;\n\n    for (i=0; i&lt;n; i++)\n    {   \n        ar_x[i]=x_0+h*i;\n        cout &lt;&lt; ar_x[i] &lt;&lt; &quot;\\t&quot;;\n    }\n}\nvoid fillarr2 (double ar_y[], double a, double b, int n, int l)\n{   \n    int i;\n    double h_;\n    h_=(b-a)/(n);\n    for (i=0; i&lt;l; i++)\n    {   \n        ar_y[i]=a+h_*i;\n        cout &lt;&lt; ar_y[i] &lt;&lt; &quot;\\t&quot;;\n    }\n}\n\nvoid Sin(double ar_y[], double sine_[], int l)\n{\n    int i;\n    for(i=0;i&lt;l;i++)\n    {\n        sine_[i]=sin(ar_y[i]);\n        cout &lt;&lt; sine_[i] &lt;&lt; &quot;\\t&quot;;\n    }\n      \n}\n</code></pre>\n<p>I'm also trying to print the elements of the arrays both in the void functions and in the main. It appears that, after the function calls, the original dynamic arrays passed to the void functions are filled with random values. Furthermore, the process exits with return value 3221226356.\nHere is an output example:\n<a href=\"https://i.stack.imgur.com/8mgzR.png\" rel=\"nofollow noreferrer\">output</a></p>\n<p>I really don't know how to fix it, any help would be very appreciated.</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 0, "creation_date": 1574292505, "post_id": 58964949, "comment_id": 104185033, "body": "Not sure this fits on SO, but from reading the link you sent, you should have created those files as part of Step1."}, {"owner": {"reputation": 33, "user_id": 9813610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben", "link": "https://stackoverflow.com/users/9813610/ben"}, "reply_to_user": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 0, "creation_date": 1574292874, "post_id": 58964949, "comment_id": 104185133, "body": "Hi Kai, thanks for your response.  Step1 shows code for the CMakeLists.txt file and alludes to the existence of a .cxx file that computes the square root of a number but it&#39;s not clear to me where that file is."}], "answers": [{"tags": [], "owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "is_accepted": true, "score": 6, "last_activity_date": 1574292779, "creation_date": 1574292779, "answer_id": 58965012, "question_id": 58964949, "link": "https://stackoverflow.com/questions/58964949/the-cmake-tutorial-references-cpp-and-h-files-where-can-these-be-found/58965012#58965012", "title": "The CMake tutorial references .cpp and .h files. Where can these be found?", "body": "<p>The introduction on the same <a href=\"https://cmake.org/cmake/help/latest/guide/tutorial/index.html#cmake-tutorial\" rel=\"noreferrer\">page</a> describes where the code is located within the CMake source code repository (see bolded section below):</p>\n\n<blockquote>\n  <p>The CMake tutorial provides a step-by-step guide that covers common build system issues that CMake helps address. Seeing how various topics all work together in an example project can be very helpful. <strong>The tutorial documentation and source code for examples can be found in the <code>Help/guide/tutorial</code> directory of the CMake source code tree.</strong> Each step has its own subdirectory containing code that may be used as a starting point. The tutorial examples are progressive so that each step provides the complete solution for the previous step.</p>\n</blockquote>\n\n<p>Where can you find the CMake source code? Look here:</p>\n\n<ul>\n<li><a href=\"https://github.com/Kitware/CMake\" rel=\"noreferrer\">GitHub</a></li>\n<li><a href=\"https://cmake.org/download/\" rel=\"noreferrer\">CMake Downloads Page</a></li>\n</ul>\n"}], "owner": {"reputation": 33, "user_id": 9813610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Ben", "link": "https://stackoverflow.com/users/9813610/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "closed_date": 1574347593, "accepted_answer_id": 58965012, "answer_count": 1, "score": 3, "last_activity_date": 1574294182, "creation_date": 1574292362, "last_edit_date": 1574294182, "question_id": 58964949, "link": "https://stackoverflow.com/questions/58964949/the-cmake-tutorial-references-cpp-and-h-files-where-can-these-be-found", "closed_reason": "Not suitable for this site", "title": "The CMake tutorial references .cpp and .h files. Where can these be found?", "body": "<p>I'm a newbie trying to make my way through the <a href=\"https://cmake.org/cmake/help/latest/guide/tutorial/index.html\" rel=\"nofollow noreferrer\">CMake Tutorials Page</a>,  but I can't seem to find the code that they are referencing or what the overall folder structure is.</p>\n\n<p>They state:</p>\n\n<blockquote>\n  <p>The source code for <code>tutorial.cxx</code> is provided in the <code>Step1</code> directory and can be used to compute the square root of a number...</p>\n</blockquote>\n\n<p>but I can't seem to find that directory anywhere. Is anyone else having this issue? </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1574292539, "post_id": 58964929, "comment_id": 104185044, "body": "Voting to close as a typo. <code>&amp;vote::first_preference</code> is the address of the member function, not a call to it."}, {"owner": {"reputation": 9, "user_id": 11212635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7abb187eb188de1a1c0798376d0bcdec?s=128&d=identicon&r=PG&f=1", "display_name": "s_1921", "link": "https://stackoverflow.com/users/11212635/s-1921"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1574292871, "post_id": 58964929, "comment_id": 104185132, "body": "How are functions called?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1574293012, "post_id": 58964929, "comment_id": 104185168, "body": "<code>instance.member_function(arguments)</code> is one way. Make your code into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and it&#39;ll be easier to help."}, {"owner": {"reputation": 9, "user_id": 11212635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7abb187eb188de1a1c0798376d0bcdec?s=128&d=identicon&r=PG&f=1", "display_name": "s_1921", "link": "https://stackoverflow.com/users/11212635/s-1921"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1574294800, "post_id": 58964929, "comment_id": 104185551, "body": "@TedLyngmo I&#39;ve simplified the question hopefully it will be easier to help? I&#39;m trying to call the function the way you advised but it wasn&#39;t working"}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 1, "creation_date": 1574297263, "post_id": 58964929, "comment_id": 104186166, "body": "You oversimplified. Your simplified code has no <code>test</code> object, so a non-static member of <code>test</code> cannot be called."}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 2, "last_activity_date": 1574334631, "last_edit_date": 1574334631, "creation_date": 1574323246, "answer_id": 58969954, "question_id": 58964929, "link": "https://stackoverflow.com/questions/58964929/printing-the-first-value-from-more-than-one-vector-in-c/58969954#58969954", "title": "Printing the first value from more than one vector in C++", "body": "<blockquote>\n  <p>I want the function <code>first_preference()</code> to be called from <code>main()</code> where the function should print the first value of each vector</p>\n</blockquote>\n\n<p>Some issues:</p>\n\n<ul>\n<li><p>You have a global <code>std::vector&lt;vect&gt; p</code> in your header file (which is not a good idea to begin with) which is shadowed by <code>std::vector&lt;vect&gt; p</code> in <code>main</code>. What you put in the <code>p</code> in <code>main</code> will not be accessible from instances of <code>test</code>. Those instances only knows about the global <code>p</code>.</p></li>\n<li><p>You don't <code>#include \"function.h\"</code> in <code>main.cpp</code> so you can't create <code>test</code> objects in <code>main</code>.</p></li>\n<li><p>If you <code>#include \"function.h\"</code> in <code>main.cpp</code> there's no need to <code>typedef unsigned int vect;</code> since you did that in <code>function.h</code> already. It's not an error, but confusing and unnecessary.</p></li>\n<li><p>The <code>vector&lt;vect&gt;</code> instances <code>a, b, c</code> and <code>d</code> have no connection with <code>test</code> or any of the <code>p</code>s whatsoever so what you put in those vectors can't possibly be printed by instances of <code>test</code> unless you pass them on to <code>test</code> somehow.</p></li>\n<li><p>You declare vectors of <code>vect</code> but <code>first_preference()</code> returns a <code>person</code> by value. <code>vect</code> and <code>person</code> happen to be aliases of the same fundamental type, but it seems like there is something wrong with this interface.</p></li>\n<li><p>In <code>main.cpp</code> you don't instantiate a <code>test</code>, you iterate over <code>a</code> and <code>first_preference()</code> is never called so there's no hope for it to be used.</p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why is \u201cusing namespace std;\u201d considered bad practice?</a></p></li>\n</ul>\n"}], "owner": {"reputation": 9, "user_id": 11212635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7abb187eb188de1a1c0798376d0bcdec?s=128&d=identicon&r=PG&f=1", "display_name": "s_1921", "link": "https://stackoverflow.com/users/11212635/s-1921"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1574531737, "creation_date": 1574292254, "last_edit_date": 1574531737, "question_id": 58964929, "link": "https://stackoverflow.com/questions/58964929/printing-the-first-value-from-more-than-one-vector-in-c", "title": "Printing the first value from more than one vector in C++", "body": "<p>I am trying to print the <strong>first value</strong> from each vector shown below in the main function.</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\ntypedef unsigned int vect;\n\nint main() {\n    std::vector&lt;vect&gt; p;\n\n    vector&lt;vect&gt; a = { 4,2,3,1 };\n    vector&lt;vect&gt; b = { 4,2,3,1 };\n    vector&lt;vect&gt; c = { 4,2,3,1 };\n    vector&lt;vect&gt; d = { 4,2,3,1 };\n\n    int i;\n    for (i=0; i&lt;a.size(); i++)\n    cout &lt;&lt; a[i];\n}\n</code></pre>\n\n<p>Function <strong>first_preference()</strong> from my function.cpp shown below</p>\n\n<pre><code>#include \"function.h\"\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\n person test::first_preference() const {\n\n        const person&amp; first = p.front();\n        return first; //current first pref\n    }\n</code></pre>\n\n<p>The function is declared in this header class</p>\n\n<pre><code>#ifndef FUNCTION_H\n#define FUCNTION_H\n\n#include &lt;vector&gt;\n\ntypedef unsigned int person;\ntypedef unsigned int vect;\n\nstd::vector&lt;vect&gt; p;\n\n\nclass test {\n\npublic:\n    person first_preference() const;\n};\n\n#endif\n</code></pre>\n\n<p>I want the function <strong>first_preference()</strong> to be called from <strong>main()</strong> where the function should print the first value of each vector, how would I go about this?</p>\n"}, {"tags": ["c++", "memory-management", "unique-ptr"], "comments": [{"owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "reply_to_user": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 0, "creation_date": 1574291929, "post_id": 58964844, "comment_id": 104184869, "body": "No problem. Thanks for looking at the question :)"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1574291946, "post_id": 58964844, "comment_id": 104184876, "body": "Why doesn&#39;t <code>api.getResponses</code> then take <code>std::vector&lt;std::unique_ptr&lt;Reponse&gt;&gt;</code> ?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1574292101, "post_id": 58964844, "comment_id": 104184920, "body": "If it&#39;s a C function this is a terrible idea anyway. C doesn&#39;t <code>new</code> and consequently <code>delete</code> <i>anything</i>. So, again, what allocates the things coming back in that sequence of pointers? E.g. What does each pointer in the <code>responses</code> sequence point to, who exactly allocated whatever that is, and by what means was it allocated ? Just because you&#39;re using C++ doesn&#39;t mean some arbitrary dynamic pointer must have come from <code>new</code> and thus is ripe for <code>delete</code>."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1574292123, "post_id": 58964844, "comment_id": 104184929, "body": "Then <code>delete response</code> is invalid, right? Should be <code>free(response)</code>."}, {"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 0, "creation_date": 1574292176, "post_id": 58964844, "comment_id": 104184944, "body": "You could do something like a <a href=\"https://stackoverflow.com/questions/19053351/how-do-i-use-a-custom-deleter-with-a-stdunique-ptr-member\">custom deleter</a> if you wanted it to be RAII."}, {"owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1574292263, "post_id": 58964844, "comment_id": 104184965, "body": "@KamilCuk You are correct. It is actually C++ code now that I am looking at it. I will update the question to reflect this. I still cannot change the API as I am not in control of that code."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1574292414, "post_id": 58964844, "comment_id": 104185012, "body": "Even if it is C++ code, is it the same ABI (i.e. both modules, your exe/lib and the &#39;external&#39; api lib are using the same shared dynamic runtime? If not, this is <i>still</i> a bad idea. If you have an external fixed API that allocates things, that API should have a complimentary mechanism for releasing them, or its design sucks. Is it a static lib? That may make it much, much cleaner."}, {"owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1574292533, "post_id": 58964844, "comment_id": 104185041, "body": "@WhozCraig Yup, the design sucks. Legacy code from sometime in the &#39;90s iirc."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1574292571, "post_id": 58964844, "comment_id": 104185056, "body": "So long as you&#39;re asking the questions I posed, and getting answers, you may be able to make this work. They&#39;re important."}, {"owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1574292877, "post_id": 58964844, "comment_id": 104185134, "body": "@WhozCraig The top example I gave works and it is correct in managing the memory that this api allocates. I&#39;m mostly looking for a cleaner way to write my code that wraps around it. This is code is directly linked (not an external library), the reasons I can&#39;t change it are not because I don&#39;t have access to the source, if that makes sense."}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1574293187, "post_id": 58964844, "comment_id": 104185199, "body": "why don&#39;t you write yourself a minimal smart pointer that doesn&#39;t have an explicit constructor?"}, {"owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "reply_to_user": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 0, "creation_date": 1574293260, "post_id": 58964844, "comment_id": 104185225, "body": "@Kai I don&#39;t see anything in the documentation for specifying a custom element deletor for a std::vector. In fact there is a note about vectors of pointers on the page for the vector destructor: <a href=\"https://en.cppreference.com/w/cpp/container/vector/~vector\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/vector/~vector</a>"}, {"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 1, "creation_date": 1574293888, "post_id": 58964844, "comment_id": 104185363, "body": "Not a custom deletor for the vector, but for the unique_ptr in your loop. Custom deletors don&#39;t look nearly as clean, so the explicit delete in the loop (with a comment, perhaps?) might be the cleanest"}, {"owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "reply_to_user": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 0, "creation_date": 1574294451, "post_id": 58964844, "comment_id": 104185472, "body": "@Kai I can&#39;t even create the unique_ptr in the loop. The default destructor of the unique_ptr would be sufficient to delete the pointer. The problem is that foreach does not call the constructor for the unique pointer, but instead tries to assign the pointer into the unique_ptr container. Maybe if I had a <code>std::unique_ptr&lt;Response&gt;&amp; operator=(Response*&amp;&amp; r);</code> it might work, but that is some really nasty boilerplate just for one instance."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 3, "last_activity_date": 1574293418, "creation_date": 1574293418, "answer_id": 58965096, "question_id": 58964844, "link": "https://stackoverflow.com/questions/58964844/implicit-conversion-of-pointer-to-stdunique-ptr-in-foreach-loop/58965096#58965096", "title": "Implicit conversion of pointer to std::unique_ptr in foreach loop", "body": "<p>Instead of wrapping each pointer in a <code>unique_ptr</code>, I'd consider using a Boost <a href=\"https://www.boost.org/doc/libs/1_71_0/libs/ptr_container/doc/ptr_vector.html\" rel=\"nofollow noreferrer\"><code>ptr_vector</code></a>.</p>\n\n<p>Assuming the data is allocated so you actually <em>can</em> use <code>delete</code> to delete it, the code would look something like this:</p>\n\n<pre><code>size_t response_count = api.getResponseCount();\n\n// Unfortunately, we have to define, then resize. It has a ctor that takes a size,\n// but it treats that as an amount to reserve rather than an actual size.\nboost::ptr_vector&lt;Response&gt; responses;\nresponses.resize(response_count);\n\napi.getResponses(responses.c_array());\n\nfor(auto response : responses) {\n    // Do some processing with response\n}\n</code></pre>\n\n<p>...and when <code>responses</code> goes out of scope, it will delete all the objects pointed to by the pointers it contains. If necessary, you can specify an <code>Allocator</code> class that defines how the objects are allocated and deleted.</p>\n\n<p><strong>Reference</strong></p>\n\n<p><a href=\"https://www.boost.org/doc/libs/1_71_0/libs/ptr_container/doc/ptr_container.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_71_0/libs/ptr_container/doc/ptr_container.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1574322854, "last_edit_date": 1574322854, "creation_date": 1574295599, "answer_id": 58965388, "question_id": 58964844, "link": "https://stackoverflow.com/questions/58964844/implicit-conversion-of-pointer-to-stdunique-ptr-in-foreach-loop/58965388#58965388", "title": "Implicit conversion of pointer to std::unique_ptr in foreach loop", "body": "<p>You can create a wrapper for the <code>vector&lt;response*&gt;</code> that hands out unique pointers</p>\n\n<pre><code>struct wrapper{\n\n    struct iterator {\n        iterator( std::vector&lt;response*&gt;::iterator it ) : it_(it){}\n        friend bool operator!=( iterator const&amp; lhs, iterator const &amp;rhs ){ return lhs.it_ != rhs.it_; }\n        void operator++(){ ++it_;}\n        std::unique_ptr&lt;response&gt; operator*(){ return std::unique_ptr&lt;response&gt;(*it_); }\n    private:   \n        std::vector&lt;response*&gt;::iterator it_;\n    };\n\n    wrapper( std::vector&lt;response*&gt;&amp; rs ) : rs_{rs} {}\n\n    iterator begin() const { return iterator{rs_.begin()}; }\n    iterator end() const { return iterator{rs_.end()}; }\n\nprivate:\n    std::vector&lt;response*&gt;&amp; rs_;\n};\n</code></pre>\n\n<p>You can then iterate over the responses like this:</p>\n\n<pre><code>for( auto resp : wrapper( responses ) ){...\n}\n</code></pre>\n\n<p>See working version <a href=\"http://coliru.stacked-crooked.com/a/c7289b45bf3df40f\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "edited": false, "score": 0, "creation_date": 1574358947, "post_id": 58969852, "comment_id": 104214789, "body": "I&#39;ve proposed an edit to the code to make it use templates and be a bit more generic. I like this solution since it&#39;s minimum boilerplate and doesn&#39;t rely on boost."}], "tags": [], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1574359529, "last_edit_date": 1574359529, "creation_date": 1574322835, "answer_id": 58969852, "question_id": 58964844, "link": "https://stackoverflow.com/questions/58964844/implicit-conversion-of-pointer-to-stdunique-ptr-in-foreach-loop/58969852#58969852", "title": "Implicit conversion of pointer to std::unique_ptr in foreach loop", "body": "<p>Though not considered good practice, you can derive from <code>unique_ptr</code> with a non explicit constructor.</p>\n\n<pre><code>template&lt;typename P&gt;\nstruct MakeUnique : std::unique_ptr&lt;P&gt; {\n    MakeUnique(P* p) : std::unique_ptr&lt;P&gt;(p) {}\n};\n\n</code></pre>\n\n<p>This can then be used like this:</p>\n\n<pre><code>for ( MakeUnique&lt;Response&gt; resp : responses ) {\n    ...\n}\n</code></pre>\n\n<p>Probably the closest thing to a one-liner. See working version <a href=\"http://coliru.stacked-crooked.com/a/310378f4bf3f289d\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 905, "user_id": 2386432, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/25e51f28c18370b52046ad53f2882bd0?s=128&d=identicon&r=PG", "display_name": "TheBat", "link": "https://stackoverflow.com/users/2386432/thebat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 58969852, "answer_count": 3, "score": 0, "last_activity_date": 1574359529, "creation_date": 1574291578, "last_edit_date": 1574359317, "question_id": 58964844, "link": "https://stackoverflow.com/questions/58964844/implicit-conversion-of-pointer-to-stdunique-ptr-in-foreach-loop", "title": "Implicit conversion of pointer to std::unique_ptr in foreach loop", "body": "<p>I have an api call which populates an array of raw pointers to be used by the caller. This function heap allocates each raw pointer but does not allocate the array.</p>\n\n<p><strong>I cannot change this API function regardless of how bad it is.</strong></p>\n\n<p>Calling the api function code looks something like this:</p>\n\n<pre><code>size_t response_count = api.getResponseCount();\nstd::vector&lt;Response*&gt; responses(response_count);\napi.getResponses(responses.data());\n\nfor(auto response : responses) {\n    // Do some processing with response\n    delete response;\n}\n</code></pre>\n\n<p>I would like to wrap each response in a unique_ptr such that it is still cleaned up at the end of the loop iteration without having to explicitly call delete. Ideally, this would look something like:</p>\n\n<pre><code>for(std::unique_ptr&lt;Response&gt; response : responses) {\n    // Do some processing with response\n    // No need to delete response, it will be cleaned up as it goes out of scope\n}\n</code></pre>\n\n<p>This does not compile because the compiler cannot convert a pointer to a unique_ptr:\n<code>error: conversion from \u2018Response*\u2019 to non-scalar type \u2018std::unique_ptr&lt;Response&gt;\u2019 requested</code></p>\n\n<p>Is there way to cast each element of the container to a smart pointer in this way, or do I need to explicitly delete the raw pointer?</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1574291078, "post_id": 58964757, "comment_id": 104184572, "body": "What does &quot;build failed error&quot; mean? What is the <i>exact</i> error message the compiler is giving you?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1574291120, "post_id": 58964757, "comment_id": 104184585, "body": "Also, <code>int fallTime, int fallDistance;</code> looks wrong. That should probably be <code>int fallTime, fallDistance;</code>"}, {"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 0, "creation_date": 1574291337, "post_id": 58964757, "comment_id": 104184676, "body": "Are you missing <code>#include &lt;math.h&gt;</code>?"}, {"owner": {"reputation": 11, "user_id": 12395115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6050e36efef32fd05ef7ef5800a3314?s=128&d=identicon&r=PG&f=1", "display_name": "mpxrea", "link": "https://stackoverflow.com/users/12395115/mpxrea"}, "reply_to_user": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 0, "creation_date": 1574292394, "post_id": 58964757, "comment_id": 104185006, "body": "did the two steps above! compiled correctly! why do you think it didnt compile correctly using the second int? I thought it didnt matter. @Kai @scohe001?"}, {"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 1, "creation_date": 1574292674, "post_id": 58964757, "comment_id": 104185082, "body": "You can do <code>int X, Y;</code> but the compiler is unhappy about having the type re-declared after a comma."}], "owner": {"reputation": 11, "user_id": 12395115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6050e36efef32fd05ef7ef5800a3314?s=128&d=identicon&r=PG&f=1", "display_name": "mpxrea", "link": "https://stackoverflow.com/users/12395115/mpxrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574290940, "creation_date": 1574290940, "question_id": 58964757, "link": "https://stackoverflow.com/questions/58964757/prompt-user-for-amount-of-time-and-object-falls-and-then-calculate-velocity-usin", "title": "Prompt user for amount of time and object falls and then calculate velocity using functions", "body": "<p>I have written the code with absolute no error codes. However whenever i try to the run the program i get a build failed error. All my definitions are the same and i dont see any indication that anything is different. Can someone help?</p>\n\n<pre><code>    #include&lt;iostream&gt;\n    using namespace std;\n\n    const double GRAVITATION_CONSTANT = 9.8;\n\n    int getFallingTime();\n\n    int fallingDistance(int fallTime);\n\n    void displayResults(int fallTime, int fallDistance);\n\n    int main()\n    {\n        int fallTime, int fallDistance;\n\n        fallTime = getFallingTime();\n\n        fallDistance = fallingDistance(fallTime);\n\n        displayResults(fallTime, fallDistance);\n\n        cout &lt;&lt; \"End program - \";\n\n        return 0;\n    }\n\n\n    int getFallingTime()\n    {\n        int fallingTime;\n\n        cout &lt;&lt; \"Ener seconds the object falls: \";\n\n        cin &gt;&gt; fallingTime;\n\n        while (fallingTime &lt;= 0)\n        {\n            cout &lt;&lt; \"Enter seconds the object falls: \";\n            cin &gt;&gt; fallingTime;\n        }\n        return fallingTime;\n    }\n\n    int fallingDistance(int fallTime)\n    {\n        int fallDistance;\n\n        fallDistance = 0.5 * pow(fallTime, 2) * GRAVITATION_CONSTANT;\n\n        return fallDistance;\n    }\n\n    void displayResults(int fallTime, int fallDistance)\n    {\n        cout &lt;&lt; \"In \" &lt;&lt; fallTime &lt;&lt; \" seconds, the object falls \" &lt;&lt; fallDistance &lt;&lt; \" meters.\";\n    }\n</code></pre>\n"}, {"tags": ["c++", "templates", "lambda", "c++17"], "answers": [{"tags": [], "owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "is_accepted": true, "score": 1, "last_activity_date": 1574298276, "creation_date": 1574298276, "answer_id": 58965729, "question_id": 58964739, "link": "https://stackoverflow.com/questions/58964739/lambda-to-function-pointer-adapter-understanding/58965729#58965729", "title": "Lambda to function pointer adapter understanding", "body": "<p>This inheritance is something similar to a deduction guideline (not quite the same). A Lambda has all the infos you need to declare your struct, but the constructor cannot infer the return type and arguments from the lambda (or maybe it could, but there is not a syntax for representing the signature of a lambda). </p>\n\n<p>You can get the signature from <code>&amp;Lambda::operator()</code> which is just a member function pointer to the call function of your lambda. Note that each lambda is basically a unnamed struct with a (normally <code>const</code>) <code>operator()</code>. From the type of the lambda, you already know everything about the implementation of the lambda. </p>\n\n<p>Now <code>&amp;Lambda::operator()</code> has the type <code>ReType(Lambda::*)(Args...) const</code>, where the <code>Lambda::*</code> denotes that it is member function pointer. So if you inherit from the type you actually want. Hence you don't need to write <code>convert_lambda&lt;decltype(&amp;Lambda::operator())&gt;</code> when you want to use it.</p>\n\n<p>You can get around this inheritance completely, by doing the following:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename Lambda&gt;\nstruct convert_lambda; \n\ntemplate &lt;typename Lambda, typename ReType, typename... Args&gt;\nstruct convert_lambda&lt;ReType(Lambda::*)(Args...) const&gt;\n{\n    using  funPtr = ReType(*)(Args...);\n\n    static funPtr make_function_ptr(const Lambda&amp; t)\n    {\n        static const Lambda&amp; lmda = t;\n        return [](Args... args) { return lmda(args...); };\n    }\n};\n\ntemplate&lt;typename Lambda&gt;\nconstexpr auto make_function_ptr(const Lambda&amp; t)\n{\n    return convert_lambda&lt;decltype(&amp;Lambda::operator())&gt;::make_function_ptr(t);\n}\n</code></pre>\n\n<p>Since you probably will not use the <code>convert_lambda</code> at any other place, this should not be an incovenience.</p>\n\n<p>To illustrate the similarity to deduction guides, I rewrote it using one (this needs C++17):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename Lambda&gt;\nstruct convert_lambda; \n\ntemplate &lt;typename Lambda, typename ReType, typename... Args&gt;\nstruct convert_lambda&lt;ReType(Lambda::*)(Args...) const&gt;\n{\n    using  funPtr = ReType(*)(Args...);\n\n    convert_lambda(const Lambda&amp; t) {}\n\n    static funPtr make_function_ptr(const Lambda&amp; t)\n    {\n        static const Lambda&amp; lmda = t;\n        return [](Args... args) { return lmda(args...); };\n    }\n};\n\ntemplate&lt;typename Lambda&gt;\nconvert_lambda(const Lambda&amp; t) -&gt; convert_lambda&lt;decltype(&amp;Lambda::operator())&gt;;\n\ntemplate&lt;typename Lambda&gt;\nconstexpr auto make_function_ptr(const Lambda&amp; t)\n{\n    return decltype(convert_lambda(t))::make_function_ptr(t);\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 7355932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86c310506b06aa3cfaeedccae2aca20f?s=128&d=identicon&r=PG&f=1", "display_name": "Eugene", "link": "https://stackoverflow.com/users/7355932/eugene"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "accepted_answer_id": 58965729, "answer_count": 1, "score": 0, "last_activity_date": 1574298276, "creation_date": 1574290845, "last_edit_date": 1574291362, "question_id": 58964739, "link": "https://stackoverflow.com/questions/58964739/lambda-to-function-pointer-adapter-understanding", "title": "Lambda to function pointer adapter understanding", "body": "<p>Bumped into some useful code for converting lambda taking some outer context to a function pointer and do not clearly understand some part of it.</p>\n\n<p>What is the point to do this inheritance in the beginning of the code?</p>\n\n<pre><code>template&lt;typename Lambda&gt;\nstruct convert_lambda : convert_lambda&lt;decltype(&amp;Lambda::operator())&gt; {};\n\n\ntemplate &lt;typename Lambda, typename ReType, typename... Args&gt;\nstruct convert_lambda&lt;ReType(Lambda::*)(Args...) const&gt;\n{\n    using  funPtr = ReType(*)(Args...);\n\n    static funPtr make_function_ptr(const Lambda&amp; t)\n    {\n        static const Lambda&amp; lmda = t;\n        return [](Args... args) { return lmda(args...); };\n    }\n};\n\ntemplate&lt;typename Lambda&gt;\nusing convert_lambda_t = typename convert_lambda&lt;Lambda&gt;::funPtr;\n\ntemplate&lt;typename Lambda&gt;\nconstexpr convert_lambda_t&lt;Lambda&gt; make_function_ptr(const Lambda&amp; t)\n{\n    return convert_lambda&lt;Lambda&gt;::make_function_ptr(t);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "edited": false, "score": 0, "creation_date": 1574291036, "post_id": 58964729, "comment_id": 104184551, "body": "You need to use <code>std::shared_ptr</code> instead of <code>std::unique_ptr</code>. Vector requires the item to be copyable and <code>unique_ptr</code>&#39;s are not."}, {"owner": {"reputation": 1514, "user_id": 8625500, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be32f7b1520580e9bc537047492dba52?s=128&d=identicon&r=PG&f=1", "display_name": "Anakin", "link": "https://stackoverflow.com/users/8625500/anakin"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574291163, "post_id": 58964729, "comment_id": 104184604, "body": "@uneven_mark Yeah, I added it to check possible issue, forgot to remove"}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 2, "creation_date": 1574291173, "post_id": 58964729, "comment_id": 104184611, "body": "Vector <i>does not</i> require the item to be copyable, you just can&#39;t use operations that result in copying."}, {"owner": {"reputation": 1514, "user_id": 8625500, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be32f7b1520580e9bc537047492dba52?s=128&d=identicon&r=PG&f=1", "display_name": "Anakin", "link": "https://stackoverflow.com/users/8625500/anakin"}, "reply_to_user": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "edited": false, "score": 0, "creation_date": 1574291212, "post_id": 58964729, "comment_id": 104184628, "body": "@lfgtm so is there no way to push into a vector without invoking copy?"}, {"owner": {"reputation": 1514, "user_id": 8625500, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be32f7b1520580e9bc537047492dba52?s=128&d=identicon&r=PG&f=1", "display_name": "Anakin", "link": "https://stackoverflow.com/users/8625500/anakin"}, "edited": false, "score": 0, "creation_date": 1574291289, "post_id": 58964729, "comment_id": 104184653, "body": "I just need a way to do this without invoking copy, if possible. I would like to keep the unique_ptr."}, {"owner": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "edited": false, "score": 1, "creation_date": 1574291445, "post_id": 58964729, "comment_id": 104184717, "body": "@Anakin I don&#39;t think so, push back on vector invokes reallocation (potentially) and so items will be copied from the old mem block to new one. There are other move semantics which can come into play I think. Not too sure. however the error you get is an indication that the unique item is required to be something other than unique for that container."}, {"owner": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "edited": false, "score": 0, "creation_date": 1574291588, "post_id": 58964729, "comment_id": 104184761, "body": "@Anakin Is there a particular reason it needs to be unique. A <code>shared_ptr</code> can achieve the same. Just because it is shared, doesn&#39;t mean you can&#39;t use it in a unique way. i.e don&#39;t tell anyone it is shared ;). There is slight overhead (due to reference counting), but ultimately you can use it in a vector. Altertnatively use another container like list etc."}, {"owner": {"reputation": 1514, "user_id": 8625500, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be32f7b1520580e9bc537047492dba52?s=128&d=identicon&r=PG&f=1", "display_name": "Anakin", "link": "https://stackoverflow.com/users/8625500/anakin"}, "reply_to_user": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "edited": false, "score": 0, "creation_date": 1574291762, "post_id": 58964729, "comment_id": 104184818, "body": "@lfgtm this is only a simple example of a use case in a large project. I wouldn&#39;t claim that a shared_ptr wouldn&#39;t work at all, but changing the pointer type might call for extra care in the project. That&#39;s why I said I would like to keep it the same type, if possible."}, {"owner": {"reputation": 1514, "user_id": 8625500, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be32f7b1520580e9bc537047492dba52?s=128&d=identicon&r=PG&f=1", "display_name": "Anakin", "link": "https://stackoverflow.com/users/8625500/anakin"}, "reply_to_user": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "edited": false, "score": 0, "creation_date": 1574291900, "post_id": 58964729, "comment_id": 104184858, "body": "@lfgtm does using a list not invoke copy?"}, {"owner": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "edited": false, "score": 1, "creation_date": 1574291908, "post_id": 58964729, "comment_id": 104184861, "body": "@Anakin Fair enough, so the next question would be, do you require a random access container (i.e vector)? If not <code>std::list</code> would be fine to use as this doesn&#39;t require reallocation of existing items when push back."}, {"owner": {"reputation": 1514, "user_id": 8625500, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be32f7b1520580e9bc537047492dba52?s=128&d=identicon&r=PG&f=1", "display_name": "Anakin", "link": "https://stackoverflow.com/users/8625500/anakin"}, "reply_to_user": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "edited": false, "score": 0, "creation_date": 1574292020, "post_id": 58964729, "comment_id": 104184896, "body": "@lfgtm a <code>std::list</code> might be possible for my use case. I will have a look and get back here later. Thanks."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "edited": false, "score": 2, "creation_date": 1574292251, "post_id": 58964729, "comment_id": 104184963, "body": "@lfgtm <code>std::vector::emplace_back</code> only requires the element type to be MoveInsertable, i.e. have a move constructor. It does not need to be copied, even when reallocation happens. As pointed out in the answer, the problem is the <code>const</code>ness of the reference used."}, {"owner": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574292555, "post_id": 58964729, "comment_id": 104185052, "body": "@uneven_mark Good to know, would this not require the capacity to be big enough in the first place though? At some point it might beg the question why vector is used as it&#39;s capability would be severly restricted. Should emplace_back be favoured over push_back?"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 997, "user_id": 5903546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090029ba7b6c1adda964f65d37898526?s=128&d=identicon&r=PG&f=1", "display_name": "lfgtm", "link": "https://stackoverflow.com/users/5903546/lfgtm"}, "edited": false, "score": 0, "creation_date": 1574292606, "post_id": 58964729, "comment_id": 104185064, "body": "@lfgtm No, the point is that when reallocation happens, each element can be <i>moved</i> to the new memory rather than needing to be <i>copied</i>. That&#39;s good enough. The same holds for <code>push_back</code>. It wouldn&#39;t make any difference in OP&#39;s code."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1574293587, "post_id": 58964729, "comment_id": 104185305, "body": "Are you trying to change the ownership of the objects from being owned by the map to being owned by the vector? If so, you should be moving the map to the <code>fillVector</code> function so that it&#39;s clear that its destroyed in the process."}, {"owner": {"reputation": 1514, "user_id": 8625500, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be32f7b1520580e9bc537047492dba52?s=128&d=identicon&r=PG&f=1", "display_name": "Anakin", "link": "https://stackoverflow.com/users/8625500/anakin"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1574366040, "post_id": 58964729, "comment_id": 104218086, "body": "@DavidSchwartz yes, I ended up doing that exact same thing. I pass the ownership to the vector, and the map is local and destroyed."}], "answers": [{"comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1574292549, "post_id": 58964899, "comment_id": 104185049, "body": "To be precise, the non-const reference is needed so that <code>std::move</code> actually makes the move constructor usable in <code>emplace_back</code>."}], "tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": true, "score": 3, "last_activity_date": 1574291982, "creation_date": 1574291982, "answer_id": 58964899, "question_id": 58964729, "link": "https://stackoverflow.com/questions/58964729/error-in-pushing-unique-ptrs-from-map-into-a-vector/58964899#58964899", "title": "Error in pushing unique_ptrs from map into a vector", "body": "<p>The line gives error because you iterate over the map via a const iterator. To apply <code>emplace_back</code> on you need a non-const reference.</p>\n\n<p>Also you have an error with your approach in general. <code>unique_ptr</code> is a <strong>unique</strong> pointer. You cannot have more than one <code>unique_ptr</code> pointing to the same object. So you cannot share them between map and a vector.</p>\n\n<p>Use 2 shared_ptr, or unique_ptr with a raw pointer depending on requirements.</p>\n"}, {"tags": [], "owner": {"reputation": 68729, "user_id": 45654, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zaEnW.png?s=128&g=1", "display_name": "stefanB", "link": "https://stackoverflow.com/users/45654/stefanb"}, "is_accepted": false, "score": 3, "last_activity_date": 1574293458, "last_edit_date": 1574293458, "creation_date": 1574292903, "answer_id": 58965026, "question_id": 58964729, "link": "https://stackoverflow.com/questions/58964729/error-in-pushing-unique-ptrs-from-map-into-a-vector/58965026#58965026", "title": "Error in pushing unique_ptrs from map into a vector", "body": "<p><code>std::unique_ptr</code> is the owner of the pointer, it'll delete the data when you destroy the <code>std::unique_ptr</code>.</p>\n\n<p>So you don't want to have two <code>std::unique_ptr</code>'s to point to the same data because when one of them deletes your data the other one ends up pointing to something which is no longer your data. You could call <code>std::unique_ptr&lt;&gt;::release()</code> before deleting the <code>std::unique_ptr</code> but then it sounds like you are not using the <code>std::unique_ptr</code> correctly if you want two \"unique pointers\".</p>\n\n<p>You could use <code>std::shared_ptr</code>. Or, what I usually do, <strong>decide who owns the data</strong>, vector or map, then the owner stores <code>std::unique_ptr</code>'s to data and the other stores just plain pointers. You have to make sure you deal with all the pointers before you delete the <code>std::unique_ptr</code>.</p>\n\n<p>So for example:</p>\n\n<pre><code>typedef std::vector&lt; BaseInt * &gt; vec_type;\nmy_vec.push_back(it.second.get());\n</code></pre>\n\n<p>I haven't tried compiling but <code>std::unique_ptr&lt;&gt;::get()</code> returns raw pointer that is still managed by the <code>std::unique_ptr</code> in the map. Then remove from vector before removing from map, because removing from map will delete data pointed to by <code>std::unique_ptr</code>.</p>\n\n<p>EDIT:</p>\n\n<p>When you move the <code>std::unique_ptr</code> the ownership is transfered to the new <code>std::unique_ptr</code> so the old one no longer holds valid pointer, after you move the pointer from map to vector the map no longer has the pointer to your data:</p>\n\n<pre><code>my_vec.emplace_back(std::move(it-&gt;second));\n</code></pre>\n\n<p>Check what you have in map after you move pointers to vector.</p>\n"}], "owner": {"reputation": 1514, "user_id": 8625500, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be32f7b1520580e9bc537047492dba52?s=128&d=identicon&r=PG&f=1", "display_name": "Anakin", "link": "https://stackoverflow.com/users/8625500/anakin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 1, "accepted_answer_id": 58964899, "answer_count": 2, "score": 0, "last_activity_date": 1574365908, "creation_date": 1574290804, "last_edit_date": 1592644375, "question_id": 58964729, "link": "https://stackoverflow.com/questions/58964729/error-in-pushing-unique-ptrs-from-map-into-a-vector", "title": "Error in pushing unique_ptrs from map into a vector", "body": "<p>I have a <code>std::map</code> of <code>std::string</code> and <code>std::unique_ptr&lt;BaseInt&gt;</code>. Basically I want to have a map with the class name as string <code>key</code> and a unique pointer as the corresponding <code>value</code>. And access the pointer as <code>map[&quot;Derived1&quot;]</code> etc (explained in code below).</p>\n<p>When I iterate over the <code>std::map</code> and try to push each <code>value</code> to a <code>std::vector</code>, I see the following error</p>\n<blockquote>\n<p>Error C2280 '<code>std::unique_ptr&lt;BaseInt,std::default_delete&lt;_Ty&gt;&gt;::unique_ptr(const std::unique_ptr&lt;_Ty,std::default_delete&lt;_Ty&gt;&gt; &amp;)</code>': attempting to reference a deleted function  CreateInstanceFromList  c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.16.27023\\include\\xmemory</p>\n</blockquote>\n<p>I am on Visual Studio 2017 Version 15.9.16 MSVC 14.16.27023</p>\n<p>The implementation code is as follows. <code>BaseInt</code> is a BaseClass with an <code>int</code> member and a pure virtual <code>replaceInt()</code>. <code>DerivedInt1</code> and <code>DerivedInt2</code> implement the virtual function with different <code>int</code> values and differ by a parameter in their construction.</p>\n<pre><code>#include &quot;UserClass.h&quot;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;memory&gt;\n#include &lt;typeinfo&gt;\n\ntypedef std::vector&lt;std::unique_ptr&lt;BaseInt&gt;&gt; vec_type;\ntypedef std::map&lt;std::string, std::unique_ptr&lt;BaseInt&gt;&gt; map_type;\n\ntemplate&lt;typename T&gt; std::unique_ptr&lt;T&gt; createInstance(vec_type&amp; vec) { return std::make_unique&lt;T&gt;(); };\ntemplate&lt;typename T, typename U&gt; std::unique_ptr&lt;T&gt; createInstance(vec_type&amp; vec, U u) { return std::make_unique&lt;T&gt;(u); };\n\nvoid fillVector(map_type&amp; map)\n{\n    vec_type my_vec;\n    for (auto const&amp; it : map )\n    {\n        std::cout &lt;&lt; it.first &lt;&lt; std::endl;\n        it.second-&gt;replaceInt();\n\n        //my_vec.emplace_back(std::move(it.second)); //this line gives error\n    }\n    // idea is to be able to access the pointer as map[&quot;Derived1&quot;]\n    std::cout &lt;&lt; my_vec.size() &lt;&lt; std::endl;\n}\n\nint main()\n{\n    map_type my_map;\n    \n    my_map.emplace(&quot;Derived1&quot;, createInstance&lt;DerivedInt1&gt;(my_vec, 7));\n    my_map.emplace(&quot;Derived2&quot;, createInstance&lt;DerivedInt2&gt;(my_vec));\n\n    fillVector(my_map);\n\n    return 0;\n}\n\n</code></pre>\n<p>My intuition is somehow I am trying to call the copyconstructor of the <code>unique_ptr</code> but I don't actually see how. Thanks.</p>\n<h3>Edit:</h3>\n<p>So, the main problem is the <code>const&amp;</code> iterator as @ALX23z mentioned in the answer. The following change works:</p>\n<pre><code>    for (auto it = map.begin(); it != map.end(); ++it )\n    {\n        std::cout &lt;&lt; it-&gt;first &lt;&lt; std::endl;\n        it-&gt;second-&gt;replaceInt();\n\n        my_vec.emplace_back(std::move(it-&gt;second));\n    }\n</code></pre>\n<h3>Edit 2:</h3>\n<p>As pointed out by multiple people, I made a basic design flaw of not using <code>unique_ptr</code> as unique. I can see the problem you mentioned and I will look into the possibility of changing to a <code>shared_ptr</code> or modifying the design. Thanks for all the quick response. I will update my changes here tomorrow.</p>\n<h3>Edit 3:</h3>\n<p>After looking at the main project scenarios, I can see that the <code>std::map</code> here is really just a one-time use container, so I can keep it local and pass all ownership to the <code>std::vector</code>.</p>\n<h3>Edit Again:</h3>\n<p>Someone downvoted the question and flagged to close it mentioning</p>\n<blockquote>\n<p>Questions seeking debugging help (&quot;why isn't this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Reproducible Example.</p>\n</blockquote>\n<p>I really would like them to enlighten me on how this flagging was deemed necessary. I totally presented a short code necessary to reproduce the exact problem I was facing; instead of the huge project code I am actually working on. I provided all information necessary with even my intuition of where it was failing. I added multiple edit information so that any reader can find it useful. Atleast, leave a comment and explain what can be improved. Sorry for the rant.</p>\n"}, {"tags": ["c++", "visual-studio", "precompiled-headers"], "answers": [{"tags": [], "owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "is_accepted": false, "score": 3, "last_activity_date": 1574300081, "creation_date": 1574300081, "answer_id": 58965947, "question_id": 58964711, "link": "https://stackoverflow.com/questions/58964711/precompiled-header-within-c-project-in-visualstudio-not-linking-correctly/58965947#58965947", "title": "Precompiled Header within C++ Project in VisualStudio not Linking correctly", "body": "<p>According to the <a href=\"https://docs.microsoft.com/en-us/cpp/error-messages/compiler-errors-2/compiler-error-c2857?view=vs-2019\" rel=\"nofollow noreferrer\">Compiler Error C2857</a></p>\n\n<blockquote>\n  <p>When you use the /Ycfilename option on a source file to create a\n  precompiled header (PCH) file, that source file must include the\n  filename header file. Every file included by the source file, up to\n  and including the specified filename, is included in the PCH file. In\n  other source files compiled by using the /Yufilename option to use the\n  PCH file, an include of filename must be the first non-comment line in\n  the file. The compiler ignores anything in the source file before this\n  include.</p>\n</blockquote>\n\n<p>Get any of those details wrong and you'll be slapped with a compile error.  Looks to me like the source file you selected for /Yc does not in fact #include \"pch.h\".</p>\n"}], "owner": {"reputation": 111, "user_id": 5768255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFf20.png?s=128&g=1", "display_name": "NobleCloud", "link": "https://stackoverflow.com/users/5768255/noblecloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1574300081, "creation_date": 1574290703, "question_id": 58964711, "link": "https://stackoverflow.com/questions/58964711/precompiled-header-within-c-project-in-visualstudio-not-linking-correctly", "title": "Precompiled Header within C++ Project in VisualStudio not Linking correctly", "body": "<h1>Scenario</h1>\n\n<p>If have the following directory structure within my VS Project.</p>\n\n<pre><code>    project/\n      |\n      |-- include/\n      |     |\n      |     pch.h\n      |\n      |-- src/\n      |     |\n      |     pch.cpp\n      |\n      Project.cpp\n</code></pre>\n\n<p>And my files read like this:</p>\n\n<blockquote>\n  <p>Project.cpp</p>\n</blockquote>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"include/pch.h\"\n\nint main()\n{\n    std::cout &lt;&lt; \"Hello World!\\n\";\n}\n</code></pre>\n\n<blockquote>\n  <p>pch.h</p>\n</blockquote>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef _PCH_H\n#define _PCH_H\n\n// IO Libraries\n#include &lt;iostream&gt;     \n#include &lt;iomanip&gt;      \n#include &lt;io.h&gt;         \n#include &lt;ostream&gt;\n#include &lt;conio.h&gt;\n\n... more headers\n\n#endif // !_PCH_H\n</code></pre>\n\n<blockquote>\n  <p>pch.cpp</p>\n</blockquote>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"../include/pch.h\"\n</code></pre>\n\n<p>Now, the properties for each element are configured for <strong>Precompiled Headers</strong> as follows:</p>\n\n<blockquote>\n  <p>Project</p>\n</blockquote>\n\n<pre><code>Precompiled Header                   Use(/Yu)\nPrecompiled Header File              pch.h\nPrecompiled Header Output File       $(IntDir)$(TargetName).pch\n</code></pre>\n\n<blockquote>\n  <p>pch.cpp</p>\n</blockquote>\n\n<pre><code>Precompiled Header                   Create(/Yc)\nPrecompiled Header File              pch.h\nPrecompiled Header Output File       $(IntDir)$(TargetName).pch\n</code></pre>\n\n<h1>Problem</h1>\n\n<p>When I attempt to compile this project, I receive the following error:</p>\n\n<pre><code>Severity    Code     Description\n-------------------------------------------------------------------------------------------------------\nError       C2857    '#include' statement specified with the /Ycpch.h command-line option was not found in the source file  \n\nProject File                                           Line  \n-------------------------------------------------------------------------------------------------------\nC:\\Workspace\\VisualStudio\\C++\\Poker\\Poker\\src\\pch.cpp  2\n</code></pre>\n"}, {"tags": ["c++", "constructor", "copy", "copy-assignment"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1574290942, "post_id": 58964679, "comment_id": 104184504, "body": "sorta typo: <code>const User&amp; operator=(const User &amp;other){}</code> should be <code>const User&amp; User::operator=(const User &amp;other){}</code>"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1574290979, "post_id": 58964679, "comment_id": 104184524, "body": "In addition to what @user has said, you&#39;re promising to return a <code>const User&amp;</code>, but you return nothing. Since you got it right on the constructor, it&#39;s clear you know you should need the <code>User::</code>. I&#39;m voting to close this as a typo."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1574291012, "post_id": 58964679, "comment_id": 104184540, "body": "Sidenote: Per the <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of Three</a>, if you need an assignment operator, you probably need a Destructor and a Copy Constructor."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574291117, "post_id": 58964679, "comment_id": 104184583, "body": "And if you have a copy constructor, you can take advantage of the quick and surprisingly clean <a href=\"https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom\">Copy and Swap Idiom</a> to write the assignment operator."}, {"owner": {"reputation": 23, "user_id": 10849455, "user_type": "registered", "profile_image": "https://graph.facebook.com/1400773816724147/picture?type=large", "display_name": "Maya Saias", "link": "https://stackoverflow.com/users/10849455/maya-saias"}, "edited": false, "score": 0, "creation_date": 1574291721, "post_id": 58964679, "comment_id": 104184805, "body": "Thank you everyone, the reason I did not add the User:: is because I read somewhere it should be non member function and therefore should have it, but I am new to c++. yes I will add the Destructor and Copy Constructor as well. again thank you"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574292470, "post_id": 58964679, "comment_id": 104185023, "body": "Many operators should be free functions, but the assignment operator is inherently tied to the object that is being assigned. As a result it can only be implemented as a member function. For more useful tidbits on operators see <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">What are the basic rules and idioms for operator overloading?</a>."}, {"owner": {"reputation": 23, "user_id": 10849455, "user_type": "registered", "profile_image": "https://graph.facebook.com/1400773816724147/picture?type=large", "display_name": "Maya Saias", "link": "https://stackoverflow.com/users/10849455/maya-saias"}, "edited": false, "score": 0, "creation_date": 1574292784, "post_id": 58964679, "comment_id": 104185114, "body": "Ok, so I made the change you said and the error was gone, but now when I do:  User* new_user = original_user; it does not go to the operator assignment. what am I doing wrong?"}, {"owner": {"reputation": 671, "user_id": 7898100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef63bacd8554153c3ad9127ce502180d?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Wollgam", "link": "https://stackoverflow.com/users/7898100/tobias-wollgam"}, "edited": false, "score": 0, "creation_date": 1574294442, "post_id": 58964679, "comment_id": 104185469, "body": "That is a new question, so open a new question and you can provide your code with another focus."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574297938, "post_id": 58964679, "comment_id": 104186310, "body": "Two things to note with <code>User* new_user = original_user;</code> 1) <code>User* new_user</code> defines a pointer to a <code>User</code>, NOT a <code>User</code>. If you assign pointers, you just change an address and point at a different <code>User</code>. 2) When you define a variable and instantly set its value you initialize rather than assign. <code>User new_user = original_user;</code> would call the copy constructor and construct a new <code>User</code> based on <code>original_user</code> rather than constructing an empty <code>User</code> and then assigning. If you need more than those two hints definitely do ask a new question. Comments aren&#39;t able to handle more than hints."}, {"owner": {"reputation": 23, "user_id": 10849455, "user_type": "registered", "profile_image": "https://graph.facebook.com/1400773816724147/picture?type=large", "display_name": "Maya Saias", "link": "https://stackoverflow.com/users/10849455/maya-saias"}, "edited": false, "score": 0, "creation_date": 1574326800, "post_id": 58964679, "comment_id": 104195579, "body": "Ok thank you everyone for your help!"}], "owner": {"reputation": 23, "user_id": 10849455, "user_type": "registered", "profile_image": "https://graph.facebook.com/1400773816724147/picture?type=large", "display_name": "Maya Saias", "link": "https://stackoverflow.com/users/10849455/maya-saias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574290494, "creation_date": 1574290494, "question_id": 58964679, "link": "https://stackoverflow.com/questions/58964679/copy-assignment-constructor-in-c", "title": "Copy Assignment constructor in c++", "body": "<p>I get this error while trying to create a copy assignment constructor: \"overloaded operator must be a binary operator\"</p>\n\n<p>this is my code:\nheader:</p>\n\n<pre><code>class User{\npublic:\n    User(const std::string&amp; name);\n    const User&amp; operator=(const User &amp;other);\n    //virtual Watchable* getRecommendation(Session&amp; s) = 0;\n    std::string getName() const;\n    std::vector&lt;Watchable*&gt; get_history() const;\nprotected:\n    std::vector&lt;Watchable*&gt; history;\nprivate:\n    const std::string name;\n\n}; \n</code></pre>\n\n<p>cpp:</p>\n\n<pre><code>User::User(const std::string&amp; name):name(name) {\n\n}\n\nconst User&amp; operator=(const User &amp;other){\n\n}\n</code></pre>\n\n<p>the error is in the cpp file. anyone?</p>\n"}, {"tags": ["c++", "bash", "pipe", "mapper", "getenv"], "comments": [{"owner": {"reputation": 11283, "user_id": 5825294, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Un5fU.png?s=128&g=1", "display_name": "Enlico", "link": "https://stackoverflow.com/users/5825294/enlico"}, "edited": false, "score": 0, "creation_date": 1574290952, "post_id": 58964671, "comment_id": 104184511, "body": "Can you try to elaborate on what your intention is, and maybe share the C++ code?"}, {"owner": {"reputation": 11, "user_id": 12272454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9a4XNBLjGgQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcRTnVG9cNmxyI37W_gtmHDIoEtkw/photo.jpg?sz=128", "display_name": "Carlos Ermani", "link": "https://stackoverflow.com/users/12272454/carlos-ermani"}, "reply_to_user": {"reputation": 11283, "user_id": 5825294, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/Un5fU.png?s=128&g=1", "display_name": "Enlico", "link": "https://stackoverflow.com/users/5825294/enlico"}, "edited": false, "score": 0, "creation_date": 1574292005, "post_id": 58964671, "comment_id": 104184888, "body": "I hope that it seems better now"}, {"owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1574292514, "post_id": 58964671, "comment_id": 104185036, "body": "Piping will make data available on stdin. You should read a line from stdin as if you were trying to read user input."}, {"owner": {"reputation": 11, "user_id": 12272454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9a4XNBLjGgQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcRTnVG9cNmxyI37W_gtmHDIoEtkw/photo.jpg?sz=128", "display_name": "Carlos Ermani", "link": "https://stackoverflow.com/users/12272454/carlos-ermani"}, "reply_to_user": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 0, "creation_date": 1574293207, "post_id": 58964671, "comment_id": 104185208, "body": "@thatotherguy. Yes I thought so but why do I need getenv() then? Do you have an opinion for that ?"}, {"owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 1, "creation_date": 1574294761, "post_id": 58964671, "comment_id": 104185542, "body": "I don&#39;t know why you would need it. Nothing about the problem description suggests that <code>getenv</code> should be involved."}, {"owner": {"reputation": 11476, "user_id": 8572380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4a5d854aa543e6bf01abe8351d38782?s=128&d=identicon&r=PG&f=1", "display_name": "tshiono", "link": "https://stackoverflow.com/users/8572380/tshiono"}, "edited": false, "score": 0, "creation_date": 1574302401, "post_id": 58964671, "comment_id": 104187368, "body": "I guess you want to extract variable names and values by reading <code>*.txt</code> files. If you can provide some lines of them and describe what you want to do with them, we could be your help. I suppose <code>getenv</code> has nothing to do with it."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12272454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9a4XNBLjGgQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcRTnVG9cNmxyI37W_gtmHDIoEtkw/photo.jpg?sz=128", "display_name": "Carlos Ermani", "link": "https://stackoverflow.com/users/12272454/carlos-ermani"}, "edited": false, "score": 0, "creation_date": 1574332673, "post_id": 58965781, "comment_id": 104199320, "body": "I am not allow to change anything in bash. So in this case I can not use argv. I read line from stdin but how can I get that which file are piping I have to get filename and index for every words"}], "tags": [], "owner": {"reputation": 61, "user_id": 12118679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99d979b17a391de1c736f34a5c37bc19?s=128&d=identicon&r=PG&f=1", "display_name": "Baudouin Th&#233;obald", "link": "https://stackoverflow.com/users/12118679/baudouin-th%c3%a9obald"}, "is_accepted": false, "score": 1, "last_activity_date": 1574298729, "creation_date": 1574298729, "answer_id": 58965781, "question_id": 58964671, "link": "https://stackoverflow.com/questions/58964671/how-can-i-acces-files-with-getenv-in-c-with-using-pipe-in-a-bash/58965781#58965781", "title": "How can I acces files with getenv() in c++ with using pipe in a bash?", "body": "<p>You are making a confusion here. <code>getenv</code> allows you to get environment variables, like <code>PWD</code>, which is just the path to your home directory.</p>\n\n<p>Here, the pipe adds the output of the <code>echo</code> command to the args given to your executable. To get these args you should write your C++ code like this:</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    //do whatever you want with argv[1]\n    return 0;\n}\n</code></pre>\n\n<p>Edit: if you want to get the name of the file in your C++ code,  you should use <code>echo</code> instead of <code>cat</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 12272454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9a4XNBLjGgQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcRTnVG9cNmxyI37W_gtmHDIoEtkw/photo.jpg?sz=128", "display_name": "Carlos Ermani", "link": "https://stackoverflow.com/users/12272454/carlos-ermani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574298729, "creation_date": 1574290451, "last_edit_date": 1574291983, "question_id": 58964671, "link": "https://stackoverflow.com/questions/58964671/how-can-i-acces-files-with-getenv-in-c-with-using-pipe-in-a-bash", "title": "How can I acces files with getenv() in c++ with using pipe in a bash?", "body": "<p>I want to implement a function for MapReduce framework so my task is to create a mapper that concatenate text files.</p>\n\n<p>Here is my bash script;</p>\n\n<pre><code> for i in text1.txt text2.txt text3.txt\n     do\n         cat $i | ./myfunction\n     done\n</code></pre>\n\n<p>And myfunction() will read the input files , line by line and the variable will be read with function getenv(). I tried with fopen(argv[1],\"r\") it gives me Segmentation fault and with popen() I get permission denied. </p>\n\n<p>My code in C++: </p>\n\n<pre><code> char *myenv;\n myenv = getenv(\"PWD\");\n FILE *fileIN = popen(myenv , \"r\");\n</code></pre>\n\n<p>I don't know what exactly cat $i | ./myfunction does.Does it read \"i\" like an argument ? if yes, I get fileIN == NULL when I use fopen.</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574290679, "post_id": 58964588, "comment_id": 104184392, "body": "You may find <a href=\"https://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">List Initialization</a> helpful. It eliminates the need for individually assigning all of the array elements."}], "answers": [{"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 1, "last_activity_date": 1574290246, "creation_date": 1574290246, "answer_id": 58964631, "question_id": 58964588, "link": "https://stackoverflow.com/questions/58964588/how-to-access-array-in-function-outside-of-main/58964631#58964631", "title": "How to access array in function outside of main?", "body": "<pre><code>void getStore();\n</code></pre>\n\n<p>This is a function stub. It declares a function <code>getStore</code> that takes no arguments and returns nothing to be implemented later. This is almost definitely a typo.</p>\n\n<p>Further, because <code>void getStore(Weapon* weaponArray)</code> is in the Weapon class, you have to call it on a weapon, which doesn't look right. You probably mean to do this:</p>\n\n<pre><code>class Weapon {\n    // ...\n};\n\nvoid getStore(Weapon* weaponArray, unsigned sz)\n{\n    std::cout &lt;&lt; \"Name\" &lt;&lt; \"\\t\" &lt;&lt; \"Sound\" &lt;&lt; \"\\t\" &lt;&lt; \"Price\" &lt;&lt; \"\\t\" &lt;&lt; \"Owned\";\n    for (unsigned i = 0; i &lt; sz; i++)\n    {\n          weaponArray[i].getInventory();\n    }\n}\n\nint main()\n{\n    Weapon weaponArray[9]{};\n    weaponArray[0] = Weapon(\"Broad Sword\",\"Clang!\",50,false,3);\n    //...\n\n    getStore(weaponArray, 9);\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 12048891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c0e5802816389a6d84c9181a2d09cae?s=128&d=identicon&r=PG&f=1", "display_name": "Eric268", "link": "https://stackoverflow.com/users/12048891/eric268"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 1, "accepted_answer_id": 58964631, "answer_count": 1, "score": 0, "last_activity_date": 1574290425, "creation_date": 1574289999, "question_id": 58964588, "link": "https://stackoverflow.com/questions/58964588/how-to-access-array-in-function-outside-of-main", "title": "How to access array in function outside of main?", "body": "<p>I am trying to create a program that prints out a store inventory. I print out the variables from my objects in the getInventory function. However, when I try and print out the entire inventory in the getStore function it returns nothing. I feel like it is an issue with my pointer properly pointing to my array but I am not sure.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass Weapon\n{\nprivate:\n    std::string nameWeapon, messageUsed;\n    bool ownedWeapon;\n    double weaponCost;\n    int numberUses;\n\npublic:\n    //Default constructor\n    Weapon() \n    {\n        nameWeapon = \"weapon name\";\n        messageUsed = \"weapon sound\";\n        weaponCost = 0;\n        ownedWeapon = false;\n        numberUses = 1;\n    }\n    //Non-Default Constructor\n    Weapon(std::string nW, std::string mU,double wC,bool oW, int nU )\n    {\n        nameWeapon = nW;\n        messageUsed = mU;\n        weaponCost = wC;\n        ownedWeapon = oW;\n        numberUses = nU;\n    }\n    void getInventory()\n    {\n        std::cout &lt;&lt; nameWeapon &lt;&lt; \"\\t\" &lt;&lt; messageUsed &lt;&lt; \"\\t\" &lt;&lt; weaponCost &lt;&lt; \"\\t\" &lt;&lt; ownedWeapon &lt;&lt; \"\\t\" &lt;&lt; numberUses &lt;&lt; \"\\n\";\n    }\n    void getStore(Weapon* weaponArray)\n    {\n        std::cout &lt;&lt; \"Name\" &lt;&lt; \"\\t\" &lt;&lt; \"Sound\" &lt;&lt; \"\\t\" &lt;&lt; \"Price\" &lt;&lt; \"\\t\" &lt;&lt; \"Owned\";\n        for (int i = 0; i &lt; 9; i++)\n        {\n              weaponArray[i].getInventory();\n        }\n    }\n};\nint main()\n{\n    Weapon weaponArray[9]{};\n    weaponArray[0] = Weapon(\"Broad Sword\",\"Clang!\",50,false,3);\n    weaponArray[1] = Weapon(\"Champions Sword\",\"Swoosh!\",99.99,false,5);\n    weaponArray[2] = Weapon(\"Dagger\",\"Ding!\",12.25,false,1);\n    weaponArray[3] = Weapon(\"Poisin Dagger\",\"Shh\",18.50,false,1);\n    weaponArray[4] = Weapon(\"Sturdy Dagger\",\"Gronk!\",14.75,false,3);\n    weaponArray[5] = Weapon(\"Short Bow\",\"T'wang!\",35.75,false,3);\n    weaponArray[6] = Weapon(\"Champions Bow\",\"Swoop!\",90.15,false,5);\n    weaponArray[7] = Weapon(\"Champions Axe\",\"Bash!\",110.11,false,6);\n    weaponArray[8] = Weapon(\"Throwing Axe\",\"Bonk!\",25.75,false,2);\n\n    void getStore();\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++builder", "vcl"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1574290176, "post_id": 58964532, "comment_id": 104184207, "body": "Do you <i>have</i> you use the classic compiler? It&#39;s a pre C++11 compiler and starting a new project using pre C++11 seems like a bad choice. With the new compiler, you wouldn&#39;t have to resort to this trick."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1574291080, "post_id": 58964532, "comment_id": 104184573, "body": "Btw, is <code>BitMap</code> a <code>gdcm::Bitmap</code> or ... what is it?"}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1574292545, "post_id": 58964532, "comment_id": 104185048, "body": "I&#39;m in the middle of updating to bcc32c, but not there yet. The VCL got new Synchronize functions for the bcc23c compiler?  The Bitmap class is from the Thirdparty code vendor (camera vendor Allied Vision). I&#39;ll add the code for that, as it is possible there are problems in it, but I can&#39;t tell. Perhaps one could use another Bitmap class?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1574292729, "post_id": 58964532, "comment_id": 104185098, "body": "I see. The new <code>Synchronize</code> accepts a functor, like a lambda, which means you can skip the <code>syncing</code> struct and just place the code directly in the call: <code>TThread::Synchronize( [&amp;]() { ...your code that needs to be synchronized ... });</code>. What about using <code>TBitMap</code> from the VCL?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1574293236, "post_id": 58964532, "comment_id": 104185219, "body": "This would be more correct: <code>TThread::Synchronize(nullptr, [&amp;]{ ... your code ... } );</code>. I forgot the <code>nullptr</code> for the static version."}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1574293323, "post_id": 58964532, "comment_id": 104185238, "body": "I&#39;m loading the Bitmap into a TBitmap, basically after dmping the frames memory into the Bitmap. Not sure how to go from the Frames memory directly into TBitMap, but I would prefer that? Will TBitmap figure out colorcodes, pixelformats etc?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1574293597, "post_id": 58964532, "comment_id": 104185308, "body": "Oh, I have no clue, but from what I remember (I haven&#39;t used it in a long time), TBitMap is a thin wrapper around the WinAPI BITMAP with a lot of convenience functions. It could be worth checking out."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1574297831, "post_id": 58964532, "comment_id": 104186293, "body": "@TotteKarlsson there is no need to use <code>TPicture</code> in this code, just use <code>TBitmap</code> directly. But the code still needs to be synced since <code>TBitmap</code> is not thread safe."}, {"owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1574299074, "post_id": 58964532, "comment_id": 104186576, "body": "@RemyLebeau Thanks, I simplified the code, but still having the same problems.."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1574943118, "post_id": 58964532, "comment_id": 104412130, "body": "my experience is that no win api call related to rendering (GDI) or any visual stuff (windows) can be called outside wnd proc (no matter what). As IIRC VCL is based on winapi/GDI it applies to it too. The symptoms are just like you describe sporadic access violations or even other errors. My experience is that the errors are throwed by winapi calls in unrelated code to one which cause the problems... for example you access some VCL canvas in a thread (like take a screenshot of desktop, or render something to VCL window) and an error pops up 10 minutes latter while calling open file ..."}], "owner": {"reputation": 1304, "user_id": 1927753, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/0f9533437be5bdcf493bfbbd101747a2?s=128&d=identicon&r=PG", "display_name": "Totte Karlsson", "link": "https://stackoverflow.com/users/1927753/totte-karlsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574980696, "creation_date": 1574289723, "last_edit_date": 1574980696, "question_id": 58964532, "link": "https://stackoverflow.com/questions/58964532/painting-video-images-on-a-tpaintbox-in-a-vcl-form", "title": "Painting video images on a TPaintBox in a VCL Form", "body": "<p>I have code that are to paint a BMP image on a TPaintBox on a VCL form in a C++ application.</p>\n\n<p>Everything works fine as long as I only have one image to paint, on one form. When I create a second form, I get sporadic access violations.</p>\n\n<p>The code is called from a thread and I'm using the Synchronize function in order to synchronize with the main VCL thread as this</p>\n\n<pre><code>void TCameraForm::loadImage(FramePtr frame)\n{\n    syncing s;\n    s.aFrame = frame;\n    s.theForm = this;\n\n    //Synchronize with UI thread\n    TThread::Synchronize(0, &amp;s.fn);\n}\n</code></pre>\n\n<p>In the code, a FramePtr is a shared pointer to one individual 'frame', holding a device dependent bitmap.</p>\n\n<p>The syncing variable is a structure, holding the code for the actual painting:</p>\n\n<pre><code>//This is a trick to use VCL's TThread::Synchronize function \"with parameters\"\n//Thanks to Mr. R. Lebeau for sharing this trick.\nstruct syncing\n{\n    FramePtr        aFrame;\n    TCameraForm*    theForm;\n\n    int tag;\n    void __fastcall fn()\n    {\n        try\n        {\n            //Create a device dependent bitmap\n            BitMap aBitMap(aFrame);\n\n            //Get the bitmap memory into a TMemoryStream\n            TMemoryStream* ms = new TMemoryStream();\n            int bytes = ms-&gt;Write(aBitmap.getBuffer()-&gt;mMemoryBuffer, aBitmap.getBuffer()-&gt;mBufferSize);\n            ms-&gt;Position = 0;\n\n            //Create a TPicture object that will be used for drawing on the paintbox\n            TBitmap* tbm = new TBitmap();\n\n            tbm-&gt;LoadFromStream(ms);\n            TRect stretchedRect(getStretchedDimensions(tbm-&gt;Width, tbm-&gt;Height, theForm-&gt;PaintBox1-&gt;Width, theForm-&gt;PaintBox1-&gt;Height));\n            theForm-&gt;PaintBox1-&gt;Canvas-&gt;StretchDraw(stretchedRect, tbm);\n\n            delete ms;\n            delete tbm;\n        }\n        catch(...)\n        {\n            Log(lError) &lt;&lt; \"Exception occured in the CameraFrame sync function\";\n        }\n    }\n};\n</code></pre>\n\n<p>The debugger mainly stops on creation of the bitmap. </p>\n\n<p>I'm using BCC builder 10.3.2 and the classic compiler.</p>\n\n<p>The bitmap class looks like this:</p>\n\n<p>Header</p>\n\n<pre><code>class BitMap \n{\n    public:\n                                BitMap(FramePtr aFrame);\n                                BitMap(unsigned long width, unsigned long height, ColorCode c, ImageMemoryBuffer&amp; buf);\n        ImageMemoryBuffer*      getBuffer();\n                                ~BitMap();\n        bool                    write(const string&amp; file);\n\n    protected:\n        unsigned int            mWidth;\n        unsigned int            mHeight;\n        ColorCode               mColorCode;\n        ImageMemoryBuffer       mImageMemoryBuffer;\n        bool                    create();\n        bool                    release();\n};\n</code></pre>\n\n<p>And CPP:</p>\n\n<pre><code>enum { THREE_CHANNEL    = 0xC,};\nenum { BMP_HEADER_SIZE  = 54, };\nenum { ALIGNMENT_SIZE   = 4, };\n\nnamespace ai\n{\n\nBitMap::BitMap(FramePtr aFrame)\n:\nmWidth(0),\nmHeight(0),\nmColorCode(ColorCodeMono8),\nmImageMemoryBuffer()\n{\n    aFrame-&gt;GetImageSize(mImageMemoryBuffer.mBufferSize);\n    aFrame-&gt;GetWidth(mWidth);\n    aFrame-&gt;GetHeight(mHeight);\n\n    VmbPixelFormatType ePixelFormat = VmbPixelFormatMono8;\n    aFrame-&gt;GetPixelFormat(ePixelFormat);\n    if((ePixelFormat != VmbPixelFormatMono8) &amp;&amp; (ePixelFormat != VmbPixelFormatRgb8))\n    {\n        throw(MVRException(\"Invalid pixel format: \" + toString(ePixelFormat)));\n    }\n\n    mColorCode = (ePixelFormat == VmbPixelFormatRgb8) ? ColorCodeRGB24 : ColorCodeMono8;\n\n    VmbUchar_t *pImage = NULL;\n    if (aFrame-&gt;GetImage(pImage) != VmbErrorSuccess)\n    {\n        throw(MVRException(\"Failed \\\"getting\\\" image\"));\n    }\n\n    mImageMemoryBuffer.mMemoryBuffer = (unsigned char*) pImage;\n    if(!create())\n    {\n        Log(lError) &lt;&lt; \"There was an error creating the bitmap\";\n        throw(MVRException(\"Failed creating Bitmap\"));\n    }\n}\n\nBitMap::BitMap(unsigned long width, unsigned long height, ColorCode c, ImageMemoryBuffer&amp; buf)\n:\nmWidth(width),\nmHeight(height),\nmColorCode(c),\nmImageMemoryBuffer(buf)\n{\n    if(!create())\n    {\n        Log(lError) &lt;&lt; \"There was an error creating the bitmap\";\n        throw(MVRException(\"Failed creating bitmap\"));\n    }\n}\n\nBitMap::~BitMap()\n{\n    if(!release())\n    {\n        Log(lError) &lt;&lt; \"There was an error releasing the bitmap\";\n    }\n}\n\nImageMemoryBuffer* BitMap::getBuffer()\n{\n    return &amp;mImageMemoryBuffer;\n}\n\nbool BitMap::create()\n{\n    try\n    {\n        unsigned char   nNumColors;                     // Number of colors of our image\n        unsigned char   nPadLength;                     // The padding we need to align the bitmap ALIGNMENT_SIZE\n        unsigned long   nPaletteSize = 0;               // The size of the bitmap's palette\n        unsigned long   nHeaderSize;                    // The size of the bitmap's header\n        unsigned long   nFileSize;                      // The size of the bitmap file\n        unsigned char*  pBitmapBuffer;                  // A buffer we use for creating the bitmap\n        unsigned char*  pCurBitmapBuf;                  // A cursor to move over \"pBitmapBuffer\"\n        unsigned char*  pCurSrc;                        // A cursor to move over the given buffer \"pBuffer\"\n        unsigned long   px;                             // A single pixel for storing transformed color information\n        unsigned long   x;                              // The horizontal position within our image\n        unsigned long   y;                              // The vertical position within our image\n        unsigned long   i;                              // Counter for some iteration\n\n        // The bitmap header\n        char fileHeader[14] = { 'B','M',                // Default\n                                0,0,0,0,                // File size\n                                0,0,0,0,                // Reserved\n                                0,0,0,0 };              // Offset to image content\n\n        char infoHeader[40] = { 40,0,0,0,               // Size of info header\n                                0,0,0,0,                // Width\n                                0,0,0,0,                // Height\n                                1,0,                    // Default\n                                0, 0 };                 // bpp\n\n        if ( 0 == mImageMemoryBuffer.mBufferSize || 0 == mWidth || 0 == mHeight )\n        {\n            Log(lError) &lt;&lt; \"Zero bitmap buffer, width ot height in Bitmap constructor\";\n            return false;\n        }\n\n        if ( mColorCode == (mColorCode &amp; THREE_CHANNEL) )\n        {\n            nNumColors = 3;\n        }\n        else\n        {\n            nNumColors = 1;\n        }\n\n        // Bitmap padding always is a multiple of four Bytes. If data is not we need to pad with zeros.\n        nPadLength = (mWidth * nNumColors) % ALIGNMENT_SIZE;\n        if ( 0 != nPadLength )\n        {\n            nPadLength = ALIGNMENT_SIZE - nPadLength;\n        }\n\n        if ( ColorCodeRGB24 != mColorCode )\n        {\n            nPaletteSize = 256;\n        }\n\n        nHeaderSize     = BMP_HEADER_SIZE + nPaletteSize * 4;\n        pBitmapBuffer   = (unsigned char*)malloc( nHeaderSize + mImageMemoryBuffer.mBufferSize + (nPadLength * mHeight) );\n        nFileSize       = nHeaderSize + mImageMemoryBuffer.mBufferSize + (nPadLength * mHeight);\n\n        // File size\n        fileHeader[ 2]  = (char)(nFileSize);\n        fileHeader[ 3]  = (char)(nFileSize &gt;&gt; 8);\n        fileHeader[ 4]  = (char)(nFileSize &gt;&gt; 16);\n        fileHeader[ 5]  = (char)(nFileSize &gt;&gt; 24);\n\n        // Offset to image content\n        fileHeader[10]  = (char)(nHeaderSize);\n        fileHeader[11]  = (char)(nHeaderSize &gt;&gt; 8);\n        fileHeader[12]  = (char)(nHeaderSize &gt;&gt; 16);\n        fileHeader[13]  = (char)(nHeaderSize &gt;&gt; 24);\n\n        // Width\n        infoHeader[ 4]  = (char)(mWidth);\n        infoHeader[ 5]  = (char)(mWidth &gt;&gt; 8);\n        infoHeader[ 6]  = (char)(mWidth &gt;&gt; 16);\n        infoHeader[ 7]  = (char)(mWidth &gt;&gt; 24);\n\n        // Height (has to be negative for a top down image)\n        infoHeader[ 8]  = (char)(-(long)mHeight);\n        infoHeader[ 9]  = (char)(-(long)mHeight &gt;&gt; 8);\n        infoHeader[10]  = (char)(-(long)mHeight &gt;&gt; 16);\n        infoHeader[11]  = (char)(-(long)mHeight &gt;&gt; 24);\n\n        // bpp\n        infoHeader[14]  = 8 * nNumColors;\n\n        // Image size\n        infoHeader[20]  = (char)(mImageMemoryBuffer.mBufferSize);\n        infoHeader[21]  = (char)(mImageMemoryBuffer.mBufferSize &gt;&gt; 8);\n        infoHeader[22]  = (char)(mImageMemoryBuffer.mBufferSize &gt;&gt; 16);\n        infoHeader[23]  = (char)(mImageMemoryBuffer.mBufferSize &gt;&gt; 24);\n\n        // Palette size\n        infoHeader[32]  = (char)(nPaletteSize);\n        infoHeader[33]  = (char)(nPaletteSize &gt;&gt; 8);\n        infoHeader[34]  = (char)(nPaletteSize &gt;&gt; 16);\n        infoHeader[35]  = (char)(nPaletteSize &gt;&gt; 24);\n\n        // Used colors\n        infoHeader[36]  = (char)(nPaletteSize);\n        infoHeader[37]  = (char)(nPaletteSize &gt;&gt; 8);\n        infoHeader[38]  = (char)(nPaletteSize &gt;&gt; 16);\n        infoHeader[39]  = (char)(nPaletteSize &gt;&gt; 24);\n\n        // Write header\n        pCurBitmapBuf   = pBitmapBuffer;\n        memcpy(pCurBitmapBuf, fileHeader, 14);\n\n        pCurBitmapBuf += 14;\n        memcpy(pCurBitmapBuf, infoHeader, 40);\n\n        pCurBitmapBuf += 40;\n        for(i = 0; i &lt; nPaletteSize; ++i)\n        {\n            pCurBitmapBuf[0] = (char)(i);\n            pCurBitmapBuf[1] = (char)(i);\n            pCurBitmapBuf[2] = (char)(i);\n            pCurBitmapBuf[3] = 0;\n            pCurBitmapBuf += 4;\n        }\n\n        // RGB -&gt; BGR (a Windows bitmap is BGR)\n        if(mColorCode == ColorCodeRGB24)\n        {\n            pCurSrc = (unsigned char*) mImageMemoryBuffer.mMemoryBuffer;\n            for(y=0; y &lt; mHeight; ++y, pCurBitmapBuf += nPadLength )\n            {\n                for (x = 0; x &lt; mWidth; ++x, pCurSrc += 3, pCurBitmapBuf += 3)\n                {\n                    px = 0;\n                    // Create a 4 Byte structure to store ARGB (we don't use A)\n                    px = px | (pCurSrc[0] &lt;&lt; 16) | (pCurSrc[1] &lt;&lt; 8) | pCurSrc[2];\n                    // Due to endianess ARGB is stored as BGRA\n                    // and we only have to write the first three Bytes\n                    memcpy( pCurBitmapBuf, &amp;px, 3 );\n                }\n\n                // Add padding at the end of each row\n                memset( pCurBitmapBuf, 0, nPadLength );\n            }\n            mColorCode = ColorCodeBGR24;\n        }\n        // Mono8\n        else\n        {\n            if(nPadLength == 0)\n            {\n                memcpy( pCurBitmapBuf, mImageMemoryBuffer.mMemoryBuffer, mImageMemoryBuffer.mBufferSize );\n            }\n            else\n            {\n                pCurSrc = (unsigned char*)mImageMemoryBuffer.mMemoryBuffer;\n                for (y=0; y &lt; mHeight; ++y, pCurSrc += mWidth * nNumColors)\n                {\n                    // Write a single row of colored pixels\n                    memcpy( pCurBitmapBuf, pCurSrc, mWidth * nNumColors );\n                    pCurBitmapBuf += mWidth * nNumColors;\n\n                    // Write padding pixels\n                    memset(pCurBitmapBuf, 0, nPadLength);\n                    pCurBitmapBuf += nPadLength;\n                }\n            }\n        }\n\n        mImageMemoryBuffer.mMemoryBuffer = pBitmapBuffer;\n        mImageMemoryBuffer.mBufferSize = nFileSize;\n        return true;\n    }\n    catch(...)\n    {\n        Log(lError) &lt;&lt; \"Exception in creation of bitmap create function\";\n        return false;\n    }\n}\n\nbool BitMap::release()\n{\n    try\n    {\n        if (mImageMemoryBuffer.mMemoryBuffer != NULL &amp;&amp; mImageMemoryBuffer.mBufferSize &gt; 0)\n        {\n            free(mImageMemoryBuffer.mMemoryBuffer);\n            mImageMemoryBuffer.mMemoryBuffer = NULL;\n        }\n        return true;\n    }\n    catch(...)\n    {\n        return false;\n    }\n}\n\nbool BitMap::write(const string&amp; fName)\n{\n    if (mImageMemoryBuffer.mMemoryBuffer == NULL)\n    {\n        return false;\n    }\n\n    FILE *file = fopen(fName.c_str(), \"wb\");\n    if(!file)\n    {\n        Log(lError) &lt;&lt; \"Failed opening file: \" &lt;&lt; fName;\n        return false;\n    }\n\n    fwrite(mImageMemoryBuffer.mMemoryBuffer, 1, mImageMemoryBuffer.mBufferSize, file );\n    fclose(file);\n    return true;\n}\n\n}\n</code></pre>\n\n<p>UPDATE: The above code works fine when executed by one thread. The problem occurs when several threads are involved. I have located the problem happening when the memcpy function is called in the creation of the bitmap (not the TBitmap), supporting this. So main problem is that the same memory is being manipulated by two or more threads at the same time. </p>\n\n<p>For the above code, where would it be appropriate to incorporate a Mutex, in order to prevent the memory corruption? Or could one use another technique?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 4, "creation_date": 1574289248, "post_id": 58964397, "comment_id": 104183879, "body": "I&#39;d recommend using <a href=\"https://en.cppreference.com/w/cpp/algorithm/random_shuffle\" rel=\"nofollow noreferrer\"><code>std::shuffle</code></a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1574290364, "post_id": 58964397, "comment_id": 104184269, "body": "Unrelated Recommended reading: <a href=\"https://stackoverflow.com/questions/7343833/srand-why-call-it-only-once\">srand() \u2014 why call it only once?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12406858, "user_type": "registered", "profile_image": "https://graph.facebook.com/2510887182336580/picture?type=large", "display_name": "Jonah", "link": "https://stackoverflow.com/users/12406858/jonah"}, "edited": false, "score": 0, "creation_date": 1574718039, "post_id": 58964625, "comment_id": 104323498, "body": "I appreciate the response though I do not understand what it means to abstract the &quot;Card&quot; to a class. Does that mean create a class &quot;Card&quot; instead of having a string array?"}], "tags": [], "owner": {"reputation": 11, "user_id": 8281511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67bbe87733abb0af80916d448d59337d?s=128&d=identicon&r=PG&f=1", "display_name": "kaoao", "link": "https://stackoverflow.com/users/8281511/kaoao"}, "is_accepted": false, "score": 0, "last_activity_date": 1574782646, "last_edit_date": 1574782646, "creation_date": 1574290222, "answer_id": 58964625, "question_id": 58964397, "link": "https://stackoverflow.com/questions/58964397/c-how-do-i-go-about-setting-a-point-in-a-string-array-to-an-enum-variable/58964625#58964625", "title": "C++ How do I go about setting a point in a string array to an enum variable", "body": "<p>Your first issue here is that you are attempting to reference the enum values of <code>Suites</code> and <code>Value</code> incorrectly. <code>Value[0]</code> will not compile, but <code>Value::two</code> will. Since this is not an enum class, <code>0</code> is also equivalent to <code>Value::two</code> (just as <code>1</code> is equivalent to <code>Value::three</code>).</p>\n\n<p>Without solving the other issues in the code (like <code>sCount</code> and <code>vCount</code> not being bounded by the size of <code>Suits</code> and <code>Value</code>), you can try <code>deck[rand() % 52] = static_cast&lt;char&gt;(sCount + vCount)</code>.</p>\n\n<p>However, I do strongly recommend you abstract the \"Card\" to a class instead of using <code>std::string</code> (see below).</p>\n\n<pre><code>class Card {\n ...\n};\n\nclass DeckOfCards{\nprivate:\n    Card deck[52]; &lt;-- Deck of \"Cards\"\n    ...\n};\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12406858, "user_type": "registered", "profile_image": "https://graph.facebook.com/2510887182336580/picture?type=large", "display_name": "Jonah", "link": "https://stackoverflow.com/users/12406858/jonah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574782646, "creation_date": 1574289048, "question_id": 58964397, "link": "https://stackoverflow.com/questions/58964397/c-how-do-i-go-about-setting-a-point-in-a-string-array-to-an-enum-variable", "title": "C++ How do I go about setting a point in a string array to an enum variable", "body": "<p>So what I am attempting to do is randomly populate a string array with a deck of cards. I am attempting to do this by \"randomly\" creating a number between 0-51 so that my array at that location will equal that enum suit followed by the enum value. So looking at my code you can see that the way I am setting the value in my array will cause an error. How do I go about accomplishing this while keeping the enumeration? </p>\n\n<pre><code>class DeckOfCards{\nprivate:\n    string deck[52];\n    int sCount = 0;\n    int vCount = 0;\n    enum Suits{hearts, diamonds, clubs, spades};\n    enum Value{two, three, four, five, six, seven, eight, nine, ten, jack, queen, king, ace};\npublic:\n    DeckOfCards(){\n        deck[52];\n    }\n    void shuffle(DeckOfCards noShuff){\n        srand(time(nullptr));\n        for(int i = 0; i &lt; 52; i++){\n            deck[rand() % 52] = Suits[sCount] + Value[vCount];\n            sCount++;\n            vCount++;\n        }\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "sockets", "tcp"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574289750, "post_id": 58964389, "comment_id": 104184058, "body": "<i>The second thought was to create a socket for every variable I got, with a different Port. But I&#39;m not quite sure if that isn&#39;t a dirty programming behavior.</i> Beyond dirty and into the unmanagable. The big string is probably the easiest. Start with easiest and see if it is fast enough. If it isn&#39;t you&#39;ll probably know enough about the problem to make a much better-defined question."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1574290569, "post_id": 58964389, "comment_id": 104184353, "body": "You don&#39;t send several variables simultaneously. That&#39;s not how network works. Normally people serialize the data, send it, and then deserialize. Sometimes multiple ports are used, but this is for specifing the receiver."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1574293988, "post_id": 58964389, "comment_id": 104185383, "body": "Just search for Google protobuff. Consider using it. If not a least consider its design."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 8293848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-O8jgQk1fmuA/AAAAAAAAAAI/AAAAAAAAAP0/n2RlPWVl00c/photo.jpg?sz=128", "display_name": "Hayati Gonultas", "link": "https://stackoverflow.com/users/8293848/hayati-gonultas"}, "is_accepted": false, "score": 0, "last_activity_date": 1574809019, "creation_date": 1574809019, "answer_id": 59060615, "question_id": 58964389, "link": "https://stackoverflow.com/questions/58964389/visual-studio-c-how-to-send-more-than-one-value-with-tcp-socket/59060615#59060615", "title": "Visual Studio (C++): How to send more than one value with TCP socket?", "body": "<p>Before answering this question, we need to be aligned with some concepts.</p>\n\n<p>TCP is a stream protocol. It's like you're accessing a regular file, but socket API encapsulates many complex tasks from users. When you do a write on a socket, you always append to this socket's TCP stream. So accessing the same socket from two different threads will not give you what you want, instead two different atomic data segments added to TCP stack (you have just made 2 append operation to the stream).</p>\n\n<p>\"sending at the same time\" may have 2 different meanings:</p>\n\n<p><strong>i) sending the variables at the same TCP session.</strong></p>\n\n<p>In this case, TCP session is no different than writing to a binary file. This is rather a serialization problem than a network protocol problem in that case. You have many options:</p>\n\n<p>a) convert everything to the string representation and send this buffer (fairly slow and inefficient). This is the simplest method. You also need some additional protocol to handle written data as you mentioned (adding @ in between). JSON or XML are good examples of that.</p>\n\n<p>b) if you know the exact order to write and read (encode/decode) just write ints, char arrays, shorts, longs as binary (hey float and double serialization may not be that straightforward). Decoder will read binary data in the exact same order. Remember to convert network byte-order if you pick this solution.</p>\n\n<p><strong>ii) sending the variables simultaneously</strong></p>\n\n<p>If you really want to send many variables at the same time (i mean almost simultaneously), then you'd better to have many threads and many sockets at that case. Maybe you are reading integer sensor data from one sensor which creates thousands of integer in a second, and double values from another sensor. The meaning of simultaneously here is that you do not have to wait for reading the whole bunch of integers to read doubles or vice versa. This also saves encoding/decoding time.</p>\n"}], "owner": {"reputation": 1, "user_id": 12373842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59ac4f5da569ddeae83cc027b3c3094d?s=128&d=identicon&r=PG&f=1", "display_name": "Cptain_Whitebeard", "link": "https://stackoverflow.com/users/12373842/cptain-whitebeard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574809019, "creation_date": 1574289011, "question_id": 58964389, "link": "https://stackoverflow.com/questions/58964389/visual-studio-c-how-to-send-more-than-one-value-with-tcp-socket", "title": "Visual Studio (C++): How to send more than one value with TCP socket?", "body": "<p>it's probably a pretty basic question, but I couldn't really find something online so I hope you can help me out here!:)</p>\n\n<p>I'm currently working with C++ in Visual Studio and I'm trying to send different variables via TCP Connection at the same time. But I'm not quite sure, what the best way to do it would lookn' like.</p>\n\n<p>I was thinking about sending a long string at once with all variables and between every variable there could be a symbol which shows the end of the variable, just like:</p>\n\n<p>123.45@16.45@33@true@.....</p>\n\n<p>but the programm has to run as fast as possible. A algorithm which sorts every income variables doesn't sound pretty efficient, does it?</p>\n\n<p>The second thought was to create a socket for every variable I got, with a different Port. But I'm not quite sure if that isn't a dirty programming behavior. </p>\n\n<p>So what do you think? Any ideas/experiences?</p>\n\n<p>Thanks in Advance!</p>\n"}, {"tags": ["c++", "windows", "multithreading", "numa"], "owner": {"reputation": 1023, "user_id": 613979, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e8fa574f5c9df1a9ca8afe0249a4cc8e?s=128&d=identicon&r=PG", "display_name": "Tyson", "link": "https://stackoverflow.com/users/613979/tyson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574288979, "creation_date": 1574288979, "question_id": 58964380, "link": "https://stackoverflow.com/questions/58964380/windows-can-a-processs-main-thread-switch-between-numa-nodes-while-running", "title": "Windows: can a process&#39;s main thread switch between NUMA nodes while running?", "body": "<p>I'm writing a c++ library that will be read as a DLL by another (3rd party) application. </p>\n\n<p>I would like to set the affinity of the threads in my library's threadpool to the same NUMA node as the application's main thread. That way all threads operate within the same NUMA node and I get the most efficient memory access/allocations across all threads. </p>\n\n<p>My current process is as follows: get the NUMA node the main thread is running on, find all cores within that node, then set my threadpool threads' affinity to those cores.</p>\n\n<p>The main question is whether or not the application's main thread can switch between NUMA nodes at will...there's no point in me matching my threads' NUMA affinity to the main thread's NUMA node, if the main thread can change which node it's on a moment later. </p>\n\n<p>Would the application as a whole have to have its NUMA affinity restrained in order to ensure no node-jumping occurs? Or are threads guaranteed to stick with whatever NUMA node they're initially spawned on? I know the OS scheduler can cause threads can jump between cores, but I can't find any info about whether threads can jump between NUMA nodes...</p>\n"}, {"tags": ["c++", "initializer-list"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1574289306, "post_id": 58964364, "comment_id": 104183896, "body": "After fixing a couple unrelated errors, <a href=\"https://godbolt.org/z/sC4Gqp\" rel=\"nofollow noreferrer\">I cannot reproduce</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574289490, "post_id": 58964364, "comment_id": 104183970, "body": "A note on those unrelated errors Nathan Oliver mentions: You&#39;re going to have to work a bit harder to get those initializer lists into the arrays."}, {"owner": {"reputation": 1, "user_id": 11313339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5ae7afb1c4104c7c9fd75f141bd8c3?s=128&d=identicon&r=PG&f=1", "display_name": "Fireborn", "link": "https://stackoverflow.com/users/11313339/fireborn"}, "edited": false, "score": 0, "creation_date": 1574290435, "post_id": 58964364, "comment_id": 104184296, "body": "You&#39;re right, I fixed that up locally - I had forgotten I had put in an attempt to alias my vector data for Vector2 and Vector3.  Added that code in above."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1574290461, "post_id": 58964364, "comment_id": 104184307, "body": "Do note that using unions like you want to is undefined behavior.  Most/all implementations will &quot;do the right thing&quot;, but you have no guarantee that it will."}], "owner": {"reputation": 1, "user_id": 11313339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e5ae7afb1c4104c7c9fd75f141bd8c3?s=128&d=identicon&r=PG&f=1", "display_name": "Fireborn", "link": "https://stackoverflow.com/users/11313339/fireborn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574290363, "creation_date": 1574288881, "last_edit_date": 1574290363, "question_id": 58964364, "link": "https://stackoverflow.com/questions/58964364/nested-initializer-list-initialization-failing-when-i-switch-from-basic-array-ty", "title": "nested initializer_list initialization failing when I switch from basic array types to custom types", "body": "<p>I'm building a generic mathematical vector class for fun and I'm not sure what is wrong with my interface that this initializer_list usage breaks down:</p>\n\n<pre><code>struct Vertex {\n    // Compiles and works fine with these two lines\n    //float pos[2];\n    //float color[3];\n\n    // Does not compile with these lines\n    Vector2 pos;\n    Vector3 color;\n};\n\nconst std::vector&lt;Vertex&gt; vertices = {\n    { {  0.0f, -0.5f }, { 1.0f, 1.0f, 1.0f } },\n    { {  0.5f,  0.5f }, { 1.0f, 1.0f, 0.0f } },\n    { { -0.5f,  0.5f }, { 1.0f, 0.1f, 0.0f } }\n};\n</code></pre>\n\n<p>Core vector implementation bits:</p>\n\n<pre><code>template &lt;int size&gt;\nclass Vector\n{\npublic:\n    Vector(const std::initializer_list&lt;float&gt;&amp; values) : _data(values) {}\n\n    Vector&lt;size&gt;&amp; operator=(const std::initializer_list&lt;float&gt;&amp; values)\n    {\n        _data = values;\n        return *this;\n    }\n\n    // Code compiles again if I make this array public\nprivate:\n    float _data[size];\n};\n\ntypedef Vector&lt;2&gt; Vector2;\ntypedef Vector&lt;3&gt; Vector3;\n</code></pre>\n\n<p>The error I'm receiving (building with VS2019):</p>\n\n<pre><code>error C2440: 'initializing': cannot convert from 'initializer list' to 'std::vector&lt;Vertex,std::allocator&lt;_Ty&gt;&gt;'\nerror C2440:         with\nerror C2440:         [\nerror C2440:             _Ty=Vertex\nerror C2440:         ]\nmessage : No constructor could take the source type, or constructor overload resolution was ambiguous\n</code></pre>\n\n<p>EDIT</p>\n\n<p>As someone pointed out this actually does compile - I forgot I had attempted to alias the standard vector types:</p>\n\n<pre><code>template &lt;&gt; \nclass Vector&lt;2&gt; \n{ \n    union \n    { \n        float _data[2];\n        struct \n        { \n            float X, Y; \n        }; \n    }; \n};\n\ntemplate &lt;&gt;\nclass Vector&lt;3&gt;\n{\n    union\n    {\n        float _data[3];\n        struct\n        {\n            float X, Y, Z;\n        };\n        struct\n        {\n            float R, G, B;\n        };\n    };\n};\n</code></pre>\n\n<p>It looks like this was causing the error although I'm not sure the proper way to do this aliasing just yet...</p>\n"}, {"tags": ["c++", "gcc", "dll", "mingw", "dllimport"], "answers": [{"tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": true, "score": 1, "last_activity_date": 1574289037, "creation_date": 1574289037, "answer_id": 58964394, "question_id": 58964333, "link": "https://stackoverflow.com/questions/58964333/error-following-simple-c-dll-tutorial-with-mingw/58964394#58964394", "title": "Error following simple c++ DLL tutorial with mingw", "body": "<p>The linking process is separate from the compilation process. You have provided the library which contains the compiled definition of <code>hello</code> used in the linking process.</p>\n\n<p>But during the compilation process, which happens before linking, the libraries are not used in any way. In order for the compiler to know what <code>hello</code> is, you need to still declare that function.</p>\n\n<p>This is usually done by putting a forward-declaration in a header file shared by <code>main.cpp</code> and <code>mydll.cpp</code>.</p>\n\n<pre><code>// mydll.h\n\n#ifndef HEADER_GUARD_MYDLL_H\n#define HEADER_GUARD_MYDLL_H\n\nvoid hello();\n\n#endif\n</code></pre>\n\n<p>Then <code>#include \"mydll.h\"</code> in both <code>main.cpp</code> and <code>mydll.cpp</code>.</p>\n"}], "owner": {"reputation": 59, "user_id": 12351888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5669b0ffba1d6e0a7448219bacf7400f?s=128&d=identicon&r=PG&f=1", "display_name": "ayfkly", "link": "https://stackoverflow.com/users/12351888/ayfkly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 1, "accepted_answer_id": 58964394, "answer_count": 1, "score": 0, "last_activity_date": 1574289037, "creation_date": 1574288717, "question_id": 58964333, "link": "https://stackoverflow.com/questions/58964333/error-following-simple-c-dll-tutorial-with-mingw", "title": "Error following simple c++ DLL tutorial with mingw", "body": "<p>I was following \"Building and Using DLLs\" tutorial from <a href=\"https://cygwin.com/cygwin-ug-net/dll.html\" rel=\"nofollow noreferrer\">https://cygwin.com/cygwin-ug-net/dll.html</a>.\nI've made mydll.cpp file:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid hello()\n{\n    std::cout &lt;&lt; \"Hello World of DLL\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>compiled and linked it:</p>\n\n<pre><code>g++ -c mydll.cpp\ng++ -shared -o mydll.dll mydll.o\n</code></pre>\n\n<p>then tried to use hello() function in main.cpp:</p>\n\n<pre><code>int main ()\n{\n  hello ();\n}  \n</code></pre>\n\n<p>after linking with <code>g++ -o main main.cpp -L./ -l mydll</code> and got:</p>\n\n<pre><code> error: 'hello' was not declared in this scope\n hello();\n</code></pre>\n\n<p>The tutorial states that everything should work just fine. What am I missing?</p>\n"}, {"tags": ["c++", "algorithm", "data-structures", "red-black-tree", "red-black-tree-insertion"], "owner": {"reputation": 21, "user_id": 12334609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79f089e6740641599e4112d53365aa25?s=128&d=identicon&r=PG&f=1", "display_name": "greenbanzai", "link": "https://stackoverflow.com/users/12334609/greenbanzai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574289442, "creation_date": 1574288583, "last_edit_date": 1574289442, "question_id": 58964309, "link": "https://stackoverflow.com/questions/58964309/c-red-black-tree-color-violation-fixup-after-insertion-doesnt-work-properly", "title": "C++, Red Black Tree, Color violation fixup after insertion doesn&#39;t work properly", "body": "<p>I'm implementing a Red Black Tree in C++ and I'm stuck on fixing color violations after insertion.</p>\n\n<p>My left and right rotations seem to work fine but the colors in right branches of the tree are never getting fixed correctly. I think I covered all the cases in my fixViolation(Node*n) method but maybe I'm wrong. </p>\n\n<p>I will also appreciate all other advice and tips on my code. <a href=\"https://pastebin.com/5vriD0SS\" rel=\"nofollow noreferrer\">pastebin link to my code</a></p>\n\n<p>My code:</p>\n\n<pre><code>    #include \"pch.h\"\n    #include &lt;iostream&gt;\n    #include &lt;random&gt;\n    #include &lt;string&gt;\n    #include &lt;functional&gt;\n    using namespace std;\n\nenum Color { Black, Red };\n\ntemplate&lt;typename T&gt;\nclass RBTree;\n\ntemplate &lt;typename T&gt;\nclass Node\n{\n    friend class RBTree&lt;T&gt;;\n    T data;\n    Color color;\n    Node* parent;\n    Node* leftChild;\n    Node* rightChild;\npublic:\n    Node()\n    {\n        this-&gt;parent = nullptr;\n        this-&gt;leftChild = nullptr;\n        this-&gt;rightChild = nullptr;\n        color = Red;\n    }\n    void gibColor(Node&lt;T&gt;*x)\n    {\n        if (x-&gt;color == Black)\n            cout &lt;&lt; \"black\";\n        else\n            cout &lt;&lt; \"red\";\n    }\n};\n\ntemplate &lt;typename T&gt;\nclass RBTree\n{\n    Node&lt;T&gt;* root;\n    int size;\npublic:\n    RBTree()\n    {\n        root = nullptr;\n        size = 1;\n    }\n\n    void leftRotate(Node&lt;T&gt;*child, Node&lt;T&gt;*parent)\n    {\n        child = parent-&gt;rightChild;\n        parent-&gt;rightChild = child-&gt;leftChild;\n        if (child-&gt;leftChild != nullptr)\n        {\n            child-&gt;leftChild-&gt;parent = parent;\n        }\n\n        child-&gt;parent = parent-&gt;parent;\n        if (parent-&gt;parent == nullptr)\n        {\n            root = child;\n        }\n        else if (parent == parent-&gt;parent-&gt;leftChild)\n        {\n            parent-&gt;parent-&gt;leftChild = child;\n        }\n        else {\n            parent-&gt;parent-&gt;rightChild = child;\n        }\n\n        child-&gt;leftChild = parent;\n        parent-&gt;parent = child;\n    }\n    void rightRotate(Node&lt;T&gt;*child, Node&lt;T&gt;*parent)\n    {\n        child = parent-&gt;leftChild;\n        parent-&gt;leftChild = child-&gt;rightChild;\n        if (child-&gt;rightChild != nullptr)\n        {\n            child-&gt;rightChild-&gt;parent = parent;\n        }\n        child-&gt;parent = parent-&gt;parent;\n        if (parent-&gt;parent == nullptr)\n        {\n            root = child;\n        }\n        else if (parent == parent-&gt;parent-&gt;rightChild)\n        {\n            parent-&gt;parent-&gt;rightChild = child;\n        }\n        else\n        {\n            parent-&gt;parent-&gt;leftChild = child;\n        }\n\n        child-&gt;rightChild = parent;\n        parent-&gt;parent = child;\n        }\n        void fixViolation(Node&lt;T&gt;*n)\n        {\n            Node&lt;T&gt;*grandparent;\n            Node&lt;T&gt;*parent;\n            //Node&lt;T&gt;*uncle;\n            parent = n-&gt;parent;\n            while (parent != nullptr&amp;&amp; parent-&gt;color == Red)\n            {\n            Node&lt;T&gt;*uncle;\n            grandparent = n-&gt;parent-&gt;parent;\n            if (grandparent-&gt;leftChild == parent)\n            {\n                uncle = grandparent-&gt;rightChild;\n                if (uncle != nullptr&amp;&amp;uncle-&gt;color == Red)\n                {\n                    parent-&gt;color = Black;\n                    uncle-&gt;color = Black;\n                    grandparent-&gt;color = Red;\n                    n = grandparent;\n                    parent = n-&gt;parent;\n                }\n                else\n                {\n                    if (parent-&gt;rightChild == n)\n                    {\n                        n = parent;\n                        leftRotate(n-&gt;parent, n);\n                    }\n\n                    parent-&gt;color = Black;\n                    grandparent-&gt;color = Red;\n                    rightRotate(parent, grandparent);\n                }\n            }\n            else\n            {\n                uncle = grandparent-&gt;leftChild;\n                if (uncle != nullptr&amp;&amp;uncle-&gt;color == Red)\n                {\n                    uncle-&gt;color = Black;\n                    parent-&gt;color = Black;\n                    grandparent-&gt;color = Red;\n                    n = grandparent;\n                    parent = n-&gt;parent;\n                }\n                else\n                {\n                    if (parent-&gt;leftChild == n)\n                    {\n                        n = parent;\n                        rightRotate(n-&gt;parent, n);\n                    }\n\n                    parent-&gt;color = Black;\n                    grandparent-&gt;color = Red;\n                    leftRotate(parent, grandparent);\n                }\n            }\n        }\n        root-&gt;color = Black;\n    }\n\n\n    void addElement(T el)\n    {\n        Node&lt;T&gt;*n = new Node&lt;T&gt;();\n        n-&gt;data = el;\n        n-&gt;leftChild = nullptr;\n        n-&gt;rightChild = nullptr;\n        n-&gt;color = Red;\n        Node&lt;T&gt;*temp = this-&gt;root;\n        Node&lt;T&gt;*y = nullptr;\n        if (root == nullptr)\n        {\n            n-&gt;color = Black;\n            root = n;\n        }\n        else\n        {\n            while (temp != nullptr)\n            {\n                y = temp;\n                if (temp-&gt;data &lt; n-&gt;data)\n                {\n                    temp = temp-&gt;rightChild;\n                }\n                else\n                {\n                    temp = temp-&gt;leftChild;\n                }\n            }\n            n-&gt;parent = y;\n            if (y-&gt;data == n-&gt;data)\n            {\n                cout &lt;&lt; \"Duplikaty won!\" &lt;&lt; endl;\n                return;\n            }\n            if (y-&gt;data &lt; n-&gt;data)\n            {\n                y-&gt;rightChild = n;\n                size = size + 1;\n            }\n            else\n            {\n                y-&gt;leftChild = n;\n                size = size + 1;\n            }\n            //InsertFixUp(n);\n            fixViolation(n);\n        }\n\n    }\n    void print(Node&lt;T&gt;*x)\n    {\n\n        //cout &lt;&lt; \"size: \" &lt;&lt; size &lt;&lt; endl;\n        if (x == nullptr)\n        {\n            return;\n        }\n        if (x-&gt;parent == nullptr)\n        {\n            cout &lt;&lt; \"(\" &lt;&lt; x-&gt;data &lt;&lt; \")\";\n            cout &lt;&lt; \"[\" &lt;&lt; \"kolor:\";\n            x-&gt;gibColor(x);\n            cout &lt;&lt; \", parent: NULL,\" &lt;&lt; \" l.child: \";\n            if (x-&gt;leftChild == nullptr)\n            {\n                cout &lt;&lt; \"NIL\";\n            }\n            else\n                cout &lt;&lt; x-&gt;leftChild-&gt;data;\n            cout &lt;&lt; \", r.child: \";\n            if (x-&gt;rightChild == nullptr)\n            {\n                cout &lt;&lt; \"NIL\";\n            }\n            else\n                cout &lt;&lt; x-&gt;rightChild-&gt;data;\n            cout &lt;&lt; \"]\";\n            cout &lt;&lt; \"-root \" &lt;&lt; endl;\n            //rodzic, l.dziecko, p.dziecko\n\n        }\n        else if (x-&gt;parent-&gt;leftChild == x)\n        {\n            //int c = x-&gt;gibColor(x);\n            cout &lt;&lt; \"(\" &lt;&lt; x-&gt;data &lt;&lt; \")\";\n            cout &lt;&lt; \"[\" &lt;&lt; \"kolor:\";\n            x-&gt;gibColor(x);\n            cout &lt;&lt; \", parent: \" &lt;&lt; x-&gt;parent-&gt;data &lt;&lt; \", l.child: \";\n            if (x-&gt;leftChild == nullptr)\n            {\n                cout &lt;&lt; \"NIL\";\n            }\n            else\n                cout &lt;&lt; x-&gt;leftChild-&gt;data;\n            cout &lt;&lt; \", r.child: \";\n            if (x-&gt;rightChild == nullptr)\n            {\n                cout &lt;&lt; \"NIL\" &lt;&lt; \"]\" &lt;&lt; endl;\n            }\n            else\n                cout &lt;&lt; x-&gt;rightChild-&gt;data &lt;&lt; \"]\" &lt;&lt; endl;\n        }\n        else\n        {\n            cout &lt;&lt; \"(\" &lt;&lt; x-&gt;data &lt;&lt; \")\";\n            cout &lt;&lt; \"[\" &lt;&lt; \"kolor:\";\n            x-&gt;gibColor(x);\n            cout &lt;&lt; \", parent: \" &lt;&lt; x-&gt;parent-&gt;data &lt;&lt; \", l.child: \";\n            if (x-&gt;leftChild == nullptr)\n            {\n                cout &lt;&lt; \"NIL\";\n            }\n            else\n                cout &lt;&lt; x-&gt;leftChild-&gt;data;\n            cout &lt;&lt; \", r.child: \";\n            if (x-&gt;rightChild == nullptr)\n            {\n                cout &lt;&lt; \"NIL\" &lt;&lt; \"]\" &lt;&lt; endl;;\n            }\n            else\n                cout &lt;&lt; x-&gt;rightChild-&gt;data &lt;&lt; \"]\" &lt;&lt; endl;\n        }    \n        print(x-&gt;leftChild);\n        print(x-&gt;rightChild);\n\n    }\n    void printTree()\n    {\n\n    if (root == nullptr)\n    {\n        cout &lt;&lt; \"Empty tree!\" &lt;&lt; endl;\n\n    }\n    else\n        print(root);\n    }\n};\nint randomInt()\n{\n    uniform_int_distribution&lt;int&gt; rozklad{ 0, 11000000 };\n    default_random_engine generator{ 11 };\n    function&lt;int()&gt; los{ bind(rozklad, generator) };\n    int l = los();\n    return l;\n}\n\nint main()\n{\n    RBTree&lt;int&gt;* d1 = new RBTree&lt;int&gt;();\n    d1-&gt;addElement(55);\n    d1-&gt;addElement(69);\n    d1-&gt;addElement(62);\n    d1-&gt;addElement(71);\n    d1-&gt;addElement(70);\n    d1-&gt;addElement(14);\n    d1-&gt;printTree();\n}\n</code></pre>\n"}, {"tags": ["c++", "matrix"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1574288564, "post_id": 58964262, "comment_id": 104183654, "body": "&quot;<i>output with out doing a &quot;cout&quot; command for each number.</i>&quot;: That is the correct way to do it. (Assuming of course you mean using <code>cout</code> in a loop as you did in <code>display</code>.) There is no other method. It is not clear to me what you are asking."}, {"owner": {"reputation": 3101, "user_id": 2027196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b1ba74298036dc163149d485268fa4?s=128&d=identicon&r=PG", "display_name": "JohnFilleau", "link": "https://stackoverflow.com/users/2027196/johnfilleau"}, "edited": false, "score": 0, "creation_date": 1574289637, "post_id": 58964262, "comment_id": 104184017, "body": "Do you want to perhaps be able to do something like <code>cout &lt;&lt; &quot;A * B = &quot; &lt;&lt; result &lt;&lt; endl;</code>? Just trying to understand the question a little better."}], "owner": {"reputation": 1, "user_id": 12406834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a75a4945b81ce5f84c81cf7d1e00320?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/12406834/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1574288611, "creation_date": 1574288353, "last_edit_date": 1574288611, "question_id": 58964262, "link": "https://stackoverflow.com/questions/58964262/trying-to-get-my-program-to-display-the-original-matrices", "title": "Trying to get my program to display the original Matrices", "body": "<p>I am relatively new to C++ and I have an assignment that is making perform mathematical operations with matrices. I was able to complete the operations but I can't seem to display the original matrices I inputted into the output with out doing a \"cout\" command for each number. I'm trying to display the original matrices before the answer to the 5 questions.</p>\n\n<p>This is what I have done:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nvoid matrix(int A[3][3], int B[3][3], int result[3][3])\n{\n    for (int i = 0; i &lt; 3; i++)\n    {\n        for (int j = 0; j &lt; 3; j++)\n        {\n            for (int k = 0; k &lt; 3; k++)\n                result[i][j] += (A[i][k] * B[k][j]);\n        }\n    }\n}\nvoid scalar(int A[3][3], int num, int result[3][3])\n{\n    for (int i = 0; i &lt; 3; i++)\n    {\n        for (int j = 0; j &lt; 3; j++)\n        {\n            result[i][j] = A[i][j] * num;\n        }\n    }\n}\nvoid display(int result[3][3])\n{\n    for (int i = 0; i &lt; 3; i++)\n    {\n        for (int j = 0; j &lt; 3; j++)\n            cout &lt;&lt; result[i][j] &lt;&lt; \",\";\n        cout &lt;&lt; endl;\n        ;\n\n    }\n}\nint main()\n{\n    //inputting matrix values\n    int A[3][3]={{13,9,7},{8,7,4},{6,4,0}};\n    int B[3][3]={{1,3,5},{6,2,-3},{2,0,4}};\n    int C[3][3]={{1,0,0},{0,1,0},{0,0,1}};\n    int result[3][3]={{0,0,0},{0,0,0},{0,0,0}};\n\n    //question 1\n    matrix(A,B,result);\n    cout&lt;&lt;\"A * B =\"&lt;&lt;endl;\n    display(result);\n    int result0[3][3]={{0,0,0},{0,0,0},{0,0,0}};\n\n    //question 2\n    matrix(B,A,result0);\n    cout&lt;&lt;\"B * A =\"&lt;&lt;endl;\n    display(result0);\n    int result1[3][3]={{0,0,0},{0,0,0},{0,0,0}};\n\n    //question 3\n    matrix(C,B,result1);\n    cout&lt;&lt;\"C * B =\"&lt;&lt;endl;\n    display(result1);\n    int result2[3][3]={{0,0,0},{0,0,0},{0,0,0}};\n\n    //question 4\n    scalar(A,2,result2);\n    cout&lt;&lt;\"2 * A =\"&lt;&lt;endl;\n    display(result2);\n    int result3[3][3]={{0,0,0},{0,0,0},{0,0,0}};\n\n    //question 5\n    scalar(B,-4,result3);\n    cout&lt;&lt;\"-4 * B =\"&lt;&lt;endl;\n    display(result3);\n    return 0;\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino", "esp32"], "comments": [{"owner": {"reputation": 1527, "user_id": 3518383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GjBCE.jpg?s=128&g=1", "display_name": "Juraj", "link": "https://stackoverflow.com/users/3518383/juraj"}, "edited": false, "score": 0, "creation_date": 1574316064, "post_id": 58964261, "comment_id": 104190715, "body": "why not use the WebServer library?"}], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 10833108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwFrJ.jpg?s=128&g=1", "display_name": "Martin Lukas", "link": "https://stackoverflow.com/users/10833108/martin-lukas"}, "is_accepted": true, "score": 0, "last_activity_date": 1574342047, "creation_date": 1574342047, "answer_id": 58975926, "question_id": 58964261, "link": "https://stackoverflow.com/questions/58964261/getting-data-from-wificlient-esp32-using-wifi-h/58975926#58975926", "title": "Getting data from WiFiClient ESP32 using WiFi.h", "body": "<p>Solved my problem by using </p>\n\n<p>AsyncTCP.h</p>\n\n<p>ESPAsyncWebServer.h</p>\n"}], "owner": {"reputation": 162, "user_id": 10833108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwFrJ.jpg?s=128&g=1", "display_name": "Martin Lukas", "link": "https://stackoverflow.com/users/10833108/martin-lukas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 739, "favorite_count": 0, "accepted_answer_id": 58975926, "answer_count": 1, "score": 0, "last_activity_date": 1574342047, "creation_date": 1574288340, "question_id": 58964261, "link": "https://stackoverflow.com/questions/58964261/getting-data-from-wificlient-esp32-using-wifi-h", "title": "Getting data from WiFiClient ESP32 using WiFi.h", "body": "<p>I've got an ESP32 acting like an access point, running simple page. I've got 2 text input fields there and a button. First of all I open the page, enter some data and then press the send button and I need to be able to get the two strings from the input fields. This is the code I've got so far, but I only get the data back when I refresh the page which is not what I really want and the format looks like this:\n\"GET /?ssid=Ahoj&amp;password=Prdel&amp;SEND=OFF HTTP/1.1\"</p>\n\n<pre><code>String html =\"&lt;!DOCTYPE html&gt; \\\n&lt;html&gt; \\\n&lt;body&gt; \\\n&lt;center&gt;&lt;h1&gt;Configuration Page&lt;/h1&gt;&lt;/center&gt; \\\n&lt;form&gt; \\\n&lt;center&gt;&lt;h3&gt;Wi-Fi SSID&lt;/h3&gt;&lt;/center&gt; \\\n&lt;center&gt;&lt;input type=\\\"text\\\" name=\\\"ssid\\\"&gt;&lt;/center&gt;&lt;br&gt;&lt;br&gt; \\\n&lt;center&gt;&lt;h3&gt;Wi-Fi Password&lt;/h3&gt;&lt;/center&gt; \\\n&lt;center&gt;&lt;input type=\\\"text\\\" name=\\\"password\\\"&gt;&lt;/center&gt; \\\n&lt;center&gt;&lt;button name=\\\"SEND\\\" button style=\\\"color:green\\\" value=\\\"OFF\\\" type=\\\"submit\\\"&gt;SEND&lt;/button&gt;&lt;br&gt;&lt;br&gt;&lt;/center&gt; \\\n&lt;/form&gt; \\\n&lt;/body&gt; \\\n&lt;/html&gt;\";\n\nvoid loop() {\n  WiFiClient webclient = server.available();   // Listen for incoming clients\n\n  if (webclient) {\n    webclient.print(html);\n    Serial.println(\"New Webclient.\");          // print a message out in the serial port\n    while (webclient.connected()) {            // loop while the client's connected\n      if (webclient.available()) {             // if there's bytes to read from the client,\n        Serial.println(\"Read client data : \");\n        Serial.println(webclient.readString());\n    }\n    webclient.stop();\n    Serial.println(\"Webclient disconnected.\");\n    Serial.println(\"\");\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "stdstring"], "comments": [{"owner": {"reputation": 3101, "user_id": 2027196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90b1ba74298036dc163149d485268fa4?s=128&d=identicon&r=PG", "display_name": "JohnFilleau", "link": "https://stackoverflow.com/users/2027196/johnfilleau"}, "edited": false, "score": 0, "creation_date": 1574288535, "post_id": 58964256, "comment_id": 104183646, "body": "What compiler and settings are you using for this? This doesn&#39;t compile for me with gcc and --std=c++11.  *disregard this comment, gcc doesn&#39;t make sense. Needed to g++."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1574289344, "post_id": 58964256, "comment_id": 104183912, "body": "You don&#39;t need <code>&lt;fstream&gt;</code> for <code>std::cout</code> and <code>std::string</code>."}, {"owner": {"reputation": 107, "user_id": 12405796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf818a9dd7a3ba9b67abd3ab11127158?s=128&d=identicon&r=PG&f=1", "display_name": "user526427", "link": "https://stackoverflow.com/users/12405796/user526427"}, "edited": false, "score": 0, "creation_date": 1574362932, "post_id": 58964256, "comment_id": 104216650, "body": "good point. fstream include iostream according to <a href=\"https://stackoverflow.com/questions/2451681/why-do-i-need-to-include-both-the-iostream-and-fstream-headers-to-open-a-file\" title=\"why do i need to include both the iostream and fstream headers to open a file\">stackoverflow.com/questions/2451681/&hellip;</a> which is wrong"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 12405796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf818a9dd7a3ba9b67abd3ab11127158?s=128&d=identicon&r=PG&f=1", "display_name": "user526427", "link": "https://stackoverflow.com/users/12405796/user526427"}, "edited": false, "score": 0, "creation_date": 1574288920, "post_id": 58964286, "comment_id": 104183776, "body": "s[0] was clearly written with the value &#39;A&#39; and read as value &#39;A&#39;, even though string s is empty"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 107, "user_id": 12405796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf818a9dd7a3ba9b67abd3ab11127158?s=128&d=identicon&r=PG&f=1", "display_name": "user526427", "link": "https://stackoverflow.com/users/12405796/user526427"}, "edited": false, "score": 2, "creation_date": 1574289015, "post_id": 58964286, "comment_id": 104183812, "body": "@user526427 That&#39;s called undefined behavior. Anything could happen. Even seemingly correct behavior."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 107, "user_id": 12405796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf818a9dd7a3ba9b67abd3ab11127158?s=128&d=identicon&r=PG&f=1", "display_name": "user526427", "link": "https://stackoverflow.com/users/12405796/user526427"}, "edited": false, "score": 0, "creation_date": 1574289331, "post_id": 58964286, "comment_id": 104183906, "body": "@user526427 it&#39;s like an array <code>int a[2];</code>. In most cases you can write to <code>a[10]</code> and read the correct value from that element. But this causes undefined behavior in your program and it could crash with strange errors."}], "tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": false, "score": 4, "last_activity_date": 1574289482, "last_edit_date": 1574289482, "creation_date": 1574288481, "answer_id": 58964286, "question_id": 58964256, "link": "https://stackoverflow.com/questions/58964256/c-string-question-how-to-access-string-elements/58964286#58964286", "title": "C++ string question - how to access string elements?", "body": "<p>This is undefined behavior. The string <code>s</code> is empty. Until C++11 you can't access <code>s[0]</code>. Since C++11 you can read <code>s[0]</code> but you can't write it.</p>\n\n<p>You could resize the string with</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main() {\n    string s;\n    s.resize(1);\n\n    s[0]='A';\n    cout &lt;&lt; \"s is: \" &lt;&lt; s &lt;&lt; endl\n         &lt;&lt; \"s[0] is: \" &lt;&lt; s[0] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Read <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/operator_at\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/string/basic_string/operator_at</a></p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1574298321, "creation_date": 1574298321, "answer_id": 58965736, "question_id": 58964256, "link": "https://stackoverflow.com/questions/58964256/c-string-question-how-to-access-string-elements/58965736#58965736", "title": "C++ string question - how to access string elements?", "body": "<blockquote>\n  <p>why is s empty</p>\n</blockquote>\n\n<p>Because you default-constructed it, so it is initially empty, and you did not do anything to allocate memory for its character storage. </p>\n\n<blockquote>\n  <p>but s[0] has value of 'A'?</p>\n</blockquote>\n\n<p>It does not. You are assigning <code>'A'</code> to memory that has not been allocated yet.</p>\n\n<blockquote>\n  <p>can C++ strings be assigned values to its elements directly via index?</p>\n</blockquote>\n\n<p>Yes, but only for <em>valid</em> indexes in the range of <code>0..size()-1</code> when <code>size()</code> is > 0. In your example, index 0 is not valid because <code>s.size()</code> is 0.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main() {\n    string s;\n\n    s.resize(1); // &lt;-- add this!\n\n    s[0]='A';\n    cout &lt;&lt; \"s is: \" &lt;&lt; s &lt;&lt; endl\n         &lt;&lt; \"s[0] is: \" &lt;&lt; s[0] &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 12405796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf818a9dd7a3ba9b67abd3ab11127158?s=128&d=identicon&r=PG&f=1", "display_name": "user526427", "link": "https://stackoverflow.com/users/12405796/user526427"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574298321, "creation_date": 1574288318, "last_edit_date": 1574289308, "question_id": 58964256, "link": "https://stackoverflow.com/questions/58964256/c-string-question-how-to-access-string-elements", "title": "C++ string question - how to access string elements?", "body": "<p>I have this simple code in C++:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main() {\n    string s;\n\n    s[0]='A';\n    cout &lt;&lt; \"s is: \" &lt;&lt; s &lt;&lt; endl\n         &lt;&lt; \"s[0] is: \" &lt;&lt; s[0] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>why is s empty but s[0] has value of 'A'? can C++ strings be assigned values to its elements directly via index? Thanks!</p>\n"}, {"tags": ["c++", "function", "vector"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1574287692, "post_id": 58964058, "comment_id": 104183346, "body": "All functions, member functions or not, have access to it via the public member function <code>getMydata()</code>. I don&#39;t get the question really ... As it is right now you could just have made <code>data</code> public."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1574287797, "post_id": 58964058, "comment_id": 104183384, "body": "You&#39;ve answered your own question. Private data is only visible to the owning class, but it can be exposed by public methods and members, such as how you&#39;ve done using <code>myclass::getMyData</code>. Why would you do this? By making the raw data hidden, you can add constraints such as only exposing read-only access (if <code>getMyData</code> returns a <code>const vector&lt;string&gt;&amp;</code>)"}, {"owner": {"reputation": 9, "user_id": 12406798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d2d715cfda428cd3fa04b428d7a530?s=128&d=identicon&r=PG&f=1", "display_name": "theGOATofJOAT", "link": "https://stackoverflow.com/users/12406798/thegoatofjoat"}, "edited": false, "score": 0, "creation_date": 1574289026, "post_id": 58964058, "comment_id": 104183817, "body": "i guess i meant to say in main.cpp how would i access the vector  would i have to i have tried declaring an object like myclass mynewdata; the doing mynewdata.getMydata()[0]; and this does not work."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 0, "creation_date": 1574289512, "post_id": 58964058, "comment_id": 104183977, "body": "Please <a href=\"https://stackoverflow.com/posts/58964058/edit\">edit</a> your question to clarify these details, as well as add your few lines of code from main. What do you mean by <i>it doesn&#39;t work</i>. The code you posted in your comment won&#39;t work because the vector is empty, but it will compile."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 12406798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d2d715cfda428cd3fa04b428d7a530?s=128&d=identicon&r=PG&f=1", "display_name": "theGOATofJOAT", "link": "https://stackoverflow.com/users/12406798/thegoatofjoat"}, "edited": false, "score": 0, "creation_date": 1574288761, "post_id": 58964229, "comment_id": 104183731, "body": "i understand that. I guess what i mean to say is in main.cpp how would access the data?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 0, "last_activity_date": 1574291208, "last_edit_date": 1574291208, "creation_date": 1574288184, "answer_id": 58964229, "question_id": 58964058, "link": "https://stackoverflow.com/questions/58964058/c-vector-declared-private-in-class-but-has-a-get-function/58964229#58964229", "title": "c++ Vector declared private in class but has a get function", "body": "<p>You separate the implementation into a <code>.cpp</code> the same way you do any function:</p>\n\n<pre><code>vector &lt;string&gt;&amp; myClass::getMydata(){\n    return this-&gt;data;\n}\n</code></pre>\n\n<p>The only difference it you'll need to show that you are implementing the one from the class by putting <code>myClass::</code> in front of your implementation.</p>\n\n<p>The compiler will allow a member function to access <code>private</code> data, even if it is defined outside the class definition.</p>\n\n<hr>\n\n<blockquote>\n  <p>i understand that. I guess what i mean to say is in main.cpp how would access the data?</p>\n</blockquote>\n\n<p>Oh, I see. If you want to access it from <code>main()</code>, or some other non-member function, you need to call your getter:</p>\n\n<pre><code>int main() {\n    myclass foo;\n\n    foo.getMydata().push_back(\"We're modifying the vector from main()!\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 12406798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d2d715cfda428cd3fa04b428d7a530?s=128&d=identicon&r=PG&f=1", "display_name": "theGOATofJOAT", "link": "https://stackoverflow.com/users/12406798/thegoatofjoat"}, "edited": false, "score": 0, "creation_date": 1574289259, "post_id": 58964378, "comment_id": 104183884, "body": "thank you i just realized the reason i was getting the undefined error was because i wasnt compiling the appropriate .cpp files"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 9, "user_id": 12406798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d2d715cfda428cd3fa04b428d7a530?s=128&d=identicon&r=PG&f=1", "display_name": "theGOATofJOAT", "link": "https://stackoverflow.com/users/12406798/thegoatofjoat"}, "edited": false, "score": 1, "creation_date": 1574289314, "post_id": 58964378, "comment_id": 104183899, "body": "@theGOATofJOAT You are welcome! I didn&#39;t see any undefined error in the question though?"}, {"owner": {"reputation": 9, "user_id": 12406798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d2d715cfda428cd3fa04b428d7a530?s=128&d=identicon&r=PG&f=1", "display_name": "theGOATofJOAT", "link": "https://stackoverflow.com/users/12406798/thegoatofjoat"}, "edited": false, "score": 0, "creation_date": 1574291254, "post_id": 58964378, "comment_id": 104184641, "body": "what if the vector already has stuff in it, would i still use the instance.getMydata()[0] because as of right now im getting a segment fault"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 9, "user_id": 12406798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d2d715cfda428cd3fa04b428d7a530?s=128&d=identicon&r=PG&f=1", "display_name": "theGOATofJOAT", "link": "https://stackoverflow.com/users/12406798/thegoatofjoat"}, "edited": false, "score": 0, "creation_date": 1574291743, "post_id": 58964378, "comment_id": 104184809, "body": "@theGOATofJOAT If you do, you are most probably accessing the vector out of bounds. Check my update. With 3 elements in the vector, you can access it using the substript operator using 0, 1 or 2."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1574291661, "last_edit_date": 1574291661, "creation_date": 1574288968, "answer_id": 58964378, "question_id": 58964058, "link": "https://stackoverflow.com/questions/58964058/c-vector-declared-private-in-class-but-has-a-get-function/58964378#58964378", "title": "c++ Vector declared private in class but has a get function", "body": "<p><code>the.hpp</code></p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nclass myclass{\nprivate:\n     std::vector&lt;std::string&gt; data;\n\npublic:\n     // put some data in it when it's default constructed\n     myclass() : data{\"hello\", \"world\"} {}\n\n     std::vector&lt;std::string&gt;&amp; getMydata() {\n         return data;\n     }\n};\n</code></pre>\n\n<p><code>main.cpp</code></p>\n\n<pre><code>#include \"the.hpp\"\n#include &lt;iostream&gt;\n\nint main()\n{\n    myclass instance;\n\n    // get reference to the data in the instance\n    std::vector&lt;std::string&gt;&amp; data_ref = instance.getMydata();\n\n    // use the data. data_ref is a reference to exactly the same vector as in \"instance\"\n    data_ref.push_back(\"Someone from the utside was here!\");\n\n    // check result\n    std::cout &lt;&lt; instance.getMydata()[0] &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; instance.getMydata()[1] &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; instance.getMydata()[2] &lt;&lt; \"\\n\";   \n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>hello\nworld\nSomeone from the utside was here!\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12406798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42d2d715cfda428cd3fa04b428d7a530?s=128&d=identicon&r=PG&f=1", "display_name": "theGOATofJOAT", "link": "https://stackoverflow.com/users/12406798/thegoatofjoat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1574291661, "creation_date": 1574287311, "last_edit_date": 1574288341, "question_id": 58964058, "link": "https://stackoverflow.com/questions/58964058/c-vector-declared-private-in-class-but-has-a-get-function", "title": "c++ Vector declared private in class but has a get function", "body": "<p>If I have a class lets say like this in a separate <code>.h</code> file</p>\n\n<pre><code>class myclass{\n  private:\n     vector&lt;string&gt; data;\n  public:\n     vector &lt;string&gt;&amp; getMydata(){\n       return this-&gt;data;\n     }\n};\n</code></pre>\n\n<p>How do I then in separate <code>.cpp</code> access the data in the private vector?</p>\n"}, {"tags": ["c++", "gcc", "visual-c++", "clang"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10064961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb727d7c0041e8973eda928be2bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/10064961/alexander"}, "edited": false, "score": 0, "creation_date": 1574426579, "post_id": 58964200, "comment_id": 104239422, "body": "Hm... I thought, if I do not use function <code>func</code>, then compiler do not instantiates and generate code for that function. <b>&quot;Note that code is instantiated only for template (member) functions that are called. For class templates, member functions are instantiated only if they are used.&quot;</b> - this is quotation from C++ Templates The Complete Guide 2nd edition."}, {"owner": {"reputation": 601, "user_id": 3633976, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iby7E.png?s=128&g=1", "display_name": "markhc", "link": "https://stackoverflow.com/users/3633976/markhc"}, "reply_to_user": {"reputation": 33, "user_id": 10064961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb727d7c0041e8973eda928be2bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/10064961/alexander"}, "edited": false, "score": 0, "creation_date": 1574428583, "post_id": 58964200, "comment_id": 104240460, "body": "It is true that the template will not be instantiated, but it still needs to be a valid function template declaration. In this case it will not be, the declaration is ill-formed. You can have invalid code in the <i>body</i> of a template function that is not called, but not on its declaration (unless SFINAE applies, and in this case it does not because there is no substitution)."}], "tags": [], "owner": {"reputation": 601, "user_id": 3633976, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iby7E.png?s=128&g=1", "display_name": "markhc", "link": "https://stackoverflow.com/users/3633976/markhc"}, "is_accepted": true, "score": 2, "last_activity_date": 1574288409, "last_edit_date": 1574288409, "creation_date": 1574288037, "answer_id": 58964200, "question_id": 58964040, "link": "https://stackoverflow.com/questions/58964040/when-c-instantiating-method/58964200#58964200", "title": "When c++ instantiating method?", "body": "<p>GCC and Clang are correct here.</p>\n\n<p>When you write <code>Test&lt;0&gt;</code> that will substitute <code>N</code> with 0. In the declaration of <code>func</code> the <code>std::enable_if_t</code> will try to access the member <code>::type</code> which does not exist. That's an error because that member does not exist and you cannot have a declaration as such. </p>\n\n<p>The way that SFINAE works is that, <strong>during overload resolution</strong>, when the compiler performs template argument deduction, if the substitution of an argument in the template fails, you don't get an error and the function is discarded from the potential overload set. On your example, there is no template argument deduction. N is already known from the class template and because of that the declaration of <code>func</code> is ill-formed before overload resolution even begins.</p>\n\n<p>A potential workaround for your use case is this:</p>\n\n<pre><code>template&lt;int M = N, typename = std::enable_if_t&lt;M == 1, bool&gt;&gt;\nvoid func()\n{\n    std::cout &lt;&lt; \"Test::func\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>That way, <code>func</code> now depends on a function template argument, <code>M</code>, and SFINAE works as expected.</p>\n"}], "owner": {"reputation": 33, "user_id": 10064961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb727d7c0041e8973eda928be2bacff8?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/10064961/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 58964200, "answer_count": 1, "score": 1, "last_activity_date": 1574288409, "creation_date": 1574287198, "question_id": 58964040, "link": "https://stackoverflow.com/questions/58964040/when-c-instantiating-method", "title": "When c++ instantiating method?", "body": "<p>I am trying to compile this code with gcc and clang:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\n\ntemplate&lt;int N&gt;\nstruct Test\n{\n    template&lt;typename = std::enable_if_t&lt;N == 1, bool&gt;&gt;\n    void func()\n    {\n        std::cout &lt;&lt; \"Test::func\" &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n    Test&lt;0&gt; t;\n\n    //t.func();\n}\n</code></pre>\n\n<p>So, I have an error:</p>\n\n<pre><code>error: no type named 'type' in 'std::__1::enable_if&lt;false, bool&gt;'; 'enable_if' cannot be used to \ndisable this declaration\ntemplate &lt;bool _Bp, class _Tp = void&gt; using enable_if_t = typename enable_if&lt;_Bp, _Tp&gt;::type;\n</code></pre>\n\n<p>But if I compile that code with vc++ there is no error.\n<strong>So, which compiler resolves this issue according to c++ standard?</strong></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 1, "creation_date": 1574287194, "post_id": 58963996, "comment_id": 104183141, "body": "<code>randpasswords()</code> returns <code>string</code>, <code>writepass(...)</code> takes <code>string[]</code> which decays into <code>string*</code>. <code>string</code> and <code>string*</code> are different types."}, {"owner": {"reputation": 11, "user_id": 12406758, "user_type": "registered", "profile_image": "https://graph.facebook.com/1390145424521866/picture?type=large", "display_name": "Aaron Brethower", "link": "https://stackoverflow.com/users/12406758/aaron-brethower"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574287341, "post_id": 58963996, "comment_id": 104183191, "body": "so do i declare the type as  string* readpasswords() instead of  string readpasswords()"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574287385, "post_id": 58963996, "comment_id": 104183208, "body": "If you need an array of strings, use <code>std::vector&lt;std::string&gt;</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574287728, "post_id": 58963996, "comment_id": 104183358, "body": "Recommended reading: <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-i-e-while-stream-eof-cons\">Why is iostream::eof inside a loop condition (i.e. <code>while (!stream.eof())</code>) considered wrong?</a>"}, {"owner": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1574294906, "post_id": 58963996, "comment_id": 104185577, "body": "What did you try?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12406758, "user_type": "registered", "profile_image": "https://graph.facebook.com/1390145424521866/picture?type=large", "display_name": "Aaron Brethower", "link": "https://stackoverflow.com/users/12406758/aaron-brethower"}, "edited": false, "score": 0, "creation_date": 1574289290, "post_id": 58964175, "comment_id": 104183893, "body": "how do i declare the vector and size like you would with an array"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 11, "user_id": 12406758, "user_type": "registered", "profile_image": "https://graph.facebook.com/1390145424521866/picture?type=large", "display_name": "Aaron Brethower", "link": "https://stackoverflow.com/users/12406758/aaron-brethower"}, "edited": false, "score": 0, "creation_date": 1574310581, "post_id": 58964175, "comment_id": 104189257, "body": "@AaronBrethower, why do you need to declare a size? <code>std::vector</code> is a dynamic array, you can get its size with <code>.size()</code> member function."}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": false, "score": 0, "last_activity_date": 1574288298, "last_edit_date": 1574288298, "creation_date": 1574287899, "answer_id": 58964175, "question_id": 58963996, "link": "https://stackoverflow.com/questions/58963996/trying-to-move-arrays-through-multiple-functions-and-encountered-an-error-that-i/58964175#58964175", "title": "trying to move arrays through multiple functions and encountered an error that i dont know how to fix", "body": "<p>Don't use strange types like <code>string[][2]</code>. Use <code>std::vector</code> for arrays and <code>std::pair</code> for a pair of <code>std::string</code>s. This is an example of how <code>readnames()</code> could be declared and implemented:</p>\n\n<pre><code>std::vector&lt;std::pair&lt;std::string, std::string&gt;&gt; readnames() {\n    std::vector&lt;std::pair&lt;std::string, std::string&gt;&gt; names;\n    std::ifstream indata(\"employees.txt\");\n\n    while (true) {    // not !indata.eof(), see https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-i-e-while-stream-eof-cons\n        std::pair&lt;std::string, std::string&gt; name;\n        if (!(indata &gt;&gt; name.first &gt;&gt; name.second))\n            break;\n        names.push_back(name);\n    }\n\n    return names;\n}\n</code></pre>\n\n<p>The signatures of other functions might be:</p>\n\n<pre><code>std::vector&lt;string&gt; readpasswords();\nstd::vector&lt;string&gt; randpasswords(const std::vector&lt;string&gt;&amp;);\n\nvoid writepass(const std::vector&lt;string&gt;&amp;, \n    const std::vector&lt;std::pair&lt;std::string, std::string&gt;&gt;&amp;);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12406758, "user_type": "registered", "profile_image": "https://graph.facebook.com/1390145424521866/picture?type=large", "display_name": "Aaron Brethower", "link": "https://stackoverflow.com/users/12406758/aaron-brethower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574288298, "creation_date": 1574286949, "question_id": 58963996, "link": "https://stackoverflow.com/questions/58963996/trying-to-move-arrays-through-multiple-functions-and-encountered-an-error-that-i", "title": "trying to move arrays through multiple functions and encountered an error that i dont know how to fix", "body": "<p>this is the error<br>\n    hw4.cpp:16:41: error: cannot convert \u2018std::string {aka std::basic_string}\u2019 to \u2018std::string* \n    {aka std::basic_string<em>}\u2019 for argument \u20181\u2019 to \u2018std::string randpasswords(std::string</em>)\u2019\n    writepass(randpasswords(readpasswords()), readnames());\n<em>'''code'''</em> </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;string&gt;\n#include&lt;fstream&gt;\n\nusing namespace std;\n\nstring readnames();\nstring readpasswords();\nstring randpasswords(string[]);\nint writepass(string[], string[][2]);\n\n\nint main()\n{\n        writepass(randpasswords(readpasswords()), readnames());\n\n        return 0;\n}\n</code></pre>\n\n<p><em>'''functions'''</em>    </p>\n\n<pre><code>string readnames()\n{\n        string names[100][2];\n        ifstream indata;\n        indata.open(\"employees.txt\");\n        int x = 0;\n\n        while(!indata.eof())\n        {\n                indata &gt;&gt; names[x][0];\n                indata &gt;&gt; names[x][1];\n                cout &lt;&lt; names[x][0] &lt;&lt; \" \" &lt;&lt; names[x][1]&lt;&lt; endl;\n                x = x+1;\n        }\n        indata.close();\n        return names[100][2];\n\n}\n\nstring readpasswords()\n{\n        string pass[100];\n        ifstream indata;\n        indata.open(\"passwords.txt\");\n        int x = 0;\n\n        while(!indata.eof())\n        {\n                indata &gt;&gt; pass[x];\n                x = x+1;\n                cout &lt;&lt; pass[x] &lt;&lt; endl;\n        }\n        indata.close();\n        return pass[100];\n}\n\nstring randpasswords(string pass[])\n{\n        string randpass[100];\n\n        return randpass[100];\n}\n\nint writepass(string randpass[], string names[][2])\n{\n\n\n        return 0;\n}\n</code></pre>\n\n<p>i am wondering why in the int main the function chain wont work</p>\n"}, {"tags": ["c++", "linux", "keyboard", "embedded", "input-devices"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1574286318, "post_id": 58963828, "comment_id": 104182768, "body": "Sure, have you <a href=\"https://www.google.com/search?q=c%2B%2B+linux+keylogger&amp;rlz=1C1NHXL_enUS815US815&amp;oq=c%2B%2B+linux+keylogger&amp;aqs=chrome..69i57.4399j0j7&amp;sourceid=chrome&amp;ie=UTF-8\" rel=\"nofollow noreferrer\">tried searching for one</a> already? The first few results look promising..."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1574287911, "post_id": 58963828, "comment_id": 104183430, "body": "Rather than raw X events, maybe you want to use a library like ncurses."}], "owner": {"reputation": 679, "user_id": 6683622, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/RfiNR.jpg?s=128&g=1", "display_name": "willpnw", "link": "https://stackoverflow.com/users/6683622/willpnw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574286134, "creation_date": 1574286134, "question_id": 58963828, "link": "https://stackoverflow.com/questions/58963828/how-to-get-text-from-a-keyboard-in-embedded-linux-without-decoding-every-key-eve", "title": "How to get text from a keyboard in embedded linux without decoding every key event?", "body": "<p>Right now I'm reading directly from /dev/input/eventX. Is there some library or api that would convert the byte stream for me? Below is the code I'm running, sample input and output.</p>\n\n<pre><code>int main (void)\n{\n    struct input_event ev;\n    int fd, rd;\n\n    //Open Device\n    if ((fd = open (\"/dev/input/event0\", O_RDONLY)) == -1){\n        printf (\"not a vaild device.\\n\");\n        return -1;\n    }\n\n    while (1){\n\n        memset((void*)&amp;ev, 0, sizeof(ev));\n\n        rd = read (fd, (void*)&amp;ev, sizeof(ev));\n\n        if (rd &gt; 0 &amp;&amp; ev.type==1){\n            printf(\"value: %d, code: %d\\n\", ev.value, ev.code);\n        }\n    }\n</code></pre>\n\n<p>If I type </p>\n\n<blockquote>\n  <p>XAL4</p>\n</blockquote>\n\n<p>I get: </p>\n\n<pre><code>value: 1, code: 42\nvalue: 1, code: 45\nvalue: 0, code: 42\nvalue: 0, code: 45\nvalue: 1, code: 42\nvalue: 1, code: 30\nvalue: 0, code: 42\nvalue: 0, code: 30\nvalue: 1, code: 42\nvalue: 1, code: 38\nvalue: 0, code: 42\nvalue: 0, code: 38\nvalue: 1, code: 5\nvalue: 0, code: 5\n</code></pre>\n\n<p>Using the header, <a href=\"https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/include/uapi/linux/input-event-codes.h\" rel=\"nofollow noreferrer\">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/include/uapi/linux/input-event-codes.h</a></p>\n\n<p>I know that the key sequence is:</p>\n\n<pre><code>KEY_DOWN: SHIFT \nKEY_DOWN: X \nKEY_UP: SHIFT \nKEY_UP: X \nKEY_DOWN: SHIFT \nKEY_DOWN: A \nKEY_UP: SHIFT \nKEY_UP: A\nKEY_DOWN: SHIFT \nKEY_DOWN: L \nKEY_UP: SHIFT \nKEY_UP: L\nKEY_DOWN: 4 \nKEY_UP: 4\n</code></pre>\n\n<p>Is there a library or api that would convert this to raw ascii for me?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 0, "creation_date": 1574285510, "post_id": 58963662, "comment_id": 104182439, "body": "Unless you really want to override &#39;&lt;&lt;&#39;, creating a <code>.toString()</code> function is much cleaner and is less error prone."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1574285572, "post_id": 58963662, "comment_id": 104182457, "body": "<code>namespace std</code> -- Why are you putting the overload there? Also: <code>bool operator !=(const Pixel&amp; rhs) const { return !(this == rhs); }</code> -- no need to rewrite <code>==</code> inside out."}, {"owner": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574285695, "post_id": 58963662, "comment_id": 104182520, "body": "@PaulMcKenzie - I wanted to avoid saying std::ostream since I have other functions I have within that namespace that is not included in the example above. I try to make it clean :D And you&#39;re right with the second part :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574286049, "post_id": 58963662, "comment_id": 104182665, "body": "Polluting the standard namespace is not clean!! Just write <code>std::</code>."}, {"owner": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574286680, "post_id": 58963662, "comment_id": 104182930, "body": "@LightnessRaceswithMonica Thanks for the input haha :D"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574287287, "post_id": 58963662, "comment_id": 104183174, "body": "@Tikki: Welcome :P"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1574289964, "post_id": 58963662, "comment_id": 104184137, "body": "Why the <code>typedef struct Pixel {...} Pixel;</code>?  This is C++, not C."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "edited": false, "score": 0, "creation_date": 1574286323, "post_id": 58963758, "comment_id": 104182770, "body": "Doing as explained, it first complains about 3 parameters, which is quickly resolved by removing Pixel p and replacing p with this. However, this introduces a new error:  error: invalid operands to binary expression (&#39;basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&#39; and &#39;Eng::Pixel&#39;)"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "edited": false, "score": 1, "creation_date": 1574286555, "post_id": 58963758, "comment_id": 104182862, "body": "@Tikki Works fine: <a href=\"https://godbolt.org/z/apGXQa\" rel=\"nofollow noreferrer\">godbolt.org/z/apGXQa</a> Did you check the link Nathan included?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "edited": false, "score": 0, "creation_date": 1574286585, "post_id": 58963758, "comment_id": 104182878, "body": "@Tikki Not sure why, I&#39;d have to see an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in order to tell you.  The solution works just fine <a href=\"http://coliru.stacked-crooked.com/a/36e6d00758a6d2cb\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "edited": false, "score": 1, "creation_date": 1574286597, "post_id": 58963758, "comment_id": 104182885, "body": "I realised a mistake I just made - I acidently put it within the struct of eng. I moved it out of the struct and into the namespace and it worked. Thank you!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "edited": false, "score": 0, "creation_date": 1574286624, "post_id": 58963758, "comment_id": 104182900, "body": "@Tikki No problem.  Glad to help."}, {"owner": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "edited": false, "score": 0, "creation_date": 1574287192, "post_id": 58963758, "comment_id": 104183140, "body": "@NathanOliver-ReinstateMonica Another side question, although the points have already been awarded; if I remove inline, I get a duplicate symbol error. Do you know why this is such? The file.h is included in two other files:    duplicate symbol &#39;Eng::operator&lt;&lt;(std::__1::basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;&amp;, Eng::Pixel const&amp;)&#39; in:    CMakeFiles/Main.dir/main.cpp.o     CMakeFiles/Main.dir/classHPAMaze.cpp.o"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "edited": false, "score": 1, "creation_date": 1574287366, "post_id": 58963758, "comment_id": 104183200, "body": "@Tikki The way C++ works is if you have something defined in header file like a variable or a function, then that definition is copied into every cpp file that includes it.  That means when the linker gets to the code, it sees a bunch of translation units that define the same thing.  The linker can&#39;t handle that and you get an error.  When you use <code>inline</code> you say <i>hey, I know this was defined in other translation units but that is okay.  Just toss out all the repeats and just keep one defintion</i>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1574287548, "post_id": 58963758, "comment_id": 104183278, "body": "While it\u2019s definitely not a good idea, it\u2019s okay to add a function to <code>std</code> <b>if</b> one or more of its arguments is a user-defined type."}, {"owner": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "edited": false, "score": 0, "creation_date": 1574287614, "post_id": 58963758, "comment_id": 104183305, "body": "I could marry you all. Thanks again :)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1574287789, "post_id": 58963758, "comment_id": 104183380, "body": "@PeteBecker No it is not.  <a href=\"https://timsong-cpp.github.io/cppwp/requirements#namespace.std-7\" rel=\"nofollow noreferrer\">You are explicitly not allowed to do that</a>.  Only template specializations can be added."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1574435097, "post_id": 58963758, "comment_id": 104244115, "body": "@NathanOliver-ReinstateMonica -- The current standard says &quot;A program may add a template specialization for any standard library template to namespace std only if the declaration depends on a user-defined type and the specialization meets the standard library requirements for the original template and is not explicitly prohibited.&quot; [namespace.std]/1. <code>operator&lt;&lt;</code> is a template function, so specializing it in <code>std</code> is okay. C++20 (i.e., not the standard), which you link to, has essentially the same language in paragraph 2. Paragraph 7, which you linked to, is about <b>customization points</b>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1574435270, "post_id": 58963758, "comment_id": 104244214, "body": "@PeteBecker A template specialization has the form <code>template &lt;&gt; return_type function_name&lt;template_params&gt;(function_params)</code>.  The OP added <code>return_type function_name(function_params)</code> which is an overload, not a specialization.  You can&#39;t add overloads, only specializations."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1574435805, "post_id": 58963758, "comment_id": 104244490, "body": "@NathanOliver-ReinstateMonica -- that paragraph 7 that you linked to is irrelevant, since it talks about what&#39;s <b>allowed outside of</b> <code>std</code>. The operative language is in paragraph 1, &quot;Unless otherwise specified, the behavior of a C++ program is undefined if it adds declarations or definitions to namespace std or to a namespace within namespace std.&quot; &lt;/snark&gt;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1574435965, "post_id": 58963758, "comment_id": 104244585, "body": "@PeteBecker It states <i>Other than in namespace std or in a namespace within namespace std, a program may provide an overload</i> Which means in namespace <code>std</code> or a namespace within it is not allowed to add an overload.  Google: can we add overloads into std namespace and you&#39;ll see every answer says you can&#39;t."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1574436900, "post_id": 58963758, "comment_id": 104245039, "body": "@NathanOliver-ReinstateMonica -- no, it means that <b>that paragraph</b> says that it&#39;s okay to write these things outside of <code>std</code>. It says nothing about what&#39;s allowed in <code>std</code>. But, really, why do you insist that this is the operative paragraph, when paragraph 1 <b>clearly says what you want</b>? Take a victory when you get it."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 8, "last_activity_date": 1574286718, "last_edit_date": 1574286718, "creation_date": 1574285800, "answer_id": 58963758, "question_id": 58963662, "link": "https://stackoverflow.com/questions/58963662/overloading-operator-results-in-it-being-ambiguous/58963758#58963758", "title": "Overloading &lt;&lt; operator results in it being ambiguous", "body": "<p>First, you cannot add function overloads into <code>std</code>.  Doing so is undefined behavior.  What you want to do is put</p>\n\n<pre><code>inline std::ostream&amp; operator&lt;&lt;(std::ostream &amp;os, const Eng::Pixel &amp;p)\n{\n    os &lt;&lt; \"{\" \n    &lt;&lt; p.x \n    &lt;&lt; \",\" \n    &lt;&lt; p.y \n    &lt;&lt; \"}\";\n    return os;\n}\n</code></pre>\n\n<p>inside the <code>Eng</code> namespace.  Doing that <a href=\"http://coliru.stacked-crooked.com/a/36e6d00758a6d2cb\" rel=\"nofollow noreferrer\">allows the code to compile just fine</a>.  Having the operator in the namespace also allows for <a href=\"https://stackoverflow.com/questions/8111677/what-is-argument-dependent-lookup-aka-adl-or-koenig-lookup\">ADL</a> to work so the operator will be found even if the user doesn't have <code>using namespace Eng;</code> in their code.</p>\n\n<hr>\n\n<p>The reason you get am ambiguity from doing what you did is because the compiler finds two different functions.  It finds</p>\n\n<pre><code>friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; out, const Pixel&amp; p);\n</code></pre>\n\n<p>via ADL, and it finds the function you defined in <code>std</code>.  Since those functions are in different namespaces they are considered as overloads and since both are equal, you get an ambiguity error.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "edited": false, "score": 0, "creation_date": 1574286374, "post_id": 58963843, "comment_id": 104182790, "body": "That would explain the symbol linking error I got earlier :)!"}], "tags": [], "owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "is_accepted": false, "score": 2, "last_activity_date": 1574286264, "creation_date": 1574286264, "answer_id": 58963843, "question_id": 58963662, "link": "https://stackoverflow.com/questions/58963662/overloading-operator-results-in-it-being-ambiguous/58963843#58963843", "title": "Overloading &lt;&lt; operator results in it being ambiguous", "body": "<p>The problem is that you've declared two overloads of <code>operator&lt;&lt;</code> -- one in <code>namespace Eng</code> (the friend declaration in the class) and one in <code>namespace std</code>.  The compiler doesn't know which to use.</p>\n\n<p>Generally you should put operator&lt;&lt; overloads (only) in the namespace of the class being output.  You should never put anything into namespace std, as it is undefined as to whether it will work.</p>\n"}], "owner": {"reputation": 45, "user_id": 11611238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/myG5W.jpg?s=128&g=1", "display_name": "Tikki", "link": "https://stackoverflow.com/users/11611238/tikki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 58963758, "answer_count": 2, "score": 1, "last_activity_date": 1574286837, "creation_date": 1574285334, "last_edit_date": 1574286837, "question_id": 58963662, "link": "https://stackoverflow.com/questions/58963662/overloading-operator-results-in-it-being-ambiguous", "title": "Overloading &lt;&lt; operator results in it being ambiguous", "body": "<p>So, I have a question in regards to an error I recently experienced when I tried to overload the &lt;&lt; operator.</p>\n\n<p>I have a file, called \"structPixels.h\" where in I define a struct as follows:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#pragma once\n#include &lt;iostream&gt;\n\nnamespace Eng\n{\n    /**\n     * A structure to represent pixels\n     */\n    typedef struct Pixel{\n        unsigned int x; ///The x-coordinate\n        unsigned int y; ///The y-coordinate\n\n        bool operator ==(const Pixel&amp; rhs) const\n        {\n            return (this-&gt;x == rhs.x &amp;&amp; this-&gt;y == rhs.y);\n        };\n\n        bool operator !=(const Pixel&amp; rhs) const\n        {\n            return (this-&gt;x != rhs.x || this-&gt;y != rhs.y);\n        };\n\n        bool operator &lt;(const Pixel&amp; rhs) const\n        {\n            return std::tie(this-&gt;x, this-&gt;y) &lt; std::tie(rhs.x, rhs.y);\n        }\n\n        friend std::ostream&amp; operator &lt;&lt; (std::ostream&amp; out, const Pixel&amp; p);\n    } Pixel;\n}//End of namespace Eng\n\nnamespace std {\n    //Removing the inline does not fix the error. Rather, it fixed another error\n    //which I had with duplicate symbols\n    inline ostream&amp; operator&lt;&lt;(ostream &amp;os, const Eng::Pixel &amp;p)\n    {\n        os &lt;&lt; \"{\" \n        &lt;&lt; p.x \n        &lt;&lt; \",\" \n        &lt;&lt; p.y \n        &lt;&lt; \"}\";\n        return os;\n    }\n}//End of namespace std\n</code></pre>\n\n<p>However, when I create it and call a cout like so:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"structPixels.h\"\n\nPixel test = {3, 4};\nstd::cout &lt;&lt; \"Test: \" &lt;&lt; test &lt;&lt; std::endl;\n</code></pre>\n\n<p>I get that:</p>\n\n<pre><code>error: use of overloaded operator '&lt;&lt;' is ambiguous (with operand types 'basic_ostream&lt;char, std::__1::char_traits&lt;char&gt; &gt;' and 'Eng::Pixel')\n\nstd::cout &lt;&lt; \"Test: \" &lt;&lt; test &lt;&lt; std::endl;\n~~~~~~~~~~~~~~~~~~~~~ ^  ~~~~\n</code></pre>\n\n<p>EDIT:\nFrom the help below, we moved the operator, such that the code looks like so:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>\nnamespace Eng\n{\n\n    /**\n     * A structure to represent pixels\n     */\n    typedef struct Pixel{\n        unsigned int x; ///The x-coordinate\n        unsigned int y; ///The y-coordinate\n\n        bool operator ==(const Pixel&amp; rhs) const\n        {\n            return (this-&gt;x == rhs.x &amp;&amp; this-&gt;y == rhs.y);\n        };\n\n        bool operator !=(const Pixel&amp; rhs) const\n        {\n            return (this-&gt;x != rhs.x || this-&gt;y != rhs.y);\n        };\n\n        bool operator &lt;(const Pixel&amp; rhs) const\n        {\n            return std::tie(this-&gt;x, this-&gt;y) &lt; std::tie(rhs.x, rhs.y);\n        }\n    } Pixel;\n\n    inline std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Pixel&amp; rhs)\n    {\n        os &lt;&lt; \"{\" &lt;&lt; rhs.x &lt;&lt; \",\" &lt;&lt; rhs.y &lt;&lt; \"}\";\n        return os;\n    }\n}//End of namespace Eng\n</code></pre>\n\n<p>This solved the error :)!</p>\n"}, {"tags": ["c++", "unordered-map"], "comments": [{"owner": {"reputation": 13842, "user_id": 759253, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0136e90dfd678a82c1dbba77dcbfc28e?s=128&d=identicon&r=PG", "display_name": "Igor R.", "link": "https://stackoverflow.com/users/759253/igor-r"}, "edited": false, "score": 0, "creation_date": 1574285370, "post_id": 58963636, "comment_id": 104182387, "body": "It is not a function, it is a pointer to a member function."}, {"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 1, "creation_date": 1574285386, "post_id": 58963636, "comment_id": 104182394, "body": "You appear to have mixed class member functions up with global functions.   The class member functions need a class instance to work."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1574285421, "post_id": 58963636, "comment_id": 104182406, "body": "<code>arr</code> is a public member variable of <code>xyz</code>. You shouldn&#39;t be able to access it from <code>call_function()</code> in the code you&#39;ve written. Please show us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1574285712, "post_id": 58963684, "comment_id": 104182531, "body": "This will make the code compile, but it&#39;s still sub-par. You need to test the result of <code>arr.at()</code> versus <code>arr.end()</code> and take some action if there&#39;s no match."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 6, "last_activity_date": 1574285437, "creation_date": 1574285437, "answer_id": 58963684, "question_id": 58963636, "link": "https://stackoverflow.com/questions/58963636/cannot-call-function-stored-in-unordered-map/58963684#58963684", "title": "Cannot call function stored in unordered_map", "body": "<p>The values in <code>arr</code> are pointers to non-static member functions of class <code>xyz</code>, so in order to call them, you need an <code>xyz</code> object.</p>\n\n<p>When you call a member function directly, you can usually omit the <code>this-&gt;</code>. However, when you call through a pointer to member, you cannot omit <code>this-&gt;*</code>. You have to write it explicitly:</p>\n\n<pre><code>(this-&gt;*arr.at(x))();\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10632782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b6f8c4e30ecca79fb1ea0ac29925aad?s=128&d=identicon&r=PG&f=1", "display_name": "qmwnebrv", "link": "https://stackoverflow.com/users/10632782/qmwnebrv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 58963684, "answer_count": 1, "score": 0, "last_activity_date": 1574287122, "creation_date": 1574285235, "last_edit_date": 1574287122, "question_id": 58963636, "link": "https://stackoverflow.com/questions/58963636/cannot-call-function-stored-in-unordered-map", "title": "Cannot call function stored in unordered_map", "body": "<p>I tried to make <code>call_function</code> take a string argument and call the function that corresponds to that string in the map, but I get an error. How do I fix this? Why doesn't it work?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unordered_map&gt;\n\nusing namespace std;\n\nclass xyz {\npublic:\n    unordered_map&lt; std::string, void(xyz::*)()&gt; arr{\n        { \"user\", &amp;xyz::func_user},\n        { \"pwd\", &amp;xyz::func_pwd},\n        { \"dir\", &amp;xyz::func_dir}\n    };\n\n    void call_function(std::string x) {\n        arr.at( x)();// Error: term does not evaluate a function taking 0 arguments\n    }\n\n    void func_user(){\n        cout &lt;&lt; \"func_user\" &lt;&lt; endl;\n    }\n\n    void func_pwd(){\n        cout &lt;&lt; \"func_pwd\" &lt;&lt; endl;\n    }\n\n    void func_dir(){\n        cout &lt;&lt; \"func_dir\" &lt;&lt; endl;\n    }\n\n};\n\nint main(){\n    xyz a;\n\n    a.call_function( \"dir\");\n}\n</code></pre>\n"}, {"tags": ["c++", "iostream"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1574284442, "post_id": 58963446, "comment_id": 104182016, "body": "Welcome to Stack Overflow! Please <b><a href=\"https://stackoverflow.com/posts/58963446/edit\">edit</a></b> your question with an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or <a href=\"http://sscce.org\" rel=\"nofollow noreferrer\">SSCCE (Short, Self Contained, Correct Example)</a>"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1574284680, "post_id": 58963446, "comment_id": 104182125, "body": "@scohe001 There is <code>std::cin.ignore()</code> here."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1574284794, "post_id": 58963446, "comment_id": 104182165, "body": "@Yksisarvinen which will be useless if OP is entering even one extra space."}], "owner": {"reputation": 1, "user_id": 12406560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52388696351573cd2315dbfae505031e?s=128&d=identicon&r=PG&f=1", "display_name": "beyond", "link": "https://stackoverflow.com/users/12406560/beyond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1574300257, "answer_count": 0, "score": 0, "last_activity_date": 1574284312, "creation_date": 1574284312, "question_id": 58963446, "link": "https://stackoverflow.com/questions/58963446/why-is-using-getline-cin-causing-my-program-to-terminate", "closed_reason": "Duplicate", "title": "Why is using getline/cin causing my program to terminate?", "body": "<p>Here is my code:</p>\n\n<pre><code>Movies MovieManagerUI::getMovie(){\n  std::string code;\n  std::cout &lt;&lt; \"Enter Movie Code: \";\n  std::cin &gt;&gt; code;\n  std::cout &lt;&lt; code;\n  std::string title;\n  std::cin.ignore();\n  std::cout &lt;&lt; \"Enter Movie Title: \";\n  std::getline(std::cin, title);\n  std::cout &lt;&lt; title;\n\n  Movies thisMovie;\n  thisMovie.setMovieCode(code);\n  thisMovie.setMovieName(title);\n  thisMovie.setRentCount(0);\n\n  return thisMovie;\n}\n</code></pre>\n\n<p>The program exits before it can print title. I have also tried using cin instead of getline, but I run into the same issue. If I switch the order of the two inputs (use getline first and then cin), or use cin for both or getline for both, I also run into the same issue, where whichever variable is being done second does not print onto the console, and the entire program terminates with an error code.</p>\n\n<p>Why is this happening?</p>\n"}, {"tags": ["c++", "multithreading", "thread-safety", "atomic", "stdatomic"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1574284590, "post_id": 58963271, "comment_id": 104182080, "body": "What, exactly you are asking about? Both the usage of <code>std::cout</code>, and <code>work--;</code> are unsynchronized modification. Due to this, your code exhibits undefined behavior, and any reasoning about the specific behavior of undefined behavior is pointless."}, {"owner": {"reputation": 125, "user_id": 8420856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/415ffbd5b496a7fc821a55b85c7cebeb?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Vijay", "link": "https://stackoverflow.com/users/8420856/piyush-vijay"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1574312425, "post_id": 58963271, "comment_id": 104189707, "body": "@AlgirdasPreid\u017eius How the synchronisation can be done between <code>std::cout</code> and <code>work--</code> without using lock here. And also how the line <code>std::cout&lt;&lt;&quot;soemthing is here&quot; &lt;&lt; work &lt;&lt;std::endl;</code> can be made to print output as <code>soemthing is here2018\\nsoemthing is here2017\\n</code> instead <code>soemthing is heresoemthing is here20172017\\n\\n</code>?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1574345031, "post_id": 58963271, "comment_id": 104206561, "body": "1) &quot;<i>How the synchronisation can be done between <code>std::cout</code> and <code>work--</code> without using lock here.</i>&quot; You need to have a lock, so that the object is accessed only from a single thread at a time. 2) &quot;<i>And also how the line <code>std::cout&lt;&lt;&quot;soemthing is here&quot; &lt;&lt; work &lt;&lt;std::endl;</code> can be made to print output as <code>soemthing is here2018\\nsoemthing is here2017\\n</code> instead <code>soemthing is heresoemthing is here20172017\\n\\n</code>?</i>&quot; I already told you: by synchronizing the access to <code>std::cout</code>. It is not, inherently, thread safe."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1574356135, "post_id": 58963271, "comment_id": 104213420, "body": "@PiyushVijay Why would use iostream w/o locking?"}], "answers": [{"tags": [], "owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "is_accepted": false, "score": 0, "last_activity_date": 1574373348, "creation_date": 1574373348, "answer_id": 58984357, "question_id": 58963271, "link": "https://stackoverflow.com/questions/58963271/release-sequence-code-snippet-giving-random-behaviour/58984357#58984357", "title": "Release sequence code snippet giving random behaviour", "body": "<p>Your code has UB because <code>work</code> isn't <code>atomic&lt;int&gt;</code>.  But your producer and both consumers write it without synchronization.  The symptom in this case is that the compiler optimized <code>consumer</code> to keep its own local copy of <code>work</code> in a register so you get numbers repeated, once from each thread.</p>\n\n<p>And of course you need to use <code>int tmp = work--;</code> to do one <code>fetch_sub</code>, instead of an atomic decrement and then later reading a value that might have changed.</p>\n\n<hr>\n\n<p><strong>The other showstopper is that three separate <code>cout</code> calls for the three separate <code>&lt;&lt;</code> operators are not a single atomic print.</strong></p>\n\n<p><code>cout</code> itself is thread-safe, though.</p>\n\n<p>You could <strong>print into a full line (including <code>\\n</code>) into a private string or char buffer and then safely <code>cout</code> that</strong>.  <code>std::endl</code> isn't magic; it's literally identical to <code>&lt;&lt; '\\n'</code> and flushing the stream (in case it was full-buffered so <code>\\n</code> didn't already do that).</p>\n\n<p>e.g. <code>sprintf</code> or <code>stringstream</code> or whatever.</p>\n\n<p>That would make sure that whole lines like <code>soemthing is here2018\\n</code> are always contiguous.  (You probably want to spellcheck and leave a trailing space).</p>\n\n<p>That doesn't guarantee they'll print in numeric order, though.  One consumer might decrement first, but the other thread decrements second but then gets the lock (inside <code>std::cout</code>) first to print a lower-numbered line first.</p>\n"}], "owner": {"reputation": 125, "user_id": 8420856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/415ffbd5b496a7fc821a55b85c7cebeb?s=128&d=identicon&r=PG&f=1", "display_name": "Piyush Vijay", "link": "https://stackoverflow.com/users/8420856/piyush-vijay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1574373348, "creation_date": 1574283520, "last_edit_date": 1574356105, "question_id": 58963271, "link": "https://stackoverflow.com/questions/58963271/release-sequence-code-snippet-giving-random-behaviour", "title": "Release sequence code snippet giving random behaviour", "body": "<p>I was working on one of the examples from the book Concurrency With Modern C++ by Rainer Grimm and I found this code snippet (edited somewhat to get better undestanding of the concept). The code snippet is related to top <code>Release Sequence</code>  </p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;chrono&gt;\nusing namespace std::chrono_literals;\nint work{0};\nstd::atomic&lt;int&gt; ready{0};\n\nvoid consumer() {\n    while(!(ready.fetch_sub(1, std::memory_order_acquire) &gt; 0)) {\n       std::this_thread::sleep_for(100ms); \n        }\n        work--;\n    std::cout&lt;&lt;\"soemthing is here\" &lt;&lt; work &lt;&lt;std::endl;\n}\n\nvoid producer() {\n    work = 2019;\n    ready.store(2, std::memory_order_release);\n\n}\n\nint main () {\n    std::thread prod(producer);\n    std::thread con(consumer);\n    std::thread con2(consumer);\n\n    prod.join();\n    con.join();\n    con2.join();\n    return 0;\n}\n</code></pre>\n\n<p>The output of the above program comes out to be<br>\n<code>soemthing is here2018\\nsoemthing is here2017\\n</code><br>\n<code>soemthing is heresoemthing is here20172017\\n\\n</code><br>\n<code>soemthing is here2018soemthing is here2017\\n\\n</code><br>\n<code>soemthing is heresoemthing is here20172017\\n\\n</code>  </p>\n\n<p>Can anyone explain why there is so much difference in the output and how this output can be justified using acquire-release semantics and release sequence.<br>\nNote: <code>\\n</code> is used to represent output of <code>std::endl;</code></p>\n"}, {"tags": ["c++", "compilation", "shared-libraries", "cross-platform", "cross-compiling"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1574283431, "post_id": 58963199, "comment_id": 104181573, "body": "Please edit down your question to a concise <i>technical</i> question.   Your first 7 paragraphs should be deleted and maybe expand on the last paragraph a little."}, {"owner": {"reputation": 141, "user_id": 5853383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/337e59d3d85c19101bb7fae91ea0f441?s=128&d=identicon&r=PG&f=1", "display_name": "patvax", "link": "https://stackoverflow.com/users/5853383/patvax"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1574284407, "post_id": 58963199, "comment_id": 104182002, "body": "@xaxxon I edited the question should be more readable know."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1574284637, "post_id": 58963199, "comment_id": 104182109, "body": "Do you want to <i>link</i> the code or just compile it?   Linking is much harder.  Things like distcc tend to do remote compilation but local linking so you know all the files to link against for that OS are present.  clang makes the compiling for whatever super easy but it&#39;s not a linker."}, {"owner": {"reputation": 141, "user_id": 5853383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/337e59d3d85c19101bb7fae91ea0f441?s=128&d=identicon&r=PG&f=1", "display_name": "patvax", "link": "https://stackoverflow.com/users/5853383/patvax"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1574284939, "post_id": 58963199, "comment_id": 104182231, "body": "@xaxxon I want to generate a library that I can load and bind dynamically with dlopen(Linux) or LoadLibrary(Windows). I&#39;m trying to bring the compilation step to just pressing a button and having a library for each platfrom as a result. I&#39;m am trying to stick to c++ standard library so the os related files shouldn&#39;t be an issue. It&#39;s more about the format of the shared library."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1574290926, "post_id": 58963199, "comment_id": 104184500, "body": "shared libraries aren&#39;t in the c++ standard, so your statement doesn&#39;t make sense.   They are an OS concept, so you have to deal with OS-related files.   C++ spec describes a conceptual (non-existent) c++ virtual machine."}, {"owner": {"reputation": 141, "user_id": 5853383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/337e59d3d85c19101bb7fae91ea0f441?s=128&d=identicon&r=PG&f=1", "display_name": "patvax", "link": "https://stackoverflow.com/users/5853383/patvax"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1574292997, "post_id": 58963199, "comment_id": 104185163, "body": "@xaxxon Sure this is clear to me. I know however, which OSes I want to target and I want to make sure that a user can trivially compile his code for the 3 major OSes. Loading and using of this libraries is not a problem. All I want is to load a library that uses the standard library from my program that also uses only the standard library(or some cross platform libraries that work for the OSes of interest)."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1574362186, "post_id": 58963199, "comment_id": 104216321, "body": "The answer to this is that cross-linking hard and that no one here can really walk you through it.  You&#39;re going to be reading a lot of different pages on how to do it -- and it&#39;s not just &quot;per-OS&quot; -- it&#39;s going to depend on what version of the OS as well (especially for linux)."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 2829853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07c0c81acd1372f89f6ecd0bc01da47?s=128&d=identicon&r=PG&f=1", "display_name": "nelson.l", "link": "https://stackoverflow.com/users/2829853/nelson-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1574329933, "creation_date": 1574329933, "answer_id": 58971921, "question_id": 58963199, "link": "https://stackoverflow.com/questions/58963199/cross-compiling-in-c-as-part-of-an-cross-platform-application-or-as-service/58971921#58971921", "title": "Cross Compiling in c++ (as part of an cross platform application or as service)", "body": "<p>You can't have one library that works on several OS families, because the formats are incompatible. See: <a href=\"https://en.wikipedia.org/wiki/Comparison_of_executable_file_formats\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Comparison_of_executable_file_formats</a> for what format is used on the target OS</p>\n\n<p>You can only use a build tool that support cross compilation and set it up to build/link the correct library to generate a correct binary for the target OS, like <a href=\"https://cmake.org/\" rel=\"nofollow noreferrer\">CMake</a> / <a href=\"https://bazel.build/\" rel=\"nofollow noreferrer\">Bazel</a></p>\n"}], "owner": {"reputation": 141, "user_id": 5853383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/337e59d3d85c19101bb7fae91ea0f441?s=128&d=identicon&r=PG&f=1", "display_name": "patvax", "link": "https://stackoverflow.com/users/5853383/patvax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574329933, "creation_date": 1574283202, "last_edit_date": 1574284369, "question_id": 58963199, "link": "https://stackoverflow.com/questions/58963199/cross-compiling-in-c-as-part-of-an-cross-platform-application-or-as-service", "title": "Cross Compiling in c++ (as part of an cross platform application or as service)", "body": "<p>I'm trying to integrate compilation of small code segments to my application. How do I compile a piece of code for multiple platforms to a shared library (Invokable through code if possible) while introducing as little overhead as humanly possible? The biggest issue is providing all the compiling toolchains with an application.</p>\n\n<p>I have looked into <a href=\"https://docs.conan.io/en/latest/systems_cross_building/cross_building.html\" rel=\"nofollow noreferrer\">conan</a> and <a href=\"https://clang.llvm.org/get_started.html\" rel=\"nofollow noreferrer\">Clang</a>. When I understood correctly Clang is not a thing that could be shipped with an application. As for conan I don't know yet.</p>\n\n<p>Alternatively I might build a service where all needed compiling toolchains would reside and our system would call this service over network and receive a library as an answer.</p>\n\n<p>The latter seems to be the most reasonable solution but I'm not sure if this should be the way to go.</p>\n\n<p>What would be the best tool to use on server side linux to compile c++ code for linux, windows and OS X if possible?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "chrono"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 12157032, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6_LPhbYW0CI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmkwctFXhrqUDxzDFKcNgSS5E4oA/photo.jpg?sz=128", "display_name": "Marcus Williams", "link": "https://stackoverflow.com/users/12157032/marcus-williams"}, "edited": false, "score": 0, "creation_date": 1574285855, "post_id": 58963327, "comment_id": 104182585, "body": "Thank you so much. Now I understand how to input time."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 41, "user_id": 12157032, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6_LPhbYW0CI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmkwctFXhrqUDxzDFKcNgSS5E4oA/photo.jpg?sz=128", "display_name": "Marcus Williams", "link": "https://stackoverflow.com/users/12157032/marcus-williams"}, "edited": false, "score": 0, "creation_date": 1574285936, "post_id": 58963327, "comment_id": 104182612, "body": "@MarcusWilliams You are welcome! Be sure to add sanity checks after the user has entered values. If you put invalid values in, it may break."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1574285111, "last_edit_date": 1574285111, "creation_date": 1574283748, "answer_id": 58963327, "question_id": 58963143, "link": "https://stackoverflow.com/questions/58963143/how-can-i-input-a-set-start-and-end-time-using-chrono-or-ctime-libaray/58963327#58963327", "title": "How can I input a set start and end time using Chrono or ctime libaray", "body": "<p>The <code>std::tm*</code> returned from <code>std::localtime</code> is not a good place to store data in. Note that all the different offsets in the <code>std::tm</code> struct are well <a href=\"https://en.cppreference.com/w/cpp/chrono/c/tm\" rel=\"nofollow noreferrer\">documented</a>.</p>\n\n<p>Using only year, month and weekday as you do isn't really enough. There are more than one day in each month having a Saturday for example.</p>\n\n<p>You can do like this:</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;ctime&gt;\n#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    std::tm now{}; // declare and initialize your own tm\n    std::chrono::system_clock::time_point cc;\n\n    std::cout &lt;&lt; \"enter\\nyear month day\\n\";\n\n    std::cin &gt;&gt; now.tm_year &gt;&gt; now.tm_mon &gt;&gt; now.tm_mday;\n\n    // compensate for offsets\n    now.tm_year -= 1900;\n    now.tm_mon -= 1;\n\n    // convert to std::time_t\n    std::time_t n = std::mktime(&amp;now);\n\n    // here you get a chrono time_point from the user input\n    cc = std::chrono::system_clock::from_time_t(n);\n\n    // convert back to std::time_t\n    n = std::chrono::system_clock::to_time_t(cc);\n\n    // print the result\n    std::cout &lt;&lt; std::put_time(std::localtime(&amp;n), \"%FT%T\") &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Example input/output:</p>\n\n<pre><code>enter\nyear month day\n2019 11 20\n2019-11-20T00:00:00\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 12157032, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6_LPhbYW0CI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdmkwctFXhrqUDxzDFKcNgSS5E4oA/photo.jpg?sz=128", "display_name": "Marcus Williams", "link": "https://stackoverflow.com/users/12157032/marcus-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 58963327, "answer_count": 1, "score": 2, "last_activity_date": 1574286170, "creation_date": 1574282936, "last_edit_date": 1574286170, "question_id": 58963143, "link": "https://stackoverflow.com/questions/58963143/how-can-i-input-a-set-start-and-end-time-using-chrono-or-ctime-libaray", "title": "How can I input a set start and end time using Chrono or ctime libaray", "body": "<p>I'm having a hard time understanding time with in c++. I want to input values for time like this.</p>\n\n<pre><code>time_t  t = time(0);\ntm* now = localtime(&amp;t);\ncin &gt;&gt; now-&gt;tm_wday &gt;&gt; now-&gt;tm_mon &gt;&gt; now-&gt;tm_year;\n</code></pre>\n\n<p>I feel this is a wrong way of doing this. my main objective is to try create a start time and date and an end time and date and have the object run until the given end time and date. With inputting time values confuses me and would like a little help steering me in the right direction.   </p>\n"}, {"tags": ["c++", "matrix", "operator-overloading"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 4, "creation_date": 1574282515, "post_id": 58963015, "comment_id": 104181151, "body": "Why do you use pointers at all here?"}, {"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1574282531, "post_id": 58963015, "comment_id": 104181160, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/1145022/difference-between-global-operator-and-member-operator\">difference between global operator and member operator</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1574282688, "post_id": 58963015, "comment_id": 104181232, "body": "@Axalo no it does not. The problem is pointers not global vs member"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1574283032, "post_id": 58963015, "comment_id": 104181407, "body": "<code>Matrix *m2= new Matrix(3,4,9);</code> -- No.  Get rid of all the pointers and most, if not all of your problems would be solved.  There is no reason whatsoever to have a single <code>new</code> in your program, as <code>Matrix</code> is copyable with no issues, by default."}], "answers": [{"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": -1, "last_activity_date": 1574282965, "creation_date": 1574282965, "answer_id": 58963155, "question_id": 58963015, "link": "https://stackoverflow.com/questions/58963015/c-error-invalid-operands-of-types-matrix-and-matrix-to-binary-operator/58963155#58963155", "title": "c++ error: invalid operands of types &#39;Matrix*&#39; and &#39;Matrix*&#39; to binary &#39;operator+&#39;", "body": "<p>The operator you wrote could be called as</p>\n\n<pre><code>// this is only for demonstration, not real code!\nMatrix *m_p1;\nMatrix *m_p2;\nMatrix m3;   \n//...\nm_p2 = m3 + m_p1;\n// exactly the same as\nm_p2 = m3.operator+(m_p1);\n</code></pre>\n\n<p>However, <code>operator+</code> is expected to take a <code>const Matrix&amp;</code> as parameter and return a <code>Matrix</code>. Simply removing all pointers from your code will make it already almost correct.</p>\n"}, {"comments": [{"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1574289310, "post_id": 58963519, "comment_id": 104183898, "body": "If it needs access to the private data he could declare it inside the class as <code>friend Matrix* operator+(Matrix* m1, Matrix* m2) { &#47;* do stuff *&#47; }</code>"}, {"owner": {"reputation": 38, "user_id": 9921110, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FoLvJ6xUDZI/AAAAAAAAAAI/AAAAAAAAADo/p4vn_-Wy3VE/photo.jpg?sz=128", "display_name": "Abhay Raj Singh Rathod", "link": "https://stackoverflow.com/users/9921110/abhay-raj-singh-rathod"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1574425090, "post_id": 58963519, "comment_id": 104238597, "body": "Function declaration will be in class and friend as prefix, while definition should be outside and no need to prefix friend before definition."}], "tags": [], "owner": {"reputation": 38, "user_id": 9921110, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FoLvJ6xUDZI/AAAAAAAAAAI/AAAAAAAAADo/p4vn_-Wy3VE/photo.jpg?sz=128", "display_name": "Abhay Raj Singh Rathod", "link": "https://stackoverflow.com/users/9921110/abhay-raj-singh-rathod"}, "is_accepted": false, "score": 0, "last_activity_date": 1574284645, "creation_date": 1574284645, "answer_id": 58963519, "question_id": 58963015, "link": "https://stackoverflow.com/questions/58963015/c-error-invalid-operands-of-types-matrix-and-matrix-to-binary-operator/58963519#58963519", "title": "c++ error: invalid operands of types &#39;Matrix*&#39; and &#39;Matrix*&#39; to binary &#39;operator+&#39;", "body": "<p>Let's look at your declaration of <code>operator+</code></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Matrix* operator+(Matrix* no2);\n</code></pre>\n\n<p>Actually, <code>operator+</code> is a member function so it can only be called through objects.</p>\n\n<p>So the call <code>m2 + m3</code> translates to <code>m2.operator+(m3)</code>, but in your code m2 is a pointer and this syntax becomes invalid.</p>\n\n<p>Your operator expects an <strong>object at LHS</strong> and a <strong>pointer at RHS</strong>.</p>\n\n<p>In <code>m2 + m3</code> both are pointers, for which there is no suitable operator defined.</p>\n\n<p><strong>Solution</strong></p>\n\n<p><em>Less work (ugly)</em></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>m2 = (*m2)+m3;\n</code></pre>\n\n<p>here you are <strong>dereferencing the object</strong> that m2 points to.</p>\n\n<p><em>More work (less ugly)</em></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>m2 = m2+m3;\n</code></pre>\n\n<p>but before this, you have to define <code>+</code> for 2 pointers globally(outside class)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Matrix* operator+(Matrix* m1, Matrix* m2) {\n// do stuff\n}\n</code></pre>\n\n<p>You will have to play with public/friend</p>\n\n<p>I understand it's for class but you should not use pointers unless you really need to reconsider every object only approach.</p>\n\n<p>There is a memory leak in <code>m2 = m2 + m3</code> (bad thing, eats RAM) here you're assigning m2 new location without deleting the old pointed object. So there is a Matrix object (>60-90) bytes lost which you can't access.</p>\n\n<p>This can be easily made without using pointers and you will learn very much. Mind your deadlines. Hope it helps.</p>\n"}], "owner": {"reputation": 29, "user_id": 11203364, "user_type": "registered", "profile_image": "https://graph.facebook.com/2459521940738337/picture?type=large", "display_name": "Mete Ceviz", "link": "https://stackoverflow.com/users/11203364/mete-ceviz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574284645, "creation_date": 1574282372, "question_id": 58963015, "link": "https://stackoverflow.com/questions/58963015/c-error-invalid-operands-of-types-matrix-and-matrix-to-binary-operator", "title": "c++ error: invalid operands of types &#39;Matrix*&#39; and &#39;Matrix*&#39; to binary &#39;operator+&#39;", "body": "<p>I have an exam about c++. There is description below:</p>\n\n<ul>\n<li>Matrix *m2 = new Matrix(3,4,9); \u00a0\u2192 3x4 matrix with 9\u2019s</li>\n<li>matrix operations \u2192 m2=m2+m3</li>\n</ul>\n\n<p>I am trying to sum m2 and m3 and place m2. But there is an error: invalid operands of types 'Matrix*' and 'Matrix*' to binary 'operator+'.</p>\n\n<p>main.cpp:</p>\n\n<pre><code>    int main(){\n     Matrix *m2= new Matrix(3,4,9);\n     Matrix *m3= new Matrix(3,4,2);\n\n     m2= m2+m3;\n\n     return 0;\n     }\n</code></pre>\n\n<p>matrix.h:</p>\n\n<pre><code>      class Matrix{\n\n      private:\n      int x,y;\n      vector&lt;vector &lt;int&gt; &gt; matris;\n\n      public:\n      Matrix(int row,int col,int z);\n      Matrix* operator+(Matrix* no2);\n      };\n</code></pre>\n\n<p>Matrix.cpp:</p>\n\n<pre><code>  Matrix::Matrix(int row,int col, int z){\n\n        Matrix::x=row;\n        Matrix::y=col;\n\n        for(int i=0;i&lt;x;i++){\n            matris.push_back(vector &lt;int&gt;(y));\n        }\n\n        for(int i=0;i&lt;Matrix::x;i++){\n            for(int j=0;j&lt;Matrix::y;j++){\n                Matrix::matris[i][j]=z;\n            }\n          }\n        }\n\nMatrix* Matrix::operator +(Matrix* no2){\n\n    Matrix* temp = new Matrix(this-&gt;x,this-&gt;y,0);\n\n    for(int i=0;i&lt;this-&gt;x;i++){\n        for(int j=0;j&lt;this-&gt;y;j++){\n            temp-&gt;matris[i][j]=this-&gt;matris[i][j]+ no2-&gt;matris[i][j];\n        }\n    }\n    return temp;\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers", "new-operator", "dynamic-memory-allocation"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1574281825, "post_id": 58962853, "comment_id": 104180859, "body": "<code>int* y[100];</code> is an <b>array</b> of pointers to <code>int</code>.  <code>x</code> <b>is</b> a pointer to <code>int</code>."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 4, "creation_date": 1574282249, "post_id": 58962853, "comment_id": 104181039, "body": "Sidenote: Don&#39;t <code>#include &lt;bits&#47;stdc++.h&gt;</code> (<a href=\"https://stackoverflow.com/Questions/31816095/Why-Should-I-Not-Include-Bits-Stdc-H.\">reason</a>) and don&#39;t <code>using namespace std;</code> (<a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">reason</a>)."}], "answers": [{"comments": [{"owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 0, "creation_date": 1574282207, "post_id": 58962917, "comment_id": 104181024, "body": "The type of an indexed array is the underlying type, not a reference to the underlying type.  There are no reference types here.  The expression <code>x[0] = 5;</code> assigns an <code>int</code> <i>rvalue</i> to an <code>int</code> <i>lvalue</i>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 2, "creation_date": 1574282265, "post_id": 58962917, "comment_id": 104181041, "body": "@StephenM.Webb how would you explain <code>x[0] = 5;</code> then?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 2, "creation_date": 1574282518, "post_id": 58962917, "comment_id": 104181154, "body": "@StephenM.Webb dereferencing a pointer, or indexing an array, gives you a reference to the element at that position.  If it didn&#39;t you couldn&#39;t assign to it."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 0, "creation_date": 1574282549, "post_id": 58962917, "comment_id": 104181169, "body": "@StephenM.Webb Hmm. <a href=\"https://en.cppreference.com/w/cpp/language/operator_member_access#Built-in_subscript_operator\" rel=\"nofollow noreferrer\">cppreference</a> is not really clear on the returned type of this operator and I don&#39;t have standard to consult, but I don&#39;t see how it could possibly work without reference types."}, {"owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 0, "creation_date": 1574282888, "post_id": 58962917, "comment_id": 104181330, "body": "Dereferencing a pointer or indexing an array gives you an <i>lvalue</i> not a reference type."}, {"owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 0, "creation_date": 1574283088, "post_id": 58962917, "comment_id": 104181436, "body": "Don&#39;t forget folks, this is C code (despite the &quot;C++&quot; tag). C does not have reference types so any explanation that requires their existence is incorrect."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 2, "creation_date": 1574283181, "post_id": 58962917, "comment_id": 104181474, "body": "@StephenM.Webb The Q is tagged as C++ so it is C++ code, even if it would compile in a C compiler.  References do exist in C++ and so that is what you get.  We go by the language tag on the question, not what the code looks like."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 2, "creation_date": 1574283225, "post_id": 58962917, "comment_id": 104181492, "body": "@StephenM.Webb Also, how is it C code.  The code has <code>new</code> in it and that is <b>not</b> C code."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1574283453, "post_id": 58962917, "comment_id": 104181589, "body": "I believe what Stephen meant is that &quot;array subscripts can also compile as C code, and C doesn&#39;t have references&quot;, which is a valid point. In C there must be some magic applied instead of nice type,and presumably most compilers implement it the same way in C++, if the standard doesn&#39;t clearly state that it must return a reference type."}, {"owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1574284014, "post_id": 58962917, "comment_id": 104181833, "body": "@NathanOliver-ReinstateMonica I could replace the new expression with a malloc call (a remove the useless include directive and using statement) and I&#39;d have pure C code that would compile identically with either a C or a C++ compiler. Going by ISO/IEC 14882:2014 (the C++14 standard) 5.2.1/1(1) [expr.sub] &quot;the result is an lvalue if that operand is an lvalue and an xvalue otherwise&quot; and 5.3.1/1 [expr.unary.op] &quot;the result is an lvalue referring to the object or function to which the expression points&quot;.  No ambiguity, no reference types."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 0, "creation_date": 1574284058, "post_id": 58962917, "comment_id": 104181856, "body": "@StephenM.Webb <i>lvalue referring</i> means reference."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1574284203, "post_id": 58962917, "comment_id": 104181907, "body": "I think this issue deserves a separate question (if one does not already exist). The discussion seems too long for comments?"}, {"owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "edited": false, "score": 0, "creation_date": 1574284311, "post_id": 58962917, "comment_id": 104181962, "body": "For further reference, ISO/IEC 9899:2011 (the C11 standard) 6.5.3.2 /4 regarding the indirection operator <code>*</code>: &quot;If the operand has type \u2018\u2018pointer to type\u2019\u2019, the result has type \u2018\u2018type\u2019\u2019.&quot;"}, {"owner": {"reputation": 1512, "user_id": 7885750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43lAl.jpg?s=128&g=1", "display_name": "Stephen M. Webb", "link": "https://stackoverflow.com/users/7885750/stephen-m-webb"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1574284613, "post_id": 58962917, "comment_id": 104182092, "body": "@NathanOliver-ReinstateMonica reference types are defined in ISO/IEC 14882:2014 3.9.2/1.4 [basic.compund] and lvalues are defined in 3.10/1.1 [basic.lval] -- they&#39;re not the same thing."}], "tags": [], "owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "is_accepted": true, "score": 4, "last_activity_date": 1574281970, "creation_date": 1574281970, "answer_id": 58962917, "question_id": 58962853, "link": "https://stackoverflow.com/questions/58962853/why-this-assignment-is-correct-while-it-looks-like-assigning-an-int-to-int/58962917#58962917", "title": "Why this assignment is correct while it looks like assigning an int to int*?", "body": "<p><code>x</code> is of type <code>pointer to int</code> and <code>y</code> is of type <code>array of 100 pointers to int</code>. </p>\n\n<p>Then, <code>x[0]</code> is of type <code>int&amp;</code> (reference to <code>int</code>) and <code>y[0]</code> is of type <code>int*&amp;</code> (reference to pointer to <code>int</code>). </p>\n\n<p>Thus <code>x[0] = 5</code> is assigning <code>int</code> value to <code>int</code> reference (perfectly valid), but <code>y[0] = 5</code> is trying to assign <code>int</code> value to <em>a pointer</em>, which is not valid.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 2, "last_activity_date": 1574284971, "last_edit_date": 1574284971, "creation_date": 1574281981, "answer_id": 58962920, "question_id": 58962853, "link": "https://stackoverflow.com/questions/58962853/why-this-assignment-is-correct-while-it-looks-like-assigning-an-int-to-int/58962920#58962920", "title": "Why this assignment is correct while it looks like assigning an int to int*?", "body": "<p>Your declaration doesn't do what you think it does. This line:</p>\n\n<pre><code>int* y[100];\n</code></pre>\n\n<p>does not create an array of <code>int</code>s, but of <code>int*</code>s.</p>\n\n<p>If you want an array of <code>int</code>s, just don't use the <code>*</code>:</p>\n\n<pre><code>int y[100];\n</code></pre>\n\n<p>This will create an array of 100 <code>int</code>s.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1574282009, "creation_date": 1574282009, "answer_id": 58962925, "question_id": 58962853, "link": "https://stackoverflow.com/questions/58962853/why-this-assignment-is-correct-while-it-looks-like-assigning-an-int-to-int/58962925#58962925", "title": "Why this assignment is correct while it looks like assigning an int to int*?", "body": "<p><code>x</code> is a pointer to an <code>int</code>.  When you <code>x[5] = 3;</code> you actually get <code>*(x + 5) = 3;</code>, which advances the pointer and then dereferences it to get to the <code>int</code> it points to.</p>\n\n<p>With <code>y</code> you have the same thing, but <code>y</code> isn't a pointer to an <code>int</code>, it is a array of pointers to <code>int</code>.  That means <code>*(y + 5)</code> gives you an <code>int*&amp;</code> since the element type of the array is <code>int*</code>.  You can't assign an <code>int</code> to an <code>int*</code>, hence the error.</p>\n"}, {"tags": [], "owner": {"reputation": 314, "user_id": 12158779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/068c6ff1338e9d054f6aa1e8ac0f2bc9?s=128&d=identicon&r=PG&f=1", "display_name": "brj", "link": "https://stackoverflow.com/users/12158779/brj"}, "is_accepted": false, "score": 2, "last_activity_date": 1574282105, "creation_date": 1574282105, "answer_id": 58962953, "question_id": 58962853, "link": "https://stackoverflow.com/questions/58962853/why-this-assignment-is-correct-while-it-looks-like-assigning-an-int-to-int/58962953#58962953", "title": "Why this assignment is correct while it looks like assigning an int to int*?", "body": "<p>As pointed out by @Andrew Henle, <code>int* y[100];</code> is an array of pointers to int but <code>x</code> is a pointer to <code>int</code>.</p>\n\n<p>A helpful technique to parse any C declaration is to use the so called <a href=\"http://c-faq.com/decl/spiral.anderson.html\" rel=\"nofollow noreferrer\">Clockwise/Spiral rule</a>.</p>\n\n<p>Answers to this <a href=\"https://stackoverflow.com/questions/20635774/whats-the-difference-between-the-types-int-and-int-100-in-c\">question</a> are also helpful.</p>\n"}], "owner": {"reputation": 79, "user_id": 11815037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a6d516149d5d165f1c65b6b2a8b5bfe?s=128&d=identicon&r=PG&f=1", "display_name": "Mayar Karout", "link": "https://stackoverflow.com/users/11815037/mayar-karout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 58962917, "answer_count": 4, "score": 1, "last_activity_date": 1574284971, "creation_date": 1574281718, "question_id": 58962853, "link": "https://stackoverflow.com/questions/58962853/why-this-assignment-is-correct-while-it-looks-like-assigning-an-int-to-int", "title": "Why this assignment is correct while it looks like assigning an int to int*?", "body": "<p>The second assignment gives an error (a value of type \"int\" cannot be assigned to an entity of type \"int *\"), why isn't the same error showing up for the first assignment?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;bits/stdc++.h&gt;\n\nusing namespace std;\n\nint main()\n{\n    int* x = new int[100];\n    x[5] = 3;\n\n    int* y[100];\n    y[5] = 3;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "visual-c++", "covariance", "diamond-problem"], "comments": [{"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 1, "creation_date": 1574282456, "post_id": 58962770, "comment_id": 104181132, "body": "You should use <code>override</code> instead of <code>virtual</code> when overriding methods."}, {"owner": {"reputation": 31, "user_id": 12404373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45a7d1eb181721f99f0d5bc43cf708d?s=128&d=identicon&r=PG&f=1", "display_name": "Kouchy", "link": "https://stackoverflow.com/users/12404373/kouchy"}, "reply_to_user": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1574283846, "post_id": 58962770, "comment_id": 104181760, "body": "I tried to put override instead of virtual keyword and there is still the same compilation error."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1574734600, "post_id": 58962770, "comment_id": 104327632, "body": "Looks legit. Maybe reporting it as a bug would be more effective than looking for a solution here: <a href=\"https://docs.microsoft.com/en-us/cpp/overview/how-to-report-a-problem-with-the-visual-cpp-toolset?view=vs-2019\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/overview/&hellip;</a>"}], "owner": {"reputation": 31, "user_id": 12404373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45a7d1eb181721f99f0d5bc43cf708d?s=128&d=identicon&r=PG&f=1", "display_name": "Kouchy", "link": "https://stackoverflow.com/users/12404373/kouchy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 2, "answer_count": 0, "score": 3, "last_activity_date": 1574281386, "creation_date": 1574281386, "question_id": 58962770, "link": "https://stackoverflow.com/questions/58962770/implement-a-clone-method-with-covariance-and-diamond-inheritance-fails-with-msvc", "title": "Implement a clone method with covariance and diamond inheritance fails with MSVC C++ compiler", "body": "<p>I am trying to implement a clone method (deep copy) with covariance in the context of a diamond inheritance with a common base (this is why I need the virtual keyword in C1 and C2 classes declaration). It works pretty well if I have only typed template arguments but it does not compile anymore if I add non-typed template.</p>\n\n<p>To be more specific, the code compile with GCC, Clang and ICC but not with MSVC and I would like to keep the compatibility with this compiler...</p>\n\n<p>Here is the code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class C0\n{\npublic:\n    C0() = default;\n    virtual ~C0() = default;\n    virtual C0* clone() const { return new C0(); }\n    virtual void foo()  {  std::cout &lt;&lt; \"I'm C0!\" &lt;&lt; std::endl;  }\n};\n\ntemplate &lt;typename T = int&gt;\nclass C1 : virtual public C0\n{\npublic:\n    C1() = default;\n    virtual ~C1() = default;\n    // here I would like to return a C1&lt;T&gt;* but it seems that there is an unresolved bug with diamond inheritance and covariance in MSVC\n    virtual C0* clone() const { return new C1(); }\n    virtual void foo() { std::cout &lt;&lt; \"I'm C1!\" &lt;&lt; std::endl; }\n};\n\ntemplate &lt;typename T = int&gt;\nclass C2 : virtual public C0\n{\npublic:\n    C2() = default;\n    virtual ~C2() = default;\n    // here I would like to return a C2&lt;T&gt;* but it seems that there is an unresolved bug with diamond inheritance and covariance in MSVC\n    virtual C0* clone() const { return new C2(); }\n    virtual void foo() { std::cout &lt;&lt; \"I'm C2!\" &lt;&lt; std::endl; }\n};\n\ntemplate &lt;typename T = int&gt;\nclass C3 : public C1&lt;T&gt;, C2&lt;T&gt;\n{\npublic:\n    C3() : C0(), C1&lt;T&gt;(), C2&lt;T&gt;() {}\n    virtual ~C3() = default;\n    // here I would like to return a C3&lt;T&gt;* but there is an unresolved bug with diamond inheritance and covariance in MSVC\n    virtual C0* clone() const { return new C3(); }\n    virtual void foo() { std::cout &lt;&lt; \"I'm C3!\" &lt;&lt; std::endl; }\n};\n\ntemplate &lt;typename T&gt;\nusing proto = T (*)();\n\ntemplate &lt;typename T&gt;\nT func() { return (T)10; }\n\n// P is a non-typed template\ntemplate &lt;typename T = int, proto&lt;T&gt; P = func&gt;\nclass C4 : public C3&lt;T&gt;\n{\npublic:\n    C4() : C0(), C3&lt;T&gt;() {}\n    virtual ~C4() = default;\n    // here is my bug, I can't force MSVC to compile this function (even if I replace 'C4&lt;T,P&gt;*' 'by C3&lt;T&gt;*', note that it compiles with 'C0*' type')\n    virtual C4&lt;T,P&gt;* clone() const { return new C4(); }\n    virtual void foo() {  std::cout &lt;&lt; \"I'm C4 : \" &lt;&lt; P() &lt;&lt; \"!\" &lt;&lt; std::endl; }\n};\n\n// This code works (without the non-typed template param)\n/*\ntemplate &lt;typename T = int&gt;\nclass C4 : public C3&lt;T&gt;\n{\npublic:\n    C4() : C0(), C3&lt;T&gt;() {}\n    virtual ~C4() = default;\n    virtual C4&lt;T&gt;* clone() const { return new C4(); }\n    virtual void foo() {  std::cout &lt;&lt; \"I'm C4!\" &lt;&lt; std::endl; }\n};\n*/\n\nint main(int argc, char** argv)\n{\n    C0* ca = new C4&lt;&gt;();\n    C0* cb = ca-&gt;clone();\n\n    cb-&gt;foo();\n\n    delete ca;\n    delete cb;\n\n    return 0;\n}\n</code></pre>\n\n<p>If someone is interested to test this code, I made a repository on GitHub here: <a href=\"https://github.com/kouchy/clone_bug_msvc\" rel=\"nofollow noreferrer\">https://github.com/kouchy/clone_bug_msvc</a>.</p>\n\n<p>I tested the code on Visual Studio 2017 (MSVC 14.1) and 2019 (MSVC 14.2) and it fails on both compiler, the returned error is:</p>\n\n<pre><code>&gt;------ Build started: Project: CMakeLists, Configuration: Debug ------\n  [1/2] C:\\PROGRA~2\\MICROS~1\\2017\\COMMUN~1\\VC\\Tools\\MSVC\\1412~1.258\\bin\\HostX86\\x86\\cl.exe  /nologo /TP   /DWIN32 /D_WINDOWS /W3 /GR /EHsc /MDd /Zi /Ob0 /Od /RTC1 /showIncludes /FoCMakeFiles\\clone.dir\\src\\main.cpp.obj /FdCMakeFiles\\clone.dir\\ /FS -c C:\\Users\\ci\\source\\repos\\clone_bug_msvc\\src\\main.cpp\n  FAILED: CMakeFiles/clone.dir/src/main.cpp.obj \n  C:\\PROGRA~2\\MICROS~1\\2017\\COMMUN~1\\VC\\Tools\\MSVC\\1412~1.258\\bin\\HostX86\\x86\\cl.exe  /nologo /TP   /DWIN32 /D_WINDOWS /W3 /GR /EHsc /MDd /Zi /Ob0 /Od /RTC1 /showIncludes /FoCMakeFiles\\clone.dir\\src\\main.cpp.obj /FdCMakeFiles\\clone.dir\\ /FS -c C:\\Users\\ci\\source\\repos\\clone_bug_msvc\\src\\main.cpp\nC:\\Users\\ci\\source\\repos\\clone_bug_msvc\\src\\main.cpp(60): error C2062: type 'int' unexpected\n  ninja: build stopped: subcommand failed.\n</code></pre>\n\n<p>Any help will be greatly appreciated :-)!</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 33588, "user_id": 402169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2ec8fa642572c1d90a0dadf374811e4d?s=128&d=identicon&r=PG", "display_name": "tenfour", "link": "https://stackoverflow.com/users/402169/tenfour"}, "edited": false, "score": 1, "creation_date": 1574281428, "post_id": 58962738, "comment_id": 104180689, "body": "Please refer to <a href=\"https://stackoverflow.com/questions/17759757/multidimensional-stdarray\" title=\"multidimensional stdarray\">stackoverflow.com/questions/17759757/multidimensional-stdarr&zwnj;&#8203;ay</a>"}, {"owner": {"reputation": 579, "user_id": 3175478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d226ad76c20a10964496dc2be49dd5a6?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3175478/john"}, "edited": false, "score": 5, "creation_date": 1574281458, "post_id": 58962738, "comment_id": 104180705, "body": "<code>malloc(sizeof(int) * y * x * r);</code>?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1574281470, "post_id": 58962738, "comment_id": 104180709, "body": "I don&#39;t think there is a definitive answer to this (opinion based) but I would consider this technique (its a 2d array but could be extrapolated to a 3d) <a href=\"https://stackoverflow.com/questions/53038457/what-is-the-best-modern-c-approach-to-construct-and-manipulate-a-2d-array/53038618#53038618\" title=\"what is the best modern c approach to construct and manipulate a 2d array\">stackoverflow.com/questions/53038457/&hellip;</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1574281472, "post_id": 58962738, "comment_id": 104180710, "body": "If you want performance, the way to do it is like the second example <a href=\"https://stackoverflow.com/a/58915941/4342498\">here</a>.  Use a 1d vector and use math to pretend is has multiple dimensions.  There is lots of ways to do this but there are libraries that have already done so, so you should just get one of them."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574281497, "post_id": 58962738, "comment_id": 104180720, "body": "Are you sure you want to ask about C++ and not C? Because you shouldn&#39;t use <code>malloc</code>/<code>free</code> in C++, instead use <code>new[]</code>/<code>delete[]</code>. Also in C++ you would idiomatically not use manual dynamic memory allocation at all, but <code>std::vector</code> instead."}, {"owner": {"reputation": 519, "user_id": 9549835, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Felipe Gutierrez", "link": "https://stackoverflow.com/users/9549835/felipe-gutierrez"}, "edited": false, "score": 0, "creation_date": 1574281503, "post_id": 58962738, "comment_id": 104180723, "body": "Can&#39;t you use new? Isn&#39;t it safer than malloc?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1574281647, "post_id": 58962738, "comment_id": 104180776, "body": "Even if I were to take the 3-star programmer approach like you have I would allocate the entire memory for the array as a single block and then store pointers into that contiguous block into a 2d array."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574282010, "post_id": 58962738, "comment_id": 104180932, "body": "&quot;What&#39;s the most idiomatic way to allocate a 3D array in C++?&quot; - not with manual memory management, that&#39;s for sure. And <code>malloc</code>/<code>free</code> in a C++ program, really? Use <code>std::array</code> or <code>std::vector</code>. Or <i>at least</i> use smart pointers. This is wrong in <i>so many</i> ways it&#39;s not even funny."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1574282422, "post_id": 58962738, "comment_id": 104181119, "body": "I would say the most idomatic way to allocate a 3D array is to not do it. Or in other words, use a flat 1D array and then map indices to whatever dimension you like"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574282443, "post_id": 58962738, "comment_id": 104181128, "body": "You could also <a href=\"https://stackoverflow.com/questions/52068410/allocating-a-large-memory-block-in-c/52069368#52069368\">try this</a>.  Note that all failures are rolled-back, unlike your attempt."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 33588, "user_id": 402169, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2ec8fa642572c1d90a0dadf374811e4d?s=128&d=identicon&r=PG", "display_name": "tenfour", "link": "https://stackoverflow.com/users/402169/tenfour"}, "edited": false, "score": 1, "creation_date": 1574284145, "post_id": 58962738, "comment_id": 104181881, "body": "The answer to the article linked by @tenfour is the correct one. An idiomatic array equivalent to C&#39;s array in C++ is to use <code>std::array&lt;T,N&gt;</code>, as it works the same way as a C array does, but has lovely zero-cost methods to access properties. An idiomatic multi-dimensional array, is, therefore, an <code>std::array</code> of <code>std::array</code>s (and so forth for all X dimensions). It won&#39;t fail due to <code>bad_alloc</code> if you define it on the stack (but you might run out of stack space). Memory&#39;s never free, alas."}, {"owner": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "reply_to_user": {"reputation": 579, "user_id": 3175478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d226ad76c20a10964496dc2be49dd5a6?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3175478/john"}, "edited": false, "score": 0, "creation_date": 1574286654, "post_id": 58962738, "comment_id": 104182920, "body": "@John that just allocates a big contiguous array, right? I want to be able to access the array multi-dimensionally."}, {"owner": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "reply_to_user": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1574286993, "post_id": 58962738, "comment_id": 104183068, "body": "@parktomatomi don&#39;t you need to know the size statically though?"}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1574287141, "post_id": 58962738, "comment_id": 104183119, "body": "The ISO C++ folks have been punting on <code>std::make_array</code> for ages now: <a href=\"https://en.cppreference.com/w/cpp/experimental/make_array\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/experimental/make_array</a>. But you can make one yourself to infer the array size from the initialization. See &quot;possible implementation&quot; from that link."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1574297352, "post_id": 58962738, "comment_id": 104186186, "body": "@nz_21 Hey, you might be interested in this gsl class: <a href=\"https://stackoverflow.com/questions/45201524/what-is-gslmulti-span-to-be-used-for\" title=\"what is gslmulti span to be used for\">stackoverflow.com/questions/45201524/&hellip;</a> , which adds a multidimensional index over a block of contiguous data"}], "answers": [{"comments": [{"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 1, "creation_date": 1574346720, "post_id": 58974629, "comment_id": 104207725, "body": "<code>std::vector&lt;int&gt;&gt;(ySize, std::vector&lt;int&gt;(zSize,initialValue)</code> This is gonna map every row to the same vector. Sadly, you need to manually create a vector for each row."}, {"owner": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "reply_to_user": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 1, "creation_date": 1574348049, "post_id": 58974629, "comment_id": 104208590, "body": "@parktomatomi no, the vectors are copied, no references are being stored. I upvoted the comment by mistake and now cannot back of."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1574348099, "post_id": 58974629, "comment_id": 104208623, "body": "Oh, clever. Thanks for clarifying."}], "tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": true, "score": 0, "last_activity_date": 1574337857, "creation_date": 1574337857, "answer_id": 58974629, "question_id": 58962738, "link": "https://stackoverflow.com/questions/58962738/whats-the-most-idiomatic-way-to-allocate-a-3d-array-in-c/58974629#58974629", "title": "What&#39;s the most idiomatic way to allocate a 3D array in C++?", "body": "<p>Some strong recommendations for arrays in C++</p>\n\n<ul>\n<li>You must NOT use malloc and free in C++</li>\n<li>You should not even use NEW and DELETE any longer</li>\n<li>You should <strong>never</strong> use raw pointers for owned memory. Please use <code>std::unique_ptr</code> or <code>std::shared_ptr</code> instead.</li>\n</ul>\n\n<p>So, never use the functions as shown above (allocate3DArray, free3d)</p>\n\n<p>Ok. So, now we want to switch to <code>std::array</code> and you are wondering about the error messages. They are rather clear, as shown in your example. A <code>std::array</code> has a static size. It is not dynamic. So you need to give a compile time constant to define the size.</p>\n\n<p>What you are looking for is a <code>std::vector</code>. It is dynamic, can grow in size and has also an index operator.</p>\n\n<p>It can be used with the index operator <code>[]</code> without restrictions.</p>\n\n<p>Please see the following example</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    // Dimensions for the 3 dimensional vector\n    size_t xSize{3};\n    size_t ySize{4};\n    size_t zSize{5};\n    int initialValue{0};\n\n    // Define 3 dimensional vector and initialize it.\n    std::vector&lt;std::vector&lt;std::vector&lt;int&gt;&gt;&gt; array3d(xSize, std::vector&lt;std::vector&lt;int&gt;&gt;(ySize, std::vector&lt;int&gt;(zSize,initialValue)));\n\n    array3d[1][2][3] = 42;\n\n    std::cout &lt;&lt; \"Result: \" &lt;&lt; array3d[1][2][3] &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1073, "user_id": 3763139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gkUYr.jpg?s=128&g=1", "display_name": "Sopel", "link": "https://stackoverflow.com/users/3763139/sopel"}, "is_accepted": false, "score": 2, "last_activity_date": 1574347777, "creation_date": 1574347777, "answer_id": 58977663, "question_id": 58962738, "link": "https://stackoverflow.com/questions/58962738/whats-the-most-idiomatic-way-to-allocate-a-3d-array-in-c/58977663#58977663", "title": "What&#39;s the most idiomatic way to allocate a 3D array in C++?", "body": "<p>You want a 3-dimensional array with a cuboid shape. What you currently have is a jagged array. Every lane can have independent size, and is allocated separately. This creates 3(4) problems:</p>\n\n<ol>\n<li>The number of allocations is x*y+1</li>\n<li>Reading any elements requires 3 indirect memory loads.</li>\n<li>Uses more storage than needed, since pointer to each allocated region needs to be kept.</li>\n<li>Your code also requires manually handling the memory</li>\n</ol>\n\n<p>For the same reasons the solution using vectors is also bad. It only solves one problem - manual allocation and deallocation. Otherwise it's even worse because it stores more redundant data.</p>\n\n<p>What you want is to abstract a contiguous memory range such that it can be interpreted as a 3d array.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;cstdint&gt;\n\ntemplate &lt;typename T&gt;\nstruct Array3\n{\n    Array3(size_t w, size_t h, size_t d) :\n        m_data(std::make_unique&lt;T[]&gt;(w*h*d)),\n        m_width(w),\n        m_height(h),\n        m_depth(d)\n    {\n    }\n\n    T&amp; operator()(size_t x, size_t y, size_t z)\n    {\n        return m_data[(x * m_height + y) * m_depth + z];\n    }\n\n    const T&amp; operator()(size_t x, size_t y, size_t z) const\n    {\n        return m_data[(x * m_height + y) * m_depth + z];\n    }\n\n    size_t width() const\n    {\n        return m_width;\n    }\n\n    size_t height() const\n    {\n        return m_height;\n    }\n\n    size_t depth() const\n    {\n        return m_depth;\n    }\n\n    T* data()\n    {\n        return m_data.get();\n    }\n\n    const T* data() const\n    {\n        return m_data.get();\n    }\n\nprivate:\n    std::unique_ptr&lt;T[]&gt; m_data;\n    std::size_t m_width;\n    std::size_t m_height;\n    std::size_t m_depth;\n};\n\n\nint main()\n{\n    Array3&lt;int&gt; a(10, 20, 30);\n    a(5, 10, 15) = 123;\n    std::cout &lt;&lt; a(5, 10, 15);\n}\n</code></pre>\n\n<p>Access is done with operator () instead of []. It can be done with [], but requires more boilerplate code and proxy objects.</p>\n"}], "owner": {"reputation": 2932, "user_id": 7212809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VlOyJEUeeSc/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jExBae7iJ2ALFtcMj_6BCoHGTMgw/mo/photo.jpg?sz=128", "display_name": "nz_21", "link": "https://stackoverflow.com/users/7212809/nz-21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 2, "accepted_answer_id": 58974629, "answer_count": 2, "score": 2, "last_activity_date": 1574347777, "creation_date": 1574281248, "last_edit_date": 1574286333, "question_id": 58962738, "link": "https://stackoverflow.com/questions/58962738/whats-the-most-idiomatic-way-to-allocate-a-3d-array-in-c", "title": "What&#39;s the most idiomatic way to allocate a 3D array in C++?", "body": "<p>I have the following to code to allocate the 3d array:</p>\n\n<pre><code>\nint ***allocate3DArray(int y, int x, int r) {\n    int ***array = (int ***) malloc(sizeof(int **) * y);\n    for (int i = 0; i &lt; y; i++) {\n        array[i] = (int **) malloc(sizeof(int *) * x);\n        for (int j = 0; j &lt; x; j++) {\n            array[i][j] = (int *) malloc(sizeof(int) * r);\n            for (int k = 0; k &lt; r; k++) {\n                array[i][j][k] = 0;\n            }\n        }\n    }\n    return array;\n\n}\n\n\nvoid free3d(int ***arr, int y, int x, int r) {\n    for (int i = 0; i &lt; y; i++) {\n        for (int j = 0; j &lt; x; j++) {\n            free(arr[i][j]);\n        }\n        free(arr[i]);\n\n    }\n    free(arr);\n\n}\n\n</code></pre>\n\n<p>This seems a bit clunky and it's difficult to do error-handling if I malloc fails. </p>\n\n<p>That said, it's quite ergonomic because I can simply access an element like so: <code>int a = arr[x][y][z]</code></p>\n\n<p>What would be the  best way to initialize a 3d array that gives the same ergonomic flexibility while mitigating some of the above drawbacks?</p>\n\n<p>I tried this:</p>\n\n<pre><code>    std::array &lt; std::array &lt; std::array &lt; int, radius &gt;, image.cols &gt;, image.rows &gt; houghSpace;\n\n</code></pre>\n\n<p>but I got an error:</p>\n\n<pre><code> error: non-type template argument is not a constant expression\n    std::array &lt; std::array &lt; std::array &lt; int, radius &gt;, image.cols &gt;, image.rows &gt; houghSpace;\n                                                ^~~~~~\nsobel.cpp:117:49: note: initializer of 'radius' is not a constant expression\nsobel.cpp:116:15: note: declared here\n    const int radius = image.rows / 2;\n              ^\nsobel.cpp:117:71: error: expected a type\n    std::array &lt; std::array &lt; std::array &lt; int, radius &gt;, image.cols &gt;, image.rows &gt; houghSpace;\n                                                                      ^\nsobel.cpp:117:86: error: C++ requires a type specifier for all declarations\n    std::array &lt; std::array &lt; std::array &lt; int, radius &gt;, image.cols &gt;, image.rows &gt; houghSpace;\n                                                                                     ^\n\n</code></pre>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1574281272, "post_id": 58962664, "comment_id": 104180621, "body": "Why is this tagged &quot;C++&quot; if you are asking about &quot;C&quot;? They are <i>very</i> different languages."}, {"owner": {"reputation": 13, "user_id": 3551994, "user_type": "registered", "profile_image": "https://graph.facebook.com/589929205/picture?type=large", "display_name": "user3551994", "link": "https://stackoverflow.com/users/3551994/user3551994"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1574281391, "post_id": 58962664, "comment_id": 104180670, "body": "Because my phone has removed the ++ for some reason. Editing now, thanks."}, {"owner": {"reputation": 3828, "user_id": 2137417, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/792918317c06a7c76f7f88390d003d93?s=128&d=identicon&r=PG", "display_name": "jstuartmilne", "link": "https://stackoverflow.com/users/2137417/jstuartmilne"}, "edited": false, "score": 0, "creation_date": 1574281791, "post_id": 58962664, "comment_id": 104180842, "body": "that <code>start:</code> should be a comment right?"}, {"owner": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "edited": false, "score": 0, "creation_date": 1574281805, "post_id": 58962664, "comment_id": 104180849, "body": "It is the loop function that is executing again and again. Your <code>trigger</code> function should set up parameters for <code>loop</code>. When <code>stepDown</code> returns, the control is back to <code>loop</code> function. Then it can parse your parameters and go to where you want."}, {"owner": {"reputation": 13, "user_id": 3551994, "user_type": "registered", "profile_image": "https://graph.facebook.com/589929205/picture?type=large", "display_name": "user3551994", "link": "https://stackoverflow.com/users/3551994/user3551994"}, "reply_to_user": {"reputation": 3828, "user_id": 2137417, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/792918317c06a7c76f7f88390d003d93?s=128&d=identicon&r=PG", "display_name": "jstuartmilne", "link": "https://stackoverflow.com/users/2137417/jstuartmilne"}, "edited": false, "score": 0, "creation_date": 1574283082, "post_id": 58962664, "comment_id": 104181430, "body": "@jstuartmilne, nope, it shouldn&#39;t even be there. I was trying a goto but then decided against it."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3551994, "user_type": "registered", "profile_image": "https://graph.facebook.com/589929205/picture?type=large", "display_name": "user3551994", "link": "https://stackoverflow.com/users/3551994/user3551994"}, "edited": false, "score": 0, "creation_date": 1574282760, "post_id": 58962978, "comment_id": 104181270, "body": "Ahhhhh, I see what you mean. Poor coding there lol. Any suggestions on how to fix that?"}, {"owner": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "reply_to_user": {"reputation": 13, "user_id": 3551994, "user_type": "registered", "profile_image": "https://graph.facebook.com/589929205/picture?type=large", "display_name": "user3551994", "link": "https://stackoverflow.com/users/3551994/user3551994"}, "edited": false, "score": 0, "creation_date": 1574284384, "post_id": 58962978, "comment_id": 104181987, "body": "@user3551994 change <code>seconds &gt;= 0</code> to <code>seconds &gt; 0</code>"}, {"owner": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "reply_to_user": {"reputation": 13, "user_id": 3551994, "user_type": "registered", "profile_image": "https://graph.facebook.com/589929205/picture?type=large", "display_name": "user3551994", "link": "https://stackoverflow.com/users/3551994/user3551994"}, "edited": false, "score": 0, "creation_date": 1574285102, "post_id": 58962978, "comment_id": 104182284, "body": "<code>timer</code> function while loop condition."}, {"owner": {"reputation": 13, "user_id": 3551994, "user_type": "registered", "profile_image": "https://graph.facebook.com/589929205/picture?type=large", "display_name": "user3551994", "link": "https://stackoverflow.com/users/3551994/user3551994"}, "edited": false, "score": 0, "creation_date": 1574285378, "post_id": 58962978, "comment_id": 104182393, "body": "Ah so I do lol. Thank you Bruce. Now it counts to 1 and stops lol"}, {"owner": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "reply_to_user": {"reputation": 13, "user_id": 3551994, "user_type": "registered", "profile_image": "https://graph.facebook.com/589929205/picture?type=large", "display_name": "user3551994", "link": "https://stackoverflow.com/users/3551994/user3551994"}, "edited": false, "score": 0, "creation_date": 1574286500, "post_id": 58962978, "comment_id": 104182845, "body": "Please consider accepting the answer if it solves your problem"}, {"owner": {"reputation": 13, "user_id": 3551994, "user_type": "registered", "profile_image": "https://graph.facebook.com/589929205/picture?type=large", "display_name": "user3551994", "link": "https://stackoverflow.com/users/3551994/user3551994"}, "edited": false, "score": 0, "creation_date": 1574286518, "post_id": 58962978, "comment_id": 104182852, "body": "Ah don&#39;t worry, I had a bit of code that shouldn&#39;t be there, now all works fine - thank you so much"}], "tags": [], "owner": {"reputation": 482, "user_id": 6105985, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-lEqxGMHWDuM/AAAAAAAAAAI/AAAAAAAAACU/VsqqqzUhbNI/photo.jpg?sz=128", "display_name": "Bruce Shen", "link": "https://stackoverflow.com/users/6105985/bruce-shen"}, "is_accepted": true, "score": 0, "last_activity_date": 1574282227, "creation_date": 1574282227, "answer_id": 58962978, "question_id": 58962664, "link": "https://stackoverflow.com/questions/58962664/running-a-timer-code-which-gets-stuck-at-zero/58962978#58962978", "title": "Running a timer code which gets stuck at zero", "body": "<p>In your <code>timer</code> function. You have a loop condition <code>hours &gt; 0 || minutes &gt; 0 || seconds &gt;= 0</code>. Since your <code>seconds</code> is always greater than 0, you have a infinite loop in <code>timer</code>.</p>\n\n<p>As you can see, seconds does not decrease seconds == 0.</p>\n\n<pre><code>void stepDown() {\n  if (seconds &gt; 0) {\n    seconds -= 1;\n  } else {\n    if (minutes &gt; 0) {\n      seconds = 59;\n      minutes -= 1;\n    } else {\n      if (hours &gt; 0) {\n        seconds = 59;\n        minutes = 59;\n        hours -= 1;\n      } else {\n        //trigger();\n      }\n    }\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3551994, "user_type": "registered", "profile_image": "https://graph.facebook.com/589929205/picture?type=large", "display_name": "user3551994", "link": "https://stackoverflow.com/users/3551994/user3551994"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 58962978, "answer_count": 1, "score": 1, "last_activity_date": 1574282227, "creation_date": 1574281024, "last_edit_date": 1574281298, "question_id": 58962664, "link": "https://stackoverflow.com/questions/58962664/running-a-timer-code-which-gets-stuck-at-zero", "title": "Running a timer code which gets stuck at zero", "body": "<p>OK so firstly, I am VERY new to C++ as you will undoubtedly see from the code. I have been struggling with this to get it to where it is now so my apologies if it's not very good. </p>\n\n<p>Ok here is what SHOULD happen. </p>\n\n<p>Button 2 (downButton) is pressed to select the correct program (that works). \nButton 3 (startButton) is used to start the timer for that program (that works)\nThe timer is supposed to count down (also working) and when it reaches zero, display a message and then go back to the start of the switch case. </p>\n\n<p>This is what I am struggling with. Firstly the timer gets to zero and does nothing else. I have tried return, goto etc without any success. </p>\n\n<p>I commented out the end message function, which does work BUT still gets stuck there without exiting the function. </p>\n\n<p>What I am looking for is a little help to make the timer jump back to where it was called from. </p>\n\n<p>Here is the code:</p>\n\n<pre><code>#include &lt;Wire.h&gt;\n#include &lt;LiquidCrystal.h&gt;\n\nLiquidCrystal lcd(12, 11, 5, 4, 3, 2);\n\nint hours = 0; // start hours\nint minutes = 00; //start min\nint seconds = 05; //start seconds\n\nconst int buttonPin = 9;      // the pin that the pushbutton is attached to\nconst int ledPin    = A0;     // the pin that the LED is attached to\nconst int ledPin2    = A1;     // the pin that the LED is attached to\n\nint buttonState     = 0;      // current state of the button\n\nint WhichScreen = 0;  // This variable stores the current Screen number\nboolean hasChanged = true;\nconst int upButton = 8;  // the number of the select pin\nconst int downButton = 10;  // the number of the select pin\nconst int startButton = 9;   // the number of the start pin\n\n\nint selectState;             // the current reading from the select pin\nint lastSelectState = LOW;   // the previous reading from the select pin\nint backState;             // the current reading from the select pin\nint lastBackState = LOW;   // the previous reading from the select pin\nint startState;             // the current reading from the start pin\nint lastStartState = LOW;   // the previous reading from the start pin\n\nunsigned long lastDebounceTime = 0;  // the last time the output pin was toggled\nunsigned long debounceDelay = 50;    // the debounce time; increase if the output flickers\n\nvoid setup()\n{\n  Serial.begin(9600);\n  pinMode(buttonPin, INPUT);  // initialize the button pin as a input\n  pinMode(ledPin, OUTPUT);    // initialize the button pin as a output\n  pinMode(ledPin2, OUTPUT);    // initialize the button pin as a output\n  lcd.begin(16, 2);\n  pinMode(upButton, INPUT);\n  pinMode(startButton, INPUT);\n  pinMode(downButton, INPUT);\n  pinMode(A0, OUTPUT);    // LED 1\n  pinMode(A1, OUTPUT);    // LED 2\n  pinMode(A2, OUTPUT);    // LED 3\n\n}\nvoid loop()\n{\nstart:\n  // Read the SELECT pin\n  if (WhichScreen == 1) {\n    buttonState = digitalRead(buttonPin);\n\n    if (buttonState == HIGH) {\n\n      digitalWrite(ledPin, buttonState);\n      delay(2000);\n      digitalWrite(ledPin, LOW);\n    }\n  }\n\n\n  if (WhichScreen == 4) {\n    buttonState = digitalRead(buttonPin);\n\n    if (buttonState == HIGH) {\n\n      //   digitalWrite(ledPin2, buttonState);\n      //   delay(5000);\n      //   digitalWrite(ledPin2, LOW);\n\n      lcd.begin(16, 2);\n\n      minutes = 00; //start min\n      seconds = 05; //start seconds\n      digitalWrite(ledPin, buttonState);\n      lcd.print(\"P1-AMBER\");\n      timer();\n\n// Function SHOULD return to here when reaches zero\n\n      digitalWrite(ledPin, LOW);\n      minutes = 00; //start min\n      seconds = 05; //start seconds\n      lcd.print(\"P1-DARK RED\");\n      timer();\n    }\n  }\n\n\n\n\n\n  if (hasChanged == true) {\n\n    switch (WhichScreen) {\n\n      case 0:\n        {\n          lcd.clear();\n          lcd.setCursor(2, 0); // Column, line\n          lcd.print(\"LIGHT THERAPY\");\n          lcd.setCursor(2, 1);\n          lcd.print(\"PANEL   V1.01\");\n          delay(2500);    // will be removed once relays are installed\n          lcd.clear();\n          lcd.setCursor(4, 0); // Column, line\n          lcd.print(\"WELCOME\");\n          lcd.setCursor(1, 1);\n          lcd.print(\"GARY &amp; TRACEY\");\n          delay(2500);    // will be removed once relays are installed\n          WhichScreen++;\n          program1();\n        }\n        break;\n\n      case 1:\n        {\n          program1();\n\n        }\n        break;\n\n      case 2:\n        {\n          program2();\n        }\n        break;\n\n      case 3:\n        {\n          program3();\n        }\n        break;\n\n      case 4:\n        {\n          program4();\n        }\n        break;\n\n      case 5:\n        {\n          program5();\n        }\n        break;\n\n      case 6:\n        {\n          program6();\n        }\n        break;\n\n      case 7:\n        {\n          program7();\n        }\n        break;\n\n      case 8:\n        {\n          program8();\n        }\n        break;\n\n      case 9:\n        {\n          program9();\n        }\n        break;\n\n    }\n  }\n\n  //-------------------------------\n  // BEGIN of the switch debouncing code\n  int reading = digitalRead(upButton);\n  if (reading != lastSelectState) {\n    // reset the debouncing timer\n    lastDebounceTime = millis();\n  }\n\n  if ((millis() - lastDebounceTime) &gt; debounceDelay) {\n    // whatever the reading is at, it's been there for longer\n    // than the debounce delay, so take it as the actual current state:\n\n    // if the button state has changed:\n    if (reading != selectState) {\n      selectState = reading;\n\n      // only toggle the LED if the new button state is HIGH\n      if (selectState == HIGH) {\n        hasChanged = true;\n        WhichScreen++;\n\n\n      }\n\n\n    } else {\n      hasChanged = false;\n    }\n  }\n  lastSelectState = reading;\n  // END of the switch Debouncing code\n  // --------------------------------------\n  if (WhichScreen &gt; 9) {\n    WhichScreen = 1;\n  }\n}\n\nvoid program1()\n{\n  lcd.clear();\n  lcd.setCursor(1, 0); // Column, line\n  lcd.print(\"PROGRAM 1 (P1)\");\n  lcd.setCursor(3, 1);\n  lcd.print(\"14 Minutes\");\n}\nvoid program2()\n{\n  lcd.clear();\n  lcd.setCursor(1, 0); // Column, line\n  lcd.print(\"PROGRAM 2 (P2)\");\n  lcd.setCursor(3, 1);\n  lcd.print(\"14 Minutes\");\n}\nvoid program3()\n{\n  lcd.clear();\n  lcd.setCursor(1, 0); // Column, line\n  lcd.print(\"PROGRAM 3 (P3)\");\n  lcd.setCursor(3, 1);\n  lcd.print(\"14 Minutes\");\n}\nvoid program4()\n{\n  lcd.clear();\n  lcd.setCursor(1, 0); // Column, line\n  lcd.print(\"PROGRAM 4 (P4)\");\n  lcd.setCursor(3, 1);\n  lcd.print(\"14 Minutes\");\n}\nvoid program5()\n{\n  lcd.clear();\n  lcd.setCursor(1, 0); // Column, line\n  lcd.print(\"PROGRAM 5 (P5)\");\n  lcd.setCursor(3, 1);\n  lcd.print(\"14 Minutes\");\n}\nvoid program6()\n{\n  lcd.clear();\n  lcd.setCursor(1, 0); // Column, line\n  lcd.print(\"PROGRAM 6 (P6)\");\n  lcd.setCursor(3, 1);\n  lcd.print(\"14 Minutes\");\n}\nvoid program7()\n{\n  lcd.clear();\n  lcd.setCursor(1, 0); // Column, line\n  lcd.print(\"PROGRAM 7 (P7)\");\n  lcd.setCursor(3, 1);\n  lcd.print(\"14 Minutes\");\n}\nvoid program8()\n{\n  lcd.clear();\n  lcd.setCursor(1, 0); // Column, line\n  lcd.print(\"PROGRAM 8 (P8)\");\n  lcd.setCursor(3, 1);\n  lcd.print(\"14 Minutes\");\n}\nvoid program9()\n{\n  lcd.clear();\n  lcd.setCursor(1, 0); // Column, line\n  lcd.print(\"PROGRAM 9 (P9)\");\n  lcd.setCursor(3, 1);\n  lcd.print(\"14 Minutes\");\n}\nvoid stepDown() {\n  if (seconds &gt; 0) {\n    seconds -= 1;\n  } else {\n    if (minutes &gt; 0) {\n      seconds = 59;\n      minutes -= 1;\n    } else {\n      if (hours &gt; 0) {\n        seconds = 59;\n        minutes = 59;\n        hours -= 1;\n      } else {\n        //trigger();\n      }\n    }\n  }\n}\n\n\nvoid timer() {\n  delay(150);\n  while (hours &gt; 0 || minutes &gt; 0 || seconds &gt;= 0) {\n\n    lcd.setCursor(0, 2);\n\n    //(hours &lt; 10) ? lcd.print(\"0\") : NULL;\n    // lcd.print(hours);\n    //lcd.print(\":\");\n    lcd.print(\"TIME LEFT: \");\n    (minutes &lt; 10) ? lcd.print(\"0\") : NULL;\n\n    lcd.print(minutes);\n    lcd.print(\":\");\n    (seconds &lt; 10) ? lcd.print(\"0\") : NULL;\n    lcd.print(seconds);\n    lcd.display();\n    stepDown();\n    delay(1000);\n\n  }\n}\n\nvoid trigger() {\n  lcd.clear(); // clears the screen and buffer\n  lcd.setCursor(6, 0); // set timer position on lcd for end.\n  lcd.print(\"TIMES UP\");\n  lcd.setCursor(6, 1); // set timer position on lcd for end.\n  lcd.print(\"NUMBER 4\");\n  delay(1000);\n  lcd.display();\n\n}\n\n</code></pre>\n\n<p>Sorry it's a bit messy and all over the place, I'm also sure it's not flowing very well either but it works mostly lol. </p>\n\n<p>Any and all help much appreciated, and thank you in advance. </p>\n"}, {"tags": ["c++", "dependencies", "c++17", "multiple-constructors"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 1, "creation_date": 1574280505, "post_id": 58962405, "comment_id": 104180265, "body": "Which code duplication are you afraid of?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1574280533, "post_id": 58962405, "comment_id": 104180273, "body": "You need to add constructors to <code>Base</code> if you want to change how you are constructing it."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574280754, "post_id": 58962405, "comment_id": 104180373, "body": "what duplication exactly do you want to avoid? Some extra code is necessary, but it is not clear what would be too much in your opinion"}, {"owner": {"reputation": 43, "user_id": 11430360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727939ffd90360184515eabf667006fa?s=128&d=identicon&r=PG&f=1", "display_name": "brbusby", "link": "https://stackoverflow.com/users/11430360/brbusby"}, "edited": false, "score": 0, "creation_date": 1574281391, "post_id": 58962405, "comment_id": 104180669, "body": "I&#39;ve edited to include an example solution, showing the duplication."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574280822, "post_id": 58962599, "comment_id": 104180407, "body": "this will not use the default initial values from <code>Base</code> in any case"}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574280942, "post_id": 58962599, "comment_id": 104180465, "body": "Yeah, that&#39;s true, unless adds another constructor inside <code>Base</code> that uses the private one. I just wanted to point that out about default constructor behavior. I&#39;ll think of a better way to phrase that."}], "tags": [], "owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "is_accepted": false, "score": 0, "last_activity_date": 1574280849, "last_edit_date": 1574280849, "creation_date": 1574280763, "answer_id": 58962599, "question_id": 58962405, "link": "https://stackoverflow.com/questions/58962405/two-members-default-initialized-in-base-possibly-non-default-initialized-in-de/58962599#58962599", "title": "Two members, default initialized in Base, possibly non-default initialized in Derived", "body": "<p>You can pass the arguments to private members 1 &amp; 2 with a protected constructor. This will keep those members shielded without giving the derived classes full access to them.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class Base\n{\nprivate:\n   Base();\nprotected:\n   Base(Type1 overrideOfType1, Type2 overrideOfType2) { }\nprivate:\n   Type1 m_ofType1;\n   Type2 m_ofType2;\n};\n\nclass Derived : public Base\n{\npublic:\n   Derived() : Base(Type1{}, Type2{}) { }\n\n   Derived(Type1 overrideOfType1) : Base(overrideOfType1, Type2{}) { }\n\n   Derived(Type2 overrideOfType2) : Base(Type1{}, overrideOfType2) { }\n};\n</code></pre>\n\n<p>Oh, and by the way, members are initialized with the default constructor if they have one automatically, so you don't need to be explicit for the empty base constructor. For instance, if the default constructor of <code>Base</code> was accessible, you could just define:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Base::Base() = default;\n</code></pre>\n\n<p>And the members would have their default values.</p>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 2, "last_activity_date": 1574281989, "last_edit_date": 1574281989, "creation_date": 1574281131, "answer_id": 58962704, "question_id": 58962405, "link": "https://stackoverflow.com/questions/58962405/two-members-default-initialized-in-base-possibly-non-default-initialized-in-de/58962704#58962704", "title": "Two members, default initialized in Base, possibly non-default initialized in Derived", "body": "<p>I think the <code>Derived</code> is close to being a red herring. Basically you are asking for 3 ways to construct a <code>Base</code> and to do that it is <code>Base</code> that has to provide appropriate constructors, something along the line of:</p>\n\n<pre><code>struct Base {\n   Type1 m_ofType1{defaultExpr1};\n   Type2 m_ofType2{defaultExpr2};\n   Base() = default;\n   Base(Type1 x) : m_ofType1(x) {}\n   Base(Type2 x) : m_ofType2(x) {}\n};\n</code></pre>\n\n<p>Default initializers (<code>defaultExpr1</code> and <code>defaultExpr2</code>) can be overriden by initializers in the constructors initializer list. </p>\n\n<p>Now add access restrictions and derived classes calling those constructor as you wish (perhaps making the last two protected and data members private). To stay with your example that would be </p>\n\n<pre><code> struct Derived : Base {\n    Derived(Type1 x) : Base(x) {}\n    Derived(Type2 x) : Base(x) {}\n };\n</code></pre>\n\n<p>I doubt you can get it any shorter than this. </p>\n"}], "owner": {"reputation": 43, "user_id": 11430360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727939ffd90360184515eabf667006fa?s=128&d=identicon&r=PG&f=1", "display_name": "brbusby", "link": "https://stackoverflow.com/users/11430360/brbusby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574281989, "creation_date": 1574279886, "last_edit_date": 1574281349, "question_id": 58962405, "link": "https://stackoverflow.com/questions/58962405/two-members-default-initialized-in-base-possibly-non-default-initialized-in-de", "title": "Two members, default initialized in Base, possibly non-default initialized in Derived", "body": "<p>I have a base class with a default constructor.</p>\n\n<pre><code>class Base\n{\npublic:\n   Base();\nprivate:\n   Type1 m_ofType1;\n   Type2 m_ofType2;\n}\n\nBase::Base()\n   : m_ofType1(defaultExpr1)\n   , m_ofType2(defaultExpr2)\n{\n}\n</code></pre>\n\n<p>And I have a derived class, which may be:</p>\n\n<ul>\n<li>default constructed, with m_ofType1 and m_ofType2 being initialized by their respective default expressions,</li>\n<li>provided with a Type1 only, or</li>\n<li>provided with a Type2 only.</li>\n</ul>\n\n<pre><code>class Derived : public base\n{\npublic:\n   Derived(); // m_ofType1 and m_ofType2 will be initialized with their default expressions.\n\n   Derived(Type1 overrideOfType1); // m_ofType1 will be initialized with overrideOfType1 and m_ofType2 will be initialized with its default expression.\n\n   Derived(Type2 overrideOfType2); // m_ofType1 will be initialized with its default expression and m_ofType2 will be initialized with overrideOfType2.\n}\n</code></pre>\n\n<p>Base is for Production code and Derived is for test code.  I would like to implement the constructors without data or code duplication, but I can't see how.</p>\n\n<p>Given the constraints, which I hope have been made clear, do you all know how to implement the above constructors without data or code duplication?</p>\n\n<p>Example of code duplication:</p>\n\n<p>We could add protected constructors to base:</p>\n\n<pre><code>Base(Type1);\nBase(Type2);\n</code></pre>\n\n<p>That means that the Derived constructors would just forward the call to their respective Base constructors.</p>\n\n<pre><code>Derrived::Derrived()\n   : Base()\n{\n}\n\nDerived::Derived(Type1 overrideOfType1)\n   : Base(overrideOfType1)\n{\n}\n\nDerived::Derived(Type1 overrideOfType2)\n   : Base(overrideOfType2)\n{\n}\n</code></pre>\n\n<p>In doing this, the question changes a little.  How do you implement the Base constructors without data or code duplication.</p>\n\n<p>Here's my best attempt at doing this.  It doesn't work, and I'll show you why.</p>\n\n<p>First, add another constructor to Base:</p>\n\n<pre><code>Base(Type1 ofType1, Type2 ofType2);\n\n</code></pre>\n\n<p>Base::Base()\n   : Base(defaultExpr1, defaultExpr2)\n{\n}</p>\n\n<p>Base::Base(Type1 overrideOfType1)\n   : Base(overrideOfType1, defaultExpr2)\n{\n}</p>\n\n<p>Base::Base(Type2 overrideOfType2)\n   : Base(defaultExpr1, overrideOfType2)\n{\n}</p>\n\n<p>Base::Base(Type1 ofType1, Type1 ofType2)\n   : m_ofType1(ofType1)\n   , m_ofType2(ofType2)\n{\n}</p>\n\n<pre><code>\nYou can see that defaultExpr1 and defaultExpr2 have been duplicated.\n</code></pre>\n"}, {"tags": ["c++", "inner-classes"], "comments": [{"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "edited": false, "score": 0, "creation_date": 1574281830, "post_id": 58962313, "comment_id": 104180861, "body": "<code>template&lt;bool t&gt; class A{   class B{     class C{       private:         void foo() { &#47;* some code here *&#47; }     };   }; };</code>  -- also -- <code>foo()</code>  can be only called on the instance of C, how are you going to do that :)"}, {"owner": {"reputation": 71, "user_id": 7005200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d935338bb731a0f2ba72f90b0830ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Ruiyu Zhu", "link": "https://stackoverflow.com/users/7005200/ruiyu-zhu"}, "reply_to_user": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "edited": false, "score": 0, "creation_date": 1574301706, "post_id": 58962313, "comment_id": 104187227, "body": "I can always add more contents to get the whole stuff make sense, can&#39;t I?"}, {"owner": {"reputation": 659, "user_id": 10870835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IlVhK.png?s=128&g=1", "display_name": "Chef Gladiator", "link": "https://stackoverflow.com/users/10870835/chef-gladiator"}, "edited": false, "score": 0, "creation_date": 1574348831, "post_id": 58962313, "comment_id": 104209077, "body": "As it is now, I think there is no legal way to call <code>foo()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1574280006, "post_id": 58962413, "comment_id": 104180025, "body": "It doesn&#39;t actually let you define the member function, though and <code>typename</code> is probably required."}, {"owner": {"reputation": 71, "user_id": 7005200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d935338bb731a0f2ba72f90b0830ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Ruiyu Zhu", "link": "https://stackoverflow.com/users/7005200/ruiyu-zhu"}, "edited": false, "score": 0, "creation_date": 1574281762, "post_id": 58962413, "comment_id": 104180835, "body": "This doesn&#39;t allow one to define the member function. Even with a <code>typename</code>. Because this <code>aShortAlias</code> is not actually a type."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1574279927, "creation_date": 1574279927, "answer_id": 58962413, "question_id": 58962313, "link": "https://stackoverflow.com/questions/58962313/how-can-i-simplify-the-nested-name-specifier-in-c/58962413#58962413", "title": "How can I simplify the nested name specifier in C++?", "body": "<p>Simply use <code>using</code>:</p>\n\n<pre><code>template &lt;bool T&gt;\nusing aShortAlias = A&lt;T&gt;::B::C\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574280487, "post_id": 58962478, "comment_id": 104180258, "body": "To the edit replacing &quot;declaration&quot; with &quot;definition&quot;: A definition is always a declaration also. And the alias can&#39;t be used as a specifier in the declaration part of the definition if you will. You can perfectly fine use it in the definition body, or as a parameter type etc."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574280678, "post_id": 58962478, "comment_id": 104180335, "body": "@uneven_mark no worries. I am not 100% sure myself that the terminology I used is correct."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574281074, "post_id": 58962478, "comment_id": 104180518, "body": "Technically, going by the standard, I suppose it is the <i>declarator</i> of the <i>function-definition</i>, the latter of which is also a <i>declaration</i>, although the <i>function-body</i> seems to be part of the <i>declaration</i> and <i>function-definition</i>, if I read the grammar correctly. In any case I understand what you meant now."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 1, "last_activity_date": 1574280372, "last_edit_date": 1574280372, "creation_date": 1574280222, "answer_id": 58962478, "question_id": 58962313, "link": "https://stackoverflow.com/questions/58962313/how-can-i-simplify-the-nested-name-specifier-in-c/58962478#58962478", "title": "How can I simplify the nested name specifier in C++?", "body": "<p>While you can create an alias:</p>\n\n<pre><code>template&lt;bool T&gt;\nusing X = typename A&lt;T&gt;::B::C;\n</code></pre>\n\n<p>You cannot use that alias as a specifier in the declaration:</p>\n\n<pre><code>template&lt;bool T&gt;\nvoid X&lt;T&gt;::foo()   // not allowed; doesn't compile\n{\n   ...\n}\n</code></pre>\n\n<p>Afaik you need to use the fully qualified name in the declaration.</p>\n"}, {"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1574280730, "post_id": 58962556, "comment_id": 104180358, "body": "and if you have anything other than <code>bool</code>?"}, {"owner": {"reputation": 71, "user_id": 7005200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d935338bb731a0f2ba72f90b0830ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Ruiyu Zhu", "link": "https://stackoverflow.com/users/7005200/ruiyu-zhu"}, "edited": false, "score": 0, "creation_date": 1574281676, "post_id": 58962556, "comment_id": 104180793, "body": "Ah I see your point! Luckily I don&#39;t have anything other than <code>bool</code> at this moment. If the template variables are more general(e.g. <code>int</code>) then this approach doesn&#39;t really work out."}], "tags": [], "owner": {"reputation": 579, "user_id": 3175478, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/d226ad76c20a10964496dc2be49dd5a6?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/3175478/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1574280595, "creation_date": 1574280595, "answer_id": 58962556, "question_id": 58962313, "link": "https://stackoverflow.com/questions/58962313/how-can-i-simplify-the-nested-name-specifier-in-c/58962556#58962556", "title": "How can I simplify the nested name specifier in C++?", "body": "<p>I think the best you can do is:</p>\n\n<pre><code>template &lt;bool T&gt; using aShortAlias = typename A&lt;T&gt;::B::C;\n\ntemplate&lt;&gt; void aShortAlias&lt;false&gt;::foo() {\n}\ntemplate&lt;&gt; void aShortAlias&lt;true&gt;::foo() {\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 7005200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d935338bb731a0f2ba72f90b0830ff9?s=128&d=identicon&r=PG&f=1", "display_name": "Ruiyu Zhu", "link": "https://stackoverflow.com/users/7005200/ruiyu-zhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 2, "answer_count": 3, "score": 1, "last_activity_date": 1574443456, "creation_date": 1574279519, "last_edit_date": 1574443456, "question_id": 58962313, "link": "https://stackoverflow.com/questions/58962313/how-can-i-simplify-the-nested-name-specifier-in-c", "title": "How can I simplify the nested name specifier in C++?", "body": "<p>Assume I have the following code:</p>\n\n<pre><code>template&lt;bool t&gt;\nclass A{\n  class B{\n    class C{\n      public:\n        void foo();\n    };\n  };\n};\n\ntemplate&lt;bool t&gt;\nvoid A&lt;t&gt;::B::C::foo() {\n// some code\n}\n</code></pre>\n\n<p>when writing the definition of this function <code>foo()</code> , I wish to avoid writing the too-long nested name specifier <code>A&lt;t&gt;::B::C::</code> but use something like <code>aShortAlias&lt;t&gt;::foo()</code> instead. Is this possible with C++?</p>\n\n<p>Apparently using <code>using aShrtAlias&lt;t&gt; = typename A&lt;t&gt;::B::C</code> doesn't work. And I don't really want to use a <code>#define</code> as a workaround since it only do text-replacement(maybe there is some justification for <code>#define</code> here?). </p>\n"}, {"tags": ["c++", "list", "iterator", "doubly-linked-list"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1574279603, "post_id": 58962270, "comment_id": 104179834, "body": "By &quot;ring&quot; I&#39;m assuming you mean your &quot;last&quot; element points to the &quot;first&quot; as its next (and vice versa). In that case, how are <i>you</i> defining <code>end</code>? What does that mean in your ring? How are you deciding which element is &quot;first&quot; and which is &quot;last?&quot;"}, {"owner": {"reputation": 54, "user_id": 12297730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bdf908380bbc9335705207e284c0043?s=128&d=identicon&r=PG&f=1", "display_name": "Croder", "link": "https://stackoverflow.com/users/12297730/croder"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1574279958, "post_id": 58962270, "comment_id": 104180007, "body": "Well in that case it is both the first and the last element. In any case, I would like to implement the iterator so that I can iterate through all elements correctly"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1574280026, "post_id": 58962270, "comment_id": 104180032, "body": "Oh, I see. You&#39;re storing <code>any</code> as a pseudo <code>head</code>. In that case, wouldn&#39;t the &quot;last&quot; element just be <code>any-&gt;previous</code>?"}, {"owner": {"reputation": 54, "user_id": 12297730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bdf908380bbc9335705207e284c0043?s=128&d=identicon&r=PG&f=1", "display_name": "Croder", "link": "https://stackoverflow.com/users/12297730/croder"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1574280393, "post_id": 58962270, "comment_id": 104180219, "body": "In my case it doesn&#39;t even matter what is the first and what&#39;s the last element.  What is important to me is that I go through all elements of a sequence using the iterator, respectively."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1574280632, "post_id": 58962270, "comment_id": 104180313, "body": "Okay...but what element are you starting on? That must be stored somewhere. There must be some &quot;first&quot; and &quot;last&quot; to have any sense of iteration. Given how your <code>begin()</code> is written, it looks like <code>any</code> is the starting node and <code>any-&gt;previous</code> is the ending node in the iteration. What are you imagining iterating through this list looking like? Can you give some example code of how you&#39;d like to use this?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1574280718, "post_id": 58962270, "comment_id": 104180353, "body": "<i>I have searched for solutions on the internet, but I have not been able to find any relevant ones.</i> <a href=\"https://www.boost.org/doc/libs/1_71_0/doc/html/circular_buffer.html\" rel=\"nofollow noreferrer\">Here is a fully STL compliant ring buffer, with source code</a>"}, {"owner": {"reputation": 54, "user_id": 12297730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bdf908380bbc9335705207e284c0043?s=128&d=identicon&r=PG&f=1", "display_name": "Croder", "link": "https://stackoverflow.com/users/12297730/croder"}, "edited": false, "score": 0, "creation_date": 1574449574, "post_id": 58962270, "comment_id": 104250886, "body": "I did not say that it did not exist. Also, I am a beginner in C++ programming so searching for the way the Ring Buffer&#39;s author implemented Iterators is not exactly easy. But thanks for your help anyways."}], "owner": {"reputation": 54, "user_id": 12297730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bdf908380bbc9335705207e284c0043?s=128&d=identicon&r=PG&f=1", "display_name": "Croder", "link": "https://stackoverflow.com/users/12297730/croder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574449329, "creation_date": 1574279370, "last_edit_date": 1574449329, "question_id": 58962270, "link": "https://stackoverflow.com/questions/58962270/implementing-an-iterator-in-a-doubly-linked-circular-list-ring-problem-with", "title": "Implementing an iterator in a doubly linked circular list / ring (problem with .end())", "body": "<p>I am trying to implement the <code>Iterator</code> class inside my <code>BiRing&lt;Key, Info&gt;</code> class.</p>\n\n<p>What I am wondering is <strong>how can I implement an iterator which goes through all elements of a ring</strong>?\nI have searched for solutions on the internet, but I have not been able to find any relevant ones.</p>\n\n<p>Main difficulty that I am having is how to deal with <code>.end()</code> method. I have read that it's implemented by returning a pseudo-next element of the last element, but I have not seen any guide on how to do that on any custom container, let alone a doubly linked ring.</p>\n\n<p>Can anyone briefly explain how those pseudo-last elements would be created in a general case and in my case and is there some other way to implement the iterator so that I am able to go through all elements of the ring?</p>\n\n<p>My class (simplified):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename Key, typename Info&gt;\nclass BiRing\n{\nprivate:\n     struct Node\n     {\n         // key and info, previous and next, constructor\n     };\n    Node* any;\n\npublic:\n\n     struct Iterator\n     {\n     private:\n         Node* iter;\n\n     public:\n         Iterator(Node* any) : iter(any) {}\n\n         void operator++() {\n         if (iter == nullptr) throw (\"nullptr iterator\");\n         iter = iter-&gt;next;\n         }\n         // *, == and != operators\n     };\n\n   Iterator begin() { return Iterator(any); }\n   //Iterator end() { return ??? }\n\n   // other methods\n};\n</code></pre>\n\n<p><strong>UPDATE:</strong>\nHaving realised that \"pseudo-last element\" literally means \"another node which is processed differently under different contexts\", I solved the problem by adding an empty node called <code>pseudoLast</code>.</p>\n\n<p>Rest of the class <code>BiRing</code> and <code>Iterator</code> follow up on that logic. Every <code>Iterator</code> object has <code>Node* ptr</code> and <code>Node* toSkip</code> which, subsequently, allows me to check if an iterator object is used alongside correct <code>BiRing</code> object; for instance, == and != operators will throw an exception if I were to compare a biRing begin()/end() with an iterator which does not belong to that object.</p>\n\n<p>In case anyone wants to check out how I have implemented it:\n<a href=\"https://pastebin.com/HHctMtR0\" rel=\"nofollow noreferrer\">Pastebin link.</a></p>\n"}, {"tags": ["c++", "opencv", "c++11", "emscripten"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574279487, "post_id": 58962260, "comment_id": 104179755, "body": "You haven&#39;t shown your code, so how do you expect anyone to be able to tell you why it gives a certain result?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574280374, "post_id": 58962260, "comment_id": 104180210, "body": "All example code needs to go <i>in</i> the question. <i>Not</i> behind external links."}, {"owner": {"reputation": 45, "user_id": 7862130, "user_type": "registered", "profile_image": "https://graph.facebook.com/727642224083052/picture?type=large", "display_name": "Kaushal Chhaunkar", "link": "https://stackoverflow.com/users/7862130/kaushal-chhaunkar"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574280767, "post_id": 58962260, "comment_id": 104180381, "body": "I have added code in the question."}], "owner": {"reputation": 45, "user_id": 7862130, "user_type": "registered", "profile_image": "https://graph.facebook.com/727642224083052/picture?type=large", "display_name": "Kaushal Chhaunkar", "link": "https://stackoverflow.com/users/7862130/kaushal-chhaunkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1574302114, "answer_count": 0, "score": 0, "last_activity_date": 1574302015, "creation_date": 1574279308, "last_edit_date": 1574302015, "question_id": 58962260, "link": "https://stackoverflow.com/questions/58962260/when-im-trying-convert-opencv4-1-program-to-wasm-following-error-is-comming", "closed_reason": "Duplicate", "title": "When I&#39;m trying convert OpenCV4.1 program to wasm following error is comming", "body": "<p>When I'm trying to convert OpenCV4.1 program to wasm with the following command an error occured:</p>\n\n<pre><code>sudo /home/xxx/Documents/emsdk/upstream/emscripten/em++ -std=c++11 -s WASM=1 -I ../../../../usr/local/include/opencv4/ test.cpp  -o test.html\n</code></pre>\n\n<p><strong>The following error is coming:</strong> </p>\n\n<pre><code>error: undefined symbol: _ZN2cv11namedWindowERKNSt3__212basic_stringIcNS0_11char_traitsIcEENS0_9allocatorIcEEEEi\nwarning: To disable errors for undefined symbols use `-s ERROR_ON_UNDEFINED_SYMBOLS=0`\nerror: undefined symbol: _ZN2cv13destroyWindowERKNSt3__212basic_stringIcNS0_11char_traitsIcEENS0_9allocatorIcEEEE\nerror: undefined symbol: _ZN2cv3Mat10deallocateEv\nerror: undefined symbol: _ZN2cv6imreadERKNSt3__212basic_stringIcNS0_11char_traitsIcEENS0_9allocatorIcEEEEi\nerror: undefined symbol: _ZN2cv6imshowERKNSt3__212basic_stringIcNS0_11char_traitsIcEENS0_9allocatorIcEEEERKNS_11_InputArrayE\nerror: undefined symbol: _ZN2cv7waitKeyEi\nerror: undefined symbol: _ZN2cv8fastFreeEPv\nError: Aborting compilation due to previous errors\nshared:ERROR: '/home/kaushal/Documents/emsdk/node/12.9.1_64bit/bin/node /home/kaushal/Documents/emsdk/upstream/emscripten/src/compiler.js /tmp/tmpxI4v0X.txt' failed (1)\n</code></pre>\n\n<p><strong>Simple test code:</strong> </p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing namespace std;\n\nint main(int argc, char** argv)\n{\n\n Mat image = imread(\"./1.png\");\n\n // Check for failure\n if (image.empty())\n {\n  cout &lt;&lt; \"Could not open or find the image\" &lt;&lt; endl;\n  cin.get();\n  return -1;\n }\n\n String windowName = \"test\";\n\n namedWindow(windowName);\n\n imshow(windowName, image);\n\n waitKey(0);\n\n destroyWindow(windowName);\n\n return 0;\n}\n</code></pre>\n\n<p>Please help me if anyone has any ideas.</p>\n"}, {"tags": ["c++", "protocol-buffers"], "answers": [{"tags": [], "owner": {"reputation": 336, "user_id": 6253527, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VZ7EvbSCdoM/AAAAAAAAAAI/AAAAAAAAAFQ/kHvxW2qWYLA/photo.jpg?sz=128", "display_name": "Arthur Moraes Do Lago", "link": "https://stackoverflow.com/users/6253527/arthur-moraes-do-lago"}, "is_accepted": true, "score": 1, "last_activity_date": 1574286529, "creation_date": 1574286529, "answer_id": 58963917, "question_id": 58962185, "link": "https://stackoverflow.com/questions/58962185/why-is-my-protobuf-deserialization-giving-empty-payload/58963917#58963917", "title": "Why is my protobuf deserialization giving empty payload?", "body": "<p>You are writing the pMeta package of any type to the CodedOutputStream cos when encoding, and expecting a a message Pouch when decoding.\nI think you meant to encode the pPayload message instead of pMeta, which will already contain the pMeta message in it's msg field.\nFull code used for testing:</p>\n\n<pre><code>#include &lt;google/protobuf/io/zero_copy_stream.h&gt;\n#include &lt;google/protobuf/io/coded_stream.h&gt;\n#include &lt;google/protobuf/util/delimited_message_util.h&gt;\n#include \"teste.pb.h\"\n\n#include &lt;string&gt;\n\nbool EncodeDecode(google::protobuf::Message* pMeta, std::string&amp; out_packet) {  \n    //\n    // Encoding\n    //\n    // CAUTION:\n    // - Must dynamic allocate to avoid protobuf bug &lt;SharedDtor crash #435&gt;.\n    std::shared_ptr&lt;Pouch&gt; pPayload = std::make_shared&lt;Pouch&gt;();\n    google::protobuf::Any env;\n    env.PackFrom(*pMeta, \"bob.bob.bob\");\n    pPayload-&gt;set_allocated_msg(&amp;env);  \n    // Prefix with size\n    const int nTipBytes = 4;\n    int nBytesMsg = (int)pPayload-&gt;ByteSizeLong();\n    int nBytesPacket = nBytesMsg + nTipBytes;\n    out_packet.assign(nBytesPacket, '\\0');\n\n    google::protobuf::io::ArrayOutputStream aos((void*)out_packet.c_str(), nBytesPacket);\n    google::protobuf::io::CodedOutputStream cos(&amp;aos);\n    cos.WriteVarint32(nBytesMsg);   \n    bool res = pPayload-&gt;SerializeToCodedStream(&amp;cos);\n    printf(\"payload has message: %d\\n\", pPayload-&gt;has_msg());\n    //\n    // Decoding\n    //\n    Pouch out_pouch;\n    google::protobuf::io::ArrayInputStream ais(out_packet.c_str(), nBytesPacket);\n    google::protobuf::io::CodedInputStream cis(&amp;ais);\n    google::protobuf::uint32 nPayloadBytes;\n    cis.ReadVarint32(&amp;nPayloadBytes);   \n    google::protobuf::io::CodedInputStream::Limit msgLimit = cis.PushLimit(nPayloadBytes);\n    res = out_pouch.ParseFromCodedStream(&amp;cis);\n    cis.PopLimit(msgLimit);\n\n    printf(\"decoded payload has message: %d\\n\", out_pouch.has_msg());\n    if (out_pouch.has_msg()){\n        Sample s;\n        out_pouch.msg().UnpackTo(&amp;s);\n        printf(\"value: %d\\n\", s.number());\n    }\n\n    pPayload-&gt;release_msg();\n    return res;\n}\n\nint main(){\n    Sample *mymsg = new Sample();\n    mymsg-&gt;set_number(5123);\n    std::string bigstring;\n    EncodeDecode(mymsg, bigstring);\n}\n</code></pre>\n\n<p>and the .proto:</p>\n\n<pre><code>syntax = \"proto3\";\nimport \"google/protobuf/any.proto\";\n\nmessage Pouch {\n    google.protobuf.Any msg = 1;\n}\n\nmessage Sample {\n    int32 number = 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 7456, "user_id": 987846, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c0bd4793c1b752215191139c8213a131?s=128&d=identicon&r=PG", "display_name": "kakyo", "link": "https://stackoverflow.com/users/987846/kakyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 58963917, "answer_count": 1, "score": 1, "last_activity_date": 1574286529, "creation_date": 1574279032, "last_edit_date": 1574282627, "question_id": 58962185, "link": "https://stackoverflow.com/questions/58962185/why-is-my-protobuf-deserialization-giving-empty-payload", "title": "Why is my protobuf deserialization giving empty payload?", "body": "<p>Running protobuf 3.9.0 on Windows with VS2017, I'm trying to serialize and deserialize my protobuf model using <code>CodedOutputStream</code> and <code>CodedInputStream</code> in C++, but the decoder always gives me an empty result. I use length-prefixing and can read the size from the stream on the decoder side. An in-place encode/decode source code is as follows, where the <code>Any</code> message is used</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>import \"google/protobuf/any.proto\";\n\nmessage Pouch {\n    google.protobuf.Any msg = 1;\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>bool EncodeDecode(google::protobuf::Message* pMeta, std::string&amp; out_packet) {  \n    //\n    // Encoding\n    //\n    // CAUTION:\n    // - Must dynamic allocate to avoid protobuf bug &lt;SharedDtor crash #435&gt;.\n    std::shared_ptr&lt;Pouch&gt; pPayload = std::make_shared&lt;Pouch&gt;();\n    google::protobuf::Any env;\n    env.PackFrom(*pMeta);\n    pPayload-&gt;set_allocated_msg(&amp;env);  \n    // Prefix with size\n    const int nTipBytes = 4;\n    int nBytesMsg = (int)pMeta-&gt;ByteSizeLong();\n    int nBytesPacket = nBytesMsg + nTipBytes;\n    out_packet.assign(nBytesPacket, '\\0');\n    google::protobuf::io::ArrayOutputStream aos((void*)out_packet.c_str(), nBytesPacket);\n    google::protobuf::io::CodedOutputStream cos(&amp;aos);\n    cos.WriteVarint32(nBytesMsg);   \n    bool res = pMeta-&gt;SerializeToCodedStream(&amp;cos);\n    printf(\"payload has message: %d\\n\", pPayload-&gt;has_msg());\n    //\n    // Decoding\n    //\n    Pouch out_pouch;\n    google::protobuf::io::ArrayInputStream ais(out_packet.c_str(), nBytesPacket);\n    google::protobuf::io::CodedInputStream cis(&amp;ais);\n    google::protobuf::uint32 nPayloadBytes;\n    cis.ReadVarint32(&amp;nPayloadBytes);   \n    google::protobuf::io::CodedInputStream::Limit msgLimit = cis.PushLimit(nPayloadBytes);\n    res = out_pouch.ParseFromCodedStream(&amp;cis);\n    cis.PopLimit(msgLimit);\n\n    printf(\"decoded payload has message: %d\\n\", out_pouch.has_msg());\n\n    pPayload-&gt;release_msg();\n    return res;\n}\n</code></pre>\n\n<p>The above code prints out an empty type URL</p>\n\n<pre><code>payload has message: 1\ndecoded payload has message: 0\n</code></pre>\n\n<p>But the size-prefix <code>nPayloadBytes</code> gives the correct number.\nThe results from encoding and decoding are both <code>true</code>.</p>\n\n<p>Where am I wrong?</p>\n"}, {"tags": ["c++", "constexpr", "c++20"], "comments": [{"owner": {"reputation": 1561, "user_id": 7568175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154469655422476/picture?type=large", "display_name": "Andreas Loanjoe", "link": "https://stackoverflow.com/users/7568175/andreas-loanjoe"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1574278934, "post_id": 58962120, "comment_id": 104179483, "body": "Uncomment the constexprs don&#39;t remove them."}, {"owner": {"reputation": 1561, "user_id": 7568175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154469655422476/picture?type=large", "display_name": "Andreas Loanjoe", "link": "https://stackoverflow.com/users/7568175/andreas-loanjoe"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1574279026, "post_id": 58962120, "comment_id": 104179525, "body": "You are initializing a runtime span I meant to initialize a constexpr span"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1574279055, "post_id": 58962120, "comment_id": 104179546, "body": "Doh.  Not sure why I did that.  nevermind"}, {"owner": {"reputation": 1561, "user_id": 7568175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154469655422476/picture?type=large", "display_name": "Andreas Loanjoe", "link": "https://stackoverflow.com/users/7568175/andreas-loanjoe"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1574279232, "post_id": 58962120, "comment_id": 104179636, "body": "weird, don&#39;t see why that would be necessary the span only lives inside the local scope anyway..."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1574279324, "post_id": 58962120, "comment_id": 104179682, "body": "Closely related: <a href=\"https://stackoverflow.com/q/57545503/2069064\">stackoverflow.com/q/57545503/2069064</a>"}], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 5, "creation_date": 1574279296, "post_id": 58962238, "comment_id": 104179668, "body": "Scope is not the problem. Storage duration is. Static local should work."}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 1, "creation_date": 1574279845, "post_id": 58962238, "comment_id": 104179950, "body": "It also works if all are function local objects within a <code>constexpr</code> function (without explicit <code>static</code>). Do such objects have default static storage duration or is this something different?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 0, "creation_date": 1574280409, "post_id": 58962238, "comment_id": 104180225, "body": "@n314159 I&#39;m not sure if that is allowed or if you&#39;ve fallen into the dreaded: if no specialization of a constexpr function is a core constant expression the function is ill-formed, no diagnostic required clause.  <a href=\"https://timsong-cpp.github.io/cppwp/expr.const#10\" rel=\"nofollow noreferrer\">&#91;expr.const&#93;/10</a> only allows static variables."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "reply_to_user": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 0, "creation_date": 1574301072, "post_id": 58962238, "comment_id": 104187062, "body": "@n314159: I\u2019m not sure exactly what you\u2019re saying works (or \u201cworks\u201d), but be careful of the difference between using something as a constant expression <b>in</b> a function (constexpr or no) and using something to <b>construct</b> a constant expression <i>via</i> a constexpr function."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1574307286, "post_id": 58962238, "comment_id": 104188471, "body": "You might want to say that non-static (constant) <i>values</i> can be used in constant expressions, but not their <i>addresses</i>."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 15, "last_activity_date": 1574279349, "last_edit_date": 1574279349, "creation_date": 1574279212, "answer_id": 58962238, "question_id": 58962120, "link": "https://stackoverflow.com/questions/58962120/can-span-be-constexpr/58962238#58962238", "title": "Can span be constexpr?", "body": "<p>You can't use non-static function local variables in a constant expression like that.  You need address stability and that is only achieved by static objects.  Modifying the code to</p>\n\n<pre><code>constexpr std::array&lt;int, 3&gt; array{ 0, 1, 2 };\nconstexpr int carray[3] = { 0, 1, 2 };\n\nint main()\n{\n    using S = std::span&lt;const int, 3&gt;;\n\n    constexpr S span1{ array.data(), 3 };\n    constexpr S span2{array.begin(), array.end()};\n    constexpr S span3{carray};\n    constexpr S span4{array};\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>int main()\n{\n    static constexpr std::array&lt;int, 3&gt; array{ 0, 1, 2 };\n    static constexpr int carray[3] = { 0, 1, 2 };\n    using S = std::span&lt;const int, 3&gt;;\n\n    constexpr S span1{ array.data(), 3 };\n    constexpr S span2{array.begin(), array.end()};\n    constexpr S span3{carray};\n    constexpr S span4{array};\n}\n</code></pre>\n\n<p>Allows you to create a <code>constexpr</code> <code>std::span</code>.</p>\n"}], "owner": {"reputation": 1561, "user_id": 7568175, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10154469655422476/picture?type=large", "display_name": "Andreas Loanjoe", "link": "https://stackoverflow.com/users/7568175/andreas-loanjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 2, "accepted_answer_id": 58962238, "answer_count": 1, "score": 11, "last_activity_date": 1574279349, "creation_date": 1574278761, "last_edit_date": 1574279253, "question_id": 58962120, "link": "https://stackoverflow.com/questions/58962120/can-span-be-constexpr", "title": "Can span be constexpr?", "body": "<p>All the constructors of std::span are declared constexpr, however I can't seem to get any of them to work in a constexpr context. Uncommenting any of the constexpr below will result in a compilation error.</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;span&gt;\n\nint main()\n{\n    constexpr int carray[3] = { 0, 1, 2 };\n    constexpr std::array&lt;int, 3&gt; array{ 0, 1, 2 };\n    using S = std::span&lt;const int, 3&gt;;\n\n    /*constexpr*/ S span1{ array.data(), 3 };\n    /*constexpr*/ S span2{array.begin(), array.end()};\n    /*constexpr*/ S span3{carray};\n    /*constexpr*/ S span4{array};\n}\n</code></pre>\n\n<p>Is it in fact possible to create a constexpr span type, since it seems like constructors can never be evaluated at compile time when they have to initialize a pointer or reference?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1574278481, "post_id": 58961977, "comment_id": 104179263, "body": "Why are you doing this?  You don&#39;t need to store the index in the element in order to get it.  If you do <code>&amp;reference_to_object_in_vector - &amp;vector_name[0]</code> you&#39;ll get it&#39;s index."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1574278846, "post_id": 58961977, "comment_id": 104179444, "body": "If you have to, you can always just iterate over the vector with a counter setting <code>.first = counter;</code> as you go... (but you really don&#39;t need the <code>std::pair</code> if you are just concerned with the <code>std::string</code>) Closest without iterating is <code>std::transform</code> -- which just does the iteration for you."}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 12379884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daa6a488946c64351164fe37dbf18ce0?s=128&d=identicon&r=PG&f=1", "display_name": "Eastonco", "link": "https://stackoverflow.com/users/12379884/eastonco"}, "is_accepted": false, "score": 0, "last_activity_date": 1574281699, "creation_date": 1574281699, "answer_id": 58962850, "question_id": 58961977, "link": "https://stackoverflow.com/questions/58961977/how-to-change-index-values-after-sorting-a-vector-c/58962850#58962850", "title": "How to change index values after sorting a vector? c++", "body": "<p>You could always just add in the reindexing in your sort function.</p>\n\n<pre><code>void bubbleSort(vector);   //generic bubble sort\n{  \n    int i, j;  \n    for (i = 0; i &lt; vector.size()-1; i++){      \n        for (j = 0; j &lt; vector.size()-i-1; j++){\n            if (vector[j].second &gt; vector[j+1].second){  \n                swap(&amp;arr[j], &amp;arr[j+1]);\n                vector[j].first = j+1;   //\n                vector[j+1].first = j;   // updating index values here \n             }\n         }\n     }\n}  \n\n</code></pre>\n\n<p>Or you can have a simple for loop that goes though the vector and reindexes it.</p>\n\n<pre><code>vector&lt;pair&lt;int, struct&gt;&gt; myvector;\n\nfor(int i = 0; i &lt; myvector.size(); i++){\n    myvector[i].first = i;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1574297521, "creation_date": 1574297521, "answer_id": 58965628, "question_id": 58961977, "link": "https://stackoverflow.com/questions/58961977/how-to-change-index-values-after-sorting-a-vector-c/58965628#58965628", "title": "How to change index values after sorting a vector? c++", "body": "<p>If you are still stuck on the problem, you can sort with <a href=\"https://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\"><code>std::sort</code></a> and reorder the index part of your pair beginning at <code>1</code> using <a href=\"https://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow noreferrer\"><code>std::transform</code></a> but it will require <code>-std=c++14</code> to make use of the <em>lambda capture initializer</em>. Otherwise you will have to use a loop to reorder the pair index.</p>\n\n<p>The basic approach would be:</p>\n\n<pre><code>    std::vector&lt;std::pair&lt;int, std::string&gt;&gt; vp {{1, \"zone\"}, \n                                                 {2, \"car\"},\n                                                 {3, \"apple\"}};\n    ...\n    /* sort by string */\n    std::sort (vp.begin(), vp.end(), [](const std::pair&lt;int, std::string&gt;&amp; a, \n                                        const std::pair&lt;int, std::string&gt;&amp; b) {\n                                            return a.second &lt; b.second; });\n    /* reorder integers */\n    std::transform (vp.begin(), vp.end(), vp.begin(), \n                    [n = 1](std::pair&lt;int, std::string&gt;&amp; a) mutable { \n                        a.first = n++;\n                        return a = {a.first, a.second}; });\n</code></pre>\n\n<p>Adding a short bit of output to show the results along with the required headers, you could do:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nint main (void) {\n\n    std::vector&lt;std::pair&lt;int, std::string&gt;&gt; vp {{1, \"zone\"}, \n                                                 {2, \"car\"},\n                                                 {3, \"apple\"}};\n    std::cout &lt;&lt; \"pre-sort/transform:\\n\";\n    for (auto&amp; i : vp)\n        std::cout &lt;&lt; i.first &lt;&lt; \", \" &lt;&lt; i.second &lt;&lt; '\\n';\n\n    /* sort by string */\n    std::sort (vp.begin(), vp.end(), [](const std::pair&lt;int, std::string&gt;&amp; a, \n                                        const std::pair&lt;int, std::string&gt;&amp; b) {\n                                            return a.second &lt; b.second; });\n    /* reorder integers */\n    std::transform (vp.begin(), vp.end(), vp.begin(), \n                    [n = 1](std::pair&lt;int, std::string&gt;&amp; a) mutable { \n                        a.first = n++;\n                        return a = {a.first, a.second}; });\n\n    std::cout &lt;&lt; \"\\npost-sort/transform:\\n\";\n    for (auto&amp; i : vp)\n        std::cout &lt;&lt; i.first &lt;&lt; \", \" &lt;&lt; i.second &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p><strong>Example Use/Output</strong></p>\n\n<pre><code>$ ./bin/vectorpair\npre-sort/transform:\n1, zone\n2, car\n3, apple\n\npost-sort/transform:\n1, apple\n2, car\n3, zone\n</code></pre>\n\n<p>While there is nothing wrong with using the <code>std::vector&lt;std::pair&gt;</code>, if you are not making any other use of the index, consider using a simple <code>std::vector&lt;std::string&gt;</code> and doing away with the <code>std::pair</code>. You can always generate the index when needed.</p>\n"}], "owner": {"reputation": 41, "user_id": 12406155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee7168c766590c3070a2f03e8d380986?s=128&d=identicon&r=PG&f=1", "display_name": "akshaychacko", "link": "https://stackoverflow.com/users/12406155/akshaychacko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574297521, "creation_date": 1574278199, "last_edit_date": 1574278567, "question_id": 58961977, "link": "https://stackoverflow.com/questions/58961977/how-to-change-index-values-after-sorting-a-vector-c", "title": "How to change index values after sorting a vector? c++", "body": "<p>I have a vector of <code>pair&lt;int, struct&gt;</code> where <code>int</code> corresponds to the index.\nI sort this vector by <code>struct</code>, and want my output vector's int values to correspond to the new sorting.</p>\n\n<p>How could I do this?</p>\n\n<pre><code>&lt;1,zone&gt; &lt;2, car&gt; &lt;3, apple&gt;  \n</code></pre>\n\n<p>sorts to :</p>\n\n<pre><code>&lt;3, apple&gt;, &lt;2, car&gt;, &lt;1, zone&gt;\n</code></pre>\n\n<p>Now I want to change those ints to correspond to their new indices in the vector. Ie the pair with apple would be 1. How do I do this?</p>\n\n<p>Hoping for an STL way so that I don't just iterate over the vector and change them manually.</p>\n"}, {"tags": ["c++", "inheritance", "vtable", "memory-layout", "vptr"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 10500478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c42f2790e73c68b9222dca36838601?s=128&d=identicon&r=PG&f=1", "display_name": "CanISleepYet", "link": "https://stackoverflow.com/users/10500478/canisleepyet"}, "edited": false, "score": 0, "creation_date": 1574365488, "post_id": 58962217, "comment_id": 104217847, "body": "Thank you for taking the time to answer. Am I correct to take away from your answer that there will only ever be one virtual table pointer no matter how deep the inheritance chain and even if multiple inheritance is involved. The compiler will just create a composite vtable for every level of the hierarchy (where one is required)?"}, {"owner": {"reputation": 107, "user_id": 10500478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c42f2790e73c68b9222dca36838601?s=128&d=identicon&r=PG&f=1", "display_name": "CanISleepYet", "link": "https://stackoverflow.com/users/10500478/canisleepyet"}, "edited": false, "score": 0, "creation_date": 1574367125, "post_id": 58962217, "comment_id": 104218534, "body": "Apologies, after reading the other answer I realised that I have probably misunderstood the part about multiple inheritance here."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 107, "user_id": 10500478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c42f2790e73c68b9222dca36838601?s=128&d=identicon&r=PG&f=1", "display_name": "CanISleepYet", "link": "https://stackoverflow.com/users/10500478/canisleepyet"}, "edited": false, "score": 0, "creation_date": 1574368162, "post_id": 58962217, "comment_id": 104219005, "body": "@CanISleepYet There will be one big vtable, because that&#39;s what you need for classes derived from this class. But the big vtable will consist of several smaller vtables, one for each class this class is derived from that has at least one virtual function."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1574373520, "post_id": 58962217, "comment_id": 104221348, "body": "@DavidSchwartz Do you agree that conceptually only the small vtables exist and the &quot;big&quot; table is just a colocation w/o any essential layout invariant?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1574383168, "post_id": 58962217, "comment_id": 104223999, "body": "@curiousguy No. If that were true, how could you derive from the class? Every class has a vtable layout that must be adhered to by all derived classes."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1574384601, "post_id": 58962217, "comment_id": 104224298, "body": "@DavidSchwartz I agree that every vtable is abstractly a set of axioms that derived classes must follow. What I don&#39;t get is your &quot;big vtable&quot; thing and what it does above what the &quot;small vtables&quot; do."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1574389573, "post_id": 58962217, "comment_id": 104225345, "body": "@curiousguy The big vtable is used to pass to virtual functions in this class. The small vables are used to pass to virtual functions in derived classes. If something is derived from class A, which is derived from B and C, there must be an instance of B&#39;s vtable and C&#39;s vtable for class A. If D is derived from A, it needs a big vtable (containing both the B and C vtables for D) to pass to functions defined in class A)."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1574391647, "post_id": 58962217, "comment_id": 104225767, "body": "@DavidSchwartz So you are saying that the virtual functions of all bases can be accessed from just one vptr?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1574392518, "post_id": 58962217, "comment_id": 104225950, "body": "@curiousguy Yes, and that&#39;s what gets passed to a virtual function defined in that very class. The table for a virtual function defined in one of its bases can be a subset of that big table."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1574393243, "post_id": 58962217, "comment_id": 104226111, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/202842/discussion-between-curiousguy-and-david-schwartz\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1574279146, "creation_date": 1574279146, "answer_id": 58962217, "question_id": 58961922, "link": "https://stackoverflow.com/questions/58961922/can-derived-classes-have-more-than-one-pointer-to-a-virtual-table/58962217#58962217", "title": "Can derived classes have more than one pointer to a virtual table?", "body": "<p>Suppose we have two classes, each with at least one virtual function, <code>Possession</code> and <code>Vehicle</code>. To invoke those virtual functions for an instance of a derived class of either of those, a pointer to a virtual table is needed. Since these two classes are independent, their virtual tables will be completely different.</p>\n\n<p>Now imagine that <code>OwnedVehicle</code> derives from both <code>Possession</code> and <code>Vehicle</code>. To call a virtual function in <code>Possession</code> for an instance of <code>OwnedVehicle</code> requires a pointer to a virtual function table of the type required by <code>Possession</code>. Similarly, to call a virtual function in <code>Vehicle</code> for an instance of <code>OwnedVehicle</code> requires a pointer to a virtual function table of the type required by <code>Vehicle</code>.</p>\n\n<p>Typical implementations handle this by building a virtual function table for <code>OwnedVehicle</code> that contains one part for <code>OwnedVehicle</code> virtual functions (if any), one for <code>Vehicle</code> virtual functions and one for <code>Possession</code> virtual functions. Then, when calling a virtual function from a pointer to an object of a different type, all that the compiler has to do is apply an applicable delta to the virtual function table pointer to point to the correct part of it.</p>\n\n<p>While the multiple inheritance case is more complex, the same occurs with just single inheritance. The virtual function table for <code>OwnedVehicle</code> contains inside it a virtual function table for <code>Vehicle</code> and would do so even if <code>Possession</code> were not involved.</p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 10500478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c42f2790e73c68b9222dca36838601?s=128&d=identicon&r=PG&f=1", "display_name": "CanISleepYet", "link": "https://stackoverflow.com/users/10500478/canisleepyet"}, "edited": false, "score": 0, "creation_date": 1574365823, "post_id": 58963736, "comment_id": 104217987, "body": "Thank you for your answer. Am I understanding correctly that you are saying that there will be one vptr per inheritance chain. So, if a ptr is 8 bytes,  the extra memory cost will be 8 bytes for single inheritance chain (no matter how deep), 16 bytes if I do multiple inherit from 2 chains etc?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 107, "user_id": 10500478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c42f2790e73c68b9222dca36838601?s=128&d=identicon&r=PG&f=1", "display_name": "CanISleepYet", "link": "https://stackoverflow.com/users/10500478/canisleepyet"}, "edited": false, "score": 0, "creation_date": 1574366346, "post_id": 58963736, "comment_id": 104218219, "body": "@CanISleepYet That&#39;s one per chain involving a polymorphic base; bases w/o virtuals don&#39;t count; also the counting of &quot;chains&quot; is different for virtual bases. &quot;<i>8 bytes for single inheritance chain (no matter how deep)</i>&quot; Exactly depth has no size cost."}, {"owner": {"reputation": 107, "user_id": 10500478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c42f2790e73c68b9222dca36838601?s=128&d=identicon&r=PG&f=1", "display_name": "CanISleepYet", "link": "https://stackoverflow.com/users/10500478/canisleepyet"}, "edited": false, "score": 0, "creation_date": 1574366904, "post_id": 58963736, "comment_id": 104218445, "body": "Thanks for the clarification! Now I am slightly confused because the way that I understood the other answer it seems like they contradict each other? (slightly in the case of multiple inheritance)"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 107, "user_id": 10500478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c42f2790e73c68b9222dca36838601?s=128&d=identicon&r=PG&f=1", "display_name": "CanISleepYet", "link": "https://stackoverflow.com/users/10500478/canisleepyet"}, "edited": false, "score": 0, "creation_date": 1574368049, "post_id": 58963736, "comment_id": 104218955, "body": "@CanISleepYet I don&#39;t think there was a contradiction as David Schwartz was talking about MI."}], "tags": [], "owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "is_accepted": true, "score": 1, "last_activity_date": 1574285692, "creation_date": 1574285692, "answer_id": 58963736, "question_id": 58961922, "link": "https://stackoverflow.com/questions/58961922/can-derived-classes-have-more-than-one-pointer-to-a-virtual-table/58963736#58963736", "title": "Can derived classes have more than one pointer to a virtual table?", "body": "<p>The a vtable contains the address of each virtual function for the class at a known offset. </p>\n\n<p>[Remark: In practice unlike a regular class, vtables have members at negative offset, much like a pointer in a the middle of a array. That is just a convention that doesn't change implementation freedom much. Anyway the only issue is that the placement of an information in a vtable is legislated by a convention (the ABI) and compilers by following the same one produce compatible code for polymorphic classes.]</p>\n\n<p>What happens when you have additional functions in a derived class? (not just the functions \"inherited\" from the base class)</p>\n\n<p>Once you accept the idea that a pointer to a structure both points to the whole object and to its first member, you have the idea that a pointer to derived class points to a base class that is appropriately located at offset zero. So you can have <strong>the exact same pointer value, as represented as a <code>void*</code>, that can be used alternatively for a derived object or a base under this convention for single inheritance</strong>.</p>\n\n<p>Now you can apply that to any data structure and even to a vtable which is really not a table (array of elements of the same type, or values that can be interpreted in the same way) but a record (of objects of unrelated type or meaning); you can see that a vtable for such derived class can just be derived from the vtable of its unique base in the exact same way.</p>\n\n<p>(Note that if you compile C++ to C, you might run into type aliasing rules when you do such things. Of course assembly has no such problem, nor naively compiled \"high level assembler\" C.)</p>\n\n<p>So for single inheritance the base is integrated and optimized into the derived class:</p>\n\n<ul>\n<li>for data members of the instance (of a class type) </li>\n<li>and for the virtual functions members, that is the data members of the vtable (or members of the meta class if you imagine one).</li>\n</ul>\n\n<p>Note that <em>placing the base at offset zero allows you to place vtable base at zero offset</em>, which in turn allows you to use the same vptr but does not imply it; conversely sharing the vptr with a base implies that the base vtable is at offset zero (vtable layout = meta class level) so the base must be at offset zero (data members layout = class level).</p>\n\n<p>And multiple inheritance is actually single inheritance plus, as one class is always treated as privileged: it is placed at offset zero so the pointers are the same, so the vtable can be placed at offset zero (because the pointers are the same); others bases, not so.</p>\n\n<p>As we see, all but one of the inherited polymorphic classes are placed at a non zero offset in multiple inheritance. Each one carries an additional \"inherited\" vptr in the derived class; that (hidden) pointer member must be correctly filled by any derived constructor.</p>\n\n<p><strong>These additional vptr are for base classes that occur at non zero offset</strong>, so a pointer to an inherited base must be adjusted (add a positive constant to convert to base pointer, remove it to convert back). That a compiler needs to produce code to perform an implicit conversion is a trivial remark (converting an integer to a floating point type is a much more involved task); but here the conversion of <code>this</code> is between a function call on a given base type and landing in the function that is an overrider in a base or derived class: the difference is that <strong>adjustment depends on function overriding which is only known for a class</strong> (an instance of a meta type). So <em>the vptr needs to point to distinct vtable information</em>: one that knows how to deal with these base to derived pointer conversions.</p>\n\n<p>As instances of the \"meta type\", vtables have all the information to do all pointers adjustment automatically. (These depend on the specific class types involved, and on no other factor.)</p>\n\n<p>So at implementation level, the two types of inheritances are:</p>\n\n<ul>\n<li>zero offset inheritance; sharing the vptr; called a primary base class in some vtable and ABI descriptions;</li>\n<li>arbitrary offset inheritance; having another vptr; called secondary base class.</li>\n</ul>\n\n<p>This is for the basic stuff. Virtual inheritance is a lot more subtle at the implementation level, and even the concept of primary isn't so clear, as virtual bases can be \"primary\" of a derived class only in some more derived classes!</p>\n"}], "owner": {"reputation": 107, "user_id": 10500478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c42f2790e73c68b9222dca36838601?s=128&d=identicon&r=PG&f=1", "display_name": "CanISleepYet", "link": "https://stackoverflow.com/users/10500478/canisleepyet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "accepted_answer_id": 58963736, "answer_count": 2, "score": 2, "last_activity_date": 1574285692, "creation_date": 1574277965, "last_edit_date": 1574279184, "question_id": 58961922, "link": "https://stackoverflow.com/questions/58961922/can-derived-classes-have-more-than-one-pointer-to-a-virtual-table", "title": "Can derived classes have more than one pointer to a virtual table?", "body": "<p>I am watching the BackToBasics talk: <a href=\"https://youtu.be/jBnIMEb2GhA?t=573\" rel=\"nofollow noreferrer\">Virtual Dispatch and Its Alternatives \n</a> from CppCon2019. The presenter says and the slide shows (assuming I haven't misunderstood) that a derived class inherits a vtable pointer from the base class and additionally has its own vptr. </p>\n\n<p>Of course, technically this isn't mandated by the standard but I am getting myself a bit confused and my  experiments with sizeof() also seem to imply there should only need to be one pointer. Please can someone clarify if there are any situations where multiple vptrs are needed? </p>\n\n<p>Thanks</p>\n\n<p>P.S. Just to be clear, in this context we are considering the more common public inheritance and not virtual or multiple inheritance (the presenter explicitly mentions this in an earlier part of the talk).</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 6, "creation_date": 1574277972, "post_id": 58961900, "comment_id": 104178984, "body": "<code>rainFall[i]</code> is not initialized, whats the condition supposed to do?"}, {"owner": {"reputation": 15, "user_id": 10719634, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6I8tvNMMY6U/AAAAAAAAAAI/AAAAAAAAAAc/GbWD3wUvnBY/photo.jpg?sz=128", "display_name": "Oliver", "link": "https://stackoverflow.com/users/10719634/oliver"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1574278045, "post_id": 58961900, "comment_id": 104179031, "body": "It is supposed to go through each value in the array to make sure each integer is positive."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1574278111, "post_id": 58961900, "comment_id": 104179085, "body": "@Oliver You missed the point of the previous comment. <code>rainFall</code>&#39;s initial values are not specified, each element is in an unspecified state. It&#39;s an error to try to read them or to assume that the array is zero initialized."}, {"owner": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "edited": false, "score": 0, "creation_date": 1574278523, "post_id": 58961900, "comment_id": 104179281, "body": "Use a do while in my opinion"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1574279498, "post_id": 58961900, "comment_id": 104179763, "body": "There are no comments in your code and no explanation of what it&#39;s supposed to do. This means we have to make guesses when trying to fix it. For example, is it supposed to stop accepting entries when it gets a negative entry? Or is it always supposed to accept 12 entries? You don&#39;t say, and it&#39;s not clear whether that is or isn&#39;t the purpose of the <code>rainFall[i] &gt; 0</code> test."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1574279695, "post_id": 58961900, "comment_id": 104179877, "body": "Uninitialised array elements are <i>indeterminate</i>, they are <i>not</i> magically zero. And reading uninitialised data is Undefined Behaviour."}, {"owner": {"reputation": 3779, "user_id": 242135, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/44b0dfdcc0345553f8aca6e154944c95?s=128&d=identicon&r=PG", "display_name": "Geoff", "link": "https://stackoverflow.com/users/242135/geoff"}, "edited": false, "score": 0, "creation_date": 1574324721, "post_id": 58961900, "comment_id": 104194432, "body": "@Oliver Would you please edit your question to include an explicit description of the desired behavior, and the actual behavior that you are observing?  It&#39;s also usually a good idea to include any debugging steps you&#39;ve already attempted, and why you think the code you&#39;ve written should be working.  Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1574279434, "post_id": 58962003, "comment_id": 104179731, "body": "I think the OP wants to stop as soon as a negative rainfall amount is enetered, but I&#39;m not sure."}, {"owner": {"reputation": 617, "user_id": 10714380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/geEAE.jpg?s=128&g=1", "display_name": "whiskeyo", "link": "https://stackoverflow.com/users/10714380/whiskeyo"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1574280744, "post_id": 58962003, "comment_id": 104180366, "body": "Still it is not correct, he would have to check it after each value is entered and then use <code>if (rainFall[i] &lt; 0) break;</code>."}], "tags": [], "owner": {"reputation": 617, "user_id": 10714380, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/geEAE.jpg?s=128&g=1", "display_name": "whiskeyo", "link": "https://stackoverflow.com/users/10714380/whiskeyo"}, "is_accepted": false, "score": 4, "last_activity_date": 1574278325, "creation_date": 1574278325, "answer_id": 58962003, "question_id": 58961900, "link": "https://stackoverflow.com/questions/58961900/while-loop-stops-working-before-condition-c/58962003#58962003", "title": "While Loop stops working before condition C++", "body": "<p>The condition you check is wrong, as you have uninitialized array of doubles and you check whether values inside <code>rainFall[]</code> are bigger than 0, while they can have any value that <code>double</code> can have. Just change the <code>while</code> condition to <code>(i &lt; 12)</code> and it should work as you wish.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1574279640, "post_id": 58962179, "comment_id": 104179849, "body": "I wouldn&#39;t throw an exception. A negative rainfall is an input error and input errors are what you should expect from a meatbag at a keyboard. They aren&#39;t exceptional, so the error should be trapped and a new input entered, or whatever handling is required.."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574279980, "post_id": 58962179, "comment_id": 104180017, "body": "Sidenote: The link is of questionable value. The advice it gives is poor, and flat out wrong at points. Most notably <i>When an error occurs, C++ will normally stop and generate an error message.</i> I wish C++ was kind enough to do this. It would make everyone&#39;s lives much, much easier."}, {"owner": {"reputation": 13, "user_id": 12406070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9be0c365afc277aed2c205dd640565ef?s=128&d=identicon&r=PG&f=1", "display_name": "CoalLad", "link": "https://stackoverflow.com/users/12406070/coallad"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574280492, "post_id": 58962179, "comment_id": 104180261, "body": "@user4581301 The catch statement would be used for the purposes of OP&#39;s development. Otherwise I agree that you could just have a condition elsewhere to verify the credibility of the argument entered."}], "tags": [], "owner": {"reputation": 13, "user_id": 12406070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9be0c365afc277aed2c205dd640565ef?s=128&d=identicon&r=PG&f=1", "display_name": "CoalLad", "link": "https://stackoverflow.com/users/12406070/coallad"}, "is_accepted": false, "score": 1, "last_activity_date": 1574279003, "creation_date": 1574279003, "answer_id": 58962179, "question_id": 58961900, "link": "https://stackoverflow.com/questions/58961900/while-loop-stops-working-before-condition-c/58962179#58962179", "title": "While Loop stops working before condition C++", "body": "<p>Just have replace the while loop with</p>\n\n<pre><code>int main() { \n  double rainFall[12]; \n  int i = 0\n  while(i&lt;12){\n    cout &lt;&lt; \"Enter your rainfaill in incehs for month #\" &lt;&lt; i + 1 &lt;&lt; \": \" ; \n    cin &gt;&gt; rainFall[i]; \n    i++;\n  }\n} \n</code></pre>\n\n<p>the extra check for the double is unnecessary, because a double is able to be a negative. If you are looking to have it check for an error with the &lt;0 statement, i would recommend use <code>throw</code> and <code>catch</code> statements.\nGood documentation for those here <a href=\"https://www.w3schools.com/cpp/cpp_exceptions.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/cpp/cpp_exceptions.asp</a></p>\n"}], "owner": {"reputation": 15, "user_id": 10719634, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6I8tvNMMY6U/AAAAAAAAAAI/AAAAAAAAAAc/GbWD3wUvnBY/photo.jpg?sz=128", "display_name": "Oliver", "link": "https://stackoverflow.com/users/10719634/oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1574325537, "answer_count": 2, "score": -2, "last_activity_date": 1574279003, "creation_date": 1574277858, "question_id": 58961900, "link": "https://stackoverflow.com/questions/58961900/while-loop-stops-working-before-condition-c", "closed_reason": "Not suitable for this site", "title": "While Loop stops working before condition C++", "body": "<p>The while loop should stop at 12 but ends at 9. Also, please ignore I spelled inches incorrectly.</p>\n\n<pre><code>int main() { \n  double rainFall[12]; \n  int i = 0; \n\n  while(rainFall[i] &gt; 0 &amp;&amp; i &lt; 12 ){ \n\n    cout &lt;&lt; \"Enter your rainfaill in incehs for month #\" &lt;&lt; i + 1 &lt;&lt; \": \" ; \n    cin &gt;&gt; rainFall[i]; \n    i++;\n  }\n} \n</code></pre>\n\n<p>Input / Output: \nEnter your rainfaill in incehs for month #1: 9 </p>\n\n<p>Enter your rainfaill in incehs for month #2: 9 </p>\n\n<p>Enter your rainfaill in incehs for month #3: 9</p>\n\n<p>Enter your rainfaill in incehs for month #4: 9</p>\n\n<p>Enter your rainfaill in incehs for month #5: 9</p>\n\n<p>Enter your rainfaill in incehs for month #6: 9</p>\n\n<p>Enter your rainfaill in incehs for month #7: 9</p>\n\n<p>Enter your rainfaill in incehs for month #8: 9</p>\n\n<p>Enter your rainfaill in incehs for month #9: 9</p>\n"}, {"tags": ["c++", "opengl", "3d", "quaternions", "glm-math"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 2, "creation_date": 1574277910, "post_id": 58961878, "comment_id": 104178952, "body": "<a href=\"https://stackoverflow.com/questions/tagged/glm\">glm</a> != <a href=\"https://stackoverflow.com/tags/glm-math/info\">glm-math</a>"}, {"owner": {"reputation": 33, "user_id": 11974055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57148b19b4c25ead0eec7bf9984029f?s=128&d=identicon&r=PG&f=1", "display_name": "LuchoSuaya", "link": "https://stackoverflow.com/users/11974055/luchosuaya"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1574279411, "post_id": 58961878, "comment_id": 104179725, "body": "Sorry, didn&#39;t see that :( ... I&#39;ve already changed it :)"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 1, "creation_date": 1574279571, "post_id": 58961878, "comment_id": 104179815, "body": "No, you&#39;ve to use <a href=\"https://stackoverflow.com/tags/glm-math/info\">glm-math</a>. I&#39;ve changed it for you, already."}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1574281273, "post_id": 58961878, "comment_id": 104180622, "body": "You are multiplying the new rotation with the old orientation. Is that what you want (i.e., the parameter is a change and not the new value)? <code>m_Orientation = newRot;</code> is probably closer to what you want."}], "answers": [{"tags": [], "owner": {"reputation": 1454, "user_id": 1683902, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2d00f9a657d663d31fde89af0b2e6851?s=128&d=identicon&r=PG", "display_name": "Ian Young", "link": "https://stackoverflow.com/users/1683902/ian-young"}, "is_accepted": true, "score": 0, "last_activity_date": 1574329296, "creation_date": 1574329296, "answer_id": 58971707, "question_id": 58961878, "link": "https://stackoverflow.com/questions/58961878/problem-rotating-with-quaternions-in-opengl-glm-c/58971707#58971707", "title": "Problem rotating with quaternions in OpenGL (GLM/C++)", "body": "<p><em>Changing</em>, or setting orientation, is not the same as <em>rotating</em>:</p>\n\n<p>To set your orientation, you want to do it like this:</p>\n\n<pre><code>void setOrientation(glm::vec3 eular)\n{\n    m_Orientation = glm::quat(eular); // very simple\n}\n\nvoid setRotation(glm::vec3 eular)\n{\n    m_Rotation = glm::quat(eular); // very simple\n}\n</code></pre>\n\n<p>To rotate, we want to integrate the rotation quaternion, using SLERP:</p>\n\n<pre><code>void update(float deltaTimeS)\n{\n    glm::quat ident(1.0f);\n    glm::quat rotation = glm::mix(ident, m_Rotation, deltaTimeS);\n    m_Orientation = rotation * m_Orientation;\n}\n</code></pre>\n\n<p>And to get your rotation matrix:</p>\n\n<pre><code>void setTransform()\n{\n    m_RotationMatrix = glm::gtx::quaternion::toMat4(quaternion);\n}\n</code></pre>\n\n<p>See <a href=\"http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-17-quaternions/\" rel=\"nofollow noreferrer\">here</a> for more information on quaternion rotations.</p>\n"}], "owner": {"reputation": 33, "user_id": 11974055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b57148b19b4c25ead0eec7bf9984029f?s=128&d=identicon&r=PG&f=1", "display_name": "LuchoSuaya", "link": "https://stackoverflow.com/users/11974055/luchosuaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 58971707, "answer_count": 1, "score": 0, "last_activity_date": 1574329296, "creation_date": 1574277749, "last_edit_date": 1574279789, "question_id": 58961878, "link": "https://stackoverflow.com/questions/58961878/problem-rotating-with-quaternions-in-opengl-glm-c", "title": "Problem rotating with quaternions in OpenGL (GLM/C++)", "body": "<p>I'm programming a game engine for educational purposes and I'm a bit stucked with rotations. The thing is that I have in the UI 3 squares to represent an object's orientation in Euler Angles, and from there I can change the values.</p>\n\n<p>To change them, I call:</p>\n\n<pre><code>void TransformComponent::SetOrientation(glm::vec3 eulerAxAngles)\n{\n    glm::vec3 euler_inRadians = glm::radians(eulerAxAngles);\n\n    glm::quat newRot;\n    double cy = cos(euler_inRadians.y * 0.5);\n    double sy = sin(euler_inRadians.y * 0.5);\n    double cp = cos(euler_inRadians.x * 0.5);\n    double sp = sin(euler_inRadians.x * 0.5);\n    double cr = cos(euler_inRadians.z * 0.5);\n    double sr = sin(euler_inRadians.z * 0.5);\n    newRot.w = cy * cp * cr + sy * sp * sr;\n    newRot.x = cy * cp * sr - sy * sp * cr;\n    newRot.y = sy * cp * sr + cy * sp * cr;\n    newRot.z = sy * cp * cr - cy * sp * sr;\n\n    m_Orientation = newRot * m_Orientation;\n    UpdateTransform();\n}\n</code></pre>\n\n<p>m_Orientation is a quaternion storing the object's current orientation.I know all that conversion from eulers to quaternion could be handled by glm but I changed to this to debug what was happening...</p>\n\n<p>Then, UpdateTransform() does the next:</p>\n\n<pre><code>void TransformComponent::UpdateTransform()\n{\n    m_TransformationMatrix = glm::translate(glm::mat4(1.0f), m_Translation) *\n        glm::scale(glm::mat4(1.0f), m_Scale) * glm::mat4_cast(m_Orientation);\n\n\n    //Set euler angles\n    m_Rotation_InEulerAngles = glm::eulerAngles(m_Orientation);\n}\n</code></pre>\n\n<p>And m_Rotation_InEulerAngles is the vec3 that can be seen from the UI to change the angles of the object's orientation.</p>\n\n<p>The problem is that when I try to modify one of the 3 euler angles, the 3 are modified, I mean, if I modify the Roll angle (around Z axis), it modifies also Pitch and Yaw (not with the Z value, it's like it sets another orientation to the object).</p>\n\n<p>In this gif is shown how the translation/scaling are well performed but rotation (here is seen in radians by now), is not well performed, it changes the whole orientation, not just the one in the axis I want:</p>\n\n<p><a href=\"https://gfycat.com/plushhonestargentineruddyduck\" rel=\"nofollow noreferrer\">https://gfycat.com/plushhonestargentineruddyduck</a></p>\n\n<p>Does somebody sees what I'm I doing wrong?</p>\n"}, {"tags": ["c++", "constructor", "language-lawyer", "raii"], "comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574277872, "post_id": 58961782, "comment_id": 104178932, "body": "Can&#39;t reproduce: <a href=\"https://godbolt.org/z/ysUqYG\" rel=\"nofollow noreferrer\">godbolt.org/z/ysUqYG</a>"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574278064, "post_id": 58961782, "comment_id": 104179041, "body": "I commented/uncommented it many times with different compilers and command line options and never saw all zeros."}, {"owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574278406, "post_id": 58961782, "comment_id": 104179228, "body": "@Evg Hm, so it seems like the compiler I`m currently using (ICPC 19.0) just happens to behave similarly to the one cpp.sh runs on. Mea culpa, I haven`t considered that possibility, thus wrongly deeming such behaviour universal."}], "answers": [{"tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": true, "score": 2, "last_activity_date": 1574279466, "creation_date": 1574279466, "answer_id": 58962297, "question_id": 58961782, "link": "https://stackoverflow.com/questions/58961782/c-partial-constructors-with-and-without-a-body-behave-differently/58962297#58962297", "title": "C++ partial constructors with and without a body behave differently", "body": "<p>With the given constructor</p>\n\n<pre><code>A() : d(4) { ... }\n</code></pre>\n\n<p>all data member except <code>d</code> will be default-initialized. For built-in types this is no-op, and these data members will have indeterminate values. Reading their values is undefined behavior.</p>\n\n<p>Some compilers <a href=\"https://stackoverflow.com/questions/370195/when-and-why-will-an-os-initialise-memory-to-0xcd-0xdd-etc-on-malloc-free-new\">might initialize</a> such data members in debug builds with specific byte patterns to help catch runtime bugs. </p>\n"}], "owner": {"reputation": 5371, "user_id": 7019311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2981ebd25241785e1495e511caa61a?s=128&d=identicon&r=PG&f=1", "display_name": "hidefromkgb", "link": "https://stackoverflow.com/users/7019311/hidefromkgb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 58962297, "answer_count": 1, "score": 1, "last_activity_date": 1574279466, "creation_date": 1574277355, "question_id": 58961782, "link": "https://stackoverflow.com/questions/58961782/c-partial-constructors-with-and-without-a-body-behave-differently", "title": "C++ partial constructors with and without a body behave differently", "body": "<p>Consider the following C++ code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#define DUMP(_, str) do {                      \\\n    std::cout &lt;&lt; str;                          \\\n    for (int i = 0; i &lt; 10; ++i)               \\\n        std::cout &lt;&lt; (_).x[i] &lt;&lt; std::endl;    \\\n    std::cout &lt;&lt; \"a = \" &lt;&lt; (_).a &lt;&lt; std::endl; \\\n    std::cout &lt;&lt; \"b = \" &lt;&lt; (_).b &lt;&lt; std::endl; \\\n    std::cout &lt;&lt; \"c = \" &lt;&lt; (_).c &lt;&lt; std::endl; \\\n    std::cout &lt;&lt; \"d = \" &lt;&lt; (_).d &lt;&lt; std::endl; \\\n    std::cout &lt;&lt; std::endl;                    \\\n} while (0)\n\n//#define ENABLE_WTF\n\nstruct A {\n    int x[10];\n    float a, b, c, d;\n\n#ifndef ENABLE_WTF\n    A() : d(4) { DUMP(*this, \"=== INSIDE CTOR ===\\n\"); }\n#else\n    A() : d(4) {}\n#endif\n};\n\nint main() {\n    A a;\n    DUMP(a, \"=== OUT OF CTOR ===\\n\");\n}\n</code></pre>\n\n<p>As can be seen, <code>A</code> has a partial constructor that only initializes one of the fields, whereas all the other fields predictably remain garbage; <a href=\"http://cpp.sh/5zusj\" rel=\"nofollow noreferrer\">demonstration here</a>.</p>\n\n<p>And now the question: Is it compiler-specific to zero-out the rest of <code>A</code> when its partial constructor has no body (<a href=\"http://cpp.sh/5kmjx\" rel=\"nofollow noreferrer\">demonstration here</a>), or is that a part of C++ itself?</p>\n"}, {"tags": ["c++", "c++11", "gnuplot"], "comments": [{"owner": {"reputation": 1158, "user_id": 9625777, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TKzcV9Zbl4Q/AAAAAAAAAAI/AAAAAAAAAzA/C06ZN5f_JsE/photo.jpg?sz=128", "display_name": "Pe Dro", "link": "https://stackoverflow.com/users/9625777/pe-dro"}, "edited": false, "score": 0, "creation_date": 1574277097, "post_id": 58961698, "comment_id": 104178563, "body": "I, earlier, referred to this link:    <a href=\"https://stackoverflow.com/questions/215110/scatter-plots-in-c\">stackoverflow.com/questions/215110/scatter-plots-in-c</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1158, "user_id": 9625777, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TKzcV9Zbl4Q/AAAAAAAAAAI/AAAAAAAAAzA/C06ZN5f_JsE/photo.jpg?sz=128", "display_name": "Pe Dro", "link": "https://stackoverflow.com/users/9625777/pe-dro"}, "is_accepted": true, "score": 0, "last_activity_date": 1574277034, "creation_date": 1574277034, "answer_id": 58961699, "question_id": 58961698, "link": "https://stackoverflow.com/questions/58961698/what-is-the-detailed-method-to-use-gnu-plot-in-my-c-code/58961699#58961699", "title": "What is the detailed method to use Gnu Plot in my C++ code?", "body": "<p>So, for <strong>Windows 10, C++11 or C++14</strong>, the process goes as follows:-</p>\n\n<p>1) Download the zip file from <a href=\"http://sourceforge.jp/projects/sfnet_gnuplot/downloads/gnuplot/4.4.3/gp443win32.zip/\" rel=\"nofollow noreferrer\">Sourceforge</a> and extract it in \"C:\\gnuplot\". </p>\n\n<p>2) Download  gnuplot additional files (IDK their use\n!) from <a href=\"https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/gnuplot-cpp/gnuplot-cpp.zip\" rel=\"nofollow noreferrer\">Google Code</a>. Extract these files in the same folder i.e, \"C:\\gnuplot\". </p>\n\n<p>3) Open this gnuplot folder and double click the file with <strong>.bat</strong> extension (Batch file). This is how your folder should look like:\n<a href=\"https://i.stack.imgur.com/WTzOJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WTzOJ.png\" alt=\"enter image description here\"></a></p>\n\n<p>4) Add the path of the binary to environment variable path\n<a href=\"https://i.stack.imgur.com/Mc9Vb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mc9Vb.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now, you can continue with your code. Suppose you use Code Blocks to plot a curve using the following snippet:</p>\n\n<pre><code>//Plot the results\n    vector&lt;float&gt; x;\n    vector&lt;float&gt; y1, y2;\n\n    for (int i = 0; i &lt; 1000; i++) {\n        x.push_back(i * 2 * PI / 1000);\n        y1.push_back(sin(i * 2 * PI / 1000));\n        y2.push_back(i * 2 * PI / 1000); //Any random function...\n    }\n\nFILE * gp = popen(\"gnuplot\", \"w\");\n    fprintf(gp, \"set terminal wxt size 600,400 \\n\");\n    fprintf(gp, \"set grid \\n\");\n    fprintf(gp, \"set title '%s' \\n\", \"f(x) = sin (x)\");\n    fprintf(gp, \"set style line 1 lt 3 pt 7 ps 0.1 lc rgb 'green' lw 1 \\n\");\n    fprintf(gp, \"set style line 2 lt 3 pt 7 ps 0.1 lc rgb 'red' lw 1 \\n\");\n    fprintf(gp, \"plot '-' w p ls 1, '-' w p ls 2 \\n\");\n\n    //Exact f(x) = sin(x) -&gt; Green Graph\n    for (int k = 0; k &lt; x.size(); k++) {\n        fprintf(gp, \"%f %f \\n\", x[k], y1[k]);\n    }\n    fprintf(gp, \"e\\n\");\n\n    //f(x) = sin(x) -&gt; Red Graph\n    for (int k = 0; k &lt; x.size(); k++) {\n        fprintf(gp, \"%f %f \\n\", x[k], y2[k]);\n    }\n    fprintf(gp, \"e\\n\");\n\n    fflush(gp);\n    system(\"pause\");\n\n    pclose(gp); \n</code></pre>\n\n<p>On compiling it, you may see an error that says \"popen not found\" or \"pclose not found\". The solution to this is: </p>\n\n<ul>\n<li><strong>For popen</strong>, Add </li>\n</ul>\n\n<pre><code>extern \"C\" FILE *popen(const char *command, const char *mode);\n\n</code></pre>\n\n<p>in the global scope before the main() routine.</p>\n\n<ul>\n<li><strong>For pclose</strong>, simply, comment it out.</li>\n</ul>\n\n<pre><code> //pclose(gp);\n</code></pre>\n\n<p>Now, your program should run compile normally and the gnuplot window should spontaneously pop up along with the cmd window. It may be slow to respond sometimes and may even stop responding, but wait and enjoy the results.</p>\n"}], "owner": {"reputation": 1158, "user_id": 9625777, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TKzcV9Zbl4Q/AAAAAAAAAAI/AAAAAAAAAzA/C06ZN5f_JsE/photo.jpg?sz=128", "display_name": "Pe Dro", "link": "https://stackoverflow.com/users/9625777/pe-dro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 58961699, "answer_count": 1, "score": 0, "last_activity_date": 1574277974, "creation_date": 1574277034, "last_edit_date": 1574277974, "question_id": 58961698, "link": "https://stackoverflow.com/questions/58961698/what-is-the-detailed-method-to-use-gnu-plot-in-my-c-code", "title": "What is the detailed method to use Gnu Plot in my C++ code?", "body": "<p>I gave gone through many links that kind of answer the question but none of them provides a detailed step-by-step method to do so. I have a piece of c++ code that requires plotting using gnu plot. </p>\n\n<p>I even referred to the documentation. Its not useful for me.</p>\n"}, {"tags": ["c++", "namespaces"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1574276767, "post_id": 58961613, "comment_id": 104178396, "body": "You may find that <code>namespace A;</code> is an easier way of doing this as it doesn&#39;t indent the entire rest of the file."}, {"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 2, "creation_date": 1574276817, "post_id": 58961613, "comment_id": 104178419, "body": "It&#39;s also much more readable as you get larger projects. Please continue this practice."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1574276957, "post_id": 58961613, "comment_id": 104178481, "body": "@tadman <code>namespace A;</code> is not proper syntax. What is it supposed to mean?"}, {"owner": {"reputation": 2524, "user_id": 136650, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UtPUT.jpg?s=128&g=1", "display_name": "raven", "link": "https://stackoverflow.com/users/136650/raven"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574277057, "post_id": 58961613, "comment_id": 104178539, "body": "@uneven_mark Guess it&#39;s an incomplete using statement"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 2524, "user_id": 136650, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UtPUT.jpg?s=128&g=1", "display_name": "raven", "link": "https://stackoverflow.com/users/136650/raven"}, "edited": false, "score": 1, "creation_date": 1574277463, "post_id": 58961613, "comment_id": 104178736, "body": "@raven Yeah <code>using namespace A;</code> would work as long as there are no name collisions with the global namespace."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574281395, "post_id": 58961613, "comment_id": 104180674, "body": "@uneven_mark My bad, I forgot the <code>using</code> prefix."}], "answers": [{"tags": [], "owner": {"reputation": 2524, "user_id": 136650, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UtPUT.jpg?s=128&g=1", "display_name": "raven", "link": "https://stackoverflow.com/users/136650/raven"}, "is_accepted": true, "score": 7, "last_activity_date": 1574277304, "last_edit_date": 1574277304, "creation_date": 1574276768, "answer_id": 58961641, "question_id": 58961613, "link": "https://stackoverflow.com/questions/58961613/c-namespaces-basic-usage/58961641#58961641", "title": "C++ namespaces basic usage", "body": "<p>It's necessary, but you can do the following instead:</p>\n\n<pre><code>// source file Foo.cpp\n\n#include \"Foo.h\"\n\nA::Foo::Foo() {}\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 9705151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2de30460607df79416ca0e5436cf568d?s=128&d=identicon&r=PG&f=1", "display_name": "melanie93", "link": "https://stackoverflow.com/users/9705151/melanie93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 2, "accepted_answer_id": 58961641, "answer_count": 1, "score": 5, "last_activity_date": 1574277304, "creation_date": 1574276638, "last_edit_date": 1574277278, "question_id": 58961613, "link": "https://stackoverflow.com/questions/58961613/c-namespaces-basic-usage", "title": "C++ namespaces basic usage", "body": "<p>In the example below, is it necessary to use namespace A{} in the source file or is it redundant as it is already been done in the header file?</p>\n\n<pre><code>// header file Foo.h\n\nnamespace A\n{\n    class Foo\n    {\n        Foo();\n    };\n}\n\n// source file Foo.cpp\n\n#include \"Foo.h\"\n\nnamespace A\n{\n    Foo::Foo() {}\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "virtual-functions"], "comments": [{"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1574276811, "post_id": 58961539, "comment_id": 104178412, "body": "&quot;same class, different data, some functions work different&quot; - this is almost exactly describing the use case for templates. Can you list the specifics of how these classes should differ?"}, {"owner": {"reputation": 321, "user_id": 10248920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5269af8648b2daf254ca5012fff9908?s=128&d=identicon&r=PG&f=1", "display_name": "Newline", "link": "https://stackoverflow.com/users/10248920/newline"}, "reply_to_user": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1574277063, "post_id": 58961539, "comment_id": 104178542, "body": "@parktomatomi The UniqueData is different for each class. doUniqueStuff() also does different stuff for each class. There are many functions like doStuff() but they look the same. +most importantly, some doStuff() functions need to call doUniqueStuff(). I will edit the question"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1574277187, "post_id": 58961539, "comment_id": 104178610, "body": "Honestly, more details needed.  Ideally a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, and a concrete &quot;problem&quot; you want people to solve (not just &quot;make better&quot;)"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574277550, "post_id": 58961539, "comment_id": 104178778, "body": "<i>I have multiple classes that look almost the same, do almost the same, but define and use different data</i>  -- Is one a Car and the other an Animal?  They both &quot;move&quot;, &quot;make sounds&quot;, etc.  The point is that if these classes have nothing in common in terms of utility, then creating a class hierarchy just for the sake of saving typing is not a good idea."}, {"owner": {"reputation": 1624, "user_id": 497313, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VUTOp.jpg?s=128&g=1", "display_name": "rossb83", "link": "https://stackoverflow.com/users/497313/rossb83"}, "edited": false, "score": 0, "creation_date": 1574277670, "post_id": 58961539, "comment_id": 104178831, "body": "It almost looks like the two classes would follow the same &quot;contract&quot; if their two nested classes followed the same contract. If so, you can define an interface between the two nested classes, and then an interface for the two top-level classes, then you just have one class."}, {"owner": {"reputation": 321, "user_id": 10248920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5269af8648b2daf254ca5012fff9908?s=128&d=identicon&r=PG&f=1", "display_name": "Newline", "link": "https://stackoverflow.com/users/10248920/newline"}, "reply_to_user": {"reputation": 1624, "user_id": 497313, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/VUTOp.jpg?s=128&g=1", "display_name": "rossb83", "link": "https://stackoverflow.com/users/497313/rossb83"}, "edited": false, "score": 0, "creation_date": 1574277946, "post_id": 58961539, "comment_id": 104178975, "body": "@rossb83 Not sure if I understand. I was thinking of making a base-class with virtual functions but the data is defined in the classes so cant use that in the base-class to implement any functions."}], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 10248920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5269af8648b2daf254ca5012fff9908?s=128&d=identicon&r=PG&f=1", "display_name": "Newline", "link": "https://stackoverflow.com/users/10248920/newline"}, "edited": false, "score": 0, "creation_date": 1574278408, "post_id": 58961912, "comment_id": 104179230, "body": "Thanks! One problem is that UniqueData has to be defined in the class, as in SomeClass::UniqueData. But the definition doest necessarily look the same for each class. Only their name is the same.  Like: <code>struct UniqueData{int a; float b;} data;</code> and <code>struct UniqueData{bool c;} data;</code> in an other class"}, {"owner": {"reputation": 321, "user_id": 10248920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5269af8648b2daf254ca5012fff9908?s=128&d=identicon&r=PG&f=1", "display_name": "Newline", "link": "https://stackoverflow.com/users/10248920/newline"}, "edited": false, "score": 0, "creation_date": 1574279325, "post_id": 58961912, "comment_id": 104179683, "body": "Data like UniqueData can&#39;t be specialized / defined outside the class like you did with doUniqueStuff(), am I right?"}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 321, "user_id": 10248920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5269af8648b2daf254ca5012fff9908?s=128&d=identicon&r=PG&f=1", "display_name": "Newline", "link": "https://stackoverflow.com/users/10248920/newline"}, "edited": false, "score": 0, "creation_date": 1574279860, "post_id": 58961912, "comment_id": 104179955, "body": "Kind of. You can&#39;t make named members, but there are tools like <code>std::tuple</code> that can turn template arguments into data of different amounts and types."}, {"owner": {"reputation": 321, "user_id": 10248920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5269af8648b2daf254ca5012fff9908?s=128&d=identicon&r=PG&f=1", "display_name": "Newline", "link": "https://stackoverflow.com/users/10248920/newline"}, "edited": false, "score": 0, "creation_date": 1574280841, "post_id": 58961912, "comment_id": 104180417, "body": "In my actual case, they are diferrent enums. Same names but different enumerators. Like <code>enum UniqueData { A,B,C}</code> and <code>enum UniqueData { M, N}</code>."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 321, "user_id": 10248920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5269af8648b2daf254ca5012fff9908?s=128&d=identicon&r=PG&f=1", "display_name": "Newline", "link": "https://stackoverflow.com/users/10248920/newline"}, "edited": false, "score": 1, "creation_date": 1574286919, "post_id": 58961912, "comment_id": 104183032, "body": "You&#39;re correct, templates can&#39;t solve that problem for you. Macros can get you kind of there with a lot of caveats. Edited answer to define enums with macros."}], "tags": [], "owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "is_accepted": true, "score": 1, "last_activity_date": 1574287622, "last_edit_date": 1574287622, "creation_date": 1574277911, "answer_id": 58961912, "question_id": 58961539, "link": "https://stackoverflow.com/questions/58961539/multiple-classes-that-look-almost-the-same-but-use-some-different-data-and-funct/58961912#58961912", "title": "Multiple classes that look almost the same but use some different data and functions", "body": "<p>Well, it's really hard to determine what the <em>real</em> problem you're trying to solve is. BUT, based on the bare minimum example you gave, this is how you might do it with templates:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;int I&gt;\nclass SomeClass {\npublic:\n    class UniqueData{};\n    UniqueData data;\n    static UniqueData static_data;\n    void doStuff() { doWhatever(data); }\n    void doStuff2() { doUniqueStuff(data); }\n    void doUniqueStuff(UniqueData uniqueData);\n};\n\nvoid doCDE() { }\nvoid doABC(SomeClass&lt;1&gt;::UniqueData) { }\nvoid doPQR();\nvoid doMNO(SomeClass&lt;2&gt;::UniqueData) { }\n\ntemplate&lt;&gt;\nvoid::SomeClass&lt;1&gt;::doUniqueStuff(SomeClass&lt;1&gt;::UniqueData data) {\n    doABC(data);\n    doCDE();\n}\n\ntemplate&lt;&gt;\nvoid::SomeClass&lt;2&gt;::doUniqueStuff(SomeClass&lt;2&gt;::UniqueData data) {\n    doMNO(data);\n    doPQR();\n}\n\nint main() {\n    SomeClass&lt;1&gt;().doStuff2();\n    SomeClass&lt;2&gt;().doStuff2();\n}\n</code></pre>\n\n<p>Here, the template instance has its own unique datatype, and two functions. And these two functions are specialized to call different functions.</p>\n\n<p>EDIT: You specified that you want <code>UniqueData</code> to have some unique members. If you're willing to be flexible, you can use tuples for that:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;string&gt;\n\ntemplate&lt;typename T&gt;\nvoid doWhatever(T) { }\n\n// This is now a variadic template. All arguments after id are packed into TUniqueDataMembers\ntemplate &lt;int id, typename... TUniqueDataMembers&gt;\nclass SomeClass {\npublic:\n    // UnqiueData has a tuple member (with TUniqueDataMembers). It has one member of each template argument given\n    class UniqueData {\n    public:\n        UniqueData() : data(std::make_tuple(TUniqueDataMembers{}...)) { }\n        std::tuple&lt;TUniqueDataMembers...&gt; data;\n    };\n    UniqueData data;\n    static UniqueData static_data;\n    void doStuff() { doWhatever(data); }\n    void doStuff2() { doUniqueStuff(data); }\n    void doUniqueStuff(UniqueData uniqueData);\n};\n\n// Using a type definition saves some boilerplate, now that we're using multiple template arguments\nusing SomeClass1 = SomeClass&lt;1, int&gt;;\nusing SomeClass2 = SomeClass&lt;2, double, std::string&gt;;\n\nvoid doCDE() { }\nvoid doABC(SomeClass1::UniqueData data) {\n    // Use std::get&lt;index&gt;(tuple) to access unique data\n    std::cout &lt;&lt; \"int: \" &lt;&lt; std::get&lt;0&gt;(data.data) &lt;&lt; \"\\n\";\n}\nvoid doPQR() { }\nvoid doMNO(SomeClass2::UniqueData data) {\n    std::cout &lt;&lt; \"double: \" &lt;&lt; std::get&lt;0&gt;(data.data) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"string: \" &lt;&lt; std::get&lt;1&gt;(data.data) &lt;&lt; \"\\n\";    \n}\n\ntemplate&lt;&gt;\nvoid SomeClass1::doUniqueStuff(SomeClass1::UniqueData data) {\n    doABC(data);\n    doCDE();\n}\n\ntemplate&lt;&gt;\nvoid SomeClass2::doUniqueStuff(SomeClass2::UniqueData data) {\n    doMNO(data);\n    doPQR();\n}\n\nint main() {\n    SomeClass1 class1 {};\n    std::get&lt;0&gt;(class1.data.data) = 42;\n    class1.doStuff2();\n\n    SomeClass2 class2 {};\n    std::get&lt;0&gt;(class2.data.data) = 2.5;\n    std::get&lt;1&gt;(class2.data.data) = \"hello, world!\";\n    class2.doStuff2();\n}\n</code></pre>\n\n<p>EDIT: Regarding the constraint that <code>UniqueData</code> must be an ENUM with different members.... okay, you got me there. Templates can't do <em>name substitution</em>. Macros are the only thing that can do that. Unfortunately, C++ macros don't offer the ability to recurse like variadic templates can.</p>\n\n<p>BUT, using variadic macro tricks: <a href=\"https://stackoverflow.com/questions/11761703/overloading-macro-on-number-of-arguments/11763277#11763277\">Overloading Macro on Number of Arguments</a>\nYou can get an \"up-to-N\" argument solution that you can expand as you need. Here is the implementation for up to 4 enum members:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;functional&gt;\n#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;string&gt;\n\ntemplate&lt;typename T&gt;\nvoid doWhatever(T) { }\n\n// Variadic macro trick for \"up-to-N-argument macros\"\n#define _GEN_ENUM1(_0) enum class UniqueData { _0 };\n#define _GEN_ENUM2(_0, _1) enum class UniqueData { _0, _1 };\n#define _GEN_ENUM3(_0, _1, _2) enum class UniqueData { _0, _1, _2 };\n#define _GEN_ENUM4(_0, _1, _2, _3) enum class UniqueData { _0, _1, _2, _3 };\n#define _GET_GEN_ENUM(_0, _1, _2, _3, NAME,...) NAME\n#define _GEN_ENUM(...) _GET_GEN_ENUM(__VA_ARGS__, _GEN_ENUM4, _GEN_ENUM3, _GEN_ENUM2, GEN_ENUM1)(__VA_ARGS__)\n\n// Macro to generate class variadic parameters pass to _GEN_ENUM\n#define DECL_SOMECLASS(id, ...)\\\n    class SomeClass##id{\\\n    public:\\\n        _GEN_ENUM(__VA_ARGS__)\\\n        UniqueData data;\\\n        static UniqueData static_data;\\\n        void doStuff() { doWhatever(data); }\\\n        void doStuff2() { doUniqueStuff(data); }\\\n        void doUniqueStuff(UniqueData uniqueData);\\\n    };\n\n// Macro to implements SomeClass&lt;N&gt;::doStuff2() with custom function\n#define IMPL_SOMECLASS(id, f_do_unique, f_do_not_unique)\\\n    void SomeClass##id::doUniqueStuff(SomeClass##id::UniqueData data) {\\\n        f_do_unique(data);\\\n        f_do_not_unique();\\\n    }\n\n// Actually declare the classes\nDECL_SOMECLASS(1, A, B, C)\nDECL_SOMECLASS(2, D, E)\n\nvoid doABC(SomeClass1::UniqueData data) {\n    std::cout &lt;&lt; \"A: \" &lt;&lt; (int)SomeClass1::UniqueData::A &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"B: \" &lt;&lt; (int)SomeClass1::UniqueData::B &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"C: \" &lt;&lt; (int)SomeClass1::UniqueData::C &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Data: \" &lt;&lt; (int)data &lt;&lt; \"\\n\";\n}\nvoid doCDE() { }\nvoid doMNO(SomeClass2::UniqueData data) {\n    std::cout &lt;&lt; \"D: \" &lt;&lt; (int)SomeClass2::UniqueData::D &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"E: \" &lt;&lt; (int)SomeClass2::UniqueData::E &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"Data: \" &lt;&lt; (int)data &lt;&lt; \"\\n\";\n}\nvoid doPQR() { }\n\nIMPL_SOMECLASS(1, doABC, doCDE)\nIMPL_SOMECLASS(2, doMNO, doPQR)\n\nint main() {\n    SomeClass1 class1 {};\n    class1.data = SomeClass1::UniqueData::C;\n    class1.doStuff2();\n\n    SomeClass2 class2 {};\n    class2.data = SomeClass2::UniqueData::E;\n    class2.doStuff2();\n}\n</code></pre>\n\n<p>NOTE: by using macros instead of templates, you lose all type safety for the arguments of <code>DECL_SOMECLASS</code> and <code>IMPL_SOMECLASS</code>. So you can pass <code>\"lol\"</code> as the <code>id</code> and witness horrifying error messages. Here be dragons. </p>\n"}], "owner": {"reputation": 321, "user_id": 10248920, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5269af8648b2daf254ca5012fff9908?s=128&d=identicon&r=PG&f=1", "display_name": "Newline", "link": "https://stackoverflow.com/users/10248920/newline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 58961912, "answer_count": 1, "score": 0, "last_activity_date": 1574287622, "creation_date": 1574276348, "last_edit_date": 1574277342, "question_id": 58961539, "link": "https://stackoverflow.com/questions/58961539/multiple-classes-that-look-almost-the-same-but-use-some-different-data-and-funct", "title": "Multiple classes that look almost the same but use some different data and functions", "body": "<p>I have multiple classes that look almost the same, do almost the same, but define and use different data and some of their functions work different (though they have the same name / signature).</p>\n\n<pre><code>class SomeClass1{\n\n    class UniqueData1{};\n    UniqueData1 data;\n    static UniqueData1 static_data;\n\n    void doStuff1() {doWhatever( data);}\n    void doStuff2() {doUniqueStuff( data);}\n\n    void doUniqueStuff(UniqueData1 _data) {doABC( _data); doCDE();}\n\n};\n\nclass SomeClass2{\n\n    class UniqueData2{};\n    UniqueData2 data;\n    static UniqueData2 static_data;\n\n    void doStuff1() {doWhatever( data);}\n    void doStuff2() {doUniqueStuff( data);}\n\n    void doUniqueStuff(UniqueData2 _data) {doMNO( _data); doPQR();}\n\n};\n</code></pre>\n\n<p>There are many functions like doStuff(), and many classes. How do I solve this without bunch of copy-paste? I was thinking about templates and virtual functions but could not come up with any solution so far.</p>\n\n<p>Edit: some of the same-looking functions need to call the functions that do unique stuff.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1574276406, "post_id": 58961479, "comment_id": 104178240, "body": "What is the algorithm you are trying to implement? Please describe it in detail."}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1574276511, "post_id": 58961479, "comment_id": 104178268, "body": "A first issue: <code>submatrix</code> is an array of pointers, not an array of complex. You would avoid such difficulties by using <code>std::vector</code> for example."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1574276520, "post_id": 58961479, "comment_id": 104178274, "body": "@ThomasSablik, <a href=\"https://en.wikipedia.org/wiki/Laplace_expansion\" rel=\"nofollow noreferrer\">Laplace expansion</a>."}, {"owner": {"reputation": 3, "user_id": 11783146, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hJAgFyO3UKw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfMoz1Ec5guporkC_1_lCkbnNC7WA/photo.jpg?sz=128", "display_name": "Gladiatorr", "link": "https://stackoverflow.com/users/11783146/gladiatorr"}, "edited": false, "score": 0, "creation_date": 1574276545, "post_id": 58961479, "comment_id": 104178291, "body": "This is not mine, i just took it from this link <a href=\"https://www.tutorialspoint.com/cplusplus-program-to-compute-determinant-of-a-matrix\" rel=\"nofollow noreferrer\">link</a>."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574276630, "post_id": 58961479, "comment_id": 104178325, "body": "If you want to implement it as an exercise, it&#39;s OK, if you want to use it in practice, don&#39;t do it, it&#39;s too slow."}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1574276639, "post_id": 58961479, "comment_id": 104178330, "body": "To complete my previous comment: a <code>delete</code>is missing at the end of the function ..."}, {"owner": {"reputation": 3, "user_id": 11783146, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hJAgFyO3UKw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfMoz1Ec5guporkC_1_lCkbnNC7WA/photo.jpg?sz=128", "display_name": "Gladiatorr", "link": "https://stackoverflow.com/users/11783146/gladiatorr"}, "edited": false, "score": 0, "creation_date": 1574276733, "post_id": 58961479, "comment_id": 104178382, "body": "the method above was taken from a link, i just modified a little bit to make it suitable to my class."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1574276764, "post_id": 58961479, "comment_id": 104178393, "body": "@Damien Well, let&#39;s say n + 1."}, {"owner": {"reputation": 3, "user_id": 11783146, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hJAgFyO3UKw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfMoz1Ec5guporkC_1_lCkbnNC7WA/photo.jpg?sz=128", "display_name": "Gladiatorr", "link": "https://stackoverflow.com/users/11783146/gladiatorr"}, "reply_to_user": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1574276919, "post_id": 58961479, "comment_id": 104178462, "body": "Iam implementing it as an exercise :). I don&#39;t care about complexity. @Damien can you be more specific ? its a recursive method, where and what exactly i should add delete?"}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1574276961, "post_id": 58961479, "comment_id": 104178483, "body": "You don&#39;t remove the <code>ith</code> raw in the submatrix. Test <code>i == x</code> etc."}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1574276970, "post_id": 58961479, "comment_id": 104178487, "body": "You shouldn&#39;t copy code that you don&#39;t understand. This code will cause memory leaks. Try to find an algorithm and implement it yourself. That&#39;s the reason I asked for the algorithm. Try to understand it. You should avoid raw c style arrays and use containers like std:: vector instead to avoid such problems."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1574277890, "post_id": 58961479, "comment_id": 104178941, "body": "Possible Duplicate <a href=\"https://stackoverflow.com/questions/46545044/determinant-of-matrix-with-recursion\">Determinant of matrix with recursion</a>"}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1574278125, "post_id": 58961479, "comment_id": 104179097, "body": "@DavidRankin-ReinstateMonica Highly related of course but in my opinion not an exact duplicate as OP wants to know why their code is not working."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1574278470, "post_id": 58961479, "comment_id": 104179257, "body": "That&#39;s why I didn&#39;t actually set close as duplicate and just listed it here <code>:)</code> Also, unless this has to be &quot;recursive&quot;, there are some pretty good Gauss-Jordan eliminations with full-pivoting that can provide the determinate efficiently without recursion."}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1574279427, "post_id": 58961479, "comment_id": 104179729, "body": "@Gladiatorr Each <code>new</code> should be paired with a <code>delete</code>.  You have a <code>new</code> at the begining of the function, add a <code>delete</code> at the end of the function. Again, better to use a <code>std::vector</code> of <code>std::vector</code>."}], "answers": [{"tags": [], "owner": {"reputation": 462, "user_id": 9199778, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Ow6QaNEy6pU/AAAAAAAAAAI/AAAAAAAAALI/lRmYPhJ9yRo/photo.jpg?sz=128", "display_name": "Amit Panasara", "link": "https://stackoverflow.com/users/9199778/amit-panasara"}, "is_accepted": false, "score": 0, "last_activity_date": 1576350469, "creation_date": 1576350469, "answer_id": 59338298, "question_id": 58961479, "link": "https://stackoverflow.com/questions/58961479/how-to-calculate-the-determinant-of-a-matrix-nxn-recursively/59338298#59338298", "title": "How to calculate the determinant of a matrix NxN ? [Recursively]", "body": "<p>Use Sarrus' Rule (non recursive method) example on below link is in Javascript, but easily can be written in C\n<a href=\"https://github.com/apanasara/Faster_nxn_Determinant\" rel=\"nofollow noreferrer\">https://github.com/apanasara/Faster_nxn_Determinant</a></p>\n\n<p>nxn Determinant computation thru only two loops</p>\n"}], "owner": {"reputation": 3, "user_id": 11783146, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hJAgFyO3UKw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfMoz1Ec5guporkC_1_lCkbnNC7WA/photo.jpg?sz=128", "display_name": "Gladiatorr", "link": "https://stackoverflow.com/users/11783146/gladiatorr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1576350469, "creation_date": 1574276098, "last_edit_date": 1574277243, "question_id": 58961479, "link": "https://stackoverflow.com/questions/58961479/how-to-calculate-the-determinant-of-a-matrix-nxn-recursively", "title": "How to calculate the determinant of a matrix NxN ? [Recursively]", "body": "<p>I've been searching in all over the internet for an algorithm to calculate the determinant of NxN martix <strong>recursively</strong>. (I do not have any idea about the dimension, so N can be every integer that is less than 256)</p>\n\n<pre><code>complex&lt;double&gt; Matrix::matrixDeterminant(complex&lt;double&gt; **matrix, int n) {\n\n  complex&lt;double&gt; det(0,0);\n\n  complex&lt;double&gt; **submatrix;\n  submatrix[i] =  new complex&lt;double&gt;[n]\n\n\n  for(int i = 0; i&lt; n; i++) {\n      submatrix[i] = new complex&lt;double&gt;[n];\n    }\n\n\n   if (n == 2)\n      return ((matrix[0][0] * matrix[1][1]) - (matrix[1][0] * matrix[0][1]));\n   else {\n      for (int x = 0; x &lt; n; x++) {\n            int subi = 0;\n            for (int i = 1; i &lt; n; i++) {\n               int subj = 0;\n               for (int j = 0; j &lt; n; j++) {\n                  if (j == x)\n                  continue;\n                  submatrix[subi][subj] = matrix[i][j];\n                  subj++;\n               }\n               subi++;\n            }\n            det = det + (pow(-1, x) * matrix[0][x] * matrixDeterminant(submatrix, n - 1 ));\n      }\n\n   }\n     return det;\n}\n\n\n</code></pre>\n\n<p>as you can see, the matrix is a Complex matrix which is all the numbers inside are Complex numbers, and also returns complex number.</p>\n\n<p>This method doesn't work. any ideas what to change to make it works?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1574276223, "post_id": 58961247, "comment_id": 104178169, "body": "Why you just do not use <code>std::string::find()</code> ?"}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1574276726, "post_id": 58961247, "comment_id": 104178379, "body": "Or <code>strpos</code>... or any number of other options."}, {"owner": {"reputation": 12119, "user_id": 5265292, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0b9b1031971201aa02e13287af690946?s=128&d=identicon&r=PG&f=1", "display_name": "grek40", "link": "https://stackoverflow.com/users/5265292/grek40"}, "edited": false, "score": 0, "creation_date": 1574284817, "post_id": 58961247, "comment_id": 104182176, "body": "Would the correct result count overlapping occurences like <code>&quot;ABBABBA&quot;</code> als two (because two can be found within the text) or as one (because if one ABBA is removed from the text, none is remaining)?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1574289200, "post_id": 58961247, "comment_id": 104183866, "body": "Get rid of the <code>system(&quot;pause&quot;);</code>. You have no idea what the <code>pause</code> command does on my computer. For all you know, it might pause the cooling system on my home nuclear reactor. Using it prevents the program from being used in a pipeline. See <a href=\"https://stackoverflow.com/questions/1107705/systempause-why-is-it-wrong\">system(\u201cpause\u201d); - Why is it wrong?</a> for more."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1574289942, "post_id": 58961247, "comment_id": 104184122, "body": "In addition to @DavidSchwartz &#39;s comment, instead of the <code>system(&quot;pause&quot;)&quot;</code>, find out how to make your Windows IDE stop closing the console window when the program exits, so that the output may be examined."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1574289469, "creation_date": 1574289469, "answer_id": 58964485, "question_id": 58961247, "link": "https://stackoverflow.com/questions/58961247/the-problem-with-finding-the-half-word-abba-in-the-text/58964485#58964485", "title": "The problem with finding the half-word \u201cABBA\u201d in the text", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n\nint main()\n{\n    std::string needle = \"Abba\";\n    std::string haystack = \"Abbakiy Abbakum Abbak'evich\";\n    int i = 0, j = 0, count = 0;\n\n    std::cout &lt;&lt; \"Expression: \" &lt;&lt; haystack &lt;&lt; std::endl;\n    do {\n        if (haystack[i] == needle[j])\n        {\n            j++;\n            if (j == needle.size())\n            {\n                ++count;\n                j = 0;\n            }\n        }\n        else\n           j = 0;\n        i++;\n    } while (haystack[i] != '\\0');\n    std::cout &lt;&lt; \"Needles in the haystack: \" &lt;&lt; count &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>There are several questions that explain why <code>using namespace std;</code> and <code>system(\"pause\");</code> are harmful. Don't use them.</p>\n"}], "owner": {"reputation": 3, "user_id": 12401816, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7968eee9af4e1c12bf575c930bca67ae?s=128&d=identicon&r=PG&f=1", "display_name": "Anatoly", "link": "https://stackoverflow.com/users/12401816/anatoly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574289469, "creation_date": 1574275143, "question_id": 58961247, "link": "https://stackoverflow.com/questions/58961247/the-problem-with-finding-the-half-word-abba-in-the-text", "title": "The problem with finding the half-word \u201cABBA\u201d in the text", "body": "<p>The following assignment is presented:</p>\n\n<p><strong>Given a string of characters. Calculate how many times \u201cABBA\u201d is used in it.</strong></p>\n\n<p>My code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\nint main()\n{\n    string aBBa = \"Abbakiy Abbakum Abbak'evich\";\n    int i = 0, j = 0;\n\n    cout &lt;&lt; \"Expression: \" &lt;&lt; aBBa &lt;&lt; endl;\n    do {\n        if (aBBa[i] == '\u0430')\n            j++;\n        i++;\n    } while (aBBa[i] != '\\0');\n    cout &lt;&lt; \"Quantity letters a: \" &lt;&lt; j &lt;&lt; endl;\n    i = 0;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>I was only able to understand how to find the number of letters in the text, if I try to find it half-word in the same way (namely, in the fragment below I will write instead of a - abba),</p>\n\n<pre><code>if (aBBa[i] == '\u0430')\n                j++;\n</code></pre>\n\n<p>then the program will refuse to calculate anything (the value will be zero).</p>\n\n<p><a href=\"https://i.stack.imgur.com/HQ8dp.png\" rel=\"nofollow noreferrer\">Example</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 6, "creation_date": 1574274984, "post_id": 58961182, "comment_id": 104177599, "body": "This code doesn&#39;t make any sense. You can&#39;t de-reference <code>nullptr</code>. Is there other code which assigns to that? If so, <i>what</i>? <code>sizeof(textRows)</code> is the <b>size of the pointer, not the array</b>. I&#39;m not sure why you&#39;d need a <code>getElement</code> unless the singular purpose here is bounds checking. If so, you&#39;re using a signed value and not testing for &lt;0 values. Consider using <code>size_t</code> as is the convention in C++."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 6, "creation_date": 1574275054, "post_id": 58961182, "comment_id": 104177626, "body": "Since you&#39;re using C++ please avoid using C-style arrays, even pointers to them. Instead use containers like <code>std::vector</code> to hold data. These have all sorts of properties, including being able to tell you their size in terms of elements stored."}, {"owner": {"reputation": 215, "user_id": 9872907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXr1t.jpg?s=128&g=1", "display_name": "Kai", "link": "https://stackoverflow.com/users/9872907/kai"}, "edited": false, "score": 0, "creation_date": 1574275059, "post_id": 58961182, "comment_id": 104177628, "body": "Consider using <a href=\"http://www.cplusplus.com/reference/string/string/at/\" rel=\"nofollow noreferrer\">string::at</a>"}, {"owner": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1574275117, "post_id": 58961182, "comment_id": 104177661, "body": "@tadman and also sizeof(textRows) will return always 4 bytes, and doing sizeof(*textRows) will produce a segmentation fault... and also the size of a string is not it&#39;s length"}, {"owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "edited": false, "score": 0, "creation_date": 1574275141, "post_id": 58961182, "comment_id": 104177673, "body": "Question might be if I correctly assign values into textrows: <code>textRows[0] = string1; textRows[1] = string2;</code> is from my code. Is that correct?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1574275163, "post_id": 58961182, "comment_id": 104177686, "body": "You can&#39;t assign <i>anything</i> into <code>textRows</code> until you make that a valid pointer."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1574275195, "post_id": 58961182, "comment_id": 104177700, "body": "Consider using <code>std::vector&lt;std::string&gt; textRows</code> instead and then <code>textRows.push_back(string1)</code> and so on."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "edited": false, "score": 0, "creation_date": 1574275210, "post_id": 58961182, "comment_id": 104177705, "body": "@AlbertoSinigaglia No, <code>sizeof(*textRows)</code> is perfectly fine if you want to get the size of the <code>string</code> type (which is not the length of the string it holds), because it is an unevaluated operand."}, {"owner": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574275283, "post_id": 58961182, "comment_id": 104177736, "body": "@uneven_mark in the example the pointer is nullptr, so i think sizeof(*nullptr) will produce a segmentation fault"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "edited": false, "score": 0, "creation_date": 1574275378, "post_id": 58961182, "comment_id": 104177784, "body": "@AlbertoSinigaglia <code>textRows</code> has a different type than <code>nullptr</code>, so your comparison doesn&#39;t work. In any case <code>sizeof</code>&#39;s argument is an <i>unevaluated operand</i>. It is never evaluated at runtime, only the types are determined during compilation. So there is no chance of undefined behavior / segmentation fault due to invalid pointers with it."}, {"owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "edited": false, "score": 0, "creation_date": 1574275406, "post_id": 58961182, "comment_id": 104177796, "body": "In order to solve my solution I should stay using <code>string *textRows = nullptr;</code>. Is there any way how could I solve this using this declaration?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574275508, "post_id": 58961182, "comment_id": 104177838, "body": "@bartolomo -- <code>Is there any way how could I solve this using this declaration?</code> With that code you came up with?  No.  A pointer knows nothing -- all it knows is what it points to.  It doesn&#39;t know anything else -- it doesn&#39;t know how many items there are in <code>textRows</code>, so how are you going to provide that information?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1574275548, "post_id": 58961182, "comment_id": 104177859, "body": "You need to do <code>textRows = new string[SIZE];</code> once before you read/write to <code>textRows[i]</code>."}, {"owner": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574275558, "post_id": 58961182, "comment_id": 104177863, "body": "@uneven_mark when i&#39;ve said that textRows is  nullptr type?? never, i&#39;ve said that it&#39;s value is nullptr, so when you try to dereferenciate it, it will produce a segmentation fault, because ITS VALUE is nullptr!"}, {"owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574275615, "post_id": 58961182, "comment_id": 104177887, "body": "@PaulMcKenzie then assume only declaration part. I guess the rest is not sufficient for that."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 7239, "user_id": 12361700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/287854d44d93bab6658abf2d547578cc?s=128&d=identicon&r=PG&f=1", "display_name": "Berto99", "link": "https://stackoverflow.com/users/12361700/berto99"}, "edited": false, "score": 0, "creation_date": 1574275704, "post_id": 58961182, "comment_id": 104177941, "body": "@AlbertoSinigaglia You suggested that <code>string *textRows = nullptr; auto s = sizeof(*textRows);</code> is the same as <code>auto s = sizeof(*nullptr);</code>, which is wrong because <code>nullptr</code> has type <code>std::nullptr_t</code>, while <code>textRows</code> has type <code>std::string*</code>. And again, values of the pointer don&#39;t matter in unevaluated contexts, such as <code>sizeof</code>. How could they? <code>sizeof</code> must be evaluated at compile-time when the pointer&#39;s value isn&#39;t even known in general."}, {"owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "edited": false, "score": 0, "creation_date": 1574276011, "post_id": 58961182, "comment_id": 104178078, "body": "So as soon as I do this: <code>string *textRows = nullptr; textRows = new string[myInt];</code> I can assign values into textRows like this <code>textRows[0] = string0; textRows[1] = string1</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574276263, "post_id": 58961182, "comment_id": 104178184, "body": "@bartolomo -- You haven&#39;t addressed how to do this:  <code>if (index &lt; sizeof(textRows))</code>.  Without <code>myInt</code>, there is no way to know the size.  That&#39;s the ugliness of doing this -- you have to drag around the number of entries around somehow, unless you encapsulate it, similar to creating a <code>vector</code> class."}, {"owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574276650, "post_id": 58961182, "comment_id": 104178336, "body": "@PaulMcKenzie ok, I will consider doing it that way (assigning new int value containing number of rows). But anyway, when I try to return even value textRows[0], it does create error only (like I wouldn&#39;t assign anything there at all)."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "edited": false, "score": 0, "creation_date": 1574275484, "post_id": 58961303, "comment_id": 104177831, "body": "Thank you but in order to solve my solution (by questgiver) I should stay using string *textRows = nullptr;. Is there any way how could I solve this using this declaration?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1574275700, "post_id": 58961303, "comment_id": 104177937, "body": "The <code>new[]</code> alternative is going to be a lot more ugly as it doesn&#39;t know its own size."}], "tags": [], "owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "is_accepted": false, "score": 1, "last_activity_date": 1574275715, "last_edit_date": 1574275715, "creation_date": 1574275367, "answer_id": 58961303, "question_id": 58961182, "link": "https://stackoverflow.com/questions/58961182/how-to-find-nth-element-in-array/58961303#58961303", "title": "How to find nth element in array?", "body": "<p>You got one severe misconception about <code>sizeof</code>. <em>It doesn't return the size of an array, but the size of a type</em>. So <code>sizeof(textRows)</code> will return the size of a <code>string *</code>, which is the same as the size of any pointer, usually 4 or 8 byte.</p>\n\n<p>In standard C++ there is no way to retrieve the size of an array, if just have a pointer. So I suggest you replace the c-style array with c++-style <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a>:</p>\n\n<pre><code>std::vector&lt;std::string&gt; textRows;\n\nvoid fillTextRows()\n{\n    //Use push_back to fill the vector:\n    textRows.push_back(\"...\");\n}\n\nstd::string getElement(int index) const {\n    if (index &lt; textRows.size()) {\n        return textRows[index];\n    }\n\n    return \"\";\n};\n</code></pre>\n\n<p>Alternative, if you really, really have to use pointers: Remember the size of the array.</p>\n\n<pre><code>std::string *textRows = nullptr;\nsize_t textRowsLen = 0;\n\nvoid fillTextRows(size_t count)\n{\n    textRowsLen = count;\n    textRows = new std::string[count];\n\n    //put some data in there:\n    textRows[0] = \"...\";\n}\n\nstd::string getElement(int index) const {\n    if (index &lt; textRowsLen) {\n        return textRows[index];\n    }\n\n    return \"\";\n};\n</code></pre>\n\n<p>That's essentially reinventing the wheel, because <code>std::vector</code> was made to abstract exactly this scenario.</p>\n"}], "owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1544, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1574275715, "creation_date": 1574274923, "question_id": 58961182, "link": "https://stackoverflow.com/questions/58961182/how-to-find-nth-element-in-array", "title": "How to find nth element in array?", "body": "<p>This is my function:</p>\n\n<pre><code>string *textRows = nullptr;\n\nstring getElement(int index) const {\n    if (index &lt; sizeof(textRows)) {\n        return textRows[index];\n    }\n    return \"\";\n};\n</code></pre>\n\n<p>should return \"\" when index is above length of textRows. This code doesn't work in intended way. Do you have any solution or see my mistake?</p>\n"}, {"tags": ["c++", "c", "visual-studio-2015", "visual-studio-2017", "precompiled-headers"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1574275044, "post_id": 58961109, "comment_id": 104177625, "body": "If you want to use the Visual C++ precompiled header feature, why not let the project wizard create it for you and leave it as it is? And note that many large project disable it because it&#39;s often more trouble than it&#39;s worth."}, {"owner": {"reputation": 123, "user_id": 6217440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ea60d9ff4628b674a27ce3213a3646?s=128&d=identicon&r=PG&f=1", "display_name": "Yea okay", "link": "https://stackoverflow.com/users/6217440/yea-okay"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1574287032, "post_id": 58961109, "comment_id": 104183082, "body": "@Someprogrammerdude I didn&#39;t use the wizard because I didn&#39;t need it in the beginning and didn&#39;t know how to use a wizard to re set it up. Also this has brought my compile time down from 20 seconds to 0.8 seconds so I believe this is something everyone should implement. Things like Windows.h, iostream, string, vector etc getting recompiled every single time is drastic in my opinion."}], "answers": [{"comments": [{"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1574275206, "post_id": 58961218, "comment_id": 104177703, "body": "Use back ticks to highlight code. See my edit of the question. The problem is that brackets <code>&lt;&gt;</code> outside of code snippets are interpreted as an attempt to use HTML markup, and are ignored."}], "tags": [], "owner": {"reputation": 123, "user_id": 6217440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ea60d9ff4628b674a27ce3213a3646?s=128&d=identicon&r=PG&f=1", "display_name": "Yea okay", "link": "https://stackoverflow.com/users/6217440/yea-okay"}, "is_accepted": true, "score": 0, "last_activity_date": 1574286926, "last_edit_date": 1574286926, "creation_date": 1574275039, "answer_id": 58961218, "question_id": 58961109, "link": "https://stackoverflow.com/questions/58961109/custom-precompiled-headers-causing-compile-errors/58961218#58961218", "title": "Custom precompiled headers causing compile errors", "body": "<p>The issue was with every CPP file that wasnt in the same folder as the precompiled header.\nSo if you use a file structure that contains different classes in different folders, using \n<code>#include \"../../vpch.h\"</code> will actually fail. You must add the root folder to your additional include directories and then use <code>#include &lt;vpch.h&gt;</code> for all files. I can NOT tell you why using <code>#include \"../../vpch.h\"</code> wasn't working. It seems counter intuitive for it to fail in my opinion. </p>\n\n<p>It may be because it searches for the precompiled header in the same folder as the file you are referencing it in. This answer, however, will work as a solution.</p>\n"}], "owner": {"reputation": 123, "user_id": 6217440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57ea60d9ff4628b674a27ce3213a3646?s=128&d=identicon&r=PG&f=1", "display_name": "Yea okay", "link": "https://stackoverflow.com/users/6217440/yea-okay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 58961218, "answer_count": 1, "score": 0, "last_activity_date": 1574286926, "creation_date": 1574274546, "last_edit_date": 1574275047, "question_id": 58961109, "link": "https://stackoverflow.com/questions/58961109/custom-precompiled-headers-causing-compile-errors", "title": "Custom precompiled headers causing compile errors", "body": "<p>I am trying to introduce precompiled headers into my project because of long compile times in my project right now. I have a main project that includes a main function and all the real code is in the DLL project(they are linked together.) I named my precompiled header \"vpch.h\" and i created a vpch.cpp that includes vpch.h. I am using visual studio 2017 so I went into the properties of vpch.cpp and selected Create. Then I added vpch.h as the first thing in all my cpp files. All files are set to use precompiled headers and reference vpch.h Every CPP files throws the error:</p>\n\n<pre><code>Error C1010 unexpected end of file while looking for precompiled header. \n            Did you forget to add '#include \"vpch.h\"' to your source?\n</code></pre>\n\n<p>I am at a loss as to what to do because I have followed many tutorials and can't find a reason for this. As well as most issues that pop up on google are people just accidentally including precompiled headers.</p>\n\n<p>My only thought is that maybe in the section in properties where it asks for the name of the precompiled header, I need to do more than put \"vpch.h\" and maybe an exact file location? Any help with this is super appreciated. </p>\n\n<p>EDIT</p>\n\n<p>From further debugging it would appear that all but ONE cpp file is throwing an error. The one that doesn't throw an error is the one that exists in the same exact folder as the vpch.h. So files that can't just write <code>#include \"vpch.h\"</code> and have to write something like <code>\"../vpch.h\"</code> I can write <code>#include &lt;vpch.h&gt;</code> and I am going to try that now but I am unsure that will help.</p>\n"}, {"tags": ["c++", "algorithm", "design-patterns", "software-design"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1574274757, "post_id": 58961068, "comment_id": 104177482, "body": "how do you get O(N^4)? Before improving performance you should write something that is correct. The code you posted does basically nothing"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1574277536, "post_id": 58961068, "comment_id": 104178766, "body": "<i>&quot;It&#39;s essentially advanced connect 4.&quot;</i> Except that connect 4 has a large board, but the Quarto board is only 4x4. That makes a huge difference, since there are only 10 winning lines. So my question, &quot;is <code>BOARDSIZE</code> always 4 in your code?&quot; See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "reply_to_user": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1574282921, "post_id": 58961068, "comment_id": 104181354, "body": "@user3386109 I wanted to in the future vary BOARDSIZE"}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "edited": false, "score": 0, "creation_date": 1574283136, "post_id": 58961935, "comment_id": 104181455, "body": "Ah, this is so beautiful! Thank you so much! This is an amazing way to go about it.  I really appreciate it! I didn&#39;t know about the XNOR operator, which gave me a tough time. Your use of bit manipulation is incredible. Again, thanks so much! This will help the entire structure of the game :)"}], "tags": [], "owner": {"reputation": 305, "user_id": 7642367, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PGRHn.jpg?s=128&g=1", "display_name": "Kyy13", "link": "https://stackoverflow.com/users/7642367/kyy13"}, "is_accepted": true, "score": 1, "last_activity_date": 1574278426, "last_edit_date": 1574278426, "creation_date": 1574277994, "answer_id": 58961935, "question_id": 58961068, "link": "https://stackoverflow.com/questions/58961068/best-way-to-represent-quarto-board-game-pieces/58961935#58961935", "title": "Best way to represent Quarto Board Game Pieces", "body": "<p>Each property has 2 possibilities, so you could store them in a bit-field as 0 or 1. For example:</p>\n\n<pre><code>unsigned char type = (color &lt;&lt; 0) | (size &lt;&lt; 1) | (shape &lt;&lt; 2) | (thickness &lt;&lt; 3)\n</code></pre>\n\n<p>where each value is a 0 or 1. Let's say:</p>\n\n<pre><code>enum Color { BLACK = 0, WHITE = 1 };\nenum Size { SHORT = 0, TALL = 1 };\nenum Shape { CIRCLE = 0, SQUARE = 1 };\nenum Thickness { HOLLOW = 0, SOLID = 1 };\n</code></pre>\n\n<p>then you could compare them by checking XNOR (bit equality) to compare 2 at a time in one operation, where each comparison will return a bit-field of which types compared equally.</p>\n\n<blockquote>\n  <p>(piece1 XNOR piece2) AND (piece2 XNOR piece3) AND (piece3 XNOR piece4) != 0</p>\n</blockquote>\n\n<p>Like this</p>\n\n<pre><code>class Piece {\npublic:\n    Piece(Color color, Size size, Shape shape, Thickness thickness) {\n        type = (color) | (size &lt;&lt; 1) | (shape &lt;&lt; 2) | (thickness &lt;&lt; 3);\n    }\n\n    Color color() const {\n        return static_cast&lt;Color&gt;((type &gt;&gt; 0) &amp; 1);\n    }\n\n    Size size() const {\n        return static_cast&lt;Size&gt;((type &gt;&gt; 1) &amp; 1);\n    }\n\n    Shape shape() const {\n        return static_cast&lt;Shape&gt;((type &gt;&gt; 2) &amp; 1);\n    }\n\n    Thickness thickness() const {\n        return static_cast&lt;Thickness&gt;((type &gt;&gt; 3) &amp; 1);\n    }\n\n    static bool compare(Piece p0, Piece p1, Piece p2, Piece p3) {\n        unsigned char c[3];\n        c[0] = ~( p0.type ^ p1.type ); // XNOR\n        c[1] = ~( p1.type ^ p2.type ); // XNOR\n        c[2] = ~( p2.type ^ p3.type ); // XNOR\n        return (c[0] &amp; c[1] &amp; c[2] &amp; 0b1111) != 0;\n    }\nprotected:\n    unsigned char type;\n};\n</code></pre>\n\n<p>I tested it with this code:</p>\n\n<pre><code>int main() {\n    Piece p0(WHITE, SHORT, CIRCLE, HOLLOW);\n    Piece p1(WHITE, SHORT, CIRCLE, HOLLOW);\n    Piece p2(BLACK, SHORT, CIRCLE, HOLLOW);\n    Piece p3(BLACK, TALL, CIRCLE, SOLID);\n\n    const char* str = Piece::compare(p0, p1, p2, p3) ? \"success\" : \"fail\";\n    std::cout &lt;&lt; str &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>I decided to manage it with a class, however, each piece is a 4-bit value, so it can be managed in an integral type just as easily.</p>\n\n<p>Another consequence of doing it this way is that pieces can be randomized by picking a value between 0b0000 and 0b1111, which is [0,15] inclusive.</p>\n"}], "owner": {"reputation": 181, "user_id": 7830758, "user_type": "registered", "accept_rate": 14, "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCx7o0zHXX5gAfIDW7HKmVpwBPkKfd_7W5U1f1VqA=k-s128", "display_name": "banana", "link": "https://stackoverflow.com/users/7830758/banana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 58961935, "answer_count": 1, "score": 1, "last_activity_date": 1574278426, "creation_date": 1574274352, "question_id": 58961068, "link": "https://stackoverflow.com/questions/58961068/best-way-to-represent-quarto-board-game-pieces", "title": "Best way to represent Quarto Board Game Pieces", "body": "<p>I'm creating Quarto, the board game. It's essentially advanced connect 4.</p>\n\n<p>Each piece has four distinguishing features (WHITE VS BLACK | TALL VS SHORT | SQUARE VS CIRCLE | SOLID VS HOLLOW). If you get four of any of those features in a row, you win.</p>\n\n<p>At the moment, I am current trying to write a function to check for a win. However, it is on track to be O(n^4), and I think I can improve this depending on how I structure my code.</p>\n\n<p>Currently, I have this:</p>\n\n<pre><code>enum Piece\n{\n    WTSS, WTSH, WTHS, WTHH,\n    WSSS, WSSH, WSHS, WSHH,\n    BTSS, BTSH, BTHS, BTHH,\n    BSSS, BSSH, BSHS, BSHH,\n    EMPTY\n};\n\nstatic const char * PieceStrings[] = {\n  \"WTSS \", \"WTSH \", \"WTHS \", \"WTHH \",\n  \"WSSS \", \"WSSH \", \"WSHS \", \"WSHH \",\n  \"BTSS \", \"BTSH \", \"BTHS \", \"BTHH \",\n  \"BSSS \", \"BSSH \", \"BSHS \", \"BSHH \",\n  \"____ \",\n};\n</code></pre>\n\n<p>But I don't think this is very efficient. I have thought about making them their own class, but it then makes it hard to initialize and work with all of these pieces.</p>\n\n<p>This is how I am starting to go about checking for a win:</p>\n\n<pre><code>// go through all N+2 possible connections\n// check if any have shared feature\nbool Board::isWin() {\n  int i, j, k;\n  for (i = 0, k = BOARDSIZE-1; i &lt; BOARDSIZE; i++, k--) {\n    for (j = 0; j &lt; BOARDSIZE; j++) {\n      //Horizontal case\n      // board[i][j];\n      //Vertical case\n      // board[j][i];\n\n    }\n    // Diagonal cases\n    // board[i][i];\n    // board[k][i];\n\n\n  }\n\n  return false;\n}\n\n// Checks if pieces have a similar component\nbool Board::checkPieces(list&lt;string&gt; &amp; piecesInARow) {\n  int i, j;\n  list&lt;string&gt;::iterator it = piecesInARow.begin();\n  for (i = 0; i &lt; BOARDSIZE; i++) {\n    for (j = 0; j &lt; BOARDSIZE; j++) {\n      // check if pieces all have shared char at index\n    }\n  }\n}\n</code></pre>\n\n<p>How can I improve this and make it easier for myself?</p>\n"}, {"tags": ["c++", "string", "list", "stl"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574274453, "post_id": 58961025, "comment_id": 104177338, "body": "what did you try? If this is homework, I would expect that you discussed some means to find an element in a list in lecture, but I dont see anything like that in your code"}, {"owner": {"reputation": 37, "user_id": 12172504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f315817728cf20a902e9f7c915e3a5b7?s=128&d=identicon&r=PG&f=1", "display_name": "Amanda", "link": "https://stackoverflow.com/users/12172504/amanda"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574275108, "post_id": 58961025, "comment_id": 104177655, "body": "in class the teacher only gave us some information about vectors and nothing for list and after that she decided that we have to make it on our own .Sorry but im not  a genius,i can not make things that i have no idea of."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574275173, "post_id": 58961025, "comment_id": 104177690, "body": "you dont have to be a genius to type &quot;find element in list c++&quot; in a search engine and find eg this: <a href=\"https://stackoverflow.com/questions/4604136/how-to-search-for-an-element-in-an-stl-list\" title=\"how to search for an element in an stl list\">stackoverflow.com/questions/4604136/&hellip;</a>"}, {"owner": {"reputation": 37, "user_id": 12172504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f315817728cf20a902e9f7c915e3a5b7?s=128&d=identicon&r=PG&f=1", "display_name": "Amanda", "link": "https://stackoverflow.com/users/12172504/amanda"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574275574, "post_id": 58961025, "comment_id": 104177872, "body": "this example is for int, mine is different and i&#39;ve searched a lot but there is not much infromation for my homework. Just to find element looks ok, but finding exact first letter from word in list isnt that great"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574275668, "post_id": 58961025, "comment_id": 104177918, "body": "if you know how to work with a <code>list&lt;int&gt;</code> you also know how to work with a <code>list&lt;std::string&gt;</code>, at least you should be able to try something"}], "answers": [{"tags": [], "owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "is_accepted": false, "score": 3, "last_activity_date": 1574275807, "creation_date": 1574275807, "answer_id": 58961402, "question_id": 58961025, "link": "https://stackoverflow.com/questions/58961025/how-to-find-the-words-starting-with-b-from-a-list-and-the-words-which-are-with/58961402#58961402", "title": "How to find the words starting with &#39;b&#39; from a list and the words which are with 4 symbols?", "body": "<p>With <code>std::copy</code> you are copying all the string in the list \u2013 no criterium is used for discriminating the strings. You may want to consider <a href=\"https://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\"><code>std::copy_if()</code></a> with a suitable predicate instead of <code>std::copy()</code>. The predicate should return <code>true</code> for the string that matches your criteria. </p>\n\n<p>For example:</p>\n\n<pre><code>void print(const std::list&lt;std::string&gt;&amp; lst) {\n   auto pred = [](const std::string&amp; str) {\n      if (str.empty() || str[0] != 'b' || str.length() != 4)\n         return false;\n      return true;\n   };\n\n   std::copy_if(lst.begin(), lst.end(), std::ostream_iterator&lt;std::string&gt;(std::cout, \" \"), pred);\n}\n</code></pre>\n\n<p>It will copy strings whose first character is <code>b</code> and are four characters in length. Only the strings that fulfill these requirements will be copied into the output iterator and, as a consequence, streamed into <code>std::cout</code>.</p>\n\n<p>Alternatively, you can simply use a <a href=\"https://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">range-based for loop</a>:</p>\n\n<pre><code>for (auto const&amp; str: lst)\n   if (/* ... */) // criterium\n      std::cout &lt;&lt; str &lt;&lt; ' '; \n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 12172504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f315817728cf20a902e9f7c915e3a5b7?s=128&d=identicon&r=PG&f=1", "display_name": "Amanda", "link": "https://stackoverflow.com/users/12172504/amanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1574344741, "creation_date": 1574274173, "last_edit_date": 1574344741, "question_id": 58961025, "link": "https://stackoverflow.com/questions/58961025/how-to-find-the-words-starting-with-b-from-a-list-and-the-words-which-are-with", "title": "How to find the words starting with &#39;b&#39; from a list and the words which are with 4 symbols?", "body": "<pre><code>#include&lt;iostream&gt;\n#include&lt;list&gt;\n#include&lt;string&gt;\n#include&lt;iterator&gt;\n#include&lt;algorithm&gt;\nusing namespace std;\n\nvoid print(const list&lt;string&gt; &amp;l)\n{\ncout &lt;&lt; \"The list elements are : \";\ncopy(l.begin(), l.end(), ostream_iterator&lt;string&gt;(cout, \" \"));\ncout &lt;&lt; endl &lt;&lt; endl;\n}\n\nint main()\n{\nlist&lt;string&gt; l = { \"blue\",\"red\",\"black\",\"yellow\",\"green\",\"gold\",\"silver\",\"pink\",\"orange\",\"brown\" };\nprint(l);\n\nlist&lt;string&gt;::iterator it;\n\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p>I had to create a list of 10 words. I created it and made the print function. But the problem is that for my school project I have to find all the words starting with <code>b</code> and the next one is that I have to find all the words which length is 4 symbols (for example blue). Thank you in advance for your help!</p>\n"}, {"tags": ["c++", "math", "std", "divide"], "comments": [{"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1574273716, "post_id": 58960843, "comment_id": 104176989, "body": "Welcome to stack overflow. We can help you with coding issues. However, we are not a code writing or homework service. You should write it yourself. P.s. <code>std::error_code</code> <i>is</i> an exception."}, {"owner": {"reputation": 3198, "user_id": 6119582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/274d37ce6d78ed9281f47a2712aaed48?s=128&d=identicon&r=PG&f=1", "display_name": "sweenish", "link": "https://stackoverflow.com/users/6119582/sweenish"}, "edited": false, "score": 1, "creation_date": 1574273850, "post_id": 58960843, "comment_id": 104177053, "body": "SO is not a &quot;do work for me&quot; site."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1574274218, "post_id": 58960843, "comment_id": 104177242, "body": "You cannot detect division by zero (which is Undefined Behaviour) <i>after</i> the fact. You have to write your code in a way where you detect <i>up front</i> that a division by zero <i>will</i> happen if you continue and then make the code do something that does then <i>not do</i> the operation that would divide by zero. In short; you must <i>avoid</i> doing it, you cannot reliably <i>detect</i> it having been done."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1574274655, "post_id": 58960843, "comment_id": 104177427, "body": "@ANurbaev the wording of the question makes it look very much like a cut and paste of a homework problem. You can probably fix this with a quick rewrite. Another problem with the question is is shows no signs of research effort. This could be an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">X-Y Problem</a>. If it is, it&#39;s too late for this question as it has been correctly answered. You should ask a new question focused on the problem that lead you to this problem."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1574280888, "last_edit_date": 1574280888, "creation_date": 1574274014, "answer_id": 58960977, "question_id": 58960843, "link": "https://stackoverflow.com/questions/58960843/how-to-detect-division-by-zero-using-stderror-code/58960977#58960977", "title": "How to detect division by zero using std::error_code", "body": "<blockquote>\n  <p>I want to detect division by zero</p>\n</blockquote>\n\n<p>Like this:</p>\n\n<pre><code>if(divisor != 0) {\n    result = some_number / divisor;\n} else {\n    // error detected\n}\n</code></pre>\n\n<blockquote>\n  <p>using std::error_code</p>\n</blockquote>\n\n<p>You cannot detect errors with <code>std::error_code</code>. <code>std::error_code</code> can be used to report errors that you've detected.</p>\n"}], "owner": {"reputation": 17, "user_id": 11390726, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZSz96yDrXQE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hv-ygwzTOVHko6hszC0EBBkaRzoQ/mo/photo.jpg?sz=128", "display_name": "ANurbaev", "link": "https://stackoverflow.com/users/11390726/anurbaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1574314921, "answer_count": 1, "score": -6, "last_activity_date": 1574280888, "creation_date": 1574273451, "question_id": 58960843, "link": "https://stackoverflow.com/questions/58960843/how-to-detect-division-by-zero-using-stderror-code", "closed_reason": "Needs details or clarity", "title": "How to detect division by zero using std::error_code", "body": "<p>I want to detect division by zero using std::error_code. Without the use of exceptions. How can I do that? Write some simple examples.</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 996, "user_id": 5824979, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5i5yH.jpg?s=128&g=1", "display_name": "Sailanarmo", "link": "https://stackoverflow.com/users/5824979/sailanarmo"}, "edited": false, "score": 0, "creation_date": 1574274357, "post_id": 58960842, "comment_id": 104177305, "body": "So what is the issue that you are running into? And what is it that you have tried?"}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1574274583, "post_id": 58960842, "comment_id": 104177386, "body": "I presume the question is how many cows such that they all eat all day?  Perhaps start with all cows in grp C. Move some cows to grp A. You have to move 3 at a time to eat all the hay.. How many until you run out of hay? In the end there are less than 10,000 possible answers."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1574274630, "post_id": 58960842, "comment_id": 104177409, "body": "The code you posted doesn&#39;t display any solutions. Did you expect it to? Actually, it&#39;s undefined behavior since it uses <code>c</code> uninitialized."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1574274813, "post_id": 58960842, "comment_id": 104177518, "body": "Recommendation: Solve the problem on paper first and keep notes on the process used. Make sure they are good notes as they will be the basis for both your code and the the step-by-step expectations you need to have when debugging the code."}, {"owner": {"reputation": 99, "user_id": 12405558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728226f7f3ea59437745bb7a859a2d3b?s=128&d=identicon&r=PG&f=1", "display_name": "Phineas", "link": "https://stackoverflow.com/users/12405558/phineas"}, "edited": false, "score": 0, "creation_date": 1574599432, "post_id": 58960842, "comment_id": 104281748, "body": "I have added my code but still need some help"}], "owner": {"reputation": 99, "user_id": 12405558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728226f7f3ea59437745bb7a859a2d3b?s=128&d=identicon&r=PG&f=1", "display_name": "Phineas", "link": "https://stackoverflow.com/users/12405558/phineas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574518646, "creation_date": 1574273450, "last_edit_date": 1574518646, "question_id": 58960842, "link": "https://stackoverflow.com/questions/58960842/find-the-numbers-of-cow-in-each-group", "title": "Find the numbers of cow in each group", "body": "<p>I'm practicing C++ solving some exercises, but after the whole day, I couldn't solve on of them. Here's the exercise:<br>\nThere are 100 hay and 100 cows divided into 3 groups.<br>\n    -Group A: 1 cow needs 5 hay to be full<br>\n    -Group B: 1 cow needs 3 hay to be full<br>\n    -Group C: 3 cow needs 1 hay to be full<br>\nCalculate the number of cows in each group.<br>\nIf all of them eat at the same time at the same speed then the code is not very hard.</p>\n\n<pre><code>    #include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int a, b, c;\n    for (a = 1; a &lt;= 20; a++)\n    {\n        for (b = 1; b &lt;= 32; b++)\n        {\n            c = 3 * (100 - 5 * c - 3 * c);\n            if ((a + b + c == 100)) \n                cout &lt;&lt; \"Group A \" &lt;&lt; a &lt;&lt; \", group B \" &lt;&lt; b &lt;&lt; \", group c \" &lt;&lt; c &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n\n<p>However since they eat at different speeds and some groups may start eating slower than others, some of them won't get full before the hay runs out. Input can be the time begin to eat of each group <strong>(BeginA, BeginB, BeginC)</strong> <em>(Eg: 0mins, 10mins, 5mins)</em> and the speed of each group <strong>(SpeedA, SpeedB, SpeedC)</strong> <em>(measure in minutes per hay)</em>. And there are at least 2 groups are full. How can you find the numbers of cows in each group?</p>\n\n<p>Edit: I have set up a test case:<br>\nBeginA=0, BeginB=10, BeginC=15<br>\nSpeedA=5, SpeedB=5, SpeedC=10<br>\nAfter 5 mins, x hay have been eaten. \n10 mins, 2x hay have been eaten (100-2x hay).<br>\n15 mins, 2x + y hay have been eaten. \n20 mins, 3x + 2y hay have been eaten.<br>\nRepeat until 2 groups are full \n5x+3y+2/3z hay have been eaten<br>\nThen I stucked here: If x+y+z=100 and the hay have been eaten=100 then we have the answer.  </p>\n\n<p>Edit 2: Welp, still going nowhere, stuck in an infinite loop:  </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint numCow(int a,int b,int c) {\n    int x=0, y=0, z=0;\n    for (x = 1; x &lt; 100; x++)\n    {\n        for (y = 1; y &lt; 100; y++)\n        {\n            for (z = 1; z &lt; 100; z++)\n                if ((x + y + z == 100) &amp;&amp; (a * x + b * y + c * z == 300))\n                    cout &lt;&lt; \"Group A \" &lt;&lt; x &lt;&lt; \", Group B \" &lt;&lt; y &lt;&lt; \", Group C \" &lt;&lt; z &lt;&lt; endl;\n        }\n    }\n    return 0;\n}\nint main()\n\n{\n    int x, y, z, a=0, b=0, c=0, counter;\n    int Sx = 0, Sy = 0, Sz = 0, Bx, By, Bz; \n    x = 0; y = 0; z = 0;\n    counter = 0;\n    cout &lt;&lt; \"Begin time (s): \";\n    cin &gt;&gt; Bx &gt;&gt; By &gt;&gt; Bz;\n    cout &lt;&lt; \"Speed: \";\n    cin &gt;&gt; Sx &gt;&gt; Sy &gt;&gt; Sz;\n    Bx += Sx;\n    By += Sy;\n    Bz += Sz;\n    while (true) {\n        if (a!=15)\n            if (Bx == counter)\n            {\n                a++;\n                Bx += Sx;\n            }\n        if (b != 9)\n            if (By == counter)\n            {\n                b++;\n                By += Sy;\n            }\n        if (c!=3)\n            if (Bz == counter)\n            {\n                c++;\n                Bz += Sz;\n            }\n        if (a == 15 &amp;&amp; b == 9) {\n            numCow(a, b, c);\n            break;\n        }\n        if (a == 15 &amp;&amp; c == 3) {\n            numCow(a, b, c);\n            break;\n        }\n        if (c == 3 &amp;&amp; b == 9) {\n            numCow(a, b, c);\n            break;\n        }\n        if (a == 15 &amp;&amp; b == 9 &amp;&amp; c == 3)\n        {\n            numCow(a, b, c);\n            break;\n        }\n        counter++;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "stm32", "c++-modules", "stm32cubeide"], "comments": [{"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 3, "creation_date": 1574273159, "post_id": 58960695, "comment_id": 104176692, "body": "Not with that version no. C++20 is not released yet, so don&#39;t expect it in any release build.  You need an experimental build... i think it&#39;s version 10.0 in development. Check godbolt. But it could take a long time before the arm version is there. Why do you need it?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 3, "creation_date": 1574273391, "post_id": 58960695, "comment_id": 104176826, "body": "Even GCC trunk has no support for modules, there is a <i>highly</i> experimental branch you can build yourself to try it, but nothing advanced enough for production"}, {"owner": {"reputation": 403, "user_id": 3356441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NyIcD.png?s=128&g=1", "display_name": "Xpector", "link": "https://stackoverflow.com/users/3356441/xpector"}, "edited": false, "score": 0, "creation_date": 1574327630, "post_id": 58960695, "comment_id": 104196050, "body": "I see.. No true need, just got a project small enough with a deadline far enough that I thought I could play with modules."}, {"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1574348810, "post_id": 58960695, "comment_id": 104209063, "body": "@Xpector I do not think that the Cortex ARM projects will benefit from it. Even big projects build in 2-4 minutes from the clean. 10% does not make any difference."}], "owner": {"reputation": 403, "user_id": 3356441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NyIcD.png?s=128&g=1", "display_name": "Xpector", "link": "https://stackoverflow.com/users/3356441/xpector"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 395, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574274095, "creation_date": 1574272900, "last_edit_date": 1574274095, "question_id": 58960695, "link": "https://stackoverflow.com/questions/58960695/c20-modules-in-arm-none-eabi-g", "title": "C++20 modules in arm-none-eabi-g++", "body": "<p>I'm using <a href=\"https://www.st.com/en/development-tools/stm32cubeide.html\" rel=\"nofollow noreferrer\">STM32CubeIDE</a> which includes</p>\n\n<p>arm-none-eabi-g++ (<strong>GNU Tools for STM32</strong> 7-2018-q2-update.20190328-1800) 7.3.1 20180622 (release) [ARM/embedded-7-branch revision 261907]</p>\n\n<p>Is there any way to use <a href=\"https://gcc.gnu.org/wiki/cxx-modules\" rel=\"nofollow noreferrer\">C++20 Modules</a>? C++2a Language Features <a href=\"https://gcc.gnu.org/projects/cxx-status.html\" rel=\"nofollow noreferrer\">table</a> states \"no\" under \"Available in GCC?\", but maybe I'm just overlooking something?</p>\n\n<p><a href=\"https://i.stack.imgur.com/tL9is.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tL9is.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "algorithm", "tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 1, "creation_date": 1574273714, "post_id": 58960684, "comment_id": 104176986, "body": "It seems correct to me. Is <code>height</code> also a recursive function call? Because then, while it is correct, you are doing the same work very often. Consider one child of your root. You calculate the height for this child when you call the function for the root, and with this you also call <code>height</code> for the grandchildren. Now when you calculate the balance value for the child, you again call <code>height</code> for the grandchildren. This is not really necessary, maybe you want to think about a different way to do this. Also, don&#39;t pass pointers by ref, pass the pointer by value or the <code>BinaryNode</code> by ref."}, {"owner": {"reputation": 33, "user_id": 12275549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9c854d5ddabcbe243f85144865f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Matcha_boy98", "link": "https://stackoverflow.com/users/12275549/matcha-boy98"}, "reply_to_user": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 0, "creation_date": 1574273807, "post_id": 58960684, "comment_id": 104177026, "body": "But the logic is correct right?"}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 0, "creation_date": 1574273979, "post_id": 58960684, "comment_id": 104177122, "body": "It seems so to me. This will certainly traverse all nodes and it will store this difference in the node. I of course cannot say if the <code>height</code> method is correct, but locally this method is correct. A good practice would be to write some tests for your Tree (different inputs checked versus the expected outcome)."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 1, "last_activity_date": 1574274899, "creation_date": 1574274899, "answer_id": 58961178, "question_id": 58960684, "link": "https://stackoverflow.com/questions/58960684/checking-the-balance-factor-of-each-node-in-a-bst-and-storing-it-in-the-node/58961178#58961178", "title": "Checking the balance factor of each node in a BST and storing it in the node", "body": "<p>The logic looks reasonable to me, but it looks to me like it would be fairly trivial to make it roughly twice as fast.</p>\n\n<p>Right now, you traverse each sub-tree once to compute its height, then you traverse at again to calculate its balance.</p>\n\n<p>Since it needs to traverse the sub-trees to do its job anyway, I'd have <code>calculateBalance</code> return the height of the tree. That way it's fairly trivial to compute both the balance and the height with a single traversal.</p>\n\n<p>Since we don't want to modify a pointer being passed to this function, I'd just pass the pointer by value.</p>\n\n<pre><code>int calculateBalanceValue(BinaryNode *t)\n    {\n        if (t==nullptr) \n            return 0;\n\n        int left = calculateBalance(t-&gt;left);\n        int right = calculateBalance(t-&gt;right);\n        t-&gt;bal=abs(left -right);\n        return 1 + std::max(left, right);\n    }\n</code></pre>\n\n<p>As an aside, if you want critiques of working code, you might want to check on Stack Exchange's <a href=\"https://codereview.stackexchange.com/\">Code Review</a> web site, which is devoted to exactly that.</p>\n"}], "owner": {"reputation": 33, "user_id": 12275549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f9c854d5ddabcbe243f85144865f9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Matcha_boy98", "link": "https://stackoverflow.com/users/12275549/matcha-boy98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "accepted_answer_id": 58961178, "answer_count": 1, "score": 0, "last_activity_date": 1574274899, "creation_date": 1574272861, "question_id": 58960684, "link": "https://stackoverflow.com/questions/58960684/checking-the-balance-factor-of-each-node-in-a-bst-and-storing-it-in-the-node", "title": "Checking the balance factor of each node in a BST and storing it in the node", "body": "<p>I am trying to write this function that will store the Balance of each node in a BST and store it inside the node. In my BST I have added variable bal to store it.</p>\n\n<p>I am still a beginner when it comes to recursion so excuse any errors i just need help to see if my logic is correct or if there is a better way!\nHere is my function:</p>\n\n<pre><code> void calculateBalanceValue(BinaryNode *&amp; t)\n        {\n            if (t==nullptr) return;\n\n            int left = height(t-&gt;left);\n            int right = height(t-&gt;right);\n            t-&gt;bal=abs(left -right);\n            calculateBalanceValue(t-&gt;right);\n            calculateBalanceValue(t-&gt;left);\n\n        }\n</code></pre>\n"}, {"tags": ["c++", "iterator", "runtime-error"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 2, "creation_date": 1574272170, "post_id": 58960467, "comment_id": 104176188, "body": "You cannot compare iterators from different containers (well, it compiles, but it&#39;s never going to return any reasonable results). Not sure what the standard says about such attempt, probably an Undefined Behaviour."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1574272378, "post_id": 58960467, "comment_id": 104176283, "body": "Is <code>space_map[i + 1].end()</code> a typo for <code>space_map[i].end()</code>? If not, what is it supposed to be doing?"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 1, "creation_date": 1574272507, "post_id": 58960467, "comment_id": 104176364, "body": "Please give a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Missing all kind of stuff here. And did you notice &quot;press retry tip debug the application&quot;? You can debug it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1574272592, "post_id": 58960467, "comment_id": 104176406, "body": "Off-topic -- 1) <code>typedef struct Node</code> -- No need for <code>typedef struct</code> in a C++ application - just use <code>struct Node</code>.   2) <code>bool operator!=(const Node &amp;n) const</code> -- No need to manually rewrite <code>==</code> and turn it inside-out.  Just <code>return !(*this == n);</code>"}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 3, "creation_date": 1574272633, "post_id": 58960467, "comment_id": 104176424, "body": "The Microsoft compiler, in a Debug build, includes lots of extra checking.  One of the things it checks is that both iterators used in a comparison come from the same container.  This assertion failure is the results when they do not.  <code>space_map[i]</code> and <code>space_map[i+1]</code> are different containers and are the cause of your error.."}, {"owner": {"reputation": 141, "user_id": 11748947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da0b6a761394a7bdf6034bac309498a?s=128&d=identicon&r=PG", "display_name": "JuiceFV", "link": "https://stackoverflow.com/users/11748947/juicefv"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574272689, "post_id": 58960467, "comment_id": 104176454, "body": "@uneven_mark no. I need exactly i + 1. I woud like to check if the next &#39;Node&#39; which is best for me is exsist."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1574272863, "post_id": 58960467, "comment_id": 104176554, "body": "How about dropping <code>i</code> and using iterators, too prevent the mistake uneven_mark mentioned... listen to the people here <code>space_map[i].find(next_best) != space_map[i + 1].end()</code> is bad,  m&#39;kay?"}, {"owner": {"reputation": 141, "user_id": 11748947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da0b6a761394a7bdf6034bac309498a?s=128&d=identicon&r=PG", "display_name": "JuiceFV", "link": "https://stackoverflow.com/users/11748947/juicefv"}, "reply_to_user": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1574272920, "post_id": 58960467, "comment_id": 104176580, "body": "@JHBonarius Nope I can&#39;t"}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1574273054, "post_id": 58960467, "comment_id": 104176642, "body": "Ok, if you are convinced that you are right, then we&#39;re cannot help you. Good luck with the &quot;alternative facts&quot;"}, {"owner": {"reputation": 141, "user_id": 11748947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da0b6a761394a7bdf6034bac309498a?s=128&d=identicon&r=PG", "display_name": "JuiceFV", "link": "https://stackoverflow.com/users/11748947/juicefv"}, "edited": false, "score": 0, "creation_date": 1574273116, "post_id": 58960467, "comment_id": 104176671, "body": "@JuiceFV If be shortly, I tried to implement the algorithm wich solve Coopirative Pathfinding problem, and I shall to find the best node. In this part of the code I just check does the next node exist."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1574273161, "post_id": 58960467, "comment_id": 104176693, "body": "@JuiceFV <i>I just check does the next node exist</i> -- and if it doesn&#39;t exist, what gets returned?  That answers your question as to what you&#39;re doing wrong."}, {"owner": {"reputation": 141, "user_id": 11748947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da0b6a761394a7bdf6034bac309498a?s=128&d=identicon&r=PG", "display_name": "JuiceFV", "link": "https://stackoverflow.com/users/11748947/juicefv"}, "reply_to_user": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1574273167, "post_id": 58960467, "comment_id": 104176696, "body": "@JHBonarius No&lt; I&#39;ill try"}], "answers": [{"tags": [], "owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "is_accepted": true, "score": 0, "last_activity_date": 1574361256, "last_edit_date": 1592644375, "creation_date": 1574361256, "answer_id": 58981601, "question_id": 58960467, "link": "https://stackoverflow.com/questions/58960467/list-iterators-incompatible-and-arithmetic-overflow/58981601#58981601", "title": "List iterators incompatible and Arithmetic overflow", "body": "<p>You didn't give a Minimal, complete verifiable example</p>\n<p>But <code>space_map[i].find(next_best) != space_map[i + 1].end()</code></p>\n<p>Is not possible. <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map/find\" rel=\"nofollow noreferrer\"><code>std::unordered_map::find()</code></a> returns an iterator. And:</p>\n<blockquote>\n<h1>Return value</h1>\n<p>Iterator to an element with key equivalent to key. <em>If no such element is found, past-the-end (see <code>end()</code>) iterator is returned.</em></p>\n</blockquote>\n<p>But the iterator of <code>space_map[i]</code> <strong>is different from that of <code>space_map[i+1]</code></strong>. You cannot compare two different iterators</p>\n<p>So it either should be</p>\n<pre><code>space_map[i].find(next_best) != space_map[i].end()\n</code></pre>\n<p>or</p>\n<pre><code>space_map[i+1].find(next_best) != space_map[i+1].end()\n</code></pre>\n<p>You don't show enough code, so I have to make assumptions here. I would use a a local reference, to prevent making this mistake.</p>\n<pre><code>for (auto spMpCurrent = std::cbegin(space_map);\n     spMpCurrent != std::next(std::cbegin(space_map), WINDOW_SIZE);\n     spMpCurrent++) {\n    if (current == goal) break;\n    if (came_from.find(current) == came_from.end()) break;\n    next_best = came_from[current]; // inline this?\n    auto spMpNext = std::next(spMpCurrent);\n    if (spMpNext-&gt;find(next_best) != spMpNext-&gt;end()) {\n      auto search1 = spMpCurrent-&gt;find(current);\n</code></pre>\n<p>Your design looks very (unnecessarily?) complex. Maybe it can be simplified... but as you don't show enough code, we cannot help you</p>\n"}], "owner": {"reputation": 141, "user_id": 11748947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da0b6a761394a7bdf6034bac309498a?s=128&d=identicon&r=PG", "display_name": "JuiceFV", "link": "https://stackoverflow.com/users/11748947/juicefv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 58981601, "answer_count": 1, "score": 0, "last_activity_date": 1574361256, "creation_date": 1574272012, "last_edit_date": 1574272364, "question_id": 58960467, "link": "https://stackoverflow.com/questions/58960467/list-iterators-incompatible-and-arithmetic-overflow", "title": "List iterators incompatible and Arithmetic overflow", "body": "<p>I have such part of the code:</p>\n\n<pre><code>for (auto i = 0; i &lt; WINDOW_SIZE; ++i) {\n    if (current == goal) break;\n    if (came_from.find(current) == came_from.end())\n      break;\n    next_best = came_from[current]; \n    if (space_map[i].find(next_best) != space_map[i + 1].end()) {\n      auto search1 = space_map[i].find(current);\n... ... ... ... ... ...\n</code></pre>\n\n<p>Where </p>\n\n<pre><code>1) space_map: std::vector&lt;std::unordered_map&lt;Node, Agent*&gt;&gt; (where Node and Agent are my onw classes.)\n2) came_from: std::unordered_map&lt;Node, Node&gt;\n3) current, goal: Node\n4) WINDOW_SIZE: define, which equal 8\n</code></pre>\n\n<p>There is listing of hash_map specialization for the unordered_map, and Node:</p>\n\n<pre><code>namespace std {\ntemplate &lt;&gt;\nstruct hash&lt;Node&gt; {\n  std::size_t operator()(const Node &amp;n) const {\n    std::size_t const h1 = std::hash&lt;std::size_t&gt;{}(n.x);\n    std::size_t const h2 = std::hash&lt;std::size_t&gt;{}(n.y);\n    return (h1 ^ (h2 &lt;&lt; 1));\n  }\n};\n\n}  // namespace std\n</code></pre>\n\n<pre><code>typedef struct Node {\n  uint x, y, f_score, g_score;\n\n  bool operator==(const Node &amp;n) const { return (x == n.x &amp;&amp; y == n.y); }\n\n  bool operator!=(const Node &amp;n) const { return (x != n.x || y != n.y); }\n\n  friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;out, const Node &amp;n) {\n    out &lt;&lt; '[' &lt;&lt; n.x &lt;&lt; \", \" &lt;&lt; n.y &lt;&lt; ']';\n    return (out);\n  }\n} Node;\n</code></pre>\n\n<p>When I'm starting the Debuging, I receive such error:\n<img src=\"https://i.stack.imgur.com/1e3Ny.png\" alt=\"error&#39;s image\"></p>\n\n<p>I considered the case with WINDOW_SIZE - 1, probably it was an overflow error. But not sill the same error.\nI figgured out that an error occurs here:</p>\n\n<pre><code>if (space_map[i].find(next_best) != space_map[i + 1].end())\n</code></pre>\n\n<p>Also I have such notification, that I have a \"C26451: Arithmetic overflow\" with \"+\" here <code>space_map[i + 1].end()</code> [i + 1]. Probably it will helpful.\nCould someone explain me, where am I wrong?</p>\n"}, {"tags": ["c++", "templates", "using"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1574272144, "post_id": 58960464, "comment_id": 104176167, "body": "Please provide a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that generates the error message and add that error message complete and verbatim. You current code is insufficient to properly answer and full of syntax errors."}, {"owner": {"reputation": 1555, "user_id": 7508046, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59f0e6ee17bb67e5884e12aa6b192c11?s=128&d=identicon&r=PG&f=1", "display_name": "Yamahari", "link": "https://stackoverflow.com/users/7508046/yamahari"}, "edited": false, "score": 0, "creation_date": 1574272377, "post_id": 58960464, "comment_id": 104176281, "body": "what&#39;s the actual error message"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1574272918, "post_id": 58960464, "comment_id": 104176579, "body": "The first snippet has multiple syntax errors. Please <a href=\"https://stackoverflow.com/posts/58960464/edit\">edit</a> your question to include code that actually reproduces the error you are seeing."}, {"owner": {"reputation": 33, "user_id": 5753755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d0807e0a2978214be8e024bfdb83029?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Chauhan", "link": "https://stackoverflow.com/users/5753755/nikhil-chauhan"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574273248, "post_id": 58960464, "comment_id": 104176748, "body": "@uneven_mark  I have updated the question"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574274113, "post_id": 58960464, "comment_id": 104177189, "body": "@NikhilChauhan Please read the link I posted again. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> means that I can copy-paste the code into files without change, run the compiler and get the same result as you got. This fails here: There are no <code>#include</code> statements, <code>specialization</code> and <code>vector</code> are undeclared, there are multiple missing semicolons, one <code>&gt;</code> that certainly does not belong in the code, etc."}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1574274216, "post_id": 58960464, "comment_id": 104177240, "body": "@NikhilChauhan Can&#39;t reproduce. <a href=\"https://wandbox.org/permlink/bGy1sp9uWflZE6H2\" rel=\"nofollow noreferrer\">wandbox</a>"}, {"owner": {"reputation": 33, "user_id": 5753755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d0807e0a2978214be8e024bfdb83029?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Chauhan", "link": "https://stackoverflow.com/users/5753755/nikhil-chauhan"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1574275633, "post_id": 58960464, "comment_id": 104177894, "body": "@super agreed i tried in wandbox trying to replicate exact scenario but it compiles fine. I think its the problem with my compiler , boost  is used in my work place"}, {"owner": {"reputation": 671, "user_id": 7898100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef63bacd8554153c3ad9127ce502180d?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Wollgam", "link": "https://stackoverflow.com/users/7898100/tobias-wollgam"}, "edited": false, "score": 0, "creation_date": 1574292530, "post_id": 58960464, "comment_id": 104185040, "body": "Why do you not provide the error message?"}], "owner": {"reputation": 33, "user_id": 5753755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d0807e0a2978214be8e024bfdb83029?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil Chauhan", "link": "https://stackoverflow.com/users/5753755/nikhil-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1574309710, "creation_date": 1574272001, "last_edit_date": 1574309710, "question_id": 58960464, "link": "https://stackoverflow.com/questions/58960464/using-keyword-results-in-error-when-forward-declaring-specialized-template", "title": "using keyword results in error when forward declaring specialized template", "body": "<p>say i have a class A which is templatized in some namespace NameSpaceA.</p>\n\n<p>i wish to use the forward declaration in some other header file . I am able to achieve this using the following syntax</p>\n\n<pre><code>File 1.h\n\nnamespace NameSpaceA\n{\n    template &lt;typename T&gt;\n    class A\n    {\n    public:\n        void foo();\n    }\n}\n</code></pre>\n\n<p><strong>code that works for me</strong></p>\n\n<pre><code>File 2.h\n\n//forward declaration\nnamespace NameSpaceA\n{\n    template &lt;typename T&gt;\n    class A;\n}\n\nclass B\n{\nprivate:\n    vector&lt;NameSpaceA::A&lt;specialization&gt;* &gt; mABC;\n}\n</code></pre>\n\n<p>but i want to code it with the <strong>using</strong> keyword. </p>\n\n<p>I tried the following syntax</p>\n\n<p>(<strong>code that fails</strong>)</p>\n\n<pre><code>File 2.h\n//forward declaration\nnamespace NameSpaceA\n{\n    template &lt;typename T&gt;\n    class A;\n}\n\nusing A = typename NameSpaceA::A&lt;specialization&gt;;\n\nclass B\n{\nprivate:\n    vector&lt;A&gt;* &gt; mABC;\n}\n</code></pre>\n\n<p><strong>but vector declaration errors out with the message template argument 1 is invalid</strong>. Can someone please help me write this elegant way. </p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 3, "creation_date": 1574280795, "post_id": 58960406, "comment_id": 104180394, "body": "Look at your code. Ask yourself how, once click becomes true, it can subsequently become false. Ask your self how, once the body of the inner while loop is entered, it will ever exit."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1574302570, "post_id": 58960406, "comment_id": 104187407, "body": "You can check <a href=\"https://stackoverflow.com/questions/56741207/im-currently-making-an-autoclicker-and-so-far-its-been-a-semi-success-i-need\">this similar issue</a> to see if it helps."}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1574816992, "post_id": 58960406, "comment_id": 104362509, "body": "Hi Gurk, is the issue solved? If not, feel free let me know."}, {"owner": {"reputation": 7, "user_id": 12405624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5e509dd982e616949979f37fb5facf?s=128&d=identicon&r=PG&f=1", "display_name": "Gurk", "link": "https://stackoverflow.com/users/12405624/gurk"}, "edited": false, "score": 0, "creation_date": 1575041647, "post_id": 58960406, "comment_id": 104446655, "body": "Yes! Switched to SendMessage instead and for the hold to click:   if ((GetKeyState(VK_LBUTTON) &amp; 0x80) != 0) if ((GetKeyState(VK_LBUTTON) &amp; 0x80) == 0)"}, {"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1575279808, "post_id": 58960406, "comment_id": 104499588, "body": "@Gurk Glad to hear you got it working. You can share your solution as an answer and <a href=\"https://stackoverflow.com/help/self-answer\">accept</a> it."}], "answers": [{"comments": [{"owner": {"reputation": 94, "user_id": 9431310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FSQJVZcWm8E/AAAAAAAAAAI/AAAAAAAAAAA/zks85M1SlKs/photo.jpg?sz=128", "display_name": "ericpat", "link": "https://stackoverflow.com/users/9431310/ericpat"}, "reply_to_user": {"reputation": 7, "user_id": 12405624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5e509dd982e616949979f37fb5facf?s=128&d=identicon&r=PG&f=1", "display_name": "Gurk", "link": "https://stackoverflow.com/users/12405624/gurk"}, "edited": false, "score": 0, "creation_date": 1574274772, "post_id": 58960645, "comment_id": 104177498, "body": "Hmm. You should also set click to false at the beginning of your while(true) block"}, {"owner": {"reputation": 7, "user_id": 12405624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5e509dd982e616949979f37fb5facf?s=128&d=identicon&r=PG&f=1", "display_name": "Gurk", "link": "https://stackoverflow.com/users/12405624/gurk"}, "edited": false, "score": 0, "creation_date": 1574282283, "post_id": 58960645, "comment_id": 104181053, "body": "it doesnt click now"}], "tags": [], "owner": {"reputation": 94, "user_id": 9431310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FSQJVZcWm8E/AAAAAAAAAAI/AAAAAAAAAAA/zks85M1SlKs/photo.jpg?sz=128", "display_name": "ericpat", "link": "https://stackoverflow.com/users/9431310/ericpat"}, "is_accepted": false, "score": 0, "last_activity_date": 1574277814, "last_edit_date": 1574277814, "creation_date": 1574272706, "answer_id": 58960645, "question_id": 58960406, "link": "https://stackoverflow.com/questions/58960406/simulate-leftclicks-only-while-holding-the-leftclick-button/58960645#58960645", "title": "Simulate leftclicks only while holding the leftclick button", "body": "<p>what if you get rid of the click variable entirely:</p>\n\n<pre><code>void Clicker()\n{\n    while (true)\n    {\n        if(GetAsyncKeyState(VK_LBUTTON) &amp; 0x8000)\n        {\n            mouse_event(MOUSEEVENTF_LEFTDOWN, x, y, 0 , 0);\n            mouse_event(MOUSEEVENTF_LEFTUP, x, y, 0 , 0);\n            Sleep(1000/cps);\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 12405624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5e509dd982e616949979f37fb5facf?s=128&d=identicon&r=PG&f=1", "display_name": "Gurk", "link": "https://stackoverflow.com/users/12405624/gurk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1574277814, "creation_date": 1574271816, "last_edit_date": 1574273053, "question_id": 58960406, "link": "https://stackoverflow.com/questions/58960406/simulate-leftclicks-only-while-holding-the-leftclick-button", "title": "Simulate leftclicks only while holding the leftclick button", "body": "<p>Im VERY new to coding and Im trying to create an autoclicker that clicks aslong as im holding my left mouse button.</p>\n\n<p>this is what i've tried but i dont know how to make it stop clicking when i release the left mouse button.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\n\nusing namespace std;\n\nint x=0, y=0, cps;\nbool click=false;\n\nvoid Menu()\n{\n    cout &lt;&lt; \"CPS: \";\n    cin &gt;&gt; cps;\n}\nvoid Clicker()\n{\n    while (true)\n    {\n        if(GetAsyncKeyState(VK_LBUTTON) &amp; 0x8000)\n        {\n            click = true;\n        }\n\n\n        while(click == true)\n        {\n            mouse_event(MOUSEEVENTF_LEFTDOWN, x, y, 0 , 0);\n            mouse_event(MOUSEEVENTF_LEFTUP, x, y, 0 , 0);\n            Sleep(1000/cps);\n        }\n\n\n    }\n}\nint main()\n{\n    Menu();\n    Clicker();\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance", "memory"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1574271763, "post_id": 58960303, "comment_id": 104175972, "body": "<i>Why does the size of class in c++ depend on the public/private status of data members?</i> -- It doesn&#39;t.  Those are compiler-dependent implementation details."}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 1, "creation_date": 1574271775, "post_id": 58960303, "comment_id": 104175979, "body": "So what compiler are you using?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1574271824, "post_id": 58960303, "comment_id": 104176010, "body": "@PaulMcKenzie Actually it does.  The standard mandates members with the same access get grouped together so changing that will change the padding strategy of the compiler."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1574271945, "post_id": 58960303, "comment_id": 104176065, "body": "@NathanOliver-ReinstateMonica, I didn&#39;t know that. Do you have a reference to the relevant section handy by any chance?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1574271966, "post_id": 58960303, "comment_id": 104176077, "body": "@RSahu Looking it up to put in my answer tight now."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1574272098, "post_id": 58960303, "comment_id": 104176144, "body": "Perhaps, a public member can be accessed by external code that may have differing alignment requirements, so &quot;worst case&quot; alignment is used.  When the member is private the compiler has visibility of all accesses so has greater flexibility.   I am not sure that really explains it, but padding and alignment are implementation dependent so to know you&#39;d have to consider the constraints of the target, the generation of the code, and the design decisions of the compile author.  Not sure it is worth worrying about - there never were any guarantees."}, {"owner": {"reputation": 1041, "user_id": 1814881, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/aa6a740d1754d068162a1e04f20a9e80?s=128&d=identicon&r=PG", "display_name": "TLW", "link": "https://stackoverflow.com/users/1814881/tlw"}, "edited": false, "score": 0, "creation_date": 1574306465, "post_id": 58960303, "comment_id": 104188286, "body": "Is it intentional that you&#39;ve changed the names of <code>s</code> and <code>d</code> between the two examples?"}, {"owner": {"reputation": 281, "user_id": 10088905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711c05977be49ef481c16a4a0fc4d41c?s=128&d=identicon&r=PG&f=1", "display_name": "J.DOE", "link": "https://stackoverflow.com/users/10088905/j-doe"}, "edited": false, "score": 0, "creation_date": 1574323264, "post_id": 58960303, "comment_id": 104193690, "body": "I&#39;d tried this on g++ version - g++ (GCC) 4.8.5 20150623 (Red Hat 4.8.5-36)  but when i tried the same on Intel compiler icpc- icc (ICC) 19.0.4.243 20190416  i got consistent results irrespective of the changes in the access specifiers"}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 9, "last_activity_date": 1574341742, "creation_date": 1574341742, "answer_id": 58975850, "question_id": 58960303, "link": "https://stackoverflow.com/questions/58960303/why-does-the-size-of-class-in-c-depend-on-the-public-private-status-of-data-me/58975850#58975850", "title": "Why does the size of class in c++ depend on the public/private status of data members?", "body": "<p>The Itanium ABI <a href=\"https://itanium-cxx-abi.github.io/cxx-abi/abi.html#POD\" rel=\"noreferrer\">uses the C++03 definition of POD</a> to define classes that are \"POD for the purposes of layout\". Having private data members disqualifies a class from being an aggregate and therefore POD in C++03:</p>\n\n<blockquote>\n  <p>A <em>POD-struct</em> is an aggregate class that has no non-static data\n  members of type non-POD-struct, non-POD-union (or array of such types)\n  or reference, and has no user-defined copy assignment operator and no\n  user-defined destructor.</p>\n</blockquote>\n\n<p>Being a POD class <a href=\"https://itanium-cxx-abi.github.io/cxx-abi/abi.html#pod\" rel=\"noreferrer\">disables tail padding reuse</a>:</p>\n\n<blockquote>\n  <p>The dsize, nvsize, and nvalign of these types are defined to be their\n  ordinary size and alignment. These properties only matter for\n  non-empty class types that are used as base classes. We ignore tail\n  padding for PODs because an early version of the standard did not\n  allow us to use it for anything else and because it sometimes permits\n  faster copying of the type.</p>\n</blockquote>\n\n<p>Thus, in your first example, <code>A</code> is not a POD for layout purposes and its tail padding can be used for <code>B::c</code>, but in your second example, it is a POD, and its tail padding cannot be reused.</p>\n"}], "owner": {"reputation": 281, "user_id": 10088905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/711c05977be49ef481c16a4a0fc4d41c?s=128&d=identicon&r=PG&f=1", "display_name": "J.DOE", "link": "https://stackoverflow.com/users/10088905/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 793, "favorite_count": 3, "answer_count": 1, "score": 24, "last_activity_date": 1584694392, "creation_date": 1574271469, "last_edit_date": 1574550223, "question_id": 58960303, "link": "https://stackoverflow.com/questions/58960303/why-does-the-size-of-class-in-c-depend-on-the-public-private-status-of-data-me", "title": "Why does the size of class in c++ depend on the public/private status of data members?", "body": "<p>From what i know, the size of a class in c++ depends on the below factors -</p>\n\n<ol>\n<li>Size of all non-static data members.</li>\n<li>Order of data members.</li>\n<li>If byte padding is enabled or not.</li>\n<li>Size of its immediate base class.</li>\n<li>The existence of virtual functions.</li>\n<li>Mode of inheritance (virtual inheritance).</li>\n</ol>\n\n<p>Now I've created 2 classes as below -</p>\n\n<pre><code>class A{\n    int a;\n    short s;\n    int b;\n    char d;\n};// kept a char at last on purpose to leave a \"hole\"\n\nclass B : public A{\n    char c;  \n};\n</code></pre>\n\n<p>now on checking the size of A and B I see</p>\n\n<ul>\n<li>size of A: 16</li>\n<li>size of B: 16</li>\n</ul>\n\n<p>my assumption is the char c in class B is accommodated in \"hole\" left in class A.</p>\n\n<p>But, whats confused me is the below scenario wherein I make the members public</p>\n\n<pre><code>class A{\n    public:\n    int a;\n    short d;\n    int b;\n    char s;\n};\n\nclass B : public A{\n    public:\n    char c;\n};\n</code></pre>\n\n<p>Now the size becomes</p>\n\n<ul>\n<li>size of A: 16</li>\n<li>size of B: 20</li>\n</ul>\n\n<p>I cannot seem to understand the reason for this difference.</p>\n"}, {"tags": ["c++", "templates", "sfinae", "template-specialization"], "comments": [{"owner": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 0, "creation_date": 1574284466, "post_id": 58960177, "comment_id": 104182030, "body": "Related question: <a href=\"https://stackoverflow.com/q/17412686/9171697\">stackoverflow.com/q/17412686/9171697</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 1, "creation_date": 1574273960, "post_id": 58960855, "comment_id": 104177109, "body": "The OP is asking why it is ambiguous, under the context of template specialization partial ordering. If you change to <code>std::enable_if_t&lt;*, bool&gt;</code>, then it kind of defeat the purpose (because it is not even enabled for specialization)."}], "tags": [], "owner": {"reputation": 1555, "user_id": 7508046, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/59f0e6ee17bb67e5884e12aa6b192c11?s=128&d=identicon&r=PG&f=1", "display_name": "Yamahari", "link": "https://stackoverflow.com/users/7508046/yamahari"}, "is_accepted": false, "score": 0, "last_activity_date": 1574273492, "creation_date": 1574273492, "answer_id": 58960855, "question_id": 58960177, "link": "https://stackoverflow.com/questions/58960177/why-is-a-partial-class-template-specialization-on-a-matching-template-class-ambi/58960855#58960855", "title": "Why is a partial class template specialization on a matching template class ambiguous with another partial specialization without the template match?", "body": "<p>it's because </p>\n\n<pre><code>std::enable_if_t&lt;std::is_same_v&lt;temped&lt;int&gt;, temped&lt;int&gt;&gt; \n</code></pre>\n\n<p>resolves to void and then you have </p>\n\n<pre><code>my_trait&lt;temped&lt;int&gt;, temped&lt;int&gt;, void&gt;::value \n</code></pre>\n\n<p>defined ambigiously as true or false. If you change the type enable_if resolves to, let's say bool, everything compiles fine</p>\n"}, {"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1574344932, "post_id": 58975993, "comment_id": 104206489, "body": "But it&#39;s not really a dependent type when doing partial ordering, is it? It&#39;s <code>std::enable_if_t&lt;std::is_same&lt;DummyT, DummyT&gt;::value&gt;</code> where <code>DummyT</code> is a theoretical-only &quot;synthesized&quot; but specific type (<a href=\"https://timsong-cpp.github.io/cppwp/temp.func.order#3\" rel=\"nofollow noreferrer\">&#91;temp.func.order&#93;/3</a>)."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1574345868, "post_id": 58975993, "comment_id": 104207134, "body": "Maybe a &quot;synthesized unique type&quot; also implies that there might be additional specializations using that type, even if no currently visible specializations could make a difference? But does the Standard say that anywhere?"}, {"owner": {"reputation": 6800, "user_id": 1027706, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ff91cf16cbd51dad8e48e2799f97e811?s=128&d=identicon&r=PG", "display_name": "Ad N", "link": "https://stackoverflow.com/users/1027706/ad-n"}, "edited": false, "score": 0, "creation_date": 1574348729, "post_id": 58975993, "comment_id": 104209007, "body": "I may be missing your point: the <code>std_enable_if_t&lt;&gt;</code> provides a preferred partial specialization in the statement <code>trait_t&lt;int, int&gt;::value</code>, so it looks like it is considered   <code>void</code> (otherwise, it seems this expression should evaluate to false by selecting the base template). On the other hand, the statement <code>trait_t&lt;temped&lt;int&gt;, temped&lt;int&gt;&gt;::value</code> leads to an ambiguity, although the partial specialization <code>my_trait&lt;temped&lt;T&gt;, temped&lt;T&gt;, void&gt;</code> we hoped would be more specialized explicitly states the <code>void</code> type."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1574352624, "post_id": 58975993, "comment_id": 104211410, "body": "There is an open issue that is related to this one: <a href=\"http://wg21.link/CWG2160\" rel=\"nofollow noreferrer\">wg21.link/CWG2160</a> However, in that case, deduction apparently does succeed in one direction (?) so I&#39;m not able to reconcile that example with this one."}, {"owner": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 0, "creation_date": 1574363033, "post_id": 58975993, "comment_id": 104216698, "body": "More compiler results that seem non-uniform: <a href=\"https://stackoverflow.com/q/31394260/9171697\">stackoverflow.com/q/31394260/9171697</a>"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 0, "creation_date": 1574366937, "post_id": 58975993, "comment_id": 104218453, "body": "@KaenbyouRin indeed, if Bogdan&#39;s claim is true: that <code>P</code> is skipped when it&#39;s a non-deduced context and &quot;success&quot; is returned for that P/A pair (in Clang), then deduction should succeed here, in one direction. I don&#39;t understand why Clang would reject the code here."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1574367006, "post_id": 58975993, "comment_id": 104218488, "body": "And in any case, the &quot;real&quot; answer to OP&#39;s question should be: the standard is not clear on this, so don&#39;t write code like this until the standard clarifies it."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1574342261, "creation_date": 1574342261, "answer_id": 58975993, "question_id": 58960177, "link": "https://stackoverflow.com/questions/58960177/why-is-a-partial-class-template-specialization-on-a-matching-template-class-ambi/58975993#58975993", "title": "Why is a partial class template specialization on a matching template class ambiguous with another partial specialization without the template match?", "body": "<p>@super's now-deleted answer got this basically right. <code>std::enable_if_t&lt;...&gt;</code> is not <code>void</code> in partial ordering; as a dependent type it can in principle be something completely arbitrary. It effectively is considered a completely unique type for partial ordering purposes.</p>\n\n<p>As a result of this mismatch, the deduction during partial ordering fails in both directions, and the specializations are ambiguous.</p>\n"}], "owner": {"reputation": 6800, "user_id": 1027706, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ff91cf16cbd51dad8e48e2799f97e811?s=128&d=identicon&r=PG", "display_name": "Ad N", "link": "https://stackoverflow.com/users/1027706/ad-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 3, "answer_count": 2, "score": 8, "last_activity_date": 1574342261, "creation_date": 1574270988, "question_id": 58960177, "link": "https://stackoverflow.com/questions/58960177/why-is-a-partial-class-template-specialization-on-a-matching-template-class-ambi", "title": "Why is a partial class template specialization on a matching template class ambiguous with another partial specialization without the template match?", "body": "<p>The question may be too hard to describe in on sentence in the title, but here is a minimal example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;class T, class U, class Enabler&gt;\nstruct my_trait : std::false_type\n{};\n\ntemplate &lt;class T, class U&gt;\nstruct my_trait&lt;T, U, \n                std::enable_if_t&lt;std::is_same&lt;T, U&gt;::value&gt;&gt; : std::true_type\n{};\n\ntemplate &lt;class T&gt;\nclass temped\n{};\n\ntemplate &lt;class T&gt;\nstruct my_trait&lt;temped&lt;T&gt;, temped&lt;T&gt;, void&gt; : std::false_type\n{};\n\ntemplate &lt;class T, class U&gt;\nusing trait_t = my_trait&lt;T, U, void&gt;;\n\nint main()\n{\n    std::cout &lt;&lt; std::boolalpha;\n    std::cout &lt;&lt; trait_t&lt;int, float&gt;::value &lt;&lt; std::endl;   // false\n    std::cout &lt;&lt; trait_t&lt;int, int&gt;::value &lt;&lt; std::endl;     // true\n\n    // Compilation error: Ambiguous\n    //std::cout &lt;&lt; trait_t&lt;temped&lt;int&gt;, temped&lt;int&gt;&gt;::value &lt;&lt; std::endl;\n    return 0;    \n}\n</code></pre>\n\n<p>(<a href=\"https://godbolt.org/z/VE6ARX\" rel=\"noreferrer\">also available on godbolt</a>)</p>\n\n<p>Basically, we have a base template class <code>my_trait</code> taking two types (and a dummy type for specialization purposes), with two partial specializations:</p>\n\n<ul>\n<li>When the two types are the same</li>\n<li>When the two types are instantiation of the <code>temped</code> class template for the same type</li>\n</ul>\n\n<p>Na\u00efvely, we would have expected the second partial specialization not to be ambiguous with the first, as it feels \"more specialized\", putting more restriction on the deduced types for <code>T</code> and <code>U</code> on the base template.\nYet major compilers seems to agree that we were wrong with our expectations: why is it not considered more specialized?</p>\n"}, {"tags": ["c++", "bit"], "comments": [{"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1574270856, "post_id": 58960108, "comment_id": 104175498, "body": "On your platform, <code>int</code> is 32 bits even in 64-bit mode."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1574270900, "post_id": 58960108, "comment_id": 104175514, "body": "Is your current method not working? It could use some improvement to handle also less typical sizes, but in general the idea is correct."}, {"owner": {"reputation": 75, "user_id": 12154492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b82584fff804381f0fa03b9db84f61d?s=128&d=identicon&r=PG&f=1", "display_name": "Gooze_Berry", "link": "https://stackoverflow.com/users/12154492/gooze-berry"}, "edited": false, "score": 0, "creation_date": 1574271160, "post_id": 58960108, "comment_id": 104175642, "body": "The method is working. I was just unsure about how I can ensure I can meet the criteria that it must work on both 32 and 64 bit systems."}, {"owner": {"reputation": 75, "user_id": 12154492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b82584fff804381f0fa03b9db84f61d?s=128&d=identicon&r=PG&f=1", "display_name": "Gooze_Berry", "link": "https://stackoverflow.com/users/12154492/gooze-berry"}, "reply_to_user": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1574271196, "post_id": 58960108, "comment_id": 104175662, "body": "add like @AProgrammer says in his comment on the current OS on which this is running,  an int is 32 bit in 64 bit mode anyway"}, {"owner": {"reputation": 427, "user_id": 3289545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/608096dba96578e116403c31131f57e3?s=128&d=identicon&r=PG&f=1", "display_name": "Congenital Optimist", "link": "https://stackoverflow.com/users/3289545/congenital-optimist"}, "edited": false, "score": 0, "creation_date": 1574275633, "post_id": 58960108, "comment_id": 104177892, "body": "So you could have <code>unsigned int num0bits(int i){ return CHAR_BIT  * sizeof(int) - num1bits(i); }</code>"}], "owner": {"reputation": 75, "user_id": 12154492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b82584fff804381f0fa03b9db84f61d?s=128&d=identicon&r=PG&f=1", "display_name": "Gooze_Berry", "link": "https://stackoverflow.com/users/12154492/gooze-berry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574270739, "creation_date": 1574270739, "question_id": 58960108, "link": "https://stackoverflow.com/questions/58960108/how-to-ensure-bit-counting-method-with-work-with-both-32-and-64-bit-integer-inpu", "title": "How to ensure bit counting method with work with both 32 and 64 bit integer inputs", "body": "<p>I need to ensure by 0 bit counting method num0bits(int i) will work with both 32 and 64 bit inputs? (For example, on a machine which an int is 32 bits,num0bits(10) should return 30; if an int is 64 bits it should return 62.)</p>\n\n<p>Running x86_64 Ubuntu 18.04</p>\n\n<pre><code>unsigned int num1bits(int i)\n{\n    unsigned int u = i;\n    unsigned int ans = 0;\n    while (u &gt; 0) {\n    ans += (u&amp;1);\n    u &gt;&gt;= 1;\n    }\n    return ans;\n\n}\n\nunsigned int num0bits(int i){\n\n       if ( sizeof(i) == 4 ){\n         return 32 - num1bits(i);\n}else{\n      return 64 - num1bits(i); \n\n}\n}\n\n\nint main(){\n\nint input; \n\nwhile (std::cin &gt;&gt; input){\n\nunsigned int onebits  = num1bits(input); \nunsigned int zerobits = num0bits(input);\n\n\nstd::cout &lt;&lt; \"You entered \" &lt;&lt; input &lt;&lt; '\\n'; \nstd::cout &lt;&lt; \"There are \" &lt;&lt; onebits &lt;&lt; \" 1 bits set \" &lt;&lt; '\\n';\nstd::cout &lt;&lt; \"There are \" &lt;&lt;  zerobits &lt;&lt; \" 0 bits set \" &lt;&lt; '\\n';\n\n}\nreturn 0;\n}\n\n\n\n</code></pre>\n\n<p>You entered 23\nThere are 4 1 bits set\nThere are 28 0 bits set</p>\n\n<p>How can I check for 64 bit inputs?</p>\n"}, {"tags": ["c++", "c++20", "mod"], "answers": [{"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 2, "last_activity_date": 1574270731, "creation_date": 1574270731, "answer_id": 58960107, "question_id": 58960043, "link": "https://stackoverflow.com/questions/58960043/division-with-remainder-with-positive-remainder/58960107#58960107", "title": "Division with remainder with positive remainder", "body": "<p>You could build your own pretty easily:</p>\n\n<pre><code>double pos_fmod(double a, double b) {\n    double mod_val = std::fmod(a, b);\n    return mod_val &gt;= 0 ? mod_val : b + mod_val;\n}\n</code></pre>\n\n<p>Note that this assumes <code>b &gt; 0</code>.</p>\n"}], "owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1574270731, "creation_date": 1574270484, "question_id": 58960043, "link": "https://stackoverflow.com/questions/58960043/division-with-remainder-with-positive-remainder", "title": "Division with remainder with positive remainder", "body": "<p>Let <code>a, b</code> be real numbers with <code>b != 0</code>. I want to perform division with remainder of <code>a</code> by <code>b</code>. The result should be the unique real number <code>r</code> contained in <code>[0, |b|)</code> such that <code>a = bc + r</code> for some (unique) integer <code>c</code>.</p>\n\n<p><code>std::fmod</code> yields a similar result, but it allows <code>r</code> to be negative. For example, <code>std::fmod(-.1, 1) == -.1</code>, but I need a function which yields <code>0.9</code> for this example.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1574270597, "post_id": 58960037, "comment_id": 104175354, "body": "Forgive me but I must ask, why must <code>TEST</code> be a macro?"}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1574270668, "post_id": 58960037, "comment_id": 104175394, "body": "@Bathsheba: It doesn&#39;t really matter, does it? You get the same result if you expand the macro by hand."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1574270702, "post_id": 58960037, "comment_id": 104175409, "body": "@TonyK: I&#39;m asking because <code>__FUNCTION__</code> is not actually a macro."}, {"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 0, "creation_date": 1574270820, "post_id": 58960037, "comment_id": 104175474, "body": "Ady, why do you need this?"}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 7999400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0913c0031b6f53980e335842f5999145?s=128&d=identicon&r=PG&f=1", "display_name": "Ady", "link": "https://stackoverflow.com/users/7999400/ady"}, "edited": false, "score": 0, "creation_date": 1574271156, "post_id": 58960087, "comment_id": 104175640, "body": "This code is a very simplified version of a quite complex issue I&#39;m trying to address which, due to various constraints, has to be dealt with this way."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 171, "user_id": 7999400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0913c0031b6f53980e335842f5999145?s=128&d=identicon&r=PG&f=1", "display_name": "Ady", "link": "https://stackoverflow.com/users/7999400/ady"}, "edited": false, "score": 0, "creation_date": 1574271342, "post_id": 58960087, "comment_id": 104175742, "body": "@Ady It boils down to the fact that after macro expansion, <code>__FUNCTION__</code> has to end up in the <code>main</code> rather than in a lambda. If you tell us more about the problem you&#39;re solving, we might be able to give a more specific advice."}, {"owner": {"reputation": 171, "user_id": 7999400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0913c0031b6f53980e335842f5999145?s=128&d=identicon&r=PG&f=1", "display_name": "Ady", "link": "https://stackoverflow.com/users/7999400/ady"}, "edited": false, "score": 0, "creation_date": 1574271406, "post_id": 58960087, "comment_id": 104175783, "body": "@HolyBlackCat I think <b>FUNCTION</b> not being a macro reply answers my question. Thank you"}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 3, "last_activity_date": 1574270777, "last_edit_date": 1574270777, "creation_date": 1574270678, "answer_id": 58960087, "question_id": 58960037, "link": "https://stackoverflow.com/questions/58960037/how-to-expand-a-c-macro-before-it-is-passed-as-an-argument-to-another-macro/58960087#58960087", "title": "How to expand a C++ macro before it is passed as an argument to another macro", "body": "<p><strong><code>__FUNCTION__</code> is not a macro,</strong> it's a static variable. (See <a href=\"https://gcc.gnu.org/onlinedocs/cpp/Standard-Predefined-Macros.html\" rel=\"nofollow noreferrer\">GCC manual</a>.)</p>\n\n<p>Therefore there is no way to 'expand' it in the context of <code>main</code>, if it ends up inside of in a lambda.</p>\n\n<hr>\n\n<p>Making <code>TEST</code> a regular function will solve this problem.</p>\n"}, {"tags": [], "owner": {"reputation": 171, "user_id": 7999400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0913c0031b6f53980e335842f5999145?s=128&d=identicon&r=PG&f=1", "display_name": "Ady", "link": "https://stackoverflow.com/users/7999400/ady"}, "is_accepted": false, "score": 1, "last_activity_date": 1574275991, "creation_date": 1574275991, "answer_id": 58961452, "question_id": 58960037, "link": "https://stackoverflow.com/questions/58960037/how-to-expand-a-c-macro-before-it-is-passed-as-an-argument-to-another-macro/58961452#58961452", "title": "How to expand a C++ macro before it is passed as an argument to another macro", "body": "<p>Here's how I resolved this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#define TEST \\\n    [](const char* function){\\\n        std::cout &lt;&lt; function &lt;&lt; std::endl;\\\n    }(__FUNCTION__)\n\nint main (int argc, char *argv[]) { \n    std::cout &lt;&lt; __FUNCTION__ &lt;&lt; std::endl;\n    TEST;\n}\n</code></pre>\n\n<p>The output is now:</p>\n\n<pre><code>main\nmain\n</code></pre>\n"}], "owner": {"reputation": 171, "user_id": 7999400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0913c0031b6f53980e335842f5999145?s=128&d=identicon&r=PG&f=1", "display_name": "Ady", "link": "https://stackoverflow.com/users/7999400/ady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58960087, "answer_count": 2, "score": 1, "last_activity_date": 1574275991, "creation_date": 1574270460, "question_id": 58960037, "link": "https://stackoverflow.com/questions/58960037/how-to-expand-a-c-macro-before-it-is-passed-as-an-argument-to-another-macro", "title": "How to expand a C++ macro before it is passed as an argument to another macro", "body": "<p>I have this sample C++ code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#define TEST( function ) \\\n    [](){\\\n        std::cout &lt;&lt; function &lt;&lt; std::endl;\\\n    }()\n\nint main (int argc, char *argv[]) { \n    std::cout &lt;&lt; __FUNCTION__ &lt;&lt; std::endl;\n    TEST(__FUNCTION__);\n}\n</code></pre>\n\n<p>When I run it I get this output:</p>\n\n<pre><code>main\nmain::&lt;lambda_e118d547a20d031f709c1a0a4ae901df&gt;::operator ()\n</code></pre>\n\n<p>which shows that <code>__FUNCTION__</code> is expanded inside the macro TEST</p>\n\n<p>What I'd like though is to be able to expand <code>__FUNCTION__</code> before passing it to the macro TEST and get this output:</p>\n\n<pre><code>main\nmain\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "algebraic-data-types"], "answers": [{"comments": [{"owner": {"reputation": 38, "user_id": 7591134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13524f32e1a318e1c9c112b59fb512bb?s=128&d=identicon&r=PG", "display_name": "Anita", "link": "https://stackoverflow.com/users/7591134/anita"}, "edited": false, "score": 0, "creation_date": 1574270946, "post_id": 58960096, "comment_id": 104175540, "body": "Of course I understood that. but if you try any other value for W it will fail to compile - because there is no matching specialization. Is there a way I can hint to compiler that this is the only valid return type?"}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 38, "user_id": 7591134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13524f32e1a318e1c9c112b59fb512bb?s=128&d=identicon&r=PG", "display_name": "Anita", "link": "https://stackoverflow.com/users/7591134/anita"}, "edited": false, "score": 1, "creation_date": 1574271129, "post_id": 58960096, "comment_id": 104175625, "body": "I&#39;m sorry if I don&#39;t understand completely. There can only be one return type, the one you use in the function signature. Return anything else from the function body, and the compiler will complain."}], "tags": [], "owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "is_accepted": true, "score": 2, "last_activity_date": 1574270702, "creation_date": 1574270702, "answer_id": 58960096, "question_id": 58959839, "link": "https://stackoverflow.com/questions/58959839/c11-unable-to-infer-template-argument/58960096#58960096", "title": "C++11: Unable to infer template argument", "body": "<p>This error message is telling you why:</p>\n\n<blockquote>\n  <p>main.cc:29:3: note: candidate template\n       ignored: couldn't infer template\n       argument 'W'</p>\n</blockquote>\n\n<p>The return type is a template argument, but the compiler can't deduce a return type from the function arguments, you have to specify it.</p>\n\n<p>But, <code>decltype</code> can help you compute what that return type should be:</p>\n\n<pre><code>template&lt;typename U, typename V&gt;\nauto add(Suc&lt;U&gt; m, V n) -&gt; decltype(add(m.val, Suc&lt;V&gt;(n))) {\n    Suc&lt;V&gt; next (n);\n    return add(m.val, next);\n}\n</code></pre>\n"}], "owner": {"reputation": 38, "user_id": 7591134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13524f32e1a318e1c9c112b59fb512bb?s=128&d=identicon&r=PG", "display_name": "Anita", "link": "https://stackoverflow.com/users/7591134/anita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 58960096, "answer_count": 1, "score": 0, "last_activity_date": 1574270702, "creation_date": 1574269836, "question_id": 58959839, "link": "https://stackoverflow.com/questions/58959839/c11-unable-to-infer-template-argument", "title": "C++11: Unable to infer template argument", "body": "<p>the line:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    auto test = add&lt;Suc &lt; Suc &lt; Suc &lt; Suc &lt; Zero &gt; &gt; &gt; &gt; &gt; (three, one);\n</code></pre>\n\n<p>if I replace with:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    auto test = add(three, one);\n</code></pre>\n\n<p>I get error candidate template ignored: couldn't infer template argument 'W', using a Clang compiler with std=c++11\nI can't imagine any other value satisfying W for it, is there a way to fix it?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;type_traits&gt;\n\ntemplate&lt;typename T&gt;\nclass Nat {\n};\n\nclass Zero : public Nat&lt;Zero&gt; {\n};\n\ntemplate&lt;typename T, \n    typename std::enable_if&lt;std::is_base_of&lt;Nat&lt;T&gt;, T&gt;::value&gt;::type* = nullptr&gt;\nclass Suc : public Nat&lt;Suc&lt;T&gt; &gt; {\n public:\n  T val;\n  explicit Suc(T v): val(v) {}\n};\n\ntemplate&lt;typename T&gt;\nSuc&lt;T&gt; suc(T val) {\n    Suc&lt;T&gt; next(val);\n    return next; \n}\n\ntemplate&lt;typename W, typename U, typename V,\n    typename std::enable_if&lt;std::is_base_of&lt;Nat&lt;W&gt;, W&gt;::value&gt;::type* = nullptr,\n    typename std::enable_if&lt;std::is_base_of&lt;Nat&lt;U&gt;, U&gt;::value&gt;::type* = nullptr,\n    typename std::enable_if&lt;std::is_base_of&lt;Nat&lt;V&gt;, V&gt;::value&gt;::type* = nullptr\n    &gt;\nW add(Suc&lt;U&gt; m, V n) {\n    Suc&lt;V&gt; next (n);\n    return add&lt;W&gt;(m.val, next);\n}\n\ntemplate&lt;typename V&gt;\nV add(Zero m, V n) {\n    return n;\n}\n\nint main() {\n\n    Zero zero;\n    auto one = suc(zero);\n    auto two = suc(one);\n    auto three = suc(two);\n    auto four = suc(three);\n\n    auto test = add&lt;Suc &lt; Suc &lt; Suc &lt; Suc &lt; Zero &gt; &gt; &gt; &gt; &gt; (three, one);\n\n    return 0;\n}\n</code></pre>\n\n<p>Console output:</p>\n\n<pre><code>c++ -std=c++11 main.cc\n\nmain.cc:48:17: error: no matching function\n      for call to 'add'\n    auto test = add(three, one);\n                ^~~\nmain.cc:35:3: note: candidate function\n      template not viable: no known\n      conversion from 'Suc&lt;Suc&lt;Suc&lt;Zero,\n      nullptr&gt;, nullptr&gt;, nullptr&gt;' to\n      'Zero' for 1st argument\nV add(Zero m, V n) {\n  ^\nmain.cc:29:3: note: candidate template\n      ignored: couldn't infer template\n      argument 'W'\nW add(Suc&lt;U&gt; m, V n) {\n  ^\n1 error generated.\n</code></pre>\n"}, {"tags": ["c++", "arduino", "circuit", "adafruit"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 12258262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBo3Z7My5N22OprXEtJ78iDzy0rTotE9xX18zwX=k-s128", "display_name": "GoatZ", "link": "https://stackoverflow.com/users/12258262/goatz"}, "edited": false, "score": 0, "creation_date": 1574302785, "post_id": 58963875, "comment_id": 104187453, "body": "Thanks so much! Just a question, if I powered the Arduino with a 9V battery, would I still need to power the Motor Shield with another battery?"}], "tags": [], "owner": {"reputation": 61, "user_id": 5468806, "user_type": "registered", "profile_image": "https://graph.facebook.com/1255303204496002/picture?type=large", "display_name": "Arnaud Dorval", "link": "https://stackoverflow.com/users/5468806/arnaud-dorval"}, "is_accepted": false, "score": 3, "last_activity_date": 1574286387, "creation_date": 1574286387, "answer_id": 58963875, "question_id": 58959829, "link": "https://stackoverflow.com/questions/58959829/cant-drive-dc-motor-with-adafruit-motor-shield-v2-3/58963875#58963875", "title": "Can&#39;t Drive DC Motor with Adafruit Motor Shield V2.3", "body": "<p>You need a power supply like shown here\n<a href=\"https://i.stack.imgur.com/dsLhV.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<p>The shield is composed of an H-bridge which needs to be powered by an external source such as 9v batteries. </p>\n"}], "owner": {"reputation": 31, "user_id": 12258262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBo3Z7My5N22OprXEtJ78iDzy0rTotE9xX18zwX=k-s128", "display_name": "GoatZ", "link": "https://stackoverflow.com/users/12258262/goatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1583369363, "creation_date": 1574269802, "question_id": 58959829, "link": "https://stackoverflow.com/questions/58959829/cant-drive-dc-motor-with-adafruit-motor-shield-v2-3", "title": "Can&#39;t Drive DC Motor with Adafruit Motor Shield V2.3", "body": "<p>I'm pretty new with Arduino and I'm trying to run a DC motor with an Adafruit Motor Shield V2.3. I followed the instructions on the Adafruit website but my motor doesn't start when I upload the code. I have connected it to the correct terminal (M3) and screwed it in place. </p>\n\n<p>Here is a picture of the Arduino and Motor Shield: <a href=\"https://imgur.com/a/f7h3bV2\" rel=\"nofollow noreferrer\">https://imgur.com/a/f7h3bV2</a></p>\n\n<p>And here is my code:</p>\n\n<pre><code>#include &lt;Wire.h&gt;\n#include &lt;Adafruit_MotorShield.h&gt;\n#include \"utility/Adafruit_MS_PWMServoDriver.h\"\nAdafruit_MotorShield AFMS = Adafruit_MotorShield();\nAdafruit_DCMotor *myMotor = AFMS.getMotor(3);\n\nvoid setup()\n{\n  AFMS.begin();\n  myMotor-&gt;setSpeed(255);\n}\n\nvoid loop()\n{\n  myMotor-&gt;run(FORWARD);\n  delay(1000);\n  myMotor-&gt;run(BACKWARD);\n  delay(1000);\n  myMotor-&gt;run(FORWARD);\n  delay(1000);\n  myMotor-&gt;run(RELEASE);\n  delay(1000);\n}\n\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1574269508, "post_id": 58959704, "comment_id": 104174767, "body": "<code>istringstream iss(*myArray);</code> is exactly equivalent to <code>istringstream iss(myArray[0]);</code>, which I don&#39;t think you want. Are you trying to combine your array into a string (where the items are space separated) and then stick that into a stringstream?"}, {"owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1574269689, "post_id": 58959704, "comment_id": 104174858, "body": "No, I just want to store these information (from myArray) as a member variables for another class."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1574269861, "post_id": 58959704, "comment_id": 104174942, "body": "Then why not do <code>int id = std::stoi(myArray[0]); rawLine2 = myArray[1]; &#47;&#47;etc...</code>?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574270227, "post_id": 58959704, "comment_id": 104175137, "body": "Why didn&#39;t you use <code>std::array&lt;std::string, 5&gt; myArray;</code>?  Then you wouldn&#39;t have to deal with pointer decay issues."}], "owner": {"reputation": 15, "user_id": 11469831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51d2e9a484bc5b4be89b64270a7d44f1?s=128&d=identicon&r=PG&f=1", "display_name": "bartolomo", "link": "https://stackoverflow.com/users/11469831/bartolomo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574269311, "creation_date": 1574269311, "question_id": 58959704, "link": "https://stackoverflow.com/questions/58959704/read-input-from-string-array", "title": "Read Input from String Array", "body": "<p>Want to read string input (from array) and save it into different variables. My code:</p>\n\n<pre><code>const string myArray[]{\"4\", \"1 - 5\", \"Text_1\", \"Text_2\", \"Text_3\"};\n\n//method, which saves 1st item from myArray into line1, 2nd into line2 and the rest into line3\nvoid Parts::saveParts(const string *myArray, int rows) {\n    // rows == length of myArray\n    istringstream iss(*myArray);\n    int id;\n    char del;\n    if (iss &gt;&gt; id &gt;&gt; del) {\n        line = id;\n        string rawLine2;\n        if (iss &gt;&gt; rawLine2 &gt;&gt; del) {\n            this-&gt;setLine(rawLine2);\n            string text;\n            textItems[numberOfRows-2];\n            if (iss &gt;&gt; text) {\n                // how can I read the rest of myArray? What should I set as 'del'?\n                // 'Text_1' should go into 'textItems[0]' and so on\n            }\n        }\n    }\n    else {\n        // here I want to throw an exception, if reading (iss &gt;&gt; id &gt;&gt; del) goes wrong (in case of id is not an integer\n    }\n\n}\n</code></pre>\n\n<p>If the code structure itself is correct, can you direct me to completing signed if statement?</p>\n"}, {"tags": ["c++", "memory", "vector", "theory"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574269127, "post_id": 58959460, "comment_id": 104174559, "body": "One question per question please Cody"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1574269159, "post_id": 58959460, "comment_id": 104174586, "body": "I don&#39;t understand why you expect an operating system to allocate memory by trampling over memory already allocated for other things. Literally nothing would work."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1574269383, "post_id": 58959460, "comment_id": 104174703, "body": "@evg you don&#39;t need to worry about phsyical memory at all."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574269437, "post_id": 58959460, "comment_id": 104174729, "body": "and there are atoms between the atoms that store the bits in your chips"}, {"owner": {"reputation": 143, "user_id": 1126980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01bb8d0aa9e56088335d62017eefb6d?s=128&d=identicon&r=PG", "display_name": "Cody B", "link": "https://stackoverflow.com/users/1126980/cody-b"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574270683, "post_id": 58959460, "comment_id": 104175401, "body": "@LightnessRaceswithMonica Apologies, I hadn&#39;t meant to ask multiple questions, nor was I under the impression that &quot;an [os] trampling over memory already allocated for other things&quot; happens, but rather my intention was to better convey what I was asking; what mechanism is in place preventing memory collision with a dynamically allocated data type."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574272230, "post_id": 58959460, "comment_id": 104176210, "body": "By definition if your OS allocates memory without trampling over existing allocations, then that <i>is</i> the mechanism, no? This is a fundamental principle of a memory manager. That&#39;s its job. It&#39;s like you&#39;re asking which mechanism makes cooking produce cooked food. The answer is.. cooking! Anyway, glad you got your answer."}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 1126980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01bb8d0aa9e56088335d62017eefb6d?s=128&d=identicon&r=PG", "display_name": "Cody B", "link": "https://stackoverflow.com/users/1126980/cody-b"}, "edited": false, "score": 0, "creation_date": 1574270500, "post_id": 58959590, "comment_id": 104175315, "body": "That makes much more sense, thank you for a direct and concise answer. Apparently the fact I wasn&#39;t under the impression that memory <i>would</i> be over written but rather what the mechanism is preventing it from happening didn&#39;t come through."}, {"owner": {"reputation": 269, "user_id": 1087626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ea4c3a3eb95dee6222215087f5884c?s=128&d=identicon&r=PG", "display_name": "Oliver Sch&#246;nrock", "link": "https://stackoverflow.com/users/1087626/oliver-sch%c3%b6nrock"}, "reply_to_user": {"reputation": 143, "user_id": 1126980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01bb8d0aa9e56088335d62017eefb6d?s=128&d=identicon&r=PG", "display_name": "Cody B", "link": "https://stackoverflow.com/users/1126980/cody-b"}, "edited": false, "score": 1, "creation_date": 1574270604, "post_id": 58959590, "comment_id": 104175362, "body": "@CodyB I understood what you meant. Did my answer make it clear why we don&#39;t get &quot;clobber&quot;?"}], "tags": [], "owner": {"reputation": 269, "user_id": 1087626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24ea4c3a3eb95dee6222215087f5884c?s=128&d=identicon&r=PG", "display_name": "Oliver Sch&#246;nrock", "link": "https://stackoverflow.com/users/1087626/oliver-sch%c3%b6nrock"}, "is_accepted": true, "score": 4, "last_activity_date": 1574271617, "last_edit_date": 1574271617, "creation_date": 1574268957, "answer_id": 58959590, "question_id": 58959460, "link": "https://stackoverflow.com/questions/58959460/how-do-c-vectors-not-overwrite-within-memory-space-with-default-constructor/58959590#58959590", "title": "How do C++ Vectors not overwrite within memory space with default constructor?", "body": "<p>How are these answers? </p>\n\n<ol>\n<li><p>The OS does (or whoever is handling your memory allocations). Usually the default allocators for vectors and strings call the OS to allocate memory on the heap. (very small strings may go on the stack with the \"small string optimisation, &lt; ~16byte strings). The OS ensures that these don't clash. </p></li>\n<li><p>Yes, the standard guarantees contiguous memory for vector. </p></li>\n<li><p>No, it will request the size block it needs and the OS (or whatever allocator) will provide one or fail. Defrag is an OS task.</p></li>\n</ol>\n\n<p>EDIT: what @parktomatomi says is correct. <code>std::vector&lt;T&gt;</code> allocates enough memory for say 8 elements to begin with, then for the 9th they will re-request for 16 elements, copy everything over and free the 8 element block.Same again at 32 elements etc. The boundaries are implementation depentdant, but it's something like that. You can use <code>std::vector.reserve()</code> to avoid the re-allocate and copy process. Only usually worth it if you have perfect info, otherwise just leaving it to the doubling algorithm is usually fine. </p>\n\n<p><code>std::array&lt;T, N&gt;</code> is fixed sized and <strong>stack allocated</strong> just like primitve types (int, double etc). So it's limited in size by the stack. </p>\n\n<p>Stack also doesn't clobber (obviously), because it \"moves the stack pointer down into new space\" with each variable declaration. </p>\n\n<p>Typical stack sizes on modern desktop/server machines are 8MB on linux/OSX and 1MB on Windows. These can be adjusted. Heap sizes (where vectors go) are limited only by physical memory in the machine (in fact virtual memory if you don't mind swapping to disk). So typically several GB. </p>\n\n<p>This is not a bad article on the subject. <a href=\"https://www.tutorialspoint.com/cplusplus/cpp_dynamic_memory.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/cplusplus/cpp_dynamic_memory.htm</a></p>\n\n<p>But be aware that it talks a lot about <code>new</code> and <code>delete</code>. 99% of the time you should not be using those. They will happen a \"automatically\" inside the implementation of the <code>std::vector</code> constructor and destructor (and a few more places).</p>\n"}, {"tags": [], "owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "is_accepted": false, "score": 3, "last_activity_date": 1574269437, "last_edit_date": 1574269437, "creation_date": 1574269135, "answer_id": 58959643, "question_id": 58959460, "link": "https://stackoverflow.com/questions/58959460/how-do-c-vectors-not-overwrite-within-memory-space-with-default-constructor/58959643#58959643", "title": "How do C++ Vectors not overwrite within memory space with default constructor?", "body": "<p><code>std::vector&lt;T&gt;</code> allocates memory at runtime. The OS gives it a big block of memory that is somewhere else in the address space, and <code>std::vector</code> only holds a pointer (address) to it, so <code>sizeof(std::vector&lt;T&gt;)</code> is always some fixed size and will not overrun the next thing on the stack.</p>\n\n<p>When you push back enough elements, implementations of <code>std::vector</code> usually allocates a whole new memory buffer, and copies over all the old memory. That way, the memory stays contiguous even if it runs of room in its buffer. This incurs a small penalty for growing vectors element by element, so if you know the size it will be, <code>my_vector.reserve(N)</code> will make sure it has enough space for N elements without reallocating. </p>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array&lt;T, N&gt;</code></a> works more like how you're thinking, like a C array where all the memory is part of the object. Because of this, <code>std::array</code> can't be resized.</p>\n"}], "owner": {"reputation": 143, "user_id": 1126980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01bb8d0aa9e56088335d62017eefb6d?s=128&d=identicon&r=PG", "display_name": "Cody B", "link": "https://stackoverflow.com/users/1126980/cody-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "accepted_answer_id": 58959590, "answer_count": 2, "score": -2, "last_activity_date": 1574271617, "creation_date": 1574268462, "question_id": 58959460, "link": "https://stackoverflow.com/questions/58959460/how-do-c-vectors-not-overwrite-within-memory-space-with-default-constructor", "title": "How do C++ Vectors not overwrite within memory space with default constructor?", "body": "<p>This is more of a theoretical question than a problem. </p>\n\n<p>To my understanding std::vector will dynamically resize/reallocate memory when adding, removing, or constructing. </p>\n\n<p>I have a few questions about how vectors work at the lowest level, using the code example below</p>\n\n<ol>\n<li><p>What is preventing the following example from overwriting the memory space of <code>string1</code>?</p></li>\n<li><p>Are vectors contiguous in the same way as arrays?</p></li>\n<li><p>If there is a total memory available that a vector requires, but it is not contiguous, will it de-fragment the memory space?</p></li>\n</ol>\n\n<pre><code>#include &lt;vector&gt;\n\nusing namespace std;\n\nint main(){\n    string string1 = \"Some really large string\";  \n\n    /* A bunch of other random declarations take place \n    ...\n    */\n\n    vector&lt;int&gt; vector1;\n\n    for(int i = 0; i &lt; 10; i++)\n    {\n       vector1.push_back(i);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574268721, "post_id": 58959235, "comment_id": 104174325, "body": "Just don&#39;t use the ones you don&#39;t want to use?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1574268829, "post_id": 58959235, "comment_id": 104174389, "body": "While good advice, sometimes you don&#39;t know you are using something only available in C++17.  What is considered an aggregate and all that entails comes to mind."}], "answers": [{"tags": [], "owner": {"reputation": 21278, "user_id": 168465, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/f9a38df7ddf75a46b36c6a6ef5f98381?s=128&d=identicon&r=PG", "display_name": "kriss", "link": "https://stackoverflow.com/users/168465/kriss"}, "is_accepted": true, "score": 2, "last_activity_date": 1574269010, "last_edit_date": 1574269010, "creation_date": 1574268641, "answer_id": 58959508, "question_id": 58959235, "link": "https://stackoverflow.com/questions/58959235/is-it-possible-to-enable-only-specific-c-language-features-in-gcc/58959508#58959508", "title": "Is it possible to enable only specific C++ language features in gcc?", "body": "<p>No it is not possible. It's all or nothing.</p>\n\n<p>There is some limited level of control over language dialect in g++\n<a href=\"https://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Dialect-Options.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Dialect-Options.html</a></p>\n\n<p>If these dialects are used it can raise a warning and you can turn this warning into an error.</p>\n\n<p>Another way could be to create plugins for clang-tidy or clang-query to check your C++ code base do not use any construct you don't want, but it becomes a rather large work to achieve the intended purpose.</p>\n"}], "owner": {"reputation": 3803, "user_id": 459975, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bc7ef38c9fb207c34f2903fe2876744d?s=128&d=identicon&r=PG", "display_name": "Chuu", "link": "https://stackoverflow.com/users/459975/chuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 58959508, "answer_count": 1, "score": 3, "last_activity_date": 1574269010, "creation_date": 1574267726, "question_id": 58959235, "link": "https://stackoverflow.com/questions/58959235/is-it-possible-to-enable-only-specific-c-language-features-in-gcc", "title": "Is it possible to enable only specific C++ language features in gcc?", "body": "<p>I have a c++14 project that currently targets gcc 7.2, and I am looking to backport code from a project that targets c++17.  This project makes extensive use of <code>if constexpr</code>.  gcc 7.2 supports <code>if constexpr</code> with the --std=c++1z flag, however it brings along all the other (at the time) experimental C++17 features.</p>\n\n<p>Is there a way to enable only specific language features, in this case <code>if constexpr</code>, in gcc 7.2?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1574267756, "post_id": 58959200, "comment_id": 104173764, "body": "You need to make it correct before shortening, note you calculate <code>all</code> at the wrong place"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1574267757, "post_id": 58959200, "comment_id": 104173766, "body": "Before even trying to shorten it, are you sure that this works? From what I&#39;m reading, <code>all</code> should be some junk value every time you run this. Have you checked to be sure this works? Also, why do you <i>want</i> to shorten it? Short code != good/clean code."}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 2, "creation_date": 1574267802, "post_id": 58959200, "comment_id": 104173797, "body": "Any shortening of this program would give you the opposite of &quot;clean and nice&quot;. Besides, your program doesn&#39;t work yet, you should test it and fix issues before thinking of refactoring. Clean code means nothing when it&#39;s not working."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 1, "creation_date": 1574267822, "post_id": 58959200, "comment_id": 104173810, "body": "There is <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>, but firstly, how do you think you can calculate <code>all</code> <b>before</b> you have read the values for <code>first</code>, <code>two</code>, and <code>three</code>?!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12279137"}, "reply_to_user": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 0, "creation_date": 1574268025, "post_id": 58959200, "comment_id": 104173929, "body": "@BoBTFish Oh, my fault. You are all right, the all integer need to be at the end, Thanks!"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574268049, "post_id": 58959200, "comment_id": 104173944, "body": "you can put all code on a single line, that will make it shorter, but clean and nice not. Imho your code is as clean and nice as it can be (<code>using namespace std;</code> aside), it would rather worry about correctness..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574268789, "post_id": 58959200, "comment_id": 104174361, "body": "Why do you want to shorten this tiny program?"}, {"owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "edited": false, "score": 0, "creation_date": 1574268913, "post_id": 58959200, "comment_id": 104174428, "body": "Hi @MasterBootRecord, welcome to stackoverflow! It&#39;s good to write short code where it makes it clearer, and it&#39;s always a great thing to consider. And making it look pretty is a worthy consideration too - again as long as it makes it clearer. Clarity is everything!!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12279137"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574273008, "post_id": 58959200, "comment_id": 104176620, "body": "@LightnessRaceswithMonica Hi, I just want to learn how can i shorten a program that contains <code>cout</code> and <code>cin</code> for example, and not write them in a different line every time i want to use them."}], "answers": [{"tags": [], "owner": {"reputation": 12794, "user_id": 865643, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mG7s3.jpg?s=128&g=1", "display_name": "noelicus", "link": "https://stackoverflow.com/users/865643/noelicus"}, "is_accepted": false, "score": 1, "last_activity_date": 1574268973, "last_edit_date": 1574268973, "creation_date": 1574268066, "answer_id": 58959334, "question_id": 58959200, "link": "https://stackoverflow.com/questions/58959200/is-there-a-way-to-shorten-this-project/58959334#58959334", "title": "Is there a way to shorten this project?", "body": "<p>This takes a whole 1 line fewer. Whether it's cleaner or easier to understand is up to you  ....</p>\n\n<pre><code>int sides[3];\nfor (int i=0; i &lt; 3; i++)\n{\n  cout &lt;&lt; \"Enter side \" &lt;&lt; i+1 &lt;&lt; endl;\n  cin &gt;&gt; sides[i];\n}\n</code></pre>\n\n<p>It's good to write short code where it makes it clearer, so do keep considering how you can do that. Making it look pretty is a worthy consideration too - again as long as it makes what you're doing clearer. </p>\n\n<p>Clarity is everything!!</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 8760895, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UQ1TGgeIKUA/AAAAAAAAAAI/AAAAAAAAA-A/AlGrqdzyILU/photo.jpg?sz=128", "display_name": "Corey Kline", "link": "https://stackoverflow.com/users/8760895/corey-kline"}, "is_accepted": false, "score": 0, "last_activity_date": 1574269089, "creation_date": 1574269089, "answer_id": 58959623, "question_id": 58959200, "link": "https://stackoverflow.com/questions/58959200/is-there-a-way-to-shorten-this-project/58959623#58959623", "title": "Is there a way to shorten this project?", "body": "<p>To make the code more maintainable and readable:</p>\n\n<p>1) Use more meaningful variable names, or if you would name them consecutively, use an array </p>\n\n<p>e.g. <code>int numbers[3]</code></p>\n\n<p>2) Similarly, when you are taking prompts like this, consider having the prompts in a parallel array for the questions, or if they are the same prompt use something similar to <a href=\"https://stackoverflow.com/a/58959334/8760895\">noelicus</a> answer.</p>\n\n<p>I would do something like this:</p>\n\n<pre><code>int numbers[3];\nString prompts[3] = {\"put your\", \"prompts\", \"here\"};\n\nfor(int i=0; i&lt;3; i++){\n    cout &lt;&lt; prompts[i] &lt;&lt; endl;\n    cin &gt;&gt; numbers[i]\n}\n\n//do math\n//print output\n</code></pre>\n\n<p>also, you may want to check to make sure the user has entered a number using <a href=\"https://stackoverflow.com/questions/5655142/how-to-check-if-input-is-numeric-in-c\">this</a>.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12279137"}, "edited": false, "score": 0, "creation_date": 1574281900, "post_id": 58961375, "comment_id": 104180892, "body": "Thank you, helped me a lot!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user12405965"}, "is_accepted": true, "score": 0, "last_activity_date": 1574415717, "last_edit_date": 1574415717, "creation_date": 1574275684, "answer_id": 58961375, "question_id": 58959200, "link": "https://stackoverflow.com/questions/58959200/is-there-a-way-to-shorten-this-project/58961375#58961375", "title": "Is there a way to shorten this project?", "body": "<p>If you really want to shorten your project and make it more \"clean\" you can do it this way.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n   std::string str = \"string\"; std::cin &gt;&gt; str;\n   return 0;\n}\n</code></pre>\n\n<p>Like you wanted to write <code>cout</code> and <code>cin</code> in a single line, you could write like that, but I think it's not \"clean\" to write that way and it's better to drop a line.</p>\n\n<p>And, please don't use <code>using namespace std;</code> <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">its a bad practice</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12279137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 58961375, "answer_count": 3, "score": -3, "last_activity_date": 1574415717, "creation_date": 1574267618, "question_id": 58959200, "link": "https://stackoverflow.com/questions/58959200/is-there-a-way-to-shorten-this-project", "title": "Is there a way to shorten this project?", "body": "<p>I wrote a project that calculates the area of the triangle.\nI have wrote this program.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\nint first, two, three;\nint all = (first + two) * three;\ncout &lt;&lt; \"Enter first num: \";\ncin &gt;&gt; first;\ncout &lt;&lt; \"\\nEnter second num: \";\ncin &gt;&gt; two;\ncout &lt;&lt; \"\\nEnter num three: \";\ncin &gt;&gt; three;\ncout &lt;&lt; \"You have choosed to do: (\" &lt;&lt; first &lt;&lt; \" + \" &lt;&lt; two &lt;&lt; \") * \" &lt;&lt; three;\ncout &lt;&lt; \"\\n\\nThis is equal to: \" &lt;&lt; all;\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>Instead of going down a line and writing <code>cin</code> and <code>cout</code> every time, is there a way to shorten this project and make it shorter.\nMaybe like write the <code>cout</code> and the <code>cin</code> in a single line ?\nor anything else just to make it look more clean and nice.</p>\n\n<p>it looked messy.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "is_accepted": false, "score": 0, "last_activity_date": 1574267991, "creation_date": 1574267991, "answer_id": 58959311, "question_id": 58959175, "link": "https://stackoverflow.com/questions/58959175/how-would-i-be-able-to-code-so-that-the-computer-knows-the-difference-between-a/58959311#58959311", "title": "How would i be able to code so that the computer knows the difference between a two name entry and a three name entry?", "body": "<p>I think your problem with the two name case is, that <code>cin</code> wants three inputs for this. You can use <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> to get a whole line from <code>cin</code> (so it blocks until the first enter). Then you can create a <a href=\"https://en.cppreference.com/w/cpp/io/basic_istringstream\" rel=\"nofollow noreferrer\"><code>std::istringstream</code></a> from this and extract three names. If there are only two, after the last extraction the stringstream will evaluate to <code>false</code> which you can then check with <code>if(stream)</code>. (assuming the name of your stringstream is <code>stream</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 0, "last_activity_date": 1574268117, "creation_date": 1574268117, "answer_id": 58959353, "question_id": 58959175, "link": "https://stackoverflow.com/questions/58959175/how-would-i-be-able-to-code-so-that-the-computer-knows-the-difference-between-a/58959353#58959353", "title": "How would i be able to code so that the computer knows the difference between a two name entry and a three name entry?", "body": "<p>You can read in the whole line at once with <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline()</code></a> and then use something like <a href=\"https://stackoverflow.com/a/3672259/2602718\">this answer</a> to count the words in the string.</p>\n\n<p>That could look like:</p>\n\n<pre><code>unsigned int countWordsInString(std::string const&amp; str) {\n    std::stringstream stream(str);\n    return std::distance(std::istream_iterator&lt;std::string&gt;(stream), std::istream_iterator&lt;std::string&gt;());\n}\n\nint main() {\n    string full_name;\n    unsigned numWords = 0;\n\n    while (numWords != 2 &amp;&amp; numWords != 3) {\n        std::getline(std::cin, full_name); // Read the whole line into full_name\n        numWords = countWordsInString(full_name);\n        if ( num_words == 2 ) {\n            // Read first/last from full_name\n        } else if (num_words == 3) {\n            // Read first/middle/last from full_name\n        } else {\n            std::cout &lt;&lt; \"Bad input. Input must be 'First Middle Last' or 'First Last'\" &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 12398188, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDn1sT_TsurnXTr_LzM6iUKuqSDVVim78BLxlfhAA=k-s128", "display_name": "Tanvir Ahmad Shaikh", "link": "https://stackoverflow.com/users/12398188/tanvir-ahmad-shaikh"}, "is_accepted": false, "score": 0, "last_activity_date": 1574268665, "creation_date": 1574268665, "answer_id": 58959518, "question_id": 58959175, "link": "https://stackoverflow.com/questions/58959175/how-would-i-be-able-to-code-so-that-the-computer-knows-the-difference-between-a/58959518#58959518", "title": "How would i be able to code so that the computer knows the difference between a two name entry and a three name entry?", "body": "<p>Read the full name in a line and then use a string tokenizer to see how many words the name has. It would help you make a generic code and not just restrict to two or three word names. </p>\n\n<p>Using above approach, you can have any number of words in the input name.</p>\n\n<p>Hope this helps ! Have a good day..</p>\n"}], "owner": {"reputation": 1, "user_id": 12405268, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD-4m0n6fqGlFbFWKgucwQ8vgXVFm9gQttn3utp=k-s128", "display_name": "Andrew Muston", "link": "https://stackoverflow.com/users/12405268/andrew-muston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1574268665, "creation_date": 1574267573, "question_id": 58959175, "link": "https://stackoverflow.com/questions/58959175/how-would-i-be-able-to-code-so-that-the-computer-knows-the-difference-between-a", "title": "How would i be able to code so that the computer knows the difference between a two name entry and a three name entry?", "body": "<pre><code>char first[20], middle[20], last[20];\ncout &lt;&lt; \"Enter you name (F/M/L or F/L) \\n\";\ncin &gt;&gt; first;\ncin &gt;&gt; middle;\ncin &gt;&gt; last;\n</code></pre>\n\n<p>pretty simple, assignment is to write the code so that if the user enters \"John smith\" it will output \"smith, John\" and if they enter \"John x. smith\" it will output \"smith, John x.\" the code here only works for 3 name entries, any way to tweak it into being able to read a two name entry while not messing up the three names?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 1, "creation_date": 1574268008, "post_id": 58959131, "comment_id": 104173915, "body": "<code>time.h</code> is not a C++ header. You tagged C++ so use <code>ctime</code>"}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 2, "creation_date": 1574268144, "post_id": 58959131, "comment_id": 104173996, "body": "<code>Sleep()</code> is not C++ but some (obscure?) Windows thing. You should stick to standard C++ , see <a href=\"https://en.cppreference.com/w/cpp/chrono\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/chrono</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7524944, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e_KiuP2cZcU/AAAAAAAAAAI/AAAAAAAAABY/gaRsyZ3Acpk/photo.jpg?sz=128", "display_name": "Dmitry Semenov", "link": "https://stackoverflow.com/users/7524944/dmitry-semenov"}, "edited": false, "score": 0, "creation_date": 1574270766, "post_id": 58959956, "comment_id": 104175444, "body": "didnt know it, tnx!"}], "tags": [], "owner": {"reputation": 46684, "user_id": 1527, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/2180b1a962bf46e58fa9746cb4ebfb91?s=128&d=identicon&r=PG", "display_name": "Pete Kirkham", "link": "https://stackoverflow.com/users/1527/pete-kirkham"}, "is_accepted": true, "score": 1, "last_activity_date": 1574270153, "last_edit_date": 1592644375, "creation_date": 1574270153, "answer_id": 58959956, "question_id": 58959131, "link": "https://stackoverflow.com/questions/58959131/broken-timer-or-something-else/58959956#58959956", "title": "Broken timer or something else", "body": "<p>The documentation for the Sleep function at <a href=\"https://docs.microsoft.com/en-gb/windows/win32/api/synchapi/nf-synchapi-sleep\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-gb/windows/win32/api/synchapi/nf-synchapi-sleep</a> says</p>\n<blockquote>\n<p>Suspends the execution of the current thread until the time-out interval elapses.</p>\n<p>The system clock &quot;ticks&quot; at a constant rate. If dwMilliseconds is less than the resolution of the system clock, the thread may sleep for less than the specified length of time. If dwMilliseconds is greater than one tick but less than two, the wait can be anywhere between one and two ticks, and so on.</p>\n</blockquote>\n<p>Ticks are typically 15.6 ms on Windows systems (64 ticks per second), so 26 becomes 31.2.\nThis is the time after which it is possible for the suspended thread to become active again, there is no guarantee that it will start executing immediately. So your five sleeps become 156ms plus a little overhead.</p>\n<p>The documentation continues with mitigations for this behaviour, and warnings that the mitigations will affect system power usage and so on.</p>\n<blockquote>\n<p>To increase the accuracy of the sleep interval, call the timeGetDevCaps function to determine the supported minimum timer resolution and the timeBeginPeriod function to set the timer resolution to its minimum.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 74, "user_id": 1700925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9a1956a530fcdc2bff9fde9949388b?s=128&d=identicon&r=PG&f=1", "display_name": "melissanais", "link": "https://stackoverflow.com/users/1700925/melissanais"}, "is_accepted": false, "score": 1, "last_activity_date": 1574270836, "last_edit_date": 1592644375, "creation_date": 1574270836, "answer_id": 58960137, "question_id": 58959131, "link": "https://stackoverflow.com/questions/58959131/broken-timer-or-something-else/58960137#58960137", "title": "Broken timer or something else", "body": "<p>In std::this_thread::sleep_for documentation (found <a href=\"https://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow noreferrer\">here</a>)</p>\n<blockquote>\n<p>It is stated that the function blocks the execution of the current\nthread for at least the specified sleep_duration.</p>\n<p>It may block for\nlonger than sleep_duration due to scheduling or resource contention\ndelays.</p>\n</blockquote>\n<p>So your code will take at least 135ms to execute.</p>\n"}], "owner": {"reputation": 13, "user_id": 7524944, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e_KiuP2cZcU/AAAAAAAAAAI/AAAAAAAAABY/gaRsyZ3Acpk/photo.jpg?sz=128", "display_name": "Dmitry Semenov", "link": "https://stackoverflow.com/users/7524944/dmitry-semenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 58959956, "answer_count": 2, "score": 0, "last_activity_date": 1574270836, "creation_date": 1574267458, "last_edit_date": 1574269985, "question_id": 58959131, "link": "https://stackoverflow.com/questions/58959131/broken-timer-or-something-else", "title": "Broken timer or something else", "body": "<p>I have some program what must help me, but i cant handle timing. <br>\nHire is a code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n#include &lt;time.h&gt;\n#include &lt;Windows.h&gt;\n\ndouble diffclock(clock_t clock1) {\n    clock_t clock2 = clock();\n    double diffticks = clock1 - clock2;\n    double diffms = diffticks / (CLOCKS_PER_SEC / 1000);\n\n    return diffms;\n}\n\n\nint main()\n{\n    int wait = 134;\n    clock_t fullbetween = clock();\n\n    for (int i = 0; i &lt; 5; i++) {\n        Sleep(wait / 5);\n        cout &lt;&lt; wait / 5 &lt;&lt; \"  \";\n    }\n    cout &lt;&lt; endl &lt;&lt; \"finish in \" &lt;&lt; diffclock(fullbetween) &lt;&lt; \" ms\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>C++ version. same result:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n#include &lt;ctime&gt;\n#include &lt;thread&gt;\n#include &lt;Windows.h&gt;\n\n\nint main()\n{\n    int wait = 134;\n    auto start = std::chrono::system_clock::now();\n\n    for (int i = 0; i &lt; 5; i++) {\n        std::this_thread::sleep_for(std::chrono::milliseconds(wait/5));\n    }\n    auto end = std::chrono::system_clock::now();\n\n    auto int_ms = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt; (end - start);\n\n    std::cout &lt;&lt; std::endl &lt;&lt; \"finish in \" &lt;&lt; int_ms.count() &lt;&lt; \" ms\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>134 / 5 = 26 is ok. But in last \"cout\" it shows that all that iteration taked about ~170ms, not 130 as expected. Why this is happening ?</p>\n\n<p>Sry about my engl.</p>\n"}, {"tags": ["c++", "class", "operator-overloading"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574267628, "post_id": 58959125, "comment_id": 104173670, "body": "<a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading?rq=1\" title=\"what are the basic rules and idioms for operator overloading\">stackoverflow.com/questions/4421706/&hellip;</a>"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1574267630, "post_id": 58959125, "comment_id": 104173675, "body": "&quot;<i>I&#39;ve not understood</i>&quot; What have you not understood? It&#39;s difficult to help someone if they don&#39;t explain what it is they don&#39;t know."}], "answers": [{"tags": [], "owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "is_accepted": false, "score": 0, "last_activity_date": 1574268956, "creation_date": 1574268956, "answer_id": 58959589, "question_id": 58959125, "link": "https://stackoverflow.com/questions/58959125/what-happens-when-value-is-passed-to-operator-overloader-function-in-c/58959589#58959589", "title": "What happens when value is passed to operator overloader function in C++?", "body": "<p>If you suspect you don't need a piece of code, try compiling without it and you'll know pretty quickly whether your suspicion was correct or not.</p>\n\n<p>When you remove the default constructor in the class you provided here's what happens:</p>\n\n<pre><code>..\\Playground\\: In member function 'MyClass MyClass::operator+(MyClass&amp;)':\n..\\Playground\\:11:21: error: no matching function for call to 'MyClass::MyClass()'\n             MyClass res;\n                     ^~~\n..\\Playground\\:7:9: note: candidate: MyClass::MyClass(int)\n         MyClass(int a)\n         ^~~~~~~\n..\\Playground\\:7:9: note:   candidate expects 1 argument, 0 provided\n..\\Playground\\:4:7: note: candidate: constexpr MyClass::MyClass(const MyClass&amp;)\n class MyClass {\n</code></pre>\n\n<p>Which is to say the problem is in the +operator implementation at the line <code>MyClass res;</code> . This line creates an instance of the object <code>MyClass</code>using the default constructor, so there's no way the code snippet your provided works without a default constructor.</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 12234784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBr4Pnexf6U-rx_J9F_lOFU55Qsv4X4g8jWn8fH2w=k-s128", "display_name": "Hilary Diaz", "link": "https://stackoverflow.com/users/12234784/hilary-diaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1574841022, "creation_date": 1574841022, "answer_id": 59065427, "question_id": 58959125, "link": "https://stackoverflow.com/questions/58959125/what-happens-when-value-is-passed-to-operator-overloader-function-in-c/59065427#59065427", "title": "What happens when value is passed to operator overloader function in C++?", "body": "<p>The constructor without parameters is for the object that doesn't pass any value, the one that stores the sum of the two operand objects. ---simple---</p>\n"}], "owner": {"reputation": 39, "user_id": 12234784, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBr4Pnexf6U-rx_J9F_lOFU55Qsv4X4g8jWn8fH2w=k-s128", "display_name": "Hilary Diaz", "link": "https://stackoverflow.com/users/12234784/hilary-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1574841022, "creation_date": 1574267448, "last_edit_date": 1574267853, "question_id": 58959125, "link": "https://stackoverflow.com/questions/58959125/what-happens-when-value-is-passed-to-operator-overloader-function-in-c", "title": "What happens when value is passed to operator overloader function in C++?", "body": "<p>I failed to understand the steps of compilation of this code. \nFirst, where is what is purpose of the default constructor, and why so many objects of type MyClass?\n<a href=\"https://code.sololearn.com/ca8ZGaXwVv4s/?ref=app\" rel=\"nofollow noreferrer\">link to sololearn where I saved the code</a></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass MyClass {\n    public:\n        int var;\n        MyClass() { }\n        MyClass(int a)\n        : var(a) { }\n\n        MyClass operator+(MyClass &amp;obj) {\n            MyClass res;\n            res.var= this-&gt;var+obj.var;\n            //'this' is refering to active (obj1)\n            return res; \n        }\n};\n\nint main() {\n    MyClass obj1(12), obj2(55);\n\n    MyClass res = obj1+obj2;\n\n    cout &lt;&lt; res.var;\n}\n//I've not understood, its from a lesson\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2041, "user_id": 7316365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/84de9f27708456d85bf1078aa51155b2?s=128&d=identicon&r=PG&f=1", "display_name": "Vivick", "link": "https://stackoverflow.com/users/7316365/vivick"}, "edited": false, "score": 0, "creation_date": 1574267570, "post_id": 58959088, "comment_id": 104173629, "body": "The address won&#39;t change just because you incremented the variable&#39;s value"}, {"owner": {"reputation": 5476, "user_id": 3059024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fecb9e1f75d3d01f4b4341c587fbe2c5?s=128&d=identicon&r=PG&f=1", "display_name": "CiaranWelsh", "link": "https://stackoverflow.com/users/3059024/ciaranwelsh"}, "reply_to_user": {"reputation": 2041, "user_id": 7316365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/84de9f27708456d85bf1078aa51155b2?s=128&d=identicon&r=PG&f=1", "display_name": "Vivick", "link": "https://stackoverflow.com/users/7316365/vivick"}, "edited": false, "score": 0, "creation_date": 1574267614, "post_id": 58959088, "comment_id": 104173660, "body": "Yes, but how would I make it change?"}, {"owner": {"reputation": 652, "user_id": 3711792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bbd20713e1429cb31d30f6ee04fe5e?s=128&d=identicon&r=PG", "display_name": "kreld", "link": "https://stackoverflow.com/users/3711792/kreld"}, "edited": false, "score": 0, "creation_date": 1574267620, "post_id": 58959088, "comment_id": 104173664, "body": "These are memory addresses, not locations on disk. If you want the integers to have different memory addresses, you can assign them to different variables. As it is, you&#39;re overwriting the same variable, and that variable keeps on having the same address in memory even if its overwritten."}, {"owner": {"reputation": 652, "user_id": 3711792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bbd20713e1429cb31d30f6ee04fe5e?s=128&d=identicon&r=PG", "display_name": "kreld", "link": "https://stackoverflow.com/users/3711792/kreld"}, "edited": false, "score": 0, "creation_date": 1574267716, "post_id": 58959088, "comment_id": 104173727, "body": "Honestly, it looks to me like you want an int array of length 10 with each of the numbers at consecutive indices in the array."}, {"owner": {"reputation": 5476, "user_id": 3059024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fecb9e1f75d3d01f4b4341c587fbe2c5?s=128&d=identicon&r=PG&f=1", "display_name": "CiaranWelsh", "link": "https://stackoverflow.com/users/3059024/ciaranwelsh"}, "edited": false, "score": 0, "creation_date": 1574267736, "post_id": 58959088, "comment_id": 104173741, "body": "Apologies, I ment in memory."}, {"owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "edited": false, "score": 0, "creation_date": 1574267749, "post_id": 58959088, "comment_id": 104173757, "body": "How about array of 10 integers <code>int new_id[10]</code> which has different address locations for each integer."}, {"owner": {"reputation": 5476, "user_id": 3059024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fecb9e1f75d3d01f4b4341c587fbe2c5?s=128&d=identicon&r=PG&f=1", "display_name": "CiaranWelsh", "link": "https://stackoverflow.com/users/3059024/ciaranwelsh"}, "edited": false, "score": 0, "creation_date": 1574267810, "post_id": 58959088, "comment_id": 104173803, "body": "I need to dynamically create unique integers (as IDs) to pass to a bunch of objects I&#39;m instantiating. At the moment they all point to the same variable in memory."}, {"owner": {"reputation": 5476, "user_id": 3059024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fecb9e1f75d3d01f4b4341c587fbe2c5?s=128&d=identicon&r=PG&f=1", "display_name": "CiaranWelsh", "link": "https://stackoverflow.com/users/3059024/ciaranwelsh"}, "reply_to_user": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "edited": false, "score": 0, "creation_date": 1574267902, "post_id": 58959088, "comment_id": 104173861, "body": "@SunilBojanapally Yes, this would work - however, these will be ID&#39;s so I wanted to use the increment pattern to ensure uniqueness when I modify the object in future."}], "answers": [{"tags": [], "owner": {"reputation": 652, "user_id": 3711792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2bbd20713e1429cb31d30f6ee04fe5e?s=128&d=identicon&r=PG", "display_name": "kreld", "link": "https://stackoverflow.com/users/3711792/kreld"}, "is_accepted": true, "score": 1, "last_activity_date": 1574267979, "creation_date": 1574267979, "answer_id": 58959307, "question_id": 58959088, "link": "https://stackoverflow.com/questions/58959088/syntax-for-copying-data-into-a-new-location-on-disk/58959307#58959307", "title": "Syntax for copying data into a new location on disk", "body": "<p>Per the question asker's comment:</p>\n\n<blockquote>\n  <p>I need to dynamically create unique integers (as IDs) to pass to a bunch of objects I'm instantiating. At the moment they all point to the same variable in memory</p>\n</blockquote>\n\n<p>I think what they need are <a href=\"https://www.boost.org/doc/libs/1_65_0/libs/uuid/uuid.html\" rel=\"nofollow noreferrer\">UUIDs</a> rather than memory locations. Try using this library, it allows you to create unique identifiers that you can use to identify your objects, rather than using arbitrary memory locations to do so.</p>\n"}], "owner": {"reputation": 5476, "user_id": 3059024, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fecb9e1f75d3d01f4b4341c587fbe2c5?s=128&d=identicon&r=PG&f=1", "display_name": "CiaranWelsh", "link": "https://stackoverflow.com/users/3059024/ciaranwelsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58959307, "answer_count": 1, "score": -1, "last_activity_date": 1574267979, "creation_date": 1574267333, "last_edit_date": 1574267718, "question_id": 58959088, "link": "https://stackoverflow.com/questions/58959088/syntax-for-copying-data-into-a-new-location-on-disk", "title": "Syntax for copying data into a new location on disk", "body": "<p>How would I copy the value new_id to a different memory address so that the 10 <code>new_id</code> integers all point to <em>different</em> places in memory?</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main(){\n\n    int id = 0;\n\n    for (int i=0 ; i &lt; 10; ++i){\n        int new_id = id;\n        std::cout &lt;&lt; id &lt;&lt; \" \" &lt;&lt; new_id &lt;&lt; std::endl;\n        std::cout &lt;&lt; &amp;id &lt;&lt; \" \" &lt;&lt; &amp;new_id &lt;&lt; std::endl;\n        id += 1;\n    }\n    return 0;\n};\n</code></pre>\n\n<p>Current result:</p>\n\n<pre><code>0 0\n0x7ffced46f0a4 0x7ffced46f0a8\n1 1\n0x7ffced46f0a4 0x7ffced46f0a8\n...\n...\n</code></pre>\n\n<p>Desired result:</p>\n\n<pre><code>0 0\n0x7ffced46f0a4 0x7ffced46f0a8\n1 1\n0x7ffced46f0a4 0x7ffced46f0a9\n2 2\n0x7ffced46f0a4 0x7ffced46f0a10\n...\n...\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 10, "creation_date": 1574267051, "post_id": 58958980, "comment_id": 104173326, "body": "You can do that using cast, but why do you need that? Note - it is not guaranteed that <code>a</code> will be on the same address you run your program the next time."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1574267246, "post_id": 58958980, "comment_id": 104173457, "body": "I am with Slava. &quot;why do you need that?&quot; for me is short for I believe we are looking at an XY problem.  <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-proble&zwnj;&#8203;m</a>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1574267319, "post_id": 58958980, "comment_id": 104173496, "body": "Other than <code>nullptr</code>, it is best not to initilize a pointer with any hard coded value."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1574267380, "post_id": 58958980, "comment_id": 104173520, "body": "@RSahu except embedded where having hardcoded address is quite normal, but this is very unlikely the OP&#39;s case"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1574267406, "post_id": 58958980, "comment_id": 104173537, "body": "@RSahu or a number read from the datasheet for a piece of hardware"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 5, "last_activity_date": 1574267554, "creation_date": 1574267554, "answer_id": 58959168, "question_id": 58958980, "link": "https://stackoverflow.com/questions/58958980/can-i-directly-assign-an-address-to-a-pointer-if-so-how-to-do-that/58959168#58959168", "title": "Can I directly assign an address to a pointer? If so, how to do that?", "body": "<blockquote>\n  <p>can I directly assign int* b with 0x7ffeefbff58c?</p>\n</blockquote>\n\n<p>Technically, yes.</p>\n\n<blockquote>\n  <p>If so, how to do that?</p>\n</blockquote>\n\n<p>With reinterpret cast.</p>\n\n<p>But do realise that there is absolutely no guarantee in general that <code>a</code> would be in the address 0x7ffeefbff58c. As such, there isn't much that you can do with such integer reinterpreted as a pointer. Doing this with a local variable would be <em>pointless</em>.</p>\n\n<p>A case where interpreting integer as a pointer is useful is some embedded systems that reserve some constant memory addresses for special purposes.</p>\n"}, {"tags": [], "owner": {"reputation": 138, "user_id": 10911242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56d36edcc94a17d299b872b1e38afecd?s=128&d=identicon&r=PG&f=1", "display_name": "risbo", "link": "https://stackoverflow.com/users/10911242/risbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1574271527, "creation_date": 1574271527, "answer_id": 58960313, "question_id": 58958980, "link": "https://stackoverflow.com/questions/58958980/can-i-directly-assign-an-address-to-a-pointer-if-so-how-to-do-that/58960313#58960313", "title": "Can I directly assign an address to a pointer? If so, how to do that?", "body": "<p>Heere is an example:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main()\n{\n\n  int *b = (int*) 0x7ffeefbff58c;\n  std::cout &lt;&lt; \"b: \" &lt;&lt; b &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>after compilation and execution you will see output:</p>\n\n<p>b: 0x7ffeefbff58c</p>\n"}], "owner": {"reputation": 11, "user_id": 12405166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6474155a3597ee5837773be4b6c86cfc?s=128&d=identicon&r=PG&f=1", "display_name": "rayjinghaolei", "link": "https://stackoverflow.com/users/12405166/rayjinghaolei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574271527, "creation_date": 1574266973, "last_edit_date": 1574267055, "question_id": 58958980, "link": "https://stackoverflow.com/questions/58958980/can-i-directly-assign-an-address-to-a-pointer-if-so-how-to-do-that", "title": "Can I directly assign an address to a pointer? If so, how to do that?", "body": "<pre><code>int main()\n{\n  int a = 2; // address is 0x7ffeefbff58c\n  int *b = &amp;a;\n  std::cout &lt;&lt; \"address of a: \" &lt;&lt; b &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>I have my int variable a at address 0x7ffeefbff58c, but can I directly assign int* b with 0x7ffeefbff58c? </p>\n\n<p>I tried int * b = 0x7ffeefbff58c; \nBut there is an error says \"cannot initialize a variable of type 'int *' with an rvalue of type 'long'\", so do I have to use the address of a (&amp;a) to initialize the pointer? or there is other way to do it?</p>\n"}, {"tags": ["c++", "codeblocks", "ifstream"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1574266862, "post_id": 58958903, "comment_id": 104173216, "body": "And when you ran your program in your debugger, what observations did you make? This is a good opportunity to learn how to use it to run your programs one line at a time, inspect all variables and their values as they change, and analyze your programs&#39; logical execution flow. Knowing how to use a debugger is a required skill for every C++ developer, no exceptions. With your debugger&#39;s help you should be able to quickly find the bug in this and all future programs you write, without having to ask anyone for help."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 4, "creation_date": 1574267022, "post_id": 58958903, "comment_id": 104173305, "body": "<a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-i-e-while-stream-eof-cons\">Why is iostream::eof inside a loop condition (i.e. <code>while (!stream.eof())</code>) considered wrong?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "is_accepted": false, "score": 0, "last_activity_date": 1574272528, "creation_date": 1574272528, "answer_id": 58960588, "question_id": 58958903, "link": "https://stackoverflow.com/questions/58958903/having-trouble-with-importing-data-from-a-file-i-am-getting-an-endless-loop/58960588#58960588", "title": "Having trouble with importing data from a file. I am getting an endless loop", "body": "<p>If you are still stuck, then think about what you have to accomplish to read each struct from your datafile. You need to read 4 pieces of information, 2-strings, 1-int, 1-float. You are thinking correctly to read into a temporary struct <code>L</code>, but what you want to do is validate you have correctly filled all four members of <code>L</code> before adding <code>L</code> to your vector.</p>\n\n<p>To accomplish a successful read of all four members, you must first read the first-member. Condition your read-loop on reading the first member, e.g.:</p>\n\n<pre><code>    while (getline (myfile, L.Title)) {         /* validate each read */\n</code></pre>\n\n<p>After having read the first member, validate each of the next three members being read:</p>\n\n<pre><code>        if (getline (myfile, L.Category) &amp;&amp;\n            myfile &gt;&gt; L.YOP &amp;&amp; myfile &gt;&gt; L.Gross) {\n            v.push_back(L);     /* before adding temp struct to vector */\n            i++;\n        }\n</code></pre>\n\n<p>It's risky to presume you only have a single <code>'\\n'</code> following <code>Gross</code> in your input file and makes your read fragile. Ignore all characters to end of line, e.g.</p>\n\n<pre><code>        /* ignore all characters to \\n */\n        myfile.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n</code></pre>\n\n<p>Do not use <em>Magic Numbers</em> or <em>Hardcode Filenames</em> in your code. <code>main()</code> takes arguments which allows you to pass a filename to read data from on the command line (or you can take it as input), but don't bury a hardcoded filename down in a funciton:</p>\n\n<pre><code>    myfile.open (\"Movies.txt\");\n</code></pre>\n\n<p>Instead, pass the filename on the command line, e.g.</p>\n\n<pre><code>int main (int argc, char **argv)\n{\n    if (argc &lt; 2) {  /* validate at least 1 argument given for filename */\n        std::cerr &lt;&lt; \"usage: \" &lt;&lt; argv[0] &lt;&lt; \" filename\\n\";\n        return 1;\n    }\n    ...\n    LoadMovies(v, argv[1]);   /* pass filename to open to LoadMovies */\n</code></pre>\n\n<p>There is no reason for six calls to <code>std::cout</code> to display each movie. One will do:</p>\n\n<pre><code>    for (unsigned int i=0; i&lt;v.size(); ++i)\n        std::cout &lt;&lt; \"----------------------------------------------------\\n\"\n                  &lt;&lt; v[i].Title &lt;&lt; '\\n'\n                  &lt;&lt; \"Category: \" &lt;&lt; v[i].Category &lt;&lt; '\\n'\n                  &lt;&lt; \"Year of Publication: \" &lt;&lt; v[i].YOP &lt;&lt; '\\n'\n                  &lt;&lt; \"Gross: \" &lt;&lt; v[i].Gross &lt;&lt; '\\n'\n                  &lt;&lt; \"----------------------------------------------------\\n\\n\";\n</code></pre>\n\n<p>Have <code>SearchMovies()</code> provide a meaningful return to indicate success/failure back in the caller. You ideally want to separate your implementation (your logic/calculations) from your interface (your output to the user). If you provide a meaningful return type for <code>SearchMovies()</code> you can remove the output from the function completely and have that provided back in <code>main()</code> based upon your return. A simple return of type <code>int</code> is fine. <code>-1</code> to indicate not found in library, or return the index in your vector on success. Example:</p>\n\n<pre><code>int SearchMovies (std::vector&lt;video&gt;&amp; v, const std::string&amp; s)\n{\n    int i;\n    std::string slower (s);                 /* string s to lowercase */\n    std::transform (slower.begin(), slower.end(), \n                    slower.begin(), \n                    [](unsigned char c){ return std::tolower(c); });\n\n\n    for (i = 0; i &lt; (int)v.size(); i++) {   /* movie title to lowercase */\n        std::string mlower (v[i].Title);\n        std::transform (mlower.begin(), mlower.end(), \n                        mlower.begin(), \n                        [](unsigned char c){ return std::tolower(c); });\n\n        if (mlower == slower)   /* compare lowercase movie and string */\n            return i;\n    }\n\n    return -1;  /* if not found, return -1 (cannot be an index) */\n}\n</code></pre>\n\n<p>(<strong>note:</strong> you can loop converting each character to lowercase, or you can just use <a href=\"https://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow noreferrer\"><code>std::transform</code></a> to convert all characters.)</p>\n\n<p>By converting both the movie title as well as your <code>WantMovie</code> search string, you can make an comparison in your search function.</p>\n\n<p>Then in <code>main()</code> you can simply output the movie title at that index within your vector <code>v</code>, e.g.</p>\n\n<pre><code>    std::cout &lt;&lt; \"Please type in what movie you want.\\n\";\n    if (getline (std::cin, WantMovie)) {\n        int index = SearchMovies (v, WantMovie);\n        if (index != -1)    /* validate search and output here */\n            std::cout &lt;&lt; \"You have chosen: \" &lt;&lt; v.at(index).Title &lt;&lt; '\\n';\n        else\n            std::cout &lt;&lt; WantMovie &lt;&lt; \" is not currently in the library.\\n\";\n    }\n</code></pre>\n\n<p>Your search will then work regardless of the case the user uses to type in the search term, e.g.</p>\n\n<pre><code>...\nPlease type in what movie you want.\niron man 3\nYou have chosen: Iron Man 3\n</code></pre>\n\n<p>or</p>\n\n<pre><code>...\nPlease type in what movie you want.\nthor\nYou have chosen: Thor\n</code></pre>\n\n<p>That should get you pointed in the right direction. If you run into additional stumbling blocks, let me know and I'm happy to help further.</p>\n"}], "owner": {"reputation": 1, "user_id": 12139318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/443ea916139382b8e633c86c0b65c5bd?s=128&d=identicon&r=PG&f=1", "display_name": "Deeda66", "link": "https://stackoverflow.com/users/12139318/deeda66"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574272528, "creation_date": 1574266680, "last_edit_date": 1574266985, "question_id": 58958903, "link": "https://stackoverflow.com/questions/58958903/having-trouble-with-importing-data-from-a-file-i-am-getting-an-endless-loop", "title": "Having trouble with importing data from a file. I am getting an endless loop", "body": "<p>I can get my file to load 1 full struct. But when I try to iterate through the file, i have an endless loop and no data is loaded. I have attached my code and the flat file.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\n#include &lt;vector&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\ntypedef struct video_items{\n    string Title;\n    int YOP;\n    string Category;\n    float Gross;\n}video;\n\nvoid LoadMovies (vector&lt;video&gt; &amp;v);\nvoid SearchMovies (vector &lt;video&gt; &amp;v, string s);\n\nint main()\n{\n    vector &lt;video&gt; v;\n\n    LoadMovies(v);\n\n    cout&lt;&lt;\"Total number of movies: \"&lt;&lt;v.size()&lt;&lt;endl;\n\n    for (unsigned int i=0; i&lt;v.size(); ++i) {\n        cout&lt;&lt;\"----------------------------------------------------\"&lt;&lt;endl;\n        cout&lt;&lt;v[i].Title&lt;&lt;endl;\n        cout&lt;&lt;\"Category: \"&lt;&lt;v[i].Category&lt;&lt;endl;\n        cout&lt;&lt;\"Year of Publication: \"&lt;&lt;v[i].YOP&lt;&lt;endl;\n        cout&lt;&lt;\"Gross: \"&lt;&lt;v[i].Gross&lt;&lt;endl;\n        cout&lt;&lt;\"----------------------------------------------------\"&lt;&lt;endl&lt;&lt;endl;\n    }\n\n    string WantMovie;\n    cout&lt;&lt;\"Please type in what movie you want.\"&lt;&lt;endl;\n    cin&gt;&gt;WantMovie;\n    SearchMovies(v,WantMovie);\n\n    return 0;\n}\n\nvoid LoadMovies (vector&lt;video&gt; &amp;v)\n{\n    video L;\n    ifstream myfile;\n    myfile.open (\"Movies.txt\");\n    if (myfile.is_open())\n    {\n        cout &lt;&lt;\"Loading Movie Catalog...\"&lt;&lt;endl&lt;&lt;endl;\n        int i=0;\n        while (!myfile.eof())\n        {\n            myfile.ignore();\n            //cout&lt;&lt;i&lt;&lt;endl&lt;&lt;endl;\n\n            v.push_back(L);\n            getline(myfile,v[i].Title);\n            getline(myfile,v[i].Category);\n            myfile&gt;&gt;v[i].YOP;\n            myfile&gt;&gt;v[i].Gross;\n            i++;\n        }\n        myfile.close();\n    }\n    else cout&lt;&lt;\"Unable to open file.\"&lt;&lt;endl;\n}\n\nvoid SearchMovies (vector &lt;video&gt; &amp;v, string s)\n{\n    s[0] = toupper(s[0]);\n    unsigned int i;\n\n    for (i=0; i&lt;v.size(); i++)\n    {\n        if (v[i].Title.compare(0,s.size(),s)==0)\n        {\n            break;\n        }\n    }\n    if (i &gt;=v.size()){\n        i =0;\n    }\n    switch(i)\n    {\n        case 1:cout&lt;&lt;\"You have chosen \"&lt;&lt;s&lt;&lt;endl;\n        break;\n        default:\n        cout&lt;&lt;\"That movie is not currently in the library, please choose a different one.\"&lt;&lt;endl;\n        break;\n    }\n}\n</code></pre>\n\n<p>First character ignored in flat file.</p>\n\n<p>=========Data File==========</p>\n\n<pre class=\"lang-none prettyprint-override\"><code> Captain America: The First Avenger\nAction, Adventure, Sci-Fi\n2011\n1786.65\nIron Man\nAction, Adventure, Sci-Fi\n2008\n585.2\nThe Incredible Hulk\nAction, Adventure, Sci-Fi\n2008\n134.52\nIron Man 2\nAction, Adventure, Sci-Fi\n2010\n312.43\nThor\nAction, Adventure, Fantasy\n2011\n181.03\nThe Avengers\nAction, Adventure, Sci-Fi\n2012\n623.28\nIron Man 3\nAction, Adventure, Sci-Fi\n2013\n409.01\n</code></pre>\n"}, {"tags": ["c++", "x86", "x86-64", "inline-assembly", "clang++"], "comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1574266556, "post_id": 58958751, "comment_id": 104173040, "body": "What is <i>clang (GCC)</i>?"}, {"owner": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1574266636, "post_id": 58958751, "comment_id": 104173080, "body": "Apple clang version 11.0.0 (clang-1100.0.33.12) Target: x86_64-apple-darwin18.7.0"}, {"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1574267518, "post_id": 58958751, "comment_id": 104173591, "body": "<code>movl $0, -4(%%rbp)</code> only writes the low 32 bits hence the top 32 are random garbage. Also, a 64 bit integer is 8 bytes. So you want <code>-8(%rbp)</code> and <code>-16(%rbp)</code>. Your code is of course broken in other ways, such as overwriting the red zone of the containing function and doesn&#39;t make much sense anyway."}, {"owner": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1574269098, "post_id": 58958751, "comment_id": 104174547, "body": "Thanks and yes, it is working with -8 and -16, but what should I change to be ok?"}], "answers": [{"comments": [{"owner": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1574323833, "post_id": 58961271, "comment_id": 104193957, "body": "Thanks, yes this is correct but what is the red zone that I am modifying in my example? How to fix that?"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1574324588, "post_id": 58961271, "comment_id": 104194349, "body": "@oleg The <a href=\"https://en.wikipedia.org/wiki/Red_zone_(computing)\" rel=\"nofollow noreferrer\">red zone</a> is the 128 bytes immediately below the current RSP. You have to subtract 128 from RSP before using the stack and add 128 back when finished. An example is here: <a href=\"https://stackoverflow.com/a/37503773/3857942\">stackoverflow.com/a/37503773/3857942</a>"}, {"owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "reply_to_user": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1574324667, "post_id": 58961271, "comment_id": 104194394, "body": "You only have to worry about the red zone if you are putting data on the stack in 64-bit code in your inline assembly. The red zone doesn&#39;t exist in 32-bit Linux. In my example I don&#39;t use the stack so I don&#39;t need to concern myself with the red zone."}], "tags": [], "owner": {"reputation": 41564, "user_id": 3857942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hXLnN.jpg?s=128&g=1", "display_name": "Michael Petch", "link": "https://stackoverflow.com/users/3857942/michael-petch"}, "is_accepted": true, "score": 5, "last_activity_date": 1574277176, "last_edit_date": 1574277176, "creation_date": 1574275232, "answer_id": 58961271, "question_id": 58958751, "link": "https://stackoverflow.com/questions/58958751/creating-a-c-pre-increment-operation-with-clang-inline-assembly/58961271#58961271", "title": "Creating a C++ pre-increment operation with CLANG inline assembly", "body": "<p>Your code is overly complex and it appears you might have looked at compiler generated code from elsewhere to create an answer.</p>\n\n<p>What does <code>b=++a;</code> do? It first increments <code>a</code> and then assigns that value to <code>b</code>. In such an expression <code>a</code> is both used as input and output. The value of <code>a</code> is read, incremented by 1, saved and the result copied to <code>b</code>. With GCC's <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html\" rel=\"noreferrer\">extended inline assembly</a> you can treat <code>a</code> as an input and output operand using the <code>+</code> <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Modifiers.html#Modifiers\" rel=\"noreferrer\">modifier</a> on the <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Constraints.html#Constraints\" rel=\"noreferrer\">constraint</a>. <code>b</code> can be used with an output only operand using the <code>=</code> modifier on the constraint. The <a href=\"https://www.felixcloutier.com/x86/inc\" rel=\"noreferrer\"><code>INC</code></a> instruction can be used to increment <code>a</code> and the <code>MOV</code> instruction to copy that value <code>b</code>.</p>\n\n<p>The inline assembly could simply look like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing std::endl;\nusing std::cout;\n\nint main()\n{\n    uint64_t a = 0;\n    uint64_t b = 0;\n\n    asm (\"inc %0\\n\\t\"\n         \"mov %0, %1\"\n         : \"+r\" (a), \"=r\" (b)\n    );\n    cout &lt;&lt; \"a = \" &lt;&lt; a &lt;&lt; \", b = \" &lt;&lt; b &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>The output should be:</p>\n\n<blockquote>\n  <p>a = 1, b = 1</p>\n</blockquote>\n\n<hr>\n\n<p><strong>Note</strong>: Since there are no side effects other than the registers we told the compiler we'd modify it isn't necessary to use <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html\" rel=\"noreferrer\"><code>volatile</code></a> on the <code>asm</code> statement.</p>\n"}], "owner": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 58961271, "answer_count": 1, "score": 2, "last_activity_date": 1574277176, "creation_date": 1574266220, "last_edit_date": 1574274241, "question_id": 58958751, "link": "https://stackoverflow.com/questions/58958751/creating-a-c-pre-increment-operation-with-clang-inline-assembly", "title": "Creating a C++ pre-increment operation with CLANG inline assembly", "body": "<p>I am trying to do the equivalent of <code>b = ++a;</code> with inline assembly, but I'm getting strange values in my variables after executing the code. I am using clang++ (g++ compatible) to compile inline assembly. Here is what I get so far:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing std::endl;\nusing std::cout;\n\nint main()\n{\n    uint64_t a = 0;\n    uint64_t b = 0;\n\n    asm volatile(\n    \"pushq %%rbp;\"\n    \"movq %%rsp, %%rbp;\"\n    \"movl $0, -4(%%rbp);\"\n    \"movl $0, -8(%%rbp);\"\n    \"addq $1, -4(%%rbp);\"\n    \"mov -4(%%rbp), %%rax;\"\n    \"mov %%rax, -8(%%rbp);\"\n    \"mov -4(%%rbp), %0;\"\n    \"mov -8(%%rbp), %1;\"\n    \"movq %%rbp, %%rsp;\"\n    \"popq %%rbp\"\n    :\"=r\" (a), \"=r\" (b)\n    :\n    :\"%rax\", \"%rbp\", \"%rsp\"\n    );\n    cout &lt;&lt; \"a = \" &lt;&lt; a &lt;&lt; \", b = \" &lt;&lt; b &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "64-bit", "application-verifier"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1574267275, "post_id": 58958744, "comment_id": 104173473, "body": "Interesting question, I suspect that individual heap allocations are limited to some nominal limit (could be 4GB but I can&#39;t find any reference on this) but that the heap pool limit is dependent on OS version. You could do what Raymond suggests and reserve the first 4GB on init to force further allocations into the above 4GB address space if setting that flag and rebooting is too much of a pain. Also doesn&#39;t surprise me that some of these options and flags may not work, the latest version of app verifier doesn&#39;t work for me, had to use an older version"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1574273244, "post_id": 58958744, "comment_id": 104176746, "body": "Running on Win8.1 or higher is the easiest way, those versions always allocate above 4GB.  Looks like you&#39;ve got Win10 so you&#39;re good to go."}, {"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "reply_to_user": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1574282618, "post_id": 58958744, "comment_id": 104181202, "body": "@MarekR: well, there used to be a time when people misused parts of pointers to transfer an additional bit in the highest position of a pointer. That&#39;s why we have all that stuff like LargeAddressAware."}], "owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1575039101, "creation_date": 1574266195, "last_edit_date": 1575039101, "question_id": 58958744, "link": "https://stackoverflow.com/questions/58958744/force-heap-allocations-above-4-gb", "title": "Force heap allocations above 4 GB", "body": "<p>Colleagues convert a 32 bit C++ application to 64 Bit. For testing purposes, the idea is now to instruct the heap manager to return addresses in the 64 bit range only.</p>\n\n<p>Searching the Internet for solutions does not seem to give very reliable results:</p>\n\n<ul>\n<li><p><a href=\"https://social.msdn.microsoft.com/Forums/vstudio/en-US/89742b55-20c6-4f4b-8d0c-d917c2c877bd/64-bit-development-how-to-force-malloc-to-return-addressgt232-in-debug-mode?forum=vcgeneral\" rel=\"nofollow noreferrer\">MSDN forums</a> suggest to use <code>VirtualAlloc()</code>before the CRT initializes. However, I can't see why that should not return a pointer to a high address already, leaving the bottom 4 GB empty.</p></li>\n<li><p>Raymond Chen says, <a href=\"https://devblogs.microsoft.com/oldnewthing/20161014-00/?p=94515\" rel=\"nofollow noreferrer\">Windows 7 has a switch called <code>Allocation\u00adPreference</code></a>  which can be set to <code>MEM_TOP_DOWN</code>. However, that applies to the whole system and thus requires a reboot, which is inconvenient. (also described <a href=\"https://docs.microsoft.com/en-us/windows/win32/memory/4-gigabyte-tuning\" rel=\"nofollow noreferrer\">on MSDN</a>).</p></li>\n</ul>\n\n<p>I dug around in application verifier and found some interesting options in the properties of the <em>Heaps</em> entry:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Ykvgh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ykvgh.png\" alt=\"Application verifier\"></a></p>\n\n<p>As you can see I have modified <em>SizeStart</em> and <em>SizeEnd</em> as well as <em>AddrStart</em> and <em>AddrEnd</em>. </p>\n\n<p>Unfortunately, </p>\n\n<ol>\n<li>these text boxes do not accept 64 bit addresses</li>\n<li>these settings do not seem to have an effect</li>\n</ol>\n\n<p>While the addresses are above the entered values, the size of the heaps has not changed:</p>\n\n<pre><code>Termination on corruption : ENABLED\n          Heap     Flags   Reserv  Commit  Virt   Free  List   UCR  Virt  Lock  Fast \n                            (k)     (k)    (k)     (k) length      blocks cont. heap \n-------------------------------------------------------------------------------------\n000001e0aa590000 00000002    2040   1528   2040      3     1     2    0      0      \n000001e0aa440000 00001002    1080    248   1080      2     2     2    0      0      \n000001e0aa410000 00008000      64      4     64      2     1     1    0      0      \n000001e0aa520000 00001002    1080    104   1080      1     2     2    0      0      \n000001e0af2f0000 00001002      60     60     60      6     1     1    0      0      \n-------------------------------------------------------------------------------------\n</code></pre>\n\n<p>Do these application verifier settings still work? How to apply them successfully?</p>\n"}, {"tags": ["c++", "arrays", "templates", "c++17", "template-argument-deduction"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1574267234, "post_id": 58958689, "comment_id": 104173442, "body": "You might take inspiration from <a href=\"https://stackoverflow.com/questions/31549398/c-eigen-initialize-static-matrix\">Eigen</a> (but they don&#39;t provide a way to have the syntax you&#39;re looking for either)."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1574266753, "creation_date": 1574266753, "answer_id": 58958922, "question_id": 58958689, "link": "https://stackoverflow.com/questions/58958689/how-to-deduce-the-size-of-a-multidimensional-array-in-a-curly-brace-expression-o/58958922#58958922", "title": "how to deduce the size of a multidimensional array in a curly brace expression of a function call with templates", "body": "<p>You cannot deduce multi dimensional array bounds from nested <code>{{}}</code>.</p>\n\n<p>You could deduce it by adding some tokens.</p>\n\n<pre><code>using namespace std;\nauto arr = array{ array{1,2}, array{3,4} };\n\nfor (auto row : arr) {\n    for (auto e : row) {\n        std::cout &lt;&lt; e &lt;&lt; \",\";\n    }\n    std::cout &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/6bb2c12296ca0495\" rel=\"nofollow noreferrer\">Live example</a>.</p>\n\n<p>The <code>array</code> deduction guide tears apart the <code>{}</code> expression following and deduces the type of the <code>array</code> template.</p>\n\n<p>So:</p>\n\n<pre><code>make_tensor(a{a{1,2},a{3,4}})\n</code></pre>\n\n<p>is possible, or even</p>\n\n<pre><code>tensor{ tensor{1,2}, tensor{1,2} }\n</code></pre>\n\n<p>as <code>make</code> functions are a bit pass\u00e9.</p>\n"}], "owner": {"reputation": 59, "user_id": 5709287, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9e5efcec5f50ab86712a49bbd2da5ca?s=128&d=identicon&r=PG&f=1", "display_name": "Tarirah", "link": "https://stackoverflow.com/users/5709287/tarirah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 58958922, "answer_count": 1, "score": 3, "last_activity_date": 1574266753, "creation_date": 1574266028, "last_edit_date": 1574266154, "question_id": 58958689, "link": "https://stackoverflow.com/questions/58958689/how-to-deduce-the-size-of-a-multidimensional-array-in-a-curly-brace-expression-o", "title": "how to deduce the size of a multidimensional array in a curly brace expression of a function call with templates", "body": "<p>I'm currently writing a typesafe compiletime-enabled tensor class, which boils down to</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T, int... Sizes&gt;\nstruct tensor {\n  T elements[(Sizes * ...)];\n  auto ptr() {return elements;}\n  auto size() {return (Sizes * ...);}\n\n  using value_type = T;\n};\n\n</code></pre>\n\n<p>I wanted to write a method that allows to create a tensor with arrays as an expression, like that:</p>\n\n<p><code>make_tensor({1,2,3,4})</code> or <code>make_tensor({{1,2},{3,4}})</code>, giving a vector and a matrix. my <code>make_tensor</code> function currently looks like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;template&lt;typename, int...&gt; class Fill, typename Type, int... Sizes&gt;\nstruct array_to_index {\n  using type = Fill&lt;Type, Sizes...&gt;;\n};\n\ntemplate&lt;template&lt;typename, int...&gt; class Fill, typename Type, int Size, int... Sizes&gt;\nstruct array_to_index&lt;Fill, Type[Size], Sizes...&gt; {\n  using type = typename array_to_index&lt;Fill, Type, Sizes..., Size&gt;::type;\n};\n\ntemplate&lt;template&lt;typename, int...&gt; class Fill, typename Type&gt;\nusing array_to_index_t = typename array_to_index&lt;Fill, Type&gt;::type;\n\ntemplate&lt;typename Type, int Size&gt;\nauto make_tensor(const Type (&amp;arr)[Size]) {\n  using tensor_t = array_to_index_t&lt;tensor, Type[Size]&gt;;\n  tensor_t tensor;\n  using ptr_t = const typename tensor_t::value_type *;\n\n  for(int i = 0; i &lt; tensor.size(); ++i)\n    tensor.elements[i] = reinterpret_cast&lt;ptr_t&gt;(arr)[i];\n\n  return tensor;\n}\n</code></pre>\n\n<p>I can call this with a multidimensional array if I assign it first, but the nice syntax doesn't work:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main() {\n  //auto matrix = make_tensor({{0,1},{2,3},{4,5}}); // doesn't work\n  int arr[][2] = {{0,1},{2,3},{4,5}};\n  auto other = make_tensor(arr); // works\n  assert(other.elements[3] == 3);\n}\n</code></pre>\n\n<p>With what I gather from this <a href=\"https://stackoverflow.com/questions/34972172/failed-to-deduce-bounds-from-initializer-for-multi-dimensional-arrays/34973290#34973290\">Failed to deduce bounds from initializer for multi-dimensional arrays</a> question, my approach won't work. Is there any other way this deduction is possible (e.g with initializer lists)?</p>\n"}, {"tags": ["c++", "windows", "timestamp", "std"], "comments": [{"owner": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "edited": false, "score": 0, "creation_date": 1574266145, "post_id": 58958655, "comment_id": 104172791, "body": "have you tried to use std::chrono? i recommend using this header only library in addition to it. <a href=\"https://github.com/HowardHinnant/date/blob/master/include/date/date.h\" rel=\"nofollow noreferrer\">github.com/HowardHinnant/date/blob/master/include/date/date.&zwnj;&#8203;h</a>"}, {"owner": {"reputation": 5, "user_id": 8216206, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sJEq-GPQHLI/AAAAAAAAAAI/AAAAAAAAACs/uGfBuqNOea0/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0427\u0438\u0441\u0442\u043e\u0431\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/8216206/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%a7%d0%b8%d1%81%d1%82%d0%be%d0%b1%d0%b0%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "edited": false, "score": 0, "creation_date": 1574266229, "post_id": 58958655, "comment_id": 104172846, "body": "I tried to find a way using chrono, but failed. How can I use it with tm?"}, {"owner": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "edited": false, "score": 0, "creation_date": 1574266491, "post_id": 58958655, "comment_id": 104173011, "body": "<a href=\"https://stackoverflow.com/questions/16773285/how-to-convert-stdchronotime-point-to-stdtm-without-using-time-t\" title=\"how to convert stdchronotime point to stdtm without using time t\">stackoverflow.com/questions/16773285/&hellip;</a>"}, {"owner": {"reputation": 5, "user_id": 8216206, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sJEq-GPQHLI/AAAAAAAAAAI/AAAAAAAAACs/uGfBuqNOea0/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0427\u0438\u0441\u0442\u043e\u0431\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/8216206/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%a7%d0%b8%d1%81%d1%82%d0%be%d0%b1%d0%b0%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "edited": false, "score": 0, "creation_date": 1574266759, "post_id": 58958655, "comment_id": 104173156, "body": "So your advice is to use days_from_civil function?"}, {"owner": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "edited": false, "score": 0, "creation_date": 1574267042, "post_id": 58958655, "comment_id": 104173318, "body": "look for howard hinnant on youtube he has really good examples on how to use std::chrono, and date time manipulation."}, {"owner": {"reputation": 5, "user_id": 8216206, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sJEq-GPQHLI/AAAAAAAAAAI/AAAAAAAAACs/uGfBuqNOea0/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0427\u0438\u0441\u0442\u043e\u0431\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/8216206/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%a7%d0%b8%d1%81%d1%82%d0%be%d0%b1%d0%b0%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 1145, "user_id": 2509099, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6b943869aa8e032e04aae5d8b637d47c?s=128&d=identicon&r=PG", "display_name": "rafael gonzalez", "link": "https://stackoverflow.com/users/2509099/rafael-gonzalez"}, "edited": false, "score": 0, "creation_date": 1574267797, "post_id": 58958655, "comment_id": 104173791, "body": "Could you post the answer (want mark it as solution)?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1574342741, "post_id": 58958655, "comment_id": 104205130, "body": "Good answer. ;-)  Question:  Are your input dates UTC, or associated with some time zone?"}, {"owner": {"reputation": 5, "user_id": 8216206, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sJEq-GPQHLI/AAAAAAAAAAI/AAAAAAAAACs/uGfBuqNOea0/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0427\u0438\u0441\u0442\u043e\u0431\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/8216206/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%a7%d0%b8%d1%81%d1%82%d0%be%d0%b1%d0%b0%d0%b5%d0%b2"}, "edited": false, "score": 0, "creation_date": 1574343650, "post_id": 58958655, "comment_id": 104205706, "body": "UTC, all is working now. My hand written function somehow lost 29/02. Thanks for your videos, it is really helpful!"}], "owner": {"reputation": 5, "user_id": 8216206, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-sJEq-GPQHLI/AAAAAAAAAAI/AAAAAAAAACs/uGfBuqNOea0/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0427\u0438\u0441\u0442\u043e\u0431\u0430\u0435\u0432", "link": "https://stackoverflow.com/users/8216206/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%a7%d0%b8%d1%81%d1%82%d0%be%d0%b1%d0%b0%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574265890, "creation_date": 1574265890, "question_id": 58958655, "link": "https://stackoverflow.com/questions/58958655/how-to-get-negative-timestamp", "title": "How to get negative timestamp?", "body": "<p>I need to convert dates before 1970 to timestamps. I have a correct tm structure but Microsoft's std library mktime can't convert it to negative timestamps. Is there any standard way (no Qt, WinAPI) to get it?</p>\n"}, {"tags": ["c++", "constructor", "initialization", "language-lawyer", "member-initialization"], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574266884, "post_id": 58958929, "comment_id": 104173230, "body": "perhaps you missed &quot;However, if these operations are performed in a ctor-initializer (or in a function called directly or indirectly from a ctor-initializer) before all the mem-initializers for base classes have completed, the program has undefined behavior.&quot;. Better include the text in the answer"}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574266961, "post_id": 58958929, "comment_id": 104173272, "body": "I can copy the text into the answer, but it stands that this should have no effect on your example, since it has no base classes. Or do I miss something while reading this?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574267069, "post_id": 58958929, "comment_id": 104173338, "body": "oh sorry I missed the base class thingy. Nevertheless answers should be selfcontained"}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574267391, "post_id": 58958929, "comment_id": 104173526, "body": "No harm done. Thanks for the tipp, I am still a bit new to this whole thing^^"}], "tags": [], "owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "is_accepted": false, "score": 1, "last_activity_date": 1574267249, "last_edit_date": 1574267249, "creation_date": 1574266784, "answer_id": 58958929, "question_id": 58958637, "link": "https://stackoverflow.com/questions/58958637/is-it-allowed-to-call-a-non-static-member-function-in-a-default-member-initializ/58958929#58958929", "title": "Is it allowed to call a non-static member function in a default member initializer?", "body": "<p>The standard says <a href=\"http://eel.is/c++draft/class.init#class.base.init-16\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>Member functions (including virtual member functions, [class.virtual]) can be called for an object under construction. Similarly, an object under construction can be the operand of the typeid operator ([expr.typeid]) or of a dynamic_\u00adcast ([expr.dynamic.cast]). However, if these operations are performed in a ctor-initializer (or in a function called directly or indirectly from a ctor-initializer) before all the mem-initializers for base classes have completed, the program has undefined behavior.</p>\n</blockquote>\n\n<p>Since you have no base classes, the member functions can be called for <code>broken</code> even if it is under construction. <s>Your <code>a</code> will be initialized with indeterminate value.</s></p>\n\n<p>I was a bit premature. As seen in the other answer, there is the problem, that the function reads from an unitialized value which is undefined behavior. So not the call of this function in itself, but rather what it does is UB.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1574376395, "last_edit_date": 1574376395, "creation_date": 1574266875, "answer_id": 58958958, "question_id": 58958637, "link": "https://stackoverflow.com/questions/58958637/is-it-allowed-to-call-a-non-static-member-function-in-a-default-member-initializ/58958958#58958958", "title": "Is it allowed to call a non-static member function in a default member initializer?", "body": "<p>As you found, this is legal, but brittle and not recommended.  When you specify default initializers for class members those are just syntactic sugar for use this value in the class member initializer list.  So, if we look at when we can call a member function we find <a href=\"https://timsong-cpp.github.io/cppwp/class.cdtor#1\" rel=\"nofollow noreferrer\">[class.cdtor]/1</a> and <a href=\"https://timsong-cpp.github.io/cppwp/class.cdtor#4\" rel=\"nofollow noreferrer\">[class.cdtor]/4</a> which states:</p>\n\n<blockquote>\n  <p>1) For an object with a non-trivial constructor, referring to any non-static member or base class of the object <strong>before the constructor begins execution results in undefined behavior</strong>. For an object with a non-trivial destructor, referring to any non-static member or base class of the object after the destructor finishes execution results in undefined behavior.</p>\n  \n  <p>4) Member functions, including virtual functions ([class.virtual]), can be called during construction or destruction ([class.base.init]).[...]</p>\n</blockquote>\n\n<p><sup>emphasis mine</sup></p>\n\n<p>Since the constructor has begun executing, and we are allowed to call member functions, we are not in UB land.</p>\n\n<p>The next thing we have to consider is construction order, since the members depend on that.  That information is in <a href=\"https://timsong-cpp.github.io/cppwp/class.base.init#13\" rel=\"nofollow noreferrer\">[class.base.init]/13</a></p>\n\n<blockquote>\n  <p>Then, non-static data members are initialized in the order they were declared in the class definition (again regardless of the order of the mem-initializers).</p>\n</blockquote>\n\n<p>So, the members are constructed in the order they are declared in the class which means in your first example you refer to <code>a</code> after it has been initialized so you are not in UB land.  </p>\n\n<p>In your second example you are referring to an object that has not yet been initialized and reading an uninitialized object's value is undefined behavior.</p>\n"}], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "accepted_answer_id": 58958958, "answer_count": 2, "score": 2, "last_activity_date": 1574376395, "creation_date": 1574265842, "last_edit_date": 1574373977, "question_id": 58958637, "link": "https://stackoverflow.com/questions/58958637/is-it-allowed-to-call-a-non-static-member-function-in-a-default-member-initializ", "title": "Is it allowed to call a non-static member function in a default member initializer?", "body": "<p>Consider this class:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct foo {\n    int a = 42;\n    int b = bar();\n    int bar() { return a; }\n};\n\nint main(){\n    foo f;\n    std::cout &lt;&lt; f.a &lt;&lt; \" \" &lt;&lt; f.b;\n}\n</code></pre>\n\n<p>It prints the expected <code>42 42</code>. <strong>Is it allowed by the standard to call a member function in a default member initializer?</strong></p>\n\n<p>The following I would expect to be undefined:</p>\n\n<pre><code>struct broken {\n    int a = bar();\n    int b = 42;       \n    int bar() { return b; }\n};\n</code></pre>\n\n<p>Unfortunately it does <a href=\"https://wandbox.org/permlink/oNR1orwdVQthr7F6\" rel=\"nofollow noreferrer\">compile without warnings</a>.</p>\n"}, {"tags": ["c++", "initialization", "valgrind"], "comments": [{"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 0, "creation_date": 1574285682, "post_id": 58958630, "comment_id": 104182511, "body": "please don&#39;t use typedef in c++. also the _t suffix is reserved."}], "answers": [{"tags": [], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "is_accepted": false, "score": 0, "last_activity_date": 1574285776, "last_edit_date": 1574285776, "creation_date": 1574285470, "answer_id": 58963692, "question_id": 58958630, "link": "https://stackoverflow.com/questions/58958630/valgrind-complains-about-uninitialized-bytes-on-c-structure/58963692#58963692", "title": "valgrind complains about uninitialized bytes on C++ structure", "body": "<blockquote>\n  <p>What is the right way to initialize those padding bytes so that valgrind doesn't complain?</p>\n</blockquote>\n\n<p>I'm not sure about 'the right way' to do this, but there are several possibilities.</p>\n\n<ol>\n<li>you create members for the padding and initialize them</li>\n</ol>\n\n<pre><code>struct bar\n{\n  size_t point_name_size;\n  char n[MAX];\n  bool q;\n  bool unused[7] ={};\n};\n</code></pre>\n\n<p>This 'typically' has the same size as your struct on a 64 bit system. See <a href=\"http://coliru.stacked-crooked.com/a/5c2bcf9d3d2a8ca3\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<ol start=\"2\">\n<li>you fill yourself with 0's if you are trivially copyable</li>\n</ol>\n\n<pre><code>struct bar\n{\n  bar()\n  {\n    static_assert(std::is_trivially_copyable_v&lt;bar&gt;);\n    memset(this, 0, sizeof(bar));      \n  }\n\n  size_t point_name_size;\n  char n[MAX];\n  bool q;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 637, "user_id": 4071435, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/598ac8af735dd5a8892220bba350cad4?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Grinberg", "link": "https://stackoverflow.com/users/4071435/paul-grinberg"}, "edited": false, "score": 0, "creation_date": 1574458134, "post_id": 58964386, "comment_id": 104254297, "body": "I agree that this is the correct way. However, the expense of serialization and deserialization was too much in my real application, where the data was not actually written to a file, but rather communicated via a pipe between threads. So, my solution was to change the struct to a <code>union { struct {} unpacked; void * packed }</code>. This way, I could initialize the <code>packed</code> pointer during union constructor, memset to zero based on <code>sizeof(unpacked)</code> and my serializer was the <code>packed</code> pointer :-)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 637, "user_id": 4071435, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/598ac8af735dd5a8892220bba350cad4?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Grinberg", "link": "https://stackoverflow.com/users/4071435/paul-grinberg"}, "edited": false, "score": 0, "creation_date": 1574459179, "post_id": 58964386, "comment_id": 104254631, "body": "@PaulGrinberg Why would you communicate with a pipe between threads when threads share all memory?"}, {"owner": {"reputation": 637, "user_id": 4071435, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/598ac8af735dd5a8892220bba350cad4?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Grinberg", "link": "https://stackoverflow.com/users/4071435/paul-grinberg"}, "edited": false, "score": 0, "creation_date": 1574547253, "post_id": 58964386, "comment_id": 104273113, "body": "I know that threads share memory. I needed to pass data to and trigger an event in a libev event loop. One of the easiest ways to do that was to use a pipe with a libev async event doing nonblocking select on the file handle."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 637, "user_id": 4071435, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/598ac8af735dd5a8892220bba350cad4?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Grinberg", "link": "https://stackoverflow.com/users/4071435/paul-grinberg"}, "edited": false, "score": 0, "creation_date": 1574568262, "post_id": 58964386, "comment_id": 104276394, "body": "@PaulGrinberg That&#39;s exactly what mutexes and condition variables are for."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 3, "last_activity_date": 1574289001, "creation_date": 1574289001, "answer_id": 58964386, "question_id": 58958630, "link": "https://stackoverflow.com/questions/58958630/valgrind-complains-about-uninitialized-bytes-on-c-structure/58964386#58964386", "title": "valgrind complains about uninitialized bytes on C++ structure", "body": "<p>The right way to serialize a data structure into a chunk of bytes to be written to mass storage is to write a serializer that encodes the data into the desired format. Relying on things not specified by the standard (such as the endianness or type sizes) is simply wrong.</p>\n\n<p>There are plenty of serialization libraries available.</p>\n"}], "owner": {"reputation": 637, "user_id": 4071435, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/598ac8af735dd5a8892220bba350cad4?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Grinberg", "link": "https://stackoverflow.com/users/4071435/paul-grinberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 58964386, "answer_count": 2, "score": 1, "last_activity_date": 1574289001, "creation_date": 1574265814, "last_edit_date": 1574266383, "question_id": 58958630, "link": "https://stackoverflow.com/questions/58958630/valgrind-complains-about-uninitialized-bytes-on-c-structure", "title": "valgrind complains about uninitialized bytes on C++ structure", "body": "<p>I have distilled by question down to a very simple example where I have a structure constructor that is initializing everything, yet valgrind complains about uninitialized bytes. The culprit seems to be the boolean member of the class, which causes padding bytes to be inserted before the size_t member. What is the right way to initialize those padding bytes so that valgrind doesn't complain?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n\n#define MAX 128\n\ntypedef struct foo_struct\n{\n  foo_struct(const std::string&amp; name, bool q = true) : q(q)\n  {\n    if (name.size() &gt; MAX)\n    {\n      throw std::runtime_error(\"too big\");\n    }\n    point_name_size = name.size();\n    memset(n, 0, sizeof(n));\n    memcpy(n, name.c_str(), name.size());\n  }\n\n  bool q;\n  size_t point_name_size;\n  char n[MAX];\n} foo_t;\n\nint main()\n{\n  int fd = open(\"/tmp/foo\", O_WRONLY | O_CREAT, 0666);\n  if (-1 == fd)\n  {\n    throw std::runtime_error(\"Can't create File Descriptor: \" + std::string(strerror(errno)));\n  }\n\n  const foo_t f(\"hello\");\n  ssize_t written = write(fd, &amp;f, sizeof(f));\n  std::cout &lt;&lt; \"wrote \" &lt;&lt; written &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre>\n\n<p>Compile and run with</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>g++ try.cpp &amp;&amp; valgrind --tool=memcheck --leak-check=yes --show-reachable=yes --num-callers=20  ./a.out\n</code></pre>\n\n<p>The valgrind error is </p>\n\n<pre><code>==11790== Syscall param write(buf) points to uninitialised byte(s)\n==11790==    at 0x54ED154: write (write.c:27)\n==11790==    by 0x1093DE: main (in /home/gri6507/tmp/a.out)\n==11790==  Address 0x1fff000251 is on thread 1's stack\n==11790==  in frame #1, created by main (???:)\n</code></pre>\n"}, {"tags": ["c++", "cmake", "conan", "parasoft"], "comments": [{"owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "edited": false, "score": 3, "creation_date": 1574265771, "post_id": 58958526, "comment_id": 104172562, "body": "Please do not post images of the logs, or config files. Post the <b>actual text</b> in your question post."}, {"owner": {"reputation": 1993, "user_id": 2036859, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/N1Esm.jpg?s=128&g=1", "display_name": "uilianries", "link": "https://stackoverflow.com/users/2036859/uilianries"}, "edited": false, "score": 0, "creation_date": 1574270641, "post_id": 58958526, "comment_id": 104175380, "body": "take a look on CMake docs about coverage: <a href=\"https://gitlab.kitware.com/cmake/community/wikis/doc/ctest/Coverage\" rel=\"nofollow noreferrer\">gitlab.kitware.com/cmake/community/wikis/doc/ctest/Coverage</a>"}, {"owner": {"reputation": 81, "user_id": 1965555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad4bbba4f8a51e1d5b94b5055e1dac9?s=128&d=identicon&r=PG", "display_name": "User001", "link": "https://stackoverflow.com/users/1965555/user001"}, "reply_to_user": {"reputation": 1993, "user_id": 2036859, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/N1Esm.jpg?s=128&g=1", "display_name": "uilianries", "link": "https://stackoverflow.com/users/2036859/uilianries"}, "edited": false, "score": 0, "creation_date": 1574322255, "post_id": 58958526, "comment_id": 104193239, "body": "@uilianries But this link does not help my situation to prepend compiler with an executable. The link is talking about totally different tool. But thanks for replying."}, {"owner": {"reputation": 1993, "user_id": 2036859, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/N1Esm.jpg?s=128&g=1", "display_name": "uilianries", "link": "https://stackoverflow.com/users/2036859/uilianries"}, "edited": false, "score": 0, "creation_date": 1574337356, "post_id": 58958526, "comment_id": 104202025, "body": "The problem is that CMake is not able to deal to your command. Conan can&#39;t solve it because CXX is consumed directly by CMake."}, {"owner": {"reputation": 81, "user_id": 1965555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad4bbba4f8a51e1d5b94b5055e1dac9?s=128&d=identicon&r=PG", "display_name": "User001", "link": "https://stackoverflow.com/users/1965555/user001"}, "edited": false, "score": 0, "creation_date": 1574340774, "post_id": 58958526, "comment_id": 104203971, "body": "Any idea how we could acheive this CMake? This would help me a lot."}, {"owner": {"reputation": 87, "user_id": 3290204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/124e2c51ec2f05a76d94e79fd466645e?s=128&d=identicon&r=PG", "display_name": "Jean-Mathieu Vermosen", "link": "https://stackoverflow.com/users/3290204/jean-mathieu-vermosen"}, "edited": false, "score": 0, "creation_date": 1574350541, "post_id": 58958526, "comment_id": 104210093, "body": "is the CXX flag identical during the configuration step ?"}], "owner": {"reputation": 81, "user_id": 1965555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad4bbba4f8a51e1d5b94b5055e1dac9?s=128&d=identicon&r=PG", "display_name": "User001", "link": "https://stackoverflow.com/users/1965555/user001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574266217, "creation_date": 1574265467, "last_edit_date": 1574266217, "question_id": 58958526, "link": "https://stackoverflow.com/questions/58958526/cxx-cmake-compiler-prefix-with-executable-not-working", "title": "CXX CMake compiler prefix with executable not working", "body": "<p>I am following Parasoft code coverage to run it on my source code : <a href=\"https://docs.parasoft.com/display/CPPTEST1040/Instrumenting+and+Building+Instrumented+Source+Code\" rel=\"nofollow noreferrer\">https://docs.parasoft.com/display/CPPTEST1040/Instrumenting+and+Building+Instrumented+Source+Code</a></p>\n\n<p>I have defined CXX as an environment variable in my new conan profile.</p>\n\n<pre><code>[env]\nCXX=\"cpptestcc -compiler gcc_5-64 -line-coverage -workspace /home/test/proj -- c++\"\n</code></pre>\n\n<p>As I wanted to run the Parasoft code coverage on my Conan based project.</p>\n\n<pre><code>conan install . -pr=myprofile\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/QmENU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QmENU.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>conan build . \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Mnb1A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Mnb1A.png\" alt=\"enter image description here\"></a></p>\n\n<p>The problem is that, I am not able to prepend the CXX compiler with parasoft code coverage. Running into CXX compiler broken as it is not taking the complete CXX as defined in the conan profile.</p>\n\n<p>I have seen lot of links in stackoverflow related to this: <a href=\"https://stackoverflow.com/questions/15897370/how-to-prefix-cmake-compiler\">How to prefix CMake Compiler?</a></p>\n\n<p>Nothing works in my case. Please help me in defining the CXX with an executable prepended to CXX.</p>\n\n<p>Thanks a lot.</p>\n"}, {"tags": ["c++", "vector", "convolution", "complex-numbers"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 12343054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c34df48664c95da85b46b9670d943b1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12343054/alex"}, "edited": false, "score": 0, "creation_date": 1574337893, "post_id": 58959556, "comment_id": 104202348, "body": "Thanks, this is helpful. But this is for the full convolution case, I&#39;d like to output for the same size as my input signal."}, {"owner": {"reputation": 45, "user_id": 12343054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c34df48664c95da85b46b9670d943b1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12343054/alex"}, "edited": false, "score": 0, "creation_date": 1574338719, "post_id": 58959556, "comment_id": 104202817, "body": "also, this is for 1D convolution, in my case because I have complex vector with real and imaginary parts, i&#39;d assume I need 2D convolution?"}, {"owner": {"reputation": 1557, "user_id": 1756939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DU0b6.jpg?s=128&g=1", "display_name": "AndrewBloom", "link": "https://stackoverflow.com/users/1756939/andrewbloom"}, "reply_to_user": {"reputation": 45, "user_id": 12343054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c34df48664c95da85b46b9670d943b1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12343054/alex"}, "edited": false, "score": 0, "creation_date": 1574343765, "post_id": 58959556, "comment_id": 104205782, "body": "@Alex sorry but i don&#39;t get what you mean by 2D correlation. My answer was targeted to your original unedited question. Do you have any math reference? as per <a href=\"https://uk.mathworks.com/help/signal/ref/xcorr2.html\" rel=\"nofollow noreferrer\">uk.mathworks.com/help/signal/ref/xcorr2.html</a> 2d correlation is between matrices. So if you have vectors, that doesn&#39;t apply."}, {"owner": {"reputation": 45, "user_id": 12343054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c34df48664c95da85b46b9670d943b1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12343054/alex"}, "edited": false, "score": 0, "creation_date": 1574346571, "post_id": 58959556, "comment_id": 104207635, "body": "apologies, I was confused whether I needed correlation or convolution. I can confirm I need 2D convolution as described by <a href=\"https://uk.mathworks.com/help/matlab/ref/conv2.html?s_tid=doc_ta\" rel=\"nofollow noreferrer\">uk.mathworks.com/help/matlab/ref/conv2.html?s_tid=doc_ta</a>"}, {"owner": {"reputation": 45, "user_id": 12343054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c34df48664c95da85b46b9670d943b1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12343054/alex"}, "edited": false, "score": 0, "creation_date": 1574346628, "post_id": 58959556, "comment_id": 104207669, "body": "but because I have complex vector, this is split (real,imag)"}, {"owner": {"reputation": 1557, "user_id": 1756939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DU0b6.jpg?s=128&g=1", "display_name": "AndrewBloom", "link": "https://stackoverflow.com/users/1756939/andrewbloom"}, "reply_to_user": {"reputation": 45, "user_id": 12343054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c34df48664c95da85b46b9670d943b1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12343054/alex"}, "edited": false, "score": 0, "creation_date": 1574360523, "post_id": 58959556, "comment_id": 104215503, "body": "On the link you posted there&#39;s the formula for the 2D convolution, it will be easy to implement as I did for 1D. I&#39;m still doubtful you need 2D convolution though, my sixth sense tells me doesn&#39;t make much sense with your input."}, {"owner": {"reputation": 45, "user_id": 12343054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c34df48664c95da85b46b9670d943b1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12343054/alex"}, "edited": false, "score": 0, "creation_date": 1574433574, "post_id": 58959556, "comment_id": 104243204, "body": "The problem I&#39;m having is I&#39;d like to do &#39;same size&#39; convolution and 1D doesn&#39;t do that. I have a signal of length 101 and a filter of length 101. I&#39;d like my convolution output to be length 101, but 1D gives me a length of 201: <code>size(signal)+size(filter)-1</code>. Simply changing the length of the output vector in initialisation doesn&#39;t give me the correct values"}, {"owner": {"reputation": 1557, "user_id": 1756939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DU0b6.jpg?s=128&g=1", "display_name": "AndrewBloom", "link": "https://stackoverflow.com/users/1756939/andrewbloom"}, "reply_to_user": {"reputation": 45, "user_id": 12343054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c34df48664c95da85b46b9670d943b1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12343054/alex"}, "edited": false, "score": 0, "creation_date": 1574436981, "post_id": 58959556, "comment_id": 104245076, "body": "You should probably look into the <code>shape</code> parameter in the link i put of the mathworks website, see where it says &#39;same&#39;\t Central part of the convolution of the same size as u.? how do you think that is implemented?"}, {"owner": {"reputation": 45, "user_id": 12343054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c34df48664c95da85b46b9670d943b1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12343054/alex"}, "edited": false, "score": 0, "creation_date": 1574439122, "post_id": 58959556, "comment_id": 104246193, "body": "Could I pad the signal vector by the <code>[size(signal)+1]&#47;2</code>, so 51 in this case?"}, {"owner": {"reputation": 1557, "user_id": 1756939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DU0b6.jpg?s=128&g=1", "display_name": "AndrewBloom", "link": "https://stackoverflow.com/users/1756939/andrewbloom"}, "reply_to_user": {"reputation": 45, "user_id": 12343054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c34df48664c95da85b46b9670d943b1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12343054/alex"}, "edited": false, "score": 0, "creation_date": 1574441101, "post_id": 58959556, "comment_id": 104247168, "body": "I think the correct name for the operation you want to do is &quot;trim&quot;"}], "tags": [], "owner": {"reputation": 1557, "user_id": 1756939, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DU0b6.jpg?s=128&g=1", "display_name": "AndrewBloom", "link": "https://stackoverflow.com/users/1756939/andrewbloom"}, "is_accepted": false, "score": 1, "last_activity_date": 1574289026, "last_edit_date": 1574289026, "creation_date": 1574268837, "answer_id": 58959556, "question_id": 58958443, "link": "https://stackoverflow.com/questions/58958443/2d-convolution-of-complex-vector-with-real-vector-in-c/58959556#58959556", "title": "2D Convolution of complex vector with real vector in C++", "body": "<p>convolution formula can be found at <a href=\"https://www.mathworks.com/help/matlab/ref/conv.html\" rel=\"nofollow noreferrer\">https://www.mathworks.com/help/matlab/ref/conv.html</a></p>\n\n<p>as you can see, </p>\n\n<blockquote>\n  <p>w(k)= sum_j(  u(j)v(k\u2212j+1) )</p>\n</blockquote>\n\n<p>where sum with index j is in the range that keeps the indices valid on the two vectors.\nk is between 0 and  m+n-1, where m = length(u) and n = length(v)</p>\n\n<p>so if u(j) is complex and v(k) is real, the product is well defined.</p>\n\n<pre><code>std::vector&lt;complex&lt;double&gt; &gt; conv(const std::vector&lt;complex&lt;double&gt; &gt; &amp;a, const std::vector&lt;double&gt; &amp;b)\n{\n    std::vector&lt;complex&lt;double&gt; &gt; r(a.size()+b.size()-1);\n    for (unsigned long i=0; i&lt;r.size(); i++) {\n        r[i] = 0;\n        unsigned long s =(i+2-b.size()&gt;0) ? i+2-b.size() : 0;\n        for (unsigned long j=s ; j&lt;min(a.size(),i+2) ; j++) {\n            r[i] += a[j] * b[i-j+1];\n        }\n    }\n    return r;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 12343054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c34df48664c95da85b46b9670d943b1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/12343054/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574346481, "creation_date": 1574265192, "last_edit_date": 1574346481, "question_id": 58958443, "link": "https://stackoverflow.com/questions/58958443/2d-convolution-of-complex-vector-with-real-vector-in-c", "title": "2D Convolution of complex vector with real vector in C++", "body": "<p>I have a complex vector (type double) and another vector (type double), which I would like to perform 2D convolution with. Most of the examples I've seen online are not for complex vectors, so I'm not sure how to go about implementing it.</p>\n\n<p>These are my vectors:</p>\n\n<pre><code>vector&lt;complex&lt;double&gt; &gt; signal;  // length of 100\nvector&lt;double&gt; filter;            // length of 101\n</code></pre>\n\n<p>my 'signal' vector looks like this...</p>\n\n<pre><code>25 + 0.0000i, -9.04508 + 18.3273i, -3.45492 - 8.388i... and so on\n</code></pre>\n\n<p>my 'filter' vector looks like this...</p>\n\n<pre><code>0, 2.56698e-09, 9.13094e-09, 1.14301e-08... and so on\n</code></pre>\n\n<p>Ideally I'd like to output in to a complex vector, type double and to be the same length as 'signal'\nSo my output is:</p>\n\n<pre><code>vector&lt;complex&lt;double&gt; &gt; filtered_signal;\n</code></pre>\n\n<p>I'm still relatively inexperienced with C++ so any high-level tips/guidance on how to perform the calculation is appreciated.</p>\n"}, {"tags": ["c++", "templates", "operator-overloading", "comma", "abuse"], "comments": [{"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 1, "creation_date": 1574265245, "post_id": 58958367, "comment_id": 104172245, "body": "Love your idea and I even think you could extend all types using template comma operator. Of course you would have to put it in namespace to avoid strange behaviour"}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1574265866, "post_id": 58958367, "comment_id": 104172628, "body": "IMO, domain specific language (DSL) mini-languages always end in tragedy. Your example doesn&#39;t use <a href=\"https://en.cppreference.com/w/cpp/utility/functional/bind\" rel=\"nofollow noreferrer\">std::bind</a>, wouldn&#39;t that simplify things?"}, {"owner": {"reputation": 1343, "user_id": 4480394, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-QwHzVkP4n0Y/AAAAAAAAAAI/AAAAAAAAAGo/xwQ_WdtwEjQ/photo.jpg?sz=128", "display_name": "Mona the Monad", "link": "https://stackoverflow.com/users/4480394/mona-the-monad"}, "edited": false, "score": 0, "creation_date": 1574265970, "post_id": 58958367, "comment_id": 104172690, "body": "I had considered it, but bound functions don&#39;t get inlined. Also, this question is explictly tagged with <code>abuse</code>, so this is really just for fun."}], "answers": [{"comments": [{"owner": {"reputation": 1343, "user_id": 4480394, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-QwHzVkP4n0Y/AAAAAAAAAAI/AAAAAAAAAGo/xwQ_WdtwEjQ/photo.jpg?sz=128", "display_name": "Mona the Monad", "link": "https://stackoverflow.com/users/4480394/mona-the-monad"}, "edited": false, "score": 0, "creation_date": 1574266467, "post_id": 58958769, "comment_id": 104172999, "body": "This is kind of what I did in my non-working example, except I used a currier helper type instead. Mine kind of looks like it would work, but the complier treats it as UB (it poots out a <code>ud2</code> where the call would occur). I probably forwarded things incorrectly."}], "tags": [], "owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "is_accepted": false, "score": 1, "last_activity_date": 1574266269, "creation_date": 1574266269, "answer_id": 58958769, "question_id": 58958367, "link": "https://stackoverflow.com/questions/58958367/abusing-comma-operator-to-curry-function-arguments/58958769#58958769", "title": "Abusing comma operator to curry function arguments", "body": "<p>Here is a gist of my idea how it can be done. Mind it is for one-arg functions only but can easily be extended for currying. I use tag type to make sure right overload is chosen:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n\nvoid print_thing(int a) {\n}\n\nstruct go_t{} go; \n\ntemplate&lt;class F&gt;\nauto operator,(go_t, F f) {\n  return [a=std::move(f)](const auto&amp; b) {\n    return a(b);\n  };\n}\n\ntemplate&lt;class T&gt;\nauto operator,(const std::function&lt;void(T)&gt;&amp; f, T&amp;&amp; t) {\n    return f(std::forward&lt;T&gt;(t));\n}\n\nint main() {\n    // Make this happen!\n    (go, print_thing, 42);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1343, "user_id": 4480394, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-QwHzVkP4n0Y/AAAAAAAAAAI/AAAAAAAAAGo/xwQ_WdtwEjQ/photo.jpg?sz=128", "display_name": "Mona the Monad", "link": "https://stackoverflow.com/users/4480394/mona-the-monad"}, "edited": false, "score": 0, "creation_date": 1574268069, "post_id": 58959028, "comment_id": 104173958, "body": "I am loving this. But then what if <code>F</code> is a plain function pointer type?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 1343, "user_id": 4480394, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-QwHzVkP4n0Y/AAAAAAAAAAI/AAAAAAAAAGo/xwQ_WdtwEjQ/photo.jpg?sz=128", "display_name": "Mona the Monad", "link": "https://stackoverflow.com/users/4480394/mona-the-monad"}, "edited": false, "score": 0, "creation_date": 1574269128, "post_id": 58959028, "comment_id": 104174563, "body": "@MonatheMonad see my edits. It&#39;s an old habit to use inheritance for EBO"}, {"owner": {"reputation": 1343, "user_id": 4480394, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-QwHzVkP4n0Y/AAAAAAAAAAI/AAAAAAAAAGo/xwQ_WdtwEjQ/photo.jpg?sz=128", "display_name": "Mona the Monad", "link": "https://stackoverflow.com/users/4480394/mona-the-monad"}, "edited": false, "score": 1, "creation_date": 1574277135, "post_id": 58959028, "comment_id": 104178583, "body": "I wonder why the comma is even overloadable. I haven&#39;t seen such a thing elsewhere, so far."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 1343, "user_id": 4480394, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-QwHzVkP4n0Y/AAAAAAAAAAI/AAAAAAAAAGo/xwQ_WdtwEjQ/photo.jpg?sz=128", "display_name": "Mona the Monad", "link": "https://stackoverflow.com/users/4480394/mona-the-monad"}, "edited": false, "score": 1, "creation_date": 1574277255, "post_id": 58959028, "comment_id": 104178641, "body": "@MonatheMonad honestly I don&#39;t know either. I just know it makes life harder for those who write metaprogram."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 2, "last_activity_date": 1574269389, "last_edit_date": 1574269389, "creation_date": 1574267137, "answer_id": 58959028, "question_id": 58958367, "link": "https://stackoverflow.com/questions/58958367/abusing-comma-operator-to-curry-function-arguments/58959028#58959028", "title": "Abusing comma operator to curry function arguments", "body": "<p>Of course, all of this is quite trivial to do with normal function arguments. </p>\n\n<p><strong>I do not recommend using comma operator unless for learning and toy examples. Don't put this in production code.</strong></p>\n\n<p>But using the comma operator can also be fun for incremental and re-currying. Here's a working example:</p>\n\n<pre><code>template&lt;typename F, typename... Curry&gt;\nstruct comma_curry {\n    template&lt;typename... C&gt;\n    explicit comma_curry(F function, C&amp;&amp;... c) noexcept :\n       function(std::move(function)), curry{std::forward&lt;C&gt;(c)...} {}\n\n    template&lt;typename T&gt;\n    friend auto operator,(comma_curry&amp;&amp; self, T&amp;&amp; arg) -&gt; comma_curry&lt;F, Curry..., std::decay_t&lt;T&gt;&gt; {\n        return std::apply([&amp;](auto&amp;&amp;... curry) {\n            return comma_curry&lt;F, Curry..., std::decay_t&lt;T&gt;&gt;(std::move(self.function), std::forward&lt;decltype(curry)&gt;(curry)..., std::forward&lt;T&gt;(arg));\n        }, std::move(self.curry));\n    }\n\n    template&lt;typename... Args&gt;\n    auto operator()(Args&amp;&amp;... args) const&amp; -&gt; decltype(auto) {\n        return std::apply([&amp;](auto&amp;&amp;... curry) -&gt; decltype(auto) {\n            return function(std::forward&lt;decltype(curry)&gt;(curry)..., std::forward&lt;Args&gt;(args)...);\n        }, curry);\n    }\n\n    template&lt;typename... Args&gt;\n    auto operator()(Args&amp;&amp;... args) &amp;&amp; -&gt; decltype(auto) {\n        return std::apply([&amp;](auto&amp;&amp;... curry) -&gt; decltype(auto) {\n            return std::move(function)(std::forward&lt;decltype(curry)&gt;(curry)..., std::forward&lt;Args&gt;(args)...);\n        }, std::move(curry));\n    }\n\nprivate:\n    // [[no_unique_address]]\n    F function;\n\n    // [[no_unique_address]]\n    std::tuple&lt;Curry...&gt; curry;\n};\n</code></pre>\n\n<p>It supports currying references through <code>std::ref</code> and supports currying move only types.</p>\n\n<p>It can be used like this:</p>\n\n<pre><code>int main() {\n    auto function = [](int&amp; i, double, std::unique_ptr&lt;int&gt;, std::tuple&lt;int&gt;) {\n        std::cout &lt;&lt; \"Called! i value: \" &lt;&lt; i &lt;&lt; std::endl;\n    };\n\n    int number = 1;\n\n    // Reference arguments are sent using std::ref\n    auto curried = (comma_curry(function), std::ref(number), 1.5);\n    curried(std::make_unique&lt;int&gt;(), std::tuple{1});\n\n    number = 42;\n    auto recurried = (std::move(curried), std::make_unique&lt;int&gt;(), std::tuple{1});\n\n    // We curried a std::unique_ptr, our function is a one time call\n    // Since it's a one time call and destroy itself in the calling,\n    // it must be moved\n    std::move(recurried)();\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/PJu_SC\" rel=\"nofollow noreferrer\">Live example</a></p>\n"}], "owner": {"reputation": 1343, "user_id": 4480394, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-QwHzVkP4n0Y/AAAAAAAAAAI/AAAAAAAAAGo/xwQ_WdtwEjQ/photo.jpg?sz=128", "display_name": "Mona the Monad", "link": "https://stackoverflow.com/users/4480394/mona-the-monad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1574269389, "creation_date": 1574264997, "question_id": 58958367, "link": "https://stackoverflow.com/questions/58958367/abusing-comma-operator-to-curry-function-arguments", "title": "Abusing comma operator to curry function arguments", "body": "<p>In some languages, parentheses can be omitted in calling a function.</p>\n\n<pre><code>frobnicate foo, bar, baz, qux\n</code></pre>\n\n<p>Let's see if we can bring that, or something like it, into C++. This almost definitely implies abusing the comma operator, but, as far as I can tell, there's no way to extend arbitrary types to have an overloaded comma operator. So something like a proxy currier type could work.</p>\n\n<pre><code>comma_curry(frobnicate), foo, bar, baz, qux;\n</code></pre>\n\n<p><code>comma_curry</code> (I'm not good with coming up with names) would probably be some kind of incremental currier whose comma operator takes one argument at a time. Ideally, I'd like this to have perfect forwarding semantics, such that it would be no different from simply invoking <code>frobnicate</code> outright.</p>\n\n<pre><code>frobnicate(foo, bar, baz, qux);\n</code></pre>\n\n<p>Especially if some of the arguments themselves are function calls, which may return prvalues.</p>\n\n<pre><code>frobnicate(foo(), bar, baz(), qux);\n</code></pre>\n\n<p>I've played around and come up with <a href=\"https://godbolt.org/z/bPbpNp\" rel=\"nofollow noreferrer\">a non-working example</a>, using some helper code copied from another post. Anyone got some good or better ideas? \ud83d\udc40</p>\n"}, {"tags": ["c++", "mpi", "move-semantics"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574264640, "post_id": 58958147, "comment_id": 104171839, "body": "not sure if I understood the question....see answer and let me know what I misunderstood"}], "answers": [{"comments": [{"owner": {"reputation": 242, "user_id": 8457851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac230caaac387aac459c6a3792aad2d?s=128&d=identicon&r=PG", "display_name": "Arkantos493", "link": "https://stackoverflow.com/users/8457851/arkantos493"}, "edited": false, "score": 0, "creation_date": 1574266177, "post_id": 58958234, "comment_id": 104172816, "body": "Well I just had an error in my reasoning. I somehow thought if you compile the MPI C code with a C++ Compiler all structs will get a default move constructor (if possible, e.g. no other constructors are defined), which in turn could potential screw things up."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1574269652, "post_id": 58958234, "comment_id": 104174841, "body": "MPI objects are opaque handlers, that are generally implemented as <code>int</code> by MPICH and pointers in Open MPI. /* disclaimer, I am not a C++ developer */"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 0, "creation_date": 1574273739, "post_id": 58958234, "comment_id": 104177000, "body": "@GillesGouaillardet the last time I used MPI was long time before c++11, so I tried to keep the answer generic. If they are just handles, I wouldnt be too surprised when they dont bother to move at all"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 4, "last_activity_date": 1574264582, "creation_date": 1574264582, "answer_id": 58958234, "question_id": 58958147, "link": "https://stackoverflow.com/questions/58958147/mpi-and-move-semantics/58958234#58958234", "title": "MPI and move semantics", "body": "<p>Types either implement moving or they dont in which case a move is nothing but a copy. Trying to move something that doesnt move is not undefined behaviour.</p>\n\n<p>Remember that <code>std::move</code> alone merely casts to a r-value reference but does not move by itself.</p>\n"}], "owner": {"reputation": 242, "user_id": 8457851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac230caaac387aac459c6a3792aad2d?s=128&d=identicon&r=PG", "display_name": "Arkantos493", "link": "https://stackoverflow.com/users/8457851/arkantos493"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58958234, "answer_count": 1, "score": 0, "last_activity_date": 1574264582, "creation_date": 1574264354, "question_id": 58958147, "link": "https://stackoverflow.com/questions/58958147/mpi-and-move-semantics", "title": "MPI and move semantics", "body": "<p>How safe is it to use C++11 move semantics with MPI objects?</p>\n\n<p>Let's consider a small example:</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;iostream&gt;\n\nint main() {\n    MPI_Init(nullptr, nullptr);\n\n    int rank;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n\n    if (rank == 0) {\n        // create info object and set a key value pair\n        MPI_Info info;\n        MPI_Info_create(&amp;info);\n        MPI_Info_set(info, \"key\", \"value\");\n\n        int size;\n        MPI_Info_get_nkeys(info, &amp;size);\n        std::cout &lt;&lt; \"size: \" &lt;&lt; size &lt;&lt; std::endl;\n\n        // move into new object\n        MPI_Info info2 = std::move(info);\n        MPI_Info_set(info2, \"kex2\", \"value2\");\n\n        MPI_Info_get_nkeys(info2, &amp;size);\n        std::cout &lt;&lt; \"size: \" &lt;&lt; size &lt;&lt; std::endl;\n    }\n\n    MPI_Finalize();\n}\n</code></pre>\n\n<p>How safe is the move construction? I.e. is such a move operation defined on MPI objects or undefined behavior?</p>\n"}, {"tags": ["c++", "gcc", "g++", "ld", "powerpc"], "answers": [{"tags": [], "owner": {"reputation": 1149, "user_id": 2921426, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/xlAKu.jpg?s=128&g=1", "display_name": "SimonC", "link": "https://stackoverflow.com/users/2921426/simonc"}, "is_accepted": true, "score": 0, "last_activity_date": 1574267581, "creation_date": 1574267581, "answer_id": 58959179, "question_id": 58958084, "link": "https://stackoverflow.com/questions/58958084/disabling-tls-get-addr-opt-for-ppc/58959179#58959179", "title": "Disabling __tls_get_addr_opt for PPC", "body": "<p>I've finally figured it out.</p>\n\n<p>The trick is to tell G++ to pass the parameters to the linker.\nThis was achieved by adding the aforementioned switches to the comma-separated list like so:</p>\n\n<pre><code>-Wl,-rpath-link,${DEPS_DIR}/powerpc-linux-gnu/lib,--no-tls-optimize,--no-tls-get-addr-optimize\n</code></pre>\n"}], "owner": {"reputation": 1149, "user_id": 2921426, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/xlAKu.jpg?s=128&g=1", "display_name": "SimonC", "link": "https://stackoverflow.com/users/2921426/simonc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 58959179, "answer_count": 1, "score": 0, "last_activity_date": 1574267581, "creation_date": 1574264151, "question_id": 58958084, "link": "https://stackoverflow.com/questions/58958084/disabling-tls-get-addr-opt-for-ppc", "title": "Disabling __tls_get_addr_opt for PPC", "body": "<p>I develop software for an embedded device using the PowerPC architecture. Recently we got a new firmware upgrade and the manufacturer has provided a toolchain which is incapable of building runnable binaries.</p>\n\n<p>Except for a few exceptions, where I've completely statically compiled the binary, the OS gives me following error:</p>\n\n<pre><code>isobuslog.bin: /lib/ld.so.1: version `GLIBC_2.22' not found (required by isobuslog.bin)\n</code></pre>\n\n<p>I've been up and down a multitude of mailing lists and threads all day, looking for a solution to this.\nI finally read a post where following command was entered: <code>powerpc-linux-gnu-readelf -Ws app/bin/isobuslog.bin | grep GLIBC_2.22</code></p>\n\n<p>The output is as follows: </p>\n\n<pre><code>142: 00000000     0 FUNC    GLOBAL DEFAULT  UND __tls_get_addr_opt@GLIBC_2.22 (14)\n</code></pre>\n\n<p>Looking further in to the matter, it seems this is a thread-local storage optimisation routine which became available w/ GLIBC v2.22. Both the SDK I was provided and the SDK I installed myself both have GLIBC version higher than 2.22 and at least G++ 6.3 (6.3 provided by OEM, 9.2.1 installed locally on my machine) - so there's no way around this, unless I use the previous VM provided, which is based on an old Debian using GCC 4.6 - this is not an option, as we require C++11 and higher, <strong>without</strong> the use of Boost.</p>\n\n<p>I've tried searching around some more, and have found these two linker flags which don't seem to work, causing the linker to exit with an error code, saying it couldn't recognise the flags provided.</p>\n\n<ul>\n<li>--no-tls-optimize</li>\n<li>--no-tls-get-addr-optimize</li>\n</ul>\n\n<p>Is there a way to disable <code>__tls_get_addr_opt</code> so that my applications will build, or is there a way around this issue (except going back to ancient times)?</p>\n"}, {"tags": ["c++", "stl", "mfc", "c++17", "atl"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1574264136, "post_id": 58958044, "comment_id": 104171530, "body": "Derive from <code>CArray</code> and implement the copy operations.  To be honest, it was brain-dead for MFC to leave out the copy operations."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574264231, "post_id": 58958044, "comment_id": 104171580, "body": "<i>Is there any fix for CArray for the same implementations in future and existing code?</i> -- The jokes on you.  I don&#39;t think the Microsoft engineers use those MFC containers anymore."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574264413, "post_id": 58958044, "comment_id": 104171706, "body": "I am not familiar with MFC, but what is the reason to use <code>CArray</code> over <code>std::vector</code>?"}, {"owner": {"reputation": 538, "user_id": 6690542, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4ebea93b3dc2c3b9a4af781c0d751ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Yusuf R. Karag&#246;z", "link": "https://stackoverflow.com/users/6690542/yusuf-r-karag%c3%b6z"}, "edited": false, "score": 0, "creation_date": 1574264473, "post_id": 58958044, "comment_id": 104171738, "body": "Fix i meant a fixed class and with a CArray define, simply overwriting it. But i&#39;m not sure how to do it. There is no virtual methods or calls from global namespace. (like SerializeElements i meant)"}, {"owner": {"reputation": 538, "user_id": 6690542, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4ebea93b3dc2c3b9a4af781c0d751ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Yusuf R. Karag&#246;z", "link": "https://stackoverflow.com/users/6690542/yusuf-r-karag%c3%b6z"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574264628, "post_id": 58958044, "comment_id": 104171828, "body": "@uneven_mark Serialization of existing collection. If i change the collection type, than i need to change document version and too much work. Main problem is if there is another issues like that, cause we are mixing stl and mfc"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1574264837, "post_id": 58958044, "comment_id": 104171972, "body": "<i>Because CArray uses memcpy.</i> -- If that&#39;s the case, then forget about it.  What else in that class assumes that the type is trivially copyable?  You just have to admit that <code>CArray</code> is not meant for the job you&#39;re giving it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1574264960, "post_id": 58958044, "comment_id": 104172054, "body": "@uneven_mark <code>CArray</code> is close to 30 years old, with very little to no changes.   Why any new project would use it is beyond my comprehension."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1574265122, "post_id": 58958044, "comment_id": 104172176, "body": "There is a workaround in <a href=\"https://docs.microsoft.com/en-us/cpp/mfc/reference/carray-class?view=vs-2019\" rel=\"nofollow noreferrer\">the documentation</a>. (Essentially creating a new <code>CArray</code> and copying the old array into it. Not nice, but MFC is very much &quot;C with classes&quot; and not so much C++.)"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1574268995, "post_id": 58958044, "comment_id": 104174481, "body": "@YusufR.Karag&#246;z replace <code>CArray</code> with <code>std::vector</code> and use <code>CArray</code> only during serialisation. IOW when reading your file, read the data into a <code>CArray</code>, then copy the <code>CArray</code> into the <code>std::vector</code> and throw the <code>CArray</code> away. When writing to the file, do it the other way round"}, {"owner": {"reputation": 174, "user_id": 3991361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117c04ce5e8216b90c553a0c7ffc8ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry B", "link": "https://stackoverflow.com/users/3991361/larry-b"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1574269726, "post_id": 58958044, "comment_id": 104174874, "body": "@Jabberwocky, Could you explain how serialization will work when it&#39;s time to actually serialize the contents of an std::set contained in a CArray? The set likely has heap allocated memory that you need to visit to get the contents of the set. And unless I&#39;m mistaken, you need code to enumerate the contents of the set to serialize something like that. CArray serialization was probably designed with POD types in mind."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 174, "user_id": 3991361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117c04ce5e8216b90c553a0c7ffc8ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry B", "link": "https://stackoverflow.com/users/3991361/larry-b"}, "edited": false, "score": 0, "creation_date": 1574270082, "post_id": 58958044, "comment_id": 104175061, "body": "@LarryB everything in your comment is correct. There is of course some work to be done"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574271331, "post_id": 58958044, "comment_id": 104175734, "body": "It is not clear to me how serialization would be different with <code>std::vector</code>. If you &quot;serialize&quot; by copying the <code>CArray</code> or its underlying array&#39;s object representation, then this doesn&#39;t work with <code>std::set</code> elements in the first place. If you are properly serializing element by element, then <code>CArray</code> and <code>std::vector</code> behave exactly equal. With trivial types, both <code>CArray</code> and <code>std::vector</code> are ultimatively pointers to equivalent memory blocks, so their underlying arrays can be <code>memcpy</code>ed from one to another in principle after appropriate sizing."}], "owner": {"reputation": 538, "user_id": 6690542, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4ebea93b3dc2c3b9a4af781c0d751ac5?s=128&d=identicon&r=PG&f=1", "display_name": "Yusuf R. Karag&#246;z", "link": "https://stackoverflow.com/users/6690542/yusuf-r-karag%c3%b6z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1574323092, "creation_date": 1574264012, "last_edit_date": 1574323092, "question_id": 58958044, "link": "https://stackoverflow.com/questions/58958044/stdset-in-carray-doesnt-work-if-carray-needs-to-grow", "title": "std::set in CArray doesn&#39;t work if CArray needs to grow", "body": "<p>In an <code>CArray</code>-Collection, i must to have a <code>std::set</code>, and i see that if <code>CArray</code> needs to grow,\nit crashes by first emplace to the existing set. Because <code>CArray</code> uses <code>memcpy</code>.</p>\n\n<p>There is the code to reproduce; (VS2019 16.3.8 Debug x64/x86)</p>\n\n<pre><code>  std::vector&lt;std::set&lt;int&gt;&gt; _vector;\n  _vector.emplace_back();\n  _vector.shrink_to_fit();\n  _vector[0].emplace(1);\n  _vector[0].emplace(2);\n  _vector[0].emplace(3);\n  _vector.emplace_back();\n  _vector[0].emplace(4);\n  _vector[0].emplace(5);\n\n  CArray&lt;std::set&lt;int&gt;&gt; _atlarray;\n  _atlarray.Add({});\n  _atlarray.FreeExtra();\n  _atlarray[0].emplace(1);\n  _atlarray[0].emplace(2);\n  _atlarray[0].emplace(3);\n  _atlarray.Add({});\n  _atlarray[0].emplace(4);\n  _atlarray[0].emplace(5);\n</code></pre>\n\n<p><code>std::set</code> in <code>std::vector</code> works of course, cause hier copy constructors of existing elements are called, if element type is not an trivial. But i can not use it for backwards compatibility. (<code>CArray</code> serialized, and i don't want to change it)</p>\n\n<p>as a solution i can use that: <code>CArray&lt;std::unique_ptr&lt;std::set&lt;int&gt;&gt;&gt;</code>, but my questions are;</p>\n\n<ul>\n<li>It doesn't crash in release build, why? May i need to test longer in release build to have crash? Or will it work, and is it only debug issue?</li>\n<li>Is there any better workaround?</li>\n<li>I'm afraid of that, in the solution (40 projects) we have same issues, which didn't occur yet. Is there any fix for CArray for the same implementations in future and existing code?</li>\n</ul>\n\n<p><strong>Edit:</strong> More explanation why not vector:\nIt is an 25years old project that uses MFC serialization (CArchive)\nThis CArray collection is an existing collection of a class (in this class i added now this set), which is already in use, and changing it too much work. It is all possible, changing of serialization of this collection an so on.\nBut in the last 7 years new added code uses stl, and unfortunatly it is a mix of mfc and stl.\nIf this was the only one that i have to solve, it was not a problem.\nI only don't know whether there is another where same issue. I wonder actually if there is a way to fix CArray (by redefining CArray with a fixed array class)</p>\n\n<p><strong>Edit:</strong>\nstd::vector does it so;</p>\n\n<pre><code>template &lt;class _InIt, class _Alloc&gt;\n_Alloc_ptr_t&lt;_Alloc&gt; _Uninitialized_copy(\n    const _InIt _First, const _InIt _Last, _Alloc_ptr_t&lt;_Alloc&gt; _Dest, _Alloc&amp; _Al) {\n    // copy [_First, _Last) to raw _Dest, using _Al\n    // note: only called internally from elsewhere in the STL\n    using _Ptrval = typename _Alloc::value_type*;\n\n    auto _UFirst      = _Get_unwrapped(_First);\n    const auto _ULast = _Get_unwrapped(_Last);\n\n    if constexpr (conjunction_v&lt;bool_constant&lt;_Ptr_copy_cat&lt;decltype(_UFirst), _Ptrval&gt;::_Really_trivial&gt;,\n                      _Uses_default_construct&lt;_Alloc, _Ptrval, decltype(*_UFirst)&gt;&gt;) {\n        _Copy_memmove(_UFirst, _ULast, _Unfancy(_Dest));\n        _Dest += _ULast - _UFirst;\n        (void) _Al;\n    } else {\n        _Uninitialized_backout_al&lt;_Alloc&gt; _Backout{_Dest, _Al};\n        for (; _UFirst != _ULast; ++_UFirst) {\n            _Backout._Emplace_back(*_UFirst);\n        }\n\n        _Dest = _Backout._Release();\n    }\n\n    return _Dest;\n}\n</code></pre>\n\n<p>and CArray so;</p>\n\n<pre><code>SetSize()\n{\n...\n        TYPE* pNewData = (TYPE*) new BYTE[(size_t)nNewMax * sizeof(TYPE)];\n\n        // copy new data from old\n        ::ATL::Checked::memcpy_s(pNewData, (size_t)nNewMax * sizeof(TYPE),\n            m_pData, (size_t)m_nSize * sizeof(TYPE));\n\n        // construct remaining elements\n        ASSERT(nNewSize &gt; m_nSize);\n        memset((void*)(pNewData + m_nSize), 0, (size_t)(nNewSize-m_nSize) * sizeof(TYPE));\n        for( int i = 0; i &lt; nNewSize-m_nSize; i++ )\n#pragma push_macro(\"new\")\n#undef new\n            ::new( (void*)( pNewData + m_nSize + i ) ) TYPE;\n#pragma pop_macro(\"new\")\n\n        // get rid of old stuff (note: no destructors called)\n        delete[] (BYTE*)m_pData;\n        m_pData = pNewData;\n        m_nSize = nNewSize;\n        m_nMaxSize = nNewMax;\n...\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "macros", "typedef"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 10, "creation_date": 1574263155, "post_id": 58957703, "comment_id": 104170878, "body": "I&#39;ll ask you -- What does <code>int vec[NP][MAX];</code> mean?  If you know what that means, what is the issue in figuring out <code>vector&lt;edge&gt; vec[NP][MAX];</code>?"}, {"owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 2, "creation_date": 1574263502, "post_id": 58957703, "comment_id": 104171144, "body": "The whole thing expands to <code>vector&lt;pair&lt;int, double&gt;&gt; vec[2][2000]</code>. Simply put, a 2 dimensional array of vectors."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 3, "creation_date": 1574263589, "post_id": 58957703, "comment_id": 104171187, "body": "I would like to mention that macros should be prevented in C++. Macro identifiers are not subject of <code>namespace</code>s which can cause strange effects where they are not expected. In this case, <code>const</code> integral variables would do as well."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1574264200, "post_id": 58957703, "comment_id": 104171566, "body": "The <code>MAX</code> also seems to indicate that the two array components really should be <code>vector</code>/<code>array</code> as well, e.g. <code>vector&lt;vector&lt;vector&lt;edge&gt;&gt;&gt;</code> or <code>vector&lt;array&lt;vector&lt;edge&gt;, NP&gt;&gt;</code>. <code>vector</code> handles arrays of varying size correctly, there is no need to limit the program by introducing a maximum size and manually tracking the actual size."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1574264565, "post_id": 58957703, "comment_id": 104171790, "body": "@RokasVi\u0161inskas y u answer in the comments"}, {"owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1574264662, "post_id": 58957703, "comment_id": 104171855, "body": "@LightnessRaceswithMonica because I don&#39;t really feel this is worthy of an actual answer."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1574264693, "post_id": 58957703, "comment_id": 104171869, "body": "@RokasVi\u0161inskas Then feel free to not answer it, but then doing so in the comments section instead is double-bad."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1574264941, "post_id": 58958222, "comment_id": 104172044, "body": "@Caleth: Haha oh yeah. I think I was going to make it <code>[5][5]</code> ... then, like, didn&#39;t. \ud83d\ude07"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 2, "last_activity_date": 1574264864, "last_edit_date": 1574264864, "creation_date": 1574264550, "answer_id": 58958222, "question_id": 58957703, "link": "https://stackoverflow.com/questions/58957703/what-does-this-declared-vector-in-c-mean/58958222#58958222", "title": "What does this declared vector in C++ mean?", "body": "<p>There is not \"a vector\" &mdash; there are many vectors. Many!</p>\n\n<p>Just as <code>int foo[5]</code> creates an array of five <code>int</code>s, and <code>int foo[5][10]</code> creates a two-dimensional array of fifty <code>int</code>s total&hellip;</p>\n\n<p>&hellip; <code>vector&lt;edge&gt; vec[5][10]</code> creates an array of fifty <code>vector&lt;edge&gt;</code>s.</p>\n\n<p>Now add on the macros: that's just text substitution (more or less), so the array dimensions are being provided via a constant name rather than right there as numbers in the declaration.</p>\n\n<p>So it's a <code>vector&lt;edge&gt; vec[2][2000]</code>, or four thousand <code>vector&lt;edge&gt;</code>s.</p>\n\n<p>The type <code>edge</code> is an alias for <code>pair&lt;int, double&gt;</code> (thanks, <code>typedef</code>!), so it's really:</p>\n\n<pre><code>vector&lt;pair&lt;int, double&gt;&gt; vec[2][2000].\n</code></pre>\n\n<p>This is probably not what was actually intended. Though there is nothing illegal about arrays of vectors, they're a bit of a \"double-positive\". The vector is already an array-like thing, and it seems likely that the author wanted to create a sort of \"two-dimensional vector\", but did it wrong. We cannot know this for sure, though, without asking them.</p>\n"}], "owner": {"reputation": 17, "user_id": 10771829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e199780ed85fca7e532402945d41553e?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Shane", "link": "https://stackoverflow.com/users/10771829/jack-shane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 58958222, "answer_count": 1, "score": -3, "last_activity_date": 1574264864, "creation_date": 1574262982, "question_id": 58957703, "link": "https://stackoverflow.com/questions/58957703/what-does-this-declared-vector-in-c-mean", "title": "What does this declared vector in C++ mean?", "body": "<p>I'm fairly new to C++, so I'm having a hard time understanding some complex terms such as Macros and Preprocessors. The code that I can't understand is attached below:</p>\n\n<pre><code>#define NP 2\n#define MAX 2000\n\ntypedef pair&lt;int, double&gt; edge;\n\nvector&lt;edge&gt; vec[NP][MAX];\n</code></pre>\n\n<p>What I can't understand here is, what does the vector really store and what does [NP][MAX] determine?</p>\n"}, {"tags": ["c++", "pass-by-reference", "eigen", "auto"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1574262822, "post_id": 58957421, "comment_id": 104170650, "body": "Probably a template expression, (to compute <code>a[i] + fac * b[i] &#47; 50.</code> without extra <code>Vector3d</code> temporary)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1574262889, "post_id": 58957421, "comment_id": 104170684, "body": "<code>template &lt;typename&gt; struct Debug; Debug&lt;decltype(a_temp)&gt; dummy;</code> should give you the type in error message."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574263240, "post_id": 58957421, "comment_id": 104170936, "body": "fwiw, <code>const auto a_temp = ...</code> will deduce the type and add constness."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1574263981, "post_id": 58957421, "comment_id": 104171443, "body": "@formerlyknownas_463035818: but the <code>const</code> is probably as useless than for <code>r</code> in <code>int i = 40; const auto&amp; r = i; assert(r == 40); i += 2; assert(r == 42 &#47;* r has &quot;changed&quot;*&#47;);</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1574264332, "post_id": 58957421, "comment_id": 104171655, "body": "@Jarod42 oh right, it doesnt help here"}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 5380294, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/231e92aeaaec7194d34fdfeeba7c46c2?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5380294/david"}, "edited": false, "score": 0, "creation_date": 1574264630, "post_id": 58958106, "comment_id": 104171829, "body": "Thanks! Now everything makes sense"}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 2, "creation_date": 1574267570, "post_id": 58958106, "comment_id": 104173628, "body": "For the record, this is documented <a href=\"https://eigen.tuxfamily.org/dox-devel/TopicPitfalls.html#title3\" rel=\"nofollow noreferrer\">there</a>."}], "tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": true, "score": 1, "last_activity_date": 1574264223, "creation_date": 1574264223, "answer_id": 58958106, "question_id": 58957421, "link": "https://stackoverflow.com/questions/58957421/erroneous-use-of-auto-type-specifier-with-eigen-objects/58958106#58958106", "title": "Erroneous use of auto type specifier with Eigen objects", "body": "<p>When calculating with matrices in the eigen library, the overloaded operators return an object representing the calculation expression. This expression is not yet evaluated (ie. the actual calculation is not yet performed).</p>\n\n<p>In your example, the type derived by <code>auto</code> is <code>Eigen::CwiseBinaryOp&lt;Eigen::internal::scalar_sum_op&lt;double&gt;, const Eigen::Matrix&lt;double, 3, 1&gt;, const Eigen::CwiseUnaryOp&lt;Eigen::internal::scalar_quotient1_op&lt;double&gt;, const Eigen::CwiseUnaryOp&lt;Eigen::internal::scalar_multiple_op&lt;double&gt;, const Eigen::Matrix&lt;double, 3, 1&gt;&gt;&gt;&gt;</code>.</p>\n\n<p>The actual evaluation of the expression is done when the result is needed (eg. when assigning to a variable, printing, etc.).</p>\n\n<p>Since <code>a_temp</code> in your case is the expression (not the result), the expression is evaluated multiple times :</p>\n\n<ul>\n<li>when printing it as part of the <code>Before</code> line</li>\n<li>when assigning to <code>a[i]</code></li>\n<li>when assigning to <code>c[i]</code></li>\n<li>when printing it as part of the <code>After</code> line</li>\n</ul>\n\n<p>The second of these ends up modifying one of the operands of the expression, so subsequent evaluations of the expression will have a different result.</p>\n"}], "owner": {"reputation": 357, "user_id": 5380294, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/231e92aeaaec7194d34fdfeeba7c46c2?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5380294/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 58958106, "answer_count": 1, "score": 0, "last_activity_date": 1574269859, "creation_date": 1574262219, "last_edit_date": 1574269859, "question_id": 58957421, "link": "https://stackoverflow.com/questions/58957421/erroneous-use-of-auto-type-specifier-with-eigen-objects", "title": "Erroneous use of auto type specifier with Eigen objects", "body": "<p>I have a main function which looks like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;Eigen/Dense&gt;\n\nusing Eigen::Vector3d;\nusing namespace std;\n\nvoid ext_func(vector&lt;Vector3d&gt; &amp;a, vector&lt;Vector3d&gt; &amp;b, vector&lt;Vector3d&gt; &amp;c);\nint main()\n{\n    vector&lt;Vector3d&gt; a = {};\n    a.push_back(Vector3d(1.,1.,0.));\n    a.push_back(Vector3d(2.,1.,0.));\n\n    vector&lt;Vector3d&gt; b = {};\n    b.push_back(Vector3d(.5,.7,2.));\n    b.push_back(Vector3d(0.,.2,-1.2));\n\n    vector&lt;Vector3d&gt; c = {};\n    c.push_back(Vector3d::Zero());\n    c.push_back(Vector3d::Zero());\n\n    ext_func(a,b,c);\n\n}\n</code></pre>\n\n<p>From <code>main</code>, I call an external function:</p>\n\n<pre><code>void ext_func(vector&lt;Vector3d&gt; &amp;a, vector&lt;Vector3d&gt; &amp;b, vector&lt;Vector3d&gt; &amp;c)\n{\n    double fac = 0.01;\n    for (size_t i = 0; i &lt; a.size(); i++) {\n        auto a_temp = a[i] + fac * b[i] / 50.;\n        cout &lt;&lt; \"Before\" &lt;&lt; endl &lt;&lt; fac*a_temp &lt;&lt; endl;\n        a[i] = a_temp;\n        c[i] += fac*a_temp;\n        cout &lt;&lt; \"After\" &lt;&lt; endl &lt;&lt; fac*a_temp &lt;&lt; endl &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>Before\n 0.010001\n0.0100014\n    4e-06\nAfter\n 0.010002\n0.0100028\n    8e-06\n\nBefore\n     0.02\n0.0100004\n -2.4e-06\nAfter\n     0.02\n0.0100008\n -4.8e-06\n</code></pre>\n\n<p>Which is not what I want to get (I want a_temp to stay constant once it's assigned). I understand that the problem is that I assign a new value to <code>&amp;a</code> and so when I'm calling <code>a_temp</code> I'm basically incrementing a second time my initial <code>a[i]</code>. The problem is solved by replacing <code>auto</code> with <code>Vector3d</code> or <code>Vector3d&amp;&amp;</code>. </p>\n\n<p>What I'm not sure about is what is <code>auto</code> really doing here.</p>\n"}, {"tags": ["c++", "initialization"], "comments": [{"owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1574262334, "post_id": 58957333, "comment_id": 104170319, "body": "I am pretty sure <code>const unsigned char pounds(156)</code> is not a function declaration."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1574262668, "last_edit_date": 1574262668, "creation_date": 1574262225, "answer_id": 58957424, "question_id": 58957333, "link": "https://stackoverflow.com/questions/58957333/why-am-i-getting-an-uninitialized-local-variable-error-when-i-have-already-defin/58957424#58957424", "title": "Why am I getting an uninitialized local variable error when I have already defined it?", "body": "<p>You are passing the uninitialized variable <code>option</code> to the function <code>enteroption</code> as an argument</p>\n\n<pre><code>option = enteroption(option);\n</code></pre>\n\n<p>This does not make any sense and the compiler points this to your.</p>\n\n<p>The function can be declared like</p>\n\n<pre><code>char enteroption();\n</code></pre>\n\n<p>Within the function you can declare a local variable <code>option</code> that will get a value. Then this variable can be returned from the function and is assigned to the variable <code>option</code> declared in main.</p>\n\n<p>Also it seems that the call of the function</p>\n\n<pre><code>putinUpperCase(option);\n</code></pre>\n\n<p>has no effect because the variable <code>option</code> is not passed be reference. See the function declaration</p>\n\n<pre><code>void putinUpperCase(char);\n</code></pre>\n\n<p>It seems the function should be declared like</p>\n\n<pre><code>void putinUpperCase( char &amp; );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "is_accepted": false, "score": 0, "last_activity_date": 1574262574, "creation_date": 1574262574, "answer_id": 58957566, "question_id": 58957333, "link": "https://stackoverflow.com/questions/58957333/why-am-i-getting-an-uninitialized-local-variable-error-when-i-have-already-defin/58957566#58957566", "title": "Why am I getting an uninitialized local variable error when I have already defined it?", "body": "<p>The compiler is right about this.</p>\n\n<p>In you current code you call <code>option = enteroption(option)</code>. At this point <code>option</code> is undefined, which the compiler tells you. You either want to pass <code>option</code> by reference:</p>\n\n<pre><code>void enteroption(char &amp;option)\n{\n    // ...\n    cin &gt;&gt; option;\n    // ...\n}\n</code></pre>\n\n<p>Or don't use a parameter here:</p>\n\n<pre><code>char enteroption()\n{\n    char option;\n    // ...\n    cin &gt;&gt; option;\n    // ...\n    return option;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11196, "user_id": 1079907, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/a7c69e39fbec2c781db5f27b40f63023?s=128&d=identicon&r=PG", "display_name": "Sunil Bojanapally", "link": "https://stackoverflow.com/users/1079907/sunil-bojanapally"}, "is_accepted": false, "score": 0, "last_activity_date": 1574262973, "creation_date": 1574262973, "answer_id": 58957694, "question_id": 58957333, "link": "https://stackoverflow.com/questions/58957333/why-am-i-getting-an-uninitialized-local-variable-error-when-i-have-already-defin/58957694#58957694", "title": "Why am I getting an uninitialized local variable error when I have already defined it?", "body": "<p>You can pass the reference of local member <code>option</code> from calling function instead of returning a character. The same can be applied to make upper case letter which will ultimately called function can modify the value of the argument by using its reference passed in.</p>\n\n<pre><code>enteroption(option);\n\nvoid enteroption(char&amp; option)\n{\n  cout &lt;&lt; \"Enter option...\" &lt;&lt; endl &lt;&lt; \"P:Play or B:Balance or Q:Quit\" &lt;&lt; endl;\n  cin &gt;&gt; option;\n  void putinUpperCase(char&amp;);\n  putinUpperCase(option);\n  return;\n}\n\nvoid putinUpperCase(char&amp; option)\n{\n  option = toupper(option);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12404722, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBhRF_6tveQo1sE-iMWrcGfD8eYqZQ2RZMdWV_x=k-s128", "display_name": "Joe Takac", "link": "https://stackoverflow.com/users/12404722/joe-takac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1574262973, "creation_date": 1574261954, "last_edit_date": 1574262339, "question_id": 58957333, "link": "https://stackoverflow.com/questions/58957333/why-am-i-getting-an-uninitialized-local-variable-error-when-i-have-already-defin", "title": "Why am I getting an uninitialized local variable error when I have already defined it?", "body": "<p>I am a beginner with c++ and I'm having trouble with this error, I am aware that this error means I am trying to use a variable that hasn't been given a value yet. </p>\n\n<p>The context of the program is a that the variable is called option, the value of option is input by the user in a later function. When I started getting this error my only thought was to give the variable a value that was determined in the function so written as \"option = enteroption(option);\" however it still says the variable is uninitialized. can anybody help explain what I am maybe doing wrong? thanks.</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n#include \"Arcade game menu.h\"\nusing namespace std;\n\n\nint main()\n{\n\n    char option; //declare variable \n    float balance; //declare variable\n\n    const unsigned char pounds(156); //signatures for functions\n    void processoption(char, float&amp;, char);\n    void payinitialfee(float&amp;);\n    char enteroption(char);\n\n\n    payinitialfee(balance); //call functions\n    enteroption(option); \n\n\n\n    while ((option != 'Q') &amp;&amp; (balance &gt; 0)); //while option is not Q and balance is greater than 0 call functions\n    {\n        processoption(option, balance, pounds);\n        option = enteroption(option);\n    }\n\n    cout &lt;&lt; \"Thanks for playing.\" &lt;&lt; endl;\n\n    system(\"pause\");\n}\n\nvoid payinitialfee(float&amp; balance)\n{\n    balance = 100;\n}\n\nchar enteroption(char option)\n{\n    cout &lt;&lt; \"Enter option...\" &lt;&lt; endl &lt;&lt; \"P:Play or B:Balance or Q:Quit\" &lt;&lt; endl;\n    cin &gt;&gt; option;\n    void putinUpperCase(char);\n    putinUpperCase(option);\n\n    return option;\n}\n\nvoid putinUpperCase(char option)\n{\n    option = toupper(option);\n}\n\nvoid processoption(char option, float&amp;balance, char pounds)\n{\n\n    void playGame(float&amp;); //signatures\n    void showbalance(float&amp;, char);\n\n    switch (option)\n    {\n    case 'P': playGame(balance);\n        break;\n    case 'B': showbalance(balance, pounds);\n        break;\n    default: cout &lt;&lt; \"ERROR: INVALID COMMAND.\" &lt;&lt; endl;\n        break;\n    }\n\n}\n\nvoid playGame(float&amp; balance)\n{\n    cout &lt;&lt; \"Playing...\" &lt;&lt; endl;\n    balance = balance - 20;\n}\n\nvoid showbalance(float&amp;balance, char pounds)\n{\n    cout &lt;&lt; \"The current balance is... \" &lt;&lt; pounds &lt;&lt; balance &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1574261930, "post_id": 58957246, "comment_id": 104170041, "body": "Please copy-paste error messages into the question, makes it easier to read. The third error is undefined reference to WinMain. Does your program contain a <code>main</code> function?"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1574262060, "post_id": 58957246, "comment_id": 104170141, "body": "Also you should read about <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">Why using namespace std is considered bad practice</a>. This can become a real problem when used in a header."}, {"owner": {"reputation": 1, "user_id": 12404654, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sG-uNa0m-Ek/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcMnZ3gfWjq3Tt_4DDCK47laFaiYw/photo.jpg?sz=128", "display_name": "Haytem Talbi", "link": "https://stackoverflow.com/users/12404654/haytem-talbi"}, "reply_to_user": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1574262298, "post_id": 58957246, "comment_id": 104170292, "body": "i edited the errors part @churill   then should i try to use std:: instead ?"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1574262738, "post_id": 58957246, "comment_id": 104170592, "body": "Thanks :) Using <code>std::</code> is safer. In case the names get too long you can also use <a href=\"https://en.cppreference.com/w/cpp/language/namespace_alias\" rel=\"nofollow noreferrer\">namespace aliasing</a> or <a href=\"https://en.cppreference.com/w/cpp/language/type_alias\" rel=\"nofollow noreferrer\">type aliasing</a> to shorten them."}, {"owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1574262841, "post_id": 58957246, "comment_id": 104170662, "body": "The errors point to the fact that you&#39;re missing the function called <code>main</code>. This function needs to be a part of all c++ programs."}], "answers": [{"tags": [], "owner": {"reputation": 52, "user_id": 4863424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xLvem.png?s=128&g=1", "display_name": "returnVoid", "link": "https://stackoverflow.com/users/4863424/returnvoid"}, "is_accepted": false, "score": -1, "last_activity_date": 1574262808, "creation_date": 1574262808, "answer_id": 58957639, "question_id": 58957246, "link": "https://stackoverflow.com/questions/58957246/how-can-i-compile-a-program-while-error-ld-returned-1-exit-status-is-appearing/58957639#58957639", "title": "How can I compile a program while :Error ld returned 1 exit status is appearing", "body": "<p>You're compiling a program without an entry point aka a main function</p>\n\n<pre><code>int main(int argc, char** argv){ return 0; }\n</code></pre>\n\n<p>It is required as it will be the entry point of your program, if you're building a library you might want to change your compiler settings. And of course, if you want things to happen, put something else inside the main, you can discard the parameters is you don't use them</p>\n"}, {"comments": [{"owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1574263280, "post_id": 58957659, "comment_id": 104170967, "body": "Please also state it in words, not just code. Your example implies adding the main function to the <code>employe.cpp</code> file which defeats the purpose of splitting a class into a <code>.h</code> and <code>.cpp</code>."}, {"owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1574263768, "post_id": 58957659, "comment_id": 104171314, "body": "Are you referring to your own link? If so, it says nothing about the fact that you must have a <code>main</code> function. And the purpose of a stack overflow answer is to ANSWER the question completely, without leaving uncertainties out. In no way am I telling you to code it for them. But that&#39;s actually what you&#39;ve done. I&#39;m asking you to explain, not just show the finished product."}], "tags": [], "owner": {"reputation": 130, "user_id": 4052086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94c4f936a5d245db2252e62354565424?s=128&d=identicon&r=PG&f=1", "display_name": "John smith", "link": "https://stackoverflow.com/users/4052086/john-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1574263087, "last_edit_date": 1574263087, "creation_date": 1574262870, "answer_id": 58957659, "question_id": 58957246, "link": "https://stackoverflow.com/questions/58957246/how-can-i-compile-a-program-while-error-ld-returned-1-exit-status-is-appearing/58957659#58957659", "title": "How can I compile a program while :Error ld returned 1 exit status is appearing", "body": "<p>You need to initialize the static variable explicitly.\n<a href=\"https://www.geeksforgeeks.org/static-keyword-cpp/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/static-keyword-cpp/</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include\"doc.h\"\n\nusing namespace std;\n\nint EMPLOYE::valeur = 0;\n\nEMPLOYE::EMPLOYE(){};\nEMPLOYE::EMPLOYE(string n ,int m ,int i){\nnom=n;\nmatricule=m;\nindice=i;\nvaleur = 10;\n};\nvoid EMPLOYE :: afficherEmploye(){\ncout&lt;&lt;\"votre nom est\"&lt;&lt;nom&lt;&lt;\"votre matricule est\"&lt;&lt;matricule&lt;&lt;\"votre indice \nest\"&lt;&lt;indice&lt;&lt;endl;\n};\n\nint EMPLOYE :: salaire(){\nreturn indice*(EMPLOYE::valeur); //salaire\n};\n\nint main()\n{\n//do something\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12404654, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sG-uNa0m-Ek/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcMnZ3gfWjq3Tt_4DDCK47laFaiYw/photo.jpg?sz=128", "display_name": "Haytem Talbi", "link": "https://stackoverflow.com/users/12404654/haytem-talbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 677, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1577497724, "creation_date": 1574261750, "last_edit_date": 1592644375, "question_id": 58957246, "link": "https://stackoverflow.com/questions/58957246/how-can-i-compile-a-program-while-error-ld-returned-1-exit-status-is-appearing", "title": "How can I compile a program while :Error ld returned 1 exit status is appearing", "body": "<p>While creating my C++ project I found out some errors concerning my syntax but some other files and here is the errors I found:</p>\n<blockquote>\n<p>C:\\Users\\user\\Desktop\\SUJET 1\\EMPLOYE.o   EMPLOYE.cpp:(.rdata$.refptr._ZN7EMPLOYE6valeurE[.refptr._ZN7EMPLOYE6valeurE]+0x0): undefined reference to `EMPLOYE::valeur'.</p>\n<p>C:\\Program Files (x86)\\Dev-Cpp\\MinGW64\\x86_64-w64-mingw32\\lib\\libmingw32.a(lib64_libmingw32_a-crt0_c.o)   In function `main':</p>\n<p>C:\\crossdev\\src\\mingw-w64-v3-git\\mingw-w64-crt\\crt\\crt0_c.c   undefined reference to `WinMain'</p>\n<p>C:\\Users\\user\\Desktop\\SUJET 1\\collect2.exe    [Error] ld returned 1 exit status</p>\n<p>C:\\Users\\user\\Desktop\\SUJET 1\\Makefile.win    recipe for target '&quot;SUJET' failed</p>\n</blockquote>\n<p>files:</p>\n<p><strong>EMPLOYE.cpp:</strong></p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include&quot;EMPLOYE.h&quot;\n\nusing namespace std;\n\nEMPLOYE::EMPLOYE(){};\nEMPLOYE::EMPLOYE(string n ,int m ,int i){\n    nom=n;\n    matricule=m;\n    indice=i;\n    int valeur = 10;\n};\n\nvoid EMPLOYE :: afficherEmploye(){\n    cout &lt;&lt; &quot;votre nom est&quot;&lt;&lt;nom&lt;&lt;&quot;votre matricule est&quot; &lt;&lt; matricule &lt;&lt; &quot;votre indice est&quot; &lt;&lt; indice &lt;&lt; endl;   \n};\n\nint EMPLOYE :: salaire(){\n    return indice*valeur; //salaire\n};\n</code></pre>\n<p><strong>EMPLOYE.h:</strong></p>\n<pre><code>#ifndef EMPLOYE_h\n#define EMPLOYE_h\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass EMPLOYE{\nprotected:\n    int indice;\n    string nom;\n    static int valeur ;\n\npublic:\n    int matricule;\n    EMPLOYE();\n    EMPLOYE(string , int, int);\n    void afficherEmploye();\n    virtual int salaire();\n};\n\n#endif \n</code></pre>\n"}, {"tags": ["c++", "runtime", "simd", "constexpr", "compile-time"], "comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1574261894, "post_id": 58957240, "comment_id": 104170019, "body": "In GCC, you can use <code>__builtin_constannt_p(x)</code> to ask the compiler if <code>x</code> has a compile-time constant value.  (Useful for using inline asm with runtime variables, pure C for constant-propagation of constants)."}, {"owner": {"reputation": 1615, "user_id": 10362622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54067bb99c90afda4a7ac844255dc6b5?s=128&d=identicon&r=PG&f=1", "display_name": "dave", "link": "https://stackoverflow.com/users/10362622/dave"}, "edited": false, "score": 4, "creation_date": 1574261970, "post_id": 58957240, "comment_id": 104170065, "body": "If you can use features from C++2a already, there is <a href=\"https://en.cppreference.com/w/cpp/types/is_constant_evaluated\" rel=\"nofollow noreferrer\">std::is_constant_evaluated()</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1574263301, "post_id": 58957240, "comment_id": 104170985, "body": "<code>union {         __m128 simd_data;         float data[4];     };</code> would probably lead to UB, as that type punning is disallowed in C++."}, {"owner": {"reputation": 67, "user_id": 11067422, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vSzbXDMzTLo/AAAAAAAAAAI/AAAAAAAAAYk/A0-RpQAMnjo/photo.jpg?sz=128", "display_name": "Gabe Rundlett", "link": "https://stackoverflow.com/users/11067422/gabe-rundlett"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1574264344, "post_id": 58957240, "comment_id": 104171659, "body": "@PeterCordes I would prefer a compiler agnostic solution."}, {"owner": {"reputation": 67, "user_id": 11067422, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vSzbXDMzTLo/AAAAAAAAAAI/AAAAAAAAAYk/A0-RpQAMnjo/photo.jpg?sz=128", "display_name": "Gabe Rundlett", "link": "https://stackoverflow.com/users/11067422/gabe-rundlett"}, "reply_to_user": {"reputation": 1615, "user_id": 10362622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54067bb99c90afda4a7ac844255dc6b5?s=128&d=identicon&r=PG&f=1", "display_name": "dave", "link": "https://stackoverflow.com/users/10362622/dave"}, "edited": false, "score": 0, "creation_date": 1574264365, "post_id": 58957240, "comment_id": 104171673, "body": "@dave This looks great and I am extremely excited for all the features coming in C++2a, however I cannot use these features yet on all the platforms I am testing my code on."}, {"owner": {"reputation": 67, "user_id": 11067422, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vSzbXDMzTLo/AAAAAAAAAAI/AAAAAAAAAYk/A0-RpQAMnjo/photo.jpg?sz=128", "display_name": "Gabe Rundlett", "link": "https://stackoverflow.com/users/11067422/gabe-rundlett"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1574264372, "post_id": 58957240, "comment_id": 104171679, "body": "@Jarod42 I am new to SIMD (which is why I came across this issue in the first place) and every example I found used this technique to be able to interface with the 4 individual floats inside the __m128 variable. How would you recommend I do this instead?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1574264457, "post_id": 58957240, "comment_id": 104171735, "body": "@Jarod42: I think all compilers that support <code>__m128</code> at all define the behaviour of union type punning.  GNU C++ does (with documentation to prove it&#39;s on purpose), and MSVC even defines <code>__m128</code> in terms of a union.  But Gabe: normally you&#39;d just store to an array and access elements of that, if you want all 4 elements one at a time.  Otherwise shuffle and <code>_mm_cvtss_f32</code>.  The cvt intrinsic is a no-op because a scalar <code>float</code> is just a value at the bottom of an XMM reg."}, {"owner": {"reputation": 67, "user_id": 11067422, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vSzbXDMzTLo/AAAAAAAAAAI/AAAAAAAAAYk/A0-RpQAMnjo/photo.jpg?sz=128", "display_name": "Gabe Rundlett", "link": "https://stackoverflow.com/users/11067422/gabe-rundlett"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1574265181, "post_id": 58957240, "comment_id": 104172210, "body": "@PeterCordes, are you saying to not unionize the __m128 with the array of floats? If so, how does one pass the values to an intrinsic requesting __m128s, __m256s etc. ? Thank you all for the helpful responses"}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1574884240, "post_id": 58957240, "comment_id": 104392174, "body": "I&#39;m curious about your use case for this\u2026 I thought about doing something like this in <a href=\"https://github.com/nemequ/simde/\" rel=\"nofollow noreferrer\">SIMDe</a> a while back, but it would be a lot of work and I didn&#39;t think it was likely to have much of an impact in practice so I decided against it.  That said, I&#39;d be open to changing my mind if people think it would really help."}, {"owner": {"reputation": 67, "user_id": 11067422, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vSzbXDMzTLo/AAAAAAAAAAI/AAAAAAAAAYk/A0-RpQAMnjo/photo.jpg?sz=128", "display_name": "Gabe Rundlett", "link": "https://stackoverflow.com/users/11067422/gabe-rundlett"}, "reply_to_user": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1574981046, "post_id": 58957240, "comment_id": 104427009, "body": "@nemequ, my use case is to have the ability to use Vector addition in the constexpr context as well as use simd operations at runtime"}, {"owner": {"reputation": 13984, "user_id": 501126, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/839de8a602b21abf36e020bcb32959fe?s=128&d=identicon&r=PG", "display_name": "nemequ", "link": "https://stackoverflow.com/users/501126/nemequ"}, "edited": false, "score": 0, "creation_date": 1575148885, "post_id": 58957240, "comment_id": 104470357, "body": "@GabeRundlett, yes, but <i>why</i>? Have you seen code in the wild that would benefit from this?  SIMD tends to be used to process data fed to a program, I don&#39;t remember ever really running into a situation where it could be computed at compile-time. SO comments probably aren&#39;t the best place for this\u2026 I&#39;&#39;ve opened up <a href=\"https://github.com/nemequ/simde/issues/48\" rel=\"nofollow noreferrer\">an issue</a> where we could discuss it in a bit more detail."}], "owner": {"reputation": 67, "user_id": 11067422, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vSzbXDMzTLo/AAAAAAAAAAI/AAAAAAAAAYk/A0-RpQAMnjo/photo.jpg?sz=128", "display_name": "Gabe Rundlett", "link": "https://stackoverflow.com/users/11067422/gabe-rundlett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574261728, "creation_date": 1574261728, "question_id": 58957240, "link": "https://stackoverflow.com/questions/58957240/how-to-do-something-different-in-a-function-when-evaluated-in-constexpr-context", "title": "How to do something different in a function when evaluated in constexpr context", "body": "<p>I was wondering if it were possible to have a function do different things depending on whether or not it is evaluated at compile time.</p>\n\n<p>For example,</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Vec4 {\n    union {\n        __m128 simd_data;\n        float data[4];\n    };\n\n    inline constexpr Vec4 operator+(const Vec4 &amp;v) const {\n        // If at compile time:\n        return {data[0] + v.data[0], data[1] + v.data[1], data[2] + v.data[2], data[3] + v.data[3]};\n        // If at runtime\n        return {_mm_add_ps(simd_data, v.simd_data)};\n    }\n};\n\nint main() {\n    constexpr Vec4 v1 = {1, 2, 3, 4};\n    constexpr Vec4 v2 = {3, 1, 2, 5};\n\n    // Runtime variable, calls the non-constexpr compiler intrinsic\n    Vec4 v_a = v1 + v2;\n\n    // Compile time constant, runs the sequential additions\n    constexpr Vec4 v_b = v1 + v2;\n}\n</code></pre>\n\n<p>Being able to do this would allow for the function to both be evaluated at compile time if necessary, as well as using the parallelized SIMD instruction at runtime, bettering the runtime performance. Without this ability, the function has to be evaluated at runtime if using the SIMD compiler intrinsic.</p>\n\n<p>I found <a href=\"https://stackoverflow.com/questions/42132565/branching-on-constexpr-evaluation-overloading-on-constexpr\">a thread</a> referencing SIMD instructions at compile time, however, the only answer suggests using an extra boolean argument to tell the function to run at compile time. This is not possible for operator overloading and thus did not help.\nI also found <a href=\"https://stackoverflow.com/questions/40409323/compile-time-or-runtime-detection-within-a-constexpr-function\">another thread</a> which would suggest using a technique similar to this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>\ntemplate &lt;int&gt;\nusing Void = void;\n\ntemplate &lt;typename F, typename A&gt;\nconstexpr auto\nis_a_constant_expression(F &amp;&amp;f, A &amp;&amp;a)\n    -&gt; decltype((std::forward&lt;F&gt;(f)(std::forward&lt;A&gt;(a)), std::true_type{})) { return {}; }\nconstexpr std::false_type is_a_constant_expression(...) { return {}; }\n\nstruct Vec4 {\n    union {\n        __m128 simd_data;\n        float data[4];\n    };\n\n    inline constexpr Vec4 operator+(const Vec4 &amp;v) const;\n};\n\nstruct StaticStruct {\n    static constexpr Vec4 add_vec4_constexpr(const Vec4 &amp;v1, const Vec4 &amp;v2) {\n        return {v1.data[0] + v2.data[0],\n                v1.data[1] + v2.data[1],\n                v1.data[2] + v2.data[2],\n                v1.data[3] + v2.data[3]};\n    }\n    static inline Vec4 add_vec4_runtime(const Vec4 &amp;v1, const Vec4 &amp;v2) {\n        return {_mm_add_ps(v1.simd_data, v2.simd_data)};\n    }\n};\n\n#define IS_A_CONSTANT_EXPRESSION(EXPR)      \\\n    is_a_constant_expression(               \\\n        [](auto ty) -&gt; Void&lt;(decltype(ty):: \\\n                                 EXPR,      \\\n                             0)&gt; {},        \\\n        StaticStruct{})\n\n#define MY_MIN(...) \\\n    IS_A_CONSTANT_EXPRESSION(StaticStruct ::MyMin_constexpr(__VA_ARGS__)) ? StaticStruct ::MyMin_constexpr(__VA_ARGS__) : StaticStruct ::MyMin_runtime(__VA_ARGS__)\n\ninline constexpr Vec4 Vec4::operator+(const Vec4 &amp;v) const {\n    return IS_A_CONSTANT_EXPRESSION(StaticStruct::add_vec4_constexpr(*this, v)) ? StaticStruct::add_vec4_constexpr(*this, v) : StaticStruct::add_vec4_runtime(*this, v);\n}\n</code></pre>\n\n<p>However, I could not understand why this should work (*for normal functions) as well as why it does not work in this case. The error I get is relevant to capturing <code>this</code> inside of a lambda, however I do not entirely understand why a lambda is needed in this case and am wondering if there is a better way of doing this.</p>\n"}, {"tags": ["c++", "arrays", "dynamic-arrays", "array-algorithms"], "comments": [{"owner": {"reputation": 1240, "user_id": 5317459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd9f6135b6a4aac6f1947ba02adabafc?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Jha", "link": "https://stackoverflow.com/users/5317459/sumit-jha"}, "edited": false, "score": 0, "creation_date": 1574261543, "post_id": 58957002, "comment_id": 104169781, "body": "what did you do so far? What is blocking you?"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574261929, "post_id": 58957002, "comment_id": 104170040, "body": "nulls or integers? How are you going to represent your data structure? Using <code>std::variant</code> or <code>std::optional</code> or tagged unions or something?"}, {"owner": {"reputation": 15, "user_id": 8929331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8380b200f0b94a3a864e3c41bdef56f6?s=128&d=identicon&r=PG&f=1", "display_name": "Hgrammer", "link": "https://stackoverflow.com/users/8929331/hgrammer"}, "reply_to_user": {"reputation": 1240, "user_id": 5317459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd9f6135b6a4aac6f1947ba02adabafc?s=128&d=identicon&r=PG&f=1", "display_name": "Sumit Jha", "link": "https://stackoverflow.com/users/5317459/sumit-jha"}, "edited": false, "score": 0, "creation_date": 1574781885, "post_id": 58957002, "comment_id": 104348116, "body": "@SumitJha please see edit. Thanks for help"}, {"owner": {"reputation": 15, "user_id": 8929331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8380b200f0b94a3a864e3c41bdef56f6?s=128&d=identicon&r=PG&f=1", "display_name": "Hgrammer", "link": "https://stackoverflow.com/users/8929331/hgrammer"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1574781949, "post_id": 58957002, "comment_id": 104348160, "body": "@Shawn I am actually a dynamic array. I know there are STL container like vectors, but for learning purposes I want to actually implement it."}], "owner": {"reputation": 15, "user_id": 8929331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8380b200f0b94a3a864e3c41bdef56f6?s=128&d=identicon&r=PG&f=1", "display_name": "Hgrammer", "link": "https://stackoverflow.com/users/8929331/hgrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1574781871, "creation_date": 1574261012, "last_edit_date": 1574781871, "question_id": 58957002, "link": "https://stackoverflow.com/questions/58957002/custom-arraysort-algorithm-to-align-elements-centrally-pad-nulls-on-either-s", "title": "Custom arraySort() algorithm to align elements centrally &amp; pad nulls on either side", "body": "<p>Say I have an array similar to c++ vectors with push and pop inserts/deletes on either side of the array. Whats an efficient way to sort arrays e.g</p>\n\n<p>Arr1 size (NoOfElements) = 3 Capacity = 9\nIt would look like this:\n[null, 1, 2, null, null, null, 3, null, null]</p>\n\n<p>A sort algorithm should sort above array as\n[null, null, null, 1, 2, 3, null, null, null]</p>\n\n<p>So basically all elements in the middle and each size padded with null values equally. Of course in certain cases the number of null elements will not always be equals on each side. </p>\n\n<p>Thanks</p>\n\n<p>Edit- The below is a current algorithm I have developed. It takes an array of int values, the capacity(total size) of array and the size (number of elements) in the array. The function SHOULD sort the contents of the array \u201cvalues\u201d to match above expectation. E.g if an array[10] is passed with size = 5 then there are 5 free spaces. The new array returned from this function should therefore have 3 empty spaces at the front, the 5 elements and 2 empty spaces at the back. </p>\n\n<p><a href=\"https://i.stack.imgur.com/zMXS2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zMXS2.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 0, "creation_date": 1574261230, "post_id": 58956996, "comment_id": 104169591, "body": "possible duplicate <a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\" title=\"what is array decaying\">stackoverflow.com/questions/1461432/what-is-array-decaying</a>"}, {"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 1, "creation_date": 1574261338, "post_id": 58956996, "comment_id": 104169667, "body": "I&#39;m not sure I understand your second example.  How did you determine that it &quot;print memory address of array pointer + 1&quot;, I&#39;ve compared variations (<code>&amp;array</code>, <code>array</code> and <code>&amp;array[0]</code>) and they had all the same value."}, {"owner": {"reputation": 501, "user_id": 11144794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb6d431490a2e8a9d50745c9ffa07103?s=128&d=identicon&r=PG&f=1", "display_name": "kkxx", "link": "https://stackoverflow.com/users/11144794/kkxx"}, "reply_to_user": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1574272799, "post_id": 58956996, "comment_id": 104176521, "body": "@AProgrammer, I have updated it. I mean, print the memory address of the decayed array pointer, which is the memory address of array[0], which is 0x7ffdf3e66f50. What confused me is that, the first one print out the value of the array, which is &quot;Alex&quot;; while the second one prints out the memory address of the first element of the array."}, {"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1574277568, "post_id": 58956996, "comment_id": 104178788, "body": "Ok, the duplicate should then answer your question."}], "owner": {"reputation": 501, "user_id": 11144794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb6d431490a2e8a9d50745c9ffa07103?s=128&d=identicon&r=PG&f=1", "display_name": "kkxx", "link": "https://stackoverflow.com/users/11144794/kkxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "closed_date": 1574261207, "answer_count": 0, "score": 0, "last_activity_date": 1574272675, "creation_date": 1574260987, "last_edit_date": 1574272675, "question_id": 58956996, "link": "https://stackoverflow.com/questions/58956996/array-is-decayed-as-a-pointer-which-is-pointing-to-its-first-element-in-c", "closed_reason": "Duplicate", "title": "array is decayed as a pointer which is pointing to its first element in c++", "body": "<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    char myName[]{ \"Alex\" }; // fixed array\n    std::cout &lt;&lt; myName &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>The output of the above code is: Alex</p>\n\n<p>On the other hand, the output of the following code </p>\n\n<pre><code>int main()\n{\n     int array []{ 9, 7, 5, 3, 1 };\n\n     std::cout &lt;&lt; array &lt;&lt; '\\n'; // print memory address of array pointer \n }\n</code></pre>\n\n<p>is: 0x7ffdf3e66f50\nI understand both and then was confused at the same time. So I need more clarifications.  </p>\n"}]